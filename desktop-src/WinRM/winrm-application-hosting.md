---
title: Infraestrutura para gerenciar serviços hospedados
description: Gerenciamento Remoto do Windows 2,0 (WinRM) apresenta uma estrutura de hospedagem. Para usar a estrutura, os plug-ins do WinRM são escritos para expor dados de gerenciamento de um aplicativo na infraestrutura do WinRM.
ms.assetid: 924dcc70-9a29-45a6-99a2-5681235e4574
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8439aca1f36d2d0c2cebb6ed3111aeaa2e4fcee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104292782"
---
# <a name="infrastructure-for-managing-hosted-services"></a><span data-ttu-id="69444-104">Infraestrutura para gerenciar serviços hospedados</span><span class="sxs-lookup"><span data-stu-id="69444-104">Infrastructure for Managing Hosted Services</span></span>

<span data-ttu-id="69444-105">Gerenciamento Remoto do Windows 2,0 (WinRM) apresenta uma estrutura de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="69444-105">Windows Remote Management 2.0 (WinRM) introduces a hosting framework.</span></span> <span data-ttu-id="69444-106">Para usar a estrutura, os plug-ins do WinRM são escritos para expor dados de gerenciamento de um aplicativo na infraestrutura do WinRM.</span><span class="sxs-lookup"><span data-stu-id="69444-106">To use the framework, WinRM plug-ins are written that expose management data of an application within the WinRM infrastructure.</span></span> <span data-ttu-id="69444-107">Há suporte para dois modelos de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="69444-107">Two hosting models are supported.</span></span> <span data-ttu-id="69444-108">Uma é Serviços de Informações da Internet (IIS) â € "com base no serviço e o outro é WinRMâ".</span><span class="sxs-lookup"><span data-stu-id="69444-108">One is Internet Information Services (IIS)â€“based and the other is WinRMâ€“service based.</span></span> <span data-ttu-id="69444-109">O modelo baseado em WinRM usa HTTP.sys e não depende do IIS.</span><span class="sxs-lookup"><span data-stu-id="69444-109">The WinRM-based model uses HTTP.sys and does not depend on IIS.</span></span>

<span data-ttu-id="69444-110">As seções a seguir descrevem os modelos de hospedagem:</span><span class="sxs-lookup"><span data-stu-id="69444-110">The following sections describe the hosting models:</span></span>

-   [<span data-ttu-id="69444-111">Modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-111">WinRM IIS Extension Hosting Model</span></span>](#winrm-iis-extension-hosting-model)
    -   [<span data-ttu-id="69444-112">Balanceamento de carga no modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-112">Load Balancing in the WinRM IIS Extension Hosting Model</span></span>](#load-balancing-in-the-winrm-iis-extension-hosting-model)
    -   [<span data-ttu-id="69444-113">Redirecionamento de HTTP no modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-113">HTTP Redirection in the WinRM IIS Extension Hosting Model</span></span>](#http-redirection-in-the-winrm-iis-extension-hosting-model)
-   [<span data-ttu-id="69444-114">Modelo de hospedagem do serviço WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-114">WinRM Service Hosting Model</span></span>](#winrm-service-hosting-model)

## <a name="winrm-iis-extension-hosting-model"></a><span data-ttu-id="69444-115">Modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-115">WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="69444-116">O módulo de extensão do IIS do WinRM é um componente opcional que é instalado usando o **Gerenciador do servidor**.</span><span class="sxs-lookup"><span data-stu-id="69444-116">The WinRM IIS extension module is an optional component that is installed using the **Server Manager**.</span></span> <span data-ttu-id="69444-117">O módulo de extensão do IIS do WinRM é usado para criar pontos de extremidade habilitados para WinRMâ de dentro do serviço IIS.</span><span class="sxs-lookup"><span data-stu-id="69444-117">The WinRM IIS extension module is used to create WinRMâ€“enabled endpoints from within the IIS service.</span></span> <span data-ttu-id="69444-118">Esse módulo pode ser habilitado no nível do site ou do diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="69444-118">This module can be enabled at either the website or virtual directory level.</span></span> <span data-ttu-id="69444-119">Ele funciona interceptando e redirecionando as solicitações de entrada para o site ou diretório virtual associado.</span><span class="sxs-lookup"><span data-stu-id="69444-119">It works by intercepting and redirecting incoming requests to the associated website or virtual directory.</span></span> <span data-ttu-id="69444-120">As solicitações são redirecionadas para um módulo do WinRM que analisa o conteúdo e, em seguida, determina qual plug-in WinRM está configurado para lidar com cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="69444-120">The requests are redirected to a WinRM module that analyzes the content and then determines which WinRM plug-in is configured to handle each request.</span></span> <span data-ttu-id="69444-121">Para obter mais informações, consulte [configuração de plug-in do host do IIS](iis-host-plug-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="69444-121">For more information, see [IIS Host Plug-in Configuration](iis-host-plug-in-configuration.md).</span></span>

<span data-ttu-id="69444-122">O modelo de Hospedagem de extensão do IIS do WinRM foi projetado para lidar com um grande volume de solicitações.</span><span class="sxs-lookup"><span data-stu-id="69444-122">The WinRM IIS extension hosting model is designed to handle a large volume of requests.</span></span> <span data-ttu-id="69444-123">Se o modelo baseado no IIS for usado como a estrutura de hospedagem, os seguintes recursos estarão disponíveis:</span><span class="sxs-lookup"><span data-stu-id="69444-123">If the IIS-based model is used as the hosting framework, the following features are available:</span></span>

-   <span data-ttu-id="69444-124">Os módulos de autenticação padrão do IIS.</span><span class="sxs-lookup"><span data-stu-id="69444-124">The standard IIS authentication modules.</span></span>
-   <span data-ttu-id="69444-125">O processo do pool de aplicativos do IIS para hospedar todos os plug-ins.</span><span class="sxs-lookup"><span data-stu-id="69444-125">The IIS application pool process for hosting all plug-ins.</span></span>
-   <span data-ttu-id="69444-126">Gerenciamento de cotas para limitação de usuários pesados do sistema.</span><span class="sxs-lookup"><span data-stu-id="69444-126">Quota management for throttling heavy users of the system.</span></span> <span data-ttu-id="69444-127">Para obter mais informações, consulte [Gerenciamento de cota para shells remotos](quotas.md).</span><span class="sxs-lookup"><span data-stu-id="69444-127">For more information, see [Quota Management for Remote Shells](quotas.md).</span></span>
-   <span data-ttu-id="69444-128">Um modelo de plug-in de Shell.</span><span class="sxs-lookup"><span data-stu-id="69444-128">A shell plug-in model.</span></span> <span data-ttu-id="69444-129">Consulte [API do shell do cliente WinRM](client-shell-api.md).</span><span class="sxs-lookup"><span data-stu-id="69444-129">See [WinRM Client Shell API](client-shell-api.md).</span></span>
-   <span data-ttu-id="69444-130">Um modelo de autorização flexível.</span><span class="sxs-lookup"><span data-stu-id="69444-130">A flexible authorization model.</span></span> <span data-ttu-id="69444-131">Consulte [API de plug-in do WinRM](winrm-plugin-api.md).</span><span class="sxs-lookup"><span data-stu-id="69444-131">See [WinRM Plugin API](winrm-plugin-api.md).</span></span>

### <a name="load-balancing-in-the-winrm-iis-extension-hosting-model"></a><span data-ttu-id="69444-132">Balanceamento de carga no modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-132">Load Balancing in the WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="69444-133">A maioria dos balanceadores de carga (LBs) dá suporte a um modelo de adesão baseado em cookie.</span><span class="sxs-lookup"><span data-stu-id="69444-133">Most load balancers (LBs) support a cookie-based stickiness model.</span></span> <span data-ttu-id="69444-134">O LB insere um cookie na resposta à primeira solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="69444-134">The LB inserts a cookie into the response to the first request from the client.</span></span> <span data-ttu-id="69444-135">Para todas as solicitações subsequentes, o cookie é transmitido na solicitação e o LB usa o cookie para rotear a solicitação para o servidor apropriado.</span><span class="sxs-lookup"><span data-stu-id="69444-135">For all subsequent requests, the cookie is transmitted in the request and the LB uses the cookie to route the request to the appropriate server.</span></span>

<span data-ttu-id="69444-136">Em ambientes em que o WinRM 2,0 é hospedado por trás de um LB, o LB deve ser configurado para prefixar MS-WSMAN para o nome do cookie.</span><span class="sxs-lookup"><span data-stu-id="69444-136">In environments where WinRM 2.0 is hosted behind an LB, the LB should be configured to prefix MS-WSMAN to the name of the cookie.</span></span> <span data-ttu-id="69444-137">Além disso, o LB precisa ser configurado para permitir que o tempo de vida do cookie seja infinito, pois o cliente WinRM deve controlar por quanto tempo o cookie é válido.</span><span class="sxs-lookup"><span data-stu-id="69444-137">In addition, the LB needs to be configured to allow the lifetime of the cookie to be infinite, because the WinRM client should control how long the cookie is valid.</span></span>

<span data-ttu-id="69444-138">Veja a seguir um exemplo de um nome de cookie:</span><span class="sxs-lookup"><span data-stu-id="69444-138">The following is an example of a cookie name:</span></span>

``` syntax
MS-WSMAN=2046820362.20480.0000; path=/
```

### <a name="http-redirection-in-the-winrm-iis-extension-hosting-model"></a><span data-ttu-id="69444-139">Redirecionamento de HTTP no modelo de Hospedagem de extensão do IIS do WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-139">HTTP Redirection in the WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="69444-140">O WinRM 2,0 pode lidar com o redirecionamento de HTTP.</span><span class="sxs-lookup"><span data-stu-id="69444-140">WinRM 2.0 can handle HTTP redirection.</span></span> <span data-ttu-id="69444-141">É recomendável que todo o redirecionamento use protocolo SSL (SSL) e que todos os aplicativos validem o URI Redirecionado antes de criar uma nova sessão.</span><span class="sxs-lookup"><span data-stu-id="69444-141">It is recommended that all redirection use Secure Sockets Layer (SSL), and that all applications validate the redirected URI before creating a new session.</span></span>

## <a name="winrm-service-hosting-model"></a><span data-ttu-id="69444-142">Modelo de hospedagem do serviço WinRM</span><span class="sxs-lookup"><span data-stu-id="69444-142">WinRM Service Hosting Model</span></span>

<span data-ttu-id="69444-143">O modelo baseado em serviço WinRM é executado sobre HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="69444-143">The WinRM service-based model runs on top of HTTP.sys.</span></span> <span data-ttu-id="69444-144">O serviço WinRM é um serviço voltado para a rede que lida com solicitações de clientes WinRM.</span><span class="sxs-lookup"><span data-stu-id="69444-144">The WinRM service is a network facing service that handles requests from WinRM clients.</span></span> <span data-ttu-id="69444-145">O serviço determina se a solicitação é roteada para um plug-in que é executado no serviço principal ou é roteado por meio de um host onde o plug-in de terceiros é executado.</span><span class="sxs-lookup"><span data-stu-id="69444-145">The service determines whether the request is routed to a plug-in that runs in the main service or is routed through a host where the third-party plug-in is run.</span></span> <span data-ttu-id="69444-146">Esse modelo destina-se a cenários em que a carga no nó gerenciado está baixa.</span><span class="sxs-lookup"><span data-stu-id="69444-146">This model is intended for scenarios where the load on the managed node is low.</span></span> <span data-ttu-id="69444-147">Além disso, esse modelo destina-se a cenários em que a hospedagem do IIS não é uma opção.</span><span class="sxs-lookup"><span data-stu-id="69444-147">Moreover, this model is intended for scenarios where IIS hosting is not an option.</span></span> <span data-ttu-id="69444-148">Para obter mais informações, consulte [configuração de plug-in do serviço WinRM](wsman-service-plug-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="69444-148">For more information, see [WinRM Service Plug-in Configuration](wsman-service-plug-in-configuration.md).</span></span>

 

 




