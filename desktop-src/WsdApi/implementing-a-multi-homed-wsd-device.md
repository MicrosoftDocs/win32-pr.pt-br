---
description: Este tópico descreve o suporte a dispositivos de hospedagem múltipla no WSDAPI e fornece recomendações de implementação para desenvolvedores de clientes e dispositivos.
ms.assetid: d30ed536-d477-4f50-8c80-aacc35f948b9
title: Implementando um dispositivo WSD de hospedagem múltipla
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ac3537b96a577db47419d55cb5c6f732f8f7906
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171648"
---
# <a name="implementing-a-multi-homed-wsd-device"></a><span data-ttu-id="9340a-103">Implementando um dispositivo WSD de hospedagem múltipla</span><span class="sxs-lookup"><span data-stu-id="9340a-103">Implementing a Multi-Homed WSD Device</span></span>

<span data-ttu-id="9340a-104">O [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) e os [dispositivos Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) não descrevem a implementação de dispositivos de hospedagem múltipla.</span><span class="sxs-lookup"><span data-stu-id="9340a-104">[WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) and the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) do not describe the implementation of multi-homed devices.</span></span> <span data-ttu-id="9340a-105">Este tópico descreve o suporte a dispositivos de hospedagem múltipla no WSDAPI e fornece recomendações de implementação para desenvolvedores de clientes e dispositivos.</span><span class="sxs-lookup"><span data-stu-id="9340a-105">This topic describes multi-homed device support in WSDAPI, and provides implementation recommendations to client and device developers.</span></span> <span data-ttu-id="9340a-106">Neste tópico, supõe-se que as mensagens de descoberta sejam enviadas por IPv4 e IPv6 (se disponível) com a mesma ID de mensagem e informações de sequenciamento de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9340a-106">In this topic, it is assumed that discovery messages are sent over both IPv4 and IPv6 (if available) with the same message ID and application sequencing information.</span></span>

## <a name="discovery-in-a-multi-homed-environment"></a><span data-ttu-id="9340a-107">Descoberta em um ambiente de hospedagem múltipla</span><span class="sxs-lookup"><span data-stu-id="9340a-107">Discovery in a multi-homed environment</span></span>

<span data-ttu-id="9340a-108">Conforme mencionado na seção [Hello](hello-message.md) e [XAddrs](xaddr-validation-rules.md) da [funcionalidade adicional de WS-Discovery](additional-ws-discovery-functionality.md), o WSDAPI nunca fornece XAddrs em uma mensagem de saudação.</span><span class="sxs-lookup"><span data-stu-id="9340a-108">As mentioned in [Hello](hello-message.md) and [XAddrs](xaddr-validation-rules.md) section of [Additional WS-Discovery Functionality](additional-ws-discovery-functionality.md), WSDAPI never provides XAddrs in a Hello message.</span></span> <span data-ttu-id="9340a-109">Isso significa que a mesma mensagem de saudação pode ser enviada em todas as interfaces de rede com a mesma ID de mensagem e informações de sequenciamento de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="9340a-109">That means the same Hello message can be sent on all network interfaces with the same message ID and application sequencing information.</span></span> <span data-ttu-id="9340a-110">Isso torna mais fácil para a detecção de colisão do cliente descartar várias mensagens de saudação do mesmo dispositivo quando um cliente e o dispositivo compartilharem mais de uma sub-rede.</span><span class="sxs-lookup"><span data-stu-id="9340a-110">This makes it easier for client collision detection to discard multiple Hello messages from the same device when a client and the device share more than one subnet.</span></span>

<span data-ttu-id="9340a-111">Como os [XAddrs](xaddr-validation-rules.md) não são enviados na mensagem de [saudação](hello-message.md) , as implementações do cliente devem enviar uma mensagem de [resolução](resolve-message.md) para obter o endereço de dispositivo relevante.</span><span class="sxs-lookup"><span data-stu-id="9340a-111">Because the [XAddrs](xaddr-validation-rules.md) are not sent in the [Hello](hello-message.md) message, client implementations must send a [Resolve](resolve-message.md) message to get the relevant device address.</span></span> <span data-ttu-id="9340a-112">A resolução deve ser enviada em todas as interfaces de cliente com a mesma ID de mensagem e o dispositivo deve filtrar as mensagens duplicadas conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="9340a-112">The Resolve should be sent on all client interfaces with the same message ID, and the device should filter duplicate messages as needed.</span></span> <span data-ttu-id="9340a-113">O uso da mesma ID de mensagem para a mensagem de resolução permite que o dispositivo escolha uma interface preferencial para se comunicar com clientes, se necessário.</span><span class="sxs-lookup"><span data-stu-id="9340a-113">Using the same message ID for the Resolve message allows the device to pick a preferred interface for communicating with clients if necessary.</span></span>

<span data-ttu-id="9340a-114">Ao enviar uma mensagem [ResolveMatch](resolvematches-message.md) , um dispositivo deve fornecer [XAddrs](xaddr-validation-rules.md) relacionados à interface de rede sobre a qual ele está unicast a mensagem.</span><span class="sxs-lookup"><span data-stu-id="9340a-114">When sending a [ResolveMatch](resolvematches-message.md) message, a device should provide [XAddrs](xaddr-validation-rules.md) that relate to the network interface over which it is unicasting the message.</span></span> <span data-ttu-id="9340a-115">Essa prática ajuda a evitar várias tentativas de conexão de cliente e a lógica de repetição complicada.</span><span class="sxs-lookup"><span data-stu-id="9340a-115">This practice helps to avoid multiple client connection attempts and complicated retry logic.</span></span>

## <a name="metadata-exchange-in-a-multi-homed-environment"></a><span data-ttu-id="9340a-116">Troca de metadados em um ambiente de hospedagem múltipla</span><span class="sxs-lookup"><span data-stu-id="9340a-116">Metadata exchange in a multi-homed environment</span></span>

<span data-ttu-id="9340a-117">A implementação da troca de metadados em um ambiente de hospedagem múltipla é mais difícil do que implementar a descoberta devido ao controle de versão de metadados.</span><span class="sxs-lookup"><span data-stu-id="9340a-117">Implementing metadata exchange in a multi-homed environment is more difficult than implementing discovery because of metadata versioning.</span></span> <span data-ttu-id="9340a-118">Se um cliente solicitar metadados sobre várias interfaces, o cliente poderá receber várias mensagens [GetResponse](getresponse--metadata-exchange--message.md) em diferentes interfaces.</span><span class="sxs-lookup"><span data-stu-id="9340a-118">If a client requests metadata over multiple interfaces, then the client can receive multiple [GetResponse](getresponse--metadata-exchange--message.md) messages over different interfaces.</span></span> <span data-ttu-id="9340a-119">Essas mensagens GetResponse podem conter seções diferentes de metadados de **relação** com a mesma versão de metadados.</span><span class="sxs-lookup"><span data-stu-id="9340a-119">These GetResponse messages can contain different **Relationship** metadata sections with the same metadata version.</span></span> <span data-ttu-id="9340a-120">Isso reduz o valor do número de versão de metadados.</span><span class="sxs-lookup"><span data-stu-id="9340a-120">This reduces the value of the metadata version number.</span></span>

<span data-ttu-id="9340a-121">Há uma abordagem alternativa, em que uma única mensagem [GetResponse](getresponse--metadata-exchange--message.md) é enviada em resposta com todos os endereços para o serviço.</span><span class="sxs-lookup"><span data-stu-id="9340a-121">There is an alternative approach, where a single [GetResponse](getresponse--metadata-exchange--message.md) message is sent in response with all addresses for the service.</span></span> <span data-ttu-id="9340a-122">A desvantagem desse método é que as informações privadas, como a topologia de redes indiretamente acessíveis, podem ser divulgadas.</span><span class="sxs-lookup"><span data-stu-id="9340a-122">The disadvantage of this method is that private information, such as the topology of indirectly accessible networks, may be disclosed.</span></span>

<span data-ttu-id="9340a-123">No Windows Vista, os metadados fornecidos pelo WSDAPI contêm apenas endereços que são válidos para a interface na qual a solicitação de metadados foi recebida.</span><span class="sxs-lookup"><span data-stu-id="9340a-123">On Windows Vista, the metadata provided by WSDAPI contains only addresses that are valid for the interface upon which the metadata request was received.</span></span>

 

 



