---
description: Qualquer analisador de pacotes de rede que possa exibir pacotes brutos pode ser usado para inspecionar solicitações de troca de metadados HTTP. O Monitor de Rede da Microsoft 3 (Netmon) é recomendado. Para obter mais informações sobre o Netmon, consulte baixando os filtros do Netmon e do DPWS de exemplo.
ms.assetid: b3b6c4d1-5fa3-41fb-ae1d-067638e385b0
title: Inspecionando rastreamentos de rede para troca de metadados HTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0c9993c542789b7f11eb35344dd6b0b03bfbafc3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104165306"
---
# <a name="inspecting-network-traces-for-http-metadata-exchange"></a><span data-ttu-id="43b41-105">Inspecionando rastreamentos de rede para troca de metadados HTTP</span><span class="sxs-lookup"><span data-stu-id="43b41-105">Inspecting Network Traces for HTTP Metadata Exchange</span></span>

<span data-ttu-id="43b41-106">Qualquer analisador de pacotes de rede que possa exibir pacotes brutos pode ser usado para inspecionar solicitações de troca de metadados HTTP.</span><span class="sxs-lookup"><span data-stu-id="43b41-106">Any network packet analyzer that can display raw packets can be used to inspect HTTP metadata exchange requests.</span></span> <span data-ttu-id="43b41-107">O Monitor de Rede da Microsoft 3 (Netmon) é recomendado.</span><span class="sxs-lookup"><span data-stu-id="43b41-107">Microsoft Network Monitor 3 (Netmon) is recommended.</span></span> <span data-ttu-id="43b41-108">Para obter mais informações sobre o Netmon, consulte [baixando os filtros do Netmon e do DPWS de exemplo](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="43b41-108">For more information about Netmon, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>

<span data-ttu-id="43b41-109">Esse procedimento de diagnóstico pode não ser tão útil para clientes e hosts que usam um canal seguro para comunicações porque o conteúdo da mensagem é criptografado.</span><span class="sxs-lookup"><span data-stu-id="43b41-109">This diagnostic procedure may not be as useful for clients and hosts using a secure channel for communications because the message contents are encrypted.</span></span>

<span data-ttu-id="43b41-110">**Para inspecionar rastreamentos de rede para troca de metadados HTTP**</span><span class="sxs-lookup"><span data-stu-id="43b41-110">**To inspect network traces for HTTP metadata exchange**</span></span>

1.  <span data-ttu-id="43b41-111">Configure o host e o cliente para serem executados na rede (ou seja, certifique-se de que o host e o cliente funcionarão em computadores diferentes).</span><span class="sxs-lookup"><span data-stu-id="43b41-111">Configure the host and client to run across the network (that is, make sure that the host and client will operate on different machines).</span></span>
2.  <span data-ttu-id="43b41-112">Instale o analisador de pacotes (Netmon) no cliente ou no host.</span><span class="sxs-lookup"><span data-stu-id="43b41-112">Install the packet analyzer (Netmon) on either the client or the host.</span></span>
3.  <span data-ttu-id="43b41-113">Configure o analisador de pacotes para capturar o tráfego no adaptador de rede que está conectando o host e o cliente.</span><span class="sxs-lookup"><span data-stu-id="43b41-113">Configure the packet analyzer to capture traffic on the network adapter connecting the host and the client.</span></span>
4.  <span data-ttu-id="43b41-114">Reproduza a falha iniciando o host e o cliente ou pressionando F5 no Gerenciador de rede.</span><span class="sxs-lookup"><span data-stu-id="43b41-114">Reproduce the failure by starting the host and client or by pressing F5 in the Network Explorer.</span></span>
5.  <span data-ttu-id="43b41-115">Filtre os resultados para isolar o tráfego de WS-Discovery e de troca de metadados.</span><span class="sxs-lookup"><span data-stu-id="43b41-115">Filter the results to isolate WS-Discovery and metadata exchange traffic.</span></span> <span data-ttu-id="43b41-116">Para exibir os filtros de exemplo do Netmon, consulte [baixando os filtros de DPWS de Netmon e de exemplo](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="43b41-116">To view sample Netmon filters, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>
    > [!Note]  
    > <span data-ttu-id="43b41-117">Esta etapa é opcional.</span><span class="sxs-lookup"><span data-stu-id="43b41-117">This step is optional.</span></span>

     

6.  <span data-ttu-id="43b41-118">Verifique se as mensagens enviadas entre o cliente e o host atendem aos requisitos básicos de tráfego.</span><span class="sxs-lookup"><span data-stu-id="43b41-118">Verify that messages sent between client and host meet basic traffic requirements.</span></span>

## <a name="verifying-that-messages-meet-traffic-requirements"></a><span data-ttu-id="43b41-119">Verificando se as mensagens atendem aos requisitos de tráfego</span><span class="sxs-lookup"><span data-stu-id="43b41-119">Verifying that messages meet traffic requirements</span></span>

<span data-ttu-id="43b41-120">Os clientes e hosts WSDAPI devem enviar mensagens que estejam em conformidade com os critérios a seguir.</span><span class="sxs-lookup"><span data-stu-id="43b41-120">WSDAPI clients and hosts must send messages that conform to the following criteria.</span></span> <span data-ttu-id="43b41-121">Para obter informações gerais sobre os padrões de mensagem, consulte [descoberta e padrões de mensagem de troca de metadados](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="43b41-121">For general information about message patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

-   <span data-ttu-id="43b41-122">As mensagens devem atender aos requisitos de tráfego fornecidos no tópico [inspecionando os rastreamentos de rede para o WS-Discovery de UDP](inspecting-network-traces-for-udp-ws-discovery.md), a menos que seja absolutamente certo que WS-Discovery não esteja sendo usada para troca de metadados.</span><span class="sxs-lookup"><span data-stu-id="43b41-122">Messages must meet the traffic requirements provided in the topic [Inspecting Network Traces for UDP WS-Discovery](inspecting-network-traces-for-udp-ws-discovery.md), unless it is absolutely certain that WS-Discovery is not being used for metadata exchange.</span></span>
-   <span data-ttu-id="43b41-123">Uma conexão TCP deve ser estabelecida entre o cliente e o primeiro endereço de transporte fornecido no elemento **XAddrs** de uma mensagem [ProbeMatches](probematches-message.md) ou [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="43b41-123">A TCP connection must be established between the client and the first transport address provided in the **XAddrs** element of a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span> <span data-ttu-id="43b41-124">A lista a seguir mostra uma troca de pacotes típica usada para estabelecer uma conexão TCP.</span><span class="sxs-lookup"><span data-stu-id="43b41-124">The following list shows a typical packet exchange used to establish a TCP connection.</span></span>
    -   <span data-ttu-id="43b41-125">O cliente envia um pacote TCP SYN para o host em uma porta especificada.</span><span class="sxs-lookup"><span data-stu-id="43b41-125">The client sends a TCP SYN packet to the host at a specified port.</span></span>
    -   <span data-ttu-id="43b41-126">O host envia um pacote TCP SYN/ACK para o cliente.</span><span class="sxs-lookup"><span data-stu-id="43b41-126">The host sends a TCP SYN/ACK packet to the client.</span></span>
    -   <span data-ttu-id="43b41-127">O cliente envia um pacote de ACK TCP para o host em uma porta especificada.</span><span class="sxs-lookup"><span data-stu-id="43b41-127">The client sends a TCP ACK packet to the host at a specified port.</span></span>

    <span data-ttu-id="43b41-128">Depois que o cliente enviou um pacote TCP ACK, a conexão TCP é estabelecida.</span><span class="sxs-lookup"><span data-stu-id="43b41-128">Once the client has sent a TCP ACK packet, the TCP connection is established.</span></span> <span data-ttu-id="43b41-129">Observe que essa troca de mensagens não ocorrerá se uma conexão TCP tiver sido estabelecida anteriormente.</span><span class="sxs-lookup"><span data-stu-id="43b41-129">Note that this message exchange will not occur if a TCP connection has previously been established.</span></span>
-   <span data-ttu-id="43b41-130">O cliente deve enviar uma solicitação e mensagem http [Get](get--metadata-exchange--http-request-and-message.md) válida.</span><span class="sxs-lookup"><span data-stu-id="43b41-130">The client must send a valid [Get](get--metadata-exchange--http-request-and-message.md) HTTP request and message.</span></span>
-   <span data-ttu-id="43b41-131">O host deve estar ouvindo no caminho da URL especificado na solicitação HTTP [Get](get--metadata-exchange--http-request-and-message.md) .</span><span class="sxs-lookup"><span data-stu-id="43b41-131">The host must be listening on the URL path specified in the [Get](get--metadata-exchange--http-request-and-message.md) HTTP request.</span></span>
-   <span data-ttu-id="43b41-132">O elemento **to** de uma mensagem de [obtenção](get--metadata-exchange--http-request-and-message.md) de metadados deve estar presente e não estar vazio.</span><span class="sxs-lookup"><span data-stu-id="43b41-132">The **To** element of a [Get](get--metadata-exchange--http-request-and-message.md) metadata message must be present and not empty.</span></span> <span data-ttu-id="43b41-133">O valor do elemento **to** deve corresponder a um dos endereços de ponto de extremidade do host.</span><span class="sxs-lookup"><span data-stu-id="43b41-133">The value of the **To** element must match one of the host's endpoint addresses.</span></span> <span data-ttu-id="43b41-134">O endereço do ponto de extremidade de um host normalmente é anunciado em uma mensagem [ProbeMatches](probematches-message.md) ou [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="43b41-134">A host's endpoint address is typically advertised in a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span>
-   <span data-ttu-id="43b41-135">O host deve enviar um cabeçalho de resposta HTTP válido.</span><span class="sxs-lookup"><span data-stu-id="43b41-135">The host must send a valid HTTP response header.</span></span> <span data-ttu-id="43b41-136">Se a solicitação inicial tiver sido bem-sucedida, o cabeçalho de resposta deverá conter o código de status HTTP/1.1 200.</span><span class="sxs-lookup"><span data-stu-id="43b41-136">If the initial request was successful, the response header should contain the HTTP/1.1 200 status code.</span></span>
-   <span data-ttu-id="43b41-137">O host deve enviar uma mensagem [GetResponse](getresponse--metadata-exchange--message.md) válida.</span><span class="sxs-lookup"><span data-stu-id="43b41-137">The host must send a valid [GetResponse](getresponse--metadata-exchange--message.md) message.</span></span>
-   <span data-ttu-id="43b41-138">O elemento **RelatesTo** de uma mensagem [GetResponse](getresponse--metadata-exchange--message.md) deve estar presente e não deve estar vazio.</span><span class="sxs-lookup"><span data-stu-id="43b41-138">The **RelatesTo** element of a [GetResponse](getresponse--metadata-exchange--message.md) message must be present and must not be empty.</span></span> <span data-ttu-id="43b41-139">Seu valor deve corresponder ao valor do elemento **MessageId** da mensagem [Get](get--metadata-exchange--http-request-and-message.md) correspondente.</span><span class="sxs-lookup"><span data-stu-id="43b41-139">Its value must match the value of the **MessageId** element from the corresponding [Get](get--metadata-exchange--http-request-and-message.md) message.</span></span>

<span data-ttu-id="43b41-140">Se as solicitações HTTP ou as mensagens de troca de metadados enviadas pelo programa não estiverem em conformidade com esses requisitos de tráfego, a causa do problema foi identificada com êxito e nenhuma outra etapa de solução de problemas será necessária.</span><span class="sxs-lookup"><span data-stu-id="43b41-140">If the HTTP requests or metadata exchange messages sent by the program do not conform to these traffic requirements, the cause of the problem has been successfully identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="43b41-141">Reescreva o programa para que ele gere mensagens e solicitações em conformidade e teste o programa novamente.</span><span class="sxs-lookup"><span data-stu-id="43b41-141">Rewrite the program so that it generates conformant messages and requests and retest the program.</span></span>

<span data-ttu-id="43b41-142">Se a origem do problema ainda não puder ser identificada, entre em contato com o suporte da Microsoft para obter assistência.</span><span class="sxs-lookup"><span data-stu-id="43b41-142">If the source of the problem still cannot be identified, contact Microsoft support for assistance.</span></span> <span data-ttu-id="43b41-143">Antes de entrar em contato com o suporte, colete os arquivos de log apropriados para ajudar a identificar a causa raiz do problema.</span><span class="sxs-lookup"><span data-stu-id="43b41-143">Before contacting support, collect the appropriate log files to help identify the root cause of the problem.</span></span> <span data-ttu-id="43b41-144">Para obter mais informações, consulte [habilitando o rastreamento WSDAPI](enabling-wsdapi-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="43b41-144">For more information, see [Enabling WSDAPI Tracing](enabling-wsdapi-tracing.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="43b41-145">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="43b41-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="43b41-146">Procedimentos de diagnóstico do WSDAPI</span><span class="sxs-lookup"><span data-stu-id="43b41-146">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="43b41-147">Introdução com a solução de problemas de WSDAPI</span><span class="sxs-lookup"><span data-stu-id="43b41-147">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> <dt>

[<span data-ttu-id="43b41-148">Baixando os filtros de DPWS e de exemplo do Netmon</span><span class="sxs-lookup"><span data-stu-id="43b41-148">Downloading Netmon and Sample DPWS Filters</span></span>](downloading-netmon-and-sample-dpws-filters.md)
</dt> </dl>

 

 



