---
description: O serviço Web na API de dispositivos (WSDAPI) é uma implementação do perfil de dispositivos para serviços Web (DPWS) para Windows Vista e Windows Server 2008.
ms.assetid: 8eaeacb3-43db-4a57-8548-e5b81213269c
title: Sobre os serviços Web em dispositivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dca7f7dc97dabd3dde7af12f3cece992b4f0ef6d
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/12/2021
ms.locfileid: "103837580"
---
# <a name="about-web-services-on-devices"></a><span data-ttu-id="95213-103">Sobre os serviços Web em dispositivos</span><span class="sxs-lookup"><span data-stu-id="95213-103">About Web Services on Devices</span></span>

<span data-ttu-id="95213-104">O serviço Web na API de dispositivos (WSDAPI) é uma implementação do [perfil de dispositivos para serviços Web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) para Windows Vista e windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="95213-104">Web Service on Devices API (WSDAPI) is an implementation of the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) for Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="95213-105">O DPWS restringe as especificações de serviços da Web para que os clientes possam descobrir facilmente os dispositivos.</span><span class="sxs-lookup"><span data-stu-id="95213-105">The DPWS constrains Web Services specifications so clients can easily discover devices.</span></span> <span data-ttu-id="95213-106">Depois que um dispositivo é descoberto, um cliente pode recuperar uma descrição dos serviços hospedados nesse dispositivo e usar esses serviços.</span><span class="sxs-lookup"><span data-stu-id="95213-106">Once a device is discovered, a client can retrieve a description of services hosted on that device and use those services.</span></span>

## <a name="devices-and-services"></a><span data-ttu-id="95213-107">Dispositivos e serviços</span><span class="sxs-lookup"><span data-stu-id="95213-107">Devices and Services</span></span>

<span data-ttu-id="95213-108">*Dispositivos* são componentes, geralmente hardware, que são anexados à rede.</span><span class="sxs-lookup"><span data-stu-id="95213-108">*Devices* are components, usually hardware, which are attached to the network.</span></span> <span data-ttu-id="95213-109">Os exemplos incluem impressoras, câmeras da Web e sistemas de vídeo.</span><span class="sxs-lookup"><span data-stu-id="95213-109">Examples include printers, Web cameras, and video systems.</span></span>

<span data-ttu-id="95213-110">Os dispositivos podem incluir zero ou mais *Serviços*.</span><span class="sxs-lookup"><span data-stu-id="95213-110">Devices may include zero or more *services*.</span></span> <span data-ttu-id="95213-111">Por exemplo, um dispositivo de vídeo pode incluir serviços que dão suporte à ativação e desativação, controle de reprodução, ejeção de mídia e streaming de vídeo.</span><span class="sxs-lookup"><span data-stu-id="95213-111">For example, a video device may include services that support power on and off, play control, media ejection, and video streaming.</span></span> <span data-ttu-id="95213-112">O controle de reprodução pode dar suporte a ações como reproduzir, pausar, retroceder e avançar rapidamente.</span><span class="sxs-lookup"><span data-stu-id="95213-112">Play control may support actions such as play, pause, rewind, and fast forward.</span></span>

## <a name="discovering-and-manipulating-a-device"></a><span data-ttu-id="95213-113">Descobrindo e manipulando um dispositivo</span><span class="sxs-lookup"><span data-stu-id="95213-113">Discovering and Manipulating a Device</span></span>

<span data-ttu-id="95213-114">O WSDAPI estende o modelo de Plug and Play local, permitindo que um cliente descubra e acesse um dispositivo remoto e seus serviços associados em uma rede.</span><span class="sxs-lookup"><span data-stu-id="95213-114">WSDAPI extends the local Plug and Play model by allowing a client to discover and access a remote device and its associated services across a network.</span></span> <span data-ttu-id="95213-115">Ele dá suporte à descoberta, mensagens de controle unidirecional e bidirecional e eventos.</span><span class="sxs-lookup"><span data-stu-id="95213-115">It supports discovery, one-way and two-way control messaging, and eventing.</span></span>

![Diagrama mostrando como o WSDAPI permite que um cliente descubra e acesse um dispositivo remoto.](images/overview01.png)

<span data-ttu-id="95213-117">Os dispositivos DPWS anunciam sua presença e expõem serviços (se houver) usando um endereço exclusivo e um conjunto padronizado de mensagens XML.</span><span class="sxs-lookup"><span data-stu-id="95213-117">DPWS devices announce their presence and expose services (if any) using a unique address and a standardized set of XML messages.</span></span> <span data-ttu-id="95213-118">Os clientes do DPWS podem usar o processo de descoberta para localizar o dispositivo, enumerar seus serviços e conectar-se a esses serviços para executar ações específicas.</span><span class="sxs-lookup"><span data-stu-id="95213-118">DPWS clients can use the discovery process to find the device, enumerate its services, and connect to those services to perform specific actions.</span></span>

<span data-ttu-id="95213-119">Um cliente WSDAPI primeiro consulta o dispositivo para obter descrições completas de seus serviços, incluindo os tipos de serviço (como um tipo de serviço de impressora ou um tipo de serviço de scanner).</span><span class="sxs-lookup"><span data-stu-id="95213-119">A WSDAPI client first queries the device for complete descriptions of its services, including the service types (such as a printer service type or a scanner service type).</span></span> <span data-ttu-id="95213-120">O cliente controla o dispositivo chamando comandos definidos por um tipo de serviço (por exemplo, chamando **CreatePrintJob** em um dispositivo com um tipo de serviço de impressora).</span><span class="sxs-lookup"><span data-stu-id="95213-120">The client then controls the device by calling commands defined by a service type (for example, by calling **CreatePrintJob** on a device with a printer service type).</span></span> <span data-ttu-id="95213-121">Opcionalmente, o cliente também pode monitorar as alterações de estado em cada serviço assinando os eventos que ocorrem durante a execução do comando.</span><span class="sxs-lookup"><span data-stu-id="95213-121">Optionally, the client can also monitor state changes in each service by subscribing to events that occur during command execution.</span></span>

![Diagrama mostrando como um cliente WSDAPI consulta e interage com um dispositivo.](images/netdevice01.png)

<span data-ttu-id="95213-123">Para obter mais informações sobre padrões de mensagens de dispositivo, consulte [descoberta e padrões de mensagem de troca de metadados](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="95213-123">For more information about device messaging patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

## <a name="logical-and-physical-addressing"></a><span data-ttu-id="95213-124">Endereçamento lógico e físico</span><span class="sxs-lookup"><span data-stu-id="95213-124">Logical and Physical Addressing</span></span>

<span data-ttu-id="95213-125">O endereçamento lógico é usado para identificar exclusivamente os dispositivos independentemente de seus endereços físicos.</span><span class="sxs-lookup"><span data-stu-id="95213-125">Logical addressing is used to uniquely identify devices independent of their physical addresses.</span></span> <span data-ttu-id="95213-126">O WS-Discovery fornece um mecanismo para resolver endereços lógicos em endereços físicos, permitindo que as mensagens de cliente para dispositivo ocorram.</span><span class="sxs-lookup"><span data-stu-id="95213-126">WS-Discovery provides a mechanism to resolve logical addresses into physical addresses, allowing client-to-device messaging to take place.</span></span> <span data-ttu-id="95213-127">Um exemplo é o NAS (armazenamento anexado à rede) que você carrega com você.</span><span class="sxs-lookup"><span data-stu-id="95213-127">An example is network attached storage (NAS) that you carry with you.</span></span> <span data-ttu-id="95213-128">Se você tiver um laptop e um NAS, seu laptop deverá ser capaz de reconhecer que ele é o mesmo dispositivo, independentemente do endereço físico (endereço IP) que o NAS Obtém à medida que você se move entre sub-redes.</span><span class="sxs-lookup"><span data-stu-id="95213-128">If you have a laptop and a NAS, your laptop should be able to recognize that it is the same device, regardless of the physical address (IP address) that the NAS obtains as you move between subnets.</span></span> <span data-ttu-id="95213-129">Fazer isso requer que o dispositivo tenha identidade que seja independente do endereço IP Obtido; como os mecanismos tradicionais, como o DNS, não estão disponíveis em um cenário de roaming normal, WS-Addressing e WS-Discovery fornecem resolução e endereçamento lógico como uma alternativa ad hoc.</span><span class="sxs-lookup"><span data-stu-id="95213-129">Accomplishing this requires the device have identity that is independent of the IP address it obtains; since traditional mechanisms like DNS are not available in a normal roaming scenario, WS-Addressing and WS-Discovery provide logical addressing and resolution as an ad-hoc alternative.</span></span>

<span data-ttu-id="95213-130">Quando um dispositivo é fabricado, ele recebe um identificador global exclusivo, representado como um URI UUID.</span><span class="sxs-lookup"><span data-stu-id="95213-130">When a device is manufactured, it is given a globally unique identifier, represented as a UUID URI.</span></span> <span data-ttu-id="95213-131">Esse identificador nunca será alterado para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="95213-131">This identifier will never change for the device.</span></span> <span data-ttu-id="95213-132">Quando o dispositivo estiver ligado, ele sempre anunciará seu endereço lógico por meio de uma WS-Discovery mensagem de [saudação](hello-message.md) e aceitará solicitações para converter isso em um endereço físico (normalmente http) via WS-Discovery [resolver](resolve-message.md) ou [investigar](probe-message.md) mensagens.</span><span class="sxs-lookup"><span data-stu-id="95213-132">When the device is powered on, it will always announce its logical address via a WS-Discovery [Hello](hello-message.md) message, and will accept requests to convert that to a physical address (typically HTTP) via WS-Discovery [Resolve](resolve-message.md) or [Probe](probe-message.md) messages.</span></span> <span data-ttu-id="95213-133">Depois que um endereço físico (endereço IP) válido for obtido, todas as mensagens ocorrerão sobre esse endereço, e WS-Discovery será usada somente se o endereço for alterado, o estado do dispositivo mudar e os clientes precisarem ser notificados ou o dispositivo ficar offline.</span><span class="sxs-lookup"><span data-stu-id="95213-133">Once a valid physical address (IP address) is obtained, all messaging happens over that address, and WS-Discovery is used only if the address changes, the device changes state and the clients need to be notified, or the device goes offline.</span></span>

## <a name="building-applications"></a><span data-ttu-id="95213-134">Criando aplicativos</span><span class="sxs-lookup"><span data-stu-id="95213-134">Building Applications</span></span>

<span data-ttu-id="95213-135">O WSDAPI fornece uma pilha SOAP DPWS genérica para uso por aplicativos cliente e de serviço.</span><span class="sxs-lookup"><span data-stu-id="95213-135">WSDAPI provides a generic DPWS SOAP stack for use by client and service applications.</span></span> <span data-ttu-id="95213-136">Os [Serviços Web no gerador de código de dispositivos](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) podem ser usados para converter uma descrição de serviço (WSDL) em código de proxy e stub que os aplicativos podem chamar diretamente.</span><span class="sxs-lookup"><span data-stu-id="95213-136">The [Web Services on Devices Code Generator](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) can be used to convert a service description (WSDL) into proxy and stub code that applications can call directly.</span></span> <span data-ttu-id="95213-137">Esse código gerado transforma automaticamente chamadas de função e parâmetros em mensagens SOAP e em campos XML e, em seguida, chama o WSDAPI para emitir para solicitações para o cliente ou dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="95213-137">This generated code automatically transforms function calls and parameters into SOAP messages and XML fields, and then calls into WSDAPI to issue to requests to the remote device or client.</span></span>

<span data-ttu-id="95213-138">A descoberta de função pode ser usada ao criar aplicativos WSDAPI para criar e ativar instâncias de função retornadas por PnP.</span><span class="sxs-lookup"><span data-stu-id="95213-138">Function Discovery can be used when building WSDAPI applications to create and activate function instances returned by PnP.</span></span> <span data-ttu-id="95213-139">Essas instâncias de função contêm dados que podem ser usados para obter mais informações por meio de APIs PnP quando mais do que apenas a descoberta simples é necessária.</span><span class="sxs-lookup"><span data-stu-id="95213-139">These function instances contain data that can be used to obtain more information through the PnP APIs when more than just simple discovery is required.</span></span> <span data-ttu-id="95213-140">Para obter mais informações, consulte [descoberta de função](/previous-versions/windows/desktop/fundisc/fd-portal) e [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span><span class="sxs-lookup"><span data-stu-id="95213-140">For more information, see [Function Discovery](/previous-versions/windows/desktop/fundisc/fd-portal) and [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span></span>

## <a name="related-topics"></a><span data-ttu-id="95213-141">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="95213-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="95213-142">Padrões de mensagem de troca de metadados e descoberta</span><span class="sxs-lookup"><span data-stu-id="95213-142">Discovery and Metadata Exchange Message Patterns</span></span>](discovery-and-metadata-exchange-message-patterns.md)
</dt> <dt>

[<span data-ttu-id="95213-143">Conformidade de especificação do WSDAPI</span><span class="sxs-lookup"><span data-stu-id="95213-143">WSDAPI Specification Compliance</span></span>](wsdapi-specification-compliance.md)
</dt> <dt>

[<span data-ttu-id="95213-144">Visão geral das interfaces WSDAPI</span><span class="sxs-lookup"><span data-stu-id="95213-144">Overview of the WSDAPI Interfaces</span></span>](overview-of-the-wsdapi-interfaces.md)
</dt> </dl>

 

 
