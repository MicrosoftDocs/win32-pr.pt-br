---
description: A finalidade deste tópico é descrever a funcionalidade de descoberta implementada pelo WSDAPI, mas não descrita nas especificações DPWS ou WS-Discovery.
ms.assetid: ae7eff53-c932-4cba-9e71-c60f308f0e2d
title: Funcionalidade adicional de WS-Discovery
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce9856605273bec9c757e0b29c389991bf061309
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171230"
---
# <a name="additional-ws-discovery-functionality"></a><span data-ttu-id="549be-103">Funcionalidade adicional de WS-Discovery</span><span class="sxs-lookup"><span data-stu-id="549be-103">Additional WS-Discovery Functionality</span></span>

<span data-ttu-id="549be-104">Em alguns casos, o [perfil de dispositivos para serviços Web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) e especificações relacionadas não definem a funcionalidade de implementação explicitamente.</span><span class="sxs-lookup"><span data-stu-id="549be-104">In some cases, the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) and related specifications do not explicitly define implementation functionality.</span></span> <span data-ttu-id="549be-105">Por exemplo, a especificação [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) não define o comportamento de cliente e host em ambientes de hospedagem múltipla.</span><span class="sxs-lookup"><span data-stu-id="549be-105">For example, the [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) specification does not define client and host behavior in multi-homed environments.</span></span> <span data-ttu-id="549be-106">Quando o WSDAPI foi implementado, algumas funcionalidades de descoberta foram adicionadas além da funcionalidade definida na especificação.</span><span class="sxs-lookup"><span data-stu-id="549be-106">When WSDAPI was implemented, some discovery functionality was added beyond the functionality defined in the specification.</span></span>

<span data-ttu-id="549be-107">O WSDAPI também implementa partes selecionadas do WS-Discovery o CD1 v 1.1 para se comunicar com um proxy de descoberta sobre HTTP.</span><span class="sxs-lookup"><span data-stu-id="549be-107">WSDAPI also implements selected portions of WS-Discovery v1.1 CD1 for communicating with a discovery proxy over HTTP.</span></span>

<span data-ttu-id="549be-108">A finalidade deste tópico é descrever a funcionalidade de descoberta implementada pelo WSDAPI, mas não descrita nas especificações DPWS ou WS-Discovery.</span><span class="sxs-lookup"><span data-stu-id="549be-108">The purpose of this topic is to describe the discovery functionality implemented by WSDAPI but not otherwise described in the DPWS or WS-Discovery specifications.</span></span>

## <a name="ipv6-addresses-and-the-soapudp-uri-format"></a><span data-ttu-id="549be-109">Endereços IPv6 e o formato de URI SOAP. UDP</span><span class="sxs-lookup"><span data-stu-id="549be-109">IPv6 addresses and the soap.udp URI format</span></span>

<span data-ttu-id="549be-110">SOAP-over-UDP e WS-Discovery não descrevem explicitamente como um endereço IPv6 literal é representado no formato de URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="549be-110">SOAP-over-UDP and WS-Discovery do not explicitly describe how a literal IPv6 address is represented in the soap.udp URI format.</span></span> <span data-ttu-id="549be-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), "Uniform Resource Identifiers (URI): sintaxe genérica", indica que os endereços IPv6 literais não são suportados pelo formato de URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="549be-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), entitled "Uniform Resource Identifiers (URI): Generic Syntax", indicates that literal IPv6 addresses are not supported by the soap.udp URI format.</span></span>

<span data-ttu-id="549be-112">Para simplificar, o WSDAPI reconhece endereços IPv6 entre colchetes no esquema SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="549be-112">For simplicity, WSDAPI recognizes IPv6 addresses enclosed in square brackets in the soap.udp scheme.</span></span> <span data-ttu-id="549be-113">Por exemplo, o endereço `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` é reconhecido pelo WSDAPI.</span><span class="sxs-lookup"><span data-stu-id="549be-113">For example, the address `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` is recognized by WSDAPI.</span></span> <span data-ttu-id="549be-114">Isso é semelhante a como os endereços IPv6 são tratados em HTTP.</span><span class="sxs-lookup"><span data-stu-id="549be-114">This is similar to how IPv6 addresses are handled in HTTP.</span></span>

## <a name="hello-and-xaddrs"></a><span data-ttu-id="549be-115">Olá e XAddrs</span><span class="sxs-lookup"><span data-stu-id="549be-115">Hello and XAddrs</span></span>

<span data-ttu-id="549be-116">O objeto de hospedagem DPWS do WSDAPI nunca enviará um WS-Discovery mensagem de [saudação](hello-message.md) com [XAddrs](xaddr-validation-rules.md) no corpo da mensagem.</span><span class="sxs-lookup"><span data-stu-id="549be-116">WSDAPI's DPWS hosting object will never send a WS-Discovery [Hello](hello-message.md) message with [XAddrs](xaddr-validation-rules.md) in the message body.</span></span> <span data-ttu-id="549be-117">Um cliente sempre enviará uma mensagem de [resolução](resolve-message.md) depois de receber uma mensagem de saudação, se o cliente precisar obter o XAddrs.</span><span class="sxs-lookup"><span data-stu-id="549be-117">A client will always send a [Resolve](resolve-message.md) message after receiving a Hello message if the client needs to get the XAddrs.</span></span>

<span data-ttu-id="549be-118">Há dois benefícios dessa abordagem.</span><span class="sxs-lookup"><span data-stu-id="549be-118">There are two benefits of this approach.</span></span> <span data-ttu-id="549be-119">Primeiro, um dispositivo criado em WSDAPI nunca vai expor XAddrs que divulguem os endereços IP de redes privadas.</span><span class="sxs-lookup"><span data-stu-id="549be-119">First, a device built on WSDAPI will never expose XAddrs that disclose the IP addresses of private networks.</span></span> <span data-ttu-id="549be-120">Em segundo lugar, um dispositivo criado no WSDAPI expõe apenas XAddrs que são acessíveis para o cliente, o que significa que os endereços IPv6 nunca são enviados para um cliente IPv4.</span><span class="sxs-lookup"><span data-stu-id="549be-120">Secondly, a device built on WSDAPI only exposes XAddrs that are accessible to the client, which means that IPv6 addresses are never sent to an IPv4 client.</span></span>

<span data-ttu-id="549be-121">Quando uma mensagem de [investigação](probe-message.md) ou resolução é recebida, apenas um único XAddr é enviado em resposta.</span><span class="sxs-lookup"><span data-stu-id="549be-121">When a [Probe](probe-message.md) or Resolve message is received, only a single XAddr is sent in response.</span></span> <span data-ttu-id="549be-122">O XAddr enviado corresponde ao endereço local no qual a solicitação foi recebida.</span><span class="sxs-lookup"><span data-stu-id="549be-122">The sent XAddr corresponds to the local address on which the request was received.</span></span> <span data-ttu-id="549be-123">Se a solicitação foi recebida em sub-redes via IPv6, o WSDAPI fornecerá um endereço IPv6 global na resposta.</span><span class="sxs-lookup"><span data-stu-id="549be-123">If the request was received across subnets over IPv6, WSDAPI will provide a global IPv6 address in the response.</span></span>

## <a name="preferred-addresses"></a><span data-ttu-id="549be-124">Endereços preferenciais</span><span class="sxs-lookup"><span data-stu-id="549be-124">Preferred addresses</span></span>

<span data-ttu-id="549be-125">Um dispositivo pode fornecer vários XAddrs em uma mensagem [Hello](hello-message.md), [ProbeMatch](probematches-message.md)ou [ResolveMatch](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="549be-125">A device can provide multiple XAddrs in a [Hello](hello-message.md), [ProbeMatch](probematches-message.md), or [ResolveMatch](resolvematches-message.md) message.</span></span> <span data-ttu-id="549be-126">Um serviço também pode estar disponível em vários pontos de extremidade com endereços de transporte diferentes.</span><span class="sxs-lookup"><span data-stu-id="549be-126">A service can also be available at multiple endpoints with different transport addresses.</span></span> <span data-ttu-id="549be-127">Nesses casos, o WSDAPI tentará se comunicar com o dispositivo no primeiro endereço utilizável que encontrar.</span><span class="sxs-lookup"><span data-stu-id="549be-127">In these cases, WSDAPI will try to communicate with the device on the first usable address it finds.</span></span> <span data-ttu-id="549be-128">Um endereço pode ser usado se for de um protocolo disponível, como IPv4 em um computador em que o IPv4 está instalado ou IPv6 em um computador em que o IPv6 está instalado.</span><span class="sxs-lookup"><span data-stu-id="549be-128">An address is usable if it is from an available protocol, such as IPv4 on a machine where IPv4 is installed or IPv6 on a machine where IPv6 is installed.</span></span> <span data-ttu-id="549be-129">Além disso, se o endereço vier de um dispositivo ou serviço que não está na sub-rede local, ele só será utilizável se for IPv4, local de site IPv6 ou link local IPv6.</span><span class="sxs-lookup"><span data-stu-id="549be-129">Additionally, if the address came from a device or service that is not on the local subnet, it is usable only if it is IPv4, IPv6 site local, or IPv6 link local.</span></span>

## <a name="wsdl-in-metadata-exchange"></a><span data-ttu-id="549be-130">WSDL na troca de metadados</span><span class="sxs-lookup"><span data-stu-id="549be-130">WSDL in metadata exchange</span></span>

<span data-ttu-id="549be-131">Os dispositivos e serviços criados no WSDAPI não fornecem seu WSDL na troca de metadados, a menos que sejam estendidos pelo aplicativo para fornecer essas informações.</span><span class="sxs-lookup"><span data-stu-id="549be-131">Devices and services built on WSDAPI do not provide their WSDL in metadata exchange unless extended by the application to provide this information.</span></span> <span data-ttu-id="549be-132">Por padrão, o provisionamento de WSDL não faz parte do modelo de programação.</span><span class="sxs-lookup"><span data-stu-id="549be-132">By default, WSDL provision is not part of the programming model.</span></span>

## <a name="app_max_delay"></a><span data-ttu-id="549be-133">\_atraso máximo do aplicativo \_</span><span class="sxs-lookup"><span data-stu-id="549be-133">APP\_MAX\_DELAY</span></span>

<span data-ttu-id="549be-134">DPWS define \_ \_ o atraso máximo do aplicativo, o intervalo aleatório a ser atrasado entre o recebimento de uma [investigação](probe-message.md) e o envio de um [ProbeMatch](probematches-message.md), como 5.000 milissegundos.</span><span class="sxs-lookup"><span data-stu-id="549be-134">DPWS defines APP\_MAX\_DELAY, the random interval to delay between receiving a [Probe](probe-message.md) and sending a [ProbeMatch](probematches-message.md), as 5,000 milliseconds.</span></span> <span data-ttu-id="549be-135">O Firewall do Windows requer que o modelo de resposta de difusão unicast/solicitação multicast para UDP funcione apenas na janela de firewall de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="549be-135">Windows Firewall requires that the multicast request/unicast response model for UDP will only work within the 4 second firewall window.</span></span> <span data-ttu-id="549be-136">Como resultado, o WSDAPI transmitirá respostas em 2.500 MS ou menos, em vez da janela 5.000 MS descrita pelo \_ atraso máximo do aplicativo \_ .</span><span class="sxs-lookup"><span data-stu-id="549be-136">As a result, WSDAPI will transmit responses in 2,500 ms or less, instead of the 5,000 ms window described by APP\_MAX\_DELAY.</span></span>

## <a name="iana-port-reservations"></a><span data-ttu-id="549be-137">Reservas de porta IANA</span><span class="sxs-lookup"><span data-stu-id="549be-137">IANA port reservations</span></span>

<span data-ttu-id="549be-138">O WSDAPI usa a porta TCP 5357 para tráfego HTTP e a porta TCP 5358 para tráfego HTTPS por padrão.</span><span class="sxs-lookup"><span data-stu-id="549be-138">WSDAPI uses TCP port 5357 for HTTP traffic and TCP port 5358 for HTTPS traffic by default.</span></span> <span data-ttu-id="549be-139">Essas portas são reservadas para processos de privilégios mais baixos por meio de uma reserva de URL no HTTP.sys e também são reservadas com o IANA.</span><span class="sxs-lookup"><span data-stu-id="549be-139">These ports are reserved for lower privilege processes through a URL reservation in HTTP.sys, and are also reserved with IANA.</span></span>

## <a name="udp-port-sharing"></a><span data-ttu-id="549be-140">Compartilhamento de porta UDP</span><span class="sxs-lookup"><span data-stu-id="549be-140">UDP port sharing</span></span>

<span data-ttu-id="549be-141">O WSDAPI usa o compartilhamento de porta.</span><span class="sxs-lookup"><span data-stu-id="549be-141">WSDAPI uses port sharing.</span></span> <span data-ttu-id="549be-142">Mensagens unicast enviadas à porta 3702 podem não ser manipuladas corretamente por todos os aplicativos baseados em WSDAPI.</span><span class="sxs-lookup"><span data-stu-id="549be-142">Unicast messages sent to port 3702 may not be properly handled by all WSDAPI-based applications.</span></span> <span data-ttu-id="549be-143">Se um aplicativo se associar exclusivamente à porta 3702, ele poderá impedir que aplicativos baseados em WSDAPI usem essa porta corretamente.</span><span class="sxs-lookup"><span data-stu-id="549be-143">If an application binds exclusively to port 3702, it may prevent WSDAPI-based applications from using that port correctly.</span></span>

## <a name="ws-discovery-v11-cd1-proxy"></a><span data-ttu-id="549be-144">Proxy do CD1 do WS-Discovery v 1.1</span><span class="sxs-lookup"><span data-stu-id="549be-144">WS-Discovery v1.1 CD1 Proxy</span></span>

<span data-ttu-id="549be-145">O WSDAPI pesquisará e se comunicará com um proxy de descoberta que implementa o protocolo de modo gerenciado do CD1 do WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="549be-145">WSDAPI will search for and communicate with a discovery proxy that implements the WS-Discovery v1.1 CD1 managed mode protocol.</span></span> <span data-ttu-id="549be-146">WS-Discovery o CD1 v 1.1 é a primeira revisão de WS-Discovery incluir uma descrição explícita de um protocolo HTTP para a comunicação entre um proxy e um cliente ou dispositivo.</span><span class="sxs-lookup"><span data-stu-id="549be-146">WS-Discovery v1.1 CD1 is the first revision of WS-Discovery to include an explicit description of an HTTP protocol for communication between a proxy and a client or device.</span></span>

<span data-ttu-id="549be-147">Para limitar o número de versões simultâneas usadas em solicitações de multicast, o WSDAPI envia uma solicitação de investigação de WS-Discovery no namespace 2005/04, mas procura o tipo de DiscoveryProxy do CD1 do WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="549be-147">To limit the number of concurrent versions used in multicast requests, WSDAPI sends a WS-Discovery Probe request in the 2005/04 namespace, but searches for the WS-Discovery v1.1 CD1 DiscoveryProxy type.</span></span> <span data-ttu-id="549be-148">Se um proxy responder, o WSDAPI enviará uma investigação HTTP ou uma solicitação de resolução para o ponto de extremidade de proxy especificado, conforme definido em WS-Discovery o CD1 v 1.1.</span><span class="sxs-lookup"><span data-stu-id="549be-148">If a proxy responds, WSDAPI will send an HTTP Probe or Resolve request to the specified proxy endpoint as defined in WS-Discovery v1.1 CD1.</span></span>

 

 



