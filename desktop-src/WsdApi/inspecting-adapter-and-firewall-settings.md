---
description: Um firewall configurado incorretamente pode causar falha em aplicativos WSD.
ms.assetid: eba61235-29b4-463a-b7c5-d34d3b39b095
title: Inspecionando as configurações de firewall e adaptador
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 490909c9f3acdc3025e72350118f303bfdae73d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104296624"
---
# <a name="inspecting-adapter-and-firewall-settings"></a><span data-ttu-id="421f2-103">Inspecionando as configurações de firewall e adaptador</span><span class="sxs-lookup"><span data-stu-id="421f2-103">Inspecting Adapter and Firewall Settings</span></span>

<span data-ttu-id="421f2-104">Um firewall configurado incorretamente pode causar falha em aplicativos WSD.</span><span class="sxs-lookup"><span data-stu-id="421f2-104">A misconfigured firewall can cause WSD applications to fail.</span></span> <span data-ttu-id="421f2-105">Este tópico fornece alguns procedimentos de solução de problemas a serem usados quando clientes e hosts WSD não podem ver uns aos outros na rede.</span><span class="sxs-lookup"><span data-stu-id="421f2-105">This topic provides some troubleshooting procedures to use when WSD clients and hosts cannot see each other on the network.</span></span> <span data-ttu-id="421f2-106">As configurações de firewall devem ser inspecionadas antes de usar qualquer outro procedimento de solução de problemas de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="421f2-106">The firewall settings should be inspected before using any other application troubleshooting procedure.</span></span>

<span data-ttu-id="421f2-107">**Para inspecionar as configurações de adaptador e firewall**</span><span class="sxs-lookup"><span data-stu-id="421f2-107">**To inspect the adapter and firewall settings**</span></span>

1.  <span data-ttu-id="421f2-108">Verifique se a exceção de **descoberta de rede** está habilitada.</span><span class="sxs-lookup"><span data-stu-id="421f2-108">Verify that the **Network Discovery** exception is enabled.</span></span>
2.  <span data-ttu-id="421f2-109">Verifique se não há regras de firewall específicas do aplicativo bloqueando o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="421f2-109">Check that there are no application-specific firewall rules blocking the application.</span></span>
3.  <span data-ttu-id="421f2-110">Habilite explicitamente as portas usadas para descoberta e troca de metadados.</span><span class="sxs-lookup"><span data-stu-id="421f2-110">Explicitly enable the ports used for discovery and metadata exchange.</span></span>
4.  <span data-ttu-id="421f2-111">Desabilite o firewall e teste o aplicativo novamente.</span><span class="sxs-lookup"><span data-stu-id="421f2-111">Disable the firewall and retest the application.</span></span>
    > [!Note]  
    > <span data-ttu-id="421f2-112">O firewall deve ser habilitado novamente após a conclusão desta etapa.</span><span class="sxs-lookup"><span data-stu-id="421f2-112">The firewall should be re-enabled after completing this step.</span></span>

     

## <a name="verifying-that-the-network-discovery-exception-is-enabled"></a><span data-ttu-id="421f2-113">Verificando se a exceção de descoberta de rede está habilitada</span><span class="sxs-lookup"><span data-stu-id="421f2-113">Verifying that the Network Discovery exception is enabled</span></span>

<span data-ttu-id="421f2-114">Se algum aplicativo WS-Discovery estiver em execução, a exceção de firewall de **descoberta de rede** deverá ser permitida.</span><span class="sxs-lookup"><span data-stu-id="421f2-114">If any WS-Discovery applications are running, the **Network Discovery** firewall exception must be allowed.</span></span>

<span data-ttu-id="421f2-115">**Para habilitar a exceção de firewall de descoberta de rede**</span><span class="sxs-lookup"><span data-stu-id="421f2-115">**To enable the Network Discovery firewall exception**</span></span>

1.  <span data-ttu-id="421f2-116">Clique em **Iniciar**, **executar** e digite **firewall.cpl**.</span><span class="sxs-lookup"><span data-stu-id="421f2-116">Click **Start**, click **Run**, and then type **firewall.cpl**.</span></span> <span data-ttu-id="421f2-117">Isso abre o miniaplicativo do **painel de controle do firewall do Windows** .</span><span class="sxs-lookup"><span data-stu-id="421f2-117">This opens the **Windows Firewall Control Panel** applet.</span></span>
2.  <span data-ttu-id="421f2-118">Escolha **permitir um programa por meio do firewall do Windows**.</span><span class="sxs-lookup"><span data-stu-id="421f2-118">Choose **Allow a program through Windows Firewall**.</span></span>
3.  <span data-ttu-id="421f2-119">Na guia **exceções** , marque a caixa de seleção **descoberta de rede** .</span><span class="sxs-lookup"><span data-stu-id="421f2-119">On the **Exceptions** tab, select the **Network Discovery** check box.</span></span>
4.  <span data-ttu-id="421f2-120">Clique em **OK** para fechar o miniaplicativo firewall.</span><span class="sxs-lookup"><span data-stu-id="421f2-120">Click **OK** to close the firewall applet.</span></span>

<span data-ttu-id="421f2-121">Teste o programa novamente depois de fazer essa alteração no firewall.</span><span class="sxs-lookup"><span data-stu-id="421f2-121">Retest the program after making this firewall change.</span></span> <span data-ttu-id="421f2-122">Se o programa agora funciona com êxito, a causa do problema foi identificada e nenhuma outra etapa de solução de problemas é necessária.</span><span class="sxs-lookup"><span data-stu-id="421f2-122">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="421f2-123">Caso contrário, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="421f2-123">Otherwise, move on to the next step.</span></span>

## <a name="checking-for-application-specific-firewall-rules"></a><span data-ttu-id="421f2-124">Verificando regras de firewall específicas do aplicativo</span><span class="sxs-lookup"><span data-stu-id="421f2-124">Checking for application-specific firewall rules</span></span>

<span data-ttu-id="421f2-125">A configuração avançada do firewall do Windows pode ocorrer em um snap-in do Microsoft Management Control (MMC) chamado **Firewall do Windows com segurança avançada**.</span><span class="sxs-lookup"><span data-stu-id="421f2-125">Advanced configuration of the Windows Firewall can take place in a Microsoft Management Control (MMC) snap-in named **Windows Firewall with Advanced Security**.</span></span> <span data-ttu-id="421f2-126">Esse snap-in pode ser usado para solucionar problemas de firewall suspeitos.</span><span class="sxs-lookup"><span data-stu-id="421f2-126">This snap-in can be used to troubleshoot suspected firewall problems.</span></span>

<span data-ttu-id="421f2-127">Os desenvolvedores podem usar as APIs [Firewall do Windows com segurança avançada](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) para criar regras de firewall que se aplicam aos seus aplicativos WSD.</span><span class="sxs-lookup"><span data-stu-id="421f2-127">Developers can use the [Windows Firewall with Advanced Security](/previous-versions/windows/desktop/ics/windows-firewall-with-advanced-security-reference) APIs to create firewall rules that apply to their WSD applications.</span></span> <span data-ttu-id="421f2-128">Especificamente, o método [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) da interface [**INetFwRules**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) pode ser usado para adicionar uma nova regra de firewall.</span><span class="sxs-lookup"><span data-stu-id="421f2-128">Specifically, the [**Add**](/previous-versions/windows/desktop/api/netfw/nf-netfw-inetfwrules-add) method of the [**INetFwRules**](/previous-versions/windows/desktop/api/netfw/nn-netfw-inetfwrules) interface can be used to add a new firewall rule.</span></span> <span data-ttu-id="421f2-129">Se as regras de firewall forem criadas incorretamente, os clientes e hosts não poderão ver um ao outro na rede.</span><span class="sxs-lookup"><span data-stu-id="421f2-129">If firewall rules are created incorrectly, clients and hosts may not be able to see each other on the network.</span></span>

<span data-ttu-id="421f2-130">**Para verificar se há regras de firewall específicas do aplicativo**</span><span class="sxs-lookup"><span data-stu-id="421f2-130">**To check for application-specific firewall rules**</span></span>

1.  <span data-ttu-id="421f2-131">Clique em **Iniciar**, **executar** e digite **WF. msc**.</span><span class="sxs-lookup"><span data-stu-id="421f2-131">Click **Start**, click **Run**, and then type **wf.msc**.</span></span>
2.  <span data-ttu-id="421f2-132">Procure regras específicas do aplicativo que possam estar bloqueando o tráfego.</span><span class="sxs-lookup"><span data-stu-id="421f2-132">Look for application-specific rules that may be blocking traffic.</span></span> <span data-ttu-id="421f2-133">Para obter mais informações, consulte [Firewall do Windows com segurança avançada-ferramentas de diagnóstico e solução de problemas](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).</span><span class="sxs-lookup"><span data-stu-id="421f2-133">For more information, see [Windows Firewall with Advanced Security - Diagnostics and Troubleshooting Tools](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc722062(v=ws.10)?ocid=fwlink).</span></span>
3.  <span data-ttu-id="421f2-134">Remova as regras específicas do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="421f2-134">Remove application-specific rules.</span></span>

<span data-ttu-id="421f2-135">Se nenhuma regra específica do aplicativo for encontrada, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="421f2-135">If no application-specific rules were found, move on to the next step.</span></span> <span data-ttu-id="421f2-136">Se uma regra específica do aplicativo for encontrada e removida, teste o programa novamente depois de fazer a alteração do firewall.</span><span class="sxs-lookup"><span data-stu-id="421f2-136">If an application-specific rule was found and removed, retest the program after making the firewall change.</span></span> <span data-ttu-id="421f2-137">Se o programa agora funciona com êxito, a causa do problema foi identificada e nenhuma outra etapa de solução de problemas é necessária.</span><span class="sxs-lookup"><span data-stu-id="421f2-137">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="421f2-138">Caso contrário, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="421f2-138">Otherwise, move on to the next step.</span></span>

## <a name="enabling-the-ports-used-for-discovery-and-metadata-exchange"></a><span data-ttu-id="421f2-139">Habilitando as portas usadas para descoberta e troca de metadados</span><span class="sxs-lookup"><span data-stu-id="421f2-139">Enabling the ports used for discovery and metadata exchange</span></span>

<span data-ttu-id="421f2-140">WS-Discovery usa a porta UDP 3702 para troca de mensagens.</span><span class="sxs-lookup"><span data-stu-id="421f2-140">WS-Discovery uses the UDP port 3702 for message exchange.</span></span> <span data-ttu-id="421f2-141">Além disso, as portas TCP 5357 e 5358 às vezes são usadas para troca de metadados.</span><span class="sxs-lookup"><span data-stu-id="421f2-141">In addition, TCP ports 5357 and 5358 are sometimes used for metadata exchange.</span></span> <span data-ttu-id="421f2-142">Essas portas podem ser abertas explicitamente no firewall usando os procedimentos descritos em [abrir uma porta no firewall do Windows](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).</span><span class="sxs-lookup"><span data-stu-id="421f2-142">These ports can be explicitly opened on the firewall using the procedures described in [Open a port in Windows Firewall](https://windowshelp.microsoft.com/Windows/Help/4da18300-9044-47b6-9038-595c78db81ab1033.mspx).</span></span>

<span data-ttu-id="421f2-143">Teste o programa novamente depois de fazer essa alteração no firewall.</span><span class="sxs-lookup"><span data-stu-id="421f2-143">Retest the program after making this firewall change.</span></span> <span data-ttu-id="421f2-144">Se o programa agora funciona com êxito, a causa do problema foi identificada e nenhuma outra etapa de solução de problemas é necessária.</span><span class="sxs-lookup"><span data-stu-id="421f2-144">If the program now works successfully, the cause of the problem has been identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="421f2-145">Caso contrário, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="421f2-145">Otherwise, move on to the next step.</span></span>

## <a name="disabling-the-firewall"></a><span data-ttu-id="421f2-146">Desabilitando o firewall</span><span class="sxs-lookup"><span data-stu-id="421f2-146">Disabling the firewall</span></span>

<span data-ttu-id="421f2-147">O Firewall do Windows pode ser desabilitado para ajudar a solucionar problemas suspeitos.</span><span class="sxs-lookup"><span data-stu-id="421f2-147">The Windows Firewall can be disabled to help troubleshoot suspected problems.</span></span> <span data-ttu-id="421f2-148">Outros firewalls aplicáveis (como o firewall em um roteador) também podem ser desabilitados para fins de solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="421f2-148">Other applicable firewalls (such as the firewall on a router) can also be disabled for troubleshooting purposes.</span></span> <span data-ttu-id="421f2-149">Para obter informações sobre como habilitar e desabilitar o Firewall do Windows, consulte [Ativar ou](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx)desativar o Firewall do Windows.</span><span class="sxs-lookup"><span data-stu-id="421f2-149">For information about enabling and disabling the Windows Firewall, see [Turn Windows Firewall on or off](https://windowshelp.microsoft.com/Windows/Help/bfe523a9-7eec-4d3f-add1-2f68b9cfa1c01033.mspx).</span></span>

<span data-ttu-id="421f2-150">Teste o aplicativo novamente depois de desabilitar os firewalls aplicáveis.</span><span class="sxs-lookup"><span data-stu-id="421f2-150">Retest the application after disabling any applicable firewalls.</span></span> <span data-ttu-id="421f2-151">Se o programa agora funciona com êxito, o firewall estava bloqueando o tráfego.</span><span class="sxs-lookup"><span data-stu-id="421f2-151">If the program now works successfully, then the firewall was blocking the traffic.</span></span> <span data-ttu-id="421f2-152">Há algumas causas possíveis do tráfego bloqueado.</span><span class="sxs-lookup"><span data-stu-id="421f2-152">There are a few possible causes of blocked traffic.</span></span>

-   <span data-ttu-id="421f2-153">As exceções específicas do aplicativo bloquearam o tráfego.</span><span class="sxs-lookup"><span data-stu-id="421f2-153">Application-specific exceptions blocked the traffic.</span></span> <span data-ttu-id="421f2-154">Verifique as regras de firewall específicas do aplicativo, conforme descrito acima.</span><span class="sxs-lookup"><span data-stu-id="421f2-154">Check for application-specific firewall rules as described above.</span></span>
-   <span data-ttu-id="421f2-155">O dispositivo demorou muito tempo para responder às solicitações de UDP.</span><span class="sxs-lookup"><span data-stu-id="421f2-155">The device took too long to respond to UDP requests.</span></span> <span data-ttu-id="421f2-156">O Firewall do Windows pode bloquear respostas UDP que retornam mais de 4 segundos depois que a solicitação inicial foi enviada.</span><span class="sxs-lookup"><span data-stu-id="421f2-156">The Windows Firewall may block UDP responses that return more than 4 seconds after the initial request was sent.</span></span> <span data-ttu-id="421f2-157">Continue a solução de problemas seguindo os procedimentos fornecidos em como [usar um host genérico e um cliente para a descoberta de WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) para ver se o problema é reproduzido com um host que responde em menos de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="421f2-157">Continue troubleshooting by following the procedures given in [Using a Generic Host and Client for UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md) to see if the problem reproduces with a host that responds in less than 4 seconds.</span></span>

<span data-ttu-id="421f2-158">Se o aplicativo ainda falhar depois que o firewall for desabilitado, o firewall não estará causando a falha do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="421f2-158">If the application still fails after the firewall is disabled, then the firewall is not causing the application failure.</span></span> <span data-ttu-id="421f2-159">Habilite novamente os firewalls e continue a solução de problemas seguindo os procedimentos fornecidos no [uso de um host genérico e cliente para WS-Discovery de UDP](using-a-generic-host-and-client-for-udp-ws-discovery.md).</span><span class="sxs-lookup"><span data-stu-id="421f2-159">Re-enable the firewalls and continue troubleshooting by following the procedures given in [Using a Generic Host and Client for UDP WS-Discovery](using-a-generic-host-and-client-for-udp-ws-discovery.md).</span></span>

<span data-ttu-id="421f2-160">Os firewalls sempre devem ser habilitados novamente após a conclusão da solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="421f2-160">Firewalls should always be re-enabled after troubleshooting has finished.</span></span>

## <a name="related-topics"></a><span data-ttu-id="421f2-161">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="421f2-161">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="421f2-162">Procedimentos de diagnóstico do WSDAPI</span><span class="sxs-lookup"><span data-stu-id="421f2-162">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="421f2-163">Introdução com a solução de problemas de WSDAPI</span><span class="sxs-lookup"><span data-stu-id="421f2-163">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> </dl>

 

 
