---
title: Algoritmos de criação de transformação do WCS
description: Algoritmos de criação de transformação do WCS
ms.assetid: 526bbbfc-fb60-415d-b4f0-6a44a5d11a55
keywords:
- WCS (sistema de cores do Windows), criação de transformação
- WCS (sistema de cores do Windows), criação de transformação
- gerenciamento de cores de imagem, criação de transformação
- gerenciamento de cores, criação de transformação
- cores, criação de transformação
- criação de transformação
- Criação de transformação WCS
- algoritmos, criação de transformação
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 418596c0e57571f3e504727d4606921d36ff9461
ms.sourcegitcommit: d39e82e232f6510f843fdb8d55d25b4e9e02e880
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/03/2021
ms.locfileid: "104563080"
---
# <a name="wcs-transform-creation-algorithms"></a><span data-ttu-id="d4dae-111">Algoritmos de criação de transformação do WCS</span><span class="sxs-lookup"><span data-stu-id="d4dae-111">WCS Transform Creation Algorithms</span></span>

[<span data-ttu-id="d4dae-112">Criação de transformações</span><span class="sxs-lookup"><span data-stu-id="d4dae-112">Creation of Transforms</span></span>](#creation-of-transforms)

 

[<span data-ttu-id="d4dae-113">Execução de transformação sequencial</span><span class="sxs-lookup"><span data-stu-id="d4dae-113">Sequential Transform Execution</span></span>](#sequential-transform-execution)

 

[<span data-ttu-id="d4dae-114">Criação de transformações otimizadas</span><span class="sxs-lookup"><span data-stu-id="d4dae-114">Creation of Optimized Transforms</span></span>](#creation-of-optimized-transforms)

 

[<span data-ttu-id="d4dae-115">ICCProfileFromWCSProfile</span><span class="sxs-lookup"><span data-stu-id="d4dae-115">ICCProfileFromWCSProfile</span></span>](#iccprofilefromwcsprofile)

 

[<span data-ttu-id="d4dae-116">Preservação de preto e geração de preto</span><span class="sxs-lookup"><span data-stu-id="d4dae-116">Black Preservation and Black Generation</span></span>](#black-preservation-and-black-generation)

 

[<span data-ttu-id="d4dae-117">Gama de cheques</span><span class="sxs-lookup"><span data-stu-id="d4dae-117">Check Gamut</span></span>](#checkgamut)

## <a name="creation-of-transforms"></a><span data-ttu-id="d4dae-118">Criação de transformações</span><span class="sxs-lookup"><span data-stu-id="d4dae-118">Creation of Transforms</span></span>

<span data-ttu-id="d4dae-119">Para explicar corretamente como as transformações de cores funcionam, é útil explicar o caminho completo de processamento por meio do ICM 2,0 e dos internos da CTE.</span><span class="sxs-lookup"><span data-stu-id="d4dae-119">To properly explain how color transforms work, it is helpful to explain the complete processing path through both ICM 2.0 and the internals of the CTE.</span></span> <span data-ttu-id="d4dae-120">A função ICM 2,0 [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) cria uma transformação de cor que os aplicativos podem usar para executar o gerenciamento de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-120">The ICM 2.0 [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) function creates a color transform that applications can use to perform color management.</span></span> <span data-ttu-id="d4dae-121">Essa função cria um contexto de cor das entradas [**LOGCOLORSPACE**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) e de intenção.</span><span class="sxs-lookup"><span data-stu-id="d4dae-121">This function creates a color context from the [**LOGCOLORSPACE**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) and intent inputs.</span></span> <span data-ttu-id="d4dae-122">As tentativas são mapeadas para o algoritmo de mapeamento de gamut de ICC de linha de base.</span><span class="sxs-lookup"><span data-stu-id="d4dae-122">The intents are mapped to baseline ICC gamut mapping algorithm correlates.</span></span> <span data-ttu-id="d4dae-123">Em seguida, a função chama o [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/) da função ICM 2,0 para o processamento de cores consistente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-123">The function then calls ICM 2.0 function [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/) for consistent color processing.</span></span> <span data-ttu-id="d4dae-124">A função **CreateColorTransform** geralmente copia dados para a estrutura de transformação otimizada interna.</span><span class="sxs-lookup"><span data-stu-id="d4dae-124">The **CreateColorTransform** function generally copies data into the internal optimized transform structure.</span></span>

<span data-ttu-id="d4dae-125">A função ICM 2,0 CreateMultiProfileTransform aceita uma matriz de perfis e uma matriz de tentativas ou um único perfil de link de dispositivo e cria uma transformação de cor que os aplicativos podem usar para executar o mapeamento de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-125">The ICM 2.0 CreateMultiProfileTransform function accepts an array of profiles and an array of intents or a single device link profile and creates a color transform that applications can use to perform color mapping.</span></span> <span data-ttu-id="d4dae-126">Ele processa os perfis de entrada e as intenções para criar modelos de dispositivo, modelos de aparência de cores, descrições de limites de gamut e modelos de mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-126">It processes those input profiles and intents to create device models, color appearance models, gamut boundary descriptions, and gamut mapping models.</span></span> <span data-ttu-id="d4dae-127">Veja como isso é feito:</span><span class="sxs-lookup"><span data-stu-id="d4dae-127">Here's how this is done:</span></span>

-   <span data-ttu-id="d4dae-128">Os modelos de dispositivo são inicializados diretamente de perfis DM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-128">Device models are initialized directly from DM profiles.</span></span> <span data-ttu-id="d4dae-129">Há um modelo de dispositivo criado para cada perfil na chamada para [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="d4dae-129">There is one device model created for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="d4dae-130">Os modelos de aparência de cores são inicializados diretamente de perfis CAM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-130">Color appearance models are initialized directly from CAM profiles.</span></span> <span data-ttu-id="d4dae-131">Há um perfil CAM para cada perfil na chamada para [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="d4dae-131">There is one CAM profile for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="d4dae-132">No entanto, o mesmo perfil CAM pode ser especificado para mais de um perfil.</span><span class="sxs-lookup"><span data-stu-id="d4dae-132">The same CAM profile can be specified for more than one profile, however.</span></span>
-   <span data-ttu-id="d4dae-133">As descrições de limites de gama são inicializadas a partir de um objeto de modelo de dispositivo e um objeto CAM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-133">Gamut boundary descriptions are initialized from a device model object and a CAM object.</span></span> <span data-ttu-id="d4dae-134">Há uma descrição de limite de gama para cada perfil na chamada para [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="d4dae-134">There is one gamut boundary description for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="d4dae-135">Os modelos de mapeamento de gamut são inicializados a partir de dois limites de gama e uma intenção.</span><span class="sxs-lookup"><span data-stu-id="d4dae-135">Gamut mapping models are initialized from two gamut boundaries and an intent.</span></span> <span data-ttu-id="d4dae-136">Você deve criar um modelo de mapeamento de gamut entre cada par de modelos de dispositivo criados na chamada para [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="d4dae-136">You must create a gamut mapping model between each pair of device models created from the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="d4dae-137">Observe que isso significa que você usa um modelo de mapa de gama a menos do que o modelo de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-137">Note that this means that you use one fewer gamut map model than device model.</span></span> <span data-ttu-id="d4dae-138">Como o número de tentativas corresponde ao número de modelos de dispositivo, também há mais uma intenção do que o necessário.</span><span class="sxs-lookup"><span data-stu-id="d4dae-138">Because the number of intents matches the number of device models, there is also one more intent than required.</span></span> <span data-ttu-id="d4dae-139">A primeira tentativa na lista é ignorada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-139">The first intent in the list is skipped.</span></span> <span data-ttu-id="d4dae-140">Você percorre a lista de modelos de dispositivo e as intenções, criando modelos de mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-140">You walk through the list of device models and intents, creating gamut mapping models.</span></span> <span data-ttu-id="d4dae-141">Pegue o primeiro e o segundo modelos de dispositivo e a segunda tentativa e, em seguida, inicialize o primeiro modelo de mapeamento de gama.</span><span class="sxs-lookup"><span data-stu-id="d4dae-141">Pick up the first and second device models and the second intent, and then initialize the first gamut mapping model.</span></span> <span data-ttu-id="d4dae-142">Pegue o segundo e terceiro modelos de dispositivo e a terceira intenção e, em seguida, inicialize o segundo modelo de mapeamento de gama.</span><span class="sxs-lookup"><span data-stu-id="d4dae-142">Pick up the second and third device models and the third intent, and then initialize the second gamut mapping model.</span></span> <span data-ttu-id="d4dae-143">Continue dessa maneira até que você tenha criado todos os modelos de mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-143">Continue in this manner until you have created all the gamut mapping models.</span></span>

<span data-ttu-id="d4dae-144">Quando os perfis tiverem sido processados corretamente e todos os objetos intermediários tiverem sido criados e inicializados, você poderá criar a transformação CITE com a chamada a seguir.</span><span class="sxs-lookup"><span data-stu-id="d4dae-144">When the profiles have been properly processed and all intermediate objects have been created and initialized, then you can create the CITE transform with the following call.</span></span> <span data-ttu-id="d4dae-145">Os *pDestCAM* e *pDestDM* são aqueles associados ao último perfil na chamada para [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="d4dae-145">The *pDestCAM* and *pDestDM* are those associated with the last profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>


```C++
HRESULT CreateCITEColorTransform(
 __inout     IDeviceModel          *pSourceDM,
 __inout     IColorAppearanceModel *pSourceCAM,
 __in        GamutMapArray         *pGamutMapArray,
 __inout     IColorAppearanceModel *pDestCAM,
 __inout     IDeviceModel          *pDestDM,
             EColorTransformMode    eTransformMode,
 __deref_out IColorTransform      **ppCTS
 );
```



## <a name="support-for-plug-ins"></a><span data-ttu-id="d4dae-146">Suporte para plug-ins</span><span class="sxs-lookup"><span data-stu-id="d4dae-146">Support for plug-ins</span></span>

<span data-ttu-id="d4dae-147">Um problema envolvido na configuração da lista de transformação é validar se um plug-in necessário está disponível.</span><span class="sxs-lookup"><span data-stu-id="d4dae-147">One issue involved in setting up the transform list is to validate whether a required plug-in is available.</span></span> <span data-ttu-id="d4dae-148">A opção de modelo a seguir fornece essa política para controlar esse comportamento.</span><span class="sxs-lookup"><span data-stu-id="d4dae-148">The following model switch provides this policy to control this behavior.</span></span> <span data-ttu-id="d4dae-149">O gerenciamento dessa lista de transformação é um método na estrutura de transformação otimizada interna, mas cada método de modelo fornece o ponteiro para si mesmo e seu próprio conjunto de valores de parâmetro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-149">The management of this transform list is a method in the internal optimized transform structure, but each model method provides the pointer to itself and its own set of parameter values.</span></span>

<span data-ttu-id="d4dae-150">O modo deve ser um dos seguintes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-150">The mode must be one of the following.</span></span>

-   <span data-ttu-id="d4dae-151">TfmRobust: se um perfil de medida especificar um plug-in preferencial e o plug-in não estiver disponível, o novo sistema de CTE usará o plug-in de linha de base.</span><span class="sxs-lookup"><span data-stu-id="d4dae-151">TfmRobust: If a measurement profile specifies a preferred plug-in and the plug-in is not available, the new CTE system will use the baseline plug-in.</span></span> <span data-ttu-id="d4dae-152">Se nenhum plug-in estiver disponível, a transformação relatará um erro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-152">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="d4dae-153">TfmStrict: se ColorContext especificar um plug-in preferencial, o plug-in deverá estar disponível.</span><span class="sxs-lookup"><span data-stu-id="d4dae-153">TfmStrict: If the ColorContext specifies a preferred plug-in, the plug-in must be available.</span></span> <span data-ttu-id="d4dae-154">Se nenhum plug-in preferencial for encontrado, o plug-in de linha de base será usado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-154">If no preferred plug-in is found, the baseline plug-in will be used.</span></span> <span data-ttu-id="d4dae-155">Se nenhum plug-in estiver disponível, a transformação relatará um erro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-155">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="d4dae-156">TfmBaseline: somente plug-ins de linha de base podem ser usados em AddMeasurementStep.</span><span class="sxs-lookup"><span data-stu-id="d4dae-156">TfmBaseline: Only baseline plug-ins can be used in AddMeasurementStep.</span></span> <span data-ttu-id="d4dae-157">Se ColorContext especificar um plug-in preferencial, o plug-in será ignorado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-157">If the ColorContext specifies a preferred plug-in, the plug-in will be ignored.</span></span> <span data-ttu-id="d4dae-158">Se o plug-in de linha de base não estiver disponível, a transformação relatará um erro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-158">If the baseline plug-in is not available, the transform will report an error.</span></span>

## <a name="transform-execution"></a><span data-ttu-id="d4dae-159">Execução de transformação</span><span class="sxs-lookup"><span data-stu-id="d4dae-159">Transform execution</span></span>

<span data-ttu-id="d4dae-160">A função [**TranslateColors**](/windows/win32/api/icm/nf-icm-translatecolors) da API do ICM 2,0 converte uma matriz de cores do espaço de [cor](c.md) de origem para o espaço de cores de destino, conforme definido por uma transformação de cor.</span><span class="sxs-lookup"><span data-stu-id="d4dae-160">The ICM 2.0 API [**TranslateColors**](/windows/win32/api/icm/nf-icm-translatecolors) function translates an array of colors from the source [color space](c.md) to the destination color space as defined by a color transform.</span></span> <span data-ttu-id="d4dae-161">Essa função verifica internamente uma matriz de cores em cache para permitir a correspondência imediata de cores transformadas normalmente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-161">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="d4dae-162">Essa transformação dá suporte a matrizes de bytes por canal de 8 bits e a matrizes float de 32 bits por canal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-162">This transform supports 8-bit per channel byte arrays and 32-bit per channel float arrays.</span></span> <span data-ttu-id="d4dae-163">Todos os outros formatos serão convertidos antes de serem transmitidos para a nova CTE.</span><span class="sxs-lookup"><span data-stu-id="d4dae-163">All other formats will be converted prior to passing off to the new CTE.</span></span>

<span data-ttu-id="d4dae-164">A função [**TranslateBitmapBits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) da API do ICM 2,0 converte as cores de um bitmap que tem um formato definido para produzir outro bitmap em um formato solicitado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-164">The ICM 2.0 API [**TranslateBitmapBits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) function translates the colors of a bitmap having a defined format to produce another bitmap in a requested format.</span></span> <span data-ttu-id="d4dae-165">Essa função verifica internamente uma matriz de cores em cache para permitir a correspondência imediata de cores transformadas normalmente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-165">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="d4dae-166">Para evitar muitos caminhos de código, suporte e complexidade de teste, apenas um número limitado de formatos de bitmap, na verdade, tem suporte no mecanismo de transformação e de interpolação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-166">To avoid too many code paths, support, and testing complexity, only a limited number of bitmap formats are actually supported in the transform and interpolation engine.</span></span> <span data-ttu-id="d4dae-167">Essa função deve converter os formatos de bitmap de entrada e saída não nativos em formatos com suporte nativo para processamento.</span><span class="sxs-lookup"><span data-stu-id="d4dae-167">This function must translate the non-native incoming and outgoing bitmap formats into natively supported formats for processing.</span></span> <span data-ttu-id="d4dae-168">Essa transformação dá suporte apenas a bitmaps de 8 bits por byte de canal e bitmaps float de 32 bits por canal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-168">This transform only supports 8-bit per channel byte bitmaps and 32-bit per channel float bitmaps.</span></span> <span data-ttu-id="d4dae-169">Todos os outros formatos serão convertidos antes de serem transmitidos para a nova CTE.</span><span class="sxs-lookup"><span data-stu-id="d4dae-169">All other formats will be converted prior to passing off to the new CTE.</span></span>

 

### <a name="sequential-transform-execution"></a><span data-ttu-id="d4dae-170">Execução de transformação sequencial</span><span class="sxs-lookup"><span data-stu-id="d4dae-170">Sequential Transform Execution</span></span>

<span data-ttu-id="d4dae-171">Se o parâmetro *dwFlags* tiver o bit de transformação sequencial \_ definido quando as funções ICM [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) ou **CreateMultiProfileTransform** forem chamadas, as etapas de transformação serão executadas em sequência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-171">If the *dwFlags* parameter has the SEQUENTIAL\_TRANSFORM bit set when the ICM functions [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) or **CreateMultiProfileTransform** are called, then the transform steps are executed sequentially.</span></span> <span data-ttu-id="d4dae-172">Isso significa que o código percorre cada modelo de dispositivo, modelo de aparência de cor e modelo de mapeamento de gamut separadamente, conforme especificado pela chamada **CreateColorTransform** ou **CreateMultiProfileTransform** .</span><span class="sxs-lookup"><span data-stu-id="d4dae-172">This means that the code steps through each device model, color appearance model, and gamut mapping model separately, as specified by the **CreateColorTransform** or **CreateMultiProfileTransform** call.</span></span> <span data-ttu-id="d4dae-173">Isso pode ser útil para depurar módulos de plug-in, mas é muito mais lento do que a execução por meio de uma transformação otimizada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-173">This may be helpful for debugging plug-in modules, but it is much slower than executing through an optimized transform.</span></span> <span data-ttu-id="d4dae-174">A execução em modo sequencial, portanto, não é recomendada para software de produção.</span><span class="sxs-lookup"><span data-stu-id="d4dae-174">Running in sequential mode is therefore not recommended for production software.</span></span> <span data-ttu-id="d4dae-175">Além disso, pode haver pequenas diferenças nos resultados obtidos no modo sequencial e no modo otimizado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-175">Also, there may be slight differences in the results obtained in sequential mode and in optimized mode.</span></span> <span data-ttu-id="d4dae-176">Isso ocorre devido a variações introduzidas quando as funções são concatenadas juntas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-176">This is due to variations introduced when the functions are concatenated together.</span></span>

### <a name="creation-of-optimized-transforms"></a><span data-ttu-id="d4dae-177">Criação de transformações otimizadas</span><span class="sxs-lookup"><span data-stu-id="d4dae-177">Creation of Optimized Transforms</span></span>

<span data-ttu-id="d4dae-178">Uma transformação otimizada é uma tabela de pesquisa multidimensional.</span><span class="sxs-lookup"><span data-stu-id="d4dae-178">An optimized transform is a multi-dimensional lookup table.</span></span> <span data-ttu-id="d4dae-179">A tabela pode ser processada por um mecanismo de interpolação multidimensional, como interpolação tetrahedral, que aplica as cores de entrada à transformação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-179">The table can be processed by a multi-dimensional interpolation engine, such as tetrahedral interpolation, that applies the input colors to the transform.</span></span> <span data-ttu-id="d4dae-180">A seção a seguir descreve como as tabelas de pesquisa otimizadas são criadas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-180">The following section describes how the optimized lookup tables are created.</span></span> <span data-ttu-id="d4dae-181">A seção depois descreve como interpolar dentro das tabelas de pesquisa otimizadas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-181">The section after that describes how to interpolate within the optimized lookup tables.</span></span>

## <a name="sparse-lookup-tables"></a><span data-ttu-id="d4dae-182">Tabelas de pesquisa esparsa</span><span class="sxs-lookup"><span data-stu-id="d4dae-182">Sparse lookup tables</span></span>

<span data-ttu-id="d4dae-183">As impressoras convencionais têm tintas CMYK.</span><span class="sxs-lookup"><span data-stu-id="d4dae-183">Conventional printers have CMYK inks.</span></span> <span data-ttu-id="d4dae-184">Para estender a gama, uma abordagem é adicionar novas tintas ao sistema.</span><span class="sxs-lookup"><span data-stu-id="d4dae-184">To extend the gamut, one approach is to add new inks to the system.</span></span> <span data-ttu-id="d4dae-185">As tintas normalmente adicionadas são cores que as tintas CMYK têm dificuldade de reproduzir.</span><span class="sxs-lookup"><span data-stu-id="d4dae-185">The inks typically added are colors that CMYK inks have difficulty reproducing.</span></span> <span data-ttu-id="d4dae-186">As opções comuns são laranja, verde, vermelho, azul etc. Para aumentar a "resolução aparente", as tintas com tons diferentes podem ser usadas, por exemplo, ciano claro, Magenta claro e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="d4dae-186">Common choices are orange, green, red, blue, etc. To increase the "apparent resolution," inks with different tints can be used, for example, light cyan, light magenta, and so on.</span></span> <span data-ttu-id="d4dae-187">Na verdade, o dispositivo de impressora tem mais de quatro canais.</span><span class="sxs-lookup"><span data-stu-id="d4dae-187">In effect, the printer device has more than four channels.</span></span>

<span data-ttu-id="d4dae-188">Embora as impressoras sejam dispositivos de saída, elas também executam a conversão de cores do espaço do dispositivo para outro espaço de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-188">Although printers are output devices, they also perform the color conversion from the device space to another color space.</span></span> <span data-ttu-id="d4dae-189">No caso de uma impressora CMYK, essa seria uma transformação de CMYK para XYZ ou o "modelo de encaminhamento" da impressora.</span><span class="sxs-lookup"><span data-stu-id="d4dae-189">In the case of a CMYK printer, this would be a transformation from CMYK to XYZ, or the "forward model" of the printer.</span></span> <span data-ttu-id="d4dae-190">Ao combinar o modelo de encaminhamento com outras transformações, é possível emular uma impressão CMYK em outro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-190">By combining the forward model with other transformations, it is possible to emulate a CMYK print on another device.</span></span> <span data-ttu-id="d4dae-191">Por exemplo, uma impressora CMYK para um monitor RGB tornaria possível um mecanismo de verificação que emulasse uma impressão da impressora CMYK em um monitor.</span><span class="sxs-lookup"><span data-stu-id="d4dae-191">For example, a printer CMYK to a monitor RGB would make possible a proofing mechanism that emulates a print of that CMYK printer on a monitor.</span></span> <span data-ttu-id="d4dae-192">Da mesma forma, o mesmo também se aplica a impressoras de Hi-Fi.</span><span class="sxs-lookup"><span data-stu-id="d4dae-192">Similarly, the same also applies for hi-fi printers.</span></span> <span data-ttu-id="d4dae-193">Uma conversão de CMYKOG para RGB permite a prova da impressora CMYKOG em um monitor.</span><span class="sxs-lookup"><span data-stu-id="d4dae-193">A CMYKOG to RGB conversion allows proofing of the CMYKOG printer on a monitor.</span></span>

<span data-ttu-id="d4dae-194">A abordagem convencional para implementar essa conversão de cores é usar um LUT uniforme.</span><span class="sxs-lookup"><span data-stu-id="d4dae-194">The conventional approach to implementing such color conversion is by using a uniform LUT.</span></span> <span data-ttu-id="d4dae-195">Por exemplo, em um perfil ICC para uma impressora CMYKOG, a especificação ICC exige uma marca A2B1 que armazena um LUT uniforme representando uma amostragem uniforme no espaço do dispositivo CMYKOG do modelo de encaminhamento, que passa de CMYKOG para o espaço de conexão do perfil ICC (CIELAB ou CIEXYZ).</span><span class="sxs-lookup"><span data-stu-id="d4dae-195">For example, in an ICC profile for a CMYKOG printer, the ICC specification mandates an A2B1 tag that stores a uniform LUT representing a uniform sampling in the CMYKOG device space of the forward model, which goes from CMYKOG to the ICC profile connection space (either CIELAB or CIEXYZ).</span></span> <span data-ttu-id="d4dae-196">O perfil de link do dispositivo ICC permite uma transformação direta do espaço do dispositivo CMYKOG para qualquer espaço de cores, incluindo um espaço de dispositivo, também na forma de um LUT amostrado uniformemente no espaço CMYKOG.</span><span class="sxs-lookup"><span data-stu-id="d4dae-196">The ICC device link profile enables a direct transformation from CMYKOG device space to any color space including a device space, also in the form of a LUT sampled uniformly in CMYKOG space.</span></span> <span data-ttu-id="d4dae-197">A amostragem nunca é feita com 256 níveis (profundidade de bit 8) devido ao enorme LUT resultante, exceto no caso de dispositivos monocromáticos (1 canal).</span><span class="sxs-lookup"><span data-stu-id="d4dae-197">Sampling is never done with 256 levels (bit depth 8) because of the huge LUT resulting, except in the case of monochrome devices (1 channel).</span></span> <span data-ttu-id="d4dae-198">Em vez disso, a amostragem com profundidade de bits inferior é usada; algumas opções típicas são 9 (profundidade de bits 3), 17 (profundidade de bits 4), 33 (profundidade de bit 5).</span><span class="sxs-lookup"><span data-stu-id="d4dae-198">Instead, sampling with lower bit depth is used; some typical choices are 9 (bit depth 3), 17 (bit depth 4), 33 (bit depth 5).</span></span> <span data-ttu-id="d4dae-199">Com o número de níveis inferior a 256 em cada canal, o LUT é usado em conjunto com um algoritmo de interpolação para produzir o resultado se um nível estiver entre dois níveis de amostra.</span><span class="sxs-lookup"><span data-stu-id="d4dae-199">With the number of levels less than 256 in each channel, the LUT is used in conjunction with an interpolation algorithm to produce the result if a level is between two sampled levels.</span></span>

<span data-ttu-id="d4dae-200">Embora um LUT uniforme seja conceitualmente simples de implementar, e a interpolação em um LUT uniforme é geralmente eficiente, o tamanho de LUT aumenta exponencialmente com a dimensão de entrada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-200">While a uniform LUT is conceptually simple to implement, and interpolation on a uniform LUT is generally efficient, the LUT size increases exponentially with the input dimension.</span></span> <span data-ttu-id="d4dae-201">Na verdade, se *d* for o número de etapas usadas no lut uniforme, e *n* for o número de canais no espaço de cores de origem, o número de nós no lut será ![ mostrado na variável para o número de nós em um lut. ](images/transformcreation-image002.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-201">In fact, if *d* is the number of steps used in the uniform LUT, and *n* is the number of channels in the source color space, then the number of nodes in the LUT is ![Shows the variable for the number of nodes in an LUT.](images/transformcreation-image002.gif).</span></span> <span data-ttu-id="d4dae-202">Claramente, o número de nós exige rapidamente tantos armazenamento na memória que até os sistemas de computação topo de linha tenham dificuldades para lidar com a demanda.</span><span class="sxs-lookup"><span data-stu-id="d4dae-202">Clearly, the number of nodes quickly demands so much storage in memory that even top-of-the-line computing systems have difficulty handling the demand.</span></span> <span data-ttu-id="d4dae-203">Para dispositivos com seis ou oito canais, uma implementação de ICC do perfil de dispositivo requer o uso de algumas etapas no LUT, às vezes até cinco etapas na tabela A2B1 para manter o perfil em megabytes em vez de gigabytes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-203">For devices with six or eight channels, an ICC implementation of the device profile requires using few steps in the LUT, sometimes even down to five steps in the A2B1 table to keep the profile within megabytes instead of gigabytes.</span></span> <span data-ttu-id="d4dae-204">Claramente, o uso de um número menor de etapas aumenta o erro de interpolação, pois agora há menos amostras.</span><span class="sxs-lookup"><span data-stu-id="d4dae-204">Clearly, using a smaller number of steps increases interpolation error, because there are now fewer samples.</span></span> <span data-ttu-id="d4dae-205">Como o LUT deve ser uniforme, a precisão em todo o espaço de cores é degradada mesmo nas regiões do espaço em que uma diferença de cor significativa pode ser causada por pequenas alterações no valor do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-205">Because the LUT must be uniform, accuracy over the whole color space is degraded even in those regions of the space where a significant color difference can be caused by small change in the device value.</span></span>

<span data-ttu-id="d4dae-206">Em dispositivos com mais de quatro colorants, determinados subespaços de todo o espaço do dispositivo são mais importantes do que outros.</span><span class="sxs-lookup"><span data-stu-id="d4dae-206">In devices with more than four colorants, certain subspaces of the whole device space are more important than others.</span></span> <span data-ttu-id="d4dae-207">Por exemplo, no espaço de CMYKOG, as tintas ciano e verde raramente são usadas juntas porque seu matiz se sobrepõe em grande parte.</span><span class="sxs-lookup"><span data-stu-id="d4dae-207">For example, in CMYKOG space, cyan and green inks are seldom used together because their hues largely overlap each other.</span></span> <span data-ttu-id="d4dae-208">Da mesma forma, as tintas amarela e laranja se sobrepõem em grande parte.</span><span class="sxs-lookup"><span data-stu-id="d4dae-208">Similarly, yellow and orange inks largely overlap each other.</span></span> <span data-ttu-id="d4dae-209">Uma redução uniforme no número de etapas pode ser exibida como uma degradação geral na qualidade em todo o espaço de cores, que é algo que você pode pagar para as combinações de tinta impossíveis, mas não para as combinações prováveis ou importantes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-209">A uniform reduction in the number of steps can be viewed as an overall degradation in quality across the whole color space, which is something you can afford for the improbable ink combinations, but not for the likely or important combinations.</span></span>

<span data-ttu-id="d4dae-210">Embora um LUT uniformemente amostrado seja simples e eficiente para interpolação, ele impõe requisitos de memória enormes à medida que a dimensão aumenta.</span><span class="sxs-lookup"><span data-stu-id="d4dae-210">While a uniformly sampled LUT is simple and efficient for interpolation, it imposes huge memory requirements as dimension increases.</span></span> <span data-ttu-id="d4dae-211">Na realidade, embora um dispositivo possa ter seis ou oito canais, eles raramente são usados simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-211">In reality, while a device might have six or eight channels, they are rarely used simultaneously.</span></span> <span data-ttu-id="d4dae-212">Na maioria dos casos, a cor de entrada para a transformação cor tem apenas algumas colorants "ativas" e, portanto, reside em um espaço de cor dimensional inferior.</span><span class="sxs-lookup"><span data-stu-id="d4dae-212">In most cases, the input color to color transformation has only a few "active" colorants and so resides in a lower dimensional color space.</span></span> <span data-ttu-id="d4dae-213">Isso também significa que a interpolação pode ser feita com mais eficiência nesse espaço dimensional inferior, pois a interpolação é mais rápida quando a dimensão é menor.</span><span class="sxs-lookup"><span data-stu-id="d4dae-213">This also means that interpolation can be done more efficiently in that lower dimensional space because interpolation is faster when the dimension is lower.</span></span>

<span data-ttu-id="d4dae-214">Portanto, a abordagem é estratificar todo o espaço do dispositivo em subespaços de várias dimensões.</span><span class="sxs-lookup"><span data-stu-id="d4dae-214">Therefore, the approach is to stratify the whole device space into subspaces of various dimensions.</span></span> <span data-ttu-id="d4dae-215">E como as dimensões inferiores (aquelas que combinam três ou quatro colorants) são mais importantes, por stratifying o espaço, você também pode aplicar taxas de amostragem diferentes; ou seja, um número diferente de etapas, para as partes; aumento das taxas de amostragem para dimensões inferiores, reduzindo-as para dimensões mais altas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-215">And because lower dimensions (those combining three or four colorants) are more important, by stratifying the space, you can also apply different sampling rates; that is, a different number of steps, to the pieces; increasing sampling rates for lower dimensions, reducing them for higher dimensions.</span></span>

<span data-ttu-id="d4dae-216">Para corrigir as notações, *n* é o número de canais no espaço de cor de origem da transformação de cor que você deseja obter.</span><span class="sxs-lookup"><span data-stu-id="d4dae-216">To fix notations, *n* is the number of channels in the source color space of the color transformation that you want to sample.</span></span> <span data-ttu-id="d4dae-217">Você também pode fazer referência a *n* como a dimensão de entrada e ![ mostra n maior ou igual a 5.](images/transformcreation-image004.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-217">You can also refer to *n* as the input dimension, and ![Shows n greater than or equal to 5.](images/transformcreation-image004.gif)</span></span> <span data-ttu-id="d4dae-218">, a menos que especificado de outra forma.</span><span class="sxs-lookup"><span data-stu-id="d4dae-218">, unless otherwise specified.</span></span>

<span data-ttu-id="d4dae-219">Os blocos de construção básicos são LUTs de várias *dimensões* e tamanhos de entrada, em vez de um lut uniforme com a dimensão de entrada *n*.</span><span class="sxs-lookup"><span data-stu-id="d4dae-219">The basic building blocks are LUTs of various input *dimensions* and sizes, instead of one uniform LUT with input dimension *n*.</span></span> <span data-ttu-id="d4dae-220">Para ser mais preciso, um *lut* é um malha retangular imposto em um cubo de unidade; ou seja, todas as coordenadas do dispositivo são normalizadas para o intervalo de \[ 0, 1 \] ).</span><span class="sxs-lookup"><span data-stu-id="d4dae-220">To be more precise, a *LUT* is a rectangular lattice imposed on a unit cube; that is, all the device coordinates are normalized to the range \[0, 1\]).</span></span> <span data-ttu-id="d4dae-221">Se é a dimensão de entrada do lut (Observe que não precisa ser igual a *n*, embora ![ mostre V menor ou igual a n.](images/transformcreation-image006.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-221">if   is the input dimension of the lut (note that   does not have to be equal to *n*, although ![Shows V less than or equal to n.](images/transformcreation-image006.gif)</span></span> <span data-ttu-id="d4dae-222">é obrigatório), então ele consiste em grades de amostragem unidimensional ν:</span><span class="sxs-lookup"><span data-stu-id="d4dae-222">is required), then it consists of ν one-dimensional sampling grids:</span></span>

<span data-ttu-id="d4dae-223">SAMP *i*: ![ mostra uma grade de amostragem unidimensional.](images/transformcreation-image008.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-223">Samp *i*: ![Shows a one-dimensional sampling grid.](images/transformcreation-image008.gif)</span></span>

<span data-ttu-id="d4dae-224">onde todos os *x <sub>j</sub>s* devem estar no intervalo de \[ 0, 1 \] , ![ mostra um sobrescrito d (i).](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-224">where all the *x<sub>j</sub>s* must lie in the range \[0, 1\], ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="d4dae-225">é o número de etapas para a amostragem de canal *i* que deve ser pelo menos 1 e ![ mostra um spuperscript de X (subscrito) d (i).](images/transformcreation-image012.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-225">is the number of steps for the *i* th channel sampling which must be at least 1, and ![Shows a spuperscript of X (subscript) d(i).](images/transformcreation-image012.gif)</span></span> <span data-ttu-id="d4dae-226">deve ser 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-226">must be 1.</span></span> <span data-ttu-id="d4dae-227">Por outro lado, o ![ mostra um sobrescrito X (subscrito 1).](images/transformcreation-image014.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-227">On the other hand, ![Shows a superscript X (subscript 1).](images/transformcreation-image014.gif)</span></span> <span data-ttu-id="d4dae-228">Não é necessário que seja 0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-228">is not required to be 0.</span></span>

<span data-ttu-id="d4dae-229">Somente os dois casos especiais a seguir de LUT serão definidos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-229">Only the following two special cases of LUT will be defined.</span></span>

<span data-ttu-id="d4dae-230">*Closed lut*: esse é um lut com o requisito adicional que, para cada SAMP *<sub>i</sub>*, ![ mostra um sobrescrito X (subscrito 1) é igual a 0.](images/transformcreation-image016.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-230">*Closed LUT*: This is a LUT with the additional requirement that for each Samp *<sub>i</sub>*, ![Shows a superscript X (subscript 1) equals 0.](images/transformcreation-image016.gif)</span></span> <span data-ttu-id="d4dae-231">e ![ mostra um sobrescrito d (i) maior ou igual a 2.](images/transformcreation-image018.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-231">, and ![Shows a superscript d(i) greater than or equal to 2.](images/transformcreation-image018.gif)</span></span> <span data-ttu-id="d4dae-232">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-232">.</span></span> <span data-ttu-id="d4dae-233">Um LUT fechado uniforme é um LUT fechado que tem o mesmo ![ mostra um sobrescrito d (i).](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-233">A uniform closed LUT is a closed LUT that has the same ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="d4dae-234">para cada canal, e os nós têm espaçamento uniforme entre 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-234">for each channel, and the nodes are uniformly spaced between 0 and 1.</span></span>

<span data-ttu-id="d4dae-235">*Abra lut*: esse é um lut com o requisito adicional que para cada SAMP *i*, ![ mostra um sobrescrito X (subscript 1) maior que 0.](images/transformcreation-image020.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-235">*Open LUT*: This is a LUT with the additional requirement that for each Samp *i*, ![SHows a superscript X (subscript 1) greater than 0.](images/transformcreation-image020.gif)</span></span> <span data-ttu-id="d4dae-236">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-236">.</span></span> <span data-ttu-id="d4dae-237">OK para ![ exibir um sobrescrito d (i) igual a 1.](images/transformcreation-image022.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-237">It is OK to have ![Shows a superscript d(i) equal to 1.](images/transformcreation-image022.gif)</span></span> <span data-ttu-id="d4dae-238">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-238">.</span></span>

<span data-ttu-id="d4dae-239">O objetivo é estratificar o cubo de unidade \[ 0, 1 \] *n* em uma coleção de LUTs fechada e abrir Luts, de modo que a coleção inteira cubra o cubo de unidade.</span><span class="sxs-lookup"><span data-stu-id="d4dae-239">The goal is to stratify the unit cube \[0, 1\] *n* into a collection of closed LUTs and open LUTs, such that the whole collection will cover the unit cube.</span></span> <span data-ttu-id="d4dae-240">É conceitualmente mais simples organizar essas "LUT Strata" por suas dimensões, de modo que no nível superior:</span><span class="sxs-lookup"><span data-stu-id="d4dae-240">It is conceptually simpler to organize these "LUT strata" by their dimensions, so that on the top level:</span></span>

![Mostra o nível superior para organizar L U T Strata por suas dimensões.](images/transformcreation-image024.png)

<span data-ttu-id="d4dae-242">onde ![ mostra o subscrito Sigma k.](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-242">where ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="d4dae-243">é a "coleção de Strata em *k* -dimensional".</span><span class="sxs-lookup"><span data-stu-id="d4dae-243">is the "*k* -dimensional strata collection."</span></span> <span data-ttu-id="d4dae-244">Observe que a dimensão Strata começa em 3, em vez de 0; ou seja, os pontos, porque a interpolação de combinações de três Colorant pode ser tratada sem muito requisito de memória.</span><span class="sxs-lookup"><span data-stu-id="d4dae-244">Note that the strata dimension starts from 3 instead of 0; that is, points, because interpolation of three-colorant combinations can be handled without too much memory requirement.</span></span>

## <a name="description-of-the-lut-strata"></a><span data-ttu-id="d4dae-245">Descrição do LUT Strata</span><span class="sxs-lookup"><span data-stu-id="d4dae-245">Description of the LUT strata</span></span>

<span data-ttu-id="d4dae-246">Nesta implementação:</span><span class="sxs-lookup"><span data-stu-id="d4dae-246">In this implementation:</span></span>

1. <span data-ttu-id="d4dae-247">![Mostra o subscript Sigma 3.](images/transformcreation-image028.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-247">![Shows sigma subscript 3.](images/transformcreation-image028.gif)</span></span> <span data-ttu-id="d4dae-248">consiste em LUTs fechadas com três entradas, uma de cada combinação possível de três colorants escolhidas de *n* colorants.</span><span class="sxs-lookup"><span data-stu-id="d4dae-248">consists of closed LUTs with three inputs, one from every possible combination of three colorants chosen out of the *n* colorants.</span></span>

2. ![Mostra o subscript 4 do Sigma.](images/transformcreation-image030.gif) <span data-ttu-id="d4dae-250">consiste em um LUT fechado para a combinação CMYK (ou os quatro primeiros colorants), junto com</span><span class="sxs-lookup"><span data-stu-id="d4dae-250">consists of one closed LUT for the combination CMYK (or the first four colorants), together with</span></span> ![Mostra (n em 4) menos 1.](images/transformcreation-image032.png) <span data-ttu-id="d4dae-252">Abra LUTs para todas as outras combinações de quatro Colorant.</span><span class="sxs-lookup"><span data-stu-id="d4dae-252">open LUTs for all other four-colorant combinations.</span></span> <span data-ttu-id="d4dae-253">Ao descobrir a combinação de CMYK, você reconhece que é uma combinação importante.</span><span class="sxs-lookup"><span data-stu-id="d4dae-253">By singling out the CMYK combination, you acknowledge that it is an important combination.</span></span>

3. <span data-ttu-id="d4dae-254">Para ![ mostra k igual a 5,..., n.](images/transformcreation-image034.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-254">For ![Shows k equal to 5, ..., n.](images/transformcreation-image034.gif)</span></span> <span data-ttu-id="d4dae-255">, ![ Mostra o subscrito Sigma k.](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-255">, ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="d4dae-256">consiste em ![ Mostrar (n sobre k).](images/transformcreation-image037.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-256">consists of ![Shows (n over k).](images/transformcreation-image037.gif)</span></span> <span data-ttu-id="d4dae-257">Abra LUTs, um para cada combinação possível de escolher *k* colorants do total de *n* colorants.</span><span class="sxs-lookup"><span data-stu-id="d4dae-257">open LUTs, one for each possible combination of choosing *k* colorants from the total of *n* colorants.</span></span>

<span data-ttu-id="d4dae-258">Ele permanece para especificar os tamanhos de LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-258">It remains to specify the sizes of the LUTs.</span></span> <span data-ttu-id="d4dae-259">A principal diferença entre o LUTs aberto e o fechado é que os LUTs abertos não se sobrepõem e os LUTs fechados podem se sobrepor às faces de limite.</span><span class="sxs-lookup"><span data-stu-id="d4dae-259">The key difference between open and closed LUTs is that open LUTs don't overlap, and closed LUTs might overlap at the boundary faces.</span></span> <span data-ttu-id="d4dae-260">O fato de que a amostragem unidimensional em um LUT aberto não contém 0, essencialmente significa que um LUT aberto não tem metade das faces de limite, portanto, o nome "aberto".</span><span class="sxs-lookup"><span data-stu-id="d4dae-260">The fact that the one-dimensional sampling in an open LUT does not contain 0, essentially means that an open LUT is missing half of the boundary faces, hence the name "open."</span></span> <span data-ttu-id="d4dae-261">Se dois LUTs não se sobrepõem, você pode usar um número diferente de etapas ou locais de nó em cada canal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-261">If two LUTs don't overlap, you can use a different number of steps or node locations in each channel.</span></span> <span data-ttu-id="d4dae-262">O mesmo não será verdadeiro se duas sobreposição de LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-262">The same is not true if two LUTs overlap.</span></span> <span data-ttu-id="d4dae-263">Nesse caso, se o número de etapas ou os locais de nó forem diferentes, um ponto de acordo com a interseção dos dois LUTs receberá um valor de interpolação diferente, dependendo de qual LUT é usado na interpolação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-263">In that case, if the number of steps or the node locations are different, a point lying in the intersection of the two LUTs will receive a different interpolation value depending on which LUT is used in the interpolation.</span></span> <span data-ttu-id="d4dae-264">Uma solução simples para esse problema é usar a amostragem uniforme com o mesmo número de etapas, sempre que duas sobreposição de LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-264">A simple solution to this problem is to use uniform sampling with the same number of steps whenever two LUTs overlap.</span></span> <span data-ttu-id="d4dae-265">Em outras palavras:</span><span class="sxs-lookup"><span data-stu-id="d4dae-265">In other words:</span></span>

<span data-ttu-id="d4dae-266">Todas as LUTs fechadas (todas as LUTs de três Colorant e a LUT CMYK nessa implementação) devem ser uniformes e ter o mesmo número de etapas, que são indicadas *d*.</span><span class="sxs-lookup"><span data-stu-id="d4dae-266">All closed LUTs (all three-colorant LUTs and the CMYK LUT in this implementation) must be uniform and have the same number of steps, which are denoted *d*.</span></span>

<span data-ttu-id="d4dae-267">Os dois algoritmos a seguir podem ser usados para determinar o número de etapas *d* para Luts fechadas e o número de etapas para abrir Luts.</span><span class="sxs-lookup"><span data-stu-id="d4dae-267">The following two algorithms can be used to determine the number of steps *d* for closed LUTs and the number of steps for open LUTs.</span></span>

## <a name="algorithm-1"></a><span data-ttu-id="d4dae-268">Algoritmo \# 1</span><span class="sxs-lookup"><span data-stu-id="d4dae-268">Algorithm \#1</span></span>

<span data-ttu-id="d4dae-269">Esse algoritmo não requer entrada externa.</span><span class="sxs-lookup"><span data-stu-id="d4dae-269">This algorithm does not require external input.</span></span>

<span data-ttu-id="d4dae-270">Todos os LUTs fechados serão uniformes com o número de etapas *d* .</span><span class="sxs-lookup"><span data-stu-id="d4dae-270">All the closed LUTs will be uniform with *d* number of steps.</span></span>

<span data-ttu-id="d4dae-271">Todos os LUTs abertos da dimensão *k* terão o mesmo número de etapas ![ mostra d (k).](images/transformcreation-image039.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-271">All the open LUTs of dimension *k* will have same number of steps ![Shows d(k).](images/transformcreation-image039.gif)</span></span> <span data-ttu-id="d4dae-272">em cada canal de entrada, e os nós têm espaçamento uniforme; ou seja, para cada um ![ mostra igual a 1, 2,..., k.](images/transformcreation-image041.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-272">in each input channel, and the nodes are equally spaced; that is, for each ![Shows i equal to 1, 2, ..., k.](images/transformcreation-image041.gif)</span></span> <span data-ttu-id="d4dae-273">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-273">.</span></span>

<span data-ttu-id="d4dae-274">SAMP *i*: ![ mostra o algoritmo SAMP i.](images/transformcreation-image043.png)</span><span class="sxs-lookup"><span data-stu-id="d4dae-274">Samp *i*: ![Shows samp i algorithm.](images/transformcreation-image043.png)</span></span>

<span data-ttu-id="d4dae-275">Por fim, especifique *d* e *d* (*k* ) na tabela 1 a seguir.</span><span class="sxs-lookup"><span data-stu-id="d4dae-275">Finally, specify *d* and *d* (*k* ) in the following Table 1.</span></span> <span data-ttu-id="d4dae-276">Os três modos, "prova", "normal" e "melhor" são as configurações de qualidade ICM 2,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-276">The three modes, "proof," "normal," and "best" are the ICM 2.0 quality settings.</span></span> <span data-ttu-id="d4dae-277">Nessa implementação, o modo de prova tem a menor superfície de memória e o melhor modo tem o maior volume de memória.</span><span class="sxs-lookup"><span data-stu-id="d4dae-277">In this implementation, the proof mode has the smallest memory footprint, and best mode has the largest memory footprint.</span></span>

<span data-ttu-id="d4dae-278">Para implementar esse algoritmo, você deve chamar o seguinte algoritmo \# 2.</span><span class="sxs-lookup"><span data-stu-id="d4dae-278">To implement this algorithm, you must call the following Algorithm \#2.</span></span> <span data-ttu-id="d4dae-279">Os usuários podem especificar seus próprios locais de amostragem, usando as tabelas como um guia.</span><span class="sxs-lookup"><span data-stu-id="d4dae-279">Users can specify their own sampling locations, using the tables as a guide.</span></span>

## <a name="algorithm-2"></a><span data-ttu-id="d4dae-280">Algoritmo \# 2</span><span class="sxs-lookup"><span data-stu-id="d4dae-280">Algorithm \#2</span></span>

<span data-ttu-id="d4dae-281">Esse algoritmo requer entrada externa na forma de uma lista de locais de amostragem "importantes", mas é mais adaptável e pode economizar espaço de memória potencialmente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-281">This algorithm requires external input in the form of a list of "important" sampling locations, but it is more adaptive and can save memory space potentially.</span></span>

<span data-ttu-id="d4dae-282">A entrada necessária é uma matriz de valores de dispositivo fornecida pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="d4dae-282">The required input is an array of device values supplied by the user.</span></span> <span data-ttu-id="d4dae-283">Esses valores de dispositivo indicam qual região do espaço de cores do dispositivo é importante; ou seja, qual região deve ser amostrada mais.</span><span class="sxs-lookup"><span data-stu-id="d4dae-283">These device values indicate which region of the device color space is important; that is, which region should be sampled more.</span></span>

<span data-ttu-id="d4dae-284">Todos os LUTs fechados serão uniformes com o número *d* de etapas, conforme descrito no algoritmo \# 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-284">All the closed LUTs will be uniform with *d* number of steps as described in Algorithm \#1.</span></span> <span data-ttu-id="d4dae-285">Os valores para *d* são fornecidos na tabela 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-285">Values for *d* are provided in Table 1.</span></span>

<span data-ttu-id="d4dae-286">*(a) LUT fechada uniforme*</span><span class="sxs-lookup"><span data-stu-id="d4dae-286">*(a) Uniform Closed LUT*</span></span>



|         | <span data-ttu-id="d4dae-287">Modo de prova</span><span class="sxs-lookup"><span data-stu-id="d4dae-287">Proof mode</span></span> | <span data-ttu-id="d4dae-288">Modo Normal</span><span class="sxs-lookup"><span data-stu-id="d4dae-288">Normal mode</span></span> | <span data-ttu-id="d4dae-289">Modo melhor</span><span class="sxs-lookup"><span data-stu-id="d4dae-289">Best mode</span></span> |
|---------|------------|-------------|-----------|
| <span data-ttu-id="d4dae-290">***d***</span><span class="sxs-lookup"><span data-stu-id="d4dae-290">***d***</span></span> | <span data-ttu-id="d4dae-291">9</span><span class="sxs-lookup"><span data-stu-id="d4dae-291">9</span></span>          | <span data-ttu-id="d4dae-292">17</span><span class="sxs-lookup"><span data-stu-id="d4dae-292">17</span></span>          | <span data-ttu-id="d4dae-293">33</span><span class="sxs-lookup"><span data-stu-id="d4dae-293">33</span></span>        |



 

<span data-ttu-id="d4dae-294">*(b) abrir LUT*</span><span class="sxs-lookup"><span data-stu-id="d4dae-294">*(b) Open LUT*</span></span>



| <span data-ttu-id="d4dae-295">Dimensão de entrada</span><span class="sxs-lookup"><span data-stu-id="d4dae-295">Input dimension</span></span> | <span data-ttu-id="d4dae-296">Modo de prova</span><span class="sxs-lookup"><span data-stu-id="d4dae-296">Proof mode</span></span> | <span data-ttu-id="d4dae-297">Modo Normal</span><span class="sxs-lookup"><span data-stu-id="d4dae-297">Normal mode</span></span> | <span data-ttu-id="d4dae-298">Modo melhor</span><span class="sxs-lookup"><span data-stu-id="d4dae-298">Best mode</span></span> |
|-----------------|------------|-------------|-----------|
| <span data-ttu-id="d4dae-299">4</span><span class="sxs-lookup"><span data-stu-id="d4dae-299">4</span></span>               | <span data-ttu-id="d4dae-300">5</span><span class="sxs-lookup"><span data-stu-id="d4dae-300">5</span></span>          | <span data-ttu-id="d4dae-301">7</span><span class="sxs-lookup"><span data-stu-id="d4dae-301">7</span></span>           | <span data-ttu-id="d4dae-302">9</span><span class="sxs-lookup"><span data-stu-id="d4dae-302">9</span></span>         |
| <span data-ttu-id="d4dae-303">5</span><span class="sxs-lookup"><span data-stu-id="d4dae-303">5</span></span>               | <span data-ttu-id="d4dae-304">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-304">2</span></span>          | <span data-ttu-id="d4dae-305">3</span><span class="sxs-lookup"><span data-stu-id="d4dae-305">3</span></span>           | <span data-ttu-id="d4dae-306">3</span><span class="sxs-lookup"><span data-stu-id="d4dae-306">3</span></span>         |
| <span data-ttu-id="d4dae-307">6</span><span class="sxs-lookup"><span data-stu-id="d4dae-307">6</span></span>               | <span data-ttu-id="d4dae-308">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-308">2</span></span>          | <span data-ttu-id="d4dae-309">3</span><span class="sxs-lookup"><span data-stu-id="d4dae-309">3</span></span>           | <span data-ttu-id="d4dae-310">3</span><span class="sxs-lookup"><span data-stu-id="d4dae-310">3</span></span>         |
| <span data-ttu-id="d4dae-311">7</span><span class="sxs-lookup"><span data-stu-id="d4dae-311">7</span></span>               | <span data-ttu-id="d4dae-312">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-312">2</span></span>          | <span data-ttu-id="d4dae-313">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-313">2</span></span>           | <span data-ttu-id="d4dae-314">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-314">2</span></span>         |
| <span data-ttu-id="d4dae-315">8 ou mais</span><span class="sxs-lookup"><span data-stu-id="d4dae-315">8 or more</span></span>       | <span data-ttu-id="d4dae-316">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-316">2</span></span>          | <span data-ttu-id="d4dae-317">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-317">2</span></span>           | <span data-ttu-id="d4dae-318">2</span><span class="sxs-lookup"><span data-stu-id="d4dae-318">2</span></span>         |



 

<span data-ttu-id="d4dae-319">**Tabela 1:** Tamanhos de LUT usados no algoritmo</span><span class="sxs-lookup"><span data-stu-id="d4dae-319">**Table 1:** LUT sizes used in the algorithm</span></span>

<span data-ttu-id="d4dae-320">Cada LUT aberta pode ter um número diferente de etapas em cada canal de entrada, e os locais de amostragem não precisam ser igualmente espaçados.</span><span class="sxs-lookup"><span data-stu-id="d4dae-320">Each open LUT can have a different number of steps in each input channel, and the sampling locations do not have to be equally spaced.</span></span> <span data-ttu-id="d4dae-321">Para uma determinada camada de LUT aberta, há uma combinação Colorant associada, por exemplo, ![ mostra o c subscrito 1,..., c subscript k.](images/transformcreation-image045.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-321">For a given open LUT stratum, there is an associated colorant combination, for example, ![Shows C subscript 1, ..., C subscript k.](images/transformcreation-image045.gif)</span></span> <span data-ttu-id="d4dae-322">, em que ![ mostra o script C i.](images/transformcreation-image047.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-322">, where the ![Shows C subscript i.](images/transformcreation-image047.gif)</span></span> <span data-ttu-id="d4dae-323">s são inteiros distintos entre 1 e *n*.</span><span class="sxs-lookup"><span data-stu-id="d4dae-323">s are distinct integers between 1 and *n*.</span></span> <span data-ttu-id="d4dae-324">Eles são os índices de canal correspondentes ao colorants "ativo" neste Strata.</span><span class="sxs-lookup"><span data-stu-id="d4dae-324">They are the channel indices corresponding to the "active" colorants in this strata.</span></span>

<span data-ttu-id="d4dae-325">ETAPA 1: filtrar a matriz de entrada de valores de dispositivo que não estão contidos neste Strata.</span><span class="sxs-lookup"><span data-stu-id="d4dae-325">STEP 1: Filter out the inputted array of device values that are not contained in this strata.</span></span> <span data-ttu-id="d4dae-326">Um valor de dispositivo ![ mostra o x subscrito 1, x subscrito 2,..., X subscript n.](images/transformcreation-image049.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-326">A device value ![Shows X subscript 1, X subscript 2, ..., X subscript n.](images/transformcreation-image049.gif)</span></span> <span data-ttu-id="d4dae-327">está contido no Strata, se e somente se ![ o mostrar um conjunto de valores para um canal.](images/transformcreation-image051.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-327">is contained in the strata, if and only if ![Shows a set of values for a channel.](images/transformcreation-image051.gif)</span></span> <span data-ttu-id="d4dae-328">e todos os outros canais são 0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-328">and all other channels are 0.</span></span> <span data-ttu-id="d4dae-329">Se o conjunto filtrado tiver *N* entradas, Let</span><span class="sxs-lookup"><span data-stu-id="d4dae-329">If the filtered set has *N* entries, let</span></span>

![Mostra uma equação a ser usada se o conjunto filtrado tiver N entradas.](images/transformcreation-image053.png)

<span data-ttu-id="d4dae-331">Para cada</span><span class="sxs-lookup"><span data-stu-id="d4dae-331">For each</span></span> ![Mostra i igual a 1, 2,..., k.](images/transformcreation-image041.gif) <span data-ttu-id="d4dae-333">, itere as seguintes etapas 2-5:</span><span class="sxs-lookup"><span data-stu-id="d4dae-333">, iterate the following steps 2-5:</span></span>

<span data-ttu-id="d4dae-334">ETAPA 2: se ![ Mostrar d subscrito provisório (k) igual a 1.](images/transformcreation-image055.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-334">STEP 2: If ![Shows d subscript tentative (k) equal to 1.](images/transformcreation-image055.gif)</span></span> <span data-ttu-id="d4dae-335">, SAMP *i* tem apenas 1 ponto, que deve ser 1,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-335">, Samp *i* has only 1 point, which must be 1.0.</span></span> <span data-ttu-id="d4dae-336">Passe para o próximo *i*.</span><span class="sxs-lookup"><span data-stu-id="d4dae-336">Move on to the next *i*.</span></span> <span data-ttu-id="d4dae-337">Caso contrário, continue na etapa 3.</span><span class="sxs-lookup"><span data-stu-id="d4dae-337">Otherwise, continue to STEP 3.</span></span>

<span data-ttu-id="d4dae-338">ETAPA 3: classificar os exemplos filtrados em ordem crescente no</span><span class="sxs-lookup"><span data-stu-id="d4dae-338">STEP 3: Sort the filtered samples in ascending order in the</span></span> ![Mostra o script C i.](images/transformcreation-image047.gif) <span data-ttu-id="d4dae-340">canal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-340">channel.</span></span>

<span data-ttu-id="d4dae-341">ETAPA 4: definir a grade de amostragem "provisória" usando os nós</span><span class="sxs-lookup"><span data-stu-id="d4dae-341">STEP 4: Define the "tentative" sampling grid using the nodes</span></span>

![Mostra os nós usados para definir a grade de amostragem "provisória".](images/transformcreation-image057.png)

<span data-ttu-id="d4dae-343">onde</span><span class="sxs-lookup"><span data-stu-id="d4dae-343">where</span></span> ![Mostra j igual a 1, 2,..., d subscrito provisório (k).](images/transformcreation-image059.gif) <span data-ttu-id="d4dae-345">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-345">.</span></span>

<span data-ttu-id="d4dae-346">ETAPA 5: regularize a grade provisória para garantir que ela esteja em conformidade com monotônico estrita e também que termine com 1,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-346">STEP 5: Regularize the tentative grid to ensure that it conforms with strict monotonicity and also that it ends with 1.0.</span></span> <span data-ttu-id="d4dae-347">Como a matriz já está classificada, os nós na grade provisória já são monotônico nondecreasing.</span><span class="sxs-lookup"><span data-stu-id="d4dae-347">Because the array is already sorted, the nodes in the tentative grid are already monotonic nondecreasing.</span></span> <span data-ttu-id="d4dae-348">No entanto, nós adjacentes podem ser idênticos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-348">However, adjacent nodes might be identical.</span></span> <span data-ttu-id="d4dae-349">Você pode corrigir isso removendo nós idênticos, se necessário.</span><span class="sxs-lookup"><span data-stu-id="d4dae-349">You can fix this by removing identical nodes, if necessary.</span></span> <span data-ttu-id="d4dae-350">Por fim, após esse procedimento, se o ponto de extremidade for menor que 1,0, substitua-o por 1,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-350">Finally, after this procedure, if the end point is less than 1.0, replace it with 1.0.</span></span>

<span data-ttu-id="d4dae-351">Observe que a etapa 5 é o motivo pelo qual o LUT STRATA pode ter um número diferente de etapas em cada canal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-351">Note that STEP 5 is the reason that the LUT strata may have a different number of steps in each channel.</span></span> <span data-ttu-id="d4dae-352">Após a regularização, o número de etapas em um canal pode ser menor que</span><span class="sxs-lookup"><span data-stu-id="d4dae-352">After the regularization, the number of steps in a channel may be less than</span></span> ![Mostra o d subscrito provisório (k).](images/transformcreation-image061.gif) <span data-ttu-id="d4dae-354">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-354">.</span></span>

## <a name="interpolation"></a><span data-ttu-id="d4dae-355">Interpola</span><span class="sxs-lookup"><span data-stu-id="d4dae-355">Interpolation</span></span>

<span data-ttu-id="d4dae-356">Você pode construir o estratificação do cubo de unidade abrindo LUT Strata e fechado LUT Strata.</span><span class="sxs-lookup"><span data-stu-id="d4dae-356">You can construct the stratification of the unit cube by open LUT strata and closed LUT strata.</span></span> <span data-ttu-id="d4dae-357">Para executar a interpolação usando essa "estrutura de LUT esparsa", siga estas etapas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-357">To perform interpolation using this "sparse LUT structure," follow these steps.</span></span> <span data-ttu-id="d4dae-358">Assumir um determinado valor de dispositivo de entrada</span><span class="sxs-lookup"><span data-stu-id="d4dae-358">Assume a given input device value</span></span> ![Mostra (X subscript 1, X subscrito 2,..., X subscript n).](images/transformcreation-image049.gif) <span data-ttu-id="d4dae-360">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-360">.</span></span>

<span data-ttu-id="d4dae-361">ETAPA 1: determinar o número de canais "ativos".</span><span class="sxs-lookup"><span data-stu-id="d4dae-361">STEP 1: Determine the number of "active" channels.</span></span> <span data-ttu-id="d4dae-362">Este é o número de canais diferentes de zero.</span><span class="sxs-lookup"><span data-stu-id="d4dae-362">This is the number of non-zero channels.</span></span> <span data-ttu-id="d4dae-363">Isso determina a dimensão de Strata *k* para pesquisar o estrato que o contém.</span><span class="sxs-lookup"><span data-stu-id="d4dae-363">This determines the strata dimension *k* to search for the containing stratum.</span></span> <span data-ttu-id="d4dae-364">Mais precisamente, a dimensão Strata será 3 se o número de canais ativos for ![ exibido menor ou igual a 3.](images/transformcreation-image063.gif)</span><span class="sxs-lookup"><span data-stu-id="d4dae-364">More precisely, the strata dimension is 3 if the number of active channels is ![Shows less than or equal to 3.](images/transformcreation-image063.gif)</span></span> <span data-ttu-id="d4dae-365">caso contrário, a dimensão Strata é igual ao número de canais ativos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-365">, otherwise, the strata dimension is the same as the number of active channels.</span></span>

<span data-ttu-id="d4dae-366">ETAPA 2: em</span><span class="sxs-lookup"><span data-stu-id="d4dae-366">STEP 2: Within</span></span> ![Mostra o subscrito Sigma k.](images/transformcreation-image026.gif) <span data-ttu-id="d4dae-368">, procure o estrato que o contém.</span><span class="sxs-lookup"><span data-stu-id="d4dae-368">, search for the containing stratum.</span></span> <span data-ttu-id="d4dae-369">Um valor de dispositivo estará contido em um estrato aberto se todos os canais correspondentes ao estrato tiverem um valor diferente de zero e todos os outros canais forem zero.</span><span class="sxs-lookup"><span data-stu-id="d4dae-369">A device value is contained in an open stratum if all the channels corresponding to the stratum have non-zero value, and all other channels are zero.</span></span> <span data-ttu-id="d4dae-370">Um valor de dispositivo estará contido em um estrato fechado se cada canal não representado pelo estrato for zero.</span><span class="sxs-lookup"><span data-stu-id="d4dae-370">A device value is contained in a closed stratum if every channel not represented by the stratum is zero.</span></span> <span data-ttu-id="d4dae-371">Se nenhum estrato de contenção for encontrado, haverá uma condição de erro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-371">If no containing stratum is found, there is an error condition.</span></span> <span data-ttu-id="d4dae-372">Cancelar e relatar falha.</span><span class="sxs-lookup"><span data-stu-id="d4dae-372">Cancel and report failure.</span></span> <span data-ttu-id="d4dae-373">Se um estrato que o contém for encontrado, vá para a próxima etapa.</span><span class="sxs-lookup"><span data-stu-id="d4dae-373">If a containing stratum is found, proceed to the next step.</span></span>

<span data-ttu-id="d4dae-374">ETAPA 3: se o estrato que o contém está fechado, a interpolação dentro do estrato pode ser feita por qualquer algoritmo de interpolação conhecido.</span><span class="sxs-lookup"><span data-stu-id="d4dae-374">STEP 3: If the containing stratum is closed, then interpolation within the stratum can be done by any known interpolation algorithm.</span></span> <span data-ttu-id="d4dae-375">Nessa implementação, a escolha do algoritmo é a interpolação tetrahedral.</span><span class="sxs-lookup"><span data-stu-id="d4dae-375">In this implementation, the choice of algorithm is tetrahedral interpolation.</span></span> <span data-ttu-id="d4dae-376">Se o estrato que o contém estiver aberto, e o valor do dispositivo estiver estritamente dentro do estrato, ou seja,</span><span class="sxs-lookup"><span data-stu-id="d4dae-376">If the containing stratum is open, and the device value lies strictly within the stratum, that is,</span></span>

<span data-ttu-id="d4dae-377">![Mostra o subscript X que é maior ou igual a... ](images/transformcreation-image065.gif) primeiro nó no canal *i* -ésimo</span><span class="sxs-lookup"><span data-stu-id="d4dae-377">![Shows X subscript i greater than or equal to...](images/transformcreation-image065.gif) first node in *i* th channel</span></span>

<span data-ttu-id="d4dae-378">onde *eu* é um índice de canal para o estrato, então, o algoritmo de interpolação padrão, como interpolação tetrahedral, funciona.</span><span class="sxs-lookup"><span data-stu-id="d4dae-378">where *i* is a channel index for the stratum, then standard interpolation algorithm, such as tetrahedral interpolation, works.</span></span>

<span data-ttu-id="d4dae-379">Se ![ Mostrar um subscript i menor que... ](images/transformcreation-image067.gif) primeiro nó no canal *i* , em seguida , o valor do dispositivo entrará na "lacuna" entre os subespaços de estrato e de dimensão inferior.</span><span class="sxs-lookup"><span data-stu-id="d4dae-379">If ![Shows X subscript i less than...](images/transformcreation-image067.gif) first node in *i* th channel for some *i*, then the device value falls into the "gap" between the stratum and the lower dimensional subspaces.</span></span> <span data-ttu-id="d4dae-380">Esse MOI não se preocupa com um algoritmo de interpolação por si, portanto, qualquer algoritmo de interpolação pode ser usado para interpolar dentro dessa "lacuna", embora o algoritmo preferencial seja a seguinte interpolação transfinita.</span><span class="sxs-lookup"><span data-stu-id="d4dae-380">This MOI is not concerned with an interpolation algorithm per se, so any interpolation algorithm can be used to interpolate within this "gap," although the preferred algorithm is the following transfinite interpolation.</span></span>

<span data-ttu-id="d4dae-381">A arquitetura do módulo de interpolação é ilustrada nas duas partes da Figura 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-381">The architecture of the interpolation module is illustrated in the two parts of Figure 1.</span></span>

![Diagrama que mostra a parte um da arquitetura do módulo de interpolação.](images/transformcreation-image068.png)

![Diagrama que mostra a parte dois da arquitetura do módulo de interpolação.](images/transformcreation-image070.png)

<span data-ttu-id="d4dae-384">**Figura 1:** Arquitetura do módulo Intepolation</span><span class="sxs-lookup"><span data-stu-id="d4dae-384">**Figure 1:** Intepolation module architecture</span></span>

<span data-ttu-id="d4dae-385">Conforme explicado anteriormente, esse algoritmo é capaz de obter amostragem razoavelmente densa em regiões do espaço do dispositivo que contêm uma combinação importante de colorants, ao mesmo tempo em que minimiza o tamanho total de LUTs necessário.</span><span class="sxs-lookup"><span data-stu-id="d4dae-385">As explained earlier, this algorithm is able to achieve reasonably dense sampling in regions of the device space that contain important combination of colorants, while minimizing the total size of LUTs needed.</span></span> <span data-ttu-id="d4dae-386">A tabela a seguir mostra uma comparação do número de nós necessários para a implementação de LUT esparsa (usando o algoritmo \# 1 e o modo normal) e a implementação de lut uniforme correspondente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-386">The following table shows a comparison of the number of nodes needed for the sparse LUT implementation (using Algorithm \#1 and normal mode) and the corresponding uniform LUT implementation.</span></span>



| <span data-ttu-id="d4dae-387">**Número de canais de entrada**</span><span class="sxs-lookup"><span data-stu-id="d4dae-387">**Number of input channels**</span></span> | <span data-ttu-id="d4dae-388">**LUT esparsa**</span><span class="sxs-lookup"><span data-stu-id="d4dae-388">**Sparse LUT**</span></span> | <span data-ttu-id="d4dae-389">**LUT uniforme**</span><span class="sxs-lookup"><span data-stu-id="d4dae-389">**Uniform LUT**</span></span> |
|------------------------------|----------------|-----------------|
| <span data-ttu-id="d4dae-390">5</span><span class="sxs-lookup"><span data-stu-id="d4dae-390">5</span></span>                            | <span data-ttu-id="d4dae-391">142498</span><span class="sxs-lookup"><span data-stu-id="d4dae-391">142498</span></span>         | <span data-ttu-id="d4dae-392">1419857</span><span class="sxs-lookup"><span data-stu-id="d4dae-392">1419857</span></span>         |
| <span data-ttu-id="d4dae-393">6</span><span class="sxs-lookup"><span data-stu-id="d4dae-393">6</span></span>                            | <span data-ttu-id="d4dae-394">217582</span><span class="sxs-lookup"><span data-stu-id="d4dae-394">217582</span></span>         | <span data-ttu-id="d4dae-395">24137567</span><span class="sxs-lookup"><span data-stu-id="d4dae-395">24137567</span></span>        |
| <span data-ttu-id="d4dae-396">7</span><span class="sxs-lookup"><span data-stu-id="d4dae-396">7</span></span>                            | <span data-ttu-id="d4dae-397">347444</span><span class="sxs-lookup"><span data-stu-id="d4dae-397">347444</span></span>         | <span data-ttu-id="d4dae-398">410338673</span><span class="sxs-lookup"><span data-stu-id="d4dae-398">410338673</span></span>       |
| <span data-ttu-id="d4dae-399">8</span><span class="sxs-lookup"><span data-stu-id="d4dae-399">8</span></span>                            | <span data-ttu-id="d4dae-400">559618</span><span class="sxs-lookup"><span data-stu-id="d4dae-400">559618</span></span>         | <span data-ttu-id="d4dae-401">6975757441</span><span class="sxs-lookup"><span data-stu-id="d4dae-401">6975757441</span></span>      |



 

## <a name="interpolation-within-a-unit-cube"></a><span data-ttu-id="d4dae-402">Interpolação dentro de um cubo de unidade</span><span class="sxs-lookup"><span data-stu-id="d4dae-402">Interpolation within a unit cube</span></span>

<span data-ttu-id="d4dae-403">Uma etapa básica no caso da grade retangular é a interpolação dentro de uma célula delimitadora.</span><span class="sxs-lookup"><span data-stu-id="d4dae-403">A basic step in the case of rectangular grid is interpolation within an enclosing cell.</span></span> <span data-ttu-id="d4dae-404">Para um ponto de entrada, você pode determinar a célula de fechamento facilmente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-404">For an input point, you can determine the enclosing cell easily.</span></span> <span data-ttu-id="d4dae-405">Em uma grade retangular, o valor de saída em cada um dos vértices (pontos de canto) da célula de circunscrição é especificado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-405">In a rectangular grid, the output value at each of the vertices (corner points) of the enclosing cell is specified.</span></span> <span data-ttu-id="d4dae-406">Elas também são as únicas condições de limite (BCs) que uma interpolação deve satisfazer: a interpolação deve passar por todos esses pontos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-406">They are also the only boundary conditions (BCs) that an interpolant must satisfy: The interpolant must pass through all these points.</span></span> <span data-ttu-id="d4dae-407">Observe que essas condições de limite estão em pontos "discretos", nesse caso, os pontos de canto 2n da célula, em que n é a dimensão do espaço de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-407">Note that these boundary conditions are on "discrete" points, in this case the 2n corner points of the cell, where n is the dimension of the color space.</span></span>

<span data-ttu-id="d4dae-408">É útil formalizar o conceito de condições de limite antes de prosseguir.</span><span class="sxs-lookup"><span data-stu-id="d4dae-408">It is useful to formalize the concept of boundary conditions before moving on.</span></span> <span data-ttu-id="d4dae-409">Para qualquer subconjunto S do limite da célula delimitadora (o cubo de unidade em n dimensões), uma condição de limite em S é uma especificação de uma função BC: S → RM, em que m é a dimensão de saída.</span><span class="sxs-lookup"><span data-stu-id="d4dae-409">For any subset S of the boundary of the enclosing cell (the unit cube in n dimensions), a boundary condition on S is a specification of a function BC: S → Rm, where m is the output dimension.</span></span> <span data-ttu-id="d4dae-410">Em outras palavras, uma interpolação, que pode ser denotada interp: \[ 0, 1 \] n → RM, é necessária para satisfazer: interp (x) = BC (x) para todos os x em S.</span><span class="sxs-lookup"><span data-stu-id="d4dae-410">In other words, an interpolant, which may be denoted Interp: \[0,1\]n→ Rm, is required to satisfy: Interp(x) = BC(x) for all x in S.</span></span>

<span data-ttu-id="d4dae-411">No cenário padrão de interpolação no cubo de unidade, S é o conjunto de pontos discretos que são os vértices 2n do cubo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-411">In the standard scenario of interpolation on the unit cube, S is the set of discrete points that are the 2n vertices of the cube.</span></span>

<span data-ttu-id="d4dae-412">Agora você pode generalizar as condições de limite para resolver os problemas descritos anteriormente e fornecer um novo algoritmo de interpolação dentro do cubo de unidade.</span><span class="sxs-lookup"><span data-stu-id="d4dae-412">You can now generalize the boundary conditions to solve the issues described earlier and provide a new interpolation algorithm within the unit cube.</span></span> <span data-ttu-id="d4dae-413">Em vez de permitir apenas pontos de limite discretos, as condições de limite podem ser impostas em uma face de limite inteira do cubo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-413">Instead of allowing only discrete boundary points, boundary conditions can be imposed on a whole boundary face of the cube.</span></span> <span data-ttu-id="d4dae-414">As suposições exatas são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="d4dae-414">The precise assumptions are as follows:</span></span>

<span data-ttu-id="d4dae-415">(a) o ponto VN = (1, 1,..., 1) é especial e apenas uma condição de limite discreta é permitida.</span><span class="sxs-lookup"><span data-stu-id="d4dae-415">(a) The point vn =(1,1,…,1) is special and only a discrete boundary condition is allowed.</span></span> <span data-ttu-id="d4dae-416">Em outras palavras, nenhuma condição de limite contínua pode ser imposta nas faces de limite de n XI = 1 (i = 1,..., n).</span><span class="sxs-lookup"><span data-stu-id="d4dae-416">In other words, no continuous boundary conditions can be imposed on the n boundary faces xi=1 (i=1,…,n).</span></span>

<span data-ttu-id="d4dae-417">(b) para cada uma das n restantes faces de limite XI = 0 (i = 1,..., n), a condição de limite pode ser imposta em toda a face, com a condição de compatibilidade que se duas faces se interseccionam, as condições de limite nas faces devem concordar na interseção.</span><span class="sxs-lookup"><span data-stu-id="d4dae-417">(b) For each of the remaining n boundary faces xi=0 (i=1,…,n), boundary condition can be imposed on the whole face, with the compatibility condition that if two faces intersect, the boundary conditions on the faces should agree on the intersection.</span></span>

<span data-ttu-id="d4dae-418">(c) todos os vértices não contidos nas faces com a condição de limite terão uma condição de limite individual (discreta).</span><span class="sxs-lookup"><span data-stu-id="d4dae-418">(c) Any vertices not contained in the faces with boundary condition will have an individual (discrete) boundary condition.</span></span>

<span data-ttu-id="d4dae-419">Você pode se referir a uma condição de limite discreta como dados finitos e uma condição de limite contínua como dados transfinitos para discutir a interpolação em dados finitos e transfinitos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-419">You can refer to a discrete boundary condition as finite data, and a continuous boundary condition as transfinite data in discussing interpolation on finite and transfinite data.</span></span>

<span data-ttu-id="d4dae-420">Primeiro, examine a interpolação tetrahedral padrão (como a usada na patente do Sakamoto), que ajuda a definir as notações para essa formulação específica do problema.</span><span class="sxs-lookup"><span data-stu-id="d4dae-420">First, review the standard tetrahedral interpolation (such as that used in Sakamoto's patent) which helps set the notations for this particular formulation of the problem.</span></span> <span data-ttu-id="d4dae-421">É conhecido que o cubo de unidade \[ 0, 1 \] n pode ser subdividido em n!</span><span class="sxs-lookup"><span data-stu-id="d4dae-421">It is known that the unit cube \[0,1\]n can be subdivided into n!</span></span> <span data-ttu-id="d4dae-422">tetrahedra, parametrizados pelo conjunto de permutações em símbolos n.</span><span class="sxs-lookup"><span data-stu-id="d4dae-422">tetrahedra, parameterized by the set of permutations on n symbols.</span></span> <span data-ttu-id="d4dae-423">Mais especificamente, cada tetraedro é definido por desigualdades</span><span class="sxs-lookup"><span data-stu-id="d4dae-423">More specifically, each such tetrahedron is defined by inequalities</span></span>

![Mostra a fórmula para o inequalites do tetrahedrons.](images/transformcreation-image073.gif)

<span data-ttu-id="d4dae-425">em que σ: {1, 2,.., n} → {1, 2,..., n} é uma permutação de "Symbols" 1, 2,..., n, ou seja, é um mapeamento bijective do conjunto de n símbolos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-425">where σ:{1,2,..,n}→{1,2,…,n} is a permutation of "symbols" 1, 2, …, n, that is, it is a bijective mapping of the set of n symbols.</span></span> <span data-ttu-id="d4dae-426">Por exemplo, se n = 3 e σ = (3, 2, 1), significando σ (1) = 3, σ (2) = 2, σ (3) = 1, o tetraedro correspondente é definido por z ≥ y ≥ x, em que a notação comum x, y, z é usada para x1, X2, X3.</span><span class="sxs-lookup"><span data-stu-id="d4dae-426">For example, if n = 3 and σ = (3, 2, 1), meaning σ(1)=3, σ(2)=2, σ(3)=1, then the corresponding tetrahedron is defined by z≥y≥x, where the common notation x, y, z is used for x1, x2, x3.</span></span> <span data-ttu-id="d4dae-427">Observe que esses tetrahedrons não são separados uns dos outros.</span><span class="sxs-lookup"><span data-stu-id="d4dae-427">Note that these tetrahedrons are not disjoint from each other.</span></span> <span data-ttu-id="d4dae-428">Para fins de interpolação, os pontos que dependem de uma face comum de dois tetrahedrons distintos terão o mesmo valor de interpolação, independentemente de qual tetraedro é usado na interpolação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-428">For the purpose of interpolation, points lying on a common face of two distinct tetrahedrons will have the same interpolation value regardless of which tetrahedron is used in the interpolation.</span></span> <span data-ttu-id="d4dae-429">Ainda, no cenário padrão de interpolação em pontos finitos, para um determinado ponto de entrada (x1,..., Xn), primeiro determine em qual tetraedro ele se encontra ou, de modo equivalente, a permutação correspondente σ, então o tetrahedral interpolado é definido como</span><span class="sxs-lookup"><span data-stu-id="d4dae-429">Still, in the standard scenario of interpolating on finite points, for a given input point (x1, …, xn), first determine which tetrahedron it lies in, or equivalently, the corresponding permutation σ, then the tetrahedral interpolant is defined as</span></span>

![Mostra a equação que define o tetrahedral interpolado.](images/transformcreation-image075.png)

<span data-ttu-id="d4dae-431">onde</span><span class="sxs-lookup"><span data-stu-id="d4dae-431">where</span></span> ![Mostra a equação para os vetores de base padrão.](images/transformcreation-image077.png) <span data-ttu-id="d4dae-433">para i = 1,..., n e E1,..., en são os vetores de base padrão.</span><span class="sxs-lookup"><span data-stu-id="d4dae-433">for i=1, …, n, and e1, …, en are the standard basis vectors.</span></span> <span data-ttu-id="d4dae-434">Antes de passar para a generalização, observe que V0, v1,..., vn são os vértices do tetraedro e</span><span class="sxs-lookup"><span data-stu-id="d4dae-434">Before moving on to the generalization, note that v0, v1, …, vn are the vertices of the tetrahedron, and</span></span> ![Mostra as coordenadas de barycentric.](images/transformcreation-image079.png) <span data-ttu-id="d4dae-436">são as "coordenadas barycentric".</span><span class="sxs-lookup"><span data-stu-id="d4dae-436">are the "barycentric coordinates."</span></span>

<span data-ttu-id="d4dae-437">Para o caso geral do BCs em rostos de limite, você pode usar o conceito de projeção barycentric.</span><span class="sxs-lookup"><span data-stu-id="d4dae-437">For the general case of BCs on boundary faces, you can use the concept of barycentric projection.</span></span> <span data-ttu-id="d4dae-438">Como antes, para um determinado ponto de entrada (x1,..., Xn), primeiro determine em qual tetraedro ele se encontra ou, de forma equivalente, o σ de permutação correspondente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-438">As before, for a given input point (x1, …, xn), first determine in which tetrahedron it lies, or equivalently, the corresponding permutation σ.</span></span> <span data-ttu-id="d4dae-439">Em seguida, execute uma série de projeções barycentric, da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="d4dae-439">Then perform a series of barycentric projections, as follows.</span></span> <span data-ttu-id="d4dae-440">A primeira projeção</span><span class="sxs-lookup"><span data-stu-id="d4dae-440">The first projection</span></span> ![Mostra o subscript BProj 1 (x).](images/transformcreation-image081.gif) <span data-ttu-id="d4dae-442">envia o ponto para o plano</span><span class="sxs-lookup"><span data-stu-id="d4dae-442">sends the point to the plane</span></span> ![Mostra o Delta de subscript X (1) igual a 0.](images/transformcreation-image083.gif) <span data-ttu-id="d4dae-444">apenas</span><span class="sxs-lookup"><span data-stu-id="d4dae-444">unless</span></span> ![Mostra o X igual a V subscript n.](images/transformcreation-image085.gif) <span data-ttu-id="d4dae-446">Nesse caso, ele não é alterado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-446">in which case it is not changed.</span></span> <span data-ttu-id="d4dae-447">A definição exata do BProj do mapa é definida da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="d4dae-447">The precise definition of the map BProj is defined as follows:</span></span>

![Mostra a equação para a definição exata do mapa BProj.](images/transformcreation-image087.png)

<span data-ttu-id="d4dae-449">por</span><span class="sxs-lookup"><span data-stu-id="d4dae-449">with</span></span> ![Mostra a equação para o P subscript k.](images/transformcreation-image089.png) <span data-ttu-id="d4dae-451">e k = 1, 2,..., n.</span><span class="sxs-lookup"><span data-stu-id="d4dae-451">and k = 1, 2, …, n.</span></span>

<span data-ttu-id="d4dae-452">No caso</span><span class="sxs-lookup"><span data-stu-id="d4dae-452">In the case</span></span> ![Mostra X é igual a V subscript n.](images/transformcreation-image085.gif) <span data-ttu-id="d4dae-454">, você pode parar, pois BC é definida em VN por pressuposição (a).</span><span class="sxs-lookup"><span data-stu-id="d4dae-454">, you can stop, because BC is defined at vn by Assumption (a).</span></span> <span data-ttu-id="d4dae-455">No caso</span><span class="sxs-lookup"><span data-stu-id="d4dae-455">In the case</span></span> ![Mostra X não é igual a V subscript n.](images/transformcreation-image091.gif) <span data-ttu-id="d4dae-457">, está claro que</span><span class="sxs-lookup"><span data-stu-id="d4dae-457">, it is clear that</span></span> ![Mostra o subscript BProj 1 (X).](images/transformcreation-image081.gif) <span data-ttu-id="d4dae-459">tem o σ (1) th Component Annihilated.</span><span class="sxs-lookup"><span data-stu-id="d4dae-459">has the σ(1)th component annihilated.</span></span> <span data-ttu-id="d4dae-460">Em outras palavras, ele está em uma das faces de limite.</span><span class="sxs-lookup"><span data-stu-id="d4dae-460">In other words, it is on one of boundary faces.</span></span> <span data-ttu-id="d4dae-461">Ele está em uma face em que a BC é definida; nesse caso, você pode parar ou executar outra projeção barycentric</span><span class="sxs-lookup"><span data-stu-id="d4dae-461">Either it is on a face on which BC is defined, in which case you can stop, or you perform another barycentric projection</span></span> ![Mostra o subscript BProj 2 (X ').](images/transformcreation-image093.gif) <span data-ttu-id="d4dae-463">onde</span><span class="sxs-lookup"><span data-stu-id="d4dae-463">where</span></span> ![Mostra o X ' igual ao BProj 1 (X).](images/transformcreation-image095.gif) <span data-ttu-id="d4dae-465">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-465">.</span></span> <span data-ttu-id="d4dae-466">E se</span><span class="sxs-lookup"><span data-stu-id="d4dae-466">And if</span></span> ![Mostra o X ' ' = Bproj subscrito 1 (X ').](images/transformcreation-image097.gif) <span data-ttu-id="d4dae-468">está em uma face em que a BC está definida, você pode parar; caso contrário, execute outra projeção</span><span class="sxs-lookup"><span data-stu-id="d4dae-468">is on a face on which BC is defined, you can stop; otherwise, perform yet another projection</span></span> ![Mostra o BProj subscript 3 (X ' ').](images/transformcreation-image099.gif) <span data-ttu-id="d4dae-470">.</span><span class="sxs-lookup"><span data-stu-id="d4dae-470">.</span></span> <span data-ttu-id="d4dae-471">Como cada projeção annihilates um componente, a dimensão efetiva diminui, portanto, você sabe que o processo deve eventualmente parar.</span><span class="sxs-lookup"><span data-stu-id="d4dae-471">Because every projection annihilates one component, the effective dimension decreases, so you know the process must eventually stop.</span></span> <span data-ttu-id="d4dae-472">No pior cenário, você executa n projeções à dimensão 0, ou seja, vértices no cubo, que de acordo com a suposição (c), você sabe que a BC será definida em.</span><span class="sxs-lookup"><span data-stu-id="d4dae-472">In the worst case scenario, you perform n projections down to dimension 0, that is, vertices on the cube, which according to Assumption (c), you know BC will be defined on.</span></span>

<span data-ttu-id="d4dae-473">Supondo que as projeções de K tenham sido executadas, com</span><span class="sxs-lookup"><span data-stu-id="d4dae-473">Assuming that K projections have been performed, with</span></span>

![Mostra uma equação a ser usada supondo que a projeção K tenha sido executada.](images/transformcreation-image101.png)

<span data-ttu-id="d4dae-475">x (0) = x, o ponto de entrada e BC é definido em x (k).</span><span class="sxs-lookup"><span data-stu-id="d4dae-475">x(0)= x, the input point, and BC is defined at x(k).</span></span> <span data-ttu-id="d4dae-476">Em seguida, desenrolar as projeções definindo uma série de vetores de saída:</span><span class="sxs-lookup"><span data-stu-id="d4dae-476">Then unwind the projections by defining a series of output vectors:</span></span>

![Mostra equações para uma série de vetores de saída.](images/transformcreation-image103.png)

<span data-ttu-id="d4dae-478">onde</span><span class="sxs-lookup"><span data-stu-id="d4dae-478">where</span></span> ![Mostra a equação para o Y sobrescrito (K).](images/transformcreation-image105.gif) <span data-ttu-id="d4dae-480">e, finalmente, obter a resposta</span><span class="sxs-lookup"><span data-stu-id="d4dae-480">, and you finally obtain the answer</span></span>

![Mostra interp (x) igual a y Superscript (0).](images/transformcreation-image107.gif)

## <a name="worked-example"></a><span data-ttu-id="d4dae-482">Exemplo trabalhado</span><span class="sxs-lookup"><span data-stu-id="d4dae-482">Worked example</span></span>

![Diagrama que mostra um exemplo de interpolação trabalhado com um cubo de unidade.](images/transformcreation-image108.png)

<span data-ttu-id="d4dae-484">**Figura 2:** Exemplo trabalhado</span><span class="sxs-lookup"><span data-stu-id="d4dae-484">**Figure 2:** Worked example</span></span>

<span data-ttu-id="d4dae-485">Considere a situação descrita na Figura 2, em que n = 3, m = 1, e você tem o seguinte BCs:</span><span class="sxs-lookup"><span data-stu-id="d4dae-485">Consider the situation depicted in Figure 2, where n = 3, m = 1, and you have the following BCs:</span></span>

<span data-ttu-id="d4dae-486">(a) quatro BCs discreto nos vértices</span><span class="sxs-lookup"><span data-stu-id="d4dae-486">(a) Four discrete BCs on the vertices</span></span>

<span data-ttu-id="d4dae-487">(0, 0, 1): β001</span><span class="sxs-lookup"><span data-stu-id="d4dae-487">(0, 0, 1): β001</span></span>

<span data-ttu-id="d4dae-488">(0, 1, 1): β011</span><span class="sxs-lookup"><span data-stu-id="d4dae-488">(0, 1, 1): β011</span></span>

<span data-ttu-id="d4dae-489">(1, 0, 1): β 101</span><span class="sxs-lookup"><span data-stu-id="d4dae-489">(1, 0, 1): β101</span></span>

<span data-ttu-id="d4dae-490">(1, 1, 1): β 111</span><span class="sxs-lookup"><span data-stu-id="d4dae-490">(1, 1, 1): β111</span></span>

<span data-ttu-id="d4dae-491">(b) uma BC contínua na face X3 = 0: F (x1, x2)</span><span class="sxs-lookup"><span data-stu-id="d4dae-491">(b) A continuous BC on the face x3=0: F(x1, x2)</span></span>

<span data-ttu-id="d4dae-492">Computação \# 1: ponto de entrada x = (0,8, 0,5, 0,2).</span><span class="sxs-lookup"><span data-stu-id="d4dae-492">Computation \#1: Input point x = (0.8, 0.5, 0.2).</span></span> <span data-ttu-id="d4dae-493">O tetraedro delimitador é associado à permutação &lt; 1, 2, 3 &gt; .</span><span class="sxs-lookup"><span data-stu-id="d4dae-493">The enclosing tetrahedron is associated with the permutation &lt;1, 2, 3&gt;.</span></span>

<span data-ttu-id="d4dae-494">1ª projeção:</span><span class="sxs-lookup"><span data-stu-id="d4dae-494">1st projection:</span></span> ![Mostra a equação para a primeira projeção.](images/transformcreation-image110.png)

<span data-ttu-id="d4dae-496">Isso já está na face X3 = 0, para que você possa parar.</span><span class="sxs-lookup"><span data-stu-id="d4dae-496">This is already on the face x3=0, so you can stop.</span></span> <span data-ttu-id="d4dae-497">Em seguida, a substituição regressiva fornece</span><span class="sxs-lookup"><span data-stu-id="d4dae-497">Backward substitution then gives</span></span>

![Mostra a resposta para a primeira projeção.](images/transformcreation-image112.png) <span data-ttu-id="d4dae-499">Qual é a resposta.</span><span class="sxs-lookup"><span data-stu-id="d4dae-499">which is the answer.</span></span>

<span data-ttu-id="d4dae-500">Computação \# 2: ponto de entrada x = (0,2, 0,5, 0,8).</span><span class="sxs-lookup"><span data-stu-id="d4dae-500">Computation \#2 : Input point x = (0.2, 0.5, 0.8).</span></span> <span data-ttu-id="d4dae-501">O tetraedro delimitador é associado à permutação &lt; 3, 2, 1 &gt; .</span><span class="sxs-lookup"><span data-stu-id="d4dae-501">The enclosing tetrahedron is associated with the permutation &lt;3, 2, 1&gt;.</span></span>

<span data-ttu-id="d4dae-502">1ª projeção:</span><span class="sxs-lookup"><span data-stu-id="d4dae-502">1st projection:</span></span> ![Mostra a equação para a primeira projeção da computação 2.](images/transformcreation-image113.png)

<span data-ttu-id="d4dae-504">2ª projeção:</span><span class="sxs-lookup"><span data-stu-id="d4dae-504">2nd projection:</span></span> ![Mostra a equação para a segunda projeção da computação 2.](images/transformcreation-image115.png)

<span data-ttu-id="d4dae-506">3ª projeção:</span><span class="sxs-lookup"><span data-stu-id="d4dae-506">3rd projection:</span></span> ![Mostra a equação para a terceira projeção da computação 2.](images/transformcreation-image117.png) <span data-ttu-id="d4dae-508">, que está na face X3 = 0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-508">, which is on the face x3=0.</span></span> <span data-ttu-id="d4dae-509">Em seguida, a substituição regressiva fornece</span><span class="sxs-lookup"><span data-stu-id="d4dae-509">Backward substitution then gives</span></span>

![Mostra as duas primeiras equações para a substituição retroativa.](images/transformcreation-image119.png)

![Mostra a terceira equação para a substituição retroativa.](images/transformcreation-image123.png)<span data-ttu-id="d4dae-512">, que é a resposta final.</span><span class="sxs-lookup"><span data-stu-id="d4dae-512">, which is the final answer.</span></span>

## <a name="applications"></a><span data-ttu-id="d4dae-513">Aplicativos</span><span class="sxs-lookup"><span data-stu-id="d4dae-513">Applications</span></span>

<span data-ttu-id="d4dae-514">*(a) interpolação tetrahedral sequencial*</span><span class="sxs-lookup"><span data-stu-id="d4dae-514">*(a) Sequential Tetrahedral Interpolation*</span></span>

![Diagrama que mostra a interpolação tetrahedral sequencial.](images/transformcreation-image124.png)

<span data-ttu-id="d4dae-516">**Figura 3:** Interpolação tetrahedral sequencial</span><span class="sxs-lookup"><span data-stu-id="d4dae-516">**Figure 3:** Sequential tetrahedral interpolation</span></span>

<span data-ttu-id="d4dae-517">Consulte a Figura 3.</span><span class="sxs-lookup"><span data-stu-id="d4dae-517">Refer to Figure 3.</span></span> <span data-ttu-id="d4dae-518">Para interpolar entre dois planos nos quais as grades incompatíveis foram impostas, considere uma célula que está delimitando um determinado ponto P mostrado na figura.</span><span class="sxs-lookup"><span data-stu-id="d4dae-518">To interpolate between two planes on which incompatible grids have been imposed, consider a cell enclosing a given point P shown in the figure.</span></span> <span data-ttu-id="d4dae-519">Os vértices "principais" da célula vêm diretamente da grade no plano superior.</span><span class="sxs-lookup"><span data-stu-id="d4dae-519">The "top" vertices of the cell come directly from the grid in the top plane.</span></span> <span data-ttu-id="d4dae-520">Os vértices na face inferior não são compatíveis com a grade no plano inferior, portanto, a face inteira é tratada como tendo uma BC com valores obtidos pela interpolação na grade no plano inferior.</span><span class="sxs-lookup"><span data-stu-id="d4dae-520">The vertices in the bottom face are not compatible with the grid in the bottom plane, so the whole face is treated as having a BC with values obtained by interpolation on the grid in the bottom plane.</span></span> <span data-ttu-id="d4dae-521">Em seguida, é claro que essa configuração atende às suposições (a), (b) e (c) acima, e você pode aplicar o algoritmo de interpolação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-521">It is then clear that this setup satisfies Assumptions (a), (b), and (c) above, and you can apply the interpolation algorithm.</span></span>

<span data-ttu-id="d4dae-522">Também é claro que o algoritmo reduziu a dimensão do problema de interpolação em 1, porque o resultado é uma combinação linear de valores nos vértices na grade superior e a interpolação no plano inferior, que tem a dimensão menos 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-522">It is also clear that the algorithm has reduced the dimension of the interpolation problem by 1, because the result is a linear combination of values at the vertices in the upper grid, and interpolation in the lower plane, which has dimension less 1.</span></span> <span data-ttu-id="d4dae-523">Se uma configuração de plano de sanduíche semelhante existir no plano inferior, você poderá aplicar o procedimento nesse plano, reduzindo ainda mais a dimensão em 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-523">If a similar sandwiching plane configuration exists in the lower plane, you can apply the procedure in that plane, further reducing the dimension by 1.</span></span> <span data-ttu-id="d4dae-524">Este procedimento pode continuar até alcançar a dimensão 0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-524">This procedure can continue until you reach dimension 0.</span></span> <span data-ttu-id="d4dae-525">Essa cascata de projeções e interpolações pode ser chamada de "interpolação tetrahedral sequencial".</span><span class="sxs-lookup"><span data-stu-id="d4dae-525">This cascade of projections and interpolations can be called "Sequential Tetrahedral Interpolation."</span></span>

<span data-ttu-id="d4dae-526">*(b) interpolação de lacunas*</span><span class="sxs-lookup"><span data-stu-id="d4dae-526">*(b) Gap Interpolation*</span></span>

![Diagrama que mostra a interpolação de lacunas.](images/transformcreation-image126.jpg)

<span data-ttu-id="d4dae-528">**Figura 4:** Interpolação de lacunas</span><span class="sxs-lookup"><span data-stu-id="d4dae-528">**Figure 4:** Gap interpolation</span></span>

<span data-ttu-id="d4dae-529">Essa é uma grade imposta em um cubo que fica estritamente dentro do quadrante positivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-529">This is a grid imposed on a cube sitting strictly inside the positive quadrant.</span></span> <span data-ttu-id="d4dae-530">O próprio cubo tem uma grade e cada plano de coordenadas tem grades que não são necessariamente compatíveis.</span><span class="sxs-lookup"><span data-stu-id="d4dae-530">The cube itself has a grid on it, and each coordinate plane has grids that are not necessarily compatible.</span></span> <span data-ttu-id="d4dae-531">A "lacuna" entre o cubo e os planos de coordenadas tem uma seção cruzada que é "em formato L" e não receptivos às técnicas padrão.</span><span class="sxs-lookup"><span data-stu-id="d4dae-531">The "gap" between the cube and the coordinate planes has a cross-section that is "L-shaped" and is not amenable to standard techniques.</span></span> <span data-ttu-id="d4dae-532">No entanto, com a técnica apresentada aqui, você pode introduzir facilmente células que abordam essa lacuna.</span><span class="sxs-lookup"><span data-stu-id="d4dae-532">However, with the technique introduced here, you can easily introduce cells that cover this gap.</span></span> <span data-ttu-id="d4dae-533">A Figura 4 descreve um deles.</span><span class="sxs-lookup"><span data-stu-id="d4dae-533">Figure 4 depicts one of these.</span></span> <span data-ttu-id="d4dae-534">As grades nos planos de coordenadas dão suporte à interpolação que fornece o BCs necessário para todas as faces inferiores da célula, com um vértice restante cuja BC é fornecida pelo canto inferior do cubo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-534">The grids on the coordinate planes support interpolation that provides the necessary BCs for all the bottom faces of the cell, with one remaining vertex whose BC is provided by the lower corner of the cube.</span></span>

## <a name="final-note-on-implementation"></a><span data-ttu-id="d4dae-535">Observação final sobre implementação</span><span class="sxs-lookup"><span data-stu-id="d4dae-535">Final note on implementation</span></span>

<span data-ttu-id="d4dae-536">No aplicativo real, o "cubo de unidade" que é a configuração básica do algoritmo é extraído de lattices maiores, e os valores nos vértices podem exigir um cálculo caro.</span><span class="sxs-lookup"><span data-stu-id="d4dae-536">In actual application, the "unit cube" that is the basic setting of the algorithm is extracted from larger lattices, and the values at the vertices may require expensive calculation.</span></span> <span data-ttu-id="d4dae-537">Por outro lado, também é claro que a interpolação tetrahedral requer apenas os valores nos vértices do tetraedro, que é um subconjunto de todos os vértices do cubo de unidade.</span><span class="sxs-lookup"><span data-stu-id="d4dae-537">On the other hand, it is also clear that tetrahedral interpolation requires only the values at the vertices of the tetrahedron, which is a subset of all the vertices of the unit cube.</span></span> <span data-ttu-id="d4dae-538">Portanto, é mais eficiente implementar o que pode ser chamado de "avaliação adiada".</span><span class="sxs-lookup"><span data-stu-id="d4dae-538">Therefore, it is more efficient to implement what can be called "deferred evaluation."</span></span> <span data-ttu-id="d4dae-539">Em uma implementação de software do algoritmo anterior, é comum ter uma sub-rotina que usa o cubo de unidade e os valores em seus vértices como entrada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-539">In a software implementation of the preceding algorithm, it is typical to have a subroutine that takes the unit cube and values at its vertices as input.</span></span> <span data-ttu-id="d4dae-540">A avaliação adiada significa que, em vez de passar os valores nos vértices, as informações necessárias para avaliar os valores dos vértices são passadas, sem realmente realizar a avaliação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-540">Deferred evaluation means that instead of passing the values at the vertices, the necessary information to evaluate the values of the vertices is passed, without actually carrying out the evaluation.</span></span> <span data-ttu-id="d4dae-541">Dentro da sub-rotina, a avaliação real desses valores será executada somente para os vértices que pertencem ao tetraedro delimitador, depois que a tetraedro de circunscrição for determinada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-541">Inside the subroutine, actual evaluation of these values will be carried out only for those vertices that belong to the enclosing tetrahedron, after the enclosing tetrahedron is determined.</span></span>

## <a name="lookup-table-for-use-with-high-dynamic-range-virtual-rgb-source-devices"></a><span data-ttu-id="d4dae-542">Tabela de pesquisa para uso com dispositivos de origem RGB alta de intervalo dinâmico</span><span class="sxs-lookup"><span data-stu-id="d4dae-542">Lookup table for use with high dynamic range virtual RGB source devices</span></span>

<span data-ttu-id="d4dae-543">No caso em que uma transformação é construída com um dispositivo de origem que é modelado como um dispositivo virtual RGB, é possível que os valores de Colorant de origem possam ser negativos ou maiores que Unity (1,0).</span><span class="sxs-lookup"><span data-stu-id="d4dae-543">In the case where a transform is constructed with a source device that is modeled as a virtual RGB device, it is possible that source colorant values may be negative or greater than unity (1.0).</span></span> <span data-ttu-id="d4dae-544">Quando isso ocorre, o dispositivo de origem é referido como tendo um cabeçalho dinâmico alto (HDR).</span><span class="sxs-lookup"><span data-stu-id="d4dae-544">When this occurs, the source device is referred to as having a high dynamic range(HDR).</span></span> <span data-ttu-id="d4dae-545">É feita uma consideração especial para esse caso.</span><span class="sxs-lookup"><span data-stu-id="d4dae-545">Special consideration is made for this case.</span></span>

<span data-ttu-id="d4dae-546">No caso de transformações HDR, os valores mínimo e máximo para cada canal Colorant podem ser determinados a partir do limite de gama do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-546">In the case of HDR transforms, the minimum and maximum values for each colorant channel can be determined from the gamut boundary of the device.</span></span> <span data-ttu-id="d4dae-547">Usando esses valores, um dimensionamento simples para cada canal de Colorant é aplicado de forma que os valores de Colorant iguais ao mínimo de Colorant sejam convertidos em 0,0, e os valores Colorant iguais ao máximo de Colorant seriam convertidos em 1,0, com um dimensionamento linear de valores entre o mapa linear entre 0,0 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-547">By using these values, a simple scaling for each colorant channel is applied so that colorant values equal to the minimum colorant would be converted to 0.0, and colorant values equal to the maximum colorant would be converted to 1.0, with a linear scaling of values between to map linearly between 0.0 and 1.0.</span></span>

### <a name="iccprofilefromwcsprofile"></a><span data-ttu-id="d4dae-548">ICCProfileFromWCSProfile</span><span class="sxs-lookup"><span data-stu-id="d4dae-548">ICCProfileFromWCSProfile</span></span>

<span data-ttu-id="d4dae-549">Como a principal finalidade desse recurso é oferecer suporte a versões anteriores ao vista do Windows, você deve gerar perfis ICC da versão 2,2, conforme definido em ICC de especificação ICC. 1:1998-09.</span><span class="sxs-lookup"><span data-stu-id="d4dae-549">Because the main purpose of this feature is to support pre-Vista versions of Windows, you must generate Version 2.2 ICC profiles as defined in ICC Specification ICC.1:1998-09.</span></span> <span data-ttu-id="d4dae-550">Em determinados casos (consulte a tabela a seguir "dispositivo de linha de base para mapeamento de classe de perfil ICC"), você pode criar uma matriz ou um perfil ICC baseado em TRC de um perfil WCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-550">In certain cases (see the following table "Baseline Device To ICC Profile Class Mapping"), you can create a matrix or TRC-based ICC profile from a WCS profile.</span></span> <span data-ttu-id="d4dae-551">Em outros casos, o perfil ICC consiste em LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-551">In other cases, the ICC profile consists of LUTs.</span></span> <span data-ttu-id="d4dae-552">O processo a seguir descreve como criar o AToB e o BToA LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-552">The following process describes how to create the AToB and BToA LUTs.</span></span> <span data-ttu-id="d4dae-553">É claro que os perfis ICC também têm outros campos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-553">Of course, ICC profiles have other fields as well.</span></span> <span data-ttu-id="d4dae-554">Alguns dos dados podem ser derivados do perfil WCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-554">Some of the data can be derived from the WCS profile.</span></span> <span data-ttu-id="d4dae-555">Para outros dados, você precisará desenvolver padrões inteligentes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-555">For other data, you'll have to develop intelligent defaults.</span></span> <span data-ttu-id="d4dae-556">Os direitos autorais serão atribuídos à Microsoft; Já que é a tecnologia da Microsoft que está sendo usada para criar o LUTs.</span><span class="sxs-lookup"><span data-stu-id="d4dae-556">The copyright will be assigned to Microsoft; since it is Microsoft technology that is being used to create the LUTs.</span></span>

<span data-ttu-id="d4dae-557">Esse design deve funcionar para todos os tipos de modelos de dispositivo, incluindo plug-ins. Desde que o plug-in tenha um modelo de dispositivo de linha de base associado, o tipo de dispositivo subjacente pode ser determinado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-557">This design should work for all types of device models, including plug-ins. As long as the plug-in has an associated baseline device model, the underlying device type can be determined.</span></span>

<span data-ttu-id="d4dae-558">A parte difícil de criar um perfil ICC é criar as tabelas de pesquisa AToB e BToA.</span><span class="sxs-lookup"><span data-stu-id="d4dae-558">The hard part of creating an ICC profile is creating the AToB and BToA lookup tables.</span></span> <span data-ttu-id="d4dae-559">Essas tabelas são mapeadas entre o espaço do dispositivo, por exemplo, RGB ou CMYK, e o espaço de conexão do perfil (PCS), que é uma variante de CIELAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-559">These tables map between the device space, for example, RGB or CMYK, and the Profile Connection Space (PCS), which is a variant of CIELAB.</span></span> <span data-ttu-id="d4dae-560">Isso é fundamentalmente o mesmo que o processo de gerenciamento de cores usado na transformação CITE para mapear do espaço do dispositivo para o espaço do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-560">This is fundamentally the same as the color management process used in the CITE transform to map from device space to device space.</span></span> <span data-ttu-id="d4dae-561">No entanto, você deve ter as seguintes informações para fazer a transformação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-561">However, you must have the following information to make the transformation.</span></span>

1) <span data-ttu-id="d4dae-562">Referência as condições de exibição para os PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-562">Reference viewing conditions for the PCS.</span></span>

2) <span data-ttu-id="d4dae-563">Gama de PCS de referência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-563">Reference PCS gamut.</span></span>

3) <span data-ttu-id="d4dae-564">O modelo de dispositivo que converte entre os valores de PCS e colorimetry.</span><span class="sxs-lookup"><span data-stu-id="d4dae-564">Device model that converts between PCS values and colorimetry.</span></span>

<span data-ttu-id="d4dae-565">O perfil WCS e seu CAM associado são fornecidos como parâmetros.</span><span class="sxs-lookup"><span data-stu-id="d4dae-565">The WCS profile and its associated CAM are provided as parameters.</span></span> <span data-ttu-id="d4dae-566">Há dois modelos de dispositivo de linha de base que convertem entre colorimetry e a codificação de PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-566">There are two baseline device models that convert between colorimetry and the PCS encoding.</span></span> <span data-ttu-id="d4dae-567">O motivo pelo qual você precisa de dois é explicado abaixo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-567">The reason you need two is explained below.</span></span>

1) <span data-ttu-id="d4dae-568">Você pode obter as condições de exibição de referência para os computadores da especificação de formato de perfil ICC.</span><span class="sxs-lookup"><span data-stu-id="d4dae-568">You can obtain the reference viewing conditions for the PCS from the ICC profile format specification.</span></span> <span data-ttu-id="d4dae-569">As informações fornecidas na especificação de formato de perfil ICC são suficientes para computar todos os dados necessários para inicializar o CAM usado pelo CMS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-569">The information provided in the ICC profile format specification is sufficient to compute all the data required to initialize the CAM used by the CMS.</span></span> <span data-ttu-id="d4dae-570">Para consistência e flexibilidade, essas informações são armazenadas em um perfil de cores WCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-570">For consistency and flexibility, this information is stored in a WCS color profile.</span></span>

2) <span data-ttu-id="d4dae-571">Você também pode usar um perfil WCS para armazenar amostras que definem a gama de referência dos PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-571">You can also use a WCS profile to store samples that define the reference gamut of the PCS.</span></span> <span data-ttu-id="d4dae-572">O sistema de gerenciamento de cores CITE (CMS) tem duas maneiras de criar limites de gama.</span><span class="sxs-lookup"><span data-stu-id="d4dae-572">The CITE color management system (CMS) has two ways to create gamut boundaries.</span></span> <span data-ttu-id="d4dae-573">Uma é para obter uma amostra do espaço completo do dispositivo e usar o modelo do dispositivo para criar valores de medida.</span><span class="sxs-lookup"><span data-stu-id="d4dae-573">One is to sample the complete device space and use the device model to create measurement values.</span></span> <span data-ttu-id="d4dae-574">O segundo método é usar amostras medidas do perfil para criar um limite de gama de referência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-574">The second method is to use measured samples from the profile to create a reference gamut boundary.</span></span> <span data-ttu-id="d4dae-575">Como a gama dos PCS ICC é muito grande para fazer uma gama de referência útil, o primeiro método é inadequado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-575">Because the gamut of the ICC PCS is too large to make a useful reference gamut, the first method is inappropriate.</span></span> <span data-ttu-id="d4dae-576">Mas o segundo método é uma abordagem flexível e baseada em perfil.</span><span class="sxs-lookup"><span data-stu-id="d4dae-576">But the second method is a flexible, profile-based approach.</span></span> <span data-ttu-id="d4dae-577">Para redefinir a gama dos PCS de referência, você pode alterar os dados de medida no perfil do dispositivo PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-577">To redefine the reference PCS gamut, you can change the measurement data in the PCS device profile.</span></span>

3) <span data-ttu-id="d4dae-578">Os PCS ICC são uma modelagem de um dispositivo ideal.</span><span class="sxs-lookup"><span data-stu-id="d4dae-578">The ICC PCS is a modeling of an ideal device.</span></span> <span data-ttu-id="d4dae-579">Ao criar um modelo dos PCS como um dispositivo real, você pode aproveitar o processo de gerenciamento de cores usado no Smart CMM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-579">By creating a model of the PCS as a real device, you can take advantage of the color management process used in the Smart CMM.</span></span> <span data-ttu-id="d4dae-580">Criar um modelo de dispositivo do colorimetry para a codificação de PCS é simples.</span><span class="sxs-lookup"><span data-stu-id="d4dae-580">Creating a device model from colorimetry to the PCS encoding is straightforward.</span></span> <span data-ttu-id="d4dae-581">Você simplesmente mapeia entre os valores colorimétrico verdadeiro e os valores codificados de PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-581">You simply map between the true colorimetric values and the PCS encoded values.</span></span> <span data-ttu-id="d4dae-582">Como a interface CMS para modelos de dispositivo oferece suporte apenas a valores XYZ, você também pode ter que mapear entre XYZ e LAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-582">Since the CMS interface for device models only supports XYZ values, you might also have to map between XYZ and LAB.</span></span> <span data-ttu-id="d4dae-583">Essa é uma transformação bem conhecida.</span><span class="sxs-lookup"><span data-stu-id="d4dae-583">This is a well-known transformation.</span></span> <span data-ttu-id="d4dae-584">Esse modelo é descrito no documento 2.2.02 "modelos de dispositivo de linha de base" nas seções 7,9 e 7,10.</span><span class="sxs-lookup"><span data-stu-id="d4dae-584">This model is described in the document 2.2.02 "Baseline Device Models" in sections 7.9 and 7.10.</span></span>

<span data-ttu-id="d4dae-585">Talvez seja necessário executar algum mapeamento de gama, se a gama do dispositivo for maior do que a gama dos PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-585">You might have to perform some gamut mapping, if the gamut of the device is larger than the gamut of the PCS.</span></span> <span data-ttu-id="d4dae-586">O GMMs de linha de base pode ser usado para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="d4dae-586">The baseline GMMs can be used for this purpose.</span></span> <span data-ttu-id="d4dae-587">Observe que um perfil ICC criado corretamente tem tabelas de pesquisa para as intenções de colorimétrico, perceptiva e saturação relativas, embora elas possam apontar para o mesmo LUT internamente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-587">Note that a properly created ICC profile has lookup tables for the Relative Colorimetric, Perceptual, and Saturation intents, although these may all point to the same LUT internally.</span></span>

![Diagrama que mostra a criação de um T o B L U T.](images/transformcreation-image128.png)

<span data-ttu-id="d4dae-589">**Figura 5:** Criação de um AToB LUT</span><span class="sxs-lookup"><span data-stu-id="d4dae-589">**Figure 5:** Creation of an AToB LUT</span></span>

<span data-ttu-id="d4dae-590">Esse processo é ilustrado na Figura 5.</span><span class="sxs-lookup"><span data-stu-id="d4dae-590">This process is illustrated in Figure 5.</span></span> <span data-ttu-id="d4dae-591">Primeiro, o modelo do dispositivo é inicializado a partir dos dados no perfil DM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-591">First, the device model is initialized from the data in the DM profile.</span></span> <span data-ttu-id="d4dae-592">Em seguida, construa um limite de gama de dispositivos da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="d4dae-592">Then, construct a device gamut boundary as follows.</span></span> <span data-ttu-id="d4dae-593">Uma amostragem de dados do modelo de dispositivo é executada por meio do modelo de dispositivo para obter dados colorimétrico.</span><span class="sxs-lookup"><span data-stu-id="d4dae-593">A sampling of data from the device model is run through the device model to obtain colorimetric data.</span></span> <span data-ttu-id="d4dae-594">Os dados colorimétrico são executados por meio do CAM para criar dados de aparência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-594">The colorimetric data is run through the CAM to create appearance data.</span></span> <span data-ttu-id="d4dae-595">Os dados de aparência são usados para criar o limite de gama do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-595">The appearance data is used to create the device gamut boundary.</span></span>

<span data-ttu-id="d4dae-596">Em seguida, use dados do perfil de medição PCS de referência para criar um limite de gama para os PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-596">Next, use data from the reference PCS measurement profile to create a gamut boundary for the PCS.</span></span>

<span data-ttu-id="d4dae-597">Use os dois limites de gama que acabamos de criar para inicializar um GMM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-597">Use the two gamut boundaries just created to initialize a GMM.</span></span> <span data-ttu-id="d4dae-598">Em seguida, use o modelo de dispositivo, o GMM e o modelo de dispositivo de PCS para criar uma transformação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-598">Then, use the device model, the GMM, and the PCS device model to create a transform.</span></span> <span data-ttu-id="d4dae-599">Execute uma amostragem do espaço do dispositivo por meio da transformação para criar um AToB LUT.</span><span class="sxs-lookup"><span data-stu-id="d4dae-599">Run a sampling of device space through the transform to create an AToB LUT.</span></span>

![Diagrama que mostra a criação de um T o B L U T usando uma amostragem do espaço P C S.](images/transformcreation-image130.png)

<span data-ttu-id="d4dae-601">**Figura 6:** Criação de um BToA LUT</span><span class="sxs-lookup"><span data-stu-id="d4dae-601">**Figure 6:** Creation of a BToA LUT</span></span>

<span data-ttu-id="d4dae-602">A Figura 6 ilustra a criação do BToA LUT.</span><span class="sxs-lookup"><span data-stu-id="d4dae-602">Figure 6 illustrates the creation of the BToA LUT.</span></span> <span data-ttu-id="d4dae-603">Isso é quase idêntico à criação de um AToB LUT, com as funções de origem e de destino trocadas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-603">This is almost identical to creating an AToB LUT, with the roles of source and destination exchanged.</span></span> <span data-ttu-id="d4dae-604">Além disso, você deve exemplificar a gama de PCS completos para criar o LUT.</span><span class="sxs-lookup"><span data-stu-id="d4dae-604">Also, you must sample the full PCS gamut to create the LUT.</span></span>

<span data-ttu-id="d4dae-605">Observe que, como o CAM (CIECAM02 no WCS) está envolvido no processo, a adaptação de desvio entre o ponto branco de mídia e o ponto branco dos PCS (exigido pelo ICC para ser o de D50) é afetada de forma transparente pelo CAM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-605">Note that because the CAM (CIECAM02 in WCS) is involved in the process, chromatic adaptation between the media white point and the PCS white point (mandated by ICC to be that of D50) is effected transparently by the CAM.</span></span>

## <a name="hdr-virtual-rgb-devices"></a><span data-ttu-id="d4dae-606">Dispositivos do HDR virtual RGB</span><span class="sxs-lookup"><span data-stu-id="d4dae-606">HDR virtual RGB devices</span></span>

<span data-ttu-id="d4dae-607">É necessário fornecer uma consideração especial ao gerar perfis para dispositivos do HDR virtual RGB; ou seja, dispositivos para os quais os valores de Colorant podem ser inferiores a 0,0 ou maiores que 1,0.</span><span class="sxs-lookup"><span data-stu-id="d4dae-607">Special consideration must be given when generating profiles for HDR virtual RGB devices; that is, devices for which the colorant values may be less than 0.0 or greater than 1.0.</span></span> <span data-ttu-id="d4dae-608">Na geração do ATOB LUT, um conjunto maior de entrada 1D LUTs é criado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-608">In the generation of the ATOB LUT, a larger set of 1D input LUTs is built.</span></span> <span data-ttu-id="d4dae-609">Os valores de Colorant são dimensionados e deslocados para o intervalo 0..</span><span class="sxs-lookup"><span data-stu-id="d4dae-609">Colorant values are scaled and offset to the range 0 ..</span></span> <span data-ttu-id="d4dae-610">1 usando os valores mínimo e máximo de Colorant no perfil WCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-610">1 using the minimum and maximum colorant values in the WCS profile.</span></span>

<span data-ttu-id="d4dae-611">Como o espaço Colorant para dispositivos HDR não é provavelmente preenchido completamente, o suporte especial é fornecido no LUT 3-D para a marca também.</span><span class="sxs-lookup"><span data-stu-id="d4dae-611">Because the colorant space for HDR devices is not likely to be completely populated, special support is provided in the 3-D LUT for the tag as well.</span></span> <span data-ttu-id="d4dae-612">Para lidar com cores na região preenchida de forma grosseira, os colorants são recodificados para que a extrapolação além de 0,0 e 1,0 possa ser obtida.</span><span class="sxs-lookup"><span data-stu-id="d4dae-612">In order to handle colors in the sparsely populated region, the colorants are recoded so that extrapolation beyond 0.0 and 1.0 can be achieved.</span></span> <span data-ttu-id="d4dae-613">O intervalo usado é-1..</span><span class="sxs-lookup"><span data-stu-id="d4dae-613">The range used is -1 ..</span></span> <span data-ttu-id="d4dae-614">+ 4.</span><span class="sxs-lookup"><span data-stu-id="d4dae-614">+4.</span></span>

<span data-ttu-id="d4dae-615">Devido ao redimensionamento aplicado para o LUT 3D, um conjunto de LUTs de saída 1D é criado para mapear o resultado de volta para o intervalo 0..</span><span class="sxs-lookup"><span data-stu-id="d4dae-615">Because of the rescaling applied for the 3-D LUT, a set of 1D output LUTs is built to map the result back to the range 0 ..</span></span> <span data-ttu-id="d4dae-616">1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-616">1.</span></span>

## <a name="more-than-one-pcs"></a><span data-ttu-id="d4dae-617">Mais de um PC</span><span class="sxs-lookup"><span data-stu-id="d4dae-617">More than one PCS</span></span>

<span data-ttu-id="d4dae-618">O ICC descobriu que um dos PCS não era suficientemente flexível para atender a todos os usos pretendidos de um CMS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-618">The ICC found that one PCS was not sufficiently flexible to meet all the intended uses of a CMS.</span></span> <span data-ttu-id="d4dae-619">Na versão 4 da especificação do perfil, o ICC esclareceu que há, na verdade, duas codificações de PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-619">In version 4 of the Profile Specification, the ICC clarified that there are actually two PCS encodings.</span></span> <span data-ttu-id="d4dae-620">Um é usado para as intenções de colorimétrico; outro é usado para a intenção perceptiva.</span><span class="sxs-lookup"><span data-stu-id="d4dae-620">One is used for the colorimetric intents; another is used for the perceptual intent.</span></span> <span data-ttu-id="d4dae-621">(Nenhum PC é especificado para a intenção de saturação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-621">(No PCS is specified for the Saturation intent.</span></span> <span data-ttu-id="d4dae-622">O ICC saiu dessa parte de forma ambígua.) Os PCS colorimétricos têm uma claridade mínima e máxima especificada, mas os valores de croma e de matiz variam de aproximadamente ± 127.</span><span class="sxs-lookup"><span data-stu-id="d4dae-622">The ICC has left this part ambiguous.) The colorimetric PCS has a minimum and maximum lightness specified, but the chroma and hue values range to roughly ± 127.</span></span> <span data-ttu-id="d4dae-623">Esse PCS é semelhante a um prisma retangular.</span><span class="sxs-lookup"><span data-stu-id="d4dae-623">This PCS looks like a rectangular prism.</span></span> <span data-ttu-id="d4dae-624">Como mencionado anteriormente, o volume dos PCS perceptivas se assemelha à gama de uma impressora de jato de Radio.</span><span class="sxs-lookup"><span data-stu-id="d4dae-624">As mentioned previously, the perceptual PCS volume resembles the gamut of an inkjet printer.</span></span>

<span data-ttu-id="d4dae-625">Os dois PCSs ICC também têm duas codificações digitais diferentes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-625">The two ICC PCSs also have two different digital encodings.</span></span> <span data-ttu-id="d4dae-626">Nos PCS perceptiva, um valor de zero representa uma claridade de zero.</span><span class="sxs-lookup"><span data-stu-id="d4dae-626">In the perceptual PCS, a value of zero represents a lightness of zero.</span></span> <span data-ttu-id="d4dae-627">Nos PCS colorimétricos, um valor de zero representa a claridade mínima dos PCS, que é maior que zero.</span><span class="sxs-lookup"><span data-stu-id="d4dae-627">In the colorimetric PCS, a value of zero represents the minimum lightness of the PCS, which is greater than zero.</span></span> <span data-ttu-id="d4dae-628">Você pode resolver esse problema tendo um modelo de dispositivo diferente para cada uma das codificações de PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-628">You can solve this problem by having a different device model for each of the PCS encodings.</span></span>

## <a name="gamut-mapping"></a><span data-ttu-id="d4dae-629">Mapeamento de gamut</span><span class="sxs-lookup"><span data-stu-id="d4dae-629">Gamut mapping</span></span>

<span data-ttu-id="d4dae-630">Para criar o AToB LUTs em um perfil ICC, você mapeia da gama do dispositivo para o espaço apropriado dos PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-630">To create the AToB LUTs in an ICC profile, you map from the device gamut to the appropriate PCS space.</span></span> <span data-ttu-id="d4dae-631">Para criar o BToA LUTs, você mapeia do espaço dos PCS para a gama do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-631">To create the BToA LUTs, you map from the PCS space to the device gamut.</span></span> <span data-ttu-id="d4dae-632">O mapeamento para o AToB LUTs é bastante semelhante ao usado em um CMS baseado em medição.</span><span class="sxs-lookup"><span data-stu-id="d4dae-632">The mapping for the AToB LUTs is quite similar to that used in a measurement-based CMS.</span></span> <span data-ttu-id="d4dae-633">Para os PCS perceptiva, mapeie a gama plausível do dispositivo para o limite de gama dos PCS perceptiva, usando recorte ou compactação para qualquer cor fora do gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-633">For the perceptual PCS, map the device plausible gamut to the perceptual PCS gamut boundary, using either clipping or compression for any out-of-gamut colors.</span></span> <span data-ttu-id="d4dae-634">Para as intenções de colorimétrico, talvez seja necessário recortar a claridade, mas os valores de croma e de matiz serão ajustados para a gama de PCS colorimétricos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-634">For the colorimetric intents, you might have to clip lightness, but the chroma and hue values are all going to fit in the colorimetric PCS gamut.</span></span>

<span data-ttu-id="d4dae-635">O mapeamento para o BToA LUTs é um pouco diferente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-635">The mapping for the BToA LUTs is a little different.</span></span> <span data-ttu-id="d4dae-636">As intenções de colorimétrico ainda são fáceis; Você apenas corta os valores de PCS para a gama do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-636">The colorimetric intents are still easy; you just clip PCS values to the device gamut.</span></span> <span data-ttu-id="d4dae-637">Mas o ICC requer que todos os valores de PCS possíveis sejam mapeados para algum valor de dispositivo, não apenas aqueles dentro da gama de referência dos PCS perceptiva.</span><span class="sxs-lookup"><span data-stu-id="d4dae-637">But the ICC requires that all possible PCS values map to some device value, not merely those within the reference gamut of the perceptual PCS.</span></span> <span data-ttu-id="d4dae-638">Portanto, você deve garantir que o GMMs possa manipular as cores de origem que estão fora da gama de referência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-638">So, you must make sure that the GMMs can handle source colors that are outside the reference gamut.</span></span> <span data-ttu-id="d4dae-639">Isso pode ser tratado recortando essas cores para o limite de gama do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-639">This can be handled by clipping those colors to the device gamut boundary.</span></span>

## <a name="baseline-device-to-icc-profile-class-mapping"></a><span data-ttu-id="d4dae-640">Mapeamento de classe de dispositivo de linha de base para perfil ICC</span><span class="sxs-lookup"><span data-stu-id="d4dae-640">Baseline device to ICC profile class mapping</span></span>



| <span data-ttu-id="d4dae-641">Tipo de dispositivo de linha de base</span><span class="sxs-lookup"><span data-stu-id="d4dae-641">Baseline Device Type</span></span>              | <span data-ttu-id="d4dae-642">Classe de perfil ICC</span><span class="sxs-lookup"><span data-stu-id="d4dae-642">ICC Profile Class</span></span>       | <span data-ttu-id="d4dae-643">Comentário</span><span class="sxs-lookup"><span data-stu-id="d4dae-643">Remark</span></span>                                                                      |
|-----------------------------------|-------------------------|-----------------------------------------------------------------------------|
| <span data-ttu-id="d4dae-644">Dispositivo de captura RGB</span><span class="sxs-lookup"><span data-stu-id="d4dae-644">RGB Capture Device</span></span>                | <span data-ttu-id="d4dae-645">Dispositivo de entrada ("scnr")</span><span class="sxs-lookup"><span data-stu-id="d4dae-645">Input Device ("scnr")</span></span>   | <span data-ttu-id="d4dae-646">PCS é CIELAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-646">PCS is CIELAB.</span></span> <span data-ttu-id="d4dae-647">AToB0Tag é o dispositivo para computadores com a intenção colorimétrico relativa.</span><span class="sxs-lookup"><span data-stu-id="d4dae-647">AToB0Tag is Device to PCS with relative colorimetric intent.</span></span> |
| <span data-ttu-id="d4dae-648">Monitor CRT, LCD</span><span class="sxs-lookup"><span data-stu-id="d4dae-648">CRT, LCD monitor</span></span>                  | <span data-ttu-id="d4dae-649">Dispositivo de vídeo ("MNTR")</span><span class="sxs-lookup"><span data-stu-id="d4dae-649">Display Device ("mntr")</span></span> | <span data-ttu-id="d4dae-650">PCS é CIEXYZ.</span><span class="sxs-lookup"><span data-stu-id="d4dae-650">PCS is CIEXYZ.</span></span> <span data-ttu-id="d4dae-651">Consulte o seguinte para a conversão de modelo.</span><span class="sxs-lookup"><span data-stu-id="d4dae-651">See the following for model conversion.</span></span>                      |
| <span data-ttu-id="d4dae-652">Projetor RGB</span><span class="sxs-lookup"><span data-stu-id="d4dae-652">RGB Projector</span></span>                     | <span data-ttu-id="d4dae-653">Espaço de cores ("spac")</span><span class="sxs-lookup"><span data-stu-id="d4dae-653">Color Space ("spac")</span></span>    | <span data-ttu-id="d4dae-654">PCS é CIELAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-654">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="d4dae-655">Impressora RGB e CMYK</span><span class="sxs-lookup"><span data-stu-id="d4dae-655">RGB and CMYK printer</span></span>              | <span data-ttu-id="d4dae-656">Dispositivo de saída ("PRTR")</span><span class="sxs-lookup"><span data-stu-id="d4dae-656">Output Device ("prtr")</span></span>  | <span data-ttu-id="d4dae-657">PCS é CIELAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-657">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="d4dae-658">Dispositivo virtual RGB (caso não HDR)</span><span class="sxs-lookup"><span data-stu-id="d4dae-658">RGB Virtual Device (non-HDR case)</span></span> | <span data-ttu-id="d4dae-659">Dispositivo de vídeo ("MNTR")</span><span class="sxs-lookup"><span data-stu-id="d4dae-659">Display Device ("mntr")</span></span> | <span data-ttu-id="d4dae-660">PCS é CIEXYZ.</span><span class="sxs-lookup"><span data-stu-id="d4dae-660">PCS is CIEXYZ.</span></span>                                                              |
| <span data-ttu-id="d4dae-661">Dispositivo virtual RGB (caso HDR)</span><span class="sxs-lookup"><span data-stu-id="d4dae-661">RGB Virtual Device (HDR case)</span></span>     | <span data-ttu-id="d4dae-662">Espaço de cores ("spac")</span><span class="sxs-lookup"><span data-stu-id="d4dae-662">Color Space ("spac")</span></span>    | <span data-ttu-id="d4dae-663">PCS é CIELAB.</span><span class="sxs-lookup"><span data-stu-id="d4dae-663">PCS is CIELAB.</span></span>                                                              |



 

<span data-ttu-id="d4dae-664">A conversão de perfis de monitor não envolve a criação de LUTs, mas, em vez disso, consiste em criar um modelo de matriz ou TRC.</span><span class="sxs-lookup"><span data-stu-id="d4dae-664">The conversion of monitor profiles does not involving building LUTs, but instead consists of building a matrix or TRC model.</span></span> <span data-ttu-id="d4dae-665">O modelo usado em ICC é ligeiramente diferente daquele usado na modelagem CRT ou LCD do WCS, no qual o termo "correção preta" está ausente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-665">The model used in ICC is slightly different from the one used in the WCS CRT or LCD modeling in that the "black correction" term is missing.</span></span> <span data-ttu-id="d4dae-666">Especificamente:</span><span class="sxs-lookup"><span data-stu-id="d4dae-666">Specifically,</span></span>

<span data-ttu-id="d4dae-667">Modelo WCS:</span><span class="sxs-lookup"><span data-stu-id="d4dae-667">WCS model:</span></span> ![Mostra um modelo W C S.](images/transformcreation-image132.png)

<span data-ttu-id="d4dae-669">Modelo ICC:</span><span class="sxs-lookup"><span data-stu-id="d4dae-669">ICC model:</span></span> ![Mostra um modelo C C.](images/transformcreation-image134.png)

<span data-ttu-id="d4dae-671">A conversão do modelo WCS para o modelo ICC é feita da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="d4dae-671">The conversion from WCS model to ICC model is done as follows.</span></span>

<span data-ttu-id="d4dae-672">Definir novas curvas:</span><span class="sxs-lookup"><span data-stu-id="d4dae-672">Define new curves:</span></span>

![Mostra uma matriz para definir novas curvas.](images/transformcreation-image136.png)

<span data-ttu-id="d4dae-674">Elas não são curvas de reprodução de Tom porque não mapeiam 1 para 1.</span><span class="sxs-lookup"><span data-stu-id="d4dae-674">These are not tone reproduction curves because they do not map 1 to 1.</span></span> <span data-ttu-id="d4dae-675">Uma normalização vai conseguir isso.</span><span class="sxs-lookup"><span data-stu-id="d4dae-675">A normalization will achieve that.</span></span> <span data-ttu-id="d4dae-676">As definições finais do modelo ICC são:</span><span class="sxs-lookup"><span data-stu-id="d4dae-676">The final definitions of the ICC model are:</span></span>

![Mostra as definições finais do modelo C C.](images/transformcreation-image138.png)

![Mostra a matriz final para o modelo I c C.](images/transformcreation-image140.png)

<span data-ttu-id="d4dae-679">Para dispositivos virtuais RGB não HDR, você também está gerando um perfil de vídeo ICC para a eficiência do espaço.</span><span class="sxs-lookup"><span data-stu-id="d4dae-679">For non-HDR RGB virtual devices, you are also generating a display ICC profile for space efficiency.</span></span> <span data-ttu-id="d4dae-680">Nesse caso, o ICC da matriz *M* triestímulo pode ser obtido diretamente dos primários do perfil WCS sem a conversão do modelo acima.</span><span class="sxs-lookup"><span data-stu-id="d4dae-680">In that case, the tristimulus matrix *M ICC* can be obtained directly from the primaries of the WCS profile without the above model conversion.</span></span> <span data-ttu-id="d4dae-681">Uma das finalidades, mas importante, é que essa matriz de triestímulo deve ser adaptada de acordo com o D50 para estar em conformidade com a especificação ICC dos PCS.</span><span class="sxs-lookup"><span data-stu-id="d4dae-681">One final, but important, note is that this tristimulus matrix must be chromatically adapted to D50 to conform with the ICC specification of the PCS.</span></span> <span data-ttu-id="d4dae-682">Em outras palavras, as entradas em cada linha da matriz a ser codificada no perfil ICC devem ser somadas, respectivamente, a 96,42, 100 e 82,49.</span><span class="sxs-lookup"><span data-stu-id="d4dae-682">In other words, the entries on each row of the matrix to be encoded in the ICC profile must sum respectively to 96.42, 100, and 82.49.</span></span> <span data-ttu-id="d4dae-683">Na implementação atual, a adaptação de desvio é feita por CAT02, que também é a transformação de adaptação de desvio usada em CAM02.</span><span class="sxs-lookup"><span data-stu-id="d4dae-683">In the current implementation, the chromatic adaptation is done by CAT02, which is also the chromatic adaptation transform used in CAM02.</span></span>

## <a name="black-preservation-and-black-generation"></a><span data-ttu-id="d4dae-684">Preservação de preto e geração de preto</span><span class="sxs-lookup"><span data-stu-id="d4dae-684">Black Preservation and Black Generation</span></span>

<span data-ttu-id="d4dae-685">A implementação da preservação de preto está ligada junto à geração do canal preto em dispositivos que dão suporte a um canal preto.</span><span class="sxs-lookup"><span data-stu-id="d4dae-685">Implementation of black preservation is tied together with the generation of the black channel in devices that support a black channel.</span></span> <span data-ttu-id="d4dae-686">Para fazer isso, as informações sobre cada cor de origem são coletadas para permitir que os modelos de dispositivos que dão suporte a um canal preto determinem a melhor maneira de definir o canal preto na saída.</span><span class="sxs-lookup"><span data-stu-id="d4dae-686">To accomplish this, information about each source color is collected to allow device models that support a black channel to determine how best to set the black channel on output.</span></span> <span data-ttu-id="d4dae-687">Embora a preservação de preto seja pertinente para transformações de cor que convertem entre um dispositivo de canal preto em outro, a geração de preto é implementada para toda a transformação que envolve um dispositivo de destino de canal preto.</span><span class="sxs-lookup"><span data-stu-id="d4dae-687">While black preservation is pertinent for color transforms that convert between one black-channel device to another, black generation is implemented for all transform involving a black-channel destination device.</span></span>

<span data-ttu-id="d4dae-688">As informações do canal preto são registradas em uma estrutura de dados chamada [**BlackInformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation).</span><span class="sxs-lookup"><span data-stu-id="d4dae-688">Black channel information is recorded in a data structure called [**BlackInformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation).</span></span> <span data-ttu-id="d4dae-689">A estrutura **BlackInformation** contém um booliano que indica se a cor contém apenas preto Colorant e um valor numérico que indica o grau de "preto" chamado peso preto.</span><span class="sxs-lookup"><span data-stu-id="d4dae-689">The **BlackInformation** structure contains a boolean indicating whether the color contains only black colorant and a numeric value indicating the degree of "blackness" called black weight.</span></span> <span data-ttu-id="d4dae-690">Para dispositivos de origem que dão suporte a um canal preto, o peso preto é a porcentagem de Colorant preta na cor de origem.</span><span class="sxs-lookup"><span data-stu-id="d4dae-690">For source devices that support a black channel, the black weight is the percentage of black colorant in the source color.</span></span> <span data-ttu-id="d4dae-691">Para dispositivos de origem que não contêm um canal preto, o peso preto é calculado usando o outro colorants e o valor de aparência.</span><span class="sxs-lookup"><span data-stu-id="d4dae-691">For source devices that do not contain a black channel, the black weight is computed using the other colorants and the appearance value.</span></span> <span data-ttu-id="d4dae-692">Um valor chamado "pureza de cores" é calculado com a diferença entre o valor máximo de Colorant e o valor de Colorant mínimo dividido pelo valor máximo de Colorant.</span><span class="sxs-lookup"><span data-stu-id="d4dae-692">A value called "color purity" is computed by taking the difference between the maximum colorant value and the minimum colorant value divided by the maximum colorant value.</span></span> <span data-ttu-id="d4dae-693">Um valor chamado "claridade relativa" é calculado com a diferença entre a claridade da cor e a claridade mínima para o dispositivo de destino dividido pela diferença entre a claridade mínima e a máxima para o dispositivo de destino.</span><span class="sxs-lookup"><span data-stu-id="d4dae-693">A value called "relative lightness" is computed by taking the difference between the lightness of the color and the minimum lightness for the destination device divided by the difference between the minimum and maximum lightness for the destination device.</span></span> <span data-ttu-id="d4dae-694">Se o dispositivo de origem for um dispositivo aditivo (monitor ou projetor), o peso preto será determinado como 1,0 menos a pureza de cor multiplicada pela claridade relativa.</span><span class="sxs-lookup"><span data-stu-id="d4dae-694">If the source device is an additive device (monitor or projector), the black weight is determined to be the 1.0 minus the color purity multiplied by the relative lightness.</span></span> <span data-ttu-id="d4dae-695">Por exemplo, se o dispositivo de origem for um monitor RGB, o valor máximo e o valor mínimo de R, G e B para cada cor serão computados e o peso preto será determinado pela fórmula:</span><span class="sxs-lookup"><span data-stu-id="d4dae-695">For example, if the source device is an RGB monitor, the maximum value and minimum value of R, G, and B for each color is computed and the black weight is determined by the formula:</span></span>

<span data-ttu-id="d4dae-696">BW = (1,0 – (Max (R, G, B) – min (R, G, B))/Max (R, G, B)) \* claridade relativa</span><span class="sxs-lookup"><span data-stu-id="d4dae-696">BW = (1.0 – (max(R,G,B) – min(R,G,B)) / max(R, G, B)) \* relative lightness</span></span>

<span data-ttu-id="d4dae-697">Se o dispositivo de origem oferecer suporte a coloração subtraíis, por exemplo, uma impressora CMY, os colorants individuais deverão ser "aqueles complementados" (subtraídos de 1,0) antes do uso na fórmula anterior.</span><span class="sxs-lookup"><span data-stu-id="d4dae-697">If the source device supports subtractive coloration, for example, a CMY printer, then the individual colorants must be "ones complemented" (subtracted from 1.0) before use in the preceding formula.</span></span> <span data-ttu-id="d4dae-698">Portanto, para uma impressora CMY, R = 1,0 – C, G = 1,0 – M e B = 1,0 – Y.</span><span class="sxs-lookup"><span data-stu-id="d4dae-698">Therefore, for a CMY printer, R = 1.0 – C, G = 1.0 – M, and B = 1.0 – Y.</span></span>

<span data-ttu-id="d4dae-699">As informações pretas para cada cor processada pela transformação de cor são determinadas durante o processo de tradução de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-699">The black information for each color processed by the color transform is determined during the color translation process.</span></span> <span data-ttu-id="d4dae-700">As informações somente em preto só serão determinadas se a preservação de preto for especificada.</span><span class="sxs-lookup"><span data-stu-id="d4dae-700">The black-only information is only determined if black preservation is specified.</span></span> <span data-ttu-id="d4dae-701">O peso preto é sempre determinado se o modelo do dispositivo de destino dá suporte a um Colorant preto.</span><span class="sxs-lookup"><span data-stu-id="d4dae-701">Black weight is always determined if the destination device model support a black colorant.</span></span> <span data-ttu-id="d4dae-702">As informações pretas são passadas para o modelo de dispositivo de destino por meio do método [**ColorimetricToDeviceColorsWithBlack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) , que usa o lut resultante.</span><span class="sxs-lookup"><span data-stu-id="d4dae-702">The black information is passed to the destination device model via the [**ColorimetricToDeviceColorsWithBlack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) method, which uses the resulting LUT.</span></span>

<span data-ttu-id="d4dae-703">Observe que, devido à otimização de transformação de cor, o processo acima ocorre somente durante a criação do LUT de transformação otimizado, não durante a execução do método TranslateColors.</span><span class="sxs-lookup"><span data-stu-id="d4dae-703">Note that, because of color transform optimization, the above process occurs only during the creation of the optimized transform LUT, not during the execution of the TranslateColors method.</span></span>

## <a name="optimization-for-transforms-with-more-than-three-source-channels"></a><span data-ttu-id="d4dae-704">Otimização para transformações com mais de três canais de origem</span><span class="sxs-lookup"><span data-stu-id="d4dae-704">Optimization for transforms with more than three source channels</span></span>

<span data-ttu-id="d4dae-705">O tamanho da transformação otimizada é determinado por vários fatores: o número de canais de cores no dispositivo de origem, o número de etapas na tabela para cada canal de cor de origem e o número de canais de cores no dispositivo de saída.</span><span class="sxs-lookup"><span data-stu-id="d4dae-705">The size of the optimized transform is determined by several factors: the number of color channels in the source device, the number of steps in the table for each source color channel, and the number of color channels in the output device.</span></span> <span data-ttu-id="d4dae-706">A fórmula para determinar o tamanho da tabela de transformação é:</span><span class="sxs-lookup"><span data-stu-id="d4dae-706">The formula for determining the transform table size is:</span></span>

<span data-ttu-id="d4dae-707">Tamanho = número de etapas por fonte de canal <sub>\ dispositivo (número \ de \ canais \ no \ fonte \ dispositivo)</sub> x número de canais no dispositivo de saída</span><span class="sxs-lookup"><span data-stu-id="d4dae-707">Size = Number of steps per channel <sub>source\ device(Number\ of\ channels\ in\ source\ device)</sub> x number of channels in output device</span></span>

<span data-ttu-id="d4dae-708">Como você pode ver, o tamanho da tabela aumenta exponencialmente dependendo do número de canais no dispositivo de origem.</span><span class="sxs-lookup"><span data-stu-id="d4dae-708">As you can see, the size of the table grows exponentially depending on the number of channels in the source device.</span></span> <span data-ttu-id="d4dae-709">Muitos dispositivos de origem dão suporte a três canais de cores, por exemplo, vermelho, verde e azul.</span><span class="sxs-lookup"><span data-stu-id="d4dae-709">Many source devices support three color channels, for example,Red, Green, and Blue.</span></span> <span data-ttu-id="d4dae-710">No entanto, se um dispositivo de origem dá suporte a quatro canais, como CMYK, o tamanho da tabela e o tempo necessário para construir a tabela crescem por um fator do número de etapas.</span><span class="sxs-lookup"><span data-stu-id="d4dae-710">However, if a source device supports four channels, such as CMYK, the size of the table and the time required to construct the table grow by a factor of the number of steps.</span></span> <span data-ttu-id="d4dae-711">Em um CMS baseado em medida em que as transformações são construídas imediatamente ", esse tempo pode ser bem inaceitável.</span><span class="sxs-lookup"><span data-stu-id="d4dae-711">In a measurement-based CMS where transforms are constructed "on the fly," this time may well be unacceptable.</span></span>

<span data-ttu-id="d4dae-712">Para reduzir o tempo necessário para construir a tabela de conversão de cores, é possível tirar proveito de dois fatos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-712">To reduce the time required to construct the color conversion table, it is possible to take advantage of two facts.</span></span> <span data-ttu-id="d4dae-713">Primeiro, embora o dispositivo de origem possa dar suporte a mais de três canais de cores, o espaço de cores independente de dispositivo intermediário (CIECAM02 ja <sub>c</sub> b <sub>C</sub> ) tem apenas três canais de cor.</span><span class="sxs-lookup"><span data-stu-id="d4dae-713">First, while the source device may support more than three color channels, the intermediate device-independent color space (CIECAM02 Ja <sub>C</sub> b <sub>C</sub> ) has only three color channels.</span></span> <span data-ttu-id="d4dae-714">Segundo, a parte mais demorada do processamento não é a modelagem de dispositivo (convertendo de coordenadas de cores do dispositivo em valores de triestímulo), mas o mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-714">Second, the most time-consuming part of the processing is not the device modeling (converting from device color coordinates to tristimulus values), but the gamut mapping.</span></span> <span data-ttu-id="d4dae-715">Usando esses fatos, você pode construir uma tabela de conversão de cores preliminar que converte cores no espaço de cores independente do dispositivo por meio das etapas de mapeamento de gamut e, finalmente, por meio do modelo de cores do dispositivo de saída.</span><span class="sxs-lookup"><span data-stu-id="d4dae-715">Using these facts, you can construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps, and finally, through the output device color model.</span></span> <span data-ttu-id="d4dae-716">A construção dessa tabela é da dimensão três.</span><span class="sxs-lookup"><span data-stu-id="d4dae-716">Construction of this table is of dimension three.</span></span> <span data-ttu-id="d4dae-717">Em seguida, construímos a tabela de conversão de cores final da dimensão convertendo as combinações de cores de origem em um espaço intermediário independente do dispositivo e, em seguida, usando a tabela de conversão de cores preliminar, conclua a conversão para o espaço de cores do dispositivo de saída.</span><span class="sxs-lookup"><span data-stu-id="d4dae-717">Then we construct the dimension four final color-conversion table by converting the source color combinations to intermediate device-independent space, and then, using the preliminary color-conversion table, finish the conversion to the output device color space.</span></span> <span data-ttu-id="d4dae-718">Portanto, você reduz da computação (número de etapas na tabela de pesquisa) <sub>número \ de \</sub> cálculos de mapeamento de gama de canais para o número de etapas na tabela intermediária ₃ cálculos de mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-718">So you reduce from computing (number of steps in the lookup table) <sub>number\ of\ channels</sub> gamut mapping computations to the number of steps in the intermediate table ₃ gamut mapping computations.</span></span> <span data-ttu-id="d4dae-719">Mesmo que você precise executar o número de etapas na (tabela de pesquisa) <sub>número de</sub> computações de canais de modelagem de dispositivo e pesquisas de tabela tridimensionais, isso ainda é muito mais rápido do que o cálculo original.</span><span class="sxs-lookup"><span data-stu-id="d4dae-719">Even though you have to perform number of steps in the (lookup table) <sub>number\ of\ channels</sub> computations of device modeling and three-dimensional table lookups, this is still much faster than the original calculation.</span></span>

<span data-ttu-id="d4dae-720">O processo anterior funcionará bem, desde que não haja necessidade de informações a serem passadas entre o modelo do dispositivo de origem e qualquer outro componente na transformação de cores.</span><span class="sxs-lookup"><span data-stu-id="d4dae-720">The preceding process will work well provided that there is no need for information to pass between the source device model and any other component in the color transform.</span></span> <span data-ttu-id="d4dae-721">No entanto, se o dispositivo de saída e o dispositivo de origem forem compatíveis com um Colorant preto e a Colorant preta de origem for usada para determinar a saída de Colorant preta, o processo não conseguirá comunicar corretamente as informações pretas de origem.</span><span class="sxs-lookup"><span data-stu-id="d4dae-721">However, if the output device and the source device both support a black colorant, and the source black colorant is used in determining the output black colorant, the process will fail to properly communicate the source black information.</span></span> <span data-ttu-id="d4dae-722">Um processo alternativo é construir uma tabela de conversão de cores preliminar que converta as cores no espaço de cores independente do dispositivo somente por meio das etapas de mapeamento de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-722">An alternative process is to construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps only.</span></span> <span data-ttu-id="d4dae-723">Em seguida, construa a dimensão de quatro tabelas de conversão de cor final usando as seguintes etapas: a) converta as combinações de cores de origem para o espaço independente de dispositivo intermediário, b) execute as etapas de mapeamento de gama interpolando na tabela de cores preliminar em vez de aplicar os processos de mapeamento de gamut reais e c) Use os valores resultantes das etapas de mapeamento de gamut e qualquer informação de canal preto de origem para calcular o dispositivo de saída colorants usando o modelo de dispositivo de</span><span class="sxs-lookup"><span data-stu-id="d4dae-723">Then construct the dimension four final color-conversion table using the following steps: a) convert the source color combinations to intermediate device-independent space, b) perform the gamut mapping steps by interpolating in the preliminary color table instead of applying the actual gamut mapping processes, and c) use the resulting values from the gamut mapping steps and any source black channel information to compute the output device colorants using the output device model.</span></span> <span data-ttu-id="d4dae-724">Esse processo também pode ser usado quando há informações transferidas entre os modelos de dispositivo de origem e saída, mesmo que não haja um canal preto; por exemplo, se os dois módulos forem implementados com uma arquitetura de plug-in que permita o intercâmbio de dados entre os módulos.</span><span class="sxs-lookup"><span data-stu-id="d4dae-724">This process also can be used when there is information transferred between the source and output device models even if there is no black channel; for example, if the two modules are implemented with a plug-in architecture that allows for data interchange between modules.</span></span>

<span data-ttu-id="d4dae-725">Os dois processos anteriores podem ser usados para melhorar efetivamente o tempo necessário para construir a tabela de transformação de cor de quatro dimensões.</span><span class="sxs-lookup"><span data-stu-id="d4dae-725">The preceding two processes can be used to effectively improve the time required to construct the four-dimensional color transform table.</span></span>

### <a name="checkgamut"></a><span data-ttu-id="d4dae-726">CheckGamut</span><span class="sxs-lookup"><span data-stu-id="d4dae-726">CheckGamut</span></span>

<span data-ttu-id="d4dae-727">O ICM chama CreateTransform e **CreateMultiProfileTransform** pegar uma palavra de valores de sinalizador, uma das quais é habilitar a \_ verificação de GAMUT \_ .</span><span class="sxs-lookup"><span data-stu-id="d4dae-727">The ICM calls CreateTransform and **CreateMultiProfileTransform** take a word of flag values, one of which is ENABLE\_GAMUT\_CHECKING.</span></span> <span data-ttu-id="d4dae-728">Quando esse sinalizador é definido, CITE deve criar a transformação de forma diferente.</span><span class="sxs-lookup"><span data-stu-id="d4dae-728">When this flag is set, CITE must create the transform differently.</span></span> <span data-ttu-id="d4dae-729">As etapas iniciais são as mesmas: o câmeras de origem e o de destino devem ser inicializados, e os descritores de limite de gamut de origem e destino devem ser inicializados.</span><span class="sxs-lookup"><span data-stu-id="d4dae-729">The initial steps are the same: the source and destination CAMs must be initialized, then the source and destination gamut boundary descriptors must be initialized.</span></span> <span data-ttu-id="d4dae-730">Independentemente da intenção especificada, o CheckGamut GMM deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="d4dae-730">Regardless of the specified intent, the CheckGamut GMM must be used.</span></span> <span data-ttu-id="d4dae-731">O CheckGamut GMM deve ser inicializado usando os modelos de dispositivo de origem e de destino e os descritores de limite de gamut.</span><span class="sxs-lookup"><span data-stu-id="d4dae-731">The CheckGamut GMM should be initialized using the source and destination device models and gamut boundary descriptors.</span></span> <span data-ttu-id="d4dae-732">No entanto, a transformação deve criar uma transformação truncada que inclui o modelo do dispositivo de origem, a CAM de origem, qualquer GMMs intermediária e CheckGamut GMM.</span><span class="sxs-lookup"><span data-stu-id="d4dae-732">However, the transform should then create a truncated transform comprising the source device model, the source CAM, any intervening GMMs, and the CheckGamut GMM.</span></span> <span data-ttu-id="d4dae-733">Isso garante que os valores Delta J, Delta C e Delta h sejam impressos pelo CheckGamut CMM se tornarem os valores finais resultantes.</span><span class="sxs-lookup"><span data-stu-id="d4dae-733">This assures that the delta J, delta C, and delta h values output by the CheckGamut CMM become the final resulting values.</span></span>

<span data-ttu-id="d4dae-734">O significado de CheckGamut é claro quando há apenas dois perfis de dispositivo na transformação.</span><span class="sxs-lookup"><span data-stu-id="d4dae-734">The meaning of CheckGamut is clear when there are only two device profiles in the transform.</span></span> <span data-ttu-id="d4dae-735">Quando há mais de dois perfis de dispositivo e mais de dois GMMs, o CheckGamut relata se as cores que foram transformadas por meio do primeiro modelo de dispositivo e todos os últimos GMM estão dentro da gama do dispositivo de destino.</span><span class="sxs-lookup"><span data-stu-id="d4dae-735">When there are more than two device profiles and more than two GMMs, then CheckGamut reports whether the colors which have been transformed through the first device model and all but the last GMM fall within the gamut of the destination device.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d4dae-736">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="d4dae-736">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d4dae-737">Conceitos básicos de gerenciamento de cores</span><span class="sxs-lookup"><span data-stu-id="d4dae-737">Basic color management concepts</span></span>](basic-color-management-concepts.md)
</dt> <dt>

[<span data-ttu-id="d4dae-738">Algoritmos e esquemas do sistema de cores do Windows</span><span class="sxs-lookup"><span data-stu-id="d4dae-738">Windows Color System Schemas and Algorithms</span></span>](windows-color-system-schemas-and-algorithms.md)
</dt> </dl>

 

 




