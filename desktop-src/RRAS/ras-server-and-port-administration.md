---
title: Sobre a administração de porta e servidor RAS
description: As funções de administração do servidor RAS obtêm informações sobre um servidor RAS especificado e suas portas. Essas funções também são usadas para encerrar uma conexão em uma porta de servidor RAS especificada.
ms.assetid: eedac23e-d716-451e-b08b-594398656bb5
keywords:
- Administração de RAS RRAS, gerenciamento de porta e servidor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cb9d3cc520efa6bbb492e8d9e967d423548f96a
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/23/2019
ms.locfileid: "104453802"
---
# <a name="about-ras-server-and-port-administration"></a><span data-ttu-id="28e76-105">Sobre a administração de porta e servidor RAS</span><span class="sxs-lookup"><span data-stu-id="28e76-105">About RAS Server and Port Administration</span></span>

<span data-ttu-id="28e76-106">As funções de administração do servidor RAS obtêm informações sobre um servidor RAS especificado e suas portas.</span><span class="sxs-lookup"><span data-stu-id="28e76-106">The RAS server administration functions get information about a specified RAS server and its ports.</span></span> <span data-ttu-id="28e76-107">Essas funções também são usadas para encerrar uma conexão em uma porta de servidor RAS especificada.</span><span class="sxs-lookup"><span data-stu-id="28e76-107">These functions are also used to terminate a connection on a specified RAS server port.</span></span>

<span data-ttu-id="28e76-108">A função [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) retorna uma estrutura de [**servidor de MPR \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) que contém informações sobre a configuração de um servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="28e76-108">The [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) function returns a [**MPR\_SERVER\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) structure that contains information about the configuration of a RAS server.</span></span> <span data-ttu-id="28e76-109">As informações retornadas incluem o número de portas atualmente disponíveis para conexões, o número de portas atualmente em uso e o número de versão do servidor.</span><span class="sxs-lookup"><span data-stu-id="28e76-109">The returned information includes the number of ports currently available for connections, the number of ports currently in use, and the server version number.</span></span>

<span data-ttu-id="28e76-110">A função [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) recupera uma matriz de estruturas da [**porta do RAS \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) .</span><span class="sxs-lookup"><span data-stu-id="28e76-110">The [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) function retrieves an array of [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structures.</span></span> <span data-ttu-id="28e76-111">Cada estrutura contém informações para uma das portas configuradas em um servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="28e76-111">Each structure contains information for one of the ports configured on a RAS server.</span></span> <span data-ttu-id="28e76-112">As informações para cada porta incluem:</span><span class="sxs-lookup"><span data-stu-id="28e76-112">The information for each port includes:</span></span>

-   <span data-ttu-id="28e76-113">O nome da porta</span><span class="sxs-lookup"><span data-stu-id="28e76-113">The name of the port</span></span>
-   <span data-ttu-id="28e76-114">Informações sobre o dispositivo conectado à porta</span><span class="sxs-lookup"><span data-stu-id="28e76-114">Information about the device attached to the port</span></span>
-   <span data-ttu-id="28e76-115">Se o servidor RAS associado à porta é um servidor Windows NT/Windows 2000</span><span class="sxs-lookup"><span data-stu-id="28e76-115">Whether the RAS server associated with the port is a Windows NT/Windows 2000 Server</span></span>
-   <span data-ttu-id="28e76-116">Se a porta está em uso no momento e, se for, informações sobre a conexão</span><span class="sxs-lookup"><span data-stu-id="28e76-116">Whether the port is currently in use and, if it is, information about the connection</span></span>

<span data-ttu-id="28e76-117">Para obter as portas em uso por uma conexão específica, passe [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) um identificador para essa conexão no parâmetro *hConnection* .</span><span class="sxs-lookup"><span data-stu-id="28e76-117">To obtain the ports in use by a specific connection, pass [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) a handle to that connection in the *hConnection* parameter.</span></span> <span data-ttu-id="28e76-118">Para obter um identificador para uma conexão, use a função [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) .</span><span class="sxs-lookup"><span data-stu-id="28e76-118">To obtain a handle to a connection, use the [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) function.</span></span> <span data-ttu-id="28e76-119">Como alternativa, se você tiver implementado uma [dll de administração de Ras](ras-administration-dll.md), as funções [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) e [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) receberão um identificador para cada nova conexão no momento em que a conexão for estabelecida.</span><span class="sxs-lookup"><span data-stu-id="28e76-119">Alternatively, if you have implemented a [RAS Administration DLL](ras-administration-dll.md), the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) functions receive a handle to each new connection at the time the connection is established.</span></span>

<span data-ttu-id="28e76-120">Você pode chamar a função [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) para obter informações adicionais sobre uma porta especificada em um servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="28e76-120">You can call the [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function to get additional information about a specified port on a RAS server.</span></span> <span data-ttu-id="28e76-121">Essa função retorna uma estrutura de [**\_ porta \_ 1 RAS**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) que contém uma estrutura de [**porta de acesso remoto \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) e informações adicionais sobre o estado atual da porta.</span><span class="sxs-lookup"><span data-stu-id="28e76-121">This function returns a [**RAS\_PORT\_1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) structure that contains a [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structure and additional information about the current state of the port.</span></span> <span data-ttu-id="28e76-122">A função [**RasAdminPortGetInfo**](rasadminportgetinfo.md) também retorna uma matriz de estruturas de [**\_ parâmetros de Ras**](ras-parameters-str.md) que descrevem os valores de qualquer chave específica de mídia associada à porta.</span><span class="sxs-lookup"><span data-stu-id="28e76-122">The [**RasAdminPortGetInfo**](rasadminportgetinfo.md) function also returns an array of [**RAS\_PARAMETERS**](ras-parameters-str.md) structures that describe the values of any media-specific keys associated with the port.</span></span> <span data-ttu-id="28e76-123">Uma estrutura de **\_ parâmetros de Ras** usa um valor da enumeração de [**\_ \_ formato de params de Ras**](ras-params-format-str.md) para indicar o formato do valor para cada chave específica de mídia.</span><span class="sxs-lookup"><span data-stu-id="28e76-123">A **RAS\_PARAMETERS** structure uses a value from the [**RAS\_PARAMS\_FORMAT**](ras-params-format-str.md) enumeration to indicate the format of the value for each media-specific key.</span></span>

<span data-ttu-id="28e76-124">A função [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) também retorna uma estrutura de [**\_ \_ Estatísticas de porta RAS**](ras-port-statistics-str.md) que contém vários contadores de estatística para a conexão atual, se houver, na porta.</span><span class="sxs-lookup"><span data-stu-id="28e76-124">The [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function also returns a [**RAS\_PORT\_STATISTICS**](ras-port-statistics-str.md) structure that contains various statistic counters for the current connection, if any, on the port.</span></span> <span data-ttu-id="28e76-125">Para uma porta que faz parte de uma conexão Multilink, **MprAdminPortGetInfo** retorna estatísticas para a porta individual e estatísticas cumulativas para todas as portas envolvidas na conexão.</span><span class="sxs-lookup"><span data-stu-id="28e76-125">For a port that is part of a multilink connection, **MprAdminPortGetInfo** returns statistics for the individual port and cumulative statistics for all ports involved in the connection.</span></span> <span data-ttu-id="28e76-126">Você pode usar a função [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) para redefinir os contadores de estatística para a porta.</span><span class="sxs-lookup"><span data-stu-id="28e76-126">You can use the [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) function to reset the statistic counters for the port.</span></span> <span data-ttu-id="28e76-127">A função [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) desconecta uma porta que está em uso.</span><span class="sxs-lookup"><span data-stu-id="28e76-127">The [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) function disconnects a port that is in use.</span></span>

<span data-ttu-id="28e76-128">Use a função [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) para liberar memória alocada pelas funções [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) e [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="28e76-128">Use the [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) function to free memory allocated by the [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) and [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) functions.</span></span> <span data-ttu-id="28e76-129">Use a função [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) para obter uma cadeia de caracteres que descreve um código de erro RAS retornado por uma das funções de administração do servidor RAS (RasAdmin).</span><span class="sxs-lookup"><span data-stu-id="28e76-129">Use the [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) function to get a string that describes a RAS error code returned by one of the RAS server administration (RasAdmin) functions.</span></span>

 

 




