---
title: Recebendo notificação de alterações
description: Muitos clientes podem atualizar simultaneamente a tabela de roteamento e os clientes devem ser notificados quando ocorrem alterações nas informações de roteamento.
ms.assetid: d42e16e2-32b2-4178-967b-e937730b3cca
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bacd8d1d0329cf29be82a890be30b602b9330249
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104363886"
---
# <a name="receiving-notification-of-changes"></a><span data-ttu-id="a503e-103">Recebendo notificação de alterações</span><span class="sxs-lookup"><span data-stu-id="a503e-103">Receiving Notification of Changes</span></span>

<span data-ttu-id="a503e-104">Muitos clientes podem atualizar simultaneamente a tabela de roteamento e os clientes devem ser notificados quando ocorrem alterações nas informações de roteamento.</span><span class="sxs-lookup"><span data-stu-id="a503e-104">Many clients can simultaneously update the routing table, and clients must be notified when changes to routing information occur.</span></span> <span data-ttu-id="a503e-105">Por exemplo, um cliente que não é notificado sobre as alterações de outro cliente na tabela de roteamento poderia anunciar informações de rota desatualizadas.</span><span class="sxs-lookup"><span data-stu-id="a503e-105">For example, a client that is not notified of another client's changes to the routing table could advertise outdated route information.</span></span> <span data-ttu-id="a503e-106">Isso pode ser evitado pela programação de clientes para se registrarem com o Gerenciador de tabela de roteamento para serem notificados sobre alterações na tabela de roteamento.</span><span class="sxs-lookup"><span data-stu-id="a503e-106">This can be prevented by programming clients to register with the routing table manager to be notified of changes in the routing table.</span></span> <span data-ttu-id="a503e-107">O Gerenciador de tabela de roteamento envia notificações de alterações a todos os clientes que se registram para recebê-las.</span><span class="sxs-lookup"><span data-stu-id="a503e-107">The routing table manager sends notifications of changes to all clients that register to receive them.</span></span>

<span data-ttu-id="a503e-108">A notificação de alteração se aplica somente a destinos.</span><span class="sxs-lookup"><span data-stu-id="a503e-108">Change notification applies only to destinations.</span></span> <span data-ttu-id="a503e-109">Não é possível consultar o Gerenciador de tabela de roteamento para alterações em uma rota específica.</span><span class="sxs-lookup"><span data-stu-id="a503e-109">There is no way to query the routing table manager for changes to a particular route.</span></span>

<span data-ttu-id="a503e-110">Quando uma alteração é feita em uma das rotas para um destino, o Gerenciador de tabela de roteamento envia uma notificação de que ocorreu uma alteração.</span><span class="sxs-lookup"><span data-stu-id="a503e-110">When a change is made to one of the routes to a destination, the routing table manager sends out a notification that a change has occurred.</span></span> <span data-ttu-id="a503e-111">Essa notificação vai apenas para os clientes que se registraram com o Gerenciador de tabela de roteamento para o tipo de alteração que ocorreu.</span><span class="sxs-lookup"><span data-stu-id="a503e-111">This notification goes only to those clients that have registered with the routing table manager for the type of change that has occurred.</span></span> <span data-ttu-id="a503e-112">Todas as alterações nas informações de roteamento no Gerenciador de tabela de roteamento ocorrem em um ou mais modos de exibição e as mensagens de notificação de alteração podem ser solicitadas em qualquer subconjunto de exibições com suporte.</span><span class="sxs-lookup"><span data-stu-id="a503e-112">All changes to routing information in the routing table manager occur in one or more views, and change notification messages can be requested in any subset of supported views.</span></span>

<span data-ttu-id="a503e-113">Atualmente, há três tipos de notificações de alteração para os quais um cliente pode se registrar:</span><span class="sxs-lookup"><span data-stu-id="a503e-113">There are currently three types of change notifications for which a client can register:</span></span>

-   <span data-ttu-id="a503e-114">Notificação de qualquer alteração nas rotas para o destino.</span><span class="sxs-lookup"><span data-stu-id="a503e-114">Notification of any change to the routes for the destination.</span></span> <span data-ttu-id="a503e-115">Essa solicitação é feita usando o \_ sinalizador alterar tipo de alteração RTM \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a503e-115">This request is made using the RTM\_CHANGE\_TYPE\_ALL flag.</span></span>
-   <span data-ttu-id="a503e-116">Notificação se a melhor rota para o destino for alterada ou qualquer uma das seguintes informações para as melhores alterações de rota atuais:</span><span class="sxs-lookup"><span data-stu-id="a503e-116">Notification if the best route to the destination changes, or any of the following information for the current best route changes:</span></span>

    -   <span data-ttu-id="a503e-117">Preferência</span><span class="sxs-lookup"><span data-stu-id="a503e-117">Preference</span></span>
    -   <span data-ttu-id="a503e-118">Próximos saltos</span><span class="sxs-lookup"><span data-stu-id="a503e-118">Next hops</span></span>
    -   <span data-ttu-id="a503e-119">Sinalizadores de rota</span><span class="sxs-lookup"><span data-stu-id="a503e-119">Route flags</span></span>

    <span data-ttu-id="a503e-120">Essa solicitação é feita usando o \_ sinalizador do \_ melhor tipo de alteração RTM \_ .</span><span class="sxs-lookup"><span data-stu-id="a503e-120">This request is made using the RTM\_CHANGE\_TYPE\_BEST flag.</span></span>

-   <span data-ttu-id="a503e-121">Notificação de todas as alterações do tipo tipo de \_ alteração RTM \_ \_ melhor, exceto alterações em sinalizadores de não encaminhamento na melhor rota.</span><span class="sxs-lookup"><span data-stu-id="a503e-121">Notification of all changes of the type RTM\_CHANGE\_TYPE\_BEST, except changes in non-forwarding flags in the best route.</span></span> <span data-ttu-id="a503e-122">Por exemplo, o Gerenciador de roteador aguarda as alterações desse tipo na exibição unicast e atualiza as informações no encaminhador unicast.</span><span class="sxs-lookup"><span data-stu-id="a503e-122">For example, the router manager waits for changes of this type in the unicast view, and updates information in the unicast forwarder.</span></span> <span data-ttu-id="a503e-123">Essa solicitação é feita usando o \_ sinalizador de \_ encaminhamento do tipo de alteração RTM \_ .</span><span class="sxs-lookup"><span data-stu-id="a503e-123">This request is made using the RTM\_CHANGE\_TYPE\_FORWARDING flag.</span></span>

<span data-ttu-id="a503e-124">As solicitações de notificações de alterações também podem ser restritas a um subconjunto de destinos registrando-se para notificações de alterações apenas em destinos "marcados".</span><span class="sxs-lookup"><span data-stu-id="a503e-124">Requests for notifications of changes can also be restricted to a subset of destinations by registering for notifications of changes only to "marked" destinations.</span></span> <span data-ttu-id="a503e-125">O cliente pode marcar um destino para a notificação de alteração chamando [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="a503e-125">The client can mark a destination for change notification by calling [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span></span>

<span data-ttu-id="a503e-126">Quando ocorre uma alteração, o Gerenciador de tabela de roteamento verifica se há clientes que devem ser notificados sobre essa alteração.</span><span class="sxs-lookup"><span data-stu-id="a503e-126">When a change occurs, the routing table manager checks to see if there are any clients that must be notified of this change.</span></span> <span data-ttu-id="a503e-127">Um cliente deve ser notificado sobre uma alteração se todas as condições a seguir forem atendidas:</span><span class="sxs-lookup"><span data-stu-id="a503e-127">A client must be notified of a change if all of the following conditions are met:</span></span>

-   <span data-ttu-id="a503e-128">O tipo de alteração que ocorreu é um tipo para o qual o cliente registrou para notificação</span><span class="sxs-lookup"><span data-stu-id="a503e-128">The type of change that occurred is a type for which the client has registered for notification</span></span>
-   <span data-ttu-id="a503e-129">As alterações em um destino que o cliente marcou ter ocorrido ou qualquer destino, se o cliente tiver solicitado alterações para todos os destinos</span><span class="sxs-lookup"><span data-stu-id="a503e-129">Changes to a destination that the client has marked have occurred or any destination, if the client has requested changes for all destinations</span></span>
-   <span data-ttu-id="a503e-130">O cliente solicitou notificação de alteração para a exibição na qual essa alteração ocorreu</span><span class="sxs-lookup"><span data-stu-id="a503e-130">The client requested change notification for the view in which this change occurred</span></span>

<span data-ttu-id="a503e-131">Se a alteração atender a todos os critérios acima, a alteração será armazenada em cache e o cliente será notificado.</span><span class="sxs-lookup"><span data-stu-id="a503e-131">If the change meets all of the above criteria, the change is cached and the client is notified.</span></span>

<span data-ttu-id="a503e-132">A notificação não especifica quais são as alterações reais, apenas se elas ocorreram.</span><span class="sxs-lookup"><span data-stu-id="a503e-132">The notification does not specify what the actual changes are, only that they have occurred.</span></span> <span data-ttu-id="a503e-133">O cliente deve recuperar as alterações chamando [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) usando o identificador de notificação que foi obtido de uma chamada anterior para [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="a503e-133">The client must retrieve the changes by calling [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) using the notification handle that was obtained from a previous call to [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span></span>

 

 




