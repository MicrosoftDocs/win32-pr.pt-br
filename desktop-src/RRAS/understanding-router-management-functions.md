---
title: Noções básicas sobre funções de gerenciamento de roteador
description: As seções a seguir discutem os diferentes tipos de funções de gerenciamento de roteador e o que você deve saber para usá-las com eficiência.
ms.assetid: 2f6831f2-39be-43b1-80bd-9a36c0f8a2af
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be4b1891bc55b80a18a6d0dd928044da1e0e9709
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105759600"
---
# <a name="understanding-router-management-functions"></a><span data-ttu-id="0ac16-103">Noções básicas sobre funções de gerenciamento de roteador</span><span class="sxs-lookup"><span data-stu-id="0ac16-103">Understanding Router Management Functions</span></span>

<span data-ttu-id="0ac16-104">As seções a seguir discutem os diferentes tipos de funções de gerenciamento de roteador e o que você deve saber para usá-las com eficiência.</span><span class="sxs-lookup"><span data-stu-id="0ac16-104">The following sections discuss the different types of router management functions and what you should know to use them effectively.</span></span>

<span data-ttu-id="0ac16-105">Todas as funções de gerenciamento de roteador exigem privilégios de administrador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-105">All router management functions require administrator privileges.</span></span> <span data-ttu-id="0ac16-106">Um usuário no grupo de usuários avançados não tem privilégios suficientes para usar as funções de gerenciamento de roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-106">A user in the Power User group does not have sufficient privileges to use the router management functions.</span></span>

## <a name="the-different-classes-of-router-management-functions"></a><span data-ttu-id="0ac16-107">As diferentes classes de funções de gerenciamento de roteador</span><span class="sxs-lookup"><span data-stu-id="0ac16-107">The Different Classes of Router Management Functions</span></span>

<span data-ttu-id="0ac16-108">As funções de gerenciamento de roteador podem ser divididas nas funções de administração e nas funções de configuração.</span><span class="sxs-lookup"><span data-stu-id="0ac16-108">The router management functions can be divided up into the administration functions and the configuration functions.</span></span> <span data-ttu-id="0ac16-109">As [funções de administração](router-administration-functions.md) têm um prefixo de MprAdmin e as [funções de configuração](router-configuration-functions.md) têm um prefixo de MprConfig.</span><span class="sxs-lookup"><span data-stu-id="0ac16-109">The [administration functions](router-administration-functions.md) have a prefix of MprAdmin and the [configuration functions](router-configuration-functions.md) have a prefix of MprConfig.</span></span> <span data-ttu-id="0ac16-110">Apesar da nomenclatura, ambos os conjuntos de funções são usados para o gerenciamento de roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-110">Despite the naming, both sets of functions are used for router management.</span></span> <span data-ttu-id="0ac16-111">As funções MprAdmin operam diretamente no roteador em execução.</span><span class="sxs-lookup"><span data-stu-id="0ac16-111">The MprAdmin functions operate directly on the running router.</span></span> <span data-ttu-id="0ac16-112">As funções MprConfig têm funcionalidade semelhante, mas operam na configuração do roteador armazenada no registro.</span><span class="sxs-lookup"><span data-stu-id="0ac16-112">The MprConfig functions have similar functionality, but operate on the router configuration stored in the registry.</span></span> <span data-ttu-id="0ac16-113">Os dois tipos de funções passam por [blocos de informações](router-information-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0ac16-113">Both types of functions pass [information blocks](router-information-functions.md).</span></span>

<span data-ttu-id="0ac16-114">As funções de gerenciamento de roteador também podem ser divididas com base em quais componentes do roteador eles gerenciam: interfaces, gerenciadores de roteadores ou clientes do Gerenciador de roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-114">The router management functions can also be divided up based on what components of the router they manage: interfaces, router managers, or router manager clients.</span></span>

<span data-ttu-id="0ac16-115">As [funções de interface do roteador](router-interface-functions.md) têm um prefixo de MprAdminInterface ou MprConfigInterface.</span><span class="sxs-lookup"><span data-stu-id="0ac16-115">The [router interface functions](router-interface-functions.md) have a prefix of either MprAdminInterface or MprConfigInterface.</span></span> <span data-ttu-id="0ac16-116">Use essas funções para acessar interfaces.</span><span class="sxs-lookup"><span data-stu-id="0ac16-116">Use these functions to access interfaces.</span></span> <span data-ttu-id="0ac16-117">As [funções do Gerenciador de roteador](router-manager-transport-functions.md) têm um prefixo de MprAdminTransport ou MprConfigTransport.</span><span class="sxs-lookup"><span data-stu-id="0ac16-117">The [router manager functions](router-manager-transport-functions.md) have a prefix of MprAdminTransport or MprConfigTransport.</span></span> <span data-ttu-id="0ac16-118">Use essas funções para acessar os gerenciadores de roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-118">Use these functions to access the router managers.</span></span> <span data-ttu-id="0ac16-119">Por fim, as [funções de cliente do Gerenciador de roteador](router-manager-client-interfacetransport-functions.md) têm um prefixo de MprAdminInterfaceTransport ou MprConfigInterfaceTransport.</span><span class="sxs-lookup"><span data-stu-id="0ac16-119">Lastly, the [router manager client functions](router-manager-client-interfacetransport-functions.md) have a prefix of MprAdminInterfaceTransport or MprConfigInterfaceTransport.</span></span> <span data-ttu-id="0ac16-120">Use essas funções para acessar os clientes em execução no roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-120">Use these functions to access the clients running on the router.</span></span>

<span data-ttu-id="0ac16-121">Um subconjunto de funções MprAdmin são as [funções MprAdminMib](/windows/desktop/RRAS/about-router-management-with-mib).</span><span class="sxs-lookup"><span data-stu-id="0ac16-121">A subset of MprAdmin functions are the [MprAdminMib functions](/windows/desktop/RRAS/about-router-management-with-mib).</span></span> <span data-ttu-id="0ac16-122">Eles também funcionam apenas na rota em execução.</span><span class="sxs-lookup"><span data-stu-id="0ac16-122">These also operate on the running route alone.</span></span> <span data-ttu-id="0ac16-123">No entanto, essas funções não passam por blocos de informações.</span><span class="sxs-lookup"><span data-stu-id="0ac16-123">However, these functions do not pass information blocks.</span></span> <span data-ttu-id="0ac16-124">Essas funções fornecem flexibilidade adicional ao designer de protocolo, especialmente para recuperar informações que não são de configuração, como estatísticas.</span><span class="sxs-lookup"><span data-stu-id="0ac16-124">These functions provide additional flexibility to the protocol designer, especially for retrieving non-configuration information, such as statistics.</span></span>

## <a name="ensuring-that-changes-occur-immediately-and-are-persistent"></a><span data-ttu-id="0ac16-125">Garantindo que as alterações ocorram imediatamente e sejam persistentes</span><span class="sxs-lookup"><span data-stu-id="0ac16-125">Ensuring that Changes Occur Immediately and are Persistent</span></span>

<span data-ttu-id="0ac16-126">Um desenvolvedor pode fazer alterações na configuração do roteador diretamente usando as [funções de configuração do roteador](router-configuration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0ac16-126">A developer can make changes to the router configuration directly using the [router configuration functions](router-configuration-functions.md).</span></span> <span data-ttu-id="0ac16-127">No entanto, as alterações feitas na configuração não entram em vigor até que o roteador seja reiniciado, já que essa é a única vez que DIM lê a configuração do registro.</span><span class="sxs-lookup"><span data-stu-id="0ac16-127">However, any changes made to the configuration do not take effect until the router is restarted, since this is the only time that DIM reads the configuration from the registry.</span></span>

<span data-ttu-id="0ac16-128">Um desenvolvedor pode fazer alterações no roteador em execução usando as [funções de administração do roteador](router-administration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0ac16-128">A developer can make changes to the running router by using the [router administration functions](router-administration-functions.md).</span></span> <span data-ttu-id="0ac16-129">No entanto, essas alterações não são persistentes: como elas não foram gravadas no registro, elas serão perdidas se o roteador for reiniciado.</span><span class="sxs-lookup"><span data-stu-id="0ac16-129">However, these changes are not persistent: since they have not been written to the registry, they are lost if the router is restarted.</span></span>

<span data-ttu-id="0ac16-130">Para fazer alterações imediatas e persistentes, um desenvolvedor precisa usar ambas as funções de administração de roteador e de configuração de roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-130">In order to make changes that are both immediate and persistent, a developer needs to use both the router administration and the router configuration functions.</span></span> <span data-ttu-id="0ac16-131">Se o roteador não estiver em execução, o desenvolvedor precisará chamar apenas as funções de configuração apropriadas do roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-131">If the router is not running, the developer need only call the appropriate router configuration functions.</span></span>

<span data-ttu-id="0ac16-132">Para consultar informações do roteador em execução, use as funções de administração do roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-132">For querying information from the running router, use the router administration functions.</span></span> <span data-ttu-id="0ac16-133">Se o roteador não estiver em execução, consulte as informações usando as funções de configuração do roteador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-133">If the router is not running, query information using the router configuration functions.</span></span>

<span data-ttu-id="0ac16-134">As funções [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) e [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) dão suporte à estrutura [**MPR \_ interface \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) .</span><span class="sxs-lookup"><span data-stu-id="0ac16-134">The [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) and [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) functions support the [**MPR\_INTERFACE\_2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) structure.</span></span> <span data-ttu-id="0ac16-135">No entanto, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) e [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) não.</span><span class="sxs-lookup"><span data-stu-id="0ac16-135">However, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) and [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) do not.</span></span> <span data-ttu-id="0ac16-136">Para criar uma interface de discagem por demanda persistente após uma reinicialização, chame **MprAdminInterfaceCreate** com **a \_ interface \_ de MPR 2** e, em seguida, chame **MprConfigInterfaceCreate** com a interface de [**MPR \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) ou a [**interface de MPR \_ \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span><span class="sxs-lookup"><span data-stu-id="0ac16-136">In order to create a demand-dial interface that is persistent after a reboot, call **MprAdminInterfaceCreate** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceCreate** with [**MPR\_INTERFACE\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) or [**MPR\_INTERFACE\_1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span></span> <span data-ttu-id="0ac16-137">Da mesma forma, para fazer alterações persistentes em uma interface de discagem por demanda, chame **MprAdminInterfaceSetInfo** com a **interface de MPR \_ \_ 2** e, em seguida, chame **MprConfigInterfaceSetInfo** com a interface de **MPR \_ \_ 0** ou **MPR \_ interface \_ 1**.</span><span class="sxs-lookup"><span data-stu-id="0ac16-137">Similarly, to make persistent changes to a demand-dial interface, call **MprAdminInterfaceSetInfo** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceSetInfo** with **MPR\_INTERFACE\_0** or **MPR\_INTERFACE\_1**.</span></span>

## <a name="using-router-administration-and-configuration-functions-remotely"></a><span data-ttu-id="0ac16-138">Usando funções de administração e configuração de roteador remotamente</span><span class="sxs-lookup"><span data-stu-id="0ac16-138">Using Router Administration and Configuration Functions Remotely</span></span>

<span data-ttu-id="0ac16-139">A maioria das funções de administração e configuração do roteador pode ser chamada em um computador diferente daquele que está sendo administrado.</span><span class="sxs-lookup"><span data-stu-id="0ac16-139">Most of the router administration and configuration functions can be called on a computer other than the one being administered.</span></span> <span data-ttu-id="0ac16-140">Essas funções usam como um parâmetro, um identificador para o serviço de roteador ou a configuração para administrar.</span><span class="sxs-lookup"><span data-stu-id="0ac16-140">These functions take as a parameter, a handle to the router service or configuration to administer.</span></span> <span data-ttu-id="0ac16-141">As funções de administração usam RPC (chamada de procedimento remoto) para se comunicar com o serviço de roteamento especificado pelo identificador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-141">The administration functions use RPC (Remote Procedure Call) to communicate with the routing service specified by the handle.</span></span> <span data-ttu-id="0ac16-142">As funções de configuração gravam e lêem o registro do computador especificado pelo identificador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-142">The configuration functions write to and read from the registry of the computer specified by the handle.</span></span>

<span data-ttu-id="0ac16-143">Para administrar o serviço de roteamento em uma máquina remota, primeiro chame [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) para verificar se o serviço está em execução.</span><span class="sxs-lookup"><span data-stu-id="0ac16-143">To administer the routing service on a remote machine first call [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) to verify that the service is running.</span></span> <span data-ttu-id="0ac16-144">Em seguida, chame [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) para obter o identificador.</span><span class="sxs-lookup"><span data-stu-id="0ac16-144">Then call [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) to obtain the handle.</span></span> <span data-ttu-id="0ac16-145">Se o serviço de roteador não estiver em execução no computador remoto, todas as chamadas de administração de roteador (MprAdmin) falharão.</span><span class="sxs-lookup"><span data-stu-id="0ac16-145">If the router service is not running on the remote machine, all router administration (MprAdmin) calls fail.</span></span>

<span data-ttu-id="0ac16-146">Para fazer alterações na configuração do roteador em um computador remoto, obtenha um identificador chamando a função [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) .</span><span class="sxs-lookup"><span data-stu-id="0ac16-146">To make changes to the router configuration on a remote machine obtain a handle by calling the [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) function.</span></span>

 

 