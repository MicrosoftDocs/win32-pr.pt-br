---
title: Configurando a segurança do Process-Wide por meio do registro
description: Se você quiser definir a segurança para um processo inteiro, uma solução é definir os níveis de segurança desejados no registro.
ms.assetid: 87f0a64f-f3ec-4ee2-8d65-4f82e8971f0b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d303f184229cb20aef1cbf71733956a3b6ce6618
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/21/2020
ms.locfileid: "103917713"
---
# <a name="setting-process-wide-security-through-the-registry"></a><span data-ttu-id="a970e-103">Configurando a segurança do Process-Wide por meio do registro</span><span class="sxs-lookup"><span data-stu-id="a970e-103">Setting Process-Wide Security Through the Registry</span></span>

<span data-ttu-id="a970e-104">Se você quiser definir a segurança para um processo inteiro, uma solução é definir os níveis de segurança desejados no registro.</span><span class="sxs-lookup"><span data-stu-id="a970e-104">If you want to set security for an entire process, one solution is to set the security levels you want in the registry.</span></span> <span data-ttu-id="a970e-105">Se seu aplicativo não puder chamar [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) ou se você preferir não usar a segurança programática, isso pode ser uma boa opção.</span><span class="sxs-lookup"><span data-stu-id="a970e-105">If your application cannot call [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) or if you prefer not to use programmatic security, this might be a good option.</span></span> <span data-ttu-id="a970e-106">Se você decidir definir a segurança de todo o processo usando o registro, deverá estar ciente de que se chamar **CoInitializeSecurity** dentro de seu programa com usará os valores em **CoInitializeSecurity** e ignorará os valores do registro.</span><span class="sxs-lookup"><span data-stu-id="a970e-106">If you decide to set process-wide security using the registry, you should be aware that if you call **CoInitializeSecurity** within your program COM will use the values in **CoInitializeSecurity** and ignore the registry values.</span></span>

<span data-ttu-id="a970e-107">Há duas maneiras de definir a segurança no registro para seu aplicativo:</span><span class="sxs-lookup"><span data-stu-id="a970e-107">There are two ways to set security in the registry for your application:</span></span>

-   <span data-ttu-id="a970e-108">Você pode usar Dcomcnfg.exe, que fornece uma interface de usuário simples para modificar os valores de segurança.</span><span class="sxs-lookup"><span data-stu-id="a970e-108">You can use Dcomcnfg.exe, which provides a simple user interface for modifying security values.</span></span> <span data-ttu-id="a970e-109">Todos os servidores COM podem ser configurados usando Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="a970e-109">All COM servers can be configured using Dcomcnfg.exe.</span></span> <span data-ttu-id="a970e-110">Para obter mais informações, consulte [definindo Process-Wide segurança usando DCOMCNFG](setting-processwide-security-using-dcomcnfg.md).</span><span class="sxs-lookup"><span data-stu-id="a970e-110">For more information, see [Setting Process-Wide Security Using DCOMCNFG](setting-processwide-security-using-dcomcnfg.md).</span></span> <span data-ttu-id="a970e-111">No entanto, os aplicativos cliente normalmente não aparecem no Dcomcnfg.exe, a menos que o cliente crie um GUID e o insira no registro.</span><span class="sxs-lookup"><span data-stu-id="a970e-111">However, client applications do not normally appear in Dcomcnfg.exe unless the client creates a GUID and enters it in the registry.</span></span>
-   <span data-ttu-id="a970e-112">Você pode definir valores de segurança na chave [AppID](appid-key.md) para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a970e-112">You can set security values under the [AppID](appid-key.md) key for the application.</span></span> <span data-ttu-id="a970e-113">O restante deste tópico explica como definir a segurança no registro usando a chave **AppID** .</span><span class="sxs-lookup"><span data-stu-id="a970e-113">The rest of this topic explains how to set security in the registry using the **AppID** key.</span></span>

<span data-ttu-id="a970e-114">Uma AppID é um GUID que representa um processo de servidor para uma ou mais classes.</span><span class="sxs-lookup"><span data-stu-id="a970e-114">An AppID is a GUID that represents a server process for one or more classes.</span></span> <span data-ttu-id="a970e-115">Cada classe é associada a exatamente uma AppID, e as AppIDs só podem ser atribuídas a EXEs.</span><span class="sxs-lookup"><span data-stu-id="a970e-115">Each class is associated with exactly one AppID, and AppIDs can be assigned only to EXEs.</span></span> <span data-ttu-id="a970e-116">As DLLs não recebem AppID, a menos que estejam em execução em um substituto e, em seguida, é o processo substituto que tem a AppID.</span><span class="sxs-lookup"><span data-stu-id="a970e-116">DLLs do not get AppIDs unless they are running in a surrogate, and then it is the surrogate process that has the AppID.</span></span> <span data-ttu-id="a970e-117">Se várias DLLs forem carregadas em um substituto, cada substituto terá apenas uma AppID.</span><span class="sxs-lookup"><span data-stu-id="a970e-117">If multiple DLLs are loaded into a surrogate, each surrogate has only one AppID.</span></span>

<span data-ttu-id="a970e-118">Para alguns servidores COM, o código de registro gera uma AppID e coloca entradas no registro que mapeiam o AppID para o nome do executável.</span><span class="sxs-lookup"><span data-stu-id="a970e-118">For some COM servers, the registration code generates an AppID and places entries in the registry that map the AppID to the name of the executable.</span></span> <span data-ttu-id="a970e-119">Mas alguns servidores COM não fornecem essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="a970e-119">But some COM servers do not provide this functionality.</span></span> <span data-ttu-id="a970e-120">No entanto, se o código de registro do servidor adicionar uma entrada para \\ o% ServerCLSID} \\ [LocalServer32](localserver32.md) CLSID quando dcomcnfg.exe for executado, ele adicionará automaticamente uma AppID para o CLSID.</span><span class="sxs-lookup"><span data-stu-id="a970e-120">However, if the server's registration code adds an entry for HKCR\\CLSID{ServerCLSID}\\[LocalServer32](localserver32.md) when dcomcnfg.exe is run, it will automatically add an AppID for the CLSID.</span></span>

<span data-ttu-id="a970e-121">Para um cliente COM que não é um servidor, esse mapeamento não é criado porque o cliente nunca está registrado.</span><span class="sxs-lookup"><span data-stu-id="a970e-121">For a COM client that is not a server, this mapping is not created because the client is never registered.</span></span> <span data-ttu-id="a970e-122">Portanto, para definir a segurança usando a chave **AppID** , o cliente deve criar as entradas de Registro necessárias, seja por meio de programação usando as [funções de registro](/windows/desktop/SysInfo/registry-functions) ou usando o regedit.</span><span class="sxs-lookup"><span data-stu-id="a970e-122">Therefore, to set security using the **AppID** key, the client must create the necessary registry entries, either programmatically by using the [registry functions](/windows/desktop/SysInfo/registry-functions) or by using regedit.</span></span>

<span data-ttu-id="a970e-123">Se você decidir definir a segurança de todo o processo no registro sob a chave **AppID** , lembre-se de que há dois valores nomeados na chave **AppID** que você pode definir sem ter permissões de administrador:</span><span class="sxs-lookup"><span data-stu-id="a970e-123">If you decide to set process-wide security in the registry under the **AppID** key, be aware that there are two named values under the **AppID** key that you can set without having administrator permissions:</span></span>

-   [<span data-ttu-id="a970e-124">AccessPermission</span><span class="sxs-lookup"><span data-stu-id="a970e-124">AccessPermission</span></span>](accesspermission.md)
-   [<span data-ttu-id="a970e-125">AuthenticationLevel</span><span class="sxs-lookup"><span data-stu-id="a970e-125">AuthenticationLevel</span></span>](authenticationlevel.md)

<span data-ttu-id="a970e-126">Os valores **AuthenticationLevel** e **AccessPermission** são definidos de forma independente e têm valores padrão separados.</span><span class="sxs-lookup"><span data-stu-id="a970e-126">The **AuthenticationLevel** and **AccessPermission** values are set independently and have separate default values.</span></span> <span data-ttu-id="a970e-127">Se o valor de **AuthenticationLevel** não estiver presente, o valor de [LegacyAuthenticationLevel](legacyauthenticationlevel.md) será usado como o padrão.</span><span class="sxs-lookup"><span data-stu-id="a970e-127">If the **AuthenticationLevel** value is not present, the [LegacyAuthenticationLevel](legacyauthenticationlevel.md) value is used as the default.</span></span> <span data-ttu-id="a970e-128">Da mesma forma, se o valor de **AccessPermission** não estiver presente, o valor de [DefaultAccessPermission](defaultaccesspermission.md) será usado como o padrão.</span><span class="sxs-lookup"><span data-stu-id="a970e-128">Similarly, if the **AccessPermission** value is not present, the [DefaultAccessPermission](defaultaccesspermission.md) value is used as the default.</span></span> <span data-ttu-id="a970e-129">No entanto, os valores **AuthenticationLevel** e **AccessPermission** são inter-relacionados das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="a970e-129">However, the **AuthenticationLevel** and the **AccessPermission** values are interrelated in the following ways:</span></span>

-   <span data-ttu-id="a970e-130">Se **AuthenticationLevel** for None, os valores **AccessPermission** e **DefaultAccessPermission** serão ignorados para esse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a970e-130">If the **AuthenticationLevel** is none, the **AccessPermission** and **DefaultAccessPermission** values are ignored for that application.</span></span>
-   <span data-ttu-id="a970e-131">Se o **AuthenticationLevel** não estiver presente e **LegacyAuthenticationLevel** for None, os valores **AccessPermission** e **DefaultAccessPermission** serão ignorados para esse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="a970e-131">If the **AuthenticationLevel** is not present and the **LegacyAuthenticationLevel** is none, the **AccessPermission** and **DefaultAccessPermission** values are ignored for that application.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a970e-132">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a970e-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a970e-133">Definindo Process-Wide segurança</span><span class="sxs-lookup"><span data-stu-id="a970e-133">Setting Process-Wide Security</span></span>](setting-processwide-security.md)
</dt> </dl>

 

 