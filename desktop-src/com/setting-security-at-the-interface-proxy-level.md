---
title: Definindo a segurança no nível de proxy da interface
description: Às vezes, o cliente precisa de um controle refinado sobre a segurança em chamadas para interfaces específicas.
ms.assetid: 72925ca2-78c9-47d9-8760-63f6379326d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b38fe83e8ce8841cc9029808a6947ec67d4eaf4
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/21/2020
ms.locfileid: "105814138"
---
# <a name="setting-security-at-the-interface-proxy-level"></a><span data-ttu-id="66b13-103">Definindo a segurança no nível de proxy da interface</span><span class="sxs-lookup"><span data-stu-id="66b13-103">Setting Security at the Interface Proxy Level</span></span>

<span data-ttu-id="66b13-104">Às vezes, o cliente precisa de um controle refinado sobre a segurança em chamadas para interfaces específicas.</span><span class="sxs-lookup"><span data-stu-id="66b13-104">Sometimes the client needs fine-grained control over the security on calls to particular interfaces.</span></span> <span data-ttu-id="66b13-105">Por exemplo, a segurança pode ser definida em um nível baixo para o processo, mas as chamadas para uma interface específica podem exigir um nível de autenticação mais alto, como criptografia.</span><span class="sxs-lookup"><span data-stu-id="66b13-105">For example, security might be set at a low level for the process but calls to a particular interface might require a higher authentication level, such as encryption.</span></span> <span data-ttu-id="66b13-106">Os métodos da interface [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) permitem que o cliente altere as configurações de segurança associadas a chamadas para uma interface específica controlando as configurações de segurança no nível de proxy de interface.</span><span class="sxs-lookup"><span data-stu-id="66b13-106">The methods of the [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface allow the client to change the security settings associated with calls to a particular interface by controlling the security settings at the interface-proxy level.</span></span>

<span data-ttu-id="66b13-107">O cliente pode consultar um objeto existente para [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) e, em seguida, chamar o método [**IClientSecurity:: QueryBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) para descobrir quais são as configurações de segurança atuais para um determinado proxy de interface.</span><span class="sxs-lookup"><span data-stu-id="66b13-107">The client can query an existing object for [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) and then call the [**IClientSecurity::QueryBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) method to find out what the current security settings are for a particular interface proxy.</span></span> <span data-ttu-id="66b13-108">O método [**IClientSecurity:: setampla**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) pode ser usado para modificar as configurações de segurança de um proxy de interface individual no objeto antes de chamar um dos métodos da interface.</span><span class="sxs-lookup"><span data-stu-id="66b13-108">The [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) method can be used to modify the security settings for an individual interface proxy on the object before calling one of the interface's methods.</span></span> <span data-ttu-id="66b13-109">As novas configurações se aplicam a quaisquer chamadores futuros dessa interface específica.</span><span class="sxs-lookup"><span data-stu-id="66b13-109">The new settings apply to any future callers of this particular interface.</span></span> <span data-ttu-id="66b13-110">O método [**IClientSecurity:: CopyProxy**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) fornece uma maneira para o cliente copiar um proxy de interface para que as chamadas subsequentes para **setampla** na cópia não afetem os chamadores do proxy original.</span><span class="sxs-lookup"><span data-stu-id="66b13-110">The [**IClientSecurity::CopyProxy**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) method provides a way for the client to copy an interface proxy so that subsequent calls to **SetBlanket** on the copy do not affect callers of the original proxy.</span></span>

<span data-ttu-id="66b13-111">O seteleve [**normalmente é usado**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) para aumentar o nível de autenticação de um determinado proxy de interface para um nível mais alto de proteção de segurança.</span><span class="sxs-lookup"><span data-stu-id="66b13-111">[**SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) is commonly used to raise the authentication level for a particular interface proxy to a higher level of security protection.</span></span> <span data-ttu-id="66b13-112">No entanto, em algumas situações, também pode ser útil reduzir o nível de autenticação para um determinado proxy de interface.</span><span class="sxs-lookup"><span data-stu-id="66b13-112">However, in some situations, it might also be helpful to lower the authentication level for a particular interface proxy.</span></span> <span data-ttu-id="66b13-113">Por exemplo, suponha que o nível de autenticação padrão para o processo seja um valor diferente do RPC \_ C \_ Authn \_ nível \_ None e o cliente e o servidor estejam em domínios separados que não confiam uns nos outros.</span><span class="sxs-lookup"><span data-stu-id="66b13-113">For instance, suppose the default authentication level for the process is some value other than RPC\_C\_AUTHN\_LEVEL\_NONE and the client and server are in separate domains that do not trust each other.</span></span> <span data-ttu-id="66b13-114">Nesse caso, as chamadas para o servidor falharão, a menos que o cliente chame para reduzir o **nível de autenticação** para RPC \_ C \_ Authn \_ nível \_ None.</span><span class="sxs-lookup"><span data-stu-id="66b13-114">In this case, calls to the server will fail unless the client calls **SetBlanket** to lower the authentication level to RPC\_C\_AUTHN\_LEVEL\_NONE.</span></span>

<span data-ttu-id="66b13-115">Os clientes que usam a implementação padrão de [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) fornecidos pelo Gerenciador de proxy podem chamar as funções auxiliares [**CoQueryProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket)e [**CoCopyProxy**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) em vez de chamar os métodos **IClientSecurity** diretamente.</span><span class="sxs-lookup"><span data-stu-id="66b13-115">Clients using the default implementation of [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) provided by the proxy manager can call the [**CoQueryProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket), and [**CoCopyProxy**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) helper functions instead of calling **IClientSecurity** methods directly.</span></span> <span data-ttu-id="66b13-116">As funções auxiliares simplificam o código, mas são um pouco menos eficientes do que chamar os métodos **IClientSecurity** correspondentes diretamente.</span><span class="sxs-lookup"><span data-stu-id="66b13-116">The helper functions simplify the code but are slightly less efficient than calling the corresponding **IClientSecurity** methods directly.</span></span>

<span data-ttu-id="66b13-117">A interface [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) é implementada localmente para o cliente pelo Gerenciador de proxy.</span><span class="sxs-lookup"><span data-stu-id="66b13-117">The [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface is implemented locally for the client by the proxy manager.</span></span> <span data-ttu-id="66b13-118">Alguns objetos empacotados personalizados podem não dar suporte a **IClientSecurity**.</span><span class="sxs-lookup"><span data-stu-id="66b13-118">Some custom marshaled objects might not support **IClientSecurity**.</span></span>

<span data-ttu-id="66b13-119">O [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) funciona com todos os serviços de autenticação com suporte (atualmente, NTLMSSP, Schannel e o protocolo Kerberos V5).</span><span class="sxs-lookup"><span data-stu-id="66b13-119">[**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) works with all supported authentication services (currently NTLMSSP, Schannel, and the Kerberos v5 protocol).</span></span>

## <a name="related-topics"></a><span data-ttu-id="66b13-120">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="66b13-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="66b13-121">Definindo a segurança para aplicativos COM</span><span class="sxs-lookup"><span data-stu-id="66b13-121">Setting Security for COM Applications</span></span>](setting-security-for-com-applications.md)
</dt> </dl>

 

 