---
title: Protocolo Kerberos V5
description: Protocolo Kerberos V5
ms.assetid: a53a1edf-f374-4cbf-8050-7cde45284157
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68d78c4bdc457007c04ad66163e2ebfd7f5397f9
ms.sourcegitcommit: 3e70ae762629e244028b437420ed50b5850db4e3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/20/2020
ms.locfileid: "105812052"
---
# <a name="kerberos-v5-protocol"></a><span data-ttu-id="0dc87-103">Protocolo Kerberos V5</span><span class="sxs-lookup"><span data-stu-id="0dc87-103">Kerberos v5 Protocol</span></span>

<span data-ttu-id="0dc87-104">O protocolo de autenticação Kerberos V5 tem um identificador de serviço de autenticação do RPC \_ C \_ Authn \_ GSS \_ Kerberos.</span><span class="sxs-lookup"><span data-stu-id="0dc87-104">The Kerberos v5 authentication protocol has an authentication service identifier of RPC\_C\_AUTHN\_GSS\_KERBEROS.</span></span> <span data-ttu-id="0dc87-105">O protocolo Kerberos define como os clientes interagem com um serviço de autenticação de rede e foi padronizado pelo IETF (Internet Engineering Task Force) em setembro de 1993, no documento [RFC 1510](https://www.ietf.org/rfc/rfc1510.txt).</span><span class="sxs-lookup"><span data-stu-id="0dc87-105">The Kerberos protocol defines how clients interact with a network authentication service and was standardized by the Internet Engineering Task Force (IETF) in September 1993, in document [RFC 1510](https://www.ietf.org/rfc/rfc1510.txt).</span></span> <span data-ttu-id="0dc87-106">Os clientes obtêm tíquetes do centro de distribuição de chaves do Kerberos (KDC) e apresentam esses tíquetes para servidores quando as conexões são estabelecidas.</span><span class="sxs-lookup"><span data-stu-id="0dc87-106">Clients obtain tickets from the Kerberos Key Distribution Center (KDC), and they present these tickets to servers when connections are established.</span></span> <span data-ttu-id="0dc87-107">Os tíquetes Kerberos representam as credenciais de rede do cliente.</span><span class="sxs-lookup"><span data-stu-id="0dc87-107">Kerberos tickets represent the client's network credentials.</span></span>

<span data-ttu-id="0dc87-108">Como o NTLM, o protocolo Kerberos usa o nome de domínio, o nome de usuário e a senha para representar a identidade do cliente.</span><span class="sxs-lookup"><span data-stu-id="0dc87-108">Like NTLM, the Kerberos protocol uses the domain name, user name, and password to represent the client's identity.</span></span> <span data-ttu-id="0dc87-109">O tíquete Kerberos inicial obtido do KDC quando o usuário faz logon se baseia em um hash criptografado da senha do usuário.</span><span class="sxs-lookup"><span data-stu-id="0dc87-109">The initial Kerberos ticket obtained from the KDC when the user logs on is based on an encrypted hash of the user's password.</span></span> <span data-ttu-id="0dc87-110">Esse tíquete inicial está armazenado em cache.</span><span class="sxs-lookup"><span data-stu-id="0dc87-110">This initial ticket is cached.</span></span> <span data-ttu-id="0dc87-111">Quando o usuário tenta se conectar a um servidor, o protocolo Kerberos verifica o cache de tíquete para um tíquete válido para esse servidor.</span><span class="sxs-lookup"><span data-stu-id="0dc87-111">When the user tries to connect to a server, the Kerberos protocol checks the ticket cache for a valid ticket for that server.</span></span> <span data-ttu-id="0dc87-112">Se um não estiver disponível, o tíquete inicial para o usuário será enviado ao KDC junto com uma solicitação de um tíquete para o servidor especificado.</span><span class="sxs-lookup"><span data-stu-id="0dc87-112">If one is not available, the initial ticket for the user is sent to the KDC along with a request for a ticket for the specified server.</span></span> <span data-ttu-id="0dc87-113">Esse tíquete de sessão é adicionado ao cache e pode ser usado para se conectar ao mesmo servidor até que o tíquete expire.</span><span class="sxs-lookup"><span data-stu-id="0dc87-113">That session ticket is added to the cache, and it can be used to connect to the same server until the ticket expires.</span></span>

<span data-ttu-id="0dc87-114">Quando um servidor chama [**CoQueryClientBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryclientblanket) usando o protocolo Kerberos, o nome de domínio e o nome de usuário do cliente são retornados.</span><span class="sxs-lookup"><span data-stu-id="0dc87-114">When a server calls [**CoQueryClientBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryclientblanket) using the Kerberos protocol, the client's domain name and user name are returned.</span></span> <span data-ttu-id="0dc87-115">Quando um servidor chama [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), o token do cliente é retornado.</span><span class="sxs-lookup"><span data-stu-id="0dc87-115">When a server calls [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), the client's token is returned.</span></span> <span data-ttu-id="0dc87-116">Esses comportamentos são os mesmos que ao usar NTLM.</span><span class="sxs-lookup"><span data-stu-id="0dc87-116">These behaviors are the same as when using NTLM.</span></span>

<span data-ttu-id="0dc87-117">O protocolo Kerberos funciona nos limites do computador.</span><span class="sxs-lookup"><span data-stu-id="0dc87-117">The Kerberos protocol works across computer boundaries.</span></span> <span data-ttu-id="0dc87-118">Os computadores cliente e servidor devem estar em domínios e esses domínios devem ter uma relação de confiança.</span><span class="sxs-lookup"><span data-stu-id="0dc87-118">The client and server computers must both be in domains, and those domains must have a trust relationship.</span></span>

<span data-ttu-id="0dc87-119">O protocolo Kerberos requer autenticação mútua e dá suporte a ele remotamente.</span><span class="sxs-lookup"><span data-stu-id="0dc87-119">The Kerberos protocol requires mutual authentication and supports it remotely.</span></span> <span data-ttu-id="0dc87-120">O cliente deve especificar o nome principal do servidor e a identidade do servidor deve corresponder exatamente ao nome principal.</span><span class="sxs-lookup"><span data-stu-id="0dc87-120">The client must specify the principal name of the server, and the server's identity must match that principal name exactly.</span></span> <span data-ttu-id="0dc87-121">Se o cliente especificar **NULL** para o nome principal do servidor ou se o nome da entidade de segurança não corresponder ao servidor, a chamada falhará.</span><span class="sxs-lookup"><span data-stu-id="0dc87-121">If the client specifies **NULL** for the server's principal name or if the principal name doesn't match the server, the call will fail.</span></span>

<span data-ttu-id="0dc87-122">Com o protocolo Kerberos, os níveis de representação identificam, representam e delegam podem ser usados.</span><span class="sxs-lookup"><span data-stu-id="0dc87-122">With the Kerberos protocol, the impersonation levels identify, impersonate, and delegate can be used.</span></span> <span data-ttu-id="0dc87-123">Quando um servidor chama [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), o token retornado é válido fora do computador por um período de tempo entre 5 minutos e 8 horas.</span><span class="sxs-lookup"><span data-stu-id="0dc87-123">When a server calls [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), the token returned is valid off the computer for some time period between 5 minutes and 8 hours.</span></span> <span data-ttu-id="0dc87-124">Após esse tempo, ele pode ser usado somente no computador servidor.</span><span class="sxs-lookup"><span data-stu-id="0dc87-124">After this time, it can be used on the server computer only.</span></span> <span data-ttu-id="0dc87-125">Se um servidor for "Run as Activator" e a ativação for feita com o protocolo Kerberos, o token do servidor expirará entre 5 minutos e 8 horas após a ativação.</span><span class="sxs-lookup"><span data-stu-id="0dc87-125">If a server is "run as activator" and the activation is done with the Kerberos protocol, the server's token will expire between 5 minutes and 8 hours after activation.</span></span>

<span data-ttu-id="0dc87-126">O protocolo de autenticação Kerberos V5 implementado pelo WindowsÂ dá suporte ao [encobrimento](cloaking.md).</span><span class="sxs-lookup"><span data-stu-id="0dc87-126">The Kerberos v5 authentication protocol implemented by WindowsÂ supports [cloaking](cloaking.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="0dc87-127">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="0dc87-127">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0dc87-128">Pacotes de segurança e COM</span><span class="sxs-lookup"><span data-stu-id="0dc87-128">COM and Security Packages</span></span>](com-and-security-packages.md)
</dt> </dl>

 

 




