---
title: Desativando a segurança de ativação
description: Desativando a segurança de ativação
ms.assetid: 3474f8ad-f041-4886-ad39-ff0603c5c69e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7da3ebd7cc03d79fc38fbafe3bc652efc3499437
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104366757"
---
# <a name="turning-off-activation-security"></a><span data-ttu-id="93853-103">Desativando a segurança de ativação</span><span class="sxs-lookup"><span data-stu-id="93853-103">Turning Off Activation Security</span></span>

<span data-ttu-id="93853-104">Normalmente, a ativação usa as configurações de segurança padrão.</span><span class="sxs-lookup"><span data-stu-id="93853-104">Normally, activation uses default security settings.</span></span> <span data-ttu-id="93853-105">No entanto, você pode controlar a segurança de ativação especificando uma estrutura [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) , que é um membro da estrutura [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) que é passada para as funções de ativação.</span><span class="sxs-lookup"><span data-stu-id="93853-105">However, you can control activation security by specifying a [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure, which is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure that is passed to the activation functions.</span></span> <span data-ttu-id="93853-106">Se o cliente especificar um nível de autenticação de RPC \_ C \_ Authn \_ \_ no nível None na estrutura **COAUTHINFO** , a autenticação não será tentada.</span><span class="sxs-lookup"><span data-stu-id="93853-106">If the client specifies an authentication level of RPC\_C\_AUTHN\_LEVEL\_NONE in the **COAUTHINFO** structure, authentication is not attempted.</span></span> <span data-ttu-id="93853-107">Caso contrário, a ativação segura será tentada e, se a autenticação falhar, a ativação falhará.</span><span class="sxs-lookup"><span data-stu-id="93853-107">Otherwise, secure activation is attempted, and if authentication fails, activation fails.</span></span>

<span data-ttu-id="93853-108">Se o cliente não especificar uma estrutura [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) explícita e, em vez disso, definir o ponteiro como **NULL**, com tentará autenticar o cliente.</span><span class="sxs-lookup"><span data-stu-id="93853-108">If the client does not specify an explicit [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure and instead sets the pointer to **NULL**, COM will attempt to authenticate the client.</span></span> <span data-ttu-id="93853-109">Se não for possível autenticar o cliente, o COM verificará o descritor de segurança de permissão de inicialização para ver se há uma DACL **nula** ou uma ACL que permite o acesso a todos.</span><span class="sxs-lookup"><span data-stu-id="93853-109">If it cannot authenticate the client, COM checks the launch permission security descriptor to see whether there is a **NULL** DACL or an ACL that allows access to Everyone.</span></span> <span data-ttu-id="93853-110">Se essa verificação for realizada com sucesso, o servidor será iniciado.</span><span class="sxs-lookup"><span data-stu-id="93853-110">If this check succeeds, the server is launched.</span></span> <span data-ttu-id="93853-111">Portanto, mesmo que o cliente não especifique uma estrutura **COAUTHINFO**, a ativação não segura poderá ocorrer quando o servidor permitir.</span><span class="sxs-lookup"><span data-stu-id="93853-111">Therefore, even if the client does not specify a **COAUTHINFO** structure, unsecure activation may take place when the server allows it.</span></span>

> [!Note]  
> <span data-ttu-id="93853-112">Para permitir que usuários de rede não autenticados executem um aplicativo COM, as funções de aplicativo devem incluir o usuário anônimo.</span><span class="sxs-lookup"><span data-stu-id="93853-112">To allow unauthenticated network users to run a COM application, the application roles must include the Anonymous user.</span></span> <span data-ttu-id="93853-113">A partir do Windows Server 2003, por padrão, o usuário anônimo não está incluído no grupo Everyone.</span><span class="sxs-lookup"><span data-stu-id="93853-113">Starting with Windows Server 2003, by default, the Anonymous user is not included in the Everyone group.</span></span>

 

<span data-ttu-id="93853-114">Por que um cliente desejaria desativar a segurança de ativação explicitamente, embora a ativação não segura eventualmente ocorra se o servidor permitir?</span><span class="sxs-lookup"><span data-stu-id="93853-114">Why would a client want to turn off activation security explicitly even though unsecure activation will eventually take place if the server allows it?</span></span> <span data-ttu-id="93853-115">Como desativar explicitamente a segurança de ativação aumenta o desempenho quando o cliente não deseja ou precisa de verificações de segurança.</span><span class="sxs-lookup"><span data-stu-id="93853-115">Because explicitly turning off activation security increases performance when the client does not want or need security checks.</span></span>

<span data-ttu-id="93853-116">Os itens a seguir devem ser feitos para desativar explicitamente a segurança de ativação:</span><span class="sxs-lookup"><span data-stu-id="93853-116">The following things must be done to explicitly turn off activation security:</span></span>

-   <span data-ttu-id="93853-117">O cliente deve especificar um nível de autenticação de RPC \_ C \_ Authn \_ \_ no nível nenhum na estrutura [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) que seja membro da estrutura [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) fornecida para a função de ativação.</span><span class="sxs-lookup"><span data-stu-id="93853-117">The client must specify an authentication level of RPC\_C\_AUTHN\_LEVEL\_NONE in the [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure that is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure supplied to the activation function.</span></span>
-   <span data-ttu-id="93853-118">O cliente deve especificar um nível de representação de \_ Impersonate de nível de Imp de RPC C \_ \_ \_ na estrutura [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) que seja membro da estrutura [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) fornecida para a função de ativação.</span><span class="sxs-lookup"><span data-stu-id="93853-118">The client must specify an impersonation level of RPC\_C\_IMP\_LEVEL\_IMPERSONATE in the [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure that is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure supplied to the activation function.</span></span> <span data-ttu-id="93853-119">Se esse valor não for passado, você obterá o \_ servidor RPC S \_ \_ indisponível.</span><span class="sxs-lookup"><span data-stu-id="93853-119">If this value is not passed, you will get RPC\_S\_SERVER\_UNAVAILABLE.</span></span>
-   <span data-ttu-id="93853-120">O servidor deve especificar **todos** para **as permissões de inicialização padrão**.</span><span class="sxs-lookup"><span data-stu-id="93853-120">The server must specify **Everyone** for **Default Launch Permissions**.</span></span> <span data-ttu-id="93853-121">A maneira recomendada para executar essa tarefa é usar Dcomcnfg.exe da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="93853-121">The recommended way to perform this task is to use Dcomcnfg.exe as follows:</span></span>
    1.  <span data-ttu-id="93853-122">Execute Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="93853-122">Run Dcomcnfg.exe.</span></span>
    2.  <span data-ttu-id="93853-123">Na página **aplicativos** , selecione o aplicativo que representa o servidor.</span><span class="sxs-lookup"><span data-stu-id="93853-123">On the **Applications** page, select the application that represents the server.</span></span> <span data-ttu-id="93853-124">Clique no botão **Propriedades** (ou clique duas vezes no aplicativo selecionado).</span><span class="sxs-lookup"><span data-stu-id="93853-124">Click the **Properties** button (or double-click the selected application).</span></span>
    3.  <span data-ttu-id="93853-125">Na página de propriedades **segurança** , clique no botão **usar permissões de inicialização personalizadas** .</span><span class="sxs-lookup"><span data-stu-id="93853-125">On the **Security** property page, click the **Use Custom Launch Permissions** button.</span></span>
    4.  <span data-ttu-id="93853-126">Clique no botão **Editar** na área **permissões de inicialização** .</span><span class="sxs-lookup"><span data-stu-id="93853-126">Click the **Edit** button in the **Launch Permissions** area.</span></span>
    5.  <span data-ttu-id="93853-127">Na caixa de diálogo **permissões de valor do registro** , clique no botão **Adicionar** .</span><span class="sxs-lookup"><span data-stu-id="93853-127">In the **Registry Value Permissions** dialog box, click the **Add** button.</span></span>
    6.  <span data-ttu-id="93853-128">Selecione a entrada para **todos** na caixa de listagem.</span><span class="sxs-lookup"><span data-stu-id="93853-128">Select the entry for **Everyone** in the list box.</span></span>
    7.  <span data-ttu-id="93853-129">Na caixa **de listagem tipo de acesso** , escolha **Permitir inicialização**.</span><span class="sxs-lookup"><span data-stu-id="93853-129">In the **Type of Access** list box, choose **Allow Launch**.</span></span>
    8.  <span data-ttu-id="93853-130">Clique no botão **OK**.</span><span class="sxs-lookup"><span data-stu-id="93853-130">Click the **OK** button.</span></span>

> [!Note]  
> <span data-ttu-id="93853-131">No Windows Server 2003, o recurso de autenticação para o aplicativo de sistema COM+ inclui o valor EOAC \_ Disable \_ AAA.</span><span class="sxs-lookup"><span data-stu-id="93853-131">In Windows Server 2003, the authentication capability for the COM+ system application includes the value EOAC\_DISABLE\_AAA.</span></span> <span data-ttu-id="93853-132">Esse valor, que desabilita as ativações de Activate-as-Activator (AAA), é usado na chamada [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) ao iniciar o aplicativo do sistema.</span><span class="sxs-lookup"><span data-stu-id="93853-132">This value, which disables activate-as-activator (AAA) activations, is used in the [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) call when launching the system application.</span></span> <span data-ttu-id="93853-133">Definir o recurso de autenticação como EOAC \_ Disable \_ AAA permite que um aplicativo executado em uma conta com privilégios (como LocalSystem) ajude a impedir que sua identidade seja usada para iniciar componentes não confiáveis.</span><span class="sxs-lookup"><span data-stu-id="93853-133">Setting the authentication capability to EOAC\_DISABLE\_AAA allows an application that runs under a privileged account (such as LocalSystem) to help prevent its identity from being used to launch untrusted components.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="93853-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="93853-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="93853-135">Desativando a segurança da chamada</span><span class="sxs-lookup"><span data-stu-id="93853-135">Turning Off Call Security</span></span>](turning-off-call-security.md)
</dt> </dl>

 

 