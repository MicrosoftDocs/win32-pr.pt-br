---
title: Negociação em cobertura de segurança
description: Negociação em cobertura de segurança
ms.assetid: 5a01912d-611c-4a6e-ab9d-0243cba331f1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e51407de908eaaf0f79eea452046f8e424ccf900
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104008439"
---
# <a name="security-blanket-negotiation"></a><span data-ttu-id="e28c8-103">Negociação em cobertura de segurança</span><span class="sxs-lookup"><span data-stu-id="e28c8-103">Security Blanket Negotiation</span></span>

<span data-ttu-id="e28c8-104">Uma ampla segurança é um grupo de valores que descrevem as configurações de segurança que se aplicam a todos os proxies em um processo ou apenas a um determinado proxy de interface.</span><span class="sxs-lookup"><span data-stu-id="e28c8-104">A security blanket is a group of values that describe the security settings that apply to all proxies in a process or to just a particular interface proxy.</span></span> <span data-ttu-id="e28c8-105">Uma ampla segurança inclui os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="e28c8-105">A security blanket comprises the following values:</span></span>

-   <span data-ttu-id="e28c8-106">Serviço de autenticação</span><span class="sxs-lookup"><span data-stu-id="e28c8-106">Authentication service</span></span>
-   <span data-ttu-id="e28c8-107">Serviço de autorização</span><span class="sxs-lookup"><span data-stu-id="e28c8-107">Authorization service</span></span>
-   <span data-ttu-id="e28c8-108">Nome da entidade de segurança</span><span class="sxs-lookup"><span data-stu-id="e28c8-108">Principal name</span></span>
-   <span data-ttu-id="e28c8-109">Nível de autenticação</span><span class="sxs-lookup"><span data-stu-id="e28c8-109">Authentication level</span></span>
-   <span data-ttu-id="e28c8-110">Nível de representação</span><span class="sxs-lookup"><span data-stu-id="e28c8-110">Impersonation level</span></span>
-   <span data-ttu-id="e28c8-111">Identidade de autenticação</span><span class="sxs-lookup"><span data-stu-id="e28c8-111">Authentication identity</span></span>
-   <span data-ttu-id="e28c8-112">Funcionalidades</span><span class="sxs-lookup"><span data-stu-id="e28c8-112">Capabilities</span></span>
-   <span data-ttu-id="e28c8-113">Uma ACL (lista de controle de acesso) (somente servidores)</span><span class="sxs-lookup"><span data-stu-id="e28c8-113">An access control list (ACL) (servers only)</span></span>

<span data-ttu-id="e28c8-114">A negociação de cobertura ampla é o processo que o COM usa para escolher as configurações de segurança para um proxy quando ele é criado.</span><span class="sxs-lookup"><span data-stu-id="e28c8-114">Security blanket negotiation is the process that COM uses to choose the security settings for a proxy when it is created.</span></span> <span data-ttu-id="e28c8-115">Esse processo envolve a comparação da cobertura de segurança do servidor com a cobertura de segurança do cliente e o uso desses valores para criar uma ampla cobertura de segurança padrão para o proxy.</span><span class="sxs-lookup"><span data-stu-id="e28c8-115">This process involves comparing the server's security blanket with the client's security blanket and using those values to create an appropriate default security blanket for the proxy.</span></span> <span data-ttu-id="e28c8-116">Os parágrafos a seguir explicam de onde vêm as coberturas de segurança do cliente e do servidor e descrevem como o COM negocia a cobertura de segurança para o proxy usando as amplas de segurança do cliente e do servidor.</span><span class="sxs-lookup"><span data-stu-id="e28c8-116">The following paragraphs explain where the client's and the server's security blankets come from and describe how COM negotiates the security blanket for the proxy using the client's and server's security blankets.</span></span>

<span data-ttu-id="e28c8-117">O cliente e o servidor podem chamar [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) para especificar suas respectivas amplas de segurança.</span><span class="sxs-lookup"><span data-stu-id="e28c8-117">The client and the server can each call [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) to specify their respective security blankets.</span></span> <span data-ttu-id="e28c8-118">Se um aplicativo não chamar **CoInitializeSecurity** explicitamente, o com o chamará implicitamente para o aplicativo, usando valores padrão apropriados.</span><span class="sxs-lookup"><span data-stu-id="e28c8-118">If an application doesn't call **CoInitializeSecurity** explicitly, COM calls it implicitly for the application, using appropriate default values.</span></span> <span data-ttu-id="e28c8-119">Para obter mais informações sobre esses valores padrão, consulte [padrões de segurança com](com-security-defaults.md).</span><span class="sxs-lookup"><span data-stu-id="e28c8-119">For more information about these default values, see [COM Security Defaults](com-security-defaults.md).</span></span>

<span data-ttu-id="e28c8-120">Alguns parâmetros para [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) se aplicam quando o aplicativo é um servidor e alguns se aplicam quando o aplicativo é um cliente.</span><span class="sxs-lookup"><span data-stu-id="e28c8-120">Some parameters to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) apply when the application is a server, and some apply when the application is a client.</span></span> <span data-ttu-id="e28c8-121">Quando o aplicativo está agindo como um servidor, esses parâmetros são relevantes: uma ACL, uma lista de tuplas do serviço de autenticação/autorização do nome da entidade de segurança e um nível de autenticação.</span><span class="sxs-lookup"><span data-stu-id="e28c8-121">When the application is acting as a server, these parameters are relevant: an ACL, a list of authentication service/authorization service/principal name tuples, and an authentication level.</span></span> <span data-ttu-id="e28c8-122">A chamada de um servidor para **CoInitializeSecurity**, implícita ou explícita, determina a cobertura de segurança do servidor, que permanece corrigida.</span><span class="sxs-lookup"><span data-stu-id="e28c8-122">A server's call to **CoInitializeSecurity**, whether implicit or explicit, determines the server's security blanket, which remains fixed.</span></span>

<span data-ttu-id="e28c8-123">Quando o aplicativo está agindo como um cliente, os valores a seguir passados para [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) são relevantes: um nível de autenticação, um nível de representação, a identidade de autenticação e os recursos.</span><span class="sxs-lookup"><span data-stu-id="e28c8-123">When the application is acting as a client, the following values passed to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) are relevant: an authentication level, an impersonation level, the authentication identity, and capabilities.</span></span> <span data-ttu-id="e28c8-124">A chamada implícita ou explícita de um cliente para **CoInitializeSecurity** indica a ampla cobertura de segurança que o cliente deseja.</span><span class="sxs-lookup"><span data-stu-id="e28c8-124">A client's implicit or explicit call to **CoInitializeSecurity** indicates the security blanket that the client wants.</span></span>

<span data-ttu-id="e28c8-125">Quando um proxy é criado, o COM usa os valores especificados pela cobertura de segurança do servidor e a cobertura de segurança do cliente para negociar uma cobertura de segurança padrão apropriada para o proxy.</span><span class="sxs-lookup"><span data-stu-id="e28c8-125">When a proxy is created, COM uses the values specified by the server's security blanket and the client's security blanket to negotiate a default security blanket that is appropriate for the proxy.</span></span> <span data-ttu-id="e28c8-126">COM escolhe um serviço de autenticação que funciona no cliente e no servidor.</span><span class="sxs-lookup"><span data-stu-id="e28c8-126">COM picks an authentication service that works on both the client and server.</span></span> <span data-ttu-id="e28c8-127">O serviço de autorização e o nome da entidade de segurança são escolhidos para trabalhar com o serviço de autenticação.</span><span class="sxs-lookup"><span data-stu-id="e28c8-127">The authorization service and principal name are chosen to work with the authentication service.</span></span> <span data-ttu-id="e28c8-128">Para o nível de autenticação, COM escolhe o maior dos níveis de autenticação especificados pelo cliente e o servidor.</span><span class="sxs-lookup"><span data-stu-id="e28c8-128">For the authentication level, COM chooses the higher of the authentication levels specified by the client and the server.</span></span> <span data-ttu-id="e28c8-129">O nível de representação e os recursos escolhidos por COM são aqueles especificados pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="e28c8-129">The impersonation level and the capabilities chosen by COM are the ones specified by the client.</span></span> <span data-ttu-id="e28c8-130">A identidade de autenticação é aquela especificada pelo cliente para o serviço de autenticação escolhido.</span><span class="sxs-lookup"><span data-stu-id="e28c8-130">The authentication identity is the one specified by the client for the chosen authentication service.</span></span>

<span data-ttu-id="e28c8-131">Depois que a cobertura de segurança padrão for computada, seus valores serão atribuídos ao proxy recém-criado.</span><span class="sxs-lookup"><span data-stu-id="e28c8-131">Once the default security blanket has been computed, its values are assigned to the newly created proxy.</span></span> <span data-ttu-id="e28c8-132">O cliente pode substituir as configurações de segurança para o proxy chamando [**IClientSecurity:: setampla**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span><span class="sxs-lookup"><span data-stu-id="e28c8-132">The client can override the security settings for the proxy by calling [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span></span> <span data-ttu-id="e28c8-133">Os valores especificados para **setampla** não são negociados; Eles são simplesmente atribuídos ao proxy especificado.</span><span class="sxs-lookup"><span data-stu-id="e28c8-133">The values specified to **SetBlanket** are not negotiated; they are simply assigned to the specified proxy.</span></span> <span data-ttu-id="e28c8-134">No entanto, se os parâmetros padrão (como padrão de nível de imp do RPC \_ C \_ \_ \_ ) forem passados para setapartment, o com usará o algoritmo de negociação ampla de segurança descrito anteriormente para calcular os parâmetros padrão. </span><span class="sxs-lookup"><span data-stu-id="e28c8-134">However, if default parameters (such as RPC\_C\_IMP\_LEVEL\_DEFAULT) are passed to **SetBlanket**, COM uses the previously described security blanket negotiation algorithm to compute the default parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e28c8-135">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="e28c8-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e28c8-136">Segurança em COM</span><span class="sxs-lookup"><span data-stu-id="e28c8-136">Security in COM</span></span>](security-in-com.md)
</dt> </dl>

 

 