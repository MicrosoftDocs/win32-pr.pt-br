---
description: Camadas de API (Direct3D 10)
ms.assetid: 19c81383-6ac7-49ea-98a3-bf761a32ab40
title: Camadas de API (Direct3D 10)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4427083bdcaf389c4b01b590a1bc3fef7eb878b4
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104370388"
---
# <a name="api-layers-direct3d-10"></a><span data-ttu-id="42974-103">Camadas de API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="42974-103">API Layers (Direct3D 10)</span></span>

<span data-ttu-id="42974-104">O tempo de execução do Direct3D 10 é construído com camadas, começando com a funcionalidade básica no núcleo e criando a funcionalidade opcional e auxiliar de desenvolvedor em camadas externas.</span><span class="sxs-lookup"><span data-stu-id="42974-104">The Direct3D 10 runtime is constructed with layers, starting with the basic functionality at the core and building optional and developer-assist functionality in outer layers.</span></span>

## <a name="core-layer"></a><span data-ttu-id="42974-105">Camada principal</span><span class="sxs-lookup"><span data-stu-id="42974-105">Core Layer</span></span>

<span data-ttu-id="42974-106">A camada principal existe por padrão; fornecendo um mapeamento muito fino entre a API e o driver de dispositivo, minimizando a sobrecarga para chamadas de alta frequência.</span><span class="sxs-lookup"><span data-stu-id="42974-106">The core layer exists by default; providing a very thin mapping between the API and the device driver, minimizing overhead for high-frequency calls.</span></span> <span data-ttu-id="42974-107">Como a camada principal é essencial para o desempenho, ela executa apenas a validação crítica.</span><span class="sxs-lookup"><span data-stu-id="42974-107">As the core layer is essential for performance, it only performs critical validation.</span></span>

<span data-ttu-id="42974-108">As camadas restantes são opcionais.</span><span class="sxs-lookup"><span data-stu-id="42974-108">The remaining layers are optional.</span></span> <span data-ttu-id="42974-109">Como regra geral, as camadas adicionam funcionalidade, mas não modificam o comportamento existente.</span><span class="sxs-lookup"><span data-stu-id="42974-109">As a general rule, layers add functionality, but do not modify existing behavior.</span></span> <span data-ttu-id="42974-110">Por exemplo, as funções principais terão os mesmos valores de retorno independentes da camada de depuração que está sendo instanciada, embora a saída de depuração adicional possa ser fornecida se a camada de depuração for instanciada.</span><span class="sxs-lookup"><span data-stu-id="42974-110">For example, core functions will have the same return values independent of the debug layer being instantiated, although additional debug output may be provided if the debug layer is instantiated.</span></span>

<span data-ttu-id="42974-111">Crie camadas quando um dispositivo for criado chamando [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) e fornecendo um ou mais valores de [**\_ sinalizador de \_ dispositivo \_ d3d10 Create**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag) .</span><span class="sxs-lookup"><span data-stu-id="42974-111">Create layers when a device is created by calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) and supplying one or more [**D3D10\_CREATE\_DEVICE\_FLAG**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag) values.</span></span>

## <a name="debug-layer"></a><span data-ttu-id="42974-112">Camada de depuração</span><span class="sxs-lookup"><span data-stu-id="42974-112">Debug Layer</span></span>

<span data-ttu-id="42974-113">A camada de depuração fornece um parâmetro adicional e validação de consistência (como validação de vínculo de sombreador e vinculação de recursos, validação de consistência de parâmetro e descrições de erro de relatório).</span><span class="sxs-lookup"><span data-stu-id="42974-113">The debug layer provides extensive additional parameter and consistency validation (such as validating shader linkage and resource binding, validating parameter consistency, and reporting error descriptions).</span></span> <span data-ttu-id="42974-114">A saída gerada pela camada de depuração consiste em uma fila de cadeias de caracteres que são acessíveis usando a [**interface ID3D10InfoQueue**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (consulte [Personalizar a saída de depuração com ID3D10InfoQueue (Direct3D 10)](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)).</span><span class="sxs-lookup"><span data-stu-id="42974-114">The output generated by the debug layer consists of a queue of strings which are accessible using the [**ID3D10InfoQueue Interface**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (see [Customize Debug Output with ID3D10InfoQueue (Direct3D 10)](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)).</span></span> <span data-ttu-id="42974-115">Os erros gerados pela camada principal são realçados com avisos pela camada de depuração.</span><span class="sxs-lookup"><span data-stu-id="42974-115">Errors generated by the core layer are highlighted with warnings by the debug layer.</span></span>

<span data-ttu-id="42974-116">Para criar um dispositivo que dê suporte à camada de depuração, você deve instalar o SDK do DirectX (para obter D3D10SDKLayers.DLL) e, em seguida, especificar o \_ sinalizador de depuração do dispositivo d3d10 Create \_ \_ ao chamar [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span><span class="sxs-lookup"><span data-stu-id="42974-116">To create a device that supports the debug layer, you must install the DirectX SDK (to get D3D10SDKLayers.DLL), and then specify the D3D10\_CREATE\_DEVICE\_DEBUG flag when calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span></span> <span data-ttu-id="42974-117">É claro que a execução de um aplicativo com a camada de depuração será consideravelmente mais lenta.</span><span class="sxs-lookup"><span data-stu-id="42974-117">Of course, running an application with the debug layer will be substantially slower.</span></span> <span data-ttu-id="42974-118">Para habilitar/desabilitar mensagens de depuração para APIs D3DX10, chame [**D3DX10DebugMute**](d3dx10debugmute.md).</span><span class="sxs-lookup"><span data-stu-id="42974-118">To enable/disable debug messages for D3DX10 APIs, call [**D3DX10DebugMute**](d3dx10debugmute.md).</span></span>

<span data-ttu-id="42974-119">Quando a camada de depuração lista vazamentos de memória, ela gera uma lista de ponteiros de interface de objeto junto com seus nomes amigáveis.</span><span class="sxs-lookup"><span data-stu-id="42974-119">When the debug layer lists memory leaks, it outputs a list of object interface pointers along with their friendly names.</span></span> <span data-ttu-id="42974-120">O nome amigável padrão é " &lt; sem nome &gt; ".</span><span class="sxs-lookup"><span data-stu-id="42974-120">The default friendly name is "&lt;unnamed&gt;".</span></span> <span data-ttu-id="42974-121">Você pode definir o nome amigável usando o método [**ID3D10DeviceChild:: SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) e o GUID **WKPDID \_ D3DDebugObjectName** que está em D3Dcommon. h.</span><span class="sxs-lookup"><span data-stu-id="42974-121">You can set the friendly name by using the [**ID3D10DeviceChild::SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) method and the **WKPDID\_D3DDebugObjectName** GUID that is in D3Dcommon.h.</span></span> <span data-ttu-id="42974-122">Por exemplo, para nomear pTexture com um nome SDKLayer de mytexture.jpg, use o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="42974-122">For example, to name pTexture with a SDKLayer name of mytexture.jpg, use the following code:</span></span>


```
const char c_szName[] = "mytexture.jpg";
pTexture->SetPrivateData( WKPDID_D3DDebugObjectName, sizeof( c_szName ) - 1, c_szName );
```



<span data-ttu-id="42974-123">Normalmente, você deve compilar essas chamadas fora de sua versão de produção.</span><span class="sxs-lookup"><span data-stu-id="42974-123">Typically, you should compile these calls out of your production version.</span></span>

## <a name="switch-to-reference-layer"></a><span data-ttu-id="42974-124">Alternar para a camada de referência</span><span class="sxs-lookup"><span data-stu-id="42974-124">Switch-to-Reference Layer</span></span>

<span data-ttu-id="42974-125">Essa camada permite que um aplicativo faça a transição entre um dispositivo de hardware (HAL) e uma referência ou um dispositivo de software (REF).</span><span class="sxs-lookup"><span data-stu-id="42974-125">This layer enables an application to transition between a hardware device (HAL) and a reference or software device (REF).</span></span> <span data-ttu-id="42974-126">Para alternar um dispositivo, você deve primeiro criar um dispositivo que dê suporte à camada de switch-to-reference (consulte [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)) e, em seguida, chame [**ID3D10SwitchToRef:: SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span><span class="sxs-lookup"><span data-stu-id="42974-126">To switch a device, you must first create a device that supports the switch-to-reference layer (see [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)) and then call [**ID3D10SwitchToRef::SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span></span>

<span data-ttu-id="42974-127">Todos os Estados, recursos e objetos do dispositivo são mantidos por meio desta transição de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="42974-127">All device states, resources and objects are maintained through this device transition.</span></span> <span data-ttu-id="42974-128">No entanto, às vezes não é possível corresponder exatamente aos dados do recurso.</span><span class="sxs-lookup"><span data-stu-id="42974-128">However, it is sometimes not possible to exactly match resource data.</span></span> <span data-ttu-id="42974-129">Isso se deve ao fato de que algumas informações estão disponíveis para um dispositivo de hardware que não está disponível para um dispositivo de referência.</span><span class="sxs-lookup"><span data-stu-id="42974-129">This is due to the fact that some information is available to a hardware device that is not available to a reference device.</span></span>

<span data-ttu-id="42974-130">Praticamente todos os aplicativos em tempo real usam a implementação de HAL do pipeline.</span><span class="sxs-lookup"><span data-stu-id="42974-130">Virtually all real-time applications use the HAL implementation of the pipeline.</span></span> <span data-ttu-id="42974-131">Quando o pipeline é alternado de um dispositivo de hardware para um dispositivo de referência, as operações de renderização são feitas simultaneamente no hardware e no software.</span><span class="sxs-lookup"><span data-stu-id="42974-131">When the pipeline is switched from a hardware device to a reference device, rendering operations are done simultaneously in both hardware and software.</span></span> <span data-ttu-id="42974-132">Como o dispositivo de software está sendo renderizado, ele exigirá que os recursos sejam baixados na memória do sistema.</span><span class="sxs-lookup"><span data-stu-id="42974-132">As the software device is rendering, it will require that resources are downloaded to system memory.</span></span> <span data-ttu-id="42974-133">Isso pode exigir que outros recursos armazenados em cache na memória do sistema sejam removidos para liberar espaço.</span><span class="sxs-lookup"><span data-stu-id="42974-133">This may require other resources cached in system memory to be evicted to make room.</span></span>

> [!Note]  
> <span data-ttu-id="42974-134">Esse recurso de camada para referência só tem suporte no Direct3D 10 e no Direct3D 10,1 e não tem mais suporte no Direct3D 11 e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="42974-134">This switch-to-reference-layer feature is supported only in Direct3D 10 and Direct3D 10.1, and is no longer supported in Direct3D 11 and later versions.</span></span>

 

## <a name="thread-safe-layer"></a><span data-ttu-id="42974-135">Thread-Safe camada</span><span class="sxs-lookup"><span data-stu-id="42974-135">Thread-Safe Layer</span></span>

<span data-ttu-id="42974-136">Essa camada foi projetada para permitir que aplicativos multi-threaded acessem o dispositivo de vários threads.</span><span class="sxs-lookup"><span data-stu-id="42974-136">This layer is designed to allow multi-threaded applications to access the device from multiple threads.</span></span>

<span data-ttu-id="42974-137">Um aplicativo do Direct3D 10 pode controlar uma sincronização de dispositivo usando funções de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="42974-137">A Direct3D 10 application can control a device synchronization using device functions.</span></span> <span data-ttu-id="42974-138">Isso permite que um aplicativo habilite/desabilite seções críticas (habilitando/Desabilitando temporariamente a proteção multithreading) e execute/Libere um bloqueio de seção crítica em vários pontos de entrada da API do Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="42974-138">This enables an application to enable/disable critical sections (temporarily enabling/disabling multithreading protection), and take/release a critical-section lock over multiple Direct3D 10 API entry points.</span></span> <span data-ttu-id="42974-139">A camada thread-safe é habilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="42974-139">The thread-safe layer is enabled by default.</span></span> <span data-ttu-id="42974-140">Para aplicativos de thread único, a camada thread-safe não tem impacto sobre o desempenho.</span><span class="sxs-lookup"><span data-stu-id="42974-140">For single-threaded applications, the thread-safe layer has no impact on performance.</span></span>



|                                                                                                                                             |
|---------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="42974-141">Diferenças entre o Direct3D 9 e o Direct3D 10:</span><span class="sxs-lookup"><span data-stu-id="42974-141">Differences between Direct3D 9 and Direct3D 10:</span></span><br/> <span data-ttu-id="42974-142">Ao contrário do Direct3D 9, o padrão da API do Direct3D 10 é totalmente seguro para thread.</span><span class="sxs-lookup"><span data-stu-id="42974-142">Unlike Direct3D 9, the Direct3D 10 API defaults to fully thread-safe.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="42974-143">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="42974-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="42974-144">Recursos de API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="42974-144">API Features (Direct3D 10)</span></span>](d3d10-graphics-programming-guide-api-features.md)
</dt> </dl>

 

 




