---
title: Usando a recuperação e reinicialização do aplicativo
description: Um aplicativo pode usar a recuperação e reinicialização do aplicativo (ARR) para salvar dados e informações de estado antes que o aplicativo seja encerrado devido a uma exceção sem tratamento ou quando o aplicativo para de responder. O aplicativo também será reiniciado, se solicitado.
ms.assetid: 28cbb4c0-a287-4302-b3a9-daddc69adb40
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b0d5bf0b9bd0e0f6cc257ee785ab5df6febc8fef
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103823803"
---
# <a name="using-application-recovery-and-restart"></a><span data-ttu-id="55462-104">Usando a recuperação e reinicialização do aplicativo</span><span class="sxs-lookup"><span data-stu-id="55462-104">Using Application Recovery and Restart</span></span>

<span data-ttu-id="55462-105">Um aplicativo pode usar a recuperação e reinicialização do aplicativo (ARR) para salvar dados e informações de estado antes que o aplicativo seja encerrado devido a uma exceção sem tratamento ou quando o aplicativo para de responder.</span><span class="sxs-lookup"><span data-stu-id="55462-105">An application can use Application Recovery and Restart (ARR) to save data and state information before the application exits due to an unhandled exception or when the application stops responding.</span></span> <span data-ttu-id="55462-106">O aplicativo também será reiniciado, se solicitado.</span><span class="sxs-lookup"><span data-stu-id="55462-106">The application is also restarted, if requested.</span></span>

<span data-ttu-id="55462-107">Quando você se registra para recuperação ou reinicialização, as informações de registro são adicionadas ao processo.</span><span class="sxs-lookup"><span data-stu-id="55462-107">When you register for recovery or restart, the registration information is added to the process.</span></span> <span data-ttu-id="55462-108">[Relatório de erros do Windows (WER)](/windows/desktop/wer/windows-error-reporting) usa as informações de registro para chamar o retorno de chamada de recuperação e reiniciar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="55462-108">[Windows Error Reporting (WER)](/windows/desktop/wer/windows-error-reporting) uses the registration information to call your recovery callback and restart your application.</span></span> <span data-ttu-id="55462-109">Por exemplo, se você se registrar para recuperação e seu aplicativo encontrar uma exceção sem tratamento, o WER exibirá uma caixa de diálogo para o usuário que dá ao usuário a opção de verificar uma solução online, fechar o programa ou depurar o programa.</span><span class="sxs-lookup"><span data-stu-id="55462-109">For example, if you register for recovery and your application encounters an unhandled exception, WER displays a dialog to the user that gives the user the option of checking for a solution online, closing the program, or debugging the program.</span></span> <span data-ttu-id="55462-110">Se o usuário optar por verificar uma solução ou fechar o programa, o WER chamará o retorno de chamada registrado e dará ao aplicativo a oportunidade de salvar dados e informações de estado.</span><span class="sxs-lookup"><span data-stu-id="55462-110">If the user chooses to either check for a solution or close the program, WER calls the registered callback and gives the application the chance to save data and state information.</span></span> <span data-ttu-id="55462-111">Quando a recuperação for concluída, o aplicativo será encerrado.</span><span class="sxs-lookup"><span data-stu-id="55462-111">When the recovery is complete, the application is terminated.</span></span>

<span data-ttu-id="55462-112">Se você se registrar para reinicialização e seu aplicativo encontrar uma exceção sem tratamento, o WER exibirá a mesma caixa de diálogo para o usuário, mas dará a opção de reiniciar o programa em vez de fechar o programa.</span><span class="sxs-lookup"><span data-stu-id="55462-112">If you register for restart and your application encounters an unhandled exception, WER displays the same dialog to the user but gives the option of restarting the program instead of closing the program.</span></span> <span data-ttu-id="55462-113">Se você se registrar para recuperação e reinicialização, a recuperação ocorre primeiro; o aplicativo é então encerrado e reiniciado.</span><span class="sxs-lookup"><span data-stu-id="55462-113">If you register for both recovery and restart, recovery occurs first; the application is then terminated and restarted.</span></span>

<span data-ttu-id="55462-114">Um aplicativo sem resposta é tratado de maneira semelhante.</span><span class="sxs-lookup"><span data-stu-id="55462-114">An unresponsive application is handled in a similar fashion.</span></span> <span data-ttu-id="55462-115">Um aplicativo é considerado sem resposta se não responder a mensagens do Windows por cinco segundos e o usuário tentar interagir com o aplicativo; o usuário verá (não respondendo) na barra de título.</span><span class="sxs-lookup"><span data-stu-id="55462-115">An application is considered unresponsive if it does not respond to Windows messages for five seconds and the user then tries to interact with the application; the user will see (Not Responding) in the title bar.</span></span> <span data-ttu-id="55462-116">O WER é ativado quando o usuário clica no botão fechar sistema.</span><span class="sxs-lookup"><span data-stu-id="55462-116">WER is activated when the user clicks the system close button.</span></span>

<span data-ttu-id="55462-117">Você deve se registrar para recuperação ou reinicialização, ou remover o registro, antes que o aplicativo fique sem resposta ou encontre uma exceção sem tratamento.</span><span class="sxs-lookup"><span data-stu-id="55462-117">You must register for recovery or restart, or remove the registration, before the application becomes unresponsive or encounters an unhandled exception.</span></span> <span data-ttu-id="55462-118">No entanto, em seu retorno de chamada de recuperação, você pode alterar a linha de comando de reinicialização.</span><span class="sxs-lookup"><span data-stu-id="55462-118">However, in your recovery callback, you can change the restart command line.</span></span>

<span data-ttu-id="55462-119">Para obter detalhes sobre o registro para recuperação ou reinicialização, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="55462-119">For details on registering for recovery or restart, see the following topics:</span></span>

-   [<span data-ttu-id="55462-120">Registrando para recuperação de aplicativo</span><span class="sxs-lookup"><span data-stu-id="55462-120">Registering for Application Recovery</span></span>](registering-for-application-recovery.md)
-   [<span data-ttu-id="55462-121">Registrando para reinicialização do aplicativo</span><span class="sxs-lookup"><span data-stu-id="55462-121">Registering for Application Restart</span></span>](registering-for-application-restart.md)

<span data-ttu-id="55462-122">Para obter exemplos que implementam os recursos de recuperação e reinicialização, consulte os exemplos de AppRecovery e AppRestart no SDK do Windows localizado na \\ pasta WinBase WindowsErrorReporting.</span><span class="sxs-lookup"><span data-stu-id="55462-122">For samples that implement the recovery and restart features, see the AppRecovery and AppRestart samples in the Windows SDK located in the WinBase\\WindowsErrorReporting folder.</span></span>

 

 