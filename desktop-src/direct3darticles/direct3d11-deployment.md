---
title: Implantação do Direct3D 11 para desenvolvedores de jogos
description: Este artigo descreve como implantar os componentes do Direct3D 11 em um sistema, se necessário.
ms.assetid: 1fd43638-0d67-4a94-3be6-8789095f491e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd935aedee23ba731bc74e52c0773e6f02e5b5fc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104162371"
---
# <a name="direct3d-11-deployment-for-game-developers"></a><span data-ttu-id="f62e5-103">Implantação do Direct3D 11 para desenvolvedores de jogos</span><span class="sxs-lookup"><span data-stu-id="f62e5-103">Direct3D 11 deployment for game developers</span></span>

<span data-ttu-id="f62e5-104">Este artigo descreve como implantar os componentes do Direct3D 11 em um sistema, se necessário.</span><span class="sxs-lookup"><span data-stu-id="f62e5-104">This article describes how to deploy the Direct3D 11 components on a system if necessary.</span></span>

-   [<span data-ttu-id="f62e5-105">Visão geral</span><span class="sxs-lookup"><span data-stu-id="f62e5-105">Overview</span></span>](#overview)
-   [<span data-ttu-id="f62e5-106">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="f62e5-106">Direct3D 11.3</span></span>](#direct3d-113)
-   [<span data-ttu-id="f62e5-107">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="f62e5-107">Direct3D 11.2</span></span>](#direct3d-112)
-   [<span data-ttu-id="f62e5-108">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="f62e5-108">Direct3D 11.1</span></span>](#direct3d-111)
-   [<span data-ttu-id="f62e5-109">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="f62e5-109">D3D11InstallHelper.dll</span></span>](#d3d11installhelperdll)
-   [<span data-ttu-id="f62e5-110">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="f62e5-110">D3D11Install.exe</span></span>](#d3d11installexe)
-   [<span data-ttu-id="f62e5-111">Integrando em programas de instalação</span><span class="sxs-lookup"><span data-stu-id="f62e5-111">Integrating into Installation Programs</span></span>](#integrating-into-installation-programs)
    -   [<span data-ttu-id="f62e5-112">Integrando no InstallShield</span><span class="sxs-lookup"><span data-stu-id="f62e5-112">Integrating into InstallShield</span></span>](#integrating-into-installshield)
    -   [<span data-ttu-id="f62e5-113">Integrando-se a um pacote MSI</span><span class="sxs-lookup"><span data-stu-id="f62e5-113">Integrating into an MSI Package</span></span>](#integrating-into-an-msi-package)
-   [<span data-ttu-id="f62e5-114">Dicas de depuração</span><span class="sxs-lookup"><span data-stu-id="f62e5-114">Debugging Tips</span></span>](#debugging-tips)
-   [<span data-ttu-id="f62e5-115">Configurações Corporativas</span><span class="sxs-lookup"><span data-stu-id="f62e5-115">Corporate Settings</span></span>](#corporate-settings)
-   [<span data-ttu-id="f62e5-116">Artigos relacionados</span><span class="sxs-lookup"><span data-stu-id="f62e5-116">Related Articles</span></span>](#related-articles)

## <a name="overview"></a><span data-ttu-id="f62e5-117">Visão geral</span><span class="sxs-lookup"><span data-stu-id="f62e5-117">Overview</span></span>

<span data-ttu-id="f62e5-118">A API do Direct3D 11 estende a API do Direct3D 10,1 existente com suporte para processamento multithread e criação de recursos, sombreador de computação, mosaico de hardware, compactação de textura BC6H/BC7 e modelo de sombreador HLSL 5,0 com vínculo de sombreador dinâmico.</span><span class="sxs-lookup"><span data-stu-id="f62e5-118">The Direct3D 11 API extends the existing Direct3D 10.1 API with support for multithreaded rendering and resource creation, Compute Shader, hardware tessellation, BC6H/BC7 texture compression, and HLSL Shader Model 5.0 with Dynamic Shader Linkage.</span></span> <span data-ttu-id="f62e5-119">Além do componente do Direct3D 11, vários componentes gráficos adicionais estão incluídos no tempo de execução do DirectX 11: Direct3D 11, DXGI 1,1, níveis de recursos do 10level9, dispositivo de renderização de software WARP10, Direct2D, DirectWrite e um Direct3D 10,1 atualizado com suporte para 10level9 e WARP10.</span><span class="sxs-lookup"><span data-stu-id="f62e5-119">In addition to the Direct3D 11 component, a number of additional graphics components are included in the DirectX 11 runtime: Direct3D 11, DXGI 1.1, 10level9 feature levels, WARP10 software rendering device, Direct2D, DirectWrite, and an updated Direct3D 10.1 with support for 10level9 and WARP10.</span></span> <span data-ttu-id="f62e5-120">Para obter informações sobre esses e outros componentes de gráficos do Windows, consulte [APIs de gráficos no Windows](graphics-apis-in-windows-vista.md).</span><span class="sxs-lookup"><span data-stu-id="f62e5-120">For information on these and other Windows graphics components, see [Graphics APIs in Windows](graphics-apis-in-windows-vista.md).</span></span>

<span data-ttu-id="f62e5-121">Todos esses novos componentes gráficos são incorporados aos sistemas operacionais Windows 7 e Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="f62e5-121">All of these new graphics components are built into the Windows 7 and Windows Server 2008 R2 operating systems.</span></span> <span data-ttu-id="f62e5-122">A API do Direct3D 11 e os componentes relacionados também podem ser instalados no Windows Vista usando uma atualização do sistema do Windows Update; consulte o artigo da base de dados de conhecimento [KB 971644](https://support.microsoft.com/kb/971644).</span><span class="sxs-lookup"><span data-stu-id="f62e5-122">The Direct3D 11 API and related components can also be installed on Windows Vista by using a system update from Windows Update; see Knowledge Base article [KB 971644](https://support.microsoft.com/kb/971644).</span></span> <span data-ttu-id="f62e5-123">Esta atualização requer o Windows Vista e o Service Pack 2.</span><span class="sxs-lookup"><span data-stu-id="f62e5-123">This update requires Windows Vista and Service Pack 2.</span></span> <span data-ttu-id="f62e5-124">Os usuários finais com atualizações automáticas habilitadas, portanto, provavelmente já têm os componentes do Direct3D 11 instalados, assim como todos os usuários do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="f62e5-124">End-users with automatic updates enabled will, therefore, likely already have the Direct3D 11 components installed, as will all Windows 7 users.</span></span>

<span data-ttu-id="f62e5-125">O exemplo de D3D11InstallHelper foi projetado para simplificar a detecção da API do Direct3D 11, instalar automaticamente a atualização do sistema, se aplicável ao computador de um usuário final, e fornecer as mensagens apropriadas ao usuário final sobre o procedimento manual se um Service Pack mais recente for necessário.</span><span class="sxs-lookup"><span data-stu-id="f62e5-125">The D3D11InstallHelper sample is designed to simplify detection of the Direct3D 11 API, automatically install the system update if applicable to an end-user's computer, and to provide appropriate messages to the end-user on manual procedure if a newer Service Pack is required.</span></span>

> [!Note]  
> <span data-ttu-id="f62e5-126">O compilador HLSL (D3DCompile \* . dll) e a biblioteca de utilitários D3DX para Direct3D 11 (D3DX11 \* . dll) não são criados em nenhuma versão do sistema operacional Windows, mas podem ser implantados como parte do instalador de um aplicativo usando a tecnologia de DirectSetup existente; para obter mais informações sobre como usar o DirectSetup, consulte [instalação do DirectX para desenvolvedores de jogos](/windows/desktop/DxTechArts/directx-setup-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="f62e5-126">The HLSL compiler (D3DCompile\*.dll) and the D3DX utility library for Direct3D 11 (D3DX11\*.dll) are not built into any version of the Windows operating system, but they can be deployed as part of an application's installer by using the existing DirectSetup technology; for more information about using DirectSetup, see [DirectX Installation for Game Developers](/windows/desktop/DxTechArts/directx-setup-for-game-developers).</span></span> <span data-ttu-id="f62e5-127">"Effects 11" está disponível como uma biblioteca de suporte de fonte compartilhada em [efeitos para atualização do Direct3D 11](https://github.com/Microsoft/FX11)e você pode incluí-lo diretamente em um aplicativo (muito parecido com a biblioteca do utilitário DXUT).</span><span class="sxs-lookup"><span data-stu-id="f62e5-127">"Effects 11" is available as a shared source support library at [Effects for Direct3D 11 Update](https://github.com/Microsoft/FX11), and you can include it directly into an app (much like the DXUT utility library).</span></span> <span data-ttu-id="f62e5-128">Portanto, ele não tem nenhum requisito de redistribuição de tempo de execução adicional.</span><span class="sxs-lookup"><span data-stu-id="f62e5-128">Thus, it doesn't have any additional run-time redistribution requirements.</span></span>

## <a name="direct3d-113"></a><span data-ttu-id="f62e5-129">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="f62e5-129">Direct3D 11.3</span></span>

<span data-ttu-id="f62e5-130">O Windows 10 é fornecido com a API do Direct3D 11,3 interna.</span><span class="sxs-lookup"><span data-stu-id="f62e5-130">Windows 10 ships with the Direct3D 11.3 API built in.</span></span> <span data-ttu-id="f62e5-131">Consulte [recursos do direct3d 11,3](/windows/desktop/direct3d11/direct3d-11-3-features) para obter uma lista dos novos recursos na API do Direct3D 11,3.</span><span class="sxs-lookup"><span data-stu-id="f62e5-131">See [Direct3D 11.3 Features](/windows/desktop/direct3d11/direct3d-11-3-features) for a list of new features in the Direct3D 11.3 API.</span></span>

## <a name="direct3d-112"></a><span data-ttu-id="f62e5-132">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="f62e5-132">Direct3D 11.2</span></span>

<span data-ttu-id="f62e5-133">O Windows 8.1 e o Windows Server 2012 R2 são fornecidos com a API do Direct3D 11,2 interna.</span><span class="sxs-lookup"><span data-stu-id="f62e5-133">Windows 8.1 and Windows Server 2012 R2 ship with the Direct3D 11.2 API built in.</span></span> <span data-ttu-id="f62e5-134">Consulte [recursos do direct3d 11,2](/windows/desktop/direct3d11/direct3d-11-2-features) para obter uma lista dos novos recursos na API do Direct3D 11,2.</span><span class="sxs-lookup"><span data-stu-id="f62e5-134">See [Direct3D 11.2 Features](/windows/desktop/direct3d11/direct3d-11-2-features) for a list of new features in the Direct3D 11.2 API.</span></span>

## <a name="direct3d-111"></a><span data-ttu-id="f62e5-135">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="f62e5-135">Direct3D 11.1</span></span>

<span data-ttu-id="f62e5-136">O Windows 8 e o Windows Server 2012 são fornecidos com a [API do Direct3D 11,1](/windows/desktop/direct3d11/direct3d-11-1-features) interna.</span><span class="sxs-lookup"><span data-stu-id="f62e5-136">Windows 8 and Windows Server 2012 ship with the [Direct3D 11.1 API](/windows/desktop/direct3d11/direct3d-11-1-features) built in.</span></span> <span data-ttu-id="f62e5-137">O suporte parcial para a API do Direct3D 11,1 está disponível no Windows 7 ou no Windows Server 2008 R2 com a [atualização da plataforma para Windows 7](https://support.microsoft.com/kb/2670838) instalada.</span><span class="sxs-lookup"><span data-stu-id="f62e5-137">Partial support for the Direct3D 11.1 API is available on Windows 7 or Windows Server 2008 R2 with the [Platform Update for Windows 7](https://support.microsoft.com/kb/2670838) installed.</span></span> <span data-ttu-id="f62e5-138">Para obter mais informações sobre a atualização de plataforma para o Windows 7, consulte [atualização de plataforma para Windows 7](platform-update-for-windows-7.md).</span><span class="sxs-lookup"><span data-stu-id="f62e5-138">For more info about the Platform Update for Windows 7, see [Platform Update for Windows 7](platform-update-for-windows-7.md).</span></span>

## <a name="d3d11installhelperdll"></a><span data-ttu-id="f62e5-139">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="f62e5-139">D3D11InstallHelper.dll</span></span>

<span data-ttu-id="f62e5-140">D3D11InstallHelper.dll hospeda a funcionalidade básica para detectar componentes do Direct3D 11 e executar a atualização do sistema por meio do serviço de Windows Update, se aplicável.</span><span class="sxs-lookup"><span data-stu-id="f62e5-140">D3D11InstallHelper.dll hosts the core functionality for detecting Direct3D 11 components, and performing the system update through the Windows Update service if applicable.</span></span> <span data-ttu-id="f62e5-141">A DLL não exibe mensagens ou caixas de diálogo diretamente.</span><span class="sxs-lookup"><span data-stu-id="f62e5-141">The DLL displays no messages or dialog boxes directly.</span></span>

<span data-ttu-id="f62e5-142">A DLL consiste nos seguintes pontos de entrada:</span><span class="sxs-lookup"><span data-stu-id="f62e5-142">The DLL consists of the following entry points:</span></span>

<dl> <dt>

<span data-ttu-id="f62e5-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span><span class="sxs-lookup"><span data-stu-id="f62e5-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span></span>
</dt> <dd>

<span data-ttu-id="f62e5-144">Essa função executa as verificações necessárias e retorna o status do Direct3D 11 neste computador.</span><span class="sxs-lookup"><span data-stu-id="f62e5-144">This function performs the necessary checks and returns the status of Direct3D 11 on this computer.</span></span> <span data-ttu-id="f62e5-145">Essa função não requer direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="f62e5-145">This function does not require administrator rights.</span></span>

-   <span data-ttu-id="f62e5-146">Um status de \_ status D3D11IH \_ instalado indica que o Direct3D 11 já está instalado no computador e está pronto para uso.</span><span class="sxs-lookup"><span data-stu-id="f62e5-146">A status of D3D11IH\_STATUS\_INSTALLED indicates that Direct3D 11 is already installed on the computer and is ready for use.</span></span>
-   <span data-ttu-id="f62e5-147">D3D11IH \_ status \_ sem \_ suporte indica que esta versão do Windows não dá suporte ao Direct3D 11 ou a tecnologias relacionadas.</span><span class="sxs-lookup"><span data-stu-id="f62e5-147">D3D11IH\_STATUS\_NOT\_SUPPORTED indicates that this version of Windows does not support Direct3D 11 or related technologies.</span></span>
-   <span data-ttu-id="f62e5-148">Um status de status de D3D11IH \_ \_ precisa do \_ SP mais recente \_ indica que o Windows Vista Service Pack mais recente deve ser instalado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="f62e5-148">A status of D3D11IH\_STATUS\_NEED\_LATEST\_SP indicates that the latest Windows Vista Service Pack should be installed by the user.</span></span>
-   <span data-ttu-id="f62e5-149">Por fim, um status de \_ D3D11IH \_ requer \_ atualização indica que o sistema não tem o Direct3D 11 instalado, mas que a atualização do sistema se aplica a esta versão do Windows.</span><span class="sxs-lookup"><span data-stu-id="f62e5-149">Finally, a status of D3D11IH\_STATUS\_REQUIRES\_UPDATE indicates that the system does not have Direct3D 11 installed, but that the system update does apply to this version of Windows.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span><span class="sxs-lookup"><span data-stu-id="f62e5-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span></span>
</dt> <dd>

<span data-ttu-id="f62e5-151">Essa função usa a API Windows Update para executar a atualização do sistema para instalar o Direct3D 11 neste sistema, se aplicável.</span><span class="sxs-lookup"><span data-stu-id="f62e5-151">This function uses the Windows Update API to perform the system update for installing Direct3D 11 on this system, if applicable.</span></span> <span data-ttu-id="f62e5-152">Observe que essa função requer conectividade de rede para Windows Update para obter sucesso, bem como direitos administrativos.</span><span class="sxs-lookup"><span data-stu-id="f62e5-152">Note that this function requires network connectivity to Windows Update to succeed, as well as administrative rights.</span></span> <span data-ttu-id="f62e5-153">Ele usa uma função de retorno de chamada de progresso opcional e um ponteiro de contexto de usuário e retorna um código de resultado final quando concluído.</span><span class="sxs-lookup"><span data-stu-id="f62e5-153">It takes an optional progress callback function and user-context pointer, and returns a final result code when complete.</span></span>

-   <span data-ttu-id="f62e5-154">O resultado de êxito do resultado de D3D11IH \_ \_ indica que a atualização do sistema foi aplicada e está pronta para uso, enquanto \_ \_ \_ a reinicialização de resultado do D3D11IH de resultados indica que a atualização do sistema exige que o computador seja reiniciado antes de ser concluído.</span><span class="sxs-lookup"><span data-stu-id="f62e5-154">The D3D11IH\_RESULT\_SUCCESS result indicates that the system update was applied and is ready for use, while D3D11IH\_RESULT\_SUCCESS\_REBOOT indicates that the system update requires the computer is restarted before it is complete.</span></span> <span data-ttu-id="f62e5-155">Observe que essa função não agenda uma reinicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="f62e5-155">Note that this function does not schedule a system restart.</span></span>
-   <span data-ttu-id="f62e5-156">D3D11IH \_ resultado \_ sem \_ suporte indica que a atualização do sistema não se aplica a esta versão do Windows.</span><span class="sxs-lookup"><span data-stu-id="f62e5-156">D3D11IH\_RESULT\_NOT\_SUPPORTED indicates that the system update does not apply to this version of Windows.</span></span> <span data-ttu-id="f62e5-157">Esse resultado não deve ocorrer se essa função for chamada somente depois de obter um \_ status de D3D11IH \_ requer \_ status de atualização de CheckDirect3D11Status.</span><span class="sxs-lookup"><span data-stu-id="f62e5-157">This result should not occur if this function is only called after getting a D3D11IH\_STATUS\_REQUIRES\_UPDATE status from CheckDirect3D11Status.</span></span>
-   <span data-ttu-id="f62e5-158">Um resultado da atualização do resultado do D3D11IH \_ \_ \_ não \_ encontrado indica que o pacote de atualização do sistema não foi encontrado nos servidores de Windows Update.</span><span class="sxs-lookup"><span data-stu-id="f62e5-158">A result of D3D11IH\_RESULT\_UPDATE\_NOT\_FOUND indicates that the system update package was not found on the Windows Update servers.</span></span>
-   <span data-ttu-id="f62e5-159">Se o download ou a instalação do Windows Update falhar, o \_ download da atualização do resultado D3D11IH \_ \_ \_ falha ou \_ \_ a instalação da atualização do resultado D3D11IH \_ \_ será retornada como resultado.</span><span class="sxs-lookup"><span data-stu-id="f62e5-159">If the Windows Update download or installation fails, then D3D11IH\_RESULT\_UPDATE\_DOWNLOAD\_FAILED or D3D11IH\_RESULT\_UPDATE\_INSTALL\_FAILED will be returned as the result.</span></span>
-   <span data-ttu-id="f62e5-160">Se um erro de conectividade de rede for retornado da API do Windows Update, o \_ resultado do erro do serviço Wu do D3D11IH Result \_ \_ \_ será retornado, indicando que o problema pode ser intermitente ou relacionado à configuração de rede ou configurações de firewall.</span><span class="sxs-lookup"><span data-stu-id="f62e5-160">If a network connectivity error is returned from the Windows Update API, then the D3D11IH\_RESULT\_WU\_SERVICE\_ERROR result is returned, indicating that the problem might be intermittent or related to network configuration or firewall settings.</span></span> <span data-ttu-id="f62e5-161">Tentar a função de atualização novamente pode ter sucesso.</span><span class="sxs-lookup"><span data-stu-id="f62e5-161">Trying the update function again may succeed.</span></span>

</dd> </dl>

<span data-ttu-id="f62e5-162">Para obter mais informações sobre a API Windows Update, consulte [Windows Update API do agente](/windows/desktop/Wua_Sdk/portal-client).</span><span class="sxs-lookup"><span data-stu-id="f62e5-162">For more information on the Windows Update API, see [Windows Update Agent API](/windows/desktop/Wua_Sdk/portal-client).</span></span>

## <a name="d3d11installexe"></a><span data-ttu-id="f62e5-163">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="f62e5-163">D3D11Install.exe</span></span>

> [!Note]  
> <span data-ttu-id="f62e5-164">D3D11Install.exe requer D3D11InstallHelper.dll para ser executado.</span><span class="sxs-lookup"><span data-stu-id="f62e5-164">D3D11Install.exe requires D3D11InstallHelper.dll to execute.</span></span>

<span data-ttu-id="f62e5-165">D3D11Install.exe é uma ferramenta para usar o D3D11InstallHelper.dll como um instalador autônomo completo com a interface do usuário e mensagens de usuários finais, além de atuar como um exemplo para o uso adequado da DLL.</span><span class="sxs-lookup"><span data-stu-id="f62e5-165">D3D11Install.exe is a tool for using D3D11InstallHelper.dll as a stand-alone installer complete with UI and end-user messages, as well as acting as an example for proper use of the DLL.</span></span> <span data-ttu-id="f62e5-166">O processo será encerrado com um 0 se o Direct3D 11 já estiver instalado, se a atualização do sistema for aplicada com êxito sem a necessidade de uma reinicialização do sistema, se uma instalação do Service Pack for necessária ou se o Direct3D 11 não tiver suporte neste computador.</span><span class="sxs-lookup"><span data-stu-id="f62e5-166">The process exits with a 0 if Direct3D 11 is already installed, if the system update applies successfully without requiring a system restart, if a Service Pack installation is required, or if Direct3D 11 is not supported by this computer.</span></span> <span data-ttu-id="f62e5-167">Um 1 será retornado se a atualização do sistema for aplicada com êxito e exigir que uma reinicialização do sistema seja concluída.</span><span class="sxs-lookup"><span data-stu-id="f62e5-167">A 1 is returned if the system update is applied successfully and requires a system restart to complete.</span></span> <span data-ttu-id="f62e5-168">Um 2 é retornado para outras condições de erro.</span><span class="sxs-lookup"><span data-stu-id="f62e5-168">A 2 is returned for other error conditions.</span></span> <span data-ttu-id="f62e5-169">Observe que esse arquivo executável exige direitos de administrador para ser executado e tem um manifesto que solicita elevação quando executado no Windows Vista ou no Windows 7 com o UAC habilitado.</span><span class="sxs-lookup"><span data-stu-id="f62e5-169">Note that this executable file requires administrator rights to run, and it has a manifest that requests elevation when run on Windows Vista or Windows 7 with UAC enabled.</span></span> <span data-ttu-id="f62e5-170">D3D11Install.exe pode ser usado como uma ferramenta autônoma para implantar a atualização do Direct3D 11 ou pode ser usado diretamente por instaladores.</span><span class="sxs-lookup"><span data-stu-id="f62e5-170">D3D11Install.exe can be used as a stand-alone tool for deploying the Direct3D 11 update, or it can be used directly by installers.</span></span>

<span data-ttu-id="f62e5-171">Ele dá suporte às seguintes opções de linha de comando:</span><span class="sxs-lookup"><span data-stu-id="f62e5-171">It supports the following command-line switches:</span></span>

<dl> <dt>

<span data-ttu-id="f62e5-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/Quiet</span><span class="sxs-lookup"><span data-stu-id="f62e5-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/quiet</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-173">Exibe nenhuma mensagem, prompts, caixas de diálogo de progresso ou mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="f62e5-173">Displays no messages, prompts, progress dialog boxes, or error messages.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/Passive</span><span class="sxs-lookup"><span data-stu-id="f62e5-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/passive</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-175">Não exibe mensagens, prompts ou mensagens de erro, mas mostrará a caixa de diálogo de progresso.</span><span class="sxs-lookup"><span data-stu-id="f62e5-175">Displays no messages, prompts, or error messages, but will show the progress dialog box.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/minimal</span><span class="sxs-lookup"><span data-stu-id="f62e5-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/minimal</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-177">Mostra apenas os prompts mínimos.</span><span class="sxs-lookup"><span data-stu-id="f62e5-177">Shows only minimal prompts.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-178"><span id="_y__"></span><span id="_Y__"></span>/y</span><span class="sxs-lookup"><span data-stu-id="f62e5-178"><span id="_y__"></span><span id="_Y__"></span>/y</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-179">Suprime a solicitação para confirmar a instalação da atualização, se necessário e aplicável, para uma instalação padrão e mínima.</span><span class="sxs-lookup"><span data-stu-id="f62e5-179">Suppresses prompting to confirm installing the update, if needed and applicable, for a standard and minimal installation.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/LangID decimal</span><span class="sxs-lookup"><span data-stu-id="f62e5-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/langid decimal</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-181">Força o código do identificador de idioma a ser usado ao exibir mensagens do usuário final e recursos da caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="f62e5-181">Forces which language identifier code to use when displaying end-user messages and dialog box resources.</span></span> <span data-ttu-id="f62e5-182">O valor padrão é 1024, que usa a configuração de idioma padrão do sistema.</span><span class="sxs-lookup"><span data-stu-id="f62e5-182">The default value is 1024, which uses the system default language setting.</span></span>

</dd> <dt>

<span data-ttu-id="f62e5-183"><span id="_wu__"></span><span id="_WU__"></span>/wu</span><span class="sxs-lookup"><span data-stu-id="f62e5-183"><span id="_wu__"></span><span id="_WU__"></span>/wu</span></span> 
</dt> <dd>

<span data-ttu-id="f62e5-184">Força o uso de Windows Update em vez do padrão do sistema, que pode ser Windows Server Update Services (WSUS) em execução em um servidor gerenciado ou alguma outra configuração não padrão.</span><span class="sxs-lookup"><span data-stu-id="f62e5-184">Forces use of Windows Update rather than the system default, which may be Windows Server Update Services (WSUS) running on a managed server or some other non-standard configuration.</span></span>

</dd> </dl>

## <a name="integrating-into-installation-programs"></a><span data-ttu-id="f62e5-185">Integrando em programas de instalação</span><span class="sxs-lookup"><span data-stu-id="f62e5-185">Integrating into installation programs</span></span>

<span data-ttu-id="f62e5-186">Para estar em conformidade com o suporte à instalação fácil, [requisito técnico 3,1 para jogos para Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), é necessário tomar cuidado para que todos os prompts do usuário final sejam apresentados no início do processo de instalação e verifique se não há vários prompts de elevação relacionados ao UAC.</span><span class="sxs-lookup"><span data-stu-id="f62e5-186">To comply with Support Easy Installation, [Technical Requirement 3.1 for Games for Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), care needs to be taken so that any end-user prompts are presented early in the installation process, and to ensure that there are not multiple UAC-related elevation prompts.</span></span> <span data-ttu-id="f62e5-187">Há três opções básicas para atingir esse objetivo:</span><span class="sxs-lookup"><span data-stu-id="f62e5-187">There are three basic choices for achieving this goal:</span></span>

1.  <span data-ttu-id="f62e5-188">O método mais básico é executar o D3D11Install.exe com a opção de linha de comando **/Minimal**.</span><span class="sxs-lookup"><span data-stu-id="f62e5-188">The most basic method is to execute the D3D11Install.exe with the command-line switch **/minimal**.</span></span> <span data-ttu-id="f62e5-189">Isso deve ser feito no início do instalador Q&A, e a instalação deve usar o valor de retorno de 1 para indicar que uma reinicialização deve ser agendada no final da instalação.</span><span class="sxs-lookup"><span data-stu-id="f62e5-189">This should be done early in the installer Q&A, and the installation should use the return value of 1 to indicate that a restart should be scheduled at the end of the installation.</span></span> <span data-ttu-id="f62e5-190">A execução do programa requer direitos administrativos.</span><span class="sxs-lookup"><span data-stu-id="f62e5-190">Executing the program requires administrative rights.</span></span>
2.  <span data-ttu-id="f62e5-191">Use D3D11InstallHelper.dll diretamente para detectar a necessidade da atualização, fornecendo qualquer mensagem do usuário final necessária para o status D3D11IH de \_ status \_ necessário \_ SP mais recente \_ , em que a resolução requer operações de usuário manuais.</span><span class="sxs-lookup"><span data-stu-id="f62e5-191">Use D3D11InstallHelper.dll directly to detect the need for the update, providing any end-user messages necessary for the status D3D11IH\_STATUS\_NEED\_LATEST\_SP, where the resolution requires manual user operations.</span></span> <span data-ttu-id="f62e5-192">O status do resultado do \_ status D3D11IH \_ não \_ suportado pode ser usado para controlar a instalação de ativos relacionados ao Direct3D 11, ou como uma condição de erro para o Direct3D 11 – somente aplicativos, mas, caso contrário, não é necessariamente uma mensagem útil do usuário final.</span><span class="sxs-lookup"><span data-stu-id="f62e5-192">The status result of D3D11IH\_STATUS\_NOT\_SUPPORTED could be used to control installation of Direct3D 11–related assets, or as an error condition for Direct3D 11–only applications, but it is otherwise not necessarily a useful end-user message.</span></span> <span data-ttu-id="f62e5-193">Para o status D3D11IH de status \_ \_ requer \_ atualização, o instalador pode usar diretamente o ponto de entrada de dll DoUpdateForDirect3D11 para executar a atualização e lidar com as várias mensagens resultantes do usuário final.</span><span class="sxs-lookup"><span data-stu-id="f62e5-193">For the status D3D11IH\_STATUS\_REQUIRES\_UPDATE, the installer can directly use the DLL entry point DoUpdateForDirect3D11 to perform the update and handle the various resulting end-user messages.</span></span> <span data-ttu-id="f62e5-194">Exemplos de mensagens padrão podem ser encontrados examinando a caixa de diálogo D3D11Install.exe e os recursos de tabela de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="f62e5-194">Examples of standard messages can be found by examining the D3D11Install.exe dialog box and string table resources.</span></span> <span data-ttu-id="f62e5-195">O ponto de entrada de atualização requer direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="f62e5-195">The update entry point requires administrator rights.</span></span>
3.  <span data-ttu-id="f62e5-196">Uma abordagem híbrida é verificar o status com D3D11InstallHelper.dll e, no caso do status do código D3D11IH \_ necessário o \_ \_ status mais recente do \_ SP ou do D3D11IH \_ \_ requer \_ Update, D3D11Install.exe pode ser executada com as opções **/Minimal** e **/y** para exibir a caixa de diálogo ou para executar a atualização, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="f62e5-196">A hybrid approach is to check status with D3D11InstallHelper.dll, and in the case of the status code D3D11IH\_STATUS\_NEED\_LATEST\_SP or D3D11IH\_STATUS\_REQUIRES\_UPDATE, D3D11Install.exe can be executed with the switches **/minimal** and **/y** to display the dialog box or to perform the update, as needed.</span></span> <span data-ttu-id="f62e5-197">Essas etapas devem ser executadas no início do processo de instalação, normalmente logo após o Q&A e a execução do executável requer direitos administrativos.</span><span class="sxs-lookup"><span data-stu-id="f62e5-197">These steps should be performed early in the installation process, usually immediately after the Q&A, and running the executable requires administrative rights.</span></span>

### <a name="integrating-into-installshield"></a><span data-ttu-id="f62e5-198">Integrando no InstallShield</span><span class="sxs-lookup"><span data-stu-id="f62e5-198">Integrating into InstallShield</span></span>

<span data-ttu-id="f62e5-199">A manipulação da implantação do Direct3D 11 do InstallScript do InstallShield é feita facilmente usando o exemplo D3D11InstallHelper.</span><span class="sxs-lookup"><span data-stu-id="f62e5-199">Handling the Direct3D 11 deployment from InstallShield's InstallScript is easily done using the D3D11InstallHelper sample.</span></span> <span data-ttu-id="f62e5-200">As etapas necessárias para integrar com o InstallShield usando o InstallScript são as seguintes (usando o método 3, descrito na seção anterior):</span><span class="sxs-lookup"><span data-stu-id="f62e5-200">The steps required to integrate with InstallShield using InstallScript are as follows (using method 3, described in the previous section):</span></span>

1.  <span data-ttu-id="f62e5-201">Abra um projeto do InstallScript no editor do InstallShield.</span><span class="sxs-lookup"><span data-stu-id="f62e5-201">Open an InstallScript project in the InstallShield editor.</span></span>
2.  <span data-ttu-id="f62e5-202">Adicione D3D11InstallHelper.dll e D3D11Install.exe ao projeto em **arquivos de suporte**.</span><span class="sxs-lookup"><span data-stu-id="f62e5-202">Add D3D11InstallHelper.dll and D3D11Install.exe to the project in **Support Files**.</span></span>

    <span data-ttu-id="f62e5-203">**Para adicionar os arquivos ao projeto do InstallShield**</span><span class="sxs-lookup"><span data-stu-id="f62e5-203">**To add the files to the InstallShield Project**</span></span>

    1.  <span data-ttu-id="f62e5-204">Na guia **Designer de instalação** , clique em **arquivos de suporte/murals** em **comportamento e lógica** no painel de navegação à esquerda.</span><span class="sxs-lookup"><span data-stu-id="f62e5-204">On the **Installation Designer** tab, click **Support Files/Billboards** under **Behavior and Logic** in the navigation pane on the left.</span></span>
    2.  <span data-ttu-id="f62e5-205">Clique em **idioma independente**, clique com o botão direito do mouse na janela **arquivos** e selecione **inserir arquivos**.</span><span class="sxs-lookup"><span data-stu-id="f62e5-205">Click **Language Independent**, then right-click in the **Files** window and select **Insert Files**.</span></span> <span data-ttu-id="f62e5-206">Navegue até adicionar D3D11InstallHelper.dll e D3D11Install.exe.</span><span class="sxs-lookup"><span data-stu-id="f62e5-206">Browse to add D3D11InstallHelper.dll and D3D11Install.exe.</span></span> <span data-ttu-id="f62e5-207">O local padrão para esses arquivos é: SDK raiz \\ amostras \\ C++ \\ misc \\ bin \\ x86</span><span class="sxs-lookup"><span data-stu-id="f62e5-207">The default location for these files is: SDK root\\Samples\\C++\\Misc\\Bin\\x86</span></span>

3.  <span data-ttu-id="f62e5-208">No Gerenciador de InstallScript, clique no arquivo InstallScript (geralmente setup. RUL) que chamará a DLL ou o executável, localizado em **comportamento e lógica** no painel de navegação à esquerda.</span><span class="sxs-lookup"><span data-stu-id="f62e5-208">In the InstallScript explorer, click the InstallScript file (usually Setup.rul) that will call the DLL or executable, located under **Behavior and Logic** in the navigation pane on the left.</span></span>
4.  <span data-ttu-id="f62e5-209">Cole o seguinte InstallScript no arquivo próximo à parte superior:</span><span class="sxs-lookup"><span data-stu-id="f62e5-209">Paste the following InstallScript into the file near the top:</span></span>

    ``` syntax
#define D3D11IH_STATUS_INSTALLED       0
#define D3D11IH_STATUS_NOT_SUPPORTED   1
#define D3D11IH_STATUS_REQUIRES_UPDATE 2
#define D3D11IH_STATUS_NEED_LATEST_SP  3
#define D3D11IH_STATUS_ERROR           -1
    prototype NUMBER D3D11InstallHelper.CheckDirect3D11StatusIS();

#define D3D11IH_RESULT_SUCCESS                0
#define D3D11IH_RESULT_SUCCESS_REBOOT         1
#define D3D11IH_RESULT_NOT_SUPPORTED          2
#define D3D11IH_RESULT_UPDATE_NOT_FOUND       3
#define D3D11IH_RESULT_UPDATE_DOWNLOAD_FAILED 4
#define D3D11IH_RESULT_UPDATE_INSTALL_FAILED  5
#define D3D11IH_RESULT_WU_SERVICE_ERROR       6
#define D3D11IH_RESULT_ERROR                  -1
    prototype NUMBER D3D11InstallHelper.DoUpdateForDirect3D11IS(BOOL);
    ```

5.  <span data-ttu-id="f62e5-210">Cole o seguinte InstallScript no arquivo na função **OnFirstUIBefore** , logo antes do retorno 0:</span><span class="sxs-lookup"><span data-stu-id="f62e5-210">Paste the following InstallScript into the file in the **OnFirstUIBefore** function, just before the return 0:</span></span>

    ``` syntax
    Dlg_D3D11:
        UseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        nResult = D3D11InstallHelper.CheckDirect3D11StatusIS();   
        UnUseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        
        if ( nResult = D3D11IH_STATUS_REQUIRES_UPDATE
             || nResult = D3D11IH_STATUS_NEED_LATEST_SP) then
            nResult = LaunchAppAndWait(
    SUPPORTDIR^"D3D11Install.exe",
    "/minimal /y", WAIT);
            if ( nResult < 0 ) then
                MessageBox("Unable to launch D3D11Install.exe",
     SEVERE);
            elseif ( nResult == 1 ) then
                BATCH_INSTALL = 1;
            endif;          
        endif;
    ```

### <a name="integrating-into-an-msi-package"></a><span data-ttu-id="f62e5-211">Integrando-se a um pacote MSI</span><span class="sxs-lookup"><span data-stu-id="f62e5-211">Integrating into an MSI package</span></span>

<span data-ttu-id="f62e5-212">Veja a seguir uma descrição de alto nível das etapas necessárias para integrar a implantação do Direct3D 11 usando as ações personalizadas do MSI (usando o método 3, descrito anteriormente neste tópico):</span><span class="sxs-lookup"><span data-stu-id="f62e5-212">The following is a high-level description of the steps required to integrate Direct3D 11 deployment using MSI custom actions (using method 3, described earlier in this topic):</span></span>

1.  <span data-ttu-id="f62e5-213">Adicione uma propriedade à tabela de propriedades do MSI chamada **RelativePathToD3D11IH** que contém o caminho relativo para D3D11Install.exe e D3D11InstallHelper.dll durante a instalação (normalmente, isso ocorre na imagem de mídia).</span><span class="sxs-lookup"><span data-stu-id="f62e5-213">Add a property to the MSI Property table called **RelativePathToD3D11IH** that contains the relative path to D3D11Install.exe and D3D11InstallHelper.dll during installation (this is typically in the media image).</span></span> <span data-ttu-id="f62e5-214">Isso também define um status de D3D11IH \_ da propriedade MSI como o status retornado por CheckDirect3D11Status (uma propriedade de cadeia de caracteres igual ao símbolo de enumeração ou "Error").</span><span class="sxs-lookup"><span data-stu-id="f62e5-214">This also sets an MSI property D3D11IH\_STATUS to the status returned by CheckDirect3D11Status (a string property equal to the enumeration symbol or "ERROR").</span></span>
2.  <span data-ttu-id="f62e5-215">Após a ação CostFinalize, chame a função D3D11InstallHelper.dll **SetD3D11InstallMSIProperties** como uma ação personalizada imediata para definir as propriedades apropriadas do MSI para as outras ações personalizadas.</span><span class="sxs-lookup"><span data-stu-id="f62e5-215">After the CostFinalize action, call the D3D11InstallHelper.dll function **SetD3D11InstallMSIProperties** as an immediate custom action to set the appropriate MSI properties for the other custom actions.</span></span>
3.  <span data-ttu-id="f62e5-216">Na instalação, dispare uma ação personalizada adiada após a ação InstallFiles que chama a função de D3D11InstallHelper.dll **DoD3D11InstallUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="f62e5-216">Upon installation, trigger a deferred custom action after the InstallFiles action that calls the D3D11InstallHelper.dll function **DoD3D11InstallUsingMSI**.</span></span> <span data-ttu-id="f62e5-217">A ação personalizada deve definir o sinalizador msidbCustomActionTypeNoImpersonate para ser executado em um contexto elevado.</span><span class="sxs-lookup"><span data-stu-id="f62e5-217">The custom action must set the flag msidbCustomActionTypeNoImpersonate to run in an elevated context.</span></span>
4.  <span data-ttu-id="f62e5-218">Após a ação InstallFinalize, chame a função D3D11InstallHelper.dll **FinishD3D11InstallUsingMSI** como uma ação personalizada imediata para manipular o código de resultado da solicitação de reinicialização com êxito, se necessário.</span><span class="sxs-lookup"><span data-stu-id="f62e5-218">After the InstallFinalize action, call the D3D11InstallHelper.dll function **FinishD3D11InstallUsingMSI** as an immediate custom action to handle the successful reboot request result code, if needed.</span></span>

<span data-ttu-id="f62e5-219">Esse procedimento é descrito em detalhes nas instruções a seguir, que descrevem um processo que pode ser feito usando um editor de MSI, como o [Editor Orca](/windows/desktop/Msi/orca-exe).</span><span class="sxs-lookup"><span data-stu-id="f62e5-219">This procedure is described in detail in the following instructions, which describe a process that can be done using an MSI editor, such as the [Orca editor](/windows/desktop/Msi/orca-exe).</span></span> <span data-ttu-id="f62e5-220">Alguns editores MSI têm assistentes que simplificam algumas dessas etapas de configuração.</span><span class="sxs-lookup"><span data-stu-id="f62e5-220">Some MSI editors have wizards that simplify some of these configuration steps.</span></span>

<span data-ttu-id="f62e5-221">**Para configurar um pacote MSI para integração com o D3D11InstallHelper.dll**</span><span class="sxs-lookup"><span data-stu-id="f62e5-221">**To configure an MSI package for integration with D3D11InstallHelper.dll**</span></span>

1.  <span data-ttu-id="f62e5-222">Abra o pacote MSI em orca.</span><span class="sxs-lookup"><span data-stu-id="f62e5-222">Open the MSI package in Orca.</span></span>
2.  <span data-ttu-id="f62e5-223">Adicione a linha mostrada na tabela a seguir à tabela binária no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="f62e5-223">Add the row shown in the following table to the Binary table in the MSI package.</span></span>

    | <span data-ttu-id="f62e5-224">Nome</span><span class="sxs-lookup"><span data-stu-id="f62e5-224">Name</span></span>    | <span data-ttu-id="f62e5-225">Dados</span><span class="sxs-lookup"><span data-stu-id="f62e5-225">Data</span></span>                                         |
    |---------|----------------------------------------------|
    | <span data-ttu-id="f62e5-226">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="f62e5-226">D3D11IH</span></span> | <span data-ttu-id="f62e5-227">Caminho do arquivo para a DLL \\D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="f62e5-227">File path to the DLL\\D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="f62e5-228">Esse arquivo será inserido no pacote MSI, portanto, você deve fazer essa etapa toda vez que recompilar D3D11InstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="f62e5-228">This file will be embedded in the MSI package, so you must do this step every time that you recompile D3D11InstallHelper.dll.</span></span>

     

3.  <span data-ttu-id="f62e5-229">Adicione as linhas mostradas na tabela a seguir à tabela CustomAction no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="f62e5-229">Add the rows shown in the following table to the CustomAction table in the MSI package.</span></span> 

    | <span data-ttu-id="f62e5-230">Ação</span><span class="sxs-lookup"><span data-stu-id="f62e5-230">Action</span></span>              | <span data-ttu-id="f62e5-231">Tipo</span><span class="sxs-lookup"><span data-stu-id="f62e5-231">Type</span></span>                                                                                                                                                                   | <span data-ttu-id="f62e5-232">Fonte</span><span class="sxs-lookup"><span data-stu-id="f62e5-232">Source</span></span>  | <span data-ttu-id="f62e5-233">Destino</span><span class="sxs-lookup"><span data-stu-id="f62e5-233">Target</span></span>                       |
    |---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|------------------------------|
    | <span data-ttu-id="f62e5-234">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="f62e5-234">Direct3D11SetProps</span></span>  | <span data-ttu-id="f62e5-235">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="f62e5-235">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="f62e5-236">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="f62e5-236">D3D11IH</span></span> | <span data-ttu-id="f62e5-237">SetD3D11InstallMSIProperties</span><span class="sxs-lookup"><span data-stu-id="f62e5-237">SetD3D11InstallMSIProperties</span></span> |
    | <span data-ttu-id="f62e5-238">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="f62e5-238">Direct3D11DoInstall</span></span> | <span data-ttu-id="f62e5-239">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="f62e5-239">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span> | <span data-ttu-id="f62e5-240">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="f62e5-240">D3D11IH</span></span> | <span data-ttu-id="f62e5-241">DoD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="f62e5-241">DoD3D11InstallUsingMSI</span></span>       |
    | <span data-ttu-id="f62e5-242">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="f62e5-242">Direct3D11Finish</span></span>    | <span data-ttu-id="f62e5-243">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="f62e5-243">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="f62e5-244">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="f62e5-244">D3D11IH</span></span> | <span data-ttu-id="f62e5-245">FinishD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="f62e5-245">FinishD3D11InstallUsingMSI</span></span>   |

    

     

4.  <span data-ttu-id="f62e5-246">Adicione os valores mostrados para ação, condição e sequência na tabela a seguir à tabela InstallExecuteSequence no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="f62e5-246">Add the values shown for Action, Condition, and Sequence in the following table to the InstallExecuteSequence table in the MSI package.</span></span> 

    | <span data-ttu-id="f62e5-247">Ação</span><span class="sxs-lookup"><span data-stu-id="f62e5-247">Action</span></span>              | <span data-ttu-id="f62e5-248">Condição</span><span class="sxs-lookup"><span data-stu-id="f62e5-248">Condition</span></span>     | <span data-ttu-id="f62e5-249">Sequência</span><span class="sxs-lookup"><span data-stu-id="f62e5-249">Sequence</span></span> | <span data-ttu-id="f62e5-250">Observações</span><span class="sxs-lookup"><span data-stu-id="f62e5-250">Notes</span></span>                                                                                                                                                          |
    |---------------------|---------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="f62e5-251">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="f62e5-251">Direct3D11SetProps</span></span>  |               | <span data-ttu-id="f62e5-252">1016</span><span class="sxs-lookup"><span data-stu-id="f62e5-252">1016</span></span>     | <span data-ttu-id="f62e5-253">O número de sequência coloca a ação logo após CostFinalize.</span><span class="sxs-lookup"><span data-stu-id="f62e5-253">The sequence number places the action soon after CostFinalize.</span></span>                                                                                                 |
    | <span data-ttu-id="f62e5-254">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="f62e5-254">Direct3D11DoInstall</span></span> | <span data-ttu-id="f62e5-255">NÃO instalado</span><span class="sxs-lookup"><span data-stu-id="f62e5-255">NOT Installed</span></span> | <span data-ttu-id="f62e5-256">4004</span><span class="sxs-lookup"><span data-stu-id="f62e5-256">4004</span></span>     | <span data-ttu-id="f62e5-257">Essa ação personalizada só ocorrerá durante uma nova instalação para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="f62e5-257">This custom action will only happen during a new installation for all users.</span></span> <span data-ttu-id="f62e5-258">O número de sequência coloca a ação após InstallFiles e após as reversões.</span><span class="sxs-lookup"><span data-stu-id="f62e5-258">The sequence number places the action after InstallFiles and after the rollbacks.</span></span> |
    | <span data-ttu-id="f62e5-259">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="f62e5-259">Direct3D11Finish</span></span>    |               | <span data-ttu-id="f62e5-260">6615</span><span class="sxs-lookup"><span data-stu-id="f62e5-260">6615</span></span>     | <span data-ttu-id="f62e5-261">O número de sequência coloca a ação logo após InstallFinalize.</span><span class="sxs-lookup"><span data-stu-id="f62e5-261">The sequence number places the action soon after InstallFinalize.</span></span>                                                                                              |

    

     

5.  <span data-ttu-id="f62e5-262">Adicione a linha mostrada na tabela a seguir à tabela de **Propriedades** no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="f62e5-262">Add the row shown in the following table to the **Property** table in the MSI package.</span></span> 

    | <span data-ttu-id="f62e5-263">Propriedade</span><span class="sxs-lookup"><span data-stu-id="f62e5-263">Property</span></span>              | <span data-ttu-id="f62e5-264">Valor</span><span class="sxs-lookup"><span data-stu-id="f62e5-264">Value</span></span>                                                                        |
    |-----------------------|------------------------------------------------------------------------------|
    | <span data-ttu-id="f62e5-265">RelativePathToD3D11IH</span><span class="sxs-lookup"><span data-stu-id="f62e5-265">RelativePathToD3D11IH</span></span> | <span data-ttu-id="f62e5-266">caminho de arquivo relativo que contém D3D11Install.exe e D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="f62e5-266">relative file path that contains D3D11Install.exe and D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="f62e5-267">O local especificado pelo caminho é relativo ao local especificado pelo caminho de instalação — por exemplo, "Redist \\ ".</span><span class="sxs-lookup"><span data-stu-id="f62e5-267">The location specified by the path is relative to the location specified by the installation path—for example, "redist\\".</span></span>

     

6.  <span data-ttu-id="f62e5-268">Salve o pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="f62e5-268">Save the MSI package.</span></span> <span data-ttu-id="f62e5-269">Para obter informações mais detalhadas sobre pacotes e Windows Installer do MSI, consulte [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="f62e5-269">For more detailed information about MSI packages and Windows Installer, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="debugging-tips"></a><span data-ttu-id="f62e5-270">Dicas de depuração</span><span class="sxs-lookup"><span data-stu-id="f62e5-270">Debugging tips</span></span>

<span data-ttu-id="f62e5-271">Tanto D3D11InstallHelper.dll quanto D3D11Install.exe podem ser compilados com a configuração de depuração no Visual Studio, e essas versões imprimirão mensagens para o mecanismo de saída de depuração padrão do Windows.</span><span class="sxs-lookup"><span data-stu-id="f62e5-271">Both D3D11InstallHelper.dll and D3D11Install.exe can be built with the Debug configuration in Visual Studio, and these versions will print messages to the standard Windows debug output mechanism.</span></span>

## <a name="corporate-settings"></a><span data-ttu-id="f62e5-272">Configurações Corporativas</span><span class="sxs-lookup"><span data-stu-id="f62e5-272">Corporate settings</span></span>

<span data-ttu-id="f62e5-273">O exemplo D3D11InstallHelper foi projetado para implantação padrão por meio de Windows Update, que é o cenário mais comum para a instalação de um jogo por consumidores.</span><span class="sxs-lookup"><span data-stu-id="f62e5-273">The D3D11InstallHelper sample is designed for standard deployment through Windows Update, which is the most common scenario for installation of a game by consumers.</span></span> <span data-ttu-id="f62e5-274">No entanto, muitos desenvolvedores de jogos, trabalhando para editores e estúdios de desenvolvimento, fazem isso em configurações corporativas que têm um servidor gerenciado localmente fornecendo atualizações de software usando a tecnologia Windows Server Update Services (WSUS).</span><span class="sxs-lookup"><span data-stu-id="f62e5-274">However, Many game developers, working for publishers and in development studios, do so in enterprise settings that have a locally managed server providing software updates by using Windows Server Update Services (WSUS) technology.</span></span> <span data-ttu-id="f62e5-275">Nesse tipo de ambiente, o administrador de ti local tem controle de aprovação sobre quais atualizações são disponibilizadas para computadores na rede corporativa, e a versão de consumidor padrão da atualização KB 971644 não está disponível.</span><span class="sxs-lookup"><span data-stu-id="f62e5-275">In this type of environment, the local IT administrator has approval control over which updates are made available to computers within the corporate network, and the standard consumer version of update KB 971644 is not available.</span></span>

<span data-ttu-id="f62e5-276">Há três soluções básicas para implantar o DirectX 11 em configurações corporativas/corporativas:</span><span class="sxs-lookup"><span data-stu-id="f62e5-276">There are three basic solutions for deploying DirectX 11 in corporate/enterprise settings:</span></span>

-   <span data-ttu-id="f62e5-277">Em algumas configurações, é possível verificar diretamente Windows Update em vez de usar o servidor WSUS gerenciado localmente.</span><span class="sxs-lookup"><span data-stu-id="f62e5-277">In some configurations, it is possible to directly check Windows Update rather than use the locally managed WSUS server.</span></span> <span data-ttu-id="f62e5-278">Por esse motivo, o D3D11InstallHelper dá suporte à opção de linha de comando **/Wu** .</span><span class="sxs-lookup"><span data-stu-id="f62e5-278">For this reason, D3D11InstallHelper supports the **/wu** command-line switch.</span></span> <span data-ttu-id="f62e5-279">No entanto, nem todas as redes corporativas permitem conexões com os servidores públicos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f62e5-279">However, not all corporate networks allow connections to the public Microsoft servers.</span></span>
-   <span data-ttu-id="f62e5-280">O administrador de ti local pode aprovar o KB 971512, uma atualização com suporte da empresa implantada do WSUS, que inclui a API do Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="f62e5-280">The local IT administrator can approve KB 971512, an enterprise-supported update deployed from WSUS, that includes the Direct3D 11 API.</span></span> <span data-ttu-id="f62e5-281">Essa é a única opção para um usuário padrão obter a atualização do Direct3D 11 em um ambiente totalmente bloqueado.</span><span class="sxs-lookup"><span data-stu-id="f62e5-281">This is the only option for a Standard User to obtain the Direct3D 11 update in an environment that is fully locked down.</span></span>
-   <span data-ttu-id="f62e5-282">Como alternativa, o [KB 971512](https://support.microsoft.com/kb/971512/) pode ser instalado manualmente.</span><span class="sxs-lookup"><span data-stu-id="f62e5-282">Alternatively, [KB 971512](https://support.microsoft.com/kb/971512/) can be manually installed.</span></span>

<span data-ttu-id="f62e5-283">É muito raro que o computador de um jogador possa obter apenas atualizações de um servidor WSUS gerenciado localmente, e é apenas desenvolvedores em grandes organizações que provavelmente estejam em ambientes.</span><span class="sxs-lookup"><span data-stu-id="f62e5-283">It is very rare that a gamer's computer can only get updates from a locally managed WSUS server, and it is only developers in large organizations who are likely to be in such environments.</span></span>

## <a name="related-articles"></a><span data-ttu-id="f62e5-284">Artigos relacionados</span><span class="sxs-lookup"><span data-stu-id="f62e5-284">Related articles</span></span>

[<span data-ttu-id="f62e5-285">Firewall do Windows para Desenvolvedores de Jogos</span><span class="sxs-lookup"><span data-stu-id="f62e5-285">Windows Firewall for Game Developers</span></span>](/windows/desktop/DxTechArts/games-and-firewalls)

[<span data-ttu-id="f62e5-286">Explorador de jogos do Windows para desenvolvedores de jogos</span><span class="sxs-lookup"><span data-stu-id="f62e5-286">Windows Games Explorer for Game Developers</span></span>](/windows/desktop/DxTechArts/windows-game-explorer-integration)