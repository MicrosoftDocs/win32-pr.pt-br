---
title: Recursos de desenho de hardware
description: Recursos de desenho de hardware
ms.assetid: 3a26de73-cb9e-41a0-8c33-a7cca7d6058e
keywords:
- VCM (Gerenciador de compactação de vídeo), desenho
- VCM (Gerenciador de compactação de vídeo), desenho
- Função ICGetInfo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ba7d3af8beb7c4ac676e421fe10d427322470d14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104005619"
---
# <a name="hardware-drawing-capabilities"></a><span data-ttu-id="86a36-106">Recursos de desenho de hardware</span><span class="sxs-lookup"><span data-stu-id="86a36-106">Hardware Drawing Capabilities</span></span>

<span data-ttu-id="86a36-107">Alguns renderizadores podem desenhar diretamente no hardware de vídeo à medida que descompactam quadros de vídeo.</span><span class="sxs-lookup"><span data-stu-id="86a36-107">Some renderers can draw directly to video hardware as they decompress video frames.</span></span> <span data-ttu-id="86a36-108">Esses renderizadores retornam o \_ sinalizador de desenho VIDCF em resposta à função [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="86a36-108">These renderers return the VIDCF\_DRAW flag in response to the [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) function.</span></span> <span data-ttu-id="86a36-109">Ao usar esse tipo de processador, seu aplicativo não precisa lidar com os dados descompactados.</span><span class="sxs-lookup"><span data-stu-id="86a36-109">When using this type of renderer, your application does not have to handle the decompressed data.</span></span> <span data-ttu-id="86a36-110">Ele permite que o renderizador Mantenha os dados descompactados para desenho.</span><span class="sxs-lookup"><span data-stu-id="86a36-110">It lets the renderer retain the decompressed data for drawing.</span></span>

<span data-ttu-id="86a36-111">Se seu aplicativo usa um processador com recursos de desenho, ele deve lidar com as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="86a36-111">If your application uses a renderer with drawing capabilities, it must handle the following tasks:</span></span>

-   <span data-ttu-id="86a36-112">Selecione um renderizador.</span><span class="sxs-lookup"><span data-stu-id="86a36-112">Select a renderer.</span></span>
-   <span data-ttu-id="86a36-113">Especifique os formatos de imagem.</span><span class="sxs-lookup"><span data-stu-id="86a36-113">Specify image formats.</span></span>
-   <span data-ttu-id="86a36-114">Inicialize o renderizador.</span><span class="sxs-lookup"><span data-stu-id="86a36-114">Initialize the renderer.</span></span>
-   <span data-ttu-id="86a36-115">Desenhe os dados.</span><span class="sxs-lookup"><span data-stu-id="86a36-115">Draw the data.</span></span>
-   <span data-ttu-id="86a36-116">Controlar parâmetros de desenho.</span><span class="sxs-lookup"><span data-stu-id="86a36-116">Control drawing parameters.</span></span>

## <a name="renderer-selection"></a><span data-ttu-id="86a36-117">Seleção de renderizador</span><span class="sxs-lookup"><span data-stu-id="86a36-117">Renderer Selection</span></span>

<span data-ttu-id="86a36-118">A macro [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) abre um processador que pode desenhar imagens com o formato especificado.</span><span class="sxs-lookup"><span data-stu-id="86a36-118">The [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) macro opens a renderer that can draw images with the specified format.</span></span> <span data-ttu-id="86a36-119">Ele retornará um identificador de um renderizador se for bem-sucedido ou nenhum outro.</span><span class="sxs-lookup"><span data-stu-id="86a36-119">It returns a handle of a renderer if it is successful, or zero otherwise.</span></span> <span data-ttu-id="86a36-120">Essa macro usa a função [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) para abrir o processador.</span><span class="sxs-lookup"><span data-stu-id="86a36-120">This macro uses the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) function to open the renderer.</span></span>

## <a name="specifying-image-formats"></a><span data-ttu-id="86a36-121">Especificando formatos de imagem</span><span class="sxs-lookup"><span data-stu-id="86a36-121">Specifying Image Formats</span></span>

<span data-ttu-id="86a36-122">Como seu aplicativo não precisa desenhar os dados descompactados, ele não requer um formato de saída específico.</span><span class="sxs-lookup"><span data-stu-id="86a36-122">Because your application does not need to draw the decompressed data, it does not require a specific output format.</span></span> <span data-ttu-id="86a36-123">No entanto, deve-se garantir que o renderizador possa desenhar usando o formato de entrada usando a mensagem de [**\_ \_ consulta de desenho ICM**](icm-draw-query.md) (ou use a macro [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) ).</span><span class="sxs-lookup"><span data-stu-id="86a36-123">It must, however, ensure that the renderer can draw using the input format by using the [**ICM\_DRAW\_QUERY**](icm-draw-query.md) message (or use the [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) macro).</span></span> <span data-ttu-id="86a36-124">Esta mensagem não pode determinar se um renderizador pode desenhar um bitmap.</span><span class="sxs-lookup"><span data-stu-id="86a36-124">This message cannot determine if a renderer can draw a bitmap.</span></span> <span data-ttu-id="86a36-125">Se seu aplicativo precisar determinar se o renderizador pode desenhar o bitmap, use essa mensagem com a função [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="86a36-125">If your application must determine if the renderer can draw the bitmap, use this message with the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span>

<span data-ttu-id="86a36-126">Seu aplicativo pode ter um processador sugira um formato de entrada usando a função [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) .</span><span class="sxs-lookup"><span data-stu-id="86a36-126">Your application can have a renderer suggest an input format by using the [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) function.</span></span> <span data-ttu-id="86a36-127">Essa função é usada quando um renderizador separa os recursos de desenho dos recursos de descompactação.</span><span class="sxs-lookup"><span data-stu-id="86a36-127">This function is used when a renderer separates the drawing capabilities from the decompressing capabilities.</span></span> <span data-ttu-id="86a36-128">A maioria dos aplicativos que usam as funções de desenho não precisará determinar o formato de saída.</span><span class="sxs-lookup"><span data-stu-id="86a36-128">Most applications using the drawing functions will not need to determine the output format.</span></span>

## <a name="renderer-initialization"></a><span data-ttu-id="86a36-129">Inicialização do processador</span><span class="sxs-lookup"><span data-stu-id="86a36-129">Renderer Initialization</span></span>

<span data-ttu-id="86a36-130">A função [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) Inicializa um renderizador e informa o destino do desenho.</span><span class="sxs-lookup"><span data-stu-id="86a36-130">The [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function initializes a renderer and tells it the drawing destination.</span></span> <span data-ttu-id="86a36-131">Essa função também pode executar as seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="86a36-131">This function can also perform the following tasks:</span></span>

-   <span data-ttu-id="86a36-132">Determine se o renderizador oferece suporte a um formato de entrada específico.</span><span class="sxs-lookup"><span data-stu-id="86a36-132">Determine whether the renderer supports a specific input format.</span></span>
-   <span data-ttu-id="86a36-133">Especifique se a operação de desenho ocupa uma janela ou toda a tela.</span><span class="sxs-lookup"><span data-stu-id="86a36-133">Specify whether the drawing operation occupies a window or the entire screen.</span></span>
-   <span data-ttu-id="86a36-134">Especifique a parte da imagem a ser exibida usando o retângulo de origem.</span><span class="sxs-lookup"><span data-stu-id="86a36-134">Specify the part of the image to display using the source rectangle.</span></span>
-   <span data-ttu-id="86a36-135">Defina a taxa de reprodução da sequência de imagens.</span><span class="sxs-lookup"><span data-stu-id="86a36-135">Define the playback rate of the image sequence.</span></span>

<span data-ttu-id="86a36-136">Alguns renderizadores armazenam em buffer os dados compactados para operar com mais eficiência.</span><span class="sxs-lookup"><span data-stu-id="86a36-136">Some renderers buffer the compressed data to operate more efficiently.</span></span> <span data-ttu-id="86a36-137">Seu aplicativo pode enviar a [**mensagem \_ GETBUFFERSWANTED do ICM**](icm-getbufferswanted.md) (ou usar a macro [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) ) para determinar o número de buffers que o processador solicita.</span><span class="sxs-lookup"><span data-stu-id="86a36-137">Your application can send the [**ICM\_GETBUFFERSWANTED**](icm-getbufferswanted.md) message (or use the [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) macro) to determine the number of buffers the renderer requests.</span></span> <span data-ttu-id="86a36-138">Seu aplicativo deve pré-carregar esses buffers e enviá-los para o renderizador antes do desenho.</span><span class="sxs-lookup"><span data-stu-id="86a36-138">Your application should preload these buffers and send them to the renderer before drawing.</span></span>

## <a name="drawing-the-data"></a><span data-ttu-id="86a36-139">Desenhando os dados</span><span class="sxs-lookup"><span data-stu-id="86a36-139">Drawing the Data</span></span>

<span data-ttu-id="86a36-140">Você pode usar a função [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) para descompactar os dados para desenho.</span><span class="sxs-lookup"><span data-stu-id="86a36-140">You can use the [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) function to decompress the data for drawing.</span></span> <span data-ttu-id="86a36-141">O renderizador, no entanto, não inicia o desenho de dados até que seu aplicativo envie a mensagem de [**\_ \_ início do ICM Draw**](icm-draw-start.md) (ou usa a macro [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) ).</span><span class="sxs-lookup"><span data-stu-id="86a36-141">The renderer, however, does not start drawing data until your application sends the [**ICM\_DRAW\_START**](icm-draw-start.md) message (or uses the [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) macro).</span></span> <span data-ttu-id="86a36-142">Quando o aplicativo chama essa função, o renderizador começa a desenhar os quadros na taxa especificada pelo parâmetro *dwRate* dividido pelo parâmetro *dwScale* ; esses parâmetros foram fornecidos quando o aplicativo inicializava o renderizador usando a função [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="86a36-142">When your application calls this function, the renderer begins to draw the frames at the rate specified by the *dwRate* parameter divided by the *dwScale* parameter; these parameters were supplied when the application initialized the renderer by using the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span> <span data-ttu-id="86a36-143">O desenho continua até que seu aplicativo envie a mensagem de [**\_ \_ parada ICM Draw**](icm-draw-stop.md) (ou usa a macro [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) ).</span><span class="sxs-lookup"><span data-stu-id="86a36-143">Drawing continues until your application sends the [**ICM\_DRAW\_STOP**](icm-draw-stop.md) message (or uses the [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) macro).</span></span>

> [!Note]  
> <span data-ttu-id="86a36-144">Se um renderizador armazenar os dados em buffer antes do desenho, seu aplicativo não deverá usar a macro **ICDrawStart** até que tenha enviado o número de quadros retornado pelo renderizador para a macro **ICGetBuffersWanted** .</span><span class="sxs-lookup"><span data-stu-id="86a36-144">If a renderer buffers the data before drawing, your application should not use the **ICDrawStart** macro until it has sent the number of frames the renderer returned for the **ICGetBuffersWanted** macro.</span></span>

 

<span data-ttu-id="86a36-145">O parâmetro *lTime* de [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) especifica o tempo para desenhar um quadro.</span><span class="sxs-lookup"><span data-stu-id="86a36-145">The *lTime* parameter of [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) specifies the time to draw a frame.</span></span> <span data-ttu-id="86a36-146">O renderizador divide esse inteiro pela escala de tempo especificada com [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) para obter a hora real.</span><span class="sxs-lookup"><span data-stu-id="86a36-146">The renderer divides this integer by the time scale specified with [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) to obtain the actual time.</span></span> <span data-ttu-id="86a36-147">Os horários para as funções **ICDraw** são relativos a **ICDrawStart**.</span><span class="sxs-lookup"><span data-stu-id="86a36-147">Times for **ICDraw** functions are relative to **ICDrawStart**.</span></span> <span data-ttu-id="86a36-148">**ICDrawStart** define o relógio como zero.</span><span class="sxs-lookup"><span data-stu-id="86a36-148">**ICDrawStart** sets the clock to zero.</span></span> <span data-ttu-id="86a36-149">Por exemplo, se seu aplicativo especificar 1000 para a escala de tempo e 75 para *lTime*, o renderizador desenhará o quadro de 75 milissegundos na sequência.</span><span class="sxs-lookup"><span data-stu-id="86a36-149">For example, if your application specifies 1000 for the time scale and 75 for *lTime*, the renderer draws the frame 75 milliseconds into the sequence.</span></span>

## <a name="controlling-drawing-parameters"></a><span data-ttu-id="86a36-150">Controlando parâmetros de desenho</span><span class="sxs-lookup"><span data-stu-id="86a36-150">Controlling Drawing Parameters</span></span>

<span data-ttu-id="86a36-151">Você pode monitorar o relógio de um processador enviando a mensagem [**do \_ ICM \_ draw getTime**](icm-draw-gettime.md) (ou usar a macro [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) ) e pode definir o relógio de um processador que pode desenhar dados enviando a mensagem [**\_ \_ setTime do ICM Draw**](icm-draw-settime.md) (ou usar a macro [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) ).</span><span class="sxs-lookup"><span data-stu-id="86a36-151">You can monitor the clock of a renderer by sending the [**ICM\_DRAW\_GETTIME**](icm-draw-gettime.md) message (or use the [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) macro), and you can set the clock of a renderer that can draw data by sending the [**ICM\_DRAW\_SETTIME**](icm-draw-settime.md) message (or use the [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) macro).</span></span>

<span data-ttu-id="86a36-152">Para alterar a posição atual enquanto um renderizador está desenhando, seu aplicativo pode enviar a mensagem de [**\_ \_ janela de desenho ICM**](icm-draw-window.md) (ou usar a macro [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) ) para reposicionar a janela.</span><span class="sxs-lookup"><span data-stu-id="86a36-152">To change the current position while a renderer is drawing, your application can send the [**ICM\_DRAW\_WINDOW**](icm-draw-window.md) message (or use the [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) macro) for repositioning the window.</span></span> <span data-ttu-id="86a36-153">Normalmente, os aplicativos usam essa mensagem sempre que a janela é alterada.</span><span class="sxs-lookup"><span data-stu-id="86a36-153">Applications typically use this message whenever the window changes.</span></span>

<span data-ttu-id="86a36-154">Se a janela de reprodução obtiver uma mensagem de paleta de percepção, seu aplicativo deverá enviar a mensagem de [**\_ \_ percepção de desenho ICM**](icm-draw-realize.md) (ou usar a macro [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) ) para que o renderizador perceba a paleta novamente para reprodução.</span><span class="sxs-lookup"><span data-stu-id="86a36-154">If the playback window gets a realize-palette message, your application must send the [**ICM\_DRAW\_REALIZE**](icm-draw-realize.md) message (or use the [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) macro) to have the renderer realize the palette again for playback.</span></span> <span data-ttu-id="86a36-155">Os aplicativos podem alterar a paleta enviando a mensagem [**ICM \_ draw \_ CHANGEPALETTE**](icm-draw-changepalette.md) (ou usar a macro [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) ) e obter a paleta atual enviando a mensagem [**ICM \_ extrair \_ a \_ paleta**](icm-draw-get-palette.md) .</span><span class="sxs-lookup"><span data-stu-id="86a36-155">Applications can change the palette by sending the [**ICM\_DRAW\_CHANGEPALETTE**](icm-draw-changepalette.md) message (or use the [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) macro) and obtain the current palette by sending the [**ICM\_DRAW\_GET\_PALETTE**](icm-draw-get-palette.md) message.</span></span>

<span data-ttu-id="86a36-156">Alguns renderizadores devem ser especificamente instruídos para exibir os quadros passados a eles.</span><span class="sxs-lookup"><span data-stu-id="86a36-156">Some renderers must be specifically instructed to display frames passed to them.</span></span> <span data-ttu-id="86a36-157">Enviar a mensagem de [**\_ desenho \_ RENDERBUFFER do ICM**](icm-draw-renderbuffer.md) (ou usar a macro [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) ) faz com que esses renderizadores desenhem o quadro.</span><span class="sxs-lookup"><span data-stu-id="86a36-157">Sending the [**ICM\_DRAW\_RENDERBUFFER**](icm-draw-renderbuffer.md) message (or use the [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) macro) causes these renderers to draw the frame.</span></span>

 

 




