---
title: Gravando fluxos em um arquivo
description: Gravando fluxos em um arquivo
ms.assetid: a3766f8c-aaa6-4fc5-a306-54aee71018f1
keywords:
- Função AVIFileCreateStream
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 370df08534bbdde870f6d28c828d47935abd80db
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103640660"
---
# <a name="writing-streams-to-a-file"></a><span data-ttu-id="2d54e-104">Gravando fluxos em um arquivo</span><span class="sxs-lookup"><span data-stu-id="2d54e-104">Writing Streams to a File</span></span>

<span data-ttu-id="2d54e-105">Você também pode criar um arquivo que contém fluxos de dados gravando um novo fluxo de dados em um arquivo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-105">You can also create a file containing data streams by writing a new data stream to a file.</span></span>

<span data-ttu-id="2d54e-106">Você pode criar um novo fluxo em um arquivo novo ou existente usando a função [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) .</span><span class="sxs-lookup"><span data-stu-id="2d54e-106">You can create a new stream in a new or existing file by using the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) function.</span></span> <span data-ttu-id="2d54e-107">Essa função define um novo fluxo de acordo com as características descritas em uma estrutura [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) , cria uma interface de fluxo para o novo fluxo, incrementa a contagem de referência do fluxo e retorna o endereço do ponteiro de interface de fluxo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-107">This function defines a new stream according to the characteristics described in an [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure, creates a stream interface for the new stream, increments the reference count of the stream, and returns the address of the stream-interface pointer.</span></span>

<span data-ttu-id="2d54e-108">Antes de gravar o conteúdo do fluxo, você deve especificar o formato do fluxo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-108">Before you write the content of the stream, you must specify the stream format.</span></span> <span data-ttu-id="2d54e-109">Você pode definir o formato de fluxo usando a função [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) .</span><span class="sxs-lookup"><span data-stu-id="2d54e-109">You can set the stream format by using the [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function.</span></span> <span data-ttu-id="2d54e-110">Ao definir o formato de um fluxo de vídeo, você deve fornecer essa função com uma estrutura [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) que contém as informações apropriadas.</span><span class="sxs-lookup"><span data-stu-id="2d54e-110">When setting the format of a video stream, you must supply this function with a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure containing the appropriate information.</span></span> <span data-ttu-id="2d54e-111">Ao definir o formato de um fluxo de áudio, você deve fornecer uma estrutura [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) ou [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) que contém as informações apropriadas.</span><span class="sxs-lookup"><span data-stu-id="2d54e-111">When setting the format of an audio stream, you must supply a [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) or [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the appropriate information.</span></span> <span data-ttu-id="2d54e-112">As informações que você precisa fornecer à função para outros tipos de fluxo dependem do tipo de fluxo e do manipulador de fluxo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-112">The information you need to supply to the function for other stream types depends on the stream type and the stream handler.</span></span>

<span data-ttu-id="2d54e-113">Você pode gravar o conteúdo multimídia em um fluxo usando a função [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) .</span><span class="sxs-lookup"><span data-stu-id="2d54e-113">You can write the multimedia content in a stream by using the [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) function.</span></span> <span data-ttu-id="2d54e-114">Essa função copia dados brutos de um buffer fornecido pelo aplicativo para o fluxo especificado.</span><span class="sxs-lookup"><span data-stu-id="2d54e-114">This function copies raw data from an application-supplied buffer into the specified stream.</span></span> <span data-ttu-id="2d54e-115">O manipulador de arquivo AVI padrão acrescenta informações ao final de um fluxo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-115">The default AVI file handler appends information to the end of a stream.</span></span> <span data-ttu-id="2d54e-116">O manipulador WAVE padrão pode gravar dados de wave-áudio em um fluxo, bem como no final de um fluxo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-116">The default WAVE handler can write waveform-audio data within a stream as well as at the end of a stream.</span></span>

<span data-ttu-id="2d54e-117">Você pode gravar informações complementares sobre o arquivo ou fluxo que não está incluído na função [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) ou [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) usando as funções [**AVIFileWriteData**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) e [**AVIStreamWriteData**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) .</span><span class="sxs-lookup"><span data-stu-id="2d54e-117">You can write supplementary information about the file or stream that is not included in the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) or [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function by using the [**AVIFileWriteData**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) and [**AVIStreamWriteData**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) functions.</span></span> <span data-ttu-id="2d54e-118">Você pode registrar dados que são aplicáveis ao arquivo inteiro, como informações de direitos autorais e histórico de modificação, usando **AVIFileWriteData**.</span><span class="sxs-lookup"><span data-stu-id="2d54e-118">You can record data that is applicable to the entire file, such as copyright information and modification history, by using **AVIFileWriteData**.</span></span> <span data-ttu-id="2d54e-119">Você pode registrar informações específicas do fluxo, como configurações de compactação e descompactação, usando **AVIStreamWriteData**.</span><span class="sxs-lookup"><span data-stu-id="2d54e-119">You can record stream-specific information, such as compression and decompression settings, by using **AVIStreamWriteData**.</span></span> <span data-ttu-id="2d54e-120">As informações suplementares são armazenadas em partes separadas dentro do arquivo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-120">The supplementary information is stored in separate chunks within the file.</span></span>

<span data-ttu-id="2d54e-121">Você pode fechar o fluxo depois de concluir a gravação no novo fluxo usando a função [**AVIStreamRelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) .</span><span class="sxs-lookup"><span data-stu-id="2d54e-121">You can close the stream after you finish writing to the new stream by using the [**AVIStreamRelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) function.</span></span> <span data-ttu-id="2d54e-122">Essa função limpa os buffers usados na gravação dos dados de fluxo e é concluída e fecha todas as partes de dados incompletas no arquivo.</span><span class="sxs-lookup"><span data-stu-id="2d54e-122">This function clears buffers used in recording the stream data, and it completes and closes any incomplete data chunks in the file.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2d54e-123">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2d54e-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2d54e-124">Operações de fluxo</span><span class="sxs-lookup"><span data-stu-id="2d54e-124">Stream Operations</span></span>](stream-operations.md)
</dt> </dl>

 

 