---
title: Lendo de um fluxo
description: Lendo de um fluxo
ms.assetid: be961f06-cf5f-4093-9b31-7d1d69e62fec
keywords:
- Função AVIStreamInfo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3cc7ecd606a33503557e7c7209bff68015756523
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103917301"
---
# <a name="reading-from-a-stream"></a><span data-ttu-id="b1fde-104">Lendo de um fluxo</span><span class="sxs-lookup"><span data-stu-id="b1fde-104">Reading from a Stream</span></span>

<span data-ttu-id="b1fde-105">Você pode recuperar informações sobre um fluxo aberto usando a função [**AVIStreamInfo**](/windows/desktop/api/Vfw/nf-vfw-avistreaminfoa) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-105">You can retrieve information about an open stream by using the [**AVIStreamInfo**](/windows/desktop/api/Vfw/nf-vfw-avistreaminfoa) function.</span></span> <span data-ttu-id="b1fde-106">Essa função preenche a estrutura [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) com informações como o tipo de dados no fluxo, o método de compactação usado ao gravar dados de fluxo, o tamanho sugerido do buffer, a taxa de reprodução e uma descrição de texto do fluxo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-106">This function fills the [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure with information such as the type of data in the stream, the compression method used when writing stream data, the suggested buffer size, the playback rate, and a text description of the stream.</span></span>

<span data-ttu-id="b1fde-107">Alguns membros da estrutura [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) também estão presentes na estrutura [**AVIFILEINFO**](/windows/desktop/api/Vfw/ns-vfw-avifileinfoa) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-107">Some members of the [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure are also present in the [**AVIFILEINFO**](/windows/desktop/api/Vfw/ns-vfw-avifileinfoa) structure.</span></span> <span data-ttu-id="b1fde-108">As informações na estrutura **AVIFILEINFO** se aplicam a todo o arquivo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-108">The information in the **AVIFILEINFO** structure applies to the entire file.</span></span> <span data-ttu-id="b1fde-109">As informações na estrutura **AVISTREAMINFO** são específicas para o fluxo acessado e têm precedência sobre as informações na estrutura **AVIFILEINFO** .</span><span class="sxs-lookup"><span data-stu-id="b1fde-109">The information in the **AVISTREAMINFO** structure is specific to the accessed stream and has precedence over the information in the **AVIFILEINFO** structure.</span></span>

<span data-ttu-id="b1fde-110">Se um fluxo tiver informações complementares associadas a ele, você poderá recuperar essas informações usando a função [**AVIStreamReadData**](/windows/desktop/api/Vfw/nf-vfw-avistreamreaddata) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-110">If a stream has supplementary information associated with it, you can retrieve this information by using the [**AVIStreamReadData**](/windows/desktop/api/Vfw/nf-vfw-avistreamreaddata) function.</span></span> <span data-ttu-id="b1fde-111">Essa função retorna as informações em um buffer fornecido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-111">This function returns the information in an application-supplied buffer.</span></span> <span data-ttu-id="b1fde-112">As informações de fluxo suplementares podem incluir definições de configuração para os métodos de compactação e descompactação usados em um fluxo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-112">Supplementary stream information might include configuration settings for the compression and decompression methods used on a stream.</span></span> <span data-ttu-id="b1fde-113">Você pode obter o tamanho de buffer necessário usando a macro [**AVIStreamDataSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamdatasize) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-113">You can obtain the required buffer size by using the [**AVIStreamDataSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamdatasize) macro.</span></span>

<span data-ttu-id="b1fde-114">Você pode recuperar informações de formatação sobre um fluxo usando a função [**AVIStreamReadFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamreadformat) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-114">You can retrieve formatting information about a stream by using the [**AVIStreamReadFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamreadformat) function.</span></span> <span data-ttu-id="b1fde-115">Essa função retorna uma estrutura específica de fluxo em um buffer fornecido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-115">This function returns a stream-specific structure in an application-supplied buffer.</span></span> <span data-ttu-id="b1fde-116">Para um fluxo de vídeo, o buffer contém informações de formatação em uma estrutura [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-116">For a video stream, the buffer contains formatting information in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure.</span></span> <span data-ttu-id="b1fde-117">Para um fluxo de áudio, o buffer contém informações de formatação em uma estrutura [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) ou [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-117">For an audio stream, the buffer contains formatting information in a [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) or [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) structure.</span></span> <span data-ttu-id="b1fde-118">Para outros tipos de fluxo, o manipulador de fluxo retorna informações específicas para o fluxo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-118">For other stream types, the stream handler returns information specific to the stream.</span></span> <span data-ttu-id="b1fde-119">Você pode determinar o tamanho do buffer necessário usando **AVIStreamReadFormat** e especificando um endereço de buffer **nulo** ou usando a macro [**AVIStreamFormatSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamformatsize) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-119">You can determine the required buffer size by using **AVIStreamReadFormat** and specifying a **NULL** buffer address or by using the [**AVIStreamFormatSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamformatsize) macro.</span></span>

<span data-ttu-id="b1fde-120">Você pode recuperar o conteúdo multimídia em um fluxo usando a função [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-120">You can retrieve the multimedia content in a stream by using the [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) function.</span></span> <span data-ttu-id="b1fde-121">Essa função copia dados brutos do fluxo para um buffer fornecido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b1fde-121">This function copies raw data from the stream into an application-supplied buffer.</span></span> <span data-ttu-id="b1fde-122">Para fluxos de vídeo, essa função recupera as imagens de bitmap que compõem o conteúdo do quadro.</span><span class="sxs-lookup"><span data-stu-id="b1fde-122">For video streams, this function retrieves the bitmapped images that make up the frame content.</span></span> <span data-ttu-id="b1fde-123">Para fluxos de áudio, essa função recupera amostras de wave-áudio que compõem o conteúdo do som.</span><span class="sxs-lookup"><span data-stu-id="b1fde-123">For audio streams, this function retrieves waveform-audio samples that make up the sound content.</span></span> <span data-ttu-id="b1fde-124">Você pode determinar o tamanho do buffer necessário usando **AVIStreamRead** e especificando um endereço de buffer **nulo** ou usando a macro [**AVIStreamSampleSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamsamplesize) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-124">You can determine the required buffer size by using **AVIStreamRead** and specifying a **NULL** buffer address or by using the [**AVIStreamSampleSize**](/windows/desktop/api/Vfw/nf-vfw-avistreamsamplesize) macro.</span></span>

<span data-ttu-id="b1fde-125">Alguns manipuladores de fluxo AVI introduzem atrasos associados à inicialização ou à coordenação de software e hardware.</span><span class="sxs-lookup"><span data-stu-id="b1fde-125">Some AVI stream handlers introduce delays associated with software and hardware initialization or coordination.</span></span> <span data-ttu-id="b1fde-126">Você pode informar esses manipuladores para se preparar para o streaming de dados usando a função [**AVIStreamBeginStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreambeginstreaming) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-126">You can inform these handlers to prepare for data streaming by using the [**AVIStreamBeginStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreambeginstreaming) function.</span></span> <span data-ttu-id="b1fde-127">Essa função permite que o manipulador de fluxo aloque e inicialize os recursos de que precisa.</span><span class="sxs-lookup"><span data-stu-id="b1fde-127">This function lets the stream handler allocate and initialize the resources it needs.</span></span> <span data-ttu-id="b1fde-128">Para informar esses manipuladores quando o streaming terminar, use a função [**AVIStreamEndStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreamendstreaming) .</span><span class="sxs-lookup"><span data-stu-id="b1fde-128">To inform these handlers when streaming has ended, use the [**AVIStreamEndStreaming**](/windows/desktop/api/Vfw/nf-vfw-avistreamendstreaming) function.</span></span> <span data-ttu-id="b1fde-129">Essa função permite que o manipulador de fluxo desaloque os recursos alocados para **AVIStreamBeginStreaming**.</span><span class="sxs-lookup"><span data-stu-id="b1fde-129">This function lets the stream handler deallocate the resources it allocated for **AVIStreamBeginStreaming**.</span></span>

<span data-ttu-id="b1fde-130">A função [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) não fornece serviços de descompactação.</span><span class="sxs-lookup"><span data-stu-id="b1fde-130">The [**AVIStreamRead**](/windows/desktop/api/Vfw/nf-vfw-avistreamread) function does not provide decompression services.</span></span> <span data-ttu-id="b1fde-131">Para obter informações sobre como compactar e descompactar fluxos de áudio, consulte [Gerenciador de compactação de áudio](audio-compression-manager.md).</span><span class="sxs-lookup"><span data-stu-id="b1fde-131">For information about compressing and decompressing audio streams, see [Audio Compression Manager](audio-compression-manager.md).</span></span> <span data-ttu-id="b1fde-132">Para obter informações sobre como compactar e descompactar fluxos de vídeo, consulte [Gerenciador de compactação de vídeo](video-compression-manager.md).</span><span class="sxs-lookup"><span data-stu-id="b1fde-132">For information about compressing and decompressing video streams, see [Video Compression Manager](video-compression-manager.md).</span></span> <span data-ttu-id="b1fde-133">Para obter informações sobre como compactar e descompactar quadros individuais em um fluxo de vídeo, consulte [trabalhando com dados de vídeo compactados em um fluxo](working-with-compressed-video-data-in-a-stream.md).</span><span class="sxs-lookup"><span data-stu-id="b1fde-133">For information about compressing and decompressing individual frames in a video stream, see [Working with Compressed Video Data in a Stream](working-with-compressed-video-data-in-a-stream.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b1fde-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b1fde-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b1fde-135">Operações de fluxo</span><span class="sxs-lookup"><span data-stu-id="b1fde-135">Stream Operations</span></span>](stream-operations.md)
</dt> </dl>

 

 