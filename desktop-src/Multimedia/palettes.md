---
title: Paletas
description: Paletas
ms.assetid: ee048f9a-3036-40dc-a6d7-f612b9ef767c
keywords:
- DrawDib, paletas
- Função DrawDibRealize
- Função DrawDibDraw
- Função DrawDibSetPalette
- Função DrawDibGetPalette
- Função DrawDibChangePalette
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5935831d8996c424a386f86082282f9cf7c1c12
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103917260"
---
# <a name="palettes"></a><span data-ttu-id="6d3b5-109">Paletas</span><span class="sxs-lookup"><span data-stu-id="6d3b5-109">Palettes</span></span>

<span data-ttu-id="6d3b5-110">As funções DrawDib exigem que um aplicativo responda a duas mensagens orientadas a paleta: [**WM \_ QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) e [**WM \_ paletachanged**](/windows/desktop/gdi/wm-palettechanged).</span><span class="sxs-lookup"><span data-stu-id="6d3b5-110">The DrawDib functions require that an application respond to two palette-oriented messages: [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) and [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged).</span></span> <span data-ttu-id="6d3b5-111">Se seu aplicativo não reconhecer a paleta, você precisará adicionar um manipulador para cada uma dessas mensagens.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-111">If your application is not palette-aware, you will need to add a handler for each of these messages.</span></span> <span data-ttu-id="6d3b5-112">Para obter mais informações sobre como processar as mensagens do **WM \_ QUERYNEWPALETTE** e do **WM da \_ Paletachanged** , consulte [adicionando manipuladores de mensagens da paleta](adding-palette-message-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="6d3b5-112">For more information about processing the **WM\_QUERYNEWPALETTE** and **WM\_PALETTECHANGED** messages, see [Adding Palette Message Handlers](adding-palette-message-handlers.md).</span></span>

<span data-ttu-id="6d3b5-113">Você pode obter a paleta DrawDib atual para o controlador de domínio usando a função [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-113">You can realize the current DrawDib palette to the DC by using the [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) function.</span></span> <span data-ttu-id="6d3b5-114">Você deve perceber a paleta em resposta à mensagem do [**WM \_ QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) ou do [**WM da \_ paletachanged**](/windows/desktop/gdi/wm-palettechanged) ou ao se preparar para exibir uma sequência de imagens usando a função [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-114">You should realize the palette in response to the [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) or [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged) message, or when you prepare to display an image sequence by using the [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) function.</span></span>

<span data-ttu-id="6d3b5-115">Você pode desenhar uma imagem mapeada para outra paleta usando a função [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-115">You can draw an image mapped to another palette by using the [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) function.</span></span> <span data-ttu-id="6d3b5-116">Essa função força o controlador de domínio DrawDib a usar a paleta especificada, o que pode afetar a qualidade da imagem.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-116">This function forces the DrawDib DC to use the specified palette, which can affect the image quality.</span></span> <span data-ttu-id="6d3b5-117">Por exemplo, um aplicativo com reconhecimento de paleta pode ter percebido uma paleta e precisa impedir que o DrawDib perceba sua própria paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-117">For example, an application that is palette-aware might have realized a palette and needs to prevent DrawDib from realizing its own palette.</span></span> <span data-ttu-id="6d3b5-118">O aplicativo pode usar **DrawDibSetPalette** para notificar o DrawDib da paleta a ser usada.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-118">The application can use **DrawDibSetPalette** to notify DrawDib of the palette to use.</span></span>

<span data-ttu-id="6d3b5-119">Você pode obter um identificador da paleta de primeiro plano atual usando a função [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-119">You can obtain a handle of the current foreground palette by using the [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) function.</span></span> <span data-ttu-id="6d3b5-120">Se seu aplicativo usar a paleta de primeiro plano atual, ele não terá o uso exclusivo da paleta e outro aplicativo poderá invalidar o identificador da paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-120">If your application uses the current foreground palette, it does not have exclusive use of the palette and another application can invalidate the palette handle.</span></span> <span data-ttu-id="6d3b5-121">Seu aplicativo não deve liberar a paleta quando você terminar de usá-la.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-121">Your application should not free the palette when you finish using it.</span></span> <span data-ttu-id="6d3b5-122">A liberação da paleta pode invalidar o identificador da paleta para outro aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-122">Freeing the palette could invalidate the palette handle for another application.</span></span>

<span data-ttu-id="6d3b5-123">Você pode preparar o DrawDib para receber novos valores de cor para sua paleta usando a função [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-123">You can prepare DrawDib to receive new color values for its palette by using the [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) function.</span></span> <span data-ttu-id="6d3b5-124">No código a seguir **DrawDibChangePalette**, você atribui novos valores para a tabela de cores da paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-124">In the code following **DrawDibChangePalette**, you assign new values for the palette color table.</span></span> <span data-ttu-id="6d3b5-125">Se o sinalizador de **\_ animação do DDF** não estiver definido no controlador de domínio DrawDib quando você chamar **DrawDibChangePalette**, você poderá aplicar as alterações da paleta usando [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) para perceber a paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-125">If the **DDF\_ANIMATE** flag is not set in the DrawDib DC when you call **DrawDibChangePalette**, you can enact the palette changes by using [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) to realize the palette.</span></span> <span data-ttu-id="6d3b5-126">Em seguida, você pode usar [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) para redesenhar a imagem.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-126">You can then use [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) to redraw the image.</span></span> <span data-ttu-id="6d3b5-127">Se o sinalizador de **\_ animação do DDF** for definido no DrawDib DC, você poderá animar a paleta e as cores do bitmap exibido usando **DrawDibDraw** ou **DrawDibRealize**.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-127">If the **DDF\_ANIMATE** flag is set in the DrawDib DC, you can animate the palette and the colors of the displayed bitmap by using **DrawDibDraw** or **DrawDibRealize**.</span></span> <span data-ttu-id="6d3b5-128">Você pode atualizar o sinalizador de **\_ animação do DDF** usando as funções [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) e [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) .</span><span class="sxs-lookup"><span data-stu-id="6d3b5-128">You can update the **DDF\_ANIMATE** flag by using the [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions.</span></span>

> [!Note]  
> <span data-ttu-id="6d3b5-129">Se você liberar a paleta DrawDib enquanto ela estiver selecionada por um controlador de domínio, um erro de GDI (interface de dispositivo gráfico) poderá resultar quando o DC usar a paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-129">If you free the DrawDib palette while it is selected by a DC, a graphics device interface (GDI) error can result when the DC uses the palette.</span></span> <span data-ttu-id="6d3b5-130">Em vez disso, seu aplicativo deve usar [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) para alterar o controlador de domínio DrawDib para usar a paleta padrão ou outra paleta.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-130">Instead, your application should use [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) to change the DrawDib DC to use the default palette or another palette.</span></span>

 

<span data-ttu-id="6d3b5-131">As funções [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose)e [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) podem liberar a paleta DrawDib.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-131">The [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose), and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions can free the DrawDib palette.</span></span> <span data-ttu-id="6d3b5-132">No entanto, essas funções devem ser usadas somente quando a paleta não tiver sido selecionada pelo controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-132">However, these functions should be used only when the palette has not been selected by the DC.</span></span> <span data-ttu-id="6d3b5-133">A função DrawDibDraw também pode liberar a paleta quando ela usa o mesmo controlador de domínio DrawDib, mas especifica parâmetros de desenho diferentes (*lpbi*, *dxDst*, *dyDst*, *dxSrc* ou *dySrc*) ou um formato diferente.</span><span class="sxs-lookup"><span data-stu-id="6d3b5-133">The DrawDibDraw function can also free the palette when it uses the same DrawDib DC, but specifies different drawing parameters (*lpbi*, *dxDst*, *dyDst*, *dxSrc*, or *dySrc*) or a different format.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6d3b5-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6d3b5-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6d3b5-135">Renderização de imagem</span><span class="sxs-lookup"><span data-stu-id="6d3b5-135">Image Rendering</span></span>](image-rendering.md)
</dt> </dl>

 

 