---
title: Serviços de formato de arquivo de intercâmbio de recursos
description: Serviços de formato de arquivo de intercâmbio de recursos
ms.assetid: 8526794b-7b40-470f-94f7-935d7dbf9151
keywords:
- e/s de arquivo multimídia, formato de arquivo de intercâmbio de recursos (RIFF)
- e/s de arquivo, formato de arquivo de intercâmbio de recursos (RIFF)
- entrada e saída (e/s), formato de arquivo de intercâmbio de recursos (RIFF)
- E/s (entrada e saída), formato de arquivo de intercâmbio de recursos (RIFF)
- função mmioOpen
- formato de arquivo de intercâmbio de recursos (RIFF)
- RIFF (formato de arquivo de intercâmbio de recursos)
- E/S DO RIFF
- Parte do RIFF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 50cca3792ccded248951065c7b69f2e50d27e0ba
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104293908"
---
# <a name="resource-interchange-file-format-services"></a><span data-ttu-id="efec3-112">Serviços de formato de arquivo de intercâmbio de recursos</span><span class="sxs-lookup"><span data-stu-id="efec3-112">Resource Interchange File Format Services</span></span>

<span data-ttu-id="efec3-113">O formato preferencial para arquivos de multimídia é o formato de arquivo de intercâmbio de recursos (RIFF).</span><span class="sxs-lookup"><span data-stu-id="efec3-113">The preferred format for multimedia files is resource interchange file format (RIFF).</span></span> <span data-ttu-id="efec3-114">As funções de e/s de arquivo RIFF funcionam com os serviços de e/s de arquivo em buffer básico e sem buffer.</span><span class="sxs-lookup"><span data-stu-id="efec3-114">The RIFF file I/O functions work with the basic buffered and unbuffered file I/O services.</span></span> <span data-ttu-id="efec3-115">Você pode abrir, ler e gravar arquivos RIFF da mesma maneira que outros tipos de arquivo.</span><span class="sxs-lookup"><span data-stu-id="efec3-115">You can open, read, and write RIFF files in the same way as other file types.</span></span> <span data-ttu-id="efec3-116">Para obter informações detalhadas sobre o RIFF, consulte [funções e macros do avifile](avifile-functions-and-macros.md).</span><span class="sxs-lookup"><span data-stu-id="efec3-116">For detailed information about RIFF, see [AVIFile Functions and Macros](avifile-functions-and-macros.md).</span></span>

<span data-ttu-id="efec3-117">Os arquivos RIFF usam códigos de quatro caracteres para identificar elementos de arquivo.</span><span class="sxs-lookup"><span data-stu-id="efec3-117">RIFF files use four-character codes to identify file elements.</span></span> <span data-ttu-id="efec3-118">Esses códigos são quantidades de 32 bits que representam uma sequência de um a quatro caracteres alfanuméricos ASCII, preenchidos à direita com caracteres de espaço.</span><span class="sxs-lookup"><span data-stu-id="efec3-118">These codes are 32-bit quantities representing a sequence of one to four ASCII alphanumeric characters, padded on the right with space characters.</span></span> <span data-ttu-id="efec3-119">O tipo de dados para códigos de quatro caracteres é **FOURCC**.</span><span class="sxs-lookup"><span data-stu-id="efec3-119">The data type for four-character codes is **FOURCC**.</span></span> <span data-ttu-id="efec3-120">Use a macro [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) para converter quatro caracteres em um código de quatro caracteres.</span><span class="sxs-lookup"><span data-stu-id="efec3-120">Use the [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) macro to convert four characters into a four-character code.</span></span> <span data-ttu-id="efec3-121">Para converter uma cadeia de caracteres terminada em nulo em um código de quatro caracteres, use a função [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) .</span><span class="sxs-lookup"><span data-stu-id="efec3-121">To convert a null-terminated string into a four-character code, use the [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) function.</span></span>

<span data-ttu-id="efec3-122">O bloco de construção básico de um arquivo RIFF é uma *parte*.</span><span class="sxs-lookup"><span data-stu-id="efec3-122">The basic building block of a RIFF file is a *chunk*.</span></span> <span data-ttu-id="efec3-123">Uma parte é uma unidade lógica de dados de multimídia, como um único quadro em um clipe de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efec3-123">A chunk is a logical unit of multimedia data, such as a single frame in a video clip.</span></span> <span data-ttu-id="efec3-124">Cada parte contém os seguintes campos:</span><span class="sxs-lookup"><span data-stu-id="efec3-124">Each chunk contains the following fields:</span></span>

-   <span data-ttu-id="efec3-125">Um código de quatro caracteres que especifica o identificador da parte</span><span class="sxs-lookup"><span data-stu-id="efec3-125">A four-character code specifying the chunk identifier</span></span>
-   <span data-ttu-id="efec3-126">Um valor doubleword especificando o tamanho do membro de dados na parte</span><span class="sxs-lookup"><span data-stu-id="efec3-126">A doubleword value specifying the size of the data member in the chunk</span></span>
-   <span data-ttu-id="efec3-127">Um campo de dados</span><span class="sxs-lookup"><span data-stu-id="efec3-127">A data field</span></span>

<span data-ttu-id="efec3-128">A ilustração a seguir mostra uma parte "RIFF" que contém duas subpartes.</span><span class="sxs-lookup"><span data-stu-id="efec3-128">The following illustration shows a "RIFF" chunk that contains two subchunks.</span></span>

![a parte do riff que contém duas imagens de subpartes](images/mmio1.gif)

<span data-ttu-id="efec3-130">Uma parte contida em outra parte é uma *subparte*.</span><span class="sxs-lookup"><span data-stu-id="efec3-130">A chunk contained in another chunk is a *subchunk*.</span></span> <span data-ttu-id="efec3-131">As únicas partes com permissão para conter subpartes são aquelas com um identificador de parte de "RIFF" ou "LIST".</span><span class="sxs-lookup"><span data-stu-id="efec3-131">The only chunks allowed to contain subchunks are those with a chunk identifier of "RIFF" or "LIST".</span></span> <span data-ttu-id="efec3-132">Uma parte que contém outra parte é chamada de *parte pai*.</span><span class="sxs-lookup"><span data-stu-id="efec3-132">A chunk that contains another chunk is called a *parent chunk*.</span></span> <span data-ttu-id="efec3-133">A primeira parte em um arquivo RIFF deve ser uma parte "RIFF".</span><span class="sxs-lookup"><span data-stu-id="efec3-133">The first chunk in a RIFF file must be a "RIFF" chunk.</span></span> <span data-ttu-id="efec3-134">Todas as outras partes no arquivo são subpartes da parte "RIFF".</span><span class="sxs-lookup"><span data-stu-id="efec3-134">All other chunks in the file are subchunks of the "RIFF" chunk.</span></span>

<span data-ttu-id="efec3-135">As partes de "RIFF" incluem um campo adicional nos primeiros quatro bytes do campo de dados.</span><span class="sxs-lookup"><span data-stu-id="efec3-135">"RIFF" chunks include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="efec3-136">Esse campo adicional fornece o *tipo de formulário* do campo.</span><span class="sxs-lookup"><span data-stu-id="efec3-136">This additional field provides the *form type* of the field.</span></span> <span data-ttu-id="efec3-137">O tipo de formulário é um código de quatro caracteres que identifica o formato dos dados armazenados no arquivo.</span><span class="sxs-lookup"><span data-stu-id="efec3-137">The form type is a four-character code identifying the format of the data stored in the file.</span></span> <span data-ttu-id="efec3-138">Por exemplo, os arquivos de áudio de forma de onda da Microsoft têm um tipo de formulário de "onda".</span><span class="sxs-lookup"><span data-stu-id="efec3-138">For example, Microsoft waveform-audio files have a form type of "WAVE".</span></span>

<span data-ttu-id="efec3-139">As partes de "LISTAr" também incluem um campo adicional nos primeiros quatro bytes do campo de dados.</span><span class="sxs-lookup"><span data-stu-id="efec3-139">"LIST" chunks also include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="efec3-140">Esse campo adicional contém o *tipo de lista* do campo.</span><span class="sxs-lookup"><span data-stu-id="efec3-140">This additional field contains the *list type* of the field.</span></span> <span data-ttu-id="efec3-141">O tipo de lista é um código de quatro caracteres que identifica o conteúdo da lista.</span><span class="sxs-lookup"><span data-stu-id="efec3-141">The list type is a four-character code identifying the contents of the list.</span></span> <span data-ttu-id="efec3-142">Por exemplo, uma parte de "lista" com um tipo de lista de "informações" pode conter as partes "ICOP" e "ICRD", fornecendo informações de data e de direitos autorais.</span><span class="sxs-lookup"><span data-stu-id="efec3-142">For example, a "LIST" chunk with a list type of "INFO" can contain "ICOP" and "ICRD" chunks providing copyright and creation date information.</span></span> <span data-ttu-id="efec3-143">A ilustração a seguir mostra uma parte "RIFF" que contém uma parte de "lista" e outra subparte (a parte "lista" contém duas subpartes).</span><span class="sxs-lookup"><span data-stu-id="efec3-143">The following illustration shows a "RIFF" chunk that contains a "LIST" chunk and one other subchunk (the "LIST" chunk contains two subchunks).</span></span>

![parte do riff que contém uma imagem de parte da lista](images/mmio2.gif)

<span data-ttu-id="efec3-145">Os serviços de e/s de arquivo de multimídia incluem duas funções que você pode usar para navegar entre partes em um arquivo RIFF: [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) e [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span><span class="sxs-lookup"><span data-stu-id="efec3-145">Multimedia file I/O services include two functions you can use to navigate among chunks in a RIFF file: [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) and [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span></span> <span data-ttu-id="efec3-146">Você pode usar essas funções como funções de busca de alto nível.</span><span class="sxs-lookup"><span data-stu-id="efec3-146">You can use these functions as high-level seek functions.</span></span> <span data-ttu-id="efec3-147">Quando você descende em uma parte, a posição do arquivo é definida como o campo de dados da parte (8 bytes do início da parte).</span><span class="sxs-lookup"><span data-stu-id="efec3-147">When you descend into a chunk, the file position is set to the data field of the chunk (8 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="efec3-148">Para as partes "RIFF" e "lista", a posição do arquivo é definida como o local após o tipo de formulário ou de lista (12 bytes a partir do início da parte).</span><span class="sxs-lookup"><span data-stu-id="efec3-148">For "RIFF" and "LIST" chunks, the file position is set to the location following the form type or list type (12 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="efec3-149">Quando você estiver em ordem ascendente de uma parte, a posição do arquivo será definida como o local após o final da parte.</span><span class="sxs-lookup"><span data-stu-id="efec3-149">When you ascend out of a chunk, the file position is set to the location following the end of the chunk.</span></span>

<span data-ttu-id="efec3-150">Para criar uma nova parte, use a função [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) para gravar um cabeçalho de parte na posição atual em um arquivo aberto.</span><span class="sxs-lookup"><span data-stu-id="efec3-150">To create a new chunk, use the [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) function to write a chunk header at the current position in an open file.</span></span> <span data-ttu-id="efec3-151">As funções **mmioAscend**, **mmioDescend** e **mmioCreateChunk** usam a estrutura [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) para especificar e recuperar informações sobre partes "riff".</span><span class="sxs-lookup"><span data-stu-id="efec3-151">The **mmioAscend**, **mmioDescend**, and **mmioCreateChunk** functions use the [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) structure to specify and retrieve information about "RIFF" chunks.</span></span>

 

 