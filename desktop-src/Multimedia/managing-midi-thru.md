---
title: Gerenciando MIDI por
description: Gerenciando MIDI por
ms.assetid: ba03a2a1-d998-498d-ad53-027ba2b6e276
keywords:
- MIDI (interface digital de instrumento musical), por meio do driver
- MIDI (interface digital de instrumento musical), por meio do driver
- gravando áudio MIDI, por meio do driver
- Driver MIDI por
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24214dd3f6cd13ca034b2555398f6055e4ce2da1
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103917196"
---
# <a name="managing-midi-thru"></a><span data-ttu-id="7ed10-107">Gerenciando MIDI por</span><span class="sxs-lookup"><span data-stu-id="7ed10-107">Managing MIDI Thru</span></span>

<span data-ttu-id="7ed10-108">Você pode conectar um dispositivo de entrada MIDI diretamente a um dispositivo de saída de MIDI para que, quando o dispositivo de entrada receber uma mensagem de [**\_ dados do mim**](mim-data.md) , o sistema envie uma mensagem com os mesmos dados de evento MIDI para o driver de dispositivo de saída.</span><span class="sxs-lookup"><span data-stu-id="7ed10-108">You can connect a MIDI input device directly to a MIDI output device so that when the input device receives an [**MIM\_DATA**](mim-data.md) message, the system sends a message with the same MIDI event data to the output device driver.</span></span> <span data-ttu-id="7ed10-109">Para conectar um dispositivo de saída MIDI a um dispositivo de entrada MIDI, use a função [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-109">To connect a MIDI output device to a MIDI input device, use the [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) function.</span></span>

<span data-ttu-id="7ed10-110">Para obter o melhor desempenho possível com várias saídas, um aplicativo pode optar por fornecer uma forma especial de driver de saída de MIDI, chamada por *meio de driver*.</span><span class="sxs-lookup"><span data-stu-id="7ed10-110">To achieve the best possible performance with multiple outputs, an application can choose to supply a special form of MIDI output driver, called a *thru driver*.</span></span> <span data-ttu-id="7ed10-111">Embora o sistema permita que apenas um dispositivo de saída MIDI seja conectado a um dispositivo de entrada MIDI, vários dispositivos de saída MIDI podem ser conectados a um driver por meio do.</span><span class="sxs-lookup"><span data-stu-id="7ed10-111">Although the system allows only one MIDI output device to be connected to a MIDI input device, multiple MIDI output devices can be connected to a thru driver.</span></span> <span data-ttu-id="7ed10-112">Um aplicativo em um sistema desse tipo poderia conectar o dispositivo de entrada MIDI a esse dispositivo por meio dele e conectar o dispositivo MIDI via a tantos dispositivos de saída MIDI quantos forem necessários.</span><span class="sxs-lookup"><span data-stu-id="7ed10-112">An application on such a system could connect the MIDI input device to this thru device and connect the MIDI thru device to as many MIDI output devices as needed.</span></span> <span data-ttu-id="7ed10-113">Para obter mais informações sobre drivers, consulte a documentação do driver de dispositivo do Windows.</span><span class="sxs-lookup"><span data-stu-id="7ed10-113">For more information about thru drivers, see the Windows device-driver documentation.</span></span>

## <a name="using-messages-to-manage-midi-recording"></a><span data-ttu-id="7ed10-114">Usando mensagens para gerenciar a gravação de MIDI</span><span class="sxs-lookup"><span data-stu-id="7ed10-114">Using Messages to Manage MIDI Recording</span></span>

<span data-ttu-id="7ed10-115">As mensagens a seguir podem ser enviadas para um procedimento de retorno de chamada de thread ou de janela para gerenciar a gravação de MIDI.</span><span class="sxs-lookup"><span data-stu-id="7ed10-115">The following messages can be sent to a window or thread callback procedure for managing MIDI recording.</span></span>



| <span data-ttu-id="7ed10-116">Valor</span><span class="sxs-lookup"><span data-stu-id="7ed10-116">Value</span></span>                                          | <span data-ttu-id="7ed10-117">Significado</span><span class="sxs-lookup"><span data-stu-id="7ed10-117">Meaning</span></span>                                                                                                                                |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7ed10-118">**Eu \_ fechar do mim \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-118">**MM\_MIM\_CLOSE**</span></span>](mm-mim-close.md)         | <span data-ttu-id="7ed10-119">Enviado quando um dispositivo de entrada MIDI é fechado usando a função [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-119">Sent when a MIDI input device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                      |
| [<span data-ttu-id="7ed10-120">**\_dados do mim mm \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-120">**MM\_MIM\_DATA**</span></span>](mm-mim-data.md)           | <span data-ttu-id="7ed10-121">Enviado quando uma mensagem MIDI completa é recebida.</span><span class="sxs-lookup"><span data-stu-id="7ed10-121">Sent when a complete MIDI message is received.</span></span> <span data-ttu-id="7ed10-122">(Essa mensagem é usada para todas as mensagens MIDI, exceto mensagens exclusivas do sistema.)</span><span class="sxs-lookup"><span data-stu-id="7ed10-122">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="7ed10-123">**\_erro do mim mm \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-123">**MM\_MIM\_ERROR**</span></span>](mm-mim-error.md)         | <span data-ttu-id="7ed10-124">Enviado quando uma mensagem MIDI inválida é recebida.</span><span class="sxs-lookup"><span data-stu-id="7ed10-124">Sent when an invalid MIDI message is received.</span></span> <span data-ttu-id="7ed10-125">(Essa mensagem é usada para todas as mensagens MIDI, exceto mensagens exclusivas do sistema.)</span><span class="sxs-lookup"><span data-stu-id="7ed10-125">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="7ed10-126">**\_LONGDATA do mim mm \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-126">**MM\_MIM\_LONGDATA**</span></span>](mm-mim-longdata.md)   | <span data-ttu-id="7ed10-127">Enviado quando uma mensagem exclusiva do sistema MIDI é recebida ou quando um buffer é preenchido com dados exclusivos do sistema.</span><span class="sxs-lookup"><span data-stu-id="7ed10-127">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="7ed10-128">**\_LONGERROR do mim mm \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-128">**MM\_MIM\_LONGERROR**</span></span>](mm-mim-longerror.md) | <span data-ttu-id="7ed10-129">Enviado quando uma mensagem exclusiva do sistema MIDI é recebida.</span><span class="sxs-lookup"><span data-stu-id="7ed10-129">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="7ed10-130">**\_MOREDATA do mim mm \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-130">**MM\_MIM\_MOREDATA**</span></span>](mm-mim-moredata.md)   | <span data-ttu-id="7ed10-131">Enviado quando um aplicativo não está processando mensagens de [**\_ dados do mim**](mim-data.md) com rapidez suficiente para acompanhar o driver de dispositivo de entrada.</span><span class="sxs-lookup"><span data-stu-id="7ed10-131">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="7ed10-132">**MIM de MM \_ \_ aberto**</span><span class="sxs-lookup"><span data-stu-id="7ed10-132">**MM\_MIM\_OPEN**</span></span>](mm-mim-open.md)           | <span data-ttu-id="7ed10-133">Enviado quando um dispositivo de entrada MIDI é aberto usando a função [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-133">Sent when a MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                        |



 

<span data-ttu-id="7ed10-134">Um parâmetro *wParam* e um parâmetro *lParam* são associados a cada uma dessas mensagens.</span><span class="sxs-lookup"><span data-stu-id="7ed10-134">A *wParam* parameter and an *lParam* parameter are associated with each of these messages.</span></span> <span data-ttu-id="7ed10-135">O parâmetro *wParam* sempre especifica o identificador de um dispositivo MIDI aberto.</span><span class="sxs-lookup"><span data-stu-id="7ed10-135">The *wParam* parameter always specifies the handle of an open MIDI device.</span></span> <span data-ttu-id="7ed10-136">O parâmetro *lParam* não é usado para as mensagens de [**\_ \_ abertura**](mm-mim-open.md) do mim de DD e mm de mm [**\_ \_**](mm-mim-close.md) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-136">The *lParam* parameter is unused for the [**MM\_MIM\_CLOSE**](mm-mim-close.md) and [**MM\_MIM\_OPEN**](mm-mim-open.md) messages.</span></span>

<span data-ttu-id="7ed10-137">Para a mensagem [**mm do \_ mim \_ LONGDATA**](mm-mim-longdata.md) , *lpMidiHdr* especifica um endereço de uma estrutura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) que identifica o buffer para mensagens exclusivas do sistema.</span><span class="sxs-lookup"><span data-stu-id="7ed10-137">For the [**MM\_MIM\_LONGDATA**](mm-mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="7ed10-138">O buffer pode não estar completamente cheio, pois o tamanho das mensagens exclusivas do sistema geralmente não é conhecido antes de ser gravado e porque os buffers cujo tamanho total pode conter a maior mensagem esperada devem ser alocados.</span><span class="sxs-lookup"><span data-stu-id="7ed10-138">The buffer may not be completely filled, because the size of the system-exclusive messages is usually not known before being recorded and because buffers whose total size can contain the largest expected message must be allocated.</span></span> <span data-ttu-id="7ed10-139">Para determinar a quantidade de dados válidos presentes no buffer, use o membro **dwBytesRecorded** da estrutura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="7ed10-139">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

## <a name="using-a-callback-function-to-manage-midi-recording"></a><span data-ttu-id="7ed10-140">Usando uma função de retorno de chamada para gerenciar a gravação de MIDI</span><span class="sxs-lookup"><span data-stu-id="7ed10-140">Using a Callback Function to Manage MIDI Recording</span></span>

<span data-ttu-id="7ed10-141">Você pode definir sua própria função de retorno de chamada para gerenciar a gravação de dispositivos de entrada MIDI.</span><span class="sxs-lookup"><span data-stu-id="7ed10-141">You can define your own callback function to manage recording for MIDI input devices.</span></span> <span data-ttu-id="7ed10-142">A função de retorno de chamada está documentada como [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="7ed10-142">The callback function is documented as [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span></span>

<span data-ttu-id="7ed10-143">As mensagens a seguir podem ser enviadas para o parâmetro *wMsg* da função de retorno de chamada **MidiInProc** .</span><span class="sxs-lookup"><span data-stu-id="7ed10-143">The following messages can be sent to the *wMsg* parameter of the **MidiInProc** callback function.</span></span>



| <span data-ttu-id="7ed10-144">Valor</span><span class="sxs-lookup"><span data-stu-id="7ed10-144">Value</span></span>                                   | <span data-ttu-id="7ed10-145">Significado</span><span class="sxs-lookup"><span data-stu-id="7ed10-145">Meaning</span></span>                                                                                                                                |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7ed10-146">**próximo a MIM \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-146">**MIM\_CLOSE**</span></span>](mim-close.md)         | <span data-ttu-id="7ed10-147">Enviado quando o dispositivo é fechado usando a função [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-147">Sent when the device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                               |
| [<span data-ttu-id="7ed10-148">**dados do MIM \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-148">**MIM\_DATA**</span></span>](mim-data.md)           | <span data-ttu-id="7ed10-149">Enviado quando uma mensagem MIDI completa é recebida (essa mensagem é usada para todas as mensagens MIDI, exceto para mensagens exclusivas do sistema).</span><span class="sxs-lookup"><span data-stu-id="7ed10-149">Sent when a complete MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="7ed10-150">**erro do MIM \_**</span><span class="sxs-lookup"><span data-stu-id="7ed10-150">**MIM\_ERROR**</span></span>](mim-error.md)         | <span data-ttu-id="7ed10-151">Enviado quando uma mensagem MIDI inválida é recebida (essa mensagem é usada para todas as mensagens MIDI, exceto para mensagens exclusivas do sistema).</span><span class="sxs-lookup"><span data-stu-id="7ed10-151">Sent when an invalid MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="7ed10-152">**\_LONGDATA mim**</span><span class="sxs-lookup"><span data-stu-id="7ed10-152">**MIM\_LONGDATA**</span></span>](mim-longdata.md)   | <span data-ttu-id="7ed10-153">Enviado quando uma mensagem exclusiva do sistema MIDI é recebida ou quando um buffer é preenchido com dados exclusivos do sistema.</span><span class="sxs-lookup"><span data-stu-id="7ed10-153">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="7ed10-154">**\_LONGERROR mim**</span><span class="sxs-lookup"><span data-stu-id="7ed10-154">**MIM\_LONGERROR**</span></span>](mim-longerror.md) | <span data-ttu-id="7ed10-155">Enviado quando uma mensagem exclusiva do sistema MIDI é recebida.</span><span class="sxs-lookup"><span data-stu-id="7ed10-155">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="7ed10-156">**\_MOREDATA mim**</span><span class="sxs-lookup"><span data-stu-id="7ed10-156">**MIM\_MOREDATA**</span></span>](mim-moredata.md)   | <span data-ttu-id="7ed10-157">Enviado quando um aplicativo não está processando mensagens de [**\_ dados do mim**](mim-data.md) com rapidez suficiente para acompanhar o driver de dispositivo de entrada.</span><span class="sxs-lookup"><span data-stu-id="7ed10-157">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="7ed10-158">**MIM \_ aberto**</span><span class="sxs-lookup"><span data-stu-id="7ed10-158">**MIM\_OPEN**</span></span>](mim-open.md)           | <span data-ttu-id="7ed10-159">Enviado quando o dispositivo de entrada MIDI é aberto usando a função [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="7ed10-159">Sent when the MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                      |



 

<span data-ttu-id="7ed10-160">Essas mensagens são semelhantes àquelas enviadas para funções de procedimento de janela, mas os parâmetros são diferentes.</span><span class="sxs-lookup"><span data-stu-id="7ed10-160">These messages are similar to those sent to window procedure functions, but the parameters are different.</span></span> <span data-ttu-id="7ed10-161">Um identificador do dispositivo MIDI aberto é passado como um parâmetro para a função de retorno de chamada, junto com o doubleword de dados de instância que foi passado usando **midiInOpen**.</span><span class="sxs-lookup"><span data-stu-id="7ed10-161">A handle of the open MIDI device is passed as a parameter to the callback function, along with the doubleword of instance data that was passed by using **midiInOpen**.</span></span>

<span data-ttu-id="7ed10-162">Para a mensagem do [**mim \_ LONGDATA**](mim-longdata.md) , *lpMidiHdr* especifica um endereço de uma estrutura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) que identifica o buffer para mensagens exclusivas do sistema.</span><span class="sxs-lookup"><span data-stu-id="7ed10-162">For the [**MIM\_LONGDATA**](mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="7ed10-163">O buffer pode não estar completamente cheio.</span><span class="sxs-lookup"><span data-stu-id="7ed10-163">The buffer might not be completely filled.</span></span> <span data-ttu-id="7ed10-164">Para determinar a quantidade de dados válidos presentes no buffer, use o membro **dwBytesRecorded** da estrutura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="7ed10-164">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

<span data-ttu-id="7ed10-165">Depois que o driver de dispositivo for concluído com um bloco de dados, você poderá limpar e liberar o bloco de dados.</span><span class="sxs-lookup"><span data-stu-id="7ed10-165">After the device driver is finished with a data block, you can clean up and free the data block.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7ed10-166">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7ed10-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7ed10-167">Gravando áudio MIDI</span><span class="sxs-lookup"><span data-stu-id="7ed10-167">Recording MIDI Audio</span></span>](recording-midi-audio.md)
</dt> </dl>

 

 