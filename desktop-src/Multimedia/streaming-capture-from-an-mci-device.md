---
title: Captura de fluxo de um dispositivo MCI
description: Captura de fluxo de um dispositivo MCI
ms.assetid: 44cbf375-f97e-426a-a703-dfb1b1933138
keywords:
- MCI (interface de controle de mídia), captura de streaming
- WM_CAP_SET_MCI_DEVICE mensagem
- macro capSetMCIDeviceName
- WM_CAP_GET_MCI_DEVICE mensagem
- macro capGetMCIDeviceName
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ab8cf358a87a812024328abf7fc1aae0509a126f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104498773"
---
# <a name="streaming-capture-from-an-mci-device"></a><span data-ttu-id="ccc41-108">Captura de fluxo de um dispositivo MCI</span><span class="sxs-lookup"><span data-stu-id="ccc41-108">Streaming Capture from an MCI Device</span></span>

<span data-ttu-id="ccc41-109">Os dispositivos MCI aumentam a operação de captura em captura em tempo real e captura de quadro de etapa.</span><span class="sxs-lookup"><span data-stu-id="ccc41-109">MCI devices augment the capture operation in real-time capture and step-frame capture.</span></span> <span data-ttu-id="ccc41-110">Você pode especificar o dispositivo MCI, como um VIDEODISC ou um gravador de fita de vídeo (VCR), agindo como a fonte de vídeo para a operação de captura usando a mensagem do [**\_ \_ \_ \_ dispositivo MCI de conjunto de Cap do WM**](wm-cap-set-mci-device.md) (ou a macro [**capSetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capsetmcidevicename) ) e especificando o nome do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ccc41-110">You can specify the MCI device, such as a videodisc or video-cassette recorder (VCR), acting as the video source for your capture operation by using the [**WM\_CAP\_SET\_MCI\_DEVICE**](wm-cap-set-mci-device.md) message (or the [**capSetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capsetmcidevicename) macro) and specifying the name of the device.</span></span> <span data-ttu-id="ccc41-111">Você também pode recuperar o nome do dispositivo definido atualmente usando a mensagem de [**\_ \_ \_ \_ dispositivo MCI do WM Cap Get**](wm-cap-get-mci-device.md) (ou a macro [**capGetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capgetmcidevicename) ).</span><span class="sxs-lookup"><span data-stu-id="ccc41-111">You can also retrieve the device name currently set by using the [**WM\_CAP\_GET\_MCI\_DEVICE**](wm-cap-get-mci-device.md) message (or the [**capGetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capgetmcidevicename) macro).</span></span>

<span data-ttu-id="ccc41-112">Na captura em tempo real, a janela de captura sincroniza a operação de captura e compensa os atrasos associados ao posicionamento da fonte de vídeo MCI e a inicialização dos recursos (como buffers de captura) necessários para a captura de dados.</span><span class="sxs-lookup"><span data-stu-id="ccc41-112">In real-time capture, the capture window synchronizes the capture operation and compensates for delays associated with positioning the MCI video source and initializing the resources (such as capture buffers) required for capturing data.</span></span> <span data-ttu-id="ccc41-113">A janela de captura espera que um dispositivo de vídeo MCI válido seja instalado no sistema para capturar dados dessa maneira.</span><span class="sxs-lookup"><span data-stu-id="ccc41-113">The capture window expects a valid MCI video device to be installed in the system for capturing data this way.</span></span>

<span data-ttu-id="ccc41-114">As especificações para controlar um dispositivo MCI são armazenadas nos membros da estrutura [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) .</span><span class="sxs-lookup"><span data-stu-id="ccc41-114">Specifications for controlling an MCI device are stored in the members of the [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) structure.</span></span> <span data-ttu-id="ccc41-115">As fontes de vídeo compatíveis com MCI incluem VCRs e laserdiscs.</span><span class="sxs-lookup"><span data-stu-id="ccc41-115">MCI-compatible video sources include VCRs and laserdiscs.</span></span> <span data-ttu-id="ccc41-116">Se o membro **fMCIControl** dessa estrutura for definido como **true**, a janela de captura coordenará a operação MCI.</span><span class="sxs-lookup"><span data-stu-id="ccc41-116">If the **fMCIControl** member of this structure is set to **TRUE**, the capture window coordinates MCI operation.</span></span> <span data-ttu-id="ccc41-117">A janela de captura usa os parâmetros especificados nos membros **dwMCIStartTime** e **dwMCIStopTime** para obter as posições de início e de parada, em milissegundos, da sequência.</span><span class="sxs-lookup"><span data-stu-id="ccc41-117">The capture window uses the parameters specified in the **dwMCIStartTime** and **dwMCIStopTime** members to obtain the starting and stopping positions, in milliseconds, of the sequence.</span></span> <span data-ttu-id="ccc41-118">Se o valor de **fMCIControl** for **false**, a fonte de vídeo não será tratada como um dispositivo MCI e o conteúdo de **dwMCIStartTime** e **dwMCIStopTime** serão ignorados.</span><span class="sxs-lookup"><span data-stu-id="ccc41-118">If the value of **fMCIControl** is **FALSE**, the video source is not treated as an MCI device and the contents of **dwMCIStartTime** and **dwMCIStopTime** are ignored.</span></span>

<span data-ttu-id="ccc41-119">Você pode usar o player de mídia para verificar rapidamente se um dispositivo de vídeo MCI está conectado corretamente ao sistema.</span><span class="sxs-lookup"><span data-stu-id="ccc41-119">You can use Media Player to quickly verify that an MCI video device is properly connected to the system.</span></span> <span data-ttu-id="ccc41-120">A reprodução de um dispositivo com o player de mídia verifica se a configuração do MCI do dispositivo está correta.</span><span class="sxs-lookup"><span data-stu-id="ccc41-120">Playing a device with Media Player verifies that the MCI configuration for the device is correct.</span></span> <span data-ttu-id="ccc41-121">Se uma imagem aparecer na tela de vídeo, a fonte de vídeo será conectada corretamente ao hardware de captura.</span><span class="sxs-lookup"><span data-stu-id="ccc41-121">If an image appears on the video display, the video source is connected properly to the capture hardware.</span></span>

<span data-ttu-id="ccc41-122">Na captura de quadros de etapa, a janela de captura sincroniza a operação de captura e compensa os atrasos associados ao posicionamento da fonte de vídeo MCI e a inicialização dos recursos necessários para a captura de dados.</span><span class="sxs-lookup"><span data-stu-id="ccc41-122">In step-frame capture, the capture window synchronizes the capture operation and compensates for the delays associated with positioning the MCI video source and initializing the resources required for capturing data.</span></span> <span data-ttu-id="ccc41-123">Além disso, a janela de captura garante que nenhum quadro seja Descartado; Ele percorre os quadros de vídeo individualmente, garantindo que o quadro seja capturado e armazenado antes de capturar o próximo quadro no fluxo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ccc41-123">In addition, the capture window ensures that no frames are dropped; it steps through the video frames individually, ensuring that the frame is captured and stored before capturing the next frame in the video stream.</span></span>

<span data-ttu-id="ccc41-124">As especificações para controlar a captura de quadro de etapa são armazenadas nos membros da estrutura [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) .</span><span class="sxs-lookup"><span data-stu-id="ccc41-124">Specifications for controlling step-frame capture are stored in the members of the [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) structure.</span></span> <span data-ttu-id="ccc41-125">A captura de quadro de etapa usa os seguintes membros, além dos membros usados para captura em tempo real: **fStepMCIDevice**, **fStepCaptureAt2x** e **wStepCaptureAverageFrames**.</span><span class="sxs-lookup"><span data-stu-id="ccc41-125">Step-frame capture uses the following members in addition to the members used for real-time capture: **fStepMCIDevice**, **fStepCaptureAt2x**, and **wStepCaptureAverageFrames**.</span></span> <span data-ttu-id="ccc41-126">Se o membro **fStepMCIDevice** for definido como **true**, a janela de captura coordenará a captura de quadro de etapa.</span><span class="sxs-lookup"><span data-stu-id="ccc41-126">If the **fStepMCIDevice** member is set to **TRUE**, the capture window coordinates step-frame capture.</span></span> <span data-ttu-id="ccc41-127">A janela de captura usa os parâmetros especificados nos membros **dwMCIStartTime** e **dwMCIStopTime** para as posições de início e parada, em milissegundos, da sequência.</span><span class="sxs-lookup"><span data-stu-id="ccc41-127">The capture window uses the parameters specified in the **dwMCIStartTime** and **dwMCIStopTime** members for the starting and stopping positions, in milliseconds, of the sequence.</span></span> <span data-ttu-id="ccc41-128">A janela de captura usa **fStepCaptureAt2x** para determinar se o hardware de captura deve capturar quadros de vídeo em duas vezes a resolução normal e usa **wStepCaptureAverageFrames** para especificar o número de vezes que cada quadro na operação de captura é amostrado.</span><span class="sxs-lookup"><span data-stu-id="ccc41-128">The capture window uses **fStepCaptureAt2x** to determine if the capture hardware should capture video frames at twice the normal resolution and uses **wStepCaptureAverageFrames** to specify the number of times each frame in the capture operation is sampled.</span></span>

<span data-ttu-id="ccc41-129">Se **fStepMCIDevice** for **false**, a captura em tempo real será usada em vez de captura de quadro de etapa e o conteúdo de **fStepCaptureAt2x** e **wStepCaptureAverageFrames** serão ignorados.</span><span class="sxs-lookup"><span data-stu-id="ccc41-129">If **fStepMCIDevice** is **FALSE**, real-time capture is used instead of step-frame capture and the contents of **fStepCaptureAt2x**, and **wStepCaptureAverageFrames** are ignored.</span></span>

<span data-ttu-id="ccc41-130">Se uma captura de quadro de etapa for especificada e **fStepCaptureAt2x** for definido como **true**, o hardware de captura será capturado em duas vezes a resolução especificada.</span><span class="sxs-lookup"><span data-stu-id="ccc41-130">If a step-frame capture is specified and **fStepCaptureAt2x** is set to **TRUE**, the capture hardware captures at twice the specified resolution.</span></span> <span data-ttu-id="ccc41-131">(As resoluções de altura e largura são duplas.) O software interpola os pixels na imagem de resolução mais alta para produzir a imagem na resolução especificada.</span><span class="sxs-lookup"><span data-stu-id="ccc41-131">(The resolutions of both the height and width are doubled.) The software interpolates the pixels in the higher resolution image to produce the image at the specified resolution.</span></span> <span data-ttu-id="ccc41-132">Essa forma de média pode melhorar a definição de borda de imagens em um quadro.</span><span class="sxs-lookup"><span data-stu-id="ccc41-132">This form of averaging can improve the edge definition of images in a frame.</span></span> <span data-ttu-id="ccc41-133">Você pode habilitar essa opção se o hardware não oferecer suporte a Decimation baseadas em hardware e você estiver capturando no formato RGB.</span><span class="sxs-lookup"><span data-stu-id="ccc41-133">You can enable this option if the hardware does not support hardware-based decimation and you are capturing in the RGB format.</span></span>

> [!Note]  
> <span data-ttu-id="ccc41-134">Se o hardware der suporte a Decimation com base em hardware, ele poderá capturar amostras em uma taxa mais alta do que a especificada e usar esses exemplos adicionais para obter definições de cores mais consistentes com a imagem original.</span><span class="sxs-lookup"><span data-stu-id="ccc41-134">If your hardware supports hardware-based decimation, it can capture samples at a higher rate than specified and use these additional samples to obtain color definitions that are more consistent with the original image.</span></span> <span data-ttu-id="ccc41-135">Os exemplos adicionais são descartados após serem usados e o hardware passa amostras para o driver de captura na taxa especificada.</span><span class="sxs-lookup"><span data-stu-id="ccc41-135">The additional samples are discarded after they are used, and the hardware passes samples to the capture driver at the specified rate.</span></span>

 

<span data-ttu-id="ccc41-136">Se uma captura de quadro de etapa for especificada, o membro **wStepCaptureAverageFrames** especificará o número de vezes que um quadro é amostrado ao criar um quadro com base no exemplo médio.</span><span class="sxs-lookup"><span data-stu-id="ccc41-136">If a step-frame capture is specified, the **wStepCaptureAverageFrames** member specifies the number of times a frame is sampled when creating a frame based on the average sample.</span></span> <span data-ttu-id="ccc41-137">Essa técnica de média reduz o ruído de digitalização aleatória que aparece em um quadro.</span><span class="sxs-lookup"><span data-stu-id="ccc41-137">This averaging technique reduces the random digitization noise appearing in a frame.</span></span> <span data-ttu-id="ccc41-138">Um valor típico para o número de médias é 5.</span><span class="sxs-lookup"><span data-stu-id="ccc41-138">A typical value for the number of averages is 5.</span></span>

<span data-ttu-id="ccc41-139">Para obter mais informações sobre o MCI, consulte [MCI](mci.md).</span><span class="sxs-lookup"><span data-stu-id="ccc41-139">For more information about MCI, see [MCI](mci.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="ccc41-140">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ccc41-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ccc41-141">Capturar variações</span><span class="sxs-lookup"><span data-stu-id="ccc41-141">Capture Variations</span></span>](capture-variations.md)
</dt> </dl>

 

 




