---
title: Informações do conjunto de trabalho
description: O conjunto de trabalho de um processo é a quantidade de memória mapeada fisicamente para seu contexto de processo. O PSAPI permite que você tire instantâneos do conjunto de trabalho ou monitore o conjunto de trabalho.
ms.assetid: 33c42f79-cc77-4d44-84c3-8bf0a4a60019
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea3942796ec1150dee411d6074b13f9ee2be4a22
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104084803"
---
# <a name="working-set-information"></a><span data-ttu-id="60d6f-104">Informações do conjunto de trabalho</span><span class="sxs-lookup"><span data-stu-id="60d6f-104">Working Set Information</span></span>

<span data-ttu-id="60d6f-105">O conjunto de trabalho de um processo é a quantidade de memória mapeada fisicamente para seu contexto de processo.</span><span class="sxs-lookup"><span data-stu-id="60d6f-105">The working set of a process is the amount of memory physically mapped to its process context.</span></span> <span data-ttu-id="60d6f-106">O PSAPI permite que você tire instantâneos do conjunto de trabalho ou monitore o conjunto de trabalho.</span><span class="sxs-lookup"><span data-stu-id="60d6f-106">PSAPI enables you to take snapshots of the working set or to monitor the working set.</span></span>

<span data-ttu-id="60d6f-107">A função [**QueryWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-queryworkingset) ou [**QueryWorkingSetEx**](/windows/desktop/api/Psapi/nf-psapi-queryworkingsetex) preenche um buffer com um instantâneo das informações de cada página no conjunto de trabalho atual do processo especificado.</span><span class="sxs-lookup"><span data-stu-id="60d6f-107">The [**QueryWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-queryworkingset) or [**QueryWorkingSetEx**](/windows/desktop/api/Psapi/nf-psapi-queryworkingsetex) function fills a buffer with a snapshot of the information for every page in the current working set of the specified process.</span></span> <span data-ttu-id="60d6f-108">A função relata apenas as páginas fisicamente presentes no momento exato em que são chamadas.</span><span class="sxs-lookup"><span data-stu-id="60d6f-108">The function reports only those pages that are physically present at the exact moment it is called.</span></span>

<span data-ttu-id="60d6f-109">Você pode usar o monitoramento de conjunto de trabalho para descobrir a quantidade de RAM adicional que uma operação específica leva (por exemplo, salvar um arquivo).</span><span class="sxs-lookup"><span data-stu-id="60d6f-109">You can use working set monitoring to find out how much additional RAM a particular operation takes (for example, saving a file).</span></span> <span data-ttu-id="60d6f-110">Para começar a monitorar o conjunto de trabalho, chame a função [**InitializeProcessForWsWatch**](/windows/desktop/api/Psapi/nf-psapi-initializeprocessforwswatch) .</span><span class="sxs-lookup"><span data-stu-id="60d6f-110">To begin monitoring the working set, call the [**InitializeProcessForWsWatch**](/windows/desktop/api/Psapi/nf-psapi-initializeprocessforwswatch) function.</span></span> <span data-ttu-id="60d6f-111">Nem todos os processos permitem que você leia suas informações de conjunto de trabalho, portanto, certifique-se de que a função retorna um valor diferente de zero antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="60d6f-111">Not all processes let you read their working set information, so be sure that the function returns a nonzero value before you continue.</span></span> <span data-ttu-id="60d6f-112">Em seguida, chame a função [**GetWsChanges**](/windows/desktop/api/Psapi/nf-psapi-getwschanges) .</span><span class="sxs-lookup"><span data-stu-id="60d6f-112">Next, call the [**GetWsChanges**](/windows/desktop/api/Psapi/nf-psapi-getwschanges) function.</span></span> <span data-ttu-id="60d6f-113">Essa função relata apenas as páginas que foram carregadas na memória desde que você começou a monitorar o conjunto de trabalho.</span><span class="sxs-lookup"><span data-stu-id="60d6f-113">This function reports only the pages that have been loaded in memory since you began monitoring the working set.</span></span> <span data-ttu-id="60d6f-114">A função retorna dados em uma matriz de estruturas de [**\_ informações de \_ inspeção \_ do WS psapi**](/windows/desktop/api/Psapi/ns-psapi-psapi_ws_watch_information) , uma estrutura para cada nova página adicionada ao conjunto de trabalho do processo.</span><span class="sxs-lookup"><span data-stu-id="60d6f-114">The function returns data in an array of [**PSAPI\_WS\_WATCH\_INFORMATION**](/windows/desktop/api/Psapi/ns-psapi-psapi_ws_watch_information) structures, one structure for each new page added to the working set of the process.</span></span> <span data-ttu-id="60d6f-115">A estrutura informa quais páginas estão na memória e o que fez com que o sistema a Pagesse.</span><span class="sxs-lookup"><span data-stu-id="60d6f-115">The structure tells you which pages are in memory, and what caused the system to page them in.</span></span>

<span data-ttu-id="60d6f-116">A função [**EmptyWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-emptyworkingset) usa um identificador de processo.</span><span class="sxs-lookup"><span data-stu-id="60d6f-116">The [**EmptyWorkingSet**](/windows/desktop/api/Psapi/nf-psapi-emptyworkingset) function takes a process handle.</span></span> <span data-ttu-id="60d6f-117">Ele remove o máximo de páginas possível do conjunto de trabalho do processo.</span><span class="sxs-lookup"><span data-stu-id="60d6f-117">It removes as many pages as possible from the process working set.</span></span> <span data-ttu-id="60d6f-118">Essa operação é útil principalmente para teste e ajuste.</span><span class="sxs-lookup"><span data-stu-id="60d6f-118">This operation is useful primarily for testing and tuning.</span></span> <span data-ttu-id="60d6f-119">Observe que a função [**SetProcessWorkingSetSize**](/windows/desktop/api/winbase/nf-winbase-setprocessworkingsetsize) faz a mesma coisa se você passá-la-1 para os tamanhos mínimo e máximo.</span><span class="sxs-lookup"><span data-stu-id="60d6f-119">Note that the [**SetProcessWorkingSetSize**](/windows/desktop/api/winbase/nf-winbase-setprocessworkingsetsize) function does the same thing if you pass it -1 for the minimum and maximum sizes.</span></span>

## <a name="related-topics"></a><span data-ttu-id="60d6f-120">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="60d6f-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="60d6f-121">Conjunto de trabalho</span><span class="sxs-lookup"><span data-stu-id="60d6f-121">Working Set</span></span>](/windows/desktop/Memory/working-set)
</dt> </dl>

 

 