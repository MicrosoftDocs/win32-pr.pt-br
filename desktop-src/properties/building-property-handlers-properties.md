---
description: As propriedades são representadas por IDs conhecidas como identificadores de propriedade (PIDs).
ms.assetid: a773c7b3-a1a2-4cce-ae5f-b54217ea06f4
title: Noções básicas sobre manipuladores de propriedade
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b44d0a3a6d0a1b6c929eb151551155d0b5435a0
ms.sourcegitcommit: ecd0ba4732f5264aab9baa2839c11f7fea36318f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/07/2021
ms.locfileid: "113481931"
---
# <a name="understanding-property-handlers"></a><span data-ttu-id="71256-103">Noções básicas sobre manipuladores de propriedade</span><span class="sxs-lookup"><span data-stu-id="71256-103">Understanding Property Handlers</span></span>

<span data-ttu-id="71256-104">As propriedades são representadas por IDs conhecidas como identificadores de propriedade (PIDs).</span><span class="sxs-lookup"><span data-stu-id="71256-104">Properties are represented by IDs known as property identifiers (PIDs).</span></span> <span data-ttu-id="71256-105">Cada propriedade deve ter um GUID (identificador global exclusivo).</span><span class="sxs-lookup"><span data-stu-id="71256-105">Each property MUST have a globally unique identifier (GUID).</span></span> <span data-ttu-id="71256-106">Esse identificador consiste em um GUID, representando uma coleção de propriedades chamada um conjunto de propriedades, além de uma cadeia de caracteres ou um inteiro de 32 bits para identificar a propriedade dentro do conjunto.</span><span class="sxs-lookup"><span data-stu-id="71256-106">This identifier consists of a GUID, representing a collection of properties called a property set plus either a string or a 32-bit integer to identify the property within the set.</span></span> <span data-ttu-id="71256-107">Se o formulário inteiro da ID for usado, os valores 0x00000000, 0xFFFFFFFF e 0xFFFFFFFE serão considerados inválidos.</span><span class="sxs-lookup"><span data-stu-id="71256-107">If the integer form of ID is used, the values 0x00000000, 0xFFFFFFFF, and 0xFFFFFFFE are considered invalid.</span></span> <span data-ttu-id="71256-108">Os fornecedores podem garantir que suas propriedades sejam definidas exclusivamente colocando-as em um conjunto de propriedades definido por seus próprios GUIDs.</span><span class="sxs-lookup"><span data-stu-id="71256-108">Vendors can guarantee that their properties are uniquely defined by placing them in a property set defined by their own GUIDs.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="71256-109">É fundamental que você defina as propriedades com cuidado e estrategicamente para a primeira versão do esquema.</span><span class="sxs-lookup"><span data-stu-id="71256-109">It is critical that you define properties carefully and strategically for the first release of the schema.</span></span> <span data-ttu-id="71256-110">As alterações nas propriedades personalizadas (como a largura da coluna ou tipo de propriedade) não serão refletidas no banco de dados depois que um esquema tiver sido registrado.</span><span class="sxs-lookup"><span data-stu-id="71256-110">Any changes to custom properties (such as column width or property type) will not be reflected in the database after a schema has been registered.</span></span> <span data-ttu-id="71256-111">A única maneira de ter essas alterações reconhecidas depois que o esquema foi registrado uma vez em um sistema seria recriar o índice e, em seguida, registrar o novo esquema, ou registrar o esquema e, em seguida, criar uma nova propriedade (que consiste em um nome canônico e um PKEY) para cada versão do subequent; por exemplo `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` , e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="71256-111">The only way to have these changes recognized after the schema has been registered once on a system would be either to rebuild the index and then register the new schema, or to register the schema and then create a new property (which consists of a canonical name and a PKEY) for each subequent release; for example `PKEY_GroupName_PropertyNameV2`, `PKEY_GroupName_PropertyNameV3`, and so forth).</span></span> <span data-ttu-id="71256-112">Não recomendamos a criação de novas propriedades dessa maneira, pois várias colunas estranhas podem afetar o desempenho do sistema.</span><span class="sxs-lookup"><span data-stu-id="71256-112">We do not recommend creating new properties in this manner, because multiple extraneous columns may impact system performance.</span></span>

 

<span data-ttu-id="71256-113">Este tópico é organizado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="71256-113">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="71256-114">Metadados</span><span class="sxs-lookup"><span data-stu-id="71256-114">Metadata</span></span>](#metadata)
    -   [<span data-ttu-id="71256-115">Abrir metadados</span><span class="sxs-lookup"><span data-stu-id="71256-115">Open Metadata</span></span>](#open-metadata)
-   [<span data-ttu-id="71256-116">Sobre manipuladores de propriedade</span><span class="sxs-lookup"><span data-stu-id="71256-116">About Property Handlers</span></span>](#about-property-handlers)
-   [<span data-ttu-id="71256-117">Tecnologia herdada</span><span class="sxs-lookup"><span data-stu-id="71256-117">Legacy Technology</span></span>](#legacy-technology)
-   [<span data-ttu-id="71256-118">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="71256-118">Related topics</span></span>](#related-topics)

## <a name="metadata"></a><span data-ttu-id="71256-119">Metadados</span><span class="sxs-lookup"><span data-stu-id="71256-119">Metadata</span></span>

<span data-ttu-id="71256-120">no Windows Vista e posterior, um novo sistema de propriedades baseado em metadados é fundamental para organizar itens, como arquivos, email e contatos.</span><span class="sxs-lookup"><span data-stu-id="71256-120">In Windows Vista and later, a new property system based on metadata is central to organizing items such as files, e-mail, and contacts.</span></span> <span data-ttu-id="71256-121">Nesse novo sistema de propriedades, os itens podem ser pesquisados com base em seus metadados e os usuários podem ler ou gravar esses metadados.</span><span class="sxs-lookup"><span data-stu-id="71256-121">In this new property system, items can be searched based on their metadata, and users can read or write that metadata.</span></span> <span data-ttu-id="71256-122">Os metadados nesse sistema são representados por um conjunto extensível de *Propriedades* implementadas como pares de nome/valor.</span><span class="sxs-lookup"><span data-stu-id="71256-122">Metadata in this system is represented by an extensible set of *properties* implemented as name/value pairs.</span></span>

<span data-ttu-id="71256-123">no Windows Vista e posterior, um amplo conjunto de propriedades abrange as especificidades de itens como fotos, música, documentos, mensagens, contatos e arquivos.</span><span class="sxs-lookup"><span data-stu-id="71256-123">In Windows Vista and later, an extensive set of properties covers the specifics of items such as photos, music, documents, messages, contacts, and files.</span></span> <span data-ttu-id="71256-124">ISVs (fornecedores independentes de software) podem introduzir suas próprias propriedades para a plataforma se nenhuma propriedade existente atender às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="71256-124">Independent software vendors (ISVs) can introduce their own properties to the platform if no existing property meets their needs.</span></span>

### <a name="open-metadata"></a><span data-ttu-id="71256-125">Abrir metadados</span><span class="sxs-lookup"><span data-stu-id="71256-125">Open Metadata</span></span>

<span data-ttu-id="71256-126">o sistema de propriedades no Windows Vista e posterior é um sistema de metadados aberto.</span><span class="sxs-lookup"><span data-stu-id="71256-126">The property system in Windows Vista and later is an open metadata system.</span></span> <span data-ttu-id="71256-127">Um formato de arquivo armazena qualquer propriedade atribuída a ele e expõe esse valor quando consultado, independentemente da relevância ou significado.</span><span class="sxs-lookup"><span data-stu-id="71256-127">A file format stores any property assigned to it and exposes that value when queried, regardless of relevance or meaning.</span></span> <span data-ttu-id="71256-128">Isso permite que os desenvolvedores de terceiros anexem Propriedades extras ao arquivo sem a necessidade de uma alteração no manipulador de propriedades associado a ela.</span><span class="sxs-lookup"><span data-stu-id="71256-128">This enables third-party developers to attach extra properties to the file without requiring a change in the property handler associated with it.</span></span> <span data-ttu-id="71256-129">Os metadados abertos são um conceito poderoso.</span><span class="sxs-lookup"><span data-stu-id="71256-129">Open metadata is a powerful concept.</span></span> <span data-ttu-id="71256-130">Para obter mais informações sobre como dar suporte a metadados abertos para um formato de arquivo baseado em XML, consulte "suporte a metadados abertos" em [inicializando manipuladores de propriedade](./building-property-handlers-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="71256-130">For more information about how to support open metadata for an XML-based file format, see "Supporting Open Metadata" in [Initializing Property Handlers](./building-property-handlers-property-handlers.md).</span></span>

> [!Note]  
> <span data-ttu-id="71256-131">Manipuladores de propriedade sempre são associados a tipos de arquivo específicos; Portanto, se o formato de arquivo contiver propriedades que exigem um manipulador de propriedade personalizada, você sempre deverá registrar uma extensão de nome de arquivo exclusiva para cada formato de arquivo.</span><span class="sxs-lookup"><span data-stu-id="71256-131">Property handlers are always associated with specific file types; thus, if your file format contains properties that require a custom property handler, you should always register a unique file name extension for each file format.</span></span>

 

## <a name="about-property-handlers"></a><span data-ttu-id="71256-132">Sobre manipuladores de propriedade</span><span class="sxs-lookup"><span data-stu-id="71256-132">About Property Handlers</span></span>

<span data-ttu-id="71256-133">no Windows Vista e posterior, Windows tem um sistema de propriedades extensível para armazenar e recuperar metadados nos arquivos e itens de dados que você acessa.</span><span class="sxs-lookup"><span data-stu-id="71256-133">In Windows Vista and later, Windows has an extensible property system for storing and retrieving metadata in the files and data items that you access.</span></span> <span data-ttu-id="71256-134">Windows o Explorer e o Windows sistema de pesquisa, juntamente com outros aplicativos, usam manipuladores de propriedade para ler e modificar esses metadados.</span><span class="sxs-lookup"><span data-stu-id="71256-134">Windows Explorer and the Windows Search system, along with other applications, use property handlers to read and modify this metadata.</span></span> <span data-ttu-id="71256-135">Se você for um desenvolvedor que possui um tipo de arquivo específico, deverá registrar um manipulador de propriedades para dar ao sistema de propriedades acesso aos metadados em seus arquivos.</span><span class="sxs-lookup"><span data-stu-id="71256-135">If you are a developer who owns a specific file type, you should register a property handler to give the property system access to the metadata in your files.</span></span> <span data-ttu-id="71256-136">Em alguns casos, você pode usar um manipulador de propriedades existente que possa ler e entender o formato de arquivo e suas propriedades; em outros casos, talvez seja necessário desenvolver um novo manipulador de propriedades para o tipo de arquivo.</span><span class="sxs-lookup"><span data-stu-id="71256-136">In some cases, you might be able to use an existing property handler that can read and understand your file format and its properties; in other cases, you might need to develop a new property handler for your file type.</span></span>

<span data-ttu-id="71256-137">A primeira etapa na escrita de um manipulador de propriedades é considerar as propriedades às quais o tipo de arquivo dá suporte.</span><span class="sxs-lookup"><span data-stu-id="71256-137">The first step in writing a property handler is to consider what properties your file type supports.</span></span> <span data-ttu-id="71256-138">Os valores de propriedade são armazenados no fluxo de arquivos, principalmente para habilitar a transportabilidade.</span><span class="sxs-lookup"><span data-stu-id="71256-138">Property values are stored in the file stream, primarily to enable transportability.</span></span> <span data-ttu-id="71256-139">Quando os valores de propriedade são armazenados no próprio arquivo, como estão nesse sistema, um usuário pode copiar um arquivo para outro computador, uma unidade flash USB ou outro sistema de arquivos, ou enviar o arquivo como um anexo de email, as propriedades viajam com o arquivo e nunca saem da sincronização ou são perdidos.</span><span class="sxs-lookup"><span data-stu-id="71256-139">When the property values are stored in the file itself, as they are in this system, a user can copy a file to another computer, a USB flash drive, or another file system, or sends the file as an e-mail attachment, the properties travel with the file and never get out of sync or lost.</span></span> <span data-ttu-id="71256-140">Portanto, se o formato de arquivo oferecer suporte ao armazenamento de informações extras, é melhor armazenar as propriedades no próprio arquivo.</span><span class="sxs-lookup"><span data-stu-id="71256-140">Therefore, if the file format supports storing extra information, it is best to store the properties in the file itself.</span></span>

<span data-ttu-id="71256-141">A próxima etapa é determinar quais propriedades o arquivo deve fornecer.</span><span class="sxs-lookup"><span data-stu-id="71256-141">The next step is to determine which properties the file should provide.</span></span> <span data-ttu-id="71256-142">Inicialmente, você pode imaginar que um conjunto limitado de propriedades é adequado.</span><span class="sxs-lookup"><span data-stu-id="71256-142">You might initially think that a limited set of properties is adequate.</span></span> <span data-ttu-id="71256-143">Um arquivo de áudio pode dar suporte apenas a propriedades relacionadas a áudio e terminar.</span><span class="sxs-lookup"><span data-stu-id="71256-143">An audio file could support only audio-related properties and end there.</span></span> <span data-ttu-id="71256-144">No entanto, esse arquivo de áudio pode ser uma gravação de uma sessão de um Tribunal de lei, arquivado por uma empresa jurídica.</span><span class="sxs-lookup"><span data-stu-id="71256-144">However, that audio file could be a recording of a session of a court of law, archived by a law firm.</span></span> <span data-ttu-id="71256-145">Nesse caso, a empresa jurídica certamente desejaria associar outras propriedades que não são de áudio a esse arquivo, como o número do caso.</span><span class="sxs-lookup"><span data-stu-id="71256-145">In that case, the law firm would certainly want to associate other non-audio properties with this file, such as the case number.</span></span> <span data-ttu-id="71256-146">O provedor do formato de arquivo de áudio não pode, possivelmente, determinar todos os cenários nos quais seu formato nunca será usado.</span><span class="sxs-lookup"><span data-stu-id="71256-146">The provider of the audio file format cannot possibly determine all of the scenarios in which their format will ever be used.</span></span> <span data-ttu-id="71256-147">Portanto, eles devem considerar habilitar o armazenamento em aberto de qualquer propriedade arbitrária com suporte no sistema de propriedades.</span><span class="sxs-lookup"><span data-stu-id="71256-147">They should therefore consider enabling blanket storage of any arbitrary property supported by the property system.</span></span>

## <a name="legacy-technology"></a><span data-ttu-id="71256-148">Tecnologia herdada</span><span class="sxs-lookup"><span data-stu-id="71256-148">Legacy Technology</span></span>

<span data-ttu-id="71256-149">a tecnologia de fluxo secundário do sistema de arquivos do Microsoft Windows NT (NTFS) foi desenvolvida para dar suporte à persistência de informações extras com o arquivo por meio de um conjunto de fluxos alternativo na camada do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="71256-149">Microsoft Windows NT File System (NTFS) secondary stream technology was developed to support the persistence of extra information with the file through an alternate stream set at the file system layer.</span></span> <span data-ttu-id="71256-150">Alguém pode estar imaginando por que esses fluxos secundários não são usados como o método Main para armazenar propriedades, especialmente com suporte a metadados abertos.</span><span class="sxs-lookup"><span data-stu-id="71256-150">One might wonder why those secondary streams are not used as the main method to store properties, especially with open metadata support.</span></span> <span data-ttu-id="71256-151">O principal motivo é a transportabilidade dessas informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="71256-151">The primary reason is the transportability of this extra information.</span></span> <span data-ttu-id="71256-152">Infelizmente, esses fluxos alternativos são removidos em vários cenários, incluindo o CSC (suporte de cache do lado do cliente), o envio de arquivos como anexos e a cópia de arquivos para um repositório não NTFS.</span><span class="sxs-lookup"><span data-stu-id="71256-152">Unfortunately, these alternate streams are removed in many scenarios including client-side caching support (CSC), sending files as attachments, and copying files to a non-NTFS store.</span></span>

<span data-ttu-id="71256-153">os fluxos secundários não fornecem uma solução robusta em que as propriedades têm garantia de viajar com o arquivo e, portanto, o Windows sistema de propriedades do Vista não fornece um mecanismo interno que explora os fluxos NTFS secundários para o armazenamento de propriedades.</span><span class="sxs-lookup"><span data-stu-id="71256-153">Secondary streams do not provide a robust solution in which properties are guaranteed to travel with the file, and hence, the Windows Vista property system does not provide a built-in mechanism that exploits the secondary NTFS streams for property storage.</span></span> <span data-ttu-id="71256-154">Os ISVs também são altamente desencorajados de criar manipuladores de propriedade que usam fluxos secundários para o armazenamento de propriedades.</span><span class="sxs-lookup"><span data-stu-id="71256-154">ISVs are also highly discouraged from building property handlers that use secondary streams for the storage of properties.</span></span> <span data-ttu-id="71256-155">É claro que há cenários em que os fluxos de NTFS secundários são apropriados, especialmente quando os aplicativos podem garantir que o arquivo com o qual estão lidando sempre seja armazenado em um volume NTFS e não se desloque como resultado da interação do usuário final.</span><span class="sxs-lookup"><span data-stu-id="71256-155">Of course there are scenarios where NTFS secondary streams are appropriate, particularly when applications can guarantee that the file they are dealing with is always stored in an NTFS volume and will not travel as a result of end user interaction.</span></span>

## <a name="related-topics"></a><span data-ttu-id="71256-156">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="71256-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="71256-157">Usando nomes de tipos</span><span class="sxs-lookup"><span data-stu-id="71256-157">Using Kind Names</span></span>](./building-property-handlers-user-friendly-kind-names.md)
</dt> <dt>

[<span data-ttu-id="71256-158">Usando listas de propriedades</span><span class="sxs-lookup"><span data-stu-id="71256-158">Using Property Lists</span></span>](./building-property-handlers-property-lists.md)
</dt> <dt>

[<span data-ttu-id="71256-159">Inicializando manipuladores de propriedade</span><span class="sxs-lookup"><span data-stu-id="71256-159">Initializing Property Handlers</span></span>](./building-property-handlers-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="71256-160">Registrando e distribuindo manipuladores de propriedade</span><span class="sxs-lookup"><span data-stu-id="71256-160">Registering and Distributing Property Handlers</span></span>](./prophand-reg-dist.md)
</dt> <dt>

[<span data-ttu-id="71256-161">Práticas recomendadas e perguntas frequentes do manipulador de propriedades</span><span class="sxs-lookup"><span data-stu-id="71256-161">Property Handler Best Practices and FAQ</span></span>](./prophand-bestprac-faq.yml)
</dt> </dl>

 

 
