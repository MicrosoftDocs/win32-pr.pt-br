---
description: O COM+ fornece vários recursos de segurança que você pode usar para ajudar a proteger seus aplicativos COM+, variando de serviços que você configura de forma administrativa para APIs que você pode chamar dentro de código.
ms.assetid: 686fb391-d337-41b4-bb51-b70f27a0c300
title: Conceitos de segurança do COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ca5126f4b715f84c2b8801c8ec1adc29b3cbb83
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010268"
---
# <a name="com-security-concepts"></a><span data-ttu-id="7b796-103">Conceitos de segurança do COM+</span><span class="sxs-lookup"><span data-stu-id="7b796-103">COM+ Security Concepts</span></span>

<span data-ttu-id="7b796-104">O COM+ fornece vários recursos de segurança que você pode usar para ajudar a proteger seus aplicativos COM+, variando de serviços que você configura de forma administrativa para APIs que você pode chamar dentro de código.</span><span class="sxs-lookup"><span data-stu-id="7b796-104">COM+ provides several security features that you can use to help protect your COM+ applications, ranging from services you configure administratively to APIs you can call within code.</span></span>

<span data-ttu-id="7b796-105">Sempre que possível, para aplicativos COM+, é melhor usar a segurança automática, como segurança e autenticação baseadas em função declarativa, em vez de configurar a segurança em componentes.</span><span class="sxs-lookup"><span data-stu-id="7b796-105">Whenever possible, for COM+ applications, it is better to use automatic security, such as declarative role-based security and authentication, rather than configuring security within components.</span></span> <span data-ttu-id="7b796-106">O uso da segurança automática facilita escrever e manter componentes, facilitar o design de segurança em um aplicativo inteiro e, por ser configurado administrativamente, mais fácil de modificar a política de segurança de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-106">Using automatic security makes it easier to write and maintain components, easier to design security across an entire application, and, because it is configured administratively, easier to modify an application's security policy.</span></span> <span data-ttu-id="7b796-107">Esses serviços de segurança automática possibilitam que você deixe toda a funcionalidade relacionada à segurança de seus componentes.</span><span class="sxs-lookup"><span data-stu-id="7b796-107">These automatic security services make it possible for you to leave all security-related functionality out of your components.</span></span> <span data-ttu-id="7b796-108">Quando você puder ativar os serviços e configurá-los adequadamente, o COM+ manipulará os detalhes de impor a política de segurança que você especificar.</span><span class="sxs-lookup"><span data-stu-id="7b796-108">When you can turn on the services and configure them appropriately, COM+ will handle the details of enforcing the security policy you specify.</span></span>

<span data-ttu-id="7b796-109">No entanto, quando os serviços de segurança automáticas no COM+ não fazem exatamente o que você precisa fazer, você pode estendê-los, criando a plataforma de segurança automática fornecida pelo COM+.</span><span class="sxs-lookup"><span data-stu-id="7b796-109">However, when the automatic security services in COM+ don't do precisely what you need them to do, you can extend them, building on the automatic security platform provided by COM+.</span></span> <span data-ttu-id="7b796-110">Nos casos em que você optar por não usar a segurança automática ou onde deseja usá-la, mas precisar criá-la para atender aos requisitos de segurança do seu aplicativo, você tem as seguintes opções para configurar a segurança programaticamente:</span><span class="sxs-lookup"><span data-stu-id="7b796-110">In cases where you choose not to use automatic security or where you want to use it but need to build on it to suit your application's security requirements, you have the following options for configuring security programmatically:</span></span>

-   <span data-ttu-id="7b796-111">Segurança baseada em função programática — por exemplo, verificação de função, que está disponível quando a segurança baseada em função está habilitada para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-111">Programmatic role-based security—for example, role checking, which is available when role-based security is enabled for your application.</span></span>
-   <span data-ttu-id="7b796-112">Representação — para quando você quiser usar a identidade de um cliente para acessar um recurso protegido.</span><span class="sxs-lookup"><span data-stu-id="7b796-112">Impersonation—for when you want to use a client's identity to access a protected resource.</span></span>
-   <span data-ttu-id="7b796-113">Recursos de auditoria com base em informações de contexto de chamada de segurança — também disponíveis quando a segurança baseada em funções está habilitada.</span><span class="sxs-lookup"><span data-stu-id="7b796-113">Auditing features based on security call context information—also available when role-based security is enabled.</span></span>

<span data-ttu-id="7b796-114">Os mecanismos usados para ajudar a proteger um determinado aplicativo dependerão dos requisitos específicos desse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-114">Which mechanisms you use to help protect a given application will depend on the particular requirements of that application.</span></span> <span data-ttu-id="7b796-115">Algumas opções de segurança podem afetar a maneira como você escreve componentes e algumas podem afetar significativamente o design do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-115">Some security choices can affect how you write components, and some can significantly affect the application's design.</span></span> <span data-ttu-id="7b796-116">Antes de tomar decisões sobre como implementar uma estratégia de segurança para um aplicativo, você deve considerar seus requisitos de segurança no contexto de seu design geral — requisitos de desempenho, acesso a dados, design físico, e escolher a combinação mais adequada de recursos de segurança.</span><span class="sxs-lookup"><span data-stu-id="7b796-116">Before you make any decisions about how to implement a security strategy for an application, you should consider its security requirements in the context of its overall design—performance requirements, data access, physical design—and choose the most suitable combination of security features.</span></span> <span data-ttu-id="7b796-117">Para obter mais informações sobre como implementar a segurança programática, consulte [programaticamente a segurança de componentes](programmatic-component-security.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-117">For more information about implementing programmatic security, see [Programmatic Component Security](programmatic-component-security.md).</span></span>

<span data-ttu-id="7b796-118">As breves descrições de categorias de segurança, recursos e problemas do COM+ são fornecidas aqui, com links para tópicos nesta seção que fornecem uma discussão detalhada de cada uma das áreas importantes.</span><span class="sxs-lookup"><span data-stu-id="7b796-118">Brief descriptions of COM+ security categories, features, and issues are provided here, with links to topics in this section that provide a detailed discussion of each of the important areas.</span></span>

> [!Note]  
> <span data-ttu-id="7b796-119">Embora não discutido nesta seção, os componentes enfileirados também têm problemas específicos relacionados aos recursos de segurança disponíveis para eles.</span><span class="sxs-lookup"><span data-stu-id="7b796-119">Although not discussed in this section, queued components also have particular issues relating to what security features are available to them.</span></span> <span data-ttu-id="7b796-120">Para obter detalhes, consulte [segurança de componentes na fila](queued-components-security.md) e [desenvolvendo componentes enfileirados](developing-queued-components.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-120">For details, see [Queued Components Security](queued-components-security.md) and [Developing Queued Components](developing-queued-components.md).</span></span>

 

## <a name="role-based-security"></a><span data-ttu-id="7b796-121">Segurança baseada em função</span><span class="sxs-lookup"><span data-stu-id="7b796-121">Role-Based Security</span></span>

<span data-ttu-id="7b796-122">A segurança baseada em função é o recurso central da segurança do aplicativo COM+.</span><span class="sxs-lookup"><span data-stu-id="7b796-122">Role-based security is the central feature of COM+ application security.</span></span> <span data-ttu-id="7b796-123">Usando funções, você pode construir administrativamente uma política de autorização para um aplicativo, escolhendo (até o nível do método, se necessário) que os usuários podem acessar quais recursos.</span><span class="sxs-lookup"><span data-stu-id="7b796-123">Using roles, you can administratively construct an authorization policy for an application, choosing (down to the method level, if necessary) which users can access which resources.</span></span> <span data-ttu-id="7b796-124">Além disso, as funções fornecem uma estrutura para impor a verificação de segurança no código se seu aplicativo exigir um controle de acesso refinado.</span><span class="sxs-lookup"><span data-stu-id="7b796-124">Additionally, roles provide a framework for enforcing security-checking within code if your application requires finer-grained access control.</span></span>

<span data-ttu-id="7b796-125">A segurança baseada em funções é criada em um mecanismo geral que permite que você recupere informações de segurança sobre todos os chamadores upstream na cadeia de chamadas para seu componente.</span><span class="sxs-lookup"><span data-stu-id="7b796-125">Role-based security is built on a general mechanism that enables you to retrieve security information regarding all upstream callers in the chain of calls to your component.</span></span> <span data-ttu-id="7b796-126">Esse recurso será útil principalmente se você quiser fazer auditoria e log detalhados.</span><span class="sxs-lookup"><span data-stu-id="7b796-126">This facility is useful particularly if you wish to do detailed auditing and logging.</span></span> <span data-ttu-id="7b796-127">Para obter uma descrição dos recursos de auditoria fornecidos pelo COM+, consulte [Acessando informações de contexto de chamada de segurança](accessing-security-call-context-information.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-127">For a description of the auditing features provided by COM+, see [Accessing Security Call Context Information](accessing-security-call-context-information.md).</span></span>

<span data-ttu-id="7b796-128">Para obter uma descrição de problemas de administração e segurança com base em função que você deve considerar ao usá-lo, consulte [Administração de segurança baseada em funções](role-based-security-administration.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-128">For a description of role-based security and administration issues that you should consider when using it, see [Role-Based Security Administration](role-based-security-administration.md).</span></span>

## <a name="client-authentication"></a><span data-ttu-id="7b796-129">Autenticação de cliente</span><span class="sxs-lookup"><span data-stu-id="7b796-129">Client Authentication</span></span>

<span data-ttu-id="7b796-130">Antes de autorizar os clientes a serem capazes de acessar os recursos, você deve ter certeza de que eles são quem dizem que estão.</span><span class="sxs-lookup"><span data-stu-id="7b796-130">Before you can authorize clients to be able to access resources, you must be confident that they are who they say they are.</span></span> <span data-ttu-id="7b796-131">Para habilitar essa verificação de identidade, o COM+ fornece serviços de autenticação.</span><span class="sxs-lookup"><span data-stu-id="7b796-131">To enable this identity verification, COM+ provides authentication services.</span></span> <span data-ttu-id="7b796-132">Embora esses serviços sejam realmente fornecidos em um nível mais fundamental pelo COM e pelo Microsoft Windows, um aplicativo COM+ permite que você simplesmente ative o serviço de autenticação administrativamente para que ele funcione nos bastidores, transparente para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-132">While these services are actually provided at a more fundamental level by COM and Microsoft Windows, a COM+ application lets you simply turn on the authentication service administratively so that it works under the covers, transparent to the application.</span></span> <span data-ttu-id="7b796-133">Para obter uma descrição dos serviços de autenticação, consulte [autenticação de cliente](client-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-133">For a description of authentication services, see [Client Authentication](client-authentication.md).</span></span>

## <a name="client-impersonation-and-delegation"></a><span data-ttu-id="7b796-134">Representação e delegação de cliente</span><span class="sxs-lookup"><span data-stu-id="7b796-134">Client Impersonation and Delegation</span></span>

<span data-ttu-id="7b796-135">Em alguns casos, seu aplicativo precisa fazer o trabalho em nome de um cliente usando a identidade do cliente, por exemplo, ao acessar um banco de dados que irá autenticar o cliente original.</span><span class="sxs-lookup"><span data-stu-id="7b796-135">In some cases, your application needs to do work on behalf of a client using the client's identity—for example, when accessing a database that is going to authenticate the original client.</span></span> <span data-ttu-id="7b796-136">Isso exige que seu aplicativo represente o cliente.</span><span class="sxs-lookup"><span data-stu-id="7b796-136">This requires your application to impersonate the client.</span></span> <span data-ttu-id="7b796-137">O COM+ fornece recursos para habilitar vários níveis de representação.</span><span class="sxs-lookup"><span data-stu-id="7b796-137">COM+ provides facilities to enable various levels of impersonation.</span></span> <span data-ttu-id="7b796-138">A representação é configurada administrativamente, mas você também deve fornecer suporte para representação com o código dos componentes do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7b796-138">Impersonation is configured administratively, but you also must provide support for impersonation with the code of your application's components.</span></span> <span data-ttu-id="7b796-139">Para obter uma descrição da representação e dos problemas relacionados a seu uso, consulte [representação e delegação do cliente](client-impersonation-and-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-139">For a description of impersonation and issues concerning its use, see [Client Impersonation and Delegation](client-impersonation-and-delegation.md).</span></span>

## <a name="using-the-software-restriction-policy-in-com"></a><span data-ttu-id="7b796-140">Usando a política de restrição de software no COM+</span><span class="sxs-lookup"><span data-stu-id="7b796-140">Using the Software Restriction Policy in COM+</span></span>

<span data-ttu-id="7b796-141">Uma diretiva de restrição de software fornece uma maneira de executar código não confiável e, portanto, potencialmente prejudicial, em um ambiente restrito para que não seja possível fazer uso incorreto dos privilégios do usuário.</span><span class="sxs-lookup"><span data-stu-id="7b796-141">A software restriction policy provides a way to run untrusted, and therefore potentially harmful, code in a constrained environment so that it cannot misuse the privileges of the user.</span></span> <span data-ttu-id="7b796-142">Ele faz isso atribuindo níveis de confiança a arquivos que o usuário pode executar.</span><span class="sxs-lookup"><span data-stu-id="7b796-142">It does this by assigning trust levels to files that the user can run.</span></span> <span data-ttu-id="7b796-143">Por exemplo, determinados arquivos do sistema podem ser totalmente confiáveis e receber acesso irrestrito aos privilégios do usuário, enquanto um arquivo que foi baixado da Internet pode ser completamente não confiável e, portanto, pode ser executado somente em um ambiente restrito no qual não é permitido usar nenhum privilégio de usuário sensível à segurança.</span><span class="sxs-lookup"><span data-stu-id="7b796-143">For example, certain system files can be fully trusted and given unrestricted access to the privileges of the user, while a file that was downloaded from the Internet might be completely untrusted and therefore allowed to run only in a restricted environment where it is disallowed from using any security-sensitive user privileges.</span></span>

<span data-ttu-id="7b796-144">A diretiva de restrição de software de todo o grupo é controlada por meio da ferramenta administrativa diretiva de segurança local, que permite aos administradores configurar níveis de confiança para arquivos individuais.</span><span class="sxs-lookup"><span data-stu-id="7b796-144">The systemwide software restriction policy is controlled through the Local Security Policy administrative tool, which enables administrators to configure trust levels for individual files.</span></span> <span data-ttu-id="7b796-145">No entanto, todos os aplicativos do servidor COM+ são executados no arquivo dllhost.exe.</span><span class="sxs-lookup"><span data-stu-id="7b796-145">However, all COM+ server applications run in the dllhost.exe file.</span></span> <span data-ttu-id="7b796-146">Portanto, o COM+ fornece uma maneira de especificar a diretiva de restrição de software para cada aplicativo de servidor para que eles não precisem depender da diretiva de restrição do arquivo de dllhost.exe.</span><span class="sxs-lookup"><span data-stu-id="7b796-146">Therefore COM+ provides a way to specify the software restriction policy for each server application so that they do not need to depend on the restriction policy of the dllhost.exe file.</span></span> <span data-ttu-id="7b796-147">Para obter uma discussão sobre como usar a política de restrição de software no COM+, consulte [usando a política de restrição de software no com+](using-the-software-restriction-policy-in-com-.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-147">For a discussion concerning how to use the software restriction policy in COM+, see [Using the Software Restriction Policy in COM+](using-the-software-restriction-policy-in-com-.md).</span></span>

## <a name="library-application-security"></a><span data-ttu-id="7b796-148">Segurança de aplicativos de biblioteca</span><span class="sxs-lookup"><span data-stu-id="7b796-148">Library Application Security</span></span>

<span data-ttu-id="7b796-149">Os aplicativos de biblioteca têm considerações de segurança especiais.</span><span class="sxs-lookup"><span data-stu-id="7b796-149">Library applications have special security considerations.</span></span> <span data-ttu-id="7b796-150">Como esses aplicativos são executados no processo do cliente, eles são afetados pela segurança imposta pelo processo de hospedagem, enquanto não é possível controlar a segurança em nível de processo.</span><span class="sxs-lookup"><span data-stu-id="7b796-150">Because these applications run in the client's process, they are affected by the security enforced by the hosting process while unable to control process-level security.</span></span> <span data-ttu-id="7b796-151">Para obter uma descrição dos fatores a serem considerados para aplicativos de biblioteca, consulte [segurança de aplicativo de biblioteca](library-application-security.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-151">For a description of factors to consider for library applications, see [Library Application Security](library-application-security.md).</span></span>

## <a name="multi-tier-application-security"></a><span data-ttu-id="7b796-152">Segurança de aplicativos de várias camadas</span><span class="sxs-lookup"><span data-stu-id="7b796-152">Multi-Tier Application Security</span></span>

<span data-ttu-id="7b796-153">Aplicativos COM+ normalmente são aplicativos de camada intermediária; ou seja, eles movem informações entre clientes e recursos de back-end, como bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="7b796-153">COM+ applications are typically middle-tier applications; that is, they move information between clients and back-end resources such as databases.</span></span> <span data-ttu-id="7b796-154">Opções difíceis podem ser envolvidas na determinação de onde a segurança deve ser imposta e em que grau.</span><span class="sxs-lookup"><span data-stu-id="7b796-154">Difficult choices can be involved in determining where security should be enforced and to what degree.</span></span> <span data-ttu-id="7b796-155">Segurança inerentemente envolve compensações de desempenho.</span><span class="sxs-lookup"><span data-stu-id="7b796-155">Security inherently involves performance trade-offs.</span></span> <span data-ttu-id="7b796-156">Algumas das mais graves ocorrem quando você deve impor a verificação de segurança na camada de dados e na camada intermediária.</span><span class="sxs-lookup"><span data-stu-id="7b796-156">Some of the most severe of these occur when you must enforce security checking at both the data tier and the middle-tier.</span></span> <span data-ttu-id="7b796-157">Para obter uma discussão sobre problemas a serem considerados, consulte [segurança de aplicativos de várias camadas](multi-tier-application-security.md).</span><span class="sxs-lookup"><span data-stu-id="7b796-157">For a discussion of issues to consider, see [Multi-Tier Application Security](multi-tier-application-security.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="7b796-158">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7b796-158">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7b796-159">Autenticação de cliente</span><span class="sxs-lookup"><span data-stu-id="7b796-159">Client Authentication</span></span>](client-authentication.md)
</dt> <dt>

[<span data-ttu-id="7b796-160">Representação e delegação de cliente</span><span class="sxs-lookup"><span data-stu-id="7b796-160">Client Impersonation and Delegation</span></span>](client-impersonation-and-delegation.md)
</dt> <dt>

[<span data-ttu-id="7b796-161">Tarefas de segurança do COM+</span><span class="sxs-lookup"><span data-stu-id="7b796-161">COM+ Security Tasks</span></span>](com--security-tasks.md)
</dt> <dt>

[<span data-ttu-id="7b796-162">Segurança de aplicativos de biblioteca</span><span class="sxs-lookup"><span data-stu-id="7b796-162">Library Application Security</span></span>](library-application-security.md)
</dt> <dt>

[<span data-ttu-id="7b796-163">Segurança de aplicativos de várias camadas</span><span class="sxs-lookup"><span data-stu-id="7b796-163">Multi-Tier Application Security</span></span>](multi-tier-application-security.md)
</dt> <dt>

[<span data-ttu-id="7b796-164">Segurança de componente programática</span><span class="sxs-lookup"><span data-stu-id="7b796-164">Programmatic Component Security</span></span>](programmatic-component-security.md)
</dt> <dt>

[<span data-ttu-id="7b796-165">Administração de segurança baseada em funções</span><span class="sxs-lookup"><span data-stu-id="7b796-165">Role-Based Security Administration</span></span>](role-based-security-administration.md)
</dt> <dt>

[<span data-ttu-id="7b796-166">Usando a política de restrição de software no COM+</span><span class="sxs-lookup"><span data-stu-id="7b796-166">Using the Software Restriction Policy in COM+</span></span>](using-the-software-restriction-policy-in-com-.md)
</dt> </dl>

 

 



