---
description: As compensações são inerentes à imposição de segurança.
ms.assetid: f01573f3-aae6-400e-bdd9-6f34f4e262f6
title: Decidindo onde impor a segurança
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ac994fb98d50a7e26f1b8142e77dc9ff771f6b2
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104500852"
---
# <a name="deciding-where-to-enforce-security"></a><span data-ttu-id="64ec4-103">Decidindo onde impor a segurança</span><span class="sxs-lookup"><span data-stu-id="64ec4-103">Deciding Where to Enforce Security</span></span>

<span data-ttu-id="64ec4-104">As compensações são inerentes à imposição de segurança.</span><span class="sxs-lookup"><span data-stu-id="64ec4-104">Trade-offs are inherent in enforcing security.</span></span> <span data-ttu-id="64ec4-105">Um banco de dados pode ser um local natural para colocar a lógica de segurança, Considerando que os dados são a coisa mais importante a ser protegida.</span><span class="sxs-lookup"><span data-stu-id="64ec4-105">A database can be a natural place to put security logic, given that ultimately that data is the most important thing to protect.</span></span> <span data-ttu-id="64ec4-106">No entanto, isso tem implicações de desempenho significativas.</span><span class="sxs-lookup"><span data-stu-id="64ec4-106">However, doing so has significant performance implications.</span></span> <span data-ttu-id="64ec4-107">A imposição da segurança no banco de dados pode ser muito cara, escala ruim e é inflexível.</span><span class="sxs-lookup"><span data-stu-id="64ec4-107">Enforcing security at the database can be very expensive, scales poorly, and is inflexible.</span></span>

## <a name="enforcing-security-in-the-middle-tier"></a><span data-ttu-id="64ec4-108">Impondo a segurança na camada intermediária</span><span class="sxs-lookup"><span data-stu-id="64ec4-108">Enforcing Security in the Middle Tier</span></span>

<span data-ttu-id="64ec4-109">A regra geral a seguir com aplicativos de várias camadas escalonáveis usando COM+ é que, sempre que possível, você deve impor segurança detalhada no aplicativo COM+ na camada intermediária.</span><span class="sxs-lookup"><span data-stu-id="64ec4-109">The general rule to follow with scalable multi-tier applications using COM+ is that, whenever possible, you should enforce detailed security in the COM+ application at the middle tier.</span></span> <span data-ttu-id="64ec4-110">Isso permite que você aproveite totalmente os serviços escalonáveis fornecidos pelo COM+.</span><span class="sxs-lookup"><span data-stu-id="64ec4-110">Doing so enables you to fully leverage the scalable services provided by COM+.</span></span> <span data-ttu-id="64ec4-111">Impor a autenticação no banco de dados somente quando for absolutamente necessário, e avaliar totalmente as implicações de desempenho de fazer isso.</span><span class="sxs-lookup"><span data-stu-id="64ec4-111">Enforce authentication at the database only when you absolutely need to, and fully weigh the performance implications of doing so.</span></span>

<span data-ttu-id="64ec4-112">A situação ideal é poder proteger tabelas de banco de dados para que o aplicativo COM+ possa acessá-las em sua própria identidade.</span><span class="sxs-lookup"><span data-stu-id="64ec4-112">The optimal situation is to be able to secure database tables so that the COM+ application is able to access them under its own identity.</span></span> <span data-ttu-id="64ec4-113">O banco de dados deve apenas autenticar o aplicativo COM+ e confiar nele para autenticar e autorizar corretamente os clientes que acessarão os dados.</span><span class="sxs-lookup"><span data-stu-id="64ec4-113">The database should just authenticate the COM+ application and trust it to correctly authenticate and authorize clients that will be accessing data.</span></span> <span data-ttu-id="64ec4-114">Os benefícios dessa abordagem são os seguintes:</span><span class="sxs-lookup"><span data-stu-id="64ec4-114">The benefits of this approach are as follows:</span></span>

-   <span data-ttu-id="64ec4-115">Ele habilita o pool de conexões entre todos os clientes, pois as conexões são completamente genéricas.</span><span class="sxs-lookup"><span data-stu-id="64ec4-115">It enables connection pooling among all clients, as connections are completely generic.</span></span>
-   <span data-ttu-id="64ec4-116">Em geral, ele otimiza o acesso a dados, geralmente um ponto de obstrução problemático durante o dimensionamento de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="64ec4-116">It generally optimizes data access, often a problematic choke point when scaling applications.</span></span>
-   <span data-ttu-id="64ec4-117">Ele pode minimizar a sobrecarga lógica para impor a segurança, especialmente se a segurança declarativa baseada em função puder ser usada.</span><span class="sxs-lookup"><span data-stu-id="64ec4-117">It can minimize the logic overhead for enforcing security, particularly if declarative role-based security can be used.</span></span>
-   <span data-ttu-id="64ec4-118">Ele pode fornecer grande flexibilidade em uma política de segurança.</span><span class="sxs-lookup"><span data-stu-id="64ec4-118">It can provide great flexibility in a security policy.</span></span> <span data-ttu-id="64ec4-119">Você pode configurá-lo e reconfigurá-lo facilmente, conforme descrito em [Administração de segurança baseada em funções](role-based-security-administration.md).</span><span class="sxs-lookup"><span data-stu-id="64ec4-119">You can configure and reconfigure it easily, as described in [Role-Based Security Administration](role-based-security-administration.md).</span></span>

<span data-ttu-id="64ec4-120">Mas, conforme discutido na [criação de funções com eficiência](designing-roles-effectively.md), embora as funções possam ser aplicadas de forma fácil e eficaz a algumas relações de dados de usuário, elas não são uma solução universal para decisões de acesso de segurança.</span><span class="sxs-lookup"><span data-stu-id="64ec4-120">But, as discussed in [Designing Roles Effectively](designing-roles-effectively.md), while roles can be easily and effectively applied to some user-data relationships, they are not a universal solution for security access decisions.</span></span>

## <a name="enforcing-security-at-the-database"></a><span data-ttu-id="64ec4-121">Impondo a segurança no banco de dados</span><span class="sxs-lookup"><span data-stu-id="64ec4-121">Enforcing Security at the Database</span></span>

<span data-ttu-id="64ec4-122">Apesar da preferência de aplicar a segurança na camada intermediária, há vários motivos para impor a segurança no banco de dados, como o seguinte:</span><span class="sxs-lookup"><span data-stu-id="64ec4-122">Despite the preferability of enforcing security at the middle tier, there are a number of reasons to enforce security at the database, such as the following:</span></span>

-   <span data-ttu-id="64ec4-123">Você não tem uma opção, talvez por motivos herdados ou talvez porque a decisão simplesmente não está em suas mãos.</span><span class="sxs-lookup"><span data-stu-id="64ec4-123">You don't have a choice, perhaps for legacy reasons or perhaps because the decision is simply not in your hands.</span></span>
-   <span data-ttu-id="64ec4-124">O banco de dados é acessado por uma ampla variedade de aplicativos, e sua segurança não pode ser configurada com base em um único aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64ec4-124">The database is accessed by a wide variety of applications, and its security can't be configured on the basis of a single application.</span></span>
-   <span data-ttu-id="64ec4-125">Um banco de dados pode ser tornado protegido de forma previsível.</span><span class="sxs-lookup"><span data-stu-id="64ec4-125">A database can be made predictably protected.</span></span> <span data-ttu-id="64ec4-126">Se você mantiver dados críticos da empresa em um banco de dado, poderá desenhar um vagão rígido em torno dele e ajudar a controlar quem pode vê-lo.</span><span class="sxs-lookup"><span data-stu-id="64ec4-126">If you keep enterprise-critical data in a database, you can draw a tight wagon around it and help control who gets to see it.</span></span>
-   <span data-ttu-id="64ec4-127">A autenticação de clientes originais no banco de dados permite o log detalhado de quem fez o que no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="64ec4-127">Authenticating original clients at the database enables detailed logging of who has done what in the database.</span></span>
-   <span data-ttu-id="64ec4-128">Alguns dados são vinculados a usuários específicos, e a lógica de fazer decisões de acesso extremamente refinadas pode ser executada com mais eficiência no banco de dados em si, perto dos mesmos.</span><span class="sxs-lookup"><span data-stu-id="64ec4-128">Some data is innately bound to particular users, and the logic of making extremely fine-grained access decisions might be most efficiently carried out at the database itself, close to the data.</span></span>

<span data-ttu-id="64ec4-129">Quando você tem o luxo de projetar a segurança do banco de dados e o aplicativo do COM+ em tandem, a maioria desses problemas refere-se às características dos próprios dados e à sua relação com os usuários que o acessam.</span><span class="sxs-lookup"><span data-stu-id="64ec4-129">When you do have the luxury of designing the security of the database and the COM+ application in tandem, most of these issues pertain to characteristics of the data itself and its relationship to the users accessing it.</span></span> <span data-ttu-id="64ec4-130">Com os dados que podem ser acessados por categorias previsíveis de usuários, é eficiente controlar o acesso na camada intermediária usando funções.</span><span class="sxs-lookup"><span data-stu-id="64ec4-130">With data that can be accessed by predictable categories of users, it is efficient to control access in the middle tier using roles.</span></span> <span data-ttu-id="64ec4-131">Com os dados que são ligados de forma complexa a classes muito pequenas de usuários, essas relações geralmente devem ser expressas com os dados propriamente ditos e, portanto, você deve impor alguma segurança a ele.</span><span class="sxs-lookup"><span data-stu-id="64ec4-131">With data that is intricately bound to very small classes of users, those relationships must often be expressed with the data itself and hence you must enforce some security at the database.</span></span>

### <a name="performance-implications-of-enforcing-security-at-the-database"></a><span data-ttu-id="64ec4-132">Implicações de desempenho da imposição de segurança no banco de dados</span><span class="sxs-lookup"><span data-stu-id="64ec4-132">Performance Implications of Enforcing Security at the Database</span></span>

<span data-ttu-id="64ec4-133">Se você autenticar ou autorizar usuários no banco de dados, a identidade do usuário precisará ser propagada para o banco de dados para dar suporte a isso.</span><span class="sxs-lookup"><span data-stu-id="64ec4-133">If you authenticate or authorize users at the database, the user identity needs to be propagated through to the database to support this.</span></span> <span data-ttu-id="64ec4-134">Se o banco de dados confiar no aplicativo de camada intermediária para fazer isso, é possível passar informações de segurança de usuário em parâmetros.</span><span class="sxs-lookup"><span data-stu-id="64ec4-134">If the database trusts the middle-tier application to do so, it is possible to pass in user security information in parameters.</span></span> <span data-ttu-id="64ec4-135">Caso contrário, a chamada para o banco de dados deve ser feita sob a identidade do usuário, o que significa que o aplicativo do servidor deve representar o cliente.</span><span class="sxs-lookup"><span data-stu-id="64ec4-135">Otherwise, the call through to the database must be made under the user's identity, meaning that the server application must impersonate the client.</span></span> <span data-ttu-id="64ec4-136">Isso pode ter implicações de desempenho, como as seguintes:</span><span class="sxs-lookup"><span data-stu-id="64ec4-136">This can have performance implications such as the following:</span></span>

-   <span data-ttu-id="64ec4-137">A representação do cliente pode ser muito mais lenta do que fazer a chamada diretamente sob a identidade do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64ec4-137">Impersonating the client can be much slower than making the call directly under the application identity.</span></span> <span data-ttu-id="64ec4-138">Para obter mais detalhes, consulte [representação e delegação do cliente](client-impersonation-and-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="64ec4-138">For more detail, see [Client Impersonation and Delegation](client-impersonation-and-delegation.md).</span></span>
-   <span data-ttu-id="64ec4-139">Uma conexão de banco de dados feita sob uma identidade de usuário específica não pode ser agrupada.</span><span class="sxs-lookup"><span data-stu-id="64ec4-139">A database connection made under a specific user identity cannot be pooled.</span></span>
-   <span data-ttu-id="64ec4-140">A adição de lógica no próprio banco de dados executa o risco de criar um afunilamento de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="64ec4-140">Adding logic in the database itself runs the risk of creating a scaling bottleneck.</span></span>

## <a name="related-topics"></a><span data-ttu-id="64ec4-141">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="64ec4-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="64ec4-142">Cenários básicos para proteger dados em aplicativos de várias camadas</span><span class="sxs-lookup"><span data-stu-id="64ec4-142">Basic Scenarios for Securing Data in Multi-Tier Applications</span></span>](basic-scenarios-for-securing-data-in-multi-tier-applications.md)
</dt> <dt>

[<span data-ttu-id="64ec4-143">Segurança de aplicativos de várias camadas</span><span class="sxs-lookup"><span data-stu-id="64ec4-143">Multi-Tier Application Security</span></span>](multi-tier-application-security.md)
</dt> </dl>

 

 



