---
description: Solucionando problemas do CRM do COM+
ms.assetid: 4d2d9372-b540-4e08-9b57-8687802610b6
title: Solucionando problemas do CRM do COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b04e37d183dbf3df8d017e780917f955e14a033
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501003"
---
# <a name="troubleshooting-the-com-crm"></a><span data-ttu-id="72969-103">Solucionando problemas do CRM do COM+</span><span class="sxs-lookup"><span data-stu-id="72969-103">Troubleshooting the COM+ CRM</span></span>

<span data-ttu-id="72969-104">Veja a seguir os problemas mais comuns encontrados ao desenvolver e usar o CRM do COM+:</span><span class="sxs-lookup"><span data-stu-id="72969-104">Following are the most common problems encountered when developing and using the COM+ CRM:</span></span>

-   <span data-ttu-id="72969-105">**Mensagens do log de eventos.**</span><span class="sxs-lookup"><span data-stu-id="72969-105">**Event log messages.**</span></span> <span data-ttu-id="72969-106">Se o aplicativo do servidor do CRM encontrar um erro interno sério, ele será FailFast (encerrar o processo do aplicativo do servidor do CRM) e gravará uma mensagem no log de eventos do Windows.</span><span class="sxs-lookup"><span data-stu-id="72969-106">If the CRM server application encounters a serious internal error, it will failfast (terminate the CRM server application process) and write a message to the Windows event log.</span></span> <span data-ttu-id="72969-107">Consulte o log de eventos se algum problema for encontrado.</span><span class="sxs-lookup"><span data-stu-id="72969-107">Please refer to the event log if any problems are encountered.</span></span>

-   <span data-ttu-id="72969-108">**Exceções do compensador de CRM.**</span><span class="sxs-lookup"><span data-stu-id="72969-108">**Exceptions from the CRM Compensator.**</span></span> <span data-ttu-id="72969-109">A infra-estrutura de CRM cria o compensador de CRM e passa as notificações de resultado da transação e os registros de log gravados pelo trabalhador do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-109">The CRM infrastructure creates the CRM Compensator and passes it the transaction outcome notifications and the log records written by the CRM Worker.</span></span> <span data-ttu-id="72969-110">Se o compensador de CRM retornar um erro ou lançar uma exceção, ele será capturado pela infraestrutura do CRM e causará um FailFast.</span><span class="sxs-lookup"><span data-stu-id="72969-110">If the CRM Compensator returns an error or throws an exception, it is caught by the CRM infrastructure and causes a failfast.</span></span> <span data-ttu-id="72969-111">Uma mensagem no log de eventos indica que uma exceção foi recebida do compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-111">A message in the event log indicates that an exception was received from the CRM Compensator.</span></span> <span data-ttu-id="72969-112">É possível forçar essas exceções a serem ignoradas.</span><span class="sxs-lookup"><span data-stu-id="72969-112">It is possible to force these exceptions to be ignored.</span></span> <span data-ttu-id="72969-113">(Consulte [configurações do registro do CRM do com+](com--crm-registry-settings.md).) As exceções do compensador de CRM provavelmente significam um problema no componente compensador de CRM específico e não na própria infraestrutura de CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-113">(See [COM+ CRM Registry Settings](com--crm-registry-settings.md).) Exceptions from the CRM Compensator most likely mean a problem in the specific CRM Compensator component and not in the CRM infrastructure itself.</span></span>

-   <span data-ttu-id="72969-114">**Rastreamento de recuperação.**</span><span class="sxs-lookup"><span data-stu-id="72969-114">**Recovery trace.**</span></span> <span data-ttu-id="72969-115">O rastreamento de recuperação pode ser muito útil para determinar problemas durante a recuperação.</span><span class="sxs-lookup"><span data-stu-id="72969-115">The recovery trace can be very useful to determine problems during recovery.</span></span> <span data-ttu-id="72969-116">Para obter informações sobre como habilitar o rastreamento de recuperação, consulte [configurações do registro do com+ CRM](com--crm-registry-settings.md).</span><span class="sxs-lookup"><span data-stu-id="72969-116">For information about enabling recovery trace, see [COM+ CRM Registry Settings](com--crm-registry-settings.md).</span></span>

-   <span data-ttu-id="72969-117">**Tentando executar com o CRM não habilitado.**</span><span class="sxs-lookup"><span data-stu-id="72969-117">**Trying to run with the CRM not enabled.**</span></span> <span data-ttu-id="72969-118">Não é suficiente simplesmente posicionar os componentes de trabalho de CRM e compensador de CRM no aplicativo do servidor COM+.</span><span class="sxs-lookup"><span data-stu-id="72969-118">It is not sufficient simply to place the CRM Worker and CRM Compensator components into the COM+ server application.</span></span> <span data-ttu-id="72969-119">O suporte para CRMs deve ser habilitado especificamente para o aplicativo de servidor COM+ específico usando a opção **habilitar gerenciadores de recursos de compensação** na guia **avançado** das páginas de propriedades do aplicativo com+.</span><span class="sxs-lookup"><span data-stu-id="72969-119">Support for CRMs must be specifically enabled for the specific COM+ server application using the **Enable compensating resource managers** option on the **Advanced** tab of the COM+ application's property pages.</span></span> <span data-ttu-id="72969-120">(Consulte [Configurando componentes do com+ CRM](configuring-com--crm-components.md) para obter mais informações.) Se for feita uma tentativa de usar um CRM dentro de um aplicativo de servidor que não tenha o CRM habilitado, um código de erro será retornado para o trabalhador do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-120">(See [Configuring COM+ CRM Components](configuring-com--crm-components.md) for more information.) If an attempt is made to use a CRM inside a server application that does not have the CRM enabled, an error code is returned to the CRM Worker.</span></span>

-   <span data-ttu-id="72969-121">**Tentando executar CRMs em processos de cliente.**</span><span class="sxs-lookup"><span data-stu-id="72969-121">**Trying to run CRMs in client processes.**</span></span> <span data-ttu-id="72969-122">CRMs não são executados em processos de cliente; Eles devem ser executados em um processo de aplicativo do servidor COM+.</span><span class="sxs-lookup"><span data-stu-id="72969-122">CRMs do not run in client processes; they must run in a COM+ server application process.</span></span> <span data-ttu-id="72969-123">Os componentes do CRM podem ser colocados em um pacote de biblioteca para uso por vários aplicativos de servidor COM+, mas não estão disponíveis para uso em processos de cliente.</span><span class="sxs-lookup"><span data-stu-id="72969-123">CRM components can be placed in a library package for use by multiple COM+ server applications, but they are not available for use within client processes.</span></span> <span data-ttu-id="72969-124">A tentativa de usar as interfaces do CRM dentro de um processo de cliente retorna um código de erro para o trabalhador do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-124">Attempting to use the CRM interfaces inside a client process returns an error code to the CRM Worker.</span></span>

-   <span data-ttu-id="72969-125">**Recuperação em andamento.**</span><span class="sxs-lookup"><span data-stu-id="72969-125">**Recovery in progress.**</span></span> <span data-ttu-id="72969-126">A recuperação é iniciada quando um aplicativo do servidor CRM é iniciado.</span><span class="sxs-lookup"><span data-stu-id="72969-126">Recovery starts when a CRM server application starts.</span></span> <span data-ttu-id="72969-127">No entanto, a recuperação ocorre em segundo plano durante o processamento normal do aplicativo do servidor do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-127">However, recovery occurs in the background during the normal processing of the CRM server application.</span></span> <span data-ttu-id="72969-128">O trabalhador do CRM pode ser criado antes da conclusão da recuperação.</span><span class="sxs-lookup"><span data-stu-id="72969-128">The CRM Worker can be created prior to recovery being completed.</span></span> <span data-ttu-id="72969-129">CRMs não pode ser usado em um processo de aplicativo do servidor CRM até que a recuperação tenha sido concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="72969-129">CRMs cannot be used in a CRM server application process until recovery has been successfully completed.</span></span> <span data-ttu-id="72969-130">Nesse caso, o trabalhador do CRM recebe um código de erro "recuperação em andamento" ao tentar registrar o compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-130">In this case, the CRM Worker receives a "recovery in progress" error code as it tries to register the CRM Compensator.</span></span> <span data-ttu-id="72969-131">O trabalhador do CRM deve sondar ou, de outra forma, atrasar até que a recuperação tenha sido concluída.</span><span class="sxs-lookup"><span data-stu-id="72969-131">The CRM Worker should poll or otherwise delay until recovery has been completed.</span></span> <span data-ttu-id="72969-132">O tempo de recuperação é específico para um tipo específico de CRM, e isso deve ser considerado durante a criação do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-132">The recovery time is specific to a particular type of CRM, and this should be considered when designing the CRM.</span></span> <span data-ttu-id="72969-133">As recuperações de longa duração não são desejáveis.</span><span class="sxs-lookup"><span data-stu-id="72969-133">Long duration recoveries are not desirable.</span></span>

-   <span data-ttu-id="72969-134">**Segurança no arquivo de log do CRM.**</span><span class="sxs-lookup"><span data-stu-id="72969-134">**Security on the CRM log file.**</span></span> <span data-ttu-id="72969-135">Se o acesso ao arquivo de log do CRM for negado, consulte [considerações de segurança do CRM do com+](com--crm-security-considerations.md) para obter uma descrição de como a segurança é definida no arquivo de log do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-135">If access to the CRM log file is denied, please see [COM+ CRM Security Considerations](com--crm-security-considerations.md) for a description of how security is set on the CRM log file.</span></span>

-   <span data-ttu-id="72969-136">**Transações incertas.**</span><span class="sxs-lookup"><span data-stu-id="72969-136">**In-doubt transactions.**</span></span> <span data-ttu-id="72969-137">Em casos raros, uma transação DTC pode entrar no estado em dúvida; ou seja, o DTC não pode determinar o resultado da transação.</span><span class="sxs-lookup"><span data-stu-id="72969-137">In rare cases, a DTC transaction might go into the in-doubt state; that is, the DTC cannot determine the transaction outcome.</span></span> <span data-ttu-id="72969-138">Nesses casos, durante a recuperação, o CRM mantém os registros de log para essa transação no arquivo de log do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-138">For these cases, during recovery, the CRM maintains the log records for that transaction in the CRM log file.</span></span> <span data-ttu-id="72969-139">Quando a transação incerta tiver sido resolvida pelo DTC, a execução de outra recuperação do CRM concluirá a transação.</span><span class="sxs-lookup"><span data-stu-id="72969-139">When the in-doubt transaction has been resolved by the DTC, performing another CRM recovery completes the transaction.</span></span>

-   <span data-ttu-id="72969-140">**Criação e lançamento do compensador de CRM.**</span><span class="sxs-lookup"><span data-stu-id="72969-140">**Creation and release of CRM Compensator.**</span></span> <span data-ttu-id="72969-141">Na primeira vez que um compensador de CRM é registrado por um trabalhador de CRM, ele é criado pela infraestrutura de CRM e consultado para determinar em quais interfaces de compensador de CRM ele dá suporte.</span><span class="sxs-lookup"><span data-stu-id="72969-141">The first time a CRM Compensator is registered by a CRM Worker, it is created by the CRM infrastructure and queried to determine which of the CRM Compensator interfaces it supports.</span></span> <span data-ttu-id="72969-142">Em seguida, ele é lançado imediatamente.</span><span class="sxs-lookup"><span data-stu-id="72969-142">It is then immediately released.</span></span> <span data-ttu-id="72969-143">Os compensadores de CRM precisam dar suporte à capacidade de criação e liberação sem ter tido nenhuma chamada de método interveniente.</span><span class="sxs-lookup"><span data-stu-id="72969-143">CRM Compensators need to support the ability to be created and released without having had any intervening method calls.</span></span> <span data-ttu-id="72969-144">Se o compensador de CRM não puder ser criado corretamente, talvez devido ao registro COM incorreto ou se ele não oferecer suporte a pelo menos uma das interfaces de compensador de CRM corretas, um código de erro será retornado ao trabalhador do CRM.</span><span class="sxs-lookup"><span data-stu-id="72969-144">If the CRM Compensator cannot be created correctly, perhaps due to incorrect COM registration, or if it does not support at least one of the correct CRM Compensator interfaces, an error code is returned to the CRM Worker.</span></span>

## <a name="related-topics"></a><span data-ttu-id="72969-145">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="72969-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="72969-146">Conceitos do Gerenciador de recursos de compensação COM+</span><span class="sxs-lookup"><span data-stu-id="72969-146">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



