---
description: Segurança de componentes na fila
ms.assetid: 3fbeb81a-e3e4-495b-b891-896877fab92f
title: Segurança de componentes na fila
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29b51592f6216d7380e877f2cd582a277f1583b8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104089367"
---
# <a name="queued-components-security"></a><span data-ttu-id="bdbde-103">Segurança de componentes na fila</span><span class="sxs-lookup"><span data-stu-id="bdbde-103">Queued Components Security</span></span>

<span data-ttu-id="bdbde-104">Quando um cliente faz uma chamada de método para um objeto enfileirado, a chamada é realmente feita ao gravador, que o empacota como parte de uma mensagem para o servidor.</span><span class="sxs-lookup"><span data-stu-id="bdbde-104">When a client makes a method call to a queued object, the call is actually made to the recorder, which packages it as part of a message to the server.</span></span> <span data-ttu-id="bdbde-105">O ouvinte lê a mensagem da fila e a transmite para o Player.</span><span class="sxs-lookup"><span data-stu-id="bdbde-105">The listener reads the message from the queue and passes it to the player.</span></span> <span data-ttu-id="bdbde-106">O Player invoca o componente de servidor real e faz a mesma chamada de método.</span><span class="sxs-lookup"><span data-stu-id="bdbde-106">The player invokes the actual server component and makes the same method call.</span></span> <span data-ttu-id="bdbde-107">O componente de servidor deve observar o contexto de chamada de segurança do cliente (não o contexto de chamada de segurança do Player) quando o Player faz a chamada de método.</span><span class="sxs-lookup"><span data-stu-id="bdbde-107">The server component must observe the security call context of the client (not the player's security call context) when the player makes the method call.</span></span> <span data-ttu-id="bdbde-108">O gravador empacota o contexto de chamada de segurança do cliente na mensagem e o Player o desempacota no servidor antes de fazer a chamada do método.</span><span class="sxs-lookup"><span data-stu-id="bdbde-108">The recorder marshals the client's security call context into the message, and the player unmarshals it at the server before making the method call.</span></span> <span data-ttu-id="bdbde-109">No que diz respeito ao objeto Server, não há diferença no contexto de segurança entre uma chamada direta do cliente e uma chamada indireta do Player.</span><span class="sxs-lookup"><span data-stu-id="bdbde-109">As far as the server object is concerned, there is no difference in security context between a direct call from the client and an indirect call from the player.</span></span> <span data-ttu-id="bdbde-110">Em particular, os métodos invocados são executados com os privilégios do remetente.</span><span class="sxs-lookup"><span data-stu-id="bdbde-110">In particular, the methods invoked execute with the sender's privileges.</span></span>

<span data-ttu-id="bdbde-111">Um componente em fila COM+ dá suporte à semântica de segurança baseada em função, assim como outros componentes criados para uso com aplicativos COM+.</span><span class="sxs-lookup"><span data-stu-id="bdbde-111">A COM+ queued component supports role-based security semantics just like other components built for use with COM+ applications.</span></span> <span data-ttu-id="bdbde-112">Os componentes de um aplicativo em fila podem, portanto, usar interfaces programáticas para descobrir a associação de função de seu chamador ([**ISecurityCallContext:: IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) ou um usuário específico ([**ISecurityCallContext:: IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span><span class="sxs-lookup"><span data-stu-id="bdbde-112">Components of a queued application can therefore use programmatic interfaces to discover the role membership of their caller ([**ISecurityCallContext::IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) or a specific user ([**ISecurityCallContext::IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span></span> <span data-ttu-id="bdbde-113">É recomendável que qualquer componente em fila com um impacto de segurança potencial use essas interfaces para verificar explicitamente as credenciais do remetente.</span><span class="sxs-lookup"><span data-stu-id="bdbde-113">It is recommended that any queued component with a potential security impact use these interfaces to explicitly check the sender's credentials.</span></span>

<span data-ttu-id="bdbde-114">A identidade do chamador é a identidade associada a uma chamada de método.</span><span class="sxs-lookup"><span data-stu-id="bdbde-114">The caller identity is the identity associated with a method call.</span></span> <span data-ttu-id="bdbde-115">A identidade do chamador é usada pela segurança baseada em função e está presente no contexto de chamada de segurança.</span><span class="sxs-lookup"><span data-stu-id="bdbde-115">Caller identity is used by role-based security and is present in the security call context.</span></span> <span data-ttu-id="bdbde-116">Em componentes em fila, a identidade do chamador é representada como dados na mensagem do serviço de enfileiramento de mensagens.</span><span class="sxs-lookup"><span data-stu-id="bdbde-116">In queued components, the caller identity is represented as data in the Message Queuing message.</span></span> <span data-ttu-id="bdbde-117">O enfileiramento de mensagens autentica a identidade do remetente da mensagem.</span><span class="sxs-lookup"><span data-stu-id="bdbde-117">Message Queuing authenticates the message sender identity.</span></span> <span data-ttu-id="bdbde-118">Quando a identidade do chamador e a identidade do remetente da mensagem são as mesmas, o enfileiramento de mensagens autentica a mensagem e o chamador.</span><span class="sxs-lookup"><span data-stu-id="bdbde-118">When the caller identity and the message sender identity are the same, Message Queuing authenticates both the message and the caller.</span></span> <span data-ttu-id="bdbde-119">Esse é o caso usual.</span><span class="sxs-lookup"><span data-stu-id="bdbde-119">This is the usual case.</span></span>

> [!Note]  
> <span data-ttu-id="bdbde-120">Os componentes em fila COM+ não oferecem suporte à segurança em estilo de representação, o que permite que um servidor obtenha um token de acesso correspondente à identidade do cliente e use-o para executar verificações de controle de acesso ou agir no contexto do Client Security.</span><span class="sxs-lookup"><span data-stu-id="bdbde-120">COM+ queued components does not support impersonation-style security, which allows a server to obtain an access token corresponding to the client identity and use it either to perform access control checks or to act under the client security context.</span></span>

 

<span data-ttu-id="bdbde-121">Quando o chamador de um componente enfileirado está interagindo com o componente por meio de um gravador fora do processo, as identidades do chamador e do remetente da mensagem (gravador) podem ser diferentes.</span><span class="sxs-lookup"><span data-stu-id="bdbde-121">When the caller of a queued component is interacting with the component through an out-of-process recorder, the identities of the caller and message sender (recorder) can be different.</span></span> <span data-ttu-id="bdbde-122">Nesse caso, os componentes em fila do COM+ verificam se o remetente da mensagem é um membro da função de usuário confiável do QC no servidor.</span><span class="sxs-lookup"><span data-stu-id="bdbde-122">In this case, COM+ queued components verifies that the message sender is a member of the QC Trusted User role on the server.</span></span> <span data-ttu-id="bdbde-123">Além disso, o gravador fora do processo requer um certificado de autenticação porque ele está sendo autenticado pelo enfileiramento de mensagens.</span><span class="sxs-lookup"><span data-stu-id="bdbde-123">Additionally, the out-of-process recorder requires an authentication certificate because it is being authenticated by Message Queuing.</span></span>

<span data-ttu-id="bdbde-124">Os membros da função de usuário confiável do QC têm permissão para especificar uma identidade arbitrária, o que significa que um membro mal-intencionado pode executar uma chamada de componente na fila com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="bdbde-124">Members of the QC Trusted User role are allowed to specify an arbitrary identity, which means that a malicious member could execute a queued component call with elevated privileges.</span></span> <span data-ttu-id="bdbde-125">Portanto, é recomendável que o número de tais usuários seja mantido em um mínimo absoluto.</span><span class="sxs-lookup"><span data-stu-id="bdbde-125">It is therefore recommended that the number of such users be kept to an absolute minimum.</span></span>

<span data-ttu-id="bdbde-126">Devido ao risco de um ataque sofisticado associado a qualquer mecanismo que propaga a identidade em uma rede, bem como o risco de um ataque de negação de serviço simples inundando as filas com solicitações não executáveis, é recomendável que você implante o serviço de componentes na fila COM+ somente em uma rede de hosts confiáveis, por exemplo, em uma rede privada ou virtual privada ou por trás de um firewall configurado adequadamente.</span><span class="sxs-lookup"><span data-stu-id="bdbde-126">Because of the risk of a sophisticated attack associated with any mechanism which propagates identity across a network, as well as the risk of a simple denial of service attack by flooding the queues with unexecutable requests, it is recommended that you deploy the COM+ queued components service only on a network of trusted hosts—for example, on a private network or a virtual private network, or behind an appropriately configured firewall.</span></span>

<span data-ttu-id="bdbde-127">Os componentes em fila COM+ são executados sobre DCOM, de modo que você pode ajudar a proteger a integridade e o sigilo das chamadas de método em fila selecionando **privacidade de pacote** como a configuração **nível de autenticação de chamadas** na guia **segurança** da folha de **Propriedades** do aplicativo em fila.</span><span class="sxs-lookup"><span data-stu-id="bdbde-127">COM+ queued components runs over DCOM, so you can help protect the integrity and secrecy of queued method calls by selecting **Packet Privacy** as the **Authentication Level of Calls** setting on the **Security** tab of your queued application's **Properties** sheet.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bdbde-128">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="bdbde-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bdbde-129">Segurança do COM+</span><span class="sxs-lookup"><span data-stu-id="bdbde-129">COM+ Security</span></span>](com--security.md)
</dt> <dt>

[<span data-ttu-id="bdbde-130">Limitações de segurança no modo de grupo de trabalho</span><span class="sxs-lookup"><span data-stu-id="bdbde-130">Security Limitations in Workgroup Mode</span></span>](security-limitations-in-workgroup-mode.md)
</dt> <dt>

[<span data-ttu-id="bdbde-131">Especificando o protocolo de autenticação</span><span class="sxs-lookup"><span data-stu-id="bdbde-131">Specifying the Authentication Protocol</span></span>](specifying-the-authentication-protocol.md)
</dt> </dl>

 

 



