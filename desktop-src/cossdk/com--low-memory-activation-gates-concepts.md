---
description: O COM+ tenta evitar situações em que esses caminhos de erro precisam ser executados em um servidor.
ms.assetid: 0de125a2-2e91-49b9-a903-6c2e173e22a2
title: Conceitos de retransmissores de ativação do COM+ Low-Memory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37d844a0492301ef067f5b3cd0e0749ec3a21779
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/05/2021
ms.locfileid: "103930047"
---
# <a name="com-low-memory-activation-gates-concepts"></a><span data-ttu-id="e3113-103">Conceitos de retransmissores de ativação do COM+ Low-Memory</span><span class="sxs-lookup"><span data-stu-id="e3113-103">COM+ Low-Memory Activation Gates Concepts</span></span>

<span data-ttu-id="e3113-104">Geralmente, a sincronização não é necessária quando você tem um STA (single-threaded apartment) porque o apartamento fornece a sincronização para você.</span><span class="sxs-lookup"><span data-stu-id="e3113-104">Generally, synchronization is not required when you have a single-threaded apartment (STA) because the apartment provides the synchronization for you.</span></span> <span data-ttu-id="e3113-105">A sincronização se torna importante quando você tem um MTA (multithreaded apartment) e um objeto de thread livre.</span><span class="sxs-lookup"><span data-stu-id="e3113-105">Synchronization becomes important when you have a multithreaded apartment (MTA) and a free-threaded object.</span></span> <span data-ttu-id="e3113-106">No passado, os objetos de thread livre tinham que lidar com o bloqueio.</span><span class="sxs-lookup"><span data-stu-id="e3113-106">In the past, free-threaded objects have had to handle locking.</span></span> <span data-ttu-id="e3113-107">Você pode eliminar a necessidade de usar o bloqueio definindo o atributo de sincronização para um componente.</span><span class="sxs-lookup"><span data-stu-id="e3113-107">You can eliminate the need to use locking by setting the synchronization attribute for a component.</span></span>

<span data-ttu-id="e3113-108">Os problemas de confiabilidade geralmente ocorrem quando os recursos de um servidor não podem reagir com eficiência às cargas de pico.</span><span class="sxs-lookup"><span data-stu-id="e3113-108">Reliability problems often occur when a server's resources cannot react efficiently to peak loads.</span></span> <span data-ttu-id="e3113-109">Quando um servidor não tem recursos físicos suficientes para atender à demanda de pico, ele pode esgotar a memória virtual.</span><span class="sxs-lookup"><span data-stu-id="e3113-109">When a server doesn't have enough physical resources to meet peak demand, it can exhaust virtual memory.</span></span> <span data-ttu-id="e3113-110">Isso se tornará um problema se o código do usuário ou o código do sistema não tratar corretamente falhas de alocação de memória.</span><span class="sxs-lookup"><span data-stu-id="e3113-110">This becomes a problem if the user code or system code does not properly handle memory allocation failures.</span></span> <span data-ttu-id="e3113-111">O servidor começa a ficar lento e, à medida que a memória é esgotada, as alocações de memória falham.</span><span class="sxs-lookup"><span data-stu-id="e3113-111">The server begins to slow down, and as memory is exhausted, memory allocations fail.</span></span> <span data-ttu-id="e3113-112">O servidor executa caminhos de erro para lidar com as falhas de alocação.</span><span class="sxs-lookup"><span data-stu-id="e3113-112">The server executes error paths to handle the allocation failures.</span></span> <span data-ttu-id="e3113-113">Se um caminho de erro contiver um bug no sistema ou no código do usuário em execução no servidor, será extremamente difícil interceptar e lidar com segurança.</span><span class="sxs-lookup"><span data-stu-id="e3113-113">If an error path contains a bug in the system or user code running on the server, it's extremely difficult to trap and handle safely.</span></span>

<span data-ttu-id="e3113-114">O COM+ tenta evitar situações em que esses caminhos de erro precisam ser executados em um servidor.</span><span class="sxs-lookup"><span data-stu-id="e3113-114">COM+ attempts to prevent situations in which these error paths have to be executed on a server.</span></span> <span data-ttu-id="e3113-115">Por meio do recurso de Gates de ativação de memória baixa, o COM+ monitora a carga de memória no sistema de forma proativa e garante que uma quantidade razoável de memória esteja disponível antes da execução do código do usuário.</span><span class="sxs-lookup"><span data-stu-id="e3113-115">Through the low-memory activation gates feature, COM+ proactively monitors memory load in the system and ensures that a reasonable amount of memory is available before executing user code.</span></span> <span data-ttu-id="e3113-116">Se a porcentagem de memória virtual disponível para o aplicativo ficar abaixo de um limite fixo, a ativação falhará antes de um aplicativo de servidor COM+ ou objeto ser criado (conforme mostrado na ilustração abaixo).</span><span class="sxs-lookup"><span data-stu-id="e3113-116">If the percentage of virtual memory available to the application falls below a fixed threshold, the activation fails before a COM+ server application or object is created (as shown in the illustration below).</span></span> <span data-ttu-id="e3113-117">Ao falhar essas ativações que normalmente seriam executadas, o recurso de Gates de ativação de baixa memória minimiza os problemas associados às alocações de memória no código do usuário, o que melhora significativamente a confiabilidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="e3113-117">By failing these activations that would normally run, the low-memory activation gates feature minimizes the problems associated with memory allocations in user code, which significantly enhances system reliability.</span></span>

![Diagrama que mostra a relação entre um aplicativo COM+ e um portão de ativação de baixa memória.](images/ada5ef02-f2b1-46bb-b0fc-fe7d65f31b43.png)

<span data-ttu-id="e3113-119">O recurso Gates de ativação de memória baixa se aplica somente aos componentes COM configurados que estão instalados em um aplicativo COM+.</span><span class="sxs-lookup"><span data-stu-id="e3113-119">The low-memory activation gates feature applies only to configured COM components that are installed in a COM+ application.</span></span>

## <a name="how-the-low-memory-activation-gates-feature-works"></a><span data-ttu-id="e3113-120">Como funciona o recurso Low-Memory Activation Gates</span><span class="sxs-lookup"><span data-stu-id="e3113-120">How the Low-Memory Activation Gates Feature Works</span></span>

<span data-ttu-id="e3113-121">O recurso de Gates de ativação de memória baixa usa um nível de limite fixo diferente dependendo do tipo de ativação.</span><span class="sxs-lookup"><span data-stu-id="e3113-121">The low-memory activation gates feature uses a different fixed threshold level depending on the type of activation.</span></span> <span data-ttu-id="e3113-122">Ao criar um aplicativo de servidor do COM+, o COM+ permitirá a ativação se mais de 10% da memória virtual estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="e3113-122">When creating a COM+ server application, COM+ allows the activation if more than 10 percent of virtual memory is available.</span></span> <span data-ttu-id="e3113-123">Se menos de 10 por cento estiver disponível, o COM+ fará uma alocação de teste para descobrir se o arquivo de paginação pode ser expandido para acomodar a nova carga de memória.</span><span class="sxs-lookup"><span data-stu-id="e3113-123">If less than 10 percent is available, COM+ makes a test allocation to find out if the paging file can expand to accommodate the new memory load.</span></span> <span data-ttu-id="e3113-124">Se o arquivo de paginação for expandido, o aplicativo do servidor será criado.</span><span class="sxs-lookup"><span data-stu-id="e3113-124">If the paging file expands, the server application is created.</span></span> <span data-ttu-id="e3113-125">Se o arquivo de paginação não puder ser expandido, a ativação falhará e a memória não será alocada.</span><span class="sxs-lookup"><span data-stu-id="e3113-125">If the paging file cannot be expanded, the activation fails and memory is not allocated.</span></span>

<span data-ttu-id="e3113-126">O processo é semelhante ao criar um objeto.</span><span class="sxs-lookup"><span data-stu-id="e3113-126">The process is similar when creating an object.</span></span> <span data-ttu-id="e3113-127">Nesse caso, o COM+ permitirá a ativação se mais de 5% da memória virtual estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="e3113-127">In this case, COM+ allows the activation if more than 5 percent of virtual memory is available.</span></span> <span data-ttu-id="e3113-128">Se menos de 5% estiver disponível, o COM+ continuará com uma alocação de teste.</span><span class="sxs-lookup"><span data-stu-id="e3113-128">If less than 5 percent is available, COM+ proceeds with a test allocation.</span></span> <span data-ttu-id="e3113-129">Novamente, se a alocação de teste expandir o arquivo de paginação, o objeto será criado.</span><span class="sxs-lookup"><span data-stu-id="e3113-129">Again, if the test allocation expands the paging file, the object is created.</span></span> <span data-ttu-id="e3113-130">Caso contrário, a ativação falhará.</span><span class="sxs-lookup"><span data-stu-id="e3113-130">If not, the activation fails.</span></span>

<span data-ttu-id="e3113-131">Os níveis de limite fixo para Gates de ativação de memória insuficiente atualmente não são configuráveis.</span><span class="sxs-lookup"><span data-stu-id="e3113-131">The fixed threshold levels for low-memory activation gates are currently not configurable.</span></span> <span data-ttu-id="e3113-132">Por esse motivo, não há tarefas associadas a esse recurso.</span><span class="sxs-lookup"><span data-stu-id="e3113-132">For this reason, there are no tasks associated with this feature.</span></span>

 

 



