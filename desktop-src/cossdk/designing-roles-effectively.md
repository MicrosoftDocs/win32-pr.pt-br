---
description: Em muitos cenários, a segurança baseada em funções é um mecanismo muito eficaz, mas há situações em que ela é menos eficaz.
ms.assetid: 6a1e6cf3-7a8c-4249-926d-675a54061adf
title: Criando funções com eficiência
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c0a340cb2fc643a414ebf784a14e7b61a45bccd3
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104500849"
---
# <a name="designing-roles-effectively"></a><span data-ttu-id="7784b-103">Criando funções com eficiência</span><span class="sxs-lookup"><span data-stu-id="7784b-103">Designing Roles Effectively</span></span>

<span data-ttu-id="7784b-104">Em muitos cenários, a segurança baseada em funções é um mecanismo muito eficaz, mas há situações em que ela é menos eficaz.</span><span class="sxs-lookup"><span data-stu-id="7784b-104">In many scenarios, role-based security is a very effective mechanism, but there are situations where it is less effective.</span></span> <span data-ttu-id="7784b-105">Você deve levar alguns fatores em consideração ao decidir onde e como aplicar a segurança baseada em função a um determinado aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7784b-105">You should take a number of factors into consideration when deciding where and how to apply role-based security to a particular application.</span></span>

## <a name="user-and-data-characteristics-and-the-suitability-of-roles"></a><span data-ttu-id="7784b-106">Características de usuário e de dados e a adequação das funções</span><span class="sxs-lookup"><span data-stu-id="7784b-106">User and Data Characteristics and the Suitability of Roles</span></span>

<span data-ttu-id="7784b-107">As funções funcionam muito bem para caracterizar os grupos de usuários e, nessa base, filtrar as ações que esses usuários podem executar.</span><span class="sxs-lookup"><span data-stu-id="7784b-107">Roles work very well to characterize groups of users and, on that basis, filter what actions those users can perform.</span></span> <span data-ttu-id="7784b-108">Geralmente, isso é realizado na prática criando funções que refletem o local de um usuário em uma organização — por exemplo, as funções "gerentes" e "Dizems", "administradores" e "leitores", "projeto um funcionário" e "projeto dois funcionários".</span><span class="sxs-lookup"><span data-stu-id="7784b-108">Often, this is carried out in practice by creating roles that reflect a user's place within an organization—for example, the roles "Managers" and "Tellers," "Administrators" and "Readers," "Project One Employees" and "Project Two Employees."</span></span> <span data-ttu-id="7784b-109">Nesses casos, onde os dados que estão sendo acessados são razoavelmente genéricos em relação aos usuários, as funções podem ser usadas com eficiência para impor regras de negócio, como as seguintes:</span><span class="sxs-lookup"><span data-stu-id="7784b-109">In such cases, where the data being accessed is fairly generic relative to the users, roles can be used efficiently to enforce business rules such as the following:</span></span>

-   <span data-ttu-id="7784b-110">"Os gerentes podem transferir qualquer quantidade de dinheiro.</span><span class="sxs-lookup"><span data-stu-id="7784b-110">"Managers can transfer any amount of money.</span></span> <span data-ttu-id="7784b-111">Os informadores podem transferir apenas até $10000. "</span><span class="sxs-lookup"><span data-stu-id="7784b-111">Tellers can transfer only up to $10,000."</span></span>

-   <span data-ttu-id="7784b-112">"Os administradores podem alterar qualquer coisa.</span><span class="sxs-lookup"><span data-stu-id="7784b-112">"Administrators can change anything.</span></span> <span data-ttu-id="7784b-113">Todos os outros podem ler apenas. "</span><span class="sxs-lookup"><span data-stu-id="7784b-113">Everyone else can only read."</span></span>

-   <span data-ttu-id="7784b-114">"O projeto um funcionário pode acessar um determinado banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7784b-114">"Project One employees can access a certain database.</span></span> <span data-ttu-id="7784b-115">Ninguém mais pode ".</span><span class="sxs-lookup"><span data-stu-id="7784b-115">No one else can."</span></span>

<span data-ttu-id="7784b-116">Os usuários podem se enquadrar naturalmente em várias funções, dependendo de como as funções modelam a estrutura organizacional de um negócio.</span><span class="sxs-lookup"><span data-stu-id="7784b-116">Users might naturally fall into multiple roles, depending on how the roles model the organizational structure of a business.</span></span>

<span data-ttu-id="7784b-117">No entanto, as funções não funcionam muito bem quando uma decisão de acesso de segurança mantém as características de uma determinada parte dos dados.</span><span class="sxs-lookup"><span data-stu-id="7784b-117">However, roles don't work very well when a security access decision rests on the characteristics of a particular piece of data.</span></span> <span data-ttu-id="7784b-118">Por exemplo, seria difícil usar funções para refletir relacionamentos de dados de usuário complicados, como o seguinte:</span><span class="sxs-lookup"><span data-stu-id="7784b-118">For example, it would be difficult to use roles to reflect complicated user-data relationships such as the following:</span></span>

-   <span data-ttu-id="7784b-119">"Um gerente específico pode acessar dados de pessoal apenas para seus relatórios."</span><span class="sxs-lookup"><span data-stu-id="7784b-119">"A particular manager can access personnel data for only her reports."</span></span>

-   <span data-ttu-id="7784b-120">"Joe Consumer pode pesquisar seu saldo de conta".</span><span class="sxs-lookup"><span data-stu-id="7784b-120">"Joe Consumer can look up his account balance."</span></span>

<span data-ttu-id="7784b-121">Nesses casos, a verificação de segurança deve ser feita com frequência no próprio banco de dados, em que é mais fácil levar em conta as características de inato dos dados que estão sendo acessados.</span><span class="sxs-lookup"><span data-stu-id="7784b-121">In such cases, security checking must often be done at the database itself, where it is easier to take into account innate characteristics of the data being accessed.</span></span> <span data-ttu-id="7784b-122">Isso significa que você deve usar a *representação* para passar a identidade do cliente ao banco de dados e permitir que o banco de dados valide a solicitação.</span><span class="sxs-lookup"><span data-stu-id="7784b-122">This means that you must use *impersonation* to pass the client identity along to the database and let the database validate the request.</span></span> <span data-ttu-id="7784b-123">Isso pode afetar o desempenho e pode afetar o design do aplicativo — por exemplo, o pool de conexões pode não funcionar quando uma conexão é aberta sob uma identidade de usuário específica.</span><span class="sxs-lookup"><span data-stu-id="7784b-123">This can affect performance and can affect the application's design—for example, connection pooling might not work when a connection is opened under a particular user identity.</span></span> <span data-ttu-id="7784b-124">Para obter uma discussão sobre os problemas envolvidos, consulte [segurança de aplicativos de várias camadas](multi-tier-application-security.md) e [representação e delegação de cliente](client-impersonation-and-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="7784b-124">For a discussion of issues involved, see [Multi-Tier Application Security](multi-tier-application-security.md) and [Client Impersonation and Delegation](client-impersonation-and-delegation.md).</span></span>

## <a name="complexity-and-scalability-of-a-role-based-authorization-policy"></a><span data-ttu-id="7784b-125">Complexidade e escalabilidade de uma política de autorização de Role-Based</span><span class="sxs-lookup"><span data-stu-id="7784b-125">Complexity and Scalability of a Role-Based Authorization Policy</span></span>

<span data-ttu-id="7784b-126">Qualquer política de segurança que você coloque no local será tão eficaz quanto sua implementação pelos administradores do sistema implantando seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7784b-126">Whatever security policy you put in place will be only as effective as its implementation by the system administrators deploying your application.</span></span> <span data-ttu-id="7784b-127">Se os administradores cometem erros na atribuição de usuários às funções corretas de acordo com sua política de segurança, sua política não funcionará conforme o esperado.</span><span class="sxs-lookup"><span data-stu-id="7784b-127">If administrators make mistakes in assigning users to the correct roles according to your security policy, your policy won't work as intended.</span></span> <span data-ttu-id="7784b-128">Os problemas têm maior probabilidade de ocorrer nas seguintes circunstâncias:</span><span class="sxs-lookup"><span data-stu-id="7784b-128">Problems are most likely to occur under the following circumstances:</span></span>

-   <span data-ttu-id="7784b-129">Você fez uma política baseada em função muito complexa, com muitas funções e mapeamentos de usuários para várias funções.</span><span class="sxs-lookup"><span data-stu-id="7784b-129">You have made a very intricate role-based policy, with many roles and users mapping to numerous roles.</span></span>
-   <span data-ttu-id="7784b-130">Você cria funções com critérios ambíguos para quem deve pertencer a elas.</span><span class="sxs-lookup"><span data-stu-id="7784b-130">You create roles with ambiguous criteria for who should belong to them.</span></span>
-   <span data-ttu-id="7784b-131">Há muitos usuários no site em que o aplicativo está instalado e os usuários costumam se mover na organização, mudando em relação às funções que você criou.</span><span class="sxs-lookup"><span data-stu-id="7784b-131">There are many users at the site where the application is installed, and users are frequently moving within the organization, changing with respect to the roles you have created.</span></span>
-   <span data-ttu-id="7784b-132">Há muitos administradores no site em que o aplicativo está instalado, com a divisão de responsabilidades, para que um administrador familiarizado com os requisitos de segurança do seu aplicativo esteja potencialmente infamiliarizado com os grandes grupos de usuários que devem usá-lo.</span><span class="sxs-lookup"><span data-stu-id="7784b-132">There are many administrators at the site where the application is installed, with division of responsibilities, so that an administrator familiar with the security requirements of your application is potentially unfamiliar with the large groups of users that must use it.</span></span> <span data-ttu-id="7784b-133">Isso é de preocupação específica à medida que os usuários se movem dentro da organização — essas informações precisam ser bem comunicadas.</span><span class="sxs-lookup"><span data-stu-id="7784b-133">This is of particular concern as users move within the organization—such information needs to be well communicated.</span></span>

<span data-ttu-id="7784b-134">Além disso, à medida que o número de funções atribuídas a um aplicativo aumenta, a quantidade de tempo que COM+ deve levar em busca da associação do chamador nessas funções, com uma degradação provável no desempenho.</span><span class="sxs-lookup"><span data-stu-id="7784b-134">Additionally, as the number of roles assigned to an application increases, so does the amount of time COM+ must spend looking up caller membership in those roles, with a likely degradation in performance.</span></span>

<span data-ttu-id="7784b-135">Para gerenciar a complexidade e atenuar essas preocupações, você pode usar as seguintes diretrizes:</span><span class="sxs-lookup"><span data-stu-id="7784b-135">To manage complexity and mitigate these concerns, you can use the following guidelines:</span></span>

-   <span data-ttu-id="7784b-136">Escolha os nomes de função que são autodescritivos.</span><span class="sxs-lookup"><span data-stu-id="7784b-136">Choose role names that are self-descriptive.</span></span> <span data-ttu-id="7784b-137">Torne-o tão óbvio quanto possível quais usuários devem pertencer a quais funções.</span><span class="sxs-lookup"><span data-stu-id="7784b-137">Make it as obvious as possible which users should belong to which roles.</span></span>
-   <span data-ttu-id="7784b-138">Torne sua política baseada em função o mais simples possível (e não mais simples).</span><span class="sxs-lookup"><span data-stu-id="7784b-138">Make your role-based policy as simple as possible (and no simpler).</span></span> <span data-ttu-id="7784b-139">Escolha o mínimo de funções que você pode, mantendo uma política efetiva.</span><span class="sxs-lookup"><span data-stu-id="7784b-139">Choose as few roles as you can, while maintaining an effective policy.</span></span>
-   <span data-ttu-id="7784b-140">Documente claramente a política baseada em função que você constrói para administradores, independentemente de a associação de função ser óbvia (para você).</span><span class="sxs-lookup"><span data-stu-id="7784b-140">Clearly document the role-based policy that you construct for administrators, whether role membership is obvious (to you).</span></span> <span data-ttu-id="7784b-141">Em particular, use o campo Descrição disponível para cada função para descrever a intenção da função.</span><span class="sxs-lookup"><span data-stu-id="7784b-141">In particular, use the description field available for each role to describe the intent of the role.</span></span> <span data-ttu-id="7784b-142">Se você não puder descrever geralmente quem deve pertencer à função em algumas frases, provavelmente será muito complicado.</span><span class="sxs-lookup"><span data-stu-id="7784b-142">If you can't describe generally who should belong to the role in a couple of sentences, it is probably too complicated.</span></span>
-   <span data-ttu-id="7784b-143">É altamente recomendável que os administradores do seu aplicativo preencham funções com grupos de usuários em vez de usuários individuais.</span><span class="sxs-lookup"><span data-stu-id="7784b-143">Strongly suggest that administrators of your application populate roles with user groups instead of individual users.</span></span> <span data-ttu-id="7784b-144">Essa é uma solução muito mais escalonável.</span><span class="sxs-lookup"><span data-stu-id="7784b-144">This is a much more scalable solution.</span></span> <span data-ttu-id="7784b-145">Ele facilita a reatribuição ou a remoção de usuários à medida que eles se movem dentro da organização e protegem os administradores de uma determinada quantidade de supervisão e problemas na comunicação.</span><span class="sxs-lookup"><span data-stu-id="7784b-145">It makes it easier to reassign or remove users as they move within the organization and insulates administrators from a certain amount of oversight and problems in communication.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7784b-146">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7784b-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7784b-147">Limites de segurança</span><span class="sxs-lookup"><span data-stu-id="7784b-147">Security Boundaries</span></span>](security-boundaries.md)
</dt> <dt>

[<span data-ttu-id="7784b-148">Informações de contexto de chamada de segurança</span><span class="sxs-lookup"><span data-stu-id="7784b-148">Security Call Context Information</span></span>](security-call-context-information.md)
</dt> <dt>

[<span data-ttu-id="7784b-149">Propriedade de contexto de segurança</span><span class="sxs-lookup"><span data-stu-id="7784b-149">Security Context Property</span></span>](security-context-property.md)
</dt> <dt>

[<span data-ttu-id="7784b-150">Usando funções para autorização de cliente</span><span class="sxs-lookup"><span data-stu-id="7784b-150">Using Roles for Client Authorization</span></span>](using-roles-for-client-authorization.md)
</dt> </dl>

 

 



