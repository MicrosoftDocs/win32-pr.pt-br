---
title: Usando o Gerenciador de reinicialização
description: As seções a seguir descrevem o uso da API do Gerenciador de reinicialização.
ms.assetid: 78448d5e-20f6-45b6-b833-7d7791e5e4c6
keywords:
- Gerente de reinicialização do Gerenciador de reinicialização usando
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e4ac72edb9f2395bbd67236806c3ab3029372cc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103823926"
---
# <a name="using-restart-manager"></a><span data-ttu-id="05910-104">Usando o Gerenciador de reinicialização</span><span class="sxs-lookup"><span data-stu-id="05910-104">Using Restart Manager</span></span>

<span data-ttu-id="05910-105">As seções a seguir descrevem o uso da API do Gerenciador de reinicialização.</span><span class="sxs-lookup"><span data-stu-id="05910-105">The following sections describe using the Restart Manager API.</span></span> <span data-ttu-id="05910-106">Seus aplicativos e serviços também devem seguir as [diretrizes para aplicativos e serviços](guidelines-for-applications-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="05910-106">Your applications and services should also follow the [Guidelines for Applications and Services](guidelines-for-applications-and-services.md).</span></span>

## <a name="using-the-microsoft-windows-installer"></a><span data-ttu-id="05910-107">Usando o Microsoft Windows Installer</span><span class="sxs-lookup"><span data-stu-id="05910-107">Using the Microsoft Windows Installer</span></span>

<span data-ttu-id="05910-108">O [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) versão 4,0 é o serviço de instalação de aplicativo do Windows Vista ou do windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="05910-108">The [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) Version 4.0 is the application installation service of Windows Vista or Windows Server 2008.</span></span> <span data-ttu-id="05910-109">Os aplicativos que usam o Windows Installer versão 4,0 para instalação e manutenção automaticamente usam o Gerenciador de reinicialização para reduzir as reinicializações do sistema.</span><span class="sxs-lookup"><span data-stu-id="05910-109">Applications that use the Windows Installer version 4.0 for installation and servicing automatically use the Restart Manager to reduce system restarts.</span></span> <span data-ttu-id="05910-110">Instaladores personalizados também podem ser criados para chamar a API do Gerenciador de reinicialização para desligar e reiniciar aplicativos e serviços diretamente para evitar a necessidade de uma reinicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="05910-110">Custom installers can also be designed to call the Restart Manager API to shut down and restart applications and services directly to avoid requiring a system restart.</span></span> <span data-ttu-id="05910-111">Nos casos em que uma reinicialização do sistema é inevitável, os instaladores podem usar a função [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) ou [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) para agendá-lo de forma que ele Minimize a interrupção para o usuário.</span><span class="sxs-lookup"><span data-stu-id="05910-111">In cases where a system restart is unavoidable, installers can use the [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) or [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) function to schedule it in such a way that it minimizes the disruption to the user.</span></span> <span data-ttu-id="05910-112">Os pacotes interativos Windows Installer devem implementar uma interface do usuário que inclua uma caixa de diálogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) .</span><span class="sxs-lookup"><span data-stu-id="05910-112">Interactive Windows Installer packages should implement a user interface that includes a [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box.</span></span> <span data-ttu-id="05910-113">Para obter mais informações, consulte [usando Windows Installer com o Gerenciador de reinicialização](/windows/desktop/Msi/using-windows-installer-with-restart-manager) na documentação do SDK do Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="05910-113">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>

## <a name="using-the-restart-manager-api-with-custom-installers"></a><span data-ttu-id="05910-114">Usando a API do Gerenciador de reinicialização com instaladores personalizados</span><span class="sxs-lookup"><span data-stu-id="05910-114">Using the Restart Manager API with Custom Installers</span></span>

<span data-ttu-id="05910-115">Instaladores personalizados, ou um pacote Windows Installer que contém ações personalizadas que causam uma reinicialização do sistema, podem usar a API do Gerenciador de reinicialização para desligar e reiniciar aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="05910-115">Custom installers, or a Windows Installer package that contains custom actions that cause a system restart, can use the Restart Manager API to shut down and restart applications and services.</span></span>

-   <span data-ttu-id="05910-116">Todas as operações executadas usando a API do Gerenciador de reinicialização devem ser associadas a uma sessão.</span><span class="sxs-lookup"><span data-stu-id="05910-116">All operations that are performed using the Restart Manager API must be associated with a session.</span></span> <span data-ttu-id="05910-117">Um máximo de 64 sessões do Gerenciador de reinicialização por sessão do usuário pode ser aberto no sistema ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="05910-117">A maximum of 64 Restart Manager sessions per user session can be open on the system at the same time.</span></span> <span data-ttu-id="05910-118">O instalador primário inicia e termina a sessão do Gerenciador de reinicialização.</span><span class="sxs-lookup"><span data-stu-id="05910-118">The primary installer starts and ends the Restart Manager session.</span></span> <span data-ttu-id="05910-119">Para obter mais informações sobre como usar o Gerenciador de reinicialização com um único instalador, consulte [usando o Gerenciador de reinicialização com um instalador primário](using-restart-manager-with-a-primary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="05910-119">For more information about using Restart Manager with a single installer, see [Using Restart Manager with a Primary Installer](using-restart-manager-with-a-primary-installer.md).</span></span>
-   <span data-ttu-id="05910-120">Se necessário para a instalação, um ou mais instaladores secundários podem ser associados à sessão do Gerenciador de reinicialização e podem ser executados em processo ou fora do processo do instalador primário.</span><span class="sxs-lookup"><span data-stu-id="05910-120">If necessary for the installation, one or more secondary installers can be joined to the Restart Manager session and can run either in-process or out-of-process of the primary installer.</span></span> <span data-ttu-id="05910-121">Os instaladores secundários exigem que a chave de sessão seja fornecida pelo instalador primário para ingressar em uma sessão.</span><span class="sxs-lookup"><span data-stu-id="05910-121">Secondary installers require that the session key be provided by the primary installer to join a session.</span></span> <span data-ttu-id="05910-122">Para obter mais informações e um exemplo de como usar instaladores secundários, consulte [usando o Gerenciador de reinicialização com um instalador secundário](using-restart-manager-with-a-secondary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="05910-122">For more information and an example of using secondary installers, see [Using Restart Manager with a Secondary Installer](using-restart-manager-with-a-secondary-installer.md).</span></span>
-   <span data-ttu-id="05910-123">Os instaladores interativos devem implementar uma interface do usuário que inclua uma caixa de diálogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) que possa pedir aos usuários que fechem aplicativos e serviços.</span><span class="sxs-lookup"><span data-stu-id="05910-123">Interactive installers should implement a user interface that includes an [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box that can ask users to close applications and services.</span></span> <span data-ttu-id="05910-124">Para obter mais informações, consulte [usando Windows Installer com o Gerenciador de reinicialização](/windows/desktop/Msi/using-windows-installer-with-restart-manager) na documentação do SDK do Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="05910-124">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>
-   <span data-ttu-id="05910-125">Os instaladores podem chamar a API do Gerenciador de reinicialização para alterar, cancelar e obter o status da operação do Gerenciador de reinicialização atual.</span><span class="sxs-lookup"><span data-stu-id="05910-125">Installers can call the Restart Manager API to change, cancel, and get the status of the current Restart Manager operation.</span></span> <span data-ttu-id="05910-126">Para obter mais informações, consulte os seguintes tópicos: [obtendo o status de uma operação do Gerenciador de reinicialização](getting-the-status-of-a-restart-manager-operation.md) e [cancelando a operação atual do Gerenciador de reinicialização](canceling-the-current-restart-manager-operation.md).</span><span class="sxs-lookup"><span data-stu-id="05910-126">For more information, see the following topics: [Getting the Status of a Restart Manager Operation](getting-the-status-of-a-restart-manager-operation.md) and [Canceling the Current Restart Manager Operation](canceling-the-current-restart-manager-operation.md).</span></span>
-   <span data-ttu-id="05910-127">Os instaladores não devem desabilitar o redirecionamento do sistema de arquivos antes de chamar a API do Gerenciador de reinicialização.</span><span class="sxs-lookup"><span data-stu-id="05910-127">Installers should not disable file system redirection before calling the Restart Manager API.</span></span> <span data-ttu-id="05910-128">Alguns instaladores de 32 bits executados no Windows de 64 bits podem não conseguir registrar um arquivo no diretório% windir% \\ System32.</span><span class="sxs-lookup"><span data-stu-id="05910-128">Some 32-bit installers run on 64-bit Windows may be unable to register a file in the %windir%\\system32 directory.</span></span>

 

 