---
title: Diretrizes para serviços
description: Os serviços devem aderir a essas diretrizes para garantir que o Gerenciador de reinicialização possa desligar e reiniciar os serviços, se necessário, para instalar atualizações. Os aplicativos podem usar as diretrizes descritas em diretrizes para aplicativos.
ms.assetid: 69a98f82-71bb-4780-8a3f-294cc5629900
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 51374c0a4c6fc561b8259aadf15e3d5487e12483
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104007889"
---
# <a name="guidelines-for-services"></a><span data-ttu-id="4e24d-104">Diretrizes para serviços</span><span class="sxs-lookup"><span data-stu-id="4e24d-104">Guidelines for Services</span></span>

<span data-ttu-id="4e24d-105">Os serviços devem aderir a essas diretrizes para garantir que o Gerenciador de reinicialização possa desligar e reiniciar os serviços, se necessário, para instalar atualizações.</span><span class="sxs-lookup"><span data-stu-id="4e24d-105">Services should adhere to these guidelines to ensure that the Restart Manager can shut down and restart services if necessary to install updates.</span></span> <span data-ttu-id="4e24d-106">Os aplicativos podem usar as diretrizes descritas em [diretrizes para aplicativos](guidelines-for-applications.md).</span><span class="sxs-lookup"><span data-stu-id="4e24d-106">Applications can use the guidelines that are described in [Guidelines for Applications](guidelines-for-applications.md).</span></span>

-   <span data-ttu-id="4e24d-107">Os serviços devem ser capazes de serem desligados e reiniciados usando o [Gerenciador de controle de serviço](/windows/desktop/Services/service-control-manager) sem a necessidade de uma reinicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="4e24d-107">Services should be capable of being shut down and restarted using the [Service Control Manager](/windows/desktop/Services/service-control-manager) without requiring a system restart.</span></span> <span data-ttu-id="4e24d-108">As exceções a essa diretriz são processos críticos do sistema que são executados no contexto de lsass.exe ou services.exe.</span><span class="sxs-lookup"><span data-stu-id="4e24d-108">The exceptions to this guideline are critical system processes that run in the context of lsass.exe or services.exe.</span></span>
-   <span data-ttu-id="4e24d-109">O Gerenciador de reinicialização honra as dependências de serviço.</span><span class="sxs-lookup"><span data-stu-id="4e24d-109">Restart Manager honors service dependencies.</span></span> <span data-ttu-id="4e24d-110">Quando um serviço é desligado e reiniciado, seus serviços dependentes são desligados e reiniciados.</span><span class="sxs-lookup"><span data-stu-id="4e24d-110">When a service is shut down and restarted, its dependent services are shut down and restarted.</span></span>
-   <span data-ttu-id="4e24d-111">Os serviços devem especificar o intervalo de recuperação e o período de redefinição no [Gerenciador de controle de serviço (SCM)](/windows/desktop/Services/service-control-manager).</span><span class="sxs-lookup"><span data-stu-id="4e24d-111">Services should specify the recovery interval and reset period in the [Service Control Manager (SCM)](/windows/desktop/Services/service-control-manager).</span></span> <span data-ttu-id="4e24d-112">O intervalo de recuperação é o tempo, em MS, após a última falha que o SCM aguarda antes de realizar a ação de recuperação.</span><span class="sxs-lookup"><span data-stu-id="4e24d-112">The recovery interval is the time, in msecs, after the last failure that the SCM waits before taking the recovery action.</span></span> <span data-ttu-id="4e24d-113">O período de redefinição é o tempo, em segundos, após a última falha que o Gerenciador de controle de serviço espera antes de redefinir a contagem de falhas para 0.</span><span class="sxs-lookup"><span data-stu-id="4e24d-113">The reset period is the time, in seconds, after the last failure that the Service Control Manager waits before resetting the failure count to 0.</span></span> <span data-ttu-id="4e24d-114">Os serviços podem usar a função [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) para alterar as definições de configuração.</span><span class="sxs-lookup"><span data-stu-id="4e24d-114">Services can use [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) function to change the configuration settings.</span></span>

    <span data-ttu-id="4e24d-115">Os [serviços críticos](critical-system-services.md) devem usar as seguintes configurações de recuperação para especificar que o serviço seja reiniciado um minuto após a primeira falha para reiniciar o serviço, reiniciado dois minutos após a segunda falha e que o computador seja reiniciado um minuto após a terceira falha.</span><span class="sxs-lookup"><span data-stu-id="4e24d-115">[Critical services](critical-system-services.md) should use the following recovery settings to specify that the service be restarted one minute after the first failure to restart the service, restarted two minutes after the second failure, and that the computer be restarted one minute after the third failure.</span></span> <span data-ttu-id="4e24d-116">A contagem de falhas é redefinida para 0 após 300 segundos.</span><span class="sxs-lookup"><span data-stu-id="4e24d-116">The failure count is reset to 0 after 300 seconds.</span></span>

    <dl> <span data-ttu-id="4e24d-117">Ações de recuperação: Restart/60000/Restart/120000/reboot/60000 & Reset = 300</span><span class="sxs-lookup"><span data-stu-id="4e24d-117">Recovery Actions: Restart/60000/Restart/120000/Reboot/60000 & Reset =300</span></span>  
    </dl>

    <span data-ttu-id="4e24d-118">[Serviços críticos](critical-system-services.md) devem ser iniciados antes de serviços não críticos.</span><span class="sxs-lookup"><span data-stu-id="4e24d-118">[Critical services](critical-system-services.md) should be started before non-critical services.</span></span> <span data-ttu-id="4e24d-119">Os serviços que não são críticos devem usar as seguintes configurações de recuperação para especificar que o serviço seja reiniciado dois minutos após a primeira falha ao reiniciar o serviço.</span><span class="sxs-lookup"><span data-stu-id="4e24d-119">Services that are not critical services should use the following recovery settings to specify that the service be restarted two minutes after the first failure to restart the service.</span></span> <span data-ttu-id="4e24d-120">O serviço não é reiniciado após a segunda falha, e um administrador precisaria intervir nesse caso.</span><span class="sxs-lookup"><span data-stu-id="4e24d-120">The service is not restarted after the second failure, and an administrator would need to intervene in this case.</span></span> <span data-ttu-id="4e24d-121">A contagem de falhas é redefinida para 0 após 900 segundos.</span><span class="sxs-lookup"><span data-stu-id="4e24d-121">The failure count is reset to 0 after 900 seconds.</span></span>

    <dl> <span data-ttu-id="4e24d-122">Ações de recuperação: Restart/120000/Restart/300000/None/0 & Reset = 900</span><span class="sxs-lookup"><span data-stu-id="4e24d-122">Recovery Actions: Restart/120000/Restart/300000/None/0 & Reset = 900</span></span>  
    </dl>

 

 