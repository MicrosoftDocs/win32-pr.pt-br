---
description: A API do sensor fornece um método que você pode usar para solicitar permissões ao usuário para usar um sensor ou uma coleção de sensores.
ms.assetid: c755edcf-18c1-43d5-9dfe-c073e1f96b5f
title: Gerenciando permissões de usuário
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ecb65fa5a9962be4850aa4711cafa03fb7658212
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103920804"
---
# <a name="managing-user-permissions"></a><span data-ttu-id="1364c-103">Gerenciando permissões de usuário</span><span class="sxs-lookup"><span data-stu-id="1364c-103">Managing User Permissions</span></span>

<span data-ttu-id="1364c-104">A API do sensor fornece um método que você pode usar para solicitar permissões ao usuário para usar um sensor ou uma coleção de sensores.</span><span class="sxs-lookup"><span data-stu-id="1364c-104">The Sensor API provides a method you can use to prompt the user for permissions to use a sensor or collection of sensors.</span></span>

<span data-ttu-id="1364c-105">Como os sensores podem revelar informações confidenciais, o Windows exige que os usuários habilitem os sensores antes que o programa possa acessar os dados.</span><span class="sxs-lookup"><span data-stu-id="1364c-105">Because sensors can reveal sensitive information, Windows requires that users enable sensors before your program can access any data.</span></span>

<span data-ttu-id="1364c-106">Talvez você queira solicitar permissão quando quiser usar sensores para os quais o [**sensorstate**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) atual é \_ \_ acesso negado ao estado do sensor \_ .</span><span class="sxs-lookup"><span data-stu-id="1364c-106">You may want to request permission when you want to use sensors for which the current [**SensorState**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) is SENSOR\_STATE\_ACCESS\_DENIED.</span></span>

<span data-ttu-id="1364c-107">Para solicitar permissões, chame o método [**ISensorManager:: RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="1364c-107">To request permissions, call the [**ISensorManager::RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method.</span></span> <span data-ttu-id="1364c-108">Quando você chama esse método, o Windows abre a caixa de diálogo **habilitar sensores** para solicitar que o usuário habilite os sensores solicitados.</span><span class="sxs-lookup"><span data-stu-id="1364c-108">When you call this method, Windows opens the **Enable sensors** dialog box to prompt the user to enable the sensors you requested.</span></span> <span data-ttu-id="1364c-109">Essa caixa de diálogo fornece ao usuário os nomes dos sensores que você solicitou.</span><span class="sxs-lookup"><span data-stu-id="1364c-109">This dialog box provides the user with the names of the sensors you requested.</span></span> <span data-ttu-id="1364c-110">O usuário pode escolher uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="1364c-110">The user can choose one of the following options:</span></span>

-   <span data-ttu-id="1364c-111">**Habilite esses sensores**.</span><span class="sxs-lookup"><span data-stu-id="1364c-111">**Enable these sensors**.</span></span>
-   <span data-ttu-id="1364c-112">**Não habilite esses sensores**.</span><span class="sxs-lookup"><span data-stu-id="1364c-112">**Don't enable these sensors**.</span></span>
-   <span data-ttu-id="1364c-113">**Abra o painel de controle para obter mais opções**.</span><span class="sxs-lookup"><span data-stu-id="1364c-113">**Open Control Panel for more options**.</span></span>

<span data-ttu-id="1364c-114">Se um usuário optar por **não habilitar esses sensores**, o Windows não mostrará a caixa de diálogo **habilitar sensores** novamente para esses sensores específicos, mesmo que seu programa chame [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span><span class="sxs-lookup"><span data-stu-id="1364c-114">If a user chooses **Don't enable these sensors**, Windows will not show the **Enable sensors** dialog box again for those particular sensors, even if your program calls [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span></span> <span data-ttu-id="1364c-115">Se o usuário escolher qualquer outra opção, o Windows permitirá que a caixa de diálogo seja exibida quando solicitado.</span><span class="sxs-lookup"><span data-stu-id="1364c-115">If the user chooses any other option, Windows will allow the dialog box to be displayed when requested.</span></span> <span data-ttu-id="1364c-116">Se sua chamada para **RequestPermissions** contiver alguns sensores que o usuário escolheu anteriormente para manter desabilitado, a API do sensor removerá esses sensores da lista de sensores que o usuário vê.</span><span class="sxs-lookup"><span data-stu-id="1364c-116">If your call to **RequestPermissions** contains some sensors that the user has previously chosen to keep disabled, the Sensor API will remove these sensors from the list of sensors the user sees.</span></span>

### <a name="modal-or-modeless-behavior"></a><span data-ttu-id="1364c-117">Comportamento modal ou sem janela restrita</span><span class="sxs-lookup"><span data-stu-id="1364c-117">Modal or Modeless Behavior</span></span>

<span data-ttu-id="1364c-118">O método [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) usa um argumento **booliano** que determina se a caixa de diálogo **habilitar sensores** é exibida como uma janela modal ou sem-modo.</span><span class="sxs-lookup"><span data-stu-id="1364c-118">The [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method takes a **Boolean** argument that determines whether the **Enable sensors** dialog box is displayed as a modal or modeless window.</span></span> <span data-ttu-id="1364c-119">Essa configuração também afeta se o comportamento do código de retorno da caixa de diálogo é síncrono ou assíncrono.</span><span class="sxs-lookup"><span data-stu-id="1364c-119">This setting also affects whether the behavior of the dialog box return code is synchronous or asynchronous.</span></span>

<span data-ttu-id="1364c-120">Quando modal, a caixa de diálogo tem foco exclusivo entre janelas de aplicativo até que o usuário escolha uma opção e o código de retorno **HRESULT** de sua chamada para [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indica a opção do usuário.</span><span class="sxs-lookup"><span data-stu-id="1364c-120">When modal, the dialog box has exclusive focus among application windows until the user chooses an option, and the **HRESULT** return code from your call to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indicates the user choice.</span></span> <span data-ttu-id="1364c-121">Quando sem janela restrita, a caixa de diálogo não tem foco exclusivo e sua chamada para **RequestPermissions** retorna imediatamente.</span><span class="sxs-lookup"><span data-stu-id="1364c-121">When modeless, the dialog box does not have exclusive focus and your call to **RequestPermissions** returns immediately.</span></span> <span data-ttu-id="1364c-122">Nesse caso, o código de retorno indica se o método foi bem-sucedido, mas não pode ser usado para determinar a escolha do usuário.</span><span class="sxs-lookup"><span data-stu-id="1364c-122">In this case, the return code indicates whether the method succeeded, but cannot be used to ascertain the user's choice.</span></span> <span data-ttu-id="1364c-123">Em seguida, você pode determinar quais sensores foram habilitados manipulando o evento [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) e verificando cada sensor para o estado do sensor \_ \_ pronto.</span><span class="sxs-lookup"><span data-stu-id="1364c-123">You can then determine which sensors have been enabled by handling the [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) event and checking each sensor for SENSOR\_STATE\_READY.</span></span>

<span data-ttu-id="1364c-124">Para obter mais informações sobre códigos de retorno, consulte a página de referência do [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="1364c-124">For more information about return codes, see the [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) reference page.</span></span>

### <a name="best-practice-avoid-multiple-modeless-calls-to-requestpermissions"></a><span data-ttu-id="1364c-125">Prática recomendada: Evite várias chamadas sem janela restrita para RequestPermissions</span><span class="sxs-lookup"><span data-stu-id="1364c-125">Best Practice: Avoid Multiple Modeless Calls to RequestPermissions</span></span>

<span data-ttu-id="1364c-126">As chamadas modeladas repetidamente para [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) exibirão várias instâncias da caixa de diálogo **habilitar esses sensores** e poderão inundar a tela com caixas de diálogo, resultando em uma experiência de usuário ruim.</span><span class="sxs-lookup"><span data-stu-id="1364c-126">Repeated modeless calls to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) will display multiple instances of the **Enable these sensors** dialog box, and can potentially flood the screen with dialog boxes, resulting in a poor user experience.</span></span> <span data-ttu-id="1364c-127">Se você pensa que, após sua primeira chamada para **RequestPermissions**, outros sensores de localização podem ser instalados, exigindo outra chamada para **RequestPermissions**, você deve chamar **RequestPermissions** modalmente ou aguardar até que todos os sensores de localização sejam instalados para fazer uma chamada sem janela restrita.</span><span class="sxs-lookup"><span data-stu-id="1364c-127">If you think that after your first call to **RequestPermissions**, other location sensors might be installed, requiring another call to **RequestPermissions**, you should either call **RequestPermissions** modally, or wait until all location sensors are installed to make a modeless call.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1364c-128">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="1364c-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1364c-129">Privacidade e segurança na plataforma de sensor e local</span><span class="sxs-lookup"><span data-stu-id="1364c-129">Privacy and Security in the Sensor and Location Platform</span></span>](privacy-and-security-in-the-sensor-and-location-platform.md)
</dt> <dt>

[<span data-ttu-id="1364c-130">Solicitando permissões de usuário</span><span class="sxs-lookup"><span data-stu-id="1364c-130">Requesting User Permissions</span></span>](requesting-user-permissions.md)
</dt> </dl>

 

 
