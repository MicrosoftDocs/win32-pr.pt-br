---
description: Usando os controles do mixer de vídeo
ms.assetid: 475996c6-a205-4133-8882-f55beaf9f8fd
title: Usando os controles do mixer de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a8a062c6f984e0eac0128bd67c72bf691c95af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010799"
---
# <a name="using-the-video-mixer-controls"></a><span data-ttu-id="efd4f-103">Usando os controles do mixer de vídeo</span><span class="sxs-lookup"><span data-stu-id="efd4f-103">Using the Video Mixer Controls</span></span>

<span data-ttu-id="efd4f-104">O mixer EVR fornece várias interfaces que um aplicativo pode usar para controlar como o mixer processa o vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-104">The EVR mixer provides several interfaces that an application can use to control how the mixer processes video.</span></span> <span data-ttu-id="efd4f-105">Essas interfaces podem ser usadas tanto no DirectShow quanto no Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="efd4f-105">These interfaces can be used in either DirectShow or Media Foundation.</span></span>



| <span data-ttu-id="efd4f-106">Interface</span><span class="sxs-lookup"><span data-stu-id="efd4f-106">Interface</span></span>                                                      | <span data-ttu-id="efd4f-107">Descrição</span><span class="sxs-lookup"><span data-stu-id="efd4f-107">Description</span></span>                                                                                                                                                                                                                                 |
|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="efd4f-108">Interface [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)</span><span class="sxs-lookup"><span data-stu-id="efd4f-108">[**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface</span></span>   | <span data-ttu-id="efd4f-109">Alfa-combina uma imagem de bitmap estática no vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-109">Alpha-blends a static bitmap image onto the video.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="efd4f-110">Interface [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)</span><span class="sxs-lookup"><span data-stu-id="efd4f-110">[**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface</span></span> | <span data-ttu-id="efd4f-111">Controla como o EVR combina subfluxos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-111">Controls how the EVR mixes video substreams.</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="efd4f-112">Interface [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)</span><span class="sxs-lookup"><span data-stu-id="efd4f-112">[**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface</span></span>       | <span data-ttu-id="efd4f-113">Controla o ajuste de cores, os filtros de imagem e outros recursos de processamento de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-113">Controls color adjustment, image filters, and other video processing capabilities.</span></span> <span data-ttu-id="efd4f-114">Essa interface fornece acesso à funcionalidade implementada pelo driver de gráficos, de modo que os recursos exatos dependerão do driver de gráficos do usuário.</span><span class="sxs-lookup"><span data-stu-id="efd4f-114">This interface provides access to functionality implemented by the graphics driver, so the exact capabilities will depend on the user's graphics driver.</span></span> |



 

<span data-ttu-id="efd4f-115">A maneira correta de obter ponteiros para essas interfaces depende se você está usando a versão do DirectShow do EVR ou a versão Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="efd4f-115">The correct way to get pointers to these interfaces depends on whether you are using the DirectShow version of the EVR or the Media Foundation version.</span></span> <span data-ttu-id="efd4f-116">Para o Media Foundation EVR, também depende se você está usando o EVR diretamente ou usando-o por meio da [sessão de mídia](media-session.md).</span><span class="sxs-lookup"><span data-stu-id="efd4f-116">For the Media Foundation EVR, it also depends on whether you are using the EVR directly or using it through the [Media Session](media-session.md).</span></span> <span data-ttu-id="efd4f-117">(Normalmente, um aplicativo usará o EVR por meio da sessão de mídia, não diretamente).</span><span class="sxs-lookup"><span data-stu-id="efd4f-117">(Typically an application will use the EVR through the Media Session, not directly).</span></span>

<span data-ttu-id="efd4f-118">Para obter um ponteiro para qualquer uma dessas interfaces, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="efd4f-118">To get a pointer to any of these interfaces, do the following:</span></span>

1.  <span data-ttu-id="efd4f-119">Obtenha um ponteiro para a interface [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) no EVR.</span><span class="sxs-lookup"><span data-stu-id="efd4f-119">Get a pointer to the [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) interface on the EVR.</span></span>

    -   <span data-ttu-id="efd4f-120">Se você estiver usando o filtro EVR do DirectShow, chame **QueryInterface** no filtro.</span><span class="sxs-lookup"><span data-stu-id="efd4f-120">If you are using the DirectShow EVR filter, call **QueryInterface** on the filter.</span></span>

    -   <span data-ttu-id="efd4f-121">Se você estiver usando o coletor de mídia do EVR diretamente, chame **QueryInterface** no coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="efd4f-121">If you are using the EVR media sink directly, call **QueryInterface** on the media sink.</span></span>

    -   <span data-ttu-id="efd4f-122">Se você estiver usando a sessão de mídia, chame **QueryInterface** na sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="efd4f-122">If you are using the Media Session, call **QueryInterface** on the Media Session.</span></span>

2.  <span data-ttu-id="efd4f-123">Se você estiver usando a sessão de mídia, aguarde até que a sessão de mídia envie o evento [MESessionTopologyStatus](mesessiontopologystatus.md) com um valor de status de MF \_ TOPOSTATUS \_ Ready.</span><span class="sxs-lookup"><span data-stu-id="efd4f-123">If you are using the Media Session, wait for the Media Session to send the [MESessionTopologyStatus](mesessiontopologystatus.md) event with a status value of MF\_TOPOSTATUS\_READY.</span></span> <span data-ttu-id="efd4f-124">(Ignore esta etapa se você não estiver usando a sessão de mídia.)</span><span class="sxs-lookup"><span data-stu-id="efd4f-124">(Skip this step if you are not using the Media Session.)</span></span>

3.  <span data-ttu-id="efd4f-125">Chame [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) para obter a interface do mixer.</span><span class="sxs-lookup"><span data-stu-id="efd4f-125">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get the mixer interface.</span></span> <span data-ttu-id="efd4f-126">Use o serviço de mixer de vídeo MR do identificador de serviço \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="efd4f-126">Use the service identifier MR\_VIDEO\_MIXER\_SERVICE.</span></span>

## <a name="alpha-blending-a-bitmap-onto-the-video"></a><span data-ttu-id="efd4f-127">Alfa combinando um bitmap no vídeo</span><span class="sxs-lookup"><span data-stu-id="efd4f-127">Alpha Blending a Bitmap onto the Video</span></span>

<span data-ttu-id="efd4f-128">Você pode usar a interface [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) para alfa misturar um bitmap estático no vídeo durante a reprodução.</span><span class="sxs-lookup"><span data-stu-id="efd4f-128">You can use the [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface to alpha blend a static bitmap onto the video during playback.</span></span> <span data-ttu-id="efd4f-129">Você pode armazenar o bitmap em uma superfície do Direct3D, especificada como um ponteiro **IDirect3DSurface9** , ou usar um bitmap GDI.</span><span class="sxs-lookup"><span data-stu-id="efd4f-129">You can store the bitmap in a Direct3D surface, specified as an **IDirect3DSurface9** pointer, or use a GDI bitmap.</span></span>

<span data-ttu-id="efd4f-130">Se você usar uma superfície do Direct3D para o bitmap, a superfície poderá conter dados alfa por pixel, que serão usados quando o mixer alfa misturar a imagem.</span><span class="sxs-lookup"><span data-stu-id="efd4f-130">If you use a Direct3D surface for the bitmap, the surface can contain per-pixel alpha data, which will be used when the mixer alpha-blends the image.</span></span> <span data-ttu-id="efd4f-131">Como alternativa, você pode definir uma chave de cor, ou seja, uma única cor que será transparente onde quer que apareça no bitmap.</span><span class="sxs-lookup"><span data-stu-id="efd4f-131">Alternatively, you can define a color key—that is, a single color that will be transparent wherever it appears in the bitmap.</span></span> <span data-ttu-id="efd4f-132">Além disso, você pode especificar um valor alfa que será aplicado a toda a imagem.</span><span class="sxs-lookup"><span data-stu-id="efd4f-132">Also, you can specify an alpha value that will be applied to the entire image.</span></span> <span data-ttu-id="efd4f-133">Você também pode definir um retângulo de origem para cortar o bitmap e um retângulo de destino para posicionar o bitmap dentro do quadro de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-133">You can also set a source rectangle to crop the bitmap, and a destination rectangle to position the bitmap within the video frame.</span></span>

<span data-ttu-id="efd4f-134">Para definir o bitmap, chame [**IMFVideoMixerBitmap:: SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="efd4f-134">To set the bitmap, call [**IMFVideoMixerBitmap::SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span></span> <span data-ttu-id="efd4f-135">Esse método usa um ponteiro para uma estrutura [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) que especifica o bitmap e os parâmetros de mesclagem alfa.</span><span class="sxs-lookup"><span data-stu-id="efd4f-135">This method takes a pointer to an [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) structure that specifies the bitmap and the alpha-blending parameters.</span></span> <span data-ttu-id="efd4f-136">Para obter um exemplo de código, consulte o tópico de referência para o método **SetAlphaBitmap** .</span><span class="sxs-lookup"><span data-stu-id="efd4f-136">For example code, see the reference topic for the **SetAlphaBitmap** method.</span></span>

<span data-ttu-id="efd4f-137">Depois de definir o bitmap, você pode atualizar os parâmetros de mesclagem, incluindo a origem e o destino recangles, chamando [**IMFVideoMixerBitmap:: UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span><span class="sxs-lookup"><span data-stu-id="efd4f-137">After you set the bitmap, you can update the blending parameters, including the source and destination recangles, by calling [**IMFVideoMixerBitmap::UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span></span> <span data-ttu-id="efd4f-138">A atualização entra em vigor no próximo quadro de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-138">The update takes effect on the next video frame.</span></span> <span data-ttu-id="efd4f-139">O vídeo deve estar sendo reproduzido para que a atualização ocorra.</span><span class="sxs-lookup"><span data-stu-id="efd4f-139">The video must be playing for the update to occur.</span></span> <span data-ttu-id="efd4f-140">Você pode usar esse método para executar animações simples no bitmap.</span><span class="sxs-lookup"><span data-stu-id="efd4f-140">You can use this method to perform simple animations on the bitmap.</span></span> <span data-ttu-id="efd4f-141">(Se você precisar de efeitos mais sofisticados, considere escrever um mixer EVR personalizado.)</span><span class="sxs-lookup"><span data-stu-id="efd4f-141">(If you need more sophisticated effects, consider writing a custom EVR mixer.)</span></span>

<span data-ttu-id="efd4f-142">Para limpar o bitmap, chame [**IMFVideoMixerBitmap:: ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="efd4f-142">To clear the bitmap, call [**IMFVideoMixerBitmap::ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span></span>

## <a name="controlling-substreams"></a><span data-ttu-id="efd4f-143">Controlando subfluxos</span><span class="sxs-lookup"><span data-stu-id="efd4f-143">Controlling Substreams</span></span>

<span data-ttu-id="efd4f-144">O EVR pode misturar um ou mais subfluxos de vídeo no fluxo de vídeo primário.</span><span class="sxs-lookup"><span data-stu-id="efd4f-144">The EVR can mix one or more video substreams onto the primary video stream.</span></span> <span data-ttu-id="efd4f-145">Para controlar a combinação de Subfluxo, use a interface [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) .</span><span class="sxs-lookup"><span data-stu-id="efd4f-145">To control substream mixing, use the [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface.</span></span>

-   <span data-ttu-id="efd4f-146">Chame [**IMFVideoMixerControl:: SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) para definir a posição de um subfluxo dentro do quadro de vídeo composto.</span><span class="sxs-lookup"><span data-stu-id="efd4f-146">Call [**IMFVideoMixerControl::SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) to set the position of a substream within the composited video frame.</span></span>

-   <span data-ttu-id="efd4f-147">Chame [**IMFVideoMixerControl:: SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) para definir a ordem z para os subfluxos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-147">Call [**IMFVideoMixerControl::SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) to set the z-order for the substreams.</span></span> <span data-ttu-id="efd4f-148">O EVR desenha os fluxos de vídeo na ordem dos valores de ordem z, começando com zero.</span><span class="sxs-lookup"><span data-stu-id="efd4f-148">The EVR draws the video streams in the order of their z-order values, starting with zero.</span></span> <span data-ttu-id="efd4f-149">O fluxo de vídeo primário sempre é o primeiro na ordem z.</span><span class="sxs-lookup"><span data-stu-id="efd4f-149">The primary video stream is always first in the z-order.</span></span>

## <a name="video-processor-settings"></a><span data-ttu-id="efd4f-150">Configurações do processador de vídeo</span><span class="sxs-lookup"><span data-stu-id="efd4f-150">Video Processor Settings</span></span>

<span data-ttu-id="efd4f-151">O mixer EVR usa a DXVA (aceleração de vídeo do DirectX) para executar o processamento de vídeo nos fluxos de entrada.</span><span class="sxs-lookup"><span data-stu-id="efd4f-151">The EVR mixer uses DirectX Video Acceleration (DXVA) to perform video processing on the input streams.</span></span> <span data-ttu-id="efd4f-152">Os recursos de processamento exatos dependem do driver de gráficos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-152">The exact processing capabilities depend on the graphics driver.</span></span> <span data-ttu-id="efd4f-153">Os recursos de processamento de vídeo são descritos usando a estrutura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) .</span><span class="sxs-lookup"><span data-stu-id="efd4f-153">Video processing capabilities are described by using the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure.</span></span> <span data-ttu-id="efd4f-154">Um conjunto específico de recursos é chamado de *modo de processamento de vídeo*, cada modo que está sendo identificado por um GUID.</span><span class="sxs-lookup"><span data-stu-id="efd4f-154">A particular set of capabilities is called a *video processing mode*, each mode being identified by a GUID.</span></span> <span data-ttu-id="efd4f-155">Para obter uma lista de GUIDs predefinidos, consulte [**IDirectXVideoProcessorService:: GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span><span class="sxs-lookup"><span data-stu-id="efd4f-155">For a list of predefined GUIDs, see [**IDirectXVideoProcessorService::GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span></span> <span data-ttu-id="efd4f-156">O driver pode definir GUIDs adicionais específicos do fornecedor, representando diferentes combinações de recursos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-156">The driver might define additional vendor-specific GUIDs, representing different combinations of capabilities.</span></span>

<span data-ttu-id="efd4f-157">Para localizar os modos com suporte e os recursos de cada modo, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="efd4f-157">To find the supported modes and the capabilities of each mode, do the following:</span></span>

1.  <span data-ttu-id="efd4f-158">Chame [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) para obter um ponteiro para a interface [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) do mixer.</span><span class="sxs-lookup"><span data-stu-id="efd4f-158">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get a pointer to the mixer's [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface.</span></span>

2.  <span data-ttu-id="efd4f-159">Chame [**IMFVideoProcessor:: GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span><span class="sxs-lookup"><span data-stu-id="efd4f-159">Call [**IMFVideoProcessor::GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span></span> <span data-ttu-id="efd4f-160">Esse método retorna uma matriz de GUIDs, que identifica os modos de processador de vídeo disponíveis.</span><span class="sxs-lookup"><span data-stu-id="efd4f-160">This method returns an array of GUIDs, which identify the available video processor modes.</span></span> <span data-ttu-id="efd4f-161">A lista é retornada em ordem de qualidade decrescente, o modo com a qualidade mais alta aparecendo primeiro na lista.</span><span class="sxs-lookup"><span data-stu-id="efd4f-161">The list is returned in descending quality order, the mode with the highest quality appearing first in the list.</span></span> <span data-ttu-id="efd4f-162">A lista pode ser alterada dependendo do formato do vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-162">The list can change depending on the format of the video.</span></span>

3.  <span data-ttu-id="efd4f-163">Para cada GUID na lista, chame [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) para localizar os recursos do modo de processador de vídeo correspondente.</span><span class="sxs-lookup"><span data-stu-id="efd4f-163">For each GUID in the list, call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the capabilities of the corresponding video processor mode.</span></span> <span data-ttu-id="efd4f-164">O método preenche uma estrutura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) com uma descrição dos recursos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-164">The method fills a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure with a description of the capabilities.</span></span>

4.  <span data-ttu-id="efd4f-165">Para selecionar um modo, chame [**IMFVideoProcessor:: SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span><span class="sxs-lookup"><span data-stu-id="efd4f-165">To select a mode, call [**IMFVideoProcessor::SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span></span> <span data-ttu-id="efd4f-166">Caso contrário, o EVR selecionará automaticamente um modo quando o streaming começar.</span><span class="sxs-lookup"><span data-stu-id="efd4f-166">Otherwise, the EVR automatically selects a mode when streaming begins.</span></span> <span data-ttu-id="efd4f-167">Nesse caso, você pode chamar [**IMFVideoProcessor:: GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) para descobrir qual modo foi selecionado.</span><span class="sxs-lookup"><span data-stu-id="efd4f-167">In that case, you can call [**IMFVideoProcessor::GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) to find which mode was selected.</span></span>

<span data-ttu-id="efd4f-168">A maioria dos campos na estrutura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) descreve o comportamento de driver de nível baixo e não é de interesse em um aplicativo típico.</span><span class="sxs-lookup"><span data-stu-id="efd4f-168">Most of the fields in the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure describe low-level driver behavior and are not of interest in a typical application.</span></span> <span data-ttu-id="efd4f-169">Os campos a seguir têm maior probabilidade de serem interessantes:</span><span class="sxs-lookup"><span data-stu-id="efd4f-169">The following fields are most likely to be of interest:</span></span>

-   <span data-ttu-id="efd4f-170">**DeviceCaps**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-170">**DeviceCaps**.</span></span> <span data-ttu-id="efd4f-171">Esse campo indica se o processamento de vídeo é executado em hardware ou software e se o driver de gráficos é um driver de DXVA 1,0 mais antigo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-171">This field indicates whether video processing is performed in hardware or software, and whether the graphics driver is an older DXVA 1.0 driver.</span></span>

-   <span data-ttu-id="efd4f-172">**DeinterlaceTechnology**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-172">**DeinterlaceTechnology**.</span></span> <span data-ttu-id="efd4f-173">Este campo fornece alguma indicação de qual nível de qualidade de desentrelaçamento você pode esperar se o vídeo de origem estiver entrelaçado.</span><span class="sxs-lookup"><span data-stu-id="efd4f-173">This field provides some indication of what level of deinterlacing quality you can expect if the source video is interlaced.</span></span>

-   <span data-ttu-id="efd4f-174">**ProcAmpControlCaps**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-174">**ProcAmpControlCaps**.</span></span> <span data-ttu-id="efd4f-175">Este campo especifica quais controles de ajuste de cor estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="efd4f-175">This field specifies which color adjustment controls are available.</span></span> <span data-ttu-id="efd4f-176">Para obter uma lista de possíveis ajustes de cor, consulte [configurações do Procamp](procamp-settings.md).</span><span class="sxs-lookup"><span data-stu-id="efd4f-176">For a list of possible color adjustments, see [ProcAmp Settings](procamp-settings.md).</span></span> <span data-ttu-id="efd4f-177">Se o driver não puder executar o ajuste de cor, esse campo será zero.</span><span class="sxs-lookup"><span data-stu-id="efd4f-177">If the driver cannot perform color adjustment, this field is zero.</span></span>

-   <span data-ttu-id="efd4f-178">**VideoProcessorOperations**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-178">**VideoProcessorOperations**.</span></span> <span data-ttu-id="efd4f-179">Este campo contém sinalizadores que descrevem diversos recursos de processamento de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-179">This field contains flags that describe miscellaneous video processing capabilities.</span></span> <span data-ttu-id="efd4f-180">Dois sinalizadores de importância específica são o \_ sinalizador de \_ subfluxos do DXVA2 VideoProcess e \_ o \_ sinalizador de subfluxos do DXVA2 VideoProcess.</span><span class="sxs-lookup"><span data-stu-id="efd4f-180">Two flags of particular importance are the DXVA2\_VideoProcess\_SubStreams flag and the DXVA2\_VideoProcess\_SubStreams flag.</span></span> <span data-ttu-id="efd4f-181">Pelo menos um desses sinalizadores deve estar presente para que o EVR misture subfluxos para o fluxo de vídeo de referência.</span><span class="sxs-lookup"><span data-stu-id="efd4f-181">At least one of these flags must be present for the EVR to mix substreams onto the reference video stream.</span></span> <span data-ttu-id="efd4f-182">Se nenhum sinalizador estiver presente, o EVR será limitado a um fluxo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="efd4f-182">If neither flag is present, the EVR is limited to one video stream.</span></span>

-   <span data-ttu-id="efd4f-183">**NoiseFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-183">**NoiseFilterTechnology**.</span></span> <span data-ttu-id="efd4f-184">Este campo indica quais filtros de ruído são suportados pelo driver de gráficos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-184">This field indicates which noise filters are supported by the graphics driver.</span></span> <span data-ttu-id="efd4f-185">Se o driver não oferecer suporte à filtragem de ruído, o valor será DXVA2 \_ NoiseFilterTech \_ sem suporte.</span><span class="sxs-lookup"><span data-stu-id="efd4f-185">If the driver does not support noise filtering, the value is DXVA2\_NoiseFilterTech\_Unsupported.</span></span>

-   <span data-ttu-id="efd4f-186">**DetailFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="efd4f-186">**DetailFilterTechnology**.</span></span> <span data-ttu-id="efd4f-187">Este campo indica quais filtros de detalhes têm suporte no driver de gráficos.</span><span class="sxs-lookup"><span data-stu-id="efd4f-187">This field indicates which detail filters are supported by the graphics driver.</span></span> <span data-ttu-id="efd4f-188">Se o driver não oferecer suporte à filtragem de ruído, o valor será DXVA2 \_ DetailFilterTech \_ sem suporte.</span><span class="sxs-lookup"><span data-stu-id="efd4f-188">If the driver does not support noise filtering, the value is DXVA2\_DetailFilterTech\_Unsupported.</span></span>

## <a name="color-adjustment-and-image-filtering"></a><span data-ttu-id="efd4f-189">Ajuste de cores e filtragem de imagem</span><span class="sxs-lookup"><span data-stu-id="efd4f-189">Color Adjustment and Image Filtering</span></span>

<span data-ttu-id="efd4f-190">O driver de gráficos pode dar suporte ao ajuste de cores (também chamado de *amplificação de processo* ou simples de *Procamp*) e filtragem de imagem.</span><span class="sxs-lookup"><span data-stu-id="efd4f-190">The graphics driver might support color adjustment (also called *process amplification* or simply *ProcAmp*) and image filtering.</span></span> <span data-ttu-id="efd4f-191">Quando executado pela GPU, o ajuste de cor e a filtragem de imagem podem ser feitos em tempo real sem sobrecarga de CPU.</span><span class="sxs-lookup"><span data-stu-id="efd4f-191">When performed by the GPU, color adjustment and image filtering can be done in real time with no CPU overhead.</span></span>

<span data-ttu-id="efd4f-192">Para usar esses recursos, execute as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="efd4f-192">To use these features, perform the following steps:</span></span>

1.  <span data-ttu-id="efd4f-193">Selecione um modo de processamento de vídeo conforme descrito na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="efd4f-193">Select a video processing mode as described in the previous section.</span></span>

2.  <span data-ttu-id="efd4f-194">Chame [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) para localizar os recursos de processamento de vídeo, conforme descrito na seção anterior.</span><span class="sxs-lookup"><span data-stu-id="efd4f-194">Call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the video processing capabilities as described in the previous section.</span></span> <span data-ttu-id="efd4f-195">O método preenche uma estrutura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) que descreve os recursos, incluindo se o driver dá suporte ao ajuste de cores e ao filtro de imagem.</span><span class="sxs-lookup"><span data-stu-id="efd4f-195">The method fills in a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure which describes the capabilities, including whether the driver supports color adjustment and image filter.</span></span>

3.  <span data-ttu-id="efd4f-196">Para cada ajuste de cor com suporte no driver, chame [**IMFVideoProcessor:: GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) para localizar o intervalo de valor possível para essa configuração.</span><span class="sxs-lookup"><span data-stu-id="efd4f-196">For each color adjustment that is supported by driver, call [**IMFVideoProcessor::GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) to find the possible range of value for that setting.</span></span> <span data-ttu-id="efd4f-197">Esse método também retorna o valor padrão para a configuração.</span><span class="sxs-lookup"><span data-stu-id="efd4f-197">This method also returns the default value for the setting.</span></span> <span data-ttu-id="efd4f-198">Chame [**IMFVideoProcessor:: GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) para localizar o valor atual das configurações.</span><span class="sxs-lookup"><span data-stu-id="efd4f-198">Call [**IMFVideoProcessor::GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) to find the current value of the settings.</span></span> <span data-ttu-id="efd4f-199">Os valores não têm unidades especificadas.</span><span class="sxs-lookup"><span data-stu-id="efd4f-199">The values do not have specified units.</span></span> <span data-ttu-id="efd4f-200">Cabe ao driver definir o intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="efd4f-200">It is up to the driver to define the range of values.</span></span>

4.  <span data-ttu-id="efd4f-201">Chame [**IMFVideoProcessor:: Setfiltervalue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) para definir um valor de ajuste de cor.</span><span class="sxs-lookup"><span data-stu-id="efd4f-201">Call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) to set a color adjustment value.</span></span>

5.  <span data-ttu-id="efd4f-202">Se o driver oferecer suporte à filtragem de imagem, cada tipo de filtro (ruído e detalhes) dará suporte a três configurações — nível, raio e limite — em croma e Luma.</span><span class="sxs-lookup"><span data-stu-id="efd4f-202">If the driver supports image filtering, then each filter type (noise and detail) supports three settings—level, radius, and threshold—in both chroma and luma.</span></span> <span data-ttu-id="efd4f-203">(Consulte [configurações de filtro de imagem de DXVA](dxva-image-filter-settings.md).) Para cada configuração, chame [**IMFVideoProcessor:: GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) para obter o intervalo de valores possíveis e chame [**IMFVideoProcessor:: getfiltervalue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) para obter o valor atual.</span><span class="sxs-lookup"><span data-stu-id="efd4f-203">(See [DXVA Image Filter Settings](dxva-image-filter-settings.md).) For each setting, call [**IMFVideoProcessor::GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) to get the range of possible values and call [**IMFVideoProcessor::GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) to get the current value.</span></span>

6.  <span data-ttu-id="efd4f-204">Para alterar uma configuração de filtro de imagem, chame [**IMFVideoProcessor:: Setfiltervalue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span><span class="sxs-lookup"><span data-stu-id="efd4f-204">To change an image filter setting, call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span></span>

## <a name="related-topics"></a><span data-ttu-id="efd4f-205">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="efd4f-205">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="efd4f-206">Processador de vídeo aprimorado</span><span class="sxs-lookup"><span data-stu-id="efd4f-206">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 



