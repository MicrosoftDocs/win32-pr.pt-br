---
description: Os coletores de mídia são os objetos de pipeline que recebem dados de mídia.
ms.assetid: a0fbce1b-0a16-4449-9eca-906fd9056a1c
title: Coletores de mídia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9394cbfd49a631d59b9296202a2b6ca7a868869
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/03/2021
ms.locfileid: "104297898"
---
# <a name="media-sinks"></a><span data-ttu-id="915b8-103">Coletores de mídia</span><span class="sxs-lookup"><span data-stu-id="915b8-103">Media Sinks</span></span>

<span data-ttu-id="915b8-104">Os *coletores de mídia* são os objetos de pipeline que recebem dados de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-104">*Media sinks* are the pipeline objects that receive media data.</span></span> <span data-ttu-id="915b8-105">Um coletor de mídia é o destino de um ou mais fluxos de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-105">A media sink is the destination for one or more media streams.</span></span> <span data-ttu-id="915b8-106">Os coletores de mídia se enquadram em duas categorias gerais:</span><span class="sxs-lookup"><span data-stu-id="915b8-106">Media sinks fall into two general categories:</span></span>

-   <span data-ttu-id="915b8-107">Um *renderizador* é um coletor de mídia que apresenta dados para reprodução.</span><span class="sxs-lookup"><span data-stu-id="915b8-107">A *renderer* is a media sink that presents data for playback.</span></span> <span data-ttu-id="915b8-108">O processador de vídeo avançado (EVR) exibe quadros de vídeo e o processador de áudio reproduz fluxos de áudio por meio da placa de som ou outro dispositivo de áudio.</span><span class="sxs-lookup"><span data-stu-id="915b8-108">The enhanced video renderer (EVR) displays video frames, and the audio renderer plays audio streams through the sound card or other audio device.</span></span>

-   <span data-ttu-id="915b8-109">Um *coletor de arquivo* é um coletor de mídia que grava dados em um arquivo ou outro armazenamento.</span><span class="sxs-lookup"><span data-stu-id="915b8-109">An *archive sink* is a media sink that writes data to a file or other storage.</span></span>

<span data-ttu-id="915b8-110">A principal diferença entre eles é que um coletor de arquivo morto não consome os dados em uma taxa de reprodução fixa.</span><span class="sxs-lookup"><span data-stu-id="915b8-110">The main difference between them is that an archive sink does not consume the data at a fixed playback rate.</span></span> <span data-ttu-id="915b8-111">Em vez disso, ele grava os dados que recebe o mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="915b8-111">Instead, it writes the data that it receives as quickly as possible.</span></span>

<span data-ttu-id="915b8-112">Os coletores de mídia expõem a interface [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) .</span><span class="sxs-lookup"><span data-stu-id="915b8-112">Media sinks expose the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface.</span></span> <span data-ttu-id="915b8-113">Cada coletor de mídia contém um ou mais *coletores de fluxo*.</span><span class="sxs-lookup"><span data-stu-id="915b8-113">Each media sink contains one or more *stream sinks*.</span></span> <span data-ttu-id="915b8-114">Cada coletor de fluxo recebe os dados de um fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-114">Each stream sink receives the data from one stream.</span></span> <span data-ttu-id="915b8-115">Os coletores de fluxo expõem a interface [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) .</span><span class="sxs-lookup"><span data-stu-id="915b8-115">Stream sinks expose the [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface.</span></span> <span data-ttu-id="915b8-116">Normalmente, um aplicativo não cria coletores de mídia diretamente.</span><span class="sxs-lookup"><span data-stu-id="915b8-116">Typically an application does not create media sinks directly.</span></span> <span data-ttu-id="915b8-117">Em vez disso, o aplicativo cria um ou mais objetos de ativação, que a sessão de mídia usa para criar o coletor.</span><span class="sxs-lookup"><span data-stu-id="915b8-117">Instead, the application creates one or more activation objects, which the Media Session uses to create the sink.</span></span> <span data-ttu-id="915b8-118">Todas as outras operações no coletor são tratadas pela sessão de mídia e o aplicativo não chama nenhum método no coletor de mídia ou qualquer um dos coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-118">All other operations on the sink are handled by the Media Session, and the application does not call any methods on the media sink or any of the stream sinks.</span></span> <span data-ttu-id="915b8-119">Para obter mais informações sobre objetos de ativação, consulte [Activation Objects](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="915b8-119">For more information about activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="915b8-120">Você deve ler o restante deste tópico se estiver escrevendo um coletor de mídia personalizado ou se quiser usar um coletor de mídia diretamente sem a sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-120">You should read the remainder of this topic if you are writing a custom media sink, or if you want to use a media sink directly without the Media Session.</span></span>

-   [<span data-ttu-id="915b8-121">Coletores de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-121">Stream Sinks</span></span>](#stream-sinks)
-   [<span data-ttu-id="915b8-122">Relógio de apresentação</span><span class="sxs-lookup"><span data-stu-id="915b8-122">Presentation Clock</span></span>](#presentation-clock)
-   [<span data-ttu-id="915b8-123">Formatos de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-123">Stream Formats</span></span>](#stream-formats)
-   [<span data-ttu-id="915b8-124">Fluxo de Dados</span><span class="sxs-lookup"><span data-stu-id="915b8-124">Data Flow</span></span>](#data-flow)
-   [<span data-ttu-id="915b8-125">Marcadores</span><span class="sxs-lookup"><span data-stu-id="915b8-125">Markers</span></span>](#markers)
-   [<span data-ttu-id="915b8-126">Alterações de estado</span><span class="sxs-lookup"><span data-stu-id="915b8-126">State Changes</span></span>](#state-changes)
-   [<span data-ttu-id="915b8-127">Finalizando</span><span class="sxs-lookup"><span data-stu-id="915b8-127">Finalizing</span></span>](#finalizing)
-   [<span data-ttu-id="915b8-128">Desligando</span><span class="sxs-lookup"><span data-stu-id="915b8-128">Shutting Down</span></span>](#shutting-down)
-   [<span data-ttu-id="915b8-129">Interfaces de coletor de mídia</span><span class="sxs-lookup"><span data-stu-id="915b8-129">Media Sink Interfaces</span></span>](#media-sink-interfaces)
-   [<span data-ttu-id="915b8-130">Interfaces de coletor de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-130">Stream Sink Interfaces</span></span>](#stream-sink-interfaces)
-   [<span data-ttu-id="915b8-131">Eventos de coletor de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-131">Stream Sink Events</span></span>](#stream-sink-events)
-   [<span data-ttu-id="915b8-132">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="915b8-132">Related topics</span></span>](#related-topics)

## <a name="stream-sinks"></a><span data-ttu-id="915b8-133">Coletores de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-133">Stream Sinks</span></span>

<span data-ttu-id="915b8-134">Um coletor de mídia pode ter um número fixo de coletores de fluxo ou pode dar suporte à adição e remoção de coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-134">A media sink can have a fixed number of stream sinks, or it can support adding and removing stream sinks.</span></span> <span data-ttu-id="915b8-135">Se ele tiver um número fixo de coletores de fluxo, o método [**IMFMediaSink:: getcaracterísticas**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retornará o \_ sinalizador de fluxos fixos MEDIASINK \_ .</span><span class="sxs-lookup"><span data-stu-id="915b8-135">If it has a fixed number of stream sinks, the [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_FIXED\_STREAMS flag.</span></span> <span data-ttu-id="915b8-136">Caso contrário, você pode adicionar e remover coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-136">Otherwise, you can add and remove stream sinks.</span></span> <span data-ttu-id="915b8-137">Para adicionar um novo coletor de fluxo, chame [**IMFMediaSink:: AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span><span class="sxs-lookup"><span data-stu-id="915b8-137">To add a new stream sink, call [**IMFMediaSink::AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span></span> <span data-ttu-id="915b8-138">Para remover um coletor de fluxo, chame [**IMFMediaSink:: RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span><span class="sxs-lookup"><span data-stu-id="915b8-138">To remove a stream sink, call [**IMFMediaSink::RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span></span> <span data-ttu-id="915b8-139">O \_ sinalizador de fluxos fixos MEDIASINK \_ indica que o coletor de mídia não dá suporte a esses dois métodos.</span><span class="sxs-lookup"><span data-stu-id="915b8-139">The MEDIASINK\_FIXED\_STREAMS flag indicates that the media sink does not support these two methods.</span></span> <span data-ttu-id="915b8-140">(Ele pode dar suporte a alguma outra maneira de configurar o número de fluxos, por exemplo, definindo parâmetros de inicialização quando o coletor é criado.) A lista de coletores de fluxo é ordenada.</span><span class="sxs-lookup"><span data-stu-id="915b8-140">(It might support some other way to configure the number of streams, for example by setting initialization parameters when the sink is created.) The list of stream sinks is ordered.</span></span> <span data-ttu-id="915b8-141">Para enumerá-los por valor de índice, chame o método [**IMFMediaSink:: GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) .</span><span class="sxs-lookup"><span data-stu-id="915b8-141">To enumerate them by index value, call the [**IMFMediaSink::GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) method.</span></span>

<span data-ttu-id="915b8-142">Coletores de fluxo também têm identificadores.</span><span class="sxs-lookup"><span data-stu-id="915b8-142">Stream sinks also have identifiers.</span></span> <span data-ttu-id="915b8-143">Os identificadores de fluxo são exclusivos no coletor de mídia, mas não precisam ser consecutivos.</span><span class="sxs-lookup"><span data-stu-id="915b8-143">Stream identifiers are unique within the media sink, but do not have to be consecutive.</span></span> <span data-ttu-id="915b8-144">Dependendo do coletor de mídia, os identificadores de fluxo podem ter algum significado relacionado ao conteúdo.</span><span class="sxs-lookup"><span data-stu-id="915b8-144">Depending on the media sink, the stream identifiers might have some meaning that is related to the content.</span></span> <span data-ttu-id="915b8-145">Por exemplo, um coletor de arquivos pode gravar os identificadores de fluxo no cabeçalho do arquivo.</span><span class="sxs-lookup"><span data-stu-id="915b8-145">For example, an archive sink might write the stream identifiers into the file header.</span></span> <span data-ttu-id="915b8-146">Caso contrário, eles são arbitrários.</span><span class="sxs-lookup"><span data-stu-id="915b8-146">Otherwise, they are arbitrary.</span></span> <span data-ttu-id="915b8-147">Para obter um coletor de fluxo por seu identificador, chame [**IMFMediaSink:: GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span><span class="sxs-lookup"><span data-stu-id="915b8-147">To get a stream sink by its identifier, call [**IMFMediaSink::GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span></span>

## <a name="presentation-clock"></a><span data-ttu-id="915b8-148">Relógio de apresentação</span><span class="sxs-lookup"><span data-stu-id="915b8-148">Presentation Clock</span></span>

<span data-ttu-id="915b8-149">A taxa em que um coletor de mídia consome amostras é controlada pelo [relógio de apresentação](presentation-clock.md).</span><span class="sxs-lookup"><span data-stu-id="915b8-149">The rate at which a media sink consumes samples is controlled by the [Presentation Clock](presentation-clock.md).</span></span> <span data-ttu-id="915b8-150">A sessão de mídia seleciona o relógio de apresentação e o define no coletor de mídia chamando o método [**IMFMediaSink:: SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) do coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-150">The Media Session selects the presentation clock and sets it on the media sink by calling the media sink's [**IMFMediaSink::SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) method.</span></span> <span data-ttu-id="915b8-151">O relógio de apresentação deve ser definido no coletor de mídia antes que o streaming possa começar.</span><span class="sxs-lookup"><span data-stu-id="915b8-151">The presentation clock must be set on the media sink before streaming can begin.</span></span> <span data-ttu-id="915b8-152">Cada coletor de mídia requer um relógio de apresentação para ser executado.</span><span class="sxs-lookup"><span data-stu-id="915b8-152">Every media sink requires a presentation clock to run.</span></span> <span data-ttu-id="915b8-153">O coletor de mídia usa o relógio de apresentação para duas finalidades:</span><span class="sxs-lookup"><span data-stu-id="915b8-153">The media sink uses the presentation clock for two purposes:</span></span>

-   <span data-ttu-id="915b8-154">Para receber notificações quando o streaming iniciar ou parar.</span><span class="sxs-lookup"><span data-stu-id="915b8-154">To receive notifications when streaming starts or stops.</span></span> <span data-ttu-id="915b8-155">O coletor de mídia recebe essas notificações por meio da interface [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) , que todos os coletores de mídia devem implementar.</span><span class="sxs-lookup"><span data-stu-id="915b8-155">The media sink receives these notifications through the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface, which all media sinks must implement.</span></span>

-   <span data-ttu-id="915b8-156">Para determinar quando ele deve renderizar exemplos.</span><span class="sxs-lookup"><span data-stu-id="915b8-156">To determine when it should render samples.</span></span> <span data-ttu-id="915b8-157">Quando o coletor de mídia recebe um novo exemplo, ele obtém o carimbo de data/hora do exemplo e tenta renderizar o exemplo nesse horário de apresentação.</span><span class="sxs-lookup"><span data-stu-id="915b8-157">When the media sink receives a new sample, it gets the time stamp from the sample and tries to render the sample at that presentation time.</span></span>

<span data-ttu-id="915b8-158">O relógio de apresentação deriva seus horários de relógio de outro objeto chamado *fonte de tempo de apresentação*.</span><span class="sxs-lookup"><span data-stu-id="915b8-158">The presentation clock derives its clock times from another object called the *presentation time source*.</span></span> <span data-ttu-id="915b8-159">As fontes de tempo de apresentação expõem a interface [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) .</span><span class="sxs-lookup"><span data-stu-id="915b8-159">Presentation time sources expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="915b8-160">Alguns coletores de mídia têm acesso a um relógio preciso, portanto, expõem essa interface.</span><span class="sxs-lookup"><span data-stu-id="915b8-160">Some media sinks have access to an accurate clock, so they expose this interface.</span></span> <span data-ttu-id="915b8-161">Isso significa que um coletor de mídia pode agendar amostras em relação a um tempo fornecido por seu próprio relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-161">This means that a media sink might schedule samples against a time provided by its own clock.</span></span> <span data-ttu-id="915b8-162">No entanto, o coletor de mídia não pode pressupor que esse seja o caso.</span><span class="sxs-lookup"><span data-stu-id="915b8-162">However, the media sink cannot assume this to be the case.</span></span> <span data-ttu-id="915b8-163">Ele sempre deve usar o tempo do relógio de apresentação, independentemente de o relógio de apresentação ser controlado pelo próprio coletor de mídia ou por algum outro relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-163">It must always use the time from the presentation clock, regardless of whether the presentation clock is driven by the media sink itself, or by some other clock.</span></span>

<span data-ttu-id="915b8-164">Se um coletor de mídia não corresponder a taxas com um relógio diferente de seu próprio, o método [**getcaracterísticas**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retornará o MEDIASINK \_ não poderá \_ corresponder ao sinalizador de \_ relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-164">If a media sink cannot match rates with a clock other than its own, the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag.</span></span> <span data-ttu-id="915b8-165">Se esse sinalizador estiver presente e o relógio de apresentação usar uma fonte de tempo de apresentação diferente, provavelmente o coletor de mídia será executado inadequadamente.</span><span class="sxs-lookup"><span data-stu-id="915b8-165">If this flag is present and the presentation clock uses a different presentation time source, the media sink is likely to perform poorly.</span></span> <span data-ttu-id="915b8-166">Por exemplo, pode haver uma falha durante a reprodução.</span><span class="sxs-lookup"><span data-stu-id="915b8-166">For example, it might glitch during playback.</span></span>

<span data-ttu-id="915b8-167">Um coletor sem *taxa* é um coletor de mídia que ignora os carimbos de data/hora em exemplos e consome dados assim que cada amostra chega.</span><span class="sxs-lookup"><span data-stu-id="915b8-167">A *rateless* sink is a media sink that ignores the time stamps on samples and consumes data as soon as each sample arrives.</span></span> <span data-ttu-id="915b8-168">Um coletor de mídia sem taxa retorna o \_ sinalizador MEDIASINK sem taxa do método [**getcaracterísticas**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) .</span><span class="sxs-lookup"><span data-stu-id="915b8-168">A rateless media sink returns the MEDIASINK\_RATELESS flag from the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="915b8-169">Normalmente, esse sinalizador se aplica aos coletores de arquivo.</span><span class="sxs-lookup"><span data-stu-id="915b8-169">Typically this flag applies to archive sinks.</span></span> <span data-ttu-id="915b8-170">Se cada coletor de mídia no pipeline for sem taxa, a sessão de mídia usará um relógio de apresentação de taxa especial.</span><span class="sxs-lookup"><span data-stu-id="915b8-170">If every media sink in the pipeline is rateless, the Media Session uses a special rateless presentation clock.</span></span> <span data-ttu-id="915b8-171">Esse relógio é executado tão rapidamente quanto os coletores consomem exemplos.</span><span class="sxs-lookup"><span data-stu-id="915b8-171">This clock runs as quickly as the sinks consume samples.</span></span>

## <a name="stream-formats"></a><span data-ttu-id="915b8-172">Formatos de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-172">Stream Formats</span></span>

<span data-ttu-id="915b8-173">Antes que o coletor de mídia possa receber amostras, o cliente deve definir o tipo de mídia nos coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-173">Before the media sink can receive samples, the client must set the media type on the stream sinks.</span></span> <span data-ttu-id="915b8-174">Para definir o tipo de mídia, chame o método [**IMFStreamSink:: GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) do coletor de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-174">To set the media type, call the stream sink's [**IMFStreamSink::GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) method.</span></span> <span data-ttu-id="915b8-175">Esse método retorna um ponteiro para a interface [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) .</span><span class="sxs-lookup"><span data-stu-id="915b8-175">This method returns a pointer to the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface.</span></span> <span data-ttu-id="915b8-176">Use essa interface para obter a lista de tipos de mídia preferenciais, obter o tipo de mídia atual e definir o tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-176">Use this interface to get the list of preferred media types, get the current media type, and set the media type.</span></span>

<span data-ttu-id="915b8-177">Para obter a lista de tipos de mídia preferenciais, chame [**IMFMediaTypeHandler:: GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span><span class="sxs-lookup"><span data-stu-id="915b8-177">To get the list of preferred media types, call [**IMFMediaTypeHandler::GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span></span> <span data-ttu-id="915b8-178">Os tipos preferenciais devem ser levados em uma dica ao cliente.</span><span class="sxs-lookup"><span data-stu-id="915b8-178">The preferred types should be taken as a hint to the client.</span></span> <span data-ttu-id="915b8-179">A lista pode estar incompleta ou incluir tipos de mídia parciais.</span><span class="sxs-lookup"><span data-stu-id="915b8-179">The list might be incomplete or include partial media types.</span></span> <span data-ttu-id="915b8-180">Um tipo de mídia parcial é aquele que não tem todos os atributos necessários para descrever um formato válido.</span><span class="sxs-lookup"><span data-stu-id="915b8-180">A partial media type is one that does not have all of the attributes needed to describe a valid format.</span></span> <span data-ttu-id="915b8-181">Por exemplo, um tipo de vídeo parcial pode especificar o espaço de cores e a profundidade de bits, mas não a largura ou altura da imagem.</span><span class="sxs-lookup"><span data-stu-id="915b8-181">For example, a partial video type might specify the color space and bit depth but not the image width or height.</span></span> <span data-ttu-id="915b8-182">Um tipo de áudio parcial pode especificar o formato de compactação e a taxa de amostra, mas não o número de canais de áudio.</span><span class="sxs-lookup"><span data-stu-id="915b8-182">A partial audio type might specify the compression format and the sample rate but not the number of audio channels.</span></span>

<span data-ttu-id="915b8-183">Para obter o tipo de mídia atual do coletor de fluxo, chame [**IMFMediaTypeHandler:: GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="915b8-183">To get the stream sink's current media type, call [**IMFMediaTypeHandler::GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span></span> <span data-ttu-id="915b8-184">Quando um coletor de fluxo é criado pela primeira vez, ele pode ter um tipo de mídia padrão já definido ou pode não ter nenhum tipo de mídia até que o cliente defina um.</span><span class="sxs-lookup"><span data-stu-id="915b8-184">When a stream sink is first created, it might have a default media type already set, or it might have no media type until the client sets one.</span></span>

<span data-ttu-id="915b8-185">Para definir o tipo de mídia, chame [**IMFMediaTypeHandler:: SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="915b8-185">To set the media type, call [**IMFMediaTypeHandler::SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span></span> <span data-ttu-id="915b8-186">Alguns coletores de fluxo podem não dar suporte à alteração do tipo após ter sido definido.</span><span class="sxs-lookup"><span data-stu-id="915b8-186">Some stream sinks might not support changing the type after is has been set.</span></span> <span data-ttu-id="915b8-187">Portanto, é útil testar os tipos de mídia antes de defini-los.</span><span class="sxs-lookup"><span data-stu-id="915b8-187">Therefore, it useful to test media types before setting them.</span></span> <span data-ttu-id="915b8-188">Para testar se o coletor de mídia aceitará um tipo de mídia (sem definir o tipo), chame [**IMFMediaTypeHandler:: IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span><span class="sxs-lookup"><span data-stu-id="915b8-188">To test whether the media sink will accept a media type, (without setting the type), call [**IMFMediaTypeHandler::IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span></span>

## <a name="data-flow"></a><span data-ttu-id="915b8-189">Fluxo de Dados</span><span class="sxs-lookup"><span data-stu-id="915b8-189">Data Flow</span></span>

<span data-ttu-id="915b8-190">Os coletores de mídia usam um *modelo de pull*, o que significa que os coletores de fluxo solicitam dados conforme eles precisam.</span><span class="sxs-lookup"><span data-stu-id="915b8-190">Media sinks use a *pull model*, which means that the stream sinks request data as they need it.</span></span> <span data-ttu-id="915b8-191">O cliente deve responder em tempo hábil para evitar qualquer falha.</span><span class="sxs-lookup"><span data-stu-id="915b8-191">The client should respond in a timely manner to avoid any glitching.</span></span>

<span data-ttu-id="915b8-192">Alguns coletores de mídia dão suporte à *preversão*.</span><span class="sxs-lookup"><span data-stu-id="915b8-192">Some media sinks support *prerolling*.</span></span> <span data-ttu-id="915b8-193">A preversão é o processo de fornecer dados ao coletor de mídia antes do início do relógio de apresentação.</span><span class="sxs-lookup"><span data-stu-id="915b8-193">Prerolling is the process of giving data to the media sink before the presentation clock starts.</span></span> <span data-ttu-id="915b8-194">Se um coletor de mídia der suporte à desdistribuição, o coletor de mídia expõe a interface [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) e o método [**getcaracterísticas**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) retorna o \_ sinalizador MEDIASINK pode ser \_ prevertido.</span><span class="sxs-lookup"><span data-stu-id="915b8-194">If a media sink supports prerolling, the media sink exposes the [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) interface, and the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CAN\_PREROLL flag.</span></span> <span data-ttu-id="915b8-195">A preversão garante que o coletor de mídia esteja pronto para apresentar a primeira amostra quando o relógio de apresentação for iniciado.</span><span class="sxs-lookup"><span data-stu-id="915b8-195">Prerolling ensures that the media sink is ready to present the first sample when the presentation clock starts.</span></span> <span data-ttu-id="915b8-196">É recomendável que o cliente sempre seja prevertido se o coletor de mídia der suporte a ele, pois ele pode impedir falhas ou falhas durante a reprodução.</span><span class="sxs-lookup"><span data-stu-id="915b8-196">It is recommended that the client always preroll if the media sink supports it, because it can prevent glitching or gaps during playback.</span></span>

<span data-ttu-id="915b8-197">O fluxo de dados para um coletor de mídia funciona da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="915b8-197">Data flow to a media sink works as follows:</span></span>

1.  <span data-ttu-id="915b8-198">O cliente define os tipos de mídia e o relógio de apresentação.</span><span class="sxs-lookup"><span data-stu-id="915b8-198">The client sets the media types and the presentation clock.</span></span> <span data-ttu-id="915b8-199">O coletor de mídia se registra com o relógio de apresentação para receber notificações sobre alterações de estado do relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-199">The media sink registers itself with the presentation clock to receive notifications about clock state changes.</span></span>
2.  <span data-ttu-id="915b8-200">Opcionalmente, o cliente consulta para [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span><span class="sxs-lookup"><span data-stu-id="915b8-200">Optionally, the client queries for [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span></span> <span data-ttu-id="915b8-201">Se o coletor de mídia expõe essa interface, o cliente chama [**IMFMediaSinkPreroll:: NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span><span class="sxs-lookup"><span data-stu-id="915b8-201">If the media sink exposes this interface, the client calls [**IMFMediaSinkPreroll::NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span></span> <span data-ttu-id="915b8-202">Caso contrário, o cliente passará para a etapa 5.</span><span class="sxs-lookup"><span data-stu-id="915b8-202">Otherwise, the client skips to step 5.</span></span>
3.  <span data-ttu-id="915b8-203">Cada coletor de fluxo envia um ou mais eventos [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="915b8-203">Each stream sink sends one or more [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="915b8-204">Em resposta a cada um desses eventos, o cliente obtém a próxima amostra de dados para esse fluxo e chama [**IMFStreamSink::P rocesssample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="915b8-204">In response to each of these events, the client gets the next sample of data for that stream and calls [**IMFStreamSink::ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span>
4.  <span data-ttu-id="915b8-205">Quando cada coletor de fluxo recebe dados de preversão suficientes, ele envia um evento [MEStreamSinkPrerolled](mestreamsinkprerolled.md) .</span><span class="sxs-lookup"><span data-stu-id="915b8-205">When each stream sink receives enough preroll data, it sends an [MEStreamSinkPrerolled](mestreamsinkprerolled.md) event.</span></span>
5.  <span data-ttu-id="915b8-206">O cliente chama [**IMFPresentationClock:: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) para iniciar o relógio de apresentação.</span><span class="sxs-lookup"><span data-stu-id="915b8-206">The client calls [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) to start the presentation clock.</span></span>
6.  <span data-ttu-id="915b8-207">O relógio de apresentação notifica o coletor de mídia que o relógio está iniciando, chamando [**IMFClockStateSink:: OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="915b8-207">The presentation clock notifies the media sink that the clock is starting, by calling [**IMFClockStateSink::OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>
7.  <span data-ttu-id="915b8-208">Para obter mais dados, cada coletor de fluxo envia eventos [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="915b8-208">To get more data, each stream sink sends [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="915b8-209">Em resposta a cada um desses eventos, o cliente obtém o próximo exemplo e chama [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="915b8-209">In response to each of these events, the client gets the next sample and calls [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span> <span data-ttu-id="915b8-210">Esta etapa é repetida até que a apresentação termine.</span><span class="sxs-lookup"><span data-stu-id="915b8-210">This step is repeated until the presentation ends.</span></span>

<span data-ttu-id="915b8-211">A maioria dos coletores de mídia processa amostras de forma assíncrona, portanto, os coletores de fluxo podem enviar mais de uma solicitação de exemplo por vez.</span><span class="sxs-lookup"><span data-stu-id="915b8-211">Most media sinks process samples asynchronously, so the stream sinks can send out more than one sample request at a time.</span></span>

<span data-ttu-id="915b8-212">Durante o streaming, o cliente pode chamar [**IMFStreamSink::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) e [**IMFStreamSink:: flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="915b8-212">During streaming, the client can call [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) and [**IMFStreamSink::Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) at any time.</span></span> <span data-ttu-id="915b8-213">Os marcadores são descritos na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="915b8-213">Markers are described in the next section.</span></span> <span data-ttu-id="915b8-214">A liberação faz com que o coletor de fluxo descarte quaisquer exemplos que tenha colocado na fila, mas que ainda não foram renderizados.</span><span class="sxs-lookup"><span data-stu-id="915b8-214">Flushing causes the stream sink to drop any samples that it has queued but not rendered yet.</span></span>

## <a name="markers"></a><span data-ttu-id="915b8-215">Marcadores</span><span class="sxs-lookup"><span data-stu-id="915b8-215">Markers</span></span>

<span data-ttu-id="915b8-216">Os marcadores fornecem uma maneira para o cliente indicar pontos específicos no fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-216">Markers provide a way for the client to indicate specific points in the stream.</span></span> <span data-ttu-id="915b8-217">Um marcador consiste nas seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="915b8-217">A marker consists of the following information:</span></span>

-   <span data-ttu-id="915b8-218">O tipo de marcador, definido como um membro da enumeração de [**\_ \_ tipo de marcador MFSTREAMSINK**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) .</span><span class="sxs-lookup"><span data-stu-id="915b8-218">The marker type, defined as a member of the [**MFSTREAMSINK\_MARKER\_TYPE**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) enumeration.</span></span>
-   <span data-ttu-id="915b8-219">Dados associados ao marcador.</span><span class="sxs-lookup"><span data-stu-id="915b8-219">Data associated with the marker.</span></span> <span data-ttu-id="915b8-220">O significado dos dados depende do tipo de marcador.</span><span class="sxs-lookup"><span data-stu-id="915b8-220">The meaning of the data depends on the marker type.</span></span> <span data-ttu-id="915b8-221">Alguns tipos de marcador não têm dados.</span><span class="sxs-lookup"><span data-stu-id="915b8-221">Some marker types do not have data.</span></span>
-   <span data-ttu-id="915b8-222">Dados opcionais para uso próprio do cliente.</span><span class="sxs-lookup"><span data-stu-id="915b8-222">Optional data for the client's own use.</span></span>

<span data-ttu-id="915b8-223">Para inserir um marcador, o cliente chama [**IMFStreamSink::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span><span class="sxs-lookup"><span data-stu-id="915b8-223">To place a marker, the client calls [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span></span> <span data-ttu-id="915b8-224">O coletor de fluxo conclui o processamento de quaisquer exemplos recebidos antes da chamada **PlaceMarker** e, em seguida, envia um evento [MEStreamSinkMarker](mestreamsinkmarker.md) .</span><span class="sxs-lookup"><span data-stu-id="915b8-224">The stream sink finishes processing any samples that it received before the **PlaceMarker** call, and then sends an [MEStreamSinkMarker](mestreamsinkmarker.md) event.</span></span>

<span data-ttu-id="915b8-225">A maioria dos coletores de mídia mantém uma fila de amostras pendentes, que são processadas de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="915b8-225">Most media sinks keep a queue of pending samples, which they process asynchronously.</span></span> <span data-ttu-id="915b8-226">Os eventos de marcador devem ser serializados com o processamento de exemplo, portanto, o coletor de mídia deve colocar os marcadores na mesma fila.</span><span class="sxs-lookup"><span data-stu-id="915b8-226">Marker events must be serialized with sample processing, so the media sink should place the markers in the same queue.</span></span> <span data-ttu-id="915b8-227">Por exemplo, suponha que o cliente faça as seguintes chamadas de método:</span><span class="sxs-lookup"><span data-stu-id="915b8-227">For example, suppose the client makes the following method calls:</span></span>

1.  <span data-ttu-id="915b8-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemplo \# 1)</span><span class="sxs-lookup"><span data-stu-id="915b8-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#1)</span></span>
2.  <span data-ttu-id="915b8-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemplo \# 2)</span><span class="sxs-lookup"><span data-stu-id="915b8-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#2)</span></span>
3.  <span data-ttu-id="915b8-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marcador \# 1)</span><span class="sxs-lookup"><span data-stu-id="915b8-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#1)</span></span>
4.  <span data-ttu-id="915b8-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (exemplo \# 3)</span><span class="sxs-lookup"><span data-stu-id="915b8-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#3)</span></span>
5.  <span data-ttu-id="915b8-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marcador \# 2)</span><span class="sxs-lookup"><span data-stu-id="915b8-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#2)</span></span>

<span data-ttu-id="915b8-233">Neste exemplo, o coletor de fluxo deve enviar o evento [MEStreamSinkMarker](mestreamsinkmarker.md) para o marcador \# 1 depois de processar a amostra \# 2 e o evento para o marcador \# 2 depois de processar a amostra \# 3.</span><span class="sxs-lookup"><span data-stu-id="915b8-233">In this example, the stream sink must send the [MEStreamSinkMarker](mestreamsinkmarker.md) event for marker \#1 after it processes sample \#2, and the event for marker \#2 after it processes sample \#3.</span></span>

<span data-ttu-id="915b8-234">Se o cliente liberar um coletor de fluxo, o coletor de fluxo processará imediatamente quaisquer marcadores que estavam na fila.</span><span class="sxs-lookup"><span data-stu-id="915b8-234">If the client flushes a stream sink, the stream sink immediately processes any markers that were in the queue.</span></span> <span data-ttu-id="915b8-235">Ele define o código de status como E \_ abortar nesses eventos.</span><span class="sxs-lookup"><span data-stu-id="915b8-235">It sets the status code to E\_ABORT on these events.</span></span>

<span data-ttu-id="915b8-236">Alguns marcadores contêm informações que são relevantes para o coletor de mídia:</span><span class="sxs-lookup"><span data-stu-id="915b8-236">Some markers contain information that is relevant to the media sink:</span></span>

-   <span data-ttu-id="915b8-237">**MFSTREAMSINK \_ \_Tique do marcador**: indica que há uma lacuna no fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-237">**MFSTREAMSINK\_MARKER\_TICK**: Indicates there is a gap in the stream.</span></span> <span data-ttu-id="915b8-238">O próximo exemplo será uma descontinuidade.</span><span class="sxs-lookup"><span data-stu-id="915b8-238">The next sample will be a discontinuity.</span></span>
-   <span data-ttu-id="915b8-239">**MFSTREAMSINK \_ \_ENDOFSEGMENT do marcador**: indica o fim de um segmento ou o fim de um fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-239">**MFSTREAMSINK\_MARKER\_ENDOFSEGMENT**: Indicates the end of a segment or the end of a stream.</span></span> <span data-ttu-id="915b8-240">O próximo exemplo (se houver) pode ser uma descontinuidade.</span><span class="sxs-lookup"><span data-stu-id="915b8-240">The next sample (if any) might be a discontinuity.</span></span>
-   <span data-ttu-id="915b8-241">**MFSTREAMSINK \_ \_Evento de marcador**: contém um evento.</span><span class="sxs-lookup"><span data-stu-id="915b8-241">**MFSTREAMSINK\_MARKER\_EVENT**: Contains an event.</span></span> <span data-ttu-id="915b8-242">Dependendo do tipo de evento e da implementação do coletor de mídia, o coletor de mídia pode lidar com o evento ou ignorá-lo.</span><span class="sxs-lookup"><span data-stu-id="915b8-242">Depending on the event type and the implementation of the media sink, the media sink might handle the event or ignore it.</span></span>

## <a name="state-changes"></a><span data-ttu-id="915b8-243">Alterações de estado</span><span class="sxs-lookup"><span data-stu-id="915b8-243">State Changes</span></span>

<span data-ttu-id="915b8-244">Um coletor de mídia é notificado sobre alterações de estado no relógio de apresentação por meio da interface [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) do coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-244">A media sink is notified of state changes in the presentation clock through the media sink's [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="915b8-245">Quando o cliente define o relógio de apresentação, o coletor de mídia chama [**IMFPresentationClock:: AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) para se registrar para notificações do relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-245">When the client sets the presentation clock, the media sink calls [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) to register itself for notifications from the clock.</span></span> <span data-ttu-id="915b8-246">A tabela a seguir resume como um coletor de mídia se comporta em resposta às alterações de estado do relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-246">The following table summarizes how a media sink behaves in response to clock state changes.</span></span>



| <span data-ttu-id="915b8-247">Alteração de estado do relógio</span><span class="sxs-lookup"><span data-stu-id="915b8-247">Clock state change</span></span>                                         | <span data-ttu-id="915b8-248">Exemplo de processamento</span><span class="sxs-lookup"><span data-stu-id="915b8-248">Sample processing</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="915b8-249">Processamento de marcador</span><span class="sxs-lookup"><span data-stu-id="915b8-249">Marker processing</span></span>                                                                                                                                                                                   |
|------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="915b8-250">**OnClockStart**</span><span class="sxs-lookup"><span data-stu-id="915b8-250">**OnClockStart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)     | <span data-ttu-id="915b8-251">Os exemplos de processo cujo carimbo de data/hora é igual ou posterior à hora de início do relógio.</span><span class="sxs-lookup"><span data-stu-id="915b8-251">Process samples whose time stamp is equal to or later than the clock start time.</span></span>                                                                                                                                                                              | <span data-ttu-id="915b8-252">Envie o evento [MEStreamSinkMarker](mestreamsinkmarker.md) quando todos os exemplos recebidos antes do marcador tiverem sido processados.</span><span class="sxs-lookup"><span data-stu-id="915b8-252">Send the [MEStreamSinkMarker](mestreamsinkmarker.md) event when all of the samples received before the marker have been processed.</span></span>                                                                 |
| [<span data-ttu-id="915b8-253">**OnClockPause**</span><span class="sxs-lookup"><span data-stu-id="915b8-253">**OnClockPause**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)     | <span data-ttu-id="915b8-254">O coletor de mídia pode falhar [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) enquanto está em pausa.</span><span class="sxs-lookup"><span data-stu-id="915b8-254">The media sink can fail [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) while paused.</span></span><br/> <span data-ttu-id="915b8-255">Se o coletor de mídia aceitar amostras enquanto estiver em pausa, ele deverá enfileirar-las até que o relógio seja reiniciado.</span><span class="sxs-lookup"><span data-stu-id="915b8-255">If the media sink accepts samples while paused, it must queue them until the clock restarts.</span></span> <span data-ttu-id="915b8-256">Não processe nenhuma amostra em fila enquanto estiver em pausa.</span><span class="sxs-lookup"><span data-stu-id="915b8-256">Do not process any queued samples while paused.</span></span><br/> | <span data-ttu-id="915b8-257">Se houver amostras em fila, coloque marcadores na mesma fila.</span><span class="sxs-lookup"><span data-stu-id="915b8-257">If there are queued samples, put markers onto the same queue.</span></span> <span data-ttu-id="915b8-258">Enviar o evento de marcador quando o relógio for reiniciado.</span><span class="sxs-lookup"><span data-stu-id="915b8-258">Send the marker event when the clock restarts.</span></span><br/> <span data-ttu-id="915b8-259">Caso contrário, envie o evento de marcador imediatamente.</span><span class="sxs-lookup"><span data-stu-id="915b8-259">Otherwise, send the marker event immediately.</span></span><br/>                    |
| [<span data-ttu-id="915b8-260">**OnClockRestart**</span><span class="sxs-lookup"><span data-stu-id="915b8-260">**OnClockRestart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart) | <span data-ttu-id="915b8-261">Processe quaisquer exemplos que foram enfileirados enquanto estavam em pausa e, em seguida, trate o mesmo que [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="915b8-261">Process any samples that were queued while paused, and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>                                                                                                                         | <span data-ttu-id="915b8-262">Envie eventos [MEStreamSinkMarker](mestreamsinkmarker.md) para marcadores em fila (serializados com processamento de exemplo) e, em seguida, trate o mesmo que [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="915b8-262">Send [MEStreamSinkMarker](mestreamsinkmarker.md) events for queued markers (serialized with sample processing), and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span> |
| [<span data-ttu-id="915b8-263">**OnClockStop**</span><span class="sxs-lookup"><span data-stu-id="915b8-263">**OnClockStop**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)       | <span data-ttu-id="915b8-264">Remova todas as amostras em fila.</span><span class="sxs-lookup"><span data-stu-id="915b8-264">Drop all queued samples.</span></span> <span data-ttu-id="915b8-265">Outras chamadas para [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) podem falhar.</span><span class="sxs-lookup"><span data-stu-id="915b8-265">Further calls to [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) can fail.</span></span>                                                                                                                                                      | <span data-ttu-id="915b8-266">Enviar eventos de marcador na fila.</span><span class="sxs-lookup"><span data-stu-id="915b8-266">Send queued marker events.</span></span> <span data-ttu-id="915b8-267">Nas chamadas subsequentes para [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), envie o evento de marcador imediatamente.</span><span class="sxs-lookup"><span data-stu-id="915b8-267">On subsequent calls to [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), send the marker event immediately.</span></span>                                                              |



 

<span data-ttu-id="915b8-268">Além disso, os coletores de fluxo devem enviar os seguintes eventos quando concluírem as transições de Estado:</span><span class="sxs-lookup"><span data-stu-id="915b8-268">In addition, stream sinks must send the following events when they have completed the state transitions:</span></span>

-   <span data-ttu-id="915b8-269">Evento [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md)</span><span class="sxs-lookup"><span data-stu-id="915b8-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) event</span></span>
-   <span data-ttu-id="915b8-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): evento [MEStreamSinkPaused](mestreamsinkpaused.md)</span><span class="sxs-lookup"><span data-stu-id="915b8-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): [MEStreamSinkPaused](mestreamsinkpaused.md) event</span></span>
-   <span data-ttu-id="915b8-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): evento [MEStreamSinkStopped](mestreamsinkstopped.md)</span><span class="sxs-lookup"><span data-stu-id="915b8-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): [MEStreamSinkStopped](mestreamsinkstopped.md) event</span></span>

## <a name="finalizing"></a><span data-ttu-id="915b8-272">Finalizando</span><span class="sxs-lookup"><span data-stu-id="915b8-272">Finalizing</span></span>

<span data-ttu-id="915b8-273">Alguns coletores de mídia exigem uma etapa de processamento extra após a última amostra ser entregue.</span><span class="sxs-lookup"><span data-stu-id="915b8-273">Some media sinks require an extra processing step after the last sample is delivered.</span></span> <span data-ttu-id="915b8-274">Normalmente, esse requisito se aplica aos coletores de arquivo, que devem gravar cabeçalhos ou índices no arquivo.</span><span class="sxs-lookup"><span data-stu-id="915b8-274">Typically this requirement applies to archive sinks, which must write headers or indexes into the file.</span></span> <span data-ttu-id="915b8-275">Se um coletor de mídia exigir qualquer processamento final, ele exporá a interface [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) .</span><span class="sxs-lookup"><span data-stu-id="915b8-275">If a media sink requires any final processing, it exposes the [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) interface.</span></span>

<span data-ttu-id="915b8-276">Depois que o cliente entrega a última amostra, o cliente consulta essa interface.</span><span class="sxs-lookup"><span data-stu-id="915b8-276">After the client delivers the last sample, the client queries for this interface.</span></span> <span data-ttu-id="915b8-277">Se o coletor de mídia der suporte à interface, o cliente chamará [**IMFFinalizableMediaSink:: BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) para executar o processamento final de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="915b8-277">If the media sink supports the interface, the client calls [**IMFFinalizableMediaSink::BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) to perform the final processing asynchronously.</span></span> <span data-ttu-id="915b8-278">Esse método segue o modelo assíncrono de Media Foundation padrão, descrito em [métodos de retorno de chamada assíncrono](asynchronous-callback-methods.md).</span><span class="sxs-lookup"><span data-stu-id="915b8-278">This method follows the standard Media Foundation asynchronous model, described in [Asynchronous Callback Methods](asynchronous-callback-methods.md).</span></span> <span data-ttu-id="915b8-279">O coletor de mídia pode assumir que o cliente chamará **BeginFinalize**.</span><span class="sxs-lookup"><span data-stu-id="915b8-279">The media sink can assume that the client will call **BeginFinalize**.</span></span> <span data-ttu-id="915b8-280">A falha ao chamar **BeginFinalize** pode resultar em um arquivo criado incorretamente.</span><span class="sxs-lookup"><span data-stu-id="915b8-280">Failure to call **BeginFinalize** can result in an incorrectly authored file.</span></span>

## <a name="shutting-down"></a><span data-ttu-id="915b8-281">Desligando</span><span class="sxs-lookup"><span data-stu-id="915b8-281">Shutting Down</span></span>

<span data-ttu-id="915b8-282">Quando o cliente é concluído usando o coletor de mídia, o cliente chama [**IMFMediaSink:: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span><span class="sxs-lookup"><span data-stu-id="915b8-282">When the client is done using the media sink, the client calls [**IMFMediaSink::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span></span> <span data-ttu-id="915b8-283">Dentro desse método, o coletor de mídia deve interromper quaisquer contagens de referência circulares.</span><span class="sxs-lookup"><span data-stu-id="915b8-283">Inside this method, the media sink should break any circular reference counts.</span></span> <span data-ttu-id="915b8-284">Normalmente, haverá referências circulares entre o coletor de mídia e os coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-284">Typically, there will be circular references between the media sink and the stream sinks.</span></span>

<span data-ttu-id="915b8-285">Se você estiver usando o objeto auxiliar de fila de eventos para implementar [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), chame [**IMFMediaEventQueue:: Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) na fila de eventos.</span><span class="sxs-lookup"><span data-stu-id="915b8-285">If you are using the event queue helper object to implement [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), call [**IMFMediaEventQueue::Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) on the event queue.</span></span> <span data-ttu-id="915b8-286">Esse método desliga a fila de eventos e sinaliza qualquer chamador que esteja aguardando um evento no momento.</span><span class="sxs-lookup"><span data-stu-id="915b8-286">This method shuts down the event queue and signals any caller that is currently waiting for an event.</span></span>

<span data-ttu-id="915b8-287">Após o desligamento, todos os métodos no coletor de mídia retornam MF \_ E \_ Shutdown, com exceção dos métodos **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="915b8-287">After shutdown, all methods on the media sink return MF\_E\_SHUTDOWN, with the exception of **IUnknown** methods.</span></span>

## <a name="media-sink-interfaces"></a><span data-ttu-id="915b8-288">Interfaces de coletor de mídia</span><span class="sxs-lookup"><span data-stu-id="915b8-288">Media Sink Interfaces</span></span>

<span data-ttu-id="915b8-289">A tabela a seguir lista as interfaces padrão que os coletores de mídia podem expor por meio de **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="915b8-289">The following table lists the standard interfaces that media sinks can expose through **QueryInterface**.</span></span> <span data-ttu-id="915b8-290">Os coletores de mídia também podem expor interfaces personalizadas.</span><span class="sxs-lookup"><span data-stu-id="915b8-290">Media sinks can also expose custom interfaces.</span></span>



| <span data-ttu-id="915b8-291">Interface</span><span class="sxs-lookup"><span data-stu-id="915b8-291">Interface</span></span>                                                      | <span data-ttu-id="915b8-292">Descrição</span><span class="sxs-lookup"><span data-stu-id="915b8-292">Description</span></span>                                                                                   |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="915b8-293">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="915b8-293">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                           | <span data-ttu-id="915b8-294">A interface primária para coletores de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-294">The primary interface for media sinks.</span></span> <span data-ttu-id="915b8-295">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-295">(Required.)</span></span>                                            |
| [<span data-ttu-id="915b8-296">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="915b8-296">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)                 | <span data-ttu-id="915b8-297">Usado para notificar o coletor de mídia quando o relógio de apresentação muda de estado.</span><span class="sxs-lookup"><span data-stu-id="915b8-297">Used to notify the media sink when presentation clock changes state.</span></span> <span data-ttu-id="915b8-298">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-298">(Required.)</span></span>              |
| [<span data-ttu-id="915b8-299">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="915b8-299">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)     | <span data-ttu-id="915b8-300">Implemente se o coletor de mídia deve executar uma etapa de processamento final.</span><span class="sxs-lookup"><span data-stu-id="915b8-300">Implement if the media sink must perform a final processing step.</span></span> <span data-ttu-id="915b8-301">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-301">(Optional.)</span></span>                 |
| [<span data-ttu-id="915b8-302">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="915b8-302">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                         | <span data-ttu-id="915b8-303">Implemente se o coletor de mídia expõe qualquer interface de serviço.</span><span class="sxs-lookup"><span data-stu-id="915b8-303">Implement if the media sink exposes any service interfaces.</span></span> <span data-ttu-id="915b8-304">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-304">(Optional.)</span></span>                       |
| [<span data-ttu-id="915b8-305">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="915b8-305">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)       | <span data-ttu-id="915b8-306">Implemente se o coletor de mídia envia qualquer evento.</span><span class="sxs-lookup"><span data-stu-id="915b8-306">Implement if the media sink sends any events.</span></span> <span data-ttu-id="915b8-307">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-307">(Optional.)</span></span>                                     |
| [<span data-ttu-id="915b8-308">**IMFMediaSinkPreroll**</span><span class="sxs-lookup"><span data-stu-id="915b8-308">**IMFMediaSinkPreroll**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)             | <span data-ttu-id="915b8-309">Implemente se o coletor de mídia dá suporte a preversão.</span><span class="sxs-lookup"><span data-stu-id="915b8-309">Implement if the media sink supports preroll.</span></span> <span data-ttu-id="915b8-310">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-310">(Optional.)</span></span>                                     |
| [<span data-ttu-id="915b8-311">**IMFPresentationTimeSource**</span><span class="sxs-lookup"><span data-stu-id="915b8-311">**IMFPresentationTimeSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) | <span data-ttu-id="915b8-312">Implemente se o coletor de mídia pode fornecer uma fonte de tempo para o relógio de apresentação.</span><span class="sxs-lookup"><span data-stu-id="915b8-312">Implement if the media sink can provide a time source for the presentation clock.</span></span> <span data-ttu-id="915b8-313">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-313">(Optional.)</span></span> |
| [<span data-ttu-id="915b8-314">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="915b8-314">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                   | <span data-ttu-id="915b8-315">Implemente se o coletor de mídia pode ajustar a qualidade da reprodução.</span><span class="sxs-lookup"><span data-stu-id="915b8-315">Implement if the media sink can adjust playback quality.</span></span> <span data-ttu-id="915b8-316">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-316">(Optional.)</span></span>                          |



 

<span data-ttu-id="915b8-317">Opcionalmente, um coletor de mídia pode implementar a interface como um serviço a seguir.</span><span class="sxs-lookup"><span data-stu-id="915b8-317">Optionally, a media sink can implement the following interface as a service.</span></span>



| <span data-ttu-id="915b8-318">Interface de serviço</span><span class="sxs-lookup"><span data-stu-id="915b8-318">Service interface</span></span>                        | <span data-ttu-id="915b8-319">Descrição</span><span class="sxs-lookup"><span data-stu-id="915b8-319">Description</span></span>                                    |
|------------------------------------------|------------------------------------------------|
| [<span data-ttu-id="915b8-320">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="915b8-320">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) | <span data-ttu-id="915b8-321">Relata o intervalo de taxas de reprodução com suporte.</span><span class="sxs-lookup"><span data-stu-id="915b8-321">Reports the range of supported playback rates.</span></span> |



 

<span data-ttu-id="915b8-322">Para obter mais informações sobre interfaces de serviço e [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), consulte [interfaces de serviço](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="915b8-322">For more information about service interfaces and [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), see [Service Interfaces](service-interfaces.md).</span></span>

## <a name="stream-sink-interfaces"></a><span data-ttu-id="915b8-323">Interfaces de coletor de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-323">Stream Sink Interfaces</span></span>

<span data-ttu-id="915b8-324">Os coletores de fluxo devem expor as seguintes interfaces por meio de **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="915b8-324">Stream sinks must expose the following interfaces through **QueryInterface**.</span></span>



| <span data-ttu-id="915b8-325">Interface</span><span class="sxs-lookup"><span data-stu-id="915b8-325">Interface</span></span>                                                | <span data-ttu-id="915b8-326">Descrição</span><span class="sxs-lookup"><span data-stu-id="915b8-326">Description</span></span>                                                                                              |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="915b8-327">**IMFStreamSink**</span><span class="sxs-lookup"><span data-stu-id="915b8-327">**IMFStreamSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)                   | <span data-ttu-id="915b8-328">A interface primária para coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-328">The primary interface for stream sinks.</span></span> <span data-ttu-id="915b8-329">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-329">(Required.)</span></span>                                                      |
| [<span data-ttu-id="915b8-330">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="915b8-330">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="915b8-331">Enfileira eventos.</span><span class="sxs-lookup"><span data-stu-id="915b8-331">Queues events.</span></span> <span data-ttu-id="915b8-332">A interface [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) herda essa interface.</span><span class="sxs-lookup"><span data-stu-id="915b8-332">The [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface inherits this interface.</span></span> <span data-ttu-id="915b8-333">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-333">(Required.)</span></span> |



 

<span data-ttu-id="915b8-334">No momento, nenhuma interface de serviço é definida para coletores de fluxo.</span><span class="sxs-lookup"><span data-stu-id="915b8-334">Currently no service interfaces are defined for stream sinks.</span></span>

## <a name="stream-sink-events"></a><span data-ttu-id="915b8-335">Eventos de coletor de fluxo</span><span class="sxs-lookup"><span data-stu-id="915b8-335">Stream Sink Events</span></span>

<span data-ttu-id="915b8-336">A tabela a seguir lista os eventos que são definidos para coletores de fluxo genéricos.</span><span class="sxs-lookup"><span data-stu-id="915b8-336">The following table lists the events that are defined for generic stream sinks.</span></span> <span data-ttu-id="915b8-337">Coletores de fluxo também podem enviar eventos personalizados não listados aqui.</span><span class="sxs-lookup"><span data-stu-id="915b8-337">Stream sinks can also send custom events not listed here.</span></span>



| <span data-ttu-id="915b8-338">Evento</span><span class="sxs-lookup"><span data-stu-id="915b8-338">Event</span></span>                                                                  | <span data-ttu-id="915b8-339">Descrição</span><span class="sxs-lookup"><span data-stu-id="915b8-339">Description</span></span>                                                  |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| [<span data-ttu-id="915b8-340">MEStreamSinkFormatChanged</span><span class="sxs-lookup"><span data-stu-id="915b8-340">MEStreamSinkFormatChanged</span></span>](mestreamsinkformatchanged.md)             | <span data-ttu-id="915b8-341">O tipo de mídia do coletor de fluxo não é mais válido.</span><span class="sxs-lookup"><span data-stu-id="915b8-341">The stream sink's media type is no longer valid.</span></span> <span data-ttu-id="915b8-342">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-342">(Optional.)</span></span> |
| [<span data-ttu-id="915b8-343">MEStreamSinkMarker</span><span class="sxs-lookup"><span data-stu-id="915b8-343">MEStreamSinkMarker</span></span>](mestreamsinkmarker.md)                           | <span data-ttu-id="915b8-344">Um marcador foi processado.</span><span class="sxs-lookup"><span data-stu-id="915b8-344">A marker was processed.</span></span> <span data-ttu-id="915b8-345">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-345">(Required.)</span></span>                          |
| [<span data-ttu-id="915b8-346">MEStreamSinkPaused</span><span class="sxs-lookup"><span data-stu-id="915b8-346">MEStreamSinkPaused</span></span>](mestreamsinkpaused.md)                           | <span data-ttu-id="915b8-347">O coletor de fluxo foi pausado.</span><span class="sxs-lookup"><span data-stu-id="915b8-347">The stream sink has paused.</span></span> <span data-ttu-id="915b8-348">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-348">(Required.)</span></span>                      |
| [<span data-ttu-id="915b8-349">MEStreamSinkPrerolled</span><span class="sxs-lookup"><span data-stu-id="915b8-349">MEStreamSinkPrerolled</span></span>](mestreamsinkprerolled.md)                     | <span data-ttu-id="915b8-350">A preversão foi concluída.</span><span class="sxs-lookup"><span data-stu-id="915b8-350">Preroll is complete.</span></span> <span data-ttu-id="915b8-351">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-351">(Optional.)</span></span>                             |
| [<span data-ttu-id="915b8-352">MEStreamSinkRateChanged</span><span class="sxs-lookup"><span data-stu-id="915b8-352">MEStreamSinkRateChanged</span></span>](mestreamsinkratechanged.md)                 | <span data-ttu-id="915b8-353">O coletor de fluxo alterou a taxa de reprodução.</span><span class="sxs-lookup"><span data-stu-id="915b8-353">The stream sink has changed playback rate.</span></span> <span data-ttu-id="915b8-354">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-354">(Optional.)</span></span>       |
| [<span data-ttu-id="915b8-355">MEStreamSinkRequestSample</span><span class="sxs-lookup"><span data-stu-id="915b8-355">MEStreamSinkRequestSample</span></span>](mestreamsinkrequestsample.md)             | <span data-ttu-id="915b8-356">Um novo exemplo é solicitado.</span><span class="sxs-lookup"><span data-stu-id="915b8-356">A new sample is requested.</span></span> <span data-ttu-id="915b8-357">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-357">(Required.)</span></span>                       |
| [<span data-ttu-id="915b8-358">MEStreamSinkScrubSampleComplete</span><span class="sxs-lookup"><span data-stu-id="915b8-358">MEStreamSinkScrubSampleComplete</span></span>](mestreamsinkscrubsamplecomplete.md) | <span data-ttu-id="915b8-359">Uma solicitação de limpeza foi concluída.</span><span class="sxs-lookup"><span data-stu-id="915b8-359">A scrub request was completed.</span></span> <span data-ttu-id="915b8-360">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="915b8-360">(Optional.)</span></span>                   |
| [<span data-ttu-id="915b8-361">MEStreamSinkStarted</span><span class="sxs-lookup"><span data-stu-id="915b8-361">MEStreamSinkStarted</span></span>](mestreamsinkstarted.md)                         | <span data-ttu-id="915b8-362">O coletor de fluxo foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="915b8-362">The stream sink has started.</span></span> <span data-ttu-id="915b8-363">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-363">(Required.)</span></span>                     |
| [<span data-ttu-id="915b8-364">MEStreamSinkStopped</span><span class="sxs-lookup"><span data-stu-id="915b8-364">MEStreamSinkStopped</span></span>](mestreamsinkstopped.md)                         | <span data-ttu-id="915b8-365">O coletor de fluxo foi interrompido.</span><span class="sxs-lookup"><span data-stu-id="915b8-365">The stream sink has stopped.</span></span> <span data-ttu-id="915b8-366">(Obrigatório.)</span><span class="sxs-lookup"><span data-stu-id="915b8-366">(Required.)</span></span>                     |



 

<span data-ttu-id="915b8-367">Atualmente, nenhum evento de finalidade geral é definido para coletores de mídia.</span><span class="sxs-lookup"><span data-stu-id="915b8-367">Currently no general-purpose events are defined for media sinks.</span></span> <span data-ttu-id="915b8-368">Alguns coletores de mídia podem enviar eventos personalizados.</span><span class="sxs-lookup"><span data-stu-id="915b8-368">Some media sinks might send custom events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="915b8-369">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="915b8-369">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="915b8-370">Pipeline de Media Foundation</span><span class="sxs-lookup"><span data-stu-id="915b8-370">Media Foundation Pipeline</span></span>](media-foundation-pipeline.md)
</dt> <dt>

[<span data-ttu-id="915b8-371">Arquitetura Media Foundation</span><span class="sxs-lookup"><span data-stu-id="915b8-371">Media Foundation Architecture</span></span>](media-foundation-architecture.md)
</dt> </dl>

 

 




