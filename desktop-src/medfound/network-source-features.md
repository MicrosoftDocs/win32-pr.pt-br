---
description: Recursos de origem da rede
ms.assetid: a4e20ecb-c145-4823-ae59-f6fc88593d86
title: Recursos de origem da rede
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e937a97cf743740d9cebf84ad477c52cdee5083
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104553489"
---
# <a name="network-source-features"></a><span data-ttu-id="a4e79-103">Recursos de origem da rede</span><span class="sxs-lookup"><span data-stu-id="a4e79-103">Network Source Features</span></span>

<span data-ttu-id="a4e79-104">A fonte de rede fornece a implementação base para streaming de arquivos de mídia e expõe a interface [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-104">The network source provides the base implementation for streaming media files and exposes the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface.</span></span> <span data-ttu-id="a4e79-105">A implementação de origem de rede específica depende do protocolo usado para abrir a fonte, como RTSP ou HTTP.</span><span class="sxs-lookup"><span data-stu-id="a4e79-105">The specific network source implementation depends on the protocol used to open the source such as RTSP or HTTP.</span></span> <span data-ttu-id="a4e79-106">As fontes de rede específicas de protocolo estendem a funcionalidade de rede básica.</span><span class="sxs-lookup"><span data-stu-id="a4e79-106">The protocol-specific network sources extend the basic network functionality.</span></span> <span data-ttu-id="a4e79-107">Para obter informações sobre os esquemas e protocolos com suporte, consulte [protocolos com suporte](supported-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="a4e79-107">For information about the supported schemes and protocols, see [Supported Protocols](supported-protocols.md).</span></span>

<span data-ttu-id="a4e79-108">A origem da rede:</span><span class="sxs-lookup"><span data-stu-id="a4e79-108">The network source:</span></span>

-   <span data-ttu-id="a4e79-109">Implementa recursos como cache, detecção de proxy e reconexão automática.</span><span class="sxs-lookup"><span data-stu-id="a4e79-109">Implements features such as caching, proxy detection, and auto-reconnection.</span></span>
-   <span data-ttu-id="a4e79-110">Converte chamadas independentes de protocolo do resolvedor de origem para chamadas específicas de protocolo.</span><span class="sxs-lookup"><span data-stu-id="a4e79-110">Converts protocol-independent calls from the source resolver to protocol-specific calls.</span></span>
-   <span data-ttu-id="a4e79-111">Interage com a camada de soquete e o sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="a4e79-111">Interacts with the socket layer and the operating system.</span></span> <span data-ttu-id="a4e79-112">Analisa a descrição de SDP e a usa como dados de configuração e lê os dados de fluxo da camada de soquetes subjacentes.</span><span class="sxs-lookup"><span data-stu-id="a4e79-112">Parses the SDP description and uses it as configuration data, and reads stream data from the underlying sockets layer.</span></span> <span data-ttu-id="a4e79-113">Ao receber, a fonte de rede é responsável por reordenar e solicitar retransmissões de pacotes.</span><span class="sxs-lookup"><span data-stu-id="a4e79-113">When receiving, the network source is responsible for reordering and requesting retransmissions of packets.</span></span>

## <a name="network-source-creation"></a><span data-ttu-id="a4e79-114">Criação de origem de rede</span><span class="sxs-lookup"><span data-stu-id="a4e79-114">Network Source Creation</span></span>

<span data-ttu-id="a4e79-115">A criação de uma fonte de mídia para uma origem da rede não é diferente de uma origem de mídia para um arquivo local.</span><span class="sxs-lookup"><span data-stu-id="a4e79-115">Creating a media source for a source from the network is not different from a media source for a local file.</span></span> <span data-ttu-id="a4e79-116">O aplicativo passa a URL para os métodos de origem para o [resolvedor de origem](source-resolver.md) , como [**IMFSourceResolver:: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) ou [**IMFSourceResolver:: BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) e especifica o \_ \_ sinalizador Mediate de resolução MF.</span><span class="sxs-lookup"><span data-stu-id="a4e79-116">The application passes the URL for the source to [Source Resolver](source-resolver.md) methods such as [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) or [**IMFSourceResolver::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) and specifies the MF\_RESOLUTION\_MEDIASOURCE flag.</span></span> <span data-ttu-id="a4e79-117">Para obter mais informações sobre como usar esse sinalizador, consulte [usando o resolvedor de origem](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="a4e79-117">For more information about using this flag, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

<span data-ttu-id="a4e79-118">Dependendo do esquema fornecido pelo aplicativo, o resolvedor de origem carrega o objeto manipulador de esquema apropriado, que expõe a interface [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-118">Depending on the scheme provided by the application, the source resolver loads the appropriate the scheme handler object, which exposes the [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) interface.</span></span> <span data-ttu-id="a4e79-119">O aplicativo também pode usar o manipulador de esquema diretamente para criar a origem da rede chamando [**IMFSchemeHandler:: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="a4e79-119">The application can also use the scheme handler directly to create the network source by calling [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

<span data-ttu-id="a4e79-120">Para obter mais informações, consulte [manipuladores de esquema e manipuladores de Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="a4e79-120">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="a4e79-121">Media Foundation não dá suporte a fluxos de bytes para fontes de rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-121">Media Foundation does not support byte streams for network sources.</span></span> <span data-ttu-id="a4e79-122">O objeto de fluxo de bytes só tem suporte no cenário de conteúdo baixado.</span><span class="sxs-lookup"><span data-stu-id="a4e79-122">The byte stream object is only supported in the downloaded content scenario.</span></span> <span data-ttu-id="a4e79-123">Todos os dados são transmitidos o mais rapidamente possível para que possam ser salvos como um arquivo no computador local.</span><span class="sxs-lookup"><span data-stu-id="a4e79-123">All the data is transmitted as quickly as possible so that it can be saved as a file on the local machine.</span></span> <span data-ttu-id="a4e79-124">os servidores Web fornecem dados baixados.</span><span class="sxs-lookup"><span data-stu-id="a4e79-124">web servers provide downloaded data.</span></span> <span data-ttu-id="a4e79-125">Não há comunicação entre o cliente e o servidor após o início do download.</span><span class="sxs-lookup"><span data-stu-id="a4e79-125">There is no communication from the client to the server after the download begins.</span></span> <span data-ttu-id="a4e79-126">Nesse caso, o protocolo de download HTTP é usado.</span><span class="sxs-lookup"><span data-stu-id="a4e79-126">In this case the HTTP download protocol is used.</span></span>

<span data-ttu-id="a4e79-127">Se o aplicativo solicitar o resolvedor de origem para criar um objeto de fluxo de bytes para esquemas "http:", "MMS:" ou "RTSP:", a chamada falhará com o \_ erro de esquema MF E \_ sem suporte \_ .</span><span class="sxs-lookup"><span data-stu-id="a4e79-127">If the application requests the source resolver to create a byte stream object for "http:", "mms:", or "rtsp:" schemes, then the call fails with the MF\_E\_UNSUPPORTED\_SCHEME error.</span></span>

> [!Note]  
> <span data-ttu-id="a4e79-128">No Windows 7, a fonte de rede dá suporte aos arquivos de estação de mídia do Windows (. NSC).</span><span class="sxs-lookup"><span data-stu-id="a4e79-128">In Windows 7, the network source supports Windows Media Station files (.NSC).</span></span> <span data-ttu-id="a4e79-129">Esses arquivos são usados no streaming multicast do conteúdo de mídia em uma rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-129">These files are used in multicast streaming of media content over a network.</span></span> <span data-ttu-id="a4e79-130">Para criar a origem de rede para um especificado. Arquivo NSC, o aplicativo deve usar o resolvedor de origem.</span><span class="sxs-lookup"><span data-stu-id="a4e79-130">To create the network source for a specified .NSC file, the application must use the source resolver.</span></span>

 

<span data-ttu-id="a4e79-131">Se o aplicativo estiver usando o manipulador de esquema, a chamada assíncrona ignorará o parâmetro *dwFlags* e retornará um ponteiro para a origem da rede na conclusão.</span><span class="sxs-lookup"><span data-stu-id="a4e79-131">If the application is using the scheme handler, then the asynchronous call ignores the *dwFlags* parameter and returns a pointer to the network source on completion.</span></span>

<span data-ttu-id="a4e79-132">A ilustração a seguir mostra o fluxo de dados para streaming de mídia usando a fonte de rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-132">The following illustration shows the data flow for media streaming using the network source.</span></span>

![fluxograma mostrando caminhos do aplicativo para o servidor de streaming, com um loop entre a origem da rede e a sessão de mídia](images/3f9186ea-53ed-4a31-a097-92f39fa08624.gif)

## <a name="network-source-configuration"></a><span data-ttu-id="a4e79-134">Configuração de origem da rede</span><span class="sxs-lookup"><span data-stu-id="a4e79-134">Network Source Configuration</span></span>

<span data-ttu-id="a4e79-135">Este tópico descreve os recursos com suporte da fonte de rede e as opções de configuração associadas.</span><span class="sxs-lookup"><span data-stu-id="a4e79-135">This topic describes the features supported by the network source and the associated configuration options.</span></span> <span data-ttu-id="a4e79-136">Um aplicativo pode configurar a origem da rede ao criar o objeto de origem da rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-136">An application can configure the network source when creating the network source object.</span></span> <span data-ttu-id="a4e79-137">Essas opções são armazenadas em um objeto **IPropertyStore** , que o aplicativo deve passar no parâmetro *pProps* dos métodos do resolvedor de origem ou [**IMFSchemeHandler:: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="a4e79-137">These options are stored in an **IPropertyStore** object, which the application must pass in the *pProps* parameter of the source resolver methods or [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

### <a name="auto-reconnect"></a><span data-ttu-id="a4e79-138">Reconexão automática</span><span class="sxs-lookup"><span data-stu-id="a4e79-138">Auto-Reconnect</span></span>

<span data-ttu-id="a4e79-139">O recurso de reconexão automática da fonte de rede permite que um cliente se reconecte ao servidor de mídia automaticamente quando a conexão TCP com o servidor falhar ou o cliente não receber pacotes.</span><span class="sxs-lookup"><span data-stu-id="a4e79-139">The auto-reconnect feature of the network source enables a client to reconnect to the media server automatically when the TCP connection to the server fails or the client fails to receive packets.</span></span> <span data-ttu-id="a4e79-140">Quando a conexão falha, a origem da rede tenta se reconectar ao servidor de mídia usando a mesma configuração que foi usada na conexão anterior.</span><span class="sxs-lookup"><span data-stu-id="a4e79-140">When connection fails, the network source attempts to reconnect to the media server using the same configuration that was used in the previous connection.</span></span> <span data-ttu-id="a4e79-141">O processo de reconexão é assíncrono.</span><span class="sxs-lookup"><span data-stu-id="a4e79-141">The reconnection process is asynchronous.</span></span> <span data-ttu-id="a4e79-142">A origem da rede gera o evento [MEReconnectStart](mereconnectstart.md) quando ele começa a reconexão e o evento [MEReconnectEnd](mereconnectend.md) quando a reconexão é bem-sucedida ou falha.</span><span class="sxs-lookup"><span data-stu-id="a4e79-142">The network source raises the [MEReconnectStart](mereconnectstart.md) event when it begins reconnection and the [MEReconnectEnd](mereconnectend.md) event when the reconnection succeeds or fails.</span></span>

<span data-ttu-id="a4e79-143">Se o número de tentativas de reconexão exceder o valor máximo especificado pela propriedade [**MFNETSOURCE \_ AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) , a operação de reconexão será cancelada.</span><span class="sxs-lookup"><span data-stu-id="a4e79-143">If the number of reconnection attempts exceeds the maximum value specified by the [**MFNETSOURCE\_AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) property, the reconnection operation is canceled.</span></span> <span data-ttu-id="a4e79-144">O número de tentativas de reconexão é armazenado na propriedade [**MFNETSOURCE \_ AUTORECONNECTPROGRESS**](mfnetsource-autoreconnectprogress-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-144">The number of reconnection attempts is stored in the [**MFNETSOURCE\_AUTORECONNECTPROGRESS**](mfnetsource-autoreconnectprogress-property.md) property.</span></span>

<span data-ttu-id="a4e79-145">A reconexão automática permite a reprodução suave de conteúdo de mídia mesmo quando a conexão TCP com o servidor de mídia falha.</span><span class="sxs-lookup"><span data-stu-id="a4e79-145">Auto-reconnect enables smooth playback of media content even when the TCP connection to the media server fails.</span></span> <span data-ttu-id="a4e79-146">Para uma experiência de reprodução suave, o cliente deve ter dados suficientes, pelo menos de 1 a 2 minutos, em seu cache para continuar a reprodução até a reconexão.</span><span class="sxs-lookup"><span data-stu-id="a4e79-146">For a smooth playback experience, the client must have sufficient data, at least 1 to 2 minutes, in its cache to continue playback until reconnection.</span></span> <span data-ttu-id="a4e79-147">A quantidade máxima de dados que a fonte de rede pode armazenar em buffer pode ser definida na propriedade [**MFNETSOURCE \_ MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-147">The maximum amount of data that the network source can buffer can be set in the [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property.</span></span>

### <a name="fast-streaming"></a><span data-ttu-id="a4e79-148">Transmissão rápida</span><span class="sxs-lookup"><span data-stu-id="a4e79-148">Fast Streaming</span></span>

<span data-ttu-id="a4e79-149">O cliente de origem de rede solicita que o servidor transmita alguns dos dados no início do conteúdo a uma taxa mais rápida do que a especificada pela taxa de bits do conteúdo.</span><span class="sxs-lookup"><span data-stu-id="a4e79-149">The network source client requests the server to stream some of the data at the beginning of the content at a faster rate than that specified by the bit rate of the content.</span></span> <span data-ttu-id="a4e79-150">Se a *inicialização rápida* estiver habilitada no servidor, o servidor enviará um fluxo de taxa de bits acelerada para que o cliente possa armazenar em buffer uma quantidade suficiente de dados mais rápido do que em tempo real.</span><span class="sxs-lookup"><span data-stu-id="a4e79-150">If *Fast Startup* is enabled on the server, the server sends an accelerated bit-rate stream so that the client can buffer a sufficient amount of data faster than in real time.</span></span> <span data-ttu-id="a4e79-151">Isso melhora a experiência do usuário, minimizando os atrasos iniciais de buffer, que podem ser causados por vários fatores, como baixa velocidade do computador cliente ou da rede, e largura de banda disponível.</span><span class="sxs-lookup"><span data-stu-id="a4e79-151">This improves user experience by minimizing initial buffering delays, which can be caused by various factors such as low speed of the client computer or the network, and available bandwidth.</span></span>

<span data-ttu-id="a4e79-152">Para especificar a quantidade de dados de streaming rápido que o cliente pode solicitar, defina a propriedade [**MFNETSOURCE \_ ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-152">To specify the amount of fast-streaming data that the client can request, set the [**MFNETSOURCE\_ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) property.</span></span> <span data-ttu-id="a4e79-153">Se a fonte de rede estiver usando UDP como o protocolo de transporte, especifique a quantidade máxima de dados de streaming rápido definindo a propriedade [**MFNETSOURCE \_ MAXUDPACCELERATEDSTREAMINGDURATION**](mfnetsource-maxudpacceleratedstreamingduration-property.md) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="a4e79-153">If the network source is using UDP as the transport protocol, specify the maximum amount of fast-streaming data by setting the [**MFNETSOURCE\_MAXUDPACCELERATEDSTREAMINGDURATION**](mfnetsource-maxudpacceleratedstreamingduration-property.md) property instead.</span></span>

<span data-ttu-id="a4e79-154">O streaming rápido no cliente também é possível por meio do recurso de *cache rápido* — streaming sob demanda de conteúdo mais rápido do que em tempo real e cache de dados no cache local do cliente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-154">Fast streaming on the client is also possible through the *Fast Cache* feature—streaming on-demand content faster than real time and caching data on the client's local cache.</span></span> <span data-ttu-id="a4e79-155">Para usar esse tipo de streaming rápido, o cache rápido deve ser habilitado na fonte de rede e o servidor deve dar suporte a ele.</span><span class="sxs-lookup"><span data-stu-id="a4e79-155">To use this type of fast streaming, Fast Cache must be enabled on the network source, and the server must support it.</span></span> <span data-ttu-id="a4e79-156">Quando o cliente solicita o conteúdo do servidor, a fonte de rede primeiro verifica se o conteúdo já está no cache do cliente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-156">When the client requests content from the server, the network source first checks to see whether the content is already in the client's cache.</span></span> <span data-ttu-id="a4e79-157">Se o conteúdo estiver no cache local do cliente e não tiver expirado, ele será renderizado.</span><span class="sxs-lookup"><span data-stu-id="a4e79-157">If the content is in the client's local cache and has not expired, it is rendered.</span></span> <span data-ttu-id="a4e79-158">Se o conteúdo não estiver no cache local ou já tiver expirado, o conteúdo será transmitido e armazenado em cache, e a origem da rede o reproduzirá do cache local.</span><span class="sxs-lookup"><span data-stu-id="a4e79-158">If the content is not in the local cache or has already expired, the content is streamed and cached, and the network source plays it from the local cache.</span></span> <span data-ttu-id="a4e79-159">Nas solicitações subsequentes, para listas de reprodução, somente as entradas ausentes são armazenadas em cache e, em seguida, reproduzidas.</span><span class="sxs-lookup"><span data-stu-id="a4e79-159">In subsequent requests, for playlists, only missing entries are cached and then played.</span></span> <span data-ttu-id="a4e79-160">Se uma entrada de playlist já estiver no cache local do cliente, ela será reproduzida a partir daí e não será armazenada em cache novamente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-160">If a playlist entry is already in the client's local cache, it is played from there and not cached again.</span></span>

<span data-ttu-id="a4e79-161">Por padrão, o cache rápido é habilitado no cliente de origem de rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-161">By default, Fast Cache is enabled on the network source client.</span></span> <span data-ttu-id="a4e79-162">No entanto, os seguintes fatores também determinam se o recurso é usado:</span><span class="sxs-lookup"><span data-stu-id="a4e79-162">However, the following factors also determine whether the feature is used:</span></span>

-   <span data-ttu-id="a4e79-163">O cliente deve ter largura de banda extra disponível para baixar e armazenar o conteúdo em cache mais rápido do que a velocidade normal.</span><span class="sxs-lookup"><span data-stu-id="a4e79-163">The client must have extra bandwidth available to download and cache the content faster than the normal speed.</span></span>
-   <span data-ttu-id="a4e79-164">O cliente deve ter espaço em disco suficiente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-164">The client must have sufficient disk space.</span></span> <span data-ttu-id="a4e79-165">Se o cliente tiver menos de 100 MB de espaço livre em disco depois de armazenar em cache o conteúdo solicitado sob demanda, ele não será armazenado em cache, mas será transmitido e renderizado simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-165">If the client has less than 100 MB of free disk space after caching the requested on-demand content, it is not cached, but is streamed and rendered simultaneously.</span></span>

<span data-ttu-id="a4e79-166">O recurso de cache rápido é controlado pela propriedade [**MFNETSOURCE \_ CACHEENABLED**](mfnetsource-cacheenabled-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-166">The Fast Cache feature is controlled by the [**MFNETSOURCE\_CACHEENABLED**](mfnetsource-cacheenabled-property.md) property.</span></span>

### <a name="buffer-management"></a><span data-ttu-id="a4e79-167">Gerenciamento de buffer</span><span class="sxs-lookup"><span data-stu-id="a4e79-167">Buffer Management</span></span>

<span data-ttu-id="a4e79-168">A fonte de rede fornece um gerenciamento de buffer eficiente que monitora o estado do buffer no cliente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-168">The network source provides efficient buffer management that monitors the buffer state on the client.</span></span> <span data-ttu-id="a4e79-169">Por padrão, a origem de rede armazena cinco segundos de dados na inicialização.</span><span class="sxs-lookup"><span data-stu-id="a4e79-169">By default, the network source buffers 5 seconds of data at startup.</span></span> <span data-ttu-id="a4e79-170">Esse valor pode ser configurado definindo a propriedade [**MFNETSOURCE \_ BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-170">This value can be configured by setting the [**MFNETSOURCE\_BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) property.</span></span> <span data-ttu-id="a4e79-171">Com base nesse valor de propriedade, a origem da rede computa o tamanho do buffer que é suficiente para garantir a reprodução tranqüila e ininterrupta do conteúdo de mídia.</span><span class="sxs-lookup"><span data-stu-id="a4e79-171">Based on this property value, the network source computes the buffer size that is sufficient to ensure smooth and uninterrupted playback of the media content.</span></span> <span data-ttu-id="a4e79-172">Se essa propriedade for definida como 0, o gerenciamento de buffer será desabilitado.</span><span class="sxs-lookup"><span data-stu-id="a4e79-172">If this property is set to 0, buffer management is disabled.</span></span> <span data-ttu-id="a4e79-173">Quando a quantidade de conteúdo no buffer é baixa, a origem da rede começa a armazenar em buffer e gera o evento [MEBufferingStarted](mebufferingstarted.md) para indicar que o buffer foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="a4e79-173">When the amount of content in the buffer is low, the network source starts buffering and raises the [MEBufferingStarted](mebufferingstarted.md) event to indicate that buffering has begun.</span></span> <span data-ttu-id="a4e79-174">Após o recebimento desse evento, o pipeline parará de renderizar.</span><span class="sxs-lookup"><span data-stu-id="a4e79-174">Upon receiving this event, the pipeline stops rendering.</span></span> <span data-ttu-id="a4e79-175">Quando o buffer é concluído, a origem da rede gera o evento [MEBufferingStopped](mebufferingstopped.md) e o cliente pode iniciar a renderização novamente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-175">When buffering is complete, the network source raises the [MEBufferingStopped](mebufferingstopped.md) event, and the client can start rendering again.</span></span>

<span data-ttu-id="a4e79-176">O cliente começa a renderizar o conteúdo depois de ter acumulado a quantidade de dados indicada pelo tamanho do buffer do primeiro exemplo.</span><span class="sxs-lookup"><span data-stu-id="a4e79-176">The client starts rendering the content after it has accumulated the amount of data indicated by the buffer size of the first sample.</span></span> <span data-ttu-id="a4e79-177">Se esse valor for inferior ao tamanho do buffer calculado, a reprodução será iniciada imediatamente.</span><span class="sxs-lookup"><span data-stu-id="a4e79-177">If this value is lower than the calculated buffer size, then the playback starts immediately.</span></span> <span data-ttu-id="a4e79-178">Esse comportamento é muito semelhante ao recurso de inicialização rápida.</span><span class="sxs-lookup"><span data-stu-id="a4e79-178">This behavior is very similar to the Fast Startup feature.</span></span>

<span data-ttu-id="a4e79-179">A propriedade [**MFNETSOURCE \_ MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) armazena a quantidade máxima de dados que podem ser armazenados em buffer.</span><span class="sxs-lookup"><span data-stu-id="a4e79-179">The [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property stores the maximum amount of data that can be buffered.</span></span>

### <a name="bandwidth-selection"></a><span data-ttu-id="a4e79-180">Seleção de largura de banda</span><span class="sxs-lookup"><span data-stu-id="a4e79-180">Bandwidth Selection</span></span>

<span data-ttu-id="a4e79-181">Quando um cliente se conecta ao servidor de mídia, como parte da configuração da conexão, a origem da rede executa uma medida de *par de pacotes estáticos* para estimar a largura de banda de link inicial entre o cliente e o servidor.</span><span class="sxs-lookup"><span data-stu-id="a4e79-181">When a client connects to the media server, as part of the connection setup, the network source performs *static packet-pair* measurement to estimate the initial link bandwidth between client and server.</span></span> <span data-ttu-id="a4e79-182">Com base no resultado dessa medição, o cliente pode selecionar fluxos de áudio e vídeo que se enquadram na largura de banda estimada.</span><span class="sxs-lookup"><span data-stu-id="a4e79-182">Based on the result of this measurement, the client can select audio and video streams that fit within the estimated bandwidth.</span></span> <span data-ttu-id="a4e79-183">Isso garante a reprodução suave do conteúdo de streaming de mídia.</span><span class="sxs-lookup"><span data-stu-id="a4e79-183">This ensures smooth playback of the streaming media content.</span></span>

<span data-ttu-id="a4e79-184">Durante o estágio de inicialização rápida, a medida de *pares de pacotes dinâmicos* é executada.</span><span class="sxs-lookup"><span data-stu-id="a4e79-184">During the Fast Startup stage, *dynamic packet-pair* measurement is performed.</span></span> <span data-ttu-id="a4e79-185">Nesse processo, o cliente recebe grandes quantidades de dados, que podem ser vários pacotes ou amostras.</span><span class="sxs-lookup"><span data-stu-id="a4e79-185">In this process, the client receives large amounts of data, which can be multiple packets or samples.</span></span>

<span data-ttu-id="a4e79-186">O resultado da medição de pares de pacotes dinâmicos é mais preciso do que a estimativa de largura de banda de link retornada por uma medida de par de pacotes estáticos porque o processo de par de pacotes estático envia um único pacote de tamanho fixo, o que pode não gerar resultados precisos para redes de largura de banda alta.</span><span class="sxs-lookup"><span data-stu-id="a4e79-186">The result of dynamic packet-pair measurement is more accurate than the link bandwidth estimate returned by static packet-pair measurement because the static packet-pair process sends a single packet of fixed size, which may not yield accurate results for high bandwidth networks.</span></span>

<span data-ttu-id="a4e79-187">O aplicativo pode obter a largura de banda estimada usando a propriedade [**MFNETSOURCE \_ PPBANDWIDTH**](mfnetsource-ppbandwidth-property.md) .</span><span class="sxs-lookup"><span data-stu-id="a4e79-187">The application can get the estimated bandwidth by using the [**MFNETSOURCE\_PPBANDWIDTH**](mfnetsource-ppbandwidth-property.md) property.</span></span>

<span data-ttu-id="a4e79-188">As condições de rede podem ser alteradas dinamicamente, causando problemas na reprodução da origem da rede.</span><span class="sxs-lookup"><span data-stu-id="a4e79-188">Network conditions may change dynamically, causing glitches in playback of the network source.</span></span> <span data-ttu-id="a4e79-189">A origem da rede pode alterar a seleção de fluxo inicial do cliente com base na taxa de recebimento e no estado do buffer.</span><span class="sxs-lookup"><span data-stu-id="a4e79-189">The network source can change the client's initial stream selection based on the receiving rate and the buffer state.</span></span> <span data-ttu-id="a4e79-190">Por exemplo, o cliente pode mudar para uma taxa de bits inferior durante o congestionamento da rede e voltar para uma taxa de bits mais alta quando o tráfego de rede tiver melhorado e o cliente tiver acumulado uma quantidade suficiente de conteúdo em buffer.</span><span class="sxs-lookup"><span data-stu-id="a4e79-190">For example, the client might switch to a lower bit rate during network congestion and switch back to a higher bit rate when network traffic has improved and the client has accumulated a sufficient amount of buffered content.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a4e79-191">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a4e79-191">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a4e79-192">Rede em Media Foundation</span><span class="sxs-lookup"><span data-stu-id="a4e79-192">Networking in Media Foundation</span></span>](networking-in-media-foundation.md)
</dt> </dl>

 

 



