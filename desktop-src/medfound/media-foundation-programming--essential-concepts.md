---
description: Se você for novo na mídia digital, este tópico apresentará alguns conceitos que você precisará entender antes de escrever um aplicativo de Media Foundation.
ms.assetid: d76d655e-23f3-407c-97a1-be015b0de37d
title: 'Media Foundation: conceitos essenciais'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0298a20518df91dab4439770e0f1193802969ae8
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/03/2021
ms.locfileid: "104370812"
---
# <a name="media-foundation-essential-concepts"></a><span data-ttu-id="d41fa-103">Media Foundation: conceitos essenciais</span><span class="sxs-lookup"><span data-stu-id="d41fa-103">Media Foundation: Essential Concepts</span></span>

<span data-ttu-id="d41fa-104">Se você for novo na mídia digital, este tópico apresentará alguns conceitos que você precisará entender antes de escrever um aplicativo de Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="d41fa-104">If you are new to digital media, this topic introduces some concepts that you will need to understand before writing a Media Foundation application.</span></span>

-   [<span data-ttu-id="d41fa-105">Fluxos</span><span class="sxs-lookup"><span data-stu-id="d41fa-105">Streams</span></span>](#streams)
-   [<span data-ttu-id="d41fa-106">Compactação</span><span class="sxs-lookup"><span data-stu-id="d41fa-106">Compression</span></span>](#compression)
-   [<span data-ttu-id="d41fa-107">Contêineres de mídia</span><span class="sxs-lookup"><span data-stu-id="d41fa-107">Media Containers</span></span>](#media-containers)
-   [<span data-ttu-id="d41fa-108">Formatos</span><span class="sxs-lookup"><span data-stu-id="d41fa-108">Formats</span></span>](#formats)
-   [<span data-ttu-id="d41fa-109">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="d41fa-109">Related topics</span></span>](#related-topics)

## <a name="streams"></a><span data-ttu-id="d41fa-110">Fluxos</span><span class="sxs-lookup"><span data-stu-id="d41fa-110">Streams</span></span>

<span data-ttu-id="d41fa-111">Um *fluxo* é uma sequência de dados de mídia com um tipo uniforme.</span><span class="sxs-lookup"><span data-stu-id="d41fa-111">A *stream* is a sequence of media data with a uniform type.</span></span> <span data-ttu-id="d41fa-112">Os tipos mais comuns são áudio e vídeo, mas um fluxo pode conter quase qualquer tipo de dados, incluindo texto, comandos de script e imagens ainda.</span><span class="sxs-lookup"><span data-stu-id="d41fa-112">The most common types are audio and video, but a stream can contain almost any kind of data, including text, script commands, and still images.</span></span> <span data-ttu-id="d41fa-113">O termo *fluxo* nesta documentação não implica na entrega em uma rede.</span><span class="sxs-lookup"><span data-stu-id="d41fa-113">The term *stream* in this documentation does not imply delivery over a network.</span></span> <span data-ttu-id="d41fa-114">Um arquivo de mídia destinado à reprodução local também contém fluxos.</span><span class="sxs-lookup"><span data-stu-id="d41fa-114">A media file intended for local playback also contains streams.</span></span>

<span data-ttu-id="d41fa-115">Normalmente, um arquivo de mídia contém um único fluxo de áudio, ou exatamente um fluxo de vídeo e um fluxo de áudio.</span><span class="sxs-lookup"><span data-stu-id="d41fa-115">Usually, a media file contains either a single audio stream, or exactly one video stream and one audio stream.</span></span> <span data-ttu-id="d41fa-116">No entanto, um arquivo de mídia pode conter vários fluxos do mesmo tipo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-116">However, a media file might contain several streams of the same type.</span></span> <span data-ttu-id="d41fa-117">Por exemplo, um arquivo de vídeo pode conter fluxos de áudio em vários idiomas diferentes.</span><span class="sxs-lookup"><span data-stu-id="d41fa-117">For example, a video file might contain audio streams in several different languages.</span></span> <span data-ttu-id="d41fa-118">Em tempo de execução, o aplicativo selecionaria qual fluxo usar.</span><span class="sxs-lookup"><span data-stu-id="d41fa-118">At run time, the application would select which stream to use.</span></span>

## <a name="compression"></a><span data-ttu-id="d41fa-119">Compactação</span><span class="sxs-lookup"><span data-stu-id="d41fa-119">Compression</span></span>

<span data-ttu-id="d41fa-120">A *compactação* refere-se a qualquer processo que reduza o tamanho de um fluxo de dados removendo informações redundantes.</span><span class="sxs-lookup"><span data-stu-id="d41fa-120">*Compression* refers to any process that reduces the size of a data stream by removing redundant information.</span></span> <span data-ttu-id="d41fa-121">Algoritmos de compactação se enquadram em duas categorias amplas:</span><span class="sxs-lookup"><span data-stu-id="d41fa-121">Compression algorithms fall into two broad categories:</span></span>

-   <span data-ttu-id="d41fa-122">Compactação *sem perdas* .</span><span class="sxs-lookup"><span data-stu-id="d41fa-122">*Lossless* compression.</span></span> <span data-ttu-id="d41fa-123">Usando um algoritmo sem perdas, os dados reconstruídos são idênticos ao original.</span><span class="sxs-lookup"><span data-stu-id="d41fa-123">Using a lossless algorithm, the reconstructed data is identical to the original.</span></span>
-   <span data-ttu-id="d41fa-124">Compactação com *perdas* .</span><span class="sxs-lookup"><span data-stu-id="d41fa-124">*Lossy* compression.</span></span> <span data-ttu-id="d41fa-125">Usando um algoritmo com perdas, os dados reconstruídos são uma aproximação do original, mas não é uma correspondência exata.</span><span class="sxs-lookup"><span data-stu-id="d41fa-125">Using a lossy algorithm, the reconstructed data is an approximation of the original, but is not an exact match.</span></span>

<span data-ttu-id="d41fa-126">Na maioria dos outros domínios, a compactação com perdas não é aceitável.</span><span class="sxs-lookup"><span data-stu-id="d41fa-126">In most other domains, lossy compression is not acceptable.</span></span> <span data-ttu-id="d41fa-127">(Imagine voltando uma "aproximação" de uma planilha!) Mas os esquemas de compactação com perdas são bem adequados para áudio e vídeo, por alguns motivos.</span><span class="sxs-lookup"><span data-stu-id="d41fa-127">(Imagine getting back an "approximation" of a spreadsheet!) But lossy compression schemes are well-suited to audio and video, for a couple of reasons.</span></span>

<span data-ttu-id="d41fa-128">A primeira razão tem a ver com a física da percepção humana.</span><span class="sxs-lookup"><span data-stu-id="d41fa-128">The first reason has to do with the physics of human perception.</span></span> <span data-ttu-id="d41fa-129">Quando ouvimos um som complexo, como uma gravação de música, algumas das informações contidas nesse som não são incentivadas ao Ear.</span><span class="sxs-lookup"><span data-stu-id="d41fa-129">When we listen to a complex sound, like a music recording, some of the information contained in that sound is not perceptible to the ear.</span></span> <span data-ttu-id="d41fa-130">Com a ajuda da teoria de processamento de sinal, é possível analisar e separar as frequências que não podem ser percebidas.</span><span class="sxs-lookup"><span data-stu-id="d41fa-130">With the help of signal processing theory, it is possible to analyze and separate the frequencies that cannot be perceived.</span></span> <span data-ttu-id="d41fa-131">Essas frequências podem ser removidas sem efeito perceptiva.</span><span class="sxs-lookup"><span data-stu-id="d41fa-131">These frequencies can be removed with no perceptual effect.</span></span> <span data-ttu-id="d41fa-132">Embora o áudio reconstruído não corresponda ao original exatamente, *ele parecerá o mesmo* para o ouvinte.</span><span class="sxs-lookup"><span data-stu-id="d41fa-132">Although the reconstructed audio will not match the original exactly, it will *sound* the same to the listener.</span></span> <span data-ttu-id="d41fa-133">Os princípios semelhantes se aplicam ao vídeo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-133">Similar principles apply to video.</span></span>

<span data-ttu-id="d41fa-134">Em segundo lugar, alguma degradação na qualidade de som ou imagem pode ser aceitável, dependendo da finalidade pretendida.</span><span class="sxs-lookup"><span data-stu-id="d41fa-134">Second, some degradation in sound or image quality may be acceptable, depending on the intended purpose.</span></span> <span data-ttu-id="d41fa-135">Em telefonia, por exemplo, o áudio geralmente é altamente compactado.</span><span class="sxs-lookup"><span data-stu-id="d41fa-135">In telephony, for example, audio is often highly compressed.</span></span> <span data-ttu-id="d41fa-136">O resultado é bom o suficiente para uma conversa telefônica — mas você não desejaria escutar uma orquestra Symphony por telefone.</span><span class="sxs-lookup"><span data-stu-id="d41fa-136">The result is good enough for a phone conversation—but you wouldn't want to listen to a symphony orchestra over a telephone.</span></span>

<span data-ttu-id="d41fa-137">A compactação também é chamada de *codificação*, e um dispositivo que codifica é chamado de *codificador*.</span><span class="sxs-lookup"><span data-stu-id="d41fa-137">Compression is also called *encoding*, and a device that encodes is called an *encoder*.</span></span> <span data-ttu-id="d41fa-138">O processo reverso é *decodificação*, e o dispositivo é naturalmente chamado de *decodificador*.</span><span class="sxs-lookup"><span data-stu-id="d41fa-138">The reverse process is *decoding*, and the device is a naturally called a *decoder*.</span></span> <span data-ttu-id="d41fa-139">O termo geral para codificadores e decodificadores é *codec*.</span><span class="sxs-lookup"><span data-stu-id="d41fa-139">The general term for both encoders and decoders is *codec*.</span></span> <span data-ttu-id="d41fa-140">Os codecs podem ser implementados em hardware ou software.</span><span class="sxs-lookup"><span data-stu-id="d41fa-140">Codecs can be implemented in hardware or software.</span></span>

<span data-ttu-id="d41fa-141">A tecnologia de compactação mudou rapidamente desde o advento da mídia digital, e um grande número de esquemas de compactação está sendo usado hoje.</span><span class="sxs-lookup"><span data-stu-id="d41fa-141">Compression technology has changed rapidly since the advent of digital media, and a large number of compression schemes are in use today.</span></span> <span data-ttu-id="d41fa-142">Esse fato é um dos principais desafios para a programação de mídia digital.</span><span class="sxs-lookup"><span data-stu-id="d41fa-142">This fact is one of the main challenges for digital media programming.</span></span>

## <a name="media-containers"></a><span data-ttu-id="d41fa-143">Contêineres de mídia</span><span class="sxs-lookup"><span data-stu-id="d41fa-143">Media Containers</span></span>

<span data-ttu-id="d41fa-144">É raro armazenar um fluxo de áudio ou vídeo bruto como um arquivo de computador ou enviar um diretamente pela rede.</span><span class="sxs-lookup"><span data-stu-id="d41fa-144">It is rare to store a raw audio or video stream as a computer file, or to send one directly over the network.</span></span> <span data-ttu-id="d41fa-145">Para uma coisa, seria impossível decodificar tal fluxo, sem saber com antecedência qual codec usar.</span><span class="sxs-lookup"><span data-stu-id="d41fa-145">For one thing, it would be impossible to decode such a stream, without knowing in advance which codec to use.</span></span> <span data-ttu-id="d41fa-146">Portanto, os arquivos de mídia geralmente contêm pelo menos alguns dos seguintes elementos:</span><span class="sxs-lookup"><span data-stu-id="d41fa-146">Therefore, media files usually contain at least some of the following elements:</span></span>

-   <span data-ttu-id="d41fa-147">Cabeçalhos de arquivo que descrevem o número de fluxos, o formato de cada fluxo e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="d41fa-147">File headers that describe the number of streams, the format of each stream, and so on.</span></span>
-   <span data-ttu-id="d41fa-148">Um índice que habilita o acesso aleatório ao conteúdo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-148">An index that enables random access to the content.</span></span>
-   <span data-ttu-id="d41fa-149">Metadados que descrevem o conteúdo (por exemplo, o artista ou o título).</span><span class="sxs-lookup"><span data-stu-id="d41fa-149">Metadata that describes the content (for example, the artist or title).</span></span>
-   <span data-ttu-id="d41fa-150">Cabeçalhos de pacote, para habilitar a transmissão de rede ou acesso aleatório.</span><span class="sxs-lookup"><span data-stu-id="d41fa-150">Packet headers, to enable network transmission or random access.</span></span>

<span data-ttu-id="d41fa-151">Esta documentação usa o *contêiner* de termo para descrever todo o pacote de fluxos, cabeçalhos, índices, metadados e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="d41fa-151">This documentation uses the term *container* to describe the entire package of streams, headers, indexes, metadata, and so forth.</span></span> <span data-ttu-id="d41fa-152">O motivo para usar o *contêiner* de termo em vez de *arquivo* é que alguns formatos de contêiner são projetados para transmissão ao vivo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-152">The reason for using the term *container* rather than *file* is that some container formats are designed for live broadcast.</span></span> <span data-ttu-id="d41fa-153">Um aplicativo pode gerar o contêiner em tempo real, nunca armazená-lo em um arquivo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-153">An application could generate the container in real time, never storing it to a file.</span></span>

<span data-ttu-id="d41fa-154">Um exemplo antecipado de um contêiner de mídia é o formato de arquivo AVI.</span><span class="sxs-lookup"><span data-stu-id="d41fa-154">An early example of a media container is the AVI file format.</span></span> <span data-ttu-id="d41fa-155">Outros exemplos incluem MP4 e formato de sistema avançado (ASF).</span><span class="sxs-lookup"><span data-stu-id="d41fa-155">Other examples include MP4 and Advanced Systems Format (ASF).</span></span> <span data-ttu-id="d41fa-156">Os contêineres podem ser identificados pela extensão de nome de arquivo (por exemplo,. mp4) ou por tipo MIME.</span><span class="sxs-lookup"><span data-stu-id="d41fa-156">Containers can be identified by file name extension (for example, .mp4) or by MIME type.</span></span>

<span data-ttu-id="d41fa-157">O diagrama a seguir mostra uma estrutura típica para um contêiner de mídia.</span><span class="sxs-lookup"><span data-stu-id="d41fa-157">The following diagram shows a typical structure for a media container.</span></span> <span data-ttu-id="d41fa-158">O diagrama não representa nenhum formato específico; os detalhes de cada formato variam muito.</span><span class="sxs-lookup"><span data-stu-id="d41fa-158">The diagram does not represent any specific format; the details of each format vary widely.</span></span>

![diagrama mostrando um contêiner de mídia típico](images/concepts01.png)

<span data-ttu-id="d41fa-160">Observe que a estrutura mostrada no diagrama é hierárquica, com informações de cabeçalho aparecendo no início do contêiner.</span><span class="sxs-lookup"><span data-stu-id="d41fa-160">Notice that the structure shown in the diagram is hierarchical, with header information appearing at the start of the container.</span></span> <span data-ttu-id="d41fa-161">Essa estrutura é típica de muitos formatos de contêineres (mas não todos).</span><span class="sxs-lookup"><span data-stu-id="d41fa-161">This structure is typical of many (but not all) container formats.</span></span> <span data-ttu-id="d41fa-162">Observe também que a seção de dados contém pacotes de áudio e vídeo intercalados.</span><span class="sxs-lookup"><span data-stu-id="d41fa-162">Also notice that the data section contains interleaved audio and video packets.</span></span> <span data-ttu-id="d41fa-163">Esse tipo de intercalação é comum em contêineres de mídia.</span><span class="sxs-lookup"><span data-stu-id="d41fa-163">This type of interleaving is common in media containers.</span></span>

<span data-ttu-id="d41fa-164">A *multiplexação* de termo refere-se ao processo de pacotes de áudio e vídeo e à intercalação de pacotes no contêiner.</span><span class="sxs-lookup"><span data-stu-id="d41fa-164">The term *multiplexing* refers to the process of packetizing the audio and video streams and interleaving the packets into the container.</span></span> <span data-ttu-id="d41fa-165">O processo inverso, remontando os fluxos dos dados em pacotes, é chamado de *demultiplexação*.</span><span class="sxs-lookup"><span data-stu-id="d41fa-165">The reverse process, reassembling the streams from the packetized data, is called *demultiplexing*.</span></span>

## <a name="formats"></a><span data-ttu-id="d41fa-166">Formatos</span><span class="sxs-lookup"><span data-stu-id="d41fa-166">Formats</span></span>

<span data-ttu-id="d41fa-167">Na mídia digital, o *formato* do termo é ambíguo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-167">In digital media, the term *format* is ambiguous.</span></span> <span data-ttu-id="d41fa-168">Um formato pode se referir ao tipo de *codificação*, como o vídeo H. 264 ou o *contêiner*, como MP4.</span><span class="sxs-lookup"><span data-stu-id="d41fa-168">A format can refer to the type of *encoding*, such as H.264 video, or the *container*, such as MP4.</span></span> <span data-ttu-id="d41fa-169">Geralmente, essa distinção é confusa para usuários comuns.</span><span class="sxs-lookup"><span data-stu-id="d41fa-169">This distinction is often confusing for ordinary users.</span></span> <span data-ttu-id="d41fa-170">Os nomes fornecidos aos formatos de mídia nem sempre ajudam.</span><span class="sxs-lookup"><span data-stu-id="d41fa-170">The names given to media formats do not always help.</span></span> <span data-ttu-id="d41fa-171">Por exemplo, *mp3* se refere a um formato de codificação (camada de áudio MPEG-1 3) e um formato de arquivo.</span><span class="sxs-lookup"><span data-stu-id="d41fa-171">For example, *MP3* refers both to an encoding format (MPEG-1 Audio Layer 3) and a file format.</span></span>

<span data-ttu-id="d41fa-172">No entanto, a distinção é importante porque a leitura de um arquivo de mídia envolve dois estágios:</span><span class="sxs-lookup"><span data-stu-id="d41fa-172">The distinction is important, however, because reading a media file actually involves two stages:</span></span>

1.  <span data-ttu-id="d41fa-173">Primeiro, o contêiner deve ser analisado.</span><span class="sxs-lookup"><span data-stu-id="d41fa-173">First, the container must be parsed.</span></span> <span data-ttu-id="d41fa-174">Na maioria dos casos, o número de fluxos e o formato de cada fluxo não podem ser conhecidos até que essa etapa seja concluída.</span><span class="sxs-lookup"><span data-stu-id="d41fa-174">In most cases, the number of streams and the format of each stream cannot be known until this step is complete.</span></span>
2.  <span data-ttu-id="d41fa-175">Em seguida, se os fluxos forem compactados, eles deverão ser decodificados usando os decodificadores apropriados.</span><span class="sxs-lookup"><span data-stu-id="d41fa-175">Next, if the streams are compressed, they must be decoded using the appropriate decoders.</span></span>

<span data-ttu-id="d41fa-176">Esse fato leva muito naturalmente a um design de software em que componentes separados são usados para analisar contêineres e decodificar fluxos.</span><span class="sxs-lookup"><span data-stu-id="d41fa-176">This fact leads quite naturally to a software design where separate components are used to parse containers and decode streams.</span></span> <span data-ttu-id="d41fa-177">Além disso, essa abordagem se presta a um modelo de plug-in, para que terceiros possam fornecer seus próprios analisadores e codecs.</span><span class="sxs-lookup"><span data-stu-id="d41fa-177">Further, this approach lends itself to a plug-in model, so that third parties can provide their own parsers and codecs.</span></span> <span data-ttu-id="d41fa-178">No Windows, a Component Object Model (COM) fornece uma maneira padrão de separar uma API de sua implementação, que é um requisito para qualquer modelo de plug-in.</span><span class="sxs-lookup"><span data-stu-id="d41fa-178">On Windows, the Component Object Model (COM) provides a standard way to separate an API from its implementation, which is a requirement for any plug-in model.</span></span> <span data-ttu-id="d41fa-179">Por esse motivo (entre outros), Media Foundation usa interfaces COM.</span><span class="sxs-lookup"><span data-stu-id="d41fa-179">For this reason (among others), Media Foundation uses COM interfaces.</span></span>

<span data-ttu-id="d41fa-180">O diagrama a seguir mostra os componentes usados para ler um arquivo de mídia:</span><span class="sxs-lookup"><span data-stu-id="d41fa-180">The following diagram shows the components used to read a media file:</span></span>

![diagrama mostrando os componentes para ler um arquivo de mídia](images/concepts02.png)

<span data-ttu-id="d41fa-182">A gravação de um arquivo de mídia também requer duas etapas:</span><span class="sxs-lookup"><span data-stu-id="d41fa-182">Writing a media file also requires two steps:</span></span>

1.  <span data-ttu-id="d41fa-183">Codificação dos dados de áudio/vídeo não compactados.</span><span class="sxs-lookup"><span data-stu-id="d41fa-183">Encoding the uncompressed audio/video data.</span></span>
2.  <span data-ttu-id="d41fa-184">Colocando os dados compactados em um formato de contêiner específico.</span><span class="sxs-lookup"><span data-stu-id="d41fa-184">Putting the compressed data into a particular container format.</span></span>

<span data-ttu-id="d41fa-185">O diagrama a seguir mostra os componentes usados para gravar um arquivo de mídia:</span><span class="sxs-lookup"><span data-stu-id="d41fa-185">The following diagram shows the components used to write a media file:</span></span>

![diagrama mostrando os componentes para gravar um arquivo de mídia.](images/concepts03.png)

## <a name="related-topics"></a><span data-ttu-id="d41fa-187">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="d41fa-187">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d41fa-188">Guia de programação Media Foundation</span><span class="sxs-lookup"><span data-stu-id="d41fa-188">Media Foundation Programming Guide</span></span>](media-foundation-programming-guide.md)
</dt> </dl>

 

 



