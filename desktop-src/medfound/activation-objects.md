---
description: Objetos de ativação
ms.assetid: 767d5f1c-2b8d-43b6-916b-035129e93204
title: Objetos de ativação
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa8741cbfa8bc3801a23b4976e60c0a3ad028b0e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090574"
---
# <a name="activation-objects"></a><span data-ttu-id="a18cb-103">Objetos de ativação</span><span class="sxs-lookup"><span data-stu-id="a18cb-103">Activation Objects</span></span>

<span data-ttu-id="a18cb-104">Um *objeto de ativação* é um objeto auxiliar que é usado para criar outro objeto, um pouco semelhante a uma fábrica de classes.</span><span class="sxs-lookup"><span data-stu-id="a18cb-104">An *activation object* is a helper object that is used to create another object, somewhat similar to a class factory.</span></span> <span data-ttu-id="a18cb-105">Os objetos de ativação expõem a interface [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) .</span><span class="sxs-lookup"><span data-stu-id="a18cb-105">Activation objects expose the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface.</span></span>

<span data-ttu-id="a18cb-106">Um objeto de ativação permite que você adie a criação do objeto de destino, pois você pode manter um ponteiro [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) sem criar o objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="a18cb-106">An activation object lets you defer the creation of the target object, because you can hold onto an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer without creating the target object.</span></span> <span data-ttu-id="a18cb-107">Os objetos de ativação também podem ser serializados e, portanto, usados para criar o objeto de destino em outro processo.</span><span class="sxs-lookup"><span data-stu-id="a18cb-107">Activation objects can also be serialized, and thus used to create the target object in another process.</span></span> <span data-ttu-id="a18cb-108">Por exemplo, os objetos de ativação são usados para realizar marshaling de componentes de pipeline do processo do aplicativo para o processo PMP (caminho de mídia protegido).</span><span class="sxs-lookup"><span data-stu-id="a18cb-108">For example, activation objects are used to marshal pipeline components from the application process to the protected media path (PMP) process.</span></span> <span data-ttu-id="a18cb-109">Os objetos de ativação também são usados por determinadas funções de enumeração que retornam uma lista de ponteiros **IMFActivate** .</span><span class="sxs-lookup"><span data-stu-id="a18cb-109">Activation objects are also used by certain enumeration functions that return a list of **IMFActivate** pointers.</span></span> <span data-ttu-id="a18cb-110">Antes que o aplicativo crie o objeto de destino, ele pode obter informações sobre o objeto examinando atributos no objeto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a18cb-110">Before the application creates the target object, it can get information about the object by examining attributes on the activation object.</span></span>

<span data-ttu-id="a18cb-111">Para criar o objeto de destino a partir de um objeto de ativação, chame o método [**IMFActivate:: activateobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) .</span><span class="sxs-lookup"><span data-stu-id="a18cb-111">To create the target object from an activation object, call the [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) method.</span></span> <span data-ttu-id="a18cb-112">O chamador deve chamar [**IMFActivate:: shutdownobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-shutdownobject) quando for feito usando o objeto criado.</span><span class="sxs-lookup"><span data-stu-id="a18cb-112">The caller must call [**IMFActivate::ShutdownObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-shutdownobject) when it is done using the created object.</span></span> <span data-ttu-id="a18cb-113">Geralmente, o aplicativo cria o objeto de ativação e a sessão de mídia chama **activateobject**.</span><span class="sxs-lookup"><span data-stu-id="a18cb-113">Often the application creates the activation object, and the Media Session calls **ActivateObject**.</span></span> <span data-ttu-id="a18cb-114">Nesse caso, a sessão de mídia, não o aplicativo, deve chamar **shutdownobject**.</span><span class="sxs-lookup"><span data-stu-id="a18cb-114">In that case, the Media Session, not the application, must call **ShutdownObject**.</span></span> <span data-ttu-id="a18cb-115">Em outras situações, o aplicativo recebe um ponteiro [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) da sessão de mídia e o aplicativo chama **Activateobject** e **shutdownobject**.</span><span class="sxs-lookup"><span data-stu-id="a18cb-115">In other situations, the application receives an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer from the Media Session, and the application calls **ActivateObject** and **ShutdownObject**.</span></span> <span data-ttu-id="a18cb-116">(Por exemplo, consulte [como reproduzir arquivos de mídia protegidos](how-to-play-protected-media-files.md).)</span><span class="sxs-lookup"><span data-stu-id="a18cb-116">(For example, see [How to Play Protected Media Files](how-to-play-protected-media-files.md).)</span></span>

<span data-ttu-id="a18cb-117">Os objetos de ativação podem ter atributos e a interface [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) herda a interface [**IMFAttributes**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes) .</span><span class="sxs-lookup"><span data-stu-id="a18cb-117">Activation objects can have attributes, and the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface inherits the [**IMFAttributes**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes) interface.</span></span> <span data-ttu-id="a18cb-118">Alguns objetos de ativação usam atributos para configurar o objeto criado.</span><span class="sxs-lookup"><span data-stu-id="a18cb-118">Some activation objects use attributes to configure the created object.</span></span> <span data-ttu-id="a18cb-119">Os atributos específicos com suporte de cada objeto são documentados na referência para a função de criação do objeto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a18cb-119">The specific attributes supported by each object are documented in the reference for that activation object's creation function.</span></span> <span data-ttu-id="a18cb-120">Defina os atributos usando o ponteiro **IMFActivate** que você recebe da função.</span><span class="sxs-lookup"><span data-stu-id="a18cb-120">Set the attributes using the **IMFActivate** pointer that you receive from the function.</span></span>

<span data-ttu-id="a18cb-121">Para reprodução protegida, os objetos de ativação são empacotados para o processo de PMP.</span><span class="sxs-lookup"><span data-stu-id="a18cb-121">For protected playback, activation objects are marshaled to the PMP process.</span></span> <span data-ttu-id="a18cb-122">Para dar suporte ao marshaling, um objeto de ativação deve expor a interface **IPersistStream** .</span><span class="sxs-lookup"><span data-stu-id="a18cb-122">To support marshaling, an activation object must expose the **IPersistStream** interface.</span></span> <span data-ttu-id="a18cb-123">Além disso, o objeto de ativação e o objeto criado devem ser componentes confiáveis se o PMP estiver sendo executado em um processo protegido.</span><span class="sxs-lookup"><span data-stu-id="a18cb-123">In addition, both the activation object and the created object must be trusted components if the PMP is running in a protected process.</span></span> <span data-ttu-id="a18cb-124">Isso não é um requisito quando o PMP é carregado em um processo desprotegido.</span><span class="sxs-lookup"><span data-stu-id="a18cb-124">This is not a requirement when the PMP is loaded in an unprotected process.</span></span>

<span data-ttu-id="a18cb-125">Para usar um objeto de pipeline personalizado (como um coletor de mídia) dentro do processo de PMP, você deve implementar um objeto de ativação para o seu objeto de pipeline:</span><span class="sxs-lookup"><span data-stu-id="a18cb-125">To use a custom pipeline object (such as a media sink) inside the PMP process, you must implement an activation object for your pipeline object:</span></span>

-   <span data-ttu-id="a18cb-126">O objeto de ativação deve expor [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) e **IPersistStream**.</span><span class="sxs-lookup"><span data-stu-id="a18cb-126">The activation object must expose [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) and **IPersistStream**.</span></span>
-   <span data-ttu-id="a18cb-127">O método **IPersist:: GetClassID** do objeto de ativação deve retornar o CLSID do objeto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a18cb-127">The activation object's **IPersist::GetClassID** method must return the activation object's CLSID.</span></span>
-   <span data-ttu-id="a18cb-128">Opcionalmente, você pode implementar os métodos **IPersistStream:: Save** e **IPersistStream:: Load** para empacotar os dados necessários para configurar o objeto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a18cb-128">Optionally, you can implement the **IPersistStream::Save** and **IPersistStream::Load** methods to marshal any data that you need to configure your activation object.</span></span>

<span data-ttu-id="a18cb-129">Quando a sessão de mídia carrega a topologia dentro do processo de PMP, ela chama **CoCreateInstance** para criar uma nova instância do objeto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a18cb-129">When the Media Session loads the topology inside the PMP process, it calls **CoCreateInstance** to create a new instance of your activation object.</span></span> <span data-ttu-id="a18cb-130">Em seguida, ele chama [**IMFActivate:: activateobject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) para criar o objeto de pipeline.</span><span class="sxs-lookup"><span data-stu-id="a18cb-130">Then it calls [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) to create the pipeline object.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a18cb-131">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a18cb-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a18cb-132">APIs da plataforma Media Foundation</span><span class="sxs-lookup"><span data-stu-id="a18cb-132">Media Foundation Platform APIs</span></span>](media-foundation-platform-apis.md)
</dt> <dt>

[<span data-ttu-id="a18cb-133">**IMFActivate**</span><span class="sxs-lookup"><span data-stu-id="a18cb-133">**IMFActivate**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate)
</dt> </dl>

 

 



