---
description: Noções básicas do DMO
ms.assetid: eaf453d2-69f8-432a-8a58-1ed70778f182
title: Noções básicas do DMO (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44b1aca2fcd7e70cf78e2e95135aee73c454b910
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104164189"
---
# <a name="dmo-basics-microsoft-media-foundation"></a><span data-ttu-id="ae994-103">Noções básicas do DMO (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="ae994-103">DMO Basics (Microsoft Media Foundation)</span></span>

<span data-ttu-id="ae994-104">Este tópico fornece uma breve visão geral do DMOs, pois eles se relacionam com os codecs do Windows Media.</span><span class="sxs-lookup"><span data-stu-id="ae994-104">This topic provides a brief overview of DMOs as they relate to Windows Media Codecs.</span></span> <span data-ttu-id="ae994-105">Para obter mais informações sobre DMOs, consulte [DirectX Media Objects](../directshow/directx-media-objects.md).</span><span class="sxs-lookup"><span data-stu-id="ae994-105">For more information about DMOs, see [DirectX Media Objects](../directshow/directx-media-objects.md).</span></span>

<span data-ttu-id="ae994-106">Um DMO é um objeto COM que transforma dados.</span><span class="sxs-lookup"><span data-stu-id="ae994-106">A DMO is a COM object that transforms data.</span></span> <span data-ttu-id="ae994-107">Você passa dados para ele e retorna os dados transformados.</span><span class="sxs-lookup"><span data-stu-id="ae994-107">You pass data to it, and it returns the transformed data.</span></span> <span data-ttu-id="ae994-108">No caso de um codec de codificador DMO, você insere dados de mídia descompactados e o DMO entrega dados de mídia compactados.</span><span class="sxs-lookup"><span data-stu-id="ae994-108">In the case of a codec encoder DMO, you input uncompressed media data and the DMO delivers compressed media data.</span></span> <span data-ttu-id="ae994-109">A principal vantagem de usar o DMOs é que todos eles implementam a mesma interface base, [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), que simplifica o trabalho com eles porque você pode usar o mesmo objeto, independentemente do tipo de transformação que está sendo executada.</span><span class="sxs-lookup"><span data-stu-id="ae994-109">The primary advantage of using DMOs is that they all implement the same base interface, [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), which simplifies working with them because you can use the same object, regardless of the type of transformation being performed.</span></span>

<span data-ttu-id="ae994-110">Como há variáveis envolvidas em qualquer tipo de transformação de dados, a transformação de áudio e vídeo deve levar em conta a ampla gama de possíveis configurações de mídia.</span><span class="sxs-lookup"><span data-stu-id="ae994-110">Because there are variables involved in any sort of data transformation, audio and video transformation must take into account the wide range of possible media configurations.</span></span> <span data-ttu-id="ae994-111">Os codecs de áudio e vídeo do Windows Media também oferecem suporte a vários recursos especiais que você deve conseguir configurar usando o DMO.</span><span class="sxs-lookup"><span data-stu-id="ae994-111">The Windows Media Audio and Video codecs also support a number of special features that you must be able to configure by using the DMO.</span></span>

<span data-ttu-id="ae994-112">Em geral, as informações de variáveis necessárias para o codec DMOs para compactar e descompactar mídia digital são transmitidas de uma das três maneiras:</span><span class="sxs-lookup"><span data-stu-id="ae994-112">In general, the variable information that is needed by the codec DMOs to compress and decompress digital media is conveyed in one of three ways:</span></span>

-   <span data-ttu-id="ae994-113">Defina o tipo de entrada no DMO para transmitir as características da mídia descompactada que você passa para um codificador DMO e as características da mídia compactada que você passa para um decodificador DMO.</span><span class="sxs-lookup"><span data-stu-id="ae994-113">Set the input type on the DMO to convey the characteristics of the uncompressed media that you pass to an encoder DMO, and the characteristics of the compressed media that you pass to a decoder DMO.</span></span>
-   <span data-ttu-id="ae994-114">Defina o tipo de saída no DMO para transmitir as características da mídia compactada que são entregues por um codificador DMO e as características das mídias descompactadas que são entregues por um decodificador DMO.</span><span class="sxs-lookup"><span data-stu-id="ae994-114">Set the output type on the DMO to convey the characteristics of the compressed media that are delivered by an encoder DMO, and the characteristics of the uncompressed media that are delivered by a decoder DMO.</span></span>
-   <span data-ttu-id="ae994-115">Usando os métodos da interface **IPropertyBag** , defina outras configurações que dão suporte aos vários recursos do codec DMOs como propriedades.</span><span class="sxs-lookup"><span data-stu-id="ae994-115">Using the methods of the **IPropertyBag** interface, configure other settings that support the various features of the codec DMOs as properties.</span></span> <span data-ttu-id="ae994-116">**IPropertyBag** é uma interface com padrão que é suportada por todos os DMOs do codec.</span><span class="sxs-lookup"><span data-stu-id="ae994-116">**IPropertyBag** is a standard COM interface that is supported by all of the codec DMOs.</span></span>

<span data-ttu-id="ae994-117">Além disso, alguns recursos de codec são gerenciados usando outras interfaces específicas para o codec DMOs.</span><span class="sxs-lookup"><span data-stu-id="ae994-117">Additionally, some codec features are managed by using other interfaces that are specific to the codec DMOs.</span></span> <span data-ttu-id="ae994-118">Essas interfaces são listadas para cada codec na seção [objetos de codec](codecobjects.md).</span><span class="sxs-lookup"><span data-stu-id="ae994-118">These interfaces are listed for each codec in the section [Codec Objects](codecobjects.md).</span></span>

<span data-ttu-id="ae994-119">Os tipos de entrada e saída são específicos para fluxos de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="ae994-119">Input and output types are specific to input and output streams.</span></span> <span data-ttu-id="ae994-120">Cada fluxo representa uma representação discreta do conteúdo.</span><span class="sxs-lookup"><span data-stu-id="ae994-120">Each stream represents a discrete representation of the content.</span></span> <span data-ttu-id="ae994-121">Por exemplo, o Windows Media Video Encoder DMO tem um único fluxo de entrada e dois fluxos de saída.</span><span class="sxs-lookup"><span data-stu-id="ae994-121">For example, the Windows Media Video encoder DMO has a single input stream, and two output streams.</span></span> <span data-ttu-id="ae994-122">O fluxo de entrada aceita exemplos de vídeo descompactados.</span><span class="sxs-lookup"><span data-stu-id="ae994-122">The input stream accepts uncompressed video samples.</span></span> <span data-ttu-id="ae994-123">O primeiro dos dois fluxos de saída fornece amostras compactadas; a outra fornece exemplos não compactados.</span><span class="sxs-lookup"><span data-stu-id="ae994-123">The first of the two output streams delivers compressed samples; the other provides uncompressed samples.</span></span> <span data-ttu-id="ae994-124">Os exemplos individuais em um fluxo de saída representam o mesmo conteúdo que os exemplos correspondentes no outro fluxo, mas cada fluxo entrega esses exemplos em um formato diferente.</span><span class="sxs-lookup"><span data-stu-id="ae994-124">The individual samples in one output stream represent the same content as the corresponding samples in the other stream, but each stream delivers those samples in a different format.</span></span>

<span data-ttu-id="ae994-125">Cada fluxo (entrada ou saída) dá suporte a um ou mais tipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="ae994-125">Each stream (input or output) supports one or more types of media.</span></span> <span data-ttu-id="ae994-126">Um tipo de mídia, ou formato, é descrito por uma estrutura de [**\_ \_ tipo de mídia DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) .</span><span class="sxs-lookup"><span data-stu-id="ae994-126">A media type, or format, is described by a [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure.</span></span> <span data-ttu-id="ae994-127">Você pode consultar o DMO para os tipos que têm suporte de um fluxo de saída chamando [**IMediaObject:: GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype).</span><span class="sxs-lookup"><span data-stu-id="ae994-127">You can query the DMO for the types that are supported by an output stream by calling [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype).</span></span> <span data-ttu-id="ae994-128">Esse método retorna um tipo de saída válido (embora em alguns casos parcialmente incompleto) para esse fluxo.</span><span class="sxs-lookup"><span data-stu-id="ae994-128">This method returns a valid (though in some cases partially incomplete) output type for that stream.</span></span> <span data-ttu-id="ae994-129">Você pode enumerar os tipos de mídia com suporte para um fluxo de saída fazendo chamadas repetidas para **Getoutputtypetype**, incrementando o parâmetro de tipo com cada chamada.</span><span class="sxs-lookup"><span data-stu-id="ae994-129">You can enumerate the supported media types for an output stream by making repeated calls to **GetOutputType**, incrementing the type parameter with each call.</span></span> <span data-ttu-id="ae994-130">Quando o índice de tipo que você passa está fora dos limites, o método retorna **DMO \_ E \_ não \_ mais \_ itens**.</span><span class="sxs-lookup"><span data-stu-id="ae994-130">When the type index that you pass is out of bounds, the method returns **DMO\_E\_NO\_MORE\_ITEMS**.</span></span> <span data-ttu-id="ae994-131">Os formatos de entrada podem ser enumerados da mesma maneira usando o método [**IMediaObject:: GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) .</span><span class="sxs-lookup"><span data-stu-id="ae994-131">Input formats can be enumerated in the same way by using the [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype) method.</span></span>

<span data-ttu-id="ae994-132">Os tipos enumerados pelo DMO são apenas os tipos "preferenciais", no entanto, outros tipos podem ter suporte.</span><span class="sxs-lookup"><span data-stu-id="ae994-132">The types that are enumerated by the DMO are only the "preferred" types, however, other types may be supported.</span></span> <span data-ttu-id="ae994-133">Você pode validar um tipo de saída chamando [**IMediaObject:: SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype).</span><span class="sxs-lookup"><span data-stu-id="ae994-133">You can validate an output type by calling [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setoutputtype).</span></span> <span data-ttu-id="ae994-134">Use [**IMediaObject:: SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) para validar um tipo de entrada.</span><span class="sxs-lookup"><span data-stu-id="ae994-134">Use [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputtype) to validate an input type.</span></span> <span data-ttu-id="ae994-135">Os dois métodos retornarão o **\_ tipo DMO E \_ \_ não \_ aceito** se a estrutura do [**\_ \_ tipo de mídia DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) que você passou for inválida.</span><span class="sxs-lookup"><span data-stu-id="ae994-135">Both methods will return **DMO\_E\_TYPE\_NOT\_ACCEPTED** if the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure you passed is invalid.</span></span> <span data-ttu-id="ae994-136">Alguns DMOs exigem que você defina um tipo de saída antes de enumerar qualquer tipo de entrada.</span><span class="sxs-lookup"><span data-stu-id="ae994-136">Some DMOs require you to set an output type before enumerating any input types.</span></span> <span data-ttu-id="ae994-137">O codec de áudio e vídeo do Windows Media DMOs todos têm entradas e saídas que têm validação interdependentes.</span><span class="sxs-lookup"><span data-stu-id="ae994-137">The Windows Media Audio and Video codec DMOs all have inputs and outputs that have interdependent validation.</span></span> <span data-ttu-id="ae994-138">Ou seja, o tipo de saída definido definirá os critérios de validação para o tipo de entrada.</span><span class="sxs-lookup"><span data-stu-id="ae994-138">That is, the output type you set will set the validation criteria for the input type.</span></span> <span data-ttu-id="ae994-139">Também há algumas propriedades que, quando definidas, alteram os tipos válidos de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="ae994-139">There are also some properties that, when set, alter the valid input and output types.</span></span> <span data-ttu-id="ae994-140">Por esse motivo, você deve definir todas as propriedades desejadas no DMO antes de enumerar os tipos.</span><span class="sxs-lookup"><span data-stu-id="ae994-140">For this reason, you should set all of the desired properties on the DMO before enumerating types.</span></span>

<span data-ttu-id="ae994-141">Quando você tiver definido os tipos de saída e entrada para o DMO, poderá começar a processar exemplos.</span><span class="sxs-lookup"><span data-stu-id="ae994-141">When you have set the output and input types for the DMO, you can begin processing samples.</span></span> <span data-ttu-id="ae994-142">Cada exemplo de entrada é passado para o codec usando uma chamada para [**IMediaObject::P rocessinput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), e cada exemplo de saída é entregue pelo codec quando você faz uma chamada para [**IMediaObject::P rocessoutput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).</span><span class="sxs-lookup"><span data-stu-id="ae994-142">Each input sample is passed to the codec using a call to [**IMediaObject::ProcessInput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput), and each output sample is delivered by the codec when you make a call to [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processoutput).</span></span>

## <a name="related-topics"></a><span data-ttu-id="ae994-143">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ae994-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ae994-144">Trabalhando com codec DMOs</span><span class="sxs-lookup"><span data-stu-id="ae994-144">Working with Codec DMOs</span></span>](workingwithcodecdmos.md)
</dt> </dl>

 

 
