---
description: Ao criar um arquivo ASF, o objeto ContentInfo precisa saber as características do conteúdo de mídia para que os vários objetos de cabeçalho sejam preenchidos com os valores corretos.
ms.assetid: 30e3c10b-1310-4194-8b83-221dfe73b03c
title: Definindo propriedades no objeto ContentInfo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e386d5eb33dd1893b195a870425b2336ab9c316f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104091033"
---
# <a name="setting-properties-in-the-contentinfo-object"></a><span data-ttu-id="263b9-103">Definindo propriedades no objeto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="263b9-103">Setting Properties in the ContentInfo Object</span></span>

<span data-ttu-id="263b9-104">Ao criar um arquivo ASF, o objeto ContentInfo precisa saber as características do conteúdo de mídia para que os vários objetos de cabeçalho sejam preenchidos com os valores corretos.</span><span class="sxs-lookup"><span data-stu-id="263b9-104">While creating an ASF file, the ContentInfo object needs to know the characteristics of the media content so that the various header objects are populated with the correct values.</span></span>

-   [<span data-ttu-id="263b9-105">Configurações relacionadas ao conteúdo no objeto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="263b9-105">Content-Related Settings in the ContentInfo Object</span></span>](#content-related-settings-in-the-contentinfo-object)
-   [<span data-ttu-id="263b9-106">Configurando o objeto ContentInfo com as configurações do codificador</span><span class="sxs-lookup"><span data-stu-id="263b9-106">Configuring the ContentInfo Object with Encoder Settings</span></span>](#configuring-the-contentinfo-object-with-encoder-settings)
-   [<span data-ttu-id="263b9-107">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="263b9-107">Related topics</span></span>](#related-topics)

## <a name="content-related-settings-in-the-contentinfo-object"></a><span data-ttu-id="263b9-108">Configurações relacionadas ao conteúdo no objeto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="263b9-108">Content-Related Settings in the ContentInfo Object</span></span>

<span data-ttu-id="263b9-109">As definições de configuração de conteúdo são configurações de fluxo, que estão contidas no perfil e especificam o identificador de fluxo, o tipo de mídia e os parâmetros de Bucket de vazamento para o coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="263b9-109">Content configuration settings are stream settings, which are contained within the profile and specify the stream identifier, the media type, and the leaky bucket parameters for the media sink.</span></span> <span data-ttu-id="263b9-110">Depois que o perfil é definido no objeto ContentInfo chamando [**IMFASFContentInfo:: setprofile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), esses valores são refletidos no objeto de cabeçalho ASF gerado.</span><span class="sxs-lookup"><span data-stu-id="263b9-110">After the profile is set on the ContentInfo object by calling [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), these values are reflected in the ASF Header Object that was generated.</span></span> <span data-ttu-id="263b9-111">Para obter informações sobre essas configurações, consulte [criando e configurando fluxos ASF](creating-and-configuring-asf-streams.md).</span><span class="sxs-lookup"><span data-stu-id="263b9-111">For information about these settings, see [Creating and Configuring ASF Streams](creating-and-configuring-asf-streams.md).</span></span>

## <a name="configuring-the-contentinfo-object-with-encoder-settings"></a><span data-ttu-id="263b9-112">Configurando o objeto ContentInfo com as configurações do codificador</span><span class="sxs-lookup"><span data-stu-id="263b9-112">Configuring the ContentInfo Object with Encoder Settings</span></span>

<span data-ttu-id="263b9-113">Os dados de áudio ou vídeo de mídia digital são complexos e ocupam grandes quantidades de memória.</span><span class="sxs-lookup"><span data-stu-id="263b9-113">Digital media audio or video data is complex and takes up large amounts of memory.</span></span> <span data-ttu-id="263b9-114">Na maioria das circunstâncias, áudio e vídeo são compactados usando codificadores antes de serem adicionados a um arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="263b9-114">Under most circumstances, both audio and video are compressed by using encoders before being added to an ASF file.</span></span> <span data-ttu-id="263b9-115">Em Media Foundation, os codificadores são implementados como [transformações de Media Foundation](media-foundation-transforms.md) (MFTs) com uma entrada e uma saída.</span><span class="sxs-lookup"><span data-stu-id="263b9-115">In Media Foundation, encoders are implemented as [Media Foundation Transforms](media-foundation-transforms.md) (MFTs) with one input and one output.</span></span> <span data-ttu-id="263b9-116">Você deve selecionar o tipo de mídia de saída dependendo do tipo de mídia do fluxo de entrada e do tipo de codificação escolhido para compactar o fluxo.</span><span class="sxs-lookup"><span data-stu-id="263b9-116">You must select the output media type depending on the media type of the input stream and the encoding type you choose for compressing the stream.</span></span>

<span data-ttu-id="263b9-117">Antes da sessão de codificação, o codificador deve ser configurado definindo as propriedades relevantes dependendo do tipo de codificação.</span><span class="sxs-lookup"><span data-stu-id="263b9-117">Before the encoding session, the encoder must be configured by setting the relevant properties depending on the type of encoding.</span></span>

<span data-ttu-id="263b9-118">Depois de configurar o codificador, você deve configurar o objeto ContentInfo com os valores do codificador porque o [Multiplexador de ASF](asf-multiplexer.md) e o coletor de mídia ASF, que são inicializados com o objeto ContentInfo populado, usam configurações como os valores de Bucket de vazamento para gerar pacotes de dados ASF.</span><span class="sxs-lookup"><span data-stu-id="263b9-118">After configuring the encoder, you must configure the ContentInfo object with the encoder values because the [ASF Multiplexer](asf-multiplexer.md) and the ASF Media Sink, which are initialized with the populated ContentInfo object, use settings such as the leaky bucket values, to generate ASF data packets.</span></span> <span data-ttu-id="263b9-119">Os valores não são salvos no objeto de cabeçalho ASF final.</span><span class="sxs-lookup"><span data-stu-id="263b9-119">The values are not saved in the final ASF Header Object.</span></span> <span data-ttu-id="263b9-120">As configurações de codificação são expostas como propriedades.</span><span class="sxs-lookup"><span data-stu-id="263b9-120">The encoding settings are exposed as properties.</span></span> <span data-ttu-id="263b9-121">Para configurar o objeto ContentInfo com as propriedades do codificador, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="263b9-121">To configure the ContentInfo object with the encoder properties, do the following:</span></span>

1.  <span data-ttu-id="263b9-122">Obtenha um ponteiro para o repositório de propriedades do codificador consultando o codificador (interface [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) ) diretamente para a interface **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="263b9-122">Get a pointer to the encoder's property store by querying the encoder ([**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface) directly for the **IPropertyStore** interface.</span></span>
2.  <span data-ttu-id="263b9-123">Chame [**IMFASFContentInfo:: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span><span class="sxs-lookup"><span data-stu-id="263b9-123">Call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span></span> <span data-ttu-id="263b9-124">Para definir propriedades específicas de fluxo, especifique o identificador de fluxo no parâmetro *wStreamNumber* ; para propriedades em nível de arquivo, passe 0.</span><span class="sxs-lookup"><span data-stu-id="263b9-124">To set stream-specific properties, specify the stream identifier in the *wStreamNumber* parameter; for file-level properties, pass 0.</span></span> <span data-ttu-id="263b9-125">O parâmetro *ppIStore* recebe um ponteiro para a interface **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="263b9-125">The *ppIStore* parameter receives a pointer to the **IPropertyStore** interface.</span></span> <span data-ttu-id="263b9-126">O repositório de propriedades recebido está vazio.</span><span class="sxs-lookup"><span data-stu-id="263b9-126">The received property store is empty.</span></span>
3.  <span data-ttu-id="263b9-127">Chame **IPropertyStore:: GetValue** no codificador e obtenha o valor da propriedade especificando as constantes da chave de propriedade.</span><span class="sxs-lookup"><span data-stu-id="263b9-127">Call **IPropertyStore::GetValue** on the encoder and get the property value by specifying the property key constants.</span></span> <span data-ttu-id="263b9-128">Para obter uma lista completa das propriedades de codificação, consulte a [referência de programação do codec](/previous-versions//aa384554(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="263b9-128">For a complete list of encoding properties, see the [Codec Programming Reference](/previous-versions//aa384554(v=vs.85)).</span></span>
4.  <span data-ttu-id="263b9-129">Chame **IPropertyStore:: SetValue** no objeto ContentInfo para definir a propriedade Required no repositório de propriedades.</span><span class="sxs-lookup"><span data-stu-id="263b9-129">Call **IPropertyStore::SetValue** on the ContentInfo object to set the required property in the property store.</span></span>
5.  <span data-ttu-id="263b9-130">Repita as etapas 3 e 4 para cada propriedade que você deseja definir.</span><span class="sxs-lookup"><span data-stu-id="263b9-130">Repeat steps 3 and 4 for each property that you want to set.</span></span>

<span data-ttu-id="263b9-131">O coletor de mídia do ASF pode ser criado usando um objeto de ativação chamando [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span><span class="sxs-lookup"><span data-stu-id="263b9-131">The ASF media sink can be created by using an activation object by calling [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span></span> <span data-ttu-id="263b9-132">O novo objeto de coletor de mídia é configurado com base nas configurações específicas do coletor de mídia que podem ser definidas no repositório de propriedades do objeto ContentInfo.</span><span class="sxs-lookup"><span data-stu-id="263b9-132">The new media sink object is configured based on media sink-specific settings that can be set in the ContentInfo object's property store.</span></span> <span data-ttu-id="263b9-133">A tabela a seguir mostra as constantes da propriedade de coletor de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="263b9-133">The following table shows the ASF media sink property constants.</span></span>



| <span data-ttu-id="263b9-134">Propriedade</span><span class="sxs-lookup"><span data-stu-id="263b9-134">Property</span></span>                                                                                                     | <span data-ttu-id="263b9-135">Descrição</span><span class="sxs-lookup"><span data-stu-id="263b9-135">Description</span></span>                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="263b9-136">**\_Enviar MFPKEY ASFMEDIASINK \_ base \_**</span><span class="sxs-lookup"><span data-stu-id="263b9-136">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)                   | <span data-ttu-id="263b9-137">O tempo de envio indica quando a carga dentro do Bucket de vazamento será liberada.</span><span class="sxs-lookup"><span data-stu-id="263b9-137">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="263b9-138">Esse valor de propriedade indica a primeira hora de envio.</span><span class="sxs-lookup"><span data-stu-id="263b9-138">This property value indicates the first send time.</span></span> <span data-ttu-id="263b9-139">O multiplexador usa esse valor para calcular os tempos de envio subsequentes para os pacotes gerados e garante que os dados fluem de forma estável por meio do Bucket vazado.</span><span class="sxs-lookup"><span data-stu-id="263b9-139">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="263b9-140">**MFPKEY \_ ASFMEDIASINK \_ AutoAjuste de \_ taxa de bits**</span><span class="sxs-lookup"><span data-stu-id="263b9-140">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md)         | <span data-ttu-id="263b9-141">Esse valor **bool** indica se o multiplexador precisa ajustar a taxa de bits automaticamente para garantir que os dados não estourem o Bucket de vazamentos.</span><span class="sxs-lookup"><span data-stu-id="263b9-141">This **BOOL** value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                              |
| [<span data-ttu-id="263b9-142">**MFPKEY \_ ASFMEDIASINK \_ DRMACTION**</span><span class="sxs-lookup"><span data-stu-id="263b9-142">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                            | <span data-ttu-id="263b9-143">Isso indica a ação de DRM do coletor de mídia do ASF para geração de arquivos.</span><span class="sxs-lookup"><span data-stu-id="263b9-143">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="263b9-144">Nesta versão, somente a transcodificação DRM tem suporte.</span><span class="sxs-lookup"><span data-stu-id="263b9-144">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |
| [<span data-ttu-id="263b9-145">**MFPKEY \_ ASFSTREAMSINK \_ corrigiu \_ LEAKYBUCKET**</span><span class="sxs-lookup"><span data-stu-id="263b9-145">**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**</span></span>](mfpkey-asfstreamsink-corrected-leakybucket-property.md) | <span data-ttu-id="263b9-146">Essa propriedade deve ser definida quando o codificador decidir qual janela de buffer e taxa de bits usar.</span><span class="sxs-lookup"><span data-stu-id="263b9-146">This property must be set when the encoder decides which buffer window and bit rate to use.</span></span> <span data-ttu-id="263b9-147">Para definir esses valores, use a interface [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) .</span><span class="sxs-lookup"><span data-stu-id="263b9-147">To set these values, use the [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) interface.</span></span> <span data-ttu-id="263b9-148">Isso deve ser definido para cada fluxo no arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="263b9-148">This must be set for each stream in the ASF file.</span></span>                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="263b9-149">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="263b9-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="263b9-150">Gravando um objeto de cabeçalho ASF para um novo arquivo</span><span class="sxs-lookup"><span data-stu-id="263b9-150">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 
