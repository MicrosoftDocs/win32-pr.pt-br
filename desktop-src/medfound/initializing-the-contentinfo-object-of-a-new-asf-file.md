---
description: Inicializando o objeto ContentInfo de um novo arquivo ASF
ms.assetid: a4f6c90e-1b38-4c70-8bc5-e2e16af3d87a
title: Inicializando o objeto ContentInfo de um novo arquivo ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74826942700f4be8028075fcd9466414834eb8e2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104296315"
---
# <a name="initializing-the-contentinfo-object-of-a-new-asf-file"></a><span data-ttu-id="2c4d8-103">Inicializando o objeto ContentInfo de um novo arquivo ASF</span><span class="sxs-lookup"><span data-stu-id="2c4d8-103">Initializing the ContentInfo Object of a New ASF File</span></span>

<span data-ttu-id="2c4d8-104">Depois de criar um objeto ContentInfo vazio chamando a função [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) , o aplicativo deve chamar [**IMFASFContentInfo:: setprofile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) para fornecer o perfil de codificação.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-104">After creating an empty ContentInfo object by calling the [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) function, the application must call [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) to provide the encoding profile.</span></span> <span data-ttu-id="2c4d8-105">Para obter informações sobre como criar um perfil, consulte [criando um perfil ASF](creating-an-asf-profile.md).</span><span class="sxs-lookup"><span data-stu-id="2c4d8-105">For information about creating a profile, see [Creating an ASF Profile](creating-an-asf-profile.md).</span></span>

<span data-ttu-id="2c4d8-106">Antes que as informações possam ser lidas do perfil, o método **setprofile** deve validar o objeto de perfil especificado verificando os identificadores de fluxo ou os tipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-106">Before information can be read from the profile, the **SetProfile** method must validate the specified profile object by checking the stream identifiers or media types.</span></span> <span data-ttu-id="2c4d8-107">Se o perfil passar na validação, vários objetos de cabeçalho serão gerados, como o objeto Propriedades de arquivo, o objeto Propriedades de taxa de bits de fluxo, o objeto Propriedades de fluxo e o objeto de exclusão mútua.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-107">If the profile passes the validation, various header objects are generated, such as the File Properties Object, the Stream Bitrate Properties Object, the Stream Properties Object, and the Mutual Exclusion Object.</span></span>

<span data-ttu-id="2c4d8-108">**Setprofile** calcula e define os valores recomendados para determinadas propriedades, como o valor de preroll.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-108">**SetProfile** computes and sets recommended values for certain properties, such as the preroll value.</span></span> <span data-ttu-id="2c4d8-109">Se isso ainda não estiver definido, o valor de preroll recomendado em milissegundos dependerá da janela de buffer máximo do Bucket de vazamento especificado para os fluxos no perfil.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-109">If this is not already set, the recommended preroll value in milliseconds depends on the maximum buffer window of the leaky bucket specified for the streams in the profile.</span></span> <span data-ttu-id="2c4d8-110">Da mesma forma, os tamanhos mínimo e máximo de pacotes de dados também são definidos.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-110">Similarly, the minimum and maximum data packet sizes are also set.</span></span> <span data-ttu-id="2c4d8-111">Os valores recomendados podem substituir os tamanhos de pacotes definidos no perfil por meio de atributos.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-111">The recommended values might override the packet sizes that are set on the profile through attributes.</span></span>

<span data-ttu-id="2c4d8-112">Como o arquivo está no processo de ser criado, o arquivo é Categorizado como um tipo de difusão, indicado pelo campo sinalizadores do objeto Propriedades do arquivo.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-112">Because the file is in the process of being created, the file is categorized as a broadcast type, which is denoted by the Flags field of the File Properties Object.</span></span> <span data-ttu-id="2c4d8-113">Determinados valores desconhecidos, como o número de pacotes de dados, duração da reprodução e duração de envio são definidos como zero.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-113">Certain unknown values such as the number of data packets, play duration, and send duration are set to zero.</span></span> <span data-ttu-id="2c4d8-114">Esses valores são representados por atributos **MF \_ PD \_ ASF \_ xxx** e devem ser atualizados pelo aplicativo após a conclusão da criação do arquivo.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-114">These values are represented by **MF\_PD\_ASF\_xxx** attributes and must be updated by the application after file creation is complete.</span></span>

<span data-ttu-id="2c4d8-115">O objeto de perfil especificado substitui qualquer perfil existente associado ao objeto ContentInfo, remove os objetos de cabeçalho referenciados e redefine as propriedades de arquivo global, como preroll e o tamanho do pacote de dados.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-115">The specified profile object replaces any existing profile associated with the ContentInfo object, removes the referenced header objects, and resets global file properties such as preroll and data packet size.</span></span>

<span data-ttu-id="2c4d8-116">O método **setprofile** também cria o objeto de dados que representa o objeto de dados ASF.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-116">The **SetProfile** method also creates the data object that represents the ASF Data Object.</span></span> <span data-ttu-id="2c4d8-117">Se você reutilizar um objeto ContentInfo que inclui informações sobre quaisquer pacotes de dados, **setprofile** falhará e retornará o \_ erro MF e \_ já \_ inicializado indicando que ele já está associado a um objeto de dados ASF existente.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-117">If you reuse a ContentInfo object that includes information about any data packets, **SetProfile** fails and returns the MF\_E\_ALREADY\_INITIALIZED error indicating that it is already associated with an existing ASF Data Object.</span></span> <span data-ttu-id="2c4d8-118">Por padrão, para um novo objeto ContentInfo, a contagem de pacotes de dados é definida como zero e o tamanho do objeto de dados é definido como 50 bytes.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-118">By default, for a new ContentInfo object, the data packet count is set to zero and the data object size is set to 50 bytes.</span></span> <span data-ttu-id="2c4d8-119">Se você usar o multiplexador para gerar pacotes de dados, o multiplexador atualizará o objeto ContentInfo para refletir os novos valores, como a contagem de pacotes de dados.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-119">If you use the multiplexer to generate data packets, the multiplexer updates the ContentInfo object to reflect new values such as the data packet count.</span></span> <span data-ttu-id="2c4d8-120">Para obter mais informações sobre a geração de pacotes de dados, consulte [gerando novos pacotes de dados ASF](generating-new-asf-data-packets.md).</span><span class="sxs-lookup"><span data-stu-id="2c4d8-120">For more information about data packet generation, see [Generating New ASF Data Packets](generating-new-asf-data-packets.md).</span></span>

<span data-ttu-id="2c4d8-121">Depois que todos os objetos de cabeçalho são adicionados ao objeto de cabeçalho ASF final, o tamanho total do cabeçalho pode ser recuperado chamando [**IMFASFContentInfo:: Getheadize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span><span class="sxs-lookup"><span data-stu-id="2c4d8-121">After all the Header Objects are added to the final ASF Header Object, the total header size can be retrieved by calling [**IMFASFContentInfo::GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span></span> <span data-ttu-id="2c4d8-122">Esse tamanho inclui o tamanho inicial do objeto de dados.</span><span class="sxs-lookup"><span data-stu-id="2c4d8-122">This size includes the initial data object size.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2c4d8-123">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2c4d8-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2c4d8-124">Definindo propriedades no objeto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="2c4d8-124">Setting Properties in the ContentInfo Object</span></span>](setting-properties-in-the-contentinfo-object.md)
</dt> <dt>

[<span data-ttu-id="2c4d8-125">Gravando um objeto de cabeçalho ASF para um novo arquivo</span><span class="sxs-lookup"><span data-stu-id="2c4d8-125">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 



