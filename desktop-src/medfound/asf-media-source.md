---
description: Media Foundation fornece a fonte de mídia ASF que um aplicativo pode usar para representar um arquivo ASF na camada de pipeline da arquitetura.
ms.assetid: a2d2b382-d666-4a37-a6a9-0b839fbfbec3
title: Fonte de mídia ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75dc682d48339ce4ff707e7859a6962b9f5cfd92
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/03/2021
ms.locfileid: "105782595"
---
# <a name="asf-media-source"></a><span data-ttu-id="7d176-103">Fonte de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-103">ASF Media Source</span></span>

<span data-ttu-id="7d176-104">Media Foundation fornece a fonte de mídia ASF que um aplicativo pode usar para representar um arquivo ASF na camada de pipeline da arquitetura.</span><span class="sxs-lookup"><span data-stu-id="7d176-104">Media Foundation provides the ASF media source that an application can use to represent an ASF file in the pipeline layer of the architecture.</span></span>

<span data-ttu-id="7d176-105">Para reproduzir um arquivo ASF, um aplicativo pode usar a fonte de mídia do ASF para alimentar dados em um pipeline de reprodução.</span><span class="sxs-lookup"><span data-stu-id="7d176-105">In order to play an ASF file, an application can use the ASF media source to feed data into a playback pipeline.</span></span> <span data-ttu-id="7d176-106">Em um cenário de codificação, o aplicativo pode usar a fonte de mídia do ASF como a origem para converter em outro formato ou para converter um arquivo de taxa de bits maior em um arquivo de taxa de bits inferior sem alterar os formatos.</span><span class="sxs-lookup"><span data-stu-id="7d176-106">In an encoding scenario, application can use the ASF media source as the source to convert into another format or for converting a higher bit-rate file to a lower bit-rate file without changing formats.</span></span> <span data-ttu-id="7d176-107">A fonte de mídia do ASF deve ser usada na camada do pipeline, ou seja, um aplicativo deve usar a sessão de mídia para controlar a operação.</span><span class="sxs-lookup"><span data-stu-id="7d176-107">The ASF media source must be used in the pipeline layer, that is, an application must use the Media Session to control the operation.</span></span> <span data-ttu-id="7d176-108">Esse nível de acesso permite que os aplicativos obtenham eventos enquanto a sessão de mídia está em andamento.</span><span class="sxs-lookup"><span data-stu-id="7d176-108">This level of access allows the applications to get events while the Media Session is in progress.</span></span> <span data-ttu-id="7d176-109">Para obter acesso de nível inferior ao conteúdo do ASF, um aplicativo deve usar os componentes ASF da camada WMContainer.</span><span class="sxs-lookup"><span data-stu-id="7d176-109">To get lower-level access to the ASF content, an application must use the WMContainer Layer ASF components.</span></span>

<span data-ttu-id="7d176-110">A origem de mídia do ASF implementa a interface [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) , que é a interface genérica para fontes de mídia no Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="7d176-110">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface, which is the generic interface for media sources in Media Foundation.</span></span> <span data-ttu-id="7d176-111">Como qualquer outra fonte de mídia, a fonte de mídia ASF fornece um descritor de apresentação que descreve principalmente o objeto de cabeçalho ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-111">Like any other media source, the ASF media source provides a presentation descriptor that primarily describes the ASF Header Object.</span></span> <span data-ttu-id="7d176-112">Além disso, a fonte de mídia do ASF fornece descritores de fluxo que representam cada fluxo no conteúdo de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-112">In addition, the ASF media source provides stream descriptors that represent each stream in the media content.</span></span> <span data-ttu-id="7d176-113">Para obter mais informações, consulte [estrutura de arquivo ASF](asf-file-structure.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-113">For more information, see [ASF File Structure](asf-file-structure.md).</span></span>

-   [<span data-ttu-id="7d176-114">Criando a fonte de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-114">Creating the ASF Media Source</span></span>](#creating-the-asf-media-source)
-   [<span data-ttu-id="7d176-115">Definições de configuração para a origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-115">Configuration Settings for the ASF Media Source</span></span>](#configuration-settings-for-the-asf-media-source)
-   [<span data-ttu-id="7d176-116">Modelo de objeto de origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-116">ASF Media Source Object Model</span></span>](#asf-media-source-object-model)
-   [<span data-ttu-id="7d176-117">Serviços de origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-117">ASF Media Source Services</span></span>](#asf-media-source-services)
    -   [<span data-ttu-id="7d176-118">Conversão de código de</span><span class="sxs-lookup"><span data-stu-id="7d176-118">Timecode Translation</span></span>](#timecode-translation)
-   [<span data-ttu-id="7d176-119">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7d176-119">Related topics</span></span>](#related-topics)

## <a name="creating-the-asf-media-source"></a><span data-ttu-id="7d176-120">Criando a fonte de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-120">Creating the ASF Media Source</span></span>

<span data-ttu-id="7d176-121">Para criar a fonte de mídia do ASF, o aplicativo deve usar o [resolvedor de origem](source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-121">To create the ASF media source, the application must use the [Source Resolver](source-resolver.md).</span></span> <span data-ttu-id="7d176-122">Para criar a origem de mídia ASF, o aplicativo deve fornecer a origem para a qual o resolvedor de origem cria a origem de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-122">In order to create the ASF media source, the application must provide the source for which the source resolver creates the ASF media source.</span></span> <span data-ttu-id="7d176-123">As informações de origem devem ser fornecidas por meio da especificação da URL do arquivo de origem ou do fluxo de bytes que contém a mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-123">The source information must be provided by either specifying the URL of the source file or the byte stream that contains the media.</span></span> <span data-ttu-id="7d176-124">Se o aplicativo optar por criar a origem de mídia do ASF especificando a URL, ele deverá chamar [**IMFSourceResolver:: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) para a operação síncrona ou **IMFSourceResolver:: Begin... EndCreateObjectFromURL** para operação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="7d176-124">If the application chooses to create the ASF media source by specifying the URL, it must call either [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromURL** for asynchronous operation.</span></span> <span data-ttu-id="7d176-125">O processo para criar a origem de mídia de um fluxo de bytes é semelhante.</span><span class="sxs-lookup"><span data-stu-id="7d176-125">The process for creating the media source from a byte stream is similar.</span></span> <span data-ttu-id="7d176-126">O aplicativo deve chamar [**IMFSourceResolver:: CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) para a operação síncrona ou **IMFSourceResolver:: Begin... EndCreateObjectFromBytestream** para operação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="7d176-126">The application must call either [**IMFSourceResolver::CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromBytestream** for asynchronous operation.</span></span> <span data-ttu-id="7d176-127">Essas chamadas devem especificar a \_ \_ mídia de resolução MF no parâmetro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="7d176-127">These calls must specify MF\_RESOLUTION\_MEDIASOURCE in *dwFlags* parameter.</span></span> <span data-ttu-id="7d176-128">Para obter mais informações sobre como usar esse sinalizador, consulte usando o resolvedor de origem.</span><span class="sxs-lookup"><span data-stu-id="7d176-128">For more information about using this flag, see Using the Source Resolver.</span></span>

<span data-ttu-id="7d176-129">Se o aplicativo especificar uma URL, para um arquivo local, a cadeia de caracteres da URL poderá conter o caminho do arquivo de mídia ou poderá ser prefixada com o esquema "file:".</span><span class="sxs-lookup"><span data-stu-id="7d176-129">If the application specifies a URL, for a local file, the URL string can contain the path of the media file or can be prefixed with the “file: “scheme.</span></span> <span data-ttu-id="7d176-130">A extensão de nome de arquivo deve ser ". ASF", ". WM", L ". WMA" ou ". wmv".</span><span class="sxs-lookup"><span data-stu-id="7d176-130">The file name extension must be ".asf", ".wm", L".wma", or ".wmv".</span></span> <span data-ttu-id="7d176-131">Para um arquivo ASF na rede, o resolvedor de origem cria a [origem da rede](network-source-features.md), que usa a fonte de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-131">For an ASF file on the network, the source resolver creates the [Network Source](network-source-features.md), which uses the ASF media source.</span></span>

<span data-ttu-id="7d176-132">Durante o processo de criação de objeto, o resolvedor de origem pesquisa a lista de manipuladores de esquema e os manipuladores de fluxo de bytes no registro do sistema e carrega o manipulador de correspondência mais próximo que pode analisar o conteúdo de mídia e também criar o objeto de origem de mídia abaixo.</span><span class="sxs-lookup"><span data-stu-id="7d176-132">During the object creation process, the source resolver looks up the list of scheme handlers and the byte stream handlers in the system registry and loads the closest matching handler that can parse the media content and also create the media source object underneath.</span></span> <span data-ttu-id="7d176-133">Independentemente do método usado para criar a origem da mídia (URL e fluxo de bytes), o resolvedor de origem cria um fluxo de bytes e lê o conteúdo da mídia de origem no fluxo de bytes.</span><span class="sxs-lookup"><span data-stu-id="7d176-133">Irrespective of the method used to create the media source (URL and byte stream), the source resolver creates a byte stream and reads the contents of source media into the byte stream.</span></span> <span data-ttu-id="7d176-134">Para obter mais informações, consulte [manipuladores de esquema e manipuladores de Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-134">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="7d176-135">Para obter um exemplo de código sobre como criar uma fonte de mídia, consulte [usando o resolvedor de origem](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-135">For code example about how to create a media source, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

## <a name="configuration-settings-for-the-asf-media-source"></a><span data-ttu-id="7d176-136">Definições de configuração para a origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-136">Configuration Settings for the ASF Media Source</span></span>

<span data-ttu-id="7d176-137">O resolvedor de origem consulta os recursos do fluxo de bytes subjacente e determina que as operações são permitidas na fonte de mídia recém-criada.</span><span class="sxs-lookup"><span data-stu-id="7d176-137">The source resolver queries for the capabilities of the underlying byte stream and determines the operations are allowed on the newly created media source.</span></span> <span data-ttu-id="7d176-138">Um desses recursos está procurando.</span><span class="sxs-lookup"><span data-stu-id="7d176-138">One of such capabilities is seeking.</span></span> <span data-ttu-id="7d176-139">Se uma operação de busca for permitida, o aplicativo poderá especificar o modo de busca que a fonte de mídia usa ao procurar um ponto específico na apresentação.</span><span class="sxs-lookup"><span data-stu-id="7d176-139">If a seek operation is allowed, the application can specify the seeking mode that the media source uses while seeking to a particular point in the presentation.</span></span>

<span data-ttu-id="7d176-140">Um aplicativo pode definir o modo de busca para a origem de mídia a ser usada, durante a criação do objeto.</span><span class="sxs-lookup"><span data-stu-id="7d176-140">An application can set the seek mode, for the media source to use, during object creation.</span></span> <span data-ttu-id="7d176-141">Depois que a fonte de mídia do ASF é criada com o modo de busca especificado, ela não pode ser modificada na origem da mídia ou alterada dinamicamente durante uma apresentação.</span><span class="sxs-lookup"><span data-stu-id="7d176-141">After the ASF media source is created with the specified seek mode, it cannot be modified on the media source or dynamically changed during a presentation.</span></span> <span data-ttu-id="7d176-142">As preferências de busca são especificadas como propriedades na chamada do aplicativo para os métodos do resolvedor de origem relevantes que são usados para criar a origem da mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-142">Seeking preferences are specified as properties in the application’s call to the relevant source resolver methods that are used to create the media source.</span></span> <span data-ttu-id="7d176-143">Esses conjuntos de propriedades são definidos em um repositório de propriedades e passados para o parâmetro *pProps* .</span><span class="sxs-lookup"><span data-stu-id="7d176-143">These set of properties are set in a property store and passed to the *pProps* parameter.</span></span> <span data-ttu-id="7d176-144">Se essas propriedades não forem passadas, a origem da mídia funcionará com as configurações padrão.</span><span class="sxs-lookup"><span data-stu-id="7d176-144">If these properties are not passed, the media source functions with the default settings.</span></span> <span data-ttu-id="7d176-145">Para obter mais informações sobre como definir essas propriedades, consulte [Configurando uma origem de mídia](configuring-a-media-source.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-145">For more information about setting these properties, see [Configuring a Media Source](configuring-a-media-source.md).</span></span>

<span data-ttu-id="7d176-146">Se a busca for permitida, a origem da mídia ASF dará suporte aos seguintes modos de busca:</span><span class="sxs-lookup"><span data-stu-id="7d176-146">If seeking is allowed, the ASF media source supports the following seek modes:</span></span>

-   <span data-ttu-id="7d176-147">Busca exata: nesse modo, a fonte de mídia ASF depende do objeto de índice ASF do arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-147">Exact seeking: In this mode, the ASF media source relies on the ASF Index Object of the ASF file.</span></span> <span data-ttu-id="7d176-148">Se o arquivo não tiver o objeto index, a busca exata será desabilitada e um dos outros modos será usado dependendo das propriedades especificadas pelo aplicativo que são definidas na origem da mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-148">If the file does not have the Index Object, exact seeking is disabled and one of the other modes are used depending on the application-specified properties that are set on the media source.</span></span>
-   <span data-ttu-id="7d176-149">Busca aproximada: esse modo é solicitado pelo aplicativo passando [**MFPKEY \_ ASFMediaSource \_ ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) no repositório de propriedades para os métodos relevantes do resolvedor de origem.</span><span class="sxs-lookup"><span data-stu-id="7d176-149">Approximate seeking: This mode is requested by the application by passing [**MFPKEY\_ASFMediaSource\_ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) in the property store to the relevant source resolver methods.</span></span> <span data-ttu-id="7d176-150">No entanto, a busca aproximada só será usada se o fluxo de bytes não oferecer suporte à busca baseada em tempo.</span><span class="sxs-lookup"><span data-stu-id="7d176-150">However, approximate seeking is only used if the byte stream does not support time-based seeking.</span></span> <span data-ttu-id="7d176-151">Nesse modo, a origem da mídia determina uma hora de início relativamente mais próxima ao tempo de busca.</span><span class="sxs-lookup"><span data-stu-id="7d176-151">In this mode, the media source determine a start time that is relatively closer to the seek time.</span></span> <span data-ttu-id="7d176-152">Se o arquivo ASF contiver um objeto de índice ASF, ele será usado para calcular a hora de início.</span><span class="sxs-lookup"><span data-stu-id="7d176-152">If the ASF file contains an ASF Index Object, it is used to calculate the start time.</span></span> <span data-ttu-id="7d176-153">A busca aproximada é menos precisa, mas mais rápida que a busca exata, pois o tempo gasto processa o primeiro exemplo na hora de início predeterminada é mais rápido.</span><span class="sxs-lookup"><span data-stu-id="7d176-153">Approximate seeking is less accurate but faster than exact seeking because the time taken render the first sample at the predetermined start time is faster.</span></span>
-   <span data-ttu-id="7d176-154">Busca iterativa: para definir esse modo, o aplicativo deve definir a propriedade [MFPKEY \_ ASFMediaSource \_ IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) .</span><span class="sxs-lookup"><span data-stu-id="7d176-154">Iterative seeking: To set this mode, the application must set the [MFPKEY\_ASFMediaSource\_IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) property.</span></span> <span data-ttu-id="7d176-155">A busca iterativa é um algoritmo para encontrar uma posição em um arquivo ASF que não contém nenhum objeto de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-155">Iterative seeking is an algorithm to find a position in an ASF file that contains no ASF Index Object.</span></span> <span data-ttu-id="7d176-156">Nesse modo, a origem da mídia determina uma estimativa aproximada do ponto de busca, lendo o deslocamento do fluxo de bytes.</span><span class="sxs-lookup"><span data-stu-id="7d176-156">In this mode, the media source determins a rough estimate of the seek point by reading the byte stream offset.</span></span> <span data-ttu-id="7d176-157">Ele usa uma série de aproximações, com base na taxa média de bits, para ficar progressivamente mais próximo do tempo de busca de destino.</span><span class="sxs-lookup"><span data-stu-id="7d176-157">It uses a series of approximations, based on the average bit rate, to get progressively closer to the target seek time.</span></span> <span data-ttu-id="7d176-158">(O algoritmo é semelhante a uma pesquisa binária.) A busca iterativa pode levar mais tempo do que a busca por meio do objeto index, portanto, ela está desabilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="7d176-158">(The algorithm is similar to a binary search.) Iterative seeking can take longer than seeking by using the Index Object, so it is disabled by default.</span></span> <span data-ttu-id="7d176-159">Se você definir essa propriedade, use as seguintes propriedades para definir os parâmetros de pesquisa: [MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ Max \_ Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ tolerante \_ em \_ milissegundo](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-159">If you set this property, use the following properties to set the search parameters: [MFPKEY\_ASFMediaSource\_IterativeSeek\_Max\_Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY\_ASFMediaSource\_IterativeSeek\_Tolerance\_In\_MilliSecond](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span></span> <span data-ttu-id="7d176-160">Essas propriedades definem o número máximo de iterações e a tolerância, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="7d176-160">These properties set the maximum number of iterations and the tolerance, respectively.</span></span> <span data-ttu-id="7d176-161">O algoritmo é interrompido quando atinge o número máximo de iterações ou quando encontra um pacote cuja distância do tempo de busca está dentro da tolerância especificada.</span><span class="sxs-lookup"><span data-stu-id="7d176-161">The algorithm halts when it reaches the maximum number of iterations, or when it finds a packet whose distance from the seek time is within the specified tolerance.</span></span>

<span data-ttu-id="7d176-162">Resumindo, o aplicativo tem a opção de escolher a busca aproximada ou iterativa quando o arquivo ASF não contém um objeto de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-162">In a nutshell, the application has the option of choosing approximate or iterative seeking when the ASF file does not contain an ASF Index Object.</span></span>

## <a name="asf-media-source-object-model"></a><span data-ttu-id="7d176-163">Modelo de objeto de origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-163">ASF Media Source Object Model</span></span>

<span data-ttu-id="7d176-164">A origem de mídia do ASF implementa a interface [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) e expõe as interfaces a seguir.</span><span class="sxs-lookup"><span data-stu-id="7d176-164">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface and exposes the following interfaces.</span></span> <span data-ttu-id="7d176-165">Um aplicativo pode obter uma referência a essas interfaces chamando **IMFMediaSource:: QueryInterface** na fonte de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-165">An application can get a reference to these interfaces by calling **IMFMediaSource::QueryInterface** on the ASF media source.</span></span>



| <span data-ttu-id="7d176-166">Interface</span><span class="sxs-lookup"><span data-stu-id="7d176-166">Interface</span></span>                                                | <span data-ttu-id="7d176-167">Descrição</span><span class="sxs-lookup"><span data-stu-id="7d176-167">Description</span></span>                                                                                                                                        |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7d176-168">**IMFMediaSource**</span><span class="sxs-lookup"><span data-stu-id="7d176-168">**IMFMediaSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource)                 | <span data-ttu-id="7d176-169">Necessário para todas as fontes de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-169">Required for all media sources.</span></span>                                                                                                                    |
| [<span data-ttu-id="7d176-170">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="7d176-170">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="7d176-171">Necessário para todas as fontes de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-171">Required for all media sources.</span></span> <span data-ttu-id="7d176-172">Permite que os aplicativos obtenham eventos da origem da mídia por meio da sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-172">Allows applications to get events from the media source through the Media Session.</span></span>                                 |
| [<span data-ttu-id="7d176-173">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="7d176-173">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="7d176-174">Consulta a origem da mídia para a interface de serviço especificada.</span><span class="sxs-lookup"><span data-stu-id="7d176-174">Queries the media source for the specified service interface.</span></span>                                                                                      |
| [<span data-ttu-id="7d176-175">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="7d176-175">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore)               | <span data-ttu-id="7d176-176">Define e obtém as propriedades na origem da mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-176">Sets and gets properties on the media source.</span></span> <span data-ttu-id="7d176-177">Cada propriedade contém um nome descritivo e um valor.</span><span class="sxs-lookup"><span data-stu-id="7d176-177">Each property contains a descriptive name and a value.</span></span>                                               |
| [<span data-ttu-id="7d176-178">**IMFMetadata**</span><span class="sxs-lookup"><span data-stu-id="7d176-178">**IMFMetadata**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadata)                       | <span data-ttu-id="7d176-179">Descreve os metadados para o arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-179">Describes the metadata for the ASF file.</span></span>                                                                                                           |
| [<span data-ttu-id="7d176-180">**IMFMetadataProvider**</span><span class="sxs-lookup"><span data-stu-id="7d176-180">**IMFMetadataProvider**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider)       | <span data-ttu-id="7d176-181">Recupera uma coleção de metadados, seja para uma apresentação inteira ou para um fluxo na apresentação.</span><span class="sxs-lookup"><span data-stu-id="7d176-181">Retrieves a collection of metadata, either for an entire presentation, or for one stream in the presentation.</span></span>                                      |
| [<span data-ttu-id="7d176-182">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="7d176-182">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport)                 | <span data-ttu-id="7d176-183">Consulta o intervalo de taxas de reprodução com suporte, incluindo reprodução reversa.</span><span class="sxs-lookup"><span data-stu-id="7d176-183">Queries the range of playback rates that are supported, including reverse playback.</span></span>                                                                |
| [<span data-ttu-id="7d176-184">**IMFRateControl**</span><span class="sxs-lookup"><span data-stu-id="7d176-184">**IMFRateControl**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)                 | <span data-ttu-id="7d176-185">Obtém ou define a taxa de reprodução.</span><span class="sxs-lookup"><span data-stu-id="7d176-185">Gets or sets the playback rate.</span></span>                                                                                                                    |
| [<span data-ttu-id="7d176-186">**IMFTrustedInput**</span><span class="sxs-lookup"><span data-stu-id="7d176-186">**IMFTrustedInput**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftrustedinput)               | <span data-ttu-id="7d176-187">Obtém o ITA para cada um dos fluxos de ASF contidos na origem.</span><span class="sxs-lookup"><span data-stu-id="7d176-187">Gets the ITA for each of the ASF streams contained in the source.</span></span>                                                                                  |
| [<span data-ttu-id="7d176-188">**IMFPMPClient**</span><span class="sxs-lookup"><span data-stu-id="7d176-188">**IMFPMPClient**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient)                     | <span data-ttu-id="7d176-189">Permite que uma fonte de mídia receba um ponteiro para a interface [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) , que é usada para criar objetos no processo do PMP.</span><span class="sxs-lookup"><span data-stu-id="7d176-189">Enables a media source to receive a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, which is used to create objects in the PMP process.</span></span> |
| [<span data-ttu-id="7d176-190">**IMFTimecodeTranslate**</span><span class="sxs-lookup"><span data-stu-id="7d176-190">**IMFTimecodeTranslate**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate)     | <span data-ttu-id="7d176-191">Converte entre os códigos de tempo da sociedade de imagem de movimento e dos engenheiros de televisão (SMPTE) e as unidades de hora de 100-nanossegundos.</span><span class="sxs-lookup"><span data-stu-id="7d176-191">Converts between Society of Motion Picture and Television Engineers (SMPTE) time codes and 100-nanosecond time units.</span></span>                              |



 

## <a name="asf-media-source-services"></a><span data-ttu-id="7d176-192">Serviços de origem de mídia ASF</span><span class="sxs-lookup"><span data-stu-id="7d176-192">ASF Media Source Services</span></span>

<span data-ttu-id="7d176-193">A fonte de mídia do ASF fornece vários serviços com escopo para o arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-193">The ASF media source provides various services that are scoped for ASF file.</span></span> <span data-ttu-id="7d176-194">Para obter um ponteiro para um serviço específico, o aplicativo deve usar um dos seguintes identificadores de serviço em sua chamada para [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span><span class="sxs-lookup"><span data-stu-id="7d176-194">To get a pointer to a particular service, the application must use one of the following service identifiers in its call to [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span></span> <span data-ttu-id="7d176-195">Para obter informações, consulte [interfaces de serviço](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-195">For information, see [Service Interfaces](service-interfaces.md).</span></span>



| <span data-ttu-id="7d176-196">Identificador de serviço</span><span class="sxs-lookup"><span data-stu-id="7d176-196">Service Identifier</span></span>               | <span data-ttu-id="7d176-197">Descrição</span><span class="sxs-lookup"><span data-stu-id="7d176-197">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7d176-198">\_serviço de \_ controle de taxa MF \_</span><span class="sxs-lookup"><span data-stu-id="7d176-198">MF\_RATE\_CONTROL\_SERVICE</span></span>       | <span data-ttu-id="7d176-199">Usando esse identificador, um aplicativo pode obter um ponteiro para as interfaces [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) ou [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) .</span><span class="sxs-lookup"><span data-stu-id="7d176-199">By using this identifier, an application can get a pointer to either [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) or [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) interfaces.</span></span> <span data-ttu-id="7d176-200">Usando o objeto de suporte de taxa implementado pela origem de mídia, o aplicativo pode verificar se uma taxa específica tem suporte pelo arquivo de mídia ASF subjacente também obtém a taxa mais rápida e mais lenta.</span><span class="sxs-lookup"><span data-stu-id="7d176-200">By using the rate support object implemented by the media source, the application can check if a particular rate is supported by the underlying ASF media file also get the fastest and the slowest rate.</span></span> <span data-ttu-id="7d176-201">Usando o objeto de controle de taxa, o aplicativo pode obter e definir a taxa de reprodução.</span><span class="sxs-lookup"><span data-stu-id="7d176-201">By using the rate control object the application can get and set the playback rate.</span></span> <span data-ttu-id="7d176-202">Se o aplicativo especificar uma taxa específica para reprodução, a origem de mídia ASF primeiro verificará se a taxa solicitada está dentro dos limites de taxa (determinado pelas tarifas mais lentas e mais baixas) e, em seguida, definirá a taxa.</span><span class="sxs-lookup"><span data-stu-id="7d176-202">If the application specifies a particular rate for playback, the ASF media source first checks if the requested rate is within the rate limits (determined by fasted and slowest rates) and then sets the rate.</span></span> <span data-ttu-id="7d176-203">Isso não verifica as condições variáveis, pois a taxa de bits pode mudar a qualquer momento, dependendo da largura de banda da rede.</span><span class="sxs-lookup"><span data-stu-id="7d176-203">This does not check for variable conditions as the bitrate might change any moment depending on the network bandwidth.</span></span> <span data-ttu-id="7d176-204">Para obter mais informações, [controle de taxa](rate-control.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-204">For more information, [Rate Control](rate-control.md).</span></span> |
| <span data-ttu-id="7d176-205">\_serviço do \_ provedor de metadados MF \_</span><span class="sxs-lookup"><span data-stu-id="7d176-205">MF\_METADATA\_PROVIDER\_SERVICE</span></span>  | <span data-ttu-id="7d176-206">Usando esse identificador, o aplicativo pode obter um ponteiro para a interface [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) da fonte de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-206">By using this identifier, the application can get a pointer to the [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) interface of the ASF media source.</span></span> <span data-ttu-id="7d176-207">Essa interface fornece acesso a informações sobre o arquivo ASF especificamente os objetos de cabeçalho ASF e os fluxos contidos no conteúdo de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-207">This interface provides access to information about ASF file specifically the ASF Header Objects and the streams contained within the media content.</span></span> <span data-ttu-id="7d176-208">As informações de cabeçalho são expostas por meio de atributos de descritor de apresentação e as informações de fluxo são fornecidas por meio de atributos</span><span class="sxs-lookup"><span data-stu-id="7d176-208">Header information is exposes through presentation descriptor attributes and stream information is provided through stream descriptor attributes.</span></span> <span data-ttu-id="7d176-209">Para obter mais informações sobre esses atributos, consulte [atributos de Media Foundation para objetos de cabeçalho ASF](media-foundation-attributes-for-asf-header-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-209">For more information about these attributes, see [Media Foundation Attributes for ASF Header Objects](media-foundation-attributes-for-asf-header-objects.md).</span></span> <span data-ttu-id="7d176-210">Além das informações expostas por meio de atributos, também existem metadados descritivos, que são definidos como propriedades.</span><span class="sxs-lookup"><span data-stu-id="7d176-210">In addition to information that is exposed through attributes, there also exists descriptive metadata, which are set as properties.</span></span>                                                                                                 |
| <span data-ttu-id="7d176-211">\_serviço de \_ manipulador de propriedades MF \_</span><span class="sxs-lookup"><span data-stu-id="7d176-211">MF\_PROPERTY\_HANDLER\_SERVICE</span></span>   | <span data-ttu-id="7d176-212">Usando esse identificador, o aplicativo pode obter um ponteiro para a interface [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) da fonte de mídia do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-212">By using this identifier, the application can get a pointer to the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface of the ASF media source.</span></span> <span data-ttu-id="7d176-213">O armazenamento de propriedades contém todos os metadados relacionados ao arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-213">The property store contains all the metadata related to the ASF file.</span></span> <span data-ttu-id="7d176-214">Esse identificador é novo no Windows 7 e substitui o \_ \_ \_ serviço de provedor de metadados MF para obter propriedades de metadados.</span><span class="sxs-lookup"><span data-stu-id="7d176-214">This identifier is new in Windows 7 and replaces MF\_METADATA\_PROVIDER\_SERVICE for getting metadata properties.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="7d176-215">\_serviço de estatísticas do MFNETSOURCE \_</span><span class="sxs-lookup"><span data-stu-id="7d176-215">MFNETSOURCE\_STATISTICS\_SERVICE</span></span> | <span data-ttu-id="7d176-216">Para obter mais informações, consulte Recuperando estatísticas de rede no [log do cliente](client-logging.md).</span><span class="sxs-lookup"><span data-stu-id="7d176-216">For more information, see Retrieving Network Statistics in [Client Logging](client-logging.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="7d176-217">\_serviço de código de caso MF \_</span><span class="sxs-lookup"><span data-stu-id="7d176-217">MF\_TIMECODE\_SERVICE</span></span>            | <span data-ttu-id="7d176-218">Usando esse identificador, o aplicativo pode obter um ponteiro para a interface [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) da fonte de mídia.</span><span class="sxs-lookup"><span data-stu-id="7d176-218">By using this identifier, the application can get a pointer to the media source’s [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface.</span></span> <span data-ttu-id="7d176-219">Essa implementação pode ser usada para executar traduções de código de tempo, como converter o código de tempo SMPTE para unidades de 100 e Nanos Second e voltar.</span><span class="sxs-lookup"><span data-stu-id="7d176-219">This implementation can be used to perform time code translations such as converting SMPTE time code to 100-nano second units and back.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="timecode-translation"></a><span data-ttu-id="7d176-220">Conversão de código de</span><span class="sxs-lookup"><span data-stu-id="7d176-220">Timecode Translation</span></span>

<span data-ttu-id="7d176-221">A fonte de mídia do ASF fornece um serviço de conversão de código de tempo que permite que seu aplicativo converta o código de tempo SMPTE para o tempo de apresentação mais próximo (na unidade de 100 a nanossegundos).</span><span class="sxs-lookup"><span data-stu-id="7d176-221">The ASF media source provides a time code translation service that allows your application to convert SMPTE time code to the closest presentation time (in 100-nanosecond unit).</span></span> <span data-ttu-id="7d176-222">Por outro lado, o aplicativo também pode obter o código de tempo para um tempo de apresentação solicitado.</span><span class="sxs-lookup"><span data-stu-id="7d176-222">Conversely, the application can also get the time code for a requested presentation time.</span></span> <span data-ttu-id="7d176-223">O serviço está disponível por meio da interface [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) , que a origem de mídia do ASF implementa.</span><span class="sxs-lookup"><span data-stu-id="7d176-223">The service is available through the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface, which the ASF media source implements.</span></span> <span data-ttu-id="7d176-224">As chamadas de método nesse ponteiro de interface são assíncronas que podem ser executadas de seu thread de aplicativo principal sem bloquear a interface do usuário do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7d176-224">The method calls on this interface pointer are asynchronous that can run from your main application thread without blocking the user interface of your application.</span></span>

<span data-ttu-id="7d176-225">As etapas a seguir resumem o procedimento para conversão de código de tempo:</span><span class="sxs-lookup"><span data-stu-id="7d176-225">The following steps summarize the procedure for time code translation:</span></span>

1.  <span data-ttu-id="7d176-226">Obtenha o ponteiro para a interface [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) da fonte de mídia do ASF chamando [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) e especificando o identificador do **\_ \_ serviço de código** de execução MF.</span><span class="sxs-lookup"><span data-stu-id="7d176-226">Get pointer to the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface of the ASF media source by calling [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) and specifying the **MF\_TIMECODE\_SERVICE** identifier.</span></span>
2.  <span data-ttu-id="7d176-227">Chame [**IMFTimecodeTranslate:: BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) ou [**IMFTimecodeTranslate:: BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) e especifique o tempo que deve ser traduzido.</span><span class="sxs-lookup"><span data-stu-id="7d176-227">Call [**IMFTimecodeTranslate::BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) or [**IMFTimecodeTranslate::BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) and specify the time that is to be translated..</span></span> <span data-ttu-id="7d176-228">Para **BeginConvertTimecodeToHNS** , o código de tempo deve ser especificado como uma variável [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) com o tipo de dados **VT \_ i8** .</span><span class="sxs-lookup"><span data-stu-id="7d176-228">For **BeginConvertTimecodeToHNS** the time code must be specified as a [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) variable with **VT\_I8** data type.</span></span> <span data-ttu-id="7d176-229">O método **BeginConvertHNSToTimecode** requer o tempo em unidades de 100 nanossegundos como o tipo [**MFTIME**](mftime.md) .</span><span class="sxs-lookup"><span data-stu-id="7d176-229">The **BeginConvertHNSToTimecode** method requires the time in 100-nanosecond units as the [**MFTIME**](mftime.md) type.</span></span>
3.  <span data-ttu-id="7d176-230">Conclua a operação assíncrona chamando [**IMFTimecodeTranslate:: EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) ou **IMFTimecodeTranslate:: EndConvertTimecodeToHNS** adequadamente.</span><span class="sxs-lookup"><span data-stu-id="7d176-230">Complete the asynchronous operation by calling [**IMFTimecodeTranslate::EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) or **IMFTimecodeTranslate::EndConvertTimecodeToHNS** appropriately.</span></span>

<span data-ttu-id="7d176-231">Durante a criação da origem de mídia, o resolvedor de origem cria um fluxo de bytes para o arquivo do qual a origem da mídia lê o conteúdo do ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-231">During the creation of the media source, the source resolver creates a byte stream for the file from which the media source reads the ASF content.</span></span> <span data-ttu-id="7d176-232">Para que as conversões de tempo sejam bem-sucedidas, o fluxo de bytes associado ao arquivo ASF deve ter recursos de busca; caso contrário, o aplicativo obterá \_ o \_ erro MF E bytes \_ não \_ pesquisável da chamada **begin...** .</span><span class="sxs-lookup"><span data-stu-id="7d176-232">In order for the time conversions to be successful, the byte stream associated with the ASF file must have seeking capabilities; otherwise, the application gets the MF\_E\_BYTESTREAM\_NOT\_SEEKABLE error from the **Begin...** call.</span></span> <span data-ttu-id="7d176-233">Outro requisito de conversões de tempo é que o arquivo ASF, representado pela fonte de mídia do ASF, deve ter objetos de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-233">Another requirement for time conversions is that the ASF file, represented by the ASF media source, must have ASF Index Objects.</span></span> <span data-ttu-id="7d176-234">Os tempos de apresentação e os códigos de tempo são extraídos dos objetos de índice ASF que mantêm todos os índices e os pontos de busca correspondentes para o arquivo ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-234">The presentation times and the time codes are extracted from the ASF Index Objects that maintain all the indexes and the corresponding seek- points for the ASF file.</span></span> <span data-ttu-id="7d176-235">Para a conversão de código em tempo de apresentação, o arquivo ASF deve conter um objeto de índice simples; para a conversão de tempo de código para a apresentação, o arquivo ASF deve ter um objeto index.</span><span class="sxs-lookup"><span data-stu-id="7d176-235">For presentation time-to-time code translation, the ASF file must contain a Simple Index Object; for time code-to-presentation time translation, the ASF file must have an Index Object.</span></span> <span data-ttu-id="7d176-236">As operações de conversão dependem do *indexador* subjacente (componente WMContainer) para analisar e ler o objeto de índice associado ao arquivo asf.</span><span class="sxs-lookup"><span data-stu-id="7d176-236">The conversion operations rely on the underlying *indexer* (WMContainer component) to parse and read the Index Object associated with the ASF file.</span></span> <span data-ttu-id="7d176-237">Se o arquivo não contiver um objeto de índice, o aplicativo receberá de forma assíncrona o \_ código de erro MF E \_ no \_ index.</span><span class="sxs-lookup"><span data-stu-id="7d176-237">If the file does not contain an Index Object, the application asynchronously receives the MF\_E\_NO\_INDEX error code.</span></span>

<span data-ttu-id="7d176-238">Para converter o tempo solicitado pelo aplicativo, a origem da mídia enumera os fluxos dentro do arquivo e localiza o fluxo que contém o objeto de índice ASF apropriado.</span><span class="sxs-lookup"><span data-stu-id="7d176-238">To translate the time requested by the application, the media source enumerates the streams within the file and finds the stream that contains the appropriate ASF Index Object.</span></span> <span data-ttu-id="7d176-239">Se esse fluxo for encontrado, a fonte de mídia analisa os pacotes ASF do fluxo são analisados até que o código de tempo correto seja atingido.</span><span class="sxs-lookup"><span data-stu-id="7d176-239">If such a stream is found, the media source parses the stream’s ASF packets are parsed until the correct time code is reached.</span></span> <span data-ttu-id="7d176-240">Depois de encontrar o exemplo correto, ele recupera o tempo de apresentação correspondente ou o código de tempo do exemplo e o retorna ao chamador.</span><span class="sxs-lookup"><span data-stu-id="7d176-240">After it finds the correct sample it retrieves the corresponding presentation time or the time code from the sample, and returns it to the caller.</span></span>

### <a name="script-command-support"></a><span data-ttu-id="7d176-241">Suporte a comandos de script</span><span class="sxs-lookup"><span data-stu-id="7d176-241">Script Command Support</span></span>

<span data-ttu-id="7d176-242">Quando você cria uma topologia de ASF que contém um fluxo de script, um nó de fluxo de script é adicionado à topologia.</span><span class="sxs-lookup"><span data-stu-id="7d176-242">When you build an ASF topology that contains a script stream a Script Stream node is added to the topology.</span></span> <span data-ttu-id="7d176-243">Esse nó enviará IMFSamples no momento apropriado.</span><span class="sxs-lookup"><span data-stu-id="7d176-243">This node will send IMFSamples at the appropriate time.</span></span> <span data-ttu-id="7d176-244">O IMFSample fornecido pelo nó de origem do script armazena os dados no IMFMediaBuffer associado ao exemplo.</span><span class="sxs-lookup"><span data-stu-id="7d176-244">The IMFSample provided by the script source node stores the data in the IMFMediaBuffer associated with the sample.</span></span> <span data-ttu-id="7d176-245">Você pode chamar CopyToBuffer no exemplo para obter um IMFMediaBuffer e, em seguida, chamar o bloqueio no buffer para obter os dados.</span><span class="sxs-lookup"><span data-stu-id="7d176-245">You can call CopyToBuffer on the sample to get an IMFMediaBuffer and then call Lock on the buffer to get the data.</span></span> 

<span data-ttu-id="7d176-246">Cargas de fluxo de script são empacotadas no buffer como uma cadeia de caracteres de tipo, seguido por NULL, seguidos pela cadeia de caracteres de comando, seguido por NULL.</span><span class="sxs-lookup"><span data-stu-id="7d176-246">Script stream payloads are packed into the buffer as a type string, followed by NULL, followed by the command string, followed by NULL.</span></span> <span data-ttu-id="7d176-247">As cadeias de caracteres são Unicode no formato ASF.</span><span class="sxs-lookup"><span data-stu-id="7d176-247">Strings are Unicode in the ASF format.</span></span>

<span data-ttu-id="7d176-248">Por exemplo, uma carga pode ser parecida com a seguinte (onde \ 0 indica um caractere nulo):</span><span class="sxs-lookup"><span data-stu-id="7d176-248">For example, a payload might look like the following (where \0 indicates a NULL character):</span></span>

<span data-ttu-id="7d176-249">*URL\0http://contoso.com\0*</span><span class="sxs-lookup"><span data-stu-id="7d176-249">*URL\0http://contoso.com\0*</span></span>

<span data-ttu-id="7d176-250">*Text\0This é um caption\0*</span><span class="sxs-lookup"><span data-stu-id="7d176-250">*Text\0This is a caption\0*</span></span>



## <a name="related-topics"></a><span data-ttu-id="7d176-251">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7d176-251">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7d176-252">Componentes ASF da camada de pipeline</span><span class="sxs-lookup"><span data-stu-id="7d176-252">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="7d176-253">Suporte a ASF no Media Foundation</span><span class="sxs-lookup"><span data-stu-id="7d176-253">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
