---
description: Sobre topologias
ms.assetid: 4f69b099-0ca7-4ea6-8412-0f1ea02e1600
title: Sobre topologias
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35008d839e8054554370039dd13297ae7a1f0b0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104557310"
---
# <a name="about-topologies"></a><span data-ttu-id="4e90e-103">Sobre topologias</span><span class="sxs-lookup"><span data-stu-id="4e90e-103">About Topologies</span></span>

<span data-ttu-id="4e90e-104">Uma topologia é um objeto que representa como os dados fluem no pipeline.</span><span class="sxs-lookup"><span data-stu-id="4e90e-104">A topology is an object that represents how data flows in the pipeline.</span></span> <span data-ttu-id="4e90e-105">Um aplicativo cria uma topologia para descrever o caminho que cada fluxo pega da origem de mídia para um coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-105">An application creates a topology to describe the path that each stream takes from the media source to a media sink.</span></span> <span data-ttu-id="4e90e-106">O aplicativo passa a topologia para a sessão de mídia e a sessão de mídia usa a topologia para controlar o fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="4e90e-106">The application passes the topology to the Media Session, and the Media Session uses the topology to control the data flow.</span></span>

<span data-ttu-id="4e90e-107">Os componentes de processamento de dados no pipeline (fontes de mídia, transformações e coletores de mídia) são representados na topologia como *nós*.</span><span class="sxs-lookup"><span data-stu-id="4e90e-107">The data-processing components in the pipeline (media sources, transforms, and media sinks) are represented in the topology as *nodes*.</span></span> <span data-ttu-id="4e90e-108">O fluxo de dados de um componente para outro é representado por uma conexão entre os nós.</span><span class="sxs-lookup"><span data-stu-id="4e90e-108">The flow of data from one component to another is represented by a connection between the nodes.</span></span> <span data-ttu-id="4e90e-109">Os seguintes tipos de nó são definidos:</span><span class="sxs-lookup"><span data-stu-id="4e90e-109">The following node types are defined:</span></span>

-   <span data-ttu-id="4e90e-110">Nó de origem: representa um fluxo de mídia em uma origem de mídia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-110">Source node: Represents a media stream on a media source.</span></span>
-   <span data-ttu-id="4e90e-111">Nó de transformação: representa uma Media Foundation de transformação (MFT).</span><span class="sxs-lookup"><span data-stu-id="4e90e-111">Transform node: Represents a Media Foundation transform (MFT).</span></span>
-   <span data-ttu-id="4e90e-112">Nó de saída: representa um coletor de fluxo em um coletor de mídia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-112">Output node: Represents a stream sink on a media sink.</span></span>
-   <span data-ttu-id="4e90e-113">Nó de "t": representa uma bifurcação no fluxo.</span><span class="sxs-lookup"><span data-stu-id="4e90e-113">Tee node: Represents a fork in the stream.</span></span> <span data-ttu-id="4e90e-114">Os nós de "t" são uma exceção à regra que um nó representa um objeto de pipeline.</span><span class="sxs-lookup"><span data-stu-id="4e90e-114">Tee nodes are an exception to the rule that a node represents a pipeline object.</span></span> <span data-ttu-id="4e90e-115">Ao contrário de outros tipos de nó, o nó de "t" simplesmente direciona o fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="4e90e-115">Unlike other node types, the tee node simply directs the flow of data.</span></span>

<span data-ttu-id="4e90e-116">Uma topologia funcional deve conter pelo menos um nó de origem conectado a um nó de saída, possivelmente por meio de um ou mais nós de transformação.</span><span class="sxs-lookup"><span data-stu-id="4e90e-116">A functioning topology must contain at least one source node connected to an output node, possibly through one or more transform nodes.</span></span> <span data-ttu-id="4e90e-117">Por exemplo, o diagrama a seguir mostra uma topologia simples com um fluxo.</span><span class="sxs-lookup"><span data-stu-id="4e90e-117">For example, the following diagram shows a simple topology with one stream.</span></span>

![um diagrama que mostra uma topologia com um fluxo.](images/topology01.png)

<span data-ttu-id="4e90e-119">Para a reprodução de arquivos, o nó de transformação pode representar um decodificador e o nó de saída representaria o processador de áudio ou vídeo.</span><span class="sxs-lookup"><span data-stu-id="4e90e-119">For file playback, the transform node might represent a decoder and the output node would represent the audio or video renderer.</span></span> <span data-ttu-id="4e90e-120">Para codificação de arquivo, o nó de transformação representaria um codificador e o nó de saída representaria um coletor de arquivo morto, como o coletor de arquivos ASF.</span><span class="sxs-lookup"><span data-stu-id="4e90e-120">For file encoding, the transform node would represent an encoder and the output node would represent an archive sink, such as the ASF file sink.</span></span>

<span data-ttu-id="4e90e-121">Se dois nós estiverem conectados, o nó que produz dados é chamado de nó *upstream* e o nó que recebe dados é chamado de nó *downstream* .</span><span class="sxs-lookup"><span data-stu-id="4e90e-121">If two nodes are connected, the node that produces data is called the *upstream* node, and the node that receives data is called the *downstream* node.</span></span> <span data-ttu-id="4e90e-122">Por exemplo, no diagrama anterior, o nó de origem é upstream a partir do nó de transformação.</span><span class="sxs-lookup"><span data-stu-id="4e90e-122">For example, in the previous diagram, the source node is upstream from the transform node.</span></span>

<span data-ttu-id="4e90e-123">Em um par de nós conectados, o ponto de conexão no nó upstream é chamado de *saída*.</span><span class="sxs-lookup"><span data-stu-id="4e90e-123">In a pair of connected nodes, the connection point on the upstream node is called an *output*.</span></span> <span data-ttu-id="4e90e-124">O ponto de conexão no nó downstream é chamado de *entrada*.</span><span class="sxs-lookup"><span data-stu-id="4e90e-124">The connection point on the downstream node is called an *input*.</span></span> <span data-ttu-id="4e90e-125">O diagrama a seguir mostra um par de nós com seus pontos de conexão e o fluxo de dados entre eles.</span><span class="sxs-lookup"><span data-stu-id="4e90e-125">The following diagram shows a pair of nodes with their connection points, and the flow of data between them.</span></span> <span data-ttu-id="4e90e-126">Os pontos de conexão não são representados como objetos separados na topologia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-126">The connection points are not represented as separate objects in the topology.</span></span> <span data-ttu-id="4e90e-127">Eles são especificados pelo valor de índice no objeto node.</span><span class="sxs-lookup"><span data-stu-id="4e90e-127">They are specified by index value on the node object.</span></span>

![um diagrama que mostra dois nós conectados.](images/topology04.png)

<span data-ttu-id="4e90e-129">Um nó de origem não pode ter nenhuma entrada.</span><span class="sxs-lookup"><span data-stu-id="4e90e-129">A source node cannot have any inputs.</span></span> <span data-ttu-id="4e90e-130">Portanto, não pode haver nenhum nó upstream a partir de uma origem.</span><span class="sxs-lookup"><span data-stu-id="4e90e-130">Therefore, there cannot be any nodes upstream from a source node.</span></span> <span data-ttu-id="4e90e-131">Da mesma forma, um nó de saída não pode ter saídas e não pode haver nós downstream de um nó de saída.</span><span class="sxs-lookup"><span data-stu-id="4e90e-131">Similarly, an output node cannot have outputs, and there cannot be any nodes downstream from an output node.</span></span> <span data-ttu-id="4e90e-132">Uma cadeia de nós de um nó de origem para um nó de saída é chamada de *ramificação* da topologia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-132">A chain of nodes from a source node to an output node is called a *branch* of the topology.</span></span> <span data-ttu-id="4e90e-133">O primeiro diagrama neste tópico mostra uma topologia com uma única ramificação.</span><span class="sxs-lookup"><span data-stu-id="4e90e-133">The first diagram in this topic shows a topology with a single branch.</span></span> <span data-ttu-id="4e90e-134">Geralmente, há uma ramificação por fluxo.</span><span class="sxs-lookup"><span data-stu-id="4e90e-134">Generally there is one branch per stream.</span></span> <span data-ttu-id="4e90e-135">Para reproduzir um arquivo com um fluxo de áudio e um fluxo de vídeo, por exemplo, requer uma topologia com duas ramificações.</span><span class="sxs-lookup"><span data-stu-id="4e90e-135">To play a file with one audio stream and one video stream, for example, requires a topology with two branches.</span></span>

## <a name="partial-topologies"></a><span data-ttu-id="4e90e-136">Topologias parciais</span><span class="sxs-lookup"><span data-stu-id="4e90e-136">Partial Topologies</span></span>

<span data-ttu-id="4e90e-137">Uma topologia completa ou *completa* contém um nó para cada objeto de pipeline necessário.</span><span class="sxs-lookup"><span data-stu-id="4e90e-137">A complete or *full* topology contains a node for every pipeline object that is needed.</span></span> <span data-ttu-id="4e90e-138">No entanto, o aplicativo nem sempre precisa criar uma topologia completa.</span><span class="sxs-lookup"><span data-stu-id="4e90e-138">However, the application does not always need to create a full topology.</span></span> <span data-ttu-id="4e90e-139">Em vez disso, ele cria uma topologia *parcial* que omite um ou mais nós de transformação.</span><span class="sxs-lookup"><span data-stu-id="4e90e-139">Instead, it creates a *partial* topology that omits one or more transform nodes.</span></span>

<span data-ttu-id="4e90e-140">A sessão de mídia conclui a topologia usando um objeto chamado carregador de *topologia*.</span><span class="sxs-lookup"><span data-stu-id="4e90e-140">The Media Session completes the topology by using an object called the *topology loader*.</span></span> <span data-ttu-id="4e90e-141">O carregador de topologia converte topologias parciais em topologias completas, inserindo as transformações necessárias.</span><span class="sxs-lookup"><span data-stu-id="4e90e-141">The topology loader converts partial topologies into full topologies by inserting the needed transforms.</span></span> <span data-ttu-id="4e90e-142">O processo de conversão é chamado de *resolução* da topologia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-142">The process of conversion is called *resolving* the topology.</span></span>

<span data-ttu-id="4e90e-143">Por exemplo, para reproduzir um fluxo de áudio codificado, a topologia deve ter um decodificador entre os nós de origem e de saída.</span><span class="sxs-lookup"><span data-stu-id="4e90e-143">For example, to play an encoded audio stream, the topology must have a decoder between the source and output nodes.</span></span> <span data-ttu-id="4e90e-144">O aplicativo cria uma topologia parcial que conecta o nó de origem diretamente ao nó de saída, sem o decodificador.</span><span class="sxs-lookup"><span data-stu-id="4e90e-144">The application creates a partial topology that connects the source node directly to the output node, without the decoder.</span></span> <span data-ttu-id="4e90e-145">O carregador de topologia examina os formatos de fluxo, localiza o decodificador correto e insere um nó de transformação na topologia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-145">The topology loader examines the stream formats, finds the right decoder, and inserts a transform node into the topology.</span></span>

<span data-ttu-id="4e90e-146">O diagrama a seguir mostra a topologia parcial criada pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4e90e-146">The following diagram shows the partial topology created by the application.</span></span>

![um diagrama que mostra um parcial com um nó de origem e um nó de saída.](images/topology02.png)

<span data-ttu-id="4e90e-148">O próximo diagrama mostra a topologia completa depois que o carregador de topologia a resolve.</span><span class="sxs-lookup"><span data-stu-id="4e90e-148">The next diagram shows the full topology after the topology loader resolves it.</span></span> <span data-ttu-id="4e90e-149">Neste exemplo, o carregador de topologia inseriu um nó de transformação para o decodificador.</span><span class="sxs-lookup"><span data-stu-id="4e90e-149">In this example, the topology loader has inserted a transform node for the decoder.</span></span>

![um diagrama que mostra uma topologia completa.](images/topology03.png)

<span data-ttu-id="4e90e-151">Na versão atual do Media Foundation, o carregador de topologia dá suporte a topologias para reprodução.</span><span class="sxs-lookup"><span data-stu-id="4e90e-151">In the current version of Media Foundation, the topology loader supports topologies for playback.</span></span> <span data-ttu-id="4e90e-152">Para codificação de arquivo e outros cenários, o aplicativo deve construir uma topologia completa.</span><span class="sxs-lookup"><span data-stu-id="4e90e-152">For file encoding and other scenarios, the application must construct a full topology.</span></span>

<span data-ttu-id="4e90e-153">Os aplicativos também podem criar o carregador de topologia e usá-lo diretamente.</span><span class="sxs-lookup"><span data-stu-id="4e90e-153">Applications can also create the topology loader and use it directly.</span></span> <span data-ttu-id="4e90e-154">Por exemplo, você pode usar o carregador de topologia para resolver uma topologia parcial e, em seguida, modificar a topologia completa antes de fornecê-la à sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="4e90e-154">For example, you can use the topology loader to resolve a partial topology and then modify the full topology before giving it to the Media Session.</span></span> <span data-ttu-id="4e90e-155">Para criar o carregador de topologia, chame [**MFCreateTopoLoader**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader).</span><span class="sxs-lookup"><span data-stu-id="4e90e-155">To create the topology loader, call [**MFCreateTopoLoader**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader).</span></span>

## <a name="related-topics"></a><span data-ttu-id="4e90e-156">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="4e90e-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4e90e-157">Topologias</span><span class="sxs-lookup"><span data-stu-id="4e90e-157">Topologies</span></span>](topologies.md)
</dt> </dl>

 

 



