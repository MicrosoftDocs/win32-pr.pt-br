---
description: Descreve como adicionar extensões de unidade de dados ao usar codificadores de mídia do Windows.
ms.assetid: fdadcb85-c564-4d05-a4d7-af53a0107455
title: Usando extensões de unidade de dados (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c16053ee078f5adcd48767f53d9e6e1c0eeb02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105754083"
---
# <a name="using-data-unit-extensions-microsoft-media-foundation"></a><span data-ttu-id="bb604-103">Usando extensões de unidade de dados (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="bb604-103">Using Data Unit Extensions (Microsoft Media Foundation)</span></span>

<span data-ttu-id="bb604-104">Os codecs de áudio e vídeo do Windows Media são projetados para funcionar bem com o contêiner ASF (Advanced Systems Format).</span><span class="sxs-lookup"><span data-stu-id="bb604-104">The Windows Media Audio and Video codecs are designed to work well with the Advanced Systems Format (ASF) container.</span></span> <span data-ttu-id="bb604-105">O ASF é o formato estruturado usado para arquivos de áudio do Windows Media (WMA) e de vídeo do Windows Media (WMV).</span><span class="sxs-lookup"><span data-stu-id="bb604-105">ASF is the structured format used for Windows Media Audio (WMA) files and Windows Media Video (WMV) files.</span></span> <span data-ttu-id="bb604-106">É um formato extensível projetado para dados de streaming.</span><span class="sxs-lookup"><span data-stu-id="bb604-106">It is an extensible format designed for streaming data.</span></span> <span data-ttu-id="bb604-107">Uma das características incomuns da estrutura do ASF é a capacidade de anexar metadados a exemplos individuais e inserir esses dados com os exemplos no fluxo de bits.</span><span class="sxs-lookup"><span data-stu-id="bb604-107">One of the unusual characteristics of the ASF structure is the ability to attach metadata to individual samples, and to embed that data with the samples in the bit stream.</span></span> <span data-ttu-id="bb604-108">Um item de metadados armazenados dessa maneira é chamado de extensão de *unidade* de dados ou *extensão de exemplo*.</span><span class="sxs-lookup"><span data-stu-id="bb604-108">An item of metadata stored in this way is called a data *unit extension*, or *sample extension*.</span></span>

<span data-ttu-id="bb604-109">Uma extensão de unidade de dados pode conter informações necessárias para o codificador, o decodificador ou o aplicativo de Player.</span><span class="sxs-lookup"><span data-stu-id="bb604-109">A data unit extension can contain information that is required by the encoder, the decoder, or the player application.</span></span> <span data-ttu-id="bb604-110">A maioria dos tipos de extensão de unidade de dados que são implementados na série de codecs do Windows Media 9 contém dados destinados ao aplicativo que decodifica e renderiza a mídia.</span><span class="sxs-lookup"><span data-stu-id="bb604-110">Most of the data-unit-extension types that are implemented in the Windows Media 9 Series of codecs contain data intended for the application that decodes and renders the media.</span></span> <span data-ttu-id="bb604-111">Por exemplo, você pode manter os códigos de tempo SMPTE dos dados de origem adicionando-os como extensões de unidade de dados.</span><span class="sxs-lookup"><span data-stu-id="bb604-111">For example, you can maintain SMPTE time codes from source data by adding them as data unit extensions.</span></span> <span data-ttu-id="bb604-112">No entanto, os seguintes recursos de codec exigem extensões de unidade de dados:</span><span class="sxs-lookup"><span data-stu-id="bb604-112">However, the following codec features require data unit extensions:</span></span>

-   [<span data-ttu-id="bb604-113">Inserção de quadro-chave forçada</span><span class="sxs-lookup"><span data-stu-id="bb604-113">Forced Key Frame Insertion</span></span>](forcedkeyframeinsertion.md)
-   [<span data-ttu-id="bb604-114">Codificação de vídeo entrelaçado</span><span class="sxs-lookup"><span data-stu-id="bb604-114">Interlaced Video Encoding</span></span>](interlacedvideoencoding.md)
-   <span data-ttu-id="bb604-115">A dificuldade de usar as extensões de unidade de dados ao acessar o codec diretamente é o mecanismo pelo qual o objeto recebe os dados de extensão.</span><span class="sxs-lookup"><span data-stu-id="bb604-115">The difficulty in using data unit extensions when accessing the codec directly is the mechanism by which the object receives the extension data.</span></span> <span data-ttu-id="bb604-116">Isso é obtido pelos objetos do SDK do Windows Media Format usando objetos de buffer projetados para dar suporte a esse recurso.</span><span class="sxs-lookup"><span data-stu-id="bb604-116">This is achieved by the objects of the Windows Media Format SDK by using buffer objects designed to support this feature.</span></span> <span data-ttu-id="bb604-117">É recomendável que você use o Windows Media Format SDK para ativar os recursos de codec que exigem extensões de unidade de dados, mas você pode fazer com que esses recursos funcionem com os objetos de codec autônomos.</span><span class="sxs-lookup"><span data-stu-id="bb604-117">It is recommended that you use the Windows Media Format SDK to activate the codec features that require data unit extensions, but you can make these features work with the standalone codec objects.</span></span>

## <a name="passing-extended-samples-to-the-codec-objects"></a><span data-ttu-id="bb604-118">Passando amostras estendidas para os objetos de codec</span><span class="sxs-lookup"><span data-stu-id="bb604-118">Passing Extended Samples to the Codec Objects</span></span>

<span data-ttu-id="bb604-119">O Windows Media Format SDK usa objetos de buffer que expõem interfaces [**INSSBuffer**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) .</span><span class="sxs-lookup"><span data-stu-id="bb604-119">The Windows Media Format SDK uses buffer objects that expose [**INSSBuffer**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) interfaces.</span></span> <span data-ttu-id="bb604-120">A interface mais recente é [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span><span class="sxs-lookup"><span data-stu-id="bb604-120">The latest interface is [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span></span> <span data-ttu-id="bb604-121">Para passar amostras para um objeto de codec com extensões de unidade de dados, você deve usar um objeto de buffer que implementa a interface [**IMediaBuffer**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) ou [**IMFMediaBuffer**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) e a interface **INSSBuffer** .</span><span class="sxs-lookup"><span data-stu-id="bb604-121">To pass samples to a codec object with data unit extensions, you must use a buffer object that implements the [**IMediaBuffer**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) or [**IMFMediaBuffer**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) interface and the **INSSBuffer** interface.</span></span> <span data-ttu-id="bb604-122">Você pode usar objetos de buffer criados pelo Windows Media Format SDK ou Microsoft Media Foundation para fazer isso, ou você pode criar sua própria classe de buffer que atenda aos requisitos.</span><span class="sxs-lookup"><span data-stu-id="bb604-122">You can use buffer objects created by the Windows Media Format SDK or Microsoft Media Foundation to accomplish this, or you can make your own buffer class that meets the requirements.</span></span> <span data-ttu-id="bb604-123">Para criar sua própria classe de buffer, você deve estar em conformidade com os protótipos de método para as interfaces **INSSBuffer** .</span><span class="sxs-lookup"><span data-stu-id="bb604-123">To create your own buffer class, you must conform to the method prototypes for the **INSSBuffer** interfaces.</span></span> <span data-ttu-id="bb604-124">Essas definições de interface podem ser encontradas no arquivo de cabeçalho wmsbuffer. h que é instalado com o Windows Media Format SDK.</span><span class="sxs-lookup"><span data-stu-id="bb604-124">These interface definitions can be found in the wmsbuffer.h header file that is installed with the Windows Media Format SDK.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bb604-125">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="bb604-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bb604-126">Codificações de mídia do Windows</span><span class="sxs-lookup"><span data-stu-id="bb604-126">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 
