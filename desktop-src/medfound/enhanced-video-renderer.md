---
description: O processador de vídeo avançado (EVR) é um componente que exibe o vídeo no monitor dos usuários.
ms.assetid: 1c985558-d25d-4f51-978a-58c05943dab9
title: Processador de vídeo aprimorado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab0881da0827e6cc757a0ea855bcb51864dd98e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104296147"
---
# <a name="enhanced-video-renderer"></a><span data-ttu-id="10bee-103">Processador de vídeo aprimorado</span><span class="sxs-lookup"><span data-stu-id="10bee-103">Enhanced Video Renderer</span></span>

<span data-ttu-id="10bee-104">O processador de vídeo avançado (EVR) é um componente que exibe o vídeo no monitor do usuário.</span><span class="sxs-lookup"><span data-stu-id="10bee-104">The enhanced video renderer (EVR) is a component that displays video on the user's monitor.</span></span> <span data-ttu-id="10bee-105">Existem duas versões do EVR:</span><span class="sxs-lookup"><span data-stu-id="10bee-105">Two versions of the EVR exist:</span></span>

-   <span data-ttu-id="10bee-106">O coletor de mídia do EVR, para aplicativos Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="10bee-106">The EVR media sink, for Media Foundation applications.</span></span>
-   <span data-ttu-id="10bee-107">O filtro EVR, para aplicativos do DirectShow.</span><span class="sxs-lookup"><span data-stu-id="10bee-107">The EVR filter, for DirectShow applications.</span></span>

<span data-ttu-id="10bee-108">Ambas as versões usam os mesmos objetos internos para renderizar vídeo e compartilham muitas das mesmas interfaces.</span><span class="sxs-lookup"><span data-stu-id="10bee-108">Both versions use the same internal objects to render video, and they share many of the same interfaces.</span></span>

<span data-ttu-id="10bee-109">O EVR pode misturar até 16 fluxos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-109">The EVR can mix up to 16 video streams.</span></span> <span data-ttu-id="10bee-110">O primeiro fluxo de entrada é chamado de *fluxo de referência*.</span><span class="sxs-lookup"><span data-stu-id="10bee-110">The first input stream is called the *reference stream*.</span></span> <span data-ttu-id="10bee-111">O fluxo de referência sempre aparece primeiro na ordem z.</span><span class="sxs-lookup"><span data-stu-id="10bee-111">The reference stream always appears first in the z-order.</span></span> <span data-ttu-id="10bee-112">Quaisquer fluxos adicionais são chamados de *subfluxos* e misturados na parte superior do fluxo de referência.</span><span class="sxs-lookup"><span data-stu-id="10bee-112">Any additional streams are called *substreams*, and are mixed on top of the reference stream.</span></span> <span data-ttu-id="10bee-113">O aplicativo pode alterar a ordem z dos subfluxos, mas nenhum Subfluxo pode ser o primeiro na ordem z.</span><span class="sxs-lookup"><span data-stu-id="10bee-113">The application can change the z-order of the substreams, but no substream can be first in the z-order.</span></span>

<span data-ttu-id="10bee-114">O driver de gráficos determina quais formatos de vídeo têm suporte, mas normalmente eles são limitados ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="10bee-114">The graphics driver determines which video formats are supported, but typically they are limited to the following:</span></span>

-   <span data-ttu-id="10bee-115">Fluxo de referência: YUV progressivo ou entrelaçado sem alfa por pixel (como NV12 ou YUY2); ou RGB progressivo.</span><span class="sxs-lookup"><span data-stu-id="10bee-115">Reference stream: Progressive or interlaced YUV with no per-pixel alpha (such as NV12 or YUY2); or progressive RGB.</span></span>
-   <span data-ttu-id="10bee-116">Subfluxos: YUV progressivo com per-pixel-Alpha, como AYUV ou AI44.</span><span class="sxs-lookup"><span data-stu-id="10bee-116">Substreams: Progressive YUV with per-pixel-alpha, such as AYUV or AI44.</span></span>

<span data-ttu-id="10bee-117">Os formatos de Subfluxo disponíveis podem depender do formato do fluxo de referência.</span><span class="sxs-lookup"><span data-stu-id="10bee-117">The available substream formats might depend on the format of the reference stream.</span></span> <span data-ttu-id="10bee-118">Para obter mais informações, consulte [negociação de tipo de mídia EVR](evr-media-type-negotiation.md).</span><span class="sxs-lookup"><span data-stu-id="10bee-118">For more information, see [EVR Media Type Negotiation](evr-media-type-negotiation.md).</span></span>

<span data-ttu-id="10bee-119">Internamente, o EVR usa um objeto chamado *mixer* para compor os quadros dos fluxos de entrada em uma superfície para renderização.</span><span class="sxs-lookup"><span data-stu-id="10bee-119">Internally, the EVR uses an object called the *mixer* to composite the frames from the input streams onto one surface for rendering.</span></span> <span data-ttu-id="10bee-120">O mixer também executa a desentrelaçamento e a correção de cores.</span><span class="sxs-lookup"><span data-stu-id="10bee-120">The mixer also performs deinterlacing and color correction.</span></span> <span data-ttu-id="10bee-121">A saída do mixer é o quadro de vídeo composto final.</span><span class="sxs-lookup"><span data-stu-id="10bee-121">The output from the mixer is the final composited video frame.</span></span> <span data-ttu-id="10bee-122">Um segundo objeto chamado *apresentador* renderiza o quadro de vídeo para a exibição.</span><span class="sxs-lookup"><span data-stu-id="10bee-122">A second object called the *presenter* renders the video frame to the display.</span></span> <span data-ttu-id="10bee-123">O apresentador agenda quando os quadros são renderizados e gerencia o dispositivo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="10bee-123">The presenter schedules when the frames are rendered and manages the Direct3D device.</span></span> <span data-ttu-id="10bee-124">Um aplicativo pode fornecer uma implementação personalizada do mixer ou do apresentador.</span><span class="sxs-lookup"><span data-stu-id="10bee-124">An application can provide a custom implementation of either the mixer or the presenter.</span></span>

<span data-ttu-id="10bee-125">A taxa de quadros de saída está bloqueada para o fluxo de referência.</span><span class="sxs-lookup"><span data-stu-id="10bee-125">The output frame rate is locked to the reference stream.</span></span> <span data-ttu-id="10bee-126">Sempre que os subfluxos recebem novos quadros, o mixer os mantém.</span><span class="sxs-lookup"><span data-stu-id="10bee-126">Whenever the substreams receive new frames, the mixer holds onto them.</span></span> <span data-ttu-id="10bee-127">Quando o fluxo de referência recebe um novo quadro, o mixer compõe esse quadro com os quadros de Subfluxo.</span><span class="sxs-lookup"><span data-stu-id="10bee-127">When the reference stream receives a new frame, the mixer composites that frame with the substream frames.</span></span> <span data-ttu-id="10bee-128">(Se o fluxo de referência for entrelaçado, um quadro de referência completo poderá exigir mais de um exemplo de mídia.) É possível que um subfluxo receba mais de um quadro enquanto o mixer está aguardando um quadro de referência.</span><span class="sxs-lookup"><span data-stu-id="10bee-128">(If the reference stream is interlaced, a complete reference frame may require more than one media sample.) It is possible for a substream to receive more than one frame while the mixer is waiting for a reference frame.</span></span> <span data-ttu-id="10bee-129">Nesse caso, o mixer simplesmente descarta o quadro do Subfluxo anterior.</span><span class="sxs-lookup"><span data-stu-id="10bee-129">In that case, the mixer simply discards the previous substream frame.</span></span>

<span data-ttu-id="10bee-130">Como o apresentador cria o dispositivo Direct3D, ele também é responsável por compartilhar o dispositivo com outros objetos de pipeline que precisam acessar os serviços de aceleração de vídeo do DirectX (DXVA).</span><span class="sxs-lookup"><span data-stu-id="10bee-130">Because the presenter creates the Direct3D device, it is also responsible for sharing the device with other pipeline objects that need to access DirectX Video Acceleration (DXVA) services.</span></span> <span data-ttu-id="10bee-131">Em particular, o mixer EVR usa os serviços de processamento de vídeo de DXVA para desentrelaçar e misturar o vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-131">In particular, the EVR mixer uses the DXVA video processing services to deinterlace and mix the video.</span></span> <span data-ttu-id="10bee-132">Externamente ao EVR, os decodificadores de software podem usar o DXVA para decodificação de vídeo acelerada.</span><span class="sxs-lookup"><span data-stu-id="10bee-132">External to the EVR, software decoders may use DXVA for accelerated video decoding.</span></span> <span data-ttu-id="10bee-133">O apresentador compartilha o dispositivo Direct3D por meio do [Gerenciador de dispositivos Direct3D](direct3d-device-manager.md).</span><span class="sxs-lookup"><span data-stu-id="10bee-133">The presenter shares the Direct3D device by means of the [Direct3D Device Manager](direct3d-device-manager.md).</span></span> <span data-ttu-id="10bee-134">O diagrama a seguir mostra a arquitetura interna do EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-134">The following diagram shows the internal architecture of the EVR.</span></span> <span data-ttu-id="10bee-135">(O decodificador de software, sombreado em cinza, não faz parte do EVR.)</span><span class="sxs-lookup"><span data-stu-id="10bee-135">(The software decoder, shaded in gray, is not part of the EVR.)</span></span>

![diagrama arquitetônico mostrando o EVR.](images/5d4a1fd9-25ff-4cc5-a486-0d22f34bbfd7.gif)

## <a name="evr-interfaces"></a><span data-ttu-id="10bee-137">Interfaces EVR</span><span class="sxs-lookup"><span data-stu-id="10bee-137">EVR Interfaces</span></span>

<span data-ttu-id="10bee-138">O EVR dá suporte às seguintes interfaces.</span><span class="sxs-lookup"><span data-stu-id="10bee-138">The EVR supports the following interfaces.</span></span> <span data-ttu-id="10bee-139">Algumas dessas interfaces são implementadas pelo mixer ou apresentador.</span><span class="sxs-lookup"><span data-stu-id="10bee-139">Some of these interfaces are implemented by the mixer or presenter.</span></span> <span data-ttu-id="10bee-140">Para cada interface, o tópico de referência descreve como obter um ponteiro para a interface.</span><span class="sxs-lookup"><span data-stu-id="10bee-140">For each interface, the reference topic describes how to get a pointer to the interface.</span></span>

| <span data-ttu-id="10bee-141">Interface</span><span class="sxs-lookup"><span data-stu-id="10bee-141">Interface</span></span>                                                    | <span data-ttu-id="10bee-142">Descrição</span><span class="sxs-lookup"><span data-stu-id="10bee-142">Description</span></span>                                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="10bee-143">**IEVRFilterConfig**</span><span class="sxs-lookup"><span data-stu-id="10bee-143">**IEVRFilterConfig**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfig)                 | <span data-ttu-id="10bee-144">Define o número de Pins de entrada no filtro EVR (somente DirectShow).</span><span class="sxs-lookup"><span data-stu-id="10bee-144">Sets the number of input pins on the EVR filter (DirectShow only).</span></span>                                |
| [<span data-ttu-id="10bee-145">**IEVRFilterConfigEx**</span><span class="sxs-lookup"><span data-stu-id="10bee-145">**IEVRFilterConfigEx**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfigex)             | <span data-ttu-id="10bee-146">Configura o filtro EVR (somente DirectShow).</span><span class="sxs-lookup"><span data-stu-id="10bee-146">Configures the EVR filter (DirectShow only).</span></span>                                                      |
| [<span data-ttu-id="10bee-147">**IEVRTrustedVideoPlugin**</span><span class="sxs-lookup"><span data-stu-id="10bee-147">**IEVRTrustedVideoPlugin**</span></span>](/windows/desktop/api/evr/nn-evr-ievrtrustedvideoplugin)     | <span data-ttu-id="10bee-148">Permite que um plug-in EVR processe vídeo protegido.</span><span class="sxs-lookup"><span data-stu-id="10bee-148">Enables an EVR plug-in to render protected video.</span></span>                                                 |
| [<span data-ttu-id="10bee-149">**IMFDesiredSample**</span><span class="sxs-lookup"><span data-stu-id="10bee-149">**IMFDesiredSample**</span></span>](/windows/desktop/api/evr/nn-evr-imfdesiredsample)                 | <span data-ttu-id="10bee-150">Permite que o apresentador EVR solicite um quadro específico do mixer.</span><span class="sxs-lookup"><span data-stu-id="10bee-150">Enables the EVR presenter to request a specific frame from the mixer.</span></span>                             |
| [<span data-ttu-id="10bee-151">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="10bee-151">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                 | <span data-ttu-id="10bee-152">Permite que o Gerenciador de qualidade ajuste a qualidade do vídeo EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-152">Enables the quality manager to adjust the EVR video quality.</span></span>                                      |
| [<span data-ttu-id="10bee-153">**IMFTopologyServiceLookup**</span><span class="sxs-lookup"><span data-stu-id="10bee-153">**IMFTopologyServiceLookup**</span></span>](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) | <span data-ttu-id="10bee-154">Habilita um mixer ou apresentador personalizado para obter ponteiros de interface do EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-154">Enables a custom mixer or presenter to get interface pointers from the EVR.</span></span>                       |
| [<span data-ttu-id="10bee-155">**IMFVideoDeviceID**</span><span class="sxs-lookup"><span data-stu-id="10bee-155">**IMFVideoDeviceID**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodeviceid)                 | <span data-ttu-id="10bee-156">Retorna o identificador de dispositivo de um mixer ou apresentador EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-156">Returns the device identifier of an EVR mixer or presenter.</span></span>                                       |
| [<span data-ttu-id="10bee-157">**IMFVideoDisplayControl**</span><span class="sxs-lookup"><span data-stu-id="10bee-157">**IMFVideoDisplayControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodisplaycontrol)     | <span data-ttu-id="10bee-158">Controla como o EVR exibe vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-158">Controls how the EVR displays video.</span></span>                                                              |
| [<span data-ttu-id="10bee-159">**IMFVideoMixerBitmap**</span><span class="sxs-lookup"><span data-stu-id="10bee-159">**IMFVideoMixerBitmap**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)           | <span data-ttu-id="10bee-160">Alfa-combina uma imagem de bitmap estática com o vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-160">Alpha-blends a static bitmap image with the video.</span></span>                                                |
| [<span data-ttu-id="10bee-161">**IMFVideoMixerControl**</span><span class="sxs-lookup"><span data-stu-id="10bee-161">**IMFVideoMixerControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)         | <span data-ttu-id="10bee-162">Controla como o processador de vídeo aprimorado (EVR) combina os subfluxos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-162">Controls how the Enhanced Video Renderer (EVR) mixes video substreams.</span></span>                            |
| [<span data-ttu-id="10bee-163">**IMFVideoMixerControl2**</span><span class="sxs-lookup"><span data-stu-id="10bee-163">**IMFVideoMixerControl2**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol2)       | <span data-ttu-id="10bee-164">Controla as preferências de desentrelaçamento de vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-164">Controls preferences for video deinterlacing.</span></span>                                                     |
| [<span data-ttu-id="10bee-165">**IMFVideoPositionMapper**</span><span class="sxs-lookup"><span data-stu-id="10bee-165">**IMFVideoPositionMapper**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopositionmapper)     | <span data-ttu-id="10bee-166">Mapeia uma posição em um fluxo de vídeo de entrada para a posição correspondente em um fluxo de vídeo de saída.</span><span class="sxs-lookup"><span data-stu-id="10bee-166">Maps a position on an input video stream to the corresponding position on an output video stream.</span></span> |
| [<span data-ttu-id="10bee-167">**IMFVideoPresenter**</span><span class="sxs-lookup"><span data-stu-id="10bee-167">**IMFVideoPresenter**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopresenter)               | <span data-ttu-id="10bee-168">Exposto pelo apresentador EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-168">Exposed by the EVR presenter.</span></span>                                                                     |
| [<span data-ttu-id="10bee-169">**IMFVideoProcessor**</span><span class="sxs-lookup"><span data-stu-id="10bee-169">**IMFVideoProcessor**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)               | <span data-ttu-id="10bee-170">Controla o processamento de vídeo, incluindo ajuste, filtros de ruído e filtros detalhados.</span><span class="sxs-lookup"><span data-stu-id="10bee-170">Controls video processing, including adjustment, noise filters, and detail filters.</span></span>               |
| [<span data-ttu-id="10bee-171">**IMFVideoRenderer**</span><span class="sxs-lookup"><span data-stu-id="10bee-171">**IMFVideoRenderer**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideorenderer)                 | <span data-ttu-id="10bee-172">Define um mixer ou apresentador no EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-172">Sets a mixer or presenter on the EVR.</span></span>                                                             |
| [<span data-ttu-id="10bee-173">**IMFVideoSampleAllocator**</span><span class="sxs-lookup"><span data-stu-id="10bee-173">**IMFVideoSampleAllocator**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfvideosampleallocator)   | <span data-ttu-id="10bee-174">Aloca amostras de vídeo.</span><span class="sxs-lookup"><span data-stu-id="10bee-174">Allocates video samples.</span></span>                                                                          |



 

## <a name="in-this-section"></a><span data-ttu-id="10bee-175">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="10bee-175">In This Section</span></span>



| <span data-ttu-id="10bee-176">Tópico</span><span class="sxs-lookup"><span data-stu-id="10bee-176">Topic</span></span>                                                                    | <span data-ttu-id="10bee-177">Descrição</span><span class="sxs-lookup"><span data-stu-id="10bee-177">Description</span></span>                                                                           |
|--------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| [<span data-ttu-id="10bee-178">Usando o filtro EVR do DirectShow</span><span class="sxs-lookup"><span data-stu-id="10bee-178">Using the DirectShow EVR Filter</span></span>](using-the-directshow-evr-filter.md)   | <span data-ttu-id="10bee-179">Como usar o EVR em um aplicativo do DirectShow.</span><span class="sxs-lookup"><span data-stu-id="10bee-179">How to use the EVR in a DirectShow application.</span></span>                                       |
| [<span data-ttu-id="10bee-180">Usando o coletor de mídia do EVR</span><span class="sxs-lookup"><span data-stu-id="10bee-180">Using the EVR Media Sink</span></span>](using-the-evr-media-sink.md)                 | <span data-ttu-id="10bee-181">Como usar o EVR em um aplicativo Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="10bee-181">How to use the EVR in a Media Foundation application.</span></span>                                 |
| [<span data-ttu-id="10bee-182">Usando os controles de exibição de vídeo</span><span class="sxs-lookup"><span data-stu-id="10bee-182">Using the Video Display Controls</span></span>](using-the-video-display-controls.md) | <span data-ttu-id="10bee-183">Como controlar a maneira como o EVR exibe vídeo dentro da janela do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="10bee-183">How to control the way in which the EVR displays video inside the application window.</span></span> |
| [<span data-ttu-id="10bee-184">Usando os controles do mixer de vídeo</span><span class="sxs-lookup"><span data-stu-id="10bee-184">Using the Video Mixer Controls</span></span>](using-the-video-mixer-controls.md)     | <span data-ttu-id="10bee-185">Como controlar a maneira como o mixer EVR Opera.</span><span class="sxs-lookup"><span data-stu-id="10bee-185">How to control the way in which the EVR mixer operates.</span></span>                               |
| [<span data-ttu-id="10bee-186">Negociação de tipo de mídia EVR</span><span class="sxs-lookup"><span data-stu-id="10bee-186">EVR Media Type Negotiation</span></span>](evr-media-type-negotiation.md)             | <span data-ttu-id="10bee-187">Descreve como o EVR determina quais formatos de vídeo ele pode aceitar como entrada.</span><span class="sxs-lookup"><span data-stu-id="10bee-187">Describes how the EVR determines which video formats it can accept as input.</span></span>          |
| [<span data-ttu-id="10bee-188">Mixers personalizados</span><span class="sxs-lookup"><span data-stu-id="10bee-188">Custom Mixers</span></span>](custom-mixers.md)                                       | <span data-ttu-id="10bee-189">Como escrever um mixer personalizado para o EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-189">How to write a custom mixer for the EVR.</span></span>                                              |
| [<span data-ttu-id="10bee-190">Como escrever um apresentador EVR</span><span class="sxs-lookup"><span data-stu-id="10bee-190">How to Write an EVR Presenter</span></span>](how-to-write-an-evr-presenter.md)       | <span data-ttu-id="10bee-191">Como escrever um apresentador personalizado para o EVR.</span><span class="sxs-lookup"><span data-stu-id="10bee-191">How to write a custom presenter for the EVR.</span></span>                                          |



 

## <a name="related-topics"></a><span data-ttu-id="10bee-192">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="10bee-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="10bee-193">Reprodução de áudio/vídeo</span><span class="sxs-lookup"><span data-stu-id="10bee-193">Audio/Video Playback</span></span>](audio-video-playback.md)
</dt> </dl>

 

 



