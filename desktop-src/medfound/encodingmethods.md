---
description: Métodos de codificação
ms.assetid: 17ab5ecc-0173-4c5c-9d65-40e506ab7e07
title: Métodos de codificação (Microsoft Media Foundation)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: e4366f11ea9d120d638c5600f84fc16f6c5320f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105814523"
---
# <a name="encoding-methods-microsoft-media-foundation"></a><span data-ttu-id="a6034-103">Métodos de codificação (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="a6034-103">Encoding Methods (Microsoft Media Foundation)</span></span>

<span data-ttu-id="a6034-104">A maioria dos codecs de vídeo e áudio do Windows Media dá suporte a vários métodos de codificação.</span><span class="sxs-lookup"><span data-stu-id="a6034-104">Most of the Windows Media Audio and Video codecs support multiple encoding methods.</span></span> <span data-ttu-id="a6034-105">Saber como e quando usar cada método pode ajudá-lo a criar conteúdo compactado de alta qualidade.</span><span class="sxs-lookup"><span data-stu-id="a6034-105">Knowing how and when to use each method can help you create high-quality compressed content.</span></span>

<span data-ttu-id="a6034-106">Todos os métodos de codificação se concentram no buffer usado pelo decodificador para gerenciar dados de entrada compactados.</span><span class="sxs-lookup"><span data-stu-id="a6034-106">The encoding methods all focus on the buffer used by the decoder to manage compressed input data.</span></span> <span data-ttu-id="a6034-107">Esse buffer é definido pela taxa de bits do fluxo, em bits por segundo, e pela janela de buffer, em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="a6034-107">This buffer is defined by the bit rate of the stream, in bits per second, and the buffer window, in milliseconds.</span></span> <span data-ttu-id="a6034-108">Durante a codificação, o codec obedece às restrições do buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-108">When encoding, the codec abides by the restraints of the buffer.</span></span> <span data-ttu-id="a6034-109">Para obter mais informações sobre o buffer, consulte [o modelo de buffer de buckets de vazamento](the-leaky-bucket-buffer-model.md).</span><span class="sxs-lookup"><span data-stu-id="a6034-109">For more information about the buffer, see [The Leaky Bucket Buffer Model](the-leaky-bucket-buffer-model.md).</span></span>

## <a name="constant-bit-rate-encoding"></a><span data-ttu-id="a6034-110">Codificação de taxa de bits constante</span><span class="sxs-lookup"><span data-stu-id="a6034-110">Constant Bit Rate Encoding</span></span>

<span data-ttu-id="a6034-111">A taxa de bits para qualquer fluxo codificado por um dos codecs de áudio e vídeo do Windows Media não é constante.</span><span class="sxs-lookup"><span data-stu-id="a6034-111">The bit rate for any stream encoded by one of the Windows Media Audio and Video codecs is not constant.</span></span> <span data-ttu-id="a6034-112">A codificação constante de taxa de bits (CBR) é, portanto, um termo enganoso.</span><span class="sxs-lookup"><span data-stu-id="a6034-112">Constant bit rate (CBR) encoding is, therefore, a somewhat misleading term.</span></span> <span data-ttu-id="a6034-113">O recurso de distinção de um fluxo codificado em CBR é uma pequena janela de buffer, que limita a variação de tamanhos de amostra.</span><span class="sxs-lookup"><span data-stu-id="a6034-113">The distinguishing feature of a CBR-encoded stream is a small buffer window, which limits the variation of sample sizes.</span></span> <span data-ttu-id="a6034-114">A codificação de CBR é usada principalmente para conteúdo que é transmitido em uma rede para seu destino.</span><span class="sxs-lookup"><span data-stu-id="a6034-114">CBR encoding is used primarily for content that is streamed over a network to its destination.</span></span> <span data-ttu-id="a6034-115">Nesse cenário, é importante ser capaz de contar com o uso consistente da largura de banda.</span><span class="sxs-lookup"><span data-stu-id="a6034-115">In such a scenario, it is important to be able to rely on consistent bandwidth usage.</span></span>

<span data-ttu-id="a6034-116">De um ponto de vista de configuração, a codificação de CBR difere dos outros modos que antes de começar a codificar, você define a taxa média de bits do conteúdo de saída e a janela de buffer que se aplica a essa taxa de bits.</span><span class="sxs-lookup"><span data-stu-id="a6034-116">From a configuration point of view, CBR encoding differs from the other modes in that before starting to encode, you set both the average bit rate of the output content, and the buffer window that applies to that bit rate.</span></span> <span data-ttu-id="a6034-117">Em outros modos, um ou ambos os valores são desconhecidos quando você configura o codificador e é calculado pelo codec enquanto ele codifica.</span><span class="sxs-lookup"><span data-stu-id="a6034-117">In other modes, one or both of those values is unknown when you configure the encoder, and is computed by the codec while it encodes.</span></span> <span data-ttu-id="a6034-118">A CBR é o modo de codificação padrão usado pelo Windows Media Encoder DMOs.</span><span class="sxs-lookup"><span data-stu-id="a6034-118">CBR is the standard encoding mode used by the Windows Media Encoder DMOs.</span></span>

## <a name="two-pass-constant-bit-rate-encoding"></a><span data-ttu-id="a6034-119">Two-Pass a codificação da taxa de bits constante</span><span class="sxs-lookup"><span data-stu-id="a6034-119">Two-Pass Constant Bit Rate Encoding</span></span>

<span data-ttu-id="a6034-120">A CBR padrão usa apenas uma única passagem de codificação.</span><span class="sxs-lookup"><span data-stu-id="a6034-120">Standard CBR uses only a single encoding pass.</span></span> <span data-ttu-id="a6034-121">Você fornece seu conteúdo como exemplos de entrada e o codec compacta o conteúdo e retorna exemplos de saída.</span><span class="sxs-lookup"><span data-stu-id="a6034-121">You provide your content as input samples, and the codec compresses the content and returns output samples.</span></span> <span data-ttu-id="a6034-122">Também é possível processar amostras de entrada duas vezes.</span><span class="sxs-lookup"><span data-stu-id="a6034-122">It is also possible to process input samples twice.</span></span> <span data-ttu-id="a6034-123">Na primeira passagem, o codec executa cálculos para otimizar a codificação para o seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="a6034-123">On the first pass, the codec performs calculations to optimize encoding for your content.</span></span> <span data-ttu-id="a6034-124">Na segunda passagem, o codec usa os dados coletados durante a primeira passagem para codificar o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="a6034-124">On the second pass, the codec uses the data gathered during the first pass to encode the content.</span></span>

<span data-ttu-id="a6034-125">A codificação de CBR de duas passagens tem muitas vantagens.</span><span class="sxs-lookup"><span data-stu-id="a6034-125">Two-pass CBR encoding has many advantages.</span></span> <span data-ttu-id="a6034-126">Ele geralmente gera ganhos de qualidade significativos em relação à codificação de CBR padrão sem alterar nenhum dos requisitos de buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-126">It often yields significant quality gains over standard CBR encoding without changing any of the buffering requirements.</span></span> <span data-ttu-id="a6034-127">Isso torna esse modo de codificação ideal para o conteúdo que é transmitido por uma rede.</span><span class="sxs-lookup"><span data-stu-id="a6034-127">This makes this encoding mode ideal for content that is streamed over a network.</span></span> <span data-ttu-id="a6034-128">A única situação em que a CBR em duas passagens não é viável é quando você codifica o conteúdo de uma fonte dinâmica e não pode usar uma segunda passagem.</span><span class="sxs-lookup"><span data-stu-id="a6034-128">The only situation where two-pass CBR is not feasible is when you encode content from a live source and cannot use a second pass.</span></span>

<span data-ttu-id="a6034-129">O tipo de mídia de saída de um fluxo de CBR de duas passagens é idêntico ao de um fluxo de CBR padrão; Você ainda especifica a taxa de bits e a janela de buffer a ser usada.</span><span class="sxs-lookup"><span data-stu-id="a6034-129">The output media type of a two-pass CBR stream is identical to that of a standard CBR stream; you still specify the bit rate and buffer window to use.</span></span> <span data-ttu-id="a6034-130">Ao configurar o DMO, você deve defini-lo para executar duas passagens.</span><span class="sxs-lookup"><span data-stu-id="a6034-130">When configuring the DMO, you must set it to perform two passes.</span></span> <span data-ttu-id="a6034-131">E você deve notificar o DMO quando terminar de enviar amostras para a primeira passagem.</span><span class="sxs-lookup"><span data-stu-id="a6034-131">And you must notify the DMO when you are finished sending samples for the first pass.</span></span>

## <a name="quality-based-variable-bit-rate-encoding"></a><span data-ttu-id="a6034-132">Codificação de taxa de bits de variável Quality-Based</span><span class="sxs-lookup"><span data-stu-id="a6034-132">Quality-Based Variable Bit Rate Encoding</span></span>

<span data-ttu-id="a6034-133">Como a codificação de CBR não mantém realmente uma taxa de bits constante, a distinção entre ela e a taxa de bits variável (VBR) pode parecer um pouco de Hazy.</span><span class="sxs-lookup"><span data-stu-id="a6034-133">Because CBR encoding does not actually maintain a constant bit rate, the distinction between it and variable bit rate encoding (VBR) may seem a little hazy.</span></span> <span data-ttu-id="a6034-134">A principal diferença entre CBR e VBR é o tamanho da janela de buffer usada.</span><span class="sxs-lookup"><span data-stu-id="a6034-134">The primary difference between CBR and VBR is the size of the buffer window used.</span></span> <span data-ttu-id="a6034-135">Fluxos de taxa de bits codificados geralmente têm janelas de buffer grandes em comparação com os fluxos codificados em CBR.</span><span class="sxs-lookup"><span data-stu-id="a6034-135">VBR-encoded streams usually have large buffer windows compared to CBR-encoded streams.</span></span> <span data-ttu-id="a6034-136">A VBR baseada em qualidade não é exceção, pois você não define nenhuma taxa de bits nem janela de buffer para ela.</span><span class="sxs-lookup"><span data-stu-id="a6034-136">Quality-based VBR is no exception, in that you define neither bit rate nor buffer window for it.</span></span> <span data-ttu-id="a6034-137">Em vez disso, você define um valor de qualidade.</span><span class="sxs-lookup"><span data-stu-id="a6034-137">Instead, you set a quality value.</span></span> <span data-ttu-id="a6034-138">Em seguida, o codec tenta compactar os dados para que a qualidade da mídia codificada seja consistente durante toda a duração, independentemente dos requisitos de buffer do fluxo resultante.</span><span class="sxs-lookup"><span data-stu-id="a6034-138">The codec then attempts to compress the data so that the quality of the encoded media is consistent throughout its duration, regardless of the buffer requirements of the resulting stream.</span></span>

<span data-ttu-id="a6034-139">A VBR baseada em qualidade usa uma única passagem de codificação e tende a criar grandes fluxos compactados.</span><span class="sxs-lookup"><span data-stu-id="a6034-139">Quality-based VBR uses a single encoding pass and tends to create large compressed streams.</span></span> <span data-ttu-id="a6034-140">Quando a codificação é concluída, o codec define os requisitos de buffer para que o decodificador possa descompactar os dados.</span><span class="sxs-lookup"><span data-stu-id="a6034-140">When encoding is complete, the codec sets the buffer requirements so that the decoder can decompress the data.</span></span> <span data-ttu-id="a6034-141">O fluxo VBR codificado não é adequado para streaming em uma rede, portanto, a taxa de bits baseada em qualidade deve ser usada somente para cenários de reprodução local (ou download e reprodução).</span><span class="sxs-lookup"><span data-stu-id="a6034-141">The encoded VBR stream is not suitable for streaming over a network, so quality-based VBR should be used only for local playback scenarios (or download and play).</span></span>

## <a name="unconstrained-variable-bit-rate-encoding"></a><span data-ttu-id="a6034-142">Codificação de taxa de bits variável irrestrita</span><span class="sxs-lookup"><span data-stu-id="a6034-142">Unconstrained Variable Bit Rate Encoding</span></span>

<span data-ttu-id="a6034-143">Diferentemente da VBR baseada em qualidade, a VBR não restringida não é codificada para um nível de qualidade específico.</span><span class="sxs-lookup"><span data-stu-id="a6034-143">Unlike quality-based VBR, unconstrained VBR does not encode to a specific quality level.</span></span> <span data-ttu-id="a6034-144">Em vez disso, ele codifica o conteúdo para a melhor qualidade possível e, ao mesmo tempo, mantém uma taxa de bits especificada.</span><span class="sxs-lookup"><span data-stu-id="a6034-144">Instead, it encodes the content to the highest possible quality while maintaining a specified bit rate.</span></span> <span data-ttu-id="a6034-145">A VBR não restringida usa duas passagens de codificação e é semelhante à CBR de duas passagens, exceto que você não especifica uma configuração de janela de buffer para o fluxo.</span><span class="sxs-lookup"><span data-stu-id="a6034-145">Unconstrained VBR uses two encoding passes and is similar to two-pass CBR, except that you do not specify a buffer window setting for the stream.</span></span> <span data-ttu-id="a6034-146">Isso significa que não há nenhum limite para o tamanho de amostras individuais no fluxo, desde que a taxa de bits média seja menor ou igual ao valor definido.</span><span class="sxs-lookup"><span data-stu-id="a6034-146">This means that there is no limit to the size of individual samples in the stream, as long as the average bit rate is less than or equal to the value you set.</span></span>

<span data-ttu-id="a6034-147">A VBR não restrita é de uso limitado, pois há poucos cenários de reprodução que têm requisitos para manter seus requisitos de buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-147">Unconstrained VBR is of limited use, because there are few playback scenarios that have requirements in keeping with its buffer requirements.</span></span> <span data-ttu-id="a6034-148">O codec pode definir a janela de buffer para qualquer valor necessário após a codificação, dando-lhe nenhum controle sobre o tamanho do buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-148">The codec can set the buffer window to whatever value is required after encoding, giving you no control over the buffer size.</span></span> <span data-ttu-id="a6034-149">Na maioria dos casos, se você não estiver preocupado com o tamanho do buffer ou a consistência do uso de largura de banda, deverá usar a taxa de bits baseada em qualidade.</span><span class="sxs-lookup"><span data-stu-id="a6034-149">In most cases, if you are not concerned about the size of the buffer or the consistency of bandwidth usage, you should use quality-based VBR.</span></span>

## <a name="peak-constrained-variable-bit-rate-encoding"></a><span data-ttu-id="a6034-150">Codificação de taxa de bits de variável Peak-Constrained</span><span class="sxs-lookup"><span data-stu-id="a6034-150">Peak-Constrained Variable Bit Rate Encoding</span></span>

<span data-ttu-id="a6034-151">O modo de codificação final é uma taxa de bits de pico restrita.</span><span class="sxs-lookup"><span data-stu-id="a6034-151">The final encoding mode is peak-constrained VBR.</span></span> <span data-ttu-id="a6034-152">Como uma VBR não restringida, esse modo usa duas passagens de codificação e codifica para uma taxa de bits especificada.</span><span class="sxs-lookup"><span data-stu-id="a6034-152">Like unconstrained VBR, this mode uses two encoding passes and encodes to a specified bit rate.</span></span> <span data-ttu-id="a6034-153">No entanto, com a taxa de bits restrita de pico, você também configura o valor de pico para a codificação.</span><span class="sxs-lookup"><span data-stu-id="a6034-153">However, with peak constrained VBR you also configure the peak value for the encoding.</span></span> <span data-ttu-id="a6034-154">Os valores de pico são semelhantes aos valores de configuração de buffer normais: há uma taxa de bits de pico e uma janela de buffer de pico.</span><span class="sxs-lookup"><span data-stu-id="a6034-154">Peak values are similar to normal buffer configuration values: there is a peak bit rate and a peak buffer window.</span></span> <span data-ttu-id="a6034-155">O arquivo é codificado para estar em conformidade com um buffer descrito pelos valores de pico, com a condição de que a taxa de bits média geral do fluxo seja igual ou menor que o valor médio de taxa de bits especificado.</span><span class="sxs-lookup"><span data-stu-id="a6034-155">The file is encoded to conform to a buffer described by the peak values, with the condition that the overall average bit rate of the stream be equal to or less than the average bit rate value you specify.</span></span>

<span data-ttu-id="a6034-156">A taxa de bits restrita pode ser difícil de conceituar.</span><span class="sxs-lookup"><span data-stu-id="a6034-156">Constrained VBR can be difficult to conceptualize.</span></span> <span data-ttu-id="a6034-157">Aqui está a maneira mais fácil de considerar o modelo de buffer usado.</span><span class="sxs-lookup"><span data-stu-id="a6034-157">Here is the easiest way to think of the buffering model used.</span></span> <span data-ttu-id="a6034-158">Suponha que o fluxo seja um fluxo de CBR com a janela taxa de bits de pico e buffer de pico usada para definir o buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-158">Suppose the stream is a CBR stream with the peak bit rate and peak buffer window used to define the buffer.</span></span> <span data-ttu-id="a6034-159">Normalmente, a taxa de bits de pico é muito alta.</span><span class="sxs-lookup"><span data-stu-id="a6034-159">Typically, the peak bit rate is quite high.</span></span> <span data-ttu-id="a6034-160">O codificador garante que o valor da taxa de bits média esperada que você indica seja mantido durante a duração do fluxo.</span><span class="sxs-lookup"><span data-stu-id="a6034-160">The encoder ensures that the expected average bit rate value you indicate is maintained over the duration of the stream.</span></span> <span data-ttu-id="a6034-161">Em qualquer ponto específico no fluxo, a taxa média de bits é garantida como maior que o tamanho total do fluxo em bits dividido pela duração do fluxo em segundos).</span><span class="sxs-lookup"><span data-stu-id="a6034-161">At any particular point in the stream, the average bit rate is guaranteed to be greater than the total stream size in bits divided by the stream duration in seconds).</span></span>

<span data-ttu-id="a6034-162">Considere o exemplo a seguir: Configure um fluxo com uma taxa média de bits de 16.000 bits por segundo, uma taxa de bits de pico de 48.000 bits por segundo e uma janela de buffer de pico de 3.000 (3 segundos).</span><span class="sxs-lookup"><span data-stu-id="a6034-162">Consider the following example: You configure a stream with an average bit rate of 16,000 bits per second, a peak bit rate of 48,000 bits per second, and a peak buffer window of 3,000 (3 seconds).</span></span> <span data-ttu-id="a6034-163">O tamanho do buffer usado para o fluxo é de 144.000 bits (48.000 bits por segundo x 3 segundos) conforme determinado pelos valores de pico.</span><span class="sxs-lookup"><span data-stu-id="a6034-163">The size of the buffer used for the stream is 144,000 bits (48,000 bits per second x 3 seconds) as determined by the peak values.</span></span> <span data-ttu-id="a6034-164">O codificador compacta os dados para que estejam em conformidade com esse buffer.</span><span class="sxs-lookup"><span data-stu-id="a6034-164">The encoder compresses the data to conform to that buffer.</span></span> <span data-ttu-id="a6034-165">Além disso, a taxa média de bits do fluxo deve ser de 16.000 ou menos.</span><span class="sxs-lookup"><span data-stu-id="a6034-165">Additionally, the average bit rate of the stream must be 16,000 or less.</span></span> <span data-ttu-id="a6034-166">Se o codificador precisar fazer alguns exemplos muito grandes para lidar com um segmento complexo de conteúdo, ele poderá aproveitar o tamanho do buffer grande.</span><span class="sxs-lookup"><span data-stu-id="a6034-166">If the encoder needs to make some very large samples to handle a complex segment of content, it can take advantage of the large buffer size.</span></span> <span data-ttu-id="a6034-167">Mas outras partes do fluxo devem ser codificadas em uma taxa de bits inferior para reduzir a média para o nível especificado.</span><span class="sxs-lookup"><span data-stu-id="a6034-167">But other parts of the stream must be encoded at a lower bit rate to bring the average down to the specified level.</span></span>

<span data-ttu-id="a6034-168">A codificação de taxa de bits de pico restrita é útil para dispositivos de reprodução com uma capacidade de buffer finita e algumas restrições de taxa de dados.</span><span class="sxs-lookup"><span data-stu-id="a6034-168">Peak-constrained VBR encoding is useful for playback devices with a finite buffer capacity and some data rate constraints.</span></span> <span data-ttu-id="a6034-169">Um exemplo comum disso é a codificação usada para DVDs.</span><span class="sxs-lookup"><span data-stu-id="a6034-169">A common example of this is the encoding used for DVDs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a6034-170">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a6034-170">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a6034-171">Usando a codificação de VBR</span><span class="sxs-lookup"><span data-stu-id="a6034-171">Using VBR Encoding</span></span>](usingvbrencoding.md)
</dt> <dt>

[<span data-ttu-id="a6034-172">Codificações de mídia do Windows</span><span class="sxs-lookup"><span data-stu-id="a6034-172">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 



