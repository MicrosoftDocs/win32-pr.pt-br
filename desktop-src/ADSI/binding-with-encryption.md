---
title: Associação com criptografia
description: Dados confidenciais trocados em uma rede devem ser criptografados.
ms.assetid: 51fe2131-5f7d-41b1-ad88-d965cbb4d630
ms.tgt_platform: multiple
keywords:
- ADSI ADSI, uso, associação com criptografia
- Associação com criptografia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8cf19747a8356459f4ab50c0aa409f69b58eb224
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "103915912"
---
# <a name="binding-with-encryption"></a><span data-ttu-id="3ce34-105">Associação com criptografia</span><span class="sxs-lookup"><span data-stu-id="3ce34-105">Binding With Encryption</span></span>

<span data-ttu-id="3ce34-106">Dados confidenciais trocados em uma rede devem ser criptografados.</span><span class="sxs-lookup"><span data-stu-id="3ce34-106">Sensitive data exchanged over a network should be encrypted.</span></span> <span data-ttu-id="3ce34-107">Para permitir isso, a ADSI dá suporte a dois tipos de criptografia, Kerberos e protocolo SSL (SSL).</span><span class="sxs-lookup"><span data-stu-id="3ce34-107">To allow this, ADSI supports two types of encryption, Kerberos and Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="3ce34-108">Os dois tipos de criptografia exigem o uso de [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) ou [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) para associação.</span><span class="sxs-lookup"><span data-stu-id="3ce34-108">Both types of encryption require the use of [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) for binding.</span></span>

<span data-ttu-id="3ce34-109">**GetObject** e [**ADsGetObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) não podem ser usados para associação nesse caso porque essas funções causam as solicitações LDAP usadas pela ADSI e os dados retornados do servidor de diretório para transmitir pela rede como texto sem formatação.</span><span class="sxs-lookup"><span data-stu-id="3ce34-109">**GetObject** and [**ADsGetObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) cannot be used for binding in this case because these functions cause the LDAP requests used by ADSI and the data returned from the directory server to transmit across the network as plaintext.</span></span> <span data-ttu-id="3ce34-110">Para fins de depuração, é útil desativar a criptografia para que a Monitor de Rede possa ser usada para exibir as solicitações LDAP e os dados entre o cliente e o servidor de diretório.</span><span class="sxs-lookup"><span data-stu-id="3ce34-110">For debugging purposes, it is helpful to turn encryption off so the Network Monitor can be used to view the LDAP requests and data between the client and the directory server.</span></span>

## <a name="kerberos-based-encryption"></a><span data-ttu-id="3ce34-111">Criptografia baseada em Kerberos</span><span class="sxs-lookup"><span data-stu-id="3ce34-111">Kerberos-based Encryption</span></span>

<span data-ttu-id="3ce34-112">Para usar a criptografia baseada em Kerberos, especifique os **anúncios usar sinalizador de \_ \_ lacre** ao chamar [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) ou [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="3ce34-112">To use Kerberos-based encryption, specify the **ADS\_USE\_SEALING** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="3ce34-113">Os **anúncios \_ usam \_** o sinalizador de lacre também podem ser usados para verificar a integridade dos dados, ou seja, para garantir que os dados recebidos sejam os mesmos que os dados enviados.</span><span class="sxs-lookup"><span data-stu-id="3ce34-113">The **ADS\_USE\_SEALING** flag can also be used to verify data integrity, that is, to ensure the data received is the same as the data sent.</span></span> <span data-ttu-id="3ce34-114">Se o sinalizador **ADS \_ use \_ lacre** for especificado, o sinalizador de uso de **\_ \_ assinatura do ADS** também será especificado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="3ce34-114">If the **ADS\_USE\_SEALING** flag is specified, the **ADS\_USE\_SIGNING** flag is automatically specified as well.</span></span> <span data-ttu-id="3ce34-115">Ambos os sinalizadores exigem autenticação Kerberos, que funciona somente sob as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="3ce34-115">Both flags require Kerberos authentication, which works only under the following conditions:</span></span>

-   <span data-ttu-id="3ce34-116">O computador cliente deve estar conectado ao domínio do Windows ou a um domínio confiável para um domínio do Windows.</span><span class="sxs-lookup"><span data-stu-id="3ce34-116">The client computer must be logged on to the Windows domain, or to a domain trusted by a Windows domain.</span></span>
-   <span data-ttu-id="3ce34-117">[**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) ou [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) deve ser chamado com credenciais nulas; ou seja, as credenciais alternativas não podem ser especificadas.</span><span class="sxs-lookup"><span data-stu-id="3ce34-117">[**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) must be called with null credentials; that is, alternate credentials cannot be specified.</span></span>

## <a name="ssl-based-encryption"></a><span data-ttu-id="3ce34-118">Criptografia baseada em SSL</span><span class="sxs-lookup"><span data-stu-id="3ce34-118">SSL-based Encryption</span></span>

<span data-ttu-id="3ce34-119">Para usar a criptografia baseada em SSL, especifique o sinalizador de **\_ uso de \_ SSL do ADS** ao chamar [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) ou [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="3ce34-119">To use SSL-based encryption, specify the **ADS\_USE\_SSL** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="3ce34-120">Se apenas o sinalizador de **\_ uso de \_ SSL do ADS** for especificado, a ADSI abrirá a porta SSL 636 e, em seguida, executará uma associação simples nesse canal SSL.</span><span class="sxs-lookup"><span data-stu-id="3ce34-120">If only the **ADS\_USE\_SSL** flag is specified, ADSI opens SSL port 636 and then performs a simple bind over that SSL channel.</span></span> <span data-ttu-id="3ce34-121">Se os anúncios **de \_ \_ autenticação segura** e os **ADS \_ usarem sinalizadores \_ SSL** forem especificados, o comportamento de associação dependerá do cliente do qual a chamada é feita.</span><span class="sxs-lookup"><span data-stu-id="3ce34-121">If both the **ADS\_SECURE\_AUTHENTICATION** and **ADS\_USE\_SSL** flags are specified, the binding behavior depends on the client that the call is made from.</span></span> <span data-ttu-id="3ce34-122">Em versões sem suporte do Windows, a ADSI primeiro abriu um canal SSL e executa uma associação simples usando o nome de usuário e a senha especificados ou o contexto de usuário atual, se o nome de usuário e a senha forem nulos.</span><span class="sxs-lookup"><span data-stu-id="3ce34-122">On unsupported versions of Windows, ADSI first opened an SSL channel and performs a simple bind using the specified user name and password or the current user context if both user name and password are null.</span></span> <span data-ttu-id="3ce34-123">Nas versões com suporte do Windows, a ADSI executa uma autenticação segura em vez de uma associação simples.</span><span class="sxs-lookup"><span data-stu-id="3ce34-123">On supported versions of Windows, ADSI performs a secure authentication rather than a simple bind.</span></span>

<span data-ttu-id="3ce34-124">Para usar a criptografia baseada em SSL ao se comunicar com o Active Directory, Active Directory deve ter a PKI (infraestrutura de chave pública) habilitada.</span><span class="sxs-lookup"><span data-stu-id="3ce34-124">To use SSL-based encryption while communicating with Active Directory, Active Directory must have enabled Public Key Infrastructure (PKI).</span></span> <span data-ttu-id="3ce34-125">A PKI pode ser habilitada Configurando uma autoridade de certificação corporativa em um dos servidores no Active Directory, incluindo um dos servidores Active Directory em si.</span><span class="sxs-lookup"><span data-stu-id="3ce34-125">PKI can be enabled by setting up an enterprise certification authority on one of the servers in Active Directory, including one of the Active Directory servers itself.</span></span> <span data-ttu-id="3ce34-126">Configurar uma autoridade de certificação corporativa faz com que um servidor de Active Directory obtenha um certificado de servidor que pode ser usado para fazer a criptografia baseada em SSL.</span><span class="sxs-lookup"><span data-stu-id="3ce34-126">Setting up an enterprise certification authority causes an Active Directory server to get a server certificate that can then be used to do SSL-based encryption.</span></span>

 

 




