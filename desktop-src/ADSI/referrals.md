---
title: Referências (ADSI)
description: As referências ocorrem quando o servidor que você está consultando não contém esses dados, mas pode encontrá-los.
ms.assetid: 2068ce7a-0b94-4d25-a18f-97f26863bd1d
ms.tgt_platform: multiple
keywords:
- ADSI de referências
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e79e6b2e8a737f6bb40386effd68f7f31d8d490d
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/21/2020
ms.locfileid: "104084888"
---
# <a name="referrals-adsi"></a><span data-ttu-id="416db-104">Referências (ADSI)</span><span class="sxs-lookup"><span data-stu-id="416db-104">Referrals (ADSI)</span></span>

<span data-ttu-id="416db-105">As referências ocorrem quando o servidor que você está consultando não contém esses dados, mas pode encontrá-los.</span><span class="sxs-lookup"><span data-stu-id="416db-105">Referrals occur when the server you are querying does not contain that data, but can find it.</span></span> <span data-ttu-id="416db-106">O servidor de destino retorna o conjunto de resultados, que pode incluir os dados reais e uma referência a outro servidor para recuperar os dados adicionais.</span><span class="sxs-lookup"><span data-stu-id="416db-106">The target server returns the result set, which may include both the actual data and a referral to another server to retrieve the additional data.</span></span> <span data-ttu-id="416db-107">Ao habilitar a busca de *referência*, o código de cliente ADSI subjacente usará esses dados de referência para tentar recuperar o objeto de destino do servidor descrito nos dados de referência.</span><span class="sxs-lookup"><span data-stu-id="416db-107">By enabling *referral chasing*, the underlying ADSI client code will use that referral data to attempt to retrieve the target object from the server described in the referral data.</span></span> <span data-ttu-id="416db-108">Lembre-se de que a busca de referência de desabilitação pode resultar em um conjunto de resultados menor, enquanto a habilitação da pesquisa de referência pode fazer com que uma consulta abranja vários servidores.</span><span class="sxs-lookup"><span data-stu-id="416db-108">Be aware that the disabling referral chasing may result in a smaller result set, whereas enabling referral chasing may cause a query to span many servers.</span></span> <span data-ttu-id="416db-109">Quando possível, a solução recomendada é usar o catálogo global.</span><span class="sxs-lookup"><span data-stu-id="416db-109">When possible, the recommended solution is to use the global catalog.</span></span>

<span data-ttu-id="416db-110">Para obter mais informações sobre referências e busca de referência em Active Directory, consulte [referências](/windows/desktop/AD/referrals).</span><span class="sxs-lookup"><span data-stu-id="416db-110">For more information about referrals and referral chasing in Active Directory, see [Referrals](/windows/desktop/AD/referrals).</span></span>

<span data-ttu-id="416db-111">Por exemplo, quando um cliente instrui o servidor A (A) para consultar um objeto de usuário (U), um pode sugerir que o cliente continue a pesquisa no servidor B (B) se o U não residir em um, mas é conhecido como em B. O cliente tem a opção de obter a referência ou não.</span><span class="sxs-lookup"><span data-stu-id="416db-111">For example, when a client instructs Server A (A) to query a user object (U), A can suggest that the client continue the search on Server B (B) if U does not reside on A, but is known to be on B. The client has the choice of pursuing the referral or not.</span></span> <span data-ttu-id="416db-112">As referências de pesquisa liberam o cliente de exigir o reconhecimento avançado da capacidade de cada servidor.</span><span class="sxs-lookup"><span data-stu-id="416db-112">Search referrals free the client from requiring advanced recognition of the capability of each server.</span></span> <span data-ttu-id="416db-113">No entanto, o cliente deve especificar o tipo de referências que um servidor deve fazer.</span><span class="sxs-lookup"><span data-stu-id="416db-113">However, the client must specify the type of referrals a server should make.</span></span>

<span data-ttu-id="416db-114">Active Directory oferece serviços de referência de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="416db-114">Active Directory offers search referral services.</span></span> <span data-ttu-id="416db-115">Um cliente pode escolher qualquer um dos seguintes tipos de caça de referência:</span><span class="sxs-lookup"><span data-stu-id="416db-115">A client can choose any of the following types of referral chasing:</span></span>

-   <span data-ttu-id="416db-116">Nunca: o servidor não deve gerar uma referência a um cliente, mesmo que ele reconheça que outro servidor armazena os dados solicitados.</span><span class="sxs-lookup"><span data-stu-id="416db-116">Never: The server should not generate a referral to a client even though it recognizes that another server stores the requested data.</span></span>
-   <span data-ttu-id="416db-117">Externo: o servidor deve gerar referências se a solicitação puder ser resolvida em outro servidor de uma árvore de diretórios diferente.</span><span class="sxs-lookup"><span data-stu-id="416db-117">External: The server should generate referrals if the request can be resolved on another server of a different directory tree.</span></span> <span data-ttu-id="416db-118">Por exemplo, um cliente consulta "OU = Sales, DC = Fabrikam, DC = COM" no servidor "fab01" no domínio "Fabrikam.com".</span><span class="sxs-lookup"><span data-stu-id="416db-118">For example, a client queries "OU=Sales,DC=Fabrikam,DC=COM" on the "fab01" server on the "Fabrikam.com" domain.</span></span> <span data-ttu-id="416db-119">No entanto, o objeto não pertence a "fab01", mas é conhecido como no servidor "arc01" no domínio "Fabrikam.com".</span><span class="sxs-lookup"><span data-stu-id="416db-119">However, the object does not belong to "fab01", but is known to be on the "arc01" server on the "Fabrikam.com" domain.</span></span> <span data-ttu-id="416db-120">Portanto, "fab01" faz referência ao cliente para "arc01".</span><span class="sxs-lookup"><span data-stu-id="416db-120">Thus, "fab01" refers the client to "arc01".</span></span>
-   <span data-ttu-id="416db-121">Subordinado: o servidor deve gerar referências se a solicitação puder ser resolvida em um servidor cujo nome forma um caminho contíguo do servidor de origem.</span><span class="sxs-lookup"><span data-stu-id="416db-121">Subordinate: The server should generate referrals if the request can be resolved on a server whose name forms a contiguous path from the originating server.</span></span> <span data-ttu-id="416db-122">O escopo da pesquisa deve estar no nível da subárvore.</span><span class="sxs-lookup"><span data-stu-id="416db-122">The search scope must be at the subtree level.</span></span>

    <span data-ttu-id="416db-123">Por exemplo, o servidor A contém objetos em "DC = Sales, DC = Fabrikam, DC = com".</span><span class="sxs-lookup"><span data-stu-id="416db-123">For example, Server A contains objects in "DC=Sales,DC=Fabrikam,DC=Com".</span></span> <span data-ttu-id="416db-124">O servidor B contém objetos em "DC = Seattle, DC = Sales, DC = Fabrikam, DC = com".</span><span class="sxs-lookup"><span data-stu-id="416db-124">Server B contains objects in "DC=Seattle,DC=Sales,DC=Fabrikam,DC=Com".</span></span> <span data-ttu-id="416db-125">Lembre-se de que o nome do servidor B forma um caminho contíguo do servidor A. Quando um cliente contata o servidor A, o solicita uma pesquisa de subárvore em "DC = Sales, DC = Fabrikam, DC = com" e especifica a referência a ser um tipo subordinado, o seguinte evento ocorre:</span><span class="sxs-lookup"><span data-stu-id="416db-125">Be aware that the name of Server B forms a contiguous path from Server A. When a client contacts Server A, requests a subtree search on "DC=Sales,DC=Fabrikam,DC=Com", and specifies the referral to be a subordinate type, the following event occurs:</span></span>

    -   <span data-ttu-id="416db-126">O servidor A retorna todos os objetos que ele conhece em seu escopo.</span><span class="sxs-lookup"><span data-stu-id="416db-126">Server A returns all objects that it knows within its scope.</span></span>
    -   <span data-ttu-id="416db-127">O servidor A informa ao cliente que os objetos em "DC = Seattle, DC = Sales, DC = Fabrikam, DC = COM" podem ser encontrados no servidor B.</span><span class="sxs-lookup"><span data-stu-id="416db-127">Server A informs the client that objects in "DC=Seattle,DC=Sales,DC=Fabrikam,DC=COM" can be found on Server B.</span></span>

    <span data-ttu-id="416db-128">O cliente pode optar por contatar o servidor B. Nesse caso, ocorre o seguinte evento:</span><span class="sxs-lookup"><span data-stu-id="416db-128">The client can choose to contact Server B. If so, the following event occurs:</span></span>

    -   <span data-ttu-id="416db-129">O servidor B responde com os objetos solicitados.</span><span class="sxs-lookup"><span data-stu-id="416db-129">Server B responds with the requested objects.</span></span>
    -   <span data-ttu-id="416db-130">Se o servidor B detectar outros servidores no caminho de nomenclatura contíguo e o processo continuar.</span><span class="sxs-lookup"><span data-stu-id="416db-130">If Server B detects other servers on the contiguous naming path and the process continues.</span></span>

-   <span data-ttu-id="416db-131">Sempre: o servidor gerará referências se a pesquisa puder ser resolvida com base no tipo externo ou no tipo subordinado.</span><span class="sxs-lookup"><span data-stu-id="416db-131">Always: The server generates referrals if the search can be resolved based on either the external type or the subordinate type.</span></span>

> [!Note]  
> <span data-ttu-id="416db-132">No Active Directory, o catálogo global contém todos os objetos em uma determinada empresa.</span><span class="sxs-lookup"><span data-stu-id="416db-132">In Active Directory, the global catalog contains all objects in a given enterprise.</span></span> <span data-ttu-id="416db-133">Pesquisar um servidor de catálogo global produz um desempenho melhor do que a busca de referências de um servidor para outro.</span><span class="sxs-lookup"><span data-stu-id="416db-133">Searching a global catalog server yields better performance than pursuing referrals from one server to another.</span></span>

 

<span data-ttu-id="416db-134">Na maioria dos casos, a caça de referência será transparente para o chamador.</span><span class="sxs-lookup"><span data-stu-id="416db-134">In most cases, the referral chasing will be transparent to the caller.</span></span> <span data-ttu-id="416db-135">Se a referência for para um objeto em um domínio ou floresta diferente, a API LDAP subjacente tentará usar as credenciais atuais para associar ao destino da referência.</span><span class="sxs-lookup"><span data-stu-id="416db-135">If the referral is to an object in a different domain or forest, the underlying LDAP API will attempt to use the current credentials to bind to the target of the referral.</span></span> <span data-ttu-id="416db-136">Se isso for bem-sucedido, a caça de referência será transparente.</span><span class="sxs-lookup"><span data-stu-id="416db-136">If this is successful, the referral chasing will be transparent.</span></span> <span data-ttu-id="416db-137">Se isso não for bem-sucedido, a referência e um código de erro de referência serão retornados.</span><span class="sxs-lookup"><span data-stu-id="416db-137">If this is not successful, the referral and a referral error code will be returned.</span></span>

<span data-ttu-id="416db-138">Para obter mais informações sobre como usar as opções de caça de referência com uma interface de pesquisa específica, consulte:</span><span class="sxs-lookup"><span data-stu-id="416db-138">For more information about using the referral chasing options with a specific search interface, see:</span></span>

-   [<span data-ttu-id="416db-139">Caça de referência com IDirectorySearch</span><span class="sxs-lookup"><span data-stu-id="416db-139">Referral Chasing with IDirectorySearch</span></span>](referral-chasing-with-idirectorysearch.md)
-   [<span data-ttu-id="416db-140">Pesquisando com ActiveX Data Objects</span><span class="sxs-lookup"><span data-stu-id="416db-140">Searching with ActiveX Data Objects</span></span>](searching-with-activex-data-objects-ado.md)
-   [<span data-ttu-id="416db-141">Pesquisando com OLE DB</span><span class="sxs-lookup"><span data-stu-id="416db-141">Searching with OLE DB</span></span>](searching-with-ole-db.md)

 

 