---
title: Considerações de segurança interface do usuário do Windows
description: Este tópico fornece informações sobre considerações de segurança na interface do usuário do Windows.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Interface do usuário do Windows, segurança
- segurança para interface do usuário do Windows
- segurança de cadeia de caracteres
- entrada do usuário, validação
- Validando entradas do usuário
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b714de3ab12cb10d6e5d9a2e251c34eeeff7a5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104007972"
---
# <a name="security-considerations-windows-user-interface"></a><span data-ttu-id="ad776-108">Considerações de segurança: interface do usuário do Windows</span><span class="sxs-lookup"><span data-stu-id="ad776-108">Security Considerations: Windows User Interface</span></span>

<span data-ttu-id="ad776-109">Este tópico fornece informações sobre considerações de segurança na interface do usuário do Windows.</span><span class="sxs-lookup"><span data-stu-id="ad776-109">This topic provides information about security considerations in the Windows User Interface.</span></span> <span data-ttu-id="ad776-110">Este tópico não fornece tudo o que você precisa saber sobre problemas de segurança.</span><span class="sxs-lookup"><span data-stu-id="ad776-110">This topic doesn't provide all you need to know about security issues.</span></span> <span data-ttu-id="ad776-111">Em vez disso, use-o como ponto de partida e referência para essa área de tecnologia.</span><span class="sxs-lookup"><span data-stu-id="ad776-111">Instead, use it as a starting point and reference for this technology area.</span></span>

<span data-ttu-id="ad776-112">Com o aumento na interconectividade entre computadores, os desenvolvedores agora devem se preocupar com a segurança do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad776-112">With the increase in computer interconnectivity, developers now must concern themselves with application security.</span></span> <span data-ttu-id="ad776-113">No entanto, a segurança também aprimora a segurança geral do aplicativo e a robustez; Portanto, é outra maneira que o desenvolvedor pode fornecer uma boa experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="ad776-113">However, security also enhances general application safety and robustness; therefore it is another way that the developer can provide a good user experience.</span></span> <span data-ttu-id="ad776-114">Os tópicos a seguir discutem algumas possíveis preocupações de segurança ao usar a interface do usuário do Windows.</span><span class="sxs-lookup"><span data-stu-id="ad776-114">The following topics discuss some potential security concerns when using the Windows User Interface.</span></span>

-   [<span data-ttu-id="ad776-115">Considerações sobre cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="ad776-115">String Considerations</span></span>](#string-considerations)
-   [<span data-ttu-id="ad776-116">Entrada do usuário</span><span class="sxs-lookup"><span data-stu-id="ad776-116">User Input</span></span>](#user-input)
-   [<span data-ttu-id="ad776-117">Alertas de segurança</span><span class="sxs-lookup"><span data-stu-id="ad776-117">Security Alerts</span></span>](#security-alerts)
-   [<span data-ttu-id="ad776-118">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ad776-118">Related topics</span></span>](#related-topics)

## <a name="string-considerations"></a><span data-ttu-id="ad776-119">Considerações sobre cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="ad776-119">String Considerations</span></span>

<span data-ttu-id="ad776-120">Muitas funções, mensagens e macros usam cadeias de caracteres em seus parâmetros.</span><span class="sxs-lookup"><span data-stu-id="ad776-120">Many functions, messages, and macros use strings in their parameters.</span></span> <span data-ttu-id="ad776-121">No entanto, geralmente as cadeias de caracteres não são verificadas quanto ao término nulo ou para comprimento.</span><span class="sxs-lookup"><span data-stu-id="ad776-121">However, often the strings are not checked for null-termination or for length.</span></span> <span data-ttu-id="ad776-122">Uma preocupação relacionada é calcular o comprimento de uma cadeia de caracteres ou buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-122">A related concern is miscalculating the length of a string or buffer.</span></span> <span data-ttu-id="ad776-123">Em ambos os casos, isso pode levar ao estouro de buffer ou truncamento de dados, o que pode afetar o aplicativo de forma adversa.</span><span class="sxs-lookup"><span data-stu-id="ad776-123">In either case, this can lead to buffer overflow or data truncation, which can affect your application adversely.</span></span> <span data-ttu-id="ad776-124">Para obter mais informações sobre estouros de buffer e outras questões de segurança, consulte *escrevendo código seguro* por Michael Howard e David LeBlanc, Microsoft Press, 2002.</span><span class="sxs-lookup"><span data-stu-id="ad776-124">For more information about buffer overruns and other security concerns, see *Writing Secure Code* by Michael Howard and David Leblanc, Microsoft Press, 2002.</span></span>

<span data-ttu-id="ad776-125">Para manipular cadeias de caracteres de forma segura, você deve fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="ad776-125">To handle strings in a safe manner, you should do the following:</span></span>

-   <span data-ttu-id="ad776-126">Verifique as cadeias de caracteres para terminação nula ou para o comprimento correto, conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="ad776-126">Check strings for null-termination or for the proper length, as appropriate.</span></span>
-   <span data-ttu-id="ad776-127">Tome cuidado especial para determinar o comprimento de uma cadeia de caracteres ou buffer, especialmente quando ele contiver valores **TCHAR** .</span><span class="sxs-lookup"><span data-stu-id="ad776-127">Take special care to determine the length of a string or buffer, especially when it contains **TCHAR** values.</span></span>
-   <span data-ttu-id="ad776-128">Se você criar uma cadeia de caracteres ou usar uma cadeia de caracteres que foi usada anteriormente, inicialize-a para zero ou insira um terminador nulo, conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="ad776-128">If you create a string or use a string that was used previously, initialize it to zero or insert a null-terminator, as appropriate.</span></span>

<span data-ttu-id="ad776-129">Além disso, considere o uso das funções [StrSafe](/windows/desktop/menurc/strsafe-ovw) ao lidar com cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="ad776-129">In addition, consider using the [StrSafe](/windows/desktop/menurc/strsafe-ovw) functions when dealing with strings.</span></span> <span data-ttu-id="ad776-130">Essas funções foram projetadas para manipular cadeias de caracteres com segurança.</span><span class="sxs-lookup"><span data-stu-id="ad776-130">These functions are designed to handle strings safely.</span></span>

## <a name="user-input"></a><span data-ttu-id="ad776-131">Entrada do usuário</span><span class="sxs-lookup"><span data-stu-id="ad776-131">User Input</span></span>

<span data-ttu-id="ad776-132">A interface do usuário do Windows está preocupada com o recebimento e a resposta a informações dos usuários.</span><span class="sxs-lookup"><span data-stu-id="ad776-132">The Windows user interface is concerned with getting and responding to information from users.</span></span> <span data-ttu-id="ad776-133">No entanto, os usuários que inserem dados incorretos podem interromper seu aplicativo, seja ou não pretendem fazer isso.</span><span class="sxs-lookup"><span data-stu-id="ad776-133">However, users who enter incorrect data can disrupt your application, whether or not they intend to do so.</span></span> <span data-ttu-id="ad776-134">Portanto, a regra cardeal é que toda a entrada deve ser validada.</span><span class="sxs-lookup"><span data-stu-id="ad776-134">Thus, the cardinal rule is that all input must be validated.</span></span>

<span data-ttu-id="ad776-135">De preocupação principal são dados de cadeia de caracteres, que são discutidos em [Considerações sobre cadeias de caracteres](#string-considerations).</span><span class="sxs-lookup"><span data-stu-id="ad776-135">Of primary concern is string data, which is discussed in [String Considerations](#string-considerations).</span></span> <span data-ttu-id="ad776-136">No entanto, todos os tipos de entrada devem ser validados antes de serem usados pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad776-136">However, all types of input should be validated before being used by your application.</span></span> <span data-ttu-id="ad776-137">Outra preocupação é quando os dados são validados em um ponto, mas são alterados antes de serem usados, por exemplo, ao receber mensagens que fornecem o comprimento do texto.</span><span class="sxs-lookup"><span data-stu-id="ad776-137">Another concern is when data is validated at one point but changes before it is used, for example, when receiving messages that give the length of text.</span></span> <span data-ttu-id="ad776-138">Portanto, se houver uma chance de que os dados possam ser alterados, você deverá verificar os dados antes de usá-los</span><span class="sxs-lookup"><span data-stu-id="ad776-138">So, if there is a chance the data might change, you should check the data just before you use it</span></span>

## <a name="security-alerts"></a><span data-ttu-id="ad776-139">Alertas de segurança</span><span class="sxs-lookup"><span data-stu-id="ad776-139">Security Alerts</span></span>

<span data-ttu-id="ad776-140">A tabela a seguir lista os recursos que, se usados incorretamente, podem comprometer a segurança de seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="ad776-140">The following table lists features that, if used incorrectly, can compromise the security of your applications.</span></span>



| <span data-ttu-id="ad776-141">Recurso</span><span class="sxs-lookup"><span data-stu-id="ad776-141">Feature</span></span>                                                                                                                                                   | <span data-ttu-id="ad776-142">Atenuação</span><span class="sxs-lookup"><span data-stu-id="ad776-142">Mitigation</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="ad776-143">**Getatomname**</span><span class="sxs-lookup"><span data-stu-id="ad776-143">**GetAtomName**</span></span>](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | <span data-ttu-id="ad776-144">Tenha cuidado ao especificar o tamanho do buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-144">Be careful when specifying the size of the buffer.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="ad776-145">**GlobalGetAtomName**</span><span class="sxs-lookup"><span data-stu-id="ad776-145">**GlobalGetAtomName**</span></span>](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | <span data-ttu-id="ad776-146">Os átomos de cadeia de caracteres global podem ser acessados por qualquer aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad776-146">Global string atoms are accessible to any application.</span></span> <span data-ttu-id="ad776-147">No entanto, se outro aplicativo estiver descuidado, ele poderá lidar com suas contagens de referência e excluí-los.</span><span class="sxs-lookup"><span data-stu-id="ad776-147">However, if another application is careless, it could mishandle their reference counts and delete them.</span></span> <span data-ttu-id="ad776-148">Em vez disso, você deve considerar o uso de átomos de inteiro global.</span><span class="sxs-lookup"><span data-stu-id="ad776-148">You should consider using global integer atoms instead.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="ad776-149">**ImpersonateDdeClientWindow**</span><span class="sxs-lookup"><span data-stu-id="ad776-149">**ImpersonateDdeClientWindow**</span></span>](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | <span data-ttu-id="ad776-150">Se a função falhar, as solicitações de cliente subsequentes serão feitas no contexto de segurança do processo de chamada.</span><span class="sxs-lookup"><span data-stu-id="ad776-150">If the function fails, subsequent client requests are made in the security context of the calling process.</span></span> <span data-ttu-id="ad776-151">Isso pode ser um problema se o processo de chamada estiver sendo executado como uma conta altamente privilegiada.</span><span class="sxs-lookup"><span data-stu-id="ad776-151">This can be a problem if the calling process is running as a highly privileged account.</span></span> <span data-ttu-id="ad776-152">Portanto, se a chamada falhar ou gerar um erro, não continue a execução da solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="ad776-152">Therefore, if the call fails or raises an error do not continue execution of the client request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="ad776-153">**DdeImpersonateClient**</span><span class="sxs-lookup"><span data-stu-id="ad776-153">**DdeImpersonateClient**</span></span>](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | <span data-ttu-id="ad776-154">Se a função falhar, as solicitações de cliente subsequentes serão feitas no contexto de segurança do processo de chamada.</span><span class="sxs-lookup"><span data-stu-id="ad776-154">If the function fails, subsequent client requests are made in the security context of the calling process.</span></span> <span data-ttu-id="ad776-155">Isso pode ser um problema se o processo de chamada estiver sendo executado como uma conta altamente privilegiada.</span><span class="sxs-lookup"><span data-stu-id="ad776-155">This can be a problem if the calling process is running as a highly privileged account.</span></span> <span data-ttu-id="ad776-156">Portanto, se a chamada falhar ou gerar um erro, não continue a execução da solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="ad776-156">Therefore, if the call fails or raises an error do not continue execution of the client request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="ad776-157">**GetClipboardFormatName**</span><span class="sxs-lookup"><span data-stu-id="ad776-157">**GetClipboardFormatName**</span></span>](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | <span data-ttu-id="ad776-158">Calcular incorretamente o tamanho adequado do buffer *lpszFormatName* , especialmente quando o aplicativo é usado nas versões ANSI e Unicode, pode causar um estouro de buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-158">Miscalculating the proper size of the *lpszFormatName* buffer, especially when the application is used in both ANSI and Unicode versions, can cause a buffer overflow.</span></span> <span data-ttu-id="ad776-159">Além disso, observe que a cadeia de caracteres será truncada se for maior do que o parâmetro *cchMaxCount* , o que pode levar à perda de informações.</span><span class="sxs-lookup"><span data-stu-id="ad776-159">Also, note that the string is truncated if it is longer than the *cchMaxCount* parameter, which can lead to loss of information.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="ad776-160">**Getmenustring**</span><span class="sxs-lookup"><span data-stu-id="ad776-160">**GetMenuString**</span></span>](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | <span data-ttu-id="ad776-161">O parâmetro *LPSTR* é um buffer **TCHAR** e *nMaxCount* é o comprimento da cadeia de caracteres do menu no **TCHAR** s.</span><span class="sxs-lookup"><span data-stu-id="ad776-161">The *lpString* parameter is a **TCHAR** buffer, and *nMaxCount* is the length of the menu string in **TCHAR** s.</span></span> <span data-ttu-id="ad776-162">O dimensionamento incorreto desses parâmetros pode ser o comprimento da cadeia de caracteres do menu em caracteres.</span><span class="sxs-lookup"><span data-stu-id="ad776-162">Sizing these parameters incorrectly can is the length of the menu string in characters.</span></span> <span data-ttu-id="ad776-163">O dimensionamento incorreto desses parâmetros pode causar truncamento da cadeia de caracteres, levando à possível perda de dados.</span><span class="sxs-lookup"><span data-stu-id="ad776-163">Sizing these parameters incorrectly can cause truncation of the string, leading to possible loss of data.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="ad776-164">[**GetStringTypeA**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**GetStringTypeEx**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew)</span><span class="sxs-lookup"><span data-stu-id="ad776-164">[**GetStringTypeA**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**GetStringTypeEx**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew)</span></span> | <span data-ttu-id="ad776-165">Para evitar um estouro de buffer, defina o tamanho do buffer *lpCharType* corretamente.</span><span class="sxs-lookup"><span data-stu-id="ad776-165">To avoid a buffer overflow, set the size of the *lpCharType* buffer correctly.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="ad776-166">**LoadLibrary**</span><span class="sxs-lookup"><span data-stu-id="ad776-166">**LoadLibrary**</span></span>](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | <span data-ttu-id="ad776-167">O uso incorreto de **LoadLibrary** pode comprometer a segurança do seu aplicativo carregando a dll errada.</span><span class="sxs-lookup"><span data-stu-id="ad776-167">Using **LoadLibrary** incorrectly can compromise the security of your application by loading the wrong DLL.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="ad776-168">**Cadeia de caracteres LoadString**</span><span class="sxs-lookup"><span data-stu-id="ad776-168">**LoadString**</span></span>](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | <span data-ttu-id="ad776-169">Uso incorreto inclui especificar o tamanho incorreto no parâmetro *nBufferMax* .</span><span class="sxs-lookup"><span data-stu-id="ad776-169">Incorrect use includes specifying the wrong size in the *nBufferMax* parameter.</span></span> <span data-ttu-id="ad776-170">Por exemplo, sizeof (*lpBuffer*) fornece o tamanho do buffer em bytes, o que pode levar a um estouro de buffer para a versão Unicode da função.</span><span class="sxs-lookup"><span data-stu-id="ad776-170">For example, sizeof(*lpBuffer*) gives the size of the buffer in bytes, which could lead to a buffer overflow for the Unicode version of the function.</span></span> <span data-ttu-id="ad776-171">As situações de estouro de buffer são a causa de muitos problemas de segurança em aplicativos.</span><span class="sxs-lookup"><span data-stu-id="ad776-171">Buffer overflow situations are the cause of many security problems in applications.</span></span> <span data-ttu-id="ad776-172">Nesse caso, o uso `sizeof(lpBuffer)/sizeof(TCHAR)` fornece o tamanho adequado do buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-172">In this case, using `sizeof(lpBuffer)/sizeof(TCHAR)` gives the proper size of the buffer.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="ad776-173">**lstrcat**</span><span class="sxs-lookup"><span data-stu-id="ad776-173">**lstrcat**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | <span data-ttu-id="ad776-174">Essa função usa SEH (manipulação de exceção estruturada) para capturar violações de acesso e outros erros.</span><span class="sxs-lookup"><span data-stu-id="ad776-174">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="ad776-175">Quando essa função captura erros SEH, ela retorna **NULL** sem o encerramento nulo da cadeia de caracteres e sem NULL sem o encerramento nulo da cadeia de caracteres e sem notificar o chamador do erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-175">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="ad776-176">O chamador não é seguro para supor que o espaço insuficiente é a condição de erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-176">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="ad776-177">O primeiro argumento, *lpString1*, deve ser grande o suficiente para manter *lpString2* e o fechamento ' \\ 0 '; caso contrário, poderá ocorrer uma saturação do buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-177">The first argument, *lpString1*, must be large enough to hold *lpString2* and the closing '\\0', otherwise a buffer overrun may occur.</span></span> <span data-ttu-id="ad776-178">As saturações de buffer podem levar a um ataque de negação de serviço contra o aplicativo se ocorrer uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="ad776-178">Buffer overruns may lead to a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="ad776-179">Na pior das hipóteses, uma saturação de buffer pode permitir que um invasor insira código executável em seu processo, especialmente se *lpString1* for um buffer baseado em pilha.</span><span class="sxs-lookup"><span data-stu-id="ad776-179">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="ad776-180">Considere o uso de uma das alternativas a seguir.</span><span class="sxs-lookup"><span data-stu-id="ad776-180">Consider using one of the following alternatives.</span></span> <span data-ttu-id="ad776-181">[**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) ou [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).</span><span class="sxs-lookup"><span data-stu-id="ad776-181">[**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) or [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).</span></span>                                                                                                                                                                                       |
| [<span data-ttu-id="ad776-182">**lstrcpy**</span><span class="sxs-lookup"><span data-stu-id="ad776-182">**lstrcpy**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | <span data-ttu-id="ad776-183">Essa função usa SEH (manipulação de exceção estruturada) para capturar violações de acesso e outros erros.</span><span class="sxs-lookup"><span data-stu-id="ad776-183">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="ad776-184">Quando essa função captura erros SEH, ela retorna **NULL** sem o encerramento nulo da cadeia de caracteres e sem NULL sem o encerramento nulo da cadeia de caracteres e sem notificar o chamador do erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-184">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="ad776-185">O chamador não é seguro para supor que o espaço insuficiente é a condição de erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-185">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="ad776-186">O primeiro argumento, *lpString1*, deve ser grande o suficiente para manter *lpString2* e o fechamento ' \\ 0 '; caso contrário, poderá ocorrer uma saturação do buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-186">The first argument, *lpString1*, must be large enough to hold *lpString2* and the closing '\\0', otherwise a buffer overrun may occur.</span></span> <span data-ttu-id="ad776-187">As saturações de buffer podem levar a um ataque de negação de serviço contra o aplicativo se ocorrer uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="ad776-187">Buffer overruns may lead to a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="ad776-188">Na pior das hipóteses, uma saturação de buffer pode permitir que um invasor insira código executável em seu processo, especialmente se *lpString1* for um buffer baseado em pilha.</span><span class="sxs-lookup"><span data-stu-id="ad776-188">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="ad776-189">Considere usar [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="ad776-189">Consider using [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) instead.</span></span>                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="ad776-190">**lstrcpyn**</span><span class="sxs-lookup"><span data-stu-id="ad776-190">**lstrcpyn**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | <span data-ttu-id="ad776-191">Essa função usa SEH (manipulação de exceção estruturada) para capturar violações de acesso e outros erros.</span><span class="sxs-lookup"><span data-stu-id="ad776-191">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="ad776-192">Quando essa função captura erros SEH, ela retorna **NULL** sem o encerramento nulo da cadeia de caracteres e sem NULL sem o encerramento nulo da cadeia de caracteres e sem notificar o chamador do erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-192">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="ad776-193">O chamador não é seguro para supor que o espaço insuficiente é a condição de erro.</span><span class="sxs-lookup"><span data-stu-id="ad776-193">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="ad776-194">Se *lpString1* não for grande o suficiente para conter a cadeia de caracteres copiada, poderá ocorrer uma saturação de buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-194">If *lpString1* is not large enough to contain the copied string, a buffer overrun can occur.</span></span> <span data-ttu-id="ad776-195">Além disso, ao copiar uma cadeia de caracteres inteira, observe que [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) retorna o número de bytes em vez de **WCHAR**, que **sizeof** retorna o número de bytes em vez de caracteres, o que é incorreto para a versão Unicode dessa função.</span><span class="sxs-lookup"><span data-stu-id="ad776-195">Also, when copying an entire string, note that [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) returns the number of bytes rather than **WCHAR**, that **sizeof** returns the number of bytes rather than characters, which is incorrect for the Unicode version of this function.</span></span> <span data-ttu-id="ad776-196">As saturações de buffer podem causar um ataque de negação de serviço contra o aplicativo se ocorrer uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="ad776-196">Buffer overruns can cause a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="ad776-197">Na pior das hipóteses, uma saturação de buffer pode permitir que um invasor insira código executável em seu processo, especialmente se *lpString1* for um buffer baseado em pilha.</span><span class="sxs-lookup"><span data-stu-id="ad776-197">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="ad776-198">Considere usar [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="ad776-198">Consider using [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) instead.</span></span> |
| [<span data-ttu-id="ad776-199">**lstrlen**</span><span class="sxs-lookup"><span data-stu-id="ad776-199">**lstrlen**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | <span data-ttu-id="ad776-200">[**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) pressupõe que a *LPSTR* é uma cadeia de caracteres terminada em nulo.</span><span class="sxs-lookup"><span data-stu-id="ad776-200">[**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) assumes that *lpString* is a null-terminated string.</span></span> <span data-ttu-id="ad776-201">Se não for, isso pode levar a uma saturação de buffer ou a um ataque de negação de serviço contra seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad776-201">If it is not, this could lead to a buffer overrun or a denial of service attack against your application.</span></span> <span data-ttu-id="ad776-202">Considere o uso de uma das alternativas a seguir.</span><span class="sxs-lookup"><span data-stu-id="ad776-202">Consider using one of the following alternatives.</span></span> <span data-ttu-id="ad776-203">[**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) ou [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).</span><span class="sxs-lookup"><span data-stu-id="ad776-203">[**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) or [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="ad776-204">**wsprintf**</span><span class="sxs-lookup"><span data-stu-id="ad776-204">**wsprintf**</span></span>](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | <span data-ttu-id="ad776-205">Não há garantia de que a cadeia de caracteres retornada em *lpOut* seja terminada em nulo.</span><span class="sxs-lookup"><span data-stu-id="ad776-205">The string returned in *lpOut* is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="ad776-206">Além disso, evite o formato% s, o que pode levar a uma saturação de buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-206">Also, avoid the %s format, which can lead to a buffer overrun.</span></span> <span data-ttu-id="ad776-207">Se ocorrer uma violação de acesso, isso causará uma negação de serviço em relação ao seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ad776-207">If an access violation occurs it causes a denial of service against your application.</span></span> <span data-ttu-id="ad776-208">Na pior das letras, um invasor pode injetar código executável.</span><span class="sxs-lookup"><span data-stu-id="ad776-208">In the worse case, an attacker can inject executable code.</span></span> <span data-ttu-id="ad776-209">Considere o uso de uma das alternativas a seguir.</span><span class="sxs-lookup"><span data-stu-id="ad776-209">Consider using one of the following alternatives.</span></span> <span data-ttu-id="ad776-210">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)ou [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="ad776-210">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="ad776-211">**wvsprintf**</span><span class="sxs-lookup"><span data-stu-id="ad776-211">**wvsprintf**</span></span>](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | <span data-ttu-id="ad776-212">Não há garantia de que a cadeia de caracteres retornada em *lpOutput* seja terminada em nulo.</span><span class="sxs-lookup"><span data-stu-id="ad776-212">The string returned in *lpOutput* is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="ad776-213">Além disso, evite o uso do formato% s, o que pode levar a uma saturação de buffer.</span><span class="sxs-lookup"><span data-stu-id="ad776-213">Also, avoid the use of the %s format, which can lead to a buffer overrun.</span></span> <span data-ttu-id="ad776-214">Isso pode levar a uma negação de serviço se resultar em uma violação de acesso ou um invasor pode injetar código executável.</span><span class="sxs-lookup"><span data-stu-id="ad776-214">This can lead to a denial of service if it results in an access violation, or an attacker may inject executable code.</span></span> <span data-ttu-id="ad776-215">Considere o uso de uma das alternativas a seguir.</span><span class="sxs-lookup"><span data-stu-id="ad776-215">Consider using one of the following alternatives.</span></span> <span data-ttu-id="ad776-216">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)ou [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="ad776-216">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a><span data-ttu-id="ad776-217">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ad776-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ad776-218">Microsoft Security</span><span class="sxs-lookup"><span data-stu-id="ad776-218">Microsoft Security</span></span>](https://www.microsoft.com/security/)
</dt> <dt>

[<span data-ttu-id="ad776-219">Segurança e identidade</span><span class="sxs-lookup"><span data-stu-id="ad776-219">Security and Identity</span></span>](/windows/desktop/security)
</dt> <dt>

<span data-ttu-id="ad776-220">[Índice de tos de como de segurança](/previous-versions/msp-n-p/ff650055(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="ad776-220">[Security How Tos Index](/previous-versions/msp-n-p/ff650055(v=pandp.10))</span></span>
</dt> <dt>

[<span data-ttu-id="ad776-221">Recursos de segurança do TechNet</span><span class="sxs-lookup"><span data-stu-id="ad776-221">TechNet Security Resources</span></span>](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[<span data-ttu-id="ad776-222">Práticas recomendadas para as APIs de segurança</span><span class="sxs-lookup"><span data-stu-id="ad776-222">Best Practices for the Security APIs</span></span>](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 