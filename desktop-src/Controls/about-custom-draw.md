---
title: Sobre o desenho personalizado
description: Esta seção contém informações gerais sobre a funcionalidade de desenho Personalizada e fornece uma visão geral conceitual de como um aplicativo pode dar suporte a desenho personalizado.
ms.assetid: dd104661-1e0c-4569-9753-817bcded1894
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 121a4df5aa6fab222a5c4387ebdcfba51a7977b2
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/09/2020
ms.locfileid: "104454424"
---
# <a name="about-custom-draw"></a><span data-ttu-id="5d7f9-103">Sobre o desenho personalizado</span><span class="sxs-lookup"><span data-stu-id="5d7f9-103">About Custom Draw</span></span>

<span data-ttu-id="5d7f9-104">Esta seção contém informações gerais sobre a funcionalidade de desenho Personalizada e fornece uma visão geral conceitual de como um aplicativo pode dar suporte a desenho personalizado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-104">This section contains general information about custom draw functionality and provides a conceptual overview of how an application can support custom draw.</span></span> <span data-ttu-id="5d7f9-105">Atualmente, os seguintes controles oferecem suporte à funcionalidade de desenho Personalizada:</span><span class="sxs-lookup"><span data-stu-id="5d7f9-105">Currently, the following controls support custom draw functionality:</span></span>

-   <span data-ttu-id="5d7f9-106">Controles de cabeçalho</span><span class="sxs-lookup"><span data-stu-id="5d7f9-106">Header controls</span></span>
-   <span data-ttu-id="5d7f9-107">Controles de exibição de lista</span><span class="sxs-lookup"><span data-stu-id="5d7f9-107">List-view controls</span></span>
-   <span data-ttu-id="5d7f9-108">Controles Rebar</span><span class="sxs-lookup"><span data-stu-id="5d7f9-108">Rebar controls</span></span>
-   <span data-ttu-id="5d7f9-109">Controles da barra de ferramentas</span><span class="sxs-lookup"><span data-stu-id="5d7f9-109">Toolbar controls</span></span>
-   <span data-ttu-id="5d7f9-110">Controles de dica de ferramenta</span><span class="sxs-lookup"><span data-stu-id="5d7f9-110">Tooltip controls</span></span>
-   <span data-ttu-id="5d7f9-111">Controles TrackBar</span><span class="sxs-lookup"><span data-stu-id="5d7f9-111">Trackbar controls</span></span>
-   <span data-ttu-id="5d7f9-112">Controles de exibição de árvore</span><span class="sxs-lookup"><span data-stu-id="5d7f9-112">Tree-view controls</span></span>

<!-- -->

-   [<span data-ttu-id="5d7f9-113">Sobre as mensagens de notificação de desenho personalizado</span><span class="sxs-lookup"><span data-stu-id="5d7f9-113">About Custom Draw Notification Messages</span></span>](#about-custom-draw-notification-messages)
-   [<span data-ttu-id="5d7f9-114">Ciclos de pintura, estágios de desenho e mensagens de notificação</span><span class="sxs-lookup"><span data-stu-id="5d7f9-114">Paint Cycles, Drawing Stages, and Notification Messages</span></span>](#paint-cycles-drawing-stages-and-notification-messages)
-   [<span data-ttu-id="5d7f9-115">Aproveitando os serviços personalizados de desenho</span><span class="sxs-lookup"><span data-stu-id="5d7f9-115">Taking Advantage of Custom Draw Services</span></span>](#taking-advantage-of-custom-draw-services)
    -   [<span data-ttu-id="5d7f9-116">Respondendo à notificação de prepintura</span><span class="sxs-lookup"><span data-stu-id="5d7f9-116">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
    -   [<span data-ttu-id="5d7f9-117">Solicitando notificações específicas do item</span><span class="sxs-lookup"><span data-stu-id="5d7f9-117">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
    -   [<span data-ttu-id="5d7f9-118">Desenhando o item por conta própria</span><span class="sxs-lookup"><span data-stu-id="5d7f9-118">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
    -   [<span data-ttu-id="5d7f9-119">Alterando fontes e cores</span><span class="sxs-lookup"><span data-stu-id="5d7f9-119">Changing fonts and colors</span></span>](#changing-fonts-and-colors)
-   [<span data-ttu-id="5d7f9-120">Desenho personalizado com controles List-View e Tree-View</span><span class="sxs-lookup"><span data-stu-id="5d7f9-120">Custom Draw With List-View and Tree-View Controls</span></span>](#custom-draw-with-list-view-and-tree-view-controls)
    -   [<span data-ttu-id="5d7f9-121">Desenho personalizado com controles de List-View</span><span class="sxs-lookup"><span data-stu-id="5d7f9-121">Custom Draw With List-View Controls</span></span>](#custom-draw-with-list-view-controls)
-   [<span data-ttu-id="5d7f9-122">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="5d7f9-122">Related topics</span></span>](#related-topics)

## <a name="about-custom-draw-notification-messages"></a><span data-ttu-id="5d7f9-123">Sobre as mensagens de notificação de desenho personalizado</span><span class="sxs-lookup"><span data-stu-id="5d7f9-123">About Custom Draw Notification Messages</span></span>

<span data-ttu-id="5d7f9-124">Todos os controles comuns que dão suporte a códigos de notificação [ \_ CUSTOMDRAW](nm-customdraw.md) de envio do nm e personalizados em pontos específicos durante operações de desenho.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-124">All common controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes at specific points during drawing operations.</span></span> <span data-ttu-id="5d7f9-125">Esses códigos de notificação descrevem as operações de desenho que se aplicam ao controle inteiro, bem como o desenho de operações específicas a itens dentro do controle.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-125">These notification codes describe drawing operations that apply to the entire control as well as drawing operations specific to items within the control.</span></span> <span data-ttu-id="5d7f9-126">Como muitos códigos de notificação, \_ as notificações nm CUSTOMDRAW são enviadas como mensagens de [**\_ notificação do WM**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-126">Like many notification codes, NM\_CUSTOMDRAW notifications are sent as [**WM\_NOTIFY**](wm-notify.md) messages.</span></span>

<span data-ttu-id="5d7f9-127">O parâmetro *lParam* de uma notificação de desenho Personalizada será o endereço de uma estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) ou de uma estrutura específica de controle que contém uma estrutura **NMCUSTOMDRAW** como seu primeiro membro.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-127">The *lParam* parameter of a custom draw notification will be the address of an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or a control-specific structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span> <span data-ttu-id="5d7f9-128">A tabela a seguir ilustra a relação entre os controles e as estruturas que eles usam.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-128">The following table illustrates the relationship between the controls and the structures they use.</span></span>



| <span data-ttu-id="5d7f9-129">Estrutura</span><span class="sxs-lookup"><span data-stu-id="5d7f9-129">Structure</span></span>                                | <span data-ttu-id="5d7f9-130">Usado por</span><span class="sxs-lookup"><span data-stu-id="5d7f9-130">Used by</span></span>                              |
|------------------------------------------|--------------------------------------|
| [<span data-ttu-id="5d7f9-131">**NMCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-131">**NMCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw)     | <span data-ttu-id="5d7f9-132">Controles Rebar, TrackBar e header</span><span class="sxs-lookup"><span data-stu-id="5d7f9-132">Rebar, trackbar, and header controls</span></span> |
| [<span data-ttu-id="5d7f9-133">**NMLVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-133">**NMLVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) | <span data-ttu-id="5d7f9-134">Controles de exibição de lista</span><span class="sxs-lookup"><span data-stu-id="5d7f9-134">List-view controls</span></span>                   |
| [<span data-ttu-id="5d7f9-135">**NMTBCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-135">**NMTBCUSTOMDRAW**</span></span>](/windows/desktop/api/Commctrl/ns-commctrl-nmtbcustomdraw) | <span data-ttu-id="5d7f9-136">Controles da barra de ferramentas</span><span class="sxs-lookup"><span data-stu-id="5d7f9-136">Toolbar controls</span></span>                     |
| [<span data-ttu-id="5d7f9-137">**NMTTCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-137">**NMTTCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmttcustomdraw) | <span data-ttu-id="5d7f9-138">Controles de dica de ferramenta</span><span class="sxs-lookup"><span data-stu-id="5d7f9-138">Tooltip controls</span></span>                     |
| [<span data-ttu-id="5d7f9-139">**NMTVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-139">**NMTVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) | <span data-ttu-id="5d7f9-140">Controles de exibição de árvore</span><span class="sxs-lookup"><span data-stu-id="5d7f9-140">Tree-view controls</span></span>                   |



 

## <a name="paint-cycles-drawing-stages-and-notification-messages"></a><span data-ttu-id="5d7f9-141">Ciclos de pintura, estágios de desenho e mensagens de notificação</span><span class="sxs-lookup"><span data-stu-id="5d7f9-141">Paint Cycles, Drawing Stages, and Notification Messages</span></span>

<span data-ttu-id="5d7f9-142">Como todos os aplicativos do Windows, os controles comuns pintam e apagam-se periodicamente com base nas mensagens recebidas do sistema ou de outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-142">Like all Windows applications, common controls periodically paint and erase themselves based on messages received from the system or other applications.</span></span> <span data-ttu-id="5d7f9-143">O processo de uma pintura de controle ou apagamento é chamado de *ciclo de pintura*.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-143">The process of a control painting or erasing itself is called a *paint cycle*.</span></span> <span data-ttu-id="5d7f9-144">Controles que dão suporte a códigos de notificação [ \_ CUSTOMDRAW](nm-customdraw.md) de envio de nm para desenho personalizado periodicamente por meio de cada ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-144">Controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes periodically through each paint cycle.</span></span> <span data-ttu-id="5d7f9-145">Esse código de notificação é acompanhado por uma estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) ou outra estrutura que contém uma estrutura **NMCUSTOMDRAW** como seu primeiro membro.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-145">This notification code is accompanied by an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or another structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span>

<span data-ttu-id="5d7f9-146">Uma informação que a estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) contém é o estágio atual do ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-146">One piece of information that the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure contains is the current stage of the paint cycle.</span></span> <span data-ttu-id="5d7f9-147">Isso é chamado de estágio de *desenho* e é representado pelo valor no membro **dwDrawStage** da estrutura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-147">This is referred to as the *draw stage* and is represented by the value in the structure's **dwDrawStage** member.</span></span> <span data-ttu-id="5d7f9-148">Um controle informa seu pai sobre quatro estágios básicos de desenho.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-148">A control informs its parent about four basic draw stages.</span></span> <span data-ttu-id="5d7f9-149">Esses estágios básico, ou global, de desenho são representados na estrutura pelos seguintes valores de sinalizador (definidos em commctrl. h).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-149">These basic, or global, draw stages are represented in the structure by the following flag values (defined in Commctrl.h).</span></span>



| <span data-ttu-id="5d7f9-150">Valores de estágio de desenho global</span><span class="sxs-lookup"><span data-stu-id="5d7f9-150">Global draw stage values</span></span> | <span data-ttu-id="5d7f9-151">Descrição</span><span class="sxs-lookup"><span data-stu-id="5d7f9-151">Description</span></span>                        |
|--------------------------|------------------------------------|
| <span data-ttu-id="5d7f9-152">CDDS \_ PREpaint</span><span class="sxs-lookup"><span data-stu-id="5d7f9-152">CDDS\_PREPAINT</span></span>           | <span data-ttu-id="5d7f9-153">Antes do início do ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-153">Before the paint cycle begins.</span></span>     |
| <span data-ttu-id="5d7f9-154">CDDS \_</span><span class="sxs-lookup"><span data-stu-id="5d7f9-154">CDDS\_POSTPAINT</span></span>          | <span data-ttu-id="5d7f9-155">Após a conclusão do ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-155">After the paint cycle is complete.</span></span> |
| <span data-ttu-id="5d7f9-156">CDDS de \_ PREborracha</span><span class="sxs-lookup"><span data-stu-id="5d7f9-156">CDDS\_PREERASE</span></span>           | <span data-ttu-id="5d7f9-157">Antes do início do ciclo de apagamento.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-157">Before the erase cycle begins.</span></span>     |
| <span data-ttu-id="5d7f9-158">CDDS de \_ apagamento</span><span class="sxs-lookup"><span data-stu-id="5d7f9-158">CDDS\_POSTERASE</span></span>          | <span data-ttu-id="5d7f9-159">Após a conclusão do ciclo de apagamento.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-159">After the erase cycle is complete.</span></span> |



 

<span data-ttu-id="5d7f9-160">Cada um dos valores anteriores pode ser combinado com o \_ sinalizador de item CDDs para especificar estágios de desenho específicos de itens.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-160">Each of the preceding values can be combined with the CDDS\_ITEM flag to specify draw stages specific to items.</span></span> <span data-ttu-id="5d7f9-161">Para sua conveniência, commctrl. h contém os valores específicos de item a seguir.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-161">For convenience, Commctrl.h contains the following item-specific values.</span></span>



| <span data-ttu-id="5d7f9-162">Valores de estágio de desenho específicos do item</span><span class="sxs-lookup"><span data-stu-id="5d7f9-162">Item-specific draw stage values</span></span> | <span data-ttu-id="5d7f9-163">Descrição</span><span class="sxs-lookup"><span data-stu-id="5d7f9-163">Description</span></span>                                                                                                                                                                                                                                                                         |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5d7f9-164">CDDS \_ ITEMPREPAINT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-164">CDDS\_ITEMPREPAINT</span></span>              | <span data-ttu-id="5d7f9-165">Antes de um item ser desenhado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-165">Before an item is drawn.</span></span>                                                                                                                                                                                                                                                            |
| <span data-ttu-id="5d7f9-166">CDDS \_ ITEMPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-166">CDDS\_ITEMPOSTPAINT</span></span>             | <span data-ttu-id="5d7f9-167">Depois que um item foi desenhado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-167">After an item has been drawn.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="5d7f9-168">CDDS \_ ITEMPREERASE</span><span class="sxs-lookup"><span data-stu-id="5d7f9-168">CDDS\_ITEMPREERASE</span></span>              | <span data-ttu-id="5d7f9-169">Antes de um item ser apagado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-169">Before an item is erased.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="5d7f9-170">CDDS \_ ITEMPOSTERASE</span><span class="sxs-lookup"><span data-stu-id="5d7f9-170">CDDS\_ITEMPOSTERASE</span></span>             | <span data-ttu-id="5d7f9-171">Depois que um item foi apagado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-171">After an item has been erased.</span></span>                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5d7f9-172">subitem CDDS \_</span><span class="sxs-lookup"><span data-stu-id="5d7f9-172">CDDS\_SUBITEM</span></span>                   | <span data-ttu-id="5d7f9-173">[Versões de controle comuns](common-control-versions.md) 4,71.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-173">[Common Control Versions](common-control-versions.md) 4.71.</span></span> <span data-ttu-id="5d7f9-174">Sinalizador combinado com CDDS \_ ITEMPREPAINT ou CDDs \_ ITEMPOSTPAINT se um subitem estiver sendo desenhado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-174">Flag combined with CDDS\_ITEMPREPAINT or CDDS\_ITEMPOSTPAINT if a subitem is being drawn.</span></span> <span data-ttu-id="5d7f9-175">Isso só será definido se [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) for retornado de CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-175">This will only be set if [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) is returned from CDDS\_PREPAINT.</span></span> |



 

<span data-ttu-id="5d7f9-176">Seu aplicativo deve processar o código de notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) e retornar um valor específico que informará ao controle o que ele deve fazer.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-176">Your application must process the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code and then return a specific value that informs the control what it must do.</span></span> <span data-ttu-id="5d7f9-177">Consulte as seções a seguir para obter mais informações sobre esses valores de retorno.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-177">See the following sections for more information about these return values.</span></span>

## <a name="taking-advantage-of-custom-draw-services"></a><span data-ttu-id="5d7f9-178">Aproveitando os serviços personalizados de desenho</span><span class="sxs-lookup"><span data-stu-id="5d7f9-178">Taking Advantage of Custom Draw Services</span></span>

<span data-ttu-id="5d7f9-179">A chave para o aproveitamento da funcionalidade de desenho Personalizada é responder aos códigos de notificação do [nm \_ CUSTOMDRAW](nm-customdraw.md) que um controle envia.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-179">The key to harnessing custom draw functionality is in responding to the [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes that a control sends.</span></span> <span data-ttu-id="5d7f9-180">Os valores de retorno que seu aplicativo envia em resposta a essas notificações determinam o comportamento do controle para esse ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-180">The return values your application sends in response to these notifications determine the control's behavior for that paint cycle.</span></span>

<span data-ttu-id="5d7f9-181">Esta seção contém informações sobre como seu aplicativo pode usar os valores de retorno de notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) para determinar o comportamento do controle.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-181">This section contains information about how your application can use [NM\_CUSTOMDRAW](nm-customdraw.md) notification return values to determine the control's behavior.</span></span>

<span data-ttu-id="5d7f9-182">Os detalhes são divididos nos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="5d7f9-182">Details are broken into the following topics:</span></span>

-   [<span data-ttu-id="5d7f9-183">Respondendo à notificação de prepintura</span><span class="sxs-lookup"><span data-stu-id="5d7f9-183">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
-   [<span data-ttu-id="5d7f9-184">Solicitando notificações específicas do item</span><span class="sxs-lookup"><span data-stu-id="5d7f9-184">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
-   [<span data-ttu-id="5d7f9-185">Desenhando o item por conta própria</span><span class="sxs-lookup"><span data-stu-id="5d7f9-185">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
-   [<span data-ttu-id="5d7f9-186">Alterando fontes e cores</span><span class="sxs-lookup"><span data-stu-id="5d7f9-186">Changing fonts and colors</span></span>](#changing-fonts-and-colors)

### <a name="responding-to-the-prepaint-notification"></a><span data-ttu-id="5d7f9-187">Respondendo à notificação de prepintura</span><span class="sxs-lookup"><span data-stu-id="5d7f9-187">Responding to the prepaint notification</span></span>

<span data-ttu-id="5d7f9-188">No início de cada ciclo de pintura, o controle envia o código de notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) , especificando o \_ valor de CDDs PrePaint no membro **dwDrawStage** da estrutura nm CUSTOMDRAW que o acompanha \_ .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-188">At the beginning of each paint cycle, the control sends the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code, specifying the CDDS\_PREPAINT value in the **dwDrawStage** member of the accompanying NM\_CUSTOMDRAW structure.</span></span> <span data-ttu-id="5d7f9-189">O valor que seu aplicativo retorna para essa primeira notificação determina como e quando o controle envia notificações de desenho personalizadas subsequentes para o restante desse ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-189">The value that your application returns to this first notification dictates how and when the control sends subsequent custom draw notifications for the rest of that paint cycle.</span></span> <span data-ttu-id="5d7f9-190">Seu aplicativo pode retornar uma combinação dos sinalizadores a seguir em resposta à primeira notificação.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-190">Your application can return a combination of the following flags in response to the first notification.</span></span>



| <span data-ttu-id="5d7f9-191">Retornar valor</span><span class="sxs-lookup"><span data-stu-id="5d7f9-191">Return value</span></span>            | <span data-ttu-id="5d7f9-192">Efeito</span><span class="sxs-lookup"><span data-stu-id="5d7f9-192">Effect</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5d7f9-193">dopadrão CDRF \_</span><span class="sxs-lookup"><span data-stu-id="5d7f9-193">CDRF\_DODEFAULT</span></span>         | <span data-ttu-id="5d7f9-194">O controle será desenhado em si mesmo.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-194">The control will draw itself.</span></span> <span data-ttu-id="5d7f9-195">Ele não enviará notificações [de \_ CUSTOMDRAW nm](nm-customdraw.md) adicionais para este ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-195">It will not send additional [NM\_CUSTOMDRAW](nm-customdraw.md) notifications for this paint cycle.</span></span> <span data-ttu-id="5d7f9-196">Esse sinalizador não pode ser usado com nenhum outro sinalizador.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-196">This flag cannot be used with any other flag.</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="5d7f9-197">doborracha CDRF \_</span><span class="sxs-lookup"><span data-stu-id="5d7f9-197">CDRF\_DOERASE</span></span>           | <span data-ttu-id="5d7f9-198">O controle só desenhará o plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-198">The control will only draw the background.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="5d7f9-199">CDRF \_ NEWFONT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-199">CDRF\_NEWFONT</span></span>           | <span data-ttu-id="5d7f9-200">Seu aplicativo especificou uma nova fonte para o item; o controle usará a nova fonte.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-200">Your application specified a new font for the item; the control will use the new font.</span></span> <span data-ttu-id="5d7f9-201">Para obter mais informações sobre como alterar fontes, consulte [alterando fontes e cores](#changing-fonts-and-colors).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-201">For more information on changing fonts, see [Changing fonts and colors](#changing-fonts-and-colors).</span></span> <span data-ttu-id="5d7f9-202">Isso ocorre quando **dwDrawStage** é igual a CDDs \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-202">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                       |
| <span data-ttu-id="5d7f9-203">CDRF \_ NOTIFYITEMDRAW</span><span class="sxs-lookup"><span data-stu-id="5d7f9-203">CDRF\_NOTIFYITEMDRAW</span></span>    | <span data-ttu-id="5d7f9-204">O controle notificará o pai de qualquer operação de desenho específica de item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-204">The control will notify the parent of any item-specific drawing operations.</span></span> <span data-ttu-id="5d7f9-205">Ele enviará códigos de notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) antes e depois de desenhar os itens. Isso ocorre quando **dwDrawStage** é igual a CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-205">It will send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes before and after it draws items.This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                       |
| <span data-ttu-id="5d7f9-206">CDRF \_ NOTIFYPOSTERASE</span><span class="sxs-lookup"><span data-stu-id="5d7f9-206">CDRF\_NOTIFYPOSTERASE</span></span>   | <span data-ttu-id="5d7f9-207">O controle notificará o pai depois de apagar um item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-207">The control will notify the parent after erasing an item.</span></span> <span data-ttu-id="5d7f9-208">Isso ocorre quando **dwDrawStage** é igual a CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-208">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="5d7f9-209">CDRF \_ NOTIFYPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-209">CDRF\_NOTIFYPOSTPAINT</span></span>   | <span data-ttu-id="5d7f9-210">O controle enviará uma notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) quando o ciclo de pintura de todo o controle for concluído.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-210">The control will send an [NM\_CUSTOMDRAW](nm-customdraw.md) notification when the painting cycle for the entire control is complete.</span></span> <span data-ttu-id="5d7f9-211">Isso ocorre quando **dwDrawStage** é igual a CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-211">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5d7f9-212">CDRF \_ NOTIFYSUBITEMDRAW</span><span class="sxs-lookup"><span data-stu-id="5d7f9-212">CDRF\_NOTIFYSUBITEMDRAW</span></span> | <span data-ttu-id="5d7f9-213">[Versão 4,71](common-control-versions.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-213">[Version 4.71](common-control-versions.md).</span></span> <span data-ttu-id="5d7f9-214">Seu aplicativo receberá uma notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) com **dwDrawStage** definido como CDDs \_ ITEMPREPAINT \| CDDs \_ subitem antes de cada subitem de exibição de lista ser desenhado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-214">Your application will receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT \| CDDS\_SUBITEM before each list-view subitem is drawn.</span></span> <span data-ttu-id="5d7f9-215">Em seguida, você pode especificar a fonte e a cor de cada subitem separadamente ou retornar [**CDRF \_ DODEFAULT**](cdrf-constants.md) para processamento padrão.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-215">You can then specify font and color for each subitem separately or return [**CDRF\_DODEFAULT**](cdrf-constants.md) for default processing.</span></span> <span data-ttu-id="5d7f9-216">Isso ocorre quando **dwDrawStage** é igual a CDDs \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-216">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span> |
| <span data-ttu-id="5d7f9-217">CDRF \_ SKIPDEFAULT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-217">CDRF\_SKIPDEFAULT</span></span>       | <span data-ttu-id="5d7f9-218">Seu aplicativo desenhou o item manualmente.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-218">Your application drew the item manually.</span></span> <span data-ttu-id="5d7f9-219">O controle não vai desenhar o item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-219">The control will not draw the item.</span></span> <span data-ttu-id="5d7f9-220">Isso ocorre quando **dwDrawStage** é igual a CDDs \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-220">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5d7f9-221">CDRF \_ SKIPPOSTPAINT</span><span class="sxs-lookup"><span data-stu-id="5d7f9-221">CDRF\_SKIPPOSTPAINT</span></span>     | <span data-ttu-id="5d7f9-222">O controle não desenhará o retângulo de foco em um item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-222">The control will not draw the focus rectangle around an item.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                 |



 

### <a name="requesting-item-specific-notifications"></a><span data-ttu-id="5d7f9-223">Solicitando notificações específicas do item</span><span class="sxs-lookup"><span data-stu-id="5d7f9-223">Requesting item-specific notifications</span></span>

<span data-ttu-id="5d7f9-224">Se seu aplicativo retornar [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) à notificação de desenho personalizado pretinta inicial, o controle enviará notificações para cada item que ele desenha durante esse ciclo de pintura.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-224">If your application returns [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) to the initial prepaint custom draw notification, the control will send notifications for each item it draws during that paint cycle.</span></span> <span data-ttu-id="5d7f9-225">Essas notificações específicas de item terão o valor CDDS \_ ITEMPREPAINT no membro **dwDrawStage** da estrutura de [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) que o acompanha.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-225">These item-specific notifications will have the CDDS\_ITEMPREPAINT value in the **dwDrawStage** member of the accompanying [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure.</span></span> <span data-ttu-id="5d7f9-226">Você pode solicitar que o controle envie outra notificação quando terminar de desenhar o item, retornando [**CDRF \_ NOTIFYPOSTPAINT**](cdrf-constants.md) a essas notificações específicas de item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-226">You can request that the control send another notification when it is finished drawing the item by returning [**CDRF\_NOTIFYPOSTPAINT**](cdrf-constants.md) to these item-specific notifications.</span></span> <span data-ttu-id="5d7f9-227">Caso contrário, [**retornará \_ DODEFAULT CDRF**](cdrf-constants.md) e o controle não notificará a janela pai até que comece a desenhar o próximo item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-227">Otherwise, return [**CDRF\_DODEFAULT**](cdrf-constants.md) and the control will not notify the parent window until it starts to draw the next item.</span></span>

### <a name="drawing-the-item-yourself"></a><span data-ttu-id="5d7f9-228">Desenhando o item por conta própria</span><span class="sxs-lookup"><span data-stu-id="5d7f9-228">Drawing the item yourself</span></span>

<span data-ttu-id="5d7f9-229">Se seu aplicativo desenha o item inteiro, retorne [**CDRF \_ SKIPDEFAULT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-229">If your application draws the entire item, return [**CDRF\_SKIPDEFAULT**](cdrf-constants.md).</span></span> <span data-ttu-id="5d7f9-230">Isso permite que o controle ignore itens que não precisam ser desenhados, diminuindo assim a sobrecarga do sistema.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-230">This allows the control to skip items that it does not need to draw, thereby decreasing system overhead.</span></span> <span data-ttu-id="5d7f9-231">Tenha em mente que retornar esse valor significa que o controle não desenhará nenhuma parte do item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-231">Keep in mind that returning this value means the control will not draw any portion of the item.</span></span>

### <a name="changing-fonts-and-colors"></a><span data-ttu-id="5d7f9-232">Alterando fontes e cores</span><span class="sxs-lookup"><span data-stu-id="5d7f9-232">Changing fonts and colors</span></span>

<span data-ttu-id="5d7f9-233">Seu aplicativo pode usar o Draw personalizado para alterar a fonte de um item.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-233">Your application can use custom draw to change an item's font.</span></span> <span data-ttu-id="5d7f9-234">Basta selecionar o HFONT que você deseja no contexto do dispositivo especificado pelo membro **HDC** da estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associada à notificação de desenho Personalizada.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-234">Simply select the HFONT you want into the device context specified by the **hdc** member of the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure associated with the custom draw notification.</span></span> <span data-ttu-id="5d7f9-235">Como a fonte selecionada pode ter métricas diferentes da fonte padrão, certifique-se de incluir o [**CDRF \_ NEWFONT**](cdrf-constants.md) bit no valor de retorno para a mensagem de notificação.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-235">Since the font you select might have different metrics than the default font, make sure you include the [**CDRF\_NEWFONT**](cdrf-constants.md) bit in the return value for the notification message.</span></span> <span data-ttu-id="5d7f9-236">Para obter mais informações sobre como usar essa funcionalidade, consulte o código de exemplo em [usando o desenho personalizado](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-236">For more information on using this functionality, see the sample code in [Using Custom Draw](using-custom-draw.md).</span></span> <span data-ttu-id="5d7f9-237">A fonte que seu aplicativo especifica é usada para exibir esse item quando ele não está selecionado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-237">The font that your application specifies is used to display that item when it is not selected.</span></span> <span data-ttu-id="5d7f9-238">O desenho personalizado não permite que você altere os atributos de fonte dos itens selecionados.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-238">Custom draw does not allow you to change the font attributes for selected items.</span></span>

<span data-ttu-id="5d7f9-239">Para alterar as cores do texto de todos os controles que dão suporte a desenho personalizado, exceto para exibição de lista e exibição de árvore, basta definir o texto desejado e as cores do plano de fundo no contexto do dispositivo fornecido na estrutura de notificação de desenho personalizada com as funções [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) e [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-239">To change text colors for all controls that support custom draw except for the list view and tree view, simply set the desired text and background colors in the device context supplied in the custom draw notification structure with the [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) and [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) functions.</span></span> <span data-ttu-id="5d7f9-240">Para modificar as cores do texto no modo de exibição de lista ou de árvore, você precisa posicionar os valores de cor desejados nos membros **clrText** e **ClrTextBk** da estrutura [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) ou [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-240">To modify the text colors in the list view or tree view, you need to place the desired color values in the **clrText** and **clrTextBk** members of the [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) or [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) structure.</span></span>

> [!Note]  
> <span data-ttu-id="5d7f9-241">Antes da [versão 6,0](common-control-versions.md) dos controles comuns, as barras de ferramentas ignoram o sinalizador [**CDRF \_ NEWFONT**](cdrf-constants.md) .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-241">Prior to [Version 6.0](common-control-versions.md) of the common controls, toolbars ignore the [**CDRF\_NEWFONT**](cdrf-constants.md) flag.</span></span> <span data-ttu-id="5d7f9-242">A versão 6,0 dá suporte ao sinalizador **CDRF \_ NEWFONT** e você pode usá-lo para selecionar uma fonte diferente para a barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-242">Version 6.0 supports the **CDRF\_NEWFONT** flag, and you can use it to select a different font for the toolbar.</span></span> <span data-ttu-id="5d7f9-243">No entanto, você não pode alterar a cor de uma barra de ferramentas quando um estilo visual está ativo.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-243">However, you cannot change a toolbar's color when a visual style is active.</span></span> <span data-ttu-id="5d7f9-244">Para alterar a cor de uma barra de ferramentas na versão 6,0, primeiro você deve desabilitar os estilos visuais chamando [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) e especificando nenhum estilo visual:</span><span class="sxs-lookup"><span data-stu-id="5d7f9-244">To change a toolbar's color in Version 6.0, you must first disable visual styles by calling [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) and specifying no visual style:</span></span>

 


```
SetWindowTheme (hwnd, "", "");
```



## <a name="custom-draw-with-list-view-and-tree-view-controls"></a><span data-ttu-id="5d7f9-245">Desenho personalizado com controles List-View e Tree-View</span><span class="sxs-lookup"><span data-stu-id="5d7f9-245">Custom Draw With List-View and Tree-View Controls</span></span>

<span data-ttu-id="5d7f9-246">Os controles mais comuns podem ser manipulados essencialmente da mesma forma.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-246">Most common controls can be handled in essentially the same way.</span></span> <span data-ttu-id="5d7f9-247">No entanto, os controles List-View e Tree-View têm alguns recursos que exigem uma abordagem um pouco diferente do desenho personalizado.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-247">However, the list-view and tree-view controls have some features that require a somewhat different approach to custom draw.</span></span>

<span data-ttu-id="5d7f9-248">Para a [versão 5,0](common-control-versions.md), esses dois controles podem exibir texto recortado se você alterar a fonte retornando [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-248">For [Version 5.0](common-control-versions.md), these two controls may display clipped text if you change the font by returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="5d7f9-249">Esse comportamento é necessário para compatibilidade com versões anteriores dos controles comuns.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-249">This behavior is necessary for backward compatibility with earlier versions of the common controls.</span></span> <span data-ttu-id="5d7f9-250">Se você quiser alterar a fonte de um modo de exibição de lista ou de exibição de árvore, obterá resultados melhores se enviar uma mensagem [**CCM \_ SetVersion**](ccm-setversion.md) com o valor *wParam* definido como 5 antes de adicionar qualquer item ao controle.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-250">If you want to change the font of a list-view or tree-view control, you will get better results if you send a [**CCM\_SETVERSION**](ccm-setversion.md) message with the *wParam* value set to 5 before adding any items to the control.</span></span> <span data-ttu-id="5d7f9-251">Para obter um exemplo de um controle de exibição de árvore que usa desenho personalizado, consulte o artigo da base de dados de conhecimento [exemplo: CustDTv ilustra o desenho personalizado em um TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-251">For an example of a tree-view control that uses custom draw see Knowledge Base article [SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span></span>

### <a name="custom-draw-with-list-view-controls"></a><span data-ttu-id="5d7f9-252">Desenho personalizado com controles de List-View</span><span class="sxs-lookup"><span data-stu-id="5d7f9-252">Custom Draw With List-View Controls</span></span>

<span data-ttu-id="5d7f9-253">Como os controles de exibição de lista têm subitens e vários modos de exibição, você precisará manipular a notificação do [nm \_ CUSTOMDRAW](nm-customdraw.md) um pouco diferente do que para os outros controles comuns.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-253">Because list-view controls have subitems and multiple display modes, you will need to handle the [NM\_CUSTOMDRAW](nm-customdraw.md) notification somewhat differently than for the other common controls.</span></span>

<span data-ttu-id="5d7f9-254">Para o modo de relatório, use o procedimento a seguir.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-254">For report mode, use the following procedure.</span></span>

1.  <span data-ttu-id="5d7f9-255">A primeira notificação de [ \_ CUSTOMDRAW nm](nm-customdraw.md) terá o membro **dwDrawStage** da estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associada definida como CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-255">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="5d7f9-256">Retornar [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-256">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="5d7f9-257">Em seguida, você receberá uma notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) com **dwDrawStage** definido como CDDs \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-257">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="5d7f9-258">Se você especificar novas fontes ou cores e retornar [**CDRF \_ NEWFONT**](cdrf-constants.md), todos os subitens do item serão alterados.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-258">If you specify new fonts or colors and return [**CDRF\_NEWFONT**](cdrf-constants.md), all subitems of the item will be changed.</span></span> <span data-ttu-id="5d7f9-259">Se desejar, em vez disso, manipular cada subitem separadamente, retorne [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-259">If you want instead to handle each subitem separately, return [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span></span>
3.  <span data-ttu-id="5d7f9-260">Se você retornou [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md) na etapa anterior, receberá uma notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) para cada SUBitem com **dwDrawStage** definido como CDDs \_ subitem CDDs \| \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-260">If you returned [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md) in the previous step, you will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification for each subitem with **dwDrawStage** set to CDDS\_SUBITEM \| CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="5d7f9-261">Para alterar a fonte ou a cor do subitem, especifique uma nova fonte ou cor e retorne [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-261">To change the font or color for that subitem, specify a new font or color and return [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span>

<span data-ttu-id="5d7f9-262">Para os modos de ícone grande, ícone pequeno e lista, use o procedimento a seguir.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-262">For the large icon, small icon, and list modes, use the following procedure.</span></span>

1.  <span data-ttu-id="5d7f9-263">A primeira notificação de [ \_ CUSTOMDRAW nm](nm-customdraw.md) terá o membro **dwDrawStage** da estrutura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associada definida como CDDs \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-263">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="5d7f9-264">Retornar [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-264">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="5d7f9-265">Em seguida, você receberá uma notificação [nm \_ CUSTOMDRAW](nm-customdraw.md) com **dwDrawStage** definido como CDDs \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="5d7f9-265">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="5d7f9-266">Você pode alterar as fontes ou cores de um item especificando novas fontes e cores e retornando [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-266">You can change the fonts or colors of an item by specifying new fonts and colors and returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="5d7f9-267">Como esses modos não têm subitens, você não receberá nenhuma notificação de CUSTOMDRAW NM adicional \_ .</span><span class="sxs-lookup"><span data-stu-id="5d7f9-267">Because these modes do not have subitems, you will not receive any additional NM\_CUSTOMDRAW notifications.</span></span>

<span data-ttu-id="5d7f9-268">Para obter um exemplo de um manipulador de notificação de [ \_ CUSTOMDRAW nm](nm-customdraw.md) de exibição de lista, consulte [usando o desenho personalizado](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="5d7f9-268">For an example of a list-view [NM\_CUSTOMDRAW](nm-customdraw.md) notification handler, see [Using Custom Draw](using-custom-draw.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="5d7f9-269">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="5d7f9-269">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="5d7f9-270">**Conceitua**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-270">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="5d7f9-271">Usando o desenho personalizado</span><span class="sxs-lookup"><span data-stu-id="5d7f9-271">Using Custom Draw</span></span>](using-custom-draw.md)
</dt> <dt>

[<span data-ttu-id="5d7f9-272">Referência de desenho Personalizada</span><span class="sxs-lookup"><span data-stu-id="5d7f9-272">Custom Draw Reference</span></span>](custom-draw-reference.md)
</dt> <dt>

<span data-ttu-id="5d7f9-273">**Outros recursos**</span><span class="sxs-lookup"><span data-stu-id="5d7f9-273">**Other Resources**</span></span>
</dt> <dt>

[<span data-ttu-id="5d7f9-274">EXEMPLO: CustDTv ilustra o desenho personalizado em um TreeView (Q248496)</span><span class="sxs-lookup"><span data-stu-id="5d7f9-274">SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)</span></span>]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496)
</dt> </dl>

 

 