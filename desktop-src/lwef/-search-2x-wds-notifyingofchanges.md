---
title: Notificando o índice de alterações (recursos de ambiente herdado do Windows)
description: Com o Microsoft Windows Desktop Search (WDS) 2,6, os manipuladores de protocolo para um determinado armazenamento de dados podem informar ao indexador do WDS quando os dados em seu armazenamento foram alterados.
ms.assetid: 700b1707-dd11-4a30-8f00-5c4aae1173ff
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6021cfe5cd7061a3d3255e56d08e665a6caedf03
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104163577"
---
# <a name="notifying-the-index-of-changes-legacy-windows-environment-features"></a><span data-ttu-id="71e5a-103">Notificando o índice de alterações (recursos de ambiente herdado do Windows)</span><span class="sxs-lookup"><span data-stu-id="71e5a-103">Notifying the Index of Changes (Legacy Windows Environment Features)</span></span>

> [!NOTE]
> <span data-ttu-id="71e5a-104">O Windows Desktop Search 2. x é uma tecnologia obsoleta que originalmente estava disponível como um suplemento para o Windows XP e o Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="71e5a-104">Windows Desktop Search 2.x is an obsolete technology that was originally available as an add-in for Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="71e5a-105">Em versões posteriores, use o [Windows Search](../search/-search-3x-wds-overview.md) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="71e5a-105">On later releases, use [Windows Search](../search/-search-3x-wds-overview.md) instead.</span></span>

<span data-ttu-id="71e5a-106">Com o Microsoft Windows Desktop Search (WDS) 2,6, os manipuladores de protocolo para um determinado armazenamento de dados podem informar ao indexador do WDS quando os dados em seu armazenamento foram alterados.</span><span class="sxs-lookup"><span data-stu-id="71e5a-106">With Microsoft Windows Desktop Search (WDS) 2.6, protocol handlers for a given data store can tell the WDS Indexer when data in their store has changed.</span></span> <span data-ttu-id="71e5a-107">Isso melhora o desempenho garantindo que o indexador não rastreie todo o armazenamento em índices incrementais.</span><span class="sxs-lookup"><span data-stu-id="71e5a-107">This improves performance by ensuring the Indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="71e5a-108">Usando APIs de notificação, os manipuladores de protocolo podem notificar o indexador de que um item foi movido ou excluído e pode adicionar escopos à fila de rastreamento do indexador WDS de URLs que exigem indexação.</span><span class="sxs-lookup"><span data-stu-id="71e5a-108">Using notification APIs, protocol handlers can notify the Indexer that an item has been moved or deleted, and they can add scopes to the WDS Indexer's crawl queue of URLs requiring indexing.</span></span> <span data-ttu-id="71e5a-109">A notificação é útil para aplicativos como email, em que o manipulador de protocolo monitora o repositório e notifica o indexador de que os itens foram alterados e exigem indexação.</span><span class="sxs-lookup"><span data-stu-id="71e5a-109">Notification is helpful for applications such as email, where the protocol handler monitors the store and notifies the Indexer that items have changed and require indexing.</span></span>

## <a name="isearchitemschangedsink"></a><span data-ttu-id="71e5a-110">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="71e5a-110">ISearchItemsChangedSink</span></span>

<span data-ttu-id="71e5a-111">Os manipuladores de Protocolo notificam o indexador de alterações por meio da interface [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) .</span><span class="sxs-lookup"><span data-stu-id="71e5a-111">Protocol handlers notify the Indexer of changes through the [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) interface.</span></span> <span data-ttu-id="71e5a-112">Informações sobre alterações de dados devem ser coletadas \_ em \_ estruturas de alteração de item de pesquisa e \_ tipo \_ de pesquisa de \_ tipos de enumeração de alteração e, em seguida, comunicadas ao indexador por meio do método **onitems** da interface **ISearchItemsChangedSink** .</span><span class="sxs-lookup"><span data-stu-id="71e5a-112">Information about data changes should be collected in SEARCH\_ITEM\_CHANGE structs and SEARCH\_KIND\_OF\_CHANGE enumeration types and then communicated to the Indexer through the **OnItemsChanged** method of the **ISearchItemsChangedSink** interface.</span></span>

<span data-ttu-id="71e5a-113">Para acessar essa interface, um manipulador de protocolo personalizado deve primeiro criar uma instância de um objeto [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) para obter acesso ao objeto [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="71e5a-113">To access this interface, a custom protocol handlers must first instantiate an [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) object to gain access to the [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="71e5a-114">A partir daí, uma instância pode criar um objeto [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) e notificar o indexador das alterações de dados.</span><span class="sxs-lookup"><span data-stu-id="71e5a-114">From there, one can instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) object and notify the Indexer of the data changes.</span></span>

<span data-ttu-id="71e5a-115">O método onitems permite coletar e comunicar alterações de dados no armazenamento de dados do cliente para iniciar a indexação.</span><span class="sxs-lookup"><span data-stu-id="71e5a-115">The OnItemsChanged method lets you collect and communicate data changes to your customer data store to initiate indexing.</span></span>



| <span data-ttu-id="71e5a-116">Direção</span><span class="sxs-lookup"><span data-stu-id="71e5a-116">Direction</span></span> | <span data-ttu-id="71e5a-117">Variável</span><span class="sxs-lookup"><span data-stu-id="71e5a-117">Variable</span></span>              | <span data-ttu-id="71e5a-118">Descrição</span><span class="sxs-lookup"><span data-stu-id="71e5a-118">Description</span></span>                                                              |
|-----------|-----------------------|--------------------------------------------------------------------------|
| <span data-ttu-id="71e5a-119">Em</span><span class="sxs-lookup"><span data-stu-id="71e5a-119">In</span></span>        | <span data-ttu-id="71e5a-120">dwNumberofChanges</span><span class="sxs-lookup"><span data-stu-id="71e5a-120">dwNumberofChanges</span></span>     | <span data-ttu-id="71e5a-121">Número total de alterações na notificação.</span><span class="sxs-lookup"><span data-stu-id="71e5a-121">Total number of changes in the notification.</span></span>                             |
| <span data-ttu-id="71e5a-122">Em</span><span class="sxs-lookup"><span data-stu-id="71e5a-122">In</span></span>        | <span data-ttu-id="71e5a-123">DataChangeEntries\[\]</span><span class="sxs-lookup"><span data-stu-id="71e5a-123">DataChangeEntries\[\]</span></span> | <span data-ttu-id="71e5a-124">Todas as notificações de alteração em uma matriz de estruturas de alteração de item de pesquisa \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="71e5a-124">All change notifications in an array of SEARCH\_ITEM\_CHANGE structures.</span></span> |
| <span data-ttu-id="71e5a-125">Saída</span><span class="sxs-lookup"><span data-stu-id="71e5a-125">Out</span></span>       | <span data-ttu-id="71e5a-126">dwBatchId</span><span class="sxs-lookup"><span data-stu-id="71e5a-126">dwBatchId</span></span>             | <span data-ttu-id="71e5a-127">A ID do lote que será devolvida com erros.</span><span class="sxs-lookup"><span data-stu-id="71e5a-127">The batch ID that will be passed back with errors.</span></span>                       |
| <span data-ttu-id="71e5a-128">Saída</span><span class="sxs-lookup"><span data-stu-id="71e5a-128">Out</span></span>       | <span data-ttu-id="71e5a-129">hrCompletionCodes\[\]</span><span class="sxs-lookup"><span data-stu-id="71e5a-129">hrCompletionCodes\[\]</span></span> | <span data-ttu-id="71e5a-130">Indica se cada URL foi aceita para indexação.</span><span class="sxs-lookup"><span data-stu-id="71e5a-130">Indicates whether each URL was accepted for indexing.</span></span>                    |



 

<span data-ttu-id="71e5a-131">A estrutura de alteração do item de pesquisa \_ \_ identifica o tipo de alteração que ocorreu, bem como a URL atual do item e a URL anterior, se aplicável.</span><span class="sxs-lookup"><span data-stu-id="71e5a-131">The SEARCH\_ITEM\_CHANGE structure identifies the kind of change that occurred as well as the item's current URL and previous URL, if applicable.</span></span> <span data-ttu-id="71e5a-132">A estrutura é definida da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="71e5a-132">The structure is defined as follows:</span></span>



| <span data-ttu-id="71e5a-133">Nome da Propriedade</span><span class="sxs-lookup"><span data-stu-id="71e5a-133">Property Name</span></span> | <span data-ttu-id="71e5a-134">Tipo de propriedade</span><span class="sxs-lookup"><span data-stu-id="71e5a-134">Property Type</span></span>                  | <span data-ttu-id="71e5a-135">Descrição</span><span class="sxs-lookup"><span data-stu-id="71e5a-135">Description</span></span>                                                                |
|---------------|--------------------------------|----------------------------------------------------------------------------|
| <span data-ttu-id="71e5a-136">Alteração</span><span class="sxs-lookup"><span data-stu-id="71e5a-136">Change</span></span>        | <span data-ttu-id="71e5a-137">Pesquisar \_ tipo \_ de \_ alteração</span><span class="sxs-lookup"><span data-stu-id="71e5a-137">SEARCH\_KIND\_OF\_CHANGE</span></span>       | <span data-ttu-id="71e5a-138">O tipo de alteração que está sendo notificado.</span><span class="sxs-lookup"><span data-stu-id="71e5a-138">The type of change that is being notified.</span></span>                                 |
| <span data-ttu-id="71e5a-139">URL</span><span class="sxs-lookup"><span data-stu-id="71e5a-139">URL</span></span>           | <span data-ttu-id="71e5a-140">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="71e5a-140">LPWSTR</span></span>                         | <span data-ttu-id="71e5a-141">A URL do objeto que foi alterado.</span><span class="sxs-lookup"><span data-stu-id="71e5a-141">The URL for the object that has changed.</span></span>                                   |
| <span data-ttu-id="71e5a-142">OldURL</span><span class="sxs-lookup"><span data-stu-id="71e5a-142">OldURL</span></span>        | <span data-ttu-id="71e5a-143">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="71e5a-143">LPWSTR</span></span>                         | <span data-ttu-id="71e5a-144">Se a notificação for uma movimentação, a URL antiga será fornecida e deverá ser exclusiva.</span><span class="sxs-lookup"><span data-stu-id="71e5a-144">If the notification is a move, the old URL is provided and must be unique.</span></span> |
| <span data-ttu-id="71e5a-145">Prioridade</span><span class="sxs-lookup"><span data-stu-id="71e5a-145">Priority</span></span>      | <span data-ttu-id="71e5a-146">\_prioridade de notificação de pesquisa \_</span><span class="sxs-lookup"><span data-stu-id="71e5a-146">SEARCH\_NOTIFICATION\_PRIORITY</span></span> | <span data-ttu-id="71e5a-147">A prioridade da alteração.</span><span class="sxs-lookup"><span data-stu-id="71e5a-147">The priority of the change.</span></span>                                                |



 

<span data-ttu-id="71e5a-148">O \_ tipo \_ de pesquisa de enumeração de \_ alteração é definido da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="71e5a-148">The SEARCH\_KIND\_OF\_CHANGE enumeration is defined as follows:</span></span>



| <span data-ttu-id="71e5a-149">Valor de enumeração</span><span class="sxs-lookup"><span data-stu-id="71e5a-149">Enum Value</span></span>                           | <span data-ttu-id="71e5a-150">Valor</span><span class="sxs-lookup"><span data-stu-id="71e5a-150">Value</span></span>   | <span data-ttu-id="71e5a-151">Descrição</span><span class="sxs-lookup"><span data-stu-id="71e5a-151">Description</span></span>                                                                                     |
|--------------------------------------|---------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="71e5a-152">\_Adicionar alteração de pesquisa \_</span><span class="sxs-lookup"><span data-stu-id="71e5a-152">SEARCH\_CHANGE\_ADD</span></span>                  | <span data-ttu-id="71e5a-153">0</span><span class="sxs-lookup"><span data-stu-id="71e5a-153">0</span></span>       | <span data-ttu-id="71e5a-154">A notificação é para uma URL adicional.</span><span class="sxs-lookup"><span data-stu-id="71e5a-154">The notification is for an additional URL.</span></span>                                                      |
| <span data-ttu-id="71e5a-155">Pesquisar \_ \_ excluir alteração</span><span class="sxs-lookup"><span data-stu-id="71e5a-155">SEARCH\_CHANGE\_DELETE</span></span>               | <span data-ttu-id="71e5a-156">1</span><span class="sxs-lookup"><span data-stu-id="71e5a-156">1</span></span>       | <span data-ttu-id="71e5a-157">A notificação é para a exclusão de uma URL.</span><span class="sxs-lookup"><span data-stu-id="71e5a-157">The notification is for the deletion of a URL.</span></span>                                                  |
| <span data-ttu-id="71e5a-158">Pesquisar \_ alterar \_ modificação</span><span class="sxs-lookup"><span data-stu-id="71e5a-158">SEARCH\_CHANGE\_MODIFY</span></span>               | <span data-ttu-id="71e5a-159">2</span><span class="sxs-lookup"><span data-stu-id="71e5a-159">2</span></span>       | <span data-ttu-id="71e5a-160">A notificação é que uma URL foi modificada.</span><span class="sxs-lookup"><span data-stu-id="71e5a-160">The notification is that a URL has been modified.</span></span>                                               |
| <span data-ttu-id="71e5a-161">Pesquisar \_ alterar \_ mover \_ renomear</span><span class="sxs-lookup"><span data-stu-id="71e5a-161">SEARCH\_CHANGE\_MOVE\_RENAME</span></span>         | <span data-ttu-id="71e5a-162">3</span><span class="sxs-lookup"><span data-stu-id="71e5a-162">3</span></span>       | <span data-ttu-id="71e5a-163">A notificação é para a movimentação e renomeação de um objeto para uma nova URL.</span><span class="sxs-lookup"><span data-stu-id="71e5a-163">The notification is for the move and rename of an object to a new URL.</span></span>                          |
| <span data-ttu-id="71e5a-164">Pesquisar \_ o \_ diretório de semântica de alteração \_</span><span class="sxs-lookup"><span data-stu-id="71e5a-164">SEARCH\_CHANGE\_SEMANTICS\_DIRECTORY</span></span> | <span data-ttu-id="71e5a-165">0x10000</span><span class="sxs-lookup"><span data-stu-id="71e5a-165">0x10000</span></span> | <span data-ttu-id="71e5a-166">A notificação é para uma URL de contêiner.</span><span class="sxs-lookup"><span data-stu-id="71e5a-166">The notification is for a container URL.</span></span>                                                        |
| <span data-ttu-id="71e5a-167">semântica de alteração de pesquisa \_ \_ \_ superficial</span><span class="sxs-lookup"><span data-stu-id="71e5a-167">SEARCH\_CHANGE\_SEMANTICS\_SHALLOW</span></span>   | <span data-ttu-id="71e5a-168">0x20000</span><span class="sxs-lookup"><span data-stu-id="71e5a-168">0x20000</span></span> | <span data-ttu-id="71e5a-169">A notificação é para uma URL de contêiner que deve ter apenas suas propriedades de contêiner indexadas.</span><span class="sxs-lookup"><span data-stu-id="71e5a-169">The notification is for a container URL that should only have its container properties indexed.</span></span> |
| <span data-ttu-id="71e5a-170">\_segurança de \_ semântica de alteração de pesquisa \_</span><span class="sxs-lookup"><span data-stu-id="71e5a-170">SEARCH\_CHANGE\_SEMANTICS\_SECURITY</span></span>  | <span data-ttu-id="71e5a-171">0x40000</span><span class="sxs-lookup"><span data-stu-id="71e5a-171">0x40000</span></span> | <span data-ttu-id="71e5a-172">A notificação é para uma URL ou URL de contêiner que teve suas propriedades de segurança alteradas.</span><span class="sxs-lookup"><span data-stu-id="71e5a-172">The notification is for a URL or container URL that has had its security properties changed.</span></span>    |



 

<span data-ttu-id="71e5a-173">A enumeração de prioridade de notificação de pesquisa \_ \_ é definida da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="71e5a-173">The SEARCH\_NOTIFICATION\_PRIORITY enumeration is defined as follows:</span></span>



| <span data-ttu-id="71e5a-174">Valor de enumeração</span><span class="sxs-lookup"><span data-stu-id="71e5a-174">Enum Value</span></span>               | <span data-ttu-id="71e5a-175">Valor</span><span class="sxs-lookup"><span data-stu-id="71e5a-175">Value</span></span> | <span data-ttu-id="71e5a-176">Descrição</span><span class="sxs-lookup"><span data-stu-id="71e5a-176">Description</span></span>                                                                                                                                                                    |
|--------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="71e5a-177">prioridade de pesquisa \_ normal \_</span><span class="sxs-lookup"><span data-stu-id="71e5a-177">SEARCH\_NORMAL\_PRIORITY</span></span> | <span data-ttu-id="71e5a-178">0</span><span class="sxs-lookup"><span data-stu-id="71e5a-178">0</span></span>     | <span data-ttu-id="71e5a-179">Somente uma prioridade normal deve ser usada ao indexar a URL.</span><span class="sxs-lookup"><span data-stu-id="71e5a-179">Only a normal priority should be used when indexing the URL.</span></span> <span data-ttu-id="71e5a-180">Essas notificações são processadas antes da indexação incremental normal em segundo plano dos arquivos e armazenamentos de um usuário.</span><span class="sxs-lookup"><span data-stu-id="71e5a-180">These notifications are processed before the normal background incremental indexing of a user's files and stores.</span></span> |



 

 

 
