---
description: Habilita o componente de servidor de um aplicativo de transporte para estabelecer um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto.
ms.assetid: eaa15fed-4438-4e43-9be3-aa100ca453c7
title: Função AcceptSecurityContext (geral) (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 41b3220e9304f63e1a6ac4f77b609e3cbbac8741
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103828696"
---
# <a name="acceptsecuritycontext-general-function"></a><span data-ttu-id="63c99-103">Função AcceptSecurityContext (geral)</span><span class="sxs-lookup"><span data-stu-id="63c99-103">AcceptSecurityContext (General) function</span></span>

<span data-ttu-id="63c99-104">A função **AcceptSecurityContext (geral)** permite que o componente de servidor de um aplicativo de transporte estabeleça um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto.</span><span class="sxs-lookup"><span data-stu-id="63c99-104">The **AcceptSecurityContext (General)** function enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client.</span></span> <span data-ttu-id="63c99-105">O cliente remoto usa a função [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md) para iniciar o processo de estabelecimento de um [*contexto de segurança*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-105">The remote client uses the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function to start the process of establishing a [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="63c99-106">O servidor pode exigir um ou mais tokens de resposta do cliente remoto para concluir o estabelecimento do [*contexto de segurança*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-106">The server can require one or more reply tokens from the remote client to complete establishing the [*security context*](../secgloss/s-gly.md).</span></span>

<span data-ttu-id="63c99-107">Para obter informações sobre como usar essa função com um SSP ( [*provedor de suporte de segurança*](../secgloss/s-gly.md) ) específico, consulte os tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="63c99-107">For information about using this function with a specific [*security support provider*](../secgloss/s-gly.md) (SSP), see the following topics.</span></span>



| <span data-ttu-id="63c99-108">Tópico</span><span class="sxs-lookup"><span data-stu-id="63c99-108">Topic</span></span>                                                                          | <span data-ttu-id="63c99-109">Descrição</span><span class="sxs-lookup"><span data-stu-id="63c99-109">Description</span></span>                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="63c99-110">**AcceptSecurityContext (CredSSP)**</span><span class="sxs-lookup"><span data-stu-id="63c99-110">**AcceptSecurityContext (CredSSP)**</span></span>](acceptsecuritycontext--credssp.md)     | <span data-ttu-id="63c99-111">Permite que o componente de servidor de um aplicativo de transporte estabeleça um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto usando o Credential Security Support Provider (CredSSP).</span><span class="sxs-lookup"><span data-stu-id="63c99-111">Allows the server component of a transport application establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client by using Credential Security Support Provider (CredSSP).</span></span><br/> |
| [<span data-ttu-id="63c99-112">**AcceptSecurityContext (resumo)**</span><span class="sxs-lookup"><span data-stu-id="63c99-112">**AcceptSecurityContext (Digest)**</span></span>](acceptsecuritycontext--digest.md)       | <span data-ttu-id="63c99-113">Habilita o componente de servidor de um aplicativo de transporte para estabelecer um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto que está usando o Digest.</span><span class="sxs-lookup"><span data-stu-id="63c99-113">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Digest.</span></span><br/>                                                                                                                  |
| [<span data-ttu-id="63c99-114">**AcceptSecurityContext (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="63c99-114">**AcceptSecurityContext (Kerberos)**</span></span>](acceptsecuritycontext--kerberos.md)   | <span data-ttu-id="63c99-115">Permite que o componente de servidor de um aplicativo de transporte estabeleça um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto que esteja usando o Kerberos.</span><span class="sxs-lookup"><span data-stu-id="63c99-115">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Kerberos.</span></span><br/>                                                                                                                |
| [<span data-ttu-id="63c99-116">**AcceptSecurityContext (negociar)**</span><span class="sxs-lookup"><span data-stu-id="63c99-116">**AcceptSecurityContext (Negotiate)**</span></span>](acceptsecuritycontext--negotiate.md) | <span data-ttu-id="63c99-117">Habilita o componente de servidor de um aplicativo de transporte para estabelecer um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto que está usando Negotiate.</span><span class="sxs-lookup"><span data-stu-id="63c99-117">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Negotiate.</span></span><br/>                                                                                                               |
| [<span data-ttu-id="63c99-118">**AcceptSecurityContext (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="63c99-118">**AcceptSecurityContext (NTLM)**</span></span>](acceptsecuritycontext--ntlm.md)           | <span data-ttu-id="63c99-119">Habilita o componente de servidor de um aplicativo de transporte para estabelecer um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto que está usando NTLM.</span><span class="sxs-lookup"><span data-stu-id="63c99-119">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using NTLM.</span></span><br/>                                                                                                                    |
| [<span data-ttu-id="63c99-120">**AcceptSecurityContext (Schannel)**</span><span class="sxs-lookup"><span data-stu-id="63c99-120">**AcceptSecurityContext (Schannel)**</span></span>](acceptsecuritycontext--schannel.md)   | <span data-ttu-id="63c99-121">Habilita o componente de servidor de um aplicativo de transporte para estabelecer um [*contexto de segurança*](../secgloss/s-gly.md) entre o servidor e um cliente remoto que está usando Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-121">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Schannel.</span></span><br/>                                                                                                                |



 

## <a name="syntax"></a><span data-ttu-id="63c99-122">Sintaxe</span><span class="sxs-lookup"><span data-stu-id="63c99-122">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry AcceptSecurityContext(
  _In_opt_    PCredHandle    phCredential,
  _Inout_opt_ PCtxtHandle    phContext,
  _In_opt_    PSecBufferDesc pInput,
  _In_        ULONG          fContextReq,
  _In_        ULONG          TargetDataRep,
  _Inout_opt_ PCtxtHandle    phNewContext,
  _Inout_opt_ PSecBufferDesc pOutput,
  _Out_       PULONG         pfContextAttr,
  _Out_opt_   PTimeStamp     ptsExpiry
);
```



## <a name="parameters"></a><span data-ttu-id="63c99-123">Parâmetros</span><span class="sxs-lookup"><span data-stu-id="63c99-123">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="63c99-124">*phCredential* \[ em, opcional\]</span><span class="sxs-lookup"><span data-stu-id="63c99-124">*phCredential* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-125">Um identificador para as credenciais do servidor.</span><span class="sxs-lookup"><span data-stu-id="63c99-125">A handle to the credentials of the server.</span></span> <span data-ttu-id="63c99-126">O servidor chama a função [**falha AcquireCredentialsHandle (geral)**](acquirecredentialshandle--general.md) com o sinalizador de \_ entrada de credenciais SECPKG \_ ou SECPKG \_ cred \_ Ambos definido para recuperar esse identificador.</span><span class="sxs-lookup"><span data-stu-id="63c99-126">The server calls the [**AcquireCredentialsHandle (General)**](acquirecredentialshandle--general.md) function with either the SECPKG\_CRED\_INBOUND or SECPKG\_CRED\_BOTH flag set to retrieve this handle.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-127">*phContext* \[ entrada, saída\]</span><span class="sxs-lookup"><span data-stu-id="63c99-127">*phContext* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-128">Um ponteiro para uma estrutura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="63c99-128">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="63c99-129">Na primeira chamada para **AcceptSecurityContext (geral)**, esse ponteiro é **nulo**.</span><span class="sxs-lookup"><span data-stu-id="63c99-129">On the first call to **AcceptSecurityContext (General)**, this pointer is **NULL**.</span></span> <span data-ttu-id="63c99-130">Nas chamadas subsequentes, *phContext* é o identificador para o contexto parcialmente formado que foi retornado no parâmetro *phNewContext* pela primeira chamada.</span><span class="sxs-lookup"><span data-stu-id="63c99-130">On subsequent calls, *phContext* is the handle to the partially formed context that was returned in the *phNewContext* parameter by the first call.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-131">*pInput* \[ em, opcional\]</span><span class="sxs-lookup"><span data-stu-id="63c99-131">*pInput* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-132">Um ponteiro para uma estrutura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) gerada por uma chamada de cliente para [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md) que contém o descritor de buffer de entrada.</span><span class="sxs-lookup"><span data-stu-id="63c99-132">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure generated by a client call to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) that contains the input buffer descriptor.</span></span>

<span data-ttu-id="63c99-133">Ao usar o SSP do Schannel, o primeiro buffer deve ser do tipo \_ token SECBUFFER e conter o token de segurança recebido do cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-133">When using the Schannel SSP, the first buffer must be of type SECBUFFER\_TOKEN and contain the security token received from the client.</span></span> <span data-ttu-id="63c99-134">O segundo buffer deve ser do tipo SECBUFFER \_ vazio.</span><span class="sxs-lookup"><span data-stu-id="63c99-134">The second buffer should be of type SECBUFFER\_EMPTY.</span></span>

<span data-ttu-id="63c99-135">Ao usar os SSPs Negotiate, Kerberos ou NTLM, as informações de associação de canal podem ser especificadas passando uma estrutura [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) do **tipo \_ \_ associações de canal SecBuffer** , além dos buffers gerados pela chamada para a função [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="63c99-135">When using the Negotiate, Kerberos, or NTLM SSPs, channel binding information can be specified by passing in a [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structure of type **SECBUFFER\_CHANNEL\_BINDINGS** in addition to the buffers generated by the call to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span> <span data-ttu-id="63c99-136">As informações de associação de canal para o buffer de associação de canal podem ser obtidas chamando a função [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) no contexto Schannel que o cliente usou para autenticar.</span><span class="sxs-lookup"><span data-stu-id="63c99-136">The channel binding information for the channel binding buffer can be obtained by calling the [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) function on the Schannel context the client used to authenticate.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-137">*fContextReq* \[ no\]</span><span class="sxs-lookup"><span data-stu-id="63c99-137">*fContextReq* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-138">Sinalizadores de bits que especificam os atributos exigidos pelo servidor para estabelecer o contexto.</span><span class="sxs-lookup"><span data-stu-id="63c99-138">Bit flags that specify the attributes required by the server to establish the context.</span></span> <span data-ttu-id="63c99-139">Os sinalizadores de bits podem ser combinados usando operações de bit-a-**ou** .</span><span class="sxs-lookup"><span data-stu-id="63c99-139">Bit flags can be combined by using bitwise-**OR** operations.</span></span> <span data-ttu-id="63c99-140">Esse parâmetro pode ser um ou mais dos valores a seguir.</span><span class="sxs-lookup"><span data-stu-id="63c99-140">This parameter can be one or more of the following values.</span></span>



| <span data-ttu-id="63c99-141">Valor</span><span class="sxs-lookup"><span data-stu-id="63c99-141">Value</span></span>                                                                                                                                                                                                                                          | <span data-ttu-id="63c99-142">Significado</span><span class="sxs-lookup"><span data-stu-id="63c99-142">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="ASC_REQ_ALLOCATE_MEMORY"></span><span id="asc_req_allocate_memory"></span><dl> <span data-ttu-id="63c99-143"><dt>**memória de alocação do ASC \_ req \_ \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-143"><dt>**ASC\_REQ\_ALLOCATE\_MEMORY**</dt></span></span> </dl>                                                  | <span data-ttu-id="63c99-144">Digest e Schannel alocarão buffers de saída para você.</span><span class="sxs-lookup"><span data-stu-id="63c99-144">Digest and Schannel will allocate output buffers for you.</span></span> <span data-ttu-id="63c99-145">Quando você terminar de usar os buffers de saída, libere-os chamando a função [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) .</span><span class="sxs-lookup"><span data-stu-id="63c99-145">When you have finished using the output buffers, free them by calling the [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) function.</span></span><br/>                                                                                                                                                                                                                                                                                |
| <span id="ASC_REQ_ALLOW_MISSING_BINDINGS"></span><span id="asc_req_allow_missing_bindings"></span><dl> <span data-ttu-id="63c99-146"><dt>**o \_ ASC \_ req \_ permite \_ associações ausentes**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-146"><dt>**ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**</dt></span></span> </dl>                            | <span data-ttu-id="63c99-147">Indica que o resumo não requer associações de canal para canais internos e externos.</span><span class="sxs-lookup"><span data-stu-id="63c99-147">Indicates that Digest does not require channel bindings for both inner and outer channels.</span></span> <span data-ttu-id="63c99-148">Esse valor é usado para compatibilidade com versões anteriores quando o suporte para associação de canal de ponto de extremidade não é conhecido.</span><span class="sxs-lookup"><span data-stu-id="63c99-148">This value is used for backward compatibility when support for endpoint channel binding is not known.</span></span><br/> <span data-ttu-id="63c99-149">Esse valor é mutuamente exclusivo com as **\_ associações de \_ proxy \_ do ASC req**.</span><span class="sxs-lookup"><span data-stu-id="63c99-149">This value is mutually exclusive with **ASC\_REQ\_PROXY\_BINDINGS**.</span></span><br/> <span data-ttu-id="63c99-150">Esse valor tem suporte apenas pelo SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="63c99-150">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="63c99-151">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Não há suporte para esse valor.</span><span class="sxs-lookup"><span data-stu-id="63c99-151">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/> |
| <span id="ASC_REQ_CONFIDENTIALITY"></span><span id="asc_req_confidentiality"></span><dl> <span data-ttu-id="63c99-152"><dt>**\_confidencialidade de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-152"><dt>**ASC\_REQ\_CONFIDENTIALITY**</dt></span></span> </dl>                                                   | <span data-ttu-id="63c99-153">Criptografar e descriptografar mensagens.</span><span class="sxs-lookup"><span data-stu-id="63c99-153">Encrypt and decrypt messages.</span></span> <br/> <span data-ttu-id="63c99-154">O SSP de resumo dá suporte a este sinalizador somente para SASL.</span><span class="sxs-lookup"><span data-stu-id="63c99-154">The Digest SSP supports this flag for SASL only.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="ASC_REQ_CONNECTION"></span><span id="asc_req_connection"></span><dl> <span data-ttu-id="63c99-155"><dt>**\_conexão de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-155"><dt>**ASC\_REQ\_CONNECTION**</dt></span></span> </dl>                                                                  | <span data-ttu-id="63c99-156">O [*contexto de segurança*](../secgloss/s-gly.md) não tratará mensagens de formatação.</span><span class="sxs-lookup"><span data-stu-id="63c99-156">The [*security context*](../secgloss/s-gly.md) will not handle formatting messages.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_DELEGATE"></span><span id="asc_req_delegate"></span><dl> <span data-ttu-id="63c99-157"><dt>**\_delegado de req ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-157"><dt>**ASC\_REQ\_DELEGATE**</dt></span></span> </dl>                                                                        | <span data-ttu-id="63c99-158">O servidor tem permissão para representar o cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-158">The server is allowed to impersonate the client.</span></span> <span data-ttu-id="63c99-159">Válido para Kerberos.</span><span class="sxs-lookup"><span data-stu-id="63c99-159">Valid for Kerberos.</span></span> <span data-ttu-id="63c99-160">Ignore este sinalizador para [*delegação restrita*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-160">Ignore this flag for [*constrained delegation*](../secgloss/c-gly.md).</span></span><br/>                                                                                                                                                                                                                                                             |
| <span id="ASC_REQ_EXTENDED_ERROR"></span><span id="asc_req_extended_error"></span><dl> <span data-ttu-id="63c99-161"><dt>**\_ \_ erro estendido de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-161"><dt>**ASC\_REQ\_EXTENDED\_ERROR**</dt></span></span> </dl>                                                     | <span data-ttu-id="63c99-162">Quando ocorrerem erros, a parte remota será notificada.</span><span class="sxs-lookup"><span data-stu-id="63c99-162">When errors occur, the remote party will be notified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="ASC_REQ_HTTP__0x10000000_"></span><span id="asc_req_http__0x10000000_"></span><span id="ASC_REQ_HTTP__0X10000000_"></span><dl> <span data-ttu-id="63c99-163"><dt>**\_ \_ 0X10000000 (ASC req http)**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-163"><dt>**ASC\_REQ\_HTTP (0x10000000)**</dt></span></span> </dl> | <span data-ttu-id="63c99-164">Use Digest para HTTP.</span><span class="sxs-lookup"><span data-stu-id="63c99-164">Use Digest for HTTP.</span></span> <span data-ttu-id="63c99-165">Omita esse sinalizador para usar Digest como um mecanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="63c99-165">Omit this flag to use Digest as an SASL mechanism.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="ASC_REQ_INTEGRITY"></span><span id="asc_req_integrity"></span><dl> <span data-ttu-id="63c99-166"><dt>**\_integridade de req ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-166"><dt>**ASC\_REQ\_INTEGRITY**</dt></span></span> </dl>                                                                     | <span data-ttu-id="63c99-167">Assinar mensagens e verificar assinaturas.</span><span class="sxs-lookup"><span data-stu-id="63c99-167">Sign messages and verify signatures.</span></span><br/> <span data-ttu-id="63c99-168">O Schannel não dá suporte a esse sinalizador.</span><span class="sxs-lookup"><span data-stu-id="63c99-168">Schannel does not support this flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="ASC_REQ_MUTUAL_AUTH"></span><span id="asc_req_mutual_auth"></span><dl> <span data-ttu-id="63c99-169"><dt>**\_ \_ autenticação mútua de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-169"><dt>**ASC\_REQ\_MUTUAL\_AUTH**</dt></span></span> </dl>                                                              | <span data-ttu-id="63c99-170">O cliente é necessário para fornecer um certificado a ser usado para autenticação de cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-170">The client is required to supply a certificate to be used for client authentication.</span></span><br/> <span data-ttu-id="63c99-171">Esse sinalizador tem suporte apenas pelo Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-171">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_PROXY_BINDINGS"></span><span id="asc_req_proxy_bindings"></span><dl> <span data-ttu-id="63c99-172"><dt>**\_associações de \_ proxy de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-172"><dt>**ASC\_REQ\_PROXY\_BINDINGS**</dt></span></span> </dl>                                                     | <span data-ttu-id="63c99-173">Indica que o resumo requer Associação de canal.</span><span class="sxs-lookup"><span data-stu-id="63c99-173">Indicates that Digest requires channel binding.</span></span><br/> <span data-ttu-id="63c99-174">Esse valor é mutuamente exclusivo com o **ASC \_ req \_ permitir \_ \_ associações ausentes**.</span><span class="sxs-lookup"><span data-stu-id="63c99-174">This value is mutually exclusive with **ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**.</span></span><br/> <span data-ttu-id="63c99-175">Esse valor tem suporte apenas pelo SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="63c99-175">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="63c99-176">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Não há suporte para esse valor.</span><span class="sxs-lookup"><span data-stu-id="63c99-176">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/>                                                                                                                                         |
| <span id="ASC_REQ_REPLAY_DETECT"></span><span id="asc_req_replay_detect"></span><dl> <span data-ttu-id="63c99-177"><dt>**\_detecção de \_ Replay de req do ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-177"><dt>**ASC\_REQ\_REPLAY\_DETECT**</dt></span></span> </dl>                                                        | <span data-ttu-id="63c99-178">Detectar pacotes reproduzidos.</span><span class="sxs-lookup"><span data-stu-id="63c99-178">Detect replayed packets.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_SEQUENCE_DETECT"></span><span id="asc_req_sequence_detect"></span><dl> <span data-ttu-id="63c99-179"><dt>**\_detecção de \_ sequência de req do ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-179"><dt>**ASC\_REQ\_SEQUENCE\_DETECT**</dt></span></span> </dl>                                                  | <span data-ttu-id="63c99-180">Detecte mensagens recebidas fora de sequência.</span><span class="sxs-lookup"><span data-stu-id="63c99-180">Detect messages received out of sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_STREAM"></span><span id="asc_req_stream"></span><dl> <span data-ttu-id="63c99-181"><dt>**\_fluxo de req. asc \_**</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-181"><dt>**ASC\_REQ\_STREAM**</dt></span></span> </dl>                                                                              | <span data-ttu-id="63c99-182">Suporte a uma conexão orientada a fluxo.</span><span class="sxs-lookup"><span data-stu-id="63c99-182">Support a stream-oriented connection.</span></span><br/> <span data-ttu-id="63c99-183">Esse sinalizador tem suporte apenas pelo Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-183">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                   |



 

<span data-ttu-id="63c99-184">Para possíveis sinalizadores de atributo e seus significados, consulte [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-184">For possible attribute flags and their meanings, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="63c99-185">Os sinalizadores usados para esse parâmetro são prefixados com o ASC \_ req, por exemplo, o \_ delegado de req ASC \_ .</span><span class="sxs-lookup"><span data-stu-id="63c99-185">Flags used for this parameter are prefixed with ASC\_REQ, for example, ASC\_REQ\_DELEGATE.</span></span>

<span data-ttu-id="63c99-186">Os atributos solicitados podem não ter suporte do cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-186">The requested attributes may not be supported by the client.</span></span> <span data-ttu-id="63c99-187">Para obter mais informações, consulte o parâmetro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="63c99-187">For more information, see the *pfContextAttr* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-188">*TargetDataRep* \[ no\]</span><span class="sxs-lookup"><span data-stu-id="63c99-188">*TargetDataRep* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-189">A representação de dados, como ordenação de bytes, no destino.</span><span class="sxs-lookup"><span data-stu-id="63c99-189">The data representation, such as byte ordering, on the target.</span></span> <span data-ttu-id="63c99-190">Esse parâmetro pode ser segurança \_ nativa \_ DREP ou segurança de \_ rede \_ DREP.</span><span class="sxs-lookup"><span data-stu-id="63c99-190">This parameter can be either SECURITY\_NATIVE\_DREP or SECURITY\_NETWORK\_DREP.</span></span>

<span data-ttu-id="63c99-191">Esse parâmetro não é usado com SSPs Schannel ou Digest.</span><span class="sxs-lookup"><span data-stu-id="63c99-191">This parameter is not used with Schannel or Digest SSPs.</span></span> <span data-ttu-id="63c99-192">Ao usar os SSPs Schannel ou Digest, especifique zero para esse parâmetro.</span><span class="sxs-lookup"><span data-stu-id="63c99-192">When you use Schannel or Digest SSPs, specify zero for this parameter.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-193">*phNewContext* \[ entrada, saída, opcional\]</span><span class="sxs-lookup"><span data-stu-id="63c99-193">*phNewContext* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-194">Um ponteiro para uma estrutura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="63c99-194">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="63c99-195">Na primeira chamada para **AcceptSecurityContext (geral)**, esse ponteiro recebe o novo identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="63c99-195">On the first call to **AcceptSecurityContext (General)**, this pointer receives the new context handle.</span></span> <span data-ttu-id="63c99-196">Nas chamadas subsequentes, *phNewContext* pode ser o mesmo que o identificador especificado no parâmetro *phContext* .</span><span class="sxs-lookup"><span data-stu-id="63c99-196">On subsequent calls, *phNewContext* can be the same as the handle specified in the *phContext* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-197">*pOutput* \[ entrada, saída, opcional\]</span><span class="sxs-lookup"><span data-stu-id="63c99-197">*pOutput* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-198">Um ponteiro para uma estrutura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) que contém o descritor de buffer de saída.</span><span class="sxs-lookup"><span data-stu-id="63c99-198">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure that contains the output buffer descriptor.</span></span> <span data-ttu-id="63c99-199">Esse buffer é enviado ao cliente para entrada em chamadas adicionais para [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-199">This buffer is sent to the client for input into additional calls to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="63c99-200">Um buffer de saída pode ser gerado mesmo que a função retorne s \_ E \_ OK.</span><span class="sxs-lookup"><span data-stu-id="63c99-200">An output buffer may be generated even if the function returns SEC\_E\_OK.</span></span> <span data-ttu-id="63c99-201">Qualquer buffer gerado deve ser enviado de volta para o aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-201">Any buffer generated must be sent back to the client application.</span></span>

<span data-ttu-id="63c99-202">Ao usar Schannel, na saída, esse buffer recebe um token para o [*contexto de segurança*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-202">When using Schannel, on output, this buffer receives a token for the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="63c99-203">O token deve ser enviado ao cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-203">The token must be sent to the client.</span></span> <span data-ttu-id="63c99-204">A função também pode retornar um buffer do tipo SECBUFFER \_ extra.</span><span class="sxs-lookup"><span data-stu-id="63c99-204">The function can also return a buffer of type SECBUFFER\_EXTRA.</span></span> <span data-ttu-id="63c99-205">Além disso, o chamador deve passar um buffer do tipo **\_ alerta de SECBUFFER**.</span><span class="sxs-lookup"><span data-stu-id="63c99-205">In addition, the caller must pass in a buffer of type **SECBUFFER\_ALERT**.</span></span> <span data-ttu-id="63c99-206">Na saída, se um alerta for gerado, esse buffer conterá informações sobre esse alerta e a função falhará.</span><span class="sxs-lookup"><span data-stu-id="63c99-206">On output, if an alert is generated, this buffer contains information about that alert, and the function fails.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-207">*pfContextAttr* \[ fora\]</span><span class="sxs-lookup"><span data-stu-id="63c99-207">*pfContextAttr* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-208">Um ponteiro para uma variável que recebe um conjunto de sinalizadores de bits que indicam os atributos do contexto estabelecido.</span><span class="sxs-lookup"><span data-stu-id="63c99-208">A pointer to a variable that receives a set of bit flags that indicate the attributes of the established context.</span></span> <span data-ttu-id="63c99-209">Para obter uma descrição dos vários atributos, consulte [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-209">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="63c99-210">Os sinalizadores usados para esse parâmetro são prefixados com ASC \_ RET, por exemplo, o delegado de ASC \_ RET \_ .</span><span class="sxs-lookup"><span data-stu-id="63c99-210">Flags used for this parameter are prefixed with ASC\_RET, for example, ASC\_RET\_DELEGATE.</span></span>

<span data-ttu-id="63c99-211">Não verifique os atributos relacionados à segurança até que a chamada de função final seja retornada com êxito.</span><span class="sxs-lookup"><span data-stu-id="63c99-211">Do not check for security-related attributes until the final function call returns successfully.</span></span> <span data-ttu-id="63c99-212">Os sinalizadores de atributo não relacionados à segurança, como o \_ \_ sinalizador de memória alocada de ASC RET \_ , podem ser verificados antes do retorno final.</span><span class="sxs-lookup"><span data-stu-id="63c99-212">Attribute flags not related to security, such as the ASC\_RET\_ALLOCATED\_MEMORY flag, can be checked before the final return.</span></span>

</dd> <dt>

<span data-ttu-id="63c99-213">*ptsTimeStamp* \[ out, opcional\]</span><span class="sxs-lookup"><span data-stu-id="63c99-213">*ptsTimeStamp* \[out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="63c99-214">Um ponteiro para uma estrutura de [**carimbo de data/**](timestamp.md) hora que recebe o tempo de expiração do contexto.</span><span class="sxs-lookup"><span data-stu-id="63c99-214">A pointer to a [**TimeStamp**](timestamp.md) structure that receives the expiration time of the context.</span></span> <span data-ttu-id="63c99-215">É recomendável que o [*pacote de segurança*](../secgloss/s-gly.md) sempre retorne esse valor na hora local.</span><span class="sxs-lookup"><span data-stu-id="63c99-215">We recommend that the [*security package*](../secgloss/s-gly.md) always return this value in local time.</span></span>

<span data-ttu-id="63c99-216">Esse parâmetro é definido como um tempo máximo de constante.</span><span class="sxs-lookup"><span data-stu-id="63c99-216">This parameter is set to a constant maximum time.</span></span> <span data-ttu-id="63c99-217">Não há tempo de expiração para as credenciais ou s de [*contexto de segurança*](../secgloss/s-gly.md)Digest ou ao usar o SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="63c99-217">There is no expiration time for Digest [*security context*](../secgloss/s-gly.md)s or credentials or when using the Digest SSP.</span></span>

<span data-ttu-id="63c99-218">Isso é opcional ao usar o SSP do Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-218">This is optional when using the Schannel SSP.</span></span> <span data-ttu-id="63c99-219">Quando a parte remota forneceu um certificado a ser usado para autenticação, esse parâmetro recebe o tempo de expiração para esse certificado.</span><span class="sxs-lookup"><span data-stu-id="63c99-219">When the remote party has supplied a certificate to be used for authentication, this parameter receives the expiration time for that certificate.</span></span> <span data-ttu-id="63c99-220">Se nenhum certificado tiver sido fornecido, um valor de tempo máximo será retornado.</span><span class="sxs-lookup"><span data-stu-id="63c99-220">If no certificate was supplied, a maximum time value is returned.</span></span>

> [!Note]  
> <span data-ttu-id="63c99-221">Até a última chamada do processo de autenticação, o tempo de expiração do contexto pode estar incorreto, pois mais informações serão fornecidas durante os estágios posteriores da negociação.</span><span class="sxs-lookup"><span data-stu-id="63c99-221">Until the last call of the authentication process, the expiration time for the context can be incorrect because more information will be provided during later stages of the negotiation.</span></span> <span data-ttu-id="63c99-222">Portanto, *ptsTimeStamp* deve ser **nulo** até a última chamada para a função.</span><span class="sxs-lookup"><span data-stu-id="63c99-222">Therefore, *ptsTimeStamp* must be **NULL** until the last call to the function.</span></span>

 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="63c99-223">Retornar valor</span><span class="sxs-lookup"><span data-stu-id="63c99-223">Return value</span></span>

<span data-ttu-id="63c99-224">Essa função retorna um dos valores a seguir.</span><span class="sxs-lookup"><span data-stu-id="63c99-224">This function returns one of the following values.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="63c99-225">Código/valor de retorno</span><span class="sxs-lookup"><span data-stu-id="63c99-225">Return code/value</span></span></th><th><span data-ttu-id="63c99-226">Description</span><span class="sxs-lookup"><span data-stu-id="63c99-226">Description</span></span></th></tr></thead><tbody><tr class="odd"><td><dl> <span data-ttu-id="63c99-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-228">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-228">The function failed.</span></span> <span data-ttu-id="63c99-229">A política de associação de canal não foi satisfeita.</span><span class="sxs-lookup"><span data-stu-id="63c99-229">Channel binding policy was not satisfied.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-231">A função foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="63c99-231">The function succeeded.</span></span> <span data-ttu-id="63c99-232">Os dados no buffer de entrada estão incompletos.</span><span class="sxs-lookup"><span data-stu-id="63c99-232">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="63c99-233">O aplicativo deve ler dados adicionais do cliente e chamar [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD) novamente.</span><span class="sxs-lookup"><span data-stu-id="63c99-233">The application must read additional data from the client and call [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) again.</span></span><br/> <span data-ttu-id="63c99-234">Esse valor pode ser retornado ao usar o SSP do Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-234">This value can be returned when using the Schannel SSP.</span></span> <span data-ttu-id="63c99-235">Para obter mais informações sobre esse valor de retorno, consulte [<strong>AcceptSecurityContext (Schannel)</strong>] (AcceptSecurityContext--Schannel.MD).</span><span class="sxs-lookup"><span data-stu-id="63c99-235">For more information about this return value, see [<strong>AcceptSecurityContext (Schannel)</strong>](acceptsecuritycontext--schannel.md).</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-237">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-237">The function failed.</span></span> <span data-ttu-id="63c99-238">Não há memória suficiente disponível para concluir a ação solicitada.</span><span class="sxs-lookup"><span data-stu-id="63c99-238">There is not enough memory available to complete the requested action.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-240">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-240">The function failed.</span></span> <span data-ttu-id="63c99-241">Ocorreu um erro que não foi mapeado para um código de erro SSPI.</span><span class="sxs-lookup"><span data-stu-id="63c99-241">An error occurred that did not map to an SSPI error code.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-243">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-243">The function failed.</span></span> <span data-ttu-id="63c99-244">O identificador passado para a função não é válido.</span><span class="sxs-lookup"><span data-stu-id="63c99-244">The handle passed to the function is not valid.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-246">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-246">The function failed.</span></span> <span data-ttu-id="63c99-247">O token passado para a função não é válido.</span><span class="sxs-lookup"><span data-stu-id="63c99-247">The token passed to the function is not valid.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span></span></dl></td><td><span data-ttu-id="63c99-249">Falha no logon.</span><span class="sxs-lookup"><span data-stu-id="63c99-249">The logon failed.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-251">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-251">The function failed.</span></span> <span data-ttu-id="63c99-252">Nenhuma autoridade pode ser contatada para autenticação.</span><span class="sxs-lookup"><span data-stu-id="63c99-252">No authority could be contacted for authentication.</span></span> <span data-ttu-id="63c99-253">Isso pode ser devido às seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="63c99-253">This could be due to the following conditions:</span></span><br/><ul><li><span data-ttu-id="63c99-254">O nome de domínio da parte de autenticação está incorreto.</span><span class="sxs-lookup"><span data-stu-id="63c99-254">The domain name of the authenticating party is incorrect.</span></span></li><li><span data-ttu-id="63c99-255">O domínio não está disponível.</span><span class="sxs-lookup"><span data-stu-id="63c99-255">The domain is unavailable.</span></span></li><li><span data-ttu-id="63c99-256">Falha na relação de confiança.</span><span class="sxs-lookup"><span data-stu-id="63c99-256">The trust relationship has failed.</span></span></li></ul></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span></span></dl></td><td><span data-ttu-id="63c99-258">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-258">The function failed.</span></span> <span data-ttu-id="63c99-259">O identificador de credenciais especificado no parâmetro <em>phCredential</em> não é válido.</span><span class="sxs-lookup"><span data-stu-id="63c99-259">The credentials handle specified in the <em>phCredential</em> parameter is not valid.</span></span> <span data-ttu-id="63c99-260">Esse valor pode ser retornado ao usar o SSP Digest ou Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-260">This value can be returned when using the Digest or Schannel SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000l</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-262">A função foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="63c99-262">The function succeeded.</span></span> <span data-ttu-id="63c99-263">O [*contexto de segurança*](../secgloss/s-gly.md) recebido do cliente foi aceito.</span><span class="sxs-lookup"><span data-stu-id="63c99-263">The [*security context*](../secgloss/s-gly.md) received from the client was accepted.</span></span> <span data-ttu-id="63c99-264">Se um token de saída foi gerado pela função, ele deve ser enviado para o processo do cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-264">If an output token was generated by the function, it must be sent to the client process.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-266">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-266">The function failed.</span></span> <span data-ttu-id="63c99-267">Um sinalizador de atributo de contexto inválido foi especificado no parâmetro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="63c99-267">A context attribute flag that is not valid was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="63c99-268">Esse valor pode ser retornado ao usar o SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="63c99-268">This value can be returned when using the Digest SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-270">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-270">The function failed.</span></span> <span data-ttu-id="63c99-271">Um sinalizador de atributo de contexto que não é válido (ASC_REQ_DELEGATE ou ASC_REQ_PROMPT_FOR_CREDS) foi especificado no parâmetro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="63c99-271">A context attribute flag that is not valid (ASC_REQ_DELEGATE or ASC_REQ_PROMPT_FOR_CREDS) was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="63c99-272">Esse valor pode ser retornado ao usar o SSP do Schannel.</span><span class="sxs-lookup"><span data-stu-id="63c99-272">This value can be returned when using the Schannel SSP.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-274">A função foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="63c99-274">The function succeeded.</span></span> <span data-ttu-id="63c99-275">O servidor deve chamar [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-CompleteAuthToken) e passar o token de saída para o cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-275">The server must call [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) and pass the output token to the client.</span></span> <span data-ttu-id="63c99-276">Em seguida, o servidor aguarda um token de retorno do cliente e, em seguida, faz outra chamada para [<strong>AcceptSecurityContext (geral)</strong>] (AcceptSecurityContext--General.MD).</span><span class="sxs-lookup"><span data-stu-id="63c99-276">The server then waits for a return token from the client and then makes another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span> <br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-278">A função foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="63c99-278">The function succeeded.</span></span> <span data-ttu-id="63c99-279">O servidor deve concluir a compilação da mensagem do cliente e, em seguida, chamar a função [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-CompleteAuthToken).</span><span class="sxs-lookup"><span data-stu-id="63c99-279">The server must finish building the message from the client and then call the [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) function.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="63c99-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span></span></dl></td><td><span data-ttu-id="63c99-281">A função foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="63c99-281">The function succeeded.</span></span> <span data-ttu-id="63c99-282">O servidor deve enviar o token de saída para o cliente e aguardar um token retornado.</span><span class="sxs-lookup"><span data-stu-id="63c99-282">The server must send the output token to the client and wait for a returned token.</span></span> <span data-ttu-id="63c99-283">O token retornado deve ser passado em <em>pInput</em> para outra chamada para [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD).</span><span class="sxs-lookup"><span data-stu-id="63c99-283">The returned token should be passed in <em>pInput</em> for another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="63c99-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span><span class="sxs-lookup"><span data-stu-id="63c99-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span></span></dl></td><td><span data-ttu-id="63c99-285">A função falhou.</span><span class="sxs-lookup"><span data-stu-id="63c99-285">The function failed.</span></span> <span data-ttu-id="63c99-286">A função [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD) foi chamada depois que o contexto especificado foi estabelecido.</span><span class="sxs-lookup"><span data-stu-id="63c99-286">The [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) function was called after the specified context was established.</span></span> <span data-ttu-id="63c99-287">Esse valor pode ser retornado ao usar o SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="63c99-287">This value can be returned when using the Digest SSP.</span></span><br/></td></tr></tbody></table>



 

## <a name="remarks"></a><span data-ttu-id="63c99-288">Comentários</span><span class="sxs-lookup"><span data-stu-id="63c99-288">Remarks</span></span>

<span data-ttu-id="63c99-289">A função **AcceptSecurityContext (geral)** é a contraparte do servidor para a função [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="63c99-289">The **AcceptSecurityContext (General)** function is the server counterpart to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span>

<span data-ttu-id="63c99-290">Quando o servidor recebe uma solicitação de um cliente, o servidor usa o parâmetro *fContextReq* para especificar o que é necessário para a sessão.</span><span class="sxs-lookup"><span data-stu-id="63c99-290">When the server receives a request from a client, the server uses the *fContextReq* parameter to specify what it requires of the session.</span></span> <span data-ttu-id="63c99-291">Dessa maneira, um servidor pode especificar que os clientes devem ser capazes de usar uma sessão confidencial ou com verificação de [*integridade*](../secgloss/i-gly.md), e pode rejeitar clientes que não podem atender a essa demanda.</span><span class="sxs-lookup"><span data-stu-id="63c99-291">In this fashion, a server can specify that clients must be capable of using a confidential or [*integrity*](../secgloss/i-gly.md)-checked session, and it can reject clients that cannot meet that demand.</span></span> <span data-ttu-id="63c99-292">Como alternativa, um servidor pode não exigir nada e tudo o que o cliente pode fornecer ou exigir é retornado no parâmetro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="63c99-292">Alternatively, a server can require nothing, and whatever the client can provide or requires is returned in the *pfContextAttr* parameter.</span></span>

<span data-ttu-id="63c99-293">Para um pacote que dá suporte à autenticação de vários trechos, como a autenticação mútua, a sequência de chamada é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="63c99-293">For a package that supports multiple-leg authentication, such as mutual authentication, the calling sequence is as follows:</span></span>

1.  <span data-ttu-id="63c99-294">O cliente transmite um token para o servidor.</span><span class="sxs-lookup"><span data-stu-id="63c99-294">The client transmits a token to the server.</span></span>
2.  <span data-ttu-id="63c99-295">O servidor chama **AcceptSecurityContext (geral)** na primeira vez, o que gera um token de resposta que é enviado para o cliente.</span><span class="sxs-lookup"><span data-stu-id="63c99-295">The server calls **AcceptSecurityContext (General)** the first time, which generates a reply token that is then sent to the client.</span></span>
3.  <span data-ttu-id="63c99-296">O cliente recebe o token e o passa para [**InitializeSecurityContext (geral)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-296">The client receives the token and passes it to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="63c99-297">Se **InitializeSecurityContext (geral)** retornar s \_ e \_ OK, a autenticação mútua foi concluída e uma sessão segura pode começar.</span><span class="sxs-lookup"><span data-stu-id="63c99-297">If **InitializeSecurityContext (General)** returns SEC\_E\_OK, mutual authentication has been completed and a secure session can begin.</span></span> <span data-ttu-id="63c99-298">Se **InitializeSecurityContext (geral)** retornar um código de erro, a negociação de autenticação mútua terminará.</span><span class="sxs-lookup"><span data-stu-id="63c99-298">If **InitializeSecurityContext (General)** returns an error code, the mutual authentication negotiation ends.</span></span> <span data-ttu-id="63c99-299">Caso contrário, o token de segurança retornado por **InitializeSecurityContext (geral)** é enviado ao cliente e as etapas 2 e 3 são repetidas.</span><span class="sxs-lookup"><span data-stu-id="63c99-299">Otherwise, the security token returned by **InitializeSecurityContext (General)** is sent to the client, and steps 2 and 3 are repeated.</span></span>

<span data-ttu-id="63c99-300">Os parâmetros *fContextReq* e *pfContextAttr* são bitmasks que representam vários atributos de contexto.</span><span class="sxs-lookup"><span data-stu-id="63c99-300">The *fContextReq* and *pfContextAttr* parameters are bitmasks that represent various context attributes.</span></span> <span data-ttu-id="63c99-301">Para obter uma descrição dos vários atributos, consulte [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="63c99-301">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span>

> [!Note]  
> <span data-ttu-id="63c99-302">O parâmetro *pfContextAttr* é válido em qualquer retorno bem-sucedido, mas somente no retorno bem-sucedido final, você deve examinar os sinalizadores referentes aos aspectos de segurança do contexto.</span><span class="sxs-lookup"><span data-stu-id="63c99-302">The *pfContextAttr* parameter is valid on any successful return, but only on the final successful return should you examine the flags pertaining to security aspects of the context.</span></span> <span data-ttu-id="63c99-303">Os retornos intermediários podem definir, por exemplo, o \_ \_ sinalizador de memória alocada do ISC RET \_ .</span><span class="sxs-lookup"><span data-stu-id="63c99-303">Intermediate returns can set, for example, the ISC\_RET\_ALLOCATED\_MEMORY flag.</span></span>

 

<span data-ttu-id="63c99-304">O chamador é responsável por determinar se os atributos de contexto final são suficientes.</span><span class="sxs-lookup"><span data-stu-id="63c99-304">The caller is responsible for determining whether the final context attributes are sufficient.</span></span> <span data-ttu-id="63c99-305">Se, por exemplo, a confidencialidade (criptografia) tiver sido solicitada, mas não puder ser estabelecida, alguns aplicativos poderão optar por desligar a conexão imediatamente.</span><span class="sxs-lookup"><span data-stu-id="63c99-305">If, for example, confidentiality (encryption) was requested, but could not be established, some applications may choose to shut down the connection immediately.</span></span> <span data-ttu-id="63c99-306">Se o [*contexto de segurança*](../secgloss/s-gly.md) não puder ser estabelecido, o servidor deverá liberar o contexto parcialmente criado chamando a função [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="63c99-306">If the [*security context*](../secgloss/s-gly.md) cannot be established, the server must free the partially created context by calling the [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) function.</span></span> <span data-ttu-id="63c99-307">Para obter informações sobre quando chamar a função **DeleteSecurityContext** , consulte **DeleteSecurityContext**.</span><span class="sxs-lookup"><span data-stu-id="63c99-307">For information about when to call the **DeleteSecurityContext** function, see **DeleteSecurityContext**.</span></span>

<span data-ttu-id="63c99-308">Depois que o [*contexto de segurança*](../secgloss/s-gly.md) tiver sido estabelecido, o aplicativo de servidor poderá usar a função [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) para recuperar um identificador para a conta de usuário para a qual o certificado de cliente foi mapeado.</span><span class="sxs-lookup"><span data-stu-id="63c99-308">After the [*security context*](../secgloss/s-gly.md) has been established, the server application can use the [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) function to retrieve a handle to the user account to which the client certificate was mapped.</span></span> <span data-ttu-id="63c99-309">Além disso, o servidor pode usar a função [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) para representar o usuário.</span><span class="sxs-lookup"><span data-stu-id="63c99-309">Also, the server can use the [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate the user.</span></span>

## <a name="requirements"></a><span data-ttu-id="63c99-310">Requisitos</span><span class="sxs-lookup"><span data-stu-id="63c99-310">Requirements</span></span>



| <span data-ttu-id="63c99-311">Requisito</span><span class="sxs-lookup"><span data-stu-id="63c99-311">Requirement</span></span> | <span data-ttu-id="63c99-312">Valor</span><span class="sxs-lookup"><span data-stu-id="63c99-312">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="63c99-313">Cliente mínimo com suporte</span><span class="sxs-lookup"><span data-stu-id="63c99-313">Minimum supported client</span></span><br/> | <span data-ttu-id="63c99-314">\[Somente aplicativos da área de trabalho do Windows XP\]</span><span class="sxs-lookup"><span data-stu-id="63c99-314">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="63c99-315">Servidor mínimo com suporte</span><span class="sxs-lookup"><span data-stu-id="63c99-315">Minimum supported server</span></span><br/> | <span data-ttu-id="63c99-316">\[Somente aplicativos da área de trabalho do Windows Server 2003\]</span><span class="sxs-lookup"><span data-stu-id="63c99-316">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="63c99-317">parâmetro</span><span class="sxs-lookup"><span data-stu-id="63c99-317">Header</span></span><br/>                   | <dl> <span data-ttu-id="63c99-318"><dt>SSPI. h (incluir Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-318"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="63c99-319">Biblioteca</span><span class="sxs-lookup"><span data-stu-id="63c99-319">Library</span></span><br/>                  | <dl> <span data-ttu-id="63c99-320"><dt>Secur32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-320"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="63c99-321">DLL</span><span class="sxs-lookup"><span data-stu-id="63c99-321">DLL</span></span><br/>                      | <dl> <span data-ttu-id="63c99-322"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="63c99-322"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="63c99-323">Confira também</span><span class="sxs-lookup"><span data-stu-id="63c99-323">See also</span></span>

<dl> <dt>

[<span data-ttu-id="63c99-324">Funções SSPI</span><span class="sxs-lookup"><span data-stu-id="63c99-324">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="63c99-325">**DeleteSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="63c99-325">**DeleteSecurityContext**</span></span>](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext)
</dt> <dt>

[<span data-ttu-id="63c99-326">**InitializeSecurityContext (geral)**</span><span class="sxs-lookup"><span data-stu-id="63c99-326">**InitializeSecurityContext (General)**</span></span>](initializesecuritycontext--general.md)
</dt> </dl>

 

 
