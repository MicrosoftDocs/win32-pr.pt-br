---
description: O desafio de Microsoft Digest é gerado pela chamada inicial do servidor para a função AcceptSecurityContext (Digest).
ms.assetid: d33383c2-5c0d-401f-ab28-2a985f6508e0
title: Gerando o desafio de resumo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 511ec4f01c90acf08669835f9728cc711dfd1023
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171268"
---
# <a name="generating-the-digest-challenge"></a><span data-ttu-id="abdac-103">Gerando o desafio de resumo</span><span class="sxs-lookup"><span data-stu-id="abdac-103">Generating the Digest Challenge</span></span>

<span data-ttu-id="abdac-104">O desafio de Microsoft Digest é gerado pela chamada inicial do servidor para a função [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="abdac-104">The Microsoft Digest challenge is generated by the server's initial call to the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="abdac-105">Essa chamada de função gera um nonce, que é um valor exclusivo que contém informações que podem ser usadas para detectar violações de segurança.</span><span class="sxs-lookup"><span data-stu-id="abdac-105">This function call generates a nonce, which is a unique value that contains information that can be used to detect security violations.</span></span> <span data-ttu-id="abdac-106">Essa chamada também gera um [*contexto de segurança*](/windows/desktop/SecGloss/s-gly) parcial que é usado para manter informações de estado.</span><span class="sxs-lookup"><span data-stu-id="abdac-106">This call also generates a partial [*security context*](/windows/desktop/SecGloss/s-gly) which is used to maintain state information.</span></span> <span data-ttu-id="abdac-107">Ao chamar **AcceptSecurityContext (Digest)** , você especifica sinalizadores de requisitos de contexto para controlar o comportamento de Microsoft Digest e para definir a qualidade de proteção.</span><span class="sxs-lookup"><span data-stu-id="abdac-107">When calling **AcceptSecurityContext (Digest)** you specify context requirements flags to control the behavior of Microsoft Digest and to set the quality of protection.</span></span> <span data-ttu-id="abdac-108">Para obter mais informações, consulte [Resumo de requisitos de contexto de desafio](#digest-challenge-context-requirements).</span><span class="sxs-lookup"><span data-stu-id="abdac-108">For more information, see [Digest Challenge Context Requirements](#digest-challenge-context-requirements).</span></span>

<span data-ttu-id="abdac-109">A saída da chamada inicial para a função [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) [](/windows/desktop/SecGloss/c-gly) é um buffer de segurança que contém um token que é enviado ao cliente com uma resposta HTTP 401 (acesso negado).</span><span class="sxs-lookup"><span data-stu-id="abdac-109">The output from the initial call to the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) [*function*](/windows/desktop/SecGloss/c-gly) is a security buffer that contains a token that is sent to the client with an HTTP 401 response (Access Denied).</span></span>

> [!Note]  
> <span data-ttu-id="abdac-110">Chamadas para [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) que não contêm informações nos buffers de entrada retornam um desafio de resumo.</span><span class="sxs-lookup"><span data-stu-id="abdac-110">Calls to [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) that do not contain information in the input buffers return a Digest challenge.</span></span>

 

## <a name="digest-challenge-context-requirements"></a><span data-ttu-id="abdac-111">Requisitos de contexto de desafio Digest</span><span class="sxs-lookup"><span data-stu-id="abdac-111">Digest Challenge Context Requirements</span></span>

<span data-ttu-id="abdac-112">Os requisitos de contexto são sinalizadores que determinam:</span><span class="sxs-lookup"><span data-stu-id="abdac-112">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="abdac-113">Se Microsoft Digest funciona como um mecanismo SASL ou protocolo de autenticação HTTP.</span><span class="sxs-lookup"><span data-stu-id="abdac-113">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="abdac-114">A qualidade de proteção com suporte do contexto de segurança compartilhado pelo cliente e servidor.</span><span class="sxs-lookup"><span data-stu-id="abdac-114">The quality of protection supported by the security context shared by the client and server.</span></span>

<span data-ttu-id="abdac-115">Por padrão, o Microsoft Digest funciona como um mecanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="abdac-115">By default, Microsoft Digest functions as a SASL mechanism.</span></span> <span data-ttu-id="abdac-116">Para usá-lo para autenticação HTTP, o \_ \_ sinalizador 0X10000000 (ASC req http) deve ser definido pelo servidor.</span><span class="sxs-lookup"><span data-stu-id="abdac-116">To use it for HTTP authentication, the ASC\_REQ\_HTTP ( 0x10000000) flag must be set by the server.</span></span>

<span data-ttu-id="abdac-117">Os requisitos de contexto são especificados como sinalizadores passados para o parâmetro *fContextReq* da função [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="abdac-117">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="abdac-118">Os sinalizadores afetam a qualidade de proteção do contexto de segurança, controlando a diretiva QoP no desafio.</span><span class="sxs-lookup"><span data-stu-id="abdac-118">The flags affect the security context's quality of protection by controlling the qop directive in the challenge.</span></span>

<span data-ttu-id="abdac-119">Por padrão, a diretiva QoP é definida como "auth".</span><span class="sxs-lookup"><span data-stu-id="abdac-119">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="abdac-120">Para gerar um desafio que define a diretiva QoP como "auth-int", o servidor deve especificar um ou mais dos seguintes sinalizadores:</span><span class="sxs-lookup"><span data-stu-id="abdac-120">To generate a challenge that sets the qop directive to "auth-int", the server must specify one or more of the following flags:</span></span>

-   <span data-ttu-id="abdac-121">\_integridade de req ASC \_</span><span class="sxs-lookup"><span data-stu-id="abdac-121">ASC\_REQ\_INTEGRITY</span></span>
-   <span data-ttu-id="abdac-122">\_detecção de \_ Replay de req do ASC \_</span><span class="sxs-lookup"><span data-stu-id="abdac-122">ASC\_REQ\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="abdac-123">\_detecção de \_ sequência de req do ASC \_</span><span class="sxs-lookup"><span data-stu-id="abdac-123">ASC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="abdac-124">Somente para SASL: gere um desafio com a diretiva QoP definida como "auth-conf" especificando o sinalizador de \_ \_ requisito de contexto de confidencialidade de ASC.</span><span class="sxs-lookup"><span data-stu-id="abdac-124">For SASL only: Generate a challenge with the qop directive set to "auth-conf" by specifying the ASC\_REQ\_CONFIDENTIALITY context requirement flag.</span></span> <span data-ttu-id="abdac-125">Como esse sinalizador não é válido para a autenticação HTTP, ele não pode ser usado com \_ o \_ sinalizador http ASC req.</span><span class="sxs-lookup"><span data-stu-id="abdac-125">Because this flag is not valid for HTTP authentication, it cannot be used with the ASC\_REQ\_HTTP flag.</span></span>

<span data-ttu-id="abdac-126">Para obter mais informações sobre a diretiva QoP, consulte [qualidade de proteção e codificações](quality-of-protection-and-ciphers.md).</span><span class="sxs-lookup"><span data-stu-id="abdac-126">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="abdac-127">Para obter mais informações sobre os desafios, consulte [o conteúdo de um desafio de resumo](contents-of-a-digest-challenge.md).</span><span class="sxs-lookup"><span data-stu-id="abdac-127">For more information about challenges, see [Contents of a Digest Challenge](contents-of-a-digest-challenge.md).</span></span>

 

 
