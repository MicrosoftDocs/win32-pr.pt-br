---
description: A técnica de autenticação de chave secreta não explica como o cliente e o servidor obtêm a chave de sessão secreta para usar em sessões entre si.
ms.assetid: 90ab0359-5079-49e9-809c-0c0005cc61bf
title: Distribuição de chaves
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f04a2968e8b7b978bc7b325d65b4a2acf08e1f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103662325"
---
# <a name="key-distribution"></a><span data-ttu-id="f5618-103">Distribuição de chaves</span><span class="sxs-lookup"><span data-stu-id="f5618-103">Key Distribution</span></span>

<span data-ttu-id="f5618-104">A técnica de autenticação de chave secreta não explica como o cliente e o servidor obtêm a [*chave de sessão*](../secgloss/s-gly.md) secreta para usar em sessões entre si.</span><span class="sxs-lookup"><span data-stu-id="f5618-104">The secret key authentication technique does not explain how the client and server get the secret [*session key*](../secgloss/s-gly.md) to use in sessions with each other.</span></span> <span data-ttu-id="f5618-105">Se forem pessoas, eles poderiam se reunir em segredo e concordar com a chave.</span><span class="sxs-lookup"><span data-stu-id="f5618-105">If they are people, they could meet in secret and agree on the key.</span></span> <span data-ttu-id="f5618-106">Mas se o cliente for um programa em execução em uma estação de trabalho e o servidor for um serviço em execução em um servidor de rede, esse método não funcionará.</span><span class="sxs-lookup"><span data-stu-id="f5618-106">But if the client is a program running on a workstation and the server is a service running on a network server, that method will not work.</span></span>

<span data-ttu-id="f5618-107">Um cliente vai querer se comunicar com vários servidores e precisará de chaves diferentes para cada um deles.</span><span class="sxs-lookup"><span data-stu-id="f5618-107">A client will want to communicate with many servers and will need different keys for each of them.</span></span> <span data-ttu-id="f5618-108">Um servidor se comunica com muitos clientes e precisa de chaves diferentes para cada um deles também.</span><span class="sxs-lookup"><span data-stu-id="f5618-108">A server communicates with many clients and needs different keys for each of them, as well.</span></span> <span data-ttu-id="f5618-109">Se cada cliente precisar de uma chave diferente para cada servidor, e cada servidor precisar de uma chave diferente para cada cliente, a distribuição de chave se tornará um problema.</span><span class="sxs-lookup"><span data-stu-id="f5618-109">If each client needs a different key for every server, and each server needs a different key for every client, key distribution becomes a problem.</span></span> <span data-ttu-id="f5618-110">Além disso, a necessidade de armazenar e proteger muitas chaves em muitos computadores cria um enorme risco de segurança.</span><span class="sxs-lookup"><span data-stu-id="f5618-110">In addition, the need to store and protect many keys on many computers creates an enormous security risk.</span></span>

<span data-ttu-id="f5618-111">O nome do [*protocolo Kerberos*](../secgloss/k-gly.md) sugere sua solução para o problema de distribuição de chave.</span><span class="sxs-lookup"><span data-stu-id="f5618-111">The name of the [*Kerberos protocol*](../secgloss/k-gly.md) suggests its solution to the problem of key distribution.</span></span> <span data-ttu-id="f5618-112">O Kerberos (ou O Cerberus) foi uma figura em grego da Grécia Mythology — uma selvagens, um cachorro de três pontas que mantinha intrusos de entrar no Underworld.</span><span class="sxs-lookup"><span data-stu-id="f5618-112">Kerberos (or Cerberus) was a figure in classical Greek mythology—a fierce, three-headed dog who kept living intruders from entering the Underworld.</span></span> <span data-ttu-id="f5618-113">Assim como o mítico Guard, o protocolo Kerberos tem três cabeçotes: um cliente, um servidor e um terceiro confiável para mediar entre eles.</span><span class="sxs-lookup"><span data-stu-id="f5618-113">Like the mythical guard, the Kerberos protocol has three heads: a client, a server, and a trusted third party to mediate between them.</span></span> <span data-ttu-id="f5618-114">O intermediário confiável nesse protocolo é o centro de distribuição de chaves (KDC).</span><span class="sxs-lookup"><span data-stu-id="f5618-114">The trusted intermediary in this protocol is the Key Distribution Center (KDC).</span></span>

<span data-ttu-id="f5618-115">O KDC é um serviço em execução em um servidor fisicamente seguro.</span><span class="sxs-lookup"><span data-stu-id="f5618-115">The KDC is a service running on a physically secure server.</span></span> <span data-ttu-id="f5618-116">Ele mantém um banco de dados com informações de conta para todas as [*entidades de segurança*](../secgloss/s-gly.md) em seu Realm.</span><span class="sxs-lookup"><span data-stu-id="f5618-116">It maintains a database with account information for all [*security principals*](../secgloss/s-gly.md) in its realm.</span></span> <span data-ttu-id="f5618-117">Um realm é o equivalente Kerberos de um domínio no Windows.</span><span class="sxs-lookup"><span data-stu-id="f5618-117">A realm is the Kerberos equivalent of a domain in Windows.</span></span>

<span data-ttu-id="f5618-118">Juntamente com outras informações sobre cada entidade de segurança, o KDC armazena uma chave criptográfica conhecida somente para o principal e o KDC.</span><span class="sxs-lookup"><span data-stu-id="f5618-118">Along with other information about each security principal, the KDC stores a cryptographic key known only to the principal and the KDC.</span></span> <span data-ttu-id="f5618-119">Essa é a [*chave mestra*](../secgloss/m-gly.md) usada em trocas entre cada entidade de segurança e o KDC.</span><span class="sxs-lookup"><span data-stu-id="f5618-119">This is the [*master key*](../secgloss/m-gly.md) used in exchanges between each security principal and the KDC.</span></span> <span data-ttu-id="f5618-120">Na maioria das implementações do protocolo Kerberos, essa chave mestra é derivada usando uma função de [*hash*](../secgloss/h-gly.md) da senha de uma entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="f5618-120">In most implementations of the Kerberos protocol, this master key is derived using a [*hash*](../secgloss/h-gly.md) function from a security principal's password.</span></span>

<span data-ttu-id="f5618-121">Quando um cliente deseja criar uma conexão segura com um servidor, o cliente começa enviando uma solicitação para o KDC, não para o servidor que deseja alcançar.</span><span class="sxs-lookup"><span data-stu-id="f5618-121">When a client wants to create a secure connection with a server, the client begins by sending a request to the KDC, not to the server that it wants to reach.</span></span> <span data-ttu-id="f5618-122">O KDC cria e envia ao cliente uma chave de [*sessão*](../secgloss/s-gly.md) exclusiva para o cliente e um servidor a ser usado para autenticar um ao outro.</span><span class="sxs-lookup"><span data-stu-id="f5618-122">The KDC creates and sends to the client a unique [*session key*](../secgloss/s-gly.md) for the client and a server to use to authenticate each other.</span></span> <span data-ttu-id="f5618-123">O KDC tem acesso à chave mestra do cliente e à chave mestra do servidor.</span><span class="sxs-lookup"><span data-stu-id="f5618-123">The KDC has access to both the client's master key and the server's master key.</span></span> <span data-ttu-id="f5618-124">O KDC criptografa a cópia da chave de sessão do servidor usando a chave mestra do servidor e a cópia do cliente usando a chave mestra do cliente.</span><span class="sxs-lookup"><span data-stu-id="f5618-124">The KDC encrypts the server's copy of the session key using the server's master key, and the client's copy using the client's master key.</span></span>

<span data-ttu-id="f5618-125">O KDC pode atender à sua função como intermediário confiável enviando a chave de sessão diretamente para cada uma das entidades de segurança envolvidas, mas, na prática, esse procedimento não funcionará, por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="f5618-125">The KDC could fulfill its role as trusted intermediary by sending the session key directly to each of the security principals involved, but in practice this procedure will not work, for a number of reasons.</span></span> <span data-ttu-id="f5618-126">Em vez disso, o KDC envia ambas as chaves de sessão criptografadas para o cliente.</span><span class="sxs-lookup"><span data-stu-id="f5618-126">Instead, the KDC sends both encrypted session keys to the client.</span></span> <span data-ttu-id="f5618-127">A chave de sessão do servidor está incluída em um [tíquete de sessão](session-tickets.md).</span><span class="sxs-lookup"><span data-stu-id="f5618-127">The session key for the server is included in a [session ticket](session-tickets.md).</span></span>

 

 
