---
description: O protocolo de acesso de resumo
ms.assetid: 7b2fd75e-dd0d-4a63-a84b-a64f08f883f2
title: O protocolo de acesso de resumo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86aa8f05580c27c866c0568dbc67c4d5ba5c2016
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104556864"
---
# <a name="the-digest-access-protocol"></a><span data-ttu-id="259f6-103">O protocolo de acesso de resumo</span><span class="sxs-lookup"><span data-stu-id="259f6-103">The Digest Access Protocol</span></span>

<span data-ttu-id="259f6-104">O protocolo de acesso de resumo especificado pela [RFC 2617](https://www.ietf.org/rfc/rfc2617.txt) é implementado pelo SSP ( [*provedor de suporte de segurança*](../secgloss/s-gly.md) ) da Microsoft Digest.</span><span class="sxs-lookup"><span data-stu-id="259f6-104">The Digest Access protocol specified by [RFC 2617](https://www.ietf.org/rfc/rfc2617.txt) is implemented by the Microsoft Digest [*security support provider*](../secgloss/s-gly.md) (SSP).</span></span> <span data-ttu-id="259f6-105">A implementação consiste em um conjunto de funções de contexto de segurança SSPI ( [Microsoft Security Support Provider interface](sspi.md) ) que os aplicativos cliente/servidor chamam para:</span><span class="sxs-lookup"><span data-stu-id="259f6-105">The implementation consists of a set of [Microsoft Security Support Provider Interface](sspi.md) (SSPI) security context functions that client/server applications call to:</span></span>

-   <span data-ttu-id="259f6-106">Estabeleça um [*contexto de segurança*](../secgloss/s-gly.md) para a troca de mensagens.</span><span class="sxs-lookup"><span data-stu-id="259f6-106">Establish a [*security context*](../secgloss/s-gly.md) for message exchange.</span></span>
-   <span data-ttu-id="259f6-107">Obter objetos de dados exigidos pelo SSP de resumo, como [*credenciais*](../secgloss/c-gly.md) e identificadores de contexto.</span><span class="sxs-lookup"><span data-stu-id="259f6-107">Obtain data objects required by the Digest SSP, such as [*credentials*](../secgloss/c-gly.md) and context handles.</span></span>
-   <span data-ttu-id="259f6-108">[*Integridade*](../secgloss/i-gly.md) de mensagens de acesso e mecanismos de confidencialidade.</span><span class="sxs-lookup"><span data-stu-id="259f6-108">Access message [*integrity*](../secgloss/i-gly.md) and confidentiality mechanisms.</span></span>

<span data-ttu-id="259f6-109">A autenticação de acesso Digest ocorre em transações emparelhadas de solicitação/resposta, com solicitações originadas no cliente e respostas originadas no servidor.</span><span class="sxs-lookup"><span data-stu-id="259f6-109">Digest Access authentication takes place within paired request/response transactions, with requests originating on the client and responses originating on the server.</span></span> <span data-ttu-id="259f6-110">Uma autenticação de acesso de resumo bem-sucedida requer dois pares de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="259f6-110">A successful Digest Access authentication requires two request/response pairs.</span></span>

<span data-ttu-id="259f6-111">Quando o SSP de resumo é usado para autenticação HTTP, não há nenhuma conexão mantida entre o primeiro e o segundo par de solicitação/resposta.</span><span class="sxs-lookup"><span data-stu-id="259f6-111">When the Digest SSP is used for HTTP authentication, there is no connection maintained between the first and second request/response pair.</span></span> <span data-ttu-id="259f6-112">Em outras palavras, o servidor não aguarda a segunda solicitação depois de enviar a primeira resposta.</span><span class="sxs-lookup"><span data-stu-id="259f6-112">In other words, the server does not wait for the second request after it sends the first response.</span></span>

<span data-ttu-id="259f6-113">A ilustração a seguir mostra as etapas executadas no caminho HTTP por um cliente e um servidor para concluir uma autenticação usando o SSP de resumo.</span><span class="sxs-lookup"><span data-stu-id="259f6-113">The following illustration shows the steps taken on the HTTP path by a client and server to complete an authentication using the Digest SSP.</span></span> <span data-ttu-id="259f6-114">O mecanismo SASL usa a autenticação mútua e, portanto, os dados de autenticação são enviados de volta à chamada do servidor ASC final para o cliente que verifica se o cliente está se comunicando com o servidor correto.</span><span class="sxs-lookup"><span data-stu-id="259f6-114">The SASL mechanism makes use of mutual authentication, so authentication data is sent back on the final ASC server call to the client that verifies that the client is communicating with the correct server.</span></span>

![Protocolo de acesso de resumo](images/digest1.png)

<span data-ttu-id="259f6-116">O processo começa com o cliente solicitando um recurso protegido por acesso do servidor enviando a solicitação HTTP 1.</span><span class="sxs-lookup"><span data-stu-id="259f6-116">The process starts with the client requesting an access-protected resource from the server by sending HTTP Request 1.</span></span>

<span data-ttu-id="259f6-117">O servidor recebe a solicitação HTTP 1 e determina que o recurso requer informações de autenticação que não foram incluídas na solicitação.</span><span class="sxs-lookup"><span data-stu-id="259f6-117">The server receives HTTP Request 1 and determines that the resource requires authentication information that was not included in the request.</span></span> <span data-ttu-id="259f6-118">O servidor gera um desafio para o cliente da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="259f6-118">The server generates a challenge for the client as follows:</span></span>

1.  <span data-ttu-id="259f6-119">O servidor obtém suas [*credenciais*](../secgloss/c-gly.md) chamando a função [**falha AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) .</span><span class="sxs-lookup"><span data-stu-id="259f6-119">The server obtains its [*credentials*](../secgloss/c-gly.md) by calling the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) function.</span></span>
2.  <span data-ttu-id="259f6-120">O servidor gera o desafio de resumo chamando a função [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="259f6-120">The server generates the Digest challenge by calling the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span>
3.  <span data-ttu-id="259f6-121">O servidor envia um cabeçalho de WWW-Authenticate como sua resposta à solicitação do cliente (mostrada como resposta HTTP 1).</span><span class="sxs-lookup"><span data-stu-id="259f6-121">The server sends a WWW-Authenticate header as its response to the client's request (shown as HTTP Response 1).</span></span> <span data-ttu-id="259f6-122">O cabeçalho contém o desafio de resumo e uma diretiva opaca que contém uma referência a um [*contexto de segurança*](../secgloss/s-gly.md) parcial estabelecido para o cliente.</span><span class="sxs-lookup"><span data-stu-id="259f6-122">The header contains the Digest challenge and an opaque directive that contains a reference to a partial [*security context*](../secgloss/s-gly.md) established for the client.</span></span> <span data-ttu-id="259f6-123">O cabeçalho é enviado com um código de status 401 que indica que a solicitação do cliente gerou um erro de acesso não autorizado.</span><span class="sxs-lookup"><span data-stu-id="259f6-123">The header is sent with a 401 status code that indicates that the client request generated an unauthorized access error.</span></span> <span data-ttu-id="259f6-124">Para obter mais informações sobre o desafio de resumo, consulte [conteúdo de um desafio de resumo](contents-of-a-digest-challenge.md) e [gerando o desafio de resumo](generating-the-digest-challenge.md).</span><span class="sxs-lookup"><span data-stu-id="259f6-124">For more information about the Digest challenge, see [Contents of a Digest Challenge](contents-of-a-digest-challenge.md) and [Generating the Digest Challenge](generating-the-digest-challenge.md).</span></span>
4.  <span data-ttu-id="259f6-125">O cliente recebe a resposta HTTP 1, extrai o desafio de resumo enviado pelo servidor e gera uma resposta de desafio de resumo da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="259f6-125">The client receives HTTP Response 1, extracts the Digest challenge sent by the server, and generates a Digest challenge response as follows:</span></span>
    1.  <span data-ttu-id="259f6-126">As credenciais do usuário são obtidas chamando a função [**falha AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) ou, interativamente, solicitando credenciais ao usuário.</span><span class="sxs-lookup"><span data-stu-id="259f6-126">The user's credentials are obtained either by calling the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) function or by interactively prompting the user for credentials.</span></span>
    2.  <span data-ttu-id="259f6-127">As informações de desafio e credenciais são passadas para a função [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) , que gera a resposta de desafio resumida.</span><span class="sxs-lookup"><span data-stu-id="259f6-127">The challenge and credentials information are passed to the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function, which generates the Digest challenge response.</span></span>
5.  <span data-ttu-id="259f6-128">O cliente envia um cabeçalho de autorização que contém a resposta de desafio para o servidor (mostrado como solicitação HTTP 2).</span><span class="sxs-lookup"><span data-stu-id="259f6-128">The client sends an Authorization header that contains the challenge response to the server (shown as HTTP Request 2).</span></span> <span data-ttu-id="259f6-129">Para obter mais informações sobre a resposta de desafio de resumo, consulte [conteúdo de uma resposta de desafio de resumo](contents-of-a-digest-challenge-response.md) e [gerando a resposta de desafio Digest](generating-the-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="259f6-129">For more information about the Digest challenge response, see [Contents of a Digest Challenge Response](contents-of-a-digest-challenge-response.md) and [Generating the Digest Challenge Response](generating-the-digest-challenge-response.md).</span></span>
6.  <span data-ttu-id="259f6-130">O servidor recebe a solicitação HTTP 2, extrai a resposta de desafio enviada pelo cliente e autentica as informações chamando a função [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="259f6-130">The server receives HTTP Request 2, extracts the challenge response sent by the client, and authenticates the information by calling the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="259f6-131">Para obter detalhes sobre o processo de autenticação, consulte [autenticação inicial usando Microsoft Digest](initial-authentication-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="259f6-131">For details about the authentication process, see [Initial Authentication using Microsoft Digest](initial-authentication-using-microsoft-digest.md).</span></span>
7.  <span data-ttu-id="259f6-132">O servidor envia a resposta HTTP 2 de volta para o cliente como a segunda e última resposta exigida pelo protocolo de acesso Digest.</span><span class="sxs-lookup"><span data-stu-id="259f6-132">The server sends HTTP Response 2 back to the client as the second and final response required by the Digest Access protocol.</span></span> <span data-ttu-id="259f6-133">Se a autenticação for bem-sucedida, essa resposta conterá o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="259f6-133">If the authentication is successful, this response contains the requested resource.</span></span>

## <a name="related-topics"></a><span data-ttu-id="259f6-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="259f6-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="259f6-135">Conteúdo de uma resposta de desafio de resumo</span><span class="sxs-lookup"><span data-stu-id="259f6-135">Contents of a Digest Challenge Response</span></span>](contents-of-a-digest-challenge-response.md)
</dt> </dl>

 

 
