---
description: Provedores de credenciais no Windows 10
ms.assetid: BCF69196-D4E4-41D0-B372-5000FD50164B
title: Provedores de credenciais no Windows 10
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12a7947000e5d5a989f71dcdddd808a8e1d5ab3f
ms.sourcegitcommit: cd9672511263d04c0e4bc41758dd1d9e89ea92b4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/29/2021
ms.locfileid: "104297814"
---
# <a name="credential-providers-in-windows-10"></a><span data-ttu-id="684c3-103">Provedores de credenciais no Windows 10</span><span class="sxs-lookup"><span data-stu-id="684c3-103">Credential Providers in Windows 10</span></span>

<span data-ttu-id="684c3-104">Os provedores de credenciais são o mecanismo principal para autenticação de usuário — atualmente, eles são o único método para os usuários comprovarem sua identidade, que é necessária para o logon e outros cenários de autenticação do sistema.</span><span class="sxs-lookup"><span data-stu-id="684c3-104">Credential providers are the primary mechanism for user authentication—they currently are the only method for users to prove their identity which is required for logon and other system authentication scenarios.</span></span> <span data-ttu-id="684c3-105">Com o Windows 10 e a introdução do Microsoft Passport, os provedores de credenciais são mais importantes do que nunca; Eles serão usados para autenticação em aplicativos, sites e muito mais.</span><span class="sxs-lookup"><span data-stu-id="684c3-105">With Windows 10 and the introduction of Microsoft Passport, credential providers are more important than ever; they will be used for authentication into apps, websites, and more.</span></span>

<span data-ttu-id="684c3-106">A Microsoft fornece uma variedade de provedores de credenciais como parte do Windows, como senha, PIN, SmartCard e Windows Hello (reconhecimento de impressão digital, facial e íris).</span><span class="sxs-lookup"><span data-stu-id="684c3-106">Microsoft provides a variety of credential providers as part of Windows, such as password, PIN, smartcard, and Windows Hello (Fingerprint, Face, and Iris recognition).</span></span> <span data-ttu-id="684c3-107">Eles são chamados de "provedores de credenciais do sistema" neste artigo.</span><span class="sxs-lookup"><span data-stu-id="684c3-107">These are referred to as "system credential providers" in this article.</span></span> <span data-ttu-id="684c3-108">OEMs, empresas e outras entidades podem escrever seus próprios provedores de credenciais e integrá-los facilmente ao Windows.</span><span class="sxs-lookup"><span data-stu-id="684c3-108">OEMs, Enterprises, and other entities can write their own credential providers and integrate them easily into Windows.</span></span> <span data-ttu-id="684c3-109">Eles são chamados de "provedores de credenciais de terceiros" neste artigo.</span><span class="sxs-lookup"><span data-stu-id="684c3-109">These are referred to as "third-party credential providers" in this article.</span></span> <span data-ttu-id="684c3-110">Observe que os provedores de credenciais v1 e v2 têm suporte no Windows 10.</span><span class="sxs-lookup"><span data-stu-id="684c3-110">Note that both V1 and V2 credential providers are supported in Windows 10.</span></span> <span data-ttu-id="684c3-111">É importante que os criadores e gerentes de provedores de credenciais de terceiros compreendam essas recomendações.</span><span class="sxs-lookup"><span data-stu-id="684c3-111">It is important for creators and managers of third-party credential providers to understand these recommendations.</span></span>

## <a name="system-credential-providers"></a><span data-ttu-id="684c3-112">Provedores de credenciais do sistema</span><span class="sxs-lookup"><span data-stu-id="684c3-112">System credential providers</span></span>

<span data-ttu-id="684c3-113">É altamente recomendável que sempre haja pelo menos um provedor de credencial do sistema disponível para cada usuário no dispositivo, além de qualquer provedor de credenciais de terceiros.</span><span class="sxs-lookup"><span data-stu-id="684c3-113">We strongly recommend that there always be at least one system credential provider available for every user on the device in addition to any third-party credential providers.</span></span> <span data-ttu-id="684c3-114">Além disso, durante a configuração do provedor de credenciais de terceiros, cada usuário no dispositivo deve ser solicitado a configurar pelo menos um provedor de credenciais do sistema (se nenhuma outra opção de recuperação estiver disponível; consulte o cenário A, abaixo).</span><span class="sxs-lookup"><span data-stu-id="684c3-114">Additionally, during the set-up of the third-party credential provider, each user on the device should be prompted to set up at least one system credential provider (if no other recovery options are available; see Scenario A, below).</span></span>

### <a name="scenario-a"></a><span data-ttu-id="684c3-115">Cenário A</span><span class="sxs-lookup"><span data-stu-id="684c3-115">Scenario A</span></span>

<span data-ttu-id="684c3-116">Um usuário de conta local configurou um provedor de credenciais de terceiros e usa-o regularmente para fazer logon no dispositivo.</span><span class="sxs-lookup"><span data-stu-id="684c3-116">A local account user has set up a third-party credential provider and regularly uses it to log into the device.</span></span> <span data-ttu-id="684c3-117">Um dia, o usuário instala algumas atualizações no dispositivo que interrompe o provedor de credenciais de terceiros e o usuário não está ciente dessa alteração antes de reiniciar o computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-117">One day, the user installs some update to the device that breaks the third-party credential provider, and the user is unaware of this change before restarting the machine.</span></span>

<span data-ttu-id="684c3-118">Na próxima reinicialização, o usuário estará na tela de logon e não poderá usar o provedor de credenciais de terceiros esperado.</span><span class="sxs-lookup"><span data-stu-id="684c3-118">On the next restart, the user is on the logon screen and is unable to use the expected third-party credential provider.</span></span> <span data-ttu-id="684c3-119">Se o usuário tiver configurado um provedor de credenciais do sistema, o usuário poderá fazer logon no computador usando-o.</span><span class="sxs-lookup"><span data-stu-id="684c3-119">If the user has set up a system credential provider, the user will be able to log into the machine using it.</span></span> <span data-ttu-id="684c3-120">Caso contrário, o usuário não tem como recuperar a conta no computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-120">If not, the user has no way to recover the account on the machine.</span></span>

### <a name="scenario-b"></a><span data-ttu-id="684c3-121">Cenário B</span><span class="sxs-lookup"><span data-stu-id="684c3-121">Scenario B</span></span>

<span data-ttu-id="684c3-122">Um usuário da conta MSA/AD/AAD configurou um provedor de credenciais terceirizado e usa-o regularmente para fazer logon no dispositivo.</span><span class="sxs-lookup"><span data-stu-id="684c3-122">An MSA/AD/AAD account user has set up a third-party credential provider and regularly uses it to log into the device.</span></span> <span data-ttu-id="684c3-123">Um dia, o usuário instala algumas atualizações no dispositivo que interrompe o provedor de credenciais de terceiros e o usuário não está ciente dessa alteração antes de reiniciar o computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-123">One day, the user installs some update to the device that breaks the third -party credential provider, and the user is unaware of this change before restarting the machine.</span></span>

<span data-ttu-id="684c3-124">Na próxima reinicialização, o usuário estará na tela de logon e não poderá usar o provedor de credenciais de terceiros esperado.</span><span class="sxs-lookup"><span data-stu-id="684c3-124">On the next restart, the user is on the logon screen and is unable to use the expected third-party credential provider.</span></span> <span data-ttu-id="684c3-125">Se o usuário tiver configurado um provedor de credenciais do sistema, o usuário poderá fazer logon no computador usando-o.</span><span class="sxs-lookup"><span data-stu-id="684c3-125">If the user has set up a system credential provider, the user will be able to log into the machine using it.</span></span> <span data-ttu-id="684c3-126">Como alternativa, se o provedor de credenciais de senha do sistema estiver disponível, o usuário poderá solicitar/redefinir a senha remotamente e usá-la para fazer logon no computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-126">Alternatively, if the system's password credential provider is available, the user can remotely request/reset the password and use that to log into the machine.</span></span> <span data-ttu-id="684c3-127">Se nenhuma opção estiver disponível, o usuário não terá como recuperar a conta no computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-127">If neither option is available, the user has no way to recover the account on the machine.</span></span>

### <a name="conclusion"></a><span data-ttu-id="684c3-128">Conclusão</span><span class="sxs-lookup"><span data-stu-id="684c3-128">Conclusion</span></span>

<span data-ttu-id="684c3-129">Em resumo, queremos desencorajar a desabilitação de todos os provedores de credenciais do sistema em um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="684c3-129">In summary, we want to discourage the disabling of all system credential providers on a device.</span></span> <span data-ttu-id="684c3-130">Embora os provedores de credenciais de terceiros possam atender aos requisitos de autenticação adicionais para determinados grupos de usuários, é muito importante garantir que o usuário sempre possa reobter o acesso à sua máquina quando ocorrer uma alteração significativa.</span><span class="sxs-lookup"><span data-stu-id="684c3-130">While third-party credential providers may fulfill additional authentication requirements for particular groups of users, it is very important to ensure that the user can always regain access to their machine when a breaking change occurs.</span></span> <span data-ttu-id="684c3-131">Os provedores de credenciais do sistema fornecem essa garantia.</span><span class="sxs-lookup"><span data-stu-id="684c3-131">System credential providers provide this guarantee.</span></span>

## <a name="custom-credential-providers"></a><span data-ttu-id="684c3-132">Provedores de credenciais personalizados</span><span class="sxs-lookup"><span data-stu-id="684c3-132">Custom credential providers</span></span>

<span data-ttu-id="684c3-133">A estrutura do provedor de credenciais do Windows permite que os desenvolvedores criem provedores de credenciais personalizados.</span><span class="sxs-lookup"><span data-stu-id="684c3-133">The Windows credential provider framework enables developers to create custom credential providers.</span></span> <span data-ttu-id="684c3-134">Quando o [Winlogon](winlogon.md) deseja coletar credenciais, a interface do usuário de logon consulta cada provedor de credenciais para obter o número de credenciais que deseja enumerar.</span><span class="sxs-lookup"><span data-stu-id="684c3-134">When [Winlogon](winlogon.md) wants to collect credentials, the Logon UI queries each credential provider for the number of credentials that it wishes to enumerate.</span></span> <span data-ttu-id="684c3-135">Depois que todos os provedores tiverem enumerado seus blocos, a interface do usuário de logon os exibirá para o usuário.</span><span class="sxs-lookup"><span data-stu-id="684c3-135">After all providers have enumerated their tiles, the Logon UI displays them to the user.</span></span> <span data-ttu-id="684c3-136">O usuário interage com um bloco para fornecer as credenciais necessárias.</span><span class="sxs-lookup"><span data-stu-id="684c3-136">The user then interacts with a tile to supply the necessary credentials.</span></span> <span data-ttu-id="684c3-137">A interface do usuário de logon envia essas credenciais para autenticação.</span><span class="sxs-lookup"><span data-stu-id="684c3-137">The Logon UI submits these credentials for authentication.</span></span> <span data-ttu-id="684c3-138">Os provedores de credenciais também podem ser usados pela interface do usuário da credencial quando as credenciais são necessárias.</span><span class="sxs-lookup"><span data-stu-id="684c3-138">Credential providers can also be used by the Credential UI when credentials are necessary.</span></span> <span data-ttu-id="684c3-139">Consulte [**\_ cenário de \_ uso \_ do provedor de credenciais**](/windows/desktop/api/credentialprovider/ne-credentialprovider-credential_provider_usage_scenario) para obter uma lista de cenários em que um provedor de credenciais pode ter suporte.</span><span class="sxs-lookup"><span data-stu-id="684c3-139">See [**CREDENTIAL\_PROVIDER\_USAGE\_SCENARIO**](/windows/desktop/api/credentialprovider/ne-credentialprovider-credential_provider_usage_scenario) for a list of scenarios where a credential provider can be supported.</span></span>

<span data-ttu-id="684c3-140">Graças a esse sistema, é muito mais fácil criar um provedor de credenciais do que era historicamente.</span><span class="sxs-lookup"><span data-stu-id="684c3-140">Thanks to this system, it is much easier to create a credential provider than it was historically.</span></span> <span data-ttu-id="684c3-141">Grande parte do trabalho é tratada pela combinação de [Winlogon](winlogon.md), a interface do usuário de logon e a interface do usuário da credencial.</span><span class="sxs-lookup"><span data-stu-id="684c3-141">Much of the work is handled by the combination of [Winlogon](winlogon.md), the Logon UI and the Credential UI.</span></span> <span data-ttu-id="684c3-142">Para fazer isso, você precisará criar sua própria implementação de [**ICredentialProvider**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovider) e [**ICredentialProviderCredential**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovidercredential).</span><span class="sxs-lookup"><span data-stu-id="684c3-142">In order to do so, you will need to create your own implementation of [**ICredentialProvider**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovider) and [**ICredentialProviderCredential**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovidercredential).</span></span> <span data-ttu-id="684c3-143">Se você estiver implementando um provedor de credenciais v2, que é recomendado, também precisará implementar o [**ICredentialProviderCredential2**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovidercredential2).</span><span class="sxs-lookup"><span data-stu-id="684c3-143">If you are implementing a V2 credential provider, which is recommended, you will also need to implement [**ICredentialProviderCredential2**](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovidercredential2).</span></span>

<span data-ttu-id="684c3-144">É importante observar que os provedores de credenciais não são mecanismos de imposição.</span><span class="sxs-lookup"><span data-stu-id="684c3-144">It is important to note that credential providers are not enforcement mechanisms.</span></span> <span data-ttu-id="684c3-145">Eles são usados simplesmente para reunir e serializar credenciais, enviando-as para autorização.</span><span class="sxs-lookup"><span data-stu-id="684c3-145">They are simply used to gather and serialize credentials, submitting them for authorization.</span></span> <span data-ttu-id="684c3-146">A autoridade local e os pacotes de autenticação serão tratados e qualquer imposição de segurança necessária.</span><span class="sxs-lookup"><span data-stu-id="684c3-146">The local authority and authentication packages will handle and any necessary security enforcement.</span></span>

<span data-ttu-id="684c3-147">Combinando provedores de credenciais com hardware com suporte, você pode estender o Windows para dar suporte ao logon com informações biométricas, senhas, PINs, certificados de cartão inteligente ou qualquer pacote de autenticação personalizado que você escolher criar.</span><span class="sxs-lookup"><span data-stu-id="684c3-147">Combining credential providers with supported hardware, you can extend Windows to support logging on with biometric information, passwords, PINs, Smart Card certificates, or any custom authentication package you choose to create.</span></span> <span data-ttu-id="684c3-148">Você também pode personalizar a experiência de logon para o usuário de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="684c3-148">You can customize the logon experience for the user in a variety of ways as well.</span></span> <span data-ttu-id="684c3-149">Por exemplo, quando a interface do usuário de logon consulta seu provedor de credenciais para os blocos de credencial, você pode especificar um bloco padrão para fornecer uma experiência personalizada para um usuário.</span><span class="sxs-lookup"><span data-stu-id="684c3-149">For example, when the Logon UI queries your credential provider for the credential tiles, you can specify a default tile to provide a customized experience for a user.</span></span> <span data-ttu-id="684c3-150">Os provedores de credenciais podem até mesmo ser projetados para dar suporte ao SSO (logon único), autenticar usuários em um ponto de acesso seguro, bem como logon no computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-150">Credential providers can even be designed to support single sign on (SSO), authenticating users to a secure access point as well as machine logon.</span></span>

<span data-ttu-id="684c3-151">Os provedores de credenciais são registrados em um computador Windows e são responsáveis pelo seguinte.</span><span class="sxs-lookup"><span data-stu-id="684c3-151">Credential providers are registered on a Windows machine and are responsible for the following.</span></span>

-   <span data-ttu-id="684c3-152">Descrever as informações de credenciais necessárias para a autenticação.</span><span class="sxs-lookup"><span data-stu-id="684c3-152">Describing the credential information required for authentication.</span></span>
-   <span data-ttu-id="684c3-153">Tratamento da comunicação e da lógica com qualquer autoridade de autenticação externa.</span><span class="sxs-lookup"><span data-stu-id="684c3-153">Handling the communication and logic with any external authentication authorities.</span></span>
-   <span data-ttu-id="684c3-154">Empacotando as credenciais para logon interativo e de rede.</span><span class="sxs-lookup"><span data-stu-id="684c3-154">Packaging the credentials for interactive and network logon.</span></span>

> [!TIP]
>
> <span data-ttu-id="684c3-155">Tenha em mente que vários provedores de credenciais podem ser instalados em um único computador.</span><span class="sxs-lookup"><span data-stu-id="684c3-155">Keep in mind that multiple credential providers can be installed on a single machine.</span></span>

## <a name="wrapping-credential-providers"></a><span data-ttu-id="684c3-156">Encapsulando provedores de credenciais</span><span class="sxs-lookup"><span data-stu-id="684c3-156">Wrapping credential providers</span></span>

<span data-ttu-id="684c3-157">O encapsulamento de um provedor de credenciais do sistema pode ser feito para adicionar funcionalidade a esse provedor de credenciais que não tem suporte nativo.</span><span class="sxs-lookup"><span data-stu-id="684c3-157">Wrapping a system credential provider can be done to add functionality to that credential provider that is not natively supported.</span></span> <span data-ttu-id="684c3-158">Isso não é recomendado porque pode levar a um comportamento problemático.</span><span class="sxs-lookup"><span data-stu-id="684c3-158">This is not recommended because it can lead to problematic behavior.</span></span> <span data-ttu-id="684c3-159">As alterações podem ser feitas no provedor de credenciais que podem entrar em conflito com o wrapper, causando uma experiência de usuário ruim ou até mesmo impedindo o usuário de entrar em seu dispositivo.</span><span class="sxs-lookup"><span data-stu-id="684c3-159">Changes can be made to the credential provider which may conflict with the wrapper causing a poor user experience or even preventing the user from getting into their device.</span></span> <span data-ttu-id="684c3-160">Isso é especialmente verdadeiro com a cadência de atualização frequente do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="684c3-160">This is especially true with the frequent update cadence of Windows 10.</span></span>

<span data-ttu-id="684c3-161">Se a funcionalidade em um provedor de credenciais for necessária e não estiver incluída nativamente, o caminho recomendado será criar um provedor de credenciais personalizado.</span><span class="sxs-lookup"><span data-stu-id="684c3-161">If functionality in a credential provider is needed that is not included natively, the recommended path is to create a custom credential provider.</span></span> <span data-ttu-id="684c3-162">Essa é uma abordagem mais estável que não assume dependências dos provedores do sistema.</span><span class="sxs-lookup"><span data-stu-id="684c3-162">This is a more stable approach that does not take dependencies on the system providers.</span></span>

## <a name="related-topics"></a><span data-ttu-id="684c3-163">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="684c3-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="684c3-164">Experiência de logon do Windows controlada pelo provedor de credenciais</span><span class="sxs-lookup"><span data-stu-id="684c3-164">Credential Provider driven Windows Logon Experience</span></span>](https://go.microsoft.com/fwlink/?LinkId=717287)
</dt> <dt>

[<span data-ttu-id="684c3-165">ICredentialProvider</span><span class="sxs-lookup"><span data-stu-id="684c3-165">ICredentialProvider</span></span>](/windows/desktop/api/credentialprovider/nn-credentialprovider-icredentialprovider)
</dt> <dt>

[<span data-ttu-id="684c3-166">\_serialização de \_ credencial do provedor de credenciais \_</span><span class="sxs-lookup"><span data-stu-id="684c3-166">CREDENTIAL\_PROVIDER\_CREDENTIAL\_SERIALIZATION</span></span>](/windows/desktop/api/credentialprovider/ns-credentialprovider-credential_provider_credential_serialization)
</dt> <dt>

[<span data-ttu-id="684c3-167">\_cenário de \_ uso do provedor de credenciais \_</span><span class="sxs-lookup"><span data-stu-id="684c3-167">CREDENTIAL\_PROVIDER\_USAGE\_SCENARIO</span></span>](/windows/desktop/api/credentialprovider/ne-credentialprovider-credential_provider_usage_scenario)
</dt> </dl>

 

 
