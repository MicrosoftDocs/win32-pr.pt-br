---
description: Especificando codificações Schannel e níveis de codificação
ms.assetid: b87d3e72-df7b-4a00-854e-c3706565ed7d
title: Especificando codificações Schannel e níveis de codificação
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b04ec37cfea633814881fba5bfd71ad15205a1bd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105750453"
---
# <a name="specifying-schannel-ciphers-and-cipher-strengths"></a><span data-ttu-id="6ceb7-103">Especificando codificações Schannel e níveis de codificação</span><span class="sxs-lookup"><span data-stu-id="6ceb7-103">Specifying Schannel Ciphers and Cipher Strengths</span></span>

<span data-ttu-id="6ceb7-104">Para trocas de informações de cliente/servidor, o comportamento padrão do Schannel é negociar a melhor codificação disponível com base nas habilitadas no registro.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-104">For client/server information exchanges, the default behavior of Schannel is to negotiate the best cipher available based on those enabled in the registry.</span></span> <span data-ttu-id="6ceb7-105">Os aplicativos podem limitar as codificações e os pontos de codificação permitidos para uma conexão usando membros da estrutura de [**\_ credenciais Schannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="6ceb7-105">Applications may limit the ciphers and cipher strengths allowed for a connection by using members of the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure as follows:</span></span>

1.  <span data-ttu-id="6ceb7-106">Defina o membro **palgSupportedAlgs** como uma matriz de [**\_ ID de alg**](../seccrypto/alg-id.md) que contém as codificações permitidas.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-106">Set the **palgSupportedAlgs** member to an array of [**ALG\_ID**](../seccrypto/alg-id.md) containing the allowable ciphers.</span></span> <span data-ttu-id="6ceb7-107">Para obter mais informações, consulte IDs de codificação.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-107">For more information, see Cipher IDs.</span></span>
2.  <span data-ttu-id="6ceb7-108">Defina os membros **dwMinimumCipherStrength** e/ou **dwMaximumCipherStrength** para os pontos fortes mínimos e máximos permitidos.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-108">Set the **dwMinimumCipherStrength** and/or **dwMaximumCipherStrength** members to the allowable minimum and maximum strengths.</span></span> <span data-ttu-id="6ceb7-109">Para obter mais informações, consulte valores de intensidade de codificação.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-109">For more information, see Cipher Strength Values.</span></span>
3.  <span data-ttu-id="6ceb7-110">Passe a estrutura de [**\_ credenciais Schannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) (por meio do parâmetro *pAuthData* ) em uma chamada para a função [**falha AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) .</span><span class="sxs-lookup"><span data-stu-id="6ceb7-110">Pass the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure (by means of the *pAuthData* parameter) in a call to the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) function.</span></span> <span data-ttu-id="6ceb7-111">Essa função retorna um identificador de credenciais.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-111">This function returns a credentials handle.</span></span>
4.  <span data-ttu-id="6ceb7-112">Especifique o identificador de credenciais em uma chamada para a função [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) do lado do cliente ou a função [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) do lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-112">Specify the credentials handle in a call to the client-side [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function or the server-side [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span>

## <a name="cipher-ids"></a><span data-ttu-id="6ceb7-113">IDs de codificação</span><span class="sxs-lookup"><span data-stu-id="6ceb7-113">Cipher IDs</span></span>

<span data-ttu-id="6ceb7-114">O comportamento padrão do Schannel é solicitar a melhor codificação disponível com base nas entradas do Schannel no registro do sistema.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-114">The default behavior of Schannel is to request the best cipher available based on Schannel entries in the system registry.</span></span> <span data-ttu-id="6ceb7-115">Não altere o registro do sistema; as configurações que ele contém para Schannel são usadas globalmente e afetarão outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-115">Do not change the system registry; the settings it contains for Schannel are used globally and will affect other applications.</span></span> <span data-ttu-id="6ceb7-116">Para obter a lista de constantes válidas, consulte [**\_ ID de alg**](../seccrypto/alg-id.md).</span><span class="sxs-lookup"><span data-stu-id="6ceb7-116">For the list of valid constants, see [**ALG\_ID**](../seccrypto/alg-id.md).</span></span>

## <a name="cipher-strength-values"></a><span data-ttu-id="6ceb7-117">Valores de intensidade de codificação</span><span class="sxs-lookup"><span data-stu-id="6ceb7-117">Cipher Strength Values</span></span>

<span data-ttu-id="6ceb7-118">Normalmente, esse recurso Schannel é usado para limitar uma conexão a codificações de força doméstica ou de exportação.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-118">This Schannel feature is typically used to limit a connection to either domestic or export strength ciphers.</span></span> <span data-ttu-id="6ceb7-119">As forças domésticas incluem 56 e 128 bits, enquanto a intensidade da exportação é limitada a 56 bits.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-119">Domestic strengths include 56, and 128 bits, while export strength is limited to 56 bits.</span></span> <span data-ttu-id="6ceb7-120">Se você definir os valores mínimo e máximo como zero, o Schannel usará todos os níveis de codificação disponíveis.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-120">If you set the minimum and maximum values to zero Schannel will use all available cipher strengths.</span></span>

<span data-ttu-id="6ceb7-121">Usando TLS ou SSL 3,0, defina o membro **dwMinimumCipherStrength** como-1 (negativo) para habilitar os conjuntos de codificação de "criptografia nula", que fornecem assinaturas, mas sem criptografia.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-121">Using TLS or SSL 3.0, set the **dwMinimumCipherStrength** member to -1 (negative one) to enable the "Null Cipher" cipher suites, which provide signatures but no encryption.</span></span> <span data-ttu-id="6ceb7-122">Se **dwMaximumCipherStrength** também for definido como-1, somente os pacotes de "criptografia nula" serão habilitados.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-122">If **dwMaximumCipherStrength** is also set to -1 then only the "Null Cipher" suites will be enabled.</span></span> <span data-ttu-id="6ceb7-123">Essa configuração destina-se somente ao desenvolvimento e não deve ser usada em sistemas de produção.</span><span class="sxs-lookup"><span data-stu-id="6ceb7-123">This setting is intended for development only and should not be used in production systems.</span></span>

## <a name="querying-cipher-information"></a><span data-ttu-id="6ceb7-124">Consultando informações de codificação</span><span class="sxs-lookup"><span data-stu-id="6ceb7-124">Querying Cipher Information</span></span>

<span data-ttu-id="6ceb7-125">Para recuperar as configurações de intensidade de codificação para uma credencial, chame a função [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) e especifique os \_ pontos de codificação de attr SECPKG \_ \_ como o parâmetro *ulAttribute* .</span><span class="sxs-lookup"><span data-stu-id="6ceb7-125">To retrieve the cipher strength settings for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) function and specify SECPKG\_ATTR\_CIPHER\_STRENGTHS as the *ulAttribute* parameter.</span></span>

<span data-ttu-id="6ceb7-126">Para recuperar a lista de algoritmos com suporte para uma credencial, chame o [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) com o SECPKG \_ attr com \_ suporte \_ ALGS como o parâmetro *ulAttribute* .</span><span class="sxs-lookup"><span data-stu-id="6ceb7-126">To retrieve the list of supported algorithms for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) with SECPKG\_ATTR\_SUPPORTED\_ALGS as the *ulAttribute* parameter.</span></span>

 

 
