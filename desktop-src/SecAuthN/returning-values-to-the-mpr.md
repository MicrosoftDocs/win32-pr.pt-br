---
description: As funções de rede do Windows retornam o \_ sucesso do WN em caso de êxito ou retornarão um valor diferente de zero, caso a função encontre um erro. Além disso, eles retornam informações de erro estendidas usando WNetSetLastError e SetLastError.
ms.assetid: cb9d29a1-b3a5-4440-a069-3cd1565b1699
title: Retornando valores para o MPR
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c96a5636f57d5c926af4e43e676f0b6db75d164
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103921620"
---
# <a name="returning-values-to-the-mpr"></a><span data-ttu-id="627f8-104">Retornando valores para o MPR</span><span class="sxs-lookup"><span data-stu-id="627f8-104">Returning Values to the MPR</span></span>

<span data-ttu-id="627f8-105">As funções de rede do Windows retornam o \_ sucesso do WN em caso de êxito ou retornarão um valor diferente de zero, caso a função encontre um erro.</span><span class="sxs-lookup"><span data-stu-id="627f8-105">The Windows Networking functions return WN\_SUCCESS on success, or they return a unique nonzero value if the function encounters an error.</span></span> <span data-ttu-id="627f8-106">Além disso, eles retornam informações de erro estendidas usando [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) e [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).</span><span class="sxs-lookup"><span data-stu-id="627f8-106">In addition, they return extended error information using [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) and [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).</span></span>

<span data-ttu-id="627f8-107">Para dar suporte ao comportamento acima, as funções de provedor de rede não devem chamar [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) antes de retornar.</span><span class="sxs-lookup"><span data-stu-id="627f8-107">To support the above behavior, network provider functions should not call [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) before returning.</span></span> <span data-ttu-id="627f8-108">Isso ocorre porque o MPR chama **SetLastError** para as funções na API do provedor de rede depois que elas retornam.</span><span class="sxs-lookup"><span data-stu-id="627f8-108">This is because the MPR calls **SetLastError** for the functions in the Network Provider API after they return.</span></span> <span data-ttu-id="627f8-109">Se os provedores de rede chamarem **SetLastError** diretamente, eles estarão fazendo chamadas de função redundantes.</span><span class="sxs-lookup"><span data-stu-id="627f8-109">If the network providers call **SetLastError** directly, they will be making redundant function calls.</span></span> <span data-ttu-id="627f8-110">As funções de provedor de rede devem simplesmente retornar um código de erro.</span><span class="sxs-lookup"><span data-stu-id="627f8-110">Network provider functions should simply return an error code.</span></span> <span data-ttu-id="627f8-111">Os códigos de erro são especificados na descrição da função ou [valores de retorno](network-security-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="627f8-111">The error codes are specified in the function description or [Return Values](network-security-return-values.md).</span></span> <span data-ttu-id="627f8-112">Além disso, as funções de provedor de rede podem retornar qualquer [código de erro do sistema](../debug/system-error-codes.md), como memória insuficiente.</span><span class="sxs-lookup"><span data-stu-id="627f8-112">Also, network provider functions may return any [System Error Codes](../debug/system-error-codes.md), such as insufficient memory.</span></span> <span data-ttu-id="627f8-113">A única exceção é [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), que deve retornar uma máscara que indica as funções com suporte pelo provedor de rede.</span><span class="sxs-lookup"><span data-stu-id="627f8-113">The only exception is [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), which should return a mask indicating the functions supported by the network provider.</span></span>

<span data-ttu-id="627f8-114">Se uma função de provedor de rede precisar retornar informações de erro estendidas, ela deverá chamar [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora).</span><span class="sxs-lookup"><span data-stu-id="627f8-114">If a network provider function needs to return extended error information, it should call [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora).</span></span> <span data-ttu-id="627f8-115">Essa função é fornecida pelo sistema operacional Windows para uso por provedores de rede.</span><span class="sxs-lookup"><span data-stu-id="627f8-115">This function is provided by the Windows operating system for use by network providers.</span></span> <span data-ttu-id="627f8-116">Quando o provedor chama **WNetSetLastError**, ele pode definir uma cadeia de caracteres contendo informações adicionais sobre o erro.</span><span class="sxs-lookup"><span data-stu-id="627f8-116">When the provider calls **WNetSetLastError**, it can set a string containing additional information about the error.</span></span> <span data-ttu-id="627f8-117">Essas informações são armazenadas por thread.</span><span class="sxs-lookup"><span data-stu-id="627f8-117">This information is stored on a per-thread basis.</span></span> <span data-ttu-id="627f8-118">Isso é análogo ao [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) para aplicativos do Windows.</span><span class="sxs-lookup"><span data-stu-id="627f8-118">This is analogous to [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) for Windows applications.</span></span> <span data-ttu-id="627f8-119">O sistema operacional Windows chama **WNetSetLastError** para verificar se há uma cadeia de caracteres armazenada usando **WNetSetLastError** e, se encontrada, retorna as informações de erro estendidas para o aplicativo de chamada que iniciou a solicitação de rede.</span><span class="sxs-lookup"><span data-stu-id="627f8-119">The Windows operating system calls **WNetSetLastError** to check for a string stored using **WNetSetLastError** and, if found, returns the extended error information to the calling application that initiated the network request.</span></span>

> [!Note]  
> <span data-ttu-id="627f8-120">O prefixo WNet de [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) é enganoso, pois essa API, ao contrário de **WNetSetLastError**, não faz parte do conjunto de API de rede do Windows.</span><span class="sxs-lookup"><span data-stu-id="627f8-120">The WNet prefix of [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) is misleading since this API, unlike **WNetSetLastError**, is not part of the Windows Networking API set.</span></span> <span data-ttu-id="627f8-121">**WNetSetLastError** destina-se ao uso somente por provedores de rede.</span><span class="sxs-lookup"><span data-stu-id="627f8-121">**WNetSetLastError** is intended for use only by network providers.</span></span> <span data-ttu-id="627f8-122">O nome, **WNetSetLastError**, é retido para compatibilidade com os provedores existentes.</span><span class="sxs-lookup"><span data-stu-id="627f8-122">The name, **WNetSetLastError**, is retained for compatibility with existing providers.</span></span>

 

 

 
