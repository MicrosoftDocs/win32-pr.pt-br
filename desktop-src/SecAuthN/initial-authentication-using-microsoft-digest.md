---
description: A autenticação inicial ocorre quando o servidor recebe uma resposta de desafio de um cliente.
ms.assetid: 8a5cf26b-0b2a-4f19-807b-9ec4d533cdd4
title: Autenticação inicial usando Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ed4960d947bbc60df962e6a9b71be755e158c8e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103829760"
---
# <a name="initial-authentication-using-microsoft-digest"></a><span data-ttu-id="718a9-103">Autenticação inicial usando Microsoft Digest</span><span class="sxs-lookup"><span data-stu-id="718a9-103">Initial Authentication Using Microsoft Digest</span></span>

<span data-ttu-id="718a9-104">A autenticação inicial ocorre quando o servidor recebe uma resposta de desafio de um cliente.</span><span class="sxs-lookup"><span data-stu-id="718a9-104">The initial authentication takes place when the server receives a challenge response from a client.</span></span> <span data-ttu-id="718a9-105">A autenticação de uma resposta de desafio normalmente envolve um mínimo de dois servidores:</span><span class="sxs-lookup"><span data-stu-id="718a9-105">Authenticating a challenge response typically involves a minimum of two servers:</span></span>

-   <span data-ttu-id="718a9-106">O servidor de origem — recebe a solicitação do cliente e emite um desafio e, em seguida, recebe a resposta de desafio do cliente que deve ser autenticado.</span><span class="sxs-lookup"><span data-stu-id="718a9-106">The originating server—receives the request from the client and issues a challenge, and then receives the challenge response from the client which must be authenticated.</span></span>
-   <span data-ttu-id="718a9-107">O servidor de autenticação — recebe informações de autorização do servidor de origem e executa a autenticação.</span><span class="sxs-lookup"><span data-stu-id="718a9-107">The authenticating server—receives authorization information from the originating server, and performs the authentication.</span></span> <span data-ttu-id="718a9-108">Normalmente, esse servidor é um controlador de domínio que dá suporte a vários servidores de origem.</span><span class="sxs-lookup"><span data-stu-id="718a9-108">This server is typically a domain controller that supports multiple originating servers.</span></span>

<span data-ttu-id="718a9-109">Quando o servidor de origem recebe uma solicitação com um cabeçalho de autorização que contém uma resposta de desafio de resumo, a autenticação continua da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="718a9-109">When the originating server receives a request with an Authorization header containing a Digest challenge response, the authentication proceeds as follows:</span></span>

-   <span data-ttu-id="718a9-110">A identidade do servidor de origem é verificada em relação ao servidor codificado no nonce do desafio.</span><span class="sxs-lookup"><span data-stu-id="718a9-110">The identity of the originating server is checked against the server encoded in the challenge's nonce.</span></span>
-   <span data-ttu-id="718a9-111">O carimbo de data/hora codificado no nonce é verificado.</span><span class="sxs-lookup"><span data-stu-id="718a9-111">The time stamp encoded in the nonce is checked.</span></span> <span data-ttu-id="718a9-112">Se o nonce tiver expirado e as informações de nome de usuário/senha forem válidas, o servidor de origem encerrará a autenticação emitindo um novo desafio de resumo com a diretiva obsoleta definida como "true".</span><span class="sxs-lookup"><span data-stu-id="718a9-112">If the nonce has expired and the user name/password information is valid, the originating server ends the authentication by issuing a new Digest challenge with the stale directive set to "true".</span></span> <span data-ttu-id="718a9-113">Isso indica que apenas o nonce era "obsoleto" e o cliente pode responder ao novo desafio usando a senha usada na resposta anterior.</span><span class="sxs-lookup"><span data-stu-id="718a9-113">This indicates that only the nonce was "stale" and the client can respond to the new challenge using the password it used in the previous response.</span></span> <span data-ttu-id="718a9-114">Se o cliente receber um novo desafio depois de enviar a resposta de desafio para o desafio obsoleto, o cliente deverá gerar uma nova resposta de desafio.</span><span class="sxs-lookup"><span data-stu-id="718a9-114">If the client receives a new challenge after sending the challenge response for the stale challenge, the client must generate a new challenge response.</span></span>
-   <span data-ttu-id="718a9-115">Se a detecção de reprodução for imposta, a diretiva NC (contagem de nonce) será verificada em relação ao banco de dados de sessão nonce mantido pelo servidor.</span><span class="sxs-lookup"><span data-stu-id="718a9-115">If replay detection is enforced, the nc directive (nonce count) is checked against the nonce session database maintained by the server.</span></span>
-   <span data-ttu-id="718a9-116">O servidor de autenticação é identificado e enviou as informações de autorização do cliente.</span><span class="sxs-lookup"><span data-stu-id="718a9-116">The authenticating server is identified and sent the client's authorization information.</span></span>
-   <span data-ttu-id="718a9-117">O servidor de autenticação verifica a identidade do servidor codificado no nonce em relação à identidade do servidor de origem.</span><span class="sxs-lookup"><span data-stu-id="718a9-117">The authenticating server checks the identity of the server encoded in the nonce against the identity of the originating server.</span></span>
-   <span data-ttu-id="718a9-118">O servidor de autenticação, que é um controlador de domínio, recupera a senha do usuário.</span><span class="sxs-lookup"><span data-stu-id="718a9-118">The authenticating server, which is a domain controller, retrieves the user's password.</span></span>
-   <span data-ttu-id="718a9-119">Usando as informações de autorização, a senha e a identificação do servidor de origem, o servidor de autenticação computa o valor que o cliente deve ter fornecido na diretiva de resposta da resposta de desafio.</span><span class="sxs-lookup"><span data-stu-id="718a9-119">Using the authorization information, password, and originating server identification, the authenticating server computes the value that the client should have supplied in the challenge response's response directive.</span></span> <span data-ttu-id="718a9-120">O servidor de autenticação compara o valor calculado à resposta do cliente para determinar o êxito ou a falha da autenticação.</span><span class="sxs-lookup"><span data-stu-id="718a9-120">The authenticating server compares the computed value to the client's response to determine the success or failure of the authentication.</span></span>

<span data-ttu-id="718a9-121">Se a autenticação for bem-sucedida, o [*contexto de segurança*](../secgloss/s-gly.md) do usuário e uma [*chave de sessão*](../secgloss/s-gly.md) de resumo serão retornados para o servidor de origem.</span><span class="sxs-lookup"><span data-stu-id="718a9-121">If authentication is successful, the user's [*security context*](../secgloss/s-gly.md) and a Digest [*session key*](../secgloss/s-gly.md) are returned to the originating server.</span></span> <span data-ttu-id="718a9-122">Se a autenticação falhar, o servidor de origem deverá gerar uma resposta de erro.</span><span class="sxs-lookup"><span data-stu-id="718a9-122">If authentication fails, the originating server must generate an error response.</span></span> <span data-ttu-id="718a9-123">Após uma autenticação bem-sucedida, o servidor de origem retorna o recurso solicitado ao cliente.</span><span class="sxs-lookup"><span data-stu-id="718a9-123">After a successful authentication the originating server returns the requested resource to the client.</span></span>

<span data-ttu-id="718a9-124">A chave de sessão de resumo retornada pelo servidor de autenticação é armazenada em cache pelo servidor de origem para uso na autenticação de solicitações futuras.</span><span class="sxs-lookup"><span data-stu-id="718a9-124">The Digest session key returned by the authenticating server is cached by the originating server for use in authenticating future requests.</span></span> <span data-ttu-id="718a9-125">Para obter mais informações, consulte [Autenticando solicitações subsequentes usando Microsoft Digest](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="718a9-125">For more information, see [Authenticating Subsequent Requests using Microsoft Digest](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

 

 
