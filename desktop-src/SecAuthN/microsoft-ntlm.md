---
description: O NTLM (desafio/resposta) do Windows é o protocolo de autenticação usado em redes que incluem sistemas que executam o sistema operacional Windows e sistemas autônomos.
ms.assetid: 35a38858-d36f-45c9-95f4-2541a182f5ac
title: NTLM da Microsoft
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9723f24d5913adefe70d4e238de0591790a34bfd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501592"
---
# <a name="microsoft-ntlm"></a><span data-ttu-id="95991-103">NTLM da Microsoft</span><span class="sxs-lookup"><span data-stu-id="95991-103">Microsoft NTLM</span></span>

<span data-ttu-id="95991-104">O NTLM (desafio/resposta) do Windows é o protocolo de autenticação usado em redes que incluem sistemas que executam o sistema operacional Windows e sistemas autônomos.</span><span class="sxs-lookup"><span data-stu-id="95991-104">Windows Challenge/Response (NTLM) is the authentication protocol used on networks that include systems running the Windows operating system and on stand-alone systems.</span></span>

<span data-ttu-id="95991-105">O [*pacote de segurança*](../secgloss/s-gly.md) do Microsoft [*Kerberos*](../secgloss/k-gly.md) adiciona mais segurança do que o NTLM aos sistemas em uma rede.</span><span class="sxs-lookup"><span data-stu-id="95991-105">The Microsoft [*Kerberos*](../secgloss/k-gly.md) [*security package*](../secgloss/s-gly.md) adds greater security than NTLM to systems on a network.</span></span> <span data-ttu-id="95991-106">Embora o Microsoft *Kerberos* seja o protocolo de sua escolha, o NTLM ainda tem suporte.</span><span class="sxs-lookup"><span data-stu-id="95991-106">Although Microsoft *Kerberos* is the protocol of choice, NTLM is still supported.</span></span> <span data-ttu-id="95991-107">O NTLM também deve ser usado para autenticação de logon em sistemas autônomos.</span><span class="sxs-lookup"><span data-stu-id="95991-107">NTLM must also be used for logon authentication on stand-alone systems.</span></span> <span data-ttu-id="95991-108">Para obter mais informações sobre o Kerberos, consulte [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="95991-108">For more information about Kerberos, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="95991-109">As credenciais NTLM são baseadas nos dados obtidos durante o processo de logon interativo e consistem em um nome de domínio, um nome de usuário e um [*hash*](../secgloss/h-gly.md) unidirecional da senha do usuário.</span><span class="sxs-lookup"><span data-stu-id="95991-109">NTLM credentials are based on data obtained during the interactive logon process and consist of a domain name, a user name, and a one-way [*hash*](../secgloss/h-gly.md) of the user's password.</span></span> <span data-ttu-id="95991-110">O NTLM usa um protocolo criptografado de desafio/resposta para autenticar um usuário sem enviar a senha do usuário pela conexão.</span><span class="sxs-lookup"><span data-stu-id="95991-110">NTLM uses an encrypted challenge/response protocol to authenticate a user without sending the user's password over the wire.</span></span> <span data-ttu-id="95991-111">Em vez disso, o sistema que solicita autenticação deve executar um cálculo que prova que ele tem acesso às credenciais NTLM protegidas.</span><span class="sxs-lookup"><span data-stu-id="95991-111">Instead, the system requesting authentication must perform a calculation that proves it has access to the secured NTLM credentials.</span></span>

<span data-ttu-id="95991-112">A autenticação interativa de NTLM em uma rede normalmente envolve dois sistemas: um sistema cliente, no qual o usuário está solicitando autenticação e um controlador de domínio, onde as informações relacionadas à senha do usuário são mantidas.</span><span class="sxs-lookup"><span data-stu-id="95991-112">Interactive NTLM authentication over a network typically involves two systems: a client system, where the user is requesting authentication, and a domain controller, where information related to the user's password is kept.</span></span> <span data-ttu-id="95991-113">A autenticação não interativa, que pode ser necessária para permitir que um usuário já conectado acesse um recurso como um aplicativo de servidor, normalmente envolve três sistemas: um cliente, um servidor e um controlador de domínio que faz os cálculos de autenticação em nome do servidor.</span><span class="sxs-lookup"><span data-stu-id="95991-113">Noninteractive authentication, which may be required to permit an already logged-on user to access a resource such as a server application, typically involves three systems: a client, a server, and a domain controller that does the authentication calculations on behalf of the server.</span></span>

<span data-ttu-id="95991-114">As etapas a seguir apresentam uma estrutura de autenticação não interativa de NTLM.</span><span class="sxs-lookup"><span data-stu-id="95991-114">The following steps present an outline of NTLM noninteractive authentication.</span></span> <span data-ttu-id="95991-115">A primeira etapa fornece as credenciais NTLM do usuário e ocorre somente como parte do processo de autenticação interativa (logon).</span><span class="sxs-lookup"><span data-stu-id="95991-115">The first step provides the user's NTLM credentials and occurs only as part of the interactive authentication (logon) process.</span></span>

1.  <span data-ttu-id="95991-116">(Somente autenticação interativa) Um usuário acessa um computador cliente e fornece um nome de domínio, nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="95991-116">(Interactive authentication only) A user accesses a client computer and provides a domain name, user name, and password.</span></span> <span data-ttu-id="95991-117">O cliente computa um [*hash*](../secgloss/h-gly.md) criptográfico da senha e descarta a senha real.</span><span class="sxs-lookup"><span data-stu-id="95991-117">The client computes a cryptographic [*hash*](../secgloss/h-gly.md) of the password and discards the actual password.</span></span>
2.  <span data-ttu-id="95991-118">O cliente envia o nome de usuário para o servidor (em [*texto não criptografado*](../secgloss/p-gly.md)).</span><span class="sxs-lookup"><span data-stu-id="95991-118">The client sends the user name to the server (in [*plaintext*](../secgloss/p-gly.md)).</span></span>
3.  <span data-ttu-id="95991-119">O servidor gera um número aleatório de 16 bytes, chamado de *Challenge* ou [*nonce*](../secgloss/n-gly.md), e o envia para o cliente.</span><span class="sxs-lookup"><span data-stu-id="95991-119">The server generates a 16-byte random number, called a *challenge* or [*nonce*](../secgloss/n-gly.md), and sends it to the client.</span></span>
4.  <span data-ttu-id="95991-120">O cliente criptografa esse desafio com o hash da senha do usuário e retorna o resultado para o servidor.</span><span class="sxs-lookup"><span data-stu-id="95991-120">The client encrypts this challenge with the hash of the user's password and returns the result to the server.</span></span> <span data-ttu-id="95991-121">Isso é chamado de *resposta*.</span><span class="sxs-lookup"><span data-stu-id="95991-121">This is called the *response*.</span></span>
5.  <span data-ttu-id="95991-122">O servidor envia os três itens a seguir para o controlador de domínio:</span><span class="sxs-lookup"><span data-stu-id="95991-122">The server sends the following three items to the domain controller:</span></span>

    -   <span data-ttu-id="95991-123">Nome de usuário</span><span class="sxs-lookup"><span data-stu-id="95991-123">User name</span></span>
    -   <span data-ttu-id="95991-124">Desafio enviado ao cliente</span><span class="sxs-lookup"><span data-stu-id="95991-124">Challenge sent to the client</span></span>
    -   <span data-ttu-id="95991-125">Resposta recebida do cliente</span><span class="sxs-lookup"><span data-stu-id="95991-125">Response received from the client</span></span>

6.  <span data-ttu-id="95991-126">O controlador de domínio usa o nome de usuário para recuperar o hash da senha do usuário do banco de dados do Gerenciador de contas de segurança.</span><span class="sxs-lookup"><span data-stu-id="95991-126">The domain controller uses the user name to retrieve the hash of the user's password from the Security Account Manager database.</span></span> <span data-ttu-id="95991-127">Ele usa esse hash de senha para criptografar o desafio.</span><span class="sxs-lookup"><span data-stu-id="95991-127">It uses this password hash to encrypt the challenge.</span></span>
7.  <span data-ttu-id="95991-128">O controlador de domínio compara o desafio criptografado calculado (na etapa 6) com a resposta computada pelo cliente (na etapa 4).</span><span class="sxs-lookup"><span data-stu-id="95991-128">The domain controller compares the encrypted challenge it computed (in step 6) to the response computed by the client (in step 4).</span></span> <span data-ttu-id="95991-129">Se forem idênticos, a autenticação será bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="95991-129">If they are identical, authentication is successful.</span></span>

<span data-ttu-id="95991-130">Seu aplicativo não deve acessar o [*pacote de segurança*](../secgloss/s-gly.md) NTLM diretamente; em vez disso, ele deve usar o pacote de segurança [*Negotiate*](../secgloss/n-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="95991-130">Your application should not access the NTLM [*security package*](../secgloss/s-gly.md) directly; instead, it should use the [*Negotiate*](../secgloss/n-gly.md) security package.</span></span> <span data-ttu-id="95991-131">Negociar permite que seu aplicativo aproveite os [*protocolos de segurança*](../secgloss/s-gly.md) mais avançados se eles tiverem suporte dos sistemas envolvidos na autenticação.</span><span class="sxs-lookup"><span data-stu-id="95991-131">Negotiate allows your application to take advantage of more advanced [*security protocols*](../secgloss/s-gly.md) if they are supported by the systems involved in the authentication.</span></span> <span data-ttu-id="95991-132">Atualmente, o pacote de segurança Negotiate seleciona entre [*Kerberos*](../secgloss/k-gly.md) e NTLM.</span><span class="sxs-lookup"><span data-stu-id="95991-132">Currently, the Negotiate security package selects between [*Kerberos*](../secgloss/k-gly.md) and NTLM.</span></span> <span data-ttu-id="95991-133">Negociar seleciona Kerberos, a menos que não possa ser usado por um dos sistemas envolvidos na autenticação.</span><span class="sxs-lookup"><span data-stu-id="95991-133">Negotiate selects Kerberos unless it cannot be used by one of the systems involved in the authentication.</span></span>

 

 
