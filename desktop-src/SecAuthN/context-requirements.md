---
description: Os requisitos de contexto são expressos como uma combinação de sinalizadores de bit passados para a função InitializeSecurityContext (geral) ou AcceptSecurityContext (geral).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104170025"
---
# <a name="context-requirements"></a><span data-ttu-id="0dfaf-103">Requisitos de contexto</span><span class="sxs-lookup"><span data-stu-id="0dfaf-103">Context Requirements</span></span>

<span data-ttu-id="0dfaf-104">Os requisitos de contexto são expressos como uma combinação de sinalizadores de bit passados para a função [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="0dfaf-104">Context requirements are expressed as a combination of bit flags passed to either the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="0dfaf-105">Esses sinalizadores afetam o [*contexto*](/windows/desktop/SecGloss/c-gly) de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-105">These flags affect the [*context*](/windows/desktop/SecGloss/c-gly) in a number of ways.</span></span> <span data-ttu-id="0dfaf-106">Nem todos os sinalizadores se aplicam a todos os contextos.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-106">Not all flags apply to all contexts.</span></span> <span data-ttu-id="0dfaf-107">Algumas são válidas somente para o servidor, outras somente para o cliente.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-107">Some are valid only for the server, others only for the client.</span></span>

<span data-ttu-id="0dfaf-108">O chamador usa o parâmetro *fContextReq* da chamada [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar um conjunto de sinalizadores que indicam os recursos necessários.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-108">The caller uses the *fContextReq* parameter of the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) call to specify a set of flags that indicate the required capabilities.</span></span> <span data-ttu-id="0dfaf-109">Quando a função retorna, o parâmetro *pfContextAttr* indica os atributos do contexto estabelecido.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-109">When the function returns, the *pfContextAttr* parameter indicates the attributes of the established context.</span></span> <span data-ttu-id="0dfaf-110">O chamador determina se os atributos de contexto final são aceitáveis.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-110">The caller determines whether the final context attributes are acceptable.</span></span>

<span data-ttu-id="0dfaf-111">Os sinalizadores solicitados ou retornados por [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) são prefixados pela ISC.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-111">Flags requested from or returned by [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) are prefixed by ISC.</span></span> <span data-ttu-id="0dfaf-112">Aqueles solicitados ou retornados por [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) são prefixados por ASC.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-112">Those requested from or returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) are prefixed by ASC.</span></span> <span data-ttu-id="0dfaf-113">Os sinalizadores passados para uma função incluem REQ, enquanto os sinalizadores retornados incluem RET.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-113">Flags passed into a function include REQ, while returned flags include RET.</span></span> <span data-ttu-id="0dfaf-114">Por exemplo, um sinalizador de solicitação para autenticação mútua transmitida para **InitializeSecurityContext (geral)** é a \_ autenticação mútua de req do ISC \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="0dfaf-114">For example, a request flag for mutual authentication passed to **InitializeSecurityContext (General)** is ISC\_REQ\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="0dfaf-115">Um servidor que solicita autenticação mútua passa pelo ASC \_ req \_ Mutual \_ auth para **AcceptSecurityContext (geral)**.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-115">A server requesting mutual authentication passes ASC\_REQ\_MUTUAL\_AUTH to **AcceptSecurityContext (General)**.</span></span> <span data-ttu-id="0dfaf-116">Se a autenticação mútua for alcançada, **InitializeSecurityContext (geral)** retornará a autenticação mútua do ISC \_ RET \_ \_ e **AcceptSecurityContext (geral)** retornará a \_ autenticação mútua de ASC RET \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="0dfaf-116">If mutual authentication is achieved, **InitializeSecurityContext (General)** returns ISC\_RET\_MUTUAL\_AUTH and **AcceptSecurityContext (General)** returns ASC\_RET\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="0dfaf-117">Se o chamador solicitar autenticação mútua, mas o [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) indicar que ele não pode ser executado, o chamador deverá decidir se deseja cancelar o contexto ou continuar.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-117">If the caller requests mutual authentication, but the [*security package*](/windows/desktop/SecGloss/s-gly) indicates that it cannot be performed, the caller must decide whether to cancel the context or continue.</span></span>

<span data-ttu-id="0dfaf-118">A tabela a seguir descreve os vários sinalizadores de requisitos de contexto.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-118">The following table describes the various context requirement flags.</span></span>



| <span data-ttu-id="0dfaf-119">Sinalizador</span><span class="sxs-lookup"><span data-stu-id="0dfaf-119">Flag</span></span>                             | <span data-ttu-id="0dfaf-120">Descrição</span><span class="sxs-lookup"><span data-stu-id="0dfaf-120">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0dfaf-121">DELEGÁ</span><span class="sxs-lookup"><span data-stu-id="0dfaf-121">DELEGATE</span></span><br/>              | <span data-ttu-id="0dfaf-122">O servidor no aplicativo de transporte pode criar novos contextos de segurança representando o cliente que será aceito por outros servidores como contextos do cliente.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-122">The server in the transport application can build new security contexts impersonating the client that will be accepted by other servers as the client's contexts.</span></span> <span data-ttu-id="0dfaf-123">O delegado só funcionará se a \_ autenticação mútua estiver definida.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-123">Delegate works only if MUTUAL\_AUTH is set.</span></span> <span data-ttu-id="0dfaf-124">O delegado atualmente tem suporte apenas pelo [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span><span class="sxs-lookup"><span data-stu-id="0dfaf-124">DELEGATE is currently supported only by [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span></span> <span data-ttu-id="0dfaf-125">Além disso, o Kerberos delegará somente a um servidor que tenha o sinalizador confiável \_ para \_ delegação.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-125">Further, Kerberos will delegate only to a server that has the flag TRUSTED\_FOR\_DELEGATION.</span></span> <span data-ttu-id="0dfaf-126">Não use esse sinalizador para [*delegação restrita*](/windows/desktop/SecGloss/c-gly).</span><span class="sxs-lookup"><span data-stu-id="0dfaf-126">Do not use this flag for [*constrained delegation*](/windows/desktop/SecGloss/c-gly).</span></span><br/> |
| <span data-ttu-id="0dfaf-127">\_autenticação mútua</span><span class="sxs-lookup"><span data-stu-id="0dfaf-127">MUTUAL\_AUTH</span></span><br/>          | <span data-ttu-id="0dfaf-128">As partes de comunicação devem autenticar suas identidades entre si.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-128">The communicating parties must authenticate their identities to each other.</span></span> <span data-ttu-id="0dfaf-129">Sem \_ a autenticação mútua, o cliente autentica sua identidade para o servidor.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-129">Without MUTUAL\_AUTH, the client authenticates its identity to the server.</span></span> <span data-ttu-id="0dfaf-130">Com \_ a autenticação mútua, o servidor também deve autenticar sua identidade para o cliente.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-130">With MUTUAL\_AUTH, the server also must authenticate its identity to the client.</span></span><br/> <span data-ttu-id="0dfaf-131">Ao usar o pacote de segurança [*Schannel*](/windows/desktop/SecGloss/s-gly) , o servidor define a constante de **\_ \_ \_ autenticação mútua de ASC RET** somente na última chamada para [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), depois que o mapeamento de certificado for concluído com êxito.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-131">When using the [*Schannel*](/windows/desktop/SecGloss/s-gly) security package, the server sets the **ASC\_RET\_MUTUAL\_AUTH** constant only in the last call to [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), after certificate mapping has successfully completed.</span></span><br/>           |
| <span data-ttu-id="0dfaf-132">REPRODUZIR \_ detecção</span><span class="sxs-lookup"><span data-stu-id="0dfaf-132">REPLAY\_DETECT</span></span><br/>        | <span data-ttu-id="0dfaf-133">O [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) detecta pacotes reproduzidos e notifica o chamador se um pacote tiver sido reproduzido.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-133">The [*security package*](/windows/desktop/SecGloss/s-gly) detects replayed packets and notifies the caller if a packet has been replayed.</span></span> <span data-ttu-id="0dfaf-134">O uso desse sinalizador implica todas as condições especificadas pelo sinalizador de integridade.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-134">The use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="0dfaf-135">detecção de sequência \_</span><span class="sxs-lookup"><span data-stu-id="0dfaf-135">SEQUENCE\_DETECT</span></span><br/>      | <span data-ttu-id="0dfaf-136">O contexto deve ter permissão para detectar a entrega de pacotes fora de ordem posteriormente por meio das funções de suporte a mensagens.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-136">The context must be allowed to detect out-of-order delivery of packets later through the message support functions.</span></span> <span data-ttu-id="0dfaf-137">O uso desse sinalizador implica todas as condições especificadas pelo sinalizador de integridade.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-137">Use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="0dfaf-138">CONFIDENCIALIDADE</span><span class="sxs-lookup"><span data-stu-id="0dfaf-138">CONFIDENTIALITY</span></span><br/>       | <span data-ttu-id="0dfaf-139">O contexto pode proteger dados em trânsito usando as funções [**EncryptMessage (geral)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) e [**DecryptMessage (geral)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) .</span><span class="sxs-lookup"><span data-stu-id="0dfaf-139">The context can protect data while in transit using the [**EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) and [**DecryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) functions.</span></span> <span data-ttu-id="0dfaf-140">O sinalizador de CONFIDENCIALidade não funcionará se o contexto gerado for para a conta de convidado.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-140">The CONFIDENTIALITY flag does not work if the generated context is for the Guest account.</span></span><br/>                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="0dfaf-141">USAR \_ chave de sessão \_</span><span class="sxs-lookup"><span data-stu-id="0dfaf-141">USE\_SESSION\_KEY</span></span><br/>     | <span data-ttu-id="0dfaf-142">Uma nova [*chave de sessão*](/windows/desktop/SecGloss/s-gly) deve ser negociada.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-142">A new [*session key*](/windows/desktop/SecGloss/s-gly) must be negotiated.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="0dfaf-143">SOLICITAR \_ \_ credenciais</span><span class="sxs-lookup"><span data-stu-id="0dfaf-143">PROMPT\_FOR\_CREDS</span></span><br/>    | <span data-ttu-id="0dfaf-144">Se o cliente for um usuário interativo, o pacote de segurança deverá, se possível, solicitar ao usuário as [*credenciais*](/windows/desktop/SecGloss/c-gly)apropriadas.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-144">If the client is an interactive user, the security package must, if possible, prompt the user for the appropriate [*credentials*](/windows/desktop/SecGloss/c-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="0dfaf-145">USAR \_ \_ credenciais fornecidas</span><span class="sxs-lookup"><span data-stu-id="0dfaf-145">USE\_SUPPLIED\_CREDS</span></span><br/>  | <span data-ttu-id="0dfaf-146">As informações de credenciais específicas do pacote estão disponíveis no buffer de entrada.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-146">Package-specific credential information is available in the input buffer.</span></span> <span data-ttu-id="0dfaf-147">O pacote de segurança pode usar essas [*credenciais*](/windows/desktop/SecGloss/c-gly) para autenticar a conexão.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-147">The security package can use these [*credentials*](/windows/desktop/SecGloss/c-gly) to authenticate the connection.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="0dfaf-148">SALVAR \_ \_ credenciais fornecidas</span><span class="sxs-lookup"><span data-stu-id="0dfaf-148">SAVE\_SUPPLIED\_CREDS</span></span><br/> | <span data-ttu-id="0dfaf-149">As credenciais fornecidas devem ser armazenadas em cache com as credenciais complementares.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-149">The supplied credentials should be cached with the supplemental credentials.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="0dfaf-150">ALOCAr \_ memória</span><span class="sxs-lookup"><span data-stu-id="0dfaf-150">ALLOCATE\_MEMORY</span></span><br/>      | <span data-ttu-id="0dfaf-151">O [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) deve alocar memória.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-151">The [*security package*](/windows/desktop/SecGloss/s-gly) must allocate memory.</span></span> <span data-ttu-id="0dfaf-152">O chamador deve eventualmente chamar a função [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar memória alocada pelo pacote de segurança.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-152">The caller must eventually call the [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) function to free memory allocated by the security package.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="0dfaf-153">USAR \_ estilo de DCE \_</span><span class="sxs-lookup"><span data-stu-id="0dfaf-153">USE\_DCE\_STYLE</span></span><br/>       | <span data-ttu-id="0dfaf-154">O chamador espera uma [*transação*](/windows/desktop/SecGloss/t-gly)de autenticação de três lados.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-154">The caller expects a three-leg authentication [*transaction*](/windows/desktop/SecGloss/t-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="0dfaf-155">DATAGRAMA</span><span class="sxs-lookup"><span data-stu-id="0dfaf-155">DATAGRAM</span></span><br/>              | <span data-ttu-id="0dfaf-156">A semântica do [*datagrama*](/windows/desktop/SecGloss/d-gly) deve ser usada.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-156">[*Datagram*](/windows/desktop/SecGloss/d-gly) semantics must be used.</span></span> <span data-ttu-id="0dfaf-157">Para obter mais informações, consulte [contextos de datagrama](datagram-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="0dfaf-157">For more information, see [Datagram Contexts](datagram-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="0dfaf-158">CONNECTION</span><span class="sxs-lookup"><span data-stu-id="0dfaf-158">CONNECTION</span></span><br/>            | <span data-ttu-id="0dfaf-159">A semântica de conexão deve ser usada.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-159">Connection semantics must be used.</span></span> <span data-ttu-id="0dfaf-160">Para obter mais informações, consulte [contextos orientados a conexão](connection-oriented-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="0dfaf-160">For more information, see [Connection-Oriented Contexts](connection-oriented-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="0dfaf-161">Fluxo</span><span class="sxs-lookup"><span data-stu-id="0dfaf-161">STREAM</span></span><br/>                | <span data-ttu-id="0dfaf-162">A semântica de fluxo deve ser usada.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-162">Stream semantics must be used.</span></span> <span data-ttu-id="0dfaf-163">Para obter mais informações, consulte [contextos de fluxo](stream-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="0dfaf-163">For more information, see [Stream Contexts](stream-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="0dfaf-164">erro ESTENDIdo \_</span><span class="sxs-lookup"><span data-stu-id="0dfaf-164">EXTENDED\_ERROR</span></span><br/>       | <span data-ttu-id="0dfaf-165">Mensagens de erro de resposta para o par devem ser geradas se o contexto falhar.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-165">Error reply messages for the peer must be generated if the context fails.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="0dfaf-166">VERIFICA</span><span class="sxs-lookup"><span data-stu-id="0dfaf-166">INTEGRITY</span></span><br/>             | <span data-ttu-id="0dfaf-167">A integridade do buffer pode ser verificada, mas nenhum sequenciamento ou detecção de resposta está habilitado.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-167">Buffer integrity can be verified but no sequencing or reply detection is enabled.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="0dfaf-168">SEM \_ integridade</span><span class="sxs-lookup"><span data-stu-id="0dfaf-168">NO\_INTEGRITY</span></span><br/>         | <span data-ttu-id="0dfaf-169">O requisito de **integridade** é ignorado.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-169">The **INTEGRITY** requirement is ignored.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="0dfaf-170">IDENTIFICAR</span><span class="sxs-lookup"><span data-stu-id="0dfaf-170">IDENTIFY</span></span><br/>              | <span data-ttu-id="0dfaf-171">Quando um servidor representa um contexto que tem esse sinalizador definido, essa representação gera acesso extremamente limitado.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-171">When a server impersonates a context that has this flag set, that impersonation yields extremely limited access.</span></span> <span data-ttu-id="0dfaf-172">A representação com o conjunto de IDENTIFICAções é usada para verificar a identidade do cliente.</span><span class="sxs-lookup"><span data-stu-id="0dfaf-172">Impersonation with IDENTIFY set is used to verify the client's identity.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

