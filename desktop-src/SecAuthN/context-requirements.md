---
description: Os requisitos de contexto são expressos como uma combinação de sinalizadores de bits passados para a função InitializeSecurityContext (Geral) ou AcceptSecurityContext (Geral).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4f15baafe2d6dc9d9bf383fecdd8cf30c387d3def16089128346ee60d79d0fc
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/11/2021
ms.locfileid: "119008934"
---
# <a name="context-requirements"></a>Requisitos de contexto

Os requisitos de contexto são expressos como uma combinação de sinalizadores de bits passados para a função [**InitializeSecurityContext (Geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (Geral).**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) Esses sinalizadores afetam [*o contexto*](/windows/desktop/SecGloss/c-gly) de várias maneiras. Nem todos os sinalizadores se aplicam a todos os contextos. Alguns são válidos apenas para o servidor, outros apenas para o cliente.

O chamador usa o parâmetro *fContextReq* da chamada [**InitializeSecurityContext (Geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (Geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar um conjunto de sinalizadores que indicam os recursos necessários. Quando a função retorna, o *parâmetro pfContextAttr* indica os atributos do contexto estabelecido. O chamador determina se os atributos de contexto finais são aceitáveis.

Sinalizadores solicitados ou retornados por [**InitializeSecurityContext (Geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) são prefixados pelo ISC. Aqueles solicitados ou retornados por [**AcceptSecurityContext (Geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) são prefixados pelo ASC. Os sinalizadores passados para uma função incluem REQ, enquanto os sinalizadores retornados incluem RET. Por exemplo, um sinalizador de solicitação de autenticação mútua passado para **InitializeSecurityContext (Geral)** é ISC \_ REQ \_ MUTUAL \_ AUTH. Um servidor que solicita autenticação mútua passa ASC \_ REQ \_ MUTUAL \_ AUTH para **AcceptSecurityContext (Geral)**. Se a autenticação mútua for alcançada, **InitializeSecurityContext (Geral)** retornará ISC \_ RET \_ MUTUAL AUTH e \_ **AcceptSecurityContext (Geral)** retornará AUTH ASC \_ RET \_ \_ MUTUAL. Se o chamador solicitar autenticação mútua, mas o pacote de segurança indicar que ele não pode ser executado, o chamador deverá decidir se deve cancelar o contexto ou continuar. [](/windows/desktop/SecGloss/s-gly)

A tabela a seguir descreve os vários sinalizadores de requisito de contexto.



| Sinalizador                             | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Delegado<br/>              | O servidor no aplicativo de transporte pode criar novos contextos de segurança representando o cliente que será aceito por outros servidores como contextos do cliente. O delegado só funcionará se MUTUAL \_ AUTH estiver definido. Atualmente, HÁ suporte para DELEGATE apenas [*para Kerberos.*](/windows/desktop/SecGloss/k-gly) Além disso, o Kerberos delegará somente a um servidor que tenha o sinalizador TRUSTED \_ FOR \_ DELEGATION. Não use esse sinalizador para [*delegação restrita.*](/windows/desktop/SecGloss/c-gly)<br/> |
| \_AUTH MÚTUA<br/>          | As partes comunicantes devem autenticar suas identidades entre si. Sem MUTUAL \_ AUTH, o cliente autentica sua identidade no servidor. Com MUTUAL \_ AUTH, o servidor também deve autenticar sua identidade para o cliente.<br/> Ao usar o pacote de segurança [*Schannel,*](/windows/desktop/SecGloss/s-gly) o servidor define a constante **ASC \_ RET \_ MUTUAL \_ AUTH** somente na última chamada para [**AcceptSecurityContext (Negotiate),**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)depois que o mapeamento de certificado for concluído com êxito.<br/>           |
| REPLAY \_ DETECT<br/>        | O [*pacote de*](/windows/desktop/SecGloss/s-gly) segurança detecta pacotes reprodução e notifica o chamador se um pacote foi reprodução. O uso desse sinalizador implica todas as condições especificadas pelo sinalizador INTEGRITY.<br/>                                                                                                                                                                                                                                                                                                                      |
| SEQUENCE \_ DETECT<br/>      | O contexto deve ter permissão para detectar a entrega fora de ordem de pacotes posteriormente por meio das funções de suporte de mensagem. O uso desse sinalizador implica todas as condições especificadas pelo sinalizador INTEGRITY.<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| Confidencialidade<br/>       | O contexto pode proteger dados em trânsito usando as funções [**EncryptMessage (Geral)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) e [**DecryptMessage (Geral).**](/windows/win32/api/sspi/nf-sspi-decryptmessage) O sinalizador CONFIDENTIALITY não funcionará se o contexto gerado for para a conta convidado.<br/>                                                                                                                                                                                                                                                                                                      |
| USAR \_ CHAVE DE \_ SESSÃO<br/>     | Uma nova [*chave de sessão*](/windows/desktop/SecGloss/s-gly) deve ser negociada.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| SOLICITAR \_ \_ CREDS<br/>    | Se o cliente for um usuário interativo, o pacote de segurança deverá, se possível, solicitar ao usuário as [*credenciais apropriadas.*](/windows/desktop/SecGloss/c-gly)<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| USAR \_ \_ CREDS FORNECIDOS<br/>  | As informações de credenciais específicas do pacote estão disponíveis no buffer de entrada. O pacote de segurança pode usar [*essas credenciais para*](/windows/desktop/SecGloss/c-gly) autenticar a conexão.<br/>                                                                                                                                                                                                                                                                                                                                                                |
| SALVAR \_ \_ CREDS FORNECIDOS<br/> | As credenciais fornecidas devem ser armazenadas em cache com as credenciais complementares.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ALOCAR \_ MEMÓRIA<br/>      | O [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) deve alocar memória. O chamador deve, eventualmente, chamar a [**função FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar a memória alocada pelo pacote de segurança.<br/>                                                                                                                                                                                                                                                                                                                      |
| USAR \_ ESTILO \_ DCE<br/>       | O chamador espera uma transação de autenticação de três [*etapas.*](/windows/desktop/SecGloss/t-gly)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Datagrama<br/>              | [*A semântica*](/windows/desktop/SecGloss/d-gly) de datagrama deve ser usada. Para obter mais informações, consulte [Contextos de datagrama.](datagram-contexts.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | A semântica de conexão deve ser usada. Para obter mais informações, consulte [Contextos orientados a conexão.](connection-oriented-contexts.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Fluxo<br/>                | A semântica de fluxo deve ser usada. Para obter mais informações, consulte [Contextos de fluxo.](stream-contexts.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ERRO \_ ESTENDIDO<br/>       | As mensagens de resposta de erro para o par devem ser geradas se o contexto falhar.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Integridade<br/>             | A integridade do buffer pode ser verificada, mas nenhuma detecção de sequenciamento ou resposta está habilitada.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| SEM \_ INTEGRIDADE<br/>         | O **requisito INTEGRITY** é ignorado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Identificar<br/>              | Quando um servidor representa um contexto que tem esse sinalizador definido, essa representação gera acesso extremamente limitado. A representação com o conjunto IDENTIFY é usada para verificar a identidade do cliente.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

