---
description: Os requisitos de contexto são expressos como uma combinação de sinalizadores de bit passados para a função InitializeSecurityContext (geral) ou AcceptSecurityContext (geral).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104170025"
---
# <a name="context-requirements"></a>Requisitos de contexto

Os requisitos de contexto são expressos como uma combinação de sinalizadores de bit passados para a função [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) . Esses sinalizadores afetam o [*contexto*](/windows/desktop/SecGloss/c-gly) de várias maneiras. Nem todos os sinalizadores se aplicam a todos os contextos. Algumas são válidas somente para o servidor, outras somente para o cliente.

O chamador usa o parâmetro *fContextReq* da chamada [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) ou [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar um conjunto de sinalizadores que indicam os recursos necessários. Quando a função retorna, o parâmetro *pfContextAttr* indica os atributos do contexto estabelecido. O chamador determina se os atributos de contexto final são aceitáveis.

Os sinalizadores solicitados ou retornados por [**InitializeSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) são prefixados pela ISC. Aqueles solicitados ou retornados por [**AcceptSecurityContext (geral)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) são prefixados por ASC. Os sinalizadores passados para uma função incluem REQ, enquanto os sinalizadores retornados incluem RET. Por exemplo, um sinalizador de solicitação para autenticação mútua transmitida para **InitializeSecurityContext (geral)** é a \_ autenticação mútua de req do ISC \_ \_ . Um servidor que solicita autenticação mútua passa pelo ASC \_ req \_ Mutual \_ auth para **AcceptSecurityContext (geral)**. Se a autenticação mútua for alcançada, **InitializeSecurityContext (geral)** retornará a autenticação mútua do ISC \_ RET \_ \_ e **AcceptSecurityContext (geral)** retornará a \_ autenticação mútua de ASC RET \_ \_ . Se o chamador solicitar autenticação mútua, mas o [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) indicar que ele não pode ser executado, o chamador deverá decidir se deseja cancelar o contexto ou continuar.

A tabela a seguir descreve os vários sinalizadores de requisitos de contexto.



| Sinalizador                             | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| DELEGÁ<br/>              | O servidor no aplicativo de transporte pode criar novos contextos de segurança representando o cliente que será aceito por outros servidores como contextos do cliente. O delegado só funcionará se a \_ autenticação mútua estiver definida. O delegado atualmente tem suporte apenas pelo [*Kerberos*](/windows/desktop/SecGloss/k-gly). Além disso, o Kerberos delegará somente a um servidor que tenha o sinalizador confiável \_ para \_ delegação. Não use esse sinalizador para [*delegação restrita*](/windows/desktop/SecGloss/c-gly).<br/> |
| \_autenticação mútua<br/>          | As partes de comunicação devem autenticar suas identidades entre si. Sem \_ a autenticação mútua, o cliente autentica sua identidade para o servidor. Com \_ a autenticação mútua, o servidor também deve autenticar sua identidade para o cliente.<br/> Ao usar o pacote de segurança [*Schannel*](/windows/desktop/SecGloss/s-gly) , o servidor define a constante de **\_ \_ \_ autenticação mútua de ASC RET** somente na última chamada para [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), depois que o mapeamento de certificado for concluído com êxito.<br/>           |
| REPRODUZIR \_ detecção<br/>        | O [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) detecta pacotes reproduzidos e notifica o chamador se um pacote tiver sido reproduzido. O uso desse sinalizador implica todas as condições especificadas pelo sinalizador de integridade.<br/>                                                                                                                                                                                                                                                                                                                      |
| detecção de sequência \_<br/>      | O contexto deve ter permissão para detectar a entrega de pacotes fora de ordem posteriormente por meio das funções de suporte a mensagens. O uso desse sinalizador implica todas as condições especificadas pelo sinalizador de integridade.<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| CONFIDENCIALIDADE<br/>       | O contexto pode proteger dados em trânsito usando as funções [**EncryptMessage (geral)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) e [**DecryptMessage (geral)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) . O sinalizador de CONFIDENCIALidade não funcionará se o contexto gerado for para a conta de convidado.<br/>                                                                                                                                                                                                                                                                                                      |
| USAR \_ chave de sessão \_<br/>     | Uma nova [*chave de sessão*](/windows/desktop/SecGloss/s-gly) deve ser negociada.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| SOLICITAR \_ \_ credenciais<br/>    | Se o cliente for um usuário interativo, o pacote de segurança deverá, se possível, solicitar ao usuário as [*credenciais*](/windows/desktop/SecGloss/c-gly)apropriadas.<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| USAR \_ \_ credenciais fornecidas<br/>  | As informações de credenciais específicas do pacote estão disponíveis no buffer de entrada. O pacote de segurança pode usar essas [*credenciais*](/windows/desktop/SecGloss/c-gly) para autenticar a conexão.<br/>                                                                                                                                                                                                                                                                                                                                                                |
| SALVAR \_ \_ credenciais fornecidas<br/> | As credenciais fornecidas devem ser armazenadas em cache com as credenciais complementares.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ALOCAr \_ memória<br/>      | O [*pacote de segurança*](/windows/desktop/SecGloss/s-gly) deve alocar memória. O chamador deve eventualmente chamar a função [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar memória alocada pelo pacote de segurança.<br/>                                                                                                                                                                                                                                                                                                                      |
| USAR \_ estilo de DCE \_<br/>       | O chamador espera uma [*transação*](/windows/desktop/SecGloss/t-gly)de autenticação de três lados.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| DATAGRAMA<br/>              | A semântica do [*datagrama*](/windows/desktop/SecGloss/d-gly) deve ser usada. Para obter mais informações, consulte [contextos de datagrama](datagram-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | A semântica de conexão deve ser usada. Para obter mais informações, consulte [contextos orientados a conexão](connection-oriented-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Fluxo<br/>                | A semântica de fluxo deve ser usada. Para obter mais informações, consulte [contextos de fluxo](stream-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| erro ESTENDIdo \_<br/>       | Mensagens de erro de resposta para o par devem ser geradas se o contexto falhar.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| VERIFICA<br/>             | A integridade do buffer pode ser verificada, mas nenhum sequenciamento ou detecção de resposta está habilitado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| SEM \_ integridade<br/>         | O requisito de **integridade** é ignorado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| IDENTIFICAR<br/>              | Quando um servidor representa um contexto que tem esse sinalizador definido, essa representação gera acesso extremamente limitado. A representação com o conjunto de IDENTIFICAções é usada para verificar a identidade do cliente.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

