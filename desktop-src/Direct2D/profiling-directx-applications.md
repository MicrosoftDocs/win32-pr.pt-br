---
title: Criação de perfil de aplicativos DirectX
description: Mostra como medir algumas das medidas de tempo de desempenho mais importantes para um aplicativo do DirectX usando as ferramentas XPerf e GPUView que são fornecidas como parte do kit de ferramentas de desempenho do Windows.
ms.assetid: 4B2F7273-C9B0-4DD3-B559-6220CDE62129
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0280389d4f8f2161e5e07f8906df7ea0484ad458
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/04/2021
ms.locfileid: "104565985"
---
# <a name="profiling-directx-apps"></a><span data-ttu-id="b5a9a-103">Criação de perfil de aplicativos DirectX</span><span class="sxs-lookup"><span data-stu-id="b5a9a-103">Profiling DirectX Apps</span></span>

<span data-ttu-id="b5a9a-104">Isso mostra como medir algumas das medidas de tempo de desempenho mais importantes para um aplicativo [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) usando as ferramentas **Xperf** e **GPUView** que são fornecidas como parte do kit de ferramentas de desempenho do Windows.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-104">This shows you how to measure some of the most important performance time measurements for a [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) app using the **XPerf** and **GPUView** tools that ship as part of the Windows Performance Toolkit.</span></span> <span data-ttu-id="b5a9a-105">Este não é um guia abrangente para entender as ferramentas, em vez de sua aplicabilidade específica para analisar o desempenho do aplicativo DirectX.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-105">This is not a comprehensive guide for understanding the tools, rather their specific applicability for analyzing DirectX app performance.</span></span> <span data-ttu-id="b5a9a-106">Embora a maioria das técnicas discutidas aqui seja relevante para todos os aplicativos do DirectX, ela é mais relevante para aplicativos que usam cadeias de permuta e não para aplicativos do DirectX criados em XAML que usam animações SIS/VSIS e XAML.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-106">While most of the techniques discussed here are relevant to all DirectX apps, it is most relevant to apps that use swap chains and not to DirectX applications built on XAML that use SIS/VSIS and XAML animations.</span></span> <span data-ttu-id="b5a9a-107">Nós o orientamos pelas principais medições de tempo de desempenho, como adquirir e instalar as ferramentas, além de fazer rastreamentos de medição de desempenho e analisá-las para entender afunilamentos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-107">We walk you through key performance time measurements, how to acquire and install the tools, and take performance measurement traces then analyze them to understand app bottlenecks.</span></span>

## <a name="about-the-tools"></a><span data-ttu-id="b5a9a-108">Sobre as ferramentas</span><span class="sxs-lookup"><span data-stu-id="b5a9a-108">About the Tools</span></span>

### <a name="xperf"></a><span data-ttu-id="b5a9a-109">**XPerf**</span><span class="sxs-lookup"><span data-stu-id="b5a9a-109">**XPerf**</span></span>

<span data-ttu-id="b5a9a-110">**Xperf** é um conjunto de ferramentas de análise de desempenho criado com base no ETW (rastreamento de eventos para Windows) criado para medir e analisar o desempenho detalhado do sistema e do aplicativo e o uso de recursos.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-110">**XPerf** is a set of performance analysis tools built on top of Event Tracing for Windows (ETW) designed for measuring and analyzing detailed system and app performance and resource usage.</span></span> <span data-ttu-id="b5a9a-111">A partir do Windows 8, essa ferramenta de linha de comando tem uma interface gráfica do usuário e é chamada de WPR (gravador de desempenho do Windows) e o Windows Performance Analyzer (WPA).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-111">Starting in Windows 8 this command line tool has a graphical user interface and is called the Windows Performance Recorder (WPR) and Windows Performance Analyzer (WPA).</span></span> <span data-ttu-id="b5a9a-112">Mais informações sobre essas ferramentas podem ser encontradas na página da Web para o [Kit de ferramentas de desempenho do Windows](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): kit de ferramentas de desempenho do [Windows](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-112">More information about these tools can be found at the web page for [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span></span>

<span data-ttu-id="b5a9a-113">Um ETW coleta eventos de kernel solicitados e os salva em um arquivo chamado de arquivo de log de rastreamento de eventos (ETL).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-113">An ETW collects requested kernel events and saves them into a file called an event trace log (ETL) file.</span></span> <span data-ttu-id="b5a9a-114">Esses eventos de kernel fornecem informações abrangentes sobre as características do aplicativo e do sistema ao executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-114">These kernel events provide extensive information about an app and system characteristics when running the app.</span></span> <span data-ttu-id="b5a9a-115">Os dados são coletados habilitando a captura de rastreamento, executando o cenário de aplicativo desejado que precisa de análise, interrompendo a captura que salva os dados em um arquivo ETL.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-115">Data is collected by enabling trace capture, performing the desired app scenario that needs analysis, stopping the capture which saves the data in an ETL file.</span></span> <span data-ttu-id="b5a9a-116">Em seguida, você pode analisar o arquivo no mesmo ou em um computador diferente usando a ferramenta de linha de comando **xperf.exe** ou a ferramenta de análise de rastreamento do Visual **xperfview.exe**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-116">You can then analyze the file on the same or a different machine using either the command line tool **xperf.exe** or the visual trace analysis tool **xperfview.exe**.</span></span>

### <a name="gpuview"></a><span data-ttu-id="b5a9a-117">GPUView</span><span class="sxs-lookup"><span data-stu-id="b5a9a-117">GPUView</span></span>

<span data-ttu-id="b5a9a-118">**GPUView** é uma ferramenta de desenvolvimento para determinar o desempenho da GPU (unidade de processamento gráfico) e da CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-118">**GPUView** is a development tool for determining the performance of the graphics processing unit (GPU) and CPU.</span></span> <span data-ttu-id="b5a9a-119">Ele analisa o desempenho em relação ao processamento de buffer de acesso direto à memória (DMA) e a todos os outros processamentos de vídeo no hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-119">It looks at performance with regard to direct memory access (DMA) buffer processing and all other video processing on the video hardware.</span></span>

<span data-ttu-id="b5a9a-120">Para aplicativos [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) que dependem muito da GPU, o **GPUView** é uma ferramenta poderosa para entender a relação entre o trabalho realizado na CPU versus GPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-120">For [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps that rely heavily on the GPU, **GPUView** is a powerful tool for understanding the relationship between work done on the CPU vs. GPU.</span></span> <span data-ttu-id="b5a9a-121">Para obter mais informações sobre **GPUView**, consulte [usando o GPUView](/windows-hardware/drivers/display/using-gpuview).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-121">For more info about **GPUView** see [Using GPUView](/windows-hardware/drivers/display/using-gpuview).</span></span>

<span data-ttu-id="b5a9a-122">Semelhante ao **Xperf**, um rastreamento ETW é obtido pela primeira vez iniciando o serviço de rastreamento, exercitando o cenário que precisa de análise para o aplicativo em questão, interrompendo o serviço e salvando as informações em um arquivo ETL.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-122">Similar to **XPerf**, an ETW trace is first taken by starting the tracing service, exercising the scenario that needs analysis for the app under consideration, stopping the service and saving the information in an ETL file.</span></span> <span data-ttu-id="b5a9a-123">**GPUView** apresenta os dados presentes no arquivo ETL em um formato gráfico.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-123">**GPUView** presents the data present in the ETL file in a graphical format.</span></span>

<span data-ttu-id="b5a9a-124">Depois de instalar a ferramenta **GPUView** , é recomendável que você leia o tópico "exibição principal do **GPUView**" no menu "ajuda do **GPUView** ".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-124">After installing the **GPUView** tool, it is we recommend you read the "**GPUView**’s Main Display" topic under the "**GPUView** Help" menu.</span></span> <span data-ttu-id="b5a9a-125">Ele contém informações úteis sobre como interpretar a interface do usuário do **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="b5a9a-125">It contains useful information about how to interpret the **GPUView** UI.</span></span>

## <a name="installing-the-tools"></a><span data-ttu-id="b5a9a-126">Instalando as ferramentas</span><span class="sxs-lookup"><span data-stu-id="b5a9a-126">Installing the Tools</span></span>

<span data-ttu-id="b5a9a-127">Ambos os **Xperf** e **GPUView** estão incluídos no kit de ferramentas de desempenho do Windows (WPT).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-127">Both **XPerf** and **GPUView** are included in the Windows Performance Toolkit (WPT).</span></span>

<span data-ttu-id="b5a9a-128">O **Xperf** é fornecido como parte do SDK (Software Development Kit) do Windows para Windows.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-128">**XPerf** ships as part of the Windows Software Development Kit (SDK) for Windows.</span></span> <span data-ttu-id="b5a9a-129">[Baixe o SDK do Windows](https://dev.windows.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-129">[Download the Windows SDK](https://dev.windows.com/downloads).</span></span>

<span data-ttu-id="b5a9a-130">O **GPUView** está disponível no Windows ADK (Kit de avaliação e implantação do Windows).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-130">**GPUView** is available in the Windows Assessment and Deployment Kit (Windows ADK).</span></span> <span data-ttu-id="b5a9a-131">[Baixe o Windows ADK](/windows-hardware/get-started/adk-install).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-131">[Download the Windows ADK](/windows-hardware/get-started/adk-install).</span></span>

<span data-ttu-id="b5a9a-132">Após a instalação, você deve adicionar os diretórios que contêm **Xperf** e **GPUView** à variável "Path" do sistema.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-132">After installation, you must add the directories that contain **XPerf** and **GPUView** to the system "Path" variable.</span></span>

<span data-ttu-id="b5a9a-133">Clique no botão Iniciar e digite "variáveis do sistema".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-133">Click the Start button and type "System Variables".</span></span> <span data-ttu-id="b5a9a-134">O janela Propriedades do sistema é aberto.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-134">The System Properties window opens.</span></span> <span data-ttu-id="b5a9a-135">Clique em "editar as variáveis de ambiente do sistema".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-135">Click "Edit the system environment variables".</span></span> <span data-ttu-id="b5a9a-136">Selecione "variáveis de ambiente" na caixa de diálogo "Propriedades do sistema".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-136">Select "Environment Variables" from the "System Properties" dialog box.</span></span> <span data-ttu-id="b5a9a-137">A variável "Path" é encontrada em "variáveis do sistema".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-137">The "Path" variable is found under "System variables".</span></span> <span data-ttu-id="b5a9a-138">Acrescente o diretório que contém **xperf.exe** e **GPUView.exe** ao caminho.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-138">Append the directory containing **xperf.exe** and **GPUView.exe** to the path.</span></span> <span data-ttu-id="b5a9a-139">Esses executáveis são encontrados no diretório "kit de ferramentas de desempenho do Windows" dentro dos "kits do Windows".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-139">These executables are found in the "Windows Performance Toolkit" directory inside the "Windows Kits".</span></span> <span data-ttu-id="b5a9a-140">O local padrão é: **C: \\ arquivos de programas (x86) \\ Windows kits \\ 10 kit de ferramentas de desempenho do \\ Windows**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-140">The default location is: **C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit**.</span></span>

## <a name="performance-time-measurements"></a><span data-ttu-id="b5a9a-141">Medições de tempo de desempenho</span><span class="sxs-lookup"><span data-stu-id="b5a9a-141">Performance Time Measurements</span></span>

<span data-ttu-id="b5a9a-142">A maioria dos aplicativos espera ser executada sem problemas e respondendo à entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-142">Most apps expect to run smoothly and be responsive to user input.</span></span> <span data-ttu-id="b5a9a-143">No entanto, dependendo do cenário desejado, um aspecto do desempenho pode ser mais importante do que o outro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-143">However, depending upon the scenario the you want, one aspect of performance might be more important than another.</span></span> <span data-ttu-id="b5a9a-144">Por exemplo, para um aplicativo de leitor de notícias em execução em um Tablet PC sensível ao toque, o aspecto mais importante é exibir um único artigo por vez e deslocar/aplicar zoom/rolar para a mesma ou para um artigo diferente.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-144">For instance, for a news reader app running on a touch tablet PC, the most important aspect is to view a single article at a time and to pan/zoom/scroll through the same or a different article.</span></span> <span data-ttu-id="b5a9a-145">Nesse cenário, a capacidade de renderizar todo o conteúdo em todos os quadros não é necessária.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-145">In this scenario the ability to render all the content every frame is not necessary.</span></span> <span data-ttu-id="b5a9a-146">No entanto, a capacidade de percorrer o artigo de forma tranqüila sobre um gesto de toque é extremamente importante.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-146">However, the ability to scroll through the article smoothly upon a touch gesture is extremely important.</span></span>

<span data-ttu-id="b5a9a-147">Em outra instância, um jogo ou um aplicativo de renderização de vídeo que usa muitas animações falha se os quadros são descartados.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-147">In another instance, a game or a video rendering app that uses lots of animations glitches if frames are dropped.</span></span> <span data-ttu-id="b5a9a-148">Nesse caso, a capacidade de apresentar conteúdo na tela sem interuption da entrada do usuário é extremamente importante.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-148">In this case, the ability to present content on the screen without interuption from user input is extremely important.</span></span>

<span data-ttu-id="b5a9a-149">Para entender qual parte do aplicativo é problemática, a primeira etapa é decidir sobre os cenários mais importantes.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-149">In order to understand which part of the app is problematic, the first step is to decide on the most important scenarios.</span></span> <span data-ttu-id="b5a9a-150">Depois que os principais aspectos do aplicativo são compreendidos e como eles serão exercitados, procurar problemas usando as ferramentas fica mais fácil.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-150">Once the core aspects of the app are understood and how they will be exercised, looking for problems using the tools becomes easier.</span></span>

<span data-ttu-id="b5a9a-151">Algumas das métricas de tempo de desempenho mais comuns são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="b5a9a-151">Some of the most common performance time metrics are as follows:</span></span>

### <a name="startup-time"></a><span data-ttu-id="b5a9a-152">Tempo de inicialização</span><span class="sxs-lookup"><span data-stu-id="b5a9a-152">Startup-time</span></span>

<span data-ttu-id="b5a9a-153">Tempo medido desde a inicialização do processo até o primeiro presente, atingindo a tela.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-153">Time measured from process launch to first present hitting the screen.</span></span> <span data-ttu-id="b5a9a-154">Essa medida é mais útil quando o sistema está quente, o que significa que a medição é feita depois que o aplicativo é iniciado algumas vezes.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-154">This measurement is more useful when the system is warm meaning the measurement is taken after the app is launched a few times.</span></span>

### <a name="cpu-time-per-frame"></a><span data-ttu-id="b5a9a-155">Tempo de CPU por quadro</span><span class="sxs-lookup"><span data-stu-id="b5a9a-155">CPU time per frame</span></span>

<span data-ttu-id="b5a9a-156">O tempo pelo qual a CPU processa ativamente a carga de trabalho do aplicativo para um quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-156">The time for which CPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="b5a9a-157">Se o aplicativo estiver funcionando sem problemas, todo o processamento necessário para um quadro acontecerá dentro de um intervalo de sincronização de v.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-157">If the app is running smoothly, all the processing required for one frame happens within one v-sync interval.</span></span> <span data-ttu-id="b5a9a-158">Com a taxa de atualização de 60 do monitor, isso é 16ms por quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-158">With the monitor refresh rate of 60Hz, this comes to 16ms per frame.</span></span> <span data-ttu-id="b5a9a-159">Se o tempo/quadro da CPU for maior que 16ms, as otimizações de CPU poderão ser necessárias para produzir uma experiência de aplicativo livre de falha.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-159">If CPU time/frame is greater than 16ms, CPU optimizations might be needed to produce a glitch free app experience.</span></span>

### <a name="gpu-time-per-frame"></a><span data-ttu-id="b5a9a-160">Tempo de GPU por quadro</span><span class="sxs-lookup"><span data-stu-id="b5a9a-160">GPU time per frame</span></span>

<span data-ttu-id="b5a9a-161">O tempo para o qual a GPU processa ativamente a carga de trabalho do aplicativo para um quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-161">The time for which GPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="b5a9a-162">Um aplicativo é associado à GPU quando o tempo necessário para processar um quadro de dados é maior que 16ms.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-162">An app is GPU bound when the time taken to process a frame worth of data is more than 16ms.</span></span>

<span data-ttu-id="b5a9a-163">Ser capaz de entender se um aplicativo está ligado à CPU ou à GPU restringirá a parte problemática do código.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-163">Being able to understand whether an app is CPU or GPU bound will narrow the problematic part of the code.</span></span>

## <a name="taking-performance-time-measurement-trace"></a><span data-ttu-id="b5a9a-164">Obtendo rastreamento de medição de tempo de desempenho</span><span class="sxs-lookup"><span data-stu-id="b5a9a-164">Taking performance time measurement trace</span></span>

<span data-ttu-id="b5a9a-165">Execute estas etapas para fazer um rastreamento:</span><span class="sxs-lookup"><span data-stu-id="b5a9a-165">Perform these steps to take a trace:</span></span>

1.  <span data-ttu-id="b5a9a-166">Abra uma janela de comando como administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-166">Open a command window as an administrator.</span></span>
2.  <span data-ttu-id="b5a9a-167">Feche o aplicativo se ele já estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-167">Close the app if it is already running.</span></span>
3.  <span data-ttu-id="b5a9a-168">Altere os diretórios para o diretório *gpuview* dentro da pasta kit de ferramentas de desempenho do Windows.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-168">Change directories to the *gpuview* directory inside the Windows Performance Toolkit folder.</span></span>
4.  <span data-ttu-id="b5a9a-169">Digite "log. cmd" para iniciar o rastreamento de eventos.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-169">Type "log.cmd" to start event tracing.</span></span> <span data-ttu-id="b5a9a-170">Essa opção registra os eventos mais interessantes.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-170">This option logs the most interesting events.</span></span> <span data-ttu-id="b5a9a-171">Outras opções disponíveis registram o escopo diferente dos eventos.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-171">Other available options log different scope of the events.</span></span> <span data-ttu-id="b5a9a-172">Por exemplo, ' v ' ou modo de log detalhado captura todos os eventos dos quais o **GPUView** está ciente.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-172">For instance ‘v’ or verbose log mode captures all events that the **GPUView** is aware of.</span></span>
5.  <span data-ttu-id="b5a9a-173">Inicie o exemplo e exerça o exemplo de uma maneira que cubra o caminho de desempenho que você precisa analisar.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-173">Launch the sample, and exercise the sample in a manner that covers the performance path that you need to analyze.</span></span>
6.  <span data-ttu-id="b5a9a-174">Volte para as janelas de comando e digite "log. cmd" novamente para parar o registro em log.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-174">Go back to the command windows and type "log.cmd" again to stop logging.</span></span>
7.  <span data-ttu-id="b5a9a-175">Isso gera um arquivo chamado "merged. etl" na pasta *gpuview*</span><span class="sxs-lookup"><span data-stu-id="b5a9a-175">This outputs a file called "merged.etl" in the *gpuview* folder.</span></span> <span data-ttu-id="b5a9a-176">Você pode salvar esse arquivo em outro local e pode analisá-lo no mesmo computador ou em outro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-176">You can save this file to another location and you can analyze it on the same or a different machine.</span></span> <span data-ttu-id="b5a9a-177">Para exibir detalhes da captura de pilha, salve o arquivo de símbolo (. pdb) associado ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-177">In order to view stack capture details, save the symbol file (.pdb) associated with the app.</span></span>

## <a name="measurements"></a><span data-ttu-id="b5a9a-178">Medidas</span><span class="sxs-lookup"><span data-stu-id="b5a9a-178">Measurements</span></span>


> [!Note]  
> <span data-ttu-id="b5a9a-179">As medidas para o exemplo de realização de geometria são obtidas em uma máquina quad core com uma placa gráfica DirectX11 integrada.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-179">The measurements for geometry realization sample are taken on a Quad Core machine with an integrated DirectX11 graphics card.</span></span> <span data-ttu-id="b5a9a-180">As medidas variam dependendo da configuração do computador.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-180">The measurements vary depending upon the machine configuration.</span></span>

 

<span data-ttu-id="b5a9a-181">Esta seção demonstra como medir as medições de tempo de inicialização, CPU e GPU por quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-181">This section demonstrates how to measure the startup-time, CPU and GPU time per frame measurements.</span></span> <span data-ttu-id="b5a9a-182">Você pode capturar um rastreamento de desempenho para o mesmo exemplo em seu computador e ver as diferenças nas várias medições.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-182">You can capture a performance trace for the same sample on your machine and see the differences in the various measurements.</span></span>

<span data-ttu-id="b5a9a-183">Para analisar o rastreamento no **GPUView**, abra o arquivo "merged. ELT" usando **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-183">To analyze the trace in **GPUView**, open the "merged.elt" file using **GPUView.exe**.</span></span>

### <a name="startup-time"></a><span data-ttu-id="b5a9a-184">Tempo de inicialização</span><span class="sxs-lookup"><span data-stu-id="b5a9a-184">Startup-time</span></span>

<span data-ttu-id="b5a9a-185">O tempo de inicialização é medido pelo tempo total gasto desde o início do aplicativo até que o conteúdo seja exibido pela primeira vez na tela.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-185">The startup time is measured by the total time spent from the app start until the content first appears on the screen.</span></span>

<span data-ttu-id="b5a9a-186">A medição de tempo de inicialização é melhor obtida seguindo as etapas listadas na seção anterior com estas variações:</span><span class="sxs-lookup"><span data-stu-id="b5a9a-186">The startup-time measurement is best taken by following the steps listed in the previous section with these variations:</span></span>

-   <span data-ttu-id="b5a9a-187">Se você tomar as medidas de inicialização na primeira vez em que iniciar o aplicativo, ele será chamado de inicialização a frio.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-187">If the you take the start-up measurements the very first time you launch the app, it is called cold startup.</span></span> <span data-ttu-id="b5a9a-188">Isso pode variar de medidas realizadas após a inicialização do aplicativo algumas vezes em uma pequena duração de tempo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-188">This may vary from measurements taken after you launch the app a few times over in a small duration of time.</span></span> <span data-ttu-id="b5a9a-189">Isso é chamado de inicialização a quente.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-189">This is called warm startup.</span></span> <span data-ttu-id="b5a9a-190">Dependendo de quantos recursos um aplicativo cria na inicialização, pode haver uma grande diferença entre os dois tempos de inicialização.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-190">Depending upon how many resources an app creates at launch, there can be a big difference between the two startup times.</span></span> <span data-ttu-id="b5a9a-191">Dependendo das metas do aplicativo, a medição de uma ou outra pode ser desejável.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-191">Depending upon app goals, measuring one or the other might be desirable.</span></span>
-   <span data-ttu-id="b5a9a-192">Ao registrar informações de desempenho, encerre o aplicativo assim que o primeiro quadro for exibido na tela.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-192">When you log performance information, terminate the app as soon as the first frame shows up on the screen.</span></span>

### <a name="calculating-start-up-time-using-gpuview"></a><span data-ttu-id="b5a9a-193">Calculando o tempo de inicialização usando **GPUView**</span><span class="sxs-lookup"><span data-stu-id="b5a9a-193">Calculating start-up time using **GPUView**</span></span>

1.  <span data-ttu-id="b5a9a-194">No **GPUView**, role para baixo até o processo relevante, neste caso GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-194">In **GPUView**, scroll down to the relevant process, in this case GeometryRealization.exe.</span></span>

    ![Captura de tela que mostra um exemplo de processos no GPUView.](images/profile1.png)

2.  <span data-ttu-id="b5a9a-196">A fila de CPU de contexto representa a carga de trabalho de gráficos na fila do hardware, mas não necessariamente sendo processada pelo hardware.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-196">The context CPU queue represents the graphics workload queued to the hardware, but not necessarily being processed by the hardware.</span></span> <span data-ttu-id="b5a9a-197">Quando o arquivo de rastreamento é aberto, ele mostra todos os eventos registrados entre o momento em que o rastreamento foi tirado.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-197">When the trace file is opened, it shows all the events logged between the time the trace was taken.</span></span> <span data-ttu-id="b5a9a-198">Para calcular o tempo de inicialização, selecione a região de interesse, Aplique zoom na parte inicial da primeira fila de CPU de contexto (esse é o que mostra a atividade) usando Ctrl + Z.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-198">In order to calculate the startup-time, select the region of interest, zoom into the initial portion of the first Context CPU Queue (this is the one that shows activity) using Ctrl +Z.</span></span> <span data-ttu-id="b5a9a-199">Mais informações sobre os controles **GPUView** podem ser encontradas na seção arquivo de ajuda do **GPUView** "Resumo dos controles de **GPUView** ".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-199">More information about **GPUView** Controls can be found in the **GPUView** Help file section "Summary of **GPUView** Controls".</span></span> <span data-ttu-id="b5a9a-200">A figura a seguir mostra apenas o processo de GeometryRealization.exe ampliado para a primeira parte da fila de CPU de contexto.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-200">The figure below only shows the GeometryRealization.exe process zoomed in to the first part of the Context CPU Queue.</span></span> <span data-ttu-id="b5a9a-201">A cor da fila de CPU de contexto é denotada pelo retângulo logo abaixo da fila e os mesmos pacotes de dados de cor na fila mostram o trabalho da GPU na fila no hardware.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-201">The color of the Context CPU Queue is denoted by the rectangle right below the queue and same color data packets in the queue show GPU work queued up on the hardware.</span></span> <span data-ttu-id="b5a9a-202">O pacote de padrão de hachura na fila de contexto mostra o pacote atual, o que significa que o aplicativo quer que o hardware apresente o conteúdo na tela.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-202">The hatch pattern packet in the context queue shows the present packet which means that the app wants the hardware to present the content on the screen.</span></span>

    ![Captura de tela que mostra exemplos de ' contexto C P b fila '.](images/profile2.png)

3.  <span data-ttu-id="b5a9a-204">O tempo de inicialização é a hora em que o aplicativo é iniciado pela primeira vez (nesse caso, o módulo de ponto de entrada de thread de interface do usuário SHCORE.dll) até o momento em que o contexto aparece primeiro (marcado por um pacote de hachura).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-204">The startup-time is the time when the app first starts (in this case UI thread entry point module SHCORE.dll) till the time the context first appears (marked by a hatch packet).</span></span> <span data-ttu-id="b5a9a-205">A figura aqui realça a área de interesse.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-205">The figure here highlights the area of interest.</span></span>

    > [!Note]  
    > <span data-ttu-id="b5a9a-206">As informações reais atuais são representadas na fila de inverter e, portanto, o tempo necessário é estendido até que o pacote presente seja realmente concluído na fila de inverter.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-206">The actual present info is represented in the flip queue and thus the time take is extended till the present packet actually completes in the flip queue.</span></span>

     

    <span data-ttu-id="b5a9a-207">A barra de status completa não está visível na figura abaixo, que também mostra o tempo decorrido entre as partes destacadas.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-207">The complete status bar is not visible in the figure below which also shows the elapsed time between the highlighted portions.</span></span> <span data-ttu-id="b5a9a-208">Esse é o tempo de inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-208">This is the startup-time of the app.</span></span> <span data-ttu-id="b5a9a-209">Nesse caso, para o computador mencionado acima, ele começou a ser 240ms.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-209">In this case for the machine mentioned above, it came out to be around 240ms.</span></span>

    ![Captura de tela que mostra áreas de interesse em relação ao tempo de inicialização no ' contexto C P b fila '.](images/profile3.png)

### <a name="cpu-and-gpu-time-per-frame"></a><span data-ttu-id="b5a9a-211">CPU e tempo de GPU por quadro</span><span class="sxs-lookup"><span data-stu-id="b5a9a-211">CPU and GPU Time per frame</span></span>

<span data-ttu-id="b5a9a-212">Há algumas coisas a considerar ao medir o tempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-212">There are a few things to think about when measuring CPU time.</span></span> <span data-ttu-id="b5a9a-213">Procure as áreas no rastreamento em que você exercitau o cenário a ser analisado.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-213">Look for the areas in the trace where you have exercised the scenario to be analyzed.</span></span> <span data-ttu-id="b5a9a-214">Por exemplo, no exemplo de realização de geometria, um dos cenários analisados é a transição entre o processamento de primitivos 2048 e 8192, todos não reais (como em, a geometria não é mosaico a cada quadro).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-214">For instance, in the geometry realization sample one of the scenarios that has been analyzed is the transition between rendering 2048 and 8192 primitives, all unrealized (as in, geometry is not tessellated every frame).</span></span> <span data-ttu-id="b5a9a-215">O rastreamento mostra claramente a diferença na atividade de CPU e GPU antes e depois da transição no número de primitivos.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-215">The trace clearly shows difference in CPU and GPU activity before and after the transition in the number of primitives.</span></span>

<span data-ttu-id="b5a9a-216">Dois cenários estão sendo analisados para calcular a CPU e o tempo de GPU por quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-216">Two scenarios are being analyzed to calculate CPU and GPU time per frame.</span></span> <span data-ttu-id="b5a9a-217">Eles são os seguintes.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-217">They are as follows.</span></span>

-   <span data-ttu-id="b5a9a-218">A transição da renderização de primitivos não reais de 2048 para 8192 primitivos não reais.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-218">Transitioning from rendering 2048 unrealized primitives to 8192 unrealized primitives.</span></span>
-   <span data-ttu-id="b5a9a-219">A transição da renderização de primitivos 8192 obtidos para 8192 primitivos não reais.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-219">Transitioning from rendering 8192 realized primitives to 8192 unrealized primitives.</span></span>

<span data-ttu-id="b5a9a-220">Em ambos os casos, foi observado que a taxa de quadros caiu drasticamente.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-220">In both the cases, it was observed that the frame rate dropped drastically.</span></span> <span data-ttu-id="b5a9a-221">Medindo o tempo de CPU e GPU, a relação entre os dois, bem como alguns outros padrões no rastreamento, pode fornecer informações úteis sobre áreas problemáticas no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-221">Measuring CPU and GPU time, the relationship between the two as well as a few other patterns in the trace can give useful info about problematic areas in the app.</span></span>

### <a name="calculating-cpu-and-gpu-time-when-2048-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="b5a9a-222">Calculando a CPU e a hora da GPU quando os primitivos de 2048 estão sendo renderizados não reais</span><span class="sxs-lookup"><span data-stu-id="b5a9a-222">Calculating CPU and GPU time when 2048 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="b5a9a-223">Abra o arquivo de rastreamento usando **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-223">Open the trace file using **GPUView.exe**.</span></span>
2.  <span data-ttu-id="b5a9a-224">Role para baixo até o processo de GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-224">Scroll down to the GeometryRealization.exe process.</span></span>
3.  <span data-ttu-id="b5a9a-225">Selecione uma área para calcular o tempo de CPU e ampliar-a usando CTRL + Z.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-225">Select an area for calculating CPU time and zoom into it using CTRL + Z.</span></span>

    ![Captura de tela que mostra uma área selecionada para calcular o tempo C P U no ' contexto da fila de CPU '.](images/profile4.png)

4.  <span data-ttu-id="b5a9a-227">Mostrar informações de sincronização de v alternando entre F8.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-227">Show v-sync information by toggling between F8.</span></span> <span data-ttu-id="b5a9a-228">Manter o zoom em até que seja fácil ver um valor vsync de dados de forma clara.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-228">Keeping zooming in till it is easy to see one vsync worth of data clearly.</span></span> <span data-ttu-id="b5a9a-229">As linhas azuis são onde os horários de sincronização de v.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-229">The blue lines are where the v-sync times.</span></span> <span data-ttu-id="b5a9a-230">Normalmente, isso ocorre uma vez a cada 16 MS (60 fps), mas se o DWM estiver encontrando um problema de desempenho, ele será executado mais lentamente, assim ocorrerá uma vez a cada 32 ms (30 fps).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-230">Usually, these occur once every 16 ms (60 fps), but if DWM is encountering a performance problem, it runs slower so they will occur once every 32 ms (30 fps).</span></span> <span data-ttu-id="b5a9a-231">Para ter uma noção de tempo, selecione de uma barra azul para a próxima e, em seguida, examine o número de MS relatadas no canto inferior direito da janela **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="b5a9a-231">To get a sense of time, select from one blue bar to the next and then look at the number of ms reported in the lower right hand corner of the **GPUView** window.</span></span>

    ![Captura de tela que mostra um exemplo de tempos de sincronização de v.](images/profile5.png)

5.  <span data-ttu-id="b5a9a-233">Para medir o tempo de CPU por quadro, meça o período de tempo gasto por todos os threads envolvidos na renderização.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-233">To measure the CPU time per frame, measure the length of time taken by all the threads involved in rendering.</span></span> <span data-ttu-id="b5a9a-234">Talvez seja válido restringir o thread que se espera que seja mais relevante do ponto de vista do desempenho.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-234">It might be worthwhile to narrow down the thread that is expected to be most relevant from a performance standpoint.</span></span> <span data-ttu-id="b5a9a-235">Por exemplo, no exemplo de realização de geometria, o conteúdo é animação e precisa ser renderizado na tela todos os quadros que tornam o thread da interface do usuário o mais importante.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-235">For instance in the geometry realization sample, the content is animating and needs to be rendered on the screen every frame making the UI thread the important one.</span></span> <span data-ttu-id="b5a9a-236">Depois de determinar qual thread examinar, meça o comprimento das barras nesse thread.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-236">Once you determine which thread to look at, measure the length of the bars on this thread.</span></span> <span data-ttu-id="b5a9a-237">A média de alguns deles gera um tempo de CPU por quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-237">Averaging a few of these yields CPU time per frame.</span></span> <span data-ttu-id="b5a9a-238">A figura abaixo mostra o tempo gasto no thread da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-238">The figure below shows time taken up on the UI thread.</span></span> <span data-ttu-id="b5a9a-239">Ele também mostra que esse tempo se ajusta bem entre duas sincronizações em v consecutivas, o que significa que está atingindo 60FPS.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-239">It also shows that this time fits well between two consecutive v-syncs which mean that it is hitting 60FPS.</span></span>

    ![Captura de tela que mostra o tempo gasto no thread U I.](images/profile6.png)

    <span data-ttu-id="b5a9a-241">Você também pode verificar examinando a fila inverter para o período de tempo correspondente, que mostra que o DWM é capaz de apresentar todos os quadros.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-241">You can also verify by looking at the flip queue for the corresponding time frame which shows that DWM is able to present every frame.</span></span>

    ![Captura de tela que mostra um exemplo de "inverter fila".](images/profile7.png)

6.  <span data-ttu-id="b5a9a-243">A hora da GPU pode ser medida da mesma maneira que o tempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-243">The GPU time can be measured in the same way as the CPU time.</span></span> <span data-ttu-id="b5a9a-244">Amplie a área relevante como no caso de medição do tempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-244">Zoom into the relevant area as in the case of measuring CPU time.</span></span> <span data-ttu-id="b5a9a-245">Meça o comprimento das barras na fila de hardware da GPU com a mesma cor que a cor da fila de CPU do contexto.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-245">Measure the length of the bars in the GPU hardware Queue with the same color as the color of the Context CPU Queue.</span></span> <span data-ttu-id="b5a9a-246">Desde que as barras caibam nas sincronizações de v consecutivas, o aplicativo está funcionando perfeitamente em 60FPS.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-246">As long as the bars fit within consecutive v-syncs, the app is running smoothly at 60FPS.</span></span>

    ![Captura de tela que mostra um exemplo de "fila de hardware de GPU" exibindo informações que um aplicativo está executando às 60 F P S.](images/profile8.png)

### <a name="calculating-cpu-and-gpu-time-when-8192-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="b5a9a-248">Calculando a CPU e a hora da GPU quando os primitivos de 8192 estão sendo renderizados não reais</span><span class="sxs-lookup"><span data-stu-id="b5a9a-248">Calculating CPU and GPU time when 8192 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="b5a9a-249">Se você seguir as mesmas etapas novamente, o rastreamento mostrará que todo o trabalho de CPU para um quadro não se ajusta entre um v-Sync e o próximo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-249">If you follow the same steps again, the trace shows that all the CPU work for one frame does not fit between one v-sync and the next.</span></span> <span data-ttu-id="b5a9a-250">Isso significa que o aplicativo está associado à CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-250">This means that the app is CPU bound.</span></span> <span data-ttu-id="b5a9a-251">O thread da interface do usuário está saturaçãondo a CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-251">The UI thread is saturating the CPU.</span></span>

    ![Captura de tela que mostra um exemplo do thread da interface do usuário saturação o C P U.](images/profile9.png)

    <span data-ttu-id="b5a9a-253">Olhando para a fila inverter, também é claro que o DWM não é capaz de apresentar todos os quadros.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-253">Looking at the flip queue, it is also clear that DWM is not able to present every frame.</span></span>

    ![Captura de tela que mostra um exemplo da D W M que não pode apresentar todos os quadros.](images/profile10.png)

2.  <span data-ttu-id="b5a9a-255">Para analisar onde o tempo está sendo gasto, abra o rastreamento no **Xperf**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-255">In order to analyze where the time is getting spent, open the trace in **XPerf**.</span></span> <span data-ttu-id="b5a9a-256">Para analisar o tempo de inicialização em **Xperf**, primeiro localize o intervalo de tempo em **GPUView**.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-256">To analyze startup time in **XPerf**, first find the time interval in **GPUView**.</span></span> <span data-ttu-id="b5a9a-257">Passe o mouse sobre a esquerda do intervalo e anote o tempo absoluto mostrado na parte inferior da janela **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="b5a9a-257">Mouse over the left of the interval and the right and take note of the absolute time shown in the bottom of the **GPUView** window.</span></span> <span data-ttu-id="b5a9a-258">Em seguida, abra o mesmo arquivo. etl em **Xperf** e role para baixo até o grafo "amostragem de CPU por CPU", clique com o botão direito e selecione "selecionar intervalo..." Isso permite digitar o intervalo de interesse que foi descoberto examinando o rastreamento de GPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-258">Then open the same .etl file in **XPerf** and, scroll down to the "CPU Sampling by CPU" graph, right click and select "Select Interval…" This allows for typing in the interval of interest which was discovered by looking at the GPU trace.</span></span>

    ![Captura de tela que mostra a amostragem de c P U por C P U em ' análise de desempenho do Windows '.](images/profile11.png)

3.  <span data-ttu-id="b5a9a-260">Vá para o menu de rastreamento e verifique se "carregar símbolos" está marcado.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-260">Go to the Trace menu, and make sure "Load Symbols" is checked.</span></span> <span data-ttu-id="b5a9a-261">Além disso, acesse Trace-> configurar caminhos de símbolo e digite o caminho do símbolo do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-261">Also, go to Trace -> Configure Symbol Paths, and type in the app symbol path.</span></span> <span data-ttu-id="b5a9a-262">Um arquivo de símbolo contém informações de depuração sobre um executável compilado em um banco de dados separado (. pdb).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-262">A symbol file contains debugging information about a compiled executable in a separate database (.pdb).</span></span> <span data-ttu-id="b5a9a-263">Esse arquivo é comumente chamado de PDB.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-263">This file is commonly referred to as a PDB.</span></span> <span data-ttu-id="b5a9a-264">Mais informações sobre arquivos de símbolo podem ser encontradas aqui: [arquivos de símbolos](/windows/desktop/Debug/symbol-files).</span><span class="sxs-lookup"><span data-stu-id="b5a9a-264">More on symbol files can be found here: [Symbol Files](/windows/desktop/Debug/symbol-files).</span></span> <span data-ttu-id="b5a9a-265">Esse arquivo pode estar localizado na pasta "debug" do diretório do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-265">This file can be located in the "Debug" folder of the app directory.</span></span>

4.  <span data-ttu-id="b5a9a-266">Para obter a análise de onde o tempo está sendo gasto no aplicativo, clique com o botão direito do mouse no intervalo selecionado na etapa anterior e clique em tabela de resumo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-266">In order to get the breakdown of where the time is being spent in the app, right click on the interval selected in the previous step and click Summary Table.</span></span> <span data-ttu-id="b5a9a-267">Para obter uma visão geral de quanto tempo é gasto em cada DLL, desmarque "pilha" no menu "colunas".</span><span class="sxs-lookup"><span data-stu-id="b5a9a-267">To get an overview of how much time is spent in each dll, uncheck "Stack" from the "Columns" menu.</span></span> <span data-ttu-id="b5a9a-268">Observe que a coluna "Count" mostra quantas amostras estão dentro da dll/função fornecida.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-268">Note that the "Count" column here shows how many samples are within the given dll/function.</span></span> <span data-ttu-id="b5a9a-269">Como aproximadamente um exemplo é obtido por MS, esse número pode ser usado como uma melhor estimativa de quanto tempo é gasto em cada DLL/função.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-269">Because approximately one sample is taken per ms, this number can be used as a best guess for how much time is spent in each dll/function.</span></span> <span data-ttu-id="b5a9a-270">Marcar o menu "pilha" do colunas fornecerá o tempo inclusivo gasto em cada função no grafo de chamada.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-270">Checking the "Stack" from Columns menu will give the inclusive time spent in each function in the call graph.</span></span> <span data-ttu-id="b5a9a-271">Isso ajudará a dividir os pontos problemáticos ainda mais.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-271">This will help to break down the problem points further.</span></span>

5.  <span data-ttu-id="b5a9a-272">As informações de rastreamento de pilha para primitivos de 2048 não reais revela que 30% do tempo de CPU é gasto no processo de realização de geometria.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-272">Stack trace information for 2048 unrealized primitives reveals that 30% of CPU time is spent in geometry realization process.</span></span> <span data-ttu-id="b5a9a-273">Isso em cerca de 36% do tempo está sendo gasto no mosaico e no traçado da geometria.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-273">Of that around 36% of the time is being spent in geometry tessellation and stroking.</span></span>

6.  <span data-ttu-id="b5a9a-274">As informações de rastreamento de pilha para primitivos de 8192 não reais revela que cerca de 60% do tempo de CPU (4 núcleos) é gasto na realização de geometria.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-274">Stack trace information for 8192 unrealized primitives reveals that around 60% of the CPU time (4 cores) is spent in the geometry realization.</span></span>

    ![Captura de tela que mostra informações de rastreamento de pilha para o C P U time.](images/profile12.png)

### <a name="calculating-cpu-time-when-8192-primitives-are-being-rendered-realized"></a><span data-ttu-id="b5a9a-276">Calculando o tempo de CPU quando os primitivos de 8192 estão sendo processados</span><span class="sxs-lookup"><span data-stu-id="b5a9a-276">Calculating CPU time when 8192 primitives are being rendered realized</span></span>

<span data-ttu-id="b5a9a-277">Fica claro dos perfis que o aplicativo está associado à CPU.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-277">It is clear from the profiles that the app is CPU bound.</span></span> <span data-ttu-id="b5a9a-278">Para reduzir o tempo gasto pela CPU, as geometrias podem ser criadas uma vez e armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-278">In order to reduce the time spent by the CPU, geometries can be created once and cached.</span></span> <span data-ttu-id="b5a9a-279">O conteúdo armazenado em cache pode ser renderizado a cada quadro sem incorrer no custo de mosaico Geometry por quadro.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-279">The cached content can be rendered every frame without incurring the geometry tessellation cost per frame.</span></span> <span data-ttu-id="b5a9a-280">Ao examinar o rastreamento em **GPUView** para a parte realizada do aplicativo, é claro que o DWM é capaz de apresentar todos os quadros e o tempo de CPU foi reduzido drasticamente.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-280">When looking at the trace in **GPUView** for the realized part of the app, it is clear that DWM is able to present every frame and the CPU time has reduced drastically.</span></span>

![Captura de tela que mostra um exemplo de um rastreamento em GPUView mostrando D W M é capaz de apresentar todos os quadros.](images/profile13.png)

<span data-ttu-id="b5a9a-282">A primeira parte do grafo mostra os primitivos 8192 obtidos.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-282">The first part of the graph shows realized 8192 primitives.</span></span> <span data-ttu-id="b5a9a-283">O tempo de CPU correspondente por quadro é capaz de se ajustar em duas sincronizações de v consecutivas.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-283">The corresponding CPU time per frame is able to fit within two consecutive v-syncs.</span></span> <span data-ttu-id="b5a9a-284">Na parte posterior do grafo, isso não é verdade.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-284">In the later part of the graph this is not true.</span></span>

<span data-ttu-id="b5a9a-285">Olhando para o **Xperf**, a CPU fica ociosa por mais tempo, com apenas 25% do tempo de CPU gasto no aplicativo de realização de geometria.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-285">Looking in **XPerf**, CPU is sitting idle for the longest time with only about 25% of the CPU time being spent on the geometry realization app.</span></span>

![captura de tela gpuview.](images/profile14.png)

## <a name="summary"></a><span data-ttu-id="b5a9a-287">Resumo</span><span class="sxs-lookup"><span data-stu-id="b5a9a-287">Summary</span></span>

<span data-ttu-id="b5a9a-288">**GPUView** e **Xperf** e ferramentas poderosas para analisar o desempenho de aplicativos do [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) .</span><span class="sxs-lookup"><span data-stu-id="b5a9a-288">Both **GPUView** and **XPerf** and powerful tools for analyzing performance of [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps.</span></span> <span data-ttu-id="b5a9a-289">Este artigo é um dos principais para usar essas ferramentas e entender as medidas básicas de desempenho e as características do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-289">This article is a primer for using these tools and understanding basic performance measurements and app characteristics.</span></span> <span data-ttu-id="b5a9a-290">Além de entender o uso de ferramentas, é importante entender o aplicativo que está sendo analisado.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-290">Apart from understanding usage of tools, it is first important to understand the app being analyzed.</span></span> <span data-ttu-id="b5a9a-291">Comece a encontrar respostas para perguntas como o que o aplicativo está tentando atingir?</span><span class="sxs-lookup"><span data-stu-id="b5a9a-291">Start with finding answers to questions like what is the app trying to achieve?</span></span> <span data-ttu-id="b5a9a-292">Quais threads no sistema são mais importantes?</span><span class="sxs-lookup"><span data-stu-id="b5a9a-292">Which threads in the system are most important?</span></span> <span data-ttu-id="b5a9a-293">Quais compensações você pretende fazer?</span><span class="sxs-lookup"><span data-stu-id="b5a9a-293">What trade-offs are you willing to make?</span></span> <span data-ttu-id="b5a9a-294">Ao analisar rastreamentos de desempenho, comece examinando os locais problemáticos óbvios.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-294">When analyzing performance traces, start by looking at obvious problematic places.</span></span> <span data-ttu-id="b5a9a-295">A CPU do aplicativo ou a GPU está associada?</span><span class="sxs-lookup"><span data-stu-id="b5a9a-295">Is the app CPU or GPU bound?</span></span> <span data-ttu-id="b5a9a-296">O aplicativo é capaz de apresentar todos os quadros?</span><span class="sxs-lookup"><span data-stu-id="b5a9a-296">Is the app able to present every frame?</span></span> <span data-ttu-id="b5a9a-297">Ferramentas junto com uma compreensão do aplicativo podem fornecer informações muito úteis para entender, localizar e, finalmente, resolver problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="b5a9a-297">Tools together with an understanding of the app can give very useful information in understanding, finding and finally solving performance problems.</span></span>

 

 