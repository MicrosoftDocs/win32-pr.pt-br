---
title: Comparando a aceleração de hardware Direct2D e GDI
description: Direct2D e GDI são APIs de renderização 2D de modo imediato e ambas oferecem algum grau de aceleração de hardware.
ms.assetid: 0028a0c3-445d-46b7-b55b-46dff3bce9ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f05dce8719f4d07d3160c65b88570391c3eb736
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104294101"
---
# <a name="comparing-direct2d-and-gdi-hardware-acceleration"></a><span data-ttu-id="37545-103">Comparando a aceleração de hardware Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="37545-103">Comparing Direct2D and GDI Hardware Acceleration</span></span>

<span data-ttu-id="37545-104">[Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) são APIs de renderização 2D de modo imediato e ambas oferecem algum grau de aceleração de hardware.</span><span class="sxs-lookup"><span data-stu-id="37545-104">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both immediate mode 2D rendering APIs and both offer some degree of hardware acceleration.</span></span> <span data-ttu-id="37545-105">Este tópico explora as diferenças entre Direct2D e GDI, incluindo as diferenças passadas e presentes nos recursos de aceleração de hardware de ambas as APIs.</span><span class="sxs-lookup"><span data-stu-id="37545-105">This topic explores the differences between Direct2D and GDI, including past and present differences in the hardware acceleration features of both APIs.</span></span>

<span data-ttu-id="37545-106">Este tópico tem as seguintes partes:</span><span class="sxs-lookup"><span data-stu-id="37545-106">This topic has the following parts:</span></span>

-   [<span data-ttu-id="37545-107">Diferenças entre Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="37545-107">Differences between Direct2D and GDI</span></span>](#differences-between-direct2d-and-gdi)
-   [<span data-ttu-id="37545-108">Aceleração de hardware GDI e Direct2D</span><span class="sxs-lookup"><span data-stu-id="37545-108">GDI and Direct2D hardware acceleration</span></span>](#gdi-and-direct2d-hardware-acceleration)
    -   [<span data-ttu-id="37545-109">Aumento da complexidade e do tamanho dos drivers de exibição</span><span class="sxs-lookup"><span data-stu-id="37545-109">Increasing complexity and size of display drivers</span></span>](#increasing-complexity-and-size-of-display-drivers)
    -   [<span data-ttu-id="37545-110">Dificuldade na sincronização de espaços de endereço de kernel global e sessão</span><span class="sxs-lookup"><span data-stu-id="37545-110">Difficulty in synchronizing session and global kernel address spaces</span></span>](#difficulty-in-synchronizing-session-and-global-kernel-address-spaces)
    -   [<span data-ttu-id="37545-111">Gerenciamento de janelas compostas</span><span class="sxs-lookup"><span data-stu-id="37545-111">Composited window management</span></span>](#composited-window-management)
-   [<span data-ttu-id="37545-112">Renderização GDI no Windows 7</span><span class="sxs-lookup"><span data-stu-id="37545-112">GDI rendering in Windows 7</span></span>](#gdi-rendering-in-windows-7)
-   [<span data-ttu-id="37545-113">Contraste de Direct2D e aceleração GDI no Windows 7</span><span class="sxs-lookup"><span data-stu-id="37545-113">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>](#contrasting-direct2d-and-gdi-acceleration-in-windows-7)
    -   [<span data-ttu-id="37545-114">Local dos recursos</span><span class="sxs-lookup"><span data-stu-id="37545-114">Location of resources</span></span>](#location-of-resources)
    -   [<span data-ttu-id="37545-115">Método de renderização</span><span class="sxs-lookup"><span data-stu-id="37545-115">Rendering method</span></span>](#rendering-method)
    -   [<span data-ttu-id="37545-116">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="37545-116">Scalability</span></span>](#scalability)
    -   [<span data-ttu-id="37545-117">Localidade</span><span class="sxs-lookup"><span data-stu-id="37545-117">Location</span></span>](#location-of-resources)
    -   [<span data-ttu-id="37545-118">Disponibilidade de aceleração de hardware</span><span class="sxs-lookup"><span data-stu-id="37545-118">Availability of Hardware Acceleration</span></span>](#availability-of-hardware-acceleration)
    -   [<span data-ttu-id="37545-119">Modelo de apresentação</span><span class="sxs-lookup"><span data-stu-id="37545-119">Presentation Model</span></span>](#presentation-model)
-   [<span data-ttu-id="37545-120">Conclusão</span><span class="sxs-lookup"><span data-stu-id="37545-120">Conclusion</span></span>](#conclusion)

## <a name="differences-between-direct2d-and-gdi"></a><span data-ttu-id="37545-121">Diferenças entre Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="37545-121">Differences between Direct2D and GDI</span></span>

<span data-ttu-id="37545-122">O [GDI](/windows/desktop/gdi/windows-gdi) renderiza geometrias opacas e com alias, como polígonos, elipses e linhas.</span><span class="sxs-lookup"><span data-stu-id="37545-122">[GDI](/windows/desktop/gdi/windows-gdi) renders opaque, aliased geometries such as polygons, ellipses and lines.</span></span> <span data-ttu-id="37545-123">Ele processa texto de alias e ClearType e pode dar suporte à mesclagem de transparência por meio da API AlphaBlend.</span><span class="sxs-lookup"><span data-stu-id="37545-123">It renders aliased and ClearType text, and it can support transparency blending through the AlphaBlend API.</span></span> <span data-ttu-id="37545-124">No entanto, seu manuseio de transparência é inconsistente e a maioria das APIs GDI simplesmente ignora o canal alfa.</span><span class="sxs-lookup"><span data-stu-id="37545-124">However, its handling of transparency is inconsistent and most GDI APIs simply ignore the alpha channel.</span></span> <span data-ttu-id="37545-125">Algumas APIs GDI garantem o que o canal alfa conterá após uma operação.</span><span class="sxs-lookup"><span data-stu-id="37545-125">Few GDI APIs guarantee what the alpha channel will contain after an operation.</span></span> <span data-ttu-id="37545-126">O mais importante é que a renderização do GDI não é mapeada facilmente para operações 3D, e uma GPU moderna renderiza com mais eficiência a parte 3D de seu mecanismo de renderização.</span><span class="sxs-lookup"><span data-stu-id="37545-126">More importantly, GDI's rendering does not map easily to 3D operations, and a modern GPU renders most efficiently on the 3D portion of its rendering engine.</span></span> <span data-ttu-id="37545-127">Por exemplo, as linhas com alias do [Direct2D](./direct2d-portal.md)são projetadas para serem implementadas simplesmente como dois triângulos renderizados na GPU, enquanto a GDI usa o algoritmo de desenho de linha do Bresenham.</span><span class="sxs-lookup"><span data-stu-id="37545-127">For example, [Direct2D](./direct2d-portal.md)'s aliased lines are designed to be implemented simply as two triangles rendered on the GPU, whereas GDI uses Bresenham's line drawing algorithm.</span></span>

<span data-ttu-id="37545-128">O [Direct2D](./direct2d-portal.md) renderiza primitivos opacos, transparentes, com alias e com alias suavizados.</span><span class="sxs-lookup"><span data-stu-id="37545-128">[Direct2D](./direct2d-portal.md) renders opaque, transparent, aliased and anti-aliased primitives.</span></span> <span data-ttu-id="37545-129">As UIs modernas geralmente fazem uso de transparência e animação.</span><span class="sxs-lookup"><span data-stu-id="37545-129">Modern UIs often make use of transparency and animation.</span></span> <span data-ttu-id="37545-130">O Direct2D facilita a criação de uma interface do usuário moderna, pois tem garantias estritas sobre como ela aceita e renderiza conteúdo transparente, e todos os seus primitivos são renderizados usando aceleração de hardware.</span><span class="sxs-lookup"><span data-stu-id="37545-130">Direct2D makes it easier to create a modern UI because it has strict guarantees on how it accepts and renders transparent content, and all of its primitives are rendered using hardware acceleration.</span></span> <span data-ttu-id="37545-131">Direct2D não é um superconjunto puro de [GDI](/windows/desktop/gdi/windows-gdi): primitivos que teriam pouco lentos quando implementado em uma GPU não estiver presente no Direct2D.</span><span class="sxs-lookup"><span data-stu-id="37545-131">Direct2D is not a pure superset of [GDI](/windows/desktop/gdi/windows-gdi): primitives that would have been unreasonably slow when implemented on a GPU aren't present in Direct2D.</span></span> <span data-ttu-id="37545-132">Como o Direct2D é criado com essa ênfase na aceleração 3D, também é fácil de usar com o Direct3D.</span><span class="sxs-lookup"><span data-stu-id="37545-132">Because Direct2D is built with this emphasis on 3D acceleration it is also easy to use with Direct3D.</span></span>

<span data-ttu-id="37545-133">Desde o Windows NT 4, o [GDI](/windows/desktop/gdi/windows-gdi) foi executado no modo kernel.</span><span class="sxs-lookup"><span data-stu-id="37545-133">Since Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) has run in kernel mode.</span></span> <span data-ttu-id="37545-134">O aplicativo chama o GDI, que chama seu equivalente de modo kernel, que passa os primitivos para seu próprio modelo de driver.</span><span class="sxs-lookup"><span data-stu-id="37545-134">The application calls GDI which then calls its kernel mode counterpart which passes the primitives to its own driver model.</span></span> <span data-ttu-id="37545-135">Esse driver envia os resultados para o driver de vídeo do modo de kernel global.</span><span class="sxs-lookup"><span data-stu-id="37545-135">This driver then sends the results to the global kernel mode display driver.</span></span>

<span data-ttu-id="37545-136">A partir do Windows 2000, o [GDI](/windows/desktop/gdi/windows-gdi) e os drivers GDI foram executados em um espaço independente no kernel chamado "espaço de sessão".</span><span class="sxs-lookup"><span data-stu-id="37545-136">Starting with Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) and the GDI drivers have run in an independent space in the kernel called "session space."</span></span> <span data-ttu-id="37545-137">Um espaço de endereço de sessão é criado para cada sessão de logon, e cada instância de GDI é executada de forma independente nesse espaço de endereço de modo kernel distinto.</span><span class="sxs-lookup"><span data-stu-id="37545-137">A session address space is created for each logon session, and each instance of GDI runs independently in this distinct kernel mode address space.</span></span> <span data-ttu-id="37545-138">No entanto, Direct2D é executado no modo de usuário e passa comandos de desenho por meio do driver Direct3D do modo de usuário para o driver de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="37545-138">Direct2D, however, runs in user mode and passes drawing commands through the user mode Direct3D driver to the kernel mode driver.</span></span>

![Figura 1-Direct2D em comparação com GDI](images/direct2d-vs-gdi1.png)

## <a name="gdi-and-direct2d-hardware-acceleration"></a><span data-ttu-id="37545-140">Aceleração de hardware GDI e Direct2D</span><span class="sxs-lookup"><span data-stu-id="37545-140">GDI and Direct2D hardware acceleration</span></span>

<span data-ttu-id="37545-141">A diferença mais importante entre a aceleração de hardware [Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) é a tecnologia subjacente que as conduz.</span><span class="sxs-lookup"><span data-stu-id="37545-141">The most important difference between [Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) hardware acceleration is the underlying technology that drives them.</span></span> <span data-ttu-id="37545-142">O Direct2D é colocado em camadas no Direct3D e o GDI superiores tem seu próprio modelo de driver, a DDI (interface de driver de dispositivo) do GDI, que corresponde aos primitivos GDI.</span><span class="sxs-lookup"><span data-stu-id="37545-142">Direct2D is layered on top Direct3D and GDI has its own driver model, the GDI Device Driver Interface (DDI), which corresponds to the GDI primitives.</span></span> <span data-ttu-id="37545-143">O modelo de driver do Direct3D corresponde ao que o hardware de renderização 3D em uma GPU renderiza.</span><span class="sxs-lookup"><span data-stu-id="37545-143">The Direct3D driver model corresponds to what the 3D rendering hardware in a GPU renders.</span></span> <span data-ttu-id="37545-144">Quando a DDI GDI foi definida pela primeira vez, a maioria dos hardwares de aceleração de exibição visaram os primitivos GDI.</span><span class="sxs-lookup"><span data-stu-id="37545-144">When the GDI DDI was first defined, most display acceleration hardware targeted the GDI primitives.</span></span> <span data-ttu-id="37545-145">Ao longo do tempo, cada vez mais ênfase foi colocado na aceleração do jogo 3D e menos na aceleração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="37545-145">Over time, more and more emphasis was placed on 3D game acceleration and less on application acceleration.</span></span> <span data-ttu-id="37545-146">Como consequência, a API BitBlt foi acelerada pelo hardware e a maioria das outras operações GDI não era.</span><span class="sxs-lookup"><span data-stu-id="37545-146">As a consequence the BitBlt API was hardware accelerated and most other GDI operations were not.</span></span>

<span data-ttu-id="37545-147">Isso define o estágio para uma sequência de alterações para o modo como a [GDI](/windows/desktop/gdi/windows-gdi) é renderizada para a exibição.</span><span class="sxs-lookup"><span data-stu-id="37545-147">This set the stage for a sequence of changes to how [GDI](/windows/desktop/gdi/windows-gdi) renders to the display.</span></span> <span data-ttu-id="37545-148">A ilustração a seguir mostra como a renderização de vídeo GDI foi alterada do Windows XP para o Windows 7.</span><span class="sxs-lookup"><span data-stu-id="37545-148">The following illustration shows how GDI display rendering has changed from Windows XP to Windows 7.</span></span>

![Figura 2-evolução da renderização de exibição de GDI](images/direct2d-vs-gdi2.png)

<span data-ttu-id="37545-150">Também havia vários fatores adicionais que causaram alterações no modelo de driver [GDI](/windows/desktop/gdi/windows-gdi) , conforme explicado abaixo.</span><span class="sxs-lookup"><span data-stu-id="37545-150">There were also a number of additional factors that caused changes to the [GDI](/windows/desktop/gdi/windows-gdi) driver model, as explained below.</span></span>

### <a name="increasing-complexity-and-size-of-display-drivers"></a><span data-ttu-id="37545-151">Aumento da complexidade e do tamanho dos drivers de exibição</span><span class="sxs-lookup"><span data-stu-id="37545-151">Increasing complexity and size of display drivers</span></span>

<span data-ttu-id="37545-152">os drivers 3D se tornaram mais complexos ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="37545-152">3D drivers have become more complex over time.</span></span> <span data-ttu-id="37545-153">O código mais complexo tende a ter mais defeitos, o que o torna benéfico para que o driver exista no modo de usuário em que um bug de driver não pode causar uma reinicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="37545-153">More complex code tends to have more defects making it beneficial for the driver to exist in user-mode where a driver bug can't cause a system reboot.</span></span> <span data-ttu-id="37545-154">Como pode ser visto na figura acima, o driver de vídeo é dividido em um componente de modo de usuário complexo e um componente de modo de kernel mais simples.</span><span class="sxs-lookup"><span data-stu-id="37545-154">As can be seen in the figure above, the display driver is divided into a complex user mode component and a simpler kernel mode component.</span></span>

### <a name="difficulty-in-synchronizing-session-and-global-kernel-address-spaces"></a><span data-ttu-id="37545-155">Dificuldade na sincronização de espaços de endereço de kernel global e sessão</span><span class="sxs-lookup"><span data-stu-id="37545-155">Difficulty in synchronizing session and global kernel address spaces</span></span>

<span data-ttu-id="37545-156">No Windows XP, existe um driver de vídeo em dois espaços de endereço diferentes: espaço de sessão e espaço do kernel.</span><span class="sxs-lookup"><span data-stu-id="37545-156">In Windows XP, a display driver exists in two different address spaces: session space and kernel space.</span></span> <span data-ttu-id="37545-157">Partes do driver precisam responder a eventos como eventos de gerenciamento de energia.</span><span class="sxs-lookup"><span data-stu-id="37545-157">Parts of the driver need to respond to events such as power management events.</span></span> <span data-ttu-id="37545-158">Isso precisa ser sincronizado com o estado do driver no espaço de endereço da sessão.</span><span class="sxs-lookup"><span data-stu-id="37545-158">This needs to be synchronized with the driver state in the session address space.</span></span> <span data-ttu-id="37545-159">Essa é uma tarefa difícil e pode levar a defeitos quando os drivers de exibição tentam lidar com esses espaços de endereço distintos.</span><span class="sxs-lookup"><span data-stu-id="37545-159">This is a difficult task and can lead to defects when display drivers attempt to deal with these distinct address spaces.</span></span>

### <a name="composited-window-management"></a><span data-ttu-id="37545-160">Gerenciamento de janelas compostas</span><span class="sxs-lookup"><span data-stu-id="37545-160">Composited window management</span></span>

<span data-ttu-id="37545-161">O Gerenciador de Janelas da Área de Trabalho (DWM), o Gerenciador de janelas de composição introduzido no Windows 7, renderiza todas as janelas para superfícies fora da tela e as compõe para serem exibidas na tela.</span><span class="sxs-lookup"><span data-stu-id="37545-161">The Desktop Window Manager (DWM), the compositing window manager introduced in Windows 7, renders all windows to off-screen surfaces and then composes them together to be displayed on screen.</span></span> <span data-ttu-id="37545-162">Isso exige que o [GDI](/windows/desktop/gdi/windows-gdi) seja capaz de renderizar para uma superfície que será renderizada pelo Direct3D para ser exibido.</span><span class="sxs-lookup"><span data-stu-id="37545-162">This requires [GDI](/windows/desktop/gdi/windows-gdi) to be able to render to a surface which will then be rendered by Direct3D to display.</span></span> <span data-ttu-id="37545-163">Isso representava um problema no modelo de driver XP, pois GDI e Direct3D eram pilhas de driver paralelas.</span><span class="sxs-lookup"><span data-stu-id="37545-163">This posed a problem in the XP driver model, since GDI and Direct3D were parallel driver stacks.</span></span>

<span data-ttu-id="37545-164">Como resultado, no Windows Vista, o driver de vídeo da DDI [GDI](/windows/desktop/gdi/windows-gdi) foi implementado como o CDD (driver de vídeo canônico) fornecido pela Microsoft, que processava o conteúdo GDI para um bitmap de memória do sistema para ser composto à tela.</span><span class="sxs-lookup"><span data-stu-id="37545-164">As a result, in Windows Vista, the [GDI](/windows/desktop/gdi/windows-gdi) DDI display driver was implemented as the Microsoft supplied Canonical Display Driver (CDD) which rendered GDI content to a system memory bitmap to be composed to the screen.</span></span>

## <a name="gdi-rendering-in-windows-7"></a><span data-ttu-id="37545-165">Renderização GDI no Windows 7</span><span class="sxs-lookup"><span data-stu-id="37545-165">GDI rendering in Windows 7</span></span>

<span data-ttu-id="37545-166">O modelo de driver usado no Windows Vista exigia que cada janela [GDI](/windows/desktop/gdi/windows-gdi) fosse apoiada por uma superfície de memória de vídeo e uma superfície de memória do sistema.</span><span class="sxs-lookup"><span data-stu-id="37545-166">The driver model used in Windows Vista required that every [GDI](/windows/desktop/gdi/windows-gdi) window be backed by both a video memory surface and a system memory surface.</span></span> <span data-ttu-id="37545-167">Isso resultou na memória do sistema sendo usada para cada janela GDI.</span><span class="sxs-lookup"><span data-stu-id="37545-167">This resulted in system memory being used for every GDI window.</span></span>

<span data-ttu-id="37545-168">Por esse motivo, o [GDI](/windows/desktop/gdi/windows-gdi) foi alterado novamente no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="37545-168">For this reason, [GDI](/windows/desktop/gdi/windows-gdi) was changed again in Windows 7.</span></span> <span data-ttu-id="37545-169">.</span><span class="sxs-lookup"><span data-stu-id="37545-169">.</span></span> <span data-ttu-id="37545-170">Em vez de renderizar para uma superfície de memória do sistema, o GDI foi modificado para renderizar para um segmento de memória de abertura.</span><span class="sxs-lookup"><span data-stu-id="37545-170">Instead of rendering to a system memory surface, GDI was modified to render to an aperture memory segment.</span></span> <span data-ttu-id="37545-171">A memória de abertura pode ser atualizada a partir da superfície de memória de vídeo que contém o conteúdo da janela.</span><span class="sxs-lookup"><span data-stu-id="37545-171">The aperture memory can be updated from the video memory surface holding the window contents.</span></span> <span data-ttu-id="37545-172">O GDI pode retornar à memória de abertura e, em seguida, o resultado pode ser enviado de volta para a superfície da janela.</span><span class="sxs-lookup"><span data-stu-id="37545-172">GDI can render back to the aperture memory, and the result can then be sent back to the window surface.</span></span> <span data-ttu-id="37545-173">Como o segmento de memória de abertura é endereçável pela GPU, a GPU pode acelerar essas atualizações para a superfície de memória de vídeo.</span><span class="sxs-lookup"><span data-stu-id="37545-173">Since the aperture memory segment is addressable by the GPU, the GPU can accelerate these updates to the video memory surface.</span></span> <span data-ttu-id="37545-174">Por exemplo, a renderização de texto, BitBlts, AlphaBlend, TransparentBlt e StretchBlt são aceleradas nesses casos.</span><span class="sxs-lookup"><span data-stu-id="37545-174">For example, text rendering, BitBlts, AlphaBlend, TransparentBlt, and StretchBlt are all accelerated in these cases.</span></span>

## <a name="contrasting-direct2d-and-gdi-acceleration-in-windows-7"></a><span data-ttu-id="37545-175">Contraste de Direct2D e aceleração GDI no Windows 7</span><span class="sxs-lookup"><span data-stu-id="37545-175">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>

<span data-ttu-id="37545-176">[Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) são APIs de renderização de modo imediato 2D e são aceleradas por hardware.</span><span class="sxs-lookup"><span data-stu-id="37545-176">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both 2D immediate-mode rendering APIs and are hardware accelerated.</span></span> <span data-ttu-id="37545-177">No entanto, há várias diferenças que permanecem em ambas as APIs.</span><span class="sxs-lookup"><span data-stu-id="37545-177">However, there are a number of differences that remain in both APIs.</span></span>

### <a name="location-of-resources"></a><span data-ttu-id="37545-178">Local dos recursos</span><span class="sxs-lookup"><span data-stu-id="37545-178">Location of resources</span></span>

<span data-ttu-id="37545-179">A [GDI](/windows/desktop/gdi/windows-gdi) mantém seus recursos, em determinados bitmaps, na memória do sistema por padrão.</span><span class="sxs-lookup"><span data-stu-id="37545-179">[GDI](/windows/desktop/gdi/windows-gdi) maintains its resources, in particular bitmaps, in system memory by default.</span></span> <span data-ttu-id="37545-180">O [Direct2D](./direct2d-portal.md) mantém seus recursos na memória de vídeo no adaptador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="37545-180">[Direct2D](./direct2d-portal.md) maintains its resources in video memory on the display adapter.</span></span> <span data-ttu-id="37545-181">Quando a GDI precisa atualizar a memória de vídeo, isso deve ser feito no barramento, a menos que o recurso já esteja no segmento de memória de abertura ou se a operação puder ser expressa diretamente.</span><span class="sxs-lookup"><span data-stu-id="37545-181">When GDI needs to update video memory, this must be done over the bus, unless the resource is already in the aperture memory segment or if the operation can be expressed directly.</span></span> <span data-ttu-id="37545-182">Por outro lado, o Direct2D pode simplesmente traduzir seus primitivos para primitivos do Direct3D porque os recursos já estão na memória de vídeo.</span><span class="sxs-lookup"><span data-stu-id="37545-182">In contrast, Direct2D can simply translate its primitives to Direct3D primitives because the resources are already in video memory.</span></span>

### <a name="rendering-method"></a><span data-ttu-id="37545-183">Método de renderização</span><span class="sxs-lookup"><span data-stu-id="37545-183">Rendering method</span></span>

<span data-ttu-id="37545-184">Para manter a compatibilidade, a [GDI](/windows/desktop/gdi/windows-gdi) realiza uma grande parte da renderização para a abertura da memória usando a CPU.</span><span class="sxs-lookup"><span data-stu-id="37545-184">In order to maintain compatibility, [GDI](/windows/desktop/gdi/windows-gdi) performs a large part of its rendering to aperture memory using the CPU.</span></span> <span data-ttu-id="37545-185">Por outro lado, o [Direct2D](./direct2d-portal.md) converte suas chamadas de APIs em primitivos de Direct3D e operações de desenho.</span><span class="sxs-lookup"><span data-stu-id="37545-185">In contrast, [Direct2D](./direct2d-portal.md) translates its APIs calls into Direct3D primitives and drawing operations.</span></span> <span data-ttu-id="37545-186">O resultado é então renderizado na GPU.</span><span class="sxs-lookup"><span data-stu-id="37545-186">The result is then rendered on the GPU.</span></span> <span data-ttu-id="37545-187">Parte da renderização GDI? s é executada na GPU quando a memória de abertura é copiada para a superfície de memória de vídeo que representa a janela GDI.</span><span class="sxs-lookup"><span data-stu-id="37545-187">Some of GDI?s rendering is performed on the GPU when the aperture memory is copied to the video memory surface representing the GDI window.</span></span>

### <a name="scalability"></a><span data-ttu-id="37545-188">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="37545-188">Scalability</span></span>

<span data-ttu-id="37545-189">As chamadas de renderização de [Direct2D](./direct2d-portal.md)são todos os fluxos de comando independentes para a GPU.</span><span class="sxs-lookup"><span data-stu-id="37545-189">[Direct2D](./direct2d-portal.md)'s rendering calls are all independent command streams to the GPU.</span></span> <span data-ttu-id="37545-190">Cada fábrica Direct2D representa um dispositivo Direct3D diferente.</span><span class="sxs-lookup"><span data-stu-id="37545-190">Each Direct2D factory represents a different Direct3D device.</span></span> <span data-ttu-id="37545-191">O [GDI](/windows/desktop/gdi/windows-gdi) usa um fluxo de comando para todos os aplicativos no sistema.</span><span class="sxs-lookup"><span data-stu-id="37545-191">[GDI](/windows/desktop/gdi/windows-gdi) uses one command stream for all of the applications on the system.</span></span> <span data-ttu-id="37545-192">O método da GDI pode resultar em uma criação de a sobrecarga de contexto de renderização de GPU e CPU.</span><span class="sxs-lookup"><span data-stu-id="37545-192">GDI's method can result in a buildup of GPU and CPU rendering context overhead.</span></span>

### <a name="location"></a><span data-ttu-id="37545-193">Local</span><span class="sxs-lookup"><span data-stu-id="37545-193">Location</span></span>

<span data-ttu-id="37545-194">O [Direct2D](./direct2d-portal.md) funciona inteiramente no modo de usuário, incluindo o tempo de execução do Direct3D e o driver Direct3D do modo de usuário.</span><span class="sxs-lookup"><span data-stu-id="37545-194">[Direct2D](./direct2d-portal.md) operates entirely in user mode, including the Direct3D run time and the user mode Direct3D driver.</span></span> <span data-ttu-id="37545-195">Isso ajuda a evitar falhas do sistema causadas por defeitos de código no kernel.</span><span class="sxs-lookup"><span data-stu-id="37545-195">This helps prevent system crashes caused by code defects in the kernel.</span></span> <span data-ttu-id="37545-196">O [GDI](/windows/desktop/gdi/windows-gdi), no entanto, tem a maior parte de sua funcionalidade no espaço de sessão no modo kernel, com sua superfície de API no modo de usuário.</span><span class="sxs-lookup"><span data-stu-id="37545-196">[GDI](/windows/desktop/gdi/windows-gdi), however, has most of its functionality in session space in kernel mode, with its API surface in user mode.</span></span>

### <a name="availability-of-hardware-acceleration"></a><span data-ttu-id="37545-197">Disponibilidade de aceleração de hardware</span><span class="sxs-lookup"><span data-stu-id="37545-197">Availability of Hardware Acceleration</span></span>

<span data-ttu-id="37545-198">O [GDI](/windows/desktop/gdi/windows-gdi) é acelerado por hardware no Windows XP e acelerado no Windows 7 quando o Gerenciador de janelas da área de trabalho está em execução e um driver WDDM 1,1 está em uso.</span><span class="sxs-lookup"><span data-stu-id="37545-198">[GDI](/windows/desktop/gdi/windows-gdi) is hardware accelerated on Windows XP, and accelerated on Windows 7 when the Desktop Window Manager is running and a WDDM 1.1 driver is in use.</span></span> <span data-ttu-id="37545-199">O [Direct2D](./direct2d-portal.md) é acelerado por hardware em quase todos os drivers do WDDM e se o DWM está ou não em uso.</span><span class="sxs-lookup"><span data-stu-id="37545-199">[Direct2D](./direct2d-portal.md) is hardware accelerated on almost any WDDM driver and whether or not DWM is in use.</span></span> <span data-ttu-id="37545-200">No Vista, o GDI sempre será renderizado na CPU.</span><span class="sxs-lookup"><span data-stu-id="37545-200">On Vista, GDI will always render on the CPU.</span></span>

### <a name="presentation-model"></a><span data-ttu-id="37545-201">Modelo de apresentação</span><span class="sxs-lookup"><span data-stu-id="37545-201">Presentation Model</span></span>

<span data-ttu-id="37545-202">Quando o Windows foi criado pela primeira vez, havia memória insuficiente para permitir que cada janela fosse armazenada em seu próprio bitmap.</span><span class="sxs-lookup"><span data-stu-id="37545-202">When Windows was first designed, there was insufficient memory to allow every window to be stored in its own bitmap.</span></span> <span data-ttu-id="37545-203">Como resultado, a [GDI](/windows/desktop/gdi/windows-gdi) sempre é renderizada logicamente diretamente na tela, com várias regiões de recorte aplicadas para garantir que um aplicativo não fosse renderizado fora de sua janela.</span><span class="sxs-lookup"><span data-stu-id="37545-203">As a result, [GDI](/windows/desktop/gdi/windows-gdi) always rendered logically directly to the screen, with various clipping regions applied to ensure that an application did not render outside of its window.</span></span> <span data-ttu-id="37545-204">No modelo [Direct2D](./direct2d-portal.md) , um aplicativo é renderizado em um buffer de fundo e o resultado é exibido quando o aplicativo é feito o desenho.</span><span class="sxs-lookup"><span data-stu-id="37545-204">In the [Direct2D](./direct2d-portal.md) model, an application renders to a back-buffer, and the result is displayed when the application is done drawing.</span></span> <span data-ttu-id="37545-205">Isso permite que o Direct2D manipule cenários de animação de forma muito mais fluida do que o GDI pode.</span><span class="sxs-lookup"><span data-stu-id="37545-205">This allows Direct2D to handle animation scenarios much more fluidly than GDI can.</span></span>

## <a name="conclusion"></a><span data-ttu-id="37545-206">Conclusão</span><span class="sxs-lookup"><span data-stu-id="37545-206">Conclusion</span></span>

<span data-ttu-id="37545-207">O código [GDI](/windows/desktop/gdi/windows-gdi) existente continuará funcionando bem no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="37545-207">Existing [GDI](/windows/desktop/gdi/windows-gdi) code will continue to work well under Windows 7.</span></span> <span data-ttu-id="37545-208">No entanto, ao escrever um novo código de renderização de gráficos, [Direct2D](./direct2d-portal.md) deve ser considerado, pois aproveita melhor as GPUs modernas.</span><span class="sxs-lookup"><span data-stu-id="37545-208">However, when writing new graphics rendering code, [Direct2D](./direct2d-portal.md) should be considered, as it takes better advantage of modern GPUs.</span></span>

 

 