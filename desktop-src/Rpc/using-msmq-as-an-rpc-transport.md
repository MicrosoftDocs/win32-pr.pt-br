---
title: Usando o MSMQ como um transporte RPC
description: O subsistema RPC dá suporte ao uso do MSMQ como um transporte em modos síncronos e assíncronos.
ms.assetid: c3f96a91-b7bb-4c2a-8699-2100324af165
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a647fe4111e3ba4fc2ad0fe05fb7bcb48729a4c2
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103641599"
---
# <a name="using-msmq-as-an-rpc-transport"></a><span data-ttu-id="a8369-103">Usando o MSMQ como um transporte RPC</span><span class="sxs-lookup"><span data-stu-id="a8369-103">Using MSMQ as an RPC Transport</span></span>

<span data-ttu-id="a8369-104">O subsistema RPC dá suporte ao uso do MSMQ como um transporte em modos síncronos e assíncronos.</span><span class="sxs-lookup"><span data-stu-id="a8369-104">The RPC subsystem supports using MSMQ as a transport in synchronous and asynchronous modes.</span></span>

<span data-ttu-id="a8369-105">O modo síncrono usa chamadas de procedimento remoto convencionais.</span><span class="sxs-lookup"><span data-stu-id="a8369-105">Synchronous mode uses conventional remote procedure calls.</span></span> <span data-ttu-id="a8369-106">Essas chamadas usam pontos de extremidade bem conhecidos e o transporte de fila de mensagens, o [ncadg \_ MQ](/windows/desktop/Midl/ncadg-mq), como o protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="a8369-106">These calls use well-known endpoints and the message queue transport, [ncadg\_mq](/windows/desktop/Midl/ncadg-mq), as the transport protocol.</span></span> <span data-ttu-id="a8369-107">No modo síncrono, os procedimentos remotos podem ter \[ parâmetros [de entrada](/windows/desktop/Midl/in) \] e \[ [saída](/windows/desktop/Midl/out-idl) \] e podem usar os serviços de segurança RPC padrão.</span><span class="sxs-lookup"><span data-stu-id="a8369-107">In synchronous mode, your remote procedures can have \[ [in](/windows/desktop/Midl/in)\] and \[ [out](/windows/desktop/Midl/out-idl)\] parameters and can use the standard RPC security services.</span></span> <span data-ttu-id="a8369-108">O subsistema RPC cria uma fila de resposta para chamadas remotas que contêm parâmetros de **\[ saída \]** .</span><span class="sxs-lookup"><span data-stu-id="a8369-108">The RPC subsystem creates a reply queue for remote calls containing **\[out\]** parameters.</span></span> <span data-ttu-id="a8369-109">O modo síncrono é útil para aplicativos em que o cliente precisa receber dados do servidor.</span><span class="sxs-lookup"><span data-stu-id="a8369-109">The synchronous mode is useful for applications where the client needs to receive data from the server.</span></span> <span data-ttu-id="a8369-110">A principal limitação desse modo é que, assim como ocorre com chamadas de procedimento remoto convencionais, o cliente e o servidor devem estar em execução e permanecer em execução durante a chamada.</span><span class="sxs-lookup"><span data-stu-id="a8369-110">The main limitation of this mode is that, as with conventional remote procedure calls, both the client and server must be running and remain running for the duration of the call.</span></span>

<span data-ttu-id="a8369-111">O modo assíncrono permite que os aplicativos cliente façam chamadas para o servidor e retornam imediatamente, independentemente do estado do aplicativo do servidor ou do computador do servidor.</span><span class="sxs-lookup"><span data-stu-id="a8369-111">Asynchronous mode lets client applications make calls to the server and return immediately, regardless of the state of the server application or the server computer.</span></span> <span data-ttu-id="a8369-112">Ele também torna um subconjunto de recursos do MSMQ disponíveis para gerenciar filas de mensagens e fluxo de informações.</span><span class="sxs-lookup"><span data-stu-id="a8369-112">It also makes a subset of MSMQ features available for managing message queues and information flow.</span></span> <span data-ttu-id="a8369-113">A função [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) permite controlar a qualidade do serviço, a prioridade da chamada, o registro em log, a segurança e o tempo de vida da fila de processos do servidor.</span><span class="sxs-lookup"><span data-stu-id="a8369-113">The [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) function lets you control quality of service, call priority, journaling, security, and the lifetime of the server process queue.</span></span> <span data-ttu-id="a8369-114">A função [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) permite que você especifique atributos da fila de processo do servidor, como persistência de fila, autenticação e criptografia.</span><span class="sxs-lookup"><span data-stu-id="a8369-114">The [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) function lets you specify attributes of the server process queue, such as queue persistence, authentication, and encryption.</span></span>

<span data-ttu-id="a8369-115">Implemente o MSMQ assíncrono como você faria com o MSMQ síncrono.</span><span class="sxs-lookup"><span data-stu-id="a8369-115">You implement asynchronous MSMQ as you would synchronous MSMQ.</span></span> <span data-ttu-id="a8369-116">Você deve usar pontos de extremidade bem conhecidos e definir o protocolo de transporte para ser [ncadg \_ MQ](/windows/desktop/Midl/ncadg-mq).</span><span class="sxs-lookup"><span data-stu-id="a8369-116">You must use well-known endpoints, and define the transport protocol to be [ncadg\_mq](/windows/desktop/Midl/ncadg-mq).</span></span> <span data-ttu-id="a8369-117">No arquivo IDL, aplique o atributo [Message](/windows/desktop/Midl/message) às funções que usam o enfileiramento de mensagens assíncrona.</span><span class="sxs-lookup"><span data-stu-id="a8369-117">In your IDL file, apply the [message](/windows/desktop/Midl/message) attribute to the functions that use asynchronous message queuing.</span></span> <span data-ttu-id="a8369-118">Observe que as funções de mensagem podem ter \[ \] apenas parâmetros.</span><span class="sxs-lookup"><span data-stu-id="a8369-118">Note that message functions can have \[in\] parameters only.</span></span>

 

 