---
title: Desenvolvendo o cliente
description: O desenvolvimento de um programa cliente RPC é semelhante ao desenvolvimento do programa do servidor. Para obter informações sobre como desenvolver um programa de servidor RPC, consulte desenvolvendo o servidor.
ms.assetid: 92276326-d478-479e-8fa4-02a2fce58eb6
keywords:
- Chamada de procedimento remoto RPC, tarefas, desenvolvimento do cliente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 10ceddedc4ccfd1d068e3452b64ed8c6b54a621d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103917584"
---
# <a name="developing-the-client"></a><span data-ttu-id="65c69-105">Desenvolvendo o cliente</span><span class="sxs-lookup"><span data-stu-id="65c69-105">Developing the Client</span></span>

<span data-ttu-id="65c69-106">O desenvolvimento de um programa cliente RPC é semelhante ao desenvolvimento do programa do servidor.</span><span class="sxs-lookup"><span data-stu-id="65c69-106">Developing an RPC client program is similar to developing the server program.</span></span> <span data-ttu-id="65c69-107">Para obter informações sobre como desenvolver um programa de servidor RPC, consulte [desenvolvendo o servidor](developing-the-server.md).</span><span class="sxs-lookup"><span data-stu-id="65c69-107">For information on developing an RPC server program, see [Developing the Server](developing-the-server.md).</span></span>

<span data-ttu-id="65c69-108">Como no desenvolvimento de servidor, o programa cliente deve incluir o arquivo de cabeçalho que o compilador MIDL gera de seu arquivo. idl.</span><span class="sxs-lookup"><span data-stu-id="65c69-108">As in server development, your client program must include the header file that the MIDL compiler generates from your .idl file.</span></span> <span data-ttu-id="65c69-109">O compilador MIDL também gera um arquivo de origem C contendo o stub do cliente.</span><span class="sxs-lookup"><span data-stu-id="65c69-109">The MIDL compiler also generates a C source file containing the client stub.</span></span> <span data-ttu-id="65c69-110">Você deve compilar esse arquivo de origem C e vinculá-lo ao seu programa cliente.</span><span class="sxs-lookup"><span data-stu-id="65c69-110">You must compile this C source file and link it to your client program.</span></span> <span data-ttu-id="65c69-111">(Além disso, o compilador MIDL gera um arquivo de origem C contendo o stub do servidor, mas isso não é relevante para essa discussão.)</span><span class="sxs-lookup"><span data-stu-id="65c69-111">(In addition, the MIDL compiler generates a C source file containing the server stub, but that is not relevant to this discussion.)</span></span>

<span data-ttu-id="65c69-112">Além de compilar e vincular o stub do cliente com os arquivos de programa, você deve vincular a biblioteca de importação (e todas as outras bibliotecas de que seu programa cliente precisa) ao seu programa cliente.</span><span class="sxs-lookup"><span data-stu-id="65c69-112">In addition to compiling and linking the client stub with your program files, you must link the import library (and any other libraries your client program needs) to your client program.</span></span> <span data-ttu-id="65c69-113">O processo de criação de um programa cliente RPC é ilustrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="65c69-113">The process of creating an RPC client program is illustrated in the following diagram.</span></span>

![processo de criação de um programa cliente para um aplicativo distribuído](images/clntdev.png)

<span data-ttu-id="65c69-115">O exemplo na ilustração anterior demonstra a criação de um programa cliente RPC chamado MyClnt.exe.</span><span class="sxs-lookup"><span data-stu-id="65c69-115">The example in the preceding illustration demonstrates the creation of an RPC client program called MyClnt.exe.</span></span> <span data-ttu-id="65c69-116">A primeira etapa é definir a interface no arquivo MyApp. idl.</span><span class="sxs-lookup"><span data-stu-id="65c69-116">The first step is to define the interface in the file MyApp.idl.</span></span> <span data-ttu-id="65c69-117">O compilador MIDL usa MyApp. idl para gerar o arquivo MyApp \_ c. c, que contém o stub do cliente.</span><span class="sxs-lookup"><span data-stu-id="65c69-117">The MIDL compiler uses MyApp.idl to generate the file MyApp\_c.c, which contains the client stub.</span></span> <span data-ttu-id="65c69-118">Ele também gera o arquivo MyApp. h, que o programa cliente deve incluir.</span><span class="sxs-lookup"><span data-stu-id="65c69-118">It also generates the file MyApp.h, which the client program must include.</span></span> <span data-ttu-id="65c69-119">O programa cliente também precisará incluir os arquivos RPC. h e RPCNDR. h.</span><span class="sxs-lookup"><span data-stu-id="65c69-119">The client program will also need to include the files RPC.h and RPCNDR.h.</span></span>

<span data-ttu-id="65c69-120">O próprio programa cliente é criado no arquivo MyClnt. c.</span><span class="sxs-lookup"><span data-stu-id="65c69-120">The client program itself is created in the file MyClnt.c.</span></span> <span data-ttu-id="65c69-121">Em um projeto real, o programa cliente normalmente seria composto por vários arquivos de origem C.</span><span class="sxs-lookup"><span data-stu-id="65c69-121">In a real project, the client program would typically be composed of several C source files.</span></span> <span data-ttu-id="65c69-122">Todos eles precisariam ser compilados e vinculados juntos.</span><span class="sxs-lookup"><span data-stu-id="65c69-122">All of them would need to be compiled and linked together.</span></span> <span data-ttu-id="65c69-123">No entanto, este exemplo usa apenas um arquivo para simplificar.</span><span class="sxs-lookup"><span data-stu-id="65c69-123">However, this example uses only one file for simplicity.</span></span>

<span data-ttu-id="65c69-124">Os arquivos MyClnt. c e MyApp \_ c. c são compilados e vinculados junto com a biblioteca de tempo de execução RPC e quaisquer outras bibliotecas que o programa cliente precisa.</span><span class="sxs-lookup"><span data-stu-id="65c69-124">The files MyClnt.c and MyApp\_c.c are compiled and linked together with the RPC run-time library, and any other libraries that the client program needs.</span></span> <span data-ttu-id="65c69-125">O resultado é um programa cliente executável chamado MyClnt.exe.</span><span class="sxs-lookup"><span data-stu-id="65c69-125">The result is an executable client program named MyClnt.exe.</span></span>

<span data-ttu-id="65c69-126">Se você não compilar o arquivo IDL no modo de compatibilidade uso ([**/OSF**](/windows/desktop/Midl/-osf)), o programa cliente deverá fornecer uma função para alocar memória e uma função para desalocá-lo.</span><span class="sxs-lookup"><span data-stu-id="65c69-126">If you do not compile your IDL file in OSF compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your client program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="65c69-127">Para o Windows 2000 e versões posteriores, o modo recomendado é [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="65c69-127">For Windows 2000 and later versions, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="65c69-128">Para obter detalhes, consulte [como a memória é alocada e desalocada](how-memory-is-allocated-and-deallocated.md), e [ponteiros e alocação de memória](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="65c69-128">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 