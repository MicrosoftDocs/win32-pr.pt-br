---
title: Identificadores de contexto
description: Às vezes, é o caso em que aplicativos distribuídos exigem que o programa de servidor mantenha informações de status entre chamadas de cliente.
ms.assetid: 91732a75-0a3a-44bd-9db9-c11be6fd2d70
keywords:
- Chamada de procedimento remoto RPC, descrito, identificadores de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8ff36ff8f1a36843293060e091b7eecee0d8666
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105775655"
---
# <a name="context-handles"></a><span data-ttu-id="a51bf-104">Identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="a51bf-104">Context Handles</span></span>

<span data-ttu-id="a51bf-105">Às vezes, é o caso em que aplicativos distribuídos exigem que o programa de servidor mantenha informações de status entre chamadas de cliente.</span><span class="sxs-lookup"><span data-stu-id="a51bf-105">It is sometimes the case that distributed applications require the server program to maintain status information between client calls.</span></span> <span data-ttu-id="a51bf-106">Os programas de servidor que são atendidos mais de um cliente por vez devem manter as informações de estado de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="a51bf-106">Server programs that service more than one client at a time must keep the state information for each client.</span></span> <span data-ttu-id="a51bf-107">Como o cliente e o servidor usam espaços de endereço diferentes em computadores diferentes, e eles não necessariamente confiam uns nos outros, as abordagens comuns ao compartilhamento de dados geralmente não funcionam.</span><span class="sxs-lookup"><span data-stu-id="a51bf-107">Because the client and the server use different address spaces on different computers, and they do not necessarily trust each other, common approaches to data sharing often do not work.</span></span> <span data-ttu-id="a51bf-108">Por exemplo, o cliente e o servidor não podem manter informações de status em suas sessões remotas em variáveis globais porque elas não compartilham o mesmo espaço de endereço global.</span><span class="sxs-lookup"><span data-stu-id="a51bf-108">For instance, the client and server are unable to maintain status information on their remote session in global variables because they do not share the same global address space.</span></span> <span data-ttu-id="a51bf-109">É difícil manter as informações em um arquivo compartilhado porque elas são executadas em computadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="a51bf-109">It is difficult to keep the information in a shared file because they run on different computers.</span></span> <span data-ttu-id="a51bf-110">Uma abordagem simplista pode ser enviar todo o estado para o cliente e fazer com que o cliente o retorne na próxima chamada, mas essa abordagem tem falhas: o servidor não confia necessariamente no cliente para retornar o estado certo e o estado pode estar implicitamente ligado a algum outro Estado no servidor, como identificadores de arquivo ou soquetes abertos.</span><span class="sxs-lookup"><span data-stu-id="a51bf-110">A simplistic approach may be to ship all state to the client and have the client return it on the next call, but this approach has flaws: the server does not necessarily trust the client to return the right state, and the state may be implicitly tied to some other state on the server, such as file handles or opened sockets.</span></span>

<span data-ttu-id="a51bf-111">O Microsoft RPC fornece um mecanismo poderoso e seguro chamado identificadores de contexto para manter o estado associado a um determinado cliente em um servidor.</span><span class="sxs-lookup"><span data-stu-id="a51bf-111">Microsoft RPC provides a powerful and secure mechanism called context handles for keeping state associated with a given client on a server.</span></span> <span data-ttu-id="a51bf-112">As informações de estado são chamadas de contexto do servidor.</span><span class="sxs-lookup"><span data-stu-id="a51bf-112">The state information is called the server's context.</span></span> <span data-ttu-id="a51bf-113">Os clientes podem obter um identificador de contexto para identificar o contexto do servidor para suas sessões RPC individuais.</span><span class="sxs-lookup"><span data-stu-id="a51bf-113">Clients can obtain a context handle to identify the server's context for their individual RPC sessions.</span></span>

<span data-ttu-id="a51bf-114">Por exemplo, cada cliente em um aplicativo distribuído pode fazer com que o programa do servidor crie e atualize um arquivo de dados para a sessão RPC.</span><span class="sxs-lookup"><span data-stu-id="a51bf-114">As an example, each client in a distributed application can have the server program create and update a data file for their RPC session.</span></span> <span data-ttu-id="a51bf-115">O servidor pode usar seu identificador de arquivo para cada arquivo de dados do cliente como o identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="a51bf-115">The server can use its file handle for each client's data file as the context handle.</span></span> <span data-ttu-id="a51bf-116">Cada vez que um cliente solicita operações no arquivo de dados que o servidor cria para ele, o cliente passa o identificador de contexto para o servidor.</span><span class="sxs-lookup"><span data-stu-id="a51bf-116">Each time a client requests operations on the data file that the server creates for it, the client passes the context handle to the server.</span></span> <span data-ttu-id="a51bf-117">O cliente não obtém realmente o próprio identificador do arquivo; Ele obtém um token opaco que o tempo de execução do RPC do servidor pode associar exclusivamente ao identificador do arquivo.</span><span class="sxs-lookup"><span data-stu-id="a51bf-117">The client does not actually get the file handle itself; it gets an opaque token that the server RPC run time can uniquely associate with the file handle.</span></span> <span data-ttu-id="a51bf-118">Como o identificador de contexto é realmente um identificador de arquivo, a alça de contexto só faz sentido no espaço de endereço do servidor.</span><span class="sxs-lookup"><span data-stu-id="a51bf-118">Since the context handle is really a file handle, the context handle only makes sense in the server's address space.</span></span> <span data-ttu-id="a51bf-119">No entanto, o programa cliente pode usar o identificador de contexto para informar ao servidor em qual arquivo executar atualizações.</span><span class="sxs-lookup"><span data-stu-id="a51bf-119">However, the client program can use the context handle to tell the server on which file to perform updates.</span></span>

<span data-ttu-id="a51bf-120">Outros dados também podem ser identificadores de contexto.</span><span class="sxs-lookup"><span data-stu-id="a51bf-120">Other data can also be context handles.</span></span> <span data-ttu-id="a51bf-121">Por exemplo, um cliente e um servidor podem usar um número de registro de um registro de banco de dados como um identificador de arquivo.</span><span class="sxs-lookup"><span data-stu-id="a51bf-121">For instance, a client and server can use a record number of a database record as a file handle.</span></span> <span data-ttu-id="a51bf-122">Se o cliente precisar executar várias atualizações em um registro específico, ele poderá obter o número do registro como um identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="a51bf-122">If the client needed to perform a number of updates on a particular record, it could obtain the record number as a context handle.</span></span> <span data-ttu-id="a51bf-123">Ele passaria o número do registro para o servidor sempre que ele invocasse um procedimento remoto para atualizar o registro do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a51bf-123">It would pass the record number to the server each time it invoked a remote procedure to update the database record.</span></span>

<span data-ttu-id="a51bf-124">Geralmente, um identificador de contexto aponta para um bloco de memória no servidor onde o servidor mantém várias informações de gerenciamento.</span><span class="sxs-lookup"><span data-stu-id="a51bf-124">Most often a context handle points to a block of memory on the server where the server keeps various management information.</span></span>

<span data-ttu-id="a51bf-125">Esta seção apresenta informações sobre como definir e usar identificadores de contexto.</span><span class="sxs-lookup"><span data-stu-id="a51bf-125">This section presents information on defining and using context handles.</span></span> <span data-ttu-id="a51bf-126">A discussão é apresentada nos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="a51bf-126">The discussion is presented in the following topics:</span></span>

-   [<span data-ttu-id="a51bf-127">Desenvolvimento de interface usando identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="a51bf-127">Interface Development Using Context Handles</span></span>](interface-development-using-context-handles.md)
-   [<span data-ttu-id="a51bf-128">Desenvolvimento de servidor usando identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="a51bf-128">Server Development Using Context Handles</span></span>](server-development-using-context-handles.md)
-   [<span data-ttu-id="a51bf-129">Desenvolvimento de cliente usando identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="a51bf-129">Client Development Using Context Handles</span></span>](client-development-using-context-handles.md)
-   [<span data-ttu-id="a51bf-130">Rotina de execução de contexto de servidor</span><span class="sxs-lookup"><span data-stu-id="a51bf-130">Server Context Run-down Routine</span></span>](server-context-run-down-routine.md)
-   [<span data-ttu-id="a51bf-131">Redefinição de contexto de cliente</span><span class="sxs-lookup"><span data-stu-id="a51bf-131">Client Context Reset</span></span>](client-context-reset.md)
-   [<span data-ttu-id="a51bf-132">Clientes multithread e identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="a51bf-132">Multithreaded Clients and Context Handles</span></span>](multithreaded-clients-and-context-handles.md)

 

 




