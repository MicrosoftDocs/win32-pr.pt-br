---
title: Definindo pipes em arquivos IDL
description: Quando um pipe é definido em um arquivo IDL, o compilador MIDL gera uma estrutura de controle de pipe cujos membros são ponteiros para procedimentos de push, pull e alocação, bem como uma variável de estado que coordena esses procedimentos.
ms.assetid: f6c282e4-3056-48c4-bd12-dfcae6d238d7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bbd237690f45fd6ca73d62f54a5dccf0409f4424e1e96407c116b39ef5d882a7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/11/2021
ms.locfileid: "120022066"
---
# <a name="defining-pipes-in-idl-files"></a>Definindo pipes em arquivos IDL

Quando um pipe é definido em um arquivo IDL, o compilador MIDL gera uma estrutura de controle de pipe cujos membros são ponteiros para procedimentos de push, pull e alocação, bem como uma variável de estado que coordena esses procedimentos. O aplicativo cliente Inicializa os campos na estrutura de controle de pipe, mantém sua variável de estado e gerencia a transferência de dados com suas próprias funções Push, pull e Alloc. O código stub do cliente chama essas funções de aplicativo em loops durante a transferência de dados. Para um pipe de entrada, o stub do cliente realiza marshaling dos dados de transferência e os transmite para o stub do servidor. Para um pipe de saída, o stub do cliente desempacota os dados em um buffer e passa um ponteiro para esse buffer de volta para o aplicativo cliente.

O código stub do servidor inicializa os campos da estrutura de controle de pipe para uma variável de estado, bem como ponteiros para as rotinas de push e pull. O stub do servidor mantém o estado e gerencia seu armazenamento privado para os dados de transferência. O aplicativo de servidor chama as rotinas de pull e Push em loops durante a chamada de procedimento remoto, pois recebe e desempacota dados do stub do cliente, ou realiza marshaling e transmite dados para o stub do cliente.

O arquivo IDL de exemplo a seguir define um pipe longo de tipo de pipe \_ , cujo tamanho de elemento é definido como **longo**. Ele também declara protótipos de função para o procedimento remoto chamar inpipe e outpipe, para enviar e receber dados, respectivamente. Quando o compilador MIDL processa o arquivo IDL, ele gera o arquivo de cabeçalho mostrado no exemplo.

## <a name="example"></a>Exemplo

``` syntax
// File: pipedemo.idl
typedef pipe long LONG_PIPE;
void InPipe( [in] LONG_PIPE pipe_data );
void OutPipe( [out] LONG_PIPE *pipe_data ); 
//end pipedemo.idl
 
// File: pipedemo.h (fragment)
// Generated by the MIDL compiler from pipedemo.idl
typedef struct pipe_LONG_PIPE
{
    void (__RPC_FAR * pull) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long esize,
        unsigned long __RPC_FAR * ecount );
    void (__RPC_FAR * push) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long ecount );
    void (__RPC_FAR * alloc) (
        char __RPC_FAR * state,
        unsigned long bsize,
        long __RPC_FAR * __RPC_FAR * buf,
        unsigned long __RPC_FAR * bcount );
    char __RPC_FAR * state;
} LONG_PIPE;
 
void InPipe( 
    /* [in] */ LONG_PIPE pipe_data);
void OutPipe( 
    /* [out] */ LONG_PIPE __RPC_FAR *pipe_data);
//end pipedemo.h
```

## <a name="related-topics"></a>Tópicos relacionados

<dl> <dt>

[conexão](/windows/desktop/Midl/pipe)
</dt> <dt>

[**/Oi**](/windows/desktop/Midl/-oi)
</dt> </dl>

 

 