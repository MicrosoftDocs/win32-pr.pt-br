---
title: Usando HTTP como um transporte RPC
description: RPC via HTTP permite que os programas cliente usem a Internet para executar procedimentos fornecidos por programas de servidor em redes distantes.
ms.assetid: b5062d70-7625-4a9f-a8c1-025ef8342fcb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5860757a6c5df9937e77fc078df2526affb967fa
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104453627"
---
# <a name="using-http-as-an-rpc-transport"></a><span data-ttu-id="c1c2c-103">Usando HTTP como um transporte RPC</span><span class="sxs-lookup"><span data-stu-id="c1c2c-103">Using HTTP as an RPC Transport</span></span>

<span data-ttu-id="c1c2c-104">RPC via HTTP permite que os programas cliente usem a Internet para executar procedimentos fornecidos por programas de servidor em redes distantes.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-104">RPC-over-HTTP enables client programs to use the Internet to execute procedures provided by server programs on distant networks.</span></span> <span data-ttu-id="c1c2c-105">O RPC sobre HTTP encapsula suas chamadas por meio de uma porta HTTP estabelecida.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-105">RPC over HTTP tunnels its calls through an established HTTP port.</span></span> <span data-ttu-id="c1c2c-106">Portanto, suas chamadas podem atravessar firewalls de rede nas redes de cliente e servidor.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-106">Thus, its calls can cross network firewalls on both the client and server networks.</span></span>

<span data-ttu-id="c1c2c-107">O RPC sobre HTTP roteia suas chamadas para o proxy RPC localizado na rede do servidor RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-107">RPC over HTTP routes its calls to the RPC proxy located on the RPC server's network.</span></span> <span data-ttu-id="c1c2c-108">O proxy RPC estabelece e mantém uma conexão com o servidor RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-108">The RPC Proxy establishes and maintains a connection to the RPC server.</span></span> <span data-ttu-id="c1c2c-109">Ele serve como um proxy, expedindo chamadas de procedimento remoto para o servidor RPC e enviando as respostas do servidor de volta pela Internet para o aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-109">It serves as a proxy, dispatching remote procedure calls to the RPC server and sending the server's replies back across the Internet to the client application.</span></span> <span data-ttu-id="c1c2c-110">Esse processo é ilustrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-110">This process is illustrated in the following diagram.</span></span>

![interação entre um servidor RPC e o Internet Information Server para RPC http](images/httprpc1.png)

<span data-ttu-id="c1c2c-112">O diagrama mostra um firewall na rede do aplicativo cliente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-112">The diagram shows a firewall on the client application's network.</span></span> <span data-ttu-id="c1c2c-113">Isso não é necessário para que o RPC sobre HTTP opere.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-113">This is not required for RPC over HTTP to operate.</span></span> <span data-ttu-id="c1c2c-114">No entanto, se a rede do cliente tiver um firewall, ele também precisará de um programa de servidor proxy, como o Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-114">However, if the client network does have a firewall, it will also need a proxy server program such as Microsoft Proxy Server.</span></span>

<span data-ttu-id="c1c2c-115">Quando o programa cliente emite uma chamada de procedimento remoto usando HTTP como o transporte, a biblioteca de tempo de execução RPC no cliente entra em contato com o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-115">When the client program issues a remote procedure call using HTTP as the transport, the RPC run-time library on the client contacts the RPC proxy.</span></span> <span data-ttu-id="c1c2c-116">Dependendo se o cliente RPC foi solicitado a usar a porta HTTP ou HTTPS (HTTP com SSL) 80 ou a porta 443 é usada, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-116">Depending on whether the RPC client was asked to use HTTP or HTTPS (HTTP with SSL) port 80 or port 443 is used, respectively.</span></span> <span data-ttu-id="c1c2c-117">O proxy RPC entra em contato com o programa do servidor RPC e estabelece uma conexão TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-117">The RPC proxy contacts the RPC server program and establishes a TCP/IP connection.</span></span> <span data-ttu-id="c1c2c-118">O cliente e o proxy RPC mantêm sua conexão HTTP ou HTTPS pela Internet.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-118">The client and the RPC proxy maintain their HTTP or HTTPS connection across the Internet.</span></span> <span data-ttu-id="c1c2c-119">A conexão HTTP ou HTTPS do cliente para o proxy RPC pode passar por um firewall (sujeito às permissões de acesso apropriadas) se houver um.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-119">The client's HTTP or HTTPS connection to the RPC proxy can pass through a firewall (subject to appropriate access permissions) if one is present.</span></span> <span data-ttu-id="c1c2c-120">Em seguida, o servidor pode executar a chamada de procedimento remoto e usar a conexão por meio do proxy RPC para responder ao cliente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-120">The server can then execute the remote procedure call and use the connection through the RPC proxy to reply to the client.</span></span> <span data-ttu-id="c1c2c-121">O proxy RPC é uma extensão ISAPI em execução no contexto do IIS.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-121">The RPC proxy is an ISAPI extension running in the context of IIS.</span></span>

<span data-ttu-id="c1c2c-122">Se o cliente ou o servidor se desconectar por qualquer motivo, o proxy RPC irá detectá-lo e encerrar a sessão RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-122">If either the client or the server disconnects for any reason, the RPC proxy will detect it and end the RPC session.</span></span> <span data-ttu-id="c1c2c-123">Desde que a sessão continue, o proxy RPC manterá suas conexões com o cliente e o servidor.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-123">As long as the session continues, the RPC proxy will maintain its connections to the client and the server.</span></span> <span data-ttu-id="c1c2c-124">Ele encaminhará chamadas de procedimento remoto do cliente para o servidor e enviará respostas do servidor para o cliente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-124">It will forward remote procedure calls from the client to the server, and send replies from the server to the client.</span></span>

<span data-ttu-id="c1c2c-125">O programa cliente RPC pode encapsular suas chamadas RPC pela Internet criando uma associação de cadeia de caracteres no formato:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-125">The RPC client program can tunnel its RPC calls through the Internet by creating a string binding of the form:</span></span>

``` syntax
[object_uuid@]ncacn_http:rpc_server[endpoint,HttpProxy=proxy_server:http_port,RpcProxy=rpc_proxy:rpc_port,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="c1c2c-126">Em que:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-126">Where:</span></span>

-   <span data-ttu-id="c1c2c-127">*o \_ UUID do objeto* especifica um UUID do objeto RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-127">*object\_uuid* specifies an RPC object UUID.</span></span> <span data-ttu-id="c1c2c-128">Para obter mais informações, consulte [gerando UUIDs de interface](generating-interface-uuids.md) e [UUID de cadeia de caracteres](string-uuid.md).</span><span class="sxs-lookup"><span data-stu-id="c1c2c-128">For more information, see [Generating Interface UUIDs](generating-interface-uuids.md) and [String UUID](string-uuid.md).</span></span>
-   <span data-ttu-id="c1c2c-129">**ncacn \_ http** seleciona a especificação de sequência de protocolo para RPC sobre http.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-129">**ncacn\_http** selects the protocol sequence specification for RPC over HTTP.</span></span> <span data-ttu-id="c1c2c-130">Para obter mais informações, consulte [constantes de sequência de protocolo](protocol-sequence-constants.md) e Associação de cadeia de [caracteres](string-binding.md).</span><span class="sxs-lookup"><span data-stu-id="c1c2c-130">For more information, see [Protocol Sequence Constants](protocol-sequence-constants.md) and [String Binding](string-binding.md).</span></span>
-   <span data-ttu-id="c1c2c-131">*\_ servidor RPC* é o endereço de rede do computador que está executando o processo do servidor RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-131">*rpc\_server* is the network address of the computer that is executing the RPC server process.</span></span> <span data-ttu-id="c1c2c-132">O endereço do servidor deve ser especificado em um formulário visível e compreensível pelo computador do proxy RPC, não pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-132">The server address must be specified in a form visible and understandable by the RPC proxy computer, not by the client.</span></span> <span data-ttu-id="c1c2c-133">Como o cliente não se conecta diretamente ao servidor, ele não precisa ser capaz de resolver o nome do servidor ou estabelecer uma conexão com ele.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-133">Since the client does not connect directly to the server, it does not need to be able to resolve the name of the server, or establish a connection to it.</span></span> <span data-ttu-id="c1c2c-134">O proxy RPC estabelecerá a conexão em nome do cliente e, portanto, o *\_ servidor RPC* deverá ser um nome reconhecível pelo proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-134">The RPC proxy will establish the connection on the client's behalf, and therefore, *rpc\_server* must be a name recognizable by the RPC proxy.</span></span>
-   <span data-ttu-id="c1c2c-135">*ponto de extremidade* especifica a porta TCP/IP que o processo do servidor RPC escuta para chamadas de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-135">*endpoint* specifies the TCP/IP port that the RPC server process listens to for remote procedure calls.</span></span> <span data-ttu-id="c1c2c-136">Para obter mais informações, consulte [localizando pontos de extremidade](finding-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="c1c2c-136">For more information, see [Finding Endpoints](finding-endpoints.md).</span></span>
-   <span data-ttu-id="c1c2c-137">O **HttpProxy** opcionalmente especifica um servidor proxy http na rede do cliente RPC, como o Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-137">**HttpProxy** optionally specifies an HTTP proxy server on the RPC client's network, such as Microsoft Proxy Server.</span></span> <span data-ttu-id="c1c2c-138">Se um servidor proxy for selecionado, nenhum número de porta será especificado, o stub de RPC usará a porta 80 por padrão se o SSL não for solicitado e a porta 443 se o SSL for especificado.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-138">If a proxy server is selected, no port number is specified, the RPC stub uses port 80 by default if SSL is not requested, and port 443 if SSL is specified.</span></span>
-   <span data-ttu-id="c1c2c-139">O **RpcProxy** especifica o endereço e o número da porta do computador IIS que atua como um proxy para o servidor RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-139">**RpcProxy** specifies the address and port number of the IIS computer that acts as a proxy to the RPC server.</span></span> <span data-ttu-id="c1c2c-140">Você só precisará especificar isso se o processo do servidor RPC residir em um computador diferente do proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-140">You only need to specify this if the RPC server process resides on a different computer than the RPC proxy.</span></span> <span data-ttu-id="c1c2c-141">Se você não especificar um número de porta, o stub de cliente RPC usará a porta 80 se o SSL não for especificado e usará a porta 443 se o SSL (HTTPS) for especificado.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-141">If you do not specify a port number, the RPC client stub by default uses port 80 if SSL is not specified, and uses port 443 if SSL (HTTPS) is specified.</span></span>
-   <span data-ttu-id="c1c2c-142">O **HttpConnectionOption** opcionalmente permite direcionar o comportamento do RPC ao fazer conexões http.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-142">**HttpConnectionOption** optionally allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="c1c2c-143">O valor **UseHttpProxy** INSTRUI o RPC a rotear seu tráfego por meio do proxy http em todos os momentos, incluindo quando o cliente tem suas opções de Internet definidas no Internet Explorer como "ignorar servidor proxy para endereços locais".</span><span class="sxs-lookup"><span data-stu-id="c1c2c-143">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span>

    <span data-ttu-id="c1c2c-144">Essa opção tem suporte no Windows 7, Windows Server 2008 R2, Windows 8.1 e Windows Server 2012 R2 com KB2916915 instalado.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-144">This option is supported on Windows 7, Windows Server 2008 R2, Windows 8.1, and Windows Server 2012 R2 with KB2916915 installed.</span></span> <span data-ttu-id="c1c2c-145">Não há suporte para essa opção no Windows 8 e no Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-145">This option is not supported on Windows 8 and Windows Server 2012.</span></span> <span data-ttu-id="c1c2c-146">Os aplicativos podem determinar se essa opção é suportada pelo tempo de execução RPC, verificando o valor do registro **ConnectionOptionsFlag** localizado na seguinte chave do registro:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-146">Applications can determine if this option is supported by the RPC runtime by checking the **ConnectionOptionsFlag** registry value located under the following registry key:</span></span>

    <span data-ttu-id="c1c2c-147">**HKEY \_ local \_ Machine \\ software \\ Microsoft \\ RPC**</span><span class="sxs-lookup"><span data-stu-id="c1c2c-147">**HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Rpc**</span></span>

    <span data-ttu-id="c1c2c-148">Se o bit 0 (LSB) desse valor de registro for definido, essa opção específica terá suporte; caso contrário, essa opção não é suportada pelo tempo de execução RPC no sistema.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-148">If the bit 0 (LSB) of this registry value is set, then this specific option is supported; otherwise, this option is not supported by the RPC runtime in the system.</span></span>

<span data-ttu-id="c1c2c-149">Para obter mais informações sobre como criar associações de cadeia de caracteres, consulte [Binding e Handles](binding-and-handles.md).</span><span class="sxs-lookup"><span data-stu-id="c1c2c-149">For more information on creating string bindings, see [Binding and Handles](binding-and-handles.md).</span></span>

<span data-ttu-id="c1c2c-150">O programa do servidor RPC pode aceitar chamadas RPC em túnel ouvindo na sequência de \_ protocolo http ncacn.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-150">The RPC server program can accept tunneled RPC calls by listening on the ncacn\_http protocol sequence.</span></span>

<span data-ttu-id="c1c2c-151">A Microsoft tem duas implementações principais do RPC sobre HTTP: versão 1 e versão 2.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-151">Microsoft has two major implementations of RPC over HTTP: Version 1 and Version 2.</span></span>

<span data-ttu-id="c1c2c-152">A versão 1 (chamada RPC sobre HTTP v1) tem suporte por meio do Windows XP.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-152">Version 1 (called RPC over HTTP v1) is supported through Windows XP.</span></span> <span data-ttu-id="c1c2c-153">A versão 1 do proxy RPC tem suporte por meio do Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-153">Version 1 of the RPC proxy is supported through Windows 2000.</span></span>

<span data-ttu-id="c1c2c-154">A versão 2 (chamada RPC sobre HTTP v2) é a versão atual.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-154">Version 2 (called RPC over HTTP v2) is the current version.</span></span>

<span data-ttu-id="c1c2c-155">As duas versões têm diferentes recursos e interoperabilidade limitada.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-155">The two versions have different capabilities and limited interoperability.</span></span> <span data-ttu-id="c1c2c-156">Um resumo das diferenças é fornecido aqui.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-156">A summary of the differences is provided here.</span></span> <span data-ttu-id="c1c2c-157">Para considerações sobre interoperabilidade, consulte [requisitos do sistema e interoperabilidade para RPC sobre http](system-requirements-and-interoperability-for-rpc-over-http.md).</span><span class="sxs-lookup"><span data-stu-id="c1c2c-157">For interoperability considerations, see [System Requirements and Interoperability for RPC over HTTP](system-requirements-and-interoperability-for-rpc-over-http.md).</span></span>

-   <span data-ttu-id="c1c2c-158">RPC sobre HTTP v1 requer que o túnel SSL seja habilitado em todos os proxies/firewalls HTTP entre o cliente RPC sobre HTTP e o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-158">RPC over HTTP v1 requires SSL Tunneling to be enabled on all HTTP proxies/firewalls between the RPC over HTTP client and the RPC proxy.</span></span> <span data-ttu-id="c1c2c-159">O RPC sobre HTTP v1 tenta criar um túnel SSL pela porta 80, embora os dados enviados por ele não sejam criptografados por SSL.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-159">RPC over HTTP v1 attempts to build an SSL Tunnel over port 80 even though the data it sends is not actually SSL-encrypted.</span></span> <span data-ttu-id="c1c2c-160">Os proxies e os firewalls geralmente rejeitam essas solicitações, a menos que sejam explicitamente configuradas para permiti-las.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-160">Proxies and firewalls usually reject such requests unless explicitly configured to allow them.</span></span> <span data-ttu-id="c1c2c-161">RPC sobre HTTP v2 não tem tal requisito.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-161">RPC over HTTP v2 has no such requirement.</span></span>
-   <span data-ttu-id="c1c2c-162">RPC sobre HTTP v1 não pode estabelecer uma sessão SSL para o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-162">RPC over HTTP v1 cannot establish an SSL session to the RPC proxy.</span></span> <span data-ttu-id="c1c2c-163">O RPC sobre HTTP V2 pode enviar todo o tráfego RPC sobre HTTP dentro de uma sessão SSL; Por padrão v2 exige que os dados sejam enviados em uma sessão SSL.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-163">The RPC over HTTP v2 can send all RPC over HTTP traffic within an SSL session; by default v2 requires the data be sent within an SSL session.</span></span>
-   <span data-ttu-id="c1c2c-164">RPC sobre HTTP v1 não pode autenticar no proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-164">RPC over HTTP v1 cannot authenticate to the RPC proxy.</span></span> <span data-ttu-id="c1c2c-165">RPC sobre HTTP V2 pode autenticar; Por padrão, v2 requer autenticação para o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-165">RPC over HTTP v2 can authenticate; by default v2 requires authentication to the RPC proxy.</span></span>
-   <span data-ttu-id="c1c2c-166">O proxy RPC v1 não funciona corretamente quando o computador IIS no qual ele está instalado faz parte de um web farm.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-166">RPC proxy v1 does not operate correctly when the IIS machine on which it is installed is part of a web farm.</span></span> <span data-ttu-id="c1c2c-167">O proxy RPC v2 funciona corretamente quando o computador IIS no qual ele está instalado faz parte de um web farm.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-167">RPC proxy v2 operates properly when the IIS machine on which it is installed is part of a web farm.</span></span>

> [!Note]  
> <span data-ttu-id="c1c2c-168">Se o Microsoft Internet Explorer estiver instalado no computador do programa cliente e o cliente não especificar um **HttpProxy** em sua associação de cadeia de caracteres, o stub do cliente RPC pesquisará o registro no computador cliente em busca de uma entrada **HttpProxy** .</span><span class="sxs-lookup"><span data-stu-id="c1c2c-168">If Microsoft Internet Explorer is installed on the client program's computer and your client does not specify an **HttpProxy** in its string binding, the RPC client stub will search the registry on the client computer for an **HttpProxy** entry.</span></span> <span data-ttu-id="c1c2c-169">Se encontrar um, ele usará o proxy especificado na entrada do registro.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-169">If it finds one, it will use the proxy specified in the registry entry.</span></span>

 

<span data-ttu-id="c1c2c-170">Suponha, por exemplo, que o programa cliente precise se conectar pela Internet a um servidor RPC em um computador chamado Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-170">Suppose, for instance, your client program needs to connect across the Internet to an RPC server on a computer called Server7.microsoft.com.</span></span> <span data-ttu-id="c1c2c-171">Além disso, suponha que o proxy RPC seja executado em Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-171">Further, suppose that the RPC proxy runs on Major7.microsoft.com.</span></span> <span data-ttu-id="c1c2c-172">O programa do servidor RPC escuta a porta 2225.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-172">The RPC server program listens to port 2225.</span></span> <span data-ttu-id="c1c2c-173">O cliente usaria a associação de cadeia de caracteres:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-173">Your client would use the string binding:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="c1c2c-174">Se o proxy RPC puder resolver o nome do servidor como Server7, sem a necessidade de um nome de domínio totalmente qualificado, você também poderá especificar:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-174">If the RPC proxy can resolve the server name as Server7, without requiring a fully qualified domain name, you can also specify:</span></span>

``` syntax
ncacn_http:Server7 [2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="c1c2c-175">Se a rede do cliente usar um firewall e um servidor proxy da Internet chamado MyProxy e o Internet Explorer no cliente não estiver configurado para usar esse proxy, você precisará modificar a associação de cadeia de caracteres do cliente para:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-175">If the client network uses a firewall and an Internet proxy server called myproxy, and Internet Explorer on the client is not configured to use that proxy, you would need to modify the client's string binding to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[,HttpProxy=myproxy:80,RpcProxy=Major7.microsoft.com:80]
```

<span data-ttu-id="c1c2c-176">Isso instrui o cliente a se conectar ao programa de servidor RPC no Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-176">This directs the client to connect to the RPC server program on Server7.microsoft.com.</span></span> <span data-ttu-id="c1c2c-177">Para fazer isso, o cliente usará primeiro a porta 80 (ou a porta 443 se o SSL for usado) para se conectar a MyProxy.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-177">To do this, the client will first use port 80 (or port 443 if SSL is used) to connect to myproxy.</span></span> <span data-ttu-id="c1c2c-178">Isso fornecerá ao programa cliente acesso à Internet.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-178">This will give the client program access to the Internet.</span></span> <span data-ttu-id="c1c2c-179">Usando a Internet, o programa cliente se conecta ao proxy RPC em Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-179">Using the Internet, the client program next connects to the RPC proxy on Major7.microsoft.com.</span></span> <span data-ttu-id="c1c2c-180">O proxy RPC estabelecerá uma conexão com o programa do servidor RPC em execução no Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-180">The RPC proxy will establish a connection to the RPC server program running on Server7.microsoft.com.</span></span>

<span data-ttu-id="c1c2c-181">Se a rede do cliente usar um firewall e se o proxy RPC não puder ser acessado diretamente, para obter uma conexão estabelecida mais rapidamente, a associação de cadeia de caracteres do cliente poderá ser modificada para:</span><span class="sxs-lookup"><span data-stu-id="c1c2c-181">If the client network uses a firewall and if the RPC proxy cannot be reached directly, in order to get a connection established faster, the client string binding can be modified to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[RpcProxy=Major7.microsoft.com:80,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="c1c2c-182">O **HttpConnectionOption** permite direcionar o comportamento do RPC ao fazer conexões http.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-182">The **HttpConnectionOption** allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="c1c2c-183">O valor **UseHttpProxy** INSTRUI o RPC a rotear seu tráfego por meio do proxy http em todos os momentos, incluindo quando o cliente tem suas opções de Internet definidas no Internet Explorer como "ignorar servidor proxy para endereços locais".</span><span class="sxs-lookup"><span data-stu-id="c1c2c-183">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span> <span data-ttu-id="c1c2c-184">Isso instrui o cliente a se conectar de modo forçado ao proxy RPC por meio do proxy http.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-184">This directs the client to forcefully connect to the RPC proxy through the Http proxy.</span></span> <span data-ttu-id="c1c2c-185">Isso acelera o tempo para estabelecer uma conexão, já que ignora qualquer atraso na pesquisa do servidor RPC diretamente antes de usar o proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-185">This speeds up the time to establish a connection since it bypasses any delay searching for the RPC server directly prior to using the HTTP proxy.</span></span>

<span data-ttu-id="c1c2c-186">Se a opção **HttpConnectionOption** for usada e o Internet Explorer no cliente não estiver configurado para usar esse proxy http, as conexões poderão falhar **com \_ Opções de \_ \_ rede \_ RPC S inválidas**.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-186">If the **HttpConnectionOption** option is used and Internet Explorer on the client is not configured to use that Http proxy, connections may fail with **RPC\_S\_INVALID\_NETWORK\_OPTIONS**.</span></span>

<span data-ttu-id="c1c2c-187">A grande maioria dos computadores hoje está configurada para navegação na Web.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-187">The vast majority of computers today are configured for Web browsing.</span></span> <span data-ttu-id="c1c2c-188">Portanto, a maioria dos clientes não precisa especificar o **HttpProxy**, pois ele será recuperado das configurações de conectividade da Internet.</span><span class="sxs-lookup"><span data-stu-id="c1c2c-188">Therefore, most clients do not need to specify the **HttpProxy**, because it will be retrieved from Internet connectivity settings.</span></span>

 

 




