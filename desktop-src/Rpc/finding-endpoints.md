---
title: Localizando pontos de extremidade
description: Os programas de servidor escutam pontos de extremidade para solicitações de cliente. A sintaxe da cadeia de caracteres do ponto de extremidade depende da sequência de protocolo usada. Por exemplo, o ponto de extremidade para TCP/IP é um número de porta e a sintaxe de ponto de extremidade para pipes nomeados é um nome de pipe válido.
ms.assetid: 330bbe9f-b7e9-4a5b-86d8-824edec960d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb0a97df3408a4d3c24dff9de28553f9e4b2210d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104294137"
---
# <a name="finding-endpoints"></a><span data-ttu-id="e2b83-105">Localizando pontos de extremidade</span><span class="sxs-lookup"><span data-stu-id="e2b83-105">Finding Endpoints</span></span>

<span data-ttu-id="e2b83-106">Os programas de servidor escutam pontos de extremidade para solicitações de cliente.</span><span class="sxs-lookup"><span data-stu-id="e2b83-106">Server programs listen to endpoints for client requests.</span></span> <span data-ttu-id="e2b83-107">A sintaxe da cadeia de caracteres do ponto de extremidade depende da sequência de protocolo usada.</span><span class="sxs-lookup"><span data-stu-id="e2b83-107">The syntax of the endpoint string depends on the protocol sequence you use.</span></span> <span data-ttu-id="e2b83-108">Por exemplo, o ponto de extremidade para TCP/IP é um número de porta e a sintaxe de ponto de extremidade para pipes nomeados é um nome de pipe válido.</span><span class="sxs-lookup"><span data-stu-id="e2b83-108">For example, the endpoint for TCP/IP is a port number, and the endpoint syntax for named pipes is a valid pipe name.</span></span>

<span data-ttu-id="e2b83-109">Há dois tipos de pontos de extremidade: bem conhecidos e dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="e2b83-109">There are two types of endpoints: well-known and dynamic.</span></span> <span data-ttu-id="e2b83-110">Sua escolha de qual tipo de ponto de extremidade seu programa usa determina se o aplicativo distribuído ou a biblioteca de tempo de execução especifica o ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-110">Your choice of which type of endpoint your program uses determines whether the distributed application or the run-time library specifies the endpoint.</span></span>

<span data-ttu-id="e2b83-111">Esta seção aborda os pontos de extremidade e apresenta informações sobre como encontrá-los.</span><span class="sxs-lookup"><span data-stu-id="e2b83-111">This section discusses endpoints and presents information on how to find them.</span></span> <span data-ttu-id="e2b83-112">Ele é organizado nos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="e2b83-112">It is organized into the following topics:</span></span>

-   [<span data-ttu-id="e2b83-113">Usando pontos de extremidade de Well-Known</span><span class="sxs-lookup"><span data-stu-id="e2b83-113">Using Well-Known Endpoints</span></span>](#using-well-known-endpoints)
-   [<span data-ttu-id="e2b83-114">Usando pontos de extremidade dinâmicos</span><span class="sxs-lookup"><span data-stu-id="e2b83-114">Using Dynamic Endpoints</span></span>](#using-dynamic-endpoints)
-   [<span data-ttu-id="e2b83-115">Exportando pontos de extremidade Well-Known para o banco de dados de mapa</span><span class="sxs-lookup"><span data-stu-id="e2b83-115">Exporting Well-Known Endpoints Into the Endpoint Map Database</span></span>](#exporting-well-known-endpoints-into-the-endpoint-map-database)

> [!Note]  
> <span data-ttu-id="e2b83-116">Os *pontos de extremidade estáticos* e os *pontos de extremidade bem conhecidos* são equivalentes e usados de maneira intercambiável.</span><span class="sxs-lookup"><span data-stu-id="e2b83-116">The terms *static endpoints* and *well-known endpoints* are equivalent, and used interchangeably.</span></span>

 

<span data-ttu-id="e2b83-117">É possível que seu aplicativo cliente use o mapa do ponto de extremidade para determinar se um programa de servidor está em execução no momento.</span><span class="sxs-lookup"><span data-stu-id="e2b83-117">It is possible for your client application to use the endpoint map to determine whether or not a server program is currently running.</span></span> <span data-ttu-id="e2b83-118">O cliente pode chamar [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin)e [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) para ver se o servidor registrou a interface específica necessária no mapa do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-118">Your client can call [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) to see if the server has registered the particular interface it requires in the endpoint map.</span></span>

## <a name="using-well-known-endpoints"></a><span data-ttu-id="e2b83-119">Usando pontos de extremidade conhecidos</span><span class="sxs-lookup"><span data-stu-id="e2b83-119">Using Well-known Endpoints</span></span>

<span data-ttu-id="e2b83-120">Pontos de extremidade conhecidos são pontos de extremidade previamente atribuídos que o programa do servidor usa sempre que é executado.</span><span class="sxs-lookup"><span data-stu-id="e2b83-120">Well-known endpoints are pre-assigned endpoints that the server program uses every time it runs.</span></span> <span data-ttu-id="e2b83-121">Como o servidor sempre ouve esse ponto de extremidade específico, o cliente sempre tenta se conectar a ele.</span><span class="sxs-lookup"><span data-stu-id="e2b83-121">Because the server always listens to that particular endpoint, the client always attempts to connect to it.</span></span> <span data-ttu-id="e2b83-122">Os pontos de extremidade bem conhecidos são geralmente atribuídos pela autoridade responsável pelo protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="e2b83-122">Well-known endpoints are usually assigned by the authority responsible for the transport protocol.</span></span> <span data-ttu-id="e2b83-123">Como os computadores host do servidor têm um número finito de pontos de extremidade disponíveis, os desenvolvedores de aplicativos são fortemente desencorajados de usar pontos de extremidade bem conhecidos.</span><span class="sxs-lookup"><span data-stu-id="e2b83-123">Because server host computers have a finite number of available endpoints, application developers are strongly discouraged from using well-known endpoints.</span></span> <span data-ttu-id="e2b83-124">Outra vantagem dos pontos de extremidade dinâmicos é que eles simplificam o gerenciamento e a manutenção de longo prazo do sistema.</span><span class="sxs-lookup"><span data-stu-id="e2b83-124">Another advantage of dynamic endpoints is that they simplify long-term management and maintenance of the system.</span></span>

<span data-ttu-id="e2b83-125">Um aplicativo distribuído pode especificar um ponto de extremidade bem conhecido em uma cadeia de caracteres e passar essa cadeia de caracteres como um parâmetro para a função [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span><span class="sxs-lookup"><span data-stu-id="e2b83-125">A distributed application can specify a well-known endpoint in a string and pass that string as a parameter to the function [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span></span> <span data-ttu-id="e2b83-126">Como alternativa, a cadeia de caracteres do ponto de extremidade pode aparecer no cabeçalho da interface do arquivo IDL como parte do atributo da interface do \[ [ponto de extremidade](/windows/desktop/Midl/endpoint) \] .</span><span class="sxs-lookup"><span data-stu-id="e2b83-126">Alternatively, the endpoint string can appear in the IDL file interface header as part of the \[ [endpoint](/windows/desktop/Midl/endpoint)\] interface attribute.</span></span>

<span data-ttu-id="e2b83-127">Você pode usar duas abordagens para implementar o ponto de extremidade bem conhecido:</span><span class="sxs-lookup"><span data-stu-id="e2b83-127">You can use two approaches to implement the well-known endpoint:</span></span>

-   <span data-ttu-id="e2b83-128">Especificar todas as informações em uma associação de cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="e2b83-128">Specify all information in a string binding</span></span>
-   <span data-ttu-id="e2b83-129">Armazenar o ponto de extremidade conhecido no banco de dados do serviço de nome</span><span class="sxs-lookup"><span data-stu-id="e2b83-129">Store the well-known endpoint in the name service database</span></span>

<span data-ttu-id="e2b83-130">Você pode gravar todas as informações necessárias para estabelecer uma ligação em um aplicativo distribuído ao desenvolvê-lo.</span><span class="sxs-lookup"><span data-stu-id="e2b83-130">You can write all of the information needed to establish a binding into a distributed application when you develop it.</span></span> <span data-ttu-id="e2b83-131">O cliente pode especificar o ponto de extremidade conhecido diretamente em uma cadeia de caracteres, chamar [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) para criar uma cadeia de caracteres que contém todas as informações de associação e fornecer essa cadeia de caracteres para a função [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) para obter um identificador.</span><span class="sxs-lookup"><span data-stu-id="e2b83-131">The client can specify the well-known endpoint directly in a string, call [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) to create a string that contains all the binding information, and supply this string to the function [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) to obtain a handle.</span></span> <span data-ttu-id="e2b83-132">O cliente e o servidor podem ser embutidos em código para usar um ponto de extremidade conhecido, ou escritos para que as informações do ponto de extremidade sejam provenientes da linha de comando, de um arquivo de dados, de um arquivo de configuração ou do arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="e2b83-132">The client and server can be hard-coded to use a well-known endpoint, or written so that the endpoint information comes from the command line, a data file, a configuration file, or the IDL file.</span></span>

<span data-ttu-id="e2b83-133">O aplicativo cliente também pode consultar um banco de dados de serviço de nome para obter informações conhecidas do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-133">Your client application can also query a name service database for well-known endpoint information.</span></span>

## <a name="using-dynamic-endpoints"></a><span data-ttu-id="e2b83-134">Usando pontos de extremidade dinâmicos</span><span class="sxs-lookup"><span data-stu-id="e2b83-134">Using Dynamic Endpoints</span></span>

<span data-ttu-id="e2b83-135">O número de pontos de extremidade para um servidor específico e uma sequência de protocolo específica geralmente são limitados.</span><span class="sxs-lookup"><span data-stu-id="e2b83-135">The number of endpoints for a particular server and a particular protocol sequence are usually limited.</span></span> <span data-ttu-id="e2b83-136">Por exemplo, quando você usa a sequência de protocolo [ \_ \_ TCP IP ncacn](/windows/desktop/Midl/ncacn-ip-tcp) , indicando que a comunicação de rede RPC ocorre usando TCP/IP, apenas um número limitado de portas está disponível (a maioria dos sistemas tem apenas o intervalo de 1025 a 5000 aberto).</span><span class="sxs-lookup"><span data-stu-id="e2b83-136">For example, when you use the [ncacn\_ip\_tcp](/windows/desktop/Midl/ncacn-ip-tcp) protocol sequence, indicating that RPC network communication occurs using TCP/IP, only a limited number of ports are available (most systems have only the range 1025 through 5000 opened).</span></span> <span data-ttu-id="e2b83-137">As bibliotecas de tempo de execução RPC permitem atribuir pontos de extremidade dinamicamente, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="e2b83-137">The RPC run-time libraries allow you to assign endpoints dynamically, as needed.</span></span> <span data-ttu-id="e2b83-138">Como o número de UUIDs de interface possíveis é praticamente ilimitado, usar o UUID de interface para direcionar a chamada oferece mais espaço para expansão e mais flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-138">Since the number of possible interface UUIDs is practically unlimited, using the interface UUID to direct the call offers more room for expansion and more flexibility.</span></span>

<span data-ttu-id="e2b83-139">Por padrão, as funções de biblioteca de tempo de execução RPC pesquisam informações de ponto de extremidade quando consultam um banco de dados de serviço de nome.</span><span class="sxs-lookup"><span data-stu-id="e2b83-139">By default, the RPC run-time library functions search for endpoint information when they query a name service database.</span></span> <span data-ttu-id="e2b83-140">Se o ponto de extremidade for dinâmico, o banco de dados do serviço de nome não conterá informações de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-140">If the endpoint is dynamic, the name service database will not contain endpoint information.</span></span> <span data-ttu-id="e2b83-141">No entanto, a consulta fornecerá ao seu programa cliente o nome de um servidor.</span><span class="sxs-lookup"><span data-stu-id="e2b83-141">However, the query will give your client program the name of a server.</span></span> <span data-ttu-id="e2b83-142">Em seguida, ele pode pesquisar o mapa de ponto de extremidade do servidor.</span><span class="sxs-lookup"><span data-stu-id="e2b83-142">It can then search the server's endpoint map.</span></span>

<span data-ttu-id="e2b83-143">Se o cliente precisar fazer uma chamada de procedimento remoto usando um ponto de extremidade dinâmico, o método preferencial será fazer a chamada em um identificador de associação parcialmente associado.</span><span class="sxs-lookup"><span data-stu-id="e2b83-143">If the client needs to make a remote procedure call using a dynamic endpoint, the preferred method is to make the call on a partially bound binding handle.</span></span> <span data-ttu-id="e2b83-144">O tempo de execução RPC resolve o ponto de extremidade de forma transparente.</span><span class="sxs-lookup"><span data-stu-id="e2b83-144">The RPC run time resolves the endpoint transparently.</span></span> <span data-ttu-id="e2b83-145">Esse método é superior ao uso da função [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) , pois permite mecanismos de cache avançados no tempo de execução de RPC.</span><span class="sxs-lookup"><span data-stu-id="e2b83-145">This method is superior to using the [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) function, as it allows advanced caching mechanisms in the RPC run time.</span></span>

<span data-ttu-id="e2b83-146">Se for necessário um controle mais específico sobre a seleção de ponto de extremidade, os clientes poderão pesquisar o mapa de ponto de extremidade uma entrada por vez chamando as funções [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext)e [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) .</span><span class="sxs-lookup"><span data-stu-id="e2b83-146">If more specific control over endpoint selection is required, clients can search the endpoint map one entry at a time by calling the [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) functions.</span></span>

## <a name="exporting-well-known-endpoints-into-the-endpoint-map-database"></a><span data-ttu-id="e2b83-147">Exportando pontos de extremidade conhecidos para o banco de dados do mapa do ponto final</span><span class="sxs-lookup"><span data-stu-id="e2b83-147">Exporting Well-known Endpoints into the Endpoint Map Database</span></span>

<span data-ttu-id="e2b83-148">É possível misturar as duas abordagens para localizar pontos de extremidade, especialmente quando um sistema distribuído está fazendo a transição de um modelo de ponto de extremidades conhecido para um modelo de ponto de extremidade dinâmico.</span><span class="sxs-lookup"><span data-stu-id="e2b83-148">It is possible to mix the two approaches to finding endpoints, especially when a distributed system is transitioning from a well-known endpoint model to a dynamic endpoint model.</span></span> <span data-ttu-id="e2b83-149">Nessas transições, uma versão intermediária do servidor usará um ponto de extremidade conhecido, mas também registrará o ponto de extremidade conhecido com o banco de dados do mapa do ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="e2b83-149">In such transitions, an intermediate version of the server will use a well-known endpoint, but it will also register the well-known endpoint with the endpoint map database.</span></span> <span data-ttu-id="e2b83-150">Essa abordagem permite que clientes que usam um ponto de extremidade e clientes bem conhecidos que usam um ponto de extremidade dinâmico para se conectar.</span><span class="sxs-lookup"><span data-stu-id="e2b83-150">This approach allows clients that use well known endpoint and clients that use a dynamic endpoint to connect.</span></span> <span data-ttu-id="e2b83-151">Depois que todos os servidores forem atualizados, uma nova versão do cliente poderá ser implantada que usa somente pontos de extremidade dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="e2b83-151">Once all servers are upgraded, a new client version can be deployed that uses dynamic endpoints only.</span></span> <span data-ttu-id="e2b83-152">Depois que todos os clientes são atualizados, uma versão final do servidor pode parar de usar pontos de extremidade bem conhecidos e começar a usar somente pontos de extremidade dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="e2b83-152">Once all clients are upgraded, a final server version can stop using well-known endpoints and begin using dynamic endpoints only.</span></span>

<span data-ttu-id="e2b83-153">Essa abordagem permite um caminho de transição para aplicativos que começaram com um ponto de extremidade bem conhecido, mas que desejam migrar para um ponto de extremidade dinâmico sem exigir uma atualização simultânea de todos os servidores e clientes.</span><span class="sxs-lookup"><span data-stu-id="e2b83-153">This approach allows a transition path for applications that have started with a well-known endpoint but want to migrate to a dynamic endpoint without requiring a simultaneous update of all servers and clients.</span></span>

 

 