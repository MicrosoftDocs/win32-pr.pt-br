---
title: Registrando interfaces
description: Registrando uma interface RPC (chamada de procedimento remoto).
ms.assetid: c22e3fa8-98be-461a-b06d-292d3f655ffc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ea9e851e8c9663c8f66d983d3400b1ee398a9d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104159289"
---
# <a name="registering-interfaces"></a><span data-ttu-id="76272-103">Registrando interfaces</span><span class="sxs-lookup"><span data-stu-id="76272-103">Registering Interfaces</span></span>

<span data-ttu-id="76272-104">Esta seção apresenta uma discussão detalhada sobre o processo de registro de uma interface RPC.</span><span class="sxs-lookup"><span data-stu-id="76272-104">This section presents a detailed discussion of the process of registering an RPC interface.</span></span>

<span data-ttu-id="76272-105">As informações nesta seção são apresentadas nos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="76272-105">The information in this section is presented in the following topics:</span></span>

-   [<span data-ttu-id="76272-106">Funções de registro de interface</span><span class="sxs-lookup"><span data-stu-id="76272-106">Interface Registration Functions</span></span>](#interface-registration-functions)
-   [<span data-ttu-id="76272-107">Vetores de ponto de entrada</span><span class="sxs-lookup"><span data-stu-id="76272-107">Entry-Point Vectors</span></span>](#entry-point-vectors)
-   [<span data-ttu-id="76272-108">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="76272-108">Manager EPVs</span></span>](#manager-epvs)
-   [<span data-ttu-id="76272-109">Registrando uma única implementação de uma interface</span><span class="sxs-lookup"><span data-stu-id="76272-109">Registering a Single Implementation of an Interface</span></span>](#registering-a-single-implementation-of-an-interface)
-   [<span data-ttu-id="76272-110">Registrando várias implementações de uma interface</span><span class="sxs-lookup"><span data-stu-id="76272-110">Registering Multiple Implementations of an Interface</span></span>](#registering-multiple-implementations-of-an-interface)
-   [<span data-ttu-id="76272-111">Regras para invocar rotinas do Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-111">Rules for Invoking Manager Routines</span></span>](#rules-for-invoking-manager-routines)
-   [<span data-ttu-id="76272-112">Expedindo uma chamada de procedimento remoto para uma rotina de Server-Manager</span><span class="sxs-lookup"><span data-stu-id="76272-112">Dispatching a Remote Procedure Call to a Server-Manager Routine</span></span>](#dispatching-a-remote-procedure-call-to-a-server-manager-routine)
-   [<span data-ttu-id="76272-113">Fornecendo sua própria função Object-Inquiry</span><span class="sxs-lookup"><span data-stu-id="76272-113">Supplying Your Own Object-Inquiry Function</span></span>](#supplying-your-own-object-inquiry-function)

## <a name="interface-registration-functions"></a><span data-ttu-id="76272-114">Funções de registro de interface</span><span class="sxs-lookup"><span data-stu-id="76272-114">Interface Registration Functions</span></span>

<span data-ttu-id="76272-115">Os servidores registram suas interfaces chamando a função [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) .</span><span class="sxs-lookup"><span data-stu-id="76272-115">Servers register their interfaces by calling the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function.</span></span> <span data-ttu-id="76272-116">Os programas de servidor complexos geralmente dão suporte a mais de uma interface.</span><span class="sxs-lookup"><span data-stu-id="76272-116">Complex server programs often support more than one interface.</span></span> <span data-ttu-id="76272-117">Os aplicativos de servidor devem chamar essa função uma vez para cada interface com suporte.</span><span class="sxs-lookup"><span data-stu-id="76272-117">Server applications must call this function once for each interface they support.</span></span>

<span data-ttu-id="76272-118">Além disso, os servidores podem dar suporte a várias versões da mesma interface, cada uma com sua própria implementação das funções da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-118">Also, servers can support multiple versions of the same interface, each with its own implementation of the interface's functions.</span></span> <span data-ttu-id="76272-119">Se o seu programa de servidor faz isso, ele deve fornecer um conjunto de pontos de entrada.</span><span class="sxs-lookup"><span data-stu-id="76272-119">If your server program does this, it must provide a set of entry points.</span></span> <span data-ttu-id="76272-120">Um ponto de entrada é uma rotina de gerente que despacha chamadas para uma versão de uma interface.</span><span class="sxs-lookup"><span data-stu-id="76272-120">An entry point is a manager routine that dispatches calls for a version of an interface.</span></span> <span data-ttu-id="76272-121">Deve haver um ponto de entrada para cada versão da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-121">There must be one entry point for each version of the interface.</span></span> <span data-ttu-id="76272-122">O grupo de pontos de entrada é chamado de vetor de ponto de entrada.</span><span class="sxs-lookup"><span data-stu-id="76272-122">The group of entry points is called an entry point vector.</span></span> <span data-ttu-id="76272-123">Para obter detalhes, consulte [vetores de ponto de entrada](#entry-point-vectors).</span><span class="sxs-lookup"><span data-stu-id="76272-123">For details, see [Entry-Point Vectors](#entry-point-vectors).</span></span>

<span data-ttu-id="76272-124">Além da função padrão [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), o RPC também oferece suporte a outras funções de registro de interface.</span><span class="sxs-lookup"><span data-stu-id="76272-124">In addition to the standard function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), RPC also supports other interface registration functions.</span></span> <span data-ttu-id="76272-125">A função [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) estende os recursos do **RpcServerRegisterIf** permitindo que você especifique um conjunto de sinalizadores de registro (consulte [sinalizadores de registro de interface](interface-registration-flags.md)), o número máximo de solicitações simultâneas de chamada de procedimento remoto que o servidor pode aceitar e o tamanho máximo em bytes de blocos de dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="76272-125">The [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function extends the capabilities of **RpcServerRegisterIf** by enabling you to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and the maximum size in bytes of incoming data blocks.</span></span>

<span data-ttu-id="76272-126">A Biblioteca RPC também contém uma função chamada [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span><span class="sxs-lookup"><span data-stu-id="76272-126">The RPC library also contains a function called [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span></span> <span data-ttu-id="76272-127">Assim como a função [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) , essa função registra uma interface.</span><span class="sxs-lookup"><span data-stu-id="76272-127">Like the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function, this function registers an interface.</span></span> <span data-ttu-id="76272-128">O programa de servidor também pode usar essa função para especificar um conjunto de sinalizadores de registro (consulte [sinalizadores de registro de interface](interface-registration-flags.md)), o número máximo de solicitações simultâneas de chamada de procedimento remoto que o servidor pode aceitar e uma função de retorno de chamada de segurança.</span><span class="sxs-lookup"><span data-stu-id="76272-128">Your server program can also use this function to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and a security callback function.</span></span>

<span data-ttu-id="76272-129">As funções [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)e [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) definem valores na tabela interna do registro de interface.</span><span class="sxs-lookup"><span data-stu-id="76272-129">The [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), and [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) functions set values in the internal interface registry table.</span></span> <span data-ttu-id="76272-130">Esta tabela é usada para mapear o UUID de interface e UUIDs de objeto para um EPV de gerente.</span><span class="sxs-lookup"><span data-stu-id="76272-130">This table is used to map the interface UUID and object UUIDs to a manager EPV.</span></span> <span data-ttu-id="76272-131">O Gerenciador EPV é uma matriz de ponteiros de função que contém exatamente um ponteiro de função para cada protótipo de função na interface especificada no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-131">The manager EPV is an array of function pointers that contains exactly one function pointer for each function prototype in the interface specified in the IDL file.</span></span>

<span data-ttu-id="76272-132">Para obter informações sobre como fornecer vários EPVs para fornecer várias implementações da interface, consulte [várias implementações de interface](#registering-multiple-implementations-of-an-interface).</span><span class="sxs-lookup"><span data-stu-id="76272-132">For information on supplying multiple EPVs to provide multiple implementations of the interface, see [Multiple Interface Implementations](#registering-multiple-implementations-of-an-interface).</span></span>

<span data-ttu-id="76272-133">A biblioteca de tempo de execução usa a tabela de registro de interface (definida por chamadas para a função [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) e a tabela de registro de objeto (definida por chamadas para a função [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) para mapear a interface e os UUIDs de objeto para o ponteiro de função.</span><span class="sxs-lookup"><span data-stu-id="76272-133">The run-time library uses the interface registry table (set by calls to the function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) and the object registry table (set by calls to the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) to map interface and object UUIDs to the function pointer.</span></span>

<span data-ttu-id="76272-134">Quando desejar que o seu programa de servidor remova uma interface do registro de biblioteca de tempo de execução RPC, chame a função [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) .</span><span class="sxs-lookup"><span data-stu-id="76272-134">When you want your server program to remove an interface from the RPC run-time library registry, call the [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) function.</span></span> <span data-ttu-id="76272-135">Depois que a interface for removida do registro, a biblioteca de tempo de execução RPC não aceitará mais novas chamadas para essa interface.</span><span class="sxs-lookup"><span data-stu-id="76272-135">After the interface is removed from the registry, the RPC run-time library will no longer accept new calls for that interface.</span></span>

## <a name="entry-point-vectors"></a><span data-ttu-id="76272-136">Vetores de ponto de entrada</span><span class="sxs-lookup"><span data-stu-id="76272-136">Entry-point Vectors</span></span>

<span data-ttu-id="76272-137">O vetor de ponto de entrada do Gerenciador (EPV) é uma matriz de ponteiros de função que aponta para implementações das funções especificadas no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-137">The manager entry-point vector (EPV) is an array of function pointers that point to implementations of the functions specified in the IDL file.</span></span> <span data-ttu-id="76272-138">O número de elementos na matriz corresponde ao número de funções especificadas no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-138">The number of elements in the array corresponds to the number of functions specified in the IDL file.</span></span> <span data-ttu-id="76272-139">O RPC dá suporte a vários vetores de ponto de entrada que representam várias implementações das funções especificadas na interface.</span><span class="sxs-lookup"><span data-stu-id="76272-139">RPC supports multiple entry-point vectors representing multiple implementations of the functions specified in the interface.</span></span>

<span data-ttu-id="76272-140">O compilador MIDL gera automaticamente um tipo de dados EPV Manager para uso na construção do EPVs do Gerenciador.</span><span class="sxs-lookup"><span data-stu-id="76272-140">The MIDL compiler automatically generates a manager EPV data type for use in constructing manager EPVs.</span></span> <span data-ttu-id="76272-141">O tipo de dados é denominado \* If-name \***\_ Server \_ EPV**, em que *If-name* especifica o identificador de interface no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-141">The data type is named \*if-name\***\_SERVER\_EPV**, where *if-name* specifies the interface identifier in the IDL file.</span></span>

<span data-ttu-id="76272-142">O compilador MIDL cria e inicializa automaticamente um gerenciador padrão EPV na suposição de que existe uma rotina de gerente de mesmo nome para cada procedimento na interface e é especificada no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-142">The MIDL compiler automatically creates and initializes a default manager EPV on the assumption that a manager routine of the same name exists for each procedure in the interface and is specified in the IDL file.</span></span>

<span data-ttu-id="76272-143">Quando um servidor oferece várias implementações da mesma interface, o servidor deve criar um EPV do Gerenciador adicional para cada implementação.</span><span class="sxs-lookup"><span data-stu-id="76272-143">When a server offers multiple implementations of the same interface, the server must create one additional manager EPV for each implementation.</span></span> <span data-ttu-id="76272-144">Cada EPV deve conter exatamente um ponto de entrada (endereço de uma função) para cada procedimento definido no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-144">Each EPV must contain exactly one entry point (address of a function) for each procedure defined in the IDL file.</span></span> <span data-ttu-id="76272-145">O aplicativo de servidor declara e Inicializa uma variável EPV de Gerenciador do tipo *If-name \* \* \* \_ Server \_ EPV*\* para cada implementação adicional da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-145">The server application declares and initializes one manager EPV variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each additional implementation of the interface.</span></span> <span data-ttu-id="76272-146">Para registrar o EPVs, ele chama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) uma vez para cada tipo de objeto ao qual ele dá suporte.</span><span class="sxs-lookup"><span data-stu-id="76272-146">To register the EPVs it calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) once for each object type it supports.</span></span>

<span data-ttu-id="76272-147">Quando o cliente faz uma chamada de procedimento remoto para o servidor, o EPV que contém o ponteiro de função é selecionado com base no UUID da interface e no tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-147">When the client makes a remote procedure call to the server, the EPV containing the function pointer is selected based on the interface UUID and the object type.</span></span> <span data-ttu-id="76272-148">O tipo de objeto é derivado do UUID de objeto pela função Object-inquire ou o mapeamento controlado por tabela controlado por [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="76272-148">The object type is derived from the object UUID by the object-inquiry function or the table-driven mapping controlled by [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>

## <a name="manager-epvs"></a><span data-ttu-id="76272-149">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="76272-149">Manager EPVs</span></span>

<span data-ttu-id="76272-150">Por padrão, o compilador MIDL usa os nomes de procedimento do arquivo IDL de uma interface para gerar um EPV de gerente, que o compilador coloca diretamente no stub do servidor.</span><span class="sxs-lookup"><span data-stu-id="76272-150">By default, the MIDL compiler uses the procedure names from an interface's IDL file to generate a manager EPV, which the compiler places directly into the server stub.</span></span> <span data-ttu-id="76272-151">Esse EPV padrão é inicializado estaticamente usando os nomes de procedimento declarados na definição de interface.</span><span class="sxs-lookup"><span data-stu-id="76272-151">This default EPV is statically initialized using the procedure names declared in the interface definition.</span></span>

<span data-ttu-id="76272-152">Para registrar um gerente usando o EPV padrão, especifique **NULL** como o valor do parâmetro *MgrEpv* em uma chamada para a função [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) .</span><span class="sxs-lookup"><span data-stu-id="76272-152">To register a manager using the default EPV, specify **NULL** as the value of the *MgrEpv* parameter in a call to either the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function.</span></span> <span data-ttu-id="76272-153">Se os nomes de rotina usados por um gerente corresponderem aos da definição da interface, você poderá registrar esse Gerenciador usando o EPV padrão da interface gerada pelo compilador MIDL.</span><span class="sxs-lookup"><span data-stu-id="76272-153">If the routine names used by a manager correspond to those of the interface definition, you can register this manager using the default EPV of the interface generated by the MIDL compiler.</span></span> <span data-ttu-id="76272-154">Você também pode registrar um gerente usando um EPV que o aplicativo de servidor fornece.</span><span class="sxs-lookup"><span data-stu-id="76272-154">You can also register a manager using an EPV that the server application supplies.</span></span>

<span data-ttu-id="76272-155">Um servidor pode (e às vezes deve) criar e registrar um EPV de Gerenciador não **nulo** para uma interface.</span><span class="sxs-lookup"><span data-stu-id="76272-155">A server can (and sometimes must) create and register a non-**null** manager EPV for an interface.</span></span> <span data-ttu-id="76272-156">Para selecionar um aplicativo de servidor – fornecido EPV, passe o endereço de um EPV cujo valor foi declarado pelo servidor como o valor do *MgrEpv* um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="76272-156">To select a server application–supplied EPV, pass the address of an EPV whose value has been declared by the server as the value of the *MgrEpv* a parameter.</span></span> <span data-ttu-id="76272-157">Um valor não **nulo** para o *MgrEpv* um parâmetro sempre substitui um EPV padrão no stub do servidor.</span><span class="sxs-lookup"><span data-stu-id="76272-157">A non-**null** value for the *MgrEpv* a parameter always overrides a default EPV in the server stub.</span></span>

<span data-ttu-id="76272-158">O compilador MIDL gera automaticamente um tipo de dados EPV Manager (RPC \_ Mgr \_ EPV) para um aplicativo de servidor usar no EPVs do Gerenciador de construção.</span><span class="sxs-lookup"><span data-stu-id="76272-158">The MIDL compiler automatically generates a manager EPV data type (RPC\_MGR\_EPV) for a server application to use in constructing manager EPVs.</span></span> <span data-ttu-id="76272-159">Um EPV de gerente deve conter exatamente um ponto de entrada (endereço de função) para cada procedimento definido no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-159">A manager EPV must contain exactly one entry point (function address) for each procedure defined in the IDL file.</span></span>

<span data-ttu-id="76272-160">Um servidor deve fornecer um EPV não **nulo** nos seguintes casos:</span><span class="sxs-lookup"><span data-stu-id="76272-160">A server must supply a non-**null** EPV in the following cases:</span></span>

-   <span data-ttu-id="76272-161">Quando os nomes das rotinas do Gerenciador forem diferentes dos nomes de procedimento declarados na definição de interface</span><span class="sxs-lookup"><span data-stu-id="76272-161">When the names of manager routines differ from the procedure names declared in the interface definition</span></span>
-   <span data-ttu-id="76272-162">Quando o servidor usa o EPV padrão para registrar outra implementação da interface</span><span class="sxs-lookup"><span data-stu-id="76272-162">When the server uses the default EPV for registering another implementation of the interface</span></span>

<span data-ttu-id="76272-163">Um servidor declara um EPV do Gerenciador inicializando uma variável do tipo *If-name \* \* \* \_ Server \_ EPV*\* para cada implementação da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-163">A server declares a manager EPV by initializing a variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each implementation of the interface.</span></span>

## <a name="registering-a-single-implementation-of-an-interface"></a><span data-ttu-id="76272-164">Registrando uma única implementação de uma interface</span><span class="sxs-lookup"><span data-stu-id="76272-164">Registering a Single Implementation of an Interface</span></span>

<span data-ttu-id="76272-165">Quando um servidor oferece apenas uma implementação de uma interface, o servidor chama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="76272-165">When a server offers only one implementation of an interface, the server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) only once.</span></span> <span data-ttu-id="76272-166">No caso padrão, o servidor usa o gerenciador padrão EPV.</span><span class="sxs-lookup"><span data-stu-id="76272-166">In the standard case, the server uses the default manager EPV.</span></span> <span data-ttu-id="76272-167">(A exceção é quando o gerente usa nomes de rotina que diferem daqueles declarados na interface.)</span><span class="sxs-lookup"><span data-stu-id="76272-167">(The exception is when the manager uses routine names that differ from those declared in the interface.)</span></span>

<span data-ttu-id="76272-168">Para o caso padrão, forneça os seguintes valores para chamadas para [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span><span class="sxs-lookup"><span data-stu-id="76272-168">For the standard case, you supply the following values for calls to [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span></span>

-   <span data-ttu-id="76272-169">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="76272-169">Manager EPVs</span></span>

    <span data-ttu-id="76272-170">Para usar o EPV padrão, especifique um valor **nulo** para o parâmetro *MgrEpv* .</span><span class="sxs-lookup"><span data-stu-id="76272-170">To use the default EPV, specify a **null** value for the *MgrEpv* a parameter.</span></span>

-   <span data-ttu-id="76272-171">UUID de tipo de Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-171">Manager type UUID</span></span>

    <span data-ttu-id="76272-172">Ao usar o EPV padrão, registre a interface com um UUID de tipo de Gerenciador nil fornecendo um valor **nulo** ou um UUID nil para o *MgrTypeUuid* um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="76272-172">When using the default EPV, register the interface with a nil manager type UUID by supplying either a **null** value or a nil UUID for the *MgrTypeUuid* a parameter.</span></span> <span data-ttu-id="76272-173">Nesse caso, todas as chamadas de procedimento remoto, independentemente do UUID do objeto em seu identificador de associação, são expedidas para o EPV padrão, supondo que nenhuma chamada [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) tenha sido feita.</span><span class="sxs-lookup"><span data-stu-id="76272-173">In this case, all remote procedure calls, regardless of the object UUID in their binding handle, are dispatched to the default EPV, assuming no [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) calls have been made.</span></span>

    <span data-ttu-id="76272-174">Você também pode fornecer um UUID de tipo de Gerenciador não nil.</span><span class="sxs-lookup"><span data-stu-id="76272-174">You can also provide a non-nil manager type UUID.</span></span> <span data-ttu-id="76272-175">Nesse caso, você também deve chamar a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="76272-175">In this case, you must also call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

## <a name="registering-multiple-implementations-of-an-interface"></a><span data-ttu-id="76272-176">Registrando várias implementações de uma interface</span><span class="sxs-lookup"><span data-stu-id="76272-176">Registering Multiple Implementations of an Interface</span></span>

<span data-ttu-id="76272-177">Você pode fornecer mais de uma implementação dos procedimentos remotos especificados no arquivo IDL.</span><span class="sxs-lookup"><span data-stu-id="76272-177">You can supply more than one implementation of the remote procedure(s) specified in the IDL file.</span></span> <span data-ttu-id="76272-178">O aplicativo de servidor chama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para MAPEAr UUIDs de objeto para tipos UUIDs e chama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para associar a EPVs do Gerenciador a um UUID de tipo.</span><span class="sxs-lookup"><span data-stu-id="76272-178">The server application calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to map object UUIDs to type UUIDs and calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate manager EPVs with a type UUID.</span></span> <span data-ttu-id="76272-179">Quando uma chamada de procedimento remoto chega com seu UUID de objeto, a biblioteca de tempo de execução do servidor RPC mapeia o UUID do objeto para um UUID de tipo.</span><span class="sxs-lookup"><span data-stu-id="76272-179">When a remote procedure call arrives with its object UUID, the RPC server run-time library maps the object UUID to a type UUID.</span></span> <span data-ttu-id="76272-180">Em seguida, o aplicativo de servidor usa o UUID de tipo e o UUID de interface para selecionar o EPV do Gerenciador.</span><span class="sxs-lookup"><span data-stu-id="76272-180">The server application then uses the type UUID and the interface UUID to select the manager EPV.</span></span>

<span data-ttu-id="76272-181">Você também pode especificar sua própria função para resolver o mapeamento do UUID do objeto para o UUID do tipo de Gerenciador.</span><span class="sxs-lookup"><span data-stu-id="76272-181">You can also specify your own function to resolve the mapping from object UUID to manager type UUID.</span></span> <span data-ttu-id="76272-182">Você especifica a função de mapeamento ao chamar [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="76272-182">You specify the mapping function when you call [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span>

<span data-ttu-id="76272-183">Para oferecer várias implementações de uma interface, um servidor deve registrar cada implementação chamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) separadamente.</span><span class="sxs-lookup"><span data-stu-id="76272-183">To offer multiple implementations of an interface, a server must register each implementation by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) separately.</span></span> <span data-ttu-id="76272-184">Para cada implementação que um servidor registra, ele fornece o mesmo *IfSpec* um parâmetro, mas um par diferente de *MgrTypeUuid* e *MgrEpv* de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="76272-184">For each implementation a server registers, it supplies the same *IfSpec* a parameter, but a different pair of *MgrTypeUuid* and *MgrEpv* a parameters.</span></span>

<span data-ttu-id="76272-185">No caso de vários gerenciadores, use [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="76272-185">In the case of multiple managers, use [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) as follows:</span></span>

-   <span data-ttu-id="76272-186">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="76272-186">Manager EPVs</span></span>

    <span data-ttu-id="76272-187">Para oferecer várias implementações de uma interface, um servidor deve:</span><span class="sxs-lookup"><span data-stu-id="76272-187">To offer multiple implementations of an interface, a server must:</span></span>

    -   <span data-ttu-id="76272-188">Crie um EPV de Gerenciador não **nulo** para cada implementação adicional.</span><span class="sxs-lookup"><span data-stu-id="76272-188">Create a non-**null** manager EPV for each additional implementation.</span></span>
    -   <span data-ttu-id="76272-189">Especifique um valor não **nulo** para o *MgrEpv* de um parâmetro em [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="76272-189">Specify a non-**null** value for the *MgrEpv* a parameter in [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

    <span data-ttu-id="76272-190">Observe que o servidor também pode se registrar com o gerenciador padrão EPV.</span><span class="sxs-lookup"><span data-stu-id="76272-190">Please note that the server can also register with the default manager EPV.</span></span>

-   <span data-ttu-id="76272-191">UUID de tipo de Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-191">Manager type UUID</span></span>

    <span data-ttu-id="76272-192">Forneça um UUID de tipo de Gerenciador para cada EPV da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-192">Provide a manager type UUID for each EPV of the interface.</span></span> <span data-ttu-id="76272-193">O UUID de tipo nil (ou valor **nulo** ) para o *MgrTypeUuid* um parâmetro pode ser especificado para um dos EPVs do Gerenciador.</span><span class="sxs-lookup"><span data-stu-id="76272-193">The nil type UUID (or **null** value) for the *MgrTypeUuid* a parameter can be specified for one of the manager EPVs.</span></span> <span data-ttu-id="76272-194">Cada UUID de tipo deve ser diferente.</span><span class="sxs-lookup"><span data-stu-id="76272-194">Each type UUID must be different.</span></span>

## <a name="rules-for-invoking-manager-routines"></a><span data-ttu-id="76272-195">Regras para invocar rotinas do Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-195">Rules for Invoking Manager Routines</span></span>

<span data-ttu-id="76272-196">A biblioteca de tempo de execução RPC despacha uma chamada de procedimento remoto de entrada para um gerente que oferece a interface RPC solicitada.</span><span class="sxs-lookup"><span data-stu-id="76272-196">The RPC run-time library dispatches an incoming remote procedure call to a manager that offers the requested RPC interface.</span></span> <span data-ttu-id="76272-197">Quando vários gerenciadores são registrados para uma interface, a biblioteca de tempo de execução RPC deve selecionar um deles.</span><span class="sxs-lookup"><span data-stu-id="76272-197">When multiple managers are registered for an interface, the RPC run-time library must select one of them.</span></span> <span data-ttu-id="76272-198">Para selecionar um gerente, a biblioteca de tempo de execução RPC usa o UUID do objeto especificado pelo identificador de ligação da chamada.</span><span class="sxs-lookup"><span data-stu-id="76272-198">To select a manager, the RPC run-time library uses the object UUID specified by the call's binding handle.</span></span>

<span data-ttu-id="76272-199">A biblioteca de tempo de execução aplica as seguintes regras ao interpretar o UUID de objeto de uma chamada de procedimento remoto:</span><span class="sxs-lookup"><span data-stu-id="76272-199">The run-time library applies the following rules when interpreting the object UUID of a remote procedure call:</span></span>

-   <span data-ttu-id="76272-200">UUIDs de objeto nil</span><span class="sxs-lookup"><span data-stu-id="76272-200">Nil object UUIDs</span></span>

    <span data-ttu-id="76272-201">Um UUID de objeto nil é atribuído automaticamente ao UUID de tipo nil (é ilegal especificar um UUID de objeto nil na rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) ).</span><span class="sxs-lookup"><span data-stu-id="76272-201">A nil object UUID is automatically assigned the nil type UUID (it is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine).</span></span> <span data-ttu-id="76272-202">Portanto, uma chamada de procedimento remoto cujo identificador de associação contém um UUID de objeto nil é automaticamente expedido para o Gerenciador registrado com o UUID de tipo nil, se houver.</span><span class="sxs-lookup"><span data-stu-id="76272-202">Therefore, a remote procedure call whose binding handle contains a nil object UUID is automatically dispatched to the manager registered with the nil type UUID, if any.</span></span>

-   <span data-ttu-id="76272-203">UUIDs de objeto não nulos</span><span class="sxs-lookup"><span data-stu-id="76272-203">Non-nil object UUIDs</span></span>

    <span data-ttu-id="76272-204">Em princípio, uma chamada de procedimento remoto cujo identificador de associação contém um UUID de objeto não nil deve ser processado por um gerente cujo UUID de tipo corresponde ao tipo do UUID do objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-204">In principle, a remote procedure call whose binding handle contains a non-nil object UUID should be processed by a manager whose type UUID matches the type of the object UUID.</span></span> <span data-ttu-id="76272-205">No entanto, identificar o Gerenciador correto requer que o servidor tenha especificado o tipo do UUID do objeto chamando a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="76272-205">However, identifying the correct manager requires that the server has specified the type of that object UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

    <span data-ttu-id="76272-206">Se um servidor falhar ao chamar a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para um UUID de objeto não nulo, uma chamada de procedimento remoto para esse UUID de objeto passará para o Gerenciador EPV que faz chamadas de procedimento remoto de um UUID de objeto nulo (ou seja, o UUID de tipo nil).</span><span class="sxs-lookup"><span data-stu-id="76272-206">If a server fails to call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine for a non-nil object UUID, a remote procedure call for that object UUID goes to the manager EPV that services remote procedure calls with a nil object UUID (that is, the nil type UUID).</span></span>

    <span data-ttu-id="76272-207">Chamadas de procedimento remoto com um UUID de objeto não nil no identificador de associação não poderão ser executadas se o servidor tiver atribuído esse UUID de objeto não nil a um UUID de tipo chamando a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) , mas também não registrou um EPV Manager para esse UUID de tipo chamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="76272-207">Remote procedure calls with a non-nil object UUID in the binding handle cannot be executed if the server assigned that non-nil object UUID a type UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine, but did not also register a manager EPV for that type UUID by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

<span data-ttu-id="76272-208">A tabela a seguir resume as ações que a biblioteca de tempo de execução usa para selecionar a rotina do Gerenciador.</span><span class="sxs-lookup"><span data-stu-id="76272-208">The following table summarizes the actions that the run-time library uses to select the manager routine.</span></span>



| <span data-ttu-id="76272-209">UUID de objeto de chamada</span><span class="sxs-lookup"><span data-stu-id="76272-209">Object UUID of call</span></span> | <span data-ttu-id="76272-210">Tipo de conjunto de servidores para UUID de objeto?</span><span class="sxs-lookup"><span data-stu-id="76272-210">Server set type for object UUID?</span></span> | <span data-ttu-id="76272-211">O servidor registrou o tipo EPV?</span><span class="sxs-lookup"><span data-stu-id="76272-211">Server registered EPV type?</span></span> | <span data-ttu-id="76272-212">Ação de expedição</span><span class="sxs-lookup"><span data-stu-id="76272-212">Dispatching action</span></span>                                                                                                                                 |
|---------------------|----------------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="76272-213">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-213">Nil</span></span>                 | <span data-ttu-id="76272-214">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="76272-214">Not applicable</span></span>                   | <span data-ttu-id="76272-215">Sim</span><span class="sxs-lookup"><span data-stu-id="76272-215">Yes</span></span>                         | <span data-ttu-id="76272-216">Usa o Gerenciador com o UUID de tipo nil.</span><span class="sxs-lookup"><span data-stu-id="76272-216">Uses the manager with the nil type UUID.</span></span>                                                                                                           |
| <span data-ttu-id="76272-217">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-217">Nil</span></span>                 | <span data-ttu-id="76272-218">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="76272-218">Not applicable</span></span>                   | <span data-ttu-id="76272-219">Não</span><span class="sxs-lookup"><span data-stu-id="76272-219">No</span></span>                          | <span data-ttu-id="76272-220">Erro (tipo de RPC \_ S \_ sem suporte \_ ); rejeita a chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-220">Error (RPC\_S\_UNSUPPORTED\_TYPE); rejects the remote procedure call.</span></span>                                                                              |
| <span data-ttu-id="76272-221">Não nil</span><span class="sxs-lookup"><span data-stu-id="76272-221">Non-nil</span></span>             | <span data-ttu-id="76272-222">Sim</span><span class="sxs-lookup"><span data-stu-id="76272-222">Yes</span></span>                              | <span data-ttu-id="76272-223">Sim</span><span class="sxs-lookup"><span data-stu-id="76272-223">Yes</span></span>                         | <span data-ttu-id="76272-224">Usa o Gerenciador com o mesmo UUID de tipo.</span><span class="sxs-lookup"><span data-stu-id="76272-224">Uses the manager with the same type UUID.</span></span>                                                                                                          |
| <span data-ttu-id="76272-225">Não nil</span><span class="sxs-lookup"><span data-stu-id="76272-225">Non-nil</span></span>             | <span data-ttu-id="76272-226">Não</span><span class="sxs-lookup"><span data-stu-id="76272-226">No</span></span>                               | <span data-ttu-id="76272-227">Ignored</span><span class="sxs-lookup"><span data-stu-id="76272-227">Ignored</span></span>                     | <span data-ttu-id="76272-228">Usa o Gerenciador com o UUID de tipo nil.</span><span class="sxs-lookup"><span data-stu-id="76272-228">Uses the manager with the nil type UUID.</span></span> <span data-ttu-id="76272-229">Se nenhum Gerenciador com o UUID de tipo nil, erro (RPC \_ S \_ sem suporte); rejeita a chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-229">If no manager with the nil type UUID, error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span> |
| <span data-ttu-id="76272-230">Não nil</span><span class="sxs-lookup"><span data-stu-id="76272-230">Non-nil</span></span>             | <span data-ttu-id="76272-231">Sim</span><span class="sxs-lookup"><span data-stu-id="76272-231">Yes</span></span>                              | <span data-ttu-id="76272-232">Não</span><span class="sxs-lookup"><span data-stu-id="76272-232">No</span></span>                          | <span data-ttu-id="76272-233">Erro (RPC \_ S \_ sem suporte); rejeita a chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-233">Error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span>                                                                                |



 

<span data-ttu-id="76272-234">O UUID do objeto da chamada é o UUID do objeto encontrado em um identificador de associação para uma chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-234">The object UUID of the call is the object UUID found in a binding handle for a remote procedure call.</span></span>

<span data-ttu-id="76272-235">O servidor define o tipo do UUID de objeto chamando [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para especificar o UUID de tipo para um objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-235">The server sets the type of the object UUID by calling [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to specify the type UUID for an object.</span></span>

<span data-ttu-id="76272-236">O servidor registra o tipo para o Gerenciador de EPV chamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) ou [**RPCSERVERREGISTERIF2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) usando o mesmo tipo uuid.</span><span class="sxs-lookup"><span data-stu-id="76272-236">The server registers the type for the manager EPV by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) using the same type UUID.</span></span>

> [!Note]  
> <span data-ttu-id="76272-237">O UUID do objeto nil sempre é atribuído automaticamente ao UUID do tipo nil.</span><span class="sxs-lookup"><span data-stu-id="76272-237">The nil object UUID is always automatically assigned the nil type UUID.</span></span> <span data-ttu-id="76272-238">É ilegal especificar um UUID de objeto nil na rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="76272-238">It is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

 

## <a name="dispatching-a-remote-procedure-call-to-a-server-manager-routine"></a><span data-ttu-id="76272-239">Expedindo uma chamada de procedimento remoto para uma rotina do Gerenciador de servidores</span><span class="sxs-lookup"><span data-stu-id="76272-239">Dispatching a Remote Procedure Call to a Server-manager Routine</span></span>

<span data-ttu-id="76272-240">As tabelas a seguir mostram as etapas que a biblioteca de tempo de execução RPC leva para distribuir uma chamada de procedimento remoto para uma rotina do Gerenciador de servidores.</span><span class="sxs-lookup"><span data-stu-id="76272-240">The following tables show the steps that the RPC run-time library takes to dispatch a remote procedure call to a server-manager routine.</span></span>

<span data-ttu-id="76272-241">Um caso simples em que o servidor registra o gerenciador padrão EPV, é descrito nas tabelas a seguir.</span><span class="sxs-lookup"><span data-stu-id="76272-241">A simple case where the server registers the default manager EPV, is described in the following tables.</span></span>

<span data-ttu-id="76272-242">**Tabela de registro de interface**</span><span class="sxs-lookup"><span data-stu-id="76272-242">**Interface Registry Table**</span></span>



| <span data-ttu-id="76272-243">UUID de interface</span><span class="sxs-lookup"><span data-stu-id="76272-243">Interface UUID</span></span> | <span data-ttu-id="76272-244">UUID de tipo de Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-244">Manager type UUID</span></span> | <span data-ttu-id="76272-245">Vetor de ponto de entrada</span><span class="sxs-lookup"><span data-stu-id="76272-245">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="76272-246">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-246">*uuid1*</span></span>        | <span data-ttu-id="76272-247">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-247">Nil</span></span>               | <span data-ttu-id="76272-248">EPV padrão</span><span class="sxs-lookup"><span data-stu-id="76272-248">Default EPV</span></span>        |



 

<span data-ttu-id="76272-249">**Tabela de registro de objeto**</span><span class="sxs-lookup"><span data-stu-id="76272-249">**Object Registry Table**</span></span>



| <span data-ttu-id="76272-250">UUID do objeto</span><span class="sxs-lookup"><span data-stu-id="76272-250">Object UUID</span></span>             | <span data-ttu-id="76272-251">Tipo de objeto</span><span class="sxs-lookup"><span data-stu-id="76272-251">Object type</span></span> |
|-------------------------|-------------|
| <span data-ttu-id="76272-252">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-252">Nil</span></span>                     | <span data-ttu-id="76272-253">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-253">Nil</span></span>         |
| <span data-ttu-id="76272-254">(Qualquer outro UUID de objeto)</span><span class="sxs-lookup"><span data-stu-id="76272-254">(Any other object UUID)</span></span> | <span data-ttu-id="76272-255">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-255">Nil</span></span>         |



 

<span data-ttu-id="76272-256">**Mapeando o identificador de associação para um vetor de ponto de entrada (EPV)**</span><span class="sxs-lookup"><span data-stu-id="76272-256">**Mapping the Binding Handle to an Entry-point Vector (EPV)**</span></span>



| <span data-ttu-id="76272-257">UUID de interface (do identificador de associação de cliente)</span><span class="sxs-lookup"><span data-stu-id="76272-257">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="76272-258">UUID de objeto (do identificador de associação de cliente)</span><span class="sxs-lookup"><span data-stu-id="76272-258">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="76272-259">Tipo de objeto (da tabela de registro de objeto)</span><span class="sxs-lookup"><span data-stu-id="76272-259">Object type (from object registry table)</span></span> | <span data-ttu-id="76272-260">EPV Manager (da tabela de registro de interface)</span><span class="sxs-lookup"><span data-stu-id="76272-260">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="76272-261">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-261">*uuid1*</span></span>                                     | <span data-ttu-id="76272-262">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-262">Nil</span></span>                                      | <span data-ttu-id="76272-263">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-263">Nil</span></span>                                      | <span data-ttu-id="76272-264">EPV padrão</span><span class="sxs-lookup"><span data-stu-id="76272-264">Default EPV</span></span>                                 |
| <span data-ttu-id="76272-265">O mesmo que o descrito acima</span><span class="sxs-lookup"><span data-stu-id="76272-265">Same as above</span></span>                               | <span data-ttu-id="76272-266">*uuida*</span><span class="sxs-lookup"><span data-stu-id="76272-266">*uuidA*</span></span>                                  | <span data-ttu-id="76272-267">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-267">Nil</span></span>                                      | <span data-ttu-id="76272-268">EPV padrão</span><span class="sxs-lookup"><span data-stu-id="76272-268">Default EPV</span></span>                                 |



 

<span data-ttu-id="76272-269">As etapas a seguir descrevem as ações que a biblioteca de tempo de execução do servidor RPC assume, conforme mostrado nas tabelas anteriores, quando um cliente com interface UUID *uuid1* a chama.</span><span class="sxs-lookup"><span data-stu-id="76272-269">The following steps describe the actions that the RPC server's run-time library take, as shown in the preceding tables, when a client with interface UUID *uuid1* calls it.</span></span>

1.  <span data-ttu-id="76272-270">O servidor chama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para associar uma interface que ele oferece com o UUID de tipo de Gerenciador nil e com o gerenciador padrão gerado por MIDL EPV.</span><span class="sxs-lookup"><span data-stu-id="76272-270">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate an interface it offers with the nil manager type UUID and with the MIDL-generated default manager EPV.</span></span> <span data-ttu-id="76272-271">Essa chamada adiciona uma entrada na tabela de registro da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-271">This call adds an entry in the interface registry table.</span></span> <span data-ttu-id="76272-272">O UUID de interface está contido no parâmetro *IfSpec* .</span><span class="sxs-lookup"><span data-stu-id="76272-272">The interface UUID is contained in the *IfSpec* a parameter.</span></span>
2.  <span data-ttu-id="76272-273">Por padrão, a tabela de registro de objeto associa todos os UUIDs de objeto ao UUID de tipo nil.</span><span class="sxs-lookup"><span data-stu-id="76272-273">By default, the object registry table associates all object UUIDs with the nil type UUID.</span></span> <span data-ttu-id="76272-274">Neste exemplo, o servidor não chama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="76272-274">In this example, the server does not call [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>
3.  <span data-ttu-id="76272-275">A biblioteca de tempo de execução do servidor recebe um código de procedimento remoto que contém o UUID da interface ao qual a chamada pertence e o UUID do objeto do identificador de associação da chamada.</span><span class="sxs-lookup"><span data-stu-id="76272-275">The server run-time library receives a remote procedure code containing the interface UUID that the call belongs to and the object UUID from the call's binding handle.</span></span>

    <span data-ttu-id="76272-276">Consulte as seguintes entradas de referência de função para discussões sobre como um UUID de objeto é definido em um identificador de associação:</span><span class="sxs-lookup"><span data-stu-id="76272-276">See the following function reference entries for discussions of how an object UUID is set into a binding handle:</span></span>

    -   [<span data-ttu-id="76272-277">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="76272-277">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
    -   [<span data-ttu-id="76272-278">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="76272-278">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
    -   [<span data-ttu-id="76272-279">**RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="76272-279">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
    -   [<span data-ttu-id="76272-280">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="76272-280">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)

4.  <span data-ttu-id="76272-281">Usando o UUID de interface da chamada de procedimento remoto, a biblioteca de tempo de execução do servidor localiza esse UUID de interface na tabela de registro da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-281">Using the interface UUID from the remote procedure call, the server's run-time library locates that interface UUID in the interface registry table.</span></span>

    <span data-ttu-id="76272-282">Se o servidor não registrou a interface usando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), a chamada de procedimento remoto retorna ao chamador com um RPC \_ S \_ desconhecido se o \_ código de status.</span><span class="sxs-lookup"><span data-stu-id="76272-282">If the server did not register the interface using [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), then the remote procedure call returns to the caller with an RPC\_S\_UNKNOWN\_IF status code.</span></span>

5.  <span data-ttu-id="76272-283">Usando o UUID de objeto do identificador de associação, a biblioteca de tempo de execução do servidor localiza esse UUID de objeto na tabela de registro de objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-283">Using the object UUID from the binding handle, the server's run-time library locates that object UUID in the object registry table.</span></span> <span data-ttu-id="76272-284">Neste exemplo, todos os UUIDs de objeto são mapeados para o tipo de objeto nil.</span><span class="sxs-lookup"><span data-stu-id="76272-284">In this example, all object UUIDs map to the nil object type.</span></span>
6.  <span data-ttu-id="76272-285">A biblioteca de tempo de execução do servidor localiza o tipo de Gerenciador nil na tabela de registro da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-285">The server's run-time library locates the nil manager type in the interface registry table.</span></span>
7.  <span data-ttu-id="76272-286">A combinação do UUID de interface e do tipo nil na tabela de registro de interface resolve para o EPV padrão, que contém as rotinas do Gerenciador de servidores a serem executadas para o UUID da interface encontrado na chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-286">Combining the interface UUID and nil type in the interface registry table resolves to the default EPV, which contains the server-manager routines to be executed for the interface UUID found in the remote procedure call.</span></span>

<span data-ttu-id="76272-287">Suponha que o servidor ofereça várias interfaces e várias implementações de cada interface, conforme descrito nas tabelas a seguir.</span><span class="sxs-lookup"><span data-stu-id="76272-287">Assume that the server offers multiple interfaces and multiple implementations of each interface, as described in the following tables.</span></span>

<span data-ttu-id="76272-288">**Tabela de registro de interface**</span><span class="sxs-lookup"><span data-stu-id="76272-288">**Interface Registry Table**</span></span>



| <span data-ttu-id="76272-289">UUID de interface</span><span class="sxs-lookup"><span data-stu-id="76272-289">Interface UUID</span></span> | <span data-ttu-id="76272-290">UUID de tipo de Gerenciador</span><span class="sxs-lookup"><span data-stu-id="76272-290">Manager-type UUID</span></span> | <span data-ttu-id="76272-291">Vetor de ponto de entrada</span><span class="sxs-lookup"><span data-stu-id="76272-291">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="76272-292">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-292">*uuid1*</span></span>        | <span data-ttu-id="76272-293">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-293">Nil</span></span>               | <span data-ttu-id="76272-294">*epv1*</span><span class="sxs-lookup"><span data-stu-id="76272-294">*epv1*</span></span>             |
| <span data-ttu-id="76272-295">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-295">*uuid1*</span></span>        | <span data-ttu-id="76272-296">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-296">*uuid3*</span></span>           | <span data-ttu-id="76272-297">*epv4*</span><span class="sxs-lookup"><span data-stu-id="76272-297">*epv4*</span></span>             |
| <span data-ttu-id="76272-298">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="76272-298">*uuid2*</span></span>        | <span data-ttu-id="76272-299">*uuid4*</span><span class="sxs-lookup"><span data-stu-id="76272-299">*uuid4*</span></span>           | <span data-ttu-id="76272-300">*epv2*</span><span class="sxs-lookup"><span data-stu-id="76272-300">*epv2*</span></span>             |
| <span data-ttu-id="76272-301">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="76272-301">*uuid2*</span></span>        | <span data-ttu-id="76272-302">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="76272-302">*uuid7*</span></span>           | <span data-ttu-id="76272-303">*epv3*</span><span class="sxs-lookup"><span data-stu-id="76272-303">*epv3*</span></span>             |



 

<span data-ttu-id="76272-304">**Tabela de registro de objeto**</span><span class="sxs-lookup"><span data-stu-id="76272-304">**Object Registry Table**</span></span>



| <span data-ttu-id="76272-305">UUID do objeto</span><span class="sxs-lookup"><span data-stu-id="76272-305">Object UUID</span></span>      | <span data-ttu-id="76272-306">Tipo de objeto</span><span class="sxs-lookup"><span data-stu-id="76272-306">Object type</span></span> |
|------------------|-------------|
| <span data-ttu-id="76272-307">*uuida*</span><span class="sxs-lookup"><span data-stu-id="76272-307">*uuidA*</span></span>          | <span data-ttu-id="76272-308">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-308">*uuid3*</span></span>     |
| <span data-ttu-id="76272-309">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="76272-309">*uuidB*</span></span>          | <span data-ttu-id="76272-310">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="76272-310">*uuid7*</span></span>     |
| <span data-ttu-id="76272-311">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="76272-311">*uuidC*</span></span>          | <span data-ttu-id="76272-312">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="76272-312">*uuid7*</span></span>     |
| <span data-ttu-id="76272-313">*uuidd*</span><span class="sxs-lookup"><span data-stu-id="76272-313">*uuidD*</span></span>          | <span data-ttu-id="76272-314">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-314">*uuid3*</span></span>     |
| <span data-ttu-id="76272-315">*uuide*</span><span class="sxs-lookup"><span data-stu-id="76272-315">*uuidE*</span></span>          | <span data-ttu-id="76272-316">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-316">*uuid3*</span></span>     |
| <span data-ttu-id="76272-317">*uuidF*</span><span class="sxs-lookup"><span data-stu-id="76272-317">*uuidF*</span></span>          | <span data-ttu-id="76272-318">*uuid8*</span><span class="sxs-lookup"><span data-stu-id="76272-318">*uuid8*</span></span>     |
| <span data-ttu-id="76272-319">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-319">Nil</span></span>              | <span data-ttu-id="76272-320">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-320">Nil</span></span>         |
| <span data-ttu-id="76272-321">(Qualquer outro UUID)</span><span class="sxs-lookup"><span data-stu-id="76272-321">(Any other UUID)</span></span> | <span data-ttu-id="76272-322">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-322">Nil</span></span>         |



 

<span data-ttu-id="76272-323">**Mapeando o identificador de associação para um vetor de ponto de entrada**</span><span class="sxs-lookup"><span data-stu-id="76272-323">**Mapping the Binding Handle to an Entry-point Vector**</span></span>



| <span data-ttu-id="76272-324">UUID de interface (do identificador de associação de cliente)</span><span class="sxs-lookup"><span data-stu-id="76272-324">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="76272-325">UUID de objeto (do identificador de associação de cliente)</span><span class="sxs-lookup"><span data-stu-id="76272-325">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="76272-326">Tipo de objeto (da tabela de registro de objeto)</span><span class="sxs-lookup"><span data-stu-id="76272-326">Object type (from object registry table)</span></span> | <span data-ttu-id="76272-327">EPV Manager (da tabela de registro de interface)</span><span class="sxs-lookup"><span data-stu-id="76272-327">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="76272-328">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-328">*uuid1*</span></span>                                     | <span data-ttu-id="76272-329">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-329">Nil</span></span>                                      | <span data-ttu-id="76272-330">Apostar</span><span class="sxs-lookup"><span data-stu-id="76272-330">Nil</span></span>                                      | <span data-ttu-id="76272-331">*epv1*</span><span class="sxs-lookup"><span data-stu-id="76272-331">*epv1*</span></span>                                      |
| <span data-ttu-id="76272-332">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-332">*uuid1*</span></span>                                     | <span data-ttu-id="76272-333">*uuida*</span><span class="sxs-lookup"><span data-stu-id="76272-333">*uuidA*</span></span>                                  | <span data-ttu-id="76272-334">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-334">*uuid3*</span></span>                                  | <span data-ttu-id="76272-335">*epv4*</span><span class="sxs-lookup"><span data-stu-id="76272-335">*epv4*</span></span>                                      |
| <span data-ttu-id="76272-336">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-336">*uuid1*</span></span>                                     | <span data-ttu-id="76272-337">*uuidd*</span><span class="sxs-lookup"><span data-stu-id="76272-337">*uuidD*</span></span>                                  | <span data-ttu-id="76272-338">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-338">*uuid3*</span></span>                                  | <span data-ttu-id="76272-339">*epv4*</span><span class="sxs-lookup"><span data-stu-id="76272-339">*epv4*</span></span>                                      |
| <span data-ttu-id="76272-340">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="76272-340">*uuid1*</span></span>                                     | <span data-ttu-id="76272-341">*uuide*</span><span class="sxs-lookup"><span data-stu-id="76272-341">*uuidE*</span></span>                                  | <span data-ttu-id="76272-342">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="76272-342">*uuid3*</span></span>                                  | <span data-ttu-id="76272-343">*epv4*</span><span class="sxs-lookup"><span data-stu-id="76272-343">*epv4*</span></span>                                      |
| <span data-ttu-id="76272-344">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="76272-344">*uuid2*</span></span>                                     | <span data-ttu-id="76272-345">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="76272-345">*uuidB*</span></span>                                  | <span data-ttu-id="76272-346">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="76272-346">*uuid7*</span></span>                                  | <span data-ttu-id="76272-347">*epv3*</span><span class="sxs-lookup"><span data-stu-id="76272-347">*epv3*</span></span>                                      |
| <span data-ttu-id="76272-348">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="76272-348">*uuid2*</span></span>                                     | <span data-ttu-id="76272-349">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="76272-349">*uuidC*</span></span>                                  | <span data-ttu-id="76272-350">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="76272-350">*uuid7*</span></span>                                  | <span data-ttu-id="76272-351">*epv3*</span><span class="sxs-lookup"><span data-stu-id="76272-351">*epv3*</span></span>                                      |



 

<span data-ttu-id="76272-352">As etapas a seguir descrevem as ações que a biblioteca de tempo de execução do servidor assume, conforme mostrado nas tabelas anteriores quando um cliente com interface UUID *uuid2* e Object UUID *uuidC* o chama.</span><span class="sxs-lookup"><span data-stu-id="76272-352">The following steps describe the actions that the server's run-time library take, as shown in the preceding tables when a client with interface UUID *uuid2* and object UUID *uuidC* calls it.</span></span>

1.  <span data-ttu-id="76272-353">O servidor chama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para associar as interfaces que ele oferece com o EPVs do Gerenciador diferente.</span><span class="sxs-lookup"><span data-stu-id="76272-353">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate the interfaces it offers with the different manager EPVs.</span></span> <span data-ttu-id="76272-354">As entradas na tabela de registro da interface refletem quatro chamadas de [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para oferecer duas interfaces, com duas implementações (EPVs) para cada interface.</span><span class="sxs-lookup"><span data-stu-id="76272-354">The entries in the interface registry table reflect four calls of [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to offer two interfaces, with two implementations (EPVs) for each interface.</span></span>
2.  <span data-ttu-id="76272-355">O servidor chama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para estabelecer o tipo de cada objeto que ele oferece.</span><span class="sxs-lookup"><span data-stu-id="76272-355">The server calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to establish the type of each object it offers.</span></span> <span data-ttu-id="76272-356">Além da associação padrão do objeto nil a um tipo nil, todos os outros UUIDs de objeto não explicitamente encontrados na tabela de registro de objeto também são mapeados para o UUID de tipo nil.</span><span class="sxs-lookup"><span data-stu-id="76272-356">In addition to the default association of the nil object to a nil type, all other object UUIDs not explicitly found in the object registry table also map to the nil type UUID.</span></span>

    <span data-ttu-id="76272-357">Neste exemplo, o servidor chama a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) seis vezes.</span><span class="sxs-lookup"><span data-stu-id="76272-357">In this example, the server calls the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine six times.</span></span>

3.  <span data-ttu-id="76272-358">A biblioteca de tempo de execução do servidor recebe uma chamada de procedimento remoto que contém o UUID da interface ao qual a chamada pertence e um UUID de objeto do identificador de associação da chamada.</span><span class="sxs-lookup"><span data-stu-id="76272-358">The server run-time library receives a remote procedure call containing the interface UUID that the call belongs to and an object UUID from the call's binding handle.</span></span>
4.  <span data-ttu-id="76272-359">Usando o UUID de interface da chamada de procedimento remoto, a biblioteca de tempo de execução do servidor localiza o UUID da interface na tabela do registro da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-359">Using the interface UUID from the remote procedure call, the server's run-time library locates the interface UUID in the interface registry table.</span></span>
5.  <span data-ttu-id="76272-360">Usando o UUID do objeto *uuidC* do identificador de associação, a biblioteca de tempo de execução do servidor localiza o UUID do objeto na tabela de registro de objeto e descobre que ele é mapeado para o tipo *uuid7*.</span><span class="sxs-lookup"><span data-stu-id="76272-360">Using the *uuidC* object UUID from the binding handle, the server's run-time library locates the object UUID in the object registry table and finds that it maps to type *uuid7*.</span></span>
6.  <span data-ttu-id="76272-361">Para localizar o tipo de Gerenciador, a biblioteca de tempo de execução do servidor combina o UUID de interface, *uuid2*, e o tipo *uuid7* na tabela de registro da interface.</span><span class="sxs-lookup"><span data-stu-id="76272-361">To locate the manager type, the server's run-time library combines the interface UUID, *uuid2*, and type *uuid7* in the interface registry table.</span></span> <span data-ttu-id="76272-362">Isso resolve para *epv3*, que contém a rotina do Gerenciador do servidor a ser executada para a chamada de procedimento remoto.</span><span class="sxs-lookup"><span data-stu-id="76272-362">This resolves to *epv3*, which contains the server manager routine to be executed for the remote procedure call.</span></span>

<span data-ttu-id="76272-363">As rotinas em *epv2* nunca serão executadas porque o servidor não chamou a rotina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para adicionar objetos com um UUID de tipo de *uuid4* à tabela de registro de objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-363">The routines in *epv2* will never be executed because the server has not called the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine to add any objects with a type UUID of *uuid4* to the object registry table.</span></span>

<span data-ttu-id="76272-364">Uma chamada de procedimento remoto com interface UUID *uuid2* e Object UUID *uuidF* retorna ao chamador com um código de status de tipo de Gerenciador desconhecido de RPC S, \_ \_ \_ \_ pois o servidor não chamou [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)ou [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para registrar a interface com um tipo de gerente de *uuid8*.</span><span class="sxs-lookup"><span data-stu-id="76272-364">A remote procedure call with interface UUID *uuid2* and object UUID *uuidF* returns to the caller with an RPC\_S\_UNKNOWN\_MGR\_TYPE status code because the server did not call [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to register the interface with a manager type of *uuid8*.</span></span>

## <a name="return-values"></a><span data-ttu-id="76272-365">Valores de retorno</span><span class="sxs-lookup"><span data-stu-id="76272-365">Return Values</span></span>

<span data-ttu-id="76272-366">Essa função retorna um dos valores a seguir.</span><span class="sxs-lookup"><span data-stu-id="76272-366">This function returns one of the following values.</span></span>



| <span data-ttu-id="76272-367">Valor</span><span class="sxs-lookup"><span data-stu-id="76272-367">Value</span></span>                             | <span data-ttu-id="76272-368">Significado</span><span class="sxs-lookup"><span data-stu-id="76272-368">Meaning</span></span>                      |
|-----------------------------------|------------------------------|
| <span data-ttu-id="76272-369">RPC \_ S \_ OK</span><span class="sxs-lookup"><span data-stu-id="76272-369">RPC\_S\_OK</span></span>                        | <span data-ttu-id="76272-370">Sucesso</span><span class="sxs-lookup"><span data-stu-id="76272-370">Success</span></span>                      |
| <span data-ttu-id="76272-371">tipo de RPC \_ S \_ \_ já \_ registrado</span><span class="sxs-lookup"><span data-stu-id="76272-371">RPC\_S\_TYPE\_ALREADY\_REGISTERED</span></span> | <span data-ttu-id="76272-372">UUID de tipo já registrado</span><span class="sxs-lookup"><span data-stu-id="76272-372">Type UUID already registered</span></span> |



 

## <a name="supplying-your-own-object-inquiry-function"></a><span data-ttu-id="76272-373">Fornecendo seu próprio objeto-função de consulta</span><span class="sxs-lookup"><span data-stu-id="76272-373">Supplying Your Own Object-inquiry Function</span></span>

<span data-ttu-id="76272-374">Considere um servidor que gerencia milhares de objetos de muitos tipos diferentes.</span><span class="sxs-lookup"><span data-stu-id="76272-374">Consider a server that manages thousands of objects of many different types.</span></span> <span data-ttu-id="76272-375">Sempre que o servidor for iniciado, o aplicativo de servidor precisaria chamar a função [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para cada um dos objetos, mesmo que os clientes possam se referir a apenas alguns deles (ou demoram muito para se referir a eles).</span><span class="sxs-lookup"><span data-stu-id="76272-375">Whenever the server started, the server application would have to call the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) for every one of the objects, even though clients might refer to only a few of them (or take a long time to refer to them).</span></span> <span data-ttu-id="76272-376">Esses milhares de objetos provavelmente estarão no disco, portanto, recuperar seus tipos levaria tempo demorado.</span><span class="sxs-lookup"><span data-stu-id="76272-376">These thousands of objects are likely to be on disk, so retrieving their types would be time consuming.</span></span> <span data-ttu-id="76272-377">Além disso, a tabela interna que está mapeando o UUID do objeto para o UUID do tipo de Gerenciador iria, essencialmente, duplicar o mapeamento mantido com os próprios objetos.</span><span class="sxs-lookup"><span data-stu-id="76272-377">Also, the internal table that is mapping the object UUID to the manager type UUID would essentially duplicate the mapping maintained with the objects themselves.</span></span>

<span data-ttu-id="76272-378">Para sua conveniência, o conjunto de funções RPC inclui a função [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="76272-378">For convenience, the RPC function set includes the function [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span> <span data-ttu-id="76272-379">Com essa função, você fornece sua própria função de consulta de objeto.</span><span class="sxs-lookup"><span data-stu-id="76272-379">With this function, you provide your own object-inquiry function.</span></span>

<span data-ttu-id="76272-380">Como exemplo, você pode fornecer sua própria função de consulta de objeto ao mapear objetos 100 – 199 para o tipo número 1, 200 – 299 para o tipo número 2 e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="76272-380">As an example, you can supply your own object-inquiry function when you map objects 100–199 to type number 1, 200–299 to type number 2, and so on.</span></span> <span data-ttu-id="76272-381">A função de consulta de objeto também pode ser estendida para um sistema de arquivos distribuído, no qual o aplicativo de servidor não tem uma lista de todos os arquivos (UUIDs de objeto) disponíveis, ou quando os UUIDs de objeto nomeam arquivos no sistema de arquivos e você não deseja pré-carregar todos os mapeamentos entre UUIDs de objetos e tipos UUIDs.</span><span class="sxs-lookup"><span data-stu-id="76272-381">The object inquiry function can also be extended to a distributed file system, where the server application does not have a list of all the files (object UUIDs) available, or when object UUIDs name files in the file system and you do not want to preload all of the mappings between object UUIDs and type UUIDs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="76272-382">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="76272-382">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="76272-383">**RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="76272-383">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
</dt> <dt>

[<span data-ttu-id="76272-384">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="76272-384">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)
</dt> <dt>

[<span data-ttu-id="76272-385">**RpcNsBindingExport**</span><span class="sxs-lookup"><span data-stu-id="76272-385">**RpcNsBindingExport**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingexporta)
</dt> <dt>

[<span data-ttu-id="76272-386">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="76272-386">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
</dt> <dt>

[<span data-ttu-id="76272-387">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="76272-387">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
</dt> <dt>

[<span data-ttu-id="76272-388">**RpcObjectSetType**</span><span class="sxs-lookup"><span data-stu-id="76272-388">**RpcObjectSetType**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)
</dt> <dt>

[<span data-ttu-id="76272-389">**RpcServerRegisterIf**</span><span class="sxs-lookup"><span data-stu-id="76272-389">**RpcServerRegisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif)
</dt> <dt>

[<span data-ttu-id="76272-390">**RpcServerRegisterIf2**</span><span class="sxs-lookup"><span data-stu-id="76272-390">**RpcServerRegisterIf2**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)
</dt> <dt>

[<span data-ttu-id="76272-391">**RpcServerRegisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="76272-391">**RpcServerRegisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)
</dt> <dt>

[<span data-ttu-id="76272-392">**RpcServerUnregisterIf**</span><span class="sxs-lookup"><span data-stu-id="76272-392">**RpcServerUnregisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif)
</dt> <dt>

[<span data-ttu-id="76272-393">**RpcServerUnregisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="76272-393">**RpcServerUnregisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterifex)
</dt> </dl>

 

 




