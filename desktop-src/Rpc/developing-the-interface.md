---
title: Desenvolvendo a interface
description: Uma interface RPC descreve as funções remotas que o programa do servidor implementa.
ms.assetid: f0dfe9d1-fe84-461c-8684-147fbd0bdefe
keywords:
- Chamada de procedimento remoto RPC, tarefas, desenvolvendo a interface
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b6f720bcd492e784ad07fe20e221ac54951680
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104084773"
---
# <a name="developing-the-interface"></a><span data-ttu-id="0b63b-104">Desenvolvendo a interface</span><span class="sxs-lookup"><span data-stu-id="0b63b-104">Developing the Interface</span></span>

<span data-ttu-id="0b63b-105">Uma interface RPC descreve as funções remotas que o programa do servidor implementa.</span><span class="sxs-lookup"><span data-stu-id="0b63b-105">An RPC interface describes the remote functions that the server program implements.</span></span> <span data-ttu-id="0b63b-106">A interface garante que o cliente e o servidor se comuniquem usando as mesmas regras quando o cliente chama um procedimento remoto que o servidor oferece.</span><span class="sxs-lookup"><span data-stu-id="0b63b-106">The interface ensures that the client and server communicate using the same rules when the client invokes a remote procedure that the server offers.</span></span> <span data-ttu-id="0b63b-107">Uma interface consiste em um nome de interface, alguns atributos, um tipo opcional ou definições de constante e um conjunto de declarações de procedimento.</span><span class="sxs-lookup"><span data-stu-id="0b63b-107">An interface consists of an interface name, some attributes, optional type or constant definitions, and a set of procedure declarations.</span></span> <span data-ttu-id="0b63b-108">Cada declaração de procedimento deve conter um nome de procedimento, tipo de retorno e lista de parâmetros.</span><span class="sxs-lookup"><span data-stu-id="0b63b-108">Each procedure declaration must contain a procedure name, return type, and parameter list.</span></span>

<span data-ttu-id="0b63b-109">As interfaces são definidas no linguagem IDL da Microsoft (MIDL).</span><span class="sxs-lookup"><span data-stu-id="0b63b-109">Interfaces are defined in the Microsoft Interface Definition Language (MIDL).</span></span> <span data-ttu-id="0b63b-110">Se você estiver familiarizado com C ou C++, as definições de interface MIDL parecerão bastante diretas.</span><span class="sxs-lookup"><span data-stu-id="0b63b-110">If you are familiar with C or C++, MIDL interface definitions will seem fairly straightforward.</span></span> <span data-ttu-id="0b63b-111">O MIDL se assemelha a C e C++ de várias maneiras.</span><span class="sxs-lookup"><span data-stu-id="0b63b-111">MIDL resembles C and C++ in many ways.</span></span>

<span data-ttu-id="0b63b-112">Ao desenvolver um aplicativo RPC, um editor de texto é usado para definir a interface e armazená-lo em um arquivo de texto com uma extensão. idl.</span><span class="sxs-lookup"><span data-stu-id="0b63b-112">When developing an RPC application, a text editor is used to define the interface and store it in a text file with an .idl extension.</span></span> <span data-ttu-id="0b63b-113">Para obter mais informações, consulte [os arquivos IDL e ACF](the-idl-and-acf-files.md).</span><span class="sxs-lookup"><span data-stu-id="0b63b-113">For more information, see [The IDL and ACF Files](the-idl-and-acf-files.md).</span></span> <span data-ttu-id="0b63b-114">O compilador MIDL gera um arquivo de cabeçalho que seu programa inclui nos arquivos de origem do cliente e do servidor.</span><span class="sxs-lookup"><span data-stu-id="0b63b-114">The MIDL compiler generates a header file that your program includes in the client and server source files.</span></span> <span data-ttu-id="0b63b-115">O compilador MIDL também gera dois arquivos de origem C.</span><span class="sxs-lookup"><span data-stu-id="0b63b-115">The MIDL compiler also generates two C source files.</span></span> <span data-ttu-id="0b63b-116">Você compila e vincula um deles ao seu programa cliente e o outro ao seu programa de servidor.</span><span class="sxs-lookup"><span data-stu-id="0b63b-116">You compile and link one of these to your client program, and the other to your server program.</span></span> <span data-ttu-id="0b63b-117">Esses dois arquivos de origem do C são os stubs do cliente e do servidor.</span><span class="sxs-lookup"><span data-stu-id="0b63b-117">These two C source files are the client and server stubs.</span></span> <span data-ttu-id="0b63b-118">Para obter uma visão geral dos stubs do cliente e do servidor, consulte [como funciona o RPC](how-rpc-works.md).</span><span class="sxs-lookup"><span data-stu-id="0b63b-118">For an overview of the client and server stubs, see [How RPC Works](how-rpc-works.md).</span></span> <span data-ttu-id="0b63b-119">Para obter uma visão geral do compilador MIDL, consulte [Compilando um arquivo MIDL](using-midl.md).</span><span class="sxs-lookup"><span data-stu-id="0b63b-119">For an overview on the MIDL compiler, see [Compiling a MIDL File](using-midl.md).</span></span>

<span data-ttu-id="0b63b-120">Por padrão, o cliente e o stub do servidor têm o mesmo nome, o que pode causar problemas se o cliente for vinculado com o stub do servidor ou vice-versa.</span><span class="sxs-lookup"><span data-stu-id="0b63b-120">By default, the client and server stub have the same name, which can cause problems if the client links with the server stub, or vice-versa.</span></span> <span data-ttu-id="0b63b-121">Usar a opção MIDL [**/prefix**](/windows/desktop/Midl/-prefix) impede que esse erro comum ocorra.</span><span class="sxs-lookup"><span data-stu-id="0b63b-121">Using the MIDL [**/prefix**](/windows/desktop/Midl/-prefix) option prevents this common error from occurring.</span></span>

<span data-ttu-id="0b63b-122">A ilustração a seguir mostra o processo de criação de uma interface.</span><span class="sxs-lookup"><span data-stu-id="0b63b-122">The following illustration shows the process of creating an interface.</span></span>

![a criação de stubs de cliente e de servidor com a opção/prefix impede problemas de compilação acidentais](images/idldev.png)

<span data-ttu-id="0b63b-124">É possível que você também precise especificar um arquivo de configuração de aplicativo (ACF) para entrada para o compilador MIDL também.</span><span class="sxs-lookup"><span data-stu-id="0b63b-124">It is possible that you will also need to specify an application configuration file (ACF) for input to the MIDL compiler as well.</span></span> <span data-ttu-id="0b63b-125">Para obter mais informações sobre arquivos de configuração de aplicativo, consulte [os arquivos IDL e ACF](the-idl-and-acf-files.md).</span><span class="sxs-lookup"><span data-stu-id="0b63b-125">For more information on application configuration files, see [The IDL and ACF Files](the-idl-and-acf-files.md).</span></span>

<span data-ttu-id="0b63b-126">Além do compilador MIDL, normalmente você precisará usar o utilitário Uuidgen para gerar um identificador exclusivo universal (UUID, intercambiável com o termo GUID).</span><span class="sxs-lookup"><span data-stu-id="0b63b-126">In addition to the MIDL compiler, you will typically need to use the Uuidgen utility to generate a Universal Unique Identifier (UUID, interchangeable with the term GUID).</span></span> <span data-ttu-id="0b63b-127">Esta seção apresenta informações sobre essas duas ferramentas, divididas nos seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="0b63b-127">This section presents information on both of these tools, divided into the following topics:</span></span>

-   [<span data-ttu-id="0b63b-128">Gerando UUIDs de interface</span><span class="sxs-lookup"><span data-stu-id="0b63b-128">Generating Interface UUIDs</span></span>](generating-interface-uuids.md)
-   [<span data-ttu-id="0b63b-129">Usando MIDL</span><span class="sxs-lookup"><span data-stu-id="0b63b-129">Using MIDL</span></span>](using-midl.md)

 

 