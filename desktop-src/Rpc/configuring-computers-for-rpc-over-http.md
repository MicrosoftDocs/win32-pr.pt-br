---
title: Configurando computadores para RPC sobre HTTP
description: Para usar o HTTP como um protocolo de transporte para RPC, o proxy RPC em execução no IIS (servidor de informações da Internet) deve ser configurado na rede do programa do servidor.
ms.assetid: 5a67af51-924a-4f2b-b013-a4fd1bfaeddd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62d1b39276633f3b827f778deef77edd5630c599
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105751618"
---
# <a name="configuring-computers-for-rpc-over-http"></a><span data-ttu-id="a95f3-103">Configurando computadores para RPC sobre HTTP</span><span class="sxs-lookup"><span data-stu-id="a95f3-103">Configuring Computers for RPC over HTTP</span></span>

<span data-ttu-id="a95f3-104">Para usar o HTTP como um protocolo de transporte para RPC, o proxy RPC em execução no IIS (servidor de informações da Internet) deve ser configurado na rede do programa do servidor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-104">To use HTTP as a transport protocol for RPC, RPC Proxy running within Internet Information Server (IIS) must be configured on the server program's network.</span></span> <span data-ttu-id="a95f3-105">Esta seção descreve as opções de configuração.</span><span class="sxs-lookup"><span data-stu-id="a95f3-105">This section describes configuration options.</span></span> <span data-ttu-id="a95f3-106">Para obter recomendações sobre práticas recomendadas de programação e configuração ao usar RPC sobre HTTP, confira [recomendações de implantação de RPC sobre http](rpc-over-http-deployment-recommendations.md).</span><span class="sxs-lookup"><span data-stu-id="a95f3-106">For recommendations on best programming and configuration practices when using RPC over HTTP, see [RPC over HTTP Deployment Recommendations](rpc-over-http-deployment-recommendations.md).</span></span> <span data-ttu-id="a95f3-107">A tarefa principal é configurar o proxy RPC para aceitar e encaminhar conexões RPC sobre HTTP a um programa de servidor RPC sobre HTTP.</span><span class="sxs-lookup"><span data-stu-id="a95f3-107">The primary task is configuring the RPC Proxy to accept and forward RPC over HTTP connections to an RPC over HTTP server program.</span></span>

<span data-ttu-id="a95f3-108">O IIS deve primeiro ser instalado no computador que executa o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="a95f3-108">IIS must first be installed on the machine running the RPC Proxy.</span></span> <span data-ttu-id="a95f3-109">Depois que o IIS é instalado, o proxy RPC é instalado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-109">Once IIS is installed, the RPC Proxy is installed.</span></span> <span data-ttu-id="a95f3-110">O IIS e o proxy RPC podem ser instalados simultaneamente por meio de **Adicionar ou remover componentes do Windows** no painel de controle.</span><span class="sxs-lookup"><span data-stu-id="a95f3-110">Both IIS and the RPC Proxy can be installed simultaneously from **Add/Remove Windows Components** in the Control Panel.</span></span> <span data-ttu-id="a95f3-111">O proxy RPC é instalado dos **serviços de rede** e é chamado de **RPC sobre proxy http** na instalação do Windows.</span><span class="sxs-lookup"><span data-stu-id="a95f3-111">RPC Proxy is installed from **Networking Services**, and is called **RPC over HTTP Proxy** in Windows setup.</span></span> <span data-ttu-id="a95f3-112">Se o IIS e o proxy RPC forem instalados ao mesmo tempo, o Windows garante que eles sejam instalados na ordem correta.</span><span class="sxs-lookup"><span data-stu-id="a95f3-112">If both IIS and RPC Proxy are installed at the same time, Windows ensures they are installed in the proper order.</span></span>

> [!Note]  
> <span data-ttu-id="a95f3-113">Após a conclusão da instalação, o IIS deverá ser reiniciado se estiver em execução durante o processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="a95f3-113">After installation is complete, IIS must be restarted if it was running during the installation process.</span></span>

 

<span data-ttu-id="a95f3-114">Após a instalação do proxy RPC, algumas tarefas adicionais de configuração devem ser executadas:</span><span class="sxs-lookup"><span data-stu-id="a95f3-114">After installed of the RPC Proxy, some additional configuration tasks must be performed:</span></span>

1.  <span data-ttu-id="a95f3-115">Abra o snap-in do MMC do IIS e configure o diretório virtual do proxy RPC para exigir segurança, conforme explicado em [Segurança RPC sobre http](rpc-over-http-security.md).</span><span class="sxs-lookup"><span data-stu-id="a95f3-115">Open the IIS MMC snap-in and configure the RPC Proxy virtual directory to require security, as explained in [RPC over HTTP Security](rpc-over-http-security.md).</span></span> <span data-ttu-id="a95f3-116">Esta etapa será necessária apenas se você planeja usar RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-116">This step is required only if you plan to use RPC over HTTP v2.</span></span>
2.  <span data-ttu-id="a95f3-117">Se o IIS não tiver um certificado instalado, um certificado válido deverá ser obtido e instalado para esse computador a fim de usar o SSL ao se comunicar com o proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="a95f3-117">If IIS does not have a certificate installed, a valid certificate must be obtained and installed for that computer in order to use SSL when communicating with the RPC Proxy.</span></span> <span data-ttu-id="a95f3-118">Esta etapa é relevante apenas para RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-118">This step is relevant only for RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-119">Como o RPC sobre HTTP v1 não oferece suporte a SSL, essa etapa pode ser omitida para RPC sobre HTTP v1.</span><span class="sxs-lookup"><span data-stu-id="a95f3-119">Since RPC over HTTP v1 does not support SSL, this step can be omitted for RPC over HTTP v1.</span></span>
3.  <span data-ttu-id="a95f3-120">Defina a chave **ValidPorts** conforme descrito em [Segurança RPC sobre http](rpc-over-http-security.md).</span><span class="sxs-lookup"><span data-stu-id="a95f3-120">Set the **ValidPorts** key as described in [RPC over HTTP Security](rpc-over-http-security.md).</span></span>

<span data-ttu-id="a95f3-121">Quando essas tarefas de configuração são concluídas, o RPC sobre proxy HTTP está pronto para encaminhar solicitações do cliente RPC sobre HTTP para o servidor RPC sobre HTTP.</span><span class="sxs-lookup"><span data-stu-id="a95f3-121">When these configuration tasks are completed, the RPC over HTTP proxy is ready to forward requests from the RPC over HTTP client to the RPC over HTTP server.</span></span>

## <a name="rpc-over-http-registry-keys"></a><span data-ttu-id="a95f3-122">Chaves de registro RPC sobre HTTP</span><span class="sxs-lookup"><span data-stu-id="a95f3-122">RPC over HTTP Registry Keys</span></span>

<span data-ttu-id="a95f3-123">Esta seção explica as chaves de registro adicionais usadas para configurar o cliente, o servidor ou o proxy RPC em uma conexão RPC sobre HTTP.</span><span class="sxs-lookup"><span data-stu-id="a95f3-123">This section explains additional registry keys used to configure the client, server or RPC Proxy in an RPC over HTTP connection.</span></span> <span data-ttu-id="a95f3-124">Geralmente, essas chaves não são necessárias; Eles são fornecidos aqui para fins de integridade.</span><span class="sxs-lookup"><span data-stu-id="a95f3-124">These keys are generally not required; they are provided here for completeness.</span></span>

<span data-ttu-id="a95f3-125">**HKLM \\ software \\ Microsoft \\ RPC \\ DefaultChannelLifetime**</span><span class="sxs-lookup"><span data-stu-id="a95f3-125">**HKLM\\Software\\Microsoft\\Rpc\\DefaultChannelLifetime**</span></span>

<span data-ttu-id="a95f3-126">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-126">DWORD.</span></span> <span data-ttu-id="a95f3-127">Substitui o tempo de vida padrão do canal.</span><span class="sxs-lookup"><span data-stu-id="a95f3-127">Overrides the default channel lifetime.</span></span> <span data-ttu-id="a95f3-128">Usado no cliente e no proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="a95f3-128">Used on the client and the RPC Proxy.</span></span> <span data-ttu-id="a95f3-129">O tempo de vida do canal é expresso em bytes.</span><span class="sxs-lookup"><span data-stu-id="a95f3-129">The channel lifetime is expressed in bytes.</span></span> <span data-ttu-id="a95f3-130">Se não for especificado, 1GB será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-130">If not specified, 1GB is used.</span></span> <span data-ttu-id="a95f3-131">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-131">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-132">Quando alterado no proxy RPC, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-132">When changed on RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="a95f3-133">**HKLM \\ software \\ Microsoft \\ RPC \\ ClientReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="a95f3-133">**HKLM\\Software\\Microsoft\\Rpc\\ClientReceiveWindow**</span></span>

<span data-ttu-id="a95f3-134">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-134">DWORD.</span></span> <span data-ttu-id="a95f3-135">Quando presente, especifica a janela de recebimento usada pelo cliente para os dados recebidos do proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="a95f3-135">When present, specifies the receive window used by the client for data received from the RPC Proxy.</span></span> <span data-ttu-id="a95f3-136">O valor mínimo válido é 8K.</span><span class="sxs-lookup"><span data-stu-id="a95f3-136">The minimum valid value is 8K.</span></span> <span data-ttu-id="a95f3-137">O máximo é 1GB.</span><span class="sxs-lookup"><span data-stu-id="a95f3-137">The maximum is 1GB.</span></span> <span data-ttu-id="a95f3-138">Se o valor não estiver presente, 64K será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-138">If the value is not present, 64K is used.</span></span> <span data-ttu-id="a95f3-139">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-139">Used only in RPC over HTTP v2.</span></span>

\-

<span data-ttu-id="a95f3-140">**HKLM \\ software \\ Microsoft \\ RPC \\ InProxyReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="a95f3-140">**HKLM\\Software\\Microsoft\\Rpc\\InProxyReceiveWindow**</span></span>

<span data-ttu-id="a95f3-141">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-141">DWORD.</span></span> <span data-ttu-id="a95f3-142">Quando presente, especifica a janela de recebimento usada pelo proxy RPC para os dados recebidos do cliente.</span><span class="sxs-lookup"><span data-stu-id="a95f3-142">When present, specifies the receive window used by the RPC Proxy for data received from the client.</span></span> <span data-ttu-id="a95f3-143">O valor mínimo válido é 8K.</span><span class="sxs-lookup"><span data-stu-id="a95f3-143">The minimum valid value is 8K.</span></span> <span data-ttu-id="a95f3-144">O máximo é 1GB.</span><span class="sxs-lookup"><span data-stu-id="a95f3-144">The maximum is 1GB.</span></span> <span data-ttu-id="a95f3-145">Se o valor não estiver presente, 64K será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-145">If the value is not present, 64K is used.</span></span> <span data-ttu-id="a95f3-146">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-146">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-147">Quando são feitas alterações nesse valor, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-147">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="a95f3-148">**HKLM \\ software \\ Microsoft \\ RPC \\ OutProxyReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="a95f3-148">**HKLM\\Software\\Microsoft\\Rpc\\OutProxyReceiveWindow**</span></span>

<span data-ttu-id="a95f3-149">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-149">DWORD.</span></span> <span data-ttu-id="a95f3-150">Quando presente, especifica a janela de recebimento usada pelo proxy RPC para os dados recebidos do servidor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-150">When present, specifies the receive window used by the RPC Proxy for data received from the server.</span></span> <span data-ttu-id="a95f3-151">O valor mínimo válido é 8K.</span><span class="sxs-lookup"><span data-stu-id="a95f3-151">The minimum valid value is 8K.</span></span> <span data-ttu-id="a95f3-152">O máximo é 1GB.</span><span class="sxs-lookup"><span data-stu-id="a95f3-152">The maximum is 1GB.</span></span> <span data-ttu-id="a95f3-153">Se o valor não estiver presente, 64K será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-153">If the value is not present, 64K is used.</span></span> <span data-ttu-id="a95f3-154">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-154">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-155">Quando são feitas alterações nesse valor, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-155">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="a95f3-156">**HKLM \\ software \\ Microsoft \\ RPC \\ ServerReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="a95f3-156">**HKLM\\Software\\Microsoft\\Rpc\\ServerReceiveWindow**</span></span>

<span data-ttu-id="a95f3-157">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-157">DWORD.</span></span> <span data-ttu-id="a95f3-158">Quando presente, especifica a janela de recebimento usada pelo servidor para os dados recebidos do proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="a95f3-158">When present, specifies the receive window used by the server for data received from the RPC Proxy.</span></span> <span data-ttu-id="a95f3-159">O valor mínimo válido é 8K.</span><span class="sxs-lookup"><span data-stu-id="a95f3-159">The minimum valid value is 8K.</span></span> <span data-ttu-id="a95f3-160">O máximo é 1GB.</span><span class="sxs-lookup"><span data-stu-id="a95f3-160">The maximum is 1GB.</span></span> <span data-ttu-id="a95f3-161">Se o valor não estiver presente, 64K será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-161">If the value is not present, 64K is used.</span></span> <span data-ttu-id="a95f3-162">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-162">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-163">Quando são feitas alterações nesse valor, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-163">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="a95f3-164">**HKLM \\ software \\ Policies \\ Microsoft \\ Windows NT \\ RPC \\ MinimumConnectionTimeout**</span><span class="sxs-lookup"><span data-stu-id="a95f3-164">**HKLM\\Software\\Policies\\Microsoft\\Windows NT\\Rpc\\MinimumConnectionTimeout**</span></span>

<span data-ttu-id="a95f3-165">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-165">DWORD.</span></span> <span data-ttu-id="a95f3-166">Quando presente, especifica o tempo limite mínimo de conexão usado pelo cliente e proxy de RPC, em segundos.</span><span class="sxs-lookup"><span data-stu-id="a95f3-166">When present, specifies the minimum connection timeout used by the client and RPC Proxy, in seconds.</span></span> <span data-ttu-id="a95f3-167">O tempo limite real usado é o menor desse valor e o tempo limite de conexão ociosa do IIS.</span><span class="sxs-lookup"><span data-stu-id="a95f3-167">The actual timeout used is the lower of this value and the IIS idle connection timeout.</span></span> <span data-ttu-id="a95f3-168">Se zero, ou a chave não estiver presente, o tempo limite de conexão ociosa do IIS será usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-168">If zero, or the key is not present, the IIS idle connection timeout is used.</span></span> <span data-ttu-id="a95f3-169">Usado somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-169">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-170">Quando são feitas alterações nesse valor no proxy RPC, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-170">When changes are made to this value on the RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="a95f3-171">**HKLM \\ software \\ Microsoft \\ RPC \\ UseProxyForIPAddrIfRDNSFails**</span><span class="sxs-lookup"><span data-stu-id="a95f3-171">**HKLM\\Software\\Microsoft\\Rpc\\UseProxyForIPAddrIfRDNSFails**</span></span>

<span data-ttu-id="a95f3-172">Quando presente e definido como diferente de zero e um endereço IP numérico é fornecido como o endereço de proxy RPC, um cliente RPC sobre HTTP tentará reverter a resolução de nome e, se isso falhar, tentará conectar-se ao proxy RPC por meio de um proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="a95f3-172">When present and set to non-zero, and a numeric IP address is provided as the RPC Proxy address, an RPC over HTTP client will attempt reverse name resolution and, if that fails, will attempt connection to the RPC Proxy through an HTTP proxy.</span></span> <span data-ttu-id="a95f3-173">Pode ser usado para emular o comportamento do Windows NT em instalações que exigem tal comportamento.</span><span class="sxs-lookup"><span data-stu-id="a95f3-173">Can be used to emulate Windows NT behavior on installations that require such behavior.</span></span> <span data-ttu-id="a95f3-174">Ignorado para RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-174">Ignored for RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-175">Usado somente quando RPC sobre HTTP v1 é usado.</span><span class="sxs-lookup"><span data-stu-id="a95f3-175">Used only when RPC over HTTP v1 is used.</span></span> <span data-ttu-id="a95f3-176">Com suporte apenas no Windows 2000 com Service Pack 3 (SP3) e posterior.</span><span class="sxs-lookup"><span data-stu-id="a95f3-176">Supported only on Windows 2000 with Service Pack 3 (SP3) and later.</span></span>

\-

<span data-ttu-id="a95f3-177">**HKLM \\ software \\ Microsoft \\ RPC \\ RpcProxy \\ AllowAnonymous**</span><span class="sxs-lookup"><span data-stu-id="a95f3-177">**HKLM\\Software\\Microsoft\\Rpc\\RpcProxy\\AllowAnonymous**</span></span>

<span data-ttu-id="a95f3-178">DWORD.</span><span class="sxs-lookup"><span data-stu-id="a95f3-178">DWORD.</span></span> <span data-ttu-id="a95f3-179">Quando não estiver presente ou definido como zero, o proxy RPC verificará se a conexão é autenticada e se é seguro (SSL ou outra forma de criptografia é usada).</span><span class="sxs-lookup"><span data-stu-id="a95f3-179">When not present or set to zero, the RPC Proxy checks whether the connection is authenticated, and whether it is secure (SSL or other form of encryption is used).</span></span> <span data-ttu-id="a95f3-180">Se for false, a conexão será rejeitada.</span><span class="sxs-lookup"><span data-stu-id="a95f3-180">If either is false, the connection is rejected.</span></span> <span data-ttu-id="a95f3-181">Se esse valor contiver conexões diferentes de zero, anônimas e não criptografadas serão permitidas.</span><span class="sxs-lookup"><span data-stu-id="a95f3-181">If this value contains non-zero, anonymous and non-encrypted connections are allowed.</span></span> <span data-ttu-id="a95f3-182">Essa configuração é uma adição a qualquer configuração de diretório virtual.</span><span class="sxs-lookup"><span data-stu-id="a95f3-182">This setting is an addition to any virtual directory settings.</span></span> <span data-ttu-id="a95f3-183">Por exemplo, se o acesso anônimo estiver desabilitado no nível do diretório virtual, mas **AllowAnonymous** for diferente de zero, o acesso anônimo ainda será bloqueado no nível do IIS.</span><span class="sxs-lookup"><span data-stu-id="a95f3-183">For example, if anonymous access is disabled on the virtual directory level, but **AllowAnonymous** is non-zero, anonymous access will still be blocked at the IIS level.</span></span> <span data-ttu-id="a95f3-184">Usado no proxy RPC somente no RPC sobre HTTP v2.</span><span class="sxs-lookup"><span data-stu-id="a95f3-184">Used on the RPC Proxy only in RPC over HTTP v2.</span></span> <span data-ttu-id="a95f3-185">Quando são feitas alterações nesse valor no proxy RPC, o IIS deve ser reiniciado para que a alteração entre em vigor.</span><span class="sxs-lookup"><span data-stu-id="a95f3-185">When changes are made to this value on the RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

> [!WARNING]
> <span data-ttu-id="a95f3-186">A Microsoft recomenda enfaticamente a definição do valor de **AllowAnonymous** em sistemas de produção para considerações de segurança.</span><span class="sxs-lookup"><span data-stu-id="a95f3-186">Microsoft strongly recommends against setting the **AllowAnonymous** value on production systems for security considerations.</span></span> <span data-ttu-id="a95f3-187">A única razão pela qual essa chave deve ser definida é para teste em redes fechadas sem acesso externo.</span><span class="sxs-lookup"><span data-stu-id="a95f3-187">The only reason this key should be set is for testing on closed networks without outside access.</span></span> <span data-ttu-id="a95f3-188">Qualquer sistema conectado à Internet e executando o proxy RPC com a chave **AllowAnonymous** definida como um valor diferente de zero pode ser vulnerável a ataques.</span><span class="sxs-lookup"><span data-stu-id="a95f3-188">Any system connected to the Internet and running the RPC Proxy with the **AllowAnonymous** key set to a nonzero value may be vulnerable to attacks.</span></span>

 

 

 




