---
description: Ao usar vários viewports, clique em testingdetermines quais visores são afetados pela entrada do usuário, tirando o local da tela de um contato e determinando qual retângulo do visor o contato visita.
ms.assetid: 960EF92D-F439-4A84-AAF9-1469E2830573
title: Usando vários viewports no DirectManipulation
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 627a97a7c9563ca0af9decf79b18340343dda345
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/20/2020
ms.locfileid: "104571303"
---
# <a name="using-multiple-viewports-in-directmanipulation"></a><span data-ttu-id="d3dbf-103">Usando vários viewports no DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="d3dbf-103">Using multiple viewports in DirectManipulation</span></span>

<span data-ttu-id="d3dbf-104">Ao usar vários viewports, o *teste de clique* determina quais visores são afetados pela entrada do usuário, tirando o local da tela de um contato e determinando qual retângulo do visor o contato acessa.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-104">When using multiple viewports, *Hit testing* determines which viewport(s) are affected by user input by taking the screen location of a contact and determining which viewport rectangle the contact hits.</span></span>

<span data-ttu-id="d3dbf-105">Um cenário comum na [manipulação direta](direct-manipulation-portal.md) é posicionar um visor dentro de outro, também conhecido como *visores de aninhamento*.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-105">A common scenario in [Direct Manipulation](direct-manipulation-portal.md) is to place one viewport inside another, also known as *nesting viewports*.</span></span> <span data-ttu-id="d3dbf-106">Se o contato atingir mais de um visor, a ordem das chamadas  [**setcontact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) pelo [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) da janela determinará a relação pai-filho das visores aninhados.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-106">If the contact hits more than one viewport, the order of  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) calls by the window's [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) determines the parent-child relationship of the nested viewports.</span></span>

<span data-ttu-id="d3dbf-107">Regra: o elemento filho deve chamar [**setcontact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)antes de chamar o pai.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-107">Rule: The child element should call [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)before calling the parent.</span></span>

![diagrama mostrando hierachy de teste de clique](images/dm-art-8.png)

<span data-ttu-id="d3dbf-109">Um contato fica inativo em um visor.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-109">A contact comes down in a viewport.</span></span> <span data-ttu-id="d3dbf-110">[**Setcontact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) deve ser chamado primeiro no visor laranja (filho) e, em seguida, o visor verde (pai) para estabelecer a hierarquia correta.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-110">[**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) should first be called on the orange (child) viewport and then the green (parent) viewport to establish the correct hierarchy.</span></span>

## <a name="targeting-the-correct-viewport"></a><span data-ttu-id="d3dbf-111">Direcionando o visor correto</span><span class="sxs-lookup"><span data-stu-id="d3dbf-111">Targeting the correct viewport</span></span>

<span data-ttu-id="d3dbf-112">Um contato pode ser associado a qualquer número de visores e cada contato pode ser atribuído a um conjunto diferente de visores.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-112">A contact can be associated with any number of viewports and each contact can be assigned to a different set of viewports.</span></span>

<span data-ttu-id="d3dbf-113">Cada visor pode ser configurado para dar suporte a interações específicas, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-113">Each viewport can be configured to support specific interactions, as required.</span></span>

<span data-ttu-id="d3dbf-114">Com base nessas configurações, a [manipulação direta](direct-manipulation-portal.md) identifica qual visor manipula a entrada.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-114">Based on these settings, [Direct Manipulation](direct-manipulation-portal.md) identifies which viewport handles the input.</span></span> <span data-ttu-id="d3dbf-115">O visor mais filho na hierarquia de teste de clique tem a primeira chance de lidar com a entrada.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-115">The child-most viewport in the hit testing hierarchy has the first chance to handle the input.</span></span> <span data-ttu-id="d3dbf-116">No entanto, o encadeamento e a promoção pai podem alterar qual visor manipula a entrada.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-116">However, both chaining and parent promotion can change which viewport handles the input.</span></span>

## <a name="chaining"></a><span data-ttu-id="d3dbf-117">Encadeamento</span><span class="sxs-lookup"><span data-stu-id="d3dbf-117">Chaining</span></span>

<span data-ttu-id="d3dbf-118">Quando o final do conteúdo é atingido durante uma manipulação, a [manipulação direta](direct-manipulation-portal.md) aplica um efeito de limite para indicar que o conteúdo pode não ficar mais.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-118">When the end of the content is reached during a manipulation, [Direct Manipulation](direct-manipulation-portal.md) applies a boundary effect to indicate that the content can go no further.</span></span> <span data-ttu-id="d3dbf-119">No entanto, se um visor filho for *encadeado* a um visor pai, esse efeito será suprimido.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-119">However, if a child viewport is *chained* to a parent viewport, this effect is suppressed.</span></span> <span data-ttu-id="d3dbf-120">Em vez disso, o visor ancestral mais próximo na hierarquia de teste de clique que dá suporte à manipulação, lida com a entrada.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-120">Instead, the closest ancestor viewport in the hit testing hierarchy that supports the manipulation, handles the input.</span></span> <span data-ttu-id="d3dbf-121">Se a direção da manipulação for invertida de modo que o ancestral retorne ao ponto em que o encadeamento foi disparado, a manipulação de "descadeias" e o controle será transferido de volta para o visor filho.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-121">If the direction of the manipulation is reversed such that the ancestor returns to the point where chaining was triggered, the manipulation "unchains" and control transfers back to the child viewport.</span></span>

![diagrama mostrando a manipulação encadeada](images/dm-art-9.png)

<span data-ttu-id="d3dbf-123">Quando o usuário passa o visor filho até a borda do conteúdo, a manipulação "encadeia" para o visor pai e o usuário começa a panorâmica do conteúdo pai em vez disso.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-123">When the user pans the child viewport all the way to the edge of the content, the manipulation "chains" to the parent viewport, and the user begins panning the parent content instead.</span></span>

> [!Note]  
> <span data-ttu-id="d3dbf-124">A cadeia dos eixos X e Y independentemente uma da outra, portanto, se uma panorâmica diagonal atingir o limite x antes do limite y, a manipulação moverá o pai na direção x enquanto continua a mover o filho na direção y.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-124">The X and Y axes chain independently of one another, so if a diagonal pan hits the x boundary before the y boundary, the manipulation moves the parent in the x direction while continuing to move the child in the y direction.</span></span> <span data-ttu-id="d3dbf-125">Para habilitar ou desabilitar o encadeamento, chame a API [**Setchaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) no visor filho.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-125">To enable or disable chaining, call the [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) API on the child viewport.</span></span>

### <a name="rails"></a><span data-ttu-id="d3dbf-126">Rails</span><span class="sxs-lookup"><span data-stu-id="d3dbf-126">Rails</span></span>

<span data-ttu-id="d3dbf-127">A especificação de Rails na configuração de um visor afeta a maneira como a entrada é encadeada do visor.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-127">Specifying rails in a viewport’s configuration affects the way input is chained from the viewport.</span></span> <span data-ttu-id="d3dbf-128">Especificamente, a entrada não pode encadear de um visor filho Rails para seu pai no modo de panorâmica "não encadeado" de trilhos.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-128">Specifically, input cannot chain from a railed child viewport to its parent in the “unrailed” panning mode of rails.</span></span> <span data-ttu-id="d3dbf-129">Para entrada de encadeamento quando Rails são definidos, o usuário deve ter o movimento panorâmico vertical ou horizontalmente e estar bloqueado para os trilhos.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-129">To chain input when rails are set, the user must have panned vertically or horizontally and be locked to the rails.</span></span>

### <a name="zooming"></a><span data-ttu-id="d3dbf-130">Zoom</span><span class="sxs-lookup"><span data-stu-id="d3dbf-130">Zooming</span></span>

<span data-ttu-id="d3dbf-131">Se um visor filho estiver aninhado dentro de um pai e ambos estiverem configurados para zoom, uma manipulação de zoom poderá encadear de filho para pai.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-131">If a child viewport is nested inside a parent, and both are configured for zoom, a zoom manipulation can chain from child to parent.</span></span> <span data-ttu-id="d3dbf-132">No entanto, se a manipulação continuar, ela só funcionará no pai e não poderá "desencadear" para o filho.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-132">However, if the manipulation continues, it works only on the parent and cannot “unchain” to the child.</span></span> <span data-ttu-id="d3dbf-133">Se o usuário encadear um zoom do filho para o pai, a [manipulação direta](direct-manipulation-portal.md) suspenderá o filho até que todos os contatos associados à manipulação sejam removidos da tela.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-133">If the user chains a zoom from child to parent, [Direct Manipulation](direct-manipulation-portal.md) suspends the child until all contacts associated with the manipulation are removed from the screen.</span></span> <span data-ttu-id="d3dbf-134">Neste ponto, o filho é liberado da suspensão e o usuário pode deslocar o visor filho.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-134">At this point, the child is released from suspension and the user can pan the child viewport.</span></span>

## <a name="gesture-targeting-parent-promotion"></a><span data-ttu-id="d3dbf-135">Direcionamento de gesto: promoção pai</span><span class="sxs-lookup"><span data-stu-id="d3dbf-135">Gesture targeting: Parent promotion</span></span>

<span data-ttu-id="d3dbf-136">O *direcionamento de gestos* é o processo pelo qual a [manipulação direta](direct-manipulation-portal.md) agrupa contatos e determina qual visor processa a entrada.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-136">*Gesture targeting* is the process by which [Direct Manipulation](direct-manipulation-portal.md) groups contacts together and determines which viewport processes the input.</span></span> <span data-ttu-id="d3dbf-137">*Promoção pai* refere-se aos casos em que a entrada é transferida do filho para o pai.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-137">*Parent promotion* refers to cases where the input is transferred from the child to the parent.</span></span> <span data-ttu-id="d3dbf-138">Por exemplo, quando um usuário coloca dois contatos e pinça em um visor filho configurado apenas para rolagem, a entrada é promovida para o pai para que ocorra um zoom.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-138">For example, when a user puts down two contacts and pinches within a child viewport configured only for scrolling, the input is promoted to the parent so that zooming occurs.</span></span> <span data-ttu-id="d3dbf-139">A promoção pai ocorre independentemente se o encadeamento está habilitado no visor filho.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-139">Parent promotion occurs regardless of whether chaining is enabled on the child viewport.</span></span>

<span data-ttu-id="d3dbf-140">Ao contrário do encadeamento, a promoção pai não é revertida.</span><span class="sxs-lookup"><span data-stu-id="d3dbf-140">Unlike chaining, parent promotion is not reversed.</span></span> <span data-ttu-id="d3dbf-141">O visor pai continua processando a entrada de interação até que todos os contatos sejam levantados (os visores filho param de processar a entrada).</span><span class="sxs-lookup"><span data-stu-id="d3dbf-141">The parent viewport continues to process the interaction input until all contacts are lifted (child viewports stop processing the input).</span></span>
