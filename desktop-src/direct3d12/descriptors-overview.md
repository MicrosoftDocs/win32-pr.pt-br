---
title: Visão geral dos descritores
description: Os descritores são criados por chamadas à API e identificam recursos.
ms.assetid: 64721226-5533-4816-865E-9429032FCC86
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 17d83b2fbfd5c5df2738c61aea4f1d1115d6c874
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/10/2021
ms.locfileid: "104548268"
---
# <a name="descriptors-overview"></a><span data-ttu-id="e67ca-103">Visão geral dos descritores</span><span class="sxs-lookup"><span data-stu-id="e67ca-103">Descriptors Overview</span></span>

<span data-ttu-id="e67ca-104">Os descritores são criados por chamadas à API e identificam recursos.</span><span class="sxs-lookup"><span data-stu-id="e67ca-104">Descriptors are created by API calls and identify resources.</span></span>

-   [<span data-ttu-id="e67ca-105">Dados do descritor</span><span class="sxs-lookup"><span data-stu-id="e67ca-105">Descriptor data</span></span>](#descriptor-data)
-   [<span data-ttu-id="e67ca-106">Identificadores de descritor</span><span class="sxs-lookup"><span data-stu-id="e67ca-106">Descriptor handles</span></span>](#descriptor-handles)
-   [<span data-ttu-id="e67ca-107">Descritores nulos</span><span class="sxs-lookup"><span data-stu-id="e67ca-107">Null descriptors</span></span>](#null-descriptors)
-   [<span data-ttu-id="e67ca-108">Descritores padrão</span><span class="sxs-lookup"><span data-stu-id="e67ca-108">Default descriptors</span></span>](#default-descriptors)
-   [<span data-ttu-id="e67ca-109">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="e67ca-109">Related topics</span></span>](#related-topics)

## <a name="descriptor-data"></a><span data-ttu-id="e67ca-110">Dados do descritor</span><span class="sxs-lookup"><span data-stu-id="e67ca-110">Descriptor data</span></span>

<span data-ttu-id="e67ca-111">Um descritor é um bloco de dados relativamente pequeno que descreve totalmente um objeto para a GPU, em um formato opaco específico de GPU.</span><span class="sxs-lookup"><span data-stu-id="e67ca-111">A descriptor is a relatively small block of data that fully describes an object to the GPU, in a GPU-specific opaque format.</span></span> <span data-ttu-id="e67ca-112">Há vários tipos diferentes de descritores &mdash; renderizar exibições de destino (RTVs), visualizações de estêncil de profundidade (DSVs), exibições de recurso de sombreador (SRVs), exibições de acesso não ordenado (UAVs), exibições de buffer de constantes (CBVs) e amostras.</span><span class="sxs-lookup"><span data-stu-id="e67ca-112">There are several different types of descriptors&mdash;render target views (RTVs), depth stencil views (DSVs), shader resource views (SRVs), unordered access views (UAVs), constant buffer views (CBVs), and samplers.</span></span>

<span data-ttu-id="e67ca-113">Os descritores variam em tamanho, dependendo do hardware da GPU.</span><span class="sxs-lookup"><span data-stu-id="e67ca-113">Descriptors vary in size, depending on the GPU hardware.</span></span> <span data-ttu-id="e67ca-114">Você pode consultar o tamanho de um SRV, UAV ou CBV chamando [**ID3D12Device:: GetDescriptorHandleIncrementSize**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize).</span><span class="sxs-lookup"><span data-stu-id="e67ca-114">You can query for the size of an SRV, UAV, or CBV by calling [**ID3D12Device::GetDescriptorHandleIncrementSize**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize).</span></span> <span data-ttu-id="e67ca-115">Os descritores são mostrados nesta documentação como unidades indivisívels; Aqui está um exemplo.</span><span class="sxs-lookup"><span data-stu-id="e67ca-115">Descriptors are shown in this documentation as indivisible units; here's an example.</span></span>

![SRV, cbv, UAV e amostra](images/single-descriptor.png)

<span data-ttu-id="e67ca-117">Os descritores são criados por chamadas à API e incluirão informações como o recurso e mapas MIP que você deseja que o descritor contenha.</span><span class="sxs-lookup"><span data-stu-id="e67ca-117">Descriptors are created by API calls, and will include information such as the resource and mip-maps you want the descriptor to contain.</span></span>

<span data-ttu-id="e67ca-118">O driver não rastreia ou mantém referências a descritores, cabe ao aplicativo garantir que o tipo de descritor correto esteja em uso e que as informações sejam atuais.</span><span class="sxs-lookup"><span data-stu-id="e67ca-118">The driver does not track or hold references to descriptors, it is up to the app to ensure the correct descriptor type is in use, and that the information is current.</span></span> <span data-ttu-id="e67ca-119">Há uma pequena exceção a isso; o driver inspeciona as associações de destino de renderização para garantir que as cadeias de permuta funcionem corretamente.</span><span class="sxs-lookup"><span data-stu-id="e67ca-119">There is one small exception to this; the driver does inspect render target bindings to ensure swap chains work correctly.</span></span>

<span data-ttu-id="e67ca-120">Os descritores de objeto não precisam ser liberados ou liberados.</span><span class="sxs-lookup"><span data-stu-id="e67ca-120">Object descriptors do not need to be freed or released.</span></span> <span data-ttu-id="e67ca-121">Os drivers não anexam nenhuma alocação à criação de um descritor.</span><span class="sxs-lookup"><span data-stu-id="e67ca-121">Drivers do not attach any allocations to the creation of a descriptor.</span></span> <span data-ttu-id="e67ca-122">Um descritor pode, no entanto, codificar referências a outras alocações para as quais o aplicativo possui o tempo de vida.</span><span class="sxs-lookup"><span data-stu-id="e67ca-122">A descriptor may, however, encode references to other allocations for which the application owns the lifetime.</span></span> <span data-ttu-id="e67ca-123">Por exemplo, um descritor para um SRV deve conter o endereço virtual do recurso D3D (por exemplo, uma textura) ao qual o SRV se refere.</span><span class="sxs-lookup"><span data-stu-id="e67ca-123">For instance, a descriptor for an SRV must contain the virtual address of the D3D resource (e.g. a texture) that the SRV refers to.</span></span> <span data-ttu-id="e67ca-124">É responsabilidade do aplicativo verificar se ele não usa um descritor SRV quando o recurso D3D subjacente do qual ele depende foi destruído ou está sendo modificado (como está sendo declarado como não residente).</span><span class="sxs-lookup"><span data-stu-id="e67ca-124">It is the application's responsibility to make sure that it does not use an SRV descriptor when the underlying D3D resource it depends on has been destroyed or is being modified (such as being declared as nonresident).</span></span>

<span data-ttu-id="e67ca-125">A principal maneira de usar os descritores é colocá-los em heaps de descritores, que estão fazendo backup de memória para descritores.</span><span class="sxs-lookup"><span data-stu-id="e67ca-125">The primary way to use descriptors is to place them in descriptor heaps, which are backing memory for descriptors.</span></span>

## <a name="descriptor-handles"></a><span data-ttu-id="e67ca-126">Identificadores de descritor</span><span class="sxs-lookup"><span data-stu-id="e67ca-126">Descriptor handles</span></span>

<span data-ttu-id="e67ca-127">Um identificador de descritor é o endereço exclusivo do descritor.</span><span class="sxs-lookup"><span data-stu-id="e67ca-127">A descriptor handle is the unique address of the descriptor.</span></span> <span data-ttu-id="e67ca-128">É semelhante a um ponteiro, mas é opaco, pois sua implementação é específica de hardware.</span><span class="sxs-lookup"><span data-stu-id="e67ca-128">It is similar to a pointer, but is opaque as its implementation is hardware specific.</span></span> <span data-ttu-id="e67ca-129">O identificador é exclusivo entre heaps de descritores; portanto, por exemplo, uma matriz de identificadores pode referenciar descritores em vários heaps.</span><span class="sxs-lookup"><span data-stu-id="e67ca-129">The handle is unique across descriptor heaps, so, for example, an array of handles can reference descriptors in multiple heaps.</span></span>

<span data-ttu-id="e67ca-130">Os identificadores de CPU são para uso imediato, como copiar onde a origem e o destino precisam ser identificados.</span><span class="sxs-lookup"><span data-stu-id="e67ca-130">CPU handles are for immediate use, such as copying where both the source and destination need to be identified.</span></span> <span data-ttu-id="e67ca-131">Imediatamente após o uso (por exemplo, uma chamada para [**ID3D12GraphicsCommandList:: OMSetRenderTargets**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)), eles podem ser reutilizados ou seu heap subjacente pode ser Descartado.</span><span class="sxs-lookup"><span data-stu-id="e67ca-131">Immediately after use (for example, a call to [**ID3D12GraphicsCommandList::OMSetRenderTargets**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)), they can be reused, or their underlying heap can be disposed.</span></span>

<span data-ttu-id="e67ca-132">Os identificadores de GPU não são para uso imediato &mdash; que identificam locais de uma lista de comandos, para uso no tempo de execução da GPU.</span><span class="sxs-lookup"><span data-stu-id="e67ca-132">GPU handles are not for immediate use&mdash;they identify locations from a command list, for use at GPU execution time.</span></span> <span data-ttu-id="e67ca-133">Eles devem ser preservados até que qualquer lista de comandos que faça referência a eles tenha sido executada inteiramente.</span><span class="sxs-lookup"><span data-stu-id="e67ca-133">They must be preserved until any command lists referencing them have executed entirely.</span></span>

<span data-ttu-id="e67ca-134">Para criar um identificador de descritor para o início de um heap, depois de criar o próprio heap de descritor, chame um dos seguintes métodos:</span><span class="sxs-lookup"><span data-stu-id="e67ca-134">To create a descriptor handle for the start of a heap, after creating the descriptor heap itself, call one of the following methods:</span></span>

-   [<span data-ttu-id="e67ca-135">**ID3D12DescriptorHeap::GetCPUDescriptorHandleForHeapStart**</span><span class="sxs-lookup"><span data-stu-id="e67ca-135">**ID3D12DescriptorHeap::GetCPUDescriptorHandleForHeapStart**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12descriptorheap-getcpudescriptorhandleforheapstart)
-   [<span data-ttu-id="e67ca-136">**ID3D12DescriptorHeap::GetGPUDescriptorHandleForHeapStart**</span><span class="sxs-lookup"><span data-stu-id="e67ca-136">**ID3D12DescriptorHeap::GetGPUDescriptorHandleForHeapStart**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12descriptorheap-getgpudescriptorhandleforheapstart)

<span data-ttu-id="e67ca-137">Esses métodos retornam as seguintes estruturas:</span><span class="sxs-lookup"><span data-stu-id="e67ca-137">These methods return the following structures:</span></span>

-   [<span data-ttu-id="e67ca-138">**\_Identificador do \_ descritor de CPU D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="e67ca-138">**D3D12\_CPU\_DESCRIPTOR\_HANDLE**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_cpu_descriptor_handle)
-   [<span data-ttu-id="e67ca-139">**\_Identificador do \_ descritor de GPU D3D12 \_**</span><span class="sxs-lookup"><span data-stu-id="e67ca-139">**D3D12\_GPU\_DESCRIPTOR\_HANDLE**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_gpu_descriptor_handle)

<span data-ttu-id="e67ca-140">Como o tamanho dos descritores varia de acordo com o hardware, para obter o incremento entre cada um deles em um heap, use:</span><span class="sxs-lookup"><span data-stu-id="e67ca-140">As the size of the descriptors varies by hardware, to get the increment between each descriptor in a heap use:</span></span>

-   [<span data-ttu-id="e67ca-141">**ID3D12Device::GetDescriptorHandleIncrementSize**</span><span class="sxs-lookup"><span data-stu-id="e67ca-141">**ID3D12Device::GetDescriptorHandleIncrementSize**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getdescriptorhandleincrementsize)

<span data-ttu-id="e67ca-142">É seguro deslocar um local inicial com um número de incrementos, copiar identificadores e passar identificadores para chamadas de API.</span><span class="sxs-lookup"><span data-stu-id="e67ca-142">It is safe to offset a starting location with a number of increments, to copy handles, and to pass handles into API calls.</span></span> <span data-ttu-id="e67ca-143">Não é seguro desreferenciar um identificador como se ele fosse um ponteiro de CPU válido, nem analisar os bits dentro de um identificador.</span><span class="sxs-lookup"><span data-stu-id="e67ca-143">It is not safe to dereference a handle as if it was a valid CPU pointer, nor to analyze the bits within a handle.</span></span>

<span data-ttu-id="e67ca-144">Algumas estruturas auxiliares foram adicionadas, com membros de inicialização, para facilitar o gerenciamento de identificadores.</span><span class="sxs-lookup"><span data-stu-id="e67ca-144">Some helper structures have been added, with initialization members, to make managing handles a little easier.</span></span>

-   [<span data-ttu-id="e67ca-145">**\_Identificador do \_ descritor de CPU CD3DX12 \_**</span><span class="sxs-lookup"><span data-stu-id="e67ca-145">**CD3DX12\_CPU\_DESCRIPTOR\_HANDLE**</span></span>](cd3dx12-cpu-descriptor-handle.md)
-   [<span data-ttu-id="e67ca-146">**\_Identificador do \_ descritor de GPU CD3DX12 \_**</span><span class="sxs-lookup"><span data-stu-id="e67ca-146">**CD3DX12\_GPU\_DESCRIPTOR\_HANDLE**</span></span>](cd3dx12-gpu-descriptor-handle.md)

## <a name="null-descriptors"></a><span data-ttu-id="e67ca-147">Descritores nulos</span><span class="sxs-lookup"><span data-stu-id="e67ca-147">Null descriptors</span></span>

<span data-ttu-id="e67ca-148">Ao criar descritores usando chamadas à API, os aplicativos passam nulos para o ponteiro de recurso na definição do descritor para obter o efeito de nada associado quando acessado por um sombreador.</span><span class="sxs-lookup"><span data-stu-id="e67ca-148">When creating descriptors using API calls, applications pass NULL for the resource pointer in the descriptor definition to achieve the effect of nothing bound when accessed by a shader.</span></span>

<span data-ttu-id="e67ca-149">O restante do descritor deve ser preenchido o máximo possível.</span><span class="sxs-lookup"><span data-stu-id="e67ca-149">The rest of the descriptor must be populated as much as possible.</span></span> <span data-ttu-id="e67ca-150">Por exemplo, no caso de SRVs (exibições de recursos do sombreador), o descritor pode ser usado para distinguir o tipo de exibição é (Texture1D, Texture2D e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="e67ca-150">For example, in the case of Shader Resource Views (SRVs), the descriptor can be used to distinguish the type of view it is (Texture1D, Texture2D, and so on).</span></span> <span data-ttu-id="e67ca-151">Os parâmetros numéricos no descritor de exibição, como o número de mipmaps, devem ser definidos como valores que são válidos para um recurso.</span><span class="sxs-lookup"><span data-stu-id="e67ca-151">Numerical parameters in the view descriptor, such as the number of mipmaps, must all be set to values that are valid for a resource.</span></span>

<span data-ttu-id="e67ca-152">Em muitos casos, há um comportamento definido para acessar um recurso não associado, como SRVs que retorna valores padrão.</span><span class="sxs-lookup"><span data-stu-id="e67ca-152">In many cases, there is a defined behavior for accessing an unbound resource, such as SRVs which return default values.</span></span> <span data-ttu-id="e67ca-153">Eles serão respeitados ao acessar um descritor nulo, contanto que o tipo de acesso ao sombreador seja compatível com o tipo de descritor.</span><span class="sxs-lookup"><span data-stu-id="e67ca-153">Those will be honored when accessing a NULL descriptor as long as the type of shader access is compatible with the descriptor type.</span></span> <span data-ttu-id="e67ca-154">Por exemplo, se um sombreador espera um Texture2D SRV e acessa um SRV nulo definido como um Texture1D, o comportamento é indefinido e pode resultar em redefinição do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e67ca-154">For example, if a shader expects a Texture2D SRV and accesses a NULL SRV defined as a Texture1D, the behavior is undefined and could result in device reset.</span></span>

<span data-ttu-id="e67ca-155">Em resumo, para criar um descritor nulo, passe `null` para o parâmetro de *origem* ao criar o modo de exibição com métodos como [**CreateShaderResourceView**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview).</span><span class="sxs-lookup"><span data-stu-id="e67ca-155">In summary, to create a null descriptor, pass `null` for the *pResource* parameter when creating the view with methods such as [**CreateShaderResourceView**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview).</span></span> <span data-ttu-id="e67ca-156">Para o parâmetro de descrição de exibição *pDesc*, defina uma configuração que funcionaria se o recurso não fosse nulo (caso contrário, uma falha pode ocorrer em algum hardware).</span><span class="sxs-lookup"><span data-stu-id="e67ca-156">For the view description parameter *pDesc*, set a configuration that would work if the resource was not null (otherwise a crash may occur on some hardware).</span></span>

<span data-ttu-id="e67ca-157">Os descritores de raiz, no entanto, não devem ser definidos como NULL.</span><span class="sxs-lookup"><span data-stu-id="e67ca-157">Root descriptors however, should not be set to null.</span></span>

<span data-ttu-id="e67ca-158">No hardware nível 1 (consulte [**camadas de hardware**](./hardware-support.md), todos os descritores associados (por meio de tabelas de descritores) devem ser inicializados, como descritores reais ou descritores nulos, mesmo que não sejam acessados pelo hardware; caso contrário, o comportamento será indefinido.</span><span class="sxs-lookup"><span data-stu-id="e67ca-158">On Tier1 hardware (see [**Hardware Tiers**](./hardware-support.md), all descriptors that are bound (via descriptor tables) must be initialized, either as real descriptors or null descriptors, even if not accessed by the hardware, otherwise behaviour is undefined.</span></span>

<span data-ttu-id="e67ca-159">No hardware tier2, isso se aplica aos descritores CBV e UAV associados, mas não aos descritores SRV.</span><span class="sxs-lookup"><span data-stu-id="e67ca-159">On Tier2 hardware, this applies to bound CBV and UAV descriptors, but not to SRV descriptors.</span></span>

<span data-ttu-id="e67ca-160">No hardware Tier3, não há nenhuma restrição sobre isso, desde que os descritores não inicializados nunca sejam acessados.</span><span class="sxs-lookup"><span data-stu-id="e67ca-160">On Tier3 hardware, there's no restriction on this, provided that uninitialized descriptors are never accessed.</span></span>

## <a name="default-descriptors"></a><span data-ttu-id="e67ca-161">Descritores padrão</span><span class="sxs-lookup"><span data-stu-id="e67ca-161">Default descriptors</span></span>

<span data-ttu-id="e67ca-162">Para criar um descritor padrão para um modo de exibição específico, passe um parâmetro de *origem* válido para o método Create View (como [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview)), mas passe **NULL** para o parâmetro *pDesc* .</span><span class="sxs-lookup"><span data-stu-id="e67ca-162">To create a default descriptor for a particular view, pass in a valid *pResource* parameter to the create view method (such as [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview)), but pass in **NULL** for the *pDesc* parameter.</span></span> <span data-ttu-id="e67ca-163">Por exemplo, se o recurso contiver 14 MIPS, o modo de exibição conterá 14 MIPS.</span><span class="sxs-lookup"><span data-stu-id="e67ca-163">For example, if the resource contained 14 mips, then the view would contain 14 mips.</span></span> <span data-ttu-id="e67ca-164">O caso padrão cobre o mapeamento mais óbvio de um recurso para uma exibição.</span><span class="sxs-lookup"><span data-stu-id="e67ca-164">The default case covers the most obvious mapping of a resource to a view.</span></span> <span data-ttu-id="e67ca-165">Isso requer que o recurso seja alocado com um nome de formato totalmente qualificado (como **DXGI_FORMAT_R8G8B8A8_UNORM_SRGB** em vez de **DXGI_FORMAT_R8G8B8A8_TYPELESS**).</span><span class="sxs-lookup"><span data-stu-id="e67ca-165">This does require that the resource is allocated with a fully qualified format name (such as **DXGI_FORMAT_R8G8B8A8_UNORM_SRGB** rather than **DXGI_FORMAT_R8G8B8A8_TYPELESS**).</span></span>

<span data-ttu-id="e67ca-166">Os descritores padrão não podem ser usados com uma exibição de estrutura de aceleração raytracing, porque o parâmetro de *origem* fornecido deve ser **nulo** e o local deve ser passado por meio de um d3d12_raytracing_acceleration_structure_srv [**D3D12_RAYTRACING_ACCELERATION_STRUCTURE_SRV**]/Windows/Win32/API/d3d12/NS-d3d12-).</span><span class="sxs-lookup"><span data-stu-id="e67ca-166">Default descriptors can't be used with a raytracing acceleration structure view, because the provided *pResource* parameter must be **NULL**, and the location must be passed via a [**D3D12_RAYTRACING_ACCELERATION_STRUCTURE_SRV**]/windows/win32/api/d3d12/ns-d3d12-d3d12_raytracing_acceleration_structure_srv).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e67ca-167">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="e67ca-167">Related topics</span></span>

[<span data-ttu-id="e67ca-168">Descritores</span><span class="sxs-lookup"><span data-stu-id="e67ca-168">Descriptors</span></span>](descriptors.md)