---
title: Desenho indireto
description: O desenho indireto permite que algumas transmissões de cena e ressalvações sejam movidas da CPU para a GPU, o que pode melhorar o desempenho. O buffer de comando pode ser gerado pela CPU ou GPU.
ms.assetid: F8D6C88A-101E-4F66-999F-43206F6527B6
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6fa474a469d5789d4b31830400d981ea771db2e8
ms.sourcegitcommit: b9a7a48e52219bf8d33e6b8171fc9f8b52151e92
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/21/2021
ms.locfileid: "112421874"
---
# <a name="indirect-drawing"></a><span data-ttu-id="0f49f-104">Desenho indireto</span><span class="sxs-lookup"><span data-stu-id="0f49f-104">Indirect Drawing</span></span>

<span data-ttu-id="0f49f-105">O desenho indireto permite que algumas transmissões de cena e ressalvações sejam movidas da CPU para a GPU, o que pode melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="0f49f-105">Indirect drawing enables some scene-traversal and culling to be moved from the CPU to the GPU, which can improve performance.</span></span> <span data-ttu-id="0f49f-106">O buffer de comando pode ser gerado pela CPU ou GPU.</span><span class="sxs-lookup"><span data-stu-id="0f49f-106">The command buffer can be generated by the CPU or GPU.</span></span>

-   [<span data-ttu-id="0f49f-107">Assinaturas de comando</span><span class="sxs-lookup"><span data-stu-id="0f49f-107">Command Signatures</span></span>](#command-signatures)
-   [<span data-ttu-id="0f49f-108">Estruturas de buffer de argumento indireto</span><span class="sxs-lookup"><span data-stu-id="0f49f-108">Indirect Argument Buffer Structures</span></span>](#indirect-argument-buffer-structures)
-   [<span data-ttu-id="0f49f-109">Criação de assinatura de comando</span><span class="sxs-lookup"><span data-stu-id="0f49f-109">Command Signature Creation</span></span>](#command-signature-creation)
    -   [<span data-ttu-id="0f49f-110">Nenhuma alteração de argumento</span><span class="sxs-lookup"><span data-stu-id="0f49f-110">No Argument Changes</span></span>](#no-argument-changes)
    -   [<span data-ttu-id="0f49f-111">Constantes raiz e buffers de vértice</span><span class="sxs-lookup"><span data-stu-id="0f49f-111">Root Constants and Vertex Buffers</span></span>](#root-constants-and-vertex-buffers)
-   [<span data-ttu-id="0f49f-112">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="0f49f-112">Related topics</span></span>](#related-topics)

## <a name="command-signatures"></a><span data-ttu-id="0f49f-113">Assinaturas de comando</span><span class="sxs-lookup"><span data-stu-id="0f49f-113">Command Signatures</span></span>

<span data-ttu-id="0f49f-114">O objeto de assinatura de comando ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) permite que os aplicativos especifiquem o desenho indireto, em particular definindo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="0f49f-114">The command signature object ([**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature)) enables apps to specify indirect drawing, in particular setting the following:</span></span>

-   <span data-ttu-id="0f49f-115">O formato de buffer de argumento indireto.</span><span class="sxs-lookup"><span data-stu-id="0f49f-115">The indirect argument buffer format.</span></span>
-   <span data-ttu-id="0f49f-116">O tipo de comando que será usado (dos métodos [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) [**DrawInstanced,**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced) [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced)ou [**Dispatch**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)).</span><span class="sxs-lookup"><span data-stu-id="0f49f-116">The command type that will be used (from the [**ID3D12GraphicsCommandList**](/windows/desktop/api/d3d12/nn-d3d12-id3d12graphicscommandlist) methods [**DrawInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawinstanced), [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced), or [**Dispatch**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)).</span></span>
-   <span data-ttu-id="0f49f-117">O conjunto de vinculações de recursos que alterará a chamada por comando em comparação com o conjunto que será herdado.</span><span class="sxs-lookup"><span data-stu-id="0f49f-117">The set of resource bindings which will change per-command call versus the set which will be inherited.</span></span>

<span data-ttu-id="0f49f-118">Na inicialização, um aplicativo cria um pequeno conjunto de **assinaturas de comando**.</span><span class="sxs-lookup"><span data-stu-id="0f49f-118">At startup, an app creates a small set of **command signatures**.</span></span> <span data-ttu-id="0f49f-119">Em runtime, o aplicativo preenche um buffer com comandos (por meio de qualquer meio que o desenvolvedor do aplicativo escolher).</span><span class="sxs-lookup"><span data-stu-id="0f49f-119">At runtime, the application fills a buffer with commands (via whatever means the app developer chooses).</span></span> <span data-ttu-id="0f49f-120">Os comandos opcionalmente contêm o estado a ser definido para exibições de buffer de vértice, exibições de buffer de índice, constantes raiz e descritores raiz (SRV/UAV/CBVs brutos ou estruturados).</span><span class="sxs-lookup"><span data-stu-id="0f49f-120">The commands optionally containing state to set for vertex buffer views, index buffer views, root constants and root descriptors (raw or structured SRV/UAV/CBVs).</span></span> <span data-ttu-id="0f49f-121">Esses layouts de argumento não são específicos de hardware, portanto, os aplicativos podem gerar os buffers diretamente.</span><span class="sxs-lookup"><span data-stu-id="0f49f-121">These argument layouts are not hardware specific so apps can generate the buffers directly.</span></span> <span data-ttu-id="0f49f-122">A assinatura de comando herda o estado restante da lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="0f49f-122">The command signature inherits the remaining state from the command list.</span></span> <span data-ttu-id="0f49f-123">Em seguida, o aplicativo chama [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) para instruir a GPU a interpretar o conteúdo do buffer de argumento indireto de acordo com o formato definido por uma assinatura de comando específica.</span><span class="sxs-lookup"><span data-stu-id="0f49f-123">Then the app calls [**ExecuteIndirect**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) to instruct the GPU to interpret the contents of the indirect argument buffer according to the format defined by a particular command signature.</span></span>

<span data-ttu-id="0f49f-124">Se a assinatura de comando mudar os argumentos raiz, ele será armazenado dentro da assinatura de comando como um subconjunto de uma assinatura raiz.</span><span class="sxs-lookup"><span data-stu-id="0f49f-124">If the command signature changes any root arguments, this is stored within the command signature as a subset of a root signature.</span></span>

<span data-ttu-id="0f49f-125">Observe que nenhum estado de assinatura de comando vaza de volta para a lista de comandos quando a execução é concluída.</span><span class="sxs-lookup"><span data-stu-id="0f49f-125">Note that no command signature state leaks back to the command list when the execution is complete.</span></span>

<span data-ttu-id="0f49f-126">Por exemplo, suponha que um desenvolvedor de aplicativos queira que uma constante raiz exclusiva seja especificada por chamada de desenho no buffer de argumento indireto.</span><span class="sxs-lookup"><span data-stu-id="0f49f-126">For example, suppose an app developer wants a unique root constant to be specified per-draw call in the indirect argument buffer.</span></span> <span data-ttu-id="0f49f-127">O aplicativo criaria uma assinatura de comando que permite que o buffer de argumento indireto especifique os seguintes parâmetros por chamada de desenho:</span><span class="sxs-lookup"><span data-stu-id="0f49f-127">The app would create a command signature that enables the indirect argument buffer to specify the following parameters per draw call:</span></span>

-   <span data-ttu-id="0f49f-128">O valor de uma constante raiz.</span><span class="sxs-lookup"><span data-stu-id="0f49f-128">The value of one root constant.</span></span>
-   <span data-ttu-id="0f49f-129">Os argumentos de desenho (contagem de vértices, contagem de instâncias etc.).</span><span class="sxs-lookup"><span data-stu-id="0f49f-129">The draw arguments (vertex count, instance count, etc).</span></span>

<span data-ttu-id="0f49f-130">O buffer de argumento indireto gerado pelo aplicativo conteria uma matriz de registros de tamanho fixo.</span><span class="sxs-lookup"><span data-stu-id="0f49f-130">The indirect argument buffer generated by the application would contain an array of fixed-size records.</span></span> <span data-ttu-id="0f49f-131">Cada estrutura corresponde a uma chamada de desenho.</span><span class="sxs-lookup"><span data-stu-id="0f49f-131">Each structure corresponds to one draw call.</span></span> <span data-ttu-id="0f49f-132">Cada estrutura contém os argumentos de desenho e o valor da constante raiz.</span><span class="sxs-lookup"><span data-stu-id="0f49f-132">Each structure contains the drawing arguments, and the value of the root constant.</span></span> <span data-ttu-id="0f49f-133">O número de chamadas de desenho é especificado em um buffer visível para GPU separado.</span><span class="sxs-lookup"><span data-stu-id="0f49f-133">The number of draw calls is specified in a separate GPU-visible buffer.</span></span>

<span data-ttu-id="0f49f-134">Um exemplo de buffer de comando gerado pelo aplicativo é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="0f49f-134">An example command buffer generated by the app follows:</span></span>

![formato de buffer de comando](images/indirect-drawing-command-buffer.png)

## <a name="indirect-argument-buffer-structures"></a><span data-ttu-id="0f49f-136">Estruturas de buffer de argumento indireto</span><span class="sxs-lookup"><span data-stu-id="0f49f-136">Indirect Argument Buffer Structures</span></span>

<span data-ttu-id="0f49f-137">As estruturas a seguir definem como argumentos específicos aparecem em um buffer de argumento indireto.</span><span class="sxs-lookup"><span data-stu-id="0f49f-137">The following structures define how particular arguments appear in an indirect argument buffer.</span></span> <span data-ttu-id="0f49f-138">Essas estruturas não aparecem em nenhuma API D3D12.</span><span class="sxs-lookup"><span data-stu-id="0f49f-138">These structures do not appear in any D3D12 API.</span></span> <span data-ttu-id="0f49f-139">Os aplicativos usam essas definições ao escrever em um buffer de argumento indireto (com a CPU ou GPU):</span><span class="sxs-lookup"><span data-stu-id="0f49f-139">Applications use these definitions when writing to an indirect argument buffer (with the CPU or GPU):</span></span>

-   [<span data-ttu-id="0f49f-140">**ARGUMENTOS DE DESENHO D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-140">**D3D12\_DRAW\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_arguments)
-   [<span data-ttu-id="0f49f-141">**D3D12 \_ DESENHAR \_ \_ ARGUMENTOS INDEXADOS**</span><span class="sxs-lookup"><span data-stu-id="0f49f-141">**D3D12\_DRAW\_INDEXED\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_draw_indexed_arguments)
-   [<span data-ttu-id="0f49f-142">**ARGUMENTOS DE EXPEDIÇÃO D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-142">**D3D12\_DISPATCH\_ARGUMENTS**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_dispatch_arguments)
-   [<span data-ttu-id="0f49f-143">**EXIBIÇÃO DE \_ BUFFER DE VÉRTICE D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-143">**D3D12\_VERTEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_vertex_buffer_view)
-   [<span data-ttu-id="0f49f-144">**EXIBIÇÃO DE BUFFER DE ÍNDICE D3D12 \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-144">**D3D12\_INDEX\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_index_buffer_view)
-   <span data-ttu-id="0f49f-145">ENDEREÇO VIRTUAL DA GPU D3D12 \_ \_ \_ (um sinônimo typedef'd UINT64).</span><span class="sxs-lookup"><span data-stu-id="0f49f-145">D3D12\_GPU\_VIRTUAL\_ADDRESS (a typedef'd synonym of UINT64).</span></span>
-   [<span data-ttu-id="0f49f-146">**EXIBIÇÃO DE \_ BUFFER CONSTANTE D3D12 \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-146">**D3D12\_CONSTANT\_BUFFER\_VIEW**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_constant_buffer_view_desc)

## <a name="command-signature-creation"></a><span data-ttu-id="0f49f-147">Criação de assinatura de comando</span><span class="sxs-lookup"><span data-stu-id="0f49f-147">Command Signature Creation</span></span>

<span data-ttu-id="0f49f-148">Para criar uma assinatura de comando, use os seguintes itens de API:</span><span class="sxs-lookup"><span data-stu-id="0f49f-148">To create a command signature, use the following API items:</span></span>

-   <span data-ttu-id="0f49f-149">[**ID3D12Device::CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (gera uma [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature))</span><span class="sxs-lookup"><span data-stu-id="0f49f-149">[**ID3D12Device::CreateCommandSignature**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createcommandsignature) (outputs an [**ID3D12CommandSignature**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandsignature))</span></span>
-   [<span data-ttu-id="0f49f-150">**TIPO DE ARGUMENTO INDIRETO D3D12 \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="0f49f-150">**D3D12\_INDIRECT\_ARGUMENT\_TYPE**</span></span>](/windows/desktop/api/d3d12/ne-d3d12-d3d12_indirect_argument_type)
-   [<span data-ttu-id="0f49f-151">**D3D12 \_ \_ DESC DE \_ ARGUMENTO INDIRETO**</span><span class="sxs-lookup"><span data-stu-id="0f49f-151">**D3D12\_INDIRECT\_ARGUMENT\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_indirect_argument_desc)
-   [<span data-ttu-id="0f49f-152">**D3D12 \_ \_ DESC DE ASSINATURA \_ DE COMANDO**</span><span class="sxs-lookup"><span data-stu-id="0f49f-152">**D3D12\_COMMAND\_SIGNATURE\_DESC**</span></span>](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc)

<span data-ttu-id="0f49f-153">A ordenação de argumentos em um buffer de argumento indireto é definida para corresponder exatamente à ordem dos argumentos especificados no parâmetro *pArguments* [**de D3D12 \_ COMMAND SIGNATURE \_ \_ DESC.**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc)</span><span class="sxs-lookup"><span data-stu-id="0f49f-153">The ordering of arguments within an indirect argument buffer is defined to exactly match the order of arguments specified in the *pArguments* parameter of [**D3D12\_COMMAND\_SIGNATURE\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_command_signature_desc).</span></span> <span data-ttu-id="0f49f-154">Todos os argumentos para uma chamada de desenho (gráficos)/dispatch (computação) dentro de um buffer de argumento indireto são firmemente empacotados.</span><span class="sxs-lookup"><span data-stu-id="0f49f-154">All of the arguments for one draw (graphics)/dispatch (compute) call within an indirect argument buffer are tightly packed.</span></span> <span data-ttu-id="0f49f-155">No entanto, os aplicativos têm permissão para especificar uma distância de byte arbitrária entre comandos de desenho/expedição em um buffer de argumento indireto.</span><span class="sxs-lookup"><span data-stu-id="0f49f-155">However, applications are allowed to specify an arbitrary byte stride between draw/dispatch commands in an indirect argument buffer.</span></span>

<span data-ttu-id="0f49f-156">A assinatura raiz deverá ser especificada se e somente se a assinatura de comando mudar um dos argumentos raiz.</span><span class="sxs-lookup"><span data-stu-id="0f49f-156">The root signature must be specified if and only if the command signature changes one of the root arguments.</span></span>

<span data-ttu-id="0f49f-157">Para SRV/UAV/CBV raiz, o tamanho especificado do aplicativo é em bytes.</span><span class="sxs-lookup"><span data-stu-id="0f49f-157">For root SRV/UAV/CBV, the application specified size is in bytes.</span></span> <span data-ttu-id="0f49f-158">A camada de depuração validará as seguintes restrições no endereço:</span><span class="sxs-lookup"><span data-stu-id="0f49f-158">The debug layer will validate the following restrictions on the address:</span></span>

-   <span data-ttu-id="0f49f-159">CBV – o endereço deve ser um múltiplo de 256 bytes.</span><span class="sxs-lookup"><span data-stu-id="0f49f-159">CBV – address must be a multiple of 256 bytes.</span></span>
-   <span data-ttu-id="0f49f-160">SRV/UAV bruto – o endereço deve ser um múltiplo de 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="0f49f-160">Raw SRV/UAV – address must be a multiple of 4 bytes.</span></span>
-   <span data-ttu-id="0f49f-161">SRV/UAV estruturado – o endereço deve ser um múltiplo do passo de byte da estrutura (declarado no sombreador).</span><span class="sxs-lookup"><span data-stu-id="0f49f-161">Structured SRV/UAV – address must be a multiple of the structure byte stride (declared in the shader).</span></span>

<span data-ttu-id="0f49f-162">Uma assinatura de comando determinada é um desenho ou uma assinatura de comando de computação.</span><span class="sxs-lookup"><span data-stu-id="0f49f-162">A given command signature is either a draw or a compute command signature.</span></span> <span data-ttu-id="0f49f-163">Se uma assinatura de comando contiver uma operação de desenho, ela será uma assinatura de comando de gráficos.</span><span class="sxs-lookup"><span data-stu-id="0f49f-163">If a command signature contains a drawing operation, then it is a graphics command signature.</span></span> <span data-ttu-id="0f49f-164">Caso contrário, a assinatura de comando deve conter uma operação de expedição e é uma assinatura de comando de computação.</span><span class="sxs-lookup"><span data-stu-id="0f49f-164">Otherwise, the command signature must contain a dispatch operation, and it is a compute command signature.</span></span>

<span data-ttu-id="0f49f-165">As seções a seguir mostram alguns exemplos de assinaturas de comando.</span><span class="sxs-lookup"><span data-stu-id="0f49f-165">The following sections show some example command signatures.</span></span>

### <a name="no-argument-changes"></a><span data-ttu-id="0f49f-166">Nenhuma alteração de argumento</span><span class="sxs-lookup"><span data-stu-id="0f49f-166">No Argument Changes</span></span>

<span data-ttu-id="0f49f-167">Neste exemplo, o buffer de argumento indireto gerado pelo aplicativo contém uma matriz de estruturas de 36 byte.</span><span class="sxs-lookup"><span data-stu-id="0f49f-167">In this example, the indirect argument buffer generated by the application holds an array of 36-byte structures.</span></span> <span data-ttu-id="0f49f-168">Cada estrutura contém apenas os cinco parâmetros passados [**para DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (mais preenchimento).</span><span class="sxs-lookup"><span data-stu-id="0f49f-168">Each structure only contains the five parameters passed to [**DrawIndexedInstanced**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-drawindexedinstanced) (plus padding).</span></span>

<span data-ttu-id="0f49f-169">O código para criar a descrição da assinatura de comando segue:</span><span class="sxs-lookup"><span data-stu-id="0f49f-169">The code to create the command signature description follows:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[1];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW_INDEXED;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 36;
ProgramDesc.NumArgumentDescs = 1;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="0f49f-170">O layout de uma única estrutura dentro de um buffer de argumento indireto é:</span><span class="sxs-lookup"><span data-stu-id="0f49f-170">The layout of a single structure within an indirect argument buffer is:</span></span>



| <span data-ttu-id="0f49f-171">Bytes</span><span class="sxs-lookup"><span data-stu-id="0f49f-171">Bytes</span></span> | <span data-ttu-id="0f49f-172">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f49f-172">Description</span></span>           |
|-------|-----------------------|
| <span data-ttu-id="0f49f-173">0:3</span><span class="sxs-lookup"><span data-stu-id="0f49f-173">0:3</span></span>   | <span data-ttu-id="0f49f-174">IndexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="0f49f-174">IndexCountPerInstance</span></span> |
| <span data-ttu-id="0f49f-175">4:7</span><span class="sxs-lookup"><span data-stu-id="0f49f-175">4:7</span></span>   | <span data-ttu-id="0f49f-176">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="0f49f-176">InstanceCount</span></span>         |
| <span data-ttu-id="0f49f-177">8:11</span><span class="sxs-lookup"><span data-stu-id="0f49f-177">8:11</span></span>  | <span data-ttu-id="0f49f-178">StartIndexLocation</span><span class="sxs-lookup"><span data-stu-id="0f49f-178">StartIndexLocation</span></span>    |
| <span data-ttu-id="0f49f-179">12:15</span><span class="sxs-lookup"><span data-stu-id="0f49f-179">12:15</span></span> | <span data-ttu-id="0f49f-180">BaseVertexLocation</span><span class="sxs-lookup"><span data-stu-id="0f49f-180">BaseVertexLocation</span></span>    |
| <span data-ttu-id="0f49f-181">16:19</span><span class="sxs-lookup"><span data-stu-id="0f49f-181">16:19</span></span> | <span data-ttu-id="0f49f-182">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="0f49f-182">StartInstanceLocation</span></span> |
| <span data-ttu-id="0f49f-183">20:35</span><span class="sxs-lookup"><span data-stu-id="0f49f-183">20:35</span></span> | <span data-ttu-id="0f49f-184">Preenchimento</span><span class="sxs-lookup"><span data-stu-id="0f49f-184">Padding</span></span>               |



 

### <a name="root-constants-and-vertex-buffers"></a><span data-ttu-id="0f49f-185">Constantes raiz e buffers de vértice</span><span class="sxs-lookup"><span data-stu-id="0f49f-185">Root Constants and Vertex Buffers</span></span>

<span data-ttu-id="0f49f-186">Neste exemplo, cada estrutura em um buffer de argumento indireto altera duas constantes raiz, altera uma associação de buffer de vértice e executa uma operação de desenho não indexada.</span><span class="sxs-lookup"><span data-stu-id="0f49f-186">In this example, each structure in an indirect argument buffer changes two root constants, changes one vertex buffer binding, and performs one drawing non-indexed operation.</span></span> <span data-ttu-id="0f49f-187">Não há preenchimento entre estruturas.</span><span class="sxs-lookup"><span data-stu-id="0f49f-187">There is no padding between structures.</span></span>

<span data-ttu-id="0f49f-188">O código para criar a descrição da assinatura de comando é:</span><span class="sxs-lookup"><span data-stu-id="0f49f-188">The code to create the command signature description is:</span></span>

``` syntax
D3D12_INDIRECT_ARGUMENT_DESC Args[4];
Args[0].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[0].Constant.RootParameterIndex = 2;
Args[0].Constant.DestOffsetIn32BitValues = 0;
Args[0].Constant.Num32BitValuesToSet = 1;

Args[1].Type = D3D12_INDIRECT_ARGUMENT_TYPE_CONSTANT;
Args[1].Constant.RootParameterIndex = 6;
Args[1].Constant.DestOffsetIn32BitValues = 0;
Args[1].Constant.Num32BitValuesToSet = 1;

Args[2].Type = D3D12_INDIRECT_ARGUMENT_TYPE_VERTEX_BUFFER_VIEW;
Args[2].VertexBuffer.Slot = 3;

Args[3].Type = D3D12_INDIRECT_ARGUMENT_TYPE_DRAW;

D3D12_COMMAND_SIGNATURE_DESC ProgramDesc;
ProgramDesc.ByteStride = 40;
ProgramDesc.NumArgumentDescs = 4;
ProgramDesc.pArguments = Args;
```

<span data-ttu-id="0f49f-189">O layout de uma única estrutura dentro do buffer de argumento indireto é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="0f49f-189">The layout of a single structure within the indirect argument buffer is the following:</span></span>



| <span data-ttu-id="0f49f-190">Bytes</span><span class="sxs-lookup"><span data-stu-id="0f49f-190">Bytes</span></span> | <span data-ttu-id="0f49f-191">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f49f-191">Description</span></span>                               |
|-------|-------------------------------------------|
| <span data-ttu-id="0f49f-192">0:3</span><span class="sxs-lookup"><span data-stu-id="0f49f-192">0:3</span></span>   | <span data-ttu-id="0f49f-193">Dados para o índice de parâmetro raiz 2</span><span class="sxs-lookup"><span data-stu-id="0f49f-193">Data for root parameter index 2</span></span>           |
| <span data-ttu-id="0f49f-194">4:7</span><span class="sxs-lookup"><span data-stu-id="0f49f-194">4:7</span></span>   | <span data-ttu-id="0f49f-195">Dados para o índice de parâmetro raiz 6</span><span class="sxs-lookup"><span data-stu-id="0f49f-195">Data for root parameter index 6</span></span>           |
| <span data-ttu-id="0f49f-196">8:15</span><span class="sxs-lookup"><span data-stu-id="0f49f-196">8:15</span></span>  | <span data-ttu-id="0f49f-197">Endereço virtual da VB no slot 3 (64 bits)</span><span class="sxs-lookup"><span data-stu-id="0f49f-197">Virtual address of VB at slot 3 (64-bit)</span></span>  |
| <span data-ttu-id="0f49f-198">16:19</span><span class="sxs-lookup"><span data-stu-id="0f49f-198">16:19</span></span> | <span data-ttu-id="0f49f-199">Tamanho da VB</span><span class="sxs-lookup"><span data-stu-id="0f49f-199">VB size</span></span>                                   |
| <span data-ttu-id="0f49f-200">20:23</span><span class="sxs-lookup"><span data-stu-id="0f49f-200">20:23</span></span> | <span data-ttu-id="0f49f-201">Stride do VB</span><span class="sxs-lookup"><span data-stu-id="0f49f-201">VB stride</span></span>                                 |
| <span data-ttu-id="0f49f-202">24:27</span><span class="sxs-lookup"><span data-stu-id="0f49f-202">24:27</span></span> | <span data-ttu-id="0f49f-203">VertexCountPerInstance</span><span class="sxs-lookup"><span data-stu-id="0f49f-203">VertexCountPerInstance</span></span>                    |
| <span data-ttu-id="0f49f-204">28:31</span><span class="sxs-lookup"><span data-stu-id="0f49f-204">28:31</span></span> | <span data-ttu-id="0f49f-205">InstanceCount</span><span class="sxs-lookup"><span data-stu-id="0f49f-205">InstanceCount</span></span>                             |
| <span data-ttu-id="0f49f-206">32:35</span><span class="sxs-lookup"><span data-stu-id="0f49f-206">32:35</span></span> | <span data-ttu-id="0f49f-207">StartVertexLocation</span><span class="sxs-lookup"><span data-stu-id="0f49f-207">StartVertexLocation</span></span>                       |
| <span data-ttu-id="0f49f-208">36:39</span><span class="sxs-lookup"><span data-stu-id="0f49f-208">36:39</span></span> | <span data-ttu-id="0f49f-209">StartInstanceLocation</span><span class="sxs-lookup"><span data-stu-id="0f49f-209">StartInstanceLocation</span></span>                     |



 

## <a name="related-topics"></a><span data-ttu-id="0f49f-210">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="0f49f-210">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0f49f-211">Tutoriais de vídeo do DirectX Advanced Learning: executar a remoção de GPU indireta e assíncrona</span><span class="sxs-lookup"><span data-stu-id="0f49f-211">DirectX advanced learning video tutorials : Execute Indirect and Async GPU culling</span></span>](https://www.youtube.com/watch?v=fKD-VKJeeds)
</dt> <dt>

[<span data-ttu-id="0f49f-212">Remoção indireta de desenho e GPU: passo a passo de código</span><span class="sxs-lookup"><span data-stu-id="0f49f-212">Indirect drawing and GPU culling : code walk-through</span></span>](indirect-drawing-and-gpu-culling-.md)
</dt> <dt>

[<span data-ttu-id="0f49f-213">Renderização</span><span class="sxs-lookup"><span data-stu-id="0f49f-213">Rendering</span></span>](rendering.md)
</dt> </dl>

 

 
