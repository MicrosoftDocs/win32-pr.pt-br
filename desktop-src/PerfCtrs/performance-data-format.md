---
description: O formato dos dados recuperados pela função RegQueryValueEx começa com uma estrutura de cabeçalho de comprimento fixo, o PERF \_ Data \_ Block.
ms.assetid: a68fa617-834c-4ad9-b922-fac3a648ad75
title: Formato de dados de desempenho
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88029634594843a50fd6010993eb6517dce831f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104558732"
---
# <a name="performance-data-format"></a><span data-ttu-id="d61cf-103">Formato de dados de desempenho</span><span class="sxs-lookup"><span data-stu-id="d61cf-103">Performance Data Format</span></span>

<span data-ttu-id="d61cf-104">O formato dos dados recuperados pela função [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) começa com uma estrutura de cabeçalho de comprimento fixo, o [**perf \_ Data \_ Block**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span><span class="sxs-lookup"><span data-stu-id="d61cf-104">The format of the data retrieved by the [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) function begins with a fixed-length header structure, [**PERF\_DATA\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span></span> <span data-ttu-id="d61cf-105">A estrutura de **\_ \_ bloco de dados perf** descreve o sistema e os dados de desempenho.</span><span class="sxs-lookup"><span data-stu-id="d61cf-105">The **PERF\_DATA\_BLOCK** structure describes the system and the performance data.</span></span> <span data-ttu-id="d61cf-106">A estrutura de **\_ \_ bloco de dados perf** é seguida por um número variável de itens de dados de objeto de comprimento variável.</span><span class="sxs-lookup"><span data-stu-id="d61cf-106">The **PERF\_DATA\_BLOCK** structure is followed by variable number of variable-length object data items.</span></span> <span data-ttu-id="d61cf-107">O cabeçalho de cada item de objeto contém o deslocamento do próximo item de objeto na lista.</span><span class="sxs-lookup"><span data-stu-id="d61cf-107">The header of each object item contains the offset of the next object item in the list.</span></span> <span data-ttu-id="d61cf-108">O diagrama a seguir mostra a estrutura de dados de desempenho básico.</span><span class="sxs-lookup"><span data-stu-id="d61cf-108">The following diagram shows the basic performance data structure.</span></span>

![estrutura de dados de desempenho](images/perfdata.png)

<span data-ttu-id="d61cf-110">Há dois formatos para os itens de dados de objeto: um que dá suporte a várias instâncias e o outro que não oferece suporte a várias instâncias.</span><span class="sxs-lookup"><span data-stu-id="d61cf-110">There are two formats for the object data items: one that supports multiple instances, and the other that does not support multiple instances.</span></span>

<span data-ttu-id="d61cf-111">Cada bloco de item de dados de objeto contém uma estrutura de [**\_ \_ tipo de objeto perf**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) , que descreve os dados de desempenho para o objeto.</span><span class="sxs-lookup"><span data-stu-id="d61cf-111">Each object data item block contains a [**PERF\_OBJECT\_TYPE**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) structure, which describes the performance data for the object.</span></span> <span data-ttu-id="d61cf-112">A estrutura de **\_ \_ tipo de objeto perf** é seguida por uma lista de estruturas de [**definição de \_ contador \_ de desempenho**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) , uma para cada contador definido para o objeto.</span><span class="sxs-lookup"><span data-stu-id="d61cf-112">The **PERF\_OBJECT\_TYPE** structure is followed by a list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures, one for each counter defined for the object.</span></span> <span data-ttu-id="d61cf-113">Para um objeto com apenas uma instância, a lista de estruturas de **\_ \_ definição de contador de desempenho** é seguida por uma única estrutura de [**\_ \_ bloco de contador de desempenho**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) , seguida pelos dados do contador.</span><span class="sxs-lookup"><span data-stu-id="d61cf-113">For an object with only one instance, the list of **PERF\_COUNTER\_DEFINITION** structures is followed by a single [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure, followed by the counter data.</span></span> <span data-ttu-id="d61cf-114">Cada estrutura de **\_ \_ definição de contador de desempenho** contém o deslocamento do início da estrutura de **\_ \_ bloco de contador de desempenho** para os dados do contador correspondente.</span><span class="sxs-lookup"><span data-stu-id="d61cf-114">Each **PERF\_COUNTER\_DEFINITION** structure contains the offset from the start of the **PERF\_COUNTER\_BLOCK** structure to the corresponding counter data.</span></span> <span data-ttu-id="d61cf-115">O diagrama a seguir mostra a estrutura de um objeto de desempenho que não oferece suporte a várias instâncias.</span><span class="sxs-lookup"><span data-stu-id="d61cf-115">The following diagram shows the structure of a performance object that does not support multiple instances.</span></span>

![estrutura do objeto de desempenho que não oferece suporte a várias instâncias](images/perfnoinst.png)

<span data-ttu-id="d61cf-117">Para um tipo de objeto que dá suporte a várias instâncias, a lista de estruturas de [**\_ \_ definição de contador de desempenho**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) é seguida por uma lista de blocos de informações de instância (um para cada instância).</span><span class="sxs-lookup"><span data-stu-id="d61cf-117">For an object type that supports multiple instances, the list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures is followed by a list of instance information blocks (one for each instance).</span></span> <span data-ttu-id="d61cf-118">Cada bloco de informações de instância contém uma estrutura de [**\_ \_ definição de instância perf**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) , o nome da instância e uma estrutura de [**\_ \_ bloco de contador perf**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) .</span><span class="sxs-lookup"><span data-stu-id="d61cf-118">Each instance information block contains a [**PERF\_INSTANCE\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) structure, the name of the instance, and a [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure.</span></span> <span data-ttu-id="d61cf-119">O diagrama a seguir mostra a estrutura de um objeto de desempenho que dá suporte a duas instâncias.</span><span class="sxs-lookup"><span data-stu-id="d61cf-119">The following diagram shows the structure of a performance object that supports two instances.</span></span>

![estrutura de um objeto de desempenho que dá suporte a duas instâncias](images/perfinst.png)

<span data-ttu-id="d61cf-121">Para obter um exemplo que usa os deslocamentos, consulte [exibindo nomes de objeto, instância e contador](displaying-object-instance-and-counter-names.md).</span><span class="sxs-lookup"><span data-stu-id="d61cf-121">For an example that uses the offsets, see [Displaying Object, Instance, and Counter Names](displaying-object-instance-and-counter-names.md).</span></span>

 

 
