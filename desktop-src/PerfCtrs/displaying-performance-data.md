---
description: A maioria dos contadores requer dois valores de exemplo para computar um valor que possa ser reproduzido.
ms.assetid: 75e45baf-51c5-400c-a31f-92bdab4ee492
title: Exibindo dados de desempenho
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 22d913474b794585dd557fae2b1fc232336b637d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105758446"
---
# <a name="displaying-performance-data"></a><span data-ttu-id="31c37-103">Exibindo dados de desempenho</span><span class="sxs-lookup"><span data-stu-id="31c37-103">Displaying Performance Data</span></span>

<span data-ttu-id="31c37-104">A maioria dos contadores requer dois valores de exemplo para computar um valor que possa ser reproduzido.</span><span class="sxs-lookup"><span data-stu-id="31c37-104">Most counters require two sample values in order to compute a displayable value.</span></span> <span data-ttu-id="31c37-105">A fórmula para cada contador determina se o contador requer dois exemplos.</span><span class="sxs-lookup"><span data-stu-id="31c37-105">The formula for each counter determines if the counter requires two samples.</span></span> <span data-ttu-id="31c37-106">Para obter uma lista de contadores e suas fórmulas, consulte a seção tipos de contadores do [Kit de implantação do Windows Server 2003](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="31c37-106">For a list of counters and their formulas, see the Counter Types section of the [Windows Server 2003 Deployment Kit](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10)).</span></span>

<span data-ttu-id="31c37-107">[Coletar dados de desempenho](collecting-performance-data.md) mostra como recuperar dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="31c37-107">[Collecting Performance Data](collecting-performance-data.md) shows how to retrieve sample data.</span></span> <span data-ttu-id="31c37-108">Depois de obter os exemplos, você normalmente chama [**PdhGetFormattedCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcountervalue) para calcular um valor que pode ser displayável.</span><span class="sxs-lookup"><span data-stu-id="31c37-108">Once you have the samples, you typically call [**PdhGetFormattedCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcountervalue) to calculate a displayable value.</span></span>

<span data-ttu-id="31c37-109">Se você precisar dimensionar o valor do contador para cima ou para baixo a fim de exibir o valor, chame a função [**PdhSetCounterScaleFactor**](/windows/desktop/api/Pdh/nf-pdh-pdhsetcounterscalefactor) antes de chamar [**PdhGetFormattedCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcountervalue).</span><span class="sxs-lookup"><span data-stu-id="31c37-109">If you need to scale the counter value up or down in order to display the value, call the [**PdhSetCounterScaleFactor**](/windows/desktop/api/Pdh/nf-pdh-pdhsetcounterscalefactor) function before calling [**PdhGetFormattedCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcountervalue).</span></span> <span data-ttu-id="31c37-110">Os valores do contador podem ser dimensionados por uma potência de dez de um fator de-7 a 7.</span><span class="sxs-lookup"><span data-stu-id="31c37-110">Counter values can be scaled by a power of ten from a factor of -7 to 7.</span></span>

<span data-ttu-id="31c37-111">Se o caminho do contador contiver um caractere curinga para o nome da instância, chame [**PdhGetFormattedCounterArray**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcounterarraya) para recuperar uma matriz de valores de contador formatados para cada instância coletada.</span><span class="sxs-lookup"><span data-stu-id="31c37-111">If the counter path contains a wildcard character for the instance name, call [**PdhGetFormattedCounterArray**](/windows/desktop/api/Pdh/nf-pdh-pdhgetformattedcounterarraya) to retrieve an array of formatted counter values for each instance collected.</span></span>

<span data-ttu-id="31c37-112">Você também pode usar as funções [**PdhCalculateCounterFromRawValue**](/windows/desktop/api/Pdh/nf-pdh-pdhcalculatecounterfromrawvalue) e [**PdhFormatFromRawValue**](/windows/desktop/api/Pdh/nf-pdh-pdhformatfromrawvalue) para calcular um valor de exibição.</span><span class="sxs-lookup"><span data-stu-id="31c37-112">You can also use the [**PdhCalculateCounterFromRawValue**](/windows/desktop/api/Pdh/nf-pdh-pdhcalculatecounterfromrawvalue) and [**PdhFormatFromRawValue**](/windows/desktop/api/Pdh/nf-pdh-pdhformatfromrawvalue) functions to compute a displayable value.</span></span> <span data-ttu-id="31c37-113">Para usar essas funções, você deve recuperar o exemplo coletado após cada chamada de [**PdhCollectQueryData**](/windows/desktop/api/Pdh/nf-pdh-pdhcollectquerydata) e armazenar o exemplo por conta própria.</span><span class="sxs-lookup"><span data-stu-id="31c37-113">To use these functions, you must retrieve the collected sample after each [**PdhCollectQueryData**](/windows/desktop/api/Pdh/nf-pdh-pdhcollectquerydata) call and store the sample yourself.</span></span> <span data-ttu-id="31c37-114">Para recuperar o exemplo, chame a função [**PdhGetRawCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetrawcountervalue) ou [**PdhGetRawCounterArray**](/windows/desktop/api/Pdh/nf-pdh-pdhgetrawcounterarraya) .</span><span class="sxs-lookup"><span data-stu-id="31c37-114">To retrieve the sample, call the [**PdhGetRawCounterValue**](/windows/desktop/api/Pdh/nf-pdh-pdhgetrawcountervalue) or [**PdhGetRawCounterArray**](/windows/desktop/api/Pdh/nf-pdh-pdhgetrawcounterarraya) function.</span></span> <span data-ttu-id="31c37-115">Para valores de contador baseados em tempo, chame [**PdhGetCounterTimeBase**](/windows/desktop/api/Pdh/nf-pdh-pdhgetcountertimebase) antes de **PdhFormatFromRawValue** para recuperar a base de tempo do contador.</span><span class="sxs-lookup"><span data-stu-id="31c37-115">For time-based counter values, call [**PdhGetCounterTimeBase**](/windows/desktop/api/Pdh/nf-pdh-pdhgetcountertimebase) before **PdhFormatFromRawValue** to retrieve the counter's time base.</span></span>

<span data-ttu-id="31c37-116">Se você executar cálculos usando os dados brutos, sempre verifique o membro **CStatus** da estrutura de [**\_ \_ contador bruto do PDH**](/windows/desktop/api/Pdh/ns-pdh-pdh_raw_counter) antes de usar o exemplo.</span><span class="sxs-lookup"><span data-stu-id="31c37-116">If you perform calculations using the raw data, always check the **CStatus** member of the [**PDH\_RAW\_COUNTER**](/windows/desktop/api/Pdh/ns-pdh-pdh_raw_counter) structure before using the sample.</span></span> <span data-ttu-id="31c37-117">O exemplo não será válido se o valor de **CStatus** não for PDH \_ CStatus \_ novos \_ dados ou PDH \_ CStatus \_ \_ dados válidos.</span><span class="sxs-lookup"><span data-stu-id="31c37-117">The sample is not valid if the value of **CStatus** is not PDH\_CSTATUS\_NEW\_DATA or PDH\_CSTATUS\_VALID\_DATA.</span></span>

## <a name="displaying-statistics-for-a-counter"></a><span data-ttu-id="31c37-118">Exibindo estatísticas para um contador</span><span class="sxs-lookup"><span data-stu-id="31c37-118">Displaying statistics for a counter</span></span>

<span data-ttu-id="31c37-119">Se você quiser calcular os valores mínimo, máximo e médio de um contador, chame a função [**PdhComputeCounterStatistics**](/windows/desktop/api/Pdh/nf-pdh-pdhcomputecounterstatistics) .</span><span class="sxs-lookup"><span data-stu-id="31c37-119">If you want to compute the minimum, maximum, and mean values of a counter, call the [**PdhComputeCounterStatistics**](/windows/desktop/api/Pdh/nf-pdh-pdhcomputecounterstatistics) function.</span></span> <span data-ttu-id="31c37-120">Ao coletar exemplos, armazene as estruturas de [**\_ \_ contador brutos de PDH**](/windows/desktop/api/Pdh/ns-pdh-pdh_raw_counter) em uma matriz que você passa para **PdhComputeCounterStatistics**.</span><span class="sxs-lookup"><span data-stu-id="31c37-120">When you collect samples, store the [**PDH\_RAW\_COUNTER**](/windows/desktop/api/Pdh/ns-pdh-pdh_raw_counter) structures in an array that you pass to **PdhComputeCounterStatistics**.</span></span> <span data-ttu-id="31c37-121">A função retorna os valores estatísticos em uma estrutura de [**\_ estatísticas PDH**](/windows/desktop/api/Pdh/ns-pdh-pdh_statistics) .</span><span class="sxs-lookup"><span data-stu-id="31c37-121">The function returns the statistical values in a [**PDH\_STATISTICS**](/windows/desktop/api/Pdh/ns-pdh-pdh_statistics) structure.</span></span>

<span data-ttu-id="31c37-122">Você também pode usar essa função para compactar um arquivo de log.</span><span class="sxs-lookup"><span data-stu-id="31c37-122">You can also use this function to compress a log file.</span></span> <span data-ttu-id="31c37-123">Por exemplo, leia dez registros de um arquivo de log, chame [**PdhComputeCounterStatistics**](/windows/desktop/api/Pdh/nf-pdh-pdhcomputecounterstatistics) para calcular o valor médio e, em seguida, grave o valor médio em um arquivo de log de saída.</span><span class="sxs-lookup"><span data-stu-id="31c37-123">For example, read ten records from a log file, call [**PdhComputeCounterStatistics**](/windows/desktop/api/Pdh/nf-pdh-pdhcomputecounterstatistics) to compute the mean value and then write the mean value to an output log file.</span></span>

 

 
