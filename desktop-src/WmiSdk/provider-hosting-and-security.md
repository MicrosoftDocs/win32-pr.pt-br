---
description: Especifica o modelo de hospedagem do provedor. Definir essa propriedade faz com que o provedor seja carregado em um processo de host compartilhado que tenha um nível de privilégio especificado.
ms.assetid: 1e5c778d-cd29-449b-88e2-fe0c90d0edcd
ms.tgt_platform: multiple
title: Hospedagem e segurança de provedor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db6b88a5727f34fbb76baf62dcdf0488e5eb9eb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105793220"
---
# <a name="provider-hosting-and-security"></a><span data-ttu-id="3826f-104">Hospedagem e segurança de provedor</span><span class="sxs-lookup"><span data-stu-id="3826f-104">Provider Hosting and Security</span></span>

<span data-ttu-id="3826f-105">A propriedade [**HostingModel**](--win32provider.md) na instância do **\_ \_ Win32Provider** que representa o provedor especifica o modelo de hospedagem do provedor.</span><span class="sxs-lookup"><span data-stu-id="3826f-105">The [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider specifies the provider hosting model.</span></span> <span data-ttu-id="3826f-106">Definir essa propriedade faz com que o provedor seja carregado em um processo de host compartilhado que tenha um nível de privilégio especificado.</span><span class="sxs-lookup"><span data-stu-id="3826f-106">Setting this property causes the provider to be loaded into a shared host process that has a specified level of privilege.</span></span>

## <a name="shared-provider-host-process"></a><span data-ttu-id="3826f-107">Processo de host do provedor compartilhado</span><span class="sxs-lookup"><span data-stu-id="3826f-107">Shared Provider Host Process</span></span>

<span data-ttu-id="3826f-108">O WMI reside em um host de serviço compartilhado com vários outros serviços.</span><span class="sxs-lookup"><span data-stu-id="3826f-108">WMI resides in a shared service host with several other services.</span></span> <span data-ttu-id="3826f-109">Para evitar a interrupção de todos os serviços quando um provedor falha, os provedores são carregados em um processo de host separado chamado "Wmiprvse.exe".</span><span class="sxs-lookup"><span data-stu-id="3826f-109">To avoid stopping all the services when a provider fails, providers are loaded into a separate host process named "Wmiprvse.exe".</span></span> <span data-ttu-id="3826f-110">Mais de um processo com esse nome pode estar em execução.</span><span class="sxs-lookup"><span data-stu-id="3826f-110">More than one process with this name can be running.</span></span> <span data-ttu-id="3826f-111">Cada um pode ser executado em uma conta diferente com segurança variável.</span><span class="sxs-lookup"><span data-stu-id="3826f-111">Each can run under a different account with varying security.</span></span> <span data-ttu-id="3826f-112">Lembre-se de que, a partir do Windows Vista, use o comando [**winmgmt**](winmgmt.md) para executar o WMI em um processo separado usando uma porta fixa.</span><span class="sxs-lookup"><span data-stu-id="3826f-112">Be aware that, starting with Windows Vista, use the [**winmgmt**](winmgmt.md) command to run WMI in a separate process by itself using a fixed port.</span></span> <span data-ttu-id="3826f-113">Para obter mais informações, consulte [conectando-se ao WMI remotamente a partir do vista](connecting-to-wmi-remotely-starting-with-vista.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-113">For more information, see [Connecting to WMI Remotely Starting with Vista](connecting-to-wmi-remotely-starting-with-vista.md).</span></span>

<span data-ttu-id="3826f-114">O host compartilhado pode ser executado em uma das seguintes contas de sistema em um processo de host Wmiprvse.exe:</span><span class="sxs-lookup"><span data-stu-id="3826f-114">The shared host can run under one of the following system accounts in a Wmiprvse.exe host process:</span></span>

-   [<span data-ttu-id="3826f-115">LocalSystem</span><span class="sxs-lookup"><span data-stu-id="3826f-115">LocalSystem</span></span>](/windows/desktop/Services/localsystem-account)
-   [<span data-ttu-id="3826f-116">NetworkService</span><span class="sxs-lookup"><span data-stu-id="3826f-116">NetworkService</span></span>](/windows/desktop/Services/networkservice-account)
-   [<span data-ttu-id="3826f-117">LocalService</span><span class="sxs-lookup"><span data-stu-id="3826f-117">LocalService</span></span>](/windows/desktop/Services/localservice-account)

<span data-ttu-id="3826f-118">Um provedor também pode ser um servidor COM local (. exe) ou auto-hospedado, que não requer um host de provedor WMI.</span><span class="sxs-lookup"><span data-stu-id="3826f-118">A provider can also be a local COM server (.exe), or self-hosted, which does not require a WMI provider host.</span></span>

## <a name="setting-the-hosting-model"></a><span data-ttu-id="3826f-119">Definindo o modelo de hospedagem</span><span class="sxs-lookup"><span data-stu-id="3826f-119">Setting the Hosting Model</span></span>

<span data-ttu-id="3826f-120">Como o LocalSystem é uma conta com privilégios, é recomendável que você defina [**HostingModel**](--win32provider.md) como **NetworkServiceHost** quando um provedor estiver sendo executado em um processo de Wmiprvse.exe.</span><span class="sxs-lookup"><span data-stu-id="3826f-120">Because LocalSystem is a privileged account, it is recommended that you set [**HostingModel**](--win32provider.md) to **NetworkServiceHost** when a provider is running in a Wmiprvse.exe process.</span></span> <span data-ttu-id="3826f-121">A conta NetworkServiceHost é para serviços que não exigem privilégios extensos, mas precisam se comunicar remotamente com outros sistemas.</span><span class="sxs-lookup"><span data-stu-id="3826f-121">NetworkServiceHost account is for services that do not require extensive privileges, but do need to communicate remotely with other systems.</span></span>

<span data-ttu-id="3826f-122">Se você não definir um valor para a propriedade [**HostingModel**](--win32provider.md) , o WMI definirá um valor padrão de **NetworkServiceHostOrSelfHost**.</span><span class="sxs-lookup"><span data-stu-id="3826f-122">If you do not set a value for the [**HostingModel**](--win32provider.md) property, WMI will set a default value of **NetworkServiceHostOrSelfHost**.</span></span> <span data-ttu-id="3826f-123">Se o valor **HostingModel** for definido como **LocalSystemHost**, o WMI usará o rastreamento para gerar eventos 5603 e 5604 no log de eventos do Windows.</span><span class="sxs-lookup"><span data-stu-id="3826f-123">If the **HostingModel** value is set to **LocalSystemHost**, WMI uses tracing to generate events 5603 and 5604 in the Windows Event Log.</span></span> <span data-ttu-id="3826f-124">Como a conta [LocalSystem](/windows/desktop/Services/localsystem-account) local é altamente privilegiada, essa configuração não é recomendada.</span><span class="sxs-lookup"><span data-stu-id="3826f-124">Because the local [LocalSystem](/windows/desktop/Services/localsystem-account) account is highly privileged, this setting is not recommended.</span></span> <span data-ttu-id="3826f-125">Você pode exibir esses eventos no **Visualizador de eventos**.</span><span class="sxs-lookup"><span data-stu-id="3826f-125">You can view these events in the **Event Viewer**.</span></span> <span data-ttu-id="3826f-126">Para obter mais informações, consulte [rastreando a atividade WMI](tracing-wmi-activity.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-126">For more information, see [Tracing WMI Activity](tracing-wmi-activity.md).</span></span>

<span data-ttu-id="3826f-127">Defina a propriedade [**HostingModel**](--win32provider.md) para provedores dissociados como "dissociado: com".</span><span class="sxs-lookup"><span data-stu-id="3826f-127">Set the [**HostingModel**](--win32provider.md) property for decoupled providers as "Decoupled:Com".</span></span> <span data-ttu-id="3826f-128">Provedores criados pela adição de classes de instrumentação do [**Microsoft. Management. Infrastructure**](/previous-versions//hh872326(v=vs.85)) no .NET Framework são desacoplados provedores.</span><span class="sxs-lookup"><span data-stu-id="3826f-128">Providers created by adding instrumentation classes from [**Microsoft.Management.Infrastructure**](/previous-versions//hh872326(v=vs.85)) in the .NET Framework are decoupled providers.</span></span> <span data-ttu-id="3826f-129">(Não há mais suporte para **System. Management. instrumentação** .) Para obter mais informações sobre como criar um provedor dissociado, consulte [incorporando um provedor em um aplicativo](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-129">(**System.Management.Instrumentation** is no longer supported.) For more information about creating a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="3826f-130">O modelo de hospedagem é especificado na propriedade [**HostingModel**](--win32provider.md) na instância do **\_ \_ Win32Provider** que representa seu provedor.</span><span class="sxs-lookup"><span data-stu-id="3826f-130">The hosting model is specified in the [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider.</span></span>

<span data-ttu-id="3826f-131">**Para definir o modelo de hospedagem para um provedor**</span><span class="sxs-lookup"><span data-stu-id="3826f-131">**To set the hosting model for a provider**</span></span>

1.  <span data-ttu-id="3826f-132">No arquivo MOF que define seu provedor, crie uma instância do [**\_ \_ Win32Provider**](--win32provider.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-132">In the MOF file that defines your provider, create an instance of [**\_\_Win32Provider**](--win32provider.md).</span></span>
2.  <span data-ttu-id="3826f-133">Atribua um nome ao provedor na propriedade **Name** e atribua o identificador de classe (CLSID) do objeto com do provedor à propriedade **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="3826f-133">Assign a name to the provider in the **Name** property and assign the class identifier (CLSID) of the provider COM object to the **Clsid** property.</span></span>

    <span data-ttu-id="3826f-134">O exemplo de código a seguir atribui um nome à propriedade **Name** e o CSLID do objeto com do provedor à propriedade **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="3826f-134">The following code example assigns a name to the **Name** property and the CSLID of the provider COM object to the **Clsid** property.</span></span>

    ``` syntax
    Instance of __Win32Provider as $NewProvider
    {
        Name = "MyProvider";
        Clsid = "{.......}";
    }
    ```

3.  <span data-ttu-id="3826f-135">Atribua o valor de host compartilhado apropriado à propriedade [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="3826f-135">Assign the appropriate shared host value to the [**HostingModel**](--win32provider.md) property.</span></span> <span data-ttu-id="3826f-136">Valores de host compartilhados, como "NetworkServiceHost", são definidos na propriedade **HostingSpecification** da classe de [**\_ provedores MSFT**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) .</span><span class="sxs-lookup"><span data-stu-id="3826f-136">Shared host values such as "NetworkServiceHost" are defined in the **HostingSpecification** property of [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class.</span></span>

    <span data-ttu-id="3826f-137">O exemplo de código a seguir atribui um valor de host compartilhado à propriedade [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="3826f-137">The following code example assigns a shared host value to the [**HostingModel**](--win32provider.md) property.</span></span>

    ``` syntax
    HostingModel = "NetworkServiceHost";
    ```

<span data-ttu-id="3826f-138">O exemplo de código a seguir mostra como registrar um provedor no NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="3826f-138">The following code example shows how to register a provider in NetworkServiceHost.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost";
}
```

<span data-ttu-id="3826f-139">Se você tiver vários provedores, poderá agrupá-los em um host de serviço específico registrando seu provedor para que ele resida na instância específica.</span><span class="sxs-lookup"><span data-stu-id="3826f-139">If you have multiple providers, you can group them into a specific service host by registering your provider so that it resides in the specific instance.</span></span>

<span data-ttu-id="3826f-140">O exemplo de código a seguir também registra um provedor no NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="3826f-140">The following code example also registers a provider in NetworkServiceHost.</span></span> <span data-ttu-id="3826f-141">A classe de [**\_ provedores de MSFT**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) define valores para os dois valores que se combinam para criar a propriedade **HostingModel** do [**\_ \_ Win32Provider**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="3826f-141">The [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class defines values for the two values that combine to create the [**\_\_Win32Provider**](--win32provider.md) **HostingModel** property.</span></span> <span data-ttu-id="3826f-142">No exemplo, o valor "NetworkServiceHost" vem da propriedade **HostingSpecification** dos **\_ provedores de MSFT** e "LocalServiceHost" vem da Propriedade do The **Hosting** .</span><span class="sxs-lookup"><span data-stu-id="3826f-142">In the example, "NetworkServiceHost" value comes from the **HostingSpecification** property of **MSFT\_Providers** and "LocalServiceHost" comes from the **HostingGroup** property.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost:MySharedHost";
}
```

<span data-ttu-id="3826f-143">Existem problemas de desenvolvimento especiais para provedores que não estão desacoplados e são hospedados no processo do WMIPrvSE.</span><span class="sxs-lookup"><span data-stu-id="3826f-143">Special development issues exist for providers that are not decoupled and are hosted in the Wmiprvse process.</span></span> <span data-ttu-id="3826f-144">Para obter mais informações, consulte [Debugging Providers](debugging-providers.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-144">For more information, see [Debugging Providers](debugging-providers.md).</span></span>

<span data-ttu-id="3826f-145">Se você estiver escrevendo um provedor que contém a propriedade ou o registro do provedor de classe, nem todos os modelos de Threading funcionam.</span><span class="sxs-lookup"><span data-stu-id="3826f-145">If you are writing a provider that contains property or class provider registration, not all threading models work.</span></span> <span data-ttu-id="3826f-146">Para obter mais informações, consulte [escolhendo o registro correto](choosing-correct-registration.md).</span><span class="sxs-lookup"><span data-stu-id="3826f-146">For more information, see [Choosing Correct Registration](choosing-correct-registration.md).</span></span>

## <a name="hostingmodel-values-for-in-process-providers"></a><span data-ttu-id="3826f-147">Valores de HostingModel para provedores de In-Process</span><span class="sxs-lookup"><span data-stu-id="3826f-147">HostingModel Values for In-Process Providers</span></span>

<span data-ttu-id="3826f-148">A lista a seguir lista os valores de modelo de Hospedagem de provedor a serem usados na instância [**\_ \_ Win32Provider**](--win32provider.md) para provedores que são executados em um processo de Wmiprvse.exe.</span><span class="sxs-lookup"><span data-stu-id="3826f-148">The following list lists the provider hosting model values to use in the [**\_\_Win32Provider**](--win32provider.md) instance for providers that run in a Wmiprvse.exe process.</span></span>



| <span data-ttu-id="3826f-149">Valor em [ **\_ \_ Win32Provider. HostingModel**](--win32provider.md)</span><span class="sxs-lookup"><span data-stu-id="3826f-149">Value in [**\_\_Win32Provider.HostingModel**](--win32provider.md)</span></span> | <span data-ttu-id="3826f-150">Descrição</span><span class="sxs-lookup"><span data-stu-id="3826f-150">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3826f-151">**SelfHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-151">**SelfHost**</span></span>                                                       | <span data-ttu-id="3826f-152">O provedor é iniciado usando a implementação do servidor local em vez de em processo.</span><span class="sxs-lookup"><span data-stu-id="3826f-152">The provider starts using the local server implementation instead of in-process.</span></span> <span data-ttu-id="3826f-153">O contexto de segurança do processo no qual o provedor é executado determina o contexto de segurança do provedor.</span><span class="sxs-lookup"><span data-stu-id="3826f-153">The security context of the process in which the provider runs determines the provider security context.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="3826f-154">**LocalSystemHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-154">**LocalSystemHost**</span></span>                                                | <span data-ttu-id="3826f-155">O provedor, se implementado como em processo, é carregado em um host de provedor compartilhado em execução no contexto [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="3826f-155">The provider, if implemented as in-process, is loaded into a shared provider host running under [LocalSystem](/windows/desktop/Services/localsystem-account) context.</span></span> <span data-ttu-id="3826f-156">A partir do Windows Vista, o **LocalSystemHost** não será mais o modelo de hospedagem padrão se o [**HostingModel**](--win32provider.md) de um provedor WMI (**\_ \_ Win32Provider**.\*\*\*\* A Propriedade HostingModel) não está especificada.</span><span class="sxs-lookup"><span data-stu-id="3826f-156">Starting with Windows Vista, **LocalSystemHost** is no longer the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="3826f-157">Para obter mais informações, consulte [segurança dos modelos de hospedagem](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="3826f-157">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="3826f-158">**LocalSystemHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-158">**LocalSystemHostOrSelfHost**</span></span>                                      | <span data-ttu-id="3826f-159">O provedor é auto-hospedado ou carregado no processo de Wmiprvse.exe em execução na conta [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="3826f-159">The provider is self-hosted or loaded into the Wmiprvse.exe process running under the [LocalSystem](/windows/desktop/Services/localsystem-account) account.</span></span> <span data-ttu-id="3826f-160">Como o LocalSystem é uma conta altamente privilegiada, uma entrada é gerada no log de eventos do NT de segurança para notificar os administradores sobre um provedor em execução nesse status confiável.</span><span class="sxs-lookup"><span data-stu-id="3826f-160">Because LocalSystem is a highly privileged account, an entry is generated in the Security NT Event Log to notify administrators of a provider running in this trusted status.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="3826f-161">**NetworkServiceHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-161">**NetworkServiceHost**</span></span>                                             | <span data-ttu-id="3826f-162">O provedor, se implementado como em processo, é carregado no processo de Wmiprvse.exe em execução na conta [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="3826f-162">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="3826f-163">A partir do Windows Vista, esse é o modelo de hospedagem padrão se o [**HostingModel**](--win32provider.md) de um provedor WMI (**\_ \_ Win32Provider**.\*\*\*\* A Propriedade HostingModel) não está especificada.</span><span class="sxs-lookup"><span data-stu-id="3826f-163">Starting with Windows Vista, this is the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="3826f-164">Para obter mais informações, consulte [segurança dos modelos de hospedagem](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="3826f-164">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span><br/> <span data-ttu-id="3826f-165">O **NetworkServiceHost** tem privilégios limitados e, portanto, reduz a possibilidade de um ataque de elevação de privilégio.</span><span class="sxs-lookup"><span data-stu-id="3826f-165">**NetworkServiceHost** has limited privileges and therefore reduces the possibility of an elevation of privilege attack.</span></span> <span data-ttu-id="3826f-166">Se o provedor operar apenas no computador local, defina a propriedade [**HostingModel**](--win32provider.md) como **LocalServiceHost**.</span><span class="sxs-lookup"><span data-stu-id="3826f-166">If the provider only operates within the local computer, then set the [**HostingModel**](--win32provider.md) property to **LocalServiceHost**.</span></span><br/> |
| <span data-ttu-id="3826f-167">**NetworkServiceHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-167">**NetworkServiceHostOrSelfHost**</span></span>                                   | <span data-ttu-id="3826f-168">O provedor é auto-hospedado ou carregado no processo de WmiPrvse.exe em execução na conta [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="3826f-168">The provider is self-hosted or loaded into the WmiPrvse.exe process running under the [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="3826f-169">**NetworkServiceHostOrSelfHost** é a configuração padrão quando a [**Propriedade HostingModel**](--win32provider.md) em **\_ \_ Win32Provider** é **nula**.</span><span class="sxs-lookup"><span data-stu-id="3826f-169">**NetworkServiceHostOrSelfHost** is the default configuration when the [**HostingModel**](--win32provider.md) property in **\_\_Win32Provider** is **NULL**.</span></span> <span data-ttu-id="3826f-170">Como **NetworkServiceHostOrSelfHost** é o padrão, os provedores de sistemas operacionais anteriores podem continuar a funcionar no Windows Vista, no windows Server 2008 e em sistemas operacionais posteriores.</span><span class="sxs-lookup"><span data-stu-id="3826f-170">Because **NetworkServiceHostOrSelfHost** is the default, providers from earlier operating systems can continue to work in Windows Vista, Windows Server 2008, and later operating systems.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="3826f-171">**LocalServiceHost**</span><span class="sxs-lookup"><span data-stu-id="3826f-171">**LocalServiceHost**</span></span>                                               | <span data-ttu-id="3826f-172">O provedor, se implementado como em processo, é carregado no processo de Wmiprvse.exe em execução na conta [LocalService](/windows/desktop/Services/localservice-account) .</span><span class="sxs-lookup"><span data-stu-id="3826f-172">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under the [LocalService](/windows/desktop/Services/localservice-account) account.</span></span> <span data-ttu-id="3826f-173">Esse é o modelo de hospedagem recomendado para serviços porque o LocalService tem privilégios limitados.</span><span class="sxs-lookup"><span data-stu-id="3826f-173">This is the recommended hosting model for services because LocalService has limited privileges.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

## <a name="hostingmodel-values-for-decoupled-providers"></a><span data-ttu-id="3826f-174">Valores de HostingModel para provedores dissociados</span><span class="sxs-lookup"><span data-stu-id="3826f-174">HostingModel Values for Decoupled Providers</span></span>

<span data-ttu-id="3826f-175">A lista a seguir lista os valores de modelo de Hospedagem de provedor para provedores dissociados.</span><span class="sxs-lookup"><span data-stu-id="3826f-175">The following list lists the provider hosting model values for decoupled providers.</span></span>

<dl> <dt>

<span data-ttu-id="3826f-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Dissociado: com**</span><span class="sxs-lookup"><span data-stu-id="3826f-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Decoupled:Com**</span></span>
</dt> <dd>

<span data-ttu-id="3826f-177">O provedor é um provedor dissociado hospedado em um processo separado que é um cliente do WMI.</span><span class="sxs-lookup"><span data-stu-id="3826f-177">The provider is a decoupled provider hosted in a separate process that is a client to WMI.</span></span>

<span data-ttu-id="3826f-178">O exemplo a seguir mostra o especificador FoldIdentity para a propriedade [**HostingModel**](--win32provider.md) definida como **false**, que permite que o provedor represente o cliente.</span><span class="sxs-lookup"><span data-stu-id="3826f-178">The following example shows the FoldIdentity specifier for the [**HostingModel**](--win32provider.md) property set to **FALSE**, which allows the provider to impersonate the client.</span></span>

``` syntax
Decoupled:Com:FoldIdentity(FALSE)
```

<span data-ttu-id="3826f-179">Se FoldIdentity não for especificado, o valor de FoldIdentity será definido como **true** por padrão.</span><span class="sxs-lookup"><span data-stu-id="3826f-179">If FoldIdentity is not specified, the FoldIdentity value is set to **TRUE** by default.</span></span> <span data-ttu-id="3826f-180">Por motivos de segurança, é recomendável que você não especifique FoldIdentity (FALSE), já que um aplicativo não autorizado com representação de delegate pode afetar um domínio inteiro.</span><span class="sxs-lookup"><span data-stu-id="3826f-180">For security reasons, it is recommended that you not specify FoldIdentity(FALSE) since a rogue application with impersonation of Delegate can affect an entire domain.</span></span>

<span data-ttu-id="3826f-181">O exemplo a seguir mostra a propriedade [**HostingModel**](--win32provider.md) definida da maneira recomendada que é equivalente a definir FOLDIDENTITY (true).</span><span class="sxs-lookup"><span data-stu-id="3826f-181">The following example shows the [**HostingModel**](--win32provider.md) property set in the recommended manner that is equivalent to setting FoldIdentity(TRUE).</span></span>

``` syntax
Decoupled:Com
```

</dd> <dt>

<span data-ttu-id="3826f-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Dissociado: noncom**</span><span class="sxs-lookup"><span data-stu-id="3826f-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Decoupled:Noncom**</span></span>
</dt> <dd>

<span data-ttu-id="3826f-183">Somente para uso interno.</span><span class="sxs-lookup"><span data-stu-id="3826f-183">For internal use only.</span></span> <span data-ttu-id="3826f-184">Não há suporte.</span><span class="sxs-lookup"><span data-stu-id="3826f-184">Not supported.</span></span>

</dd> </dl>

## <a name="security-of-hosting-models"></a><span data-ttu-id="3826f-185">Segurança dos modelos de hospedagem</span><span class="sxs-lookup"><span data-stu-id="3826f-185">Security of Hosting Models</span></span>

<span data-ttu-id="3826f-186">Na maioria das situações, o **LocalSystem** é desnecessário e o contexto de **NetworkServiceHost** é mais apropriado.</span><span class="sxs-lookup"><span data-stu-id="3826f-186">For most situations, **LocalSystem** is unnecessary and the **NetworkServiceHost** context is more appropriate.</span></span> <span data-ttu-id="3826f-187">A maioria dos provedores de WMI deve representar o contexto do Client Security para executar as operações solicitadas em nome do cliente WMI.</span><span class="sxs-lookup"><span data-stu-id="3826f-187">Most WMI Providers must impersonate the client security context to perform requested operations on behalf of the WMI client.</span></span> <span data-ttu-id="3826f-188">A partir do Windows Vista, um provedor WMI que não tem uma definição de modelo de hospedagem e é executado como se fosse executado em **LocalSystem** não será executado corretamente.</span><span class="sxs-lookup"><span data-stu-id="3826f-188">Starting with Windows Vista, a WMI provider that lacks a hosting model definition and executes as if it is running under **LocalSystem** will not run properly.</span></span> <span data-ttu-id="3826f-189">Para corrigir essa situação, altere o modelo de hospedagem esperado e verifique se o código do provedor WMI executa as operações no contexto do Client Security, representando o cliente WMI.</span><span class="sxs-lookup"><span data-stu-id="3826f-189">To correct this situation, change the expected hosting model and ensure that the WMI provider code performs the operations in the client security context by impersonating the WMI client.</span></span> <span data-ttu-id="3826f-190">O LocalSystem raramente é um requisito.</span><span class="sxs-lookup"><span data-stu-id="3826f-190">LocalSystem is rarely an requirement.</span></span> <span data-ttu-id="3826f-191">Se o seu provedor precisar ter esse nível de privilégio, especifique o modelo de hospedagem com a seguinte instrução no arquivo MOF.</span><span class="sxs-lookup"><span data-stu-id="3826f-191">If your provider must have that level of privilege, specify the hosting model with the following statement in the MOF file.</span></span>

``` syntax
HostingModel=LocalSystemHost
```

## <a name="related-topics"></a><span data-ttu-id="3826f-192">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="3826f-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3826f-193">Escolhendo o registro correto</span><span class="sxs-lookup"><span data-stu-id="3826f-193">Choosing Correct Registration</span></span>](choosing-correct-registration.md)
</dt> <dt>

[<span data-ttu-id="3826f-194">Acesso a namespaces WMI</span><span class="sxs-lookup"><span data-stu-id="3826f-194">Access to WMI Namespaces</span></span>](access-to-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="3826f-195">Protegendo namespaces WMI</span><span class="sxs-lookup"><span data-stu-id="3826f-195">Securing WMI Namespaces</span></span>](securing-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="3826f-196">Configuração do provedor e classes de solução de problemas</span><span class="sxs-lookup"><span data-stu-id="3826f-196">Provider Configuration and Troubleshooting Classes</span></span>](provider-configuration-and-troubleshooting-classes.md)
</dt> <dt>

[<span data-ttu-id="3826f-197">**Provedores de MSFT \_**</span><span class="sxs-lookup"><span data-stu-id="3826f-197">**MSFT\_Providers**</span></span>](/previous-versions/windows/desktop/wmisystemprov/msft-providers)
</dt> <dt>

[<span data-ttu-id="3826f-198">Mantendo a segurança do WMI</span><span class="sxs-lookup"><span data-stu-id="3826f-198">Maintaining WMI Security</span></span>](maintaining-wmi-security.md)
</dt> </dl>

 

