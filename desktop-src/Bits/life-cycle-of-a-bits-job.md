---
title: Ciclo de vida de um trabalho do BITS
description: O ciclo de vida de um trabalho BITS começa quando você cria um trabalho.
ms.assetid: b765a8ef-74bd-475e-9cd9-e9e2cf4f0305
ms.topic: article
ms.date: 11/13/2018
ms.openlocfilehash: c6ac23c598d28681968e9c0cbed776ba24c57e98
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/05/2021
ms.locfileid: "105756076"
---
# <a name="bits-job-states"></a><span data-ttu-id="2acd4-103">Estados de trabalho do BITS</span><span class="sxs-lookup"><span data-stu-id="2acd4-103">BITS Job states</span></span>
<span data-ttu-id="2acd4-104">Há quatro classes de [**Estados**](/windows/desktop/api/Bits/ne-bits-bg_job_state)do bits: Iniciando, ação, transferido e final.</span><span class="sxs-lookup"><span data-stu-id="2acd4-104">There are four classes of BITS [**states**](/windows/desktop/api/Bits/ne-bits-bg_job_state): starting, action, transferred, and final.</span></span> <span data-ttu-id="2acd4-105">À medida que um trabalho é executado, ele faz a transição entre os Estados nas diferentes classes de estado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-105">As a job runs, it transitions between states in the different state classes.</span></span> <span data-ttu-id="2acd4-106">Quando um trabalho está em um estado final, ele não sai do estado final e não aparecerá em uma enumeração de [trabalho](/windows/desktop/api/bits/nf-bits-ibackgroundcopymanager-enumjobs).</span><span class="sxs-lookup"><span data-stu-id="2acd4-106">Once a job is in a final state, it won't move out of the final state and won't show up in a [job enumeration](/windows/desktop/api/bits/nf-bits-ibackgroundcopymanager-enumjobs).</span></span>

## <a name="state-changing-methods"></a><span data-ttu-id="2acd4-107">Métodos de alteração de estado</span><span class="sxs-lookup"><span data-stu-id="2acd4-107">State-changing methods</span></span>
<span data-ttu-id="2acd4-108">Há quatro métodos de alteração de estado em um trabalho: [**Cancelar**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel), [**concluir**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete), [**retomar**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume)e [**suspender**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend).</span><span class="sxs-lookup"><span data-stu-id="2acd4-108">There are four state-changing methods on a job: [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel), [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete), [**Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume), and [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend).</span></span> <span data-ttu-id="2acd4-109">Desde que um trabalho não esteja em um estado final, você pode chamar qualquer um dos métodos de alteração de estado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-109">As long as a job is not in a final state, you can call any of the state-changing methods.</span></span> 

<span data-ttu-id="2acd4-110">O método [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend) é usado para alternar um trabalho para o estado suspenso.</span><span class="sxs-lookup"><span data-stu-id="2acd4-110">The [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend) method is used to switch a job to the SUSPENDED state.</span></span> <span data-ttu-id="2acd4-111">Quando um trabalho for suspenso, todas as suas transferências serão interrompidas e não serão retomadas até que você chame resume.</span><span class="sxs-lookup"><span data-stu-id="2acd4-111">When a job is suspended, all of its transfers will be stopped and won't resume until you call Resume.</span></span>
<span data-ttu-id="2acd4-112">Um trabalho que já está suspenso simplesmente permanecerá suspenso.</span><span class="sxs-lookup"><span data-stu-id="2acd4-112">A job that's already suspended will simply stay suspended.</span></span>

<span data-ttu-id="2acd4-113">O método [**resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) é usado para iniciar um trabalho suspenso.</span><span class="sxs-lookup"><span data-stu-id="2acd4-113">The [**Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) method is used to start a job that's suspended.</span></span> <span data-ttu-id="2acd4-114">Os trabalhos em um erro ou estado de erro transitório serão configurados para serem repetidos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-114">Jobs in an error or transient error state will be set up to be retried.</span></span> <span data-ttu-id="2acd4-115">Os trabalhos que estão em um estado de ação no momento permanecerão nesse estado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-115">Jobs that are currently in an action state will stay in that state.</span></span>

<span data-ttu-id="2acd4-116">O método [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) é usado para cancelar um trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-116">The [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method is used to cancel a job.</span></span> <span data-ttu-id="2acd4-117">O estado será alternado para cancelado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-117">The state will switch to cancelled.</span></span> <span data-ttu-id="2acd4-118">Todos os arquivos que estão sendo transferidos não serão concluídos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-118">Any files currently being transferred will not be completed.</span></span> <span data-ttu-id="2acd4-119">Todos os arquivos transferidos por completo e parcialmente transferidos serão excluídos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-119">All completely transferred and partially transferred files will be deleted.</span></span>

<span data-ttu-id="2acd4-120">O método [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) concluirá uma transferência.</span><span class="sxs-lookup"><span data-stu-id="2acd4-120">The [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method will finish a transfer.</span></span> <span data-ttu-id="2acd4-121">Todos os arquivos totalmente baixados serão mantidos; os arquivos que não forem totalmente transferidos serão excluídos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-121">Any fully downloaded files will be kept; files that are not fully transferred will be deleted.</span></span>

<span data-ttu-id="2acd4-122">Você deve chamar Cancel ou Complete para mover seu trabalho para um estado final e ser limpo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-122">You must call either Cancel or Complete to move your job to a final state and be cleaned up.</span></span> <span data-ttu-id="2acd4-123">Os trabalhos que não são transferidos para um estado final perderão os recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="2acd4-123">Jobs that aren't transitioned to a final state will waste system resources.</span></span> <span data-ttu-id="2acd4-124">Eventualmente, o BITS cancelará automaticamente os trabalhos antigos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-124">BITS will eventually automatically cancel old jobs.</span></span> <span data-ttu-id="2acd4-125">O [JobInactivityTimeout](/windows/desktop/Bits/group-policies) padrão é cancelar trabalhos após 90 dias.</span><span class="sxs-lookup"><span data-stu-id="2acd4-125">The default [JobInactivityTimeout](/windows/desktop/Bits/group-policies) is to cancel jobs after 90 days.</span></span>


## <a name="starting-state"></a><span data-ttu-id="2acd4-126">Estado inicial</span><span class="sxs-lookup"><span data-stu-id="2acd4-126">Starting state</span></span> 
<span data-ttu-id="2acd4-127">O estado inicial é **suspenso**.</span><span class="sxs-lookup"><span data-stu-id="2acd4-127">The starting state is **SUSPENDED**.</span></span> <span data-ttu-id="2acd4-128">A partir daqui, você pode adicionar arquivos ao trabalho e definir as propriedades do trabalho e do arquivo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-128">From here, you can add files to the job and set job and file properties.</span></span> <span data-ttu-id="2acd4-129">Para iniciar uma transferência de trabalho, chame resume no trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-129">To start a job transferring, call Resume on the job.</span></span> <span data-ttu-id="2acd4-130">Se você retomar um trabalho sem arquivos, ele retornará um BG_E_EMPTY código de erro e o trabalho permanecerá suspenso.</span><span class="sxs-lookup"><span data-stu-id="2acd4-130">If you resume a job with no files, it will return a BG_E_EMPTY error code and the job will stay suspended.</span></span>

## <a name="action-states"></a><span data-ttu-id="2acd4-131">Estados de ação</span><span class="sxs-lookup"><span data-stu-id="2acd4-131">Action states</span></span>
<span data-ttu-id="2acd4-132">Os Estados **enfileirados**, **conectando** e **transferindo** mostram a atividade interna atual do seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-132">The **QUEUED**, **CONNECTING** and **TRANSFERRING** states show the current internal activity of your job.</span></span> <span data-ttu-id="2acd4-133">Um trabalho que está na fila está pronto para ser agendado, possivelmente aguardando o Agendador de BITS ou aguardando que o usuário faça logon.</span><span class="sxs-lookup"><span data-stu-id="2acd4-133">A job that's QUEUED is ready to be scheduled, possibly waiting for the BITS scheduler or waiting for the user to log in.</span></span> <span data-ttu-id="2acd4-134">Um trabalho que está se CONECTAndo está tentando se conectar ao servidor para iniciar a transferência de arquivos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-134">A job that's CONNECTING is attempting to connect to the server to start transferring files.</span></span> <span data-ttu-id="2acd4-135">Um trabalho que está sendo transferido está ativamente carregando ou baixando seus arquivos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-135">A job that's TRANSFERRING is actively uploading or downloading your files.</span></span>

<span data-ttu-id="2acd4-136">O estado de **erro transitório** significa que o trabalho tentou e não transferiu o arquivo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-136">The **TRANSIENT ERROR** state means that the job tried and failed to transfer the file.</span></span> <span data-ttu-id="2acd4-137">Isso pode ser por motivos de diretiva de rede; o trabalho pode estar bloqueado porque a rede atual é muito cara.</span><span class="sxs-lookup"><span data-stu-id="2acd4-137">This might be for network policy reasons; the job might be blocked because the current network is too expensive.</span></span> <span data-ttu-id="2acd4-138">Ele também pode ser bloqueado por motivos do sistema, como o sistema está em modo de economia de bateria ou de jogo, ou porque não há nenhuma conectividade com a Internet.</span><span class="sxs-lookup"><span data-stu-id="2acd4-138">It might also be blocked for system reasons like the system being in battery saver or game mode, or because there's no internet connectivity.</span></span> 

<span data-ttu-id="2acd4-139">Os trabalhos no estado de erro transitório serão repetidos automaticamente por BITS quando apropriado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-139">Jobs in the transient error state will be retried automatically by BITS when appropriate.</span></span> <span data-ttu-id="2acd4-140">O BITS inclui um valor de [MinimumRetryDelay](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) e [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) para controlar quando um trabalho é repetido e quando o bits, por fim, interromperá a repetição.</span><span class="sxs-lookup"><span data-stu-id="2acd4-140">BITS includes a [MinimumRetryDelay](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) and [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) value to control when a job is retried and when BITS will finally stop retrying.</span></span>


## <a name="transferred-states"></a><span data-ttu-id="2acd4-141">Estados transferidos</span><span class="sxs-lookup"><span data-stu-id="2acd4-141">Transferred states</span></span>
<span data-ttu-id="2acd4-142">Os Estados transferidos ocorrem quando não há mais transferência a ser feita.</span><span class="sxs-lookup"><span data-stu-id="2acd4-142">The transferred states happen when there's no more transferring to be done.</span></span> <span data-ttu-id="2acd4-143">Você deve cancelar ou concluir um trabalho nesse estado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-143">You must either cancel or complete a job in this state.</span></span> <span data-ttu-id="2acd4-144">Você também pode adicionar mais arquivos para transferir e chamar resume (), mas essa não é uma prática comum.</span><span class="sxs-lookup"><span data-stu-id="2acd4-144">You may also add more files to transfer and call Resume(), but this isn't a common practice.</span></span>

<span data-ttu-id="2acd4-145">O estado de **erro** ocorre quando uma transferência é feita (ela não será repetida), mas não foi totalmente bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="2acd4-145">The **ERROR** state happens when a transfer is done (it won't be retried), but didn't fully succeed.</span></span> <span data-ttu-id="2acd4-146">Todos os arquivos devem ser transferidos para serem bem-sucedidos; Se qualquer um tiver falhado permanentemente, o trabalho estará em erro.</span><span class="sxs-lookup"><span data-stu-id="2acd4-146">All the files must be transferred to be successful; if any have permanently failed the job will be in error.</span></span> <span data-ttu-id="2acd4-147">Normalmente, você chamará cancelar ou concluir para mover o trabalho para um estado final.</span><span class="sxs-lookup"><span data-stu-id="2acd4-147">You will typically either call Cancel or Complete to move the job to a final state.</span></span> <span data-ttu-id="2acd4-148">A diferença prática é que quando você chama cancelar, qualquer arquivo transferido com êxito será excluído, mas se você chamar concluir, qualquer arquivo transferido com êxito não será excluído.</span><span class="sxs-lookup"><span data-stu-id="2acd4-148">The practical difference is that when you call Cancel, any successfully transferred file will be deleted, but if you call Complete, any successfully transferred file will not be deleted.</span></span>

<span data-ttu-id="2acd4-149">Os motivos para serem em um estado de erro incluem</span><span class="sxs-lookup"><span data-stu-id="2acd4-149">Reasons for being in an ERROR state include</span></span> 
* <span data-ttu-id="2acd4-150">Ficar muito longo em um estado de erro transitório (além da configuração de [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) ).</span><span class="sxs-lookup"><span data-stu-id="2acd4-150">Staying too long in a TRANSIENT ERROR state (beyond the [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) setting).</span></span>
* <span data-ttu-id="2acd4-151">Obter um erro de BG_E_TOKEN_REQUIRED e precisar de assistência com [tokens auxiliares](/windows/desktop/Bits/helper-tokens-for-bits-transfer-jobs)</span><span class="sxs-lookup"><span data-stu-id="2acd4-151">Getting a BG_E_TOKEN_REQUIRED error and needing assistance with [helper tokens](/windows/desktop/Bits/helper-tokens-for-bits-transfer-jobs)</span></span>

<span data-ttu-id="2acd4-152">É uma prática comum reconfigurar um trabalho de erro e, em seguida, chamar resume para repetir o trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-152">It's a common practice to reconfigure an ERROR'd job and then call Resume to retry the job.</span></span> <span data-ttu-id="2acd4-153">Por exemplo, seu aplicativo pode precisar atualizar o nome remoto de um arquivo por meio de [Setremotename](/windows/desktop/api/bits2_0/nf-bits2_0-ibackgroundcopyfile2-setremotename).</span><span class="sxs-lookup"><span data-stu-id="2acd4-153">For example, your app might need to update a file's remote name via [SetRemoteName](/windows/desktop/api/bits2_0/nf-bits2_0-ibackgroundcopyfile2-setremotename).</span></span>

<span data-ttu-id="2acd4-154">O estado **transferido** ocorre quando uma transferência é feita e ela foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="2acd4-154">The **TRANSFERRED** state happens when a transfer is done and it succeeded.</span></span> <span data-ttu-id="2acd4-155">Você deve chamar Complete para finalizar o trabalho; para baixar trabalhos, os arquivos baixados não estarão disponíveis até que você chame concluir.</span><span class="sxs-lookup"><span data-stu-id="2acd4-155">You must call Complete to finalize the job; for download jobs the downloaded files won't be available until after you call Complete.</span></span> <span data-ttu-id="2acd4-156">A exceção a essa regra são os trabalhos que são trabalhos de alto desempenho (e você ainda deve chamar concluído).</span><span class="sxs-lookup"><span data-stu-id="2acd4-156">The exception to this rule is jobs which are the high performance jobs (and you should still call Complete).</span></span>

## <a name="final-states"></a><span data-ttu-id="2acd4-157">Estados finais</span><span class="sxs-lookup"><span data-stu-id="2acd4-157">Final states</span></span>
<span data-ttu-id="2acd4-158">Quando um trabalho está em um estado final, você não pode chamar nenhum dos métodos de alteração de estado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-158">Once a job is in a final state, you can't call any of the state-changing methods.</span></span> <span data-ttu-id="2acd4-159">O trabalho será **confirmado** depois que você chamar Complete () e todos os arquivos baixados concluídos estarão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="2acd4-159">The job will be **ACKNOWLEDGED** after you call Complete() and all completed downloaded files will be available.</span></span> <span data-ttu-id="2acd4-160">O trabalho será **cancelado** depois que você chamar Cancel () e todos os arquivos baixados serão excluídos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-160">The job will be **CANCELLED** after you call Cancel() and all downloaded files will be deleted.</span></span> 


## <a name="life-cycle-of-a-bits-job"></a><span data-ttu-id="2acd4-161">Ciclo de vida de um trabalho do BITS</span><span class="sxs-lookup"><span data-stu-id="2acd4-161">Life Cycle of a BITS job</span></span>

<span data-ttu-id="2acd4-162">O ciclo de vida de um trabalho BITS começa quando você cria um trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-162">The life cycle of a BITS job begins when you create a job.</span></span> <span data-ttu-id="2acd4-163">Um trabalho é um contêiner que contém um ou mais arquivos a serem transferidos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-163">A job is a container that contains one or more files to transfer.</span></span> <span data-ttu-id="2acd4-164">Um trabalho também tem propriedades que especificam como o BITS transfere os arquivos e interage com seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-164">A job also has properties that specify how BITS transfers the files and interacts with your application.</span></span> <span data-ttu-id="2acd4-165">Por exemplo, você pode especificar a prioridade do trabalho, se o trabalho é um trabalho de upload ou de download e para quais eventos você deseja receber a notificação.</span><span class="sxs-lookup"><span data-stu-id="2acd4-165">For example, you can specify the priority of the job, whether the job is an upload or download job, and for which events you want to receive notification.</span></span>

<span data-ttu-id="2acd4-166">Depois de criar o trabalho, adicione um ou mais arquivos (os trabalhos de carregamento podem conter apenas um arquivo) para o trabalho e altere qualquer um dos valores de propriedade conforme apropriado para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-166">After you create the job, add one or more files (upload jobs can contain only one file) to the job and change any of the property values as appropriate for your application.</span></span> <span data-ttu-id="2acd4-167">Ao adicionar um arquivo ao trabalho, especifique o nome local (cliente) e remoto (servidor) do arquivo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-167">When you add a file to the job, specify both the local (client) and remote (server) name of the file.</span></span> <span data-ttu-id="2acd4-168">O nome do arquivo remoto deve usar o protocolo HTTP, HTTPS ou SMB.</span><span class="sxs-lookup"><span data-stu-id="2acd4-168">The remote file name must use the HTTP, HTTPS, or SMB protocol.</span></span> <span data-ttu-id="2acd4-169">Os arquivos em um trabalho são processados sequencialmente (primeiro a entrar, primeiro a sair).</span><span class="sxs-lookup"><span data-stu-id="2acd4-169">Files within a job are processed sequentially (first in, first out).</span></span>

<span data-ttu-id="2acd4-170">O BITS suspende automaticamente os trabalhos quando eles são criados.</span><span class="sxs-lookup"><span data-stu-id="2acd4-170">BITS automatically suspends jobs when they are created.</span></span> <span data-ttu-id="2acd4-171">Você deve retomar o trabalho para ativá-lo na fila de transferência.</span><span class="sxs-lookup"><span data-stu-id="2acd4-171">You must resume the job to activate it in the transfer queue.</span></span> <span data-ttu-id="2acd4-172">Você pode suspender ou retomar um trabalho a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="2acd4-172">You can suspend or resume a job at any time.</span></span> <span data-ttu-id="2acd4-173">Retomar o trabalho move o trabalho do estado suspenso para o estado enfileirado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-173">Resuming the job moves the job from the suspended state to the queued state.</span></span> <span data-ttu-id="2acd4-174">O trabalho permanece no estado Enfileirado até que o Agendador determine que é a vez de transferir os arquivos do trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-174">The job stays in the queued state until the scheduler determines it is the job's turn to transfer files.</span></span> <span data-ttu-id="2acd4-175">Todos os trabalhos de primeiro plano são executados simultaneamente com um trabalho em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="2acd4-175">All foreground jobs run concurrently with one background job.</span></span> <span data-ttu-id="2acd4-176">O BITS processa em série os arquivos em trabalhos em primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="2acd4-176">BITS processes the files within foreground jobs serially.</span></span>

<span data-ttu-id="2acd4-177">Quando é uma vez que um trabalho é transferido para transferir arquivos, o trabalho é movido para o estado de conexão enquanto o BITS se conecta ao servidor remoto (especificado no nome do arquivo remoto).</span><span class="sxs-lookup"><span data-stu-id="2acd4-177">When it is a job's turn to transfer files, the job moves to the connecting state while BITS connects to the remote server (specified in the remote file name).</span></span> <span data-ttu-id="2acd4-178">Se o BITS for capaz de se conectar ao servidor remoto, o trabalho passará para o estado de transferência, onde permanecerá até que sua fatia de tempo termine, a transferência seja concluída, um erro ocorra ou o aplicativo suspende o trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-178">If BITS is able to connect to the remote server, the job moves to the transferring state where it stays until its time slice ends, the transfer is complete, an error occurs, or the application suspends the job.</span></span>

<span data-ttu-id="2acd4-179">O trabalho é movido entre os Estados na fila, na conexão e na transferência até que o BITS transfira todos os arquivos no trabalho.</span><span class="sxs-lookup"><span data-stu-id="2acd4-179">The job moves between the queued, connecting, and transferring states until BITS transfers all files in the job.</span></span> <span data-ttu-id="2acd4-180">Nesse ponto, o trabalho passa para o estado transferido.</span><span class="sxs-lookup"><span data-stu-id="2acd4-180">At that point, the job moves to the transferred state.</span></span> <span data-ttu-id="2acd4-181">O BITS usa agendamento Round Robin para agendar trabalhos que estão no mesmo nível de prioridade.</span><span class="sxs-lookup"><span data-stu-id="2acd4-181">BITS uses round-robin scheduling to schedule jobs that are at the same priority level.</span></span> <span data-ttu-id="2acd4-182">Cada trabalho recebe uma fatia de tempo para processar seus arquivos.</span><span class="sxs-lookup"><span data-stu-id="2acd4-182">Each job is given a slice of time to process its files.</span></span> <span data-ttu-id="2acd4-183">Se o trabalho não for concluído durante sua fração de tempo, o trabalho volta para o estado enfileirado e o próximo trabalho na fila é ativado.</span><span class="sxs-lookup"><span data-stu-id="2acd4-183">If the job does not complete during its time slice, the job goes back to the queued state and the next job in the queue is activated.</span></span> <span data-ttu-id="2acd4-184">Isso impede que trabalhos grandes bloqueiem trabalhos menores.</span><span class="sxs-lookup"><span data-stu-id="2acd4-184">This prevents large jobs from blocking smaller jobs.</span></span> <span data-ttu-id="2acd4-185">Os trabalhos são processados amplamente em uma base PEPS (primeiro a entrar, primeiro a sair); no entanto, o BITS não pode garantir o processamento de FIFO devido a agendamento de Round-Robin, erros de trabalho e reinicializações de serviço.</span><span class="sxs-lookup"><span data-stu-id="2acd4-185">Jobs are processed largely on a first in, first out (FIFO) basis; however, BITS cannot guarantee FIFO processing because of round-robin scheduling, job errors, and service restarts.</span></span>

<span data-ttu-id="2acd4-186">Os arquivos transferidos não estão disponíveis para o cliente até que o aplicativo chame o método [**método ibackgroundcopyjob:: Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) para transferir a propriedade dos arquivos de bits para o usuário.</span><span class="sxs-lookup"><span data-stu-id="2acd4-186">The transferred files are not available to the client until the application calls the [**IBackgroundCopyJob::Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method to transfer ownership of the files from BITS to the user.</span></span> <span data-ttu-id="2acd4-187">Os trabalhos de upload também são definidos para o estado transferido quando o arquivo é recebido com êxito pelo servidor.</span><span class="sxs-lookup"><span data-stu-id="2acd4-187">Upload jobs are also set to the transferred state when the file is successfully received by the server.</span></span> <span data-ttu-id="2acd4-188">Os trabalhos de resposta de upload são definidos para o estado transferido depois que o arquivo é enviado com êxito ao servidor e a resposta do aplicativo de servidor é transferida com êxito para o cliente.</span><span class="sxs-lookup"><span data-stu-id="2acd4-188">Upload-reply jobs are set to the transferred state after the file is successfully sent to the server and the reply from the server application is successfully transferred to the client.</span></span>

<span data-ttu-id="2acd4-189">Se ocorrer um erro, o trabalho será movido para o estado de erro fatal ou transitório.</span><span class="sxs-lookup"><span data-stu-id="2acd4-189">If an error occurs, the job moves to either the fatal or transient error state.</span></span> <span data-ttu-id="2acd4-190">Erros fatais são erros dos quais o BITS não pode se recuperar ou que exigem a correção da intervenção.</span><span class="sxs-lookup"><span data-stu-id="2acd4-190">Fatal errors are errors that BITS cannot recover from or which require intervention to fix.</span></span> <span data-ttu-id="2acd4-191">Se o aplicativo for capaz de corrigir o erro, o aplicativo retoma o trabalho e os BITS movem o trabalho para o estado na fila.</span><span class="sxs-lookup"><span data-stu-id="2acd4-191">If the application is able to fix the error, the application resumes the job and BITS moves the job to the queued state.</span></span> <span data-ttu-id="2acd4-192">Erros transitórios são erros que podem ser resolvidos por conta própria.</span><span class="sxs-lookup"><span data-stu-id="2acd4-192">Transient errors are errors that may resolve themselves.</span></span> <span data-ttu-id="2acd4-193">O BITS tenta novamente trabalhos no estado de erro transitório até que a transferência seja bem-sucedida ou o trabalho expire. O trabalho atinge o tempo limite quando nenhum progresso é feito dentro de um período especificado pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2acd4-193">BITS retries jobs in the transient error state until the transfer is successful or the job times out. The job times out when no progress is made within an application-specified period.</span></span> <span data-ttu-id="2acd4-194">Se o trabalho atingir o tempo limite, o BITS moverá o trabalho para o estado de erro fatal.</span><span class="sxs-lookup"><span data-stu-id="2acd4-194">If the job times out, BITS moves the job to fatal error state.</span></span>

<span data-ttu-id="2acd4-195">Para saber mais sobre os Estados de trabalho, confira [**BG \_ \_ estado do trabalho**](/windows/desktop/api/Bits/ne-bits-bg_job_state).</span><span class="sxs-lookup"><span data-stu-id="2acd4-195">For more information on job states, see [**BG\_JOB\_STATE**](/windows/desktop/api/Bits/ne-bits-bg_job_state).</span></span>
