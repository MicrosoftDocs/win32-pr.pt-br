---
title: Habilitando a aceleração de vídeo do DirectX
description: Habilitando a aceleração de vídeo do DirectX
ms.assetid: 5cb2f564-88e3-4b60-bde3-6ccf69c97c48
keywords:
- SDK do Windows Media Format, habilitando o DXVA
- SDK do Windows Media Format, DXVA (aceleração de vídeo do DirectX)
- SDK do Windows Media Format, aceleração de vídeo
- ASF (Advanced Systems Format), habilitando o DXVA
- ASF (formato de sistemas avançados), habilitando o DXVA
- ASF (Advanced Systems Format), DXVA (aceleração de vídeo do DirectX)
- ASF (formato de sistemas avançados), DXVA (aceleração de vídeo do DirectX)
- ASF (Advanced Systems Format), aceleração de vídeo
- ASF (formato de sistemas avançados), aceleração de vídeo
- DXVA (aceleração de vídeo do DirectX), habilitando
- DXVA (aceleração de vídeo DirectX), habilitando
- DXVA (aceleração de vídeo do DirectX), ordem de operações
- DXVA (aceleração de vídeo DirectX), ordem de operações
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 896147fe11b4b7f5fb91d8dc288e616b643bd5ce
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/19/2020
ms.locfileid: "104365539"
---
# <a name="enabling-directx-video-acceleration"></a><span data-ttu-id="c8231-116">Habilitando a aceleração de vídeo do DirectX</span><span class="sxs-lookup"><span data-stu-id="c8231-116">Enabling DirectX Video Acceleration</span></span>

<span data-ttu-id="c8231-117">Esta seção descreve como habilitar a aceleração de vídeo do Microsoft® DirectX® ao reproduzir conteúdo em fluxo em um player personalizado.</span><span class="sxs-lookup"><span data-stu-id="c8231-117">This section describes how to enable Microsoft® DirectX® Video Acceleration when playing streamed content in a custom player.</span></span>

## <a name="background"></a><span data-ttu-id="c8231-118">Tela de fundo</span><span class="sxs-lookup"><span data-stu-id="c8231-118">Background</span></span>

<span data-ttu-id="c8231-119">DirectX Video Acceleration (DirectX VA) é uma especificação de API para aceleração de hardware de operações de decodificação 2D.</span><span class="sxs-lookup"><span data-stu-id="c8231-119">DirectX Video Acceleration (DirectX VA) is an API specification for hardware acceleration of 2-D decoding operations.</span></span> <span data-ttu-id="c8231-120">Ele permite que os decodificadores de software descarreguem determinadas operações com uso intensivo de CPU para a placa gráfica para processamento.</span><span class="sxs-lookup"><span data-stu-id="c8231-120">It enables software decoders to offload certain CPU-intensive operations to the graphics card for processing.</span></span> <span data-ttu-id="c8231-121">Para os usuários finais, isso torna possível vídeo de alta taxa de bits, como reprodução de DVD de tela inteira em computadores mais antigos equipados com placas gráficas compatíveis com DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-121">For end users, this makes possible high-bit-rate video such as full-screen DVD playback on older computers equipped with DirectX VA-compatible graphics cards.</span></span>

<span data-ttu-id="c8231-122">A partir do SDK do Windows Media Format 9 Series, o filtro de invólucro do DMO dá suporte ao DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-122">Beginning with the Windows Media Format 9 Series SDK, the DMO Wrapper filter supports DirectX VA.</span></span> <span data-ttu-id="c8231-123">Isso significa que, para reprodução local, os aplicativos podem usar o filtro de leitor ASF do WM para reproduzir conteúdo baseado no Windows Media e a aceleração de hardware DirectX VA será invocada automaticamente se a placa gráfica oferecer suporte a ela.</span><span class="sxs-lookup"><span data-stu-id="c8231-123">This means that, for local playback, applications can use the WM ASF Reader filter to play Windows Media-based content and DirectX VA hardware acceleration will be invoked automatically if the graphics card supports it.</span></span> <span data-ttu-id="c8231-124">No entanto, o filtro de leitor ASF do WM não oferece suporte à reprodução de conteúdo transmitido.</span><span class="sxs-lookup"><span data-stu-id="c8231-124">However, the WM ASF Reader filter does not support playback of streamed content.</span></span> <span data-ttu-id="c8231-125">Portanto, se você quiser dar suporte ao DirectX VA ao reproduzir conteúdo transmitido em um player personalizado, deverá usar um mecanismo alternativo, que é aquele usado pelo Windows Media Player, começando com o Windows Media 9 Series.</span><span class="sxs-lookup"><span data-stu-id="c8231-125">Therefore, if you want to support DirectX VA when playing streamed content in a custom player, you must use an alternate mechanism, which is the one used by Windows Media Player beginning with the Windows Media 9 Series.</span></span>

<span data-ttu-id="c8231-126">Como o Windows Media Player foi projetado antes de os filtros QASF terem sido desenvolvidos, o Windows Media Player tem seu próprio filtro de origem, com base no Windows Media Format SDK, para reproduzir conteúdo baseado no Windows Media.</span><span class="sxs-lookup"><span data-stu-id="c8231-126">Because Windows Media Player was designed before the QASF filters had been developed, Windows Media Player has its own source filter, based on the Windows Media Format SDK, for playing Windows Media-based content.</span></span> <span data-ttu-id="c8231-127">O filtro de origem do Windows Media do WMP entrega dados descompactados downstream diretamente para os renderizadores de áudio e vídeo.</span><span class="sxs-lookup"><span data-stu-id="c8231-127">The WMP Windows Media Source Filter delivers decompressed data downstream directly to the audio and video renderers.</span></span> <span data-ttu-id="c8231-128">Por outro lado, o leitor de ASF do WM fornece conteúdo compactado downstream para os DMOs (objetos de mídia do DirectX) do Windows Media Decoder, que são hospedados dentro do invólucro do DMO.</span><span class="sxs-lookup"><span data-stu-id="c8231-128">By contrast, the WM ASF Reader delivers compressed content downstream to the Windows Media Decoder DirectX Media Objects (DMOs), which are hosted inside the DMO Wrapper.</span></span> <span data-ttu-id="c8231-129">Os diagramas a seguir ilustram as diferenças entre o leitor ASF do WM e o filtro de origem do Windows Media do WMP.</span><span class="sxs-lookup"><span data-stu-id="c8231-129">The following diagrams illustrate the differences between the WM ASF Reader and the WMP Windows Media Source Filter.</span></span>

![exemplos de saídas não compactadas de filtro de origem personalizado](images/wmp-dxva-graph.png)

![o filtro de origem qasf gera amostras compactadas](images/qasf-dxva-graph.png)

<span data-ttu-id="c8231-132">Para habilitar o DirectX VA para conteúdo transmitido, você deve criar um filtro de origem personalizado como aquele no diagrama superior.</span><span class="sxs-lookup"><span data-stu-id="c8231-132">To enable DirectX VA for streamed content, you must create a custom source filter like the one in the top diagram.</span></span> <span data-ttu-id="c8231-133">Basicamente, esse filtro usará o Windows Media Format SDK para criar uma instância de um objeto do WM Reader, descompactar os exemplos e enviá-los downstream em seus PINs de saída.</span><span class="sxs-lookup"><span data-stu-id="c8231-133">Basically, this filter will use the Windows Media Format SDK to instantiate a WM Reader object, decompress the samples, and send them downstream on its output pins.</span></span> <span data-ttu-id="c8231-134">Esta discussão pressupõe que você já criou o filtro de origem e agora está pronto para implementar o suporte do DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-134">This discussion assumes that you have created the source filter already and are now ready to implement the DirectX VA support.</span></span>

<span data-ttu-id="c8231-135">Para habilitar o DirectX VA, a tarefa básica do filtro de origem é fornecer o processador de vídeo e o decodificador de WMV DMO com as interfaces de que eles precisarão para negociar a conexão do DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-135">To enable DirectX VA, the basic task of the source filter is to provide the Video Renderer and the WMV Decoder DMO with the interfaces they will need to negotiate the DirectX VA connection.</span></span> <span data-ttu-id="c8231-136">O filtro de origem não participa dessas negociações.</span><span class="sxs-lookup"><span data-stu-id="c8231-136">The source filter does not participate in those negotiations.</span></span> <span data-ttu-id="c8231-137">Após o streaming começar, a única tarefa relacionada ao DirectX VA que o filtro de origem pode executar é modificar os carimbos de data/hora nos exemplos de vídeo antes que o decodificador WMV os entregue ao processador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="c8231-137">After streaming starts, the only DirectX VA-related task that the source filter can perform is to modify the time stamps on the video samples before the WMV decoder delivers them to the Video Renderer.</span></span> <span data-ttu-id="c8231-138">O principal motivo para fazer isso é fornecer controle de linha do tempo personalizado além do que as interfaces padrão do DirectShow® habilitam.</span><span class="sxs-lookup"><span data-stu-id="c8231-138">The primary reason for doing this is to provide custom timeline control beyond what the standard DirectShow® interfaces enable.</span></span>

<span data-ttu-id="c8231-139">Três interfaces são definidas para habilitar as comunicações necessárias entre o Windows Media Format SDK, o filtro de origem do Player, o Windows Media Video Decoder DMO e o mixer de sobreposição ou o processador de mixagem de vídeo.</span><span class="sxs-lookup"><span data-stu-id="c8231-139">Three interfaces are defined to enable the necessary communications between the Windows Media Format SDK, the player's source filter, the Windows Media Video decoder DMO, and the Overlay Mixer or Video Mixing Renderer.</span></span> <span data-ttu-id="c8231-140">Essas interfaces são descritas na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="c8231-140">These interfaces are described in the following table.</span></span>



| <span data-ttu-id="c8231-141">Interface</span><span class="sxs-lookup"><span data-stu-id="c8231-141">Interface</span></span>                                                        | <span data-ttu-id="c8231-142">Descrição</span><span class="sxs-lookup"><span data-stu-id="c8231-142">Description</span></span>                                                                                                                                                                                        |
|------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="c8231-143">**IWMCodecAMVideoAccelerator**</span><span class="sxs-lookup"><span data-stu-id="c8231-143">**IWMCodecAMVideoAccelerator**</span></span>](/previous-versions/windows/desktop/api/wmdxva/nn-wmdxva-iwmcodecamvideoaccelerator) | <span data-ttu-id="c8231-144">Exposto pelo decodificador do Windows Media DMO e chamado pelo filtro de origem do player de mídia para configurar as várias conexões necessárias para habilitar o DirectX VA para a decodificação do conteúdo de vídeo do Windows Media.</span><span class="sxs-lookup"><span data-stu-id="c8231-144">Exposed by the Windows Media Decoder DMO and called by a media player's source filter to set up the various connections required to enable DirectX VA for decoding of Windows Media Video content.</span></span> |
| [<span data-ttu-id="c8231-145">**IWMPlayerTimestampHook**</span><span class="sxs-lookup"><span data-stu-id="c8231-145">**IWMPlayerTimestampHook**</span></span>](/previous-versions/windows/desktop/api/wmdxva/nn-wmdxva-iwmplayertimestamphook)         | <span data-ttu-id="c8231-146">Implementado no filtro de origem do Player.</span><span class="sxs-lookup"><span data-stu-id="c8231-146">Implemented on the player's source filter.</span></span> <span data-ttu-id="c8231-147">Ele permite que o filtro modifique os carimbos de data/hora nos exemplos de vídeo antes de entregá-los.</span><span class="sxs-lookup"><span data-stu-id="c8231-147">It enables the filter to modify the time stamps on the video samples before delivering them downstream.</span></span>                                                 |
| [<span data-ttu-id="c8231-148">**IWMReaderAccelerator**</span><span class="sxs-lookup"><span data-stu-id="c8231-148">**IWMReaderAccelerator**</span></span>](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreaderaccelerator)             | <span data-ttu-id="c8231-149">Implementado no objeto leitor do WM.</span><span class="sxs-lookup"><span data-stu-id="c8231-149">Implemented on the WM Reader object.</span></span> <span data-ttu-id="c8231-150">Ele é chamado por um filtro de origem do Player para obter interfaces do decodificador DMO.</span><span class="sxs-lookup"><span data-stu-id="c8231-150">It is called by a player source filter to obtain interfaces from the decoder DMO.</span></span>                                                                             |



 

## <a name="order-of-operations-in-directx-vaenabled-playback"></a><span data-ttu-id="c8231-151">Ordem de operações no DirectX VA – reprodução habilitada</span><span class="sxs-lookup"><span data-stu-id="c8231-151">Order of Operations in DirectX VA–enabled Playback</span></span>

<span data-ttu-id="c8231-152">Esta seção descreve a ordem geral de operações em tempo de execução para um player habilitado para DirectX VA e seu filtro de origem.</span><span class="sxs-lookup"><span data-stu-id="c8231-152">This section describes the general order of operations at run time for a DirectX VA-enabled player and its source filter.</span></span> <span data-ttu-id="c8231-153">Os componentes mencionados nesta seção são:</span><span class="sxs-lookup"><span data-stu-id="c8231-153">The components referred to in this section are:</span></span>

-   <span data-ttu-id="c8231-154">Um player de mídia de terceiros, chamado de jogador.</span><span class="sxs-lookup"><span data-stu-id="c8231-154">A third-party media player, referred to as the player.</span></span>
-   <span data-ttu-id="c8231-155">Um filtro de origem personalizado, instanciado pelo Player, que usa o Windows Media Format SDK para descompactar o conteúdo baseado no Windows Media.</span><span class="sxs-lookup"><span data-stu-id="c8231-155">A custom source filter, instantiated by the player, that uses the Windows Media Format SDK to decompress Windows Media-based content.</span></span>
-   <span data-ttu-id="c8231-156">O pino de saída do vídeo do filtro de origem do Player, conhecido como o pino de saída.</span><span class="sxs-lookup"><span data-stu-id="c8231-156">The video output pin of the player's source filter, referred to as the output pin.</span></span>
-   <span data-ttu-id="c8231-157">O grafo de filtro de reprodução de vídeo do DirectShow, conhecido como grafo.</span><span class="sxs-lookup"><span data-stu-id="c8231-157">The DirectShow video playback filter graph, referred to as the graph.</span></span>
-   <span data-ttu-id="c8231-158">O processador de mixagem de vídeo, chamado de VMR.</span><span class="sxs-lookup"><span data-stu-id="c8231-158">The Video Mixing Renderer, referred to as the VMR.</span></span>
-   <span data-ttu-id="c8231-159">O objeto leitor assíncrono do Windows Media Format SDK, conhecido como leitor.</span><span class="sxs-lookup"><span data-stu-id="c8231-159">The Windows Media Format SDK Asynchronous Reader object, referred to as the reader.</span></span>
-   <span data-ttu-id="c8231-160">O objeto de mídia DirectX do Windows Media decodificador de vídeo, conhecido como o decodificador DMO.</span><span class="sxs-lookup"><span data-stu-id="c8231-160">The Windows Media Video Decoder DirectX Media Object, referred to as the decoder DMO.</span></span>

<span data-ttu-id="c8231-161">A ordem das operações é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="c8231-161">The order of operations is as follows:</span></span>

1.  <span data-ttu-id="c8231-162">O Player instancia seu filtro de origem e um objeto leitor.</span><span class="sxs-lookup"><span data-stu-id="c8231-162">The player instantiates its source filter and a reader object.</span></span> <span data-ttu-id="c8231-163">O leitor cria um decodificador de vídeo DMO e define o tipo de entrada (compactado) nele.</span><span class="sxs-lookup"><span data-stu-id="c8231-163">The reader creates a video decoder DMO and sets the (compressed) input type on it.</span></span> <span data-ttu-id="c8231-164">Isso deve ocorrer antes que o Player tente configurar seu grafo de reprodução de vídeo porque o SDK e o decodificador DMO devem estar envolvidos no processo de negociação com o grafo, e o DMO deve saber o formato de entrada durante a etapa 9.</span><span class="sxs-lookup"><span data-stu-id="c8231-164">This must happen before the player attempts to configure its video playback graph because the SDK and the decoder DMO must be involved in the negotiation process with the graph, and the DMO must know the input format during step 9.</span></span>
2.  <span data-ttu-id="c8231-165">O Player chama **IGraphBuilder:: render**, fornecendo a ele o pino de saída do filtro de fonte de vídeo.</span><span class="sxs-lookup"><span data-stu-id="c8231-165">The player calls **IGraphBuilder::Render**, providing it the video source filter's output pin.</span></span> <span data-ttu-id="c8231-166">Neste ponto, o Gerenciador de gráficos de filtro do DirectShow tenta conectar o VMR ao filtro de origem de vídeo do jogador.</span><span class="sxs-lookup"><span data-stu-id="c8231-166">At this point, the DirectShow filter graph manager tries to connect the VMR to the player's video source filter.</span></span>
3.  <span data-ttu-id="c8231-167">O Gerenciador do grafo de filtro chama **IPin:: Connect** no pino de saída do filtro de origem de vídeo do jogador.</span><span class="sxs-lookup"><span data-stu-id="c8231-167">The filter graph manager calls **IPin::Connect** on the output pin of the player's video source filter.</span></span>

<span data-ttu-id="c8231-168">As etapas 4 a 10 ocorrem dentro de **IPin:: Connect**.</span><span class="sxs-lookup"><span data-stu-id="c8231-168">Steps 4 through 10 occur inside of **IPin::Connect**.</span></span>

1.  <span data-ttu-id="c8231-169">O filtro de origem Obtém a interface **IWMCodecAMVideoAccelerator** do método **IWMReaderAccelerator:: GetCodecInterface** do leitor.</span><span class="sxs-lookup"><span data-stu-id="c8231-169">The source filter obtains the **IWMCodecAMVideoAccelerator** interface from the reader's **IWMReaderAccelerator::GetCodecInterface** method.</span></span> <span data-ttu-id="c8231-170">Se o codec não der suporte ao DirectX VA, a chamada para **GetCodecInterface** poderá falhar.</span><span class="sxs-lookup"><span data-stu-id="c8231-170">If the codec does not support DirectX VA, the call to **GetCodecInterface** may fail.</span></span> <span data-ttu-id="c8231-171">Nesse caso, a negociação prossegue como de costume, sem o suporte do DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-171">In this case, negotiation proceeds as usual, without DirectX VA support.</span></span>
2.  <span data-ttu-id="c8231-172">O filtro de origem passa o ponteiro **IAMVideoAccelerator** do PIN passado para **conectar-se** ao decodificador DMO por meio de **IWMCodecAMVideoAccelerator:: SetAcceleratorInterface**.</span><span class="sxs-lookup"><span data-stu-id="c8231-172">The source filter passes the **IAMVideoAccelerator** pointer from the pin passed into **Connect** to the decoder DMO through **IWMCodecAMVideoAccelerator::SetAcceleratorInterface**.</span></span>
3.  <span data-ttu-id="c8231-173">Em seguida, o filtro de origem delega o restante da operação **IPin:: Connect** para o método **CBaseOutputPin:: Connect** .</span><span class="sxs-lookup"><span data-stu-id="c8231-173">The source filter then delegates the remainder of the **IPin::Connect** operation to the **CBaseOutputPin::Connect** method.</span></span> <span data-ttu-id="c8231-174">A enumeração de formato com o SDK continua como faz hoje.</span><span class="sxs-lookup"><span data-stu-id="c8231-174">The format enumeration with the SDK proceeds as it does today.</span></span> <span data-ttu-id="c8231-175">Se o codec der suporte ao DirectX VA para o conteúdo que está sendo conectado, o codec DMO apresentará esses subtipos do DirectX VA primeiro, antes dos tipos YUV e RGB com suporte.</span><span class="sxs-lookup"><span data-stu-id="c8231-175">If the codec supports DirectX VA for the content being connected, the codec DMO presents those DirectX VA subtypes first, prior to the YUV and RGB types supported.</span></span> <span data-ttu-id="c8231-176">Se o suporte do DirectX VA estiver disponível, serão tentadas as etapas 7 a 11 no contexto de um subtipo DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-176">If DirectX VA support is available, steps 7 through 11 are attempted in the context of a DirectX VA subtype.</span></span> <span data-ttu-id="c8231-177">O trecho de código a seguir mostra como identificar um subtipo de mídia DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-177">The following code snippet shows how to identify a DirectX VA media subtype.</span></span>
    ```C++
    bool IsDXVASubtype( AM_MEDIA_TYPE * pmt )
    {
        // All DXVA types have the same last 3 DWORDs.
        // guidDXVA is the base GUID for all DXVA subtypes.

        GUID guidDXVA = { 0x00000000, 0xa0c7, 0x11d3, { 0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5 } };

        unsigned long const * plguid;
        unsigned long const * plguidDXVA;
        plguid = (unsigned long const *)&pmt->subtype;
        plguidDXVA = (unsigned long *)&guidDXVA;

        if( ( plguid[1] == plguidDXVA[1] ) &&
            ( plguid[2] == plguidDXVA[2] ) &&
            ( plguid[3] == plguidDXVA[3] ) )
        {
            return true;
        }

        return false;
    }
    
    ```

    

4.  <span data-ttu-id="c8231-178">A implementação **CBaseOutputPin:: Connect** chama **IPin:: CompleteConnect** durante a etapa 3.</span><span class="sxs-lookup"><span data-stu-id="c8231-178">The **CBaseOutputPin::Connect** implementation calls **IPin::CompleteConnect** during step 3.</span></span> <span data-ttu-id="c8231-179">Se um subtipo DirectX VA estiver sendo considerado, a negociação do DirectX VA será tentada.</span><span class="sxs-lookup"><span data-stu-id="c8231-179">If a DirectX VA subtype is being considered, the DirectX VA negotiation is attempted.</span></span> <span data-ttu-id="c8231-180">O pino de saída chama **IWMCodecAMVideoAccelerator:: NegotiateConnection**, passando-o para o tipo de mídia de saída atual.</span><span class="sxs-lookup"><span data-stu-id="c8231-180">The output pin calls **IWMCodecAMVideoAccelerator::NegotiateConnection**, passing it the current output media type.</span></span>
5.  <span data-ttu-id="c8231-181">O decodificador DMO executa a negociação necessária com o VMR por meio da interface **IAMVideoAccelerator** e retorna o GUID de subtipo de vídeo que os dois concordaram.</span><span class="sxs-lookup"><span data-stu-id="c8231-181">The decoder DMO performs the required negotiation with the VMR through the **IAMVideoAccelerator** interface, and returns the video subtype GUID that the two have agreed on.</span></span> <span data-ttu-id="c8231-182">O pino de saída delega todas as chamadas de **IAMVideoAcceleratorNotify** recebidas durante esse processo para a interface **IAMVideoAcceleratorNotify** do decodificador de DMO, que também pode ser obtida por meio do método **IWMReaderAccelerator:: GetCodecInterface** .</span><span class="sxs-lookup"><span data-stu-id="c8231-182">The output pin delegates all **IAMVideoAcceleratorNotify** calls received during this process to the decoder DMO's **IAMVideoAcceleratorNotify** interface, which can also be obtained through the **IWMReaderAccelerator::GetCodecInterface** method.</span></span>
6.  <span data-ttu-id="c8231-183">Se **NegotiateConnection** tiver sucesso, o pino de saída chamará **IWMCodecAMVideoAccelerator:: SetPlayerNotify** com uma interface **IWMPlayerTimestampHook** .</span><span class="sxs-lookup"><span data-stu-id="c8231-183">If **NegotiateConnection** succeeds, the output pin calls **IWMCodecAMVideoAccelerator::SetPlayerNotify** with an **IWMPlayerTimestampHook** interface.</span></span> <span data-ttu-id="c8231-184">Esse gancho permite que o filtro de origem atualize os carimbos de data/hora nos exemplos antes que eles sejam entregues ao renderizador.</span><span class="sxs-lookup"><span data-stu-id="c8231-184">This hook allows the source filter to update the time stamps on the samples before they are handed to the renderer.</span></span>
7.  <span data-ttu-id="c8231-185">O filtro de origem chama **IWMReaderAccelerator:: Notify** com o tipo de mídia negociado.</span><span class="sxs-lookup"><span data-stu-id="c8231-185">The source filter calls **IWMReaderAccelerator::Notify** with the negotiated media type.</span></span> <span data-ttu-id="c8231-186">Isso permite que o leitor atualize suas variáveis internas e confirme o DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-186">This allows the reader to update its internal variables and commit to DirectX VA.</span></span> <span data-ttu-id="c8231-187">Esse é o último lugar em que o codec ou leitor pode falhar.</span><span class="sxs-lookup"><span data-stu-id="c8231-187">This is the last place the codec or reader can fail.</span></span> <span data-ttu-id="c8231-188">Se qualquer uma das etapas acima falhar, o filtro de origem deverá retornar à etapa 3 e tentar o próximo tipo enumerado pelo leitor.</span><span class="sxs-lookup"><span data-stu-id="c8231-188">If any of the above steps fail, the source filter should return to step 3 and try the next type enumerated by the reader.</span></span>
8.  <span data-ttu-id="c8231-189">A reprodução é iniciada.</span><span class="sxs-lookup"><span data-stu-id="c8231-189">Playback starts.</span></span> <span data-ttu-id="c8231-190">O leitor ignora os buffers de saída do decodificador DMO se o tipo de saída de conexão for DirectX VA.</span><span class="sxs-lookup"><span data-stu-id="c8231-190">The reader ignores output buffers from the decoder DMO if the connection output type is DirectX VA.</span></span>
9.  <span data-ttu-id="c8231-191">Quando **IPin::D isconnect** ocorre, o filtro de origem chama **IWMCodecAMVideoAccelerator:: SetAcceleratorInterface** com um **NULL**.</span><span class="sxs-lookup"><span data-stu-id="c8231-191">When **IPin::Disconnect** occurs, the source filter calls **IWMCodecAMVideoAccelerator::SetAcceleratorInterface** with a **NULL**.</span></span> <span data-ttu-id="c8231-192">Isso interrompe a conexão do DirectX VA entre o codec e o processador.</span><span class="sxs-lookup"><span data-stu-id="c8231-192">This breaks the DirectX VA connection between the codec and the renderer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c8231-193">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="c8231-193">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c8231-194">**Lendo arquivos ASF**</span><span class="sxs-lookup"><span data-stu-id="c8231-194">**Reading ASF Files**</span></span>](reading-asf-files.md)
</dt> </dl>

 

 




