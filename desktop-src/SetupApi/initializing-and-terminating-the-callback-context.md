---
description: Antes que a rotina de retorno de chamada de fila padrão possa ser usada, especificando-a como a rotina de retorno de chamada ao confirmar uma fila de arquivos ou chamando-a de uma rotina de retorno de chamada personalizada, ela deve ser inicializada.
ms.assetid: e25a9787-a4a3-4d06-bf55-f6f7cfb23481
title: Inicializando e encerrando o contexto de retorno de chamada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 03cb4c144cb9069d395ccd688e2a172680df8a12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105753919"
---
# <a name="initializing-and-terminating-the-callback-context"></a><span data-ttu-id="20e78-103">Inicializando e encerrando o contexto de retorno de chamada</span><span class="sxs-lookup"><span data-stu-id="20e78-103">Initializing and Terminating the Callback Context</span></span>

<span data-ttu-id="20e78-104">Antes que a rotina de retorno de chamada de fila padrão possa ser usada, especificando-a como a rotina de retorno de chamada ao confirmar uma fila de arquivos ou chamando-a de uma rotina de retorno de chamada personalizada, ela deve ser inicializada.</span><span class="sxs-lookup"><span data-stu-id="20e78-104">Before the default queue callback routine can be used, either by specifying it as the callback routine when committing a file queue, or by calling it from a custom callback routine, it must be initialized.</span></span>

<span data-ttu-id="20e78-105">A função [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) cria a estrutura de contexto que é usada pela rotina de retorno de chamada de fila padrão.</span><span class="sxs-lookup"><span data-stu-id="20e78-105">The [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) function builds the context structure that is used by the default queue callback routine.</span></span> <span data-ttu-id="20e78-106">Ele retorna um ponteiro void para essa estrutura.</span><span class="sxs-lookup"><span data-stu-id="20e78-106">It returns a void pointer to that structure.</span></span> <span data-ttu-id="20e78-107">Essa estrutura é essencial para a operação da rotina de retorno de chamada padrão e deve ser passada para a rotina de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="20e78-107">This structure is essential for the default callback routine's operation and must be passed to the callback routine.</span></span> <span data-ttu-id="20e78-108">Isso pode ser feito especificando o ponteiro void como o contexto em uma chamada para [**SetupCommitFileQueue**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea)ou especificando o ponteiro void como o parâmetro de contexto ao chamar [**SetupDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka) de uma rotina de retorno de chamada personalizada.</span><span class="sxs-lookup"><span data-stu-id="20e78-108">You do can this either by specifying the void pointer as the context in a call to [**SetupCommitFileQueue**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea), or by specifying the void pointer as the context parameter when calling [**SetupDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka) from a custom callback routine.</span></span> <span data-ttu-id="20e78-109">Essa estrutura de contexto não deve ser alterada ou referenciada pelo aplicativo de instalação.</span><span class="sxs-lookup"><span data-stu-id="20e78-109">This context structure must not be altered or referenced by the setup application.</span></span>

<span data-ttu-id="20e78-110">A função [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex) também Inicializa um contexto para a rotina de retorno de chamada de fila padrão, mas especifica uma segunda janela para receber uma mensagem de progresso especificada pelo chamador sempre que a fila envia uma notificação.</span><span class="sxs-lookup"><span data-stu-id="20e78-110">The [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex) function also initializes a context for the default queue callback routine, but it specifies a second window to receive a caller-specified progress message each time the queue sends a notification.</span></span> <span data-ttu-id="20e78-111">Isso permite que você use as caixas de diálogo de prompt e erro de disco padrão e também incorpore uma barra de progresso em uma segunda janela, por exemplo, em uma página de um assistente de instalação.</span><span class="sxs-lookup"><span data-stu-id="20e78-111">This enables you to use the default disk prompting and error dialog boxes, and to also embed a progress bar in a second window, for example, in a page of an installation wizard.</span></span>

<span data-ttu-id="20e78-112">Independentemente de você ter inicializado o contexto usado pela rotina de retorno de chamada de fila padrão com [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) ou [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex), depois que as operações em fila tiverem terminado o processamento, chame [**SetupTermDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setuptermdefaultqueuecallback) para liberar os recursos alocados na inicialização da estrutura de contexto.</span><span class="sxs-lookup"><span data-stu-id="20e78-112">Regardless of whether you initialized the context used by the default queue callback routine with [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) or [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex), after the queued operations have finished processing, call [**SetupTermDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setuptermdefaultqueuecallback) to release the resources allocated in initializing the context structure.</span></span>

 

 



