---
title: Proteção Estendida
description: A proteção estendida é um mecanismo para associar um canal seguro externo, como SSL a protocolos de autenticação de canal interno, como Kerberos-APREQ e autenticação de cabeçalho HTTP.
ms.assetid: 35e48846-05e5-4db9-a3b5-098b62815b66
keywords:
- Proteção estendida nativa-Web-Services
- WWSAPI
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 895bdfecf994f6673c2ed7e7367bc3a7b5bd70c9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105767703"
---
# <a name="extended-protection"></a><span data-ttu-id="f8577-106">Proteção Estendida</span><span class="sxs-lookup"><span data-stu-id="f8577-106">Extended Protection</span></span>

<span data-ttu-id="f8577-107">A proteção estendida é um mecanismo para associar um canal seguro externo, como SSL a protocolos de autenticação de canal interno, como Kerberos-APREQ e autenticação de cabeçalho HTTP.</span><span class="sxs-lookup"><span data-stu-id="f8577-107">Extended protection is a mechanism to bind an outer secure channel such as SSL to inner channel authentication protocols such as Kerberos-APREQ and HTTP header authentication.</span></span>

<span data-ttu-id="f8577-108">O conceito de proteção estendida é definido em RFC2743.</span><span class="sxs-lookup"><span data-stu-id="f8577-108">The concept of extended protection is defined in RFC2743.</span></span>

<span data-ttu-id="f8577-109">A proteção estendida, quando disponível, é configurada automaticamente no cliente, mas pode exigir configuração no servidor para cenários não padrão.</span><span class="sxs-lookup"><span data-stu-id="f8577-109">Extended protection, when available, is configured automatically on the client but may require configuration on the server for non-default scenarios.</span></span>

## <a name="supported-configurations"></a><span data-ttu-id="f8577-110">Configurações com suporte</span><span class="sxs-lookup"><span data-stu-id="f8577-110">Supported Configurations</span></span>

<span data-ttu-id="f8577-111">Há suporte para a proteção estendida ao usar a [**\_ \_ \_ Associação de canal http do WS**](/windows/desktop/api/WebServices/ne-webservices-ws_channel_binding) com associações de segurança usando protocolos de autenticação integrada do Windows, como associação de [**\_ segurança de autenticação de \_ cabeçalho \_ \_ \_ WS http**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) e [**Associação de segurança de \_ mensagem WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f8577-111">Extended protection is supported when using [**WS\_HTTP\_CHANNEL\_BINDING**](/windows/desktop/api/WebServices/ne-webservices-ws_channel_binding) with security bindings using Windows Integrated Authentication protocols such as [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) and [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding).</span></span> <span data-ttu-id="f8577-112">Ele é configurado por meio das seguintes [**Propriedades de segurança**](/windows/desktop/api/WebServices/ns-webservices-ws_security_property):</span><span class="sxs-lookup"><span data-stu-id="f8577-112">It is configured via the following [**security properties**](/windows/desktop/api/WebServices/ns-webservices-ws_security_property):</span></span>

-   [<span data-ttu-id="f8577-113">**\_política de \_ \_ proteção estendida da propriedade de \_ segurança WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-113">**WS\_SECURITY\_PROPERTY\_EXTENDED\_PROTECTION\_POLICY**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)
-   [<span data-ttu-id="f8577-114">**\_cenário de \_ \_ proteção estendida da propriedade de \_ segurança do WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-114">**WS\_SECURITY\_PROPERTY\_EXTENDED\_PROTECTION\_SCENARIO**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)
-   [<span data-ttu-id="f8577-115">**\_ \_ \_ identidades do serviço de propriedade de segurança WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-115">**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)

<span data-ttu-id="f8577-116">As seguintes configurações que envolvem a proteção estendida são possíveis:</span><span class="sxs-lookup"><span data-stu-id="f8577-116">The following configurations involving extended protection are possible:</span></span>

<span data-ttu-id="f8577-117">Cliente</span><span class="sxs-lookup"><span data-stu-id="f8577-117">Client</span></span>

-   <span data-ttu-id="f8577-118">[**WS \_ A \_ \_ \_ Associação de segurança de transporte SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) é usada com associação de segurança de [**\_ \_ \_ mensagem \_ \_ APREQ WS Kerberos**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) ou associação de [**segurança de autenticação de \_ \_ cabeçalho WS \_ \_ \_ http**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f8577-118">[**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) is used with [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span></span> <span data-ttu-id="f8577-119">Nessa configuração, a associação de autenticação é associada à conexão SSL por meio de um token de proteção estendido que é extraído automaticamente da conexão SSL.</span><span class="sxs-lookup"><span data-stu-id="f8577-119">In this configuration the authentication binding is bound to the SSL connection via an extended protection token that is automatically extracted from the SSL connection.</span></span>
-   <span data-ttu-id="f8577-120">Nenhum SSL é usado e [**a \_ \_ Associação de \_ \_ segurança de \_ autenticação de cabeçalho HTTP do WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) está definida.</span><span class="sxs-lookup"><span data-stu-id="f8577-120">No SSL is used and [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is set.</span></span> <span data-ttu-id="f8577-121">A associação de autenticação é associada por meio do SPN (nome principal do servidor), que é autonatically determinado do [**\_ \_ endereço do ponto de extremidade do WS**](/windows/desktop/api/WebServices/ns-webservices-ws_endpoint_address).</span><span class="sxs-lookup"><span data-stu-id="f8577-121">The authentication binding is bound via the Server Principal Name (SPN), which is autonatically determined from the [**WS\_ENDPOINT\_ADDRESS**](/windows/desktop/api/WebServices/ns-webservices-ws_endpoint_address).</span></span>

<span data-ttu-id="f8577-122">Servidor</span><span class="sxs-lookup"><span data-stu-id="f8577-122">Server</span></span>

-   <span data-ttu-id="f8577-123">[**WS \_ A \_ \_ \_ Associação de segurança de transporte SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) é usada com associação de segurança de [**\_ \_ \_ mensagem \_ \_ APREQ WS Kerberos**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) ou associação de [**segurança de autenticação de \_ \_ cabeçalho WS \_ \_ \_ http**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f8577-123">[**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) is used with [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span></span> <span data-ttu-id="f8577-124">Nessa configuração, a associação de autenticação é associada à conexão SSL por meio de um token de proteção estendido que é extraído da conexão SSL e validado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="f8577-124">In this configuration the authentication binding is bound to the SSL connection via an extended protection token that is extracted from the SSL connection and validated automatically.</span></span>
-   <span data-ttu-id="f8577-125">Nenhum SSL é usado e [**a \_ \_ Associação de \_ \_ segurança de \_ autenticação de cabeçalho HTTP do WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) está definida.</span><span class="sxs-lookup"><span data-stu-id="f8577-125">No SSL is used and [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is set.</span></span> <span data-ttu-id="f8577-126">A associação de autenticação é associada por meio do SPN (nome principal do servidor), que deve ser fornecido por meio de [**\_ \_ \_ \_ identidades do serviço de propriedade de segurança WS**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id).</span><span class="sxs-lookup"><span data-stu-id="f8577-126">The authentication binding is bound via the Server Principal Name (SPN), which must be provided via [**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id).</span></span> <span data-ttu-id="f8577-127">Quando uma mensagem é recebida, o SPN é extraído e validado para uma correspondência exata com os nomes de serviço fornecidos.</span><span class="sxs-lookup"><span data-stu-id="f8577-127">When a message is received, the SPN is extracted and validated for an exact match with the provided service names.</span></span> <span data-ttu-id="f8577-128">Não fornecer SPNs é o equivalente de definir [**a \_ política de proteção estendida do WS \_ \_ \_ nunca**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy).</span><span class="sxs-lookup"><span data-stu-id="f8577-128">Not providing SPNs is the equivalent of setting [**WS\_EXTENDED\_PROTECTION\_POLICY\_NEVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy).</span></span>
-   <span data-ttu-id="f8577-129">Nenhum SSL é usado, [**o \_ \_ \_ \_ \_ servidor associado do cenário de proteção estendida do WS**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) é especificado e a [**\_ \_ \_ \_ \_ Associação de segurança de mensagem APREQ do WS Kerberos**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) é usada.</span><span class="sxs-lookup"><span data-stu-id="f8577-129">No SSL is used, [**WS\_EXTENDED\_PROTECTION\_SCENARIO\_BOUND\_SERVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) is specified and [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) is used.</span></span> <span data-ttu-id="f8577-130">Nesta configuração, as [**\_ \_ \_ \_ identidades do serviço de propriedade de segurança WS**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) não devem ser definidas.</span><span class="sxs-lookup"><span data-stu-id="f8577-130">In this configuration, [**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) must not be set.</span></span> <span data-ttu-id="f8577-131">Nenhuma verificação de SPN é executada além do que é feito como parte do protocolo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="f8577-131">No SPN check is performed beyond what is done as part of the Kerberos protocol.</span></span>
-   <span data-ttu-id="f8577-132">[**WS \_ O uso do cenário de proteção ESTENDIda \_ \_ \_ \_ SSL**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) foi especificado e a associação de [**segurança de mensagem do WS \_ Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) ou a associação de [**segurança de autenticação de \_ \_ cabeçalho \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) é usada.</span><span class="sxs-lookup"><span data-stu-id="f8577-132">[**WS\_EXTENDED\_PROTECTION\_SCENARIO\_TERMINATED\_SSL**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) is specified and either [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is used.</span></span> <span data-ttu-id="f8577-133">[**WS \_ As \_ \_ \_ identidades do serviço de propriedade de segurança**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) devem ser definidas.</span><span class="sxs-lookup"><span data-stu-id="f8577-133">[**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) must be set.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="f8577-134">Plataformas compatíveis</span><span class="sxs-lookup"><span data-stu-id="f8577-134">Supported Platforms</span></span>

<span data-ttu-id="f8577-135">Há suporte para proteção estendida em plataformas com suporte para ela no sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="f8577-135">Extended protection is supported on platforms with support for it in the operating system.</span></span> <span data-ttu-id="f8577-136">O Windows 7 e o Windows Server 2008 R2 fornecem suporte interno.</span><span class="sxs-lookup"><span data-stu-id="f8577-136">Windows 7 and Windows Server 2008 R2 provide built-in support.</span></span> <span data-ttu-id="f8577-137">Outras plataformas podem exigir uma atualização.</span><span class="sxs-lookup"><span data-stu-id="f8577-137">Other platforms may require an update.</span></span>

<span data-ttu-id="f8577-138">Se o sistema operacional do servidor não fornecer tal suporte, todas as informações de proteção estendidas enviadas pelo cliente serão ignoradas.</span><span class="sxs-lookup"><span data-stu-id="f8577-138">If the server's operating system does not provide such support, any extended protection information sent by the client is ignored.</span></span> <span data-ttu-id="f8577-139">Como resultado, os clientes que usam a proteção estendida podem se comunicar com um servidor desse tipo, mas o benefício de segurança é perdido.</span><span class="sxs-lookup"><span data-stu-id="f8577-139">As a result, clients using extended protection can communicate with such a server, but the security benefit is lost.</span></span> <span data-ttu-id="f8577-140">No cliente, a [**\_ Associação de \_ \_ segurança de \_ \_ mensagem APREQ do WS Kerberos**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) combinada com a associação de segurança de [**\_ \_ transporte \_ \_ WS SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) só dá suporte à proteção estendida no Vista e superior.</span><span class="sxs-lookup"><span data-stu-id="f8577-140">On the client, [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) combined with [**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) only supports extended protection on Vista and above.</span></span>

<span data-ttu-id="f8577-141">Observação: a proteção estendida que está sendo indisponível não impede que nenhuma configuração específica seja usada.</span><span class="sxs-lookup"><span data-stu-id="f8577-141">NOTE: Extended protection being unavailable does not prevent any particular configuration from being used.</span></span>

## <a name="interoperability"></a><span data-ttu-id="f8577-142">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="f8577-142">Interoperability</span></span>

<span data-ttu-id="f8577-143">Um servidor configurado por padrão pode se comunicar com clientes SOAP, independentemente se eles usam proteção estendida ou não.</span><span class="sxs-lookup"><span data-stu-id="f8577-143">A default-configured server can communicate with SOAP clients regardless of whether they use extended protection or not.</span></span> <span data-ttu-id="f8577-144">A única exceção sendo o Windows XP e o Windows Server 2003 WWSAPI clientes que foram atualizados para oferecer suporte à proteção estendida e usam a [**Associação de segurança de mensagem do WS \_ Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) e a [**\_ \_ \_ \_ Associação de segurança de transporte WS SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f8577-144">The one exception being Windows XP and Windows Server 2003 WWSAPI clients that have been updated to support extended protection and use both [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) and [**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding).</span></span> <span data-ttu-id="f8577-145">Para dar suporte a tais clientes, a [**\_ política de proteção estendida do WS \_ \_ \_ nunca**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy) deve ser especificada pelo servidor.</span><span class="sxs-lookup"><span data-stu-id="f8577-145">To support such clients [**WS\_EXTENDED\_PROTECTION\_POLICY\_NEVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy) must be specified by the server.</span></span> <span data-ttu-id="f8577-146">Os servidores configurados com a **\_ política de proteção estendida do WS \_ \_ \_ sempre** rejeitarão a comunicação de clientes que não usam a proteção estendida.</span><span class="sxs-lookup"><span data-stu-id="f8577-146">Servers configured with **WS\_EXTENDED\_PROTECTION\_POLICY\_ALWAYS** will reject communication from clients that do not use extended protection.</span></span> <span data-ttu-id="f8577-147">No cliente, a **\_ Associação de \_ \_ segurança de \_ \_ mensagem APREQ do WS Kerberos** combinada com a associação de segurança de **\_ \_ transporte \_ \_ WS SSL** resultará na mensagem que está sendo enviada usando a codificação de transferência em partes de http no Vista e superior.</span><span class="sxs-lookup"><span data-stu-id="f8577-147">On the client, **WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING** combined with **WS\_SSL\_TRANSPORT\_SECURITY\_BINDING** will result in the message being sent using the HTTP chunked transfer encoding on Vista and above.</span></span> <span data-ttu-id="f8577-148">Isso pode causar problemas de interoperabilidade com servidores que não dão suporte à transferência em partes.</span><span class="sxs-lookup"><span data-stu-id="f8577-148">This may cause interop issues with servers that do not support chunked transfer.</span></span>

<span data-ttu-id="f8577-149">As seguintes enumerações/constantes fazem parte da proteção estendida:</span><span class="sxs-lookup"><span data-stu-id="f8577-149">The following Enums/Constants are part of extended protection:</span></span>

-   [<span data-ttu-id="f8577-150">**\_política de \_ proteção estendida do WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-150">**WS\_EXTENDED\_PROTECTION\_POLICY**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy)
-   [<span data-ttu-id="f8577-151">**\_cenário de \_ proteção estendida do WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-151">**WS\_EXTENDED\_PROTECTION\_SCENARIO**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario)

<span data-ttu-id="f8577-152">Os stuctures a seguir fazem parte da proteção estendida:</span><span class="sxs-lookup"><span data-stu-id="f8577-152">The following stuctures are part of extended protection:</span></span>

-   [<span data-ttu-id="f8577-153">**\_ \_ identidades de segurança do serviço WS \_**</span><span class="sxs-lookup"><span data-stu-id="f8577-153">**WS\_SERVICE\_SECURITY\_IDENTITIES**</span></span>](/windows/desktop/api/WebServices/ns-webservices-ws_service_security_identities)

 

 




