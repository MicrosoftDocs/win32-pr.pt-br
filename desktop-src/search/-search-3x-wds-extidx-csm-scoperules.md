---
description: O Gerenciador de escopo de rastreamento (CSM) permite que você defina regras de escopo que incluem ou excluem URLs do escopo de rastreamento do Windows Search.
ms.assetid: 132a55f9-680d-438e-b983-f5ce4cf66a41
title: Gerenciando regras de escopo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 20d45199726cfe36dc1c4936e9ac7699a288c3ea
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090103"
---
# <a name="managing-scope-rules"></a><span data-ttu-id="17dd0-103">Gerenciando regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-103">Managing Scope Rules</span></span>

<span data-ttu-id="17dd0-104">O Gerenciador de escopo de rastreamento (CSM) permite que você defina regras de escopo que incluem ou excluem URLs do escopo de rastreamento do Windows Search.</span><span class="sxs-lookup"><span data-stu-id="17dd0-104">The Crawl Scope Manager (CSM) enables you define scope rules that include or exclude URLs from the Windows Search crawl scope.</span></span>

<span data-ttu-id="17dd0-105">O CSM permite que você faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="17dd0-105">The CSM lets you do the following:</span></span>

-   <span data-ttu-id="17dd0-106">Adicionar novas regras de escopo ao conjunto de regras de trabalho</span><span class="sxs-lookup"><span data-stu-id="17dd0-106">Add new scope rules to the working rule set</span></span>
-   <span data-ttu-id="17dd0-107">Remover regras de escopo existentes</span><span class="sxs-lookup"><span data-stu-id="17dd0-107">Remove existing scope rules</span></span>
-   <span data-ttu-id="17dd0-108">Enumerar regras de escopo padrão</span><span class="sxs-lookup"><span data-stu-id="17dd0-108">Enumerate default scope rules</span></span>
-   <span data-ttu-id="17dd0-109">Descobrir se uma determinada URL está incluída ou excluída do escopo de rastreamento ou se tem uma regra de escopo pai ou filho</span><span class="sxs-lookup"><span data-stu-id="17dd0-109">Discover whether a particular URL is included or excluded from the crawl scope or has a parent or child scope rule</span></span>

 

<span data-ttu-id="17dd0-110">Este tópico abrange os seguintes assuntos:</span><span class="sxs-lookup"><span data-stu-id="17dd0-110">This topic includes the following subjects:</span></span>

-   [<span data-ttu-id="17dd0-111">Sobre regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-111">About Scope Rules</span></span>](#about-scope-rules)
-   [<span data-ttu-id="17dd0-112">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="17dd0-112">Before You Begin</span></span>](#before-you-begin)
-   [<span data-ttu-id="17dd0-113">Adicionando regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-113">Adding Scope Rules</span></span>](#adding-scope-rules)
    -   [<span data-ttu-id="17dd0-114">Observações sobre regras de usuário</span><span class="sxs-lookup"><span data-stu-id="17dd0-114">Notes on User Rules</span></span>](#notes-on-user-rules)
-   [<span data-ttu-id="17dd0-115">Removendo regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-115">Removing Scope Rules</span></span>](#removing-scope-rules)
-   [<span data-ttu-id="17dd0-116">Revertendo para regras padrão</span><span class="sxs-lookup"><span data-stu-id="17dd0-116">Reverting to Default Rules</span></span>](#reverting-to-default-rules)
-   [<span data-ttu-id="17dd0-117">Enumerando regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-117">Enumerating Scope Rules</span></span>](#enumerating-scope-rules)
-   [<span data-ttu-id="17dd0-118">Regras de escopo de rastreamento</span><span class="sxs-lookup"><span data-stu-id="17dd0-118">Tracing Scope Rules</span></span>](#tracing-scope-rules)
-   [<span data-ttu-id="17dd0-119">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="17dd0-119">Related topics</span></span>](#related-topics)

## <a name="about-scope-rules"></a><span data-ttu-id="17dd0-120">Sobre regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-120">About Scope Rules</span></span>

<span data-ttu-id="17dd0-121">Uma regra de escopo é uma regra que inclui ou exclui URLs em uma raiz de pesquisa de serem rastreadas e indexadas.</span><span class="sxs-lookup"><span data-stu-id="17dd0-121">A scope rule is a rule that includes or excludes URLs within a search root from being crawled and indexed.</span></span> <span data-ttu-id="17dd0-122">As regras de inclusão fazem com que o indexador inclua essa URL no escopo Scrawl e as regras de exclusão fazem com que o indexador exclua essa URL (e seus filhos) do escopo de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-122">Inclusion rules cause the indexer to include that URL in the scrawl scope, and exclusion rules cause the indexer exclude that URL (and its children) from the crawl scope.</span></span>

<span data-ttu-id="17dd0-123">Por exemplo, suponha que você tenha instalado um novo aplicativo cujos arquivos de dados estejam localizados na pasta WorkteamA \\ ProjectFiles em um computador local.</span><span class="sxs-lookup"><span data-stu-id="17dd0-123">For example, suppose you've installed a new application whose data files are located in the folder WorkteamA\\ProjectFiles on a local computer.</span></span> <span data-ttu-id="17dd0-124">Suponha que você deseja que tudo esteja dentro da pasta ProjectFiles indexada, exceto por itens nos protótipos de subpasta.</span><span class="sxs-lookup"><span data-stu-id="17dd0-124">Suppose you want everything within the ProjectFiles folder indexed except for items in the subfolder Prototypes.</span></span> <span data-ttu-id="17dd0-125">Nessa situação, você precisaria de uma regra de inclusão para myPH:///C: \\ WorkteamA \\ ProjectFiles \\ e uma regra de exclusão para \\ os \\ protótipos myPH:///C: WorkteamA ProjectFiles \\ \\ .</span><span class="sxs-lookup"><span data-stu-id="17dd0-125">In this situation, you would need an inclusion rule for myPH:///C:\\WorkteamA\\ProjectFiles\\ and an exclusion rule for myPH:///C:\\WorkteamA\\ProjectFiles\\Prototypes\\.</span></span>

<span data-ttu-id="17dd0-126">Há três tipos de regras, com a seguinte ordem de precedência:</span><span class="sxs-lookup"><span data-stu-id="17dd0-126">There are three types of rules, with the following order of precedence:</span></span>

1.  <span data-ttu-id="17dd0-127">As regras de Política de Grupo são definidas por administradores e podem substituir todas as outras regras.</span><span class="sxs-lookup"><span data-stu-id="17dd0-127">Group Policy rules are set by administrators and can override all other rules.</span></span>
2.  <span data-ttu-id="17dd0-128">As regras de usuário são definidas por usuários que modificam o escopo na interface do usuário de opções do Windows Search.</span><span class="sxs-lookup"><span data-stu-id="17dd0-128">User rules are set by users modifying the scope in the Windows Search options user interface.</span></span> <span data-ttu-id="17dd0-129">Os usuários ou outros aplicativos podem remover todas as regras de usuário e reverter para as regras padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-129">Users or other applications can remove all user rules and revert to default rules.</span></span>
3.  <span data-ttu-id="17dd0-130">As regras padrão normalmente são definidas por um aplicativo para definir um escopo padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-130">Default rules are typically set by an application to define a default scope.</span></span> <span data-ttu-id="17dd0-131">Por exemplo, regras padrão podem ser definidas quando um novo manipulador de protocolo ou contêiner é adicionado ao sistema.</span><span class="sxs-lookup"><span data-stu-id="17dd0-131">For example, default rules might be set when a new protocol handler or container is added to the system.</span></span>

<span data-ttu-id="17dd0-132">Juntos, esses tipos de regras incluem o *conjunto de regras de trabalho* do qual o Gerenciador de escopo de rastreamento (CSM) gera a lista completa de URLs a serem rastreadas.</span><span class="sxs-lookup"><span data-stu-id="17dd0-132">Together, these types of rules comprise the *working rule set* from which the Crawl Scope Manager (CSM) generates the full list of URLs to crawl.</span></span> <span data-ttu-id="17dd0-133">Embora as regras padrão possam ser substituídas pelas regras de diretiva de grupo e por regras de usuário, elas são mantidas em seu próprio conjunto de regras padrão, que pode ser revertido a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-133">While default rules can be overridden by group policy rules and by user rules, they are maintained in their own default rule set, which you can revert to at any time.</span></span> <span data-ttu-id="17dd0-134">O indexador rastreia as URLs do conjunto de regras de trabalho e adiciona itens, propriedades e conteúdo ao catálogo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-134">The indexer crawls the URLs from the working rule set and adds items, properties, and content to the catalog.</span></span>

> [!Note]  
> <span data-ttu-id="17dd0-135">Os usuários com acesso ao painel de controle podem modificar as regras por meio dessa interface.</span><span class="sxs-lookup"><span data-stu-id="17dd0-135">Users with access to Control Panel can modify the rules through that interface.</span></span> <span data-ttu-id="17dd0-136">Portanto, os aplicativos que oferecem gerenciamento de escopo sempre devem obter as regras diretamente do CSM usando os métodos de enumeração em vez de depender de uma cópia salva das regras do usuário.</span><span class="sxs-lookup"><span data-stu-id="17dd0-136">Therefore, applications offering scope management should always get the rules directly from the CSM by using the enumeration methods instead of relying on a saved copy of user rules.</span></span>

 

<span data-ttu-id="17dd0-137">As regras de exclusão podem definir URLs de padrão com o caractere curinga ' \* '; por exemplo: file:///C: \\ projecta \\ \* \\ .</span><span class="sxs-lookup"><span data-stu-id="17dd0-137">Exclusion rules can define pattern URLs with the wildcard character '\*'; for example: file:///C:\\ProjectA\\\*\\.</span></span> <span data-ttu-id="17dd0-138">Uma regra de exclusão que usa esse padrão impede que o indexador rastreie todas as pastas no diretório projecta.</span><span class="sxs-lookup"><span data-stu-id="17dd0-138">An exclusion rule using this pattern prevents the indexer from crawling any folders under the ProjectA directory.</span></span> <span data-ttu-id="17dd0-139">Para obter um exemplo mais complicado, suponha que haja uma regra de inclusão para file:///C: \\ projecta \\ e uma regra de padrão de exclusão para \\ \\ \* \\ os dados de \\ file:///C: projecta \* .</span><span class="sxs-lookup"><span data-stu-id="17dd0-139">For a more complicated example, suppose there is an inclusion rule for file:///C:\\ProjectA\\ and an exclusion pattern rule for file:///C:\\ProjectA\\\*\\data\\\*.</span></span> <span data-ttu-id="17dd0-140">Nesse caso, o indexador rastrearia itens em:</span><span class="sxs-lookup"><span data-stu-id="17dd0-140">In this case, the indexer would crawl items in:</span></span>

-   <span data-ttu-id="17dd0-141">C: \\ projetoa</span><span class="sxs-lookup"><span data-stu-id="17dd0-141">C:\\ProjectA</span></span>\\
-   <span data-ttu-id="17dd0-142">C: \\ projecta \\ **versão** \\ testfiles</span><span class="sxs-lookup"><span data-stu-id="17dd0-142">C:\\ProjectA\\**version1**\\testfiles</span></span>\\
-   <span data-ttu-id="17dd0-143">C: \\ \\ **dados \\ temporários** do projecta versão </span><span class="sxs-lookup"><span data-stu-id="17dd0-143">C:\\ProjectA\\**version1\\temp**\\data</span></span>\\\\

<span data-ttu-id="17dd0-144">Mas o indexador não rastrearia itens em:</span><span class="sxs-lookup"><span data-stu-id="17dd0-144">But the indexer would not crawl items in:</span></span>

-   <span data-ttu-id="17dd0-145">C: \\ dados do projecta \\ **versão** </span><span class="sxs-lookup"><span data-stu-id="17dd0-145">C:\\ProjectA\\**version1**\\data</span></span>\\\\

 

## <a name="before-you-begin"></a><span data-ttu-id="17dd0-146">Antes de começar</span><span class="sxs-lookup"><span data-stu-id="17dd0-146">Before You Begin</span></span>

<span data-ttu-id="17dd0-147">Antes de usar qualquer uma das interfaces do Gerenciador de escopo de rastreamento, você deve executar as seguintes etapas de pré-requisito:</span><span class="sxs-lookup"><span data-stu-id="17dd0-147">Before you use any of the Crawl Scope Manager interfaces, you must perform the following prerequisite steps:</span></span>

1.  <span data-ttu-id="17dd0-148">Crie o objeto **CSearchManager** e obtenha sua interface **ISearchManager** .</span><span class="sxs-lookup"><span data-stu-id="17dd0-148">Create the **CSearchManager** object and obtain its **ISearchManager** interface.</span></span>
2.  <span data-ttu-id="17dd0-149">Chame **ISearchManager:: getCatalog** para "SystemIndex" para obter uma instância da interface **ISearchCatalogManager** .</span><span class="sxs-lookup"><span data-stu-id="17dd0-149">Call **ISearchManager::GetCatalog** for "SystemIndex" to obtain an instance of the **ISearchCatalogManager** interface.</span></span>
3.  <span data-ttu-id="17dd0-150">Chame **ISearchCatalogManager:: GetCrawlScopeManager** para obter uma instância da interface **ISearchCrawlScopeManager** .</span><span class="sxs-lookup"><span data-stu-id="17dd0-150">Call **ISearchCatalogManager::GetCrawlScopeManager** to obtain an instance of the **ISearchCrawlScopeManager** interface.</span></span>

<span data-ttu-id="17dd0-151">Depois de fazer alterações no Gerenciador de escopo de rastreamento, você deve chamar o método [**ISearchCrawlScopeManager:: SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall) .</span><span class="sxs-lookup"><span data-stu-id="17dd0-151">After making any changes to the Crawl Scope Manager, you must call the [**ISearchCrawlScopeManager::SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall) method.</span></span> <span data-ttu-id="17dd0-152">Esse método não usa parâmetros e retorna S \_ OK em caso de êxito.</span><span class="sxs-lookup"><span data-stu-id="17dd0-152">This method takes no parameters and returns S\_OK on success.</span></span>

 

## <a name="adding-scope-rules"></a><span data-ttu-id="17dd0-153">Adicionando regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-153">Adding Scope Rules</span></span>

<span data-ttu-id="17dd0-154">As regras de trabalho definidas para o CSM incluem regras de usuário e padrão, bem como todas as regras forçadas pela política de grupo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-154">The working rules set for the CSM includes user and default rules, as well as any rules forced by group policy.</span></span> <span data-ttu-id="17dd0-155">As regras de usuário são configuradas por usuários em uma interface do usuário e as regras padrão podem ser definidas por qualquer um dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="17dd0-155">User rules are set up by users in a user interface, and default rules can be set by any of the following:</span></span>

-   <span data-ttu-id="17dd0-156">Diretivas de Grupo implementadas por um administrador do sistema (elas não usam a interface [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) .)</span><span class="sxs-lookup"><span data-stu-id="17dd0-156">Group policies implemented by a system administrator (These do not use the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.)</span></span>
-   <span data-ttu-id="17dd0-157">A instalação ou atualização de um aplicativo como o Windows Search ou um manipulador de protocolo</span><span class="sxs-lookup"><span data-stu-id="17dd0-157">The installation or update of an application like Windows Search or a protocol handler</span></span>
-   <span data-ttu-id="17dd0-158">Um aplicativo de instalação para a adição de um novo armazenamento de dados ou contêiner</span><span class="sxs-lookup"><span data-stu-id="17dd0-158">A setup application for the addition of a new data store or container</span></span>

<span data-ttu-id="17dd0-159">O [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) fornece dois métodos para adicionar novas regras de escopo, conforme descrito na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="17dd0-159">The [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) provides two methods for adding new scope rules, as described in the following table.</span></span> <span data-ttu-id="17dd0-160">Os caminhos para regras de inclusão para o sistema de arquivos devem terminar com uma barra invertida ' \\ ' (por exemplo, file:///C: \\ files \\ ) e os caminhos para regras de exclusão devem terminar com um asterisco (por exemplo, file:///c: \\ files \\ \* ).</span><span class="sxs-lookup"><span data-stu-id="17dd0-160">Paths for inclusion rules for the file system must end with a backslash '\\' (for example, file:///C:\\files\\), and paths for exclusion rules must end with an asterisk (for example, file:///c:\\files\\\*).</span></span> <span data-ttu-id="17dd0-161">Somente as regras de exclusão podem conter URLs de padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-161">Only exclusion rules can contain pattern URLs.</span></span> <span data-ttu-id="17dd0-162">Além disso, é recomendável incluir SIDs (identificadores de segurança) dos usuários em caminhos, para maior segurança.</span><span class="sxs-lookup"><span data-stu-id="17dd0-162">Furthermore, we recommend including users' security identifiers (SIDs) in paths, for better security.</span></span> <span data-ttu-id="17dd0-163">Os caminhos por usuário são mais seguros, pois as consultas seriam executadas em um processo por usuário, garantindo que um usuário não possa ver itens indexados da caixa de entrada de outro usuário, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-163">Per-user paths are more secure as queries would then run in a per-user process, ensuring that one user cannot see items indexed from another user's inbox, for example.</span></span>

<span data-ttu-id="17dd0-164">A tabela a seguir descreve os métodos da interface ISearchCrawlScopeManager usada para adicionar novas regras de escopo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-164">The following table describes the methods of the ISearchCrawlScopeManager interface used for adding new scope rules.</span></span>



| <span data-ttu-id="17dd0-165">Método</span><span class="sxs-lookup"><span data-stu-id="17dd0-165">Method</span></span>                                                                              | <span data-ttu-id="17dd0-166">Descrição</span><span class="sxs-lookup"><span data-stu-id="17dd0-166">Description</span></span>                                                                                                                                                                                                                  |
|-------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="17dd0-167">**AddUserScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-167">**AddUserScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-adduserscoperule)       | <span data-ttu-id="17dd0-168">Adiciona uma regra para uma URL, conforme especificado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="17dd0-168">Adds a rule for a URL, as specified by the user.</span></span> <span data-ttu-id="17dd0-169">Essas regras substituem as regras padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-169">These rules override default rules.</span></span> <span data-ttu-id="17dd0-170">Use esse método se você tiver implementado uma interface do usuário que permite aos usuários gerenciar suas próprias regras e URLs de escopo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-170">Use this method if you have implemented a user interface that lets users manage their own scope rules and URLs.</span></span>                         |
| [<span data-ttu-id="17dd0-171">**AddDefaultScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-171">**AddDefaultScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-adddefaultscoperule) | <span data-ttu-id="17dd0-172">Adiciona uma regra para uma URL, conforme especificado por outro aplicativo, como um manipulador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-172">Adds a rule for a URL, as specified by another application like a protocol handler.</span></span> <span data-ttu-id="17dd0-173">Use esse método quando você tiver implementado um novo manipulador de protocolo ou adicionado um novo armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="17dd0-173">Use this method when you have implemented a new protocol handler or added a new data store.</span></span> <span data-ttu-id="17dd0-174">Essas regras podem ser substituídas pelas regras do usuário.</span><span class="sxs-lookup"><span data-stu-id="17dd0-174">These rules can be overridden by user rules.</span></span> |



 

<span data-ttu-id="17dd0-175">Cada método usa uma URL para um local indexável e sinalizadores que determinam se a URL deve ser incluída ou excluída.</span><span class="sxs-lookup"><span data-stu-id="17dd0-175">Each method takes a URL to an indexable location and flags that determine whether the URL should be included or excluded.</span></span> <span data-ttu-id="17dd0-176">O parâmetro *fFollowFlags* é reservado para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="17dd0-176">The *fFollowFlags* parameter is reserved for future use.</span></span> <span data-ttu-id="17dd0-177">Quando você adiciona uma nova regra de escopo e o Gerenciador de escopo de rastreamento determina que a regra já existe (com base na URL ou no padrão fornecido), o conjunto de regras de trabalho é atualizado para que (1) a regra antiga seja substituída pela nova regra e (2) qualquer regra de usuário que contradiz que ela seja removida.</span><span class="sxs-lookup"><span data-stu-id="17dd0-177">When you add a new scope rule and the Crawl Scope Manager determines that the rule already exists (based on the URL or the pattern provided), the working rule set is updated so that (1) the old rule is replaced by the new rule and (2) any user rules that contradict it are removed.</span></span>

<span data-ttu-id="17dd0-178">**Dica:** Embora a raiz file://seja incluída por padrão no escopo do rastreamento, os arquivos de programa não são indexados por padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-178">**Tip:** While the file:// root is included by default in the crawl scope, Program Files is not indexed by default.</span></span> <span data-ttu-id="17dd0-179">Portanto, os aplicativos com dados salvos no diretório arquivos de programas precisam adicionar seu local como uma regra padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-179">Therefore, applications with data saved to their Program Files directory need to add their location as a default rule.</span></span>

### <a name="notes-on-user-rules"></a><span data-ttu-id="17dd0-180">Observações sobre regras de usuário</span><span class="sxs-lookup"><span data-stu-id="17dd0-180">Notes on User Rules</span></span>

<span data-ttu-id="17dd0-181">Se uma nova regra de usuário for igual a uma regra padrão existente, a nova regra de usuário substituirá a regra padrão no conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-181">If a new user rule is the same as an existing default rule, the new user rule overrides the default rule in the working rule set.</span></span> <span data-ttu-id="17dd0-182">Se a nova regra de usuário for a mesma que uma regra de usuário existente, a regra de usuário antiga será substituída.</span><span class="sxs-lookup"><span data-stu-id="17dd0-182">If the new user rule is the same as an existing user rule, the old user rule is replaced.</span></span>

<span data-ttu-id="17dd0-183">A definição do sinalizador *fOverrideChildren* tem os seguintes resultados no conjunto de regras de trabalho:</span><span class="sxs-lookup"><span data-stu-id="17dd0-183">Setting the flag *fOverrideChildren* has the following results in the working rule set:</span></span>

-   <span data-ttu-id="17dd0-184">**Verdadeiro** resulta na remoção de todas as regras filho do conjunto de regras de trabalho (regras de usuário e regras padrão).</span><span class="sxs-lookup"><span data-stu-id="17dd0-184">**TRUE** results in the removal of all child rules from the working rule set (both user rules and default rules).</span></span>
-   <span data-ttu-id="17dd0-185">FALSO resulta na readição às regras de trabalho defina todas as regras padrão que são filhos da nova regra de usuário.</span><span class="sxs-lookup"><span data-stu-id="17dd0-185">FALSE results in re-adding to the working rules set all the default rules that are children of the new user rule.</span></span> <span data-ttu-id="17dd0-186">Se uma regra padrão filho for uma inclusão e a nova regra de usuário for uma exclusão, a regra padrão será alterada para uma regra de usuário de inclusão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-186">If a child default rule is an inclusion and the new user rule is an exclusion, the default rule is changed to an inclusion user rule.</span></span>

 

## <a name="removing-scope-rules"></a><span data-ttu-id="17dd0-187">Removendo regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-187">Removing Scope Rules</span></span>

<span data-ttu-id="17dd0-188">Você pode usar a interface [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) para remover uma regra de escopo do conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-188">You can use the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface to remove a scope rule from the working rule set.</span></span> <span data-ttu-id="17dd0-189">Essa interface fornece os dois métodos a seguir para remover regras de escopo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-189">This interface provides the following two methods for removing scope rules.</span></span>



| <span data-ttu-id="17dd0-190">Método</span><span class="sxs-lookup"><span data-stu-id="17dd0-190">Method</span></span>                                                                                    | <span data-ttu-id="17dd0-191">Descrição</span><span class="sxs-lookup"><span data-stu-id="17dd0-191">Description</span></span>                                                                                                                                                                                           |
|-------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="17dd0-192">**RemoveScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-192">**RemoveScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removescoperule)               | <span data-ttu-id="17dd0-193">Remove uma regra de usuário para uma URL especificada do conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-193">Removes a user rule for a specified URL from the working rule set.</span></span> <span data-ttu-id="17dd0-194">Se a regra de usuário for uma duplicata ou substituir uma regra padrão, a regra padrão permanecerá no conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-194">If the user rule is a duplicate of or overrides a default rule, the default rule remains in the working rule set.</span></span>                  |
| [<span data-ttu-id="17dd0-195">**RemoveDefaultScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-195">**RemoveDefaultScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removedefaultscoperule) | <span data-ttu-id="17dd0-196">Remove uma regra padrão para uma URL especificada do conjunto de regras de trabalho e do conjunto de regras padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-196">Removes a default rule for a specified URL from both the working rule set and the default rule set.</span></span> <span data-ttu-id="17dd0-197">Depois de chamar esse método, não é possível reverter para essa regra padrão usando RevertToDefaultScopes.</span><span class="sxs-lookup"><span data-stu-id="17dd0-197">After calling this method, you cannot revert to this default rule by using RevertToDefaultScopes.</span></span> |



 

<span data-ttu-id="17dd0-198">Cada método usa uma URL e um sinalizador que indica se a regra a ser removida é uma regra de inclusão ou exclusão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-198">Each method takes a URL and a flag indicating whether the rule to be removed is an inclusion or exclusion rule.</span></span> <span data-ttu-id="17dd0-199">Esses métodos retornarão um erro se uma regra com essa URL e o sinalizador de inclusão/exclusão não for encontrado.</span><span class="sxs-lookup"><span data-stu-id="17dd0-199">These methods returns an error if a rule with that URL and inclusion/exclusion flag is not found.</span></span>

<span data-ttu-id="17dd0-200">**Dica:** Se você quiser remover completamente um escopo do escopo do rastreamento, use o método [**RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) , que remove a raiz de pesquisa e todas as regras de escopo associadas.</span><span class="sxs-lookup"><span data-stu-id="17dd0-200">**Tip:** If you want to remove a scope from the crawl scope entirely, use the [**RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) method, which removes the search root and all associated scope rules.</span></span> <span data-ttu-id="17dd0-201">Fazer isso durante a desinstalação, por exemplo, é considerado uma prática recomendada.</span><span class="sxs-lookup"><span data-stu-id="17dd0-201">Doing this while uninstalling, for example, is considered best practice.</span></span>

<span data-ttu-id="17dd0-202">Também é possível remover todas as substituições do conjunto de usuários de uma raiz de pesquisa e reverter para as regras raiz de pesquisa original e escopo padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-202">It is also possible to remove all user-set overrides of a search root and revert to the original search root and default scope rules.</span></span> <span data-ttu-id="17dd0-203">Para obter mais informações, consulte a próxima seção.</span><span class="sxs-lookup"><span data-stu-id="17dd0-203">For more information, refer to the next section.</span></span>

> [!Note]  
> <span data-ttu-id="17dd0-204">No Windows Vista, se os usuários forem removidos por meio de perfis de usuário no painel de controle, CSM removerá todas as regras e raízes que incluem seu SID e removerá seus itens indexados do catálogo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-204">On Windows Vista, if users are removed through User Profiles in Control Panel, CSM removes all rules and roots that include their SID and removes their indexed items from the catalog.</span></span> <span data-ttu-id="17dd0-205">No Windows XP, você deve remover as raízes e as regras dos usuários manualmente.</span><span class="sxs-lookup"><span data-stu-id="17dd0-205">On Windows XP, you must remove the users' roots and rules manually.</span></span>

 

 

## <a name="reverting-to-default-rules"></a><span data-ttu-id="17dd0-206">Revertendo para regras padrão</span><span class="sxs-lookup"><span data-stu-id="17dd0-206">Reverting to Default Rules</span></span>

<span data-ttu-id="17dd0-207">A reversão para regras padrão remove todas as regras de usuário de uma URL ou raiz e restaura todas as regras padrão para o conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-207">Reverting to default rules removes all user rules for a URL or root and restores all default rules to the working rule set.</span></span> <span data-ttu-id="17dd0-208">No entanto, ele não remove regras definidas pela política de grupo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-208">It does not, however, remove rules set by group policy.</span></span> <span data-ttu-id="17dd0-209">O método [**RevertToDefaultScopes**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-reverttodefaultscopes) não usa nenhum parâmetro e retorna um código de erro se não for possível reverter para as regras padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-209">The [**RevertToDefaultScopes**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-reverttodefaultscopes) method takes no parameters and returns an error code if it is unable to revert to default rules.</span></span>

 

## <a name="enumerating-scope-rules"></a><span data-ttu-id="17dd0-210">Enumerando regras de escopo</span><span class="sxs-lookup"><span data-stu-id="17dd0-210">Enumerating Scope Rules</span></span>

<span data-ttu-id="17dd0-211">O CSM enumera regras de escopo usando uma interface de enumerador de estilo COM padrão, [**IEnumSearchScopeRules**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules) .</span><span class="sxs-lookup"><span data-stu-id="17dd0-211">The CSM enumerates scope rules by using a standard COM-style enumerator interface, [**IEnumSearchScopeRules**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules) .</span></span> <span data-ttu-id="17dd0-212">Você pode usar essa interface para enumerar regras de escopo para várias finalidades.</span><span class="sxs-lookup"><span data-stu-id="17dd0-212">You can use this interface to enumerate scope rules for several purposes.</span></span> <span data-ttu-id="17dd0-213">Por exemplo, talvez você queira exibir todo o conjunto de regras de trabalho em uma interface do usuário ou descobrir se uma regra ou o filho de uma regra já está no escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-213">For example, you might want to display the entire working rule set in a user interface, or discover whether a rule or the child of a rule is already in the crawl scope.</span></span>

 

## <a name="tracing-scope-rules"></a><span data-ttu-id="17dd0-214">Regras de escopo de rastreamento</span><span class="sxs-lookup"><span data-stu-id="17dd0-214">Tracing Scope Rules</span></span>

<span data-ttu-id="17dd0-215">O CSM também permite que você determine se uma URL especificada está incluída no escopo do rastreamento e se ela tem uma regra de escopo pai ou filho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-215">The CSM also enables you to determine whether a specified URL is included in the crawl scope and whether it has a parent or child scope rule.</span></span> <span data-ttu-id="17dd0-216">Você também pode descobrir por que uma URL é incluída ou excluída do escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-216">You can also find out why a URL is included or excluded from the crawl scope.</span></span> <span data-ttu-id="17dd0-217">Esses métodos não se destinam a serem usados com URLs de padrão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-217">These methods are not intended to be used with pattern URLs.</span></span>

<span data-ttu-id="17dd0-218">A tabela a seguir descreve os métodos de [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) usados para adicionar novas regras de escopo.</span><span class="sxs-lookup"><span data-stu-id="17dd0-218">The following table describes the methods of [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) used for adding new scope rules.</span></span>



| <span data-ttu-id="17dd0-219">Método</span><span class="sxs-lookup"><span data-stu-id="17dd0-219">Method</span></span>                                                                                      | <span data-ttu-id="17dd0-220">Descrição</span><span class="sxs-lookup"><span data-stu-id="17dd0-220">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="17dd0-221">**GetParentScopeVersionId**</span><span class="sxs-lookup"><span data-stu-id="17dd0-221">**GetParentScopeVersionId**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-getparentscopeversionid) | <span data-ttu-id="17dd0-222">Obtém a ID da versão da URL de inclusão pai.</span><span class="sxs-lookup"><span data-stu-id="17dd0-222">Gets the version ID of the parent inclusion URL.</span></span> <span data-ttu-id="17dd0-223">Você pode usar esse método para ver se o escopo pai foi alterado desde a última vez que você o marcou.</span><span class="sxs-lookup"><span data-stu-id="17dd0-223">You can use this method to see if the parent scope has changed since the last time you checked it.</span></span><br/> <span data-ttu-id="17dd0-224">Exemplo: se um aplicativo de email usar notificações gerenciadas pelo provedor, ele poderá obter a versão do escopo pai antes de fechar e verificar a versão novamente quando for aberto.</span><span class="sxs-lookup"><span data-stu-id="17dd0-224">Example: If a mail application uses provider-managed notifications, it might get the parent scope version before it closes and check the version again when it opens.</span></span> <span data-ttu-id="17dd0-225">Em seguida, o aplicativo pode determinar se ele precisa enviar por push um novo conjunto de notificações para o indexador.</span><span class="sxs-lookup"><span data-stu-id="17dd0-225">Then the application can determine whether it needs to push a new set of notifications to the indexer.</span></span><br/> |
| [<span data-ttu-id="17dd0-226">**HasChildScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-226">**HasChildScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-haschildscoperule)             | <span data-ttu-id="17dd0-227">Retornará **true** se a URL especificada tiver uma regra filho (uma regra sendo aplicada a um filho em qualquer nível dentro de sua hierarquia de URL).</span><span class="sxs-lookup"><span data-stu-id="17dd0-227">Returns **TRUE** if the specified URL has a child rule (a rule applying to a child at any level within its URL hierarchy).</span></span> <br/> <span data-ttu-id="17dd0-228">Exemplo: se a URL for file:///C: \\ Folder \\ , esse método retornará **true** se CSM tiver uma regra de escopo especificamente para \\ subpasta file:///C: Folder \\ \\ .</span><span class="sxs-lookup"><span data-stu-id="17dd0-228">Example: If the URL is file:///C:\\Folder\\, this method returns **TRUE** if the CSM has a scope rule specifically for file:///C:\\Folder\\Subfolder\\.</span></span><br/>                                                                                                                                              |
| [<span data-ttu-id="17dd0-229">**HasParentScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-229">**HasParentScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-hasparentscoperule)           | <span data-ttu-id="17dd0-230">Retornará **true** se a URL especificada tiver uma regra pai (uma regra aplicada a um pai em qualquer nível na hierarquia de URL).</span><span class="sxs-lookup"><span data-stu-id="17dd0-230">Returns **TRUE** if the specified URL has a parent rule (a rule applying to a parent at any level in the URL hierarchy).</span></span><br/> <span data-ttu-id="17dd0-231">Exemplo: se a URL for file:///C: subpasta \\ Folder \\ , esse método retornará **true** se CSM tiver uma regra de escopo especificamente para file:///C: \\ Folder \\ .</span><span class="sxs-lookup"><span data-stu-id="17dd0-231">Example: If the URL is file:///C:\\Folder\\Subfolder, this method returns **TRUE** if the CSM has a scope rule specifically for file:///C:\\Folder\\.</span></span><br/>                                                                                                                                                   |
| [<span data-ttu-id="17dd0-232">**IncludedInCrawlScope**</span><span class="sxs-lookup"><span data-stu-id="17dd0-232">**IncludedInCrawlScope**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope)       | <span data-ttu-id="17dd0-233">Retornará **true** se a URL especificada estiver incluída no escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-233">Returns **TRUE** if the specified URL is included in the crawl scope.</span></span>                                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="17dd0-234">**IncludedInCrawlScopeEx**</span><span class="sxs-lookup"><span data-stu-id="17dd0-234">**IncludedInCrawlScopeEx**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex)   | <span data-ttu-id="17dd0-235">Retorna um valor da enumeração [**CLUSION \_ Reason**](/windows/win32/api/searchapi/ne-searchapi-clusion_reason) explicando por que a URL é incluída ou excluída do escopo do rastreamento e recupera o valor **true** se a URL for incluída no escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="17dd0-235">Returns a value from the [**CLUSION\_REASON**](/windows/win32/api/searchapi/ne-searchapi-clusion_reason) enumeration explaining why the URL is included in or excluded from the crawl scope, and retrieves the value **TRUE** if the URL is included in the crawl scope.</span></span> <span data-ttu-id="17dd0-236">Esse método pode ajudá-lo a identificar conflitos em seu conjunto de regras de trabalho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-236">This method can help you identify conflicts in your working rule set.</span></span>                                                                                                                                       |



 

 

> [!Note]  
> <span data-ttu-id="17dd0-237">Os métodos [**IncludedInCrawlScope**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope) e [**IncludedInCrawlScopeEx**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex) determinam se a URL será rastreada com base apenas nas regras no CSM.</span><span class="sxs-lookup"><span data-stu-id="17dd0-237">The [**IncludedInCrawlScope**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope) and [**IncludedInCrawlScopeEx**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex) methods determine whether the URL will be crawled based solely on the rules in the CSM.</span></span> <span data-ttu-id="17dd0-238">Pode haver outros motivos pelos quais uma URL não é rastreada, como o bit de que está sendo definido (ou seja, um usuário não permitiu a indexação rápida na caixa de diálogo de propriedade da pasta).</span><span class="sxs-lookup"><span data-stu-id="17dd0-238">There can be other reasons that a URL is not crawled, such as the FANCI bit being set (that is, a user has disallowed fast indexing in the folder's Property dialog box.)</span></span>

 

<span data-ttu-id="17dd0-239">Se você acreditar que um caminho de arquivo deve ser excluído, mas ele estiver listado como incluído, certifique-se de que as regras de exclusão terminem com " <path> \\ \* ".</span><span class="sxs-lookup"><span data-stu-id="17dd0-239">If you believe that a file path should be excluded, but it is listed as included, be sure that exclusion rules end with "<path>\\\*".</span></span> <span data-ttu-id="17dd0-240">Se você acreditar que um arquivo ou caminho de arquivo deve ser incluído, mas não está, certifique-se de verificar a configuração de bit de um pouco para o arquivo ou caminho.</span><span class="sxs-lookup"><span data-stu-id="17dd0-240">If you believe that a file or file path should be included but it is not, be sure to check the FANCI bit setting for the file or path.</span></span> <span data-ttu-id="17dd0-241">Você pode fazer isso clicando com o botão direito do mouse no arquivo ou caminho do arquivo e selecionando **Propriedades**. em seguida, verifique se a caixa **de seleção para pesquisa rápida, permitir serviço de indexação para indexar esta pasta** está marcada.</span><span class="sxs-lookup"><span data-stu-id="17dd0-241">You can do this by right-clicking the file or file path and selecting **Properties**, then be sure the **For fast searching, allow Indexing Service to index this folder** checkbox is selected.</span></span> <span data-ttu-id="17dd0-242">Se o arquivo ou caminho do arquivo não estiver marcado para indexação aqui, ele não será indexado mesmo que esteja em uma regra de inclusão.</span><span class="sxs-lookup"><span data-stu-id="17dd0-242">If the file or file path is not marked for indexing here, it will not be indexed even if it is in an inclusion rule.</span></span>

## <a name="related-topics"></a><span data-ttu-id="17dd0-243">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="17dd0-243">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="17dd0-244">**Referência**</span><span class="sxs-lookup"><span data-stu-id="17dd0-244">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="17dd0-245">**ISearchCrawlScopeManager**</span><span class="sxs-lookup"><span data-stu-id="17dd0-245">**ISearchCrawlScopeManager**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager)
</dt> <dt>

[<span data-ttu-id="17dd0-246">**ISearchCrawlScopeManager2**</span><span class="sxs-lookup"><span data-stu-id="17dd0-246">**ISearchCrawlScopeManager2**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2)
</dt> <dt>

[<span data-ttu-id="17dd0-247">**ISearchScopeRule**</span><span class="sxs-lookup"><span data-stu-id="17dd0-247">**ISearchScopeRule**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchscoperule)
</dt> <dt>

[<span data-ttu-id="17dd0-248">**IEnumSearchScopeRules**</span><span class="sxs-lookup"><span data-stu-id="17dd0-248">**IEnumSearchScopeRules**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules)
</dt> <dt>

<span data-ttu-id="17dd0-249">**Conceitua**</span><span class="sxs-lookup"><span data-stu-id="17dd0-249">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="17dd0-250">Gerenciando raízes de pesquisa</span><span class="sxs-lookup"><span data-stu-id="17dd0-250">Managing Search Roots</span></span>](-search-3x-wds-extidx-csm-searchroots.md)
</dt> </dl>

 

 




