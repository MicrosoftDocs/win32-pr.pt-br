---
description: A Microsoft fornece separadores de palavras e lematizadores para vários idiomas. Este tópico descreve como implementar e usar separadores de palavras e lematizadores personalizados para idiomas e locais além daqueles fornecidos pela Microsoft.
ms.assetid: 47768691-7071-440e-bfbf-975713880c00
title: Implementando um separador de palavras e lematizador
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bd4f4e3210e7f4e17bb035115fd694656cc6e6d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010386"
---
# <a name="implementing-a-word-breaker-and-stemmer"></a><span data-ttu-id="44c29-104">Implementando um separador de palavras e lematizador</span><span class="sxs-lookup"><span data-stu-id="44c29-104">Implementing a Word Breaker and Stemmer</span></span>

<span data-ttu-id="44c29-105">A Microsoft fornece separadores de palavras e lematizadores para vários idiomas.</span><span class="sxs-lookup"><span data-stu-id="44c29-105">Microsoft provides word breakers and stemmers for a number of languages.</span></span> <span data-ttu-id="44c29-106">Este tópico descreve como implementar e usar separadores de palavras e lematizadores personalizados para idiomas e locais além daqueles fornecidos pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="44c29-106">This topic describes how to implement, and use custom word breakers and stemmers for languages, and locales beyond those provided by Microsoft.</span></span>

> [!Note]
> <span data-ttu-id="44c29-107">A partir de julho de 2018, foi feita uma alteração de segurança no Windows Server 2019 que impede que DLLs sem uma assinatura da Microsoft sejam carregadas pelo SearchIndexer.exe.</span><span class="sxs-lookup"><span data-stu-id="44c29-107">As of July 2018 a security change was made to Windows Server 2019 that prevents DLLs without a Microsoft signature from being loaded by SearchIndexer.exe.</span></span> <span data-ttu-id="44c29-108">Como resultado, o Windows Server 2019 não oferece mais suporte a separadores de palavras personalizados assinados não Microsoft.</span><span class="sxs-lookup"><span data-stu-id="44c29-108">As a result Windows Server 2019 no longer supports non-Microsoft signed custom word breakers.</span></span> 

<span data-ttu-id="44c29-109">Este tópico é organizado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="44c29-109">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="44c29-110">Registrando uma DLL de recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-110">Registering a Language Resource DLL</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="44c29-111">Registrando um idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-111">Registering a Language</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="44c29-112">Implementando uma palavra Beaker</span><span class="sxs-lookup"><span data-stu-id="44c29-112">Implementing a Word Beaker</span></span>](#implementing-a-word-beaker)
    -   [<span data-ttu-id="44c29-113">WordSink e PhraseSink</span><span class="sxs-lookup"><span data-stu-id="44c29-113">WordSink and PhraseSink</span></span>](#wordsink-and-phrasesink)
    -   [<span data-ttu-id="44c29-114">Quebras</span><span class="sxs-lookup"><span data-stu-id="44c29-114">Breaks</span></span>](#breaks)
    -   [<span data-ttu-id="44c29-115">Escalabilidade, Performancy e segurança</span><span class="sxs-lookup"><span data-stu-id="44c29-115">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="44c29-116">Implementando um lematizador</span><span class="sxs-lookup"><span data-stu-id="44c29-116">Implementing a Stemmer</span></span>](#implementing-a-stemmer)
    -   [<span data-ttu-id="44c29-117">Escalabilidade, Performancy e segurança</span><span class="sxs-lookup"><span data-stu-id="44c29-117">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="44c29-118">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="44c29-118">Related topics</span></span>](#related-topics)

## <a name="registering-a-language-resource-dll"></a><span data-ttu-id="44c29-119">Registrando uma DLL de recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-119">Registering a Language Resource DLL</span></span>

<span data-ttu-id="44c29-120">Cada DLL de recurso de idioma deve implementar e exportar os seguintes pontos de entrada.</span><span class="sxs-lookup"><span data-stu-id="44c29-120">Each language resource DLL must implement and export the following entry points.</span></span> <span data-ttu-id="44c29-121">A DLL pode ser registrada para estar em qualquer pasta.</span><span class="sxs-lookup"><span data-stu-id="44c29-121">The DLL can be registered to be in any folder.</span></span>

-   <span data-ttu-id="44c29-122">DllMain é o ponto de entrada padrão para DLL.</span><span class="sxs-lookup"><span data-stu-id="44c29-122">DllMain is the standard entry point to DLL.</span></span>
-   <span data-ttu-id="44c29-123">DllRegisterServer registra a DLL no registro, como `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span><span class="sxs-lookup"><span data-stu-id="44c29-123">DllRegisterServer registers the DLL in the registry, such as `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span></span>
-   <span data-ttu-id="44c29-124">O DllCanUnloadNow permite que os clientes chamem esse ponto de entrada por meio de Component Object Model (COM) para determinar se é possível descarregar a DLL de recursos de idioma.</span><span class="sxs-lookup"><span data-stu-id="44c29-124">DllCanUnloadNow enables clients to call this entry point through Component Object Model (COM) to determine whether it is possible to unload the language resource DLL.</span></span>
-   <span data-ttu-id="44c29-125">DllUnRegisterServer remove a DLL do registro.</span><span class="sxs-lookup"><span data-stu-id="44c29-125">DllUnRegisterServer removes the DLL from the registry.</span></span>

## <a name="registering-a-language"></a><span data-ttu-id="44c29-126">Registrando um idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-126">Registering a Language</span></span>

<span data-ttu-id="44c29-127">O registro contém entradas específicas de idioma para o idioma que está sendo indexado e essas entradas controlam as partes dos processos de indexação e consulta específicos do idioma.</span><span class="sxs-lookup"><span data-stu-id="44c29-127">The registry contains language-specific entries for the language being indexed, and these entries control the parts of the indexing and query processes that are language specific.</span></span> <span data-ttu-id="44c29-128">Essas entradas de registro podem ser encontradas na seguinte chave do registro.</span><span class="sxs-lookup"><span data-stu-id="44c29-128">These registry entries can be found under the following registry key.</span></span>

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         ContentIndex
            Control
               Language
                  
```

## <a name="implementing-a-word-beaker"></a><span data-ttu-id="44c29-129">Implementando uma palavra Beaker</span><span class="sxs-lookup"><span data-stu-id="44c29-129">Implementing a Word Beaker</span></span>

<span data-ttu-id="44c29-130">Os separadores de palavras implementam [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span><span class="sxs-lookup"><span data-stu-id="44c29-130">Word breakers implement [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span></span> <span data-ttu-id="44c29-131">O método [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) executa todo o processamento e a análise de texto.</span><span class="sxs-lookup"><span data-stu-id="44c29-131">The [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method performs all text processing and parsing.</span></span> <span data-ttu-id="44c29-132">Para implementar um componente de separador de palavras, você deve ter heurística de idioma para seu idioma.</span><span class="sxs-lookup"><span data-stu-id="44c29-132">To implement a word breaker component, you must have language heuristics for your language.</span></span> <span data-ttu-id="44c29-133">Isso inclui informações sobre sintaxe e morphology.</span><span class="sxs-lookup"><span data-stu-id="44c29-133">This includes information about syntax and morphology.</span></span> <span data-ttu-id="44c29-134">Você também pode precisar de uma lista de palavras a serem excluídas ou incluídas.</span><span class="sxs-lookup"><span data-stu-id="44c29-134">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="44c29-135">Você cria o arquivo de palavras de ruído para a localidade do idioma na lista de palavras excluídas.</span><span class="sxs-lookup"><span data-stu-id="44c29-135">You build the file of noise words for your language locale from the list of excluded words.</span></span> <span data-ttu-id="44c29-136">Para obter mais informações sobre considerações linguísticas e como essas considerações afetam as implementações de separador de palavras, consulte [considerações lingüísticas e Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-136">For more information about linguistic considerations and how these considerations affect word breaker implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="44c29-137">A principal finalidade do [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) é processar o texto continuamente da [**\_ fonte de texto**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) até que todo o texto seja processado ou até que o separador de palavras encontre um erro.</span><span class="sxs-lookup"><span data-stu-id="44c29-137">The main purpose of [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) is to process text continuously from the [**TEXT\_SOURCE**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) until all the text is processed, or until the word breaker encounters an error.</span></span> <span data-ttu-id="44c29-138">No loop de processamento de dados, **IWordBreaker:: BreakText** chama a análise e os métodos de utilitário que executam tarefas específicas para esse processo.</span><span class="sxs-lookup"><span data-stu-id="44c29-138">While in this data processing loop, **IWordBreaker::BreakText** calls parsing and utility methods that perform specific tasks for that process.</span></span> <span data-ttu-id="44c29-139">Por exemplo, o separador de palavras em alemão pode lidar com palavras compostas, enquanto o separador de palavras em francês pode processar [diacríticos](surface-form-normalization.md) ou [clitics](surface-form-normalization.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-139">For example, the German word breaker may handle compound words, whereas the French word breaker may process [diacritics](surface-form-normalization.md) or [clitics](surface-form-normalization.md).</span></span> <span data-ttu-id="44c29-140">As funções específicas que o separador de palavras executa e a estratégia que ele usa na execução dessas tarefas dependem totalmente dos requisitos para esse idioma.</span><span class="sxs-lookup"><span data-stu-id="44c29-140">The specific functions that the word breaker performs and the strategy that it uses in performing these tasks depend entirely on the requirements for that language.</span></span>

<span data-ttu-id="44c29-141">Ao dividir o texto, os separadores de palavras identificam formulários "alternativos" para palavras que podem ter várias representações.</span><span class="sxs-lookup"><span data-stu-id="44c29-141">When breaking text, word breakers identify "alternative" forms for words that may have multiple representations.</span></span> <span data-ttu-id="44c29-142">Nenhuma relação semântica é implícita entre as palavras geradas.</span><span class="sxs-lookup"><span data-stu-id="44c29-142">No semantic relationship is implied between the generated words.</span></span> <span data-ttu-id="44c29-143">Na verdade, a palavra original pode não ser incluída entre a lista de alternativas.</span><span class="sxs-lookup"><span data-stu-id="44c29-143">In fact, the original word may not be included among the list of alternatives.</span></span> <span data-ttu-id="44c29-144">Os formulários alternativos são salvos na mesma posição no índice que a palavra original para indicar que eles são idênticos.</span><span class="sxs-lookup"><span data-stu-id="44c29-144">The alternative forms are saved in the same position in the index as the original word to indicate that they are identical.</span></span>

<span data-ttu-id="44c29-145">Quando um documento é incluído no índice, cada palavra recebe um valor inteiro que representa o deslocamento ou a distância da palavra do início de um documento.</span><span class="sxs-lookup"><span data-stu-id="44c29-145">When a document is included in the index, each word is assigned an integer value that represents the offset, or the distance of the word from the beginning of a document.</span></span> <span data-ttu-id="44c29-146">A distância relativa entre palavras em uma consulta é comparada com os deslocamentos armazenados no índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="44c29-146">The relative distance between words in a query is compared against the offsets stored in the full-text index.</span></span> <span data-ttu-id="44c29-147">A consulta "onde está o documento do Kyle" corresponde a qualquer documento com "onde" no deslocamento n, "é" em n + 1, "Kyle" em n + 2 e "documento" em n + 3.</span><span class="sxs-lookup"><span data-stu-id="44c29-147">The query "Where is Kyle's document" matches any document with "Where" at offset n, "is" at n+1, "Kyle's" at n+2, and "document" at n+3.</span></span> <span data-ttu-id="44c29-148">"Onde está o documento do Kyle arquivado na base de dados?"</span><span class="sxs-lookup"><span data-stu-id="44c29-148">"Where is Kyle's document filed in the data-base?"</span></span> <span data-ttu-id="44c29-149">é representado como:</span><span class="sxs-lookup"><span data-stu-id="44c29-149">is represented as:</span></span>



|       |     |                        |          |       |     |     |                               |
|-------|-----|------------------------|----------|-------|-----|-----|-------------------------------|
| <span data-ttu-id="44c29-150">Where</span><span class="sxs-lookup"><span data-stu-id="44c29-150">Where</span></span> | <span data-ttu-id="44c29-151">is</span><span class="sxs-lookup"><span data-stu-id="44c29-151">is</span></span>  | <span data-ttu-id="44c29-152">Kyle Kyle</span><span class="sxs-lookup"><span data-stu-id="44c29-152">Kyle Kyle's</span></span><br/> | <span data-ttu-id="44c29-153">documento</span><span class="sxs-lookup"><span data-stu-id="44c29-153">document</span></span> | <span data-ttu-id="44c29-154">arquiva</span><span class="sxs-lookup"><span data-stu-id="44c29-154">filed</span></span> | <span data-ttu-id="44c29-155">in</span><span class="sxs-lookup"><span data-stu-id="44c29-155">in</span></span>  | <span data-ttu-id="44c29-156">o</span><span class="sxs-lookup"><span data-stu-id="44c29-156">the</span></span> | <span data-ttu-id="44c29-157">banco de dados base</span><span class="sxs-lookup"><span data-stu-id="44c29-157">database data base</span></span><br/> |



 

<span data-ttu-id="44c29-158">Neste exemplo, o separador de palavras armazena formas alternativas para "Kyle" ("Kyle") e "Database" ("base de dados") no índice.</span><span class="sxs-lookup"><span data-stu-id="44c29-158">In this example, the word breaker stores alternative forms for "Kyle" ("Kyle's") and "database" ("data base") in the index.</span></span> <span data-ttu-id="44c29-159">O separador de palavras gera e armazena palavras alternativas durante o processo de criação de índice sob as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="44c29-159">The word breaker generates and stores alternative words during the index creation process under the following conditions:</span></span>

-   <span data-ttu-id="44c29-160">Se for provável que uma palavra alternativa apareça como uma única palavra em uma consulta</span><span class="sxs-lookup"><span data-stu-id="44c29-160">If an alternative word is likely to appear as a single word in a query</span></span>
-   <span data-ttu-id="44c29-161">Se não for provável que um lematizador derive a palavra original da alternativa</span><span class="sxs-lookup"><span data-stu-id="44c29-161">If a stemmer is not likely to derive the original word from the alternative</span></span>

<span data-ttu-id="44c29-162">A geração de formulários alternativos do Word aumenta o número de formas pelas quais as consultas representam e correspondem a uma frase, conforme mostrado nas seguintes variações:</span><span class="sxs-lookup"><span data-stu-id="44c29-162">Generating alternative word forms increases the number of ways that queries represent and match a sentence, as shown in the following variations:</span></span>

1.  <span data-ttu-id="44c29-163">Onde o documento Kyle é arquivado no banco de dados</span><span class="sxs-lookup"><span data-stu-id="44c29-163">Where is Kyle document filed in the database</span></span>
2.  <span data-ttu-id="44c29-164">Onde está o documento do Kyle arquivado no banco de dados</span><span class="sxs-lookup"><span data-stu-id="44c29-164">Where is Kyle's document filed in the database</span></span>
3.  <span data-ttu-id="44c29-165">Onde o documento Kyle é arquivado no banco de dados</span><span class="sxs-lookup"><span data-stu-id="44c29-165">Where is Kyle document filed in the data base</span></span>
4.  <span data-ttu-id="44c29-166">Onde está o documento do Kyle arquivado no banco de dados</span><span class="sxs-lookup"><span data-stu-id="44c29-166">Where is Kyle's document filed in the data base</span></span>

### <a name="wordsink-and-phrasesink"></a><span data-ttu-id="44c29-167">WordSink e PhraseSink</span><span class="sxs-lookup"><span data-stu-id="44c29-167">WordSink and PhraseSink</span></span>

<span data-ttu-id="44c29-168">Os separadores de palavras usam os objetos [**IWordSink**](iwordsink.md) e [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) para coletar e armazenar todas as palavras e frases que eles extraem do texto.</span><span class="sxs-lookup"><span data-stu-id="44c29-168">Word breakers use the [**IWordSink**](iwordsink.md) and [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) objects to collect and store all words and phrases that they extract from text.</span></span> <span data-ttu-id="44c29-169">Um separador de palavras armazena palavras em um formulário que é o mais próximo possível do formulário original do Word no documento.</span><span class="sxs-lookup"><span data-stu-id="44c29-169">A word breaker stores words in a form that is as close as possible to the original word form in the document.</span></span> <span data-ttu-id="44c29-170">**IPhraseSink** armazena frases no momento da consulta.</span><span class="sxs-lookup"><span data-stu-id="44c29-170">**IPhraseSink** stores phrases at query time.</span></span> <span data-ttu-id="44c29-171">As frases melhoram a relevância dos resultados da consulta porque as seqüências de palavras mais longas são mais raras e fornecem maior distinção do que as frases menores.</span><span class="sxs-lookup"><span data-stu-id="44c29-171">Phrases improve the relevance of query results because longer sequences of words are rarer and provide greater distinction than smaller phrases.</span></span> <span data-ttu-id="44c29-172">Quando o indexador coloca uma frase no **IPhraseSink** no momento da consulta, ele cria uma instância do separador de palavras para dividir a frase em palavras.</span><span class="sxs-lookup"><span data-stu-id="44c29-172">When the indexer places a phrase in the **IPhraseSink** at query time, it creates an instance of the word breaker to break the phrase into words.</span></span> <span data-ttu-id="44c29-173">Em seguida, o indexador avalia a frase verificando se as palavras na frase ocorrem adjacentes umas às outras no índice.</span><span class="sxs-lookup"><span data-stu-id="44c29-173">The indexer then evaluates the phrase by checking whether the words in the phrase occur adjacent to one another in the index.</span></span> <span data-ttu-id="44c29-174">Por exemplo, se "ABCD" ocorrer no índice nas posições *x*, *x*+ 1, *x*+ 2 e *x*+ 3, a correspondência de frase ocorrerá se qualquer subcadeia de caracteres adjacente "abcd" for enviada em uma consulta.</span><span class="sxs-lookup"><span data-stu-id="44c29-174">For example, if "ABCD" occurs in the index at positions *x*, *x*+1, *x*+2, and *x*+3, the phrase match will occur if any adjacent substring of "ABCD" is submitted in a query.</span></span> <span data-ttu-id="44c29-175">Essa estratégia é eficaz para separadores de palavras com base em caracteres que dividem frases e palavras longas durante a criação do índice e que geram frases durante o tempo de consulta.</span><span class="sxs-lookup"><span data-stu-id="44c29-175">This strategy is effective for character-based word breakers that split phrases and long words during index creation and that generate phrases during query time.</span></span>

### <a name="breaks"></a><span data-ttu-id="44c29-176">Quebras</span><span class="sxs-lookup"><span data-stu-id="44c29-176">Breaks</span></span>

<span data-ttu-id="44c29-177">As quebras são os espaços entre as palavras.</span><span class="sxs-lookup"><span data-stu-id="44c29-177">Breaks are the spaces between words.</span></span> <span data-ttu-id="44c29-178">Espaço em branco, pontuação, formatação ou apenas a natureza do próprio idioma pode causar interrupções.</span><span class="sxs-lookup"><span data-stu-id="44c29-178">White space, punctuation, formatting, or just the nature of the language itself can cause breaks.</span></span> <span data-ttu-id="44c29-179">Há quatro tipos diferentes de quebras que o indexador usa: fim da palavra (EOW), fim da sentença (EOS), fim do parágrafo (EOP) e o fim do capítulo (EOC).</span><span class="sxs-lookup"><span data-stu-id="44c29-179">There are four different types of breaks that the indexer uses: end of word (EOW), end of sentence (EOS), end of paragraph (EOP) and end of chapter (EOC).</span></span> <span data-ttu-id="44c29-180">A interrupção EOW é a interrupção padrão.</span><span class="sxs-lookup"><span data-stu-id="44c29-180">The EOW break is the default break.</span></span> <span data-ttu-id="44c29-181">Após cada token, cada quebra indica uma distância semântica diferente entre as palavras em cada lado.</span><span class="sxs-lookup"><span data-stu-id="44c29-181">After each token, each break indicates a different semantic distance between the words on either side.</span></span> <span data-ttu-id="44c29-182">As palavras separadas por EOW têm o link semântico mais rígido, seguido por EOS, EOP e EOC.</span><span class="sxs-lookup"><span data-stu-id="44c29-182">Words separated by EOW have the tightest semantic link, followed by EOS, EOP, and EOC.</span></span> <span data-ttu-id="44c29-183">Várias chamadas para [**IWordSink::P utbreak**](iwordsink-putbreak.md) são cumulativas e são análogas à inserção de palavras ou frases nulas.</span><span class="sxs-lookup"><span data-stu-id="44c29-183">Multiple calls to [**IWordSink::PutBreak**](iwordsink-putbreak.md) are cumulative, and are analogous to inserting null words or sentences.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="44c29-184">Escalabilidade, Performancy e segurança</span><span class="sxs-lookup"><span data-stu-id="44c29-184">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="44c29-185">A maneira como o separador de palavras responde a chamadas simultâneas é basicamente determinado pela sua escolha de modelo de Threading.</span><span class="sxs-lookup"><span data-stu-id="44c29-185">The way the word breaker responds to simultaneous calls is largely determined by your choice of threading model.</span></span> <span data-ttu-id="44c29-186">O indexador é um aplicativo de thread único.</span><span class="sxs-lookup"><span data-stu-id="44c29-186">The indexer is a single-threaded application.</span></span> <span data-ttu-id="44c29-187">Para que os separadores de palavras funcionem em um ambiente de thread único, os separadores de palavras devem ser escritos usando um modelo de Threading "gratuito" ou "ambos".</span><span class="sxs-lookup"><span data-stu-id="44c29-187">For word breakers to work in a single-threaded environment, word breakers must be written using a "free" or "both" threading model.</span></span> <span data-ttu-id="44c29-188">Os separadores de palavras não devem se registrar com o COM usando o modelo de Threading "Apartment".</span><span class="sxs-lookup"><span data-stu-id="44c29-188">Word breakers must not register with COM by using the "apartment" threading model.</span></span>

<span data-ttu-id="44c29-189">Recomendamos que os separadores de palavras evitem Estados globais e armazenem dados na instância para o separador de palavras.</span><span class="sxs-lookup"><span data-stu-id="44c29-189">We recommend that word breakers avoid global states and store data in the instance for the word breaker.</span></span> <span data-ttu-id="44c29-190">O único conteúdo que deve ser armazenado na implementação do separador de palavras é para os parâmetros *fQuery* e *ulMaxTokenSize*.</span><span class="sxs-lookup"><span data-stu-id="44c29-190">The only content that should be stored in the word breaker implementation are for the parameters *fQuery* and *ulMaxTokenSize*.</span></span> <span data-ttu-id="44c29-191">Os separadores de palavras não devem ser mais do que duas vezes mais lentos do que o parâmetro de comparação estabelecido pelo separador de palavras em inglês.</span><span class="sxs-lookup"><span data-stu-id="44c29-191">Word breakers should be no more than two times slower than the benchmark established by the English word breaker.</span></span> <span data-ttu-id="44c29-192">O desempenho do separador de palavras também deve melhorar com maior capacidade de hardware.</span><span class="sxs-lookup"><span data-stu-id="44c29-192">Word breaker performance should also improve with increased hardware capability.</span></span>

<span data-ttu-id="44c29-193">Os separadores de palavras para o indexador são executados no contexto de segurança do sistema local.</span><span class="sxs-lookup"><span data-stu-id="44c29-193">Word breakers for the indexer run in the Local System security context.</span></span> <span data-ttu-id="44c29-194">Eles devem ser gravados para gerenciar buffers e para empilhar corretamente.</span><span class="sxs-lookup"><span data-stu-id="44c29-194">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="44c29-195">Todas as cópias de cadeia de caracteres devem ter verificações explícitas para proteção contra estouros de buffer.</span><span class="sxs-lookup"><span data-stu-id="44c29-195">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="44c29-196">Você sempre deve verificar o tamanho alocado do buffer e testar o tamanho dos dados em relação ao tamanho do buffer.</span><span class="sxs-lookup"><span data-stu-id="44c29-196">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span> <span data-ttu-id="44c29-197">Os separadores de palavras não podem pressupor que o texto passado para o método [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) esteja bem formado.</span><span class="sxs-lookup"><span data-stu-id="44c29-197">Word breakers cannot assume that the text passed to the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method is well formed.</span></span> <span data-ttu-id="44c29-198">Para obter mais informações sobre como solucionar problemas de separadores de palavras, consulte [solução de problemas de recursos de idioma e práticas recomendadas](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-198">For more information about troubleshooting word breakers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

## <a name="implementing-a-stemmer"></a><span data-ttu-id="44c29-199">Implementando um lematizador</span><span class="sxs-lookup"><span data-stu-id="44c29-199">Implementing a Stemmer</span></span>

<span data-ttu-id="44c29-200">Os lematizadores implementam a interface [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) .</span><span class="sxs-lookup"><span data-stu-id="44c29-200">Stemmers implement the [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) interface.</span></span> <span data-ttu-id="44c29-201">O método [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) gera uma lista de formulários do formas flexionadas Word para uma determinada palavra de entrada.</span><span class="sxs-lookup"><span data-stu-id="44c29-201">The [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) method generates a list of inflected word forms for a particular input word.</span></span> <span data-ttu-id="44c29-202">Para implementar um componente de lematizador, você deve ter heurística de idioma para seu idioma.</span><span class="sxs-lookup"><span data-stu-id="44c29-202">To implement a stemmer component, you must have language heuristics for your language.</span></span> <span data-ttu-id="44c29-203">Isso inclui informações sobre morphology.</span><span class="sxs-lookup"><span data-stu-id="44c29-203">This includes information about morphology.</span></span> <span data-ttu-id="44c29-204">Você também pode precisar de uma lista de palavras a serem excluídas ou incluídas.</span><span class="sxs-lookup"><span data-stu-id="44c29-204">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="44c29-205">Para obter mais informações sobre considerações linguísticas e como essas considerações afetam as implementações de lematizador, consulte [considerações lingüísticas e Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-205">For more information about linguistic considerations and how these considerations affect stemmer implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="44c29-206">Recomendamos que os lematizadores não devam gerar o caso de genitive, ou Possessive, para palavras.</span><span class="sxs-lookup"><span data-stu-id="44c29-206">We recommend that stemmers should not generate the genitive, or possessive, case for words.</span></span> <span data-ttu-id="44c29-207">Por exemplo, "David" não é gerado como uma forma alternativa para "David ' s".</span><span class="sxs-lookup"><span data-stu-id="44c29-207">For example, "David" is not generated as an alternative form for "David's."</span></span> <span data-ttu-id="44c29-208">O separador de palavras gera "David" e "David" quando analisa "David".</span><span class="sxs-lookup"><span data-stu-id="44c29-208">The word breaker generates both "David" and "David's" when it parses "David's."</span></span>

<span data-ttu-id="44c29-209">O lematizador usa o objeto [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) para reunir a lista de palavras alternativas.</span><span class="sxs-lookup"><span data-stu-id="44c29-209">The stemmer uses the [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) object to gather the list of alternative words.</span></span> <span data-ttu-id="44c29-210">[**IWordFormSink::P utword**](iwordformsink-putword.md) gera a palavra final do lematizador.</span><span class="sxs-lookup"><span data-stu-id="44c29-210">[**IWordFormSink::PutWord**](iwordformsink-putword.md) generates the final word from the stemmer.</span></span> <span data-ttu-id="44c29-211">Em todos os casos, essa palavra final é a mesma que a palavra de entrada de [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span><span class="sxs-lookup"><span data-stu-id="44c29-211">In all cases, this final word is the same as the input word from [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span></span> <span data-ttu-id="44c29-212">Por exemplo, considerando a palavra "nada", o lematizador gera as seguintes formas de palavra: "nadava", "Swimmer", "" nada "," "Swam" e "swum" por meio de chamadas para [**IWordFormSink::P utaltword**](iwordformsink-putphrase.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-212">For example, given the word "swim," the stemmer generates the following word forms: "swimming," "swimmer," "swims," "swam," and "swum," through calls to [**IWordFormSink::PutAltWord**](iwordformsink-putphrase.md).</span></span> <span data-ttu-id="44c29-213">O lematizador gera "nada" por meio de **IWordFormSink::P utword**.</span><span class="sxs-lookup"><span data-stu-id="44c29-213">The stemmer generates "swim" through **IWordFormSink::PutWord**.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="44c29-214">Escalabilidade, Performancy e segurança</span><span class="sxs-lookup"><span data-stu-id="44c29-214">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="44c29-215">Os lematizadores, como separadores de palavras, devem usar um modelo de Threading "gratuito" e registrar com com o modelo de Threading definido como "gratuito" ou "ambos".</span><span class="sxs-lookup"><span data-stu-id="44c29-215">Stemmers, like word breakers, must use a "free" threading model and register with COM with their threading model set to "free" or "both."</span></span> <span data-ttu-id="44c29-216">O Windows Search chama instâncias separadas do lematizador de threads diferentes ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="44c29-216">Windows Search calls separate instances of the stemmer from different threads at the same time.</span></span> <span data-ttu-id="44c29-217">Os lematizadores devem, portanto, ter dados mínimos de instância.</span><span class="sxs-lookup"><span data-stu-id="44c29-217">Stemmers should therefore have minimal instance data.</span></span>

<span data-ttu-id="44c29-218">A precisão do lematizador tem um impacto significativo na relevância da consulta.</span><span class="sxs-lookup"><span data-stu-id="44c29-218">Stemmer accuracy has a significant impact on query relevance.</span></span> <span data-ttu-id="44c29-219">Se o lematizador truncar o texto incorretamente, as consultas poderão retornar resultados imprevisíveis e imprecisos.</span><span class="sxs-lookup"><span data-stu-id="44c29-219">If the stemmer stems the text incorrectly, queries may return unpredictable and inaccurate results.</span></span> <span data-ttu-id="44c29-220">Os lematizadores devem lidar com centenas de consultas por segundo sem afetar negativamente o desempenho da consulta.</span><span class="sxs-lookup"><span data-stu-id="44c29-220">Stemmers must handle hundreds of queries per second without negatively affecting query performance.</span></span> <span data-ttu-id="44c29-221">O desempenho do lematizador deve melhorar com o aumento do recurso de hardware.</span><span class="sxs-lookup"><span data-stu-id="44c29-221">Stemmer performance should improve with increased hardware capability.</span></span> <span data-ttu-id="44c29-222">Para obter informações sobre como solucionar problemas de lematizadores, consulte [Solucionando problemas de recursos de linguagem e práticas recomendadas](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="44c29-222">For information about troubleshooting stemmers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

<span data-ttu-id="44c29-223">Os lematizadores da pesquisa do Windows são executados no contexto de segurança local.</span><span class="sxs-lookup"><span data-stu-id="44c29-223">Stemmers for Windows Search run in the Local Security context.</span></span> <span data-ttu-id="44c29-224">Eles devem ser gravados para gerenciar buffers e para empilhar corretamente.</span><span class="sxs-lookup"><span data-stu-id="44c29-224">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="44c29-225">Todas as cópias de cadeia de caracteres devem ter verificações explícitas para proteção contra estouros de buffer.</span><span class="sxs-lookup"><span data-stu-id="44c29-225">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="44c29-226">Você sempre deve verificar o tamanho alocado do buffer e testar o tamanho dos dados em relação ao tamanho do buffer.</span><span class="sxs-lookup"><span data-stu-id="44c29-226">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="44c29-227">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="44c29-227">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="44c29-228">Estendendo recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-228">Extending Language Resources</span></span>](extending-language-resources-in-windows-search.md)
</dt> <dt>

[<span data-ttu-id="44c29-229">Noções básicas sobre componentes de recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="44c29-229">Understanding Language Resource Components</span></span>](understanding-language-resource-components.md)
</dt> <dt>

[<span data-ttu-id="44c29-230">Considerações lingüísticas e Unicode</span><span class="sxs-lookup"><span data-stu-id="44c29-230">Linguistic and Unicode Considerations</span></span>](linguistic-and-unicode-considerations.md)
</dt> <dt>

[<span data-ttu-id="44c29-231">Solucionando problemas de recursos de idioma e práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="44c29-231">Troubleshooting Language Resources and Best Practices</span></span>](troubleshooting-language-resources.md)
</dt> </dl>

 

 
