---
description: Este tópico fornece as práticas recomendadas e sugestões para validar e solucionar problemas de suas implementações IWordBreaker e IStemmer.
ms.assetid: b0e199b9-8d81-4445-92f7-de9b8a00a9cb
title: Solucionando problemas de recursos de idioma e práticas recomendadas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f63a0a8acda3fff1627b37f41c2d81a67b37d66a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103646854"
---
# <a name="troubleshooting-language-resources-and-best-practices"></a><span data-ttu-id="18756-103">Solucionando problemas de recursos de idioma e práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="18756-103">Troubleshooting Language Resources and Best Practices</span></span>

<span data-ttu-id="18756-104">Este tópico fornece as práticas recomendadas e sugestões para validar e solucionar problemas de suas implementações [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) e [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) .</span><span class="sxs-lookup"><span data-stu-id="18756-104">This topic provides best practices and suggestions for validating and troubleshooting your [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) and [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) implementations.</span></span>

<span data-ttu-id="18756-105">Este tópico é organizado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="18756-105">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="18756-106">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="18756-106">Best Practices</span></span>](#best-practices)
-   [<span data-ttu-id="18756-107">Testando a consistência do lematizador</span><span class="sxs-lookup"><span data-stu-id="18756-107">Testing Stemmer Consistency</span></span>](#testing-stemmer-consistency)
-   [<span data-ttu-id="18756-108">Testando a entrada inválida no lematizador</span><span class="sxs-lookup"><span data-stu-id="18756-108">Testing for Invalid Input in the Stemmer</span></span>](#testing-for-invalid-input-in-the-stemmer)
-   [<span data-ttu-id="18756-109">Testando consistência do separador de palavras</span><span class="sxs-lookup"><span data-stu-id="18756-109">Testing Word Breaker Consistency</span></span>](#testing-word-breaker-consistency)
-   [<span data-ttu-id="18756-110">Testando a entrada inválida no separador de palavras</span><span class="sxs-lookup"><span data-stu-id="18756-110">Testing for Invalid Input in the Word Breaker</span></span>](#testing-for-invalid-input-in-the-word-breaker)

### <a name="best-practices"></a><span data-ttu-id="18756-111">Práticas Recomendadas</span><span class="sxs-lookup"><span data-stu-id="18756-111">Best Practices</span></span>

-   <span data-ttu-id="18756-112">Verifique se o modelo de threading para recursos de idioma está definido como "ambos" no registro.</span><span class="sxs-lookup"><span data-stu-id="18756-112">Ensure that the threading model for language resources is set to "both" in the registry.</span></span>
-   <span data-ttu-id="18756-113">Sempre que possível, coloque os dados de idioma em um recurso em sua DLL em vez de em um arquivo separado.</span><span class="sxs-lookup"><span data-stu-id="18756-113">Where possible, put language data in a resource in your DLL rather than in a separate file.</span></span> <span data-ttu-id="18756-114">Isso torna a DLL mais fácil de instalar e mais segura.</span><span class="sxs-lookup"><span data-stu-id="18756-114">This makes the DLL easier to install and more secure.</span></span> <span data-ttu-id="18756-115">Além disso, colocar dados de idioma em um recurso resultará em um desempenho aprimorado para esse componente de recurso de linguagem.</span><span class="sxs-lookup"><span data-stu-id="18756-115">Additionally, putting language data in a resource will result in improved performance for that language resource component.</span></span>
-   <span data-ttu-id="18756-116">Minimize os recursos do sistema que os componentes de recursos de idioma usam.</span><span class="sxs-lookup"><span data-stu-id="18756-116">Minimize the system resources that language resource components use.</span></span> <span data-ttu-id="18756-117">Por exemplo, se cada instância de um objeto de recurso de linguagem precisar de acesso somente leitura a um léxico, considere compartilhar o léxico em todas as instâncias.</span><span class="sxs-lookup"><span data-stu-id="18756-117">For example, if each instance of a language resource object needs read-only access to a lexicon, consider sharing the lexicon across all instances.</span></span>
-   <span data-ttu-id="18756-118">Considere usar o separador de palavras neutro para manipular texto que não está no idioma ou na localidade da implementação do seu separador de palavras.</span><span class="sxs-lookup"><span data-stu-id="18756-118">Consider using the neutral word breaker to handle text that is not in the language or locale for your word breaker implementation.</span></span> <span data-ttu-id="18756-119">Isso ajudará a garantir que o texto seja processado consistentemente em todos os idiomas.</span><span class="sxs-lookup"><span data-stu-id="18756-119">This will help ensure that text is processed consistently across all languages.</span></span>
-   <span data-ttu-id="18756-120">Verifique todos os códigos de retorno e retorne-os de funções como [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) e [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext).</span><span class="sxs-lookup"><span data-stu-id="18756-120">Check all return codes and return them from functions like [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) and [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext).</span></span> <span data-ttu-id="18756-121">Se a indexação falhar, é importante passar o erro para que o usuário seja notificado sobre quais documentos foram indexados.</span><span class="sxs-lookup"><span data-stu-id="18756-121">If indexing fails, it is important to pass the error so that the user is notified which documents were indexed.</span></span>

### <a name="testing-stemmer-consistency"></a><span data-ttu-id="18756-122">Testando a consistência do lematizador</span><span class="sxs-lookup"><span data-stu-id="18756-122">Testing Stemmer Consistency</span></span>

<span data-ttu-id="18756-123">Recomendamos que você monitore o desempenho de uma implementação [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) para fins de consistência sob as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="18756-123">We recommend that you monitor the performance of an [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) implementation for consistency under the following conditions:</span></span>

-   <span data-ttu-id="18756-124">O lematizador executa consistentemente em várias chamadas para [**IStemmer:: init**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-init).</span><span class="sxs-lookup"><span data-stu-id="18756-124">The stemmer performs consistently across multiple calls to [**IStemmer::Init**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-init).</span></span> <span data-ttu-id="18756-125">O lematizador reinicializa com os mesmos parâmetros da inicialização anterior, sem liberar os parâmetros.</span><span class="sxs-lookup"><span data-stu-id="18756-125">The stemmer reinitializes with the same parameters as in the previous initialization, without releasing the parameters.</span></span>
-   <span data-ttu-id="18756-126">Considerando o mesmo corpus de teste e repetições da mesma consulta, [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) produz a saída idêntica e faz chamadas idênticas para os métodos do objeto [**IWordFormSink**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) .</span><span class="sxs-lookup"><span data-stu-id="18756-126">Given the same test corpus, and repetitions of the same query, [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) produces the identical output and makes identical calls to the methods of the [**IWordFormSink**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) object.</span></span>

### <a name="testing-for-invalid-input-in-the-stemmer"></a><span data-ttu-id="18756-127">Testando a entrada inválida no lematizador</span><span class="sxs-lookup"><span data-stu-id="18756-127">Testing for Invalid Input in the Stemmer</span></span>

<span data-ttu-id="18756-128">Recomendamos que você monitore como os métodos [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) lidam com todos os erros relacionados a parâmetros inválidos.</span><span class="sxs-lookup"><span data-stu-id="18756-128">We recommend that you monitor how the [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) methods handle all errors related to invalid parameters.</span></span> <span data-ttu-id="18756-129">Além disso, recomendamos que você garanta que os métodos de lematizador não gerem exceções sem tratamento.</span><span class="sxs-lookup"><span data-stu-id="18756-129">In addition, we recommend that you ensure that the stemmer methods do not raise unhandled exceptions.</span></span> <span data-ttu-id="18756-130">O lematizador deve lidar com os seguintes erros:</span><span class="sxs-lookup"><span data-stu-id="18756-130">The stemmer should handle the following errors:</span></span>

-   <span data-ttu-id="18756-131">Chamada para [**IStemmer:: init**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-init) com *PfLicense* definido como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="18756-131">Call to [**IStemmer::Init**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-init) with *pfLicense* set to **NULL**.</span></span> <span data-ttu-id="18756-132">Init falha e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-132">Init fails and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-133">Chamada para [**IStemmer:: GetLicenseToUse**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-getlicensetouse) com o parâmetro *PpwcsLicense* definido como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="18756-133">Call to [**IStemmer::GetLicenseToUse**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-getlicensetouse) with the *ppwcsLicense* parameter set to **NULL**.</span></span> <span data-ttu-id="18756-134">**IStemmer:: GetLicenseToUse** não resulta em violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-134">**IStemmer::GetLicenseToUse** does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-135">Chamada para [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) com o parâmetro *PwcInBuf* definido como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="18756-135">Call to [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) with the *pwcInBuf* parameter set to **NULL**.</span></span> <span data-ttu-id="18756-136">**IStemmer:: GenerateWordForms** falha (retorna E \_ falha) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-136">**IStemmer::GenerateWordForms** fails (returns E\_FAIL) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-137">Chamada para [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) com o parâmetro *CWC* igual a 0.</span><span class="sxs-lookup"><span data-stu-id="18756-137">Call to [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) with the *cwc* parameter equal to 0.</span></span> <span data-ttu-id="18756-138">**IStemmer:: GenerateWordForms** retorna com êxito (retorna S \_ OK) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-138">**IStemmer::GenerateWordForms** returns successfully (returns S\_OK) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-139">Chamada para [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) com o parâmetro *PwcInBuf* definido como **NULL** e o parâmetro *CWC* igual a 0.</span><span class="sxs-lookup"><span data-stu-id="18756-139">Call to [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) with the *pwcInBuf* parameter set to **NULL** and the *cwc* parameter equal to 0.</span></span> <span data-ttu-id="18756-140">**IStemmer:: GenerateWordForms** falha (retorna E \_ falha) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-140">**IStemmer::GenerateWordForms** fails (returns E\_FAIL) and does not result in an access violation.</span></span>

### <a name="testing-word-breaker-consistency"></a><span data-ttu-id="18756-141">Testando consistência do separador de palavras</span><span class="sxs-lookup"><span data-stu-id="18756-141">Testing Word Breaker Consistency</span></span>

<span data-ttu-id="18756-142">É recomendável que você garanta que a implementação de [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) seja executada consistentemente sob as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="18756-142">We recommend that you ensure that the [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) implementation performs consistently under the following conditions:</span></span>

-   <span data-ttu-id="18756-143">O separador de palavras executa consistentemente em várias chamadas para o método [**IWordBreaker:: init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) .</span><span class="sxs-lookup"><span data-stu-id="18756-143">Word breaker performs consistently across multiple calls to its [**IWordBreaker::Init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) method.</span></span> <span data-ttu-id="18756-144">O separador de palavras reinicializa com os mesmos parâmetros da inicialização anterior, sem liberar os parâmetros.</span><span class="sxs-lookup"><span data-stu-id="18756-144">The word breaker reinitializes with the same parameters as in the previous initialization, without releasing the parameters.</span></span>
-   <span data-ttu-id="18756-145">Considerando o mesmo corpus de teste e repetições da mesma consulta, o método [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) produz a saída idêntica e faz chamadas idênticas para os métodos dos objetos [**IWordSink**](iwordsink.md) e [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) .</span><span class="sxs-lookup"><span data-stu-id="18756-145">Given the same test corpus, and repetitions of the same query, the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method produces the identical output and makes identical calls to the methods of the [**IWordSink**](iwordsink.md) and [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) objects.</span></span>

### <a name="testing-for-invalid-input-in-the-word-breaker"></a><span data-ttu-id="18756-146">Testando a entrada inválida no separador de palavras</span><span class="sxs-lookup"><span data-stu-id="18756-146">Testing for Invalid Input in the Word Breaker</span></span>

<span data-ttu-id="18756-147">Recomendamos que você garanta que os métodos [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) manipulem todos os erros relacionados a parâmetros inválidos.</span><span class="sxs-lookup"><span data-stu-id="18756-147">We recommend that you ensure that the [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker) methods handle all errors related to invalid parameters.</span></span> <span data-ttu-id="18756-148">Além disso, recomendamos que você garanta que os métodos de separador de palavras não gerem exceções sem tratamento.</span><span class="sxs-lookup"><span data-stu-id="18756-148">In addition, we recommend that you ensure that the word breaker methods do not raise unhandled exceptions.</span></span> <span data-ttu-id="18756-149">O separador de palavras deve executar as seguintes funções e manipular os seguintes erros:</span><span class="sxs-lookup"><span data-stu-id="18756-149">The word breaker should perform the following functions and handle the following errors:</span></span>

-   <span data-ttu-id="18756-150">A chamada para [**IWordBreaker:: init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) deve retornar o idioma \_ E o banco de \_ dados \_ não \_ encontrados ou S \_ OK.</span><span class="sxs-lookup"><span data-stu-id="18756-150">Call to [**IWordBreaker::Init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) must return either LANGUAGE\_E\_DATABASE\_NOT\_FOUND or S\_OK.</span></span>
-   <span data-ttu-id="18756-151">A chamada para [**IWordBreaker:: init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) inicializa com êxito o parâmetro *pfLicense* para **false** e chama [**IStemmer:: GetLicenseToUse**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-getlicensetouse) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-151">Call to [**IWordBreaker::Init**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-init) successfully initializes the *pfLicense* parameter to **FALSE** and calls [**IStemmer::GetLicenseToUse**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-getlicensetouse) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-152">O separador de palavras não é lido após o final do parâmetro *awcBuffer* no método [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) .</span><span class="sxs-lookup"><span data-stu-id="18756-152">Word breaker does not read past the end of the *awcBuffer* parameter in the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method.</span></span>
-   <span data-ttu-id="18756-153">Chamada para [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) com *PwcInBuf* definido como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="18756-153">Call to [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) with the *pwcInBuf* set to **NULL**.</span></span> <span data-ttu-id="18756-154">**IWordBreaker:: BreakText** falha (retorna E \_ falha) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-154">**IWordBreaker::BreakText** fails (returns E\_FAIL) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-155">Chamada para [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) com o parâmetro *CWC* igual a 0.</span><span class="sxs-lookup"><span data-stu-id="18756-155">Call to [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) with the *cwc* parameter equal to 0.</span></span> <span data-ttu-id="18756-156">**IWordBreaker:: BreakText** retorna com êxito (retorna S \_ OK) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-156">**IWordBreaker::BreakText** returns successfully (returns S\_OK) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-157">Chame para o método [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) com o parâmetro *PwcInBuf* definido como **NULL** e o parâmetro *CWC* igual a 0.</span><span class="sxs-lookup"><span data-stu-id="18756-157">Call to the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method with the *pwcInBuf* parameter set to **NULL** and the *cwc* parameter equal to 0.</span></span> <span data-ttu-id="18756-158">**IWordBreaker:: BreakText** falha (retorna E \_ falha) e não resulta em uma violação de acesso.</span><span class="sxs-lookup"><span data-stu-id="18756-158">**IWordBreaker::BreakText** fails (returns E\_FAIL) and does not result in an access violation.</span></span>
-   <span data-ttu-id="18756-159">As frases geradas durante a criação do índice contêm o mesmo número de palavras.</span><span class="sxs-lookup"><span data-stu-id="18756-159">Phrases generated during index creation contain the same number of words.</span></span>
-   <span data-ttu-id="18756-160">As frases são geradas durante a criação do índice por meio de chamadas sucessivas para os métodos [**IWordFormSink::P utword**](iwordsink-putword.md) e [**IWordFormSink::P utaltword**](iwordsink-putaltword.md) .</span><span class="sxs-lookup"><span data-stu-id="18756-160">Phrases are generated during index creation through successive calls to the [**IWordFormSink::PutWord**](iwordsink-putword.md) and [**IWordFormSink::PutAltWord**](iwordsink-putaltword.md) methods.</span></span> <span data-ttu-id="18756-161">O separador de palavras usa apenas o objeto [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) durante o tempo de consulta.</span><span class="sxs-lookup"><span data-stu-id="18756-161">The word breaker uses only the [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) object during query time.</span></span>

## <a name="related-topics"></a><span data-ttu-id="18756-162">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="18756-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="18756-163">Estendendo recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="18756-163">Extending Language Resources</span></span>](extending-language-resources-in-windows-search.md)
</dt> <dt>

[<span data-ttu-id="18756-164">Noções básicas sobre componentes de recursos de idioma</span><span class="sxs-lookup"><span data-stu-id="18756-164">Understanding Language Resource Components</span></span>](understanding-language-resource-components.md)
</dt> <dt>

[<span data-ttu-id="18756-165">Implementando um separador de palavras e lematizador</span><span class="sxs-lookup"><span data-stu-id="18756-165">Implementing a Word Breaker and Stemmer</span></span>](implementing-a-word-breaker-and-stemmer.md)
</dt> <dt>

[<span data-ttu-id="18756-166">Considerações lingüísticas e Unicode</span><span class="sxs-lookup"><span data-stu-id="18756-166">Linguistic and Unicode Considerations</span></span>](linguistic-and-unicode-considerations.md)
</dt> </dl>

 

 
