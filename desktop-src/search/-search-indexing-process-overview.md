---
description: Este tópico descreve os três estágios do processo de indexação e os principais componentes envolvidos em cada um deles, explica o tempo de atividade de indexação e fornece algumas observações para desenvolvedores de terceiros que desejam que seus armazenamentos de dados ou formatos de arquivo sejam indexados.
ms.assetid: cfba12eb-4123-4b57-8311-d4fc8f9f514e
title: Processo de indexação no Windows Search
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87867d5925cd53b237092435bbc9d16428418b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103646875"
---
# <a name="indexing-process-in-windows-search"></a><span data-ttu-id="4ffab-103">Processo de indexação no Windows Search</span><span class="sxs-lookup"><span data-stu-id="4ffab-103">Indexing Process in Windows Search</span></span>

<span data-ttu-id="4ffab-104">Este tópico descreve os três estágios do processo de indexação e os principais componentes envolvidos em cada um deles, explica o tempo de atividade de indexação e fornece algumas observações para desenvolvedores de terceiros que desejam que seus armazenamentos de dados ou formatos de arquivo sejam indexados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-104">This topic describes the three stages of the indexing process and the primary components involved in each, explains the timing of indexing activity, and provides some notes for third-party developers who want their data stores or file formats indexed.</span></span>

<span data-ttu-id="4ffab-105">Este tópico é organizado da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="4ffab-105">This topic is organized as follows:</span></span>

- [<span data-ttu-id="4ffab-106">Visão geral</span><span class="sxs-lookup"><span data-stu-id="4ffab-106">Overview</span></span>](#overview)
- [<span data-ttu-id="4ffab-107">Estágio 1: enfileirando URLs para indexação</span><span class="sxs-lookup"><span data-stu-id="4ffab-107">Stage 1: Queuing URLs for Indexing</span></span>](#stage-1-queuing-urls-for-indexing)
- [<span data-ttu-id="4ffab-108">Etapa 2: rastreando URLs</span><span class="sxs-lookup"><span data-stu-id="4ffab-108">Stage 2: Crawling URLs</span></span>](#stage-2-crawling-urls)
- [<span data-ttu-id="4ffab-109">Estágio 3: atualizando o índice</span><span class="sxs-lookup"><span data-stu-id="4ffab-109">Stage 3: Updating the Index</span></span>](#stage-3-updating-the-index)
- [<span data-ttu-id="4ffab-110">Como a indexação é agendada</span><span class="sxs-lookup"><span data-stu-id="4ffab-110">How Indexing is Scheduled</span></span>](#how-indexing-is-scheduled)
- [<span data-ttu-id="4ffab-111">Notas aos Implementadores</span><span class="sxs-lookup"><span data-stu-id="4ffab-111">Notes to Implementers</span></span>](#notes-to-implementers)
- [<span data-ttu-id="4ffab-112">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="4ffab-112">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="4ffab-113">Visão geral</span><span class="sxs-lookup"><span data-stu-id="4ffab-113">Overview</span></span>

<span data-ttu-id="4ffab-114">O Windows Search dá suporte à indexação de propriedades e conteúdo de arquivos de formatos de arquivo diferentes, como formatos. doc ou. jpeg e armazenamentos de dados, como o sistema de arquivos ou as caixas de correio do Windows Outlook.</span><span class="sxs-lookup"><span data-stu-id="4ffab-114">Windows Search supports the indexing of properties and content from files of different file formats, such as .doc or .jpeg formats, and data stores, such as the file system or Windows Outlook mailboxes.</span></span> <span data-ttu-id="4ffab-115">Há dois tipos de índices: índices de valor que permitem filtrar e classificar pelo valor inteiro de uma propriedade e índices invertidos que indexam palavras em Propriedades textuais ou conteúdo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-115">There are two kinds of indices: value indices that allow filtering and sorting by the whole value of a property and inverted indices that index words within textual properties or content.</span></span> <span data-ttu-id="4ffab-116">Se você tiver um formato de arquivo personalizado ou um armazenamento de dados, você precisará entender como os índices do Windows Search para que os itens sejam indexados corretamente.</span><span class="sxs-lookup"><span data-stu-id="4ffab-116">If you have a custom file format or data store, you need to understand how Windows Search indexes in order to get your items indexed correctly.</span></span>

<span data-ttu-id="4ffab-117">O processo de indexação ocorre em três estágios controlados por um componente de pesquisa do Windows chamado gatherer.</span><span class="sxs-lookup"><span data-stu-id="4ffab-117">The indexing process happens in three stages controlled by a Windows Search component called the gatherer.</span></span> <span data-ttu-id="4ffab-118">No primeiro estágio, o gatherer adiciona URLs às filas.</span><span class="sxs-lookup"><span data-stu-id="4ffab-118">In the first stage, the gatherer adds URLs to queues.</span></span> <span data-ttu-id="4ffab-119">As URLs identificam itens a serem indexados e as filas são meramente listas priorizadas de URLs.</span><span class="sxs-lookup"><span data-stu-id="4ffab-119">The URLs identify items to be indexed, and the queues are merely prioritized lists of URLs.</span></span> <span data-ttu-id="4ffab-120">No segundo estágio, o coletor coordena outras pesquisas do Windows e componentes de terceiros para acessar os itens e coletar dados sobre eles.</span><span class="sxs-lookup"><span data-stu-id="4ffab-120">In the second stage, the gatherer coordinates other Windows Search and third-party components to access the items and collect data about them.</span></span> <span data-ttu-id="4ffab-121">Por fim, no terceiro estágio, os dados coletados são adicionados ao índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-121">Finally, in the third stage, the data collected is added to the index.</span></span>

<span data-ttu-id="4ffab-122">O diagrama a seguir mostra os componentes principais e o fluxo de dados por meio do processo de indexação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-122">The following diagram shows the principal components and flow of data through the indexing process.</span></span> <span data-ttu-id="4ffab-123">Vários componentes estão envolvidos na coleta de dados para o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-123">A number of components are involved in collecting data for the index.</span></span> <span data-ttu-id="4ffab-124">Algumas delas fazem parte do Windows Search e algumas vêm de aplicativos de terceiros.</span><span class="sxs-lookup"><span data-stu-id="4ffab-124">Some of these are a part of Windows Search, and some come from third-party applications.</span></span> <span data-ttu-id="4ffab-125">Se você tiver um armazenamento de dados ou formato de arquivo personalizado, o Windows Search dependerá de seu manipulador de protocolo e filtro para acessar URLs e emitir Propriedades para indexação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-125">If you have a custom data store or file format, Windows Search relies on your protocol handler and filter for accessing URLs and emitting properties for indexing.</span></span> <span data-ttu-id="4ffab-126">Os componentes do Windows Search são mostrados em azul e os componentes de terceiros são mostrados em verde.</span><span class="sxs-lookup"><span data-stu-id="4ffab-126">Windows Search components are shown in blue, and third-party components are shown in green.</span></span>

![diagrama mostrando a interação entre os componentes durante o processo de indexação](images/indexingcompoverview.jpg)

## <a name="stage-1-queuing-urls-for-indexing"></a><span data-ttu-id="4ffab-128">Estágio 1: enfileirando URLs para indexação</span><span class="sxs-lookup"><span data-stu-id="4ffab-128">Stage 1: Queuing URLs for Indexing</span></span>

<span data-ttu-id="4ffab-129">No primeiro estágio da indexação, o gatherer coleta informações sobre atualizações em armazenamentos de dados, compara essas informações com o escopo de rastreamento conhecido e, em seguida, cria uma fila de URLs para atravessar a coleta de dados para o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-129">In the first stage of indexing, the gatherer collects information about updates to data stores, compares that information to the known crawl scope, and then builds a queue of URLs to traverse to collect data for the index.</span></span> <span data-ttu-id="4ffab-130">Para fontes que não são baseadas em notificação, como unidades FAT, o gatherer inicia periodicamente uma passagem completa do escopo do rastreamento para que os dados no índice sejam mantidos atualizados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-130">For sources that are not based on notification, such as FAT drives, the gatherer periodically initiates a full traversal of the crawl scope so that the data in the index is kept fresh.</span></span> <span data-ttu-id="4ffab-131">Para fontes como NTFS, há apenas um único rastreamento e todo o resto é manipulado por notificações do [diário de alterações do USN](/windows/desktop/FileIO/change-journals).</span><span class="sxs-lookup"><span data-stu-id="4ffab-131">For sources such as NTFS, there is only a single crawl and everything else is handled by notifications from the [USN Change Journal](/windows/desktop/FileIO/change-journals).</span></span> <span data-ttu-id="4ffab-132">Também não há nenhum rastreamento do Microsoft Outlook.</span><span class="sxs-lookup"><span data-stu-id="4ffab-132">There is also no crawl of Microsoft Outlook.</span></span> <span data-ttu-id="4ffab-133">O diagrama a seguir mostra uma exibição de alto nível do processo de enfileiramento para indexação sem rastreamento.</span><span class="sxs-lookup"><span data-stu-id="4ffab-133">The following diagram shows a high-level view of the queuing process for non-crawl indexing.</span></span>

![diagrama mostrando o processo de consulta para indexação sem rastreamento](images/queuingurls.jpg)

<span data-ttu-id="4ffab-135">O restante desta seção explica como o Windows Search determina quais URLs rastrear e define alguns termos importantes ao longo do caminho.</span><span class="sxs-lookup"><span data-stu-id="4ffab-135">The rest of this section explains how Windows Search determines what URLs to crawl, and defines some important terms along the way.</span></span>

<span data-ttu-id="4ffab-136">**Escopo do rastreamento**  O escopo do rastreamento é um conjunto de URLs que o Windows Search percorre para coletar dados sobre os itens que o usuário deseja indexar para pesquisas mais rápidas.</span><span class="sxs-lookup"><span data-stu-id="4ffab-136">**Crawl Scope**  The crawl scope is a set of URLs that Windows Search traverses to collect data about items that the user wants indexed for faster searches.</span></span> <span data-ttu-id="4ffab-137">O Windows Search adiciona algumas URLs ao escopo de rastreamento por padrão, como caminhos para pastas de **documentos** e **imagens** de usuários.</span><span class="sxs-lookup"><span data-stu-id="4ffab-137">Windows Search adds some URLs to the crawl scope by default, like paths to users' **Documents** and **Pictures** folders.</span></span> <span data-ttu-id="4ffab-138">Outras URLs podem ser adicionadas por aplicativos, usuários e Política de Grupo de terceiros.</span><span class="sxs-lookup"><span data-stu-id="4ffab-138">Other URLs can be added by third-party applications, users, and Group Policy.</span></span> <span data-ttu-id="4ffab-139">Por fim, os usuários e Política de Grupo podem explicitamente excluir URLs.</span><span class="sxs-lookup"><span data-stu-id="4ffab-139">Finally, both users and Group Policy can explicitly exclude URLs.</span></span> <span data-ttu-id="4ffab-140">O Windows Search usa todas as URLs adicionadas e remove as URLs excluídas para determinar o escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="4ffab-140">Windows Search takes all the added URLs and removes the excluded URLs to determine the crawl scope.</span></span> <span data-ttu-id="4ffab-141">Esse é o conjunto de trabalho de URLs do qual o coletor inicia seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="4ffab-141">This is the working set of URLs from which the gatherer begins its work.</span></span>

<span data-ttu-id="4ffab-142">**Gatherer**  O gatherer é um componente de pesquisa do Windows que coleta informações sobre URLs no escopo do rastreamento e cria uma fila de URLs para rastreamento do indexador.</span><span class="sxs-lookup"><span data-stu-id="4ffab-142">**Gatherer**  The gatherer is a Windows Search component that collects information about URLs within the crawl scope and creates a queue of URLs for the indexer to crawl.</span></span> <span data-ttu-id="4ffab-143">Quando um item no escopo de rastreamento é adicionado, excluído ou atualizado, o gatherer é notificado pelo provedor de notificações do repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-143">When an item in the crawl scope is added, deleted, or updated, the gatherer is notified by the data store's notifications provider.</span></span> <span data-ttu-id="4ffab-144">Há um rastreamento inicial no qual o coletor inicia na raiz do escopo do rastreamento.</span><span class="sxs-lookup"><span data-stu-id="4ffab-144">There is an initial crawl where the gatherer starts at the crawl scope root.</span></span> <span data-ttu-id="4ffab-145">A URL é passada para o manipulador de protocolo e, em seguida, para o [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)apropriado.</span><span class="sxs-lookup"><span data-stu-id="4ffab-145">The URL is passed to the protocol handler and then to the appropriate [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter).</span></span> <span data-ttu-id="4ffab-146">O filtro é geralmente uma enumeração de diretório que produz mais URLs.</span><span class="sxs-lookup"><span data-stu-id="4ffab-146">The filter is usually a directory enumeration that produces more URLs.</span></span> <span data-ttu-id="4ffab-147">As notificações são o estado estacionário.</span><span class="sxs-lookup"><span data-stu-id="4ffab-147">Notifications are the steady-state.</span></span> <span data-ttu-id="4ffab-148">Normalmente, cada repositório de dados tem seu próprio manipulador de protocolo que fornece essas notificações.</span><span class="sxs-lookup"><span data-stu-id="4ffab-148">Typically, each data store has its own protocol handler that provides these notifications.</span></span> <span data-ttu-id="4ffab-149">Por exemplo, no sistema de arquivos local, o [diário de alterações do USN](/windows/desktop/FileIO/change-journals) atua como um provedor de notificações para todas as URLs no protocolo file://.</span><span class="sxs-lookup"><span data-stu-id="4ffab-149">For example, on the local file system, the [USN Change Journal](/windows/desktop/FileIO/change-journals) acts as a notifications provider for all URLs under the file:// protocol.</span></span> <span data-ttu-id="4ffab-150">Da mesma forma, o Microsoft Outlook atua como um provedor de notificações para todas as URLs no protocolo mapi://.</span><span class="sxs-lookup"><span data-stu-id="4ffab-150">Similarly, Microsoft Outlook acts as a notifications provider for all URLs under the mapi:// protocol.</span></span> <span data-ttu-id="4ffab-151">Quando um usuário recebe, move ou exclui email, o Outlook notifica o gatherer sobre o status alterado do email.</span><span class="sxs-lookup"><span data-stu-id="4ffab-151">When a user receives, moves, or deletes email, Outlook notifies the gatherer of the changed status of the email.</span></span> <span data-ttu-id="4ffab-152">A partir dessas notificações, o gatherer cria filas de indexação de URLs para rastreamento.</span><span class="sxs-lookup"><span data-stu-id="4ffab-152">From these notifications, the gatherer creates indexing queues of URLs to crawl.</span></span>

<span data-ttu-id="4ffab-153">**Indexando filas**  As filas de indexação são listas de URLs que identificam itens que precisam ser indexados ou reindexados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-153">**Indexing Queues**  The indexing queues are lists of URLs that identify items that need to be indexed or re-indexed.</span></span> <span data-ttu-id="4ffab-154">O coletor compara as URLs que recebe dos provedores de notificações para as URLs no escopo de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="4ffab-154">The gatherer compares the URLs it receives from notifications providers to the URLs in the crawl scope.</span></span> <span data-ttu-id="4ffab-155">Cada URL dos provedores de notificações que está dentro do escopo de rastreamento é adicionada a uma fila que o coletor usa para priorizar quais URLs serão processadas em seguida.</span><span class="sxs-lookup"><span data-stu-id="4ffab-155">Every URL from notifications providers that falls within the crawl scope is added to a queue that the gatherer uses to prioritize which URLs to process next.</span></span>

<span data-ttu-id="4ffab-156">Há três filas: notificações de alta prioridade, notificações normais e rastreamentos periódicos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-156">There are three queues: high priority notifications, normal notifications, and periodic crawls.</span></span> <span data-ttu-id="4ffab-157">A fila de alta prioridade é para notificações que devem ser processadas imediatamente.</span><span class="sxs-lookup"><span data-stu-id="4ffab-157">The high priority queue is for notifications that should be processed immediately.</span></span> <span data-ttu-id="4ffab-158">Por exemplo, quando um usuário altera a propriedade Title de um item no Windows Explorer, o modo de exibição do Windows Explorer precisa ser atualizado imediatamente após a alteração.</span><span class="sxs-lookup"><span data-stu-id="4ffab-158">For example, when a user changes an item's title property in Windows Explorer, the Windows Explorer view needs to be updated immediately after the change.</span></span> <span data-ttu-id="4ffab-159">A fila de notificação normal é para todas as notificações de alteração restantes.</span><span class="sxs-lookup"><span data-stu-id="4ffab-159">The normal notification queue is for all remaining change notifications.</span></span> <span data-ttu-id="4ffab-160">As filas de notificação são processadas antes da fila de rastreamento porque os itens alterados têm maior probabilidade de serem de interesse de um usuário.</span><span class="sxs-lookup"><span data-stu-id="4ffab-160">The notification queues are processed before the crawl queue because changed items are more likely to be of interest to a user.</span></span> <span data-ttu-id="4ffab-161">O coletor acessa dados para as URLs em cada fila na ordem FIFO (primeiro a entrar, primeiro a sair).</span><span class="sxs-lookup"><span data-stu-id="4ffab-161">The gatherer accesses data for the URLs on each queue in first in, first out (FIFO) order.</span></span>

<span data-ttu-id="4ffab-162">Para obter mais informações sobre priorização e APIs de eventos introduzidas no Windows 7, consulte [indexação de índices e eventos de conjunto de linhas no Windows 7](indexing-prioritization-and-rowset-events.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-162">For more information on prioritization, and eventing APIs introduced in Windows 7, see [Indexing Prioritization and Rowset Events in Windows 7](indexing-prioritization-and-rowset-events.md).</span></span> <span data-ttu-id="4ffab-163">Para obter mais informações sobre o gerenciamento de escopo de rastreamento e notificações, consulte [fornecendo notificações de alteração](-search-3x-wds-notifyingofchanges.md) e [usando o Gerenciador de escopo de rastreamento](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-163">For more information on crawl scope management and notifications, see [Providing Change Notifications](-search-3x-wds-notifyingofchanges.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>

## <a name="stage-2-crawling-urls"></a><span data-ttu-id="4ffab-164">Etapa 2: rastreando URLs</span><span class="sxs-lookup"><span data-stu-id="4ffab-164">Stage 2: Crawling URLs</span></span>

<span data-ttu-id="4ffab-165">No segundo estágio da indexação, o gatherer rastreia as filas, acessando armazenamentos de dados e recuperando fluxos de itens.</span><span class="sxs-lookup"><span data-stu-id="4ffab-165">In the second stage of indexing, the gatherer crawls through the queues, accessing data stores and retrieving item streams.</span></span> <span data-ttu-id="4ffab-166">Primeiro, o gatherer localiza o manipulador de protocolo apropriado para cada URL.</span><span class="sxs-lookup"><span data-stu-id="4ffab-166">First, the gatherer finds the appropriate protocol handler for each URL.</span></span> <span data-ttu-id="4ffab-167">Em seguida, o gatherer passa a URL para o manipulador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-167">Then, the gatherer passes the URL to the protocol handler.</span></span> <span data-ttu-id="4ffab-168">O manipulador de protocolo acessa o item e passa os metadados de item de volta para o gatherer.</span><span class="sxs-lookup"><span data-stu-id="4ffab-168">The protocol handler accesses the item and passes item metadata back to the gatherer.</span></span> <span data-ttu-id="4ffab-169">O coletor usa os metadados para identificar o filtro correto.</span><span class="sxs-lookup"><span data-stu-id="4ffab-169">The gatherer uses the metadata to identify the correct filter.</span></span>

<span data-ttu-id="4ffab-170">O diagrama a seguir mostra uma exibição de alto nível do processo de rastreamento de URL.</span><span class="sxs-lookup"><span data-stu-id="4ffab-170">The following diagram shows a high-level view of the URL-crawling process.</span></span> <span data-ttu-id="4ffab-171">Este estágio inclui coordenação considerável e comunicação entre componentes.</span><span class="sxs-lookup"><span data-stu-id="4ffab-171">This stage includes considerable coordination and communication between components.</span></span>

![diagrama mostrando o processo de rastreamento de URLs e acesso a itens](images/crawlingqueues.jpg)

<span data-ttu-id="4ffab-173">O restante desta seção descreve como o Windows Search acessa itens para indexação e explica as funções de cada um dos componentes envolvidos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-173">The rest of this section describes how Windows Search accesses items for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="4ffab-174">**Gatherer**  No estágio 2, o estágio de rastreamento, o coletor processa as URLs nas filas, começando com a fila de alta prioridade.</span><span class="sxs-lookup"><span data-stu-id="4ffab-174">**Gatherer**  In stage 2, the crawling stage, the gatherer processes the URLs in the queues, beginning with the high priority queue.</span></span> <span data-ttu-id="4ffab-175">Cada URL é examinada para identificar seu protocolo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-175">Each URL is examined to identify its protocol.</span></span> <span data-ttu-id="4ffab-176">Em seguida, o gatherer pesquisa o manipulador de protocolo registrado para esse protocolo e o instancia no processo de host do protocolo de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4ffab-176">The gatherer then looks up the protocol handler registered for that protocol and instantiates it in the search protocol host process.</span></span>

<span data-ttu-id="4ffab-177">**Host de protocolo de pesquisa**  O host de protocolo de pesquisa é meramente um processador, processo de host para manipuladores de protocolo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-177">**Search Protocol Host**  The search protocol host is merely a boxed, host process for protocol handlers.</span></span> <span data-ttu-id="4ffab-178">Normalmente, o Windows Search cria dois processos de host, um que é executado no contexto de segurança do sistema e um que é executado no contexto de segurança do usuário.</span><span class="sxs-lookup"><span data-stu-id="4ffab-178">Typically, Windows Search creates two such host processes, one that runs in the system security context and one that runs in the user security context.</span></span> <span data-ttu-id="4ffab-179">Essa separação garante que os dados específicos para um usuário nunca sejam executados no contexto do sistema.</span><span class="sxs-lookup"><span data-stu-id="4ffab-179">This separation ensures that data specific to a user is never run in the system context.</span></span>

<span data-ttu-id="4ffab-180">O Windows Search também usa o processo de host para isolar uma instância de um manipulador de protocolo de outros processos ou aplicativos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-180">Windows Search also uses the host process to isolate an instance of a protocol handler from other processes or applications.</span></span> <span data-ttu-id="4ffab-181">Dessa forma, nenhum aplicativo externo pode acessar essa instância específica do manipulador de protocolo e, se o manipulador de protocolo falhar inesperadamente, somente o processo de indexação será afetado.</span><span class="sxs-lookup"><span data-stu-id="4ffab-181">This way, no outside application can access that specific instance of the protocol handler, and if the protocol handler fails unexpectedly, only the indexing process is affected.</span></span> <span data-ttu-id="4ffab-182">Como o processo de host executa código de terceiros (manipuladores de protocolo), o Windows Search recicla periodicamente o processo para minimizar o tempo que um ataque bem-sucedido tem de explorar informações no processo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-182">Because the host process runs third party code (protocol handlers), Windows Search periodically recycles the process to minimize the time a successful attack has to exploit information in the process.</span></span> <span data-ttu-id="4ffab-183">Além disso, o host do protocolo de pesquisa não afeta o rastreamento de URLs ou a indexação de itens.</span><span class="sxs-lookup"><span data-stu-id="4ffab-183">Beyond this, the search protocol host does not affect the crawling of URLs or indexing of items.</span></span>

<span data-ttu-id="4ffab-184">**Manipuladores de protocolo**  Os manipuladores de protocolo fornecem acesso a itens em um armazenamento de dados usando o protocolo do armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-184">**Protocol Handlers**  Protocol handlers provide access to items in a data store using the data store's protocol.</span></span> <span data-ttu-id="4ffab-185">Por exemplo, o manipulador de protocolo NTFS fornece acesso a arquivos em uma unidade local usando o protocolo file://.</span><span class="sxs-lookup"><span data-stu-id="4ffab-185">For example, the NTFS protocol handler provides access to files on a local drive using the file:// protocol.</span></span> <span data-ttu-id="4ffab-186">O manipulador de protocolo sabe como atravessar o armazenamento de dados, identificar itens novos ou atualizados e notificar o gatherer.</span><span class="sxs-lookup"><span data-stu-id="4ffab-186">The protocol handler knows how to traverse the data store, identify new or updated items, and notify the gatherer.</span></span> <span data-ttu-id="4ffab-187">Em seguida, quando o rastreamento começa, o manipulador de protocolo fornece um objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) ao coletor para associar ao fluxo subjacente do item e retornar os metadados do item, como restrições de segurança e hora da última modificação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-187">Then, when crawling begins, the protocol handler provides an [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object to the gatherer to bind to the item's underlying stream and return item metadata such as security restrictions and last modified time.</span></span>

> [!NOTE]  
> <span data-ttu-id="4ffab-188">Os manipuladores de protocolo não são componentes do Windows Search; Eles são componentes do protocolo e armazenamento de dados específicos que eles são projetados para acessar.</span><span class="sxs-lookup"><span data-stu-id="4ffab-188">Protocol handlers are not Windows Search components; they are components of the specific protocol and data store they are designed to access.</span></span> <span data-ttu-id="4ffab-189">Se você tiver um repositório de dados personalizado que deseja indexar, precisará implementar um manipulador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-189">If you have a custom data store you want indexed, you need to implement a protocol handler.</span></span> <span data-ttu-id="4ffab-190">Para obter mais informações sobre manipuladores de protocolo e como implementar um, consulte [desenvolvendo manipuladores de protocolo](-search-3x-wds-phaddins.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-190">For more information on protocol handlers and how to implement one, refer to [Developing Protocol Handlers](-search-3x-wds-phaddins.md).</span></span>

<span data-ttu-id="4ffab-191">**Metadados e fluxo**  Usando metadados retornados pelo objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) do manipulador de protocolo, o gatherer identifica o filtro correto para a URL.</span><span class="sxs-lookup"><span data-stu-id="4ffab-191">**Metadata and Stream**  Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for the URL.</span></span> <span data-ttu-id="4ffab-192">O coletor analisa a extensão de nome de arquivo do item e pesquisa o filtro registrado para essa extensão.</span><span class="sxs-lookup"><span data-stu-id="4ffab-192">The gatherer parses the item's file name extension and looks up the filter registered for that extension.</span></span> <span data-ttu-id="4ffab-193">Se o coletor não conseguir localizar um filtro, o Windows Search usará os metadados para derivar um conjunto mínimo de informações de Propriedade do sistema (como System. ItemName) e atualizará o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-193">If the gatherer is unable to find a filter, Windows Search uses the metadata to derive a minimal set of system property information (like System.ItemName) and updates the index.</span></span> <span data-ttu-id="4ffab-194">Caso contrário, se o gatherer encontrar o filtro, o terceiro estágio de indexação começará.</span><span class="sxs-lookup"><span data-stu-id="4ffab-194">Otherwise, if the gatherer finds the filter, the third stage of indexing begins.</span></span>

## <a name="stage-3-updating-the-index"></a><span data-ttu-id="4ffab-195">Estágio 3: atualizando o índice</span><span class="sxs-lookup"><span data-stu-id="4ffab-195">Stage 3: Updating the Index</span></span>

<span data-ttu-id="4ffab-196">No terceiro estágio da indexação, o gatherer instancia o filtro correto para a URL e inicializa o filtro com o fluxo do objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) .</span><span class="sxs-lookup"><span data-stu-id="4ffab-196">In the third stage of indexing, the gatherer instantiates the correct filter for the URL and initializes the filter with the stream from the [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object.</span></span> <span data-ttu-id="4ffab-197">Em seguida, o filtro acessa o item e retorna o conteúdo para o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-197">The filter then accesses the item and returns content for the index.</span></span> <span data-ttu-id="4ffab-198">Se você tiver um formato de arquivo personalizado, o Windows Search dependerá de seu filtro para acessar URLs e emitir o conteúdo e as propriedades para indexação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-198">If you have a custom file format, Windows Search relies on your filter to access URLs and emit content and properties for indexing.</span></span>

<span data-ttu-id="4ffab-199">O diagrama a seguir mostra uma exibição de alto nível do processo de acesso a dados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-199">The following diagram shows a high-level view of the data access process.</span></span> <span data-ttu-id="4ffab-200">Este estágio inclui coordenação considerável e comunicação entre componentes.</span><span class="sxs-lookup"><span data-stu-id="4ffab-200">This stage includes considerable coordination and communication between components.</span></span>

![diagrama mostrando os dados do item emitidos para o índice](images/filteringdata.jpg)

<span data-ttu-id="4ffab-202">O restante desta seção descreve como o Windows Search acessa os dados de item para indexação e explica as funções de cada um dos componentes envolvidos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-202">The rest of this section describes how Windows Search accesses item data for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="4ffab-203">**Gatherer**  No início deste estágio, a função do coletor é criar uma instância do filtro correto para o item e passá-lo para o fluxo do item.</span><span class="sxs-lookup"><span data-stu-id="4ffab-203">**Gatherer**  At the beginning of this stage, the gatherer's role is to instantiate the correct filter for the item and pass it the item stream.</span></span> <span data-ttu-id="4ffab-204">No final deste estágio, o coletor pega o conteúdo e as propriedades emitidos pelo manipulador de propriedades e pelo filtro e atualiza o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-204">At the end of this stage, the gatherer takes the content and properties emitted by the filter and property handler and updates the index.</span></span>

<span data-ttu-id="4ffab-205">**Host de filtro**  O host de filtro é meramente um processo de host para filtros e manipuladores de propriedade e atende a uma finalidade semelhante ao host de protocolo de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="4ffab-205">**Filter Host**  The filter host is merely a host process for filters and property handlers and serves a purpose similar to the search protocol host.</span></span> <span data-ttu-id="4ffab-206">O processo de host isola filtros e manipuladores de Propriedade do restante do sistema para os mesmos motivos de segurança e estabilidade que os processos de host de protocolo de pesquisa isolam os manipuladores de protocolo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-206">The host process isolates filters and property handlers from the rest of the system for the same security and stability reasons that search protocol host processes isolate protocol handlers.</span></span> <span data-ttu-id="4ffab-207">O processo de host é executado com direitos mínimos (ele não pode até mesmo acessar o sistema de arquivos) e, ocasionalmente, é reciclado para proteger contra ataques de segurança.</span><span class="sxs-lookup"><span data-stu-id="4ffab-207">The host process runs with minimal rights (it can't even access the file system) and is occasionally recycled to protect against security attacks.</span></span> <span data-ttu-id="4ffab-208">O Windows Search também monitora o uso de recursos para que, se um filtro consumir muitos recursos, o processo do host seja reciclado.</span><span class="sxs-lookup"><span data-stu-id="4ffab-208">Windows Search also monitors resource use so that if a filter consumes too many resources, the host process is recycled.</span></span>

<span data-ttu-id="4ffab-209">**Filtros**  do  Filtros são componentes críticos no processo de indexação que emitem informações de itens para o gatherer.</span><span class="sxs-lookup"><span data-stu-id="4ffab-209">**Filters**  Filters are critical components in the indexing process that emit item information for the gatherer.</span></span> <span data-ttu-id="4ffab-210">Os filtros são nomeados após a interface principal usada em sua implementação, a interface [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) e, consequentemente, são chamados de IFilters.</span><span class="sxs-lookup"><span data-stu-id="4ffab-210">Filters are named after the principal interface used in their implementation, the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface, and consequently are sometimes referred to as IFilters.</span></span> <span data-ttu-id="4ffab-211">Há dois tipos de filtros: um que interage com itens individuais como arquivos e outro que interage com contêineres como pastas.</span><span class="sxs-lookup"><span data-stu-id="4ffab-211">There are two kinds of filters: one that interacts with individual items like files and one that interacts with containers like folders.</span></span> <span data-ttu-id="4ffab-212">Ambos fornecem dados para o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-212">Both provide data for the index.</span></span>

<span data-ttu-id="4ffab-213">Usando metadados retornados pelo objeto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) do manipulador de protocolo, o coletor identifica o filtro correto para uma URL específica e o passa para o fluxo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-213">Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for a particular URL and passes it to the stream.</span></span> <span data-ttu-id="4ffab-214">O coletor identifica o filtro correto por meio de um manipulador de protocolo ou pela extensão de nome de arquivo, tipo de MIME ou identificador de classe (CLSID).</span><span class="sxs-lookup"><span data-stu-id="4ffab-214">The gatherer identifies the correct filter either through a protocol handler or by the file name extension, MIME type, or class identifier (CLSID).</span></span> <span data-ttu-id="4ffab-215">Se a URL apontar para um contêiner, o filtro emitirá as propriedades para o contêiner e enumerará os itens no contêiner (URLs filho).</span><span class="sxs-lookup"><span data-stu-id="4ffab-215">If the URL points to a container, the filter emits properties for the container and enumerates the items in the container (child URLs).</span></span> <span data-ttu-id="4ffab-216">Se a URL apontar para um item, o filtro retornará o conteúdo textual, se qualquer leitura de propriedades e for mais complexa que os manipuladores de propriedade.</span><span class="sxs-lookup"><span data-stu-id="4ffab-216">If the URL points to an item, the filter returns the textual content, if any the reading of properties and are more complex than property handlers.</span></span> <span data-ttu-id="4ffab-217">Em geral, recomendamos que os filtros emitam o conteúdo do item enquanto os manipuladores de propriedade emitirem Propriedades de item.</span><span class="sxs-lookup"><span data-stu-id="4ffab-217">Generally, we recommend that filters emit item contents while property handlers emit item properties.</span></span> <span data-ttu-id="4ffab-218">No entanto, se o filtro precisar trabalhar com aplicativos mais antigos que não reconheçam manipuladores de propriedade, você também poderá implementar o filtro para emitir Propriedades.</span><span class="sxs-lookup"><span data-stu-id="4ffab-218">However, if your filter needs to work with older applications that do not recognize property handlers, you can implement the filter to emit properties as well.</span></span>

> [!NOTE]  
> <span data-ttu-id="4ffab-219">Os filtros não são componentes do Windows Search; Eles são componentes relacionados ao formato ou ao contêiner de arquivo específico que eles são projetados para acessar.</span><span class="sxs-lookup"><span data-stu-id="4ffab-219">Filters are not Windows Search components; they are components related to the specific file format or container they are designed to access.</span></span> <span data-ttu-id="4ffab-220">Para obter mais informações sobre filtros e como implementar um para um formato ou contêiner de arquivo personalizado, consulte [práticas recomendadas para criar manipuladores de filtro no Windows Search](-search-3x-wds-extidx-filters.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-220">For more information on filters and how to implement one for a custom file format or container, see [Best Practices for Creating Filter Handlers in Windows Search](-search-3x-wds-extidx-filters.md).</span></span>

<span data-ttu-id="4ffab-221">A tabela a seguir lista os resultados que o coletor recebe de um filtro ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) e um manipulador de Propriedades ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) durante o processo de indexação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-221">The following table lists the results that the gatherer receives from a filter ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) and property handler ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) during the indexing process.</span></span>

|                            | [<span data-ttu-id="4ffab-222">**Visio**</span><span class="sxs-lookup"><span data-stu-id="4ffab-222">**IFilter**</span></span>](/windows/win32/api/filter/nn-filter-ifilter) | [<span data-ttu-id="4ffab-223">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="4ffab-223">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore) |
|----------------------------|------------------------------------|-------------------------------------------------|
| <span data-ttu-id="4ffab-224">Permitir gravação</span><span class="sxs-lookup"><span data-stu-id="4ffab-224">Allow write</span></span>                | <span data-ttu-id="4ffab-225">Não</span><span class="sxs-lookup"><span data-stu-id="4ffab-225">No</span></span>                                 | <span data-ttu-id="4ffab-226">Sim</span><span class="sxs-lookup"><span data-stu-id="4ffab-226">Yes</span></span>                                             |
| <span data-ttu-id="4ffab-227">Misturar conteúdo e propriedades</span><span class="sxs-lookup"><span data-stu-id="4ffab-227">Mix content and properties</span></span> | <span data-ttu-id="4ffab-228">Sim</span><span class="sxs-lookup"><span data-stu-id="4ffab-228">Yes</span></span>                                | <span data-ttu-id="4ffab-229">Não</span><span class="sxs-lookup"><span data-stu-id="4ffab-229">No</span></span>                                              |
| <span data-ttu-id="4ffab-230">Multilíngüe</span><span class="sxs-lookup"><span data-stu-id="4ffab-230">Multilingual</span></span>               | <span data-ttu-id="4ffab-231">Sim</span><span class="sxs-lookup"><span data-stu-id="4ffab-231">Yes</span></span>                                | <span data-ttu-id="4ffab-232">Não</span><span class="sxs-lookup"><span data-stu-id="4ffab-232">No</span></span>                                              |
| <span data-ttu-id="4ffab-233">Links de emissão</span><span class="sxs-lookup"><span data-stu-id="4ffab-233">Emit links</span></span>                 | <span data-ttu-id="4ffab-234">Sim</span><span class="sxs-lookup"><span data-stu-id="4ffab-234">Yes</span></span>                                | <span data-ttu-id="4ffab-235">Não</span><span class="sxs-lookup"><span data-stu-id="4ffab-235">No</span></span>                                              |
| <span data-ttu-id="4ffab-236">MIME</span><span class="sxs-lookup"><span data-stu-id="4ffab-236">MIME</span></span>                       | <span data-ttu-id="4ffab-237">Sim</span><span class="sxs-lookup"><span data-stu-id="4ffab-237">Yes</span></span>                                | <span data-ttu-id="4ffab-238">Não</span><span class="sxs-lookup"><span data-stu-id="4ffab-238">No</span></span>                                              |
| <span data-ttu-id="4ffab-239">Limites de texto</span><span class="sxs-lookup"><span data-stu-id="4ffab-239">Text boundaries</span></span>            | <span data-ttu-id="4ffab-240">Sentença, parágrafo, capítulo</span><span class="sxs-lookup"><span data-stu-id="4ffab-240">Sentence, paragraph, chapter</span></span>       | <span data-ttu-id="4ffab-241">Nenhum</span><span class="sxs-lookup"><span data-stu-id="4ffab-241">None</span></span>                                            |
| <span data-ttu-id="4ffab-242">Cliente/servidor</span><span class="sxs-lookup"><span data-stu-id="4ffab-242">Client / server</span></span>            | <span data-ttu-id="4ffab-243">Ambos</span><span class="sxs-lookup"><span data-stu-id="4ffab-243">Both</span></span>                               | <span data-ttu-id="4ffab-244">Cliente</span><span class="sxs-lookup"><span data-stu-id="4ffab-244">Client</span></span>                                          |
| <span data-ttu-id="4ffab-245">Implementação</span><span class="sxs-lookup"><span data-stu-id="4ffab-245">Implementation</span></span>             | <span data-ttu-id="4ffab-246">Complex</span><span class="sxs-lookup"><span data-stu-id="4ffab-246">Complex</span></span>                            | <span data-ttu-id="4ffab-247">Simples</span><span class="sxs-lookup"><span data-stu-id="4ffab-247">Simple</span></span>                                          |

<span data-ttu-id="4ffab-248">**Manipuladores de propriedade**  Manipuladores de propriedade são componentes que lêem e gravam Propriedades para um determinado formato de arquivo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-248">**Property Handlers**  Property handlers are components that read and write properties for a particular file format.</span></span> <span data-ttu-id="4ffab-249">Eles acessam itens e as propriedades de emissão do coletor da mesma maneira que os filtros fazem para o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-249">They access items and emit properties for the gatherer in the same way that filters do for content.</span></span> <span data-ttu-id="4ffab-250">Manipuladores de propriedade são mais fáceis de implementar do que filtros.</span><span class="sxs-lookup"><span data-stu-id="4ffab-250">Property handlers are easier to implement than filters.</span></span> <span data-ttu-id="4ffab-251">Se um formato de arquivo baseado em texto for muito simples ou se for esperado que os arquivos sejam muito pequenos, o manipulador de propriedades poderá emitir as propriedades e o conteúdo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-251">If a text-based file format is very simple or the files are expected to be very small, the property handler can emit both properties and content.</span></span>

> [!NOTE]  
> <span data-ttu-id="4ffab-252">Manipuladores de propriedade não são componentes do Windows Search; Eles são componentes relacionados ao formato de arquivo específico que eles são projetados para acessar.</span><span class="sxs-lookup"><span data-stu-id="4ffab-252">Property handlers are not Windows Search components; they are components related to the specific file format they are designed to access.</span></span> <span data-ttu-id="4ffab-253">Para obter mais informações sobre manipuladores de propriedade e como implementar um para um formato de arquivo personalizado, consulte [desenvolvendo manipuladores de propriedade para o Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-253">For more information on property handlers and how to implement one for a custom file format, see [Developing Property Handlers for Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span></span>

<span data-ttu-id="4ffab-254">**Propriedades** do O Windows Search fornece um [sistema de propriedades](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) que inclui uma grande biblioteca de propriedades.</span><span class="sxs-lookup"><span data-stu-id="4ffab-254">**Properties** Windows Search provides a [property system](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) that includes a large library of properties.</span></span> <span data-ttu-id="4ffab-255">Qualquer propriedade pode aparecer em qualquer item, conforme definido pelo manipulador de filtro ou propriedade.</span><span class="sxs-lookup"><span data-stu-id="4ffab-255">Any property can appear on any item as defined by the filter or property handler.</span></span> <span data-ttu-id="4ffab-256">Se você tiver um formato de arquivo personalizado, poderá mapear as propriedades do formato de arquivo para essas propriedades do sistema e poderá criar novas propriedades personalizadas.</span><span class="sxs-lookup"><span data-stu-id="4ffab-256">If you have a custom file format, you can map your file format's properties to these system properties, and you can create new custom properties.</span></span> <span data-ttu-id="4ffab-257">Quando o seu manipulador de filtro ou Propriedade emite essas propriedades, o gatherer atualiza o índice para que os usuários possam Pesquisar usando suas propriedades.</span><span class="sxs-lookup"><span data-stu-id="4ffab-257">When your filter or property handler emits these properties, the gatherer updates the index so users can search using your properties.</span></span> <span data-ttu-id="4ffab-258">Para obter mais informações sobre como criar e registrar Propriedades personalizadas para um formato de arquivo, consulte [sistema de propriedades](../properties/building-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-258">For more information on creating and registering custom properties for a file format, see [Property System](../properties/building-property-handlers.md).</span></span>

<span data-ttu-id="4ffab-259">**SystemIndex**  O índice, chamado SystemIndex, armazena dados indexados e é composto de um repositório de propriedades e de índices sobre as propriedades e o conteúdo de propriedades de item e um índice invertido para conteúdo e propriedades textuais.</span><span class="sxs-lookup"><span data-stu-id="4ffab-259">**SystemIndex**  The index, called SystemIndex, stores indexed data and is composed of a property store and indices over the properties and content for item properties, and an inverted index for textual content and properties.</span></span> <span data-ttu-id="4ffab-260">Depois que o gatherer atualizar o índice, o índice poderá ser consultado pelo Windows Search e por outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-260">After the gatherer updates the index, the index can be queried by Windows Search and other applications.</span></span> <span data-ttu-id="4ffab-261">Para obter mais informações sobre maneiras de consultar o índice, consulte [consultando o índice programaticamente](-search-3x-wds-qryidx-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-261">For more information on ways to query the index, see [Querying the Index Programmatically](-search-3x-wds-qryidx-overview.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="4ffab-262">Lembre-se de que quando você registra novamente um esquema, as alterações feitas em atributos de propriedades definidas anteriormente podem não ser respeitadas pelo indexador.</span><span class="sxs-lookup"><span data-stu-id="4ffab-262">Remember that when you re-register a schema, changes made to attributes of previously defined properties may not be respected by the indexer.</span></span> <span data-ttu-id="4ffab-263">A solução é recriar o índice ou introduzir novas propriedades que reflitam as alterações em vez de atualizar as antigas (não recomendado).</span><span class="sxs-lookup"><span data-stu-id="4ffab-263">The solution is either to rebuild the index, or introduce new properties that reflect the changes instead of updating old ones (not recommended).</span></span> <span data-ttu-id="4ffab-264">Para obter mais informações, consulte [Observação para implementadores](#notes-to-implementers) em [Propriedades visão geral do sistema](../properties/property-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4ffab-264">For more information, see [Note to Implementers](#notes-to-implementers) in [Properties System Overview](../properties/property-system-overview.md).</span></span>

## <a name="how-indexing-is-scheduled"></a><span data-ttu-id="4ffab-265">Como a indexação é agendada</span><span class="sxs-lookup"><span data-stu-id="4ffab-265">How Indexing is Scheduled</span></span>

<span data-ttu-id="4ffab-266">Quando o Windows Search é instalado pela primeira vez, ele executa uma indexação completa do escopo do rastreamento, pausa durante períodos de alta atividade de e/s e de usuário.</span><span class="sxs-lookup"><span data-stu-id="4ffab-266">When Windows Search is first installed, it performs a full indexing of the crawl scope, pausing during periods of high I/O and user activity.</span></span> <span data-ttu-id="4ffab-267">O escopo de rastreamento padrão consiste em locais de biblioteca padrão, como **documentos**, **música**, **imagens** e **vídeos**.</span><span class="sxs-lookup"><span data-stu-id="4ffab-267">The default crawl scope consists of the default library locations, such as **Documents**, **Music**, **Pictures**, and **Videos**.</span></span> <span data-ttu-id="4ffab-268">As notificações são processadas mesmo antes de o rastreamento inicial ser concluído.</span><span class="sxs-lookup"><span data-stu-id="4ffab-268">Notifications are processed even before the initial crawl is finished.</span></span> <span data-ttu-id="4ffab-269">Ocasionalmente, o coletor rastreia as URLs do escopo de rastreamento completo.</span><span class="sxs-lookup"><span data-stu-id="4ffab-269">Occasionally, the gatherer crawls the URLs from the full crawl scope.</span></span> <span data-ttu-id="4ffab-270">Esses rastreamentos completos garantem que os dados no índice sejam atualizados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-270">These full crawls ensure that the data in the index is fresh.</span></span> <span data-ttu-id="4ffab-271">Por exemplo, se um provedor de notificação não conseguir enviar notificações ou se o serviço de pesquisa do Windows for finalizado inesperadamente, o coletor não teria conhecimento de itens novos ou alterados e não indexaria esses itens.</span><span class="sxs-lookup"><span data-stu-id="4ffab-271">For example, if a notification provider fails to send notifications or if the Windows Search service is terminated unexpectedly, the gatherer would have no knowledge of new or changed items and would not index these items.</span></span> <span data-ttu-id="4ffab-272">Há dois tipos de fontes: somente notificação e notificação habilitada.</span><span class="sxs-lookup"><span data-stu-id="4ffab-272">There are two kinds of sources: notification only and notification enabled.</span></span> <span data-ttu-id="4ffab-273">Em ambas as fontes, o gatherer inicialmente rastreia o índice.</span><span class="sxs-lookup"><span data-stu-id="4ffab-273">In both sources, the gatherer initially crawls the index.</span></span> <span data-ttu-id="4ffab-274">Após o rastreamento inicial, as fontes somente notificação nunca farão um rastreamento completo novamente, a menos que haja uma falha, como o [diário de alterações do USN](/windows/desktop/FileIO/change-journals) que está sendo revertida.</span><span class="sxs-lookup"><span data-stu-id="4ffab-274">After the initial crawl, the notification-only sources will never do a full crawl again unless there is a failure, such as the [USN Change Journal](/windows/desktop/FileIO/change-journals) rolling over.</span></span> <span data-ttu-id="4ffab-275">As fontes habilitadas para notificação fazem um rastreamento incremental quando o indexador é iniciado, mas depois ouve as notificações durante a execução.</span><span class="sxs-lookup"><span data-stu-id="4ffab-275">Notification-enabled sources do an incremental crawl when the indexer is started, but then listen to notifications while running.</span></span> <span data-ttu-id="4ffab-276">O NTFS e o Microsoft Outlook são somente notificação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-276">NTFS and Microsoft Outlook are notification only.</span></span> <span data-ttu-id="4ffab-277">O Internet Explorer e o FAT estão habilitados para notificação.</span><span class="sxs-lookup"><span data-stu-id="4ffab-277">Internet Explorer and FAT are notification enabled.</span></span>

## <a name="notes-to-implementers"></a><span data-ttu-id="4ffab-278">Notas aos Implementadores</span><span class="sxs-lookup"><span data-stu-id="4ffab-278">Notes to Implementers</span></span>

<span data-ttu-id="4ffab-279">A qualidade dos dados no índice e a eficiência do processo de indexação dependem muito do filtro e da implementação do manipulador de propriedade.</span><span class="sxs-lookup"><span data-stu-id="4ffab-279">The quality of the data in the index and the efficiency of the indexing process depend largely on your filter and property handler implementation.</span></span> <span data-ttu-id="4ffab-280">Como o filtro é chamado toda vez que uma URL identifica o formato de arquivo, o processo de indexação pode diminuir drasticamente se o filtro não for eficiente.</span><span class="sxs-lookup"><span data-stu-id="4ffab-280">Because the filter is called every time a URL identifies your file format, the indexing process can slow down dramatically if your filter is inefficient.</span></span> <span data-ttu-id="4ffab-281">Se o manipulador de propriedades não mapear corretamente todas as propriedades de arquivo para propriedades do sistema ou não emitir corretamente essas propriedades, os dados no índice ficarão incorretos e as pesquisas posteriores para essas propriedades retornarão resultados incorretos.</span><span class="sxs-lookup"><span data-stu-id="4ffab-281">If your property handler doesn't correctly map all file properties to system properties or doesn't correctly emit these properties, the data in the index will be incorrect and later searches for those properties will return incorrect results.</span></span> <span data-ttu-id="4ffab-282">Se o filtro ou o manipulador de propriedades falhar, o indexador não poderá indexar dados.</span><span class="sxs-lookup"><span data-stu-id="4ffab-282">If your filter or property handler fails, the indexer won't be able to index data.</span></span>

<span data-ttu-id="4ffab-283">Aplicativos e processos que não sejam o Windows Search dependem de manipuladores de protocolo, filtros e manipuladores de propriedades.</span><span class="sxs-lookup"><span data-stu-id="4ffab-283">Applications and processes other than Windows Search rely on protocol handlers, filters, and property handlers.</span></span> <span data-ttu-id="4ffab-284">Suas implementações podem afetar esses aplicativos de maneiras que você talvez não espere.</span><span class="sxs-lookup"><span data-stu-id="4ffab-284">Your implementations can affect those applications in ways you may not expect.</span></span> <span data-ttu-id="4ffab-285">O [Guia de desenvolvimento do Windows Search](-search-developers-guide-entry-page.md) fornece conselhos sobre opções de design e sobre como testar cada um desses componentes.</span><span class="sxs-lookup"><span data-stu-id="4ffab-285">The [Windows Search Development Guide](-search-developers-guide-entry-page.md) provides advice on design choices and on testing each of these components.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4ffab-286">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="4ffab-286">Related topics</span></span>

[<span data-ttu-id="4ffab-287">Indexação, consulta e notificações no Windows Search</span><span class="sxs-lookup"><span data-stu-id="4ffab-287">Indexing, Querying and Notifications in Windows Search</span></span>](-search-3x-wds-included-in-index.md)

[<span data-ttu-id="4ffab-288">O que está incluído no índice</span><span class="sxs-lookup"><span data-stu-id="4ffab-288">What is Included in the Index</span></span>](-search-indexing-process-overview.md)

[<span data-ttu-id="4ffab-289">Processo de consulta no Windows Search</span><span class="sxs-lookup"><span data-stu-id="4ffab-289">Querying Process in Windows Search</span></span>](querying-process--windows-search-.md)

[<span data-ttu-id="4ffab-290">Processo de notificações no Windows Search</span><span class="sxs-lookup"><span data-stu-id="4ffab-290">Notifications Process in Windows Search</span></span>](-search-3x-wds-support.md)

[<span data-ttu-id="4ffab-291">Requisitos de formatação de URL</span><span class="sxs-lookup"><span data-stu-id="4ffab-291">URL Formatting Requirements</span></span>](url-formatting-requirements.md)
