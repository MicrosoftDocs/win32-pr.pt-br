---
description: O uso dos componentes de APIs de notificação pode notificar o indexador de que um item foi alterado, movido ou excluído e pode adicionar escopos de pesquisa à fila de URLs do indexador do Windows Search que exigem a indexação.
ms.assetid: 817550e2-a256-48d5-9fa6-1ea04f8b8589
title: Notificando o índice de alterações (pesquisa do Windows)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5a89112da20c4010e1fc23fab16778309195d20
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090097"
---
# <a name="notifying-the-index-of-changes-windows-search"></a><span data-ttu-id="dbabf-103">Notificando o índice de alterações (pesquisa do Windows)</span><span class="sxs-lookup"><span data-stu-id="dbabf-103">Notifying the Index of Changes (Windows Search)</span></span>

<span data-ttu-id="dbabf-104">O uso dos componentes de APIs de notificação pode notificar o indexador de que um item foi alterado, movido ou excluído e pode adicionar escopos de pesquisa à fila de URLs do indexador do Windows Search que exigem a indexação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-104">By using the notification APIs components can notify the indexer that an item has been changed, moved or deleted, and can add search scopes to the Windows Search indexer's queue of URLs that require indexing.</span></span>

<span data-ttu-id="dbabf-105">Os componentes do podem notificar o indexador do Windows Search de que os dados em seu armazenamento foram alterados.</span><span class="sxs-lookup"><span data-stu-id="dbabf-105">Components can notify the Windows Search indexer that data in their store has changed.</span></span> <span data-ttu-id="dbabf-106">Normalmente, você pode contar com os rastreamentos agendados do indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-106">Typically, you can rely on the indexer's scheduled crawls.</span></span> <span data-ttu-id="dbabf-107">No entanto, o fornecimento de notificações ao indexador pode melhorar o desempenho, garantindo que o indexador não rastreie toda a loja em índices incrementais.</span><span class="sxs-lookup"><span data-stu-id="dbabf-107">However, providing notifications to the indexer can improve performance by ensuring the indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="dbabf-108">Por exemplo, isso pode ser recomendado se você espera que o armazenamento de dados seja excepcionalmente grande e/ou intensamente ocupado, como um armazenamento de dados de email, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="dbabf-108">For example, this might recommended if you expect your data store to be exceptionally large and/or exceptionally busy, such as an email data store for example.</span></span>

-   [<span data-ttu-id="dbabf-109">Implementando notificações gerenciadas pelo indexador</span><span class="sxs-lookup"><span data-stu-id="dbabf-109">Implementing Indexer-managed Notifications</span></span>](#implementing-indexer-managed-notifications)
    -   [<span data-ttu-id="dbabf-110">Fila de notificações</span><span class="sxs-lookup"><span data-stu-id="dbabf-110">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="dbabf-111">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="dbabf-111">ISearchPersistentItemsChangedSink</span></span>](#isearchpersistentitemschangedsink)
-   [<span data-ttu-id="dbabf-112">Implementando notificações gerenciadas pelo provedor</span><span class="sxs-lookup"><span data-stu-id="dbabf-112">Implementing Provider-managed Notifications</span></span>](#implementing-provider-managed-notifications)
    -   [<span data-ttu-id="dbabf-113">Fila de notificações</span><span class="sxs-lookup"><span data-stu-id="dbabf-113">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="dbabf-114">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="dbabf-114">ISearchItemsChangedSink</span></span>](#isearchitemschangedsink)
    -   [<span data-ttu-id="dbabf-115">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="dbabf-115">ISearchNotifyInlineSite</span></span>](#isearchnotifyinlinesite)
-   [<span data-ttu-id="dbabf-116">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="dbabf-116">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="dbabf-117">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="dbabf-117">Related topics</span></span>](#related-topics)

## <a name="implementing-indexer-managed-notifications"></a><span data-ttu-id="dbabf-118">Implementando notificações gerenciadas pelo indexador</span><span class="sxs-lookup"><span data-stu-id="dbabf-118">Implementing Indexer-managed Notifications</span></span>

<span data-ttu-id="dbabf-119">As notificações gerenciadas pelo indexador permitem que você controle o acesso ao seu armazenamento de dados enquanto libera você de manter a fila de notificações em todo o processo de indexação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-119">Indexer-managed notifications enable you to control access to your data store while freeing you of maintaining the notifications queue throughout the entire indexing process.</span></span> <span data-ttu-id="dbabf-120">Seu provedor de notificações deve monitorar as alterações no armazenamento de dados e criar uma fila de notificações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-120">Your notifications provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="dbabf-121">Periodicamente, seu provedor envia um lote de notificações de alteração para o indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-121">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="dbabf-122">Quando o indexador recebe suas notificações, ele retorna uma confirmação e você pode remover o (s) item (ns) da sua fila.</span><span class="sxs-lookup"><span data-stu-id="dbabf-122">When the indexer receives your notifications, it returns an acknowledgement and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="dbabf-123">Se, após um período de tempo, você não receber uma confirmação, poderá enviar novamente as notificações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-123">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="dbabf-124">Em caso de falha, o indexador recria sua fila interna de itens para rastrear ou executa um rastreamento incremental da loja.</span><span class="sxs-lookup"><span data-stu-id="dbabf-124">In case of failure, the indexer rebuilds its internal queue of items to crawl or performs an incremental crawl of the store.</span></span>

<span data-ttu-id="dbabf-125">Para implementar notificações gerenciadas pelo indexador, você precisa implementar o seguinte:</span><span class="sxs-lookup"><span data-stu-id="dbabf-125">To implement indexer-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="dbabf-126">Um mecanismo para monitorar alterações no armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="dbabf-126">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="dbabf-127">Uma estrutura de dados para enfileirar informações (várias estruturas de [**\_ \_ \_ alteração persistentes de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) ) sobre essas alterações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-127">A data structure to queue up information (multiple [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures) about those changes.</span></span>
-   <span data-ttu-id="dbabf-128">Interface [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) para enviar suas notificações para o indexador e obter confirmações de notificação do indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-128">[**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="dbabf-129">Fila de notificações</span><span class="sxs-lookup"><span data-stu-id="dbabf-129">Notifications Queue</span></span>

<span data-ttu-id="dbabf-130">Você precisa monitorar e enfileirar todas as alterações em seu armazenamento de dados para enviar ao indexador como uma notificação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-130">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="dbabf-131">Quantas notificações você coloca na fila e com que frequência elas são enviadas ao indexador depende de sua circunstância.</span><span class="sxs-lookup"><span data-stu-id="dbabf-131">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="dbabf-132">Talvez você envie um lote de notificações para cada *n* números de alterações ou após um intervalo de tempo *t* ou uma combinação dos dois.</span><span class="sxs-lookup"><span data-stu-id="dbabf-132">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="dbabf-133">O indexador espera que as notificações sejam fornecidas em uma matriz de estruturas de [**\_ \_ \_ alteração persistentes de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) , portanto, você pode optar por implementar sua fila da mesma forma.</span><span class="sxs-lookup"><span data-stu-id="dbabf-133">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures, so you may choose to implement your queue similarly.</span></span>

### <a name="isearchpersistentitemschangedsink"></a><span data-ttu-id="dbabf-134">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="dbabf-134">ISearchPersistentItemsChangedSink</span></span>

<span data-ttu-id="dbabf-135">Para acessar essa interface, primeiro você cria uma instância de um objeto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) para obter acesso a um objeto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="dbabf-135">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="dbabf-136">A partir desse objeto **ISearchCatalogManager** , você cria uma instância de um objeto [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) e notifica o indexador das alterações de dados com uma chamada para o método **onitems** .</span><span class="sxs-lookup"><span data-stu-id="dbabf-136">From that **ISearchCatalogManager** object, you instantiate an [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="dbabf-137">Na chamada para esse método, você inclui o número de alterações que estão sendo relatadas e uma matriz de estruturas de [**\_ \_ \_ alteração persistente de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) .</span><span class="sxs-lookup"><span data-stu-id="dbabf-137">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures.</span></span> <span data-ttu-id="dbabf-138">Você obtém novamente uma matriz de códigos de conclusão de RH que indicam se cada URL foi aceita para indexação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-138">You get back an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="dbabf-139">Essa é a sua confirmação do indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-139">This is your acknowledgement from the indexer.</span></span>

## <a name="implementing-provider-managed-notifications"></a><span data-ttu-id="dbabf-140">Implementando notificações gerenciadas pelo provedor</span><span class="sxs-lookup"><span data-stu-id="dbabf-140">Implementing Provider-managed Notifications</span></span>

<span data-ttu-id="dbabf-141">As notificações gerenciadas pelo provedor permitem que você controle o acesso ao seu armazenamento de dados e monitore o progresso do indexador à medida que ele atualiza o catálogo do Windows Search.</span><span class="sxs-lookup"><span data-stu-id="dbabf-141">Provider-managed notifications enable you to control access to your data store and to monitor the progress of the indexer as it updates the Windows Search catalog.</span></span> <span data-ttu-id="dbabf-142">Seu provedor deve monitorar as alterações no armazenamento de dados e criar uma fila de notificações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-142">Your provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="dbabf-143">Periodicamente, seu provedor envia um lote de notificações de alteração para o indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-143">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="dbabf-144">Quando o indexador recebe suas notificações, ele retorna uma confirmação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-144">When the indexer receives your notifications, it returns an acknowledgement.</span></span> <span data-ttu-id="dbabf-145">Se, após um período de tempo, você não receber uma confirmação, poderá enviar novamente as notificações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-145">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="dbabf-146">Como o indexador rastreia o armazenamento de dados e atualiza o catálogo de pesquisa do Windows, ele notifica seu provedor sobre cada atualização de catálogo e você pode remover os itens da sua fila.</span><span class="sxs-lookup"><span data-stu-id="dbabf-146">As the indexer crawls the data store and updates the Windows Search catalog, it notifies your provider of each catalog update and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="dbabf-147">Seu provedor mantém sua fila de notificação em todo esse processo para que, em caso de falha, você possa reenviar notificações para o indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-147">Your provider maintains its notification queue throughout this process so that in case of failure, you can resend notifications to the indexer.</span></span>

<span data-ttu-id="dbabf-148">Para implementar notificações gerenciadas pelo provedor, você precisa implementar o seguinte:</span><span class="sxs-lookup"><span data-stu-id="dbabf-148">To implement provider-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="dbabf-149">Um mecanismo para monitorar alterações no armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="dbabf-149">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="dbabf-150">Uma estrutura de dados para colocar informações em fila (várias estruturas de [**\_ \_ alteração de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) ) sobre essas alterações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-150">A data structure to queue up information (multiple [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures) about those changes.</span></span>
-   <span data-ttu-id="dbabf-151">Interface [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) para enviar suas notificações para o indexador e obter confirmações de notificação do indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-151">[**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>
-   <span data-ttu-id="dbabf-152">Interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) para receber atualizações sobre o status da indexação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-152">[**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface to receive updates about the status of indexing.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="dbabf-153">Fila de notificações</span><span class="sxs-lookup"><span data-stu-id="dbabf-153">Notifications Queue</span></span>

<span data-ttu-id="dbabf-154">Você precisa monitorar e enfileirar todas as alterações em seu armazenamento de dados para enviar ao indexador como uma notificação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-154">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="dbabf-155">Quantas notificações você coloca na fila e com que frequência elas são enviadas ao indexador depende de sua circunstância.</span><span class="sxs-lookup"><span data-stu-id="dbabf-155">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="dbabf-156">Talvez você envie um lote de notificações para cada *n* números de alterações ou após um intervalo de tempo *t* ou uma combinação dos dois.</span><span class="sxs-lookup"><span data-stu-id="dbabf-156">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="dbabf-157">O indexador espera que as notificações sejam fornecidas em uma matriz de estruturas de [**\_ \_ alteração de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) , portanto, você pode optar por armazenar as informações de alteração de forma semelhante.</span><span class="sxs-lookup"><span data-stu-id="dbabf-157">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures, so you may choose to store change information similarly.</span></span> <span data-ttu-id="dbabf-158">No entanto, você também precisa ser capaz de corresponder as notificações enviadas com as confirmações e as atualizações retornadas pelo indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-158">However, you also need to be able to match the notifications you send with the acknowledgements and updates returned by the indexer.</span></span> <span data-ttu-id="dbabf-159">Talvez você também queira ser capaz de detectar quanto tempo leva para receber confirmações, para que você possa decidir se/quando reenviar notificações.</span><span class="sxs-lookup"><span data-stu-id="dbabf-159">You may also want to be able to detect how long it takes to get acknowledgements, so you can decide if/when to resend notifications.</span></span>

### <a name="isearchitemschangedsink"></a><span data-ttu-id="dbabf-160">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="dbabf-160">ISearchItemsChangedSink</span></span>

<span data-ttu-id="dbabf-161">Para acessar essa interface, primeiro você cria uma instância de um objeto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) para obter acesso a um objeto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="dbabf-161">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="dbabf-162">A partir desse objeto **ISearchCatalogManager** , você cria uma instância de um objeto [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) e notifica o indexador das alterações de dados com uma chamada para o método **onitems** .</span><span class="sxs-lookup"><span data-stu-id="dbabf-162">From that **ISearchCatalogManager** object, you instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="dbabf-163">Na chamada para esse método, você inclui o número de alterações que estão sendo relatadas e uma matriz de estruturas de [**\_ \_ alteração de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) .</span><span class="sxs-lookup"><span data-stu-id="dbabf-163">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures.</span></span> <span data-ttu-id="dbabf-164">Você obtém de volta uma matriz de DocIds atribuídos ao indexador que representam cada alteração, bem como uma matriz de códigos de conclusão de RH que indica se cada URL foi aceita para indexação.</span><span class="sxs-lookup"><span data-stu-id="dbabf-164">You get back an array of indexer-assigned DocIds that represent each change as well as an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="dbabf-165">Essa é sua confirmação do indexador de que recebeu suas notificações e está se preparando para indexar os itens.</span><span class="sxs-lookup"><span data-stu-id="dbabf-165">This is your acknowledgement from the indexer that it has received your notifications and is preparing to index the items.</span></span>

<span data-ttu-id="dbabf-166">Desse ponto em diante, o indexador envia atualizações usando a interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) .</span><span class="sxs-lookup"><span data-stu-id="dbabf-166">From that point forward the indexer sends updates using the [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface.</span></span>

### <a name="isearchnotifyinlinesite"></a><span data-ttu-id="dbabf-167">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="dbabf-167">ISearchNotifyInlineSite</span></span>

<span data-ttu-id="dbabf-168">Para obter atualizações sobre o status de seus itens e do catálogo, você deve registrar sua interface [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) com o indexador para que ele possa enviar retornos de chamada.</span><span class="sxs-lookup"><span data-stu-id="dbabf-168">In order to get updates about the status of both your items and the catalog, you must register your [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface with the indexer so it can send you callbacks.</span></span> <span data-ttu-id="dbabf-169">Cada atualização enviada usando [**ISearchNotifyInlineSite:: OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifica os itens por DocId, o status de cada item ([**\_ status de \_ indexação \_ de item de pesquisa**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) e a fase de indexação ([**\_ \_ fase de indexação de pesquisa**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) em que os itens estão.</span><span class="sxs-lookup"><span data-stu-id="dbabf-169">Each update sent using [**ISearchNotifyInlineSite::OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifies the items by DocId, the status of each item ([**SEARCH\_ITEM\_INDEXING\_STATUS**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) and the indexing phase ([**SEARCH\_INDEXING\_PHASE**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) the items are in.</span></span>

<span data-ttu-id="dbabf-170">Você não só recebe atualizações sobre o status de cada item, conforme descrito anteriormente, você também obtém informações importantes sobre o status do próprio catálogo.</span><span class="sxs-lookup"><span data-stu-id="dbabf-170">Not only do you receive updates on the status of each item, as described earlier, you also get important information about the status of the catalog itself.</span></span> <span data-ttu-id="dbabf-171">O serviço de pesquisa do Windows pode ser interrompido ou reiniciado pelo usuário final, por um aplicativo de terceiros ou por alguma outra falha.</span><span class="sxs-lookup"><span data-stu-id="dbabf-171">The Windows Search service can be interrupted or restarted by the end user, a third party application, or some other failure.</span></span> <span data-ttu-id="dbabf-172">Quando isso acontece, você precisa de uma maneira de determinar quais notificações enviar por push para o indexador.</span><span class="sxs-lookup"><span data-stu-id="dbabf-172">When this happens, you need a way to determine what notifications to repush to the indexer.</span></span>

<span data-ttu-id="dbabf-173">O método [**ISearchNotifyInlineSite:: OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) , chamado pelo serviço de pesquisa do Windows, informa os clientes sobre o status do catálogo usando os parâmetros descritos na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="dbabf-173">The [**ISearchNotifyInlineSite::OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) method, called by the Windows Search service, informs clients about the status of the catalog using the parameters described in the following table.</span></span>



| <span data-ttu-id="dbabf-174">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="dbabf-174">Parameter</span></span>                 | <span data-ttu-id="dbabf-175">Descrição</span><span class="sxs-lookup"><span data-stu-id="dbabf-175">Description</span></span>                                                                                                                                           |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="dbabf-176">guidCatalogResetSignature</span><span class="sxs-lookup"><span data-stu-id="dbabf-176">guidCatalogResetSignature</span></span> | <span data-ttu-id="dbabf-177">Um GUID que representa a redefinição do catálogo.</span><span class="sxs-lookup"><span data-stu-id="dbabf-177">A GUID representing the catalog reset.</span></span> <span data-ttu-id="dbabf-178">Se esse GUID for alterado, todas as notificações deverão ser reenviadas.</span><span class="sxs-lookup"><span data-stu-id="dbabf-178">If this GUID changes, all notifications must be resent.</span></span>                                                        |
| <span data-ttu-id="dbabf-179">guidCheckPointSignature</span><span class="sxs-lookup"><span data-stu-id="dbabf-179">guidCheckPointSignature</span></span>   | <span data-ttu-id="dbabf-180">Um GUID que representa o último ponto de verificação restaurado.</span><span class="sxs-lookup"><span data-stu-id="dbabf-180">A GUID representing the last checkpoint restored.</span></span> <span data-ttu-id="dbabf-181">Se esse GUID for alterado, todas as notificações acumuladas desde o último ponto de verificação salvo deverão ser reenviadas.</span><span class="sxs-lookup"><span data-stu-id="dbabf-181">If this GUID changes, all notifications accumulated since the last saved checkpoint must be resent.</span></span> |
| <span data-ttu-id="dbabf-182">dwLastCheckPointNumber</span><span class="sxs-lookup"><span data-stu-id="dbabf-182">dwLastCheckPointNumber</span></span>    | <span data-ttu-id="dbabf-183">Um número que indica o último ponto de verificação salvo.</span><span class="sxs-lookup"><span data-stu-id="dbabf-183">A number indicating the last checkpoint saved.</span></span>                                                                                                        |



 

 

<span data-ttu-id="dbabf-184">Quando ocorre um ponto de verificação de catálogo, o serviço de pesquisa atualiza o *dwLastCheckPointNumber* e todas as notificações enviadas antes desse ponto de verificação são seguras e recuperáveis no caso de uma falha de serviço.</span><span class="sxs-lookup"><span data-stu-id="dbabf-184">When a catalog checkpoint occurs, the search service updates the *dwLastCheckPointNumber*, and all notifications sent prior to that checkpoint are safe and recoverable in the event of a service failure.</span></span> <span data-ttu-id="dbabf-185">Os provedores de notificações precisam rastrear apenas as notificações enviadas entre pontos de verificação e reenviar em caso de uma restauração ou redefinição de catálogo.</span><span class="sxs-lookup"><span data-stu-id="dbabf-185">Notifications providers need to track only those notifications sent between checkpoints and repush in case of a catalog restore or reset.</span></span>

<span data-ttu-id="dbabf-186">Se ocorrer uma restauração do catálogo, o serviço de pesquisa reverterá o catálogo para o último ponto de verificação salvo e atualizará o *guidCheckPointSignature*.</span><span class="sxs-lookup"><span data-stu-id="dbabf-186">If a catalog restore occurs, the search service rolls back the catalog to the last saved checkpoint and updates the *guidCheckPointSignature*.</span></span> <span data-ttu-id="dbabf-187">Nessa situação, os provedores de notificações devem enviar por push todas as notificações acumuladas desde o ponto de verificação salvo mais recente, conforme identificado pelo *dwLastCheckPointNumber*.</span><span class="sxs-lookup"><span data-stu-id="dbabf-187">In this situation, notifications providers must repush all notifications accumulated since the most recent saved checkpoint as identified by the *dwLastCheckPointNumber*.</span></span>

<span data-ttu-id="dbabf-188">Se uma redefinição de catálogo deve ocorrer, o serviço de pesquisa redefine todo o catálogo e atualiza o *guidCatalogResetSignature*.</span><span class="sxs-lookup"><span data-stu-id="dbabf-188">If a catalog reset should occur, the search service resets the entire catalog and updates the *guidCatalogResetSignature*.</span></span> <span data-ttu-id="dbabf-189">O provedor de notificações deve reenviar todo o escopo do rastreamento novamente.</span><span class="sxs-lookup"><span data-stu-id="dbabf-189">Notifications provider must repush its entire crawl scope again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="dbabf-190">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="dbabf-190">Additional Resources</span></span>

-   <span data-ttu-id="dbabf-191">Para obter uma visão geral do processo de indexação, consulte [o processo de indexação](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="dbabf-191">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span>
-   <span data-ttu-id="dbabf-192">Para obter visões gerais do Gerenciador de catálogo e do CSM (Gerenciador de pesquisa de catálogo), consulte [usando o Gerenciador de catálogo](-search-3x-wds-mngidx-catalog-manager.md) e [usando o Gerenciador de escopo de rastreamento](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="dbabf-192">For overviews of the Catalog Manager and Catalog Search Manager (CSM), see [Using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>
-   <span data-ttu-id="dbabf-193">Para obter informações sobre como criar um armazenamento de dados do Shell, consulte [implementando as interfaces de objeto de pasta básica](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="dbabf-193">For information about creating a Shell data store, see [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="dbabf-194">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="dbabf-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="dbabf-195">**Conceitua**</span><span class="sxs-lookup"><span data-stu-id="dbabf-195">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="dbabf-196">Desenvolvendo manipuladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-196">Developing Protocol Handlers</span></span>](-search-3x-wds-phaddins.md)
</dt> <dt>

[<span data-ttu-id="dbabf-197">Noções básicas sobre manipuladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-197">Understanding Protocol Handlers</span></span>](-search-3x-wds-extidx-prot-implementing.md)
</dt> <dt>

[<span data-ttu-id="dbabf-198">Adicionando ícones e menus de contexto</span><span class="sxs-lookup"><span data-stu-id="dbabf-198">Adding Icons and Context Menus</span></span>](-search-3x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="dbabf-199">Exemplo de código: extensões de Shell para manipuladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-199">Code Sample: Shell Extensions for Protocol Handlers</span></span>](-search-3x-wds-ph-ui-samplecode.md)
</dt> <dt>

[<span data-ttu-id="dbabf-200">Instalando e Registrando manipuladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-200">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="dbabf-201">Criando um conector de pesquisa para um manipulador de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-201">Creating a Search Connector for a Protocol Handler</span></span>](-search-3x-wds-ph-search-connector.md)
</dt> <dt>

[<span data-ttu-id="dbabf-202">Depuração de manipuladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="dbabf-202">Debugging Protocol Handlers</span></span>](-search-ws-protocolhandlertesting.md)
</dt> </dl>

 

 
