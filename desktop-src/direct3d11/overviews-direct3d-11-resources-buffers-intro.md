---
title: Introdução aos buffers no Direct3D 11
description: Um recurso de buffer é uma coleção de dados completamente tipados, agrupados em elementos.
ms.assetid: e33ca01e-f13c-4f91-b0db-2b2bc6b4fd8f
keywords:
- buffer de constantes, o que é
- buffer de vértice, o que é
- buffer de índice, o que é
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 241ade0721ae87b1371586bc901ee18f8975b53f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104294165"
---
# <a name="introduction-to-buffers-in-direct3d-11"></a><span data-ttu-id="7dab0-106">Introdução aos buffers no Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="7dab0-106">Introduction to Buffers in Direct3D 11</span></span>

<span data-ttu-id="7dab0-107">Um recurso de buffer é uma coleção de dados completamente tipados, agrupados em elementos.</span><span class="sxs-lookup"><span data-stu-id="7dab0-107">A buffer resource is a collection of fully typed data grouped into elements.</span></span> <span data-ttu-id="7dab0-108">É possível usar buffers para armazenar uma ampla variedade de dados, incluindo vetores de posição, vetores normais, coordenadas de textura em um buffer de vértice, índices em um buffer de índice ou estado do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7dab0-108">You can use buffers to store a wide variety of data, including position vectors, normal vectors, texture coordinates in a vertex buffer, indexes in an index buffer, or device state.</span></span> <span data-ttu-id="7dab0-109">Um elemento de buffer é composto de 1 a 4 componentes.</span><span class="sxs-lookup"><span data-stu-id="7dab0-109">A buffer element is made up of 1 to 4 components.</span></span> <span data-ttu-id="7dab0-110">Elementos de buffer podem incluir valores de dados de pacote (como valores de superfície R8G8B8A8), inteiros de 8 bits únicos ou quatro valores de ponto flutuante de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="7dab0-110">Buffer elements can include packed data values (like R8G8B8A8 surface values), single 8-bit integers, or four 32-bit floating point values.</span></span>

<span data-ttu-id="7dab0-111">Um buffer é criado como um recurso não estruturado.</span><span class="sxs-lookup"><span data-stu-id="7dab0-111">A buffer is created as an unstructured resource.</span></span> <span data-ttu-id="7dab0-112">Como ele não é estruturado, um buffer não pode conter níveis de mipmap, não pode ser filtrado quando lido e não pode conter várias amostras.</span><span class="sxs-lookup"><span data-stu-id="7dab0-112">Because it is unstructured, a buffer cannot contain any mipmap levels, it cannot get filtered when read, and it cannot be multisampled.</span></span>

## <a name="buffer-types"></a><span data-ttu-id="7dab0-113">Tipos de buffer</span><span class="sxs-lookup"><span data-stu-id="7dab0-113">Buffer Types</span></span>

<span data-ttu-id="7dab0-114">Os tipos de recursos de buffer seguintes são compatíveis com Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="7dab0-114">The following are the buffer resource types supported by Direct3D 11.</span></span> <span data-ttu-id="7dab0-115">Todos os tipos de buffer são encapsulados pela interface [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) .</span><span class="sxs-lookup"><span data-stu-id="7dab0-115">All buffer types are encapsulated by the [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) interface.</span></span>

-   [<span data-ttu-id="7dab0-116">Buffer de vértice</span><span class="sxs-lookup"><span data-stu-id="7dab0-116">Vertex Buffer</span></span>](#vertex-buffer)
-   [<span data-ttu-id="7dab0-117">Buffer de índice</span><span class="sxs-lookup"><span data-stu-id="7dab0-117">Index Buffer</span></span>](#index-buffer)
-   [<span data-ttu-id="7dab0-118">Buffer de constantes</span><span class="sxs-lookup"><span data-stu-id="7dab0-118">Constant Buffer</span></span>](#constant-buffer)

### <a name="vertex-buffer"></a><span data-ttu-id="7dab0-119">Buffer de vértice</span><span class="sxs-lookup"><span data-stu-id="7dab0-119">Vertex Buffer</span></span>

<span data-ttu-id="7dab0-120">Um buffer de vértice contém os dados de vértice usados para definir sua geometria.</span><span class="sxs-lookup"><span data-stu-id="7dab0-120">A vertex buffer contains the vertex data used to define your geometry.</span></span> <span data-ttu-id="7dab0-121">Dados de vértice incluem coordenadas de posição, dados de cor, dados de coordenadas de textura, dados normais e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="7dab0-121">Vertex data includes position coordinates, color data, texture coordinate data, normal data, and so on.</span></span>

<span data-ttu-id="7dab0-122">O exemplo mais simples de um buffer de vértice é aquele que contém apenas dados de posição.</span><span class="sxs-lookup"><span data-stu-id="7dab0-122">The simplest example of a vertex buffer is one that only contains position data.</span></span> <span data-ttu-id="7dab0-123">Ele pode ser visualizado como na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="7dab0-123">It can be visualized like the following illustration.</span></span>

![ilustração de um buffer de vértices que contém dados de posição](images/d3d10-resources-single-element-vb2.png)

<span data-ttu-id="7dab0-125">Com mais frequência, um buffer de vértices contém todos os dados necessários para especificar totalmente vértices 3D.</span><span class="sxs-lookup"><span data-stu-id="7dab0-125">More often, a vertex buffer contains all the data needed to fully specify 3D vertices.</span></span> <span data-ttu-id="7dab0-126">Um exemplo disso pode ser um buffer de vértices que contém coordenadas de posição, normais e de textura por vértice.</span><span class="sxs-lookup"><span data-stu-id="7dab0-126">An example of this could be a vertex buffer that contains per-vertex position, normal and texture coordinates.</span></span> <span data-ttu-id="7dab0-127">Esses dados geralmente são organizados como conjuntos de elementos por vértice, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="7dab0-127">This data is usually organized as sets of per-vertex elements, as shown in the following illustration.</span></span>

![ilustração de um buffer de vértices que contém dados de posição, normais e de textura](images/d3d10-vertex-buffer-element.png)

<span data-ttu-id="7dab0-129">Esse buffer de vértice contém dados por vértice; cada vértice armazena três elementos (posição, normal e coordenadas de textura).</span><span class="sxs-lookup"><span data-stu-id="7dab0-129">This vertex buffer contains per-vertex data; each vertex stores three elements (position, normal, and texture coordinates).</span></span> <span data-ttu-id="7dab0-130">A posição e o normal são cada um normalmente especificado usando floats de 3 32 bits ( \_ float do formato dxgi \_ R32G32B32 \_ ) e as coordenadas de textura usando floats de 2 32 bits ( \_ formato dxgi \_ R32G32 \_ float).</span><span class="sxs-lookup"><span data-stu-id="7dab0-130">The position and normal are each typically specified using three 32-bit floats (DXGI\_FORMAT\_R32G32B32\_FLOAT) and the texture coordinates using two 32-bit floats (DXGI\_FORMAT\_R32G32\_FLOAT).</span></span>

<span data-ttu-id="7dab0-131">Para acessar os dados em um buffer de vértice, você precisa saber qual vértice acessar, além dos seguintes parâmetros de buffer adicionais:</span><span class="sxs-lookup"><span data-stu-id="7dab0-131">To access data from a vertex buffer you need to know which vertex to access, plus the following additional buffer parameters:</span></span>

-   <span data-ttu-id="7dab0-132">Deslocamento -o número de bytes desde o início do buffer para os dados para o primeiro vértice.</span><span class="sxs-lookup"><span data-stu-id="7dab0-132">Offset - the number of bytes from the start of the buffer to the data for the first vertex.</span></span> <span data-ttu-id="7dab0-133">Você pode especificar o deslocamento usando o método [**ID3D11DeviceContext:: IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) .</span><span class="sxs-lookup"><span data-stu-id="7dab0-133">You can specify the offset using the [**ID3D11DeviceContext::IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) method.</span></span>
-   <span data-ttu-id="7dab0-134">BaseVertexLocation -o número de bytes do deslocamento até o primeiro vértice usado pela chamada de desenho apropriada.</span><span class="sxs-lookup"><span data-stu-id="7dab0-134">BaseVertexLocation - the number of bytes from the offset to the first vertex used by the appropriate draw call.</span></span>

<span data-ttu-id="7dab0-135">Antes de criar um buffer de vértice, você precisa definir seu layout criando uma interface [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) ; Isso é feito chamando o método [**ID3D11Device:: CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) .</span><span class="sxs-lookup"><span data-stu-id="7dab0-135">Before you create a vertex buffer, you need to define its layout by creating an [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) interface; this is done by calling the [**ID3D11Device::CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) method.</span></span> <span data-ttu-id="7dab0-136">Depois que o objeto de layout de entrada é criado, você pode associá-lo ao estágio de Assembler de entrada chamando o [**ID3D11DeviceContext:: IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span><span class="sxs-lookup"><span data-stu-id="7dab0-136">After the input-layout object is created, you can bind it to the input-assembler stage by calling the [**ID3D11DeviceContext::IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span></span>

<span data-ttu-id="7dab0-137">Para criar um buffer de vértice, chame [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="7dab0-137">To create a vertex buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="index-buffer"></a><span data-ttu-id="7dab0-138">Buffer de índice</span><span class="sxs-lookup"><span data-stu-id="7dab0-138">Index Buffer</span></span>

<span data-ttu-id="7dab0-139">Buffers de índice contêm deslocamentos de inteiros em buffers de vértice e são usados para renderizar primitivas de forma mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="7dab0-139">Index buffers contain integer offsets into vertex buffers and are used to render primitives more efficiently.</span></span> <span data-ttu-id="7dab0-140">Um buffer de índice contém um conjunto sequencial de índices de 16 ou 32 bits; cada índice é usado para identificar um vértice em um buffer de vértices.</span><span class="sxs-lookup"><span data-stu-id="7dab0-140">An index buffer contains a sequential set of 16-bit or 32-bit indices; each index is used to identify a vertex in a vertex buffer.</span></span> <span data-ttu-id="7dab0-141">Um buffer de índice pode ser visualizado como na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="7dab0-141">An index buffer can be visualized like the following illustration.</span></span>

![ilustração de um buffer de índice](images/d3d10-index-buffer.png)

<span data-ttu-id="7dab0-143">Os índices sequenciais armazenados em um buffer de índice estão localizados com os seguintes parâmetros:</span><span class="sxs-lookup"><span data-stu-id="7dab0-143">The sequential indices stored in an index buffer are located with the following parameters:</span></span>

-   <span data-ttu-id="7dab0-144">Deslocamento - o número de bytes do endereço base do buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="7dab0-144">Offset - the number of bytes from the base address of the index buffer.</span></span> <span data-ttu-id="7dab0-145">O deslocamento é fornecido para o método [**ID3D11DeviceContext:: IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) .</span><span class="sxs-lookup"><span data-stu-id="7dab0-145">The offset is supplied to the [**ID3D11DeviceContext::IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) method.</span></span>
-   <span data-ttu-id="7dab0-146">StartIndexLocation-especifica o primeiro elemento de buffer de índice do endereço base e o deslocamento fornecido em [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span><span class="sxs-lookup"><span data-stu-id="7dab0-146">StartIndexLocation - specifies the first index buffer element from the base address and the offset provided in [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span></span> <span data-ttu-id="7dab0-147">O local inicial é fornecido para o método [**ID3D11DeviceContext::D rawindexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) ou [**ID3D11DeviceContext::D rawindexedinstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) e representa o primeiro índice a ser renderizado.</span><span class="sxs-lookup"><span data-stu-id="7dab0-147">The start location is supplied to the [**ID3D11DeviceContext::DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) or [**ID3D11DeviceContext::DrawIndexedInstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) method and represents the first index to render.</span></span>
-   <span data-ttu-id="7dab0-148">IndexCount -o número de índices para renderizar.</span><span class="sxs-lookup"><span data-stu-id="7dab0-148">IndexCount - the number of indices to render.</span></span> <span data-ttu-id="7dab0-149">O número é fornecido para o método [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed)</span><span class="sxs-lookup"><span data-stu-id="7dab0-149">The number is supplied to the [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) method</span></span>

<span data-ttu-id="7dab0-150">Início do buffer de índice = endereço base do buffer de índice + deslocamento (bytes) + \* elementos StartIndexLocation (bytes);</span><span class="sxs-lookup"><span data-stu-id="7dab0-150">Start of Index Buffer = Index Buffer Base Address + Offset (bytes) + StartIndexLocation \* ElementSize (bytes);</span></span>

<span data-ttu-id="7dab0-151">Nesse cálculo, ElementSize é o tamanho de cada elemento de buffer de índice, que é dois ou quatro bytes.</span><span class="sxs-lookup"><span data-stu-id="7dab0-151">In this calculation, ElementSize is the size of each index buffer element, which is either two or four bytes.</span></span>

<span data-ttu-id="7dab0-152">Para criar um buffer de índice, chame [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="7dab0-152">To create an index buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="constant-buffer"></a><span data-ttu-id="7dab0-153">Buffer constante</span><span class="sxs-lookup"><span data-stu-id="7dab0-153">Constant Buffer</span></span>

<span data-ttu-id="7dab0-154">Um buffer constante permite que você forneça com eficiência dados constantes do sombreador no pipeline.</span><span class="sxs-lookup"><span data-stu-id="7dab0-154">A constant buffer allows you to efficiently supply shader constants data to the pipeline.</span></span> <span data-ttu-id="7dab0-155">Você pode usar um buffer constante para armazenar os resultados do estágio de fluxo de saída.</span><span class="sxs-lookup"><span data-stu-id="7dab0-155">You can use a constant buffer to store the results of the stream-output stage.</span></span> <span data-ttu-id="7dab0-156">Conceitualmente, um buffer constante parece muito com um buffer de vértice de elemento único, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="7dab0-156">Conceptually, a constant buffer looks just like a single-element vertex buffer, as shown in the following illustration.</span></span>

![ilustração de um buffer constante de sombreador](images/d3d10-shader-resource-buffer.png)

<span data-ttu-id="7dab0-158">Cada elemento armazena uma constante de 1 a 4 componentes determinada pelo formato dos dados armazenados.</span><span class="sxs-lookup"><span data-stu-id="7dab0-158">Each element stores a 1-to-4 component constant, determined by the format of the data stored.</span></span> <span data-ttu-id="7dab0-159">Para criar um buffer de sombreador-constante, chame [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) e especifique o membro de **\_ \_ \_ buffer constante de associação D3D11** do tipo enumerado de [**\_ \_ sinalizador de associação D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) .</span><span class="sxs-lookup"><span data-stu-id="7dab0-159">To create a shader-constant buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) and specify the **D3D11\_BIND\_CONSTANT\_BUFFER** member of the [**D3D11\_BIND\_FLAG**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) enumerated type.</span></span>

<span data-ttu-id="7dab0-160">Um buffer de constantes só pode usar um único sinalizador de ligação (**\_ \_ \_ buffer constante de associação de D3D11**), que não pode ser combinado com nenhum outro sinalizador de ligação.</span><span class="sxs-lookup"><span data-stu-id="7dab0-160">A constant buffer can only use a single bind flag (**D3D11\_BIND\_CONSTANT\_BUFFER**), which cannot be combined with any other bind flag.</span></span> <span data-ttu-id="7dab0-161">Para associar um buffer de sombreador-constante ao pipeline, chame um dos seguintes métodos: [**ID3D11DeviceContext:: GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::P ssetconstantbuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers)ou [**ID3D11DeviceContext:: VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span><span class="sxs-lookup"><span data-stu-id="7dab0-161">To bind a shader-constant buffer to the pipeline, call one of the following methods: [**ID3D11DeviceContext::GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::PSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers), or [**ID3D11DeviceContext::VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span></span>

<span data-ttu-id="7dab0-162">Para ler um buffer de sombreador-constante de um sombreador, use uma função de carga HLSL (por exemplo, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span><span class="sxs-lookup"><span data-stu-id="7dab0-162">To read a shader-constant buffer from a shader, use a HLSL load function (for example, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span></span> <span data-ttu-id="7dab0-163">Cada estágio de sombreador permite até 15 buffers constantes de sombreador; cada buffer pode manter até 4.096 constantes.</span><span class="sxs-lookup"><span data-stu-id="7dab0-163">Each shader stage allows up to 15 shader-constant buffers; each buffer can hold up to 4096 constants.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7dab0-164">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7dab0-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7dab0-165">Buffers</span><span class="sxs-lookup"><span data-stu-id="7dab0-165">Buffers</span></span>](overviews-direct3d-11-resources-buffers.md)
</dt> </dl>

 

 