---
title: Estágios de mosaico
description: O tempo de execução do Direct3D 11 dá suporte a três novos estágios que implementam mosaico, que converte as superfícies de subdivisão de detalhe baixo em primitivos de detalhes mais altos na GPU.
ms.assetid: 4ad2fd3e-6e1a-4326-8469-3198acf931dc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3aacb48ccc2c95ab93ba4f34212e654880d9a369
ms.sourcegitcommit: 4e4f9e7c90d25af0774deec1d44bd49fa9b6daa9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2020
ms.locfileid: "104294569"
---
# <a name="tessellation-stages"></a><span data-ttu-id="3e2e7-103">Estágios de mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-103">Tessellation Stages</span></span>

<span data-ttu-id="3e2e7-104">O tempo de execução do Direct3D 11 dá suporte a três novos estágios que implementam mosaico, que converte as superfícies de subdivisão de detalhe baixo em primitivos de detalhes mais altos na GPU.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-104">The Direct3D 11 runtime supports three new stages that implement tessellation, which converts low-detail subdivision surfaces into higher-detail primitives on the GPU.</span></span> <span data-ttu-id="3e2e7-105">O bloco de mosaico organiza (ou decompõe) as superfícies de ordem superior em estruturas adequadas para renderização.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-105">Tessellation tiles (or breaks up) high-order surfaces into suitable structures for rendering.</span></span>

<span data-ttu-id="3e2e7-106">Implementando o mosaico no hardware, um pipeline gráfico pode avaliar modelos com menos detalhes (contagem inferior de polígonos) e renderizar em maiores detalhes.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-106">By implementing tessellation in hardware, a graphics pipeline can evaluate lower detail (lower polygon count) models and render in higher detail.</span></span> <span data-ttu-id="3e2e7-107">Embora o mosaico de software possa ser feito, o mosaico implementado por hardware pode gerar uma quantidade incrível de detalhes visuais (incluindo suporte para o mapeamento de deslocamento) sem adicionar os detalhes visuais aos tamanhos de modelo e paralisar as taxas de atualização.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-107">While software tessellation can be done, tessellation implemented by hardware can generate an incredible amount of visual detail (including support for displacement mapping) without adding the visual detail to the model sizes and paralyzing refresh rates.</span></span>

-   [<span data-ttu-id="3e2e7-108">Benefícios do mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-108">Tessellation Benefits</span></span>](#tessellation-benefits)
-   [<span data-ttu-id="3e2e7-109">Novos estágios de pipeline</span><span class="sxs-lookup"><span data-stu-id="3e2e7-109">New Pipeline Stages</span></span>](#new-pipeline-stages)
    -   [<span data-ttu-id="3e2e7-110">Estágio envoltória-Shader</span><span class="sxs-lookup"><span data-stu-id="3e2e7-110">Hull-Shader Stage</span></span>](#hull-shader-stage)
    -   [<span data-ttu-id="3e2e7-111">Estágio Tessellator</span><span class="sxs-lookup"><span data-stu-id="3e2e7-111">Tessellator Stage</span></span>](#tessellator-stage)
    -   [<span data-ttu-id="3e2e7-112">Estágio de sombreador de domínio</span><span class="sxs-lookup"><span data-stu-id="3e2e7-112">Domain-Shader Stage</span></span>](#domain-shader-stage)
-   [<span data-ttu-id="3e2e7-113">APIs para inicializar estágios de mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-113">APIs for initializing Tessellation Stages</span></span>](#apis-for-initializing-tessellation-stages)
-   [<span data-ttu-id="3e2e7-114">Como:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-114">How to's:</span></span>](#how-tos)
-   [<span data-ttu-id="3e2e7-115">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="3e2e7-115">Related topics</span></span>](#related-topics)

## <a name="tessellation-benefits"></a><span data-ttu-id="3e2e7-116">Benefícios do mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-116">Tessellation Benefits</span></span>

<span data-ttu-id="3e2e7-117">Mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-117">Tessellation:</span></span>

-   <span data-ttu-id="3e2e7-118">Economiza muita memória e largura de banda, o que permite que um aplicativo processe superfícies detalhadas mais altas de modelos de baixa resolução.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-118">Saves lots of memory and bandwidth, which allows an application to render higher detailed surfaces from low-resolution models.</span></span> <span data-ttu-id="3e2e7-119">A técnica de mosaico implementada no pipeline do Direct3D 11 também dá suporte ao mapeamento de deslocamento, que pode produzir quantidades impressionantes de detalhes da superfície.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-119">The tessellation technique implemented in the Direct3D 11 pipeline also supports displacement mapping, which can produce stunning amounts of surface detail.</span></span>
-   <span data-ttu-id="3e2e7-120">Dá suporte a técnicas de renderização escalonável, como níveis de detalhes contínuos ou de exibição, que podem ser calculados em tempo real.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-120">Supports scalable-rendering techniques, such as continuous or view dependent levels-of-detail which can be calculated on the fly.</span></span>
-   <span data-ttu-id="3e2e7-121">Melhora o desempenho executando computações caras a uma frequência mais baixa (fazendo cálculos em um modelo de detalhes mais baixos).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-121">Improves performance by performing expensive computations at lower frequency (doing calculations on a lower-detail model).</span></span> <span data-ttu-id="3e2e7-122">Isso pode incluir a mesclagem de cálculos usando formas de mesclagem ou destinos que mudam de forma para uma animação mais realista ou cálculos de física para a detecção de colisão ou dinâmica de corpo virtual.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-122">This could include blending calculations using blend shapes or morph targets for realistic animation or physics calculations for collision detection or soft body dynamics.</span></span>

<span data-ttu-id="3e2e7-123">O pipeline do Direct3D 11 implementa o mosaico no hardware, que descarrega o trabalho da CPU para a GPU.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-123">The Direct3D 11 pipeline implements tessellation in hardware, which off-loads the work from the CPU to the GPU.</span></span> <span data-ttu-id="3e2e7-124">Isso pode levar a melhorias de desempenho muito grandes se um aplicativo implementar um grande número de destinos que mudam de forma e/ou modelos de aplicação de capas/deformação mais sofisticados.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-124">This can lead to very large performance improvements if an application implements large numbers of morph targets and/or more sophisticated skinning/deformation models.</span></span> <span data-ttu-id="3e2e7-125">Para acessar os novos recursos de mosaico, você deve aprender sobre alguns estágios de pipeline novos.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-125">To access the new tessellation features, you must learn about some new pipeline stages.</span></span>

## <a name="new-pipeline-stages"></a><span data-ttu-id="3e2e7-126">Novos estágios de pipeline</span><span class="sxs-lookup"><span data-stu-id="3e2e7-126">New Pipeline Stages</span></span>

<span data-ttu-id="3e2e7-127">O mosaico usa a GPU para calcular uma superfície mais detalhada de uma superfície construída a partir de patches de quadrupleto, patches de triângulo ou isolines.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-127">Tessellation uses the GPU to calculate a more detailed surface from a surface constructed from quad patches, triangle patches or isolines.</span></span> <span data-ttu-id="3e2e7-128">Para aproximar a superfície de ordem superior, cada patch é subdividido em triângulos, pontos ou linhas usando fatores de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-128">To approximate the high-ordered surface, each patch is subdivided into triangles, points, or lines using tessellation factors.</span></span> <span data-ttu-id="3e2e7-129">O pipeline do Direct3D 11 implementa o mosaico usando três novos estágios de pipeline:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-129">The Direct3D 11 pipeline implements tessellation using three new pipeline stages:</span></span>

-   <span data-ttu-id="3e2e7-130">[Envoltória-Shader Stage](#hull-shader-stage) – um estágio programável do sombreador que produz um patch Geometry (e constantes de patch) que correspondem a cada patch de entrada (quad, triângulo ou linha).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-130">[Hull-Shader Stage](#hull-shader-stage) - A programmable shader stage that produces a geometry patch (and patch constants) that correspond to each input patch (quad, triangle, or line).</span></span>
-   <span data-ttu-id="3e2e7-131">[Estágio Tessellator](#tessellator-stage) – um estágio de pipeline de função fixa que cria um padrão de amostragem do domínio que representa o patch Geometry e gera um conjunto de objetos menores (triângulos, pontos ou linhas) que conectam esses exemplos.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-131">[Tessellator Stage](#tessellator-stage) - A fixed function pipeline stage that creates a sampling pattern of the domain that represents the geometry patch and generates a set of smaller objects (triangles, points, or lines) that connect these samples.</span></span>
-   <span data-ttu-id="3e2e7-132">[Estágio de sombreador de domínio](#domain-shader-stage) – um estágio de sombreador programável que calcula a posição do vértice que corresponde a cada exemplo de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-132">[Domain-Shader Stage](#domain-shader-stage) - A programmable shader stage that calculates the vertex position that corresponds to each domain sample.</span></span>

<span data-ttu-id="3e2e7-133">O diagrama a seguir realça os novos estágios do pipeline do Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-133">The following diagram highlights the new stages of the Direct3D 11 pipeline.</span></span>

![diagrama do pipeline do direct3d 11 que destaca os estágios do sombreador de domínio, sombreadores hull e mosaico](images/d3d11-pipeline-stages-tessellation.png)

<span data-ttu-id="3e2e7-135">O diagrama a seguir mostra o progresso por meio dos estágios de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-135">The following diagram shows the progression through the tessellation stages.</span></span> <span data-ttu-id="3e2e7-136">A progressão começa com a superfície subdividida em poucos detalhes.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-136">The progression starts with the low-detail subdivision surface.</span></span> <span data-ttu-id="3e2e7-137">A progressão a seguir destaca o patch de entrada com o patch de geometria correspondente, amostras de domínio, e triângulos que conectam essas amostras.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-137">The progression next highlights the input patch with the corresponding geometry patch, domain samples, and triangles that connect these samples.</span></span> <span data-ttu-id="3e2e7-138">Por fim, a progressão destaca os vértices que correspondem a essas amostras.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-138">The progression finally highlights the vertices that correspond to these samples.</span></span>

![diagrama da progressão de mosaico](images/tess-prog.png)

### <a name="hull-shader-stage"></a><span data-ttu-id="3e2e7-140">Estágio de Hull-Shader</span><span class="sxs-lookup"><span data-stu-id="3e2e7-140">Hull-Shader Stage</span></span>

<span data-ttu-id="3e2e7-141">Um sombreador envoltória, que é invocado uma vez por patch, transforma os pontos de controle de entrada que definem uma superfície de ordem inferior em pontos de controle que compõem um patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-141">A hull shader -- which is invoked once per patch -- transforms input control points that define a low-order surface into control points that make up a patch.</span></span> <span data-ttu-id="3e2e7-142">Ele também faz alguns cálculos por patch para fornecer dados para o estágio de mosaico e o estágio de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-142">It also does some per patch calculations to provide data for the tessellation stage and the domain stage.</span></span> <span data-ttu-id="3e2e7-143">No nível mais simples da caixa preta, o estágio envoltória-Shader seria semelhante ao diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-143">At the simplest black-box level, the hull-shader stage would look something like the following diagram.</span></span>

![diagrama da fase de sombreadores hull](images/d3d11-hull-shader.png)

<span data-ttu-id="3e2e7-145">Um sombreador envoltória é implementado com uma função HLSL e tem as seguintes propriedades:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-145">A hull shader is implemented with an HLSL function, and has the following properties:</span></span>

-   <span data-ttu-id="3e2e7-146">A entrada do sombreador está entre 1 e 32 pontos de controle.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-146">The shader input is between 1 and 32 control points.</span></span>
-   <span data-ttu-id="3e2e7-147">A saída do sombreador é entre 1 e 32 pontos de controle, independentemente do número de fatores de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-147">The shader output is between 1 and 32 control points, regardless of the number of tessellation factors.</span></span> <span data-ttu-id="3e2e7-148">Os pontos de controle de saída de um sombreador hull podem ser consumidos pelo estágio do sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-148">The control-points output from a hull shader can be consumed by the domain-shader stage.</span></span> <span data-ttu-id="3e2e7-149">Os dados constantes de patch podem ser consumidos por um sombreador de domínio; fatores de mosaico podem ser consumidos pelo sombreador de domínio e pelo estágio de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-149">Patch constant data can be consumed by a domain shader; tessellation factors can be consumed by the domain shader and the tessellation stage.</span></span>
-   <span data-ttu-id="3e2e7-150">Os fatores de mosaico determinam quanto subdividir cada patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-150">Tessellation factors determine how much to subdivide each patch.</span></span>
-   <span data-ttu-id="3e2e7-151">O sombreador declara o estado exigido pelo estágio Tessellator.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-151">The shader declares the state required by the tessellator stage.</span></span> <span data-ttu-id="3e2e7-152">Isso inclui informações como o número de pontos de controle, o tipo da face do patch e o tipo de particionamento a ser usado durante a criação do mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-152">This includes information such as the number of control points, the type of patch face and the type of partitioning to use when tessellating.</span></span> <span data-ttu-id="3e2e7-153">Essas informações são exibidas como declarações normalmente na frente do código do sombreador.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-153">This information appears as declarations typically at the front of the shader code.</span></span>
-   <span data-ttu-id="3e2e7-154">Se o estágio envoltória-Shader definir qualquer fator de mosaico de borda como = 0 ou NaN, o patch será acrescentado.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-154">If the hull-shader stage sets any edge tessellation factor to = 0 or NaN, the patch will be culled.</span></span> <span data-ttu-id="3e2e7-155">Como resultado, o estágio de mosaico pode ou não ser executado, o sombreador de domínio não será executado e nenhuma saída visível será produzida para esse patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-155">As a result, the tessellator stage may or may not run, the domain shader will not run, and no visible output will be produced for that patch.</span></span>

<span data-ttu-id="3e2e7-156">Em um nível mais profundo, um envoltória-Shader realmente opera em duas fases: uma fase de ponto de controle e uma fase de constante de patch, que são executados em paralelo pelo hardware.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-156">At a deeper level, a hull-shader actually operates in two phases: a control-point phase and a patch-constant phase, which are run in parallel by the hardware.</span></span> <span data-ttu-id="3e2e7-157">O compilador HLSL extrai o paralelismo em um sombreador hull e o codifica em código de bytes que orienta o hardware.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-157">The HLSL compiler extracts the parallelism in a hull shader and encodes it into bytecode that drives the hardware.</span></span>

-   <span data-ttu-id="3e2e7-158">A fase de ponto de controle opera uma vez para cada ponto de controle, lendo os pontos de controle para um patch e gerando um ponto de controle de saída (identificado por um ControlPointID).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-158">The control-point phase operates once for each control-point, reading the control points for a patch, and generating one output control point (identified by a ControlPointID).</span></span>
-   <span data-ttu-id="3e2e7-159">A fase de patch constante opera uma vez por patch para gerar fatores de mosaico de borda e outras constantes por patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-159">The patch-constant phase operates once per patch to generate edge tessellation factors and other per-patch constants.</span></span> <span data-ttu-id="3e2e7-160">Internamente, muitas fases de constante de patch podem ser executadas ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-160">Internally, many patch-constant phases may run at the same time.</span></span> <span data-ttu-id="3e2e7-161">A fase de patch constante tem acesso somente leitura a todos os pontos de controle de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-161">The patch-constant phase has read-only access to all input and output control points.</span></span>

<span data-ttu-id="3e2e7-162">Aqui está um exemplo de um sombreador envoltória:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-162">Here's an example of a hull shader:</span></span>


```
[patchsize(12)]
[patchconstantfunc(MyPatchConstantFunc)]
MyOutPoint main(uint Id : SV_ControlPointID,
     InputPatch<MyInPoint, 12> InPts)
{
     MyOutPoint result;
     
     ...
     
     result = TransformControlPoint( InPts[Id] );

     return result;
}
```



<span data-ttu-id="3e2e7-163">Para obter um exemplo que cria um sombreador envoltória, consulte [como: criar um sombreador envoltória](direct3d-11-advanced-stages-hull-shader-create.md).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-163">For an example that creates a hull shader, see [How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md).</span></span>

### <a name="tessellator-stage"></a><span data-ttu-id="3e2e7-164">Estágio Tessellator</span><span class="sxs-lookup"><span data-stu-id="3e2e7-164">Tessellator Stage</span></span>

<span data-ttu-id="3e2e7-165">O Tessellator é um estágio de função fixa inicializado ligando um sombreador envoltória ao pipeline (consulte [como: inicializar o estágio Tessellator](direct3d-11-advanced-stages-tessellator-initialize.md)).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-165">The tessellator is a fixed-function stage initialized by binding a hull shader to the pipeline (see [How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)).</span></span> <span data-ttu-id="3e2e7-166">O objetivo do estágio de mosaico é subdividir um domínio (quad, tri ou linha) em muitos objetos menores (triângulos, pontos ou linhas).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-166">The purpose of the tessellator stage is to subdivide a domain (quad, tri, or line) into many smaller objects (triangles, points or lines).</span></span> <span data-ttu-id="3e2e7-167">O mosaico organiza um domínio canônico em um sistema de coordenadas normalizado (zero-para-um).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-167">The tessellator tiles a canonical domain in a normalized (zero-to-one) coordinate system.</span></span> <span data-ttu-id="3e2e7-168">Por exemplo, um domínio quadrupleto é transformado em um quadrado de unidade.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-168">For example, a quad domain is tessellated to a unit square.</span></span>

<span data-ttu-id="3e2e7-169">O mosaico opera uma vez por patch usando os fatores de mosaico (que especificam o quão delicadamente o domínio será transformado em mosaico) e o tipo de particionamento (que especifica o algoritmo usado para dividir um patch) que são transmitidos do estágio de sombreador hull.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-169">The tessellator operates once per patch using the tessellation factors (which specify how finely the domain will be tessellated) and the type of partitioning (which specifies the algorithm used to slice up a patch) that are passed in from the hull-shader stage.</span></span> <span data-ttu-id="3e2e7-170">O mosaico gera coordenadas uv (e, opcionalmente, w) e a topologia de superfície para o estágio do sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-170">The tessellator outputs uv (and optionally w) coordinates and the surface topology to the domain-shader stage.</span></span>

<span data-ttu-id="3e2e7-171">Internamente, o Tessellator opera em duas fases:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-171">Internally, the tessellator operates in two phases:</span></span>

-   <span data-ttu-id="3e2e7-172">A primeira fase processa os fatores de mosaico, corrigindo problemas de arredondamento, manipulando fatores muito pequenos, reduzindo e combinando fatores, usar aritmética de ponto flutuante de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-172">The first phase processes the tessellation factors, fixing rounding problems, handling very small factors, reducing and combining factors, using 32-bit floating-point arithmetic.</span></span>
-   <span data-ttu-id="3e2e7-173">A segunda fase gera listas de pontos ou topologias com base no tipo de particionamento selecionado.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-173">The second phase generates point or topology lists based on the type of partitioning selected.</span></span> <span data-ttu-id="3e2e7-174">Isso é a tarefa principal do estágio de mosaico e usa frações de 16 bits com aritmética de ponto fixo.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-174">This is the core task of the tessellator stage and uses 16-bit fractions with fixed-point arithmetic.</span></span> <span data-ttu-id="3e2e7-175">A aritmética de ponto fixo permite a aceleração de hardware, mantendo a precisão aceitável.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-175">Fixed-point arithmetic allows hardware acceleration while maintaining acceptable precision.</span></span> <span data-ttu-id="3e2e7-176">Por exemplo, dado um patch com 64 metros de largura, essa precisão pode colocar pontos em uma resolução de 2 mm.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-176">For example, given a 64 meter wide patch, this precision can place points at a 2 mm resolution.</span></span>



| <span data-ttu-id="3e2e7-177">Tipo de particionamento</span><span class="sxs-lookup"><span data-stu-id="3e2e7-177">Type of Partitioning</span></span> | <span data-ttu-id="3e2e7-178">Intervalo</span><span class="sxs-lookup"><span data-stu-id="3e2e7-178">Range</span></span>                       |
|----------------------|-----------------------------|
| <span data-ttu-id="3e2e7-179">ímpar fracionário \_</span><span class="sxs-lookup"><span data-stu-id="3e2e7-179">fractional\_odd</span></span>      | <span data-ttu-id="3e2e7-180">\[1... 63\]</span><span class="sxs-lookup"><span data-stu-id="3e2e7-180">\[1...63\]</span></span>                  |
| <span data-ttu-id="3e2e7-181">fracionário \_ mesmo</span><span class="sxs-lookup"><span data-stu-id="3e2e7-181">fractional\_even</span></span>     | <span data-ttu-id="3e2e7-182">Intervalo de TessFactor: \[ 2.. 64\]</span><span class="sxs-lookup"><span data-stu-id="3e2e7-182">TessFactor range: \[2..64\]</span></span> |
| <span data-ttu-id="3e2e7-183">inteiro</span><span class="sxs-lookup"><span data-stu-id="3e2e7-183">integer</span></span>              | <span data-ttu-id="3e2e7-184">Intervalo de TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="3e2e7-184">TessFactor range: \[1..64\]</span></span> |
| <span data-ttu-id="3e2e7-185">pow2</span><span class="sxs-lookup"><span data-stu-id="3e2e7-185">pow2</span></span>                 | <span data-ttu-id="3e2e7-186">Intervalo de TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="3e2e7-186">TessFactor range: \[1..64\]</span></span> |



 

### <a name="domain-shader-stage"></a><span data-ttu-id="3e2e7-187">Estágio de Domain-Shader</span><span class="sxs-lookup"><span data-stu-id="3e2e7-187">Domain-Shader Stage</span></span>

<span data-ttu-id="3e2e7-188">Um sombreador de domínio calcula a posição de vértice de um ponto de subdivisão no patch de saída.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-188">A domain shader calculates the vertex position of a subdivided point in the output patch.</span></span> <span data-ttu-id="3e2e7-189">Um sombreador de domínio é executado uma vez por ponto de saída de estágio Tessellator e tem acesso somente leitura às coordenadas UV de saída de estágio Tessellator, o patch de saída do sombreador envoltória e as constantes de patch de saída do sombreador envoltória, como mostra o diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-189">A domain shader is run once per tessellator stage output point and has read-only access to the tessellator stage output UV coordinates, the hull shader output patch, and the hull shader output patch constants, as the following diagram shows.</span></span>

![diagrama do estágio do sombreador de domínio](images/d3d11-domain-shader.png)

<span data-ttu-id="3e2e7-191">As propriedades do sombreador de domínio incluem:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-191">Properties of the domain shader include:</span></span>

-   <span data-ttu-id="3e2e7-192">Um sombreador de domínio é invocado uma vez por coordenada de saída do estágio Tessellator.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-192">A domain shader is invoked once per output coordinate from the tessellator stage.</span></span>
-   <span data-ttu-id="3e2e7-193">Um sombreador de domínio consome pontos de controle de saída do estágio envoltória-Shader.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-193">A domain shader consumes output control points from the hull-shader stage.</span></span>
-   <span data-ttu-id="3e2e7-194">Um sombreador de domínio gera a posição de um vértice.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-194">A domain shader outputs the position of a vertex.</span></span>
-   <span data-ttu-id="3e2e7-195">As entradas são as saídas do sombreador envoltória, incluindo pontos de controle, dados constantes de patch e fatores de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-195">Inputs are the hull shader outputs including control points, patch constant data and tessellation factors.</span></span> <span data-ttu-id="3e2e7-196">Os fatores de mosaico podem incluir os valores usados pela função fixa Tessellator, bem como os valores brutos (antes de arredondar por mosaico inteiro, por exemplo), que facilita a sobremetamorfoseação, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-196">The tessellation factors can include the values used by the fixed function tessellator as well as the raw values (before rounding by integer tessellation, for example), which facilitates geomorphing, for example.</span></span>

<span data-ttu-id="3e2e7-197">Depois que o sombreador de domínio for concluído, o mosaico será concluído e os dados do pipeline continuarão no próximo estágio do pipeline (sombreador de geometria, pixel shader, etc.).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-197">After the domain shader completes, tessellation is finished and pipeline data continues to the next pipeline stage (geometry shader, pixel shader etc).</span></span> <span data-ttu-id="3e2e7-198">Um sombreador de geometria que espera primitivos com adjacência (por exemplo, 6 vértices por triângulo) não é válido quando mosaico está ativo (isso resulta em um comportamento indefinido, sobre o qual a camada de depuração emitirá um aviso).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-198">A geometry shader that expects primitives with adjacency (for example, 6 vertices per triangle) is not valid when tessellation is active (this results in undefined behavior, which the debug layer will complain about).</span></span>

<span data-ttu-id="3e2e7-199">Aqui está um exemplo de um sombreador de domínio:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-199">Here is an example of a domain shader:</span></span>


```
void main( out    MyDSOutput result, 
           float2 myInputUV : SV_DomainPoint, 
           MyDSInput DSInputs,
           OutputPatch<MyOutPoint, 12> ControlPts, 
           MyTessFactors tessFactors)
{
     ...

     result.Position = EvaluateSurfaceUV(ControlPoints, myInputUV);
}
```



## <a name="apis-for-initializing-tessellation-stages"></a><span data-ttu-id="3e2e7-200">APIs para inicializar estágios de mosaico</span><span class="sxs-lookup"><span data-stu-id="3e2e7-200">APIs for initializing Tessellation Stages</span></span>

<span data-ttu-id="3e2e7-201">O mosaico é implementado com dois novos estágios programáveis de sombreador: um sombreador envoltória e um sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-201">Tessellation is implemented with two new programmable shader stages: a hull shader and a domain shader.</span></span> <span data-ttu-id="3e2e7-202">Esses novos estágios de sombreador são programados com o código HLSL definido no sombreador modelo 5.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-202">These new shader stages are programmed with HLSL code that is defined in shader model 5.</span></span> <span data-ttu-id="3e2e7-203">Os novos destinos do sombreador são: HS \_ 5 \_ 0 e DS \_ 5 \_ 0.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-203">The new shader targets are: hs\_5\_0 and ds\_5\_0.</span></span> <span data-ttu-id="3e2e7-204">Como todos os estágios programáveis do sombreador, o código para o hardware é extraído dos sombreadores compilados passados para o tempo de execução quando os sombreadores são vinculados ao pipeline usando APIs como [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) e [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-204">Like all programmable shader stages, code for the hardware is extracted from compiled shaders passed into the runtime when shaders are bound to the pipeline using APIs such as [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) and [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span></span> <span data-ttu-id="3e2e7-205">Mas primeiro, o sombreador deve ser criado usando APIs como [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) e [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-205">But first, the shader must be created using APIs such as [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) and [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span></span>

<span data-ttu-id="3e2e7-206">Habilite o mosaico criando um sombreador hull e vinculando-o ao estágio de sombreador hull (isso configura automaticamente o estágio de mosaico).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-206">Enable tessellation by creating a hull shader and binding it to the hull-shader stage (this automatically sets up the tessellator stage).</span></span> <span data-ttu-id="3e2e7-207">Para gerar as posições de vértice final dos patches de mosaico, você também precisará criar um sombreador domínio e associá-lo ao estágio do sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-207">To generate the final vertex positions from the tessellated patches, you will also need to create a domain shader and bind it to the domain-shader stage.</span></span> <span data-ttu-id="3e2e7-208">Quando o mosaico está habilitado, a entrada de dados para o estágio de entrada-Assembler deve ser dados de patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-208">Once tessellation is enabled, the data input to the input-assembler stage must be patch data.</span></span> <span data-ttu-id="3e2e7-209">Ou seja, a topologia do montador de entrada deve ser uma topologia constante de patch do conjunto de [**\_ \_ topologias primitivos D3D11**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) com [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span><span class="sxs-lookup"><span data-stu-id="3e2e7-209">That is, the input assembler topology must be a patch constant topology from [**D3D11\_PRIMITIVE\_TOPOLOGY**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) set with [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span></span>

<span data-ttu-id="3e2e7-210">Para desabilitar o mosaico, defina os sombreadores hull e o sombreador de domínio **NULL**.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-210">To disable tessellation, set the hull shader and the domain shader to **NULL**.</span></span> <span data-ttu-id="3e2e7-211">Nem o estágio Geometry-Shader nem o estágio Stream-output podem ler pontos de controle de saída envoltória-Shader ou dados de patch.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-211">Neither the geometry-shader stage nor the stream-output stage can read hull-shader output-control points or patch data.</span></span>

-   <span data-ttu-id="3e2e7-212">Novas topologias para o estágio de entrada-Assembler, que são extensões para essa enumeração.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-212">New topologies for the input-assembler stage, which are extensions to this enumeration.</span></span>

    ```
    enum D3D11_PRIMITIVE_TOPOLOGY
    ```

    

    <span data-ttu-id="3e2e7-213">A topologia é definida para o estágio de Assembler de entrada usando [ **IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-213">The topology is set to the input-assembler stage using [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span></span>

-   <span data-ttu-id="3e2e7-214">É claro que os novos estágios programáveis do sombreador exigem que outro Estado seja definido, para associar buffers constantes, exemplos e recursos de sombreador aos estágios de pipeline apropriados.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-214">Of course, the new programmable shader stages require other state to be set, to bind constant buffers, samples, and shader resources to the appropriate pipeline stages.</span></span> <span data-ttu-id="3e2e7-215">Esses novos métodos ID3D11Device são implementados para definir esse estado.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-215">These new ID3D11Device methods are implemented for setting this state.</span></span>
    -   [<span data-ttu-id="3e2e7-216">**DSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-216">**DSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetconstantbuffers)
    -   [<span data-ttu-id="3e2e7-217">**DSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-217">**DSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetsamplers)
    -   [<span data-ttu-id="3e2e7-218">**DSGetShader**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-218">**DSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshader)
    -   [<span data-ttu-id="3e2e7-219">**DSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-219">**DSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshaderresources)
    -   [<span data-ttu-id="3e2e7-220">**DSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-220">**DSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetconstantbuffers)
    -   [<span data-ttu-id="3e2e7-221">**DSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-221">**DSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetsamplers)
    -   [<span data-ttu-id="3e2e7-222">**DSSetShader**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-222">**DSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader)
    -   [<span data-ttu-id="3e2e7-223">**DSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-223">**DSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshaderresources)
    -   [<span data-ttu-id="3e2e7-224">**HSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-224">**HSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetconstantbuffers)
    -   [<span data-ttu-id="3e2e7-225">**HSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-225">**HSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshaderresources)
    -   [<span data-ttu-id="3e2e7-226">**HSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-226">**HSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetsamplers)
    -   [<span data-ttu-id="3e2e7-227">**HSGetShader**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-227">**HSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshader)
    -   [<span data-ttu-id="3e2e7-228">**HSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-228">**HSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetconstantbuffers)
    -   [<span data-ttu-id="3e2e7-229">**HSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-229">**HSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetsamplers)
    -   [<span data-ttu-id="3e2e7-230">**HSSetShader**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-230">**HSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader)
    -   [<span data-ttu-id="3e2e7-231">**HSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="3e2e7-231">**HSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshaderresources)

## <a name="how-tos"></a><span data-ttu-id="3e2e7-232">Como:</span><span class="sxs-lookup"><span data-stu-id="3e2e7-232">How to's:</span></span>

<span data-ttu-id="3e2e7-233">A documentação também contém exemplos para inicializar os estágios de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-233">The documentation also contains examples for initializing the tessellation stages.</span></span>



| <span data-ttu-id="3e2e7-234">Item</span><span class="sxs-lookup"><span data-stu-id="3e2e7-234">Item</span></span>                                                                                                                                                                                                                                                                                           | <span data-ttu-id="3e2e7-235">Descrição</span><span class="sxs-lookup"><span data-stu-id="3e2e7-235">Description</span></span>                                   |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| <span data-ttu-id="3e2e7-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[Como: criar um sombreador envoltória](direct3d-11-advanced-stages-hull-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md)</span></span><br/>                                                     | <span data-ttu-id="3e2e7-237">Criar um sombreador envoltória.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-237">Create a hull shader.</span></span><br/>              |
| <span data-ttu-id="3e2e7-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[Como criar um sombreador envoltória](direct3d-11-advanced-stages-hull-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)</span></span><br/>                                                     | <span data-ttu-id="3e2e7-239">Criar um sombreador envoltória.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-239">Design a hull shader.</span></span><br/>              |
| <span data-ttu-id="3e2e7-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[Como inicializar o estágio Tessellator](direct3d-11-advanced-stages-tessellator-initialize.md)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)</span></span><br/> | <span data-ttu-id="3e2e7-241">Inicialize o estágio de mosaico.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-241">Initialize the tessellation stage.</span></span><br/> |
| <span data-ttu-id="3e2e7-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[Como: criar um sombreador de domínio](direct3d-11-advanced-stages-domain-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[How To: Create a Domain Shader](direct3d-11-advanced-stages-domain-shader-create.md)</span></span><br/>                                           | <span data-ttu-id="3e2e7-243">Crie um sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-243">Create a domain shader.</span></span><br/>            |
| <span data-ttu-id="3e2e7-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[Como criar um sombreador de domínio](direct3d-11-advanced-stages-domain-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="3e2e7-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[How To: Design a Domain Shader](direct3d-11-advanced-stages-domain-shader-design.md)</span></span><br/>                                           | <span data-ttu-id="3e2e7-245">Crie um sombreador de domínio.</span><span class="sxs-lookup"><span data-stu-id="3e2e7-245">Create a domain shader.</span></span><br/>            |



 

## <a name="related-topics"></a><span data-ttu-id="3e2e7-246">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="3e2e7-246">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3e2e7-247">Pipeline de gráficos</span><span class="sxs-lookup"><span data-stu-id="3e2e7-247">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> </dl>

 

