---
title: Recursos de amostragem de textura de recursos ao lado
description: Esta seção descreve os recursos de amostragem de textura de recursos com ladrilhos.
ms.assetid: E56737CE-C468-4D3C-84EE-E8EB2AB6F505
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd46c96219e54aea6990e91de8e340fdca5e32b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103641456"
---
# <a name="tiled-resources-texture-sampling-features"></a><span data-ttu-id="c420c-103">Recursos de amostragem de textura de recursos ao lado</span><span class="sxs-lookup"><span data-stu-id="c420c-103">Tiled resources texture sampling features</span></span>

<span data-ttu-id="c420c-104">Esta seção descreve os recursos de amostragem de textura de recursos com ladrilhos.</span><span class="sxs-lookup"><span data-stu-id="c420c-104">This section describes tiled resources texture sampling features.</span></span>

## <a name="requirements-of-tiled-resources-texture-sampling-features"></a><span data-ttu-id="c420c-105">Requisitos de recursos de amostra de textura de características de ladrilho</span><span class="sxs-lookup"><span data-stu-id="c420c-105">Requirements of tiled resources texture sampling features</span></span>

<span data-ttu-id="c420c-106">Os recursos de amostragem de textura descritos aqui exigem o nível da [camada 2](tier-2.md) de suporte a recursos de ladrilhos.</span><span class="sxs-lookup"><span data-stu-id="c420c-106">The texture sampling features described here require [Tier 2](tier-2.md) level of tiled resources support.</span></span>

## <a name="shader-feedback-about-mapped-areas"></a><span data-ttu-id="c420c-107">Comentários do sombreador sobre áreas mapeadas</span><span class="sxs-lookup"><span data-stu-id="c420c-107">Shader feedback about mapped areas</span></span>

<span data-ttu-id="c420c-108">Qualquer instrução de sombreador que lê e/ou grava em um recurso de lado-a-xadrez faz com que as informações de status sejam registradas.</span><span class="sxs-lookup"><span data-stu-id="c420c-108">Any shader instruction that reads and/or writes to a tiled resource causes status information to be recorded.</span></span> <span data-ttu-id="c420c-109">Esse status é exposto como um valor de retorno extra opcional em cada instrução de acesso do recurso que entra em um registro temporário de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="c420c-109">This status is exposed as an optional extra return value on every resource access instruction that goes into a 32-bit temp register.</span></span> <span data-ttu-id="c420c-110">O conteúdo do valor de retorno é opaco.</span><span class="sxs-lookup"><span data-stu-id="c420c-110">The contents of the return value are opaque.</span></span> <span data-ttu-id="c420c-111">Ou seja, leitura direta pelo programa de sombreador não é permitida.</span><span class="sxs-lookup"><span data-stu-id="c420c-111">That is, direct reading by the shader program is disallowed.</span></span> <span data-ttu-id="c420c-112">Mas, você pode usar a função [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) para extrair as informações de status.</span><span class="sxs-lookup"><span data-stu-id="c420c-112">But, you can use the [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function to extract the status info.</span></span>

## <a name="fully-mapped-check"></a><span data-ttu-id="c420c-113">Seleção totalmente mapeada</span><span class="sxs-lookup"><span data-stu-id="c420c-113">Fully mapped check</span></span>

<span data-ttu-id="c420c-114">A função [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) interpreta o status retornado de um acesso de memória e indica se todos os dados que estão sendo acessados foram mapeados no recurso.</span><span class="sxs-lookup"><span data-stu-id="c420c-114">The [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function interprets the status returned from a memory access and indicates whether all data being accessed was mapped in the resource.</span></span> <span data-ttu-id="c420c-115">**CheckAccessFullyMapped** retorna true (0xFFFFFFFF) se os dados foram mapeados ou false (0x00000000) se os dados não foram não mapeados.</span><span class="sxs-lookup"><span data-stu-id="c420c-115">**CheckAccessFullyMapped** returns true (0xFFFFFFFF) if data was mapped or false (0x00000000) if data was unmapped.</span></span>

<span data-ttu-id="c420c-116">Durante as operações de filtragem, às vezes, o peso de um determinado texel acaba sendo 0,0.</span><span class="sxs-lookup"><span data-stu-id="c420c-116">During filter operations, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="c420c-117">Um exemplo é uma amostra linear com coordenadas de textura que se enquadram diretamente em um centro de texel: 3 outros texels (os quais podem variar por hardware) contribuem para o filtro, mas com peso 0.</span><span class="sxs-lookup"><span data-stu-id="c420c-117">An example is a linear sample with texture coordinates that fall directly on a texel center: 3 other texels (which ones they are can vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="c420c-118">Esses texels de peso 0 não contribuem em nada com o resultado do filtro, sendo assim, se eles se encontrarem em blocos **NULL**, eles não serão contados como um acesso não mapeado.</span><span class="sxs-lookup"><span data-stu-id="c420c-118">These 0 weight texels don't contribute to the filter result at all, so if they happen to fall on **NULL** tiles, they don't count as an unmapped access.</span></span> <span data-ttu-id="c420c-119">Observe que a mesma garantia se aplica aos filtros de textura que incluem diversos níveis de mip; se os texels em um dos mipmaps não for mapeado mas o peso desses texels for 0, esses texels não serão contados como acesso não mapeado.</span><span class="sxs-lookup"><span data-stu-id="c420c-119">Note the same guarantee applies for texture filters that include multiple mip levels; if the texels on one of the mipmaps isn't mapped but the weight on those texels is 0, those texels don't count as an unmapped access.</span></span>

<span data-ttu-id="c420c-120">Quando a amostragem é de um formato que tem menos de 4 componentes (como \_ UNORM de R8 de formato dxgi \_ \_ ), qualquer texels que se enquadrar em blocos **nulos** resultará em um acesso mapeado **nulo** que está sendo relatado independentemente de quais componentes o sombreador realmente examina no resultado.</span><span class="sxs-lookup"><span data-stu-id="c420c-120">When sampling from a format that has fewer than 4 components (such as DXGI\_FORMAT\_R8\_UNORM), any texels that fall on **NULL** tiles result in the a **NULL** mapped access being reported regardless of which components the shader actually looks at in the result.</span></span> <span data-ttu-id="c420c-121">Por exemplo, a leitura de \_ UNORM de R8 e mascaramento do resultado de leitura no sombreador com. GBA/. yzw não pareceria precisar ler a textura.</span><span class="sxs-lookup"><span data-stu-id="c420c-121">For example, reading from R8\_UNORM and masking the read result in the shader with .gba/.yzw wouldn't appear to need to read the texture at all.</span></span> <span data-ttu-id="c420c-122">Mas, se o endereço do texel for um bloco mapeado **NULL**, a operação ainda conta como um acesso de mapa **NULL**.</span><span class="sxs-lookup"><span data-stu-id="c420c-122">But if the texel address is a **NULL** mapped tile, the operation still counts as a **NULL** map access.</span></span>

<span data-ttu-id="c420c-123">O sombreador pode verificar o status e buscar qualquer curso de ação desejado em caso de falha.</span><span class="sxs-lookup"><span data-stu-id="c420c-123">The shader can check the status and pursue any desired course of action on failure.</span></span> <span data-ttu-id="c420c-124">Por exemplo, um curso de ação pode ser o registro de "erros" (por exemplo, via gravação UAV) e/ou a emissão de outra leitura fixada a um LOD áspero conhecido por estar mapeado.</span><span class="sxs-lookup"><span data-stu-id="c420c-124">For example, a course of action can be logging 'misses' (say via UAV write) and/or issuing another read clamped to a coarser LOD known to be mapped.</span></span> <span data-ttu-id="c420c-125">Um aplicativo pode querer controlar acessos bem-sucedidos também para obter uma noção de qual parte do conjunto de blocos mapeado foi acessado.</span><span class="sxs-lookup"><span data-stu-id="c420c-125">An application might want to track successful accesses as well in order to get a sense of what portion of the mapped set of tiles got accessed.</span></span>

<span data-ttu-id="c420c-126">Uma complicação para registrar em log é que não existe nenhum mecanismo para relatar o conjunto exato de blocos que teria sido acessado.</span><span class="sxs-lookup"><span data-stu-id="c420c-126">One complication for logging is no mechanism exists for reporting the exact set of tiles that would have been accessed.</span></span> <span data-ttu-id="c420c-127">O aplicativo pode fazer palpites conservadores com base em conhecer as coordenadas usadas para acesso, bem como usar a instrução LOD (por exemplo, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)) que retorna o que é o cálculo de LOD de hardware.</span><span class="sxs-lookup"><span data-stu-id="c420c-127">The application can make conservative guesses based on knowing the coordinates it used for access, as well as using the LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)) which returns what the hardware LOD calculation is.</span></span>

<span data-ttu-id="c420c-128">Outra complicação é que muitos acessos ocorrerão nos mesmos blocos, portanto, ocorrerão muitos registros em log redundantes e possivelmente uma contenção de memória.</span><span class="sxs-lookup"><span data-stu-id="c420c-128">Another complication is that lots of accesses will be to the same tiles, so a lot of redundant logging will occur and possibly contention on memory.</span></span> <span data-ttu-id="c420c-129">Ele pode ser conveniente se o hardware puder ter a opção de não precisar relatar os acessos de bloco se eles tiverem sido relatados em outro lugar antes.</span><span class="sxs-lookup"><span data-stu-id="c420c-129">It could be convenient if the hardware could be given the option to not bother to report tile accesses if they were reported elsewhere before.</span></span> <span data-ttu-id="c420c-130">Talvez o estado de tal rastreamento pudesse ser redefinido na API (provavelmente nos limites do quadro).</span><span class="sxs-lookup"><span data-stu-id="c420c-130">Perhaps the state of such tracking could be reset from the API (likely at frame boundaries).</span></span>

## <a name="per-sample-minlod-clamp"></a><span data-ttu-id="c420c-131">Clamp de MinLOD por amostra</span><span class="sxs-lookup"><span data-stu-id="c420c-131">Per-sample MinLOD clamp</span></span>

<span data-ttu-id="c420c-132">Para ajudar os sombreadores a evitar áreas em recursos de lado mipmapped que são conhecidos como não mapeados, a maioria das instruções de sombreador que envolvem o uso de uma amostra (filtragem) tem um novo modo que permite ao sombreador passar um parâmetro float32 MinLOD fixe adicional para o exemplo de textura.</span><span class="sxs-lookup"><span data-stu-id="c420c-132">To help shaders avoid areas in mipmapped tiled resources that are known to be non-mapped, most shader instructions that involve using a sampler (filtering) have a new mode that allows the shader to pass an additional float32 MinLOD clamp parameter to the texture sample.</span></span> <span data-ttu-id="c420c-133">Esse valor encontra-se no espaço numérico do modo de exibição mipmap, em oposição ao recurso subjacente.</span><span class="sxs-lookup"><span data-stu-id="c420c-133">This value is in the view's mipmap number space, as opposed to the underlying resource.</span></span>

<span data-ttu-id="c420c-134">O hardware executa o [**Max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(FShaderMinLODClamp, fComputedLOD) no mesmo local no cálculo de LOD em que ocorre o fixe por recurso MinLOD, que também é um **Max**().</span><span class="sxs-lookup"><span data-stu-id="c420c-134">The hardware performs [**max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(fShaderMinLODClamp,fComputedLOD) in the same place in the LOD calculation where the per-resource MinLOD clamp occurs, which is also a **max**().</span></span>

<span data-ttu-id="c420c-135">Se o resultado da aplicação do clamp LOD por amostra e quaisquer outros clamps LOD definidos na amostra for de um conjunto vazio, o resultado será o mesmo resultado de acesso sem limites que o clamp minLOD por recurso: 0 para componentes no formato de superfície e padrões para os componentes que estão faltando.</span><span class="sxs-lookup"><span data-stu-id="c420c-135">If the result of applying the per-sample LOD clamp and any other LOD clamps defined in the sampler is an empty set, the result is the same out of bounds access result as the per-resource minLOD clamp: 0 for components in the surface format and defaults for missing components.</span></span>

<span data-ttu-id="c420c-136">A instrução LOD (por exemplo, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), que é o ponto de minLOD por amostra fixe descrito aqui, retorna clamped e unclamped LOD.</span><span class="sxs-lookup"><span data-stu-id="c420c-136">The LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), which predates the per-sample minLOD clamp described here, returns both a clamped and unclamped LOD.</span></span> <span data-ttu-id="c420c-137">O LOD vinculado retornado dessa instrução LOD reflete todas as vinculações, incluindo a vinculação por recurso, mas não uma vinculação por amostra.</span><span class="sxs-lookup"><span data-stu-id="c420c-137">The clamped LOD returned from this LOD instruction reflects all clamping including the per-resource clamp, but not a per-sample clamp.</span></span> <span data-ttu-id="c420c-138">A vinculação por amostra é controlada e conhecida pelo sombreador de qualquer maneira, portanto, o autor do sombreador pode aplicar manualmente essa vinculação ao valor de retorno da instrução LOD, se desejado.</span><span class="sxs-lookup"><span data-stu-id="c420c-138">Per-sample clamp is controlled and known by the shader anyway, so the shader author can manually apply that clamp to the LOD instruction's return value if desired.</span></span>

## <a name="minmax-reduction-filtering"></a><span data-ttu-id="c420c-139">Filtragem de redução mínima/máxima</span><span class="sxs-lookup"><span data-stu-id="c420c-139">Min/Max reduction filtering</span></span>

<span data-ttu-id="c420c-140">Os aplicativos podem optar por gerenciar suas próprias estruturas de dados que informam sobre o que os mapeamentos se parecem para um recurso de lado.</span><span class="sxs-lookup"><span data-stu-id="c420c-140">Applications can choose to manage their own data structures that inform them of what the mappings looks like for a tiled resource.</span></span> <span data-ttu-id="c420c-141">Um exemplo seria uma superfície que contém um Texel para reter informações para cada bloco em um recurso de lado.</span><span class="sxs-lookup"><span data-stu-id="c420c-141">An example would be a surface that contains a texel to hold information for every tile in a tiled resource.</span></span> <span data-ttu-id="c420c-142">Um pode armazenar o primeiro LOD que é mapeado em um determinado local de bloco.</span><span class="sxs-lookup"><span data-stu-id="c420c-142">One might store the first LOD that is mapped at a given tile location.</span></span> <span data-ttu-id="c420c-143">Por amostragem cuidadosa dessa estrutura de dados de uma forma semelhante à qual o recurso de azulejos deve ser amostrado, alguém pode descobrir qual será o mínimo de LOD que está totalmente mapeado para uma superfície de filtro de textura inteira.</span><span class="sxs-lookup"><span data-stu-id="c420c-143">By careful sampling of this data structure in a similar way that the tiled resource is intended to be sampled, one might discover what the minimum LOD that is fully mapped for an entire texture filter footprint will be.</span></span> <span data-ttu-id="c420c-144">Para ajudar a facilitar esse processo, o Direct3D 11.2 apresenta um novo modo de amostra de finalidade geral, a filtragem min/max</span><span class="sxs-lookup"><span data-stu-id="c420c-144">To help make this process easier, Direct3D 11.2 introduces a new general purpose sampler mode, min/max filtering.</span></span>

<span data-ttu-id="c420c-145">O utilitário de filtragem min/max para o rastreamento LOD pode ser útil para outras finalidades, como, por exemplo, a filtragem de superfícies de profundidade.</span><span class="sxs-lookup"><span data-stu-id="c420c-145">The utility of min/max filtering for LOD tracking might be useful for other purposes, such as, perhaps the filtering of depth surfaces.</span></span>

<span data-ttu-id="c420c-146">A filtragem de redução min/max é um modo em amostras que busca o mesmo conjunto de texels que um filtro de textura normal buscaria.</span><span class="sxs-lookup"><span data-stu-id="c420c-146">Min/max reduction filtering is a mode on samplers that fetches the same set of texels that a normal texture filter would fetch.</span></span> <span data-ttu-id="c420c-147">Mas, em vez de mesclar os valores para produzir uma resposta, ele retorna o min() ou max() de texels buscados, em uma base por componente (por exemplo, o mínimo de todos os valores de R, separadamente do mínimo de todos os valores de G e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="c420c-147">But instead of blending the values to produce an answer, it returns the min() or max() of the texels fetched, on a per-component basis (for example, the min of all the R values, separately from the min of all the G values and so on).</span></span>

<span data-ttu-id="c420c-148">As operações de min/max seguem regras de precisão aritmética de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="c420c-148">The min/max operations follow Direct3D arithmetic precision rules.</span></span> <span data-ttu-id="c420c-149">A ordem das comparações não importa.</span><span class="sxs-lookup"><span data-stu-id="c420c-149">The order of comparisons doesn't matter.</span></span>

<span data-ttu-id="c420c-150">Durante as operações de filtragem que não são min/max, às vezes, o peso de um determinado texel acaba sendo 0,0.</span><span class="sxs-lookup"><span data-stu-id="c420c-150">During filter operations that aren't min/max, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="c420c-151">Um exemplo é um exemplo linear com coordenadas de textura que se enquadram diretamente em um Texel Center-3 texels (que podem variar de acordo com o hardware) contribuem para o filtro, mas com 0 peso.</span><span class="sxs-lookup"><span data-stu-id="c420c-151">An example is a linear sample with texture coordinates that fall directly on a texel center - 3 other texels (which ones they are may vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="c420c-152">Para qualquer um desses texels que teria peso 0 em um filtro sem a função min/max, se o filtro for min/max, esses texels ainda não contribuem para o resultado (e os pesos não afetam de outra forma a operação de filtro min/max).</span><span class="sxs-lookup"><span data-stu-id="c420c-152">For any of these texels that would be 0 weight on a non-min/max filter, if the filter is min/max, these texels still do not contribute to the result (and the weights do not otherwise affect the min/max filter operation).</span></span>

<span data-ttu-id="c420c-153">A lista completa de modos de filtro é mostrada na enumeração de [**\_ filtro D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) com mínimo e máximo nos valores de enumeração.</span><span class="sxs-lookup"><span data-stu-id="c420c-153">The full list of filter modes is shown in the [**D3D11\_FILTER**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) enumeration with MINIMUM and MAXIMUM in the enumeration values.</span></span>

<span data-ttu-id="c420c-154">O suporte para esse recurso depende do suporte de [camada 2](tier-2.md) para recursos de lado.</span><span class="sxs-lookup"><span data-stu-id="c420c-154">Support for this feature depends on [Tier 2](tier-2.md) support for tiled resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c420c-155">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="c420c-155">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c420c-156">Acesso ao pipeline para recursos lado a lado</span><span class="sxs-lookup"><span data-stu-id="c420c-156">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 