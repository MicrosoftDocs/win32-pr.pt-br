---
title: Estágio do sombreador de pixel
description: O estágio pixel-shader (PS) permite técnicas de sombreamento avançadas, como iluminação por pixel e pós-processamento.
ms.assetid: 09831B10-4FD1-41E7-8D81-5AA63DC90020
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 57142e9c32919a6959a7fac14bf544cca1dacd79
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104084765"
---
# <a name="pixel-shader-stage"></a><span data-ttu-id="4b2b9-103">Estágio do sombreador de pixel</span><span class="sxs-lookup"><span data-stu-id="4b2b9-103">Pixel Shader Stage</span></span>

<span data-ttu-id="4b2b9-104">O estágio pixel-shader (PS) permite técnicas de sombreamento avançadas, como iluminação por pixel e pós-processamento.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-104">The pixel-shader stage (PS) enables rich shading techniques such as per-pixel lighting and post-processing.</span></span> <span data-ttu-id="4b2b9-105">Um sombreador de pixel é um programa que combina variáveis constantes, dados de textura, valores interpolados por vértice e outros dados para produzir saídas por pixel.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-105">A pixel shader is a program that combines constant variables, texture data, interpolated per-vertex values, and other data to produce per-pixel outputs.</span></span> <span data-ttu-id="4b2b9-106">O estágio do rasterizador invoca um sombreador de pixel uma vez para cada pixel coberto por um primitivo, no entanto, é possível especificar um sombreador **nulo** para evitar a execução de um sombreador.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-106">The rasterizer stage invokes a pixel shader once for each pixel covered by a primitive, however, it is possible to specify a **NULL** shader to avoid running a shader.</span></span>

## <a name="the-pixel-shader"></a><span data-ttu-id="4b2b9-107">O sombreador de pixel</span><span class="sxs-lookup"><span data-stu-id="4b2b9-107">The Pixel Shader</span></span>

<span data-ttu-id="4b2b9-108">Ao coletar várias amostras de uma textura, um sombreador de pixel é invocado uma vez quando ocorre um teste de profundidade/estêncil para as várias amostras cobertas.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-108">When multisampling a texture, a pixel shader is invoked once per-covered pixel while a depth/stencil test occurs for each covered multisample.</span></span> <span data-ttu-id="4b2b9-109">Amostras que passarem no teste de profundidade/estêncil serão atualizadas com a cor de saída do sombreador de pixel.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-109">Samples that pass the depth/stencil test are updated with the pixel shader output color.</span></span>

<span data-ttu-id="4b2b9-110">As funções intrínsecas do sombreador de pixel produzem ou usam derivadas de quantidades em relação ao espaço da tela x e y.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-110">The pixel shader intrinsic functions produce or use derivatives of quantities with respect to screen space x and y.</span></span> <span data-ttu-id="4b2b9-111">O uso mais comum para derivadas é calcular o nível de detalhe para a amostragem de textura e, no caso de uma filtragem anisotrópica, selecionar amostras ao longo do eixo de anisotropia.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-111">The most common use for derivatives is to compute level-of-detail calculations for texture sampling and in the case of anisotropic filtering, selecting samples along the axis of anisotropy.</span></span> <span data-ttu-id="4b2b9-112">Normalmente, uma implementação de hardware executa um sombreador de pixel em vários pixels (por exemplo, uma grade 2x2) ao mesmo tempo para que derivadas de quantidades calculadas no sombreador de pixel possam ser razoavelmente aproximadas como deltas dos valores no mesmo ponto de execução em pixels adjacentes.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-112">Typically, a hardware implementation runs a pixel shader on multiple pixels (for example a 2x2 grid) simultaneously, so that derivatives of quantities computed in the pixel shader can be reasonably approximated as deltas of the values at the same point of execution in adjacent pixels.</span></span>

### <a name="inputs"></a><span data-ttu-id="4b2b9-113">Entradas</span><span class="sxs-lookup"><span data-stu-id="4b2b9-113">Inputs</span></span>

<span data-ttu-id="4b2b9-114">Quando o pipeline é configurado sem um sombreador de geometria, um sombreador de pixel é limitado a 16 entradas de 32 bits de 4 componentes.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-114">When the pipeline is configured without a geometry shader, a pixel shader is limited to 16, 32-bit, 4-component inputs.</span></span> <span data-ttu-id="4b2b9-115">Caso contrário, um sombreador de pixel pode levar até 32 entradas de 32 bits de 4 componentes.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-115">Otherwise, a pixel shader can take up to 32, 32-bit, 4-component inputs.</span></span>

<span data-ttu-id="4b2b9-116">Os dados de entrada de sombreador de pixel incluem atributos de vértice (que podem ser interpolados com ou sem correção de perspectiva) ou podem ser tratados como constantes por primitivo.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-116">Pixel shader input data includes vertex attributes (that can be interpolated with or without perspective correction) or can be treated as per-primitive constants.</span></span> <span data-ttu-id="4b2b9-117">As entradas do sombreador de pixel são interpoladas dos atributos de vértice do primitivo que está sendo rasterizado, com base no modo de interpolação declarado.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-117">Pixel shader inputs are interpolated from the vertex attributes of the primitive being rasterized, based on the interpolation mode declared.</span></span> <span data-ttu-id="4b2b9-118">Se um primitivo for recortado antes da varredura, o modo de interpolação também será aplicado durante o processo de recorte.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-118">If a primitive gets clipped before rasterization, the interpolation mode is honored during the clipping process as well.</span></span>

<span data-ttu-id="4b2b9-119">Atributos de vértice são interpolados (ou avaliados) em locais de centro de sombreador de pixel.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-119">Vertex attributes are interpolated (or evaluated) at pixel shader center locations.</span></span> <span data-ttu-id="4b2b9-120">Modos de interpolação de atributo de sombreador de pixel são declarados em uma declaração de registro de entrada, de acordo com o elemento, em um [argumento](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-function-parameters) ou um [entrada estrutura](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-struct).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-120">Pixel shader attribute interpolation modes are declared in an input register declaration, on a per-element basis in either an [argument](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-function-parameters) or an [input structure](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-struct).</span></span> <span data-ttu-id="4b2b9-121">Os atributos podem ser interpolados linearmente ou com a [amostragem de centróide](https://msdn.microsoft.com/library/Ee415231(v=VS.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-121">Attributes can be interpolated linearly, or with [centroid sampling](https://msdn.microsoft.com/library/Ee415231(v=VS.85).aspx).</span></span> <span data-ttu-id="4b2b9-122">A avaliação de centroides é relevante apenas durante a coleta de várias amostras para cobrir casos onde um pixel é coberto por um primitivo, mas um centro de pixel pode não estar; a avaliação de centroides ocorre o mais próximo possível do centro de pixel (não coberto).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-122">Centroid evaluation is relevant only during multisampling to cover cases where a pixel is covered by a primitive but a pixel center may not be; centroid evaluation occurs as close as possible to the (non-covered) pixel center.</span></span>

<span data-ttu-id="4b2b9-123">Entradas também podem ser declaradas com uma [semântica de valor do sistema](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-semantics), que marca um parâmetro que é consumido pelos outros estágios de pipeline.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-123">Inputs may also be declared with a [system-value semantic](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-semantics), which marks a parameter that is consumed by other pipeline stages.</span></span> <span data-ttu-id="4b2b9-124">Por exemplo, uma posição de pixel deve ser marcada com a \_ semântica da posição da VA.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-124">For instance, a pixel position should be marked with the SV\_Position semantic.</span></span> <span data-ttu-id="4b2b9-125">O estágio IA pode produzir um escalar para um sombreador de pixel (usando VA \_ primitivaid); o estágio rasterizador também pode gerar um escalar para um sombreador de pixel (usando VA \_ IsFrontFace).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-125">The IA stage can produce one scalar for a pixel shader (using SV\_PrimitiveID); the rasterizer stage can also generate one scalar for a pixel shader (using SV\_IsFrontFace).</span></span>

### <a name="outputs"></a><span data-ttu-id="4b2b9-126">Saídas</span><span class="sxs-lookup"><span data-stu-id="4b2b9-126">Outputs</span></span>

<span data-ttu-id="4b2b9-127">Um sombreador de pixel pode gerar até 8 cores de 4 componentes de 32 bits, ou nenhuma cor se o pixel for descartado.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-127">A pixel shader can output up to 8, 32-bit, 4-component colors, or no color if the pixel is discarded.</span></span> <span data-ttu-id="4b2b9-128">Os componentes de registro de saída de sombreador de pixel devem ser declarados antes que possam ser usados; uma máscara de gravação de saída distinta é permitida para cada registro.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-128">Pixel shader output register components must be declared before they can be used; each register is allowed a distinct output-write mask.</span></span>

<span data-ttu-id="4b2b9-129">Use o estado de habilitação de profundidade-gravação (no estágio saída-mesclagem) para controlar se os dados de profundidade são gravados em um buffer de profundidade (ou use a instrução de descarte para descartar dados para esse pixel).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-129">Use the depth-write-enable state (in the output-merger stage) to control whether depth data gets written to a depth buffer (or use the discard instruction to discard data for that pixel).</span></span> <span data-ttu-id="4b2b9-130">Um sombreador de pixel também pode gerar um valor opcional de 32 bits, um componente, um ponto flutuante, de profundidade para o teste de profundidade (usando a semântica de profundidade da VA \_ ).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-130">A pixel shader can also output an optional 32-bit, 1-component, floating-point, depth value for depth testing (using the SV\_Depth semantic).</span></span> <span data-ttu-id="4b2b9-131">O valor de profundidade tem saída no registro oDepth e substitui o valor de profundidade interpolado para teste de profundidade (supondo que o teste de profundidade está habilitado).</span><span class="sxs-lookup"><span data-stu-id="4b2b9-131">The depth value is output in the oDepth register, and replaces the interpolated depth value for depth testing (assuming depth testing is enabled).</span></span> <span data-ttu-id="4b2b9-132">Não há como alternar dinamicamente entre usar a profundidade de função fixa ou oDepth do sombreador.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-132">There is no way to dynamically change between using fixed-function depth or shader oDepth.</span></span>

<span data-ttu-id="4b2b9-133">Um sombreador de pixel não pode retornar um valor de estêncil.</span><span class="sxs-lookup"><span data-stu-id="4b2b9-133">A pixel shader cannot output a stencil value.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4b2b9-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="4b2b9-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4b2b9-135">Pipeline de gráficos</span><span class="sxs-lookup"><span data-stu-id="4b2b9-135">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> <dt>

[<span data-ttu-id="4b2b9-136">Estágios de pipeline (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="4b2b9-136">Pipeline Stages (Direct3D 10)</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-pipeline-stages)
</dt> </dl>

 

 