---
title: Renderização imediata e adiada
description: O Direct3D 11 dá suporte a dois tipos de renderização imediato e adiado. Ambos são implementados usando a interface ID3D11DeviceContext.
ms.assetid: 8991be9f-c882-4752-9048-704fe4ae1725
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef954a8e794755e1405c8e1e07505a5f39189b03
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104988518"
---
# <a name="immediate-and-deferred-rendering"></a><span data-ttu-id="b89a1-104">Renderização imediata e adiada</span><span class="sxs-lookup"><span data-stu-id="b89a1-104">Immediate and Deferred Rendering</span></span>

<span data-ttu-id="b89a1-105">O Direct3D 11 dá suporte a dois tipos de renderização: Immediate e adiada.</span><span class="sxs-lookup"><span data-stu-id="b89a1-105">Direct3D 11 supports two types of rendering: immediate and deferred.</span></span> <span data-ttu-id="b89a1-106">Ambos são implementados usando a interface [**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext) .</span><span class="sxs-lookup"><span data-stu-id="b89a1-106">Both are implemented by using the [**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext) interface.</span></span>

## <a name="immediate-rendering"></a><span data-ttu-id="b89a1-107">Renderização imediata</span><span class="sxs-lookup"><span data-stu-id="b89a1-107">Immediate Rendering</span></span>

<span data-ttu-id="b89a1-108">A renderização imediata refere-se à chamada de APIs de renderização ou comandos de um dispositivo, que enfileira os comandos em um buffer para execução na GPU.</span><span class="sxs-lookup"><span data-stu-id="b89a1-108">Immediate rendering refers to calling rendering APIs or commands from a device, which queues the commands in a buffer for execution on the GPU.</span></span> <span data-ttu-id="b89a1-109">Use um contexto imediato para renderizar, definir o estado do pipeline e reproduzir uma lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="b89a1-109">Use an immediate context to render, set pipeline state, and play back a command list.</span></span>

<span data-ttu-id="b89a1-110">Crie um contexto imediato usando [**D3D11CreateDevice**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdevice) ou [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdeviceandswapchain).</span><span class="sxs-lookup"><span data-stu-id="b89a1-110">Create an immediate context using [**D3D11CreateDevice**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/desktop/api/D3D11/nf-d3d11-d3d11createdeviceandswapchain).</span></span>

## <a name="deferred-rendering"></a><span data-ttu-id="b89a1-111">Renderização adiada</span><span class="sxs-lookup"><span data-stu-id="b89a1-111">Deferred Rendering</span></span>

<span data-ttu-id="b89a1-112">A renderização adiada registra comandos gráficos em um buffer de comando para que eles possam ser reproduzidos em algum outro momento.</span><span class="sxs-lookup"><span data-stu-id="b89a1-112">Deferred rendering records graphics commands in a command buffer so that they can be played back at some other time.</span></span> <span data-ttu-id="b89a1-113">Use um contexto adiado para gravar comandos (renderização e configuração de estado) em uma lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="b89a1-113">Use a deferred context to record commands (rendering as well as state setting) to a command list.</span></span> <span data-ttu-id="b89a1-114">A renderização adiada é um novo conceito no Direct3D 11; a renderização adiada é projetada para dar suporte à renderização em um thread durante a gravação de comandos para renderização em threads adicionais.</span><span class="sxs-lookup"><span data-stu-id="b89a1-114">Deferred rendering is a new concept in Direct3D 11; deferred rendering is designed to support rendering on one thread while recording commands for rendering on additional threads.</span></span> <span data-ttu-id="b89a1-115">Essa estratégia de multithread paralela permite dividir cenas complexas em tarefas simultâneas.</span><span class="sxs-lookup"><span data-stu-id="b89a1-115">This parallel, multithread strategy allows you to break up complex scenes into concurrent tasks.</span></span> <span data-ttu-id="b89a1-116">Para obter mais informações sobre como renderizar cenas complexas, consulte [renderização de várias passagens](overviews-direct3d-11-render-multipass.md).</span><span class="sxs-lookup"><span data-stu-id="b89a1-116">For more information about rendering complex scenes, see [Multiple-Pass Rendering](overviews-direct3d-11-render-multipass.md).</span></span>

<span data-ttu-id="b89a1-117">Crie um contexto adiado usando [**ID3D11Device:: CreateDeferredContext**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdeferredcontext).</span><span class="sxs-lookup"><span data-stu-id="b89a1-117">Create a deferred context using [**ID3D11Device::CreateDeferredContext**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdeferredcontext).</span></span>

<span data-ttu-id="b89a1-118">O Direct3D gera sobrecarga de renderização ao enfileirar comandos no buffer de comandos.</span><span class="sxs-lookup"><span data-stu-id="b89a1-118">Direct3D generates rendering overhead when it queues up commands in the command buffer.</span></span> <span data-ttu-id="b89a1-119">Por outro lado, uma [lista de comandos](overviews-direct3d-11-render-multi-thread-command-list.md) é executada de forma muito mais eficiente durante a reprodução.</span><span class="sxs-lookup"><span data-stu-id="b89a1-119">In contrast, a [command list](overviews-direct3d-11-render-multi-thread-command-list.md) executes much more efficiently during playback.</span></span> <span data-ttu-id="b89a1-120">Para usar uma lista de comandos, registre os comandos de renderização com um contexto adiado e reproduza-os novamente usando um contexto imediato.</span><span class="sxs-lookup"><span data-stu-id="b89a1-120">To use a command list, record rendering commands with a deferred context and play them back using an immediate context.</span></span>

<span data-ttu-id="b89a1-121">Você pode gerar apenas uma única lista de comandos em um modo de thread único.</span><span class="sxs-lookup"><span data-stu-id="b89a1-121">You can generate only a single command list in a single-threaded fashion.</span></span> <span data-ttu-id="b89a1-122">No entanto, você pode criar e usar vários contextos adiados simultaneamente, cada um em um thread separado.</span><span class="sxs-lookup"><span data-stu-id="b89a1-122">However, you can create and use multiple deferred contexts simultaneously, each in a separate thread.</span></span> <span data-ttu-id="b89a1-123">Em seguida, você pode usar esses vários contextos adiados para criar simultaneamente várias listas de comandos.</span><span class="sxs-lookup"><span data-stu-id="b89a1-123">Then, you can use those multiple deferred contexts to simultaneously create multiple command lists.</span></span>

<span data-ttu-id="b89a1-124">Não é possível reproduzir duas ou mais listas de comandos simultaneamente no contexto imediato.</span><span class="sxs-lookup"><span data-stu-id="b89a1-124">You cannot play back two or more command lists simultaneously on the immediate context.</span></span>

<span data-ttu-id="b89a1-125">Para determinar se um contexto de dispositivo é um contexto imediato ou adiado, chame [**ID3D11DeviceContext:: GetType**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gettype).</span><span class="sxs-lookup"><span data-stu-id="b89a1-125">To determine if a device context is an immediate or a deferred context, call [**ID3D11DeviceContext::GetType**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gettype).</span></span>

<span data-ttu-id="b89a1-126">O método [**ID3D11DeviceContext:: map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) só tem suporte em um contexto adiado para recursos dinâmicos ([**D3D11 \_ uso \_ dinâmico**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_usage)) em que a primeira chamada na lista de comandos é o [**\_ \_ \_ descarte de gravação do mapa D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_map).</span><span class="sxs-lookup"><span data-stu-id="b89a1-126">The [**ID3D11DeviceContext::Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) method is only supported in a deferred context for dynamic resources ([**D3D11\_USAGE\_DYNAMIC**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_usage)) where the first call within the command list is [**D3D11\_MAP\_WRITE\_DISCARD**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_map).</span></span> <span data-ttu-id="b89a1-127">**D3D11 \_ Gravação de mapa \_ \_ não \_** há suporte para substituição em chamadas subsequentes, se disponíveis para o tipo de recurso fornecido.</span><span class="sxs-lookup"><span data-stu-id="b89a1-127">**D3D11\_MAP\_WRITE\_NO\_OVERWRITE** is supported on subsequent calls if available for the given type of resource.</span></span>

<span data-ttu-id="b89a1-128">As consultas em um contexto adiado são limitadas à geração de dados e ao desenho com predicado.</span><span class="sxs-lookup"><span data-stu-id="b89a1-128">Queries in a deferred context are limited to data generation and predicated drawing.</span></span> <span data-ttu-id="b89a1-129">Você não pode chamar [**ID3D11DeviceContext:: GetData**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-getdata) em um contexto adiado para obter dados sobre uma consulta; Você só pode chamar **GetData** no contexto imediato para obter dados sobre uma consulta.</span><span class="sxs-lookup"><span data-stu-id="b89a1-129">You cannot call [**ID3D11DeviceContext::GetData**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-getdata) on a deferred context to get data about a query; you can only call **GetData** on the immediate context to get data about a query.</span></span> <span data-ttu-id="b89a1-130">Você pode definir um predicado de renderização (um tipo de consulta) chamando [**D3D11DeviceContext:: SetPredication**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-setpredication) para usar os resultados da consulta na GPU.</span><span class="sxs-lookup"><span data-stu-id="b89a1-130">You can set a rendering predicate (a type of query) by calling [**D3D11DeviceContext::SetPredication**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-setpredication) to use query results on the GPU.</span></span> <span data-ttu-id="b89a1-131">Você pode gerar dados de consulta por meio de chamadas para [**ID3D11DeviceContext:: Begin**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-begin) e [**ID3D11DeviceContext:: End**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-end).</span><span class="sxs-lookup"><span data-stu-id="b89a1-131">You can generate query data through calls to [**ID3D11DeviceContext::Begin**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-begin) and [**ID3D11DeviceContext::End**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-end).</span></span> <span data-ttu-id="b89a1-132">No entanto, os dados da consulta não estarão disponíveis até que você chame [**ID3D11DeviceContext:: ExecuteCommandList**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-executecommandlist) no contexto imediato para enviar a lista de comandos de contexto adiado.</span><span class="sxs-lookup"><span data-stu-id="b89a1-132">However, the query data will not be available until you call [**ID3D11DeviceContext::ExecuteCommandList**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-executecommandlist) on the immediate context to submit the deferred context command list.</span></span> <span data-ttu-id="b89a1-133">Os dados da consulta são então processados pela GPU.</span><span class="sxs-lookup"><span data-stu-id="b89a1-133">The query data is then processed by the GPU.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b89a1-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b89a1-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b89a1-135">Multithread</span><span class="sxs-lookup"><span data-stu-id="b89a1-135">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 




