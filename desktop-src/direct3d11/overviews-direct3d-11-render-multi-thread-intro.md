---
title: Introdução a multithreading no Direct3D 11
description: O multithreading foi projetado para melhorar o desempenho executando o trabalho usando um ou mais threads ao mesmo tempo.
ms.assetid: b4bef1e4-8d34-455c-8aed-01af974c66c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 527b78d8b29a507247c8eb067c20739004ace687
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104294081"
---
# <a name="introduction-to-multithreading-in-direct3d-11"></a><span data-ttu-id="790bb-103">Introdução a multithreading no Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="790bb-103">Introduction to Multithreading in Direct3D 11</span></span>

<span data-ttu-id="790bb-104">O multithreading foi projetado para melhorar o desempenho executando o trabalho usando um ou mais threads ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="790bb-104">Multithreading is designed to improve performance by performing work using one or more threads at the same time.</span></span>

<span data-ttu-id="790bb-105">No passado, isso costuma ser feito gerando um único thread principal para renderização e um ou mais threads para fazer trabalho de preparação, como criação de objeto, carregamento, processamento e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="790bb-105">In the past, this has often been done by generating a single main thread for rendering and one or more threads for doing preparation work such as object creation, loading, processing, and so on.</span></span> <span data-ttu-id="790bb-106">No entanto, com a sincronização interna no Direct3D 11, o objetivo por trás do multithreading é utilizar cada ciclo de CPU e GPU sem fazer com que o processador Aguarde um outro processador (particularmente não fazendo a GPU esperar porque ele afeta diretamente a taxa de quadros).</span><span class="sxs-lookup"><span data-stu-id="790bb-106">However, with the built in synchronization in Direct3D 11, the goal behind multithreading is to utilize every CPU and GPU cycle without making a processor wait for another processor (particularly not making the GPU wait because it directly impacts frame rate).</span></span> <span data-ttu-id="790bb-107">Ao fazer isso, você pode gerar a maior quantidade de trabalho, mantendo a melhor taxa de quadros.</span><span class="sxs-lookup"><span data-stu-id="790bb-107">By doing so, you can generate the most amount of work while maintaining the best frame rate.</span></span> <span data-ttu-id="790bb-108">O conceito de um único quadro para renderização não é mais necessário, pois a API implementa a sincronização.</span><span class="sxs-lookup"><span data-stu-id="790bb-108">The concept of a single frame for rendering is no longer as necessary since the API implements synchronization.</span></span>

<span data-ttu-id="790bb-109">O multithreading requer alguma forma de sincronização.</span><span class="sxs-lookup"><span data-stu-id="790bb-109">Multithreading requires some form of synchronization.</span></span> <span data-ttu-id="790bb-110">Por exemplo, se vários threads executados em um aplicativo precisarem acessar um único contexto de dispositivo ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), esse aplicativo deve usar algum mecanismo de sincronização, como seções críticas, para sincronizar o acesso a esse contexto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="790bb-110">For example, if multiple threads that run in an application must access a single device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), that application must use some synchronization mechanism, such as critical sections, to synchronize access to that device context.</span></span> <span data-ttu-id="790bb-111">Isso ocorre porque o processamento dos comandos de renderização (geralmente feitos na GPU) e a geração de comandos de renderização (geralmente feitos na CPU por meio da criação de objeto, carregamento de dados, alteração de estado, processamento de dados) geralmente usam os mesmos recursos (texturas, sombreadores, estado do pipeline e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="790bb-111">This is because processing of the render commands (generally done on the GPU) and generating the render commands (generally done on the CPU through object creation, data loading, state changing, data processing) often use the same resources (textures, shaders, pipeline state, and so on).</span></span> <span data-ttu-id="790bb-112">Organizar o trabalho em vários threads requer sincronização para impedir que um thread modifique ou leia dados que estão sendo modificados por outro thread.</span><span class="sxs-lookup"><span data-stu-id="790bb-112">Organizing the work across multiple threads requires synchronization to prevent one thread from modifying or reading data that is being modified by another thread.</span></span>

<span data-ttu-id="790bb-113">Embora o uso de um [**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)(contexto de dispositivo) não seja thread-safe, o uso de um dispositivo Direct3D 11 ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) é thread-safe.</span><span class="sxs-lookup"><span data-stu-id="790bb-113">While the use of a device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) is not thread-safe, the use of a Direct3D 11 device ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) is thread-safe.</span></span> <span data-ttu-id="790bb-114">Como cada **ID3D11DeviceContext** é single-threaded, apenas um thread pode chamar um **ID3D11DeviceContext** de cada vez.</span><span class="sxs-lookup"><span data-stu-id="790bb-114">Because each **ID3D11DeviceContext** is single threaded, only one thread can call a **ID3D11DeviceContext** at a time.</span></span> <span data-ttu-id="790bb-115">Se vários threads tiverem que acessar um único **ID3D11DeviceContext**, eles deverão usar algum mecanismo de sincronização, como seções críticas, para sincronizar o acesso a esse **ID3D11DeviceContext**.</span><span class="sxs-lookup"><span data-stu-id="790bb-115">If multiple threads must access a single **ID3D11DeviceContext**, they must use some synchronization mechanism, such as critical sections, to synchronize access to that **ID3D11DeviceContext**.</span></span> <span data-ttu-id="790bb-116">No entanto, não é necessário que vários threads usem seções críticas ou primitivos de sincronização para acessar um único **ID3D11Device**.</span><span class="sxs-lookup"><span data-stu-id="790bb-116">However, multiple threads are not required to use critical sections or synchronization primitives to access a single **ID3D11Device**.</span></span> <span data-ttu-id="790bb-117">Portanto, se um aplicativo usar **ID3D11Device** para criar objetos de recurso, esse aplicativo não precisará usar a sincronização para criar vários objetos de recurso ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="790bb-117">Therefore, if an application uses **ID3D11Device** to create resource objects, that application is not required to use synchronization to create multiple resource objects at the same time.</span></span>

<span data-ttu-id="790bb-118">O suporte a multithreading divide a API em duas áreas funcionais distintas:</span><span class="sxs-lookup"><span data-stu-id="790bb-118">Multithreading support divides the API into two distinct functional areas:</span></span>

-   [<span data-ttu-id="790bb-119">Criação de objeto com multithreading</span><span class="sxs-lookup"><span data-stu-id="790bb-119">Object Creation with Multithreading</span></span>](overviews-direct3d-11-render-multi-thread-create.md)
-   [<span data-ttu-id="790bb-120">Renderização imediata e adiada</span><span class="sxs-lookup"><span data-stu-id="790bb-120">Immediate and Deferred Rendering</span></span>](overviews-direct3d-11-render-multi-thread-render.md)

<span data-ttu-id="790bb-121">O desempenho de multithreads depende do suporte do driver.</span><span class="sxs-lookup"><span data-stu-id="790bb-121">Multithreading performance depends on the driver support.</span></span> <span data-ttu-id="790bb-122">[Como verificar o suporte ao driver](overviews-direct3d-11-render-multi-thread-support.md) fornece mais informações sobre como consultar o driver e o que significam os resultados.</span><span class="sxs-lookup"><span data-stu-id="790bb-122">[How To: Check for Driver Support](overviews-direct3d-11-render-multi-thread-support.md) provides more information about querying the driver and what the results mean.</span></span>

<span data-ttu-id="790bb-123">O Direct3D 11 foi projetado desde o início para dar suporte a multithreading.</span><span class="sxs-lookup"><span data-stu-id="790bb-123">Direct3D 11 has been designed from the ground up to support multithreading.</span></span> <span data-ttu-id="790bb-124">O Direct3D 10 implementa suporte limitado para multithreading usando a [camada thread-safe](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span><span class="sxs-lookup"><span data-stu-id="790bb-124">Direct3D 10 implements limited support for multithreading using the [thread-safe layer](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span></span> <span data-ttu-id="790bb-125">Esta página lista as diferenças de comportamento entre as duas versões do DirectX: [segmentação de diferenças entre versões do Direct3D](overviews-direct3d-11-render-multi-thread-differences.md).</span><span class="sxs-lookup"><span data-stu-id="790bb-125">This page lists the behavior differences between the two versions of DirectX: [Threading Differences between Direct3D Versions](overviews-direct3d-11-render-multi-thread-differences.md).</span></span>

## <a name="multithreading-and-dxgi"></a><span data-ttu-id="790bb-126">Multithread e DXGI</span><span class="sxs-lookup"><span data-stu-id="790bb-126">Multithreading and DXGI</span></span>

<span data-ttu-id="790bb-127">Somente um thread por vez deve usar o contexto imediato.</span><span class="sxs-lookup"><span data-stu-id="790bb-127">Only one thread at a time should use the immediate context.</span></span> <span data-ttu-id="790bb-128">No entanto, seu aplicativo também deve usar esse mesmo thread para operações de DXGI (infraestrutura gráfica do Microsoft DirectX), especialmente quando o aplicativo faz chamadas para o método [**IDXGISwapChain::P reenviado**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) .</span><span class="sxs-lookup"><span data-stu-id="790bb-128">However, your application should also use that same thread for Microsoft DirectX Graphics Infrastructure (DXGI) operations, especially when the application makes calls to the [**IDXGISwapChain::Present**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) method.</span></span>

> [!Note]  
> <span data-ttu-id="790bb-129">É inválido usar um contexto imediato simultaneamente com a maioria das funções de interface DXGI.</span><span class="sxs-lookup"><span data-stu-id="790bb-129">It is invalid to use an immediate context concurrently with most of the DXGI interface functions.</span></span> <span data-ttu-id="790bb-130">Para os SDKs do DirectX de março de 2009 e posteriores, as únicas funções DXGI que são seguras são [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release)e [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="790bb-130">For the March 2009 and later DirectX SDKs, the only DXGI functions that are safe are [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release), and [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span>

 

<span data-ttu-id="790bb-131">Para obter mais informações sobre como usar DXGI com vários threads, consulte [multithread Considerations](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="790bb-131">For more info about using DXGI with multiple threads, see [Multithread Considerations](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

## <a name="related-topics"></a><span data-ttu-id="790bb-132">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="790bb-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="790bb-133">Multithread</span><span class="sxs-lookup"><span data-stu-id="790bb-133">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 