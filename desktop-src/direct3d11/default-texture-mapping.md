---
title: Mapeamento de textura padrão
description: O uso de mapeamento de textura padrão reduz a cópia e o uso de memória ao compartilhar dados de imagem entre a GPU e a CPU.
ms.assetid: 77AF4BFA-09B5-4181-9408-002764F2A923
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f203c7590c3673d30315250b2b4ce2663e48c9c3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104364008"
---
# <a name="default-texture-mapping"></a><span data-ttu-id="733d0-103">Mapeamento de textura padrão</span><span class="sxs-lookup"><span data-stu-id="733d0-103">Default Texture Mapping</span></span>

<span data-ttu-id="733d0-104">O uso de mapeamento de textura padrão reduz a cópia e o uso de memória ao compartilhar dados de imagem entre a GPU e a CPU.</span><span class="sxs-lookup"><span data-stu-id="733d0-104">The use of default texture mapping reduces copying and memory usage while sharing image data between the GPU and the CPU.</span></span> <span data-ttu-id="733d0-105">No entanto, ele só deve ser usado em situações específicas.</span><span class="sxs-lookup"><span data-stu-id="733d0-105">However, it should only be used in specific situations.</span></span> <span data-ttu-id="733d0-106">O layout swizzle padrão evita copiar ou swizzling dados em vários layouts.</span><span class="sxs-lookup"><span data-stu-id="733d0-106">The standard swizzle layout avoids copying or swizzling data in multiple layouts.</span></span>

-   [<span data-ttu-id="733d0-107">Visão geral</span><span class="sxs-lookup"><span data-stu-id="733d0-107">Overview</span></span>](#overview)
-   [<span data-ttu-id="733d0-108">APIs do D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="733d0-108">D3D11.3 APIs</span></span>](#d3d113-apis)
-   [<span data-ttu-id="733d0-109">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="733d0-109">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="733d0-110">Visão geral</span><span class="sxs-lookup"><span data-stu-id="733d0-110">Overview</span></span>

<span data-ttu-id="733d0-111">O mapeamento de texturas padrão não deve ser a primeira opção para os desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="733d0-111">Mapping default textures should not be the first choice for developers.</span></span> <span data-ttu-id="733d0-112">Os desenvolvedores devem codificar em uma forma amigável de GPU discreta primeiro (ou seja, não têm nenhum acesso de CPU para a maioria das texturas e carregar com [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)).</span><span class="sxs-lookup"><span data-stu-id="733d0-112">Developers should code in a discrete-GPU friendly way first (that is, do not have any CPU access for the majority of textures and upload with [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)).</span></span> <span data-ttu-id="733d0-113">Mas, para determinados casos, a CPU e a GPU podem interagir com tanta frequência nos mesmos dados, que o mapeamento de texturas padrão se torna útil para economizar energia ou para acelerar um design específico em adaptadores ou arquiteturas específicos.</span><span class="sxs-lookup"><span data-stu-id="733d0-113">But, for certain cases, the CPU and GPU may interact so frequently on the same data, that mapping default textures becomes helpful to save power, or to speed up a particular design on particular adapters or architectures.</span></span> <span data-ttu-id="733d0-114">Os aplicativos devem detectar esses casos e otimizar as cópias desnecessárias.</span><span class="sxs-lookup"><span data-stu-id="733d0-114">Applications should detect these cases and optimize out the unnecessary copies.</span></span>

<span data-ttu-id="733d0-115">No D3D 11.3, as texturas criadas \_ com \_ o layout de textura D3D11 \_ não são definidas (um membro da enumeração de [**\_ \_ layout de textura D3D11**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) ) e nenhum acesso de CPU é o mais eficiente para a renderização e a amostragem de GPU frequentes.</span><span class="sxs-lookup"><span data-stu-id="733d0-115">In D3D11.3, textures created with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED (one member of the [**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) enum) and no CPU access are the most efficient for frequent GPU rendering and sampling.</span></span> <span data-ttu-id="733d0-116">Quando o teste de desempenho, essas texturas devem ser comparadas \_ \_ com o layout de textura D3D11 \_ indefinido com acesso à CPU e o \_ layout de textura D3D11 \_ \_ 64K \_ Standard \_ SWIZZLE com acesso à CPU e a \_ \_ \_ linha de layout de textura D3D11 \_ principal para suporte entre adaptadores.</span><span class="sxs-lookup"><span data-stu-id="733d0-116">When performance testing, those textures should be compared against D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access, and D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access, and D3D11\_TEXTURE\_LAYOUT\_ROW\_MAJOR for cross-adapter support.</span></span>

<span data-ttu-id="733d0-117">O uso \_ \_ do layout \_ de textura D3D11 indefinido com acesso à CPU permite que os métodos [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**mapeie**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (impedindo o acesso do aplicativo ao ponteiro) e o [**cancelem**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap), mas possam sacrificar a eficiência do acesso à GPU.</span><span class="sxs-lookup"><span data-stu-id="733d0-117">Using D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access enables the methods [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (precluding application access to pointer), and [**Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap); but can sacrifice efficiency of GPU access.</span></span> <span data-ttu-id="733d0-118">Usando \_ \_ o layout de textura D3D11 \_ 64K \_ Standard \_ SWIZZLE com acesso à CPU habilita **WriteToSubresource**, **ReadFromSubresource**, **MAP** (que retorna um ponteiro válido para o aplicativo) e o **mapeamento**.</span><span class="sxs-lookup"><span data-stu-id="733d0-118">Using D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access enables **WriteToSubresource**, **ReadFromSubresource**, **Map** (which returns a valid pointer to application), and **Unmap**.</span></span> <span data-ttu-id="733d0-119">Ele também pode sacrificar a eficiência de acesso de GPU mais do que o \_ layout de textura D3D11 \_ \_ indefinido com acesso à CPU.</span><span class="sxs-lookup"><span data-stu-id="733d0-119">It can also sacrifice efficiency of GPU access more than D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access.</span></span>

<span data-ttu-id="733d0-120">Em geral, os aplicativos devem criar a maioria das texturas como acessíveis somente à GPU e com o \_ layout de textura D3D11 \_ \_ indefinido.</span><span class="sxs-lookup"><span data-stu-id="733d0-120">In general, applications should create the majority of textures as GPU-only-accessible, and with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED.</span></span>

<span data-ttu-id="733d0-121">Antes do recurso de mapeamento de texturas padrão, havia apenas um layout padronizado para dados multidimensionais: "linear", também conhecido como "linha-principal".</span><span class="sxs-lookup"><span data-stu-id="733d0-121">Previous to the mapping default textures feature, there was only one standardized layout for multi-dimensional data: "linear", also known as "row-major".</span></span> <span data-ttu-id="733d0-122">Os aplicativos devem evitar o uso da \_ preparação e do uso de \_ texturas dinâmicas quando o padrão do mapa estiver disponível.</span><span class="sxs-lookup"><span data-stu-id="733d0-122">Applications should avoid USAGE\_STAGING and USAGE\_DYNAMIC textures when map default is available.</span></span> <span data-ttu-id="733d0-123">As \_ \_ texturas dinâmicas de uso e preparo usam o layout linear.</span><span class="sxs-lookup"><span data-stu-id="733d0-123">The USAGE\_STAGING and USAGE\_DYNAMIC textures use the linear layout.</span></span>

<span data-ttu-id="733d0-124">O D3D 11.3 (e D3D12) introduz um layout de dados multidimensional padrão.</span><span class="sxs-lookup"><span data-stu-id="733d0-124">D3D11.3 (and D3D12) introduce a standard multi-dimensional data layout.</span></span> <span data-ttu-id="733d0-125">Isso é feito para permitir que várias unidades de processamento operem nos mesmos dados sem copiar os dados ou swizzling os dados entre vários layouts.</span><span class="sxs-lookup"><span data-stu-id="733d0-125">This is done to enable multiple processing units to operate on the same data without copying the data or swizzling the data between multiple layouts.</span></span> <span data-ttu-id="733d0-126">Um layout padronizado permite ganhos de eficiência por meio de efeitos de rede e permite que os algoritmos façam pequenos cortes, supondo um padrão específico.</span><span class="sxs-lookup"><span data-stu-id="733d0-126">A standardized layout enables efficiency gains through network effects and allows algorithms to make short-cuts assuming a particular pattern.</span></span>

<span data-ttu-id="733d0-127">No entanto, observe que esse swizzle padrão é um recurso de hardware e pode não ter suporte de todas as GPUs.</span><span class="sxs-lookup"><span data-stu-id="733d0-127">Note though that this standard swizzle is a hardware feature, and may not be supported by all GPUs.</span></span>

## <a name="d3d113-apis"></a><span data-ttu-id="733d0-128">APIs do D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="733d0-128">D3D11.3 APIs</span></span>

<span data-ttu-id="733d0-129">Ao contrário do D3D12, o D3D 11.3 não dá suporte ao mapeamento de textura por padrão, portanto, você precisa consultar [**\_ os dados do recurso D3D11 \_ \_ D3D11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="733d0-129">Unlike D3D12, D3D11.3 does not supports texture mapping by default, so you need to query [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span> <span data-ttu-id="733d0-130">O padrão swizzle também precisará ser consultado com uma chamada para [**ID3D11Device:: CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) e verificar o `StandardSwizzle64KBSupported` campo dos **dados do \_ recurso D3D11 D3D11 \_ \_ \_ OPTIONS2**.</span><span class="sxs-lookup"><span data-stu-id="733d0-130">Standard swizzle will also need to be queried for with a call to [**ID3D11Device::CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) and checking the `StandardSwizzle64KBSupported` field of **D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**.</span></span>

<span data-ttu-id="733d0-131">As seguintes APIs referenciam o mapeamento de textura:</span><span class="sxs-lookup"><span data-stu-id="733d0-131">The following APIs reference texture mapping:</span></span>

<span data-ttu-id="733d0-132">Enumerações</span><span class="sxs-lookup"><span data-stu-id="733d0-132">Enums</span></span>

-   <span data-ttu-id="733d0-133">[**D3D11 \_ \_Layout de textura**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) : controla o padrão swizzle de texturas padrão e habilita o suporte de mapa em texturas padrão.</span><span class="sxs-lookup"><span data-stu-id="733d0-133">[**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) : controls the swizzle pattern of default textures and enable map support on default textures.</span></span>
-   <span data-ttu-id="733d0-134">[**D3D11 \_ RECURSO**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : referencia [**\_ os dados de recurso D3D11 \_ \_ D3D11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="733d0-134">[**D3D11\_FEATURE**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : references [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span>
-   <span data-ttu-id="733d0-135">[**D3D11 \_ \_ \_ Sinalizador de cópia do bloco**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contém sinalizadores para copiar os recursos de lado do swizzled para e de buffers lineares.</span><span class="sxs-lookup"><span data-stu-id="733d0-135">[**D3D11\_TILE\_COPY\_FLAG**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contains flags to copy swizzled tiled resources to and from linear buffers.</span></span>

<span data-ttu-id="733d0-136">Estruturas</span><span class="sxs-lookup"><span data-stu-id="733d0-136">Structures</span></span>

-   <span data-ttu-id="733d0-137">[**D3D11 \_ TEXTURE2D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : descreve uma textura 2D.</span><span class="sxs-lookup"><span data-stu-id="733d0-137">[**D3D11\_TEXTURE2D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : describes a 2D texture.</span></span> <span data-ttu-id="733d0-138">Observe a \_ \_ estrutura auxiliar CD3D11 TEXTURE2D DESC1.</span><span class="sxs-lookup"><span data-stu-id="733d0-138">Note the CD3D11\_TEXTURE2D\_DESC1 helper structure.</span></span>
-   <span data-ttu-id="733d0-139">[**D3D11 \_ TEXTURE3D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : descreve uma textura 3D.</span><span class="sxs-lookup"><span data-stu-id="733d0-139">[**D3D11\_TEXTURE3D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : describes a 3D texture.</span></span> <span data-ttu-id="733d0-140">Observe a \_ \_ estrutura auxiliar CD3D11 TEXTURE3D DESC1.</span><span class="sxs-lookup"><span data-stu-id="733d0-140">Note the CD3D11\_TEXTURE3D\_DESC1 helper structure.</span></span>

<span data-ttu-id="733d0-141">Métodos</span><span class="sxs-lookup"><span data-stu-id="733d0-141">Methods</span></span>

-   <span data-ttu-id="733d0-142">[**ID3D11Device3:: CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : cria uma matriz de texturas 2D.</span><span class="sxs-lookup"><span data-stu-id="733d0-142">[**ID3D11Device3::CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : creates an array of 2D textures.</span></span>
-   <span data-ttu-id="733d0-143">[**ID3D11Device3:: CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : cria uma única textura 3D.</span><span class="sxs-lookup"><span data-stu-id="733d0-143">[**ID3D11Device3::CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : creates a single 3D texture.</span></span>
-   <span data-ttu-id="733d0-144">[**ID3D11Device3:: WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : Copia dados em uma \_ textura padrão de uso de D3D11 \_ que foi mapeada usando o [**mapa**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="733d0-144">[**ID3D11Device3::WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : copies data into a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="733d0-145">[**ID3D11Device3:: ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : Copia dados de uma \_ textura padrão de uso de D3D11 \_ que foi mapeada usando o [**mapa**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="733d0-145">[**ID3D11Device3::ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : copies data from a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="733d0-146">[**ID3D11DeviceContext:: map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : Obtém um ponteiro para os dados contidos em um subrecurso e nega o acesso GPU a esse subrecurso.</span><span class="sxs-lookup"><span data-stu-id="733d0-146">[**ID3D11DeviceContext::Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : gets a pointer to the data contained in a subresource, and denies the GPU access to that subresource.</span></span>
-   <span data-ttu-id="733d0-147">[**ID3D11DeviceContext:: inmapeamento**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalida o ponteiro para um recurso e reabilita o acesso da GPU a esse recurso.</span><span class="sxs-lookup"><span data-stu-id="733d0-147">[**ID3D11DeviceContext::Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalidates the pointer to a resource and reenables the GPU's access to that resource.</span></span>
-   <span data-ttu-id="733d0-148">[**ID3D11Texture2D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : Obtém as propriedades de um recurso de textura 2D.</span><span class="sxs-lookup"><span data-stu-id="733d0-148">[**ID3D11Texture2D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : gets the properties of a 2D texture resource.</span></span>
-   <span data-ttu-id="733d0-149">[**ID3D11Texture3D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : Obtém as propriedades de um recurso de textura 3D.</span><span class="sxs-lookup"><span data-stu-id="733d0-149">[**ID3D11Texture3D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : gets the properties of a 3D texture resource.</span></span>

## <a name="related-topics"></a><span data-ttu-id="733d0-150">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="733d0-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="733d0-151">Recursos do Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="733d0-151">Direct3D 11.3 Features</span></span>](direct3d-11-3-features.md)
</dt> </dl>

 

 




