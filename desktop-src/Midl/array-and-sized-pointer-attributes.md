---
title: Atributos de matriz e de Sized-Pointer
description: O MIDL fornece um rico conjunto de recursos para passar matrizes de dados e ponteiros para dados. Você pode usar esses atributos para especificar características de matrizes e vários níveis de ponteiros.
ms.assetid: 482be83f-eb09-40a0-8dd6-a0cbf5dc4485
keywords:
- MIDL de IDL, atributos, matriz e ponteiro de tamanho
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b0f9ba435d5c413ea152c2bc9b492486ccc1be94
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103823716"
---
# <a name="array-and-sized-pointer-attributes"></a><span data-ttu-id="5411b-105">Atributos de matriz e de Sized-Pointer</span><span class="sxs-lookup"><span data-stu-id="5411b-105">Array and Sized-Pointer Attributes</span></span>

<span data-ttu-id="5411b-106">O MIDL fornece um rico conjunto de recursos para passar matrizes de dados e ponteiros para dados.</span><span class="sxs-lookup"><span data-stu-id="5411b-106">MIDL provides a rich set of features for passing arrays of data and pointers to data.</span></span> <span data-ttu-id="5411b-107">Você pode usar esses atributos para especificar características de matrizes e vários níveis de ponteiros.</span><span class="sxs-lookup"><span data-stu-id="5411b-107">You can use these attributes to specify characteristics of arrays and multiple levels of pointers.</span></span>



| <span data-ttu-id="5411b-108">Atributo</span><span class="sxs-lookup"><span data-stu-id="5411b-108">Attribute</span></span>                       | <span data-ttu-id="5411b-109">Uso</span><span class="sxs-lookup"><span data-stu-id="5411b-109">Usage</span></span>                                                                                                                                                                                                |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5411b-110">**o tamanho \_ é**</span><span class="sxs-lookup"><span data-stu-id="5411b-110">**size\_is**</span></span>](size-is.md)     | <span data-ttu-id="5411b-111">Especifica a quantidade de memória a ser alocada para ponteiros de tamanho, ponteiros de tamanho para ponteiros de tamanho e matrizes de dimensão única ou multidimensional.</span><span class="sxs-lookup"><span data-stu-id="5411b-111">Specifies the amount of memory to be allocated for sized pointers, sized pointers to sized pointers, and single- or multidimensional arrays.</span></span>                                                         |
| [<span data-ttu-id="5411b-112">**máximo \_ é**</span><span class="sxs-lookup"><span data-stu-id="5411b-112">**max\_is**</span></span>](max-is.md)       | <span data-ttu-id="5411b-113">O valor máximo para um índice de matriz.</span><span class="sxs-lookup"><span data-stu-id="5411b-113">The maximum value for an array index.</span></span>                                                                                                                                                                |
| [<span data-ttu-id="5411b-114">**comprimento \_ é**</span><span class="sxs-lookup"><span data-stu-id="5411b-114">**length\_is**</span></span>](length-is.md) | <span data-ttu-id="5411b-115">O número de elementos da matriz a serem transmitidos.</span><span class="sxs-lookup"><span data-stu-id="5411b-115">The number of array elements to be transmitted.</span></span>                                                                                                                                                      |
| [<span data-ttu-id="5411b-116">**primeiro \_ é**</span><span class="sxs-lookup"><span data-stu-id="5411b-116">**first\_is**</span></span>](first-is.md)   | <span data-ttu-id="5411b-117">O índice do primeiro elemento de matriz a ser transmitido.</span><span class="sxs-lookup"><span data-stu-id="5411b-117">The index of the first array element to be transmitted.</span></span>                                                                                                                                              |
| [<span data-ttu-id="5411b-118">**último \_ é**</span><span class="sxs-lookup"><span data-stu-id="5411b-118">**last\_is**</span></span>](last-is.md)     | <span data-ttu-id="5411b-119">Fornece o índice do último elemento de matriz a ser transmitido.</span><span class="sxs-lookup"><span data-stu-id="5411b-119">Gives the index of the last array element to be transmitted.</span></span>                                                                                                                                         |
| [<span data-ttu-id="5411b-120">**string**</span><span class="sxs-lookup"><span data-stu-id="5411b-120">**string**</span></span>](string.md)        | <span data-ttu-id="5411b-121">Indica que a matriz de [**caracteres**](char-idl.md)unidimensionais, [**WCHAR \_ t**](wchar-t.md), [**byte**](byte.md) (ou equivalente) ou o ponteiro para tal matriz deve ser manipulada como uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5411b-121">Indicates that the one-dimensional [**char**](char-idl.md), [**wchar\_t**](wchar-t.md), [**byte**](byte.md) (or equivalent) array, or the pointer to such an array, is to be handled as a string.</span></span> |
| [<span data-ttu-id="5411b-122">**amplitude**</span><span class="sxs-lookup"><span data-stu-id="5411b-122">**range**</span></span>](range.md)          | <span data-ttu-id="5411b-123">Especifica um intervalo de valores permitidos para argumentos ou campos cujos valores são definidos em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5411b-123">Specifies a range of allowable values for arguments or fields whose values are set at runtime.</span></span>                                                                                                       |



 

<span data-ttu-id="5411b-124">O MIDL dá suporte a três tipos de ponteiros: ponteiros de referência, ponteiros exclusivos e ponteiros completos.</span><span class="sxs-lookup"><span data-stu-id="5411b-124">MIDL supports three kinds of pointers: reference pointers, unique pointers, and full pointers.</span></span> <span data-ttu-id="5411b-125">Esses ponteiros são especificados pelos atributos de ponteiro [**ref**](ref.md), [**Unique**](unique.md)e [**PTR**](ptr.md).</span><span class="sxs-lookup"><span data-stu-id="5411b-125">These pointers are specified by the pointer attributes [**ref**](ref.md), [**unique**](unique.md), and [**ptr**](ptr.md).</span></span>

<span data-ttu-id="5411b-126">Um atributo de ponteiro pode ser aplicado como um atributo de tipo; como um atributo de campo que se aplica a um membro de estrutura, um membro de União ou um parâmetro; ou como um atributo de função que se aplica ao tipo de retorno da função.</span><span class="sxs-lookup"><span data-stu-id="5411b-126">A pointer attribute can be applied as a type attribute; as a field attribute that applies to a structure member, union member, or parameter; or as a function attribute that applies to the function return type.</span></span> <span data-ttu-id="5411b-127">O atributo pointer também pode aparecer com a palavra-chave [**\_ default do ponteiro**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="5411b-127">The pointer attribute can also appear with the [**pointer\_default**](pointer-default.md) keyword.</span></span>

<span data-ttu-id="5411b-128">Para permitir que um parâmetro de ponteiro seja alterado no valor durante uma função remota, você deve fornecer outro nível de indireção fornecendo vários declaradores de ponteiro.</span><span class="sxs-lookup"><span data-stu-id="5411b-128">To allow a pointer parameter to change in value during a remote function, you must provide another level of indirection by supplying multiple pointer declarators.</span></span> <span data-ttu-id="5411b-129">O atributo de ponteiro explícito aplicado ao parâmetro afeta apenas o Declarador de ponteiro mais à direita para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="5411b-129">The explicit pointer attribute applied to the parameter affects only the rightmost pointer declarator for the parameter.</span></span> <span data-ttu-id="5411b-130">Quando há vários declaradores de ponteiro em uma declaração de parâmetro, os outros declaradores assumem como padrão o atributo pointer especificado pelo atributo [**\_ default do ponteiro**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="5411b-130">When there are multiple pointer declarators in a parameter declaration, the other declarators default to the pointer attribute specified by the [**pointer\_default**](pointer-default.md) attribute.</span></span> <span data-ttu-id="5411b-131">Para aplicar diferentes atributos de ponteiro a vários declaradores de ponteiro, você deve definir tipos intermediários que especificam os atributos de ponteiro explícitos.</span><span class="sxs-lookup"><span data-stu-id="5411b-131">To apply different pointer attributes to multiple pointer declarators, you must define intermediate types that specify the explicit pointer attributes.</span></span>

## <a name="default-pointer-attribute-values"></a><span data-ttu-id="5411b-132">Valores de Pointer-Attribute padrão</span><span class="sxs-lookup"><span data-stu-id="5411b-132">Default Pointer-Attribute Values</span></span>

<span data-ttu-id="5411b-133">Quando nenhum atributo de ponteiro está associado a um ponteiro que é um parâmetro, presume-se que o ponteiro seja um ponteiro de [**referência**](ref.md) .</span><span class="sxs-lookup"><span data-stu-id="5411b-133">When no pointer attribute is associated with a pointer that is a parameter, the pointer is assumed to be a [**ref**](ref.md) pointer.</span></span>

<span data-ttu-id="5411b-134">Quando nenhum atributo de ponteiro está associado a um ponteiro que é membro de uma estrutura ou União, o compilador MIDL atribui atributos de ponteiro usando as seguintes regras de prioridade (1 é a mais alta):</span><span class="sxs-lookup"><span data-stu-id="5411b-134">When no pointer attribute is associated with a pointer that is a member of a structure or union, the MIDL compiler assigns pointer attributes using the following priority rules (1 is highest):</span></span>

1.  <span data-ttu-id="5411b-135">Atributos aplicados explicitamente ao tipo de ponteiro</span><span class="sxs-lookup"><span data-stu-id="5411b-135">Attributes explicitly applied to the pointer type</span></span>
2.  <span data-ttu-id="5411b-136">Atributos aplicados explicitamente ao parâmetro ou ao membro do ponteiro</span><span class="sxs-lookup"><span data-stu-id="5411b-136">Attributes explicitly applied to the pointer parameter or member</span></span>
3.  <span data-ttu-id="5411b-137">O [**atributo \_ padrão de ponteiro**](pointer-default.md) no arquivo IDL que define o tipo</span><span class="sxs-lookup"><span data-stu-id="5411b-137">The [**pointer\_default**](pointer-default.md) attribute in the IDL file that defines the type</span></span>
4.  <span data-ttu-id="5411b-138">O [**atributo \_ padrão de ponteiro**](pointer-default.md) no arquivo IDL que importa o tipo</span><span class="sxs-lookup"><span data-stu-id="5411b-138">The [**pointer\_default**](pointer-default.md) attribute in the IDL file that imports the type</span></span>
5.  <span data-ttu-id="5411b-139">[**PTR**](ptr.md) (modo uso); [**exclusivo**](unique.md) (modo Microsoft RPC padrão)</span><span class="sxs-lookup"><span data-stu-id="5411b-139">[**ptr**](ptr.md) (osf mode); [**unique**](unique.md) (Microsoft RPC default mode)</span></span>

<span data-ttu-id="5411b-140">Quando o arquivo IDL é compilado no modo padrão, os arquivos importados podem herdar atributos de ponteiro de Importando arquivos.</span><span class="sxs-lookup"><span data-stu-id="5411b-140">When the IDL file is compiled in default mode, imported files can inherit pointer attributes from importing files.</span></span> <span data-ttu-id="5411b-141">Esse recurso não está disponível quando você compila usando a opção/[**uso**](-osf.md) .</span><span class="sxs-lookup"><span data-stu-id="5411b-141">This feature is not available when you compile using the /[**osf**](-osf.md) switch.</span></span> <span data-ttu-id="5411b-142">Para obter mais informações, consulte [**importar**](import.md).</span><span class="sxs-lookup"><span data-stu-id="5411b-142">For more information, see [**import**](import.md).</span></span>

## <a name="function-return-types"></a><span data-ttu-id="5411b-143">Tipos de retorno de função</span><span class="sxs-lookup"><span data-stu-id="5411b-143">Function Return Types</span></span>

<span data-ttu-id="5411b-144">Um ponteiro retornado por uma função deve ser um ponteiro [**exclusivo**](unique.md) ou um ponteiro completo.</span><span class="sxs-lookup"><span data-stu-id="5411b-144">A pointer returned by a function must be a [**unique**](unique.md) pointer or a full pointer.</span></span> <span data-ttu-id="5411b-145">O compilador MIDL relatará um erro se um resultado de função for um ponteiro de referência, explicitamente ou por padrão.</span><span class="sxs-lookup"><span data-stu-id="5411b-145">The MIDL compiler reports an error if a function result is a reference pointer, either explicitly or by default.</span></span> <span data-ttu-id="5411b-146">O ponteiro retornado sempre indica um novo armazenamento.</span><span class="sxs-lookup"><span data-stu-id="5411b-146">The returned pointer always indicates new storage.</span></span>

<span data-ttu-id="5411b-147">As funções que retornam um valor de ponteiro podem especificar um atributo de ponteiro como um atributo de função.</span><span class="sxs-lookup"><span data-stu-id="5411b-147">Functions that return a pointer value can specify a pointer attribute as a function attribute.</span></span> <span data-ttu-id="5411b-148">Se um atributo de ponteiro não estiver presente, o ponteiro de resultado da função usará o valor fornecido como o atributo [**\_ padrão do ponteiro**](pointer-default.md) .</span><span class="sxs-lookup"><span data-stu-id="5411b-148">If a pointer attribute is not present, the function-result pointer uses the value provided as the [**pointer\_default**](pointer-default.md) attribute.</span></span>

## <a name="pointer-attributes-in-type-definitions"></a><span data-ttu-id="5411b-149">Atributos de ponteiro em definições de tipo</span><span class="sxs-lookup"><span data-stu-id="5411b-149">Pointer Attributes in Type Definitions</span></span>

<span data-ttu-id="5411b-150">Quando você especifica um atributo de ponteiro no nível superior de uma instrução [**typedef**](typedef.md) , o atributo especificado é aplicado ao Declarador de ponteiro, conforme esperado.</span><span class="sxs-lookup"><span data-stu-id="5411b-150">When you specify a pointer attribute at the top level of a [**typedef**](typedef.md) statement, the specified attribute is applied to the pointer declarator, as expected.</span></span> <span data-ttu-id="5411b-151">Quando nenhum atributo de ponteiro é especificado, os declaradores de ponteiro no nível superior de uma instrução typedef herdam o tipo de atributo pointer quando usado.</span><span class="sxs-lookup"><span data-stu-id="5411b-151">When no pointer attribute is specified, pointer declarators at the top level of a typedef statement inherit the pointer attribute type when used.</span></span>

<span data-ttu-id="5411b-152">A IDL de DCE não permite que o mesmo atributo de ponteiro seja explicitamente aplicado duas vezes — por exemplo, na declaração de [**typedef**](typedef.md) e na lista de atributos de parâmetro.</span><span class="sxs-lookup"><span data-stu-id="5411b-152">DCE IDL does not allow the same pointer attribute to be explicitly applied twice—for example, in both the [**typedef**](typedef.md) declaration and the parameter attribute list.</span></span> <span data-ttu-id="5411b-153">Quando você usa o modo padrão (extensões da Microsoft) do compilador MIDL, essa restrição é reduzida.</span><span class="sxs-lookup"><span data-stu-id="5411b-153">When you use the default (Microsoft extensions) mode of the MIDL compiler, this constraint is relaxed.</span></span>

<span data-ttu-id="5411b-154">Para obter uma discussão sobre como usar matrizes MIDL e ponteiros em chamadas de procedimento remoto, consulte [matrizes e ponteiros](/windows/desktop/Rpc/arrays-and-pointers).</span><span class="sxs-lookup"><span data-stu-id="5411b-154">For a discussion of using MIDL arrays and pointers in remote procedure calls, see [Arrays and Pointers](/windows/desktop/Rpc/arrays-and-pointers).</span></span>

 

 