---
description: Para permitir que os aplicativos coloquem a saída na memória em vez de enviá-la a um dispositivo real, use um contexto de dispositivo especial para operações de bitmap chamadas de contexto de dispositivo de memória.
ms.assetid: 0a682dc4-31a4-43c8-b0b1-ab01986b1dac
title: Contextos de dispositivo de memória
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 095de04fdf965a87011895015ad7ea6c9782e286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103661602"
---
# <a name="memory-device-contexts"></a><span data-ttu-id="7b36a-103">Contextos de dispositivo de memória</span><span class="sxs-lookup"><span data-stu-id="7b36a-103">Memory Device Contexts</span></span>

<span data-ttu-id="7b36a-104">Para permitir que os aplicativos coloquem a saída na memória em vez de enviá-la a um dispositivo real, use um contexto de dispositivo especial para operações de bitmap chamadas de *contexto de dispositivo de memória*.</span><span class="sxs-lookup"><span data-stu-id="7b36a-104">To enable applications to place output in memory rather than sending it to an actual device, use a special device context for bitmap operations called a *memory device context*.</span></span> <span data-ttu-id="7b36a-105">Um controlador de domínio de memória permite que o sistema trate uma parte da memória como um dispositivo virtual.</span><span class="sxs-lookup"><span data-stu-id="7b36a-105">A memory DC enables the system to treat a portion of memory as a virtual device.</span></span> <span data-ttu-id="7b36a-106">É uma matriz de bits na memória que um aplicativo pode usar temporariamente para armazenar os dados de cor de bitmaps criados em uma superfície de desenho normal.</span><span class="sxs-lookup"><span data-stu-id="7b36a-106">It is an array of bits in memory that an application can use temporarily to store the color data for bitmaps created on a normal drawing surface.</span></span> <span data-ttu-id="7b36a-107">Como o bitmap é compatível com o dispositivo, um controlador de domínio de memória também é chamado de *contexto de dispositivo compatível*.</span><span class="sxs-lookup"><span data-stu-id="7b36a-107">Because the bitmap is compatible with the device, a memory DC is also sometimes referred to as a *compatible device context*.</span></span>

<span data-ttu-id="7b36a-108">O DC de memória armazena imagens de bitmap para um dispositivo específico.</span><span class="sxs-lookup"><span data-stu-id="7b36a-108">The memory DC stores bitmap images for a particular device.</span></span> <span data-ttu-id="7b36a-109">Um aplicativo pode criar um controlador de domínio de memória chamando a função [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) .</span><span class="sxs-lookup"><span data-stu-id="7b36a-109">An application can create a memory DC by calling the [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) function.</span></span>

<span data-ttu-id="7b36a-110">O bitmap original em um controlador de domínio de memória é simplesmente um espaço reservado.</span><span class="sxs-lookup"><span data-stu-id="7b36a-110">The original bitmap in a memory DC is simply a placeholder.</span></span> <span data-ttu-id="7b36a-111">Suas dimensões são um pixel em um pixel.</span><span class="sxs-lookup"><span data-stu-id="7b36a-111">Its dimensions are one pixel by one pixel.</span></span> <span data-ttu-id="7b36a-112">Antes que um aplicativo possa começar a desenhar, ele deve selecionar um bitmap com a largura e a altura apropriadas no controlador de domínio chamando a função [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) .</span><span class="sxs-lookup"><span data-stu-id="7b36a-112">Before an application can begin drawing, it must select a bitmap with the appropriate width and height into the DC by calling the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function.</span></span> <span data-ttu-id="7b36a-113">Para criar um bitmap das dimensões apropriadas, use a função [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect)ou [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) .</span><span class="sxs-lookup"><span data-stu-id="7b36a-113">To create a bitmap of the appropriate dimensions, use the [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect), or [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function.</span></span> <span data-ttu-id="7b36a-114">Depois que o bitmap é selecionado no controlador de domínio de memória, o sistema substitui a matriz de bit único por uma matriz grande o suficiente para armazenar informações de cor para o retângulo especificado de pixels.</span><span class="sxs-lookup"><span data-stu-id="7b36a-114">After the bitmap is selected into the memory DC, the system replaces the single-bit array with an array large enough to store color information for the specified rectangle of pixels.</span></span>

<span data-ttu-id="7b36a-115">Quando um aplicativo passa o identificador retornado pelo [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) para uma das funções de desenho, a saída solicitada não aparece na superfície de desenho de um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7b36a-115">When an application passes the handle returned by [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) to one of the drawing functions, the requested output does not appear on a device's drawing surface.</span></span> <span data-ttu-id="7b36a-116">Em vez disso, o sistema armazena as informações de cor da linha resultante, da curva, do texto ou da região na matriz de bits.</span><span class="sxs-lookup"><span data-stu-id="7b36a-116">Instead, the system stores the color information for the resultant line, curve, text, or region in the array of bits.</span></span> <span data-ttu-id="7b36a-117">O aplicativo pode copiar a imagem armazenada na memória de volta para uma superfície de desenho chamando a função [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) , identificando o controlador de domínio de memória como o contexto do dispositivo de origem e um controlador de domínio de janela ou de tela como o contexto do dispositivo de destino.</span><span class="sxs-lookup"><span data-stu-id="7b36a-117">The application can copy the image stored in memory back onto a drawing surface by calling the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function, identifying the memory DC as the source device context and a window or screen DC as the target device context.</span></span>

<span data-ttu-id="7b36a-118">Ao exibir uma DIB ou um BDD criado por meio de um DIB em um dispositivo de paleta, você pode melhorar a velocidade na qual a imagem é desenhada organizando a paleta lógica para corresponder ao layout da paleta do sistema.</span><span class="sxs-lookup"><span data-stu-id="7b36a-118">When displaying a DIB or a DDB created from a DIB on a palette device, you can improve the speed at which the image is drawn by arranging the logical palette to match the layout of the system palette.</span></span> <span data-ttu-id="7b36a-119">Para fazer isso, chame [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) com o valor NUMRESERVED para obter o número de cores reservadas no sistema.</span><span class="sxs-lookup"><span data-stu-id="7b36a-119">To do this, call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) with the NUMRESERVED value to get the number of reserved colors in the system.</span></span> <span data-ttu-id="7b36a-120">Em seguida, chame [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) e preencha as entradas First e Last NUMRESERVED/2 da paleta lógica com as cores do sistema correspondentes.</span><span class="sxs-lookup"><span data-stu-id="7b36a-120">Then call [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) and fill in the first and last NUMRESERVED/2 entries of the logical palette with the corresponding system colors.</span></span> <span data-ttu-id="7b36a-121">Por exemplo, se NUMRESERVED for 20, você preencherá as primeiras e últimas 10 entradas da paleta lógica com as cores do sistema.</span><span class="sxs-lookup"><span data-stu-id="7b36a-121">For example, if NUMRESERVED is 20, you would fill in the first and last 10 entries of the logical palette with the system colors.</span></span> <span data-ttu-id="7b36a-122">Em seguida, preencha as cores de 256-NUMRESERVED restantes da paleta lógica (em nosso exemplo, as cores de 236 restantes) com cores da DIB e defina o \_ sinalizador de DESrecolhimento do PC em cada uma dessas cores.</span><span class="sxs-lookup"><span data-stu-id="7b36a-122">Then fill in the remaining 256-NUMRESERVED colors of the logical palette (in our example, the remaining 236 colors) with colors from the DIB and set the PC\_NOCOLLAPSE flag on each of these colors.</span></span>

<span data-ttu-id="7b36a-123">Para obter mais informações sobre cores e paletas, consulte [cores](colors.md).</span><span class="sxs-lookup"><span data-stu-id="7b36a-123">For more information about color and palettes, see [Colors](colors.md).</span></span> <span data-ttu-id="7b36a-124">Para obter mais informações sobre bitmaps e operações de bitmap, consulte [bitmaps](bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="7b36a-124">For more information about bitmaps and bitmap operations, see [Bitmaps](bitmaps.md).</span></span>

 

 



