---
description: Um contexto de dispositivo privado permite que um aplicativo Evite recuperar e inicializar um contexto de dispositivo de vídeo cada vez que o aplicativo deve desenhar em uma janela.
ms.assetid: 8de5a14b-a8b3-42a5-81f3-bf3c357052cb
title: Contextos de dispositivo de exibição particular
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 451dbd3c0a232610026740d0ea0fa817ea2034b8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104502400"
---
# <a name="private-display-device-contexts"></a><span data-ttu-id="4b4ee-103">Contextos de dispositivo de exibição particular</span><span class="sxs-lookup"><span data-stu-id="4b4ee-103">Private Display Device Contexts</span></span>

<span data-ttu-id="4b4ee-104">Um *contexto de dispositivo privado* permite que um aplicativo Evite recuperar e inicializar um contexto de dispositivo de vídeo cada vez que o aplicativo deve desenhar em uma janela.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-104">A *private device context* enables an application to avoid retrieving and initializing a display device context each time the application must draw in a window.</span></span> <span data-ttu-id="4b4ee-105">Contextos de dispositivo privado são úteis para janelas que exigem muitas alterações nos valores dos atributos do contexto do dispositivo para prepará-lo para desenho.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-105">Private device contexts are useful for windows that require many changes to the values of the attributes of the device context to prepare it for drawing.</span></span> <span data-ttu-id="4b4ee-106">Contextos de dispositivo privado reduzem o tempo necessário para preparar o contexto do dispositivo e, portanto, o tempo necessário para realizar o desenho na janela.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-106">Private device contexts reduce the time required to prepare the device context and therefore the time needed to carry out drawing in the window.</span></span>

<span data-ttu-id="4b4ee-107">Um aplicativo direciona o sistema para criar um contexto de dispositivo privado para uma janela especificando o estilo CS \_ OWNDC na classe Window.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-107">An application directs the system to create a private device context for a window by specifying the CS\_OWNDC style in the window class.</span></span> <span data-ttu-id="4b4ee-108">O sistema cria um contexto de dispositivo privado exclusivo toda vez que cria uma nova janela pertencente à classe.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-108">The system creates a unique private device context each time it creates a new window belonging to the class.</span></span> <span data-ttu-id="4b4ee-109">Inicialmente, o contexto do dispositivo privado tem os mesmos valores padrão para atributos como um contexto de dispositivo comum, mas o aplicativo pode modificá-los a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-109">Initially, the private device context has the same default values for attributes as a common device context, but the application can modify these at any time.</span></span> <span data-ttu-id="4b4ee-110">O sistema preserva as alterações no contexto do dispositivo durante a vida útil da janela ou até que o aplicativo faça alterações adicionais.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-110">The system preserves changes to the device context for the life of the window or until the application makes additional changes.</span></span>

<span data-ttu-id="4b4ee-111">Um aplicativo pode recuperar um identificador para o contexto do dispositivo privado usando a função [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) a qualquer momento após a janela ser criada.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-111">An application can retrieve a handle to the private device context by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function any time after the window is created.</span></span> <span data-ttu-id="4b4ee-112">O aplicativo deve recuperar o identificador apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-112">The application must retrieve the handle only once.</span></span> <span data-ttu-id="4b4ee-113">Daí em diante, ele pode manter e usar o identificador a qualquer número de vezes.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-113">Thereafter, it can keep and use the handle any number of times.</span></span> <span data-ttu-id="4b4ee-114">Como um contexto de dispositivo privado não faz parte do cache de contexto do dispositivo de vídeo, um aplicativo nunca precisa liberar o contexto do dispositivo usando a função [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) .</span><span class="sxs-lookup"><span data-stu-id="4b4ee-114">Because a private device context is not part of the display device context cache, an application need never release the device context by using the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function.</span></span>

<span data-ttu-id="4b4ee-115">O sistema ajusta automaticamente o contexto do dispositivo para refletir as alterações na janela, como mover ou dimensionar.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-115">The system automatically adjusts the device context to reflect changes to the window, such as moving or sizing.</span></span> <span data-ttu-id="4b4ee-116">Isso garante que todas as janelas sobrepostas sempre sejam recortadas corretamente; ou seja, nenhuma ação é exigida pelo aplicativo para garantir o recorte.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-116">This ensures that any overlapping windows are always properly clipped; that is, no action is required by the application to ensure clipping.</span></span> <span data-ttu-id="4b4ee-117">No entanto, o sistema não revisa o contexto do dispositivo para incluir a região de atualização.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-117">However, the system does not revise the device context to include the update region.</span></span> <span data-ttu-id="4b4ee-118">Portanto, ao processar uma mensagem de [**\_ pintura do WM**](wm-paint.md) , o aplicativo deve incorporar a região de atualização chamando [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) ou recuperando a região de atualização e interseccionando-a com a região de recorte atual.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-118">Therefore, when processing a [**WM\_PAINT**](wm-paint.md) message, the application must incorporate the update region either by calling [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) or by retrieving the update region and intersecting it with the current clipping region.</span></span> <span data-ttu-id="4b4ee-119">Se o aplicativo não chamar **BeginPaint**, ele deverá validar explicitamente a região de atualização usando a função [**ValidateRect**](/windows/desktop/api/Winuser/nf-winuser-validaterect) ou [**ValidateRgn**](/windows/desktop/api/Winuser/nf-winuser-validatergn) .</span><span class="sxs-lookup"><span data-stu-id="4b4ee-119">If the application does not call **BeginPaint**, it must explicitly validate the update region by using the [**ValidateRect**](/windows/desktop/api/Winuser/nf-winuser-validaterect) or [**ValidateRgn**](/windows/desktop/api/Winuser/nf-winuser-validatergn) function.</span></span> <span data-ttu-id="4b4ee-120">Se o aplicativo não validar a região de atualização, a janela receberá uma série infinita de mensagens de **\_ pintura do WM** .</span><span class="sxs-lookup"><span data-stu-id="4b4ee-120">If the application does not validate the update region, the window receives an endless series of **WM\_PAINT** messages.</span></span>

<span data-ttu-id="4b4ee-121">Como [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) oculta o cursor se uma janela estiver exibindo-o, um aplicativo que chama **BeginPaint** também deverá chamar a função [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) para restaurar o cursor.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-121">Because [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) hides the caret if a window is showing it, an application that calls **BeginPaint** should also call the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function to restore the caret.</span></span> <span data-ttu-id="4b4ee-122">**EndPaint** não tem nenhum outro efeito em um contexto de dispositivo privado.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-122">**EndPaint** has no other effect on a private device context.</span></span>

<span data-ttu-id="4b4ee-123">Embora um contexto de dispositivo privado seja conveniente para usar, ele é de uso intensivo de memória em termos de recursos do sistema, exigindo 800 ou mais bytes para armazenar.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-123">Although a private device context is convenient to use, it is memory-intensive in terms of system resources, requiring 800 or more bytes to store.</span></span> <span data-ttu-id="4b4ee-124">Contextos de dispositivo privado são recomendados quando as considerações de desempenho superam os custos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-124">Private device contexts are recommended when performance considerations outweigh storage costs.</span></span>

<span data-ttu-id="4b4ee-125">O sistema inclui o contexto do dispositivo privado ao enviar a mensagem do [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-125">The system includes the private device context when sending the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message to the application.</span></span> <span data-ttu-id="4b4ee-126">As seleções atuais do contexto do dispositivo privado, incluindo o modo de mapeamento, estão em vigor quando o aplicativo ou o sistema processa essas mensagens.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-126">The current selections of the private device context, including mapping mode, are in effect when the application or the system processes these messages.</span></span> <span data-ttu-id="4b4ee-127">Para evitar efeitos indesejáveis, o sistema usa coordenadas lógicas ao apagar o plano de fundo; por exemplo, ele usa a função [**GetClipBox**](/windows/desktop/api/Wingdi/nf-wingdi-getclipbox) para recuperar as coordenadas lógicas da área a serem apagadas e passa essas coordenadas para a função [**FillRect**](/windows/desktop/api/Winuser/nf-winuser-fillrect) .</span><span class="sxs-lookup"><span data-stu-id="4b4ee-127">To avoid undesirable effects, the system uses logical coordinates when erasing the background; for example, it uses the [**GetClipBox**](/windows/desktop/api/Wingdi/nf-wingdi-getclipbox) function to retrieve the logical coordinates of the area to erase and passes these coordinates to the [**FillRect**](/windows/desktop/api/Winuser/nf-winuser-fillrect) function.</span></span> <span data-ttu-id="4b4ee-128">Os aplicativos que processam essas mensagens podem usar técnicas semelhantes.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-128">Applications that process these messages can use similar techniques.</span></span>

<span data-ttu-id="4b4ee-129">Um aplicativo pode usar a função [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) para forçar o sistema a retornar um contexto de dispositivo comum para a janela que tem um contexto de dispositivo privado.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-129">An application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to force the system to return a common device context for the window that has a private device context.</span></span> <span data-ttu-id="4b4ee-130">Isso é útil para realizar o rápido toque em uma janela sem alterar os valores atuais dos atributos do contexto do dispositivo privado.</span><span class="sxs-lookup"><span data-stu-id="4b4ee-130">This is useful for carrying out quick touch-ups to a window without changing the current values of the attributes of the private device context.</span></span>

 

 
