---
description: O sistema mantém uma paleta do sistema para cada dispositivo que usa paletas.
ms.assetid: 4c93ce8c-6b3a-4016-bb47-786c25b93374
title: Paleta do sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d8738cf63eef0b77f2d184f2cf95b6550b81053
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104988957"
---
# <a name="system-palette"></a><span data-ttu-id="49666-103">Paleta do sistema</span><span class="sxs-lookup"><span data-stu-id="49666-103">System Palette</span></span>

<span data-ttu-id="49666-104">O sistema mantém uma *paleta do sistema* para cada dispositivo que usa paletas.</span><span class="sxs-lookup"><span data-stu-id="49666-104">The system maintains a *system palette* for each device that uses palettes.</span></span> <span data-ttu-id="49666-105">A paleta do sistema contém os valores de cor para todas as cores que podem ser exibidas ou desenhadas no momento pelo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="49666-105">The system palette contains the color values for all colors that can currently be displayed or drawn by the device.</span></span> <span data-ttu-id="49666-106">Além de exibir o conteúdo da paleta do sistema, os aplicativos não podem acessar a paleta do sistema diretamente.</span><span class="sxs-lookup"><span data-stu-id="49666-106">Other than viewing the contents of the system palette, applications cannot access the system palette directly.</span></span> <span data-ttu-id="49666-107">Em vez disso, o sistema tem controle total da paleta do sistema e permite o acesso somente por meio do uso de paletas lógicas.</span><span class="sxs-lookup"><span data-stu-id="49666-107">Instead, the system has complete control of the system palette and permits access only through the use of logical palettes.</span></span>

<span data-ttu-id="49666-108">Um aplicativo pode exibir o conteúdo da paleta do sistema usando a função [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) .</span><span class="sxs-lookup"><span data-stu-id="49666-108">An application can view the contents of the system palette by using the [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) function.</span></span> <span data-ttu-id="49666-109">Essa função recupera o conteúdo de uma ou mais entradas, até o número total de entradas na paleta do sistema.</span><span class="sxs-lookup"><span data-stu-id="49666-109">This function retrieves the contents of one or more entries, up to the total number of entries in the system palette.</span></span> <span data-ttu-id="49666-110">O total é sempre igual ao número retornado para o valor SIZEPALETTE pela função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) e é igual ao tamanho máximo de qualquer paleta lógica específica.</span><span class="sxs-lookup"><span data-stu-id="49666-110">The total is always equal to the number returned for the SIZEPALETTE value by the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and is the same as the maximum size for any given logical palette.</span></span>

<span data-ttu-id="49666-111">Embora os aplicativos não possam alterar as cores diretamente na paleta do sistema, eles podem causar alterações ao concretizar paletas lógicas.</span><span class="sxs-lookup"><span data-stu-id="49666-111">Although applications cannot change colors in the system palette directly, they may cause changes when realizing logical palettes.</span></span> <span data-ttu-id="49666-112">Para obter uma paleta, o sistema examina cada cor solicitada e tenta encontrar uma entrada na paleta do sistema que contém uma correspondência exata.</span><span class="sxs-lookup"><span data-stu-id="49666-112">To realize a palette, the system examines each requested color and attempts to find an entry in the system palette that contains an exact match.</span></span> <span data-ttu-id="49666-113">Se o sistema encontrar uma cor correspondente, ele mapeará o índice de paleta lógica para o índice de paleta do sistema correspondente.</span><span class="sxs-lookup"><span data-stu-id="49666-113">If the system finds a matching color, it maps the logical palette index to the corresponding system palette index.</span></span> <span data-ttu-id="49666-114">Se o sistema não encontrar uma correspondência exata, ele copiará a cor solicitada para uma entrada da paleta do sistema não usada antes de mapear os índices.</span><span class="sxs-lookup"><span data-stu-id="49666-114">If the system does not find an exact match, it copies the requested color to an unused system palette entry before mapping the indexes.</span></span> <span data-ttu-id="49666-115">Se todas as entradas da paleta do sistema estiverem em uso, o sistema mapeará o índice da paleta lógica para a entrada da paleta do sistema cuja cor corresponde à cor solicitada mais próxima.</span><span class="sxs-lookup"><span data-stu-id="49666-115">If all system palette entries are in use, the system maps the logical palette index to the system palette entry whose color most closely matches the requested color.</span></span> <span data-ttu-id="49666-116">Depois que esse mapeamento é definido, os aplicativos não podem substituí-lo.</span><span class="sxs-lookup"><span data-stu-id="49666-116">After this mapping is set, applications cannot override it.</span></span> <span data-ttu-id="49666-117">Por exemplo, os aplicativos não podem usar índices da paleta do sistema para especificar cores; somente os índices lógicos de paleta são permitidos.</span><span class="sxs-lookup"><span data-stu-id="49666-117">For example, applications cannot use system palette indexes to specify colors; only logical palette indexes are permitted.</span></span>

<span data-ttu-id="49666-118">Os aplicativos podem modificar a maneira como os índices são mapeados definindo o membro **peFlags** da estrutura [**PaletteEntry**](/previous-versions//dd162769(v=vs.85)) para valores selecionados ao criar a paleta lógica.</span><span class="sxs-lookup"><span data-stu-id="49666-118">Applications can modify the way indexes are mapped by setting the **peFlags** member of the [**PALETTEENTRY**](/previous-versions//dd162769(v=vs.85)) structure to selected values when creating the logical palette.</span></span> <span data-ttu-id="49666-119">Por exemplo, o \_ sinalizador de DESrecolhimento do PC direciona o sistema para copiar imediatamente a cor solicitada para uma entrada da paleta do sistema não usada, independentemente de uma entrada da paleta do sistema já conter essa cor.</span><span class="sxs-lookup"><span data-stu-id="49666-119">For example, the PC\_NOCOLLAPSE flag directs the system to immediately copy the requested color to an unused system palette entry regardless of whether a system palette entry already contains that color.</span></span> <span data-ttu-id="49666-120">Além disso, o \_ sinalizador PC Explicit direciona o sistema para mapear o índice de paleta lógica para um índice de paleta do sistema explicitamente determinado.</span><span class="sxs-lookup"><span data-stu-id="49666-120">Also, the PC\_EXPLICIT flag directs the system to map the logical palette index to an explicitly given system palette index.</span></span> <span data-ttu-id="49666-121">(O aplicativo fornece o índice da paleta do sistema na palavra de ordem inferior da estrutura **PaletteEntry** .)</span><span class="sxs-lookup"><span data-stu-id="49666-121">(The application gives the system palette index in the low-order word of the **PALETTEENTRY** structure.)</span></span>

<span data-ttu-id="49666-122">As paletas podem ser obtidas como uma paleta de plano de fundo ou uma paleta de primeiro plano especificando **true** ou **false** respectivamente para o parâmetro *bForceBackground* na função [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) .</span><span class="sxs-lookup"><span data-stu-id="49666-122">Palettes can be realized as either a background palette or a foreground palette by specifying **TRUE** or **FALSE** respectively for the *bForceBackground* parameter in the [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) function.</span></span> <span data-ttu-id="49666-123">Pode haver apenas uma paleta de primeiro plano no sistema de cada vez.</span><span class="sxs-lookup"><span data-stu-id="49666-123">There can be only one foreground palette in the system at a time.</span></span> <span data-ttu-id="49666-124">Se a janela for a janela ativa no momento ou um descendente da janela ativa no momento, ela poderá obter uma paleta de primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="49666-124">If the window is the currently active window or a descendent of the currently active window, it can realize a foreground palette.</span></span> <span data-ttu-id="49666-125">Caso contrário, a paleta será percebida como uma paleta de plano de fundo, independentemente do valor do parâmetro *bForceBackground* .</span><span class="sxs-lookup"><span data-stu-id="49666-125">Otherwise the palette is realized as a background palette regardless of the value of the *bForceBackground* parameter.</span></span> <span data-ttu-id="49666-126">A propriedade Critical de uma paleta de primeiro plano é que, quando realizada, ela pode substituir todas as entradas (exceto as entradas estáticas) na paleta do sistema.</span><span class="sxs-lookup"><span data-stu-id="49666-126">The critical property of a foreground palette is that, when realized, it can overwrite all entries (except for the static entries) in the system palette.</span></span> <span data-ttu-id="49666-127">O sistema realiza isso marcando todas as entradas que não são estáticas na paleta do sistema como não utilizadas antes da realização de uma paleta de primeiro plano, eliminando assim todas as entradas usadas.</span><span class="sxs-lookup"><span data-stu-id="49666-127">The system accomplishes this by marking all of the entries that are not static in the system palette as unused before the realization of a foreground palette, thereby eliminating all of the used entries.</span></span> <span data-ttu-id="49666-128">Nenhum pré-processamento ocorre na paleta do sistema para uma realização de uma paleta de plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="49666-128">No preprocessing occurs on the system palette for a background palette realization.</span></span> <span data-ttu-id="49666-129">A paleta de primeiro plano define todas as cores não estáticas possíveis.</span><span class="sxs-lookup"><span data-stu-id="49666-129">The foreground palette sets all of the possible nonstatic colors.</span></span> <span data-ttu-id="49666-130">As paletas de plano de fundo podem definir apenas o que permanece aberto e são priorizadas de maneira primeiro, de primeira a chegar.</span><span class="sxs-lookup"><span data-stu-id="49666-130">Background palettes can set only what remains open and are prioritized in a first-come, first-serve manner.</span></span> <span data-ttu-id="49666-131">Normalmente, os aplicativos usam paletas de plano de fundo para janelas filhas que percebem suas próprias paletas individuais.</span><span class="sxs-lookup"><span data-stu-id="49666-131">Typically, applications use background palettes for child windows which realize their own individual palettes.</span></span> <span data-ttu-id="49666-132">Isso ajuda a minimizar o número de alterações que ocorrem na paleta do sistema.</span><span class="sxs-lookup"><span data-stu-id="49666-132">This helps minimize the number of changes that occur to the system palette.</span></span>

<span data-ttu-id="49666-133">Uma entrada da paleta do sistema não usada é qualquer entrada que não esteja reservada e não contenha uma cor estática.</span><span class="sxs-lookup"><span data-stu-id="49666-133">An unused system palette entry is any entry that is not reserved and does not contain a static color.</span></span> <span data-ttu-id="49666-134">As entradas reservadas são explicitamente marcadas com o \_ valor reservado do PC.</span><span class="sxs-lookup"><span data-stu-id="49666-134">Reserved entries are explicitly marked with the PC\_RESERVED value.</span></span> <span data-ttu-id="49666-135">Essas entradas são criadas quando um aplicativo percebe uma paleta lógica para a animação da paleta.</span><span class="sxs-lookup"><span data-stu-id="49666-135">These entries are created when an application realizes a logical palette for palette animation.</span></span> <span data-ttu-id="49666-136">As entradas de cores estáticas são criadas pelo sistema e correspondem às cores na paleta padrão.</span><span class="sxs-lookup"><span data-stu-id="49666-136">Static color entries are created by the system and correspond to the colors in the default palette.</span></span> <span data-ttu-id="49666-137">A função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) pode ser usada para recuperar o valor de NUMRESERVED, que especifica o número de entradas da paleta do sistema reservadas para cores estáticas.</span><span class="sxs-lookup"><span data-stu-id="49666-137">The [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function can be used to retrieve the NUMRESERVED value, which specifies the number of system palette entries reserved for static colors.</span></span>

<span data-ttu-id="49666-138">Como a paleta do sistema tem um número limitado de entradas, a seleção e a realização de uma paleta lógica para um determinado dispositivo podem afetar as cores associadas a outras paletas lógicas para o mesmo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="49666-138">Because the system palette has a limited number of entries, selecting and realizing a logical palette for a given device may affect the colors associated with other logical palettes for the same device.</span></span> <span data-ttu-id="49666-139">Essas alterações de cor são especialmente dramáticas quando ocorrem na tela.</span><span class="sxs-lookup"><span data-stu-id="49666-139">These color changes are especially dramatic when they occur on the display.</span></span> <span data-ttu-id="49666-140">Um aplicativo pode garantir que cores razoáveis sejam usadas para sua paleta lógica selecionada no momento, redefinindo a paleta antes de cada uso.</span><span class="sxs-lookup"><span data-stu-id="49666-140">An application can make sure that reasonable colors are used for its currently selected logical palette by resetting the palette before each use.</span></span> <span data-ttu-id="49666-141">Um aplicativo redefine a paleta chamando as funções [**unpercebeuobject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) e [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) .</span><span class="sxs-lookup"><span data-stu-id="49666-141">An application resets the palette by calling the [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) and [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) functions.</span></span> <span data-ttu-id="49666-142">O uso dessas funções faz com que o sistema Remapeie as cores na paleta lógica para cores razoáveis na paleta do sistema.</span><span class="sxs-lookup"><span data-stu-id="49666-142">Using these functions causes the system to remap the colors in the logical palette to reasonable colors in the system palette.</span></span>

 

 
