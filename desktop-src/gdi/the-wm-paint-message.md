---
description: Normalmente, um aplicativo desenha em uma janela em resposta a uma mensagem do WM \_ Paint.
ms.assetid: b2317ce9-e775-450e-91f5-00f735f256a3
title: A mensagem de WM_PAINT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a69f7dab736972d8b7226890144efd8763de856a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104989093"
---
# <a name="the-wm_paint-message"></a><span data-ttu-id="08a78-103">A mensagem do WM \_ Paint</span><span class="sxs-lookup"><span data-stu-id="08a78-103">The WM\_PAINT Message</span></span>

<span data-ttu-id="08a78-104">Normalmente, um aplicativo desenha em uma janela em resposta a uma mensagem do [**WM \_ Paint**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="08a78-104">Typically, an application draws in a window in response to a [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="08a78-105">O sistema envia essa mensagem a um procedimento de janela quando as alterações na janela alteram o conteúdo da área do cliente.</span><span class="sxs-lookup"><span data-stu-id="08a78-105">The system sends this message to a window procedure when changes to the window have altered the content of the client area.</span></span> <span data-ttu-id="08a78-106">O sistema enviará a mensagem somente se não houver nenhuma outra mensagem na fila de mensagens do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="08a78-106">The system sends the message only if there are no other messages in the application message queue.</span></span>

<span data-ttu-id="08a78-107">Ao receber uma mensagem de [**\_ pintura do WM**](wm-paint.md) , um aplicativo pode chamar [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) para recuperar o contexto do dispositivo de vídeo para a área do cliente e usá-lo em chamadas para funções GDI para realizar todas as operações de desenho necessárias para atualizar a área do cliente.</span><span class="sxs-lookup"><span data-stu-id="08a78-107">Upon receiving a [**WM\_PAINT**](wm-paint.md) message, an application can call [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) to retrieve the display device context for the client area and use it in calls to GDI functions to carry out whatever drawing operations are necessary to update the client area.</span></span> <span data-ttu-id="08a78-108">Depois de concluir as operações de desenho, o aplicativo chama a função [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) para liberar o contexto do dispositivo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="08a78-108">After completing the drawing operations, the application calls the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function to release the display device context.</span></span>

<span data-ttu-id="08a78-109">Antes de [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) retornar o contexto do dispositivo de vídeo, o sistema prepara o contexto do dispositivo para a janela especificada.</span><span class="sxs-lookup"><span data-stu-id="08a78-109">Before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns the display device context, the system prepares the device context for the specified window.</span></span> <span data-ttu-id="08a78-110">Ele primeiro define a região de recorte para que o contexto do dispositivo seja igual à interseção da parte da janela que precisa de atualização e da parte visível para o usuário.</span><span class="sxs-lookup"><span data-stu-id="08a78-110">It first sets the clipping region for the device context to be equal to the intersection of the portion of the window that needs updating and the portion that is visible to the user.</span></span> <span data-ttu-id="08a78-111">Somente as partes da janela que foram alteradas são redesenhadas.</span><span class="sxs-lookup"><span data-stu-id="08a78-111">Only those portions of the window that have changed are redrawn.</span></span> <span data-ttu-id="08a78-112">As tentativas de desenhar fora desta região são recortadas e não aparecem na tela.</span><span class="sxs-lookup"><span data-stu-id="08a78-112">Attempts to draw outside this region are clipped and do not appear on the screen.</span></span>

<span data-ttu-id="08a78-113">O sistema também pode enviar mensagens do [**WM \_ NCPAINT**](wm-ncpaint.md) e do [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) para o procedimento de janela antes de [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) retornar.</span><span class="sxs-lookup"><span data-stu-id="08a78-113">The system can also send [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) messages to the window procedure before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns.</span></span> <span data-ttu-id="08a78-114">Essas mensagens direcionam o aplicativo para desenhar a área não cliente e o plano de fundo da janela.</span><span class="sxs-lookup"><span data-stu-id="08a78-114">These messages direct the application to draw the nonclient area and window background.</span></span> <span data-ttu-id="08a78-115">A *área não cliente* é a parte de uma janela que está fora da área do cliente.</span><span class="sxs-lookup"><span data-stu-id="08a78-115">The *nonclient area* is the part of a window that is outside of the client area.</span></span> <span data-ttu-id="08a78-116">A área inclui recursos como a barra de título, o menu janela (também conhecido como menu do **sistema** ) e as barras de rolagem.</span><span class="sxs-lookup"><span data-stu-id="08a78-116">The area includes features such as the title bar, window menu (also known as the **System** menu), and scroll bars.</span></span> <span data-ttu-id="08a78-117">A maioria dos aplicativos depende da função de janela padrão, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), para desenhar essa área e, portanto, passar a mensagem do **WM \_ NCPAINT** para essa função.</span><span class="sxs-lookup"><span data-stu-id="08a78-117">Most applications rely on the default window function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), to draw this area and therefore pass the **WM\_NCPAINT** message to this function.</span></span> <span data-ttu-id="08a78-118">O *plano de fundo da janela* é a cor ou o padrão em que uma janela é preenchida antes de outras operações de desenho começarem.</span><span class="sxs-lookup"><span data-stu-id="08a78-118">The *window background* is the color or pattern that a window is filled with before other drawing operations begin.</span></span> <span data-ttu-id="08a78-119">O plano de fundo aborda todas as imagens anteriormente na janela ou na tela na janela.</span><span class="sxs-lookup"><span data-stu-id="08a78-119">The background covers any images previously in the window or on the screen under the window.</span></span> <span data-ttu-id="08a78-120">Se uma janela pertencer a uma classe de janela que tem um pincel de plano de fundo de classe, a função **DefWindowProc** desenhará o plano de fundo da janela automaticamente.</span><span class="sxs-lookup"><span data-stu-id="08a78-120">If a window belongs to a window class having a class background brush, the **DefWindowProc** function draws the window background automatically.</span></span>

<span data-ttu-id="08a78-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) preenche uma estrutura [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) com informações como as dimensões da parte da janela a ser atualizada e um sinalizador que indica se o plano de fundo da janela foi desenhado.</span><span class="sxs-lookup"><span data-stu-id="08a78-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) fills a [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure with information such as the dimensions of the portion of the window to be updated and a flag indicating whether the window background has been drawn.</span></span> <span data-ttu-id="08a78-122">O aplicativo pode usar essas informações para otimizar o desenho.</span><span class="sxs-lookup"><span data-stu-id="08a78-122">The application can use this information to optimize drawing.</span></span> <span data-ttu-id="08a78-123">Por exemplo, ele pode usar as dimensões da região de atualização, especificada pelo membro **rcPaint** , para limitar o desenho apenas às partes da janela que precisam de atualização.</span><span class="sxs-lookup"><span data-stu-id="08a78-123">For example, it can use the dimensions of the update region, specified by the **rcPaint** member, to limit drawing to only those portions of the window that need updating.</span></span> <span data-ttu-id="08a78-124">Se um aplicativo tiver uma saída muito simples, ele poderá ignorar a região de atualização e desenhar em toda a janela, contando com o sistema para descartar (cortar) qualquer saída desnecessária.</span><span class="sxs-lookup"><span data-stu-id="08a78-124">If an application has very simple output, it can ignore the update region and draw in the entire window, relying on the system to discard (clip) any unneeded output.</span></span> <span data-ttu-id="08a78-125">Como o sistema corta o desenho que se estende fora da região de recorte, apenas o desenho que está na região de atualização fica visível.</span><span class="sxs-lookup"><span data-stu-id="08a78-125">Because the system clips drawing that extends outside the clipping region, only drawing that is in the update region is visible.</span></span>

<span data-ttu-id="08a78-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) define a região de atualização de uma janela como **nula**.</span><span class="sxs-lookup"><span data-stu-id="08a78-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) sets the update region of a window to **NULL**.</span></span> <span data-ttu-id="08a78-127">Isso limpa a região, impedindo que ela gere mensagens subsequentes do [**WM \_ Paint**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="08a78-127">This clears the region, preventing it from generating subsequent [**WM\_PAINT**](wm-paint.md) messages.</span></span> <span data-ttu-id="08a78-128">Se um aplicativo processa uma mensagem do **WM \_ Paint** , mas não chama **BeginPaint** ou, caso contrário, limpa a região de atualização, o aplicativo continua a receber mensagens do **WM \_ Paint** , desde que a região não esteja vazia.</span><span class="sxs-lookup"><span data-stu-id="08a78-128">If an application processes a **WM\_PAINT** message but does not call **BeginPaint** or otherwise clear the update region, the application continues to receive **WM\_PAINT** messages as long as the region is not empty.</span></span> <span data-ttu-id="08a78-129">Em todos os casos, um aplicativo deve limpar a região de atualização antes de retornar da mensagem do **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="08a78-129">In all cases, an application must clear the update region before returning from the **WM\_PAINT** message.</span></span>

<span data-ttu-id="08a78-130">Depois que o aplicativo termina de desenhar, ele deve chamar [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint).</span><span class="sxs-lookup"><span data-stu-id="08a78-130">After the application finishes drawing, it should call [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint).</span></span> <span data-ttu-id="08a78-131">Para a maioria das janelas, o **Endpainte** libera o contexto do dispositivo de vídeo, disponibilizando-o para outras janelas.</span><span class="sxs-lookup"><span data-stu-id="08a78-131">For most windows, **EndPaint** releases the display device context, making it available to other windows.</span></span> <span data-ttu-id="08a78-132">**EndPaint** também mostra o cursor, se ele foi anteriormente ocultado por [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span><span class="sxs-lookup"><span data-stu-id="08a78-132">**EndPaint** also shows the caret, if it was previously hidden by [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="08a78-133">**BeginPaint** oculta o cursor para impedir que as operações de desenho corrompam.</span><span class="sxs-lookup"><span data-stu-id="08a78-133">**BeginPaint** hides the caret to prevent drawing operations from corrupting it.</span></span>

-   [<span data-ttu-id="08a78-134">A região de atualização</span><span class="sxs-lookup"><span data-stu-id="08a78-134">The Update Region</span></span>](the-update-region.md)
-   [<span data-ttu-id="08a78-135">Invalidando e validando a região de atualização</span><span class="sxs-lookup"><span data-stu-id="08a78-135">Invalidating and Validating the Update Region</span></span>](invalidating-and-validating-the-update-region.md)
-   [<span data-ttu-id="08a78-136">Recuperando a região de atualização</span><span class="sxs-lookup"><span data-stu-id="08a78-136">Retrieving the Update Region</span></span>](retrieving-the-update-region.md)
-   [<span data-ttu-id="08a78-137">Excluindo a região de atualização</span><span class="sxs-lookup"><span data-stu-id="08a78-137">Excluding the Update Region</span></span>](excluding-the-update-region.md)
-   [<span data-ttu-id="08a78-138">Desenho síncrono e assíncrono</span><span class="sxs-lookup"><span data-stu-id="08a78-138">Synchronous and Asynchronous Drawing</span></span>](synchronous-and-asynchronous-drawing.md)

 

 
