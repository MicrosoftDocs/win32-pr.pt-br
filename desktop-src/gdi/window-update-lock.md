---
description: Um bloqueio de atualização de janela é uma suspensão temporária de desenho em uma janela.
ms.assetid: 92b1ba04-ff79-4a37-9633-99412cdafe95
title: Bloqueio de atualização de janela
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4897915020134387947c7a77009c4bdbd63cfdd6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104169131"
---
# <a name="window-update-lock"></a><span data-ttu-id="2ab6d-103">Bloqueio de atualização de janela</span><span class="sxs-lookup"><span data-stu-id="2ab6d-103">Window Update Lock</span></span>

<span data-ttu-id="2ab6d-104">Um *bloqueio de atualização de janela* é uma suspensão temporária de desenho em uma janela.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-104">A *window update lock* is a temporary suspension of drawing in a window.</span></span> <span data-ttu-id="2ab6d-105">O sistema usa o bloqueio para impedir que outras janelas sejam desenhadas no retângulo de controle sempre que o usuário move ou dimensiona uma janela.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-105">The system uses the lock to prevent other windows from drawing over the tracking rectangle whenever the user moves or sizes a window.</span></span> <span data-ttu-id="2ab6d-106">Os aplicativos podem usar o bloqueio para evitar o desenho se executarem operações de movimentação ou de dimensionamento semelhantes com suas próprias janelas.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-106">Applications can use the lock to prevent drawing if they carry out similar moving or sizing operations with their own windows.</span></span>

<span data-ttu-id="2ab6d-107">Um aplicativo usa a função [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) para definir ou limpar um bloqueio de atualização de janela, especificando a janela a ser bloqueada.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-107">An application uses the [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) function to set or clear a window update lock, specifying the window to lock.</span></span> <span data-ttu-id="2ab6d-108">O bloqueio se aplica à janela especificada e a todas as suas janelas filhas.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-108">The lock applies to the specified window and all of its child windows.</span></span> <span data-ttu-id="2ab6d-109">Quando o bloqueio é definido, as funções [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) e [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) retornam um contexto de dispositivo de exibição com uma região visível que está vazia.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-109">When the lock is set, the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) and [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) functions return a display device context with a visible region that is empty.</span></span> <span data-ttu-id="2ab6d-110">Considerando isso, o aplicativo pode continuar a desenhar na janela, mas toda a saída é recortada.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-110">Given this, the application can continue to draw in the window, but all output is clipped.</span></span> <span data-ttu-id="2ab6d-111">O bloqueio persiste até que o aplicativo o apague chamando **LockWindowUpdate**, especificando **NULL** para a janela.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-111">The lock persists until the application clears it by calling **LockWindowUpdate**, specifying **NULL** for the window.</span></span> <span data-ttu-id="2ab6d-112">Embora **LockWindowUpdate** force a região visível de uma janela a ficar vazia, a função não torna a janela especificada invisível e não limpa o bit de \_ estilo WS visível.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-112">Although **LockWindowUpdate** forces a window's visible region to be empty, the function does not make the specified window invisible and does not clear the WS\_VISIBLE style bit.</span></span>

<span data-ttu-id="2ab6d-113">Depois que o bloqueio é definido, o aplicativo pode usar a função [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) , com o \_ valor de LOCKWINDOWUPDATE do DCX, para recuperar um contexto de dispositivo de exibição para desenhar sobre a janela bloqueada.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-113">After the lock is set, the application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function, with the DCX\_LOCKWINDOWUPDATE value, to retrieve a display device context to draw over the locked window.</span></span> <span data-ttu-id="2ab6d-114">Isso permite que o aplicativo desenhe um retângulo de controle ao processar mensagens de teclado ou mouse.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-114">This allows the application to draw a tracking rectangle when processing keyboard or mouse messages.</span></span> <span data-ttu-id="2ab6d-115">O sistema usa esse método quando o usuário move e dimensiona janelas.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-115">The system uses this method when the user moves and sizes windows.</span></span> <span data-ttu-id="2ab6d-116">**GetDCEx** recupera o contexto do dispositivo de vídeo do cache de contexto do dispositivo de vídeo, de modo que o aplicativo deve liberar o contexto do dispositivo assim que possível após o desenho.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-116">**GetDCEx** retrieves the display device context from the display device context cache, so the application must release the device context as soon as possible after drawing.</span></span>

<span data-ttu-id="2ab6d-117">Enquanto um bloqueio de atualização de janela é definido, o sistema cria um retângulo delimitador acumulado para cada janela bloqueada.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-117">While a window update lock is set, the system creates an accumulated bounding rectangle for each locked window.</span></span> <span data-ttu-id="2ab6d-118">Quando o bloqueio é eliminado, o sistema usa esse retângulo delimitador para definir a região de atualização para a janela e suas janelas filhas, forçando uma eventual mensagem de [**\_ pintura do WM**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="2ab6d-118">When the lock is cleared, the system uses this bounding rectangle to set the update region for the window and its child windows, forcing an eventual [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="2ab6d-119">Se o retângulo delimitador acumulado estiver vazio (ou seja, se nenhum desenho tiver ocorrido enquanto o bloqueio foi definido), a região de atualização não será definida.</span><span class="sxs-lookup"><span data-stu-id="2ab6d-119">If the accumulated bounding rectangle is empty (that is, if no drawing has occurred while the lock was set), the update region is not set.</span></span>

 

 



