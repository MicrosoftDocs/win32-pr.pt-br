---
description: Embora os aplicativos realizem a maioria das operações de desenho enquanto a mensagem do WM \_ Paint está processando, às vezes é mais eficiente para um aplicativo desenhar diretamente em uma janela sem depender da mensagem do WM \_ Paint.
ms.assetid: 2d015879-58d2-4cbe-b1cc-445f2e8fd316
title: Desenho sem a mensagem de WM_PAINT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66695e85b700de6f62366dedb6fe082f410d4385
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103827653"
---
# <a name="drawing-without-the-wm_paint-message"></a><span data-ttu-id="db0e5-103">Desenho sem a mensagem de pintura do WM \_</span><span class="sxs-lookup"><span data-stu-id="db0e5-103">Drawing Without the WM\_PAINT Message</span></span>

<span data-ttu-id="db0e5-104">Embora os aplicativos realizem a maioria das operações de desenho enquanto a mensagem do [**WM \_ Paint**](wm-paint.md) está processando, às vezes é mais eficiente para um aplicativo desenhar diretamente em uma janela sem depender da mensagem do **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="db0e5-104">Although applications carry out most drawing operations while the [**WM\_PAINT**](wm-paint.md) message is processing, it is sometimes more efficient for an application to draw directly in a window without relying on the **WM\_PAINT** message.</span></span> <span data-ttu-id="db0e5-105">Isso pode ser útil quando o usuário precisa de comentários imediatos, como ao selecionar texto e arrastar ou dimensionar um objeto.</span><span class="sxs-lookup"><span data-stu-id="db0e5-105">This can be useful when the user needs immediate feedback, such as when selecting text and dragging or sizing an object.</span></span> <span data-ttu-id="db0e5-106">Nesses casos, o aplicativo geralmente é desenhado durante o processamento de mensagens de teclado ou mouse.</span><span class="sxs-lookup"><span data-stu-id="db0e5-106">In such cases, the application usually draws while processing keyboard or mouse messages.</span></span>

<span data-ttu-id="db0e5-107">Para desenhar em uma janela sem usar uma mensagem do [**WM \_ Paint**](wm-paint.md) , o aplicativo usa a função [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) ou [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) para recuperar um contexto de dispositivo de exibição para a janela.</span><span class="sxs-lookup"><span data-stu-id="db0e5-107">To draw in a window without using a [**WM\_PAINT**](wm-paint.md) message, the application uses the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to retrieve a display device context for the window.</span></span> <span data-ttu-id="db0e5-108">Com o contexto do dispositivo de vídeo, o aplicativo pode desenhar na janela e evitar o intrusão em outras janelas.</span><span class="sxs-lookup"><span data-stu-id="db0e5-108">With the display device context, the application can draw in the window and avoid intruding into other windows.</span></span> <span data-ttu-id="db0e5-109">Quando o desenho do aplicativo termina, ele chama a função [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) para liberar o contexto do dispositivo de vídeo para uso por outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="db0e5-109">When the application has finished drawing, it calls the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function to release the display device context for use by other applications.</span></span>

<span data-ttu-id="db0e5-110">Ao desenhar sem usar uma mensagem do [**WM \_ Paint**](wm-paint.md) , o aplicativo geralmente não invalida a janela.</span><span class="sxs-lookup"><span data-stu-id="db0e5-110">When drawing without using a [**WM\_PAINT**](wm-paint.md) message, the application usually does not invalidate the window.</span></span> <span data-ttu-id="db0e5-111">Em vez disso, ele se baseia em tal maneira de poder restaurar facilmente a janela e remover o desenho.</span><span class="sxs-lookup"><span data-stu-id="db0e5-111">Instead, it draws in such a fashion that it can easily restore the window and remove the drawing.</span></span> <span data-ttu-id="db0e5-112">Por exemplo, quando o usuário seleciona texto ou um objeto, o aplicativo normalmente desenha a seleção invertendo o que já está na janela.</span><span class="sxs-lookup"><span data-stu-id="db0e5-112">For example, when the user selects text or an object, the application typically draws the selection by inverting whatever is already in the window.</span></span> <span data-ttu-id="db0e5-113">O aplicativo pode remover a seleção e restaurar o conteúdo original da janela simplesmente invertendo.</span><span class="sxs-lookup"><span data-stu-id="db0e5-113">The application can remove the selection and restore the original contents of the window by simply inverting again.</span></span>

<span data-ttu-id="db0e5-114">O aplicativo é responsável por gerenciar cuidadosamente as alterações feitas na janela.</span><span class="sxs-lookup"><span data-stu-id="db0e5-114">The application is responsible for carefully managing any changes it makes to the window.</span></span> <span data-ttu-id="db0e5-115">Em particular, se um aplicativo desenhar uma seleção e uma mensagem de [**\_ pintura do WM**](wm-paint.md) intermediário ocorrer, o aplicativo deverá garantir que qualquer desenho feito durante a mensagem não corromperá a seleção.</span><span class="sxs-lookup"><span data-stu-id="db0e5-115">In particular, if an application draws a selection and an intervening [**WM\_PAINT**](wm-paint.md) message occurs, the application must ensure that any drawing done during the message does not corrupt the selection.</span></span> <span data-ttu-id="db0e5-116">Para evitar isso, muitos aplicativos removem a seleção, executam operações de desenho usuais e, em seguida, restauram a seleção quando o desenho é concluído.</span><span class="sxs-lookup"><span data-stu-id="db0e5-116">To avoid this, many applications remove the selection, carry out usual drawing operations, and then restore the selection when drawing is complete.</span></span>

 

 



