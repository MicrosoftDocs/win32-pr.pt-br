---
description: A caixa de diálogo fonte comum simplifica o processo de criação e seleção de fontes.
ms.assetid: 7183be25-a8e4-47a0-a34a-63eadf6ca10d
title: Criação e seleção de fontes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37b4a70a1a49fc318ca69998d97e15fca838668d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104988825"
---
# <a name="font-creation-and-selection"></a>Criação e seleção de fontes

A caixa de diálogo **fonte** comum simplifica o processo de criação e seleção de fontes. Ao inicializar a estrutura [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) e chamar a função [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) , um aplicativo pode dar suporte à mesma interface de seleção de fonte que exigia anteriormente muitas linhas de código personalizado. (Para obter mais informações sobre a caixa de diálogo **fonte** comum, consulte [biblioteca de caixa de diálogo comum](../dlgbox/common-dialog-box-library.md).)

## <a name="selection-by-the-user"></a>Seleção pelo usuário

A maioria das operações de criação e seleção de fontes envolvem o usuário. Por exemplo, aplicativos de processamento de texto permitem que o usuário selecione fontes exclusivas para títulos, notas de rodapé e corpo de texto. Depois que o usuário seleciona uma fonte usando a caixa de diálogo **fonte** e pressiona o botão **OK** , a função [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) Inicializa os membros de uma estrutura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) com os atributos da fonte solicitada. Para usar essa fonte para operações de saída de texto, um aplicativo deve primeiro criar uma fonte lógica e, em seguida, selecionar essa fonte em seu contexto de dispositivo. Uma *fonte lógica* é uma descrição fornecida pelo aplicativo de uma fonte ideal. Um desenvolvedor pode criar uma fonte lógica chamando as funções [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) ou [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) . Nesse caso, o aplicativo chamaria [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) e forneceria um ponteiro para a estrutura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) inicializada pelo [**ChooseFont**](/windows/win32/api/commdlg/ns-commdlg-choosefonta). Em geral, é mais eficiente chamar **CreateFontIndirect** porque [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta) requer vários parâmetros, enquanto **CreateFontIndirect** requer apenas um ponteiro para **LOGFONT**.

Antes que um aplicativo possa realmente começar a desenhar texto com uma fonte lógica, ele deve encontrar a correspondência mais próxima das fontes armazenadas internamente no dispositivo e as fontes cujos recursos foram carregados no sistema operacional. As fontes armazenadas no dispositivo ou no sistema operacional são chamadas de *fontes físicas*. O processo de localizar a fonte física que mais se aproximar com uma fonte lógica especificada é chamado de mapeamento de fonte. Esse processo ocorre quando um aplicativo chama a função [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) e fornece um identificador que identifica uma fonte lógica. O mapeamento de fontes é executado usando um algoritmo interno que compara os atributos da fonte lógica solicitada com os atributos das fontes físicas disponíveis. Quando o algoritmo do mapeador de fontes conclui sua pesquisa e determina a correspondência mais próxima possível, a função [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject) retorna e o aplicativo pode começar a desenhar texto com a nova fonte.

A função [**SetMapperFlags**](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags) especifica se o algoritmo do mapeador de fontes procura somente fontes físicas com taxas de proporção que correspondam ao dispositivo físico. A taxa de proporção para um dispositivo é a taxa formada pela largura e a altura de um pixel no dispositivo.

A fonte do sistema (também conhecida como Shell ou fonte padrão) é a fonte usada para texto nas barras de título, menus e caixas de diálogo.

## <a name="special-font-selection-considerations"></a>Considerações de seleção de fonte especial

Embora a maioria das operações de seleção de fontes envolva o usuário, há algumas instâncias em que isso não é verdade. Por exemplo, um desenvolvedor pode querer usar uma fonte exclusiva em um aplicativo para desenhar texto em uma janela de controle. Para selecionar uma fonte apropriada, o aplicativo deve ser capaz de determinar quais fontes estão disponíveis, criar uma fonte lógica que descreva uma dessas fontes disponíveis e, em seguida, selecionar essa fonte no contexto do dispositivo apropriado.

Um aplicativo pode enumerar as fontes disponíveis usando as funções [**EnumFonts**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontsa) ou [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) . [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa) é recomendado porque enumera todos os estilos associados a um nome de família. Isso pode ser útil para fontes com estilos muitos ou incomuns e para fontes que cruzam bordas internacionais.

Depois que um aplicativo tiver enumerado as fontes disponíveis e localizado uma correspondência apropriada, ele deverá usar os valores retornados pela função de enumeração de fonte para inicializar os membros de uma estrutura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) . Em seguida, ele pode chamar a função [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) , passando um ponteiro para a estrutura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) inicializada. Se a função [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) for bem-sucedida, o aplicativo poderá selecionar a fonte lógica chamando a função [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) . Ao inicializar os membros da estrutura **LOGFONT** , certifique-se de especificar um conjunto de caracteres específico no membro **lfCharSet** . Esse membro é importante no processo de mapeamento de fontes e os resultados serão inconsistentes se esse membro não for inicializado corretamente. Se você especificar um nome de tipo de fonte no membro **lfFaceName** da estrutura **LOGFONT** , certifique-se de que o valor **lfCharSet** corresponde ao conjunto de caracteres da face de tipos especificada em **lfFaceName**. Por exemplo, se você quiser selecionar uma fonte como MS Mincho, **lfCharSet** deverá ser definido como o valor predefinido SHIFTJIS \_ CharSet.

As fontes para muitos idiomas do leste asiático têm dois nomes de tipos: um nome em inglês e um nome localizado. [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta)e [**CreateFontIndirectEx**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirectexa) usam o nome da face de tipos localizada para uma localidade do sistema que corresponda ao idioma, mas eles usam o nome de tipo em inglês para todas as outras localidades do sistema. O melhor método é tentar um nome e, em caso de falha, tentar o outro. Observe que [**EnumFonts**](/windows/win32/api/wingdi/nf-wingdi-enumfontsa), [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa)e [**EnumFontFamiliesEx**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesexa) retornam o nome da face de tipos em inglês se a localidade do sistema não corresponder ao idioma da fonte. A partir do Windows 2000, isso não é mais um problema porque o mapeador de fontes para [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta)e [**CreateFontIndirectEx**](/windows/win32/api/wingdi/nf-wingdi-createfontindirectexa) reconhece o nome do tipo, independentemente da localidade.

 

 
