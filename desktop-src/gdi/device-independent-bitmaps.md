---
description: Um DIB (bitmap independente de dispositivo) contém uma tabela de cores.
ms.assetid: 56b39a3d-48a4-4620-9652-ec41ea4d6423
title: Device-Independent bitmaps
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1aa35201a9a27c2d16a5a18b0125d25a3938890c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104091196"
---
# <a name="device-independent-bitmaps"></a><span data-ttu-id="0b4a1-103">Device-Independent bitmaps</span><span class="sxs-lookup"><span data-stu-id="0b4a1-103">Device-Independent Bitmaps</span></span>

<span data-ttu-id="0b4a1-104">Um DIB (bitmap independente de dispositivo) contém uma *tabela de cores*.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-104">A device-independent bitmap (DIB) contains a *color table*.</span></span> <span data-ttu-id="0b4a1-105">Uma tabela de cores descreve como os valores de pixel correspondem aos valores de cor *RGB* , que descrevem as cores que são produzidas emitindo luz.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-105">A color table describes how pixel values correspond to *RGB* color values, which describe colors that are produced by emitting light.</span></span> <span data-ttu-id="0b4a1-106">Assim, um DIB pode atingir o esquema de cores adequado em qualquer dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-106">Thus, a DIB can achieve the proper color scheme on any device.</span></span> <span data-ttu-id="0b4a1-107">Um DIB contém as seguintes informações de cor e dimensão:</span><span class="sxs-lookup"><span data-stu-id="0b4a1-107">A DIB contains the following color and dimension information:</span></span>

-   <span data-ttu-id="0b4a1-108">O formato de cor do dispositivo no qual a imagem retangular foi criada.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-108">The color format of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="0b4a1-109">A resolução do dispositivo no qual a imagem retangular foi criada.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-109">The resolution of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="0b4a1-110">A paleta do dispositivo no qual a imagem foi criada.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-110">The palette for the device on which the image was created.</span></span>
-   <span data-ttu-id="0b4a1-111">Uma matriz de bits que mapeia tercetos vermelho, verde e azul ( [**RGB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) para pixels na imagem retangular.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-111">An array of bits that maps red, green, blue ( [**RGB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) triplets to pixels in the rectangular image.</span></span>
-   <span data-ttu-id="0b4a1-112">Um identificador de compactação de dados que indica o esquema de compactação de dados (se houver) usado para reduzir o tamanho da matriz de bits.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-112">A data-compression identifier that indicates the data compression scheme (if any) used to reduce the size of the array of bits.</span></span>

<span data-ttu-id="0b4a1-113">As informações de cor e dimensão são armazenadas em uma estrutura [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , que consiste em uma estrutura [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) seguida por duas ou mais estruturas [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-113">The color and dimension information is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure, which consists of a [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) structure followed by two or more [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures.</span></span> <span data-ttu-id="0b4a1-114">A estrutura **BITMAPINFOHEADER** especifica as dimensões do retângulo de pixel, descreve a tecnologia de cores do dispositivo e identifica os esquemas de compactação usados para reduzir o tamanho do bitmap.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-114">The **BITMAPINFOHEADER** structure specifies the dimensions of the pixel rectangle, describes the device's color technology, and identifies the compression schemes used to reduce the size of the bitmap.</span></span> <span data-ttu-id="0b4a1-115">As estruturas **RGBQUAD** identificam as cores que aparecem no retângulo de pixel.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-115">The **RGBQUAD** structures identify the colors that appear in the pixel rectangle.</span></span>

<span data-ttu-id="0b4a1-116">Há duas variedades de DIBs:</span><span class="sxs-lookup"><span data-stu-id="0b4a1-116">There are two varieties of DIBs:</span></span>

-   <span data-ttu-id="0b4a1-117">Um DIB de baixo para cima, no qual a origem está no canto inferior esquerdo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-117">A bottom-up DIB, in which the origin lies at the lower-left corner.</span></span>
-   <span data-ttu-id="0b4a1-118">Um DIB de cima para baixo, no qual a origem está no canto superior esquerdo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-118">A top-down DIB, in which the origin lies at the upper-left corner.</span></span>

<span data-ttu-id="0b4a1-119">Se a altura de uma DIB, conforme indicado pelo membro **Height** da estrutura de cabeçalho de informações de bitmap, for um valor positivo, será um DIB de baixo para cima; se a altura for um valor negativo, será um DIB de cima para baixo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-119">If the height of a DIB, as indicated by the **Height** member of the bitmap information header structure, is a positive value, it is a bottom-up DIB; if the height is a negative value, it is a top-down DIB.</span></span> <span data-ttu-id="0b4a1-120">Os DIBs de cima para baixo não podem ser compactados.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-120">Top-down DIBs cannot be compressed.</span></span>

<span data-ttu-id="0b4a1-121">O formato de cor é especificado em termos de uma contagem de planos de cores e bits de cor.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-121">The color format is specified in terms of a count of color planes and color bits.</span></span> <span data-ttu-id="0b4a1-122">A contagem de planos de cores é sempre 1; a contagem de bits de cor é 1 para bitmaps monocromáticos, 4 para bitmaps VGA e 8, 16, 24 ou 32 para bitmaps em outros dispositivos de cores.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-122">The count of color planes is always 1; the count of color bits is 1 for monochrome bitmaps, 4 for VGA bitmaps, and 8, 16, 24, or 32 for bitmaps on other color devices.</span></span> <span data-ttu-id="0b4a1-123">Um aplicativo recupera o número de bits de cor que uma exibição (ou impressora) específica usa chamando a função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , especificando BITSPIXEL como o segundo argumento.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-123">An application retrieves the number of color bits that a particular display (or printer) uses by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying BITSPIXEL as the second argument.</span></span>

<span data-ttu-id="0b4a1-124">A resolução de um dispositivo de vídeo é especificada em pixels por medidor.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-124">The resolution of a display device is specified in pixels-per-meter.</span></span> <span data-ttu-id="0b4a1-125">Um aplicativo pode recuperar a resolução horizontal para uma exibição de vídeo, ou impressora, seguindo este processo de três etapas.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-125">An application can retrieve the horizontal resolution for a video display, or printer, by following this three-step process.</span></span>

1.  <span data-ttu-id="0b4a1-126">Chame a função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , especificando HORZRES como o segundo argumento.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-126">Call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying HORZRES as the second argument.</span></span>
2.  <span data-ttu-id="0b4a1-127">Chame [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) uma segunda vez, especificando HORZSIZE como o segundo argumento.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-127">Call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) a second time, specifying HORZSIZE as the second argument.</span></span>
3.  <span data-ttu-id="0b4a1-128">Divida o primeiro valor de retorno pelo segundo valor de retorno.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-128">Divide the first return value by the second return value.</span></span>

<span data-ttu-id="0b4a1-129">O aplicativo pode recuperar a resolução vertical usando o mesmo processo de três etapas com parâmetros diferentes: VERTRES no lugar de HORZRES e VERTSIZE no lugar de HORZSIZE.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-129">The application can retrieve the vertical resolution by using the same three-step process with different parameters: VERTRES in place of HORZRES, and VERTSIZE in place of HORZSIZE.</span></span>

<span data-ttu-id="0b4a1-130">A paleta é representada por uma matriz de estruturas [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) que especificam os componentes de intensidade vermelha, verde e azul para cada cor em uma paleta de cores do dispositivo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-130">The palette is represented by an array of [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures that specify the red, green, and blue intensity components for each color in a display device's color palette.</span></span> <span data-ttu-id="0b4a1-131">Cada índice de cor na matriz da paleta é mapeado para um pixel específico na região retangular associada ao bitmap.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-131">Each color index in the palette array maps to a specific pixel in the rectangular region associated with the bitmap.</span></span> <span data-ttu-id="0b4a1-132">O tamanho dessa matriz, em bits, é equivalente à largura do retângulo, em pixels, multiplicado pela altura do retângulo, em pixels, multiplicado pela contagem de bits de cor para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-132">The size of this array, in bits, is equivalent to the width of the rectangle, in pixels, multiplied by the height of the rectangle, in pixels, multiplied by the count of color bits for the device.</span></span> <span data-ttu-id="0b4a1-133">Um aplicativo pode recuperar o tamanho da paleta do dispositivo chamando a função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , especificando NUMCOLORS como o segundo argumento.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-133">An application can retrieve the size of the device's palette by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying NUMCOLORS as the second argument.</span></span>

<span data-ttu-id="0b4a1-134">O Windows dá suporte à compactação da matriz de paleta para 8-bpp e 4-bpp de baixo para cima.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-134">Windows supports the compression of the palette array for 8-bpp and 4-bpp bottom-up DIBs.</span></span> <span data-ttu-id="0b4a1-135">Essas matrizes podem ser compactadas usando o esquema RLE (codificação de comprimento de execução).</span><span class="sxs-lookup"><span data-stu-id="0b4a1-135">These arrays can be compressed by using the run-length encoding (RLE) scheme.</span></span> <span data-ttu-id="0b4a1-136">O esquema RLE usa valores de 2 bytes, o primeiro byte que especifica o número de pixels consecutivos que usam um índice de cores e o segundo byte que especifica o índice.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-136">The RLE scheme uses 2-byte values, the first byte specifying the number of consecutive pixels that use a color index and the second byte specifying the index.</span></span> <span data-ttu-id="0b4a1-137">Para obter mais informações sobre compactação de bitmap, consulte a descrição das estruturas [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)e [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-137">For more information about bitmap compression, see the description of the [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures.</span></span>

<span data-ttu-id="0b4a1-138">Um aplicativo pode criar um DIB de um BDD Inicializando as estruturas necessárias e chamando a função [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-138">An application can create a DIB from a DDB by initializing the required structures and calling the [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) function.</span></span> <span data-ttu-id="0b4a1-139">Para determinar se um dispositivo dá suporte a essa função, chame a função [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , especificando o \_ \_ bitmap de di RC como o sinalizador RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-139">To determine whether a device supports this function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

<span data-ttu-id="0b4a1-140">Um aplicativo que precisa copiar um bitmap pode usar [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) para copiar todos os pixels em um bitmap de origem para um bitmap de destino, exceto os pixels que correspondem à cor transparente.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-140">An application that needs to copy a bitmap can use [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) to copy all pixels in a source bitmap to a destination bitmap except those pixels that match the transparent color.</span></span>

<span data-ttu-id="0b4a1-141">Um aplicativo pode usar um DIB para definir pixels no dispositivo de vídeo chamando a função [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) ou [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-141">An application can use a DIB to set pixels on the display device by calling the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) or the [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) function.</span></span> <span data-ttu-id="0b4a1-142">Para determinar se um dispositivo dá suporte à função **SetDIBitsToDevice** , chame a função [**GETDEVICECAPS**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , especificando RC \_ DIBTODEV como o sinalizador RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-142">To determine whether a device supports the **SetDIBitsToDevice** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DIBTODEV as the RASTERCAPS flag.</span></span> <span data-ttu-id="0b4a1-143">Especifique \_ STRETCHDIB RC como o sinalizador RasterCaps para determinar se o dispositivo dá suporte a **StretchDIBits**.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-143">Specify RC\_STRETCHDIB as the RASTERCAPS flag to determine if the device supports **StretchDIBits**.</span></span>

<span data-ttu-id="0b4a1-144">Um aplicativo que simplesmente precisa exibir um DIB já existente pode usar a função [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-144">An application that simply needs to display a pre-existing DIB can use the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) function.</span></span> <span data-ttu-id="0b4a1-145">Por exemplo, um aplicativo de planilha pode abrir gráficos existentes e exibi-los em uma janela usando a função **SetDIBitsToDevice** .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-145">For example, a spreadsheet application can open existing charts and display them in a window by using the **SetDIBitsToDevice** function.</span></span> <span data-ttu-id="0b4a1-146">No entanto, para redesenhar repetidamente um bitmap em uma janela, o aplicativo deve usar a função [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) .</span><span class="sxs-lookup"><span data-stu-id="0b4a1-146">To repeatedly redraw a bitmap in a window, however, the application should use the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function.</span></span> <span data-ttu-id="0b4a1-147">Por exemplo, um aplicativo multimídia que combina gráficos animados com som pode se beneficiar de chamar a função **BitBlt** porque ela é executada mais rápido do que **SetDIBitsToDevice**.</span><span class="sxs-lookup"><span data-stu-id="0b4a1-147">For example, a multimedia application that combines animated graphics with sound would benefit from calling the **BitBlt** function because it executes faster than **SetDIBitsToDevice**.</span></span>

 

 
