---
title: Aplicação de patch no software de jogos no Windows XP, no Windows Vista e no Windows 7
description: Este artigo examina alguns métodos de aplicação de patch que funcionarão bem no Windows Vista e no Windows 7, bem como no Windows XP.
ms.assetid: 27be805a-bffd-a9f8-2207-2a9a4822ba48
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 95ae0b1455cae61b8372f81e6928977743084c9e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105757828"
---
# <a name="patching-game-software-in-windows-xp-windows-vista-and-windows-7"></a><span data-ttu-id="b5a46-103">Aplicação de patch no software de jogos no Windows XP, no Windows Vista e no Windows 7</span><span class="sxs-lookup"><span data-stu-id="b5a46-103">Patching Game Software in Windows XP, Windows Vista, and Windows 7</span></span>

<span data-ttu-id="b5a46-104">O Windows Vista e o Windows 7 têm uma série de recursos para tornar o sistema operacional mais seguro.</span><span class="sxs-lookup"><span data-stu-id="b5a46-104">Windows Vista and Windows 7 have a number of features to make the operating system more secure.</span></span> <span data-ttu-id="b5a46-105">Segurança adicionada significa que a aplicação de patches ao software não é tão simples quanto no passado.</span><span class="sxs-lookup"><span data-stu-id="b5a46-105">Added security means that applying patches to software is not as simple as it was in the past.</span></span> <span data-ttu-id="b5a46-106">Este artigo examina alguns métodos de aplicação de patch que funcionarão bem no Windows Vista e no Windows 7, bem como no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="b5a46-106">This article examines some methods of patching that will work well in Windows Vista and Windows 7, as well as Windows XP.</span></span>

<span data-ttu-id="b5a46-107">Há duas categorias principais de jogos que exigem patches:</span><span class="sxs-lookup"><span data-stu-id="b5a46-107">There are two main categories of games that require patches:</span></span>

-   <span data-ttu-id="b5a46-108">Jogos que exigem apenas patches ocasionais, como a maioria dos jogos offline.</span><span class="sxs-lookup"><span data-stu-id="b5a46-108">Games that require only occasional patches, such as most offline games.</span></span>
-   <span data-ttu-id="b5a46-109">Jogos que exigem patches frequentes, como a maioria dos jogos online.</span><span class="sxs-lookup"><span data-stu-id="b5a46-109">Games that require frequent patches, such as most online games.</span></span>

<span data-ttu-id="b5a46-110">Este artigo também oferece uma breve introdução ao UAC (controle de conta de usuário) para servir como plano de fundo sobre os direitos que os desenvolvedores podem esperar que os usuários tenham no Windows Vista e no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="b5a46-110">This article also offers a brief introduction to the User Account Control (UAC) to serve as background about the rights that developers can expect users to have in Windows Vista and Windows 7.</span></span>

-   [<span data-ttu-id="b5a46-111">Controle de conta de usuário</span><span class="sxs-lookup"><span data-stu-id="b5a46-111">User Account Control</span></span>](#user-account-control)
-   [<span data-ttu-id="b5a46-112">Jogos que exigem apenas patches ocasionais</span><span class="sxs-lookup"><span data-stu-id="b5a46-112">Games that Require Only Occasional Patches</span></span>](#games-that-require-only-occasional-patches)
    -   [<span data-ttu-id="b5a46-113">Método 1: usar Windows Installer para patches ocasionais</span><span class="sxs-lookup"><span data-stu-id="b5a46-113">Method 1: Use Windows Installer for Occasional Patches</span></span>](#method-1-use-windows-installer-for-occasional-patches)
    -   [<span data-ttu-id="b5a46-114">Método 2: exigir direitos de administrador para aplicar patches</span><span class="sxs-lookup"><span data-stu-id="b5a46-114">Method 2: Require Administrator Rights to Apply Patches</span></span>](#method-2-require-administrator-rights-to-apply-patches)
-   [<span data-ttu-id="b5a46-115">Jogos que exigem patches frequentes</span><span class="sxs-lookup"><span data-stu-id="b5a46-115">Games that Require Frequent Patches</span></span>](#games-that-require-frequent-patches)
    -   [<span data-ttu-id="b5a46-116">Método 3: instalar por usuário</span><span class="sxs-lookup"><span data-stu-id="b5a46-116">Method 3: Install Per-User</span></span>](#method-3-install-per-user)
    -   [<span data-ttu-id="b5a46-117">Método 4: instalar em um local de Per-Computer comum</span><span class="sxs-lookup"><span data-stu-id="b5a46-117">Method 4: Install to a Common Per-Computer Location</span></span>](#method-4-install-to-a-common-per-computer-location)
    -   [<span data-ttu-id="b5a46-118">Outras possibilidades</span><span class="sxs-lookup"><span data-stu-id="b5a46-118">Other Possibilities</span></span>](#other-possibilities)
-   [<span data-ttu-id="b5a46-119">Resumo</span><span class="sxs-lookup"><span data-stu-id="b5a46-119">Summary</span></span>](#summary)

## <a name="user-account-control"></a><span data-ttu-id="b5a46-120">Controle de Conta de Usuário</span><span class="sxs-lookup"><span data-stu-id="b5a46-120">User Account Control</span></span>

<span data-ttu-id="b5a46-121">O Windows Vista e o Windows 7 têm dois tipos principais de contas de usuário: usuário padrão e administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-121">Windows Vista and Windows 7 have two primary types of user accounts: Standard User and Administrator.</span></span> <span data-ttu-id="b5a46-122">Uma conta de usuário padrão tem várias restrições de acesso; por exemplo, ele não pode gravar dados no sistema de arquivos em% SystemDrive% \\ arquivos de programas ou no registro no \_ computador local hKey \_ .</span><span class="sxs-lookup"><span data-stu-id="b5a46-122">A Standard User account has several access restrictions; for example, it cannot write data to the file system in %SystemDrive%\\Program Files or to the registry in the HKEY\_LOCAL\_MACHINE.</span></span> <span data-ttu-id="b5a46-123">Isso tem implicações para aplicar patches a um jogo se ele estiver instalado em um local somente leitura.</span><span class="sxs-lookup"><span data-stu-id="b5a46-123">This has implications for applying patches to a game if it is installed in a read-only location.</span></span> <span data-ttu-id="b5a46-124">Ao contrário do Windows XP, a conta de usuário padrão é muito mais comum no Windows Vista e no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="b5a46-124">Unlike in Windows XP, the Standard User account is much more common in Windows Vista and Windows 7.</span></span> <span data-ttu-id="b5a46-125">As contas de usuário padrão também são necessárias para recursos importantes do sistema operacional, como controles dos pais.</span><span class="sxs-lookup"><span data-stu-id="b5a46-125">Standard User accounts are also required for important features of the operating system, like parental controls.</span></span> <span data-ttu-id="b5a46-126">Os controles dos pais exigem que a conta filho seja usuário padrão, e elevar essa conta para o administrador de até mesmo um jogo impede que os controles dos pais trabalhem com todos os outros jogos.</span><span class="sxs-lookup"><span data-stu-id="b5a46-126">Parental controls require that the child account be Standard User, and elevating such an account to Administrator for even one game prevents parental controls from working with all other games.</span></span> <span data-ttu-id="b5a46-127">Portanto, é importante que os jogos sejam projetados para o usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="b5a46-127">So, it important for games to be designed for Standard User.</span></span>

<span data-ttu-id="b5a46-128">O Windows Vista e o Windows 7 têm um modelo mais recente para direitos de usuário, para ajudar a impedir que os usuários executem programas que tentam executar operações que o usuário não pretende ou autorizar.</span><span class="sxs-lookup"><span data-stu-id="b5a46-128">Windows Vista and Windows 7 have a newer model for user rights, to help prevent users from running programs that attempt to perform operations that the user doesn't intend or authorize.</span></span> <span data-ttu-id="b5a46-129">Para esse fim, o controle de conta de usuário (anteriormente chamado de conta de usuário com privilégios mínimos ou LUA) permite que os usuários operem o computador com direitos de nível inferior na maior parte do tempo, e possam facilmente executar aplicativos que exigem direitos de nível superior, quando necessário.</span><span class="sxs-lookup"><span data-stu-id="b5a46-129">To that end, User Account Control (formerly called Least-privileged User Account or LUA) enables users to operate the computer with low-level rights most of the time, while being able to easily run applications that require higher-level rights, when necessary.</span></span> <span data-ttu-id="b5a46-130">Isso significa que contas de usuário padrão e contas de administrador executam aplicativos com direitos de usuário padrão, mas somente contas de administrador têm a capacidade de conceder direitos elevados aos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b5a46-130">This means that Standard User accounts and Administrator accounts both run applications with Standard User rights, but only Administrator accounts have the ability to grant elevated rights to applications.</span></span> <span data-ttu-id="b5a46-131">O sistema operacional solicita aos usuários com contas de administrador o consentimento explícito antes de executar um aplicativo com direitos elevados e, se um programa que requer direitos de administrador for executado em uma conta de usuário padrão, o sistema solicitará a aprovação do administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-131">The operating system asks users with Administrator accounts for explicit consent before running an application with elevated rights, and if a program that requires Administrator rights is run on a Standard User account, the system prompts for Administrator approval.</span></span>

## <a name="games-that-require-only-occasional-patches"></a><span data-ttu-id="b5a46-132">Jogos que exigem apenas patches ocasionais</span><span class="sxs-lookup"><span data-stu-id="b5a46-132">Games that Require Only Occasional Patches</span></span>

<span data-ttu-id="b5a46-133">Alguns jogos exigem apenas alguns patches em todo o ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="b5a46-133">Some games only require a few patches throughout their lifecycle.</span></span> <span data-ttu-id="b5a46-134">Dois métodos que você pode empregar para essa frequência de aplicação de patches são distribuir patches como pacotes de Windows Installer, que geralmente não exigem direitos de administrador ou para usar algum outro tipo de distribuição que modifica os arquivos de jogos diretamente.</span><span class="sxs-lookup"><span data-stu-id="b5a46-134">Two methods that you can employ for this frequency of patching are to distribute patches as Windows Installer packages, which does not generally require Administrator rights, or to use some other type of distribution that directly modifies game files.</span></span>

> [!Note]  
> <span data-ttu-id="b5a46-135">Independentemente de um jogo exigir aplicação de patch freqüente, os aplicativos normalmente exigem que os direitos de administrador sejam instalados ou removidos.</span><span class="sxs-lookup"><span data-stu-id="b5a46-135">Regardless of whether a game requires frequent patching, applications typically require Administrator rights to be installed or removed.</span></span>

 

### <a name="method-1-use-windows-installer-for-occasional-patches"></a><span data-ttu-id="b5a46-136">Método 1: usar Windows Installer para patches ocasionais</span><span class="sxs-lookup"><span data-stu-id="b5a46-136">Method 1: Use Windows Installer for Occasional Patches</span></span>

<span data-ttu-id="b5a46-137">Nesse método, um Windows Installer é usado para instalar um pacote (arquivo. msi) e um patch Windows Installer (arquivo. msp) é distribuído para instalar patches.</span><span class="sxs-lookup"><span data-stu-id="b5a46-137">In this method, a Windows Installer is used to install a package (.msi file) and a Windows Installer patch (.msp file) is distributed to install patches.</span></span> <span data-ttu-id="b5a46-138">O pacote deve ter uma tabela MsiPatchCertificate e o patch deve ser assinado digitalmente por um certificado na tabela.</span><span class="sxs-lookup"><span data-stu-id="b5a46-138">The package must have an MsiPatchCertificate table, and the patch must be digitally signed by a certificate in the table.</span></span> <span data-ttu-id="b5a46-139">Mais informações sobre a assinatura digital podem ser encontradas em [assinatura Authenticode para desenvolvedores de jogos](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="b5a46-139">More information about digital signing can be found at [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

<span data-ttu-id="b5a46-140">Mais detalhes e requisitos para usar esse método de aplicação de patch podem ser encontrados na documentação do Windows Installer:</span><span class="sxs-lookup"><span data-stu-id="b5a46-140">More details and requirements to use this patching method can be found in the Windows Installer documentation:</span></span>

-   [<span data-ttu-id="b5a46-141">Aplicação de patch e atualizações</span><span class="sxs-lookup"><span data-stu-id="b5a46-141">Patching and Upgrades</span></span>](/windows/desktop/Msi/patching-and-upgrades)
-   [<span data-ttu-id="b5a46-142">Aplicação de patch de UAC (controle de conta de usuário)</span><span class="sxs-lookup"><span data-stu-id="b5a46-142">User Account Control (UAC) Patching</span></span>](/windows/desktop/Msi/user-account-control--uac--patching)

<span data-ttu-id="b5a46-143">A desvantagem desse método é que, se o jogo não tiver sido instalado a partir de mídia removível no Windows XP, a aplicação de patches exigirá direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-143">The disadvantage to this method is that if the game was not installed from removable media on Windows XP, then patching requires Administrator rights.</span></span> <span data-ttu-id="b5a46-144">No entanto, isso não é provavelmente muito restritivo, pois a maioria dos administradores de usuários no Windows XP e a restrição de software instalado a partir de mídia removível não estão presentes no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="b5a46-144">However, this not likely to be too restrictive, because most users administrators on Windows XP, and the restriction to software installed from removable media is not present on Windows Vista.</span></span>

<span data-ttu-id="b5a46-145">A principal vantagem desse método é que os patches podem ser aplicados por uma conta de usuário padrão sem a necessidade de uma solicitação e autenticação para direitos elevados.</span><span class="sxs-lookup"><span data-stu-id="b5a46-145">The main advantage of this method is that patches can be applied by a Standard User account without requiring a prompt and authentication for elevated rights.</span></span> <span data-ttu-id="b5a46-146">Isso proporciona uma melhor experiência do usuário, pois, para jogar um jogo, um usuário com uma conta de usuário padrão não precisa pedir a alguém com uma conta de administrador para instalar o patch ou para fornecer a conta de usuário padrão com direitos de administrador permanentes.</span><span class="sxs-lookup"><span data-stu-id="b5a46-146">This provides a better user experience, because to play a game, a user with a Standard User account doesn't need to ask someone with an Administrator account to install the patch or to provide the Standard User account with permanent Administrator rights.</span></span>

<span data-ttu-id="b5a46-147">É possível que esse método funcione para jogos que exigem patches frequentes, mas a sobrecarga de usar pacotes de Windows Installer, em termos de integração de compilação e suporte a um grande número de arquivos, pode tornar esse método menos desejável do que outros.</span><span class="sxs-lookup"><span data-stu-id="b5a46-147">It is possible that this method might work for games that require frequent patches, but the overhead of using Windows Installer packages, in terms of build integration and supporting large numbers of files, might make this method less desirable than others.</span></span>

### <a name="method-2-require-administrator-rights-to-apply-patches"></a><span data-ttu-id="b5a46-148">Método 2: exigir direitos de administrador para aplicar patches</span><span class="sxs-lookup"><span data-stu-id="b5a46-148">Method 2: Require Administrator Rights to Apply Patches</span></span>

<span data-ttu-id="b5a46-149">Nesse método, o arquivo executável que aplica o patch requer a execução de direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-149">In this method, the executable file that applies the patch requires Administrator rights to run.</span></span> <span data-ttu-id="b5a46-150">Com direitos de administrador, o executável de aplicação de patch pode modificar diretamente os arquivos de jogos localizados em arquivos de programas% SystemDrive% \\ .</span><span class="sxs-lookup"><span data-stu-id="b5a46-150">With Administrator rights, the patching executable can directly modify the game files located in %SystemDrive%\\Program Files.</span></span>

<span data-ttu-id="b5a46-151">A vantagem desse método é sua simplicidade.</span><span class="sxs-lookup"><span data-stu-id="b5a46-151">The advantage of this method is its simplicity.</span></span> <span data-ttu-id="b5a46-152">No entanto, esse método não é adequado se o jogo precisar de patches frequentes, porque se um usuário com uma conta de usuário padrão quiser jogar um jogo que exige patches frequentes, como um jogo online de vários jogadores em grande escala, esse usuário terá duas opções:</span><span class="sxs-lookup"><span data-stu-id="b5a46-152">However, this method is unsuitable if the game needs frequent patches, because if a user with a Standard User account wants to play a game that requires frequent patches, like a massively multi-player online game, then that user has two choices:</span></span>

-   <span data-ttu-id="b5a46-153">Obtenha um administrador para fazer logon e corrigir o jogo, que pode ser inconveniente para ambas as partes.</span><span class="sxs-lookup"><span data-stu-id="b5a46-153">Get an Administrator to log on and patch the game, which might be inconvenient for both parties.</span></span>
-   <span data-ttu-id="b5a46-154">Faça com que sua conta seja promovida permanentemente com direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-154">Have his or her account permanently elevated with Administrator rights.</span></span>

> [!Note]  
> <span data-ttu-id="b5a46-155">A última solução não apenas enfraquece a segurança do sistema como um todo, mas impede que recursos importantes, como controles dos pais, funcionem.</span><span class="sxs-lookup"><span data-stu-id="b5a46-155">The latter solution not only weakens the security of the system as a whole, but it prevents important features, like parental controls, from working.</span></span>

 

<span data-ttu-id="b5a46-156">Ao implementar esse método, o arquivo executável que aplica o patch deve ser diferente do executável do jogo.</span><span class="sxs-lookup"><span data-stu-id="b5a46-156">When implementing this method, the executable file that applies the patch must be different from the game executable.</span></span> <span data-ttu-id="b5a46-157">O manifesto do executável de aplicação de patch deve especificar requireAdministrator para requestedExecutionLevel para denotar como um aplicativo que exige direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-157">The manifest of the patching executable should specify requireAdministrator for requestedExecutionLevel to denote it as an application that requires Administrator rights.</span></span> <span data-ttu-id="b5a46-158">Mais informações sobre como fazer isso podem ser encontradas em [práticas recomendadas do desenvolvedor e diretrizes para aplicativos em um ambiente com privilégios mínimos](/previous-versions/dotnet/articles/aa480150(v=msdn.10)), em "esquema do manifesto do aplicativo".</span><span class="sxs-lookup"><span data-stu-id="b5a46-158">More information about how to do this can be found at [Developer Best Practices and Guidelines for Applications in a Least Privileged Environment](/previous-versions/dotnet/articles/aa480150(v=msdn.10)), in "Application Manifest Schema."</span></span>

<span data-ttu-id="b5a46-159">Quando esse método é usado, mesmo com as configurações no manifesto, o arquivo executável ainda pode ser iniciado sem direitos de administrador em dois casos:</span><span class="sxs-lookup"><span data-stu-id="b5a46-159">When this method is used, even with the settings in the manifest, the executable file might still be launched without Administrator rights in two cases:</span></span>

-   <span data-ttu-id="b5a46-160">Se o sistema operacional for o Windows XP e a conta do usuário for um usuário restrito.</span><span class="sxs-lookup"><span data-stu-id="b5a46-160">If the operating system is Windows XP, and the user's account is a Restricted User.</span></span>
-   <span data-ttu-id="b5a46-161">Se o sistema operacional for o Windows Vista ou o Windows 7, a conta do usuário será um usuário padrão e o UAC será desabilitado.</span><span class="sxs-lookup"><span data-stu-id="b5a46-161">If the operating system is Windows Vista or Windows 7, the user's account is a Standard User, and UAC is disabled.</span></span>

<span data-ttu-id="b5a46-162">Ambos são cenários raros de consumo.</span><span class="sxs-lookup"><span data-stu-id="b5a46-162">Both of these are rare consumer scenarios.</span></span> <span data-ttu-id="b5a46-163">No entanto, o patcher deve fazer com que o manifesto exija direitos de administrador e deve chamar [**IsUserAnAdmin**](/windows/desktop/api/shlobj_core/nf-shlobj_core-isuseranadmin); Se essa função retornar FALSE, a mensagem de erro "direitos de administrador são necessários" será exibida.</span><span class="sxs-lookup"><span data-stu-id="b5a46-163">However, the patcher should have the manifest require Administrator rights, and it should call [**IsUserAnAdmin**](/windows/desktop/api/shlobj_core/nf-shlobj_core-isuseranadmin); if this function returns FALSE, the error message "Administrator rights are required" is displayed.</span></span>

<span data-ttu-id="b5a46-164">Em geral, o método 1 é preferível para jogos que precisam de apenas alguns patches durante seus tempos de vida.</span><span class="sxs-lookup"><span data-stu-id="b5a46-164">Overall, method 1 is preferable for games that need just a few patches over their lifetimes.</span></span>

## <a name="games-that-require-frequent-patches"></a><span data-ttu-id="b5a46-165">Jogos que exigem patches frequentes</span><span class="sxs-lookup"><span data-stu-id="b5a46-165">Games that Require Frequent Patches</span></span>

<span data-ttu-id="b5a46-166">Muitos jogos baseados na Internet estão sendo aprimorados continuamente e geralmente exigem patches regulares.</span><span class="sxs-lookup"><span data-stu-id="b5a46-166">Many Internet-based games are being improved continuously, and they usually require regular patches.</span></span> <span data-ttu-id="b5a46-167">Para esses jogos, os patches podem ser aplicados por usuário ou por computador, conforme discutido nos tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="b5a46-167">For these games, patches could be applied per-user or per-computer, as discussed in the follow topics.</span></span> <span data-ttu-id="b5a46-168">Outras soluções possíveis incluem alterar a ACL que protege arquivos de programas% SystemDrive% \\ ou criar um serviço personalizado.</span><span class="sxs-lookup"><span data-stu-id="b5a46-168">Other possible solutions include altering the ACL that protects %SystemDrive%\\Program Files or creating a custom service.</span></span>

### <a name="method-3-install-per-user"></a><span data-ttu-id="b5a46-169">Método 3: instalar Per-User</span><span class="sxs-lookup"><span data-stu-id="b5a46-169">Method 3: Install Per-User</span></span>

<span data-ttu-id="b5a46-170">Uma abordagem recomendada e fácil é instalar o jogo inteiro em uma subpasta por usuário da pasta de dados do aplicativo local, que você pode encontrar chamando [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) com \_ AppData local CSIDL \_ .</span><span class="sxs-lookup"><span data-stu-id="b5a46-170">One recommended and easy approach is to install the entire game to a per-user subfolder of the local application data folder, which you can find by calling [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with CSIDL\_LOCAL\_APPDATA.</span></span> <span data-ttu-id="b5a46-171">Um exemplo de caminho é C: \\ Documents and Settings \\ User name \\ Local Settings \\ Application Data \\ ExampleGame.</span><span class="sxs-lookup"><span data-stu-id="b5a46-171">An example path is C:\\Documents and Settings\\user name\\Local Settings\\Application Data\\ExampleGame.</span></span> <span data-ttu-id="b5a46-172">Esse local permite que um aplicativo em execução com direitos de usuário padrão modifique arquivos de jogos diretamente.</span><span class="sxs-lookup"><span data-stu-id="b5a46-172">Such a location allows an application running with Standard User rights to directly modify game files.</span></span>

<span data-ttu-id="b5a46-173">No entanto, há uma desvantagem dessa abordagem quando um computador tem vários usuários: cada usuário tem uma cópia do jogo instalada e os patches devem ser baixados e aplicados por cada usuário.</span><span class="sxs-lookup"><span data-stu-id="b5a46-173">However, there is a disadvantage to this approach when a computer has multiple users: each user has a copy of the game installed, and patches must be downloaded and applied by each user.</span></span> <span data-ttu-id="b5a46-174">Isso desperdiça não apenas o espaço em disco e o tempo dos usuários, mas também aumenta o uso da largura de banda de rede para o servidor que fornece patches.</span><span class="sxs-lookup"><span data-stu-id="b5a46-174">This wastes not only users' time and disk space, but it also increases use of network bandwidth to the server that provides patches.</span></span> <span data-ttu-id="b5a46-175">Além disso, como qualquer aplicativo com direitos de usuário padrão pode modificar o jogo, os executáveis de jogos são menos protegidos; cabe ao fabricante do jogo decidir se isso é aceitável ou não.</span><span class="sxs-lookup"><span data-stu-id="b5a46-175">Also, because any application with standard user rights can modify the game, game executables are less protected; it is up to the game manufacturer to decide if this is acceptable or not.</span></span>

### <a name="method-4-install-to-a-common-per-computer-location"></a><span data-ttu-id="b5a46-176">Método 4: instalar em um local de Per-Computer comum</span><span class="sxs-lookup"><span data-stu-id="b5a46-176">Method 4: Install to a Common Per-Computer Location</span></span>

<span data-ttu-id="b5a46-177">Outro método é instalar os dados do jogo não executável em um subdiretório do caminho especificado por [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) CSIDL \_ Common \_ AppData; um caminho de exemplo é C: \\ Documents and Settings \\ All Users \\ Application Data \\ ExampleGame.</span><span class="sxs-lookup"><span data-stu-id="b5a46-177">Another method is to install the non-executable game data to a subdirectory of the path specified by [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) CSIDL\_COMMON\_APPDATA; an example path is C:\\Documents and Settings\\All Users\\Application Data\\ExampleGame.</span></span> <span data-ttu-id="b5a46-178">Esse é um local compartilhado para todos os usuários e pode ser modificado por aplicativos que são executados com direitos de usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="b5a46-178">This is a shared location for all users, and it can be modified by applications that run with Standard User rights.</span></span> <span data-ttu-id="b5a46-179">Esse método minimiza a necessidade de reaplicar patches grandes quando o jogo é reproduzido de mais de uma conta.</span><span class="sxs-lookup"><span data-stu-id="b5a46-179">This method minimizes the need to reapply large patches when the game is played from more than one account.</span></span> <span data-ttu-id="b5a46-180">Os arquivos executáveis para o jogo devem ser mantidos em arquivos de programas% SystemDrive% \\ para minimizar o risco a outras contas no sistema.</span><span class="sxs-lookup"><span data-stu-id="b5a46-180">Executable files for the game should be kept in %SystemDrive%\\Programs Files to minimize the risk to other accounts on the system.</span></span> <span data-ttu-id="b5a46-181">Os arquivos executáveis devem verificar a integridade do novo conteúdo no diretório compartilhado, já que esse local pode ser modificado por um programa ou pessoa com direitos de usuário padrão; Considere o uso de [**MapFileAndCheckSum**](/windows/desktop/api/imagehlp/nf-imagehlp-mapfileandchecksuma) para computar uma soma de verificação dos arquivos.</span><span class="sxs-lookup"><span data-stu-id="b5a46-181">The executable files should verify the integrity of the new content in the shared directory, since that location can be modified by a program or person with Standard User rights; consider using [**MapFileAndCheckSum**](/windows/desktop/api/imagehlp/nf-imagehlp-mapfileandchecksuma) to compute a checksum of the files.</span></span>

<span data-ttu-id="b5a46-182">Esse método tem a vantagem de trabalhar igualmente bem no Windows XP e no Windows Vista, além de não exigir direitos de administrador.</span><span class="sxs-lookup"><span data-stu-id="b5a46-182">This method has the advantage of working equally well on both Windows XP and Windows Vista, and it doesn't require Administrator rights.</span></span>

### <a name="other-possibilities"></a><span data-ttu-id="b5a46-183">Outras possibilidades</span><span class="sxs-lookup"><span data-stu-id="b5a46-183">Other Possibilities</span></span>

<span data-ttu-id="b5a46-184">Fora dos métodos já abordados, outra possibilidade é alterar a ACL da pasta de jogos de arquivos de programas% SystemDrive% \\ \\ \\ ao instalar o jogo para que uma ferramenta de aplicação de patch possa gravar diretamente nos arquivos do jogo mesmo quando ele for executado com direitos de usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="b5a46-184">Outside of the methods already discussed, another possibility is to alter the ACL of %SystemDrive%\\Program Files\\Game Folder\\ when installing the game so that a patching tool can write directly to the game's files even when run with Standard User rights.</span></span> <span data-ttu-id="b5a46-185">Embora isso não seja difícil, ele ignora a proteção de segurança que o sistema oferece aos arquivos do jogo e fornece uma oportunidade para que programas mal-intencionados alterem o conteúdo do diretório.</span><span class="sxs-lookup"><span data-stu-id="b5a46-185">While this is not difficult, it does bypass the security protection that the system offers to the game's files and provides an opportunity for malicious programs to alter the contents of the directory.</span></span> <span data-ttu-id="b5a46-186">Isso não é aconselhável e é altamente recomendável que uma alternativa seja usada em vez disso.</span><span class="sxs-lookup"><span data-stu-id="b5a46-186">This is not advisable, and it is strongly recommended that an alternative be used instead.</span></span>

<span data-ttu-id="b5a46-187">Uma possibilidade final é escrever um serviço personalizado.</span><span class="sxs-lookup"><span data-stu-id="b5a46-187">One final possibility is to write a custom service.</span></span> <span data-ttu-id="b5a46-188">Em geral, escrever um serviço personalizado para jogos de patch não é uma boa ideia, pois isso é complicado e propenso a erros.</span><span class="sxs-lookup"><span data-stu-id="b5a46-188">In general, writing a custom service to patch games is not a good idea, because doing so is complicated and error-prone.</span></span> <span data-ttu-id="b5a46-189">É recomendável que a aplicação de patch seja feita pelo uso de outros métodos discutidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="b5a46-189">It is recommended that patching be done by use of other methods discussed in this article.</span></span> <span data-ttu-id="b5a46-190">No entanto, um serviço personalizado pode ser necessário quando combinado com soluções antifalsificação ou antipirataria.</span><span class="sxs-lookup"><span data-stu-id="b5a46-190">However, a custom service might be necessary when combined with anti-cheat or anti-piracy solutions.</span></span> <span data-ttu-id="b5a46-191">Esse serviço deve dar suporte a um grande número de jogos e ser projetado para que ele só possa baixar os arquivos de patch e gravar somente no diretório de instalação do jogo de destino.</span><span class="sxs-lookup"><span data-stu-id="b5a46-191">Such a service should support a large number of games and be designed so that it can only download the patch files and write only to the installation directory for the target game.</span></span> <span data-ttu-id="b5a46-192">É importante que o serviço seja pequeno, tenha uma área de superfície mínima que seja vulnerável a ataques e use o mínimo de recursos do sistema possível quando o jogo não estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="b5a46-192">It is important that the service be small, have a minimal surface area that is vulnerable to attack, and use as few system resources as possible when the game is not running.</span></span>

## <a name="summary"></a><span data-ttu-id="b5a46-193">Resumo</span><span class="sxs-lookup"><span data-stu-id="b5a46-193">Summary</span></span>

<span data-ttu-id="b5a46-194">Por fim, cabe a você decidir qual método implementar.</span><span class="sxs-lookup"><span data-stu-id="b5a46-194">Ultimately, it is up to you to decide which method to implement.</span></span> <span data-ttu-id="b5a46-195">Você precisa avaliar os fatores que são importantes para você.</span><span class="sxs-lookup"><span data-stu-id="b5a46-195">You need to weigh the factors are that are important to you.</span></span> <span data-ttu-id="b5a46-196">Segurança, frequência de aplicação de patches, facilidade de uso pelo cliente, carga de trabalho necessária para implementar, complexidade de solução e conformidade de recursos de plataforma são os fatores que cada desenvolvedor deve considerar antes de decidir sobre um determinado método.</span><span class="sxs-lookup"><span data-stu-id="b5a46-196">Security, frequency of patching, ease of use by customer, workload required to implement, complexity of solution, and platform feature compliance are the factors that each developer must consider before deciding on a particular method.</span></span>

<span data-ttu-id="b5a46-197">Você pode encontrar mais informações sobre a proteção de conta de usuário nos [requisitos de desenvolvimento de aplicativos do Windows Vista para UAC (controle de conta de usuário)](/previous-versions/aa905330(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="b5a46-197">You can find more information about user account protection in [Windows Vista Application Development Requirements for User Account Control (UAC)](/previous-versions/aa905330(v=msdn.10)).</span></span>

 

 