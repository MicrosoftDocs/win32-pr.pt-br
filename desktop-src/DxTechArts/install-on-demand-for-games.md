---
title: Instale-sob demanda para jogos
description: Este artigo técnico aborda duas técnicas, instalação sob demanda e instalação em segundo plano, usando Windows Installer.
ms.assetid: abaaa7bf-8ed8-0425-6845-3671a56fe7fc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 064dc58c563c372d1320a21040920e492e4e65e4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105781008"
---
# <a name="install-on-demand-for-games"></a><span data-ttu-id="8460f-103">Instale-sob demanda para jogos</span><span class="sxs-lookup"><span data-stu-id="8460f-103">Install-on-Demand for Games</span></span>

<span data-ttu-id="8460f-104">Este artigo técnico aborda duas técnicas, instalação sob demanda e instalação em segundo plano, usando [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="8460f-104">This technical article discusses two techniques, install-on-demand and background install, using [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span> <span data-ttu-id="8460f-105">Os jogos podem utilizar essas técnicas de instalação para fornecer uma experiência de jogos melhor e mais agradável para os jogadores, reduzindo o tempo de instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-105">Games can utilize these installation techniques to provide a better and more pleasant gaming experience for players by reducing the installation time.</span></span>

-   [<span data-ttu-id="8460f-106">Visão geral</span><span class="sxs-lookup"><span data-stu-id="8460f-106">Overview</span></span>](#overview)
-   [<span data-ttu-id="8460f-107">Suporte a patches</span><span class="sxs-lookup"><span data-stu-id="8460f-107">Patching Support</span></span>](#patching-support)
-   [<span data-ttu-id="8460f-108">O exemplo do SDK do InstallOnDemand</span><span class="sxs-lookup"><span data-stu-id="8460f-108">The InstallOnDemand SDK Sample</span></span>](#the-installondemand-sdk-sample)
-   [<span data-ttu-id="8460f-109">Os recursos e componentes do exemplo</span><span class="sxs-lookup"><span data-stu-id="8460f-109">The Sample's Features and Components</span></span>](#the-samples-features-and-components)
-   [<span data-ttu-id="8460f-110">Instalação</span><span class="sxs-lookup"><span data-stu-id="8460f-110">Installation</span></span>](#installation)
-   [<span data-ttu-id="8460f-111">Limitação</span><span class="sxs-lookup"><span data-stu-id="8460f-111">Limitation</span></span>](#limitation)

## <a name="overview"></a><span data-ttu-id="8460f-112">Visão geral</span><span class="sxs-lookup"><span data-stu-id="8460f-112">Overview</span></span>

<span data-ttu-id="8460f-113">A instalação tem sido um elemento de aplicativos baseados em computador por muito tempo.</span><span class="sxs-lookup"><span data-stu-id="8460f-113">Installation has been an element of computer-based applications for a long time.</span></span> <span data-ttu-id="8460f-114">A maioria dos aplicativos hoje exige que eles sejam instalados no disco rígido local do usuário antes que possam ser usados.</span><span class="sxs-lookup"><span data-stu-id="8460f-114">Most applications today require that they be installed on the user's local hard drive first before they can be used.</span></span> <span data-ttu-id="8460f-115">Jogos de computador não são exceção; Quando um consumidor adquire um jogo do Microsoft Windows e tenta executá-lo, ele deve primeiro passar por um processo de instalação que copia os arquivos necessários do disco do jogo para o disco rígido.</span><span class="sxs-lookup"><span data-stu-id="8460f-115">Computer games are no exception; when a consumer buys a Microsoft Windows game and tries to run it, he must first go through an installation process that copies necessary files from the game disc to the hard drive.</span></span> <span data-ttu-id="8460f-116">Esse processo de instalação é geralmente longo e pode levar até uma hora para ser concluído.</span><span class="sxs-lookup"><span data-stu-id="8460f-116">This installation process is usually lengthy and can take as much as an hour to complete.</span></span> <span data-ttu-id="8460f-117">O tempo de instalação é um fator que torna os jogos de console mais desejáveis do que jogos baseados em computador para alguns jogadores, pois eles podem executar imediatamente um jogo de console depois de inserir o disco do jogo. A tecnologia discutida neste artigo tentará corrigir isso reduzindo drasticamente o tempo de instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-117">The installation time is a factor that makes console games more desirable than computer-based games for some players, as they are able to immediately play a console game after inserting the game disc. The technology discussed in this article will attempt to remedy this by drastically reducing the installation time.</span></span>

<span data-ttu-id="8460f-118">Tradicionalmente, os jogos exigem que todos ou a maioria dos arquivos sejam instalados antes de iniciar.</span><span class="sxs-lookup"><span data-stu-id="8460f-118">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="8460f-119">Para obter a instalação sob demanda, os recursos do jogo precisam ser modulares; ou seja, o desenvolvedor deve dividir os recursos do aplicativo (gráficos, áudio e assim por diante) em componentes.</span><span class="sxs-lookup"><span data-stu-id="8460f-119">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="8460f-120">Cada componente é um conjunto de recursos que podem ser instalados ou removidos como uma unidade.</span><span class="sxs-lookup"><span data-stu-id="8460f-120">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="8460f-121">Quando isso for feito, o desenvolvedor do jogo definirá um ou mais recursos, normalmente um ou mais por nível ou zona.</span><span class="sxs-lookup"><span data-stu-id="8460f-121">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="8460f-122">Cada recurso de um aplicativo especifica um conjunto de componentes necessários para executar esse recurso específico.</span><span class="sxs-lookup"><span data-stu-id="8460f-122">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="8460f-123">Quando um aplicativo é instalado, seus recursos podem ser marcados como "instalar" (componentes copiados para o disco rígido local no momento da instalação) ou "anunciados" (componentes copiados para o disco rígido local após a instalação inicial quando o aplicativo usa esse recurso).</span><span class="sxs-lookup"><span data-stu-id="8460f-123">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive after the initial install when the application uses that feature).</span></span> <span data-ttu-id="8460f-124">Um desenvolvedor de jogos pode reduzir o tempo de instalação projetando o jogo para ser iniciado e executado com um conjunto mínimo de recursos instalados.</span><span class="sxs-lookup"><span data-stu-id="8460f-124">A game developer can reduce the installation time by designing the game to launch and run with a minimal set of features installed.</span></span> <span data-ttu-id="8460f-125">O restante de seus recursos pode ser marcado como anunciado e instalado sob demanda quando o aplicativo realmente precisa usar funcionalidades que esses recursos fornecem.</span><span class="sxs-lookup"><span data-stu-id="8460f-125">The rest of its features can be marked as advertised and installed on demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="8460f-126">Os jogos podem chamar [Windows Installer](/windows/desktop/Msi/windows-installer-portal) para instalar um recurso específico que pode não ter sido instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-126">Games can call [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to install a particular feature that may not have been installed.</span></span> <span data-ttu-id="8460f-127">Para fazer a instalação aparecer em segundo plano, um thread de trabalho pode ser usado para fazer as chamadas para o instalador enquanto o thread principal continua a lidar com a lógica do jogo e para renderizar a tela.</span><span class="sxs-lookup"><span data-stu-id="8460f-127">To make the installation appear in the background, a worker thread can be used to make the calls to the installer while the primary thread continues to handle game logic and to render the screen.</span></span> <span data-ttu-id="8460f-128">Isso minimiza a interrupção do jogo causado pela instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-128">This minimizes the disruption of gameplay caused by the installation.</span></span> <span data-ttu-id="8460f-129">O jogo pode iniciar a instalação a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="8460f-129">The game can initiate the installation at any time.</span></span> <span data-ttu-id="8460f-130">No entanto, como a instalação consome ciclos do processador, geralmente não é uma boa ideia executar a instalação quando o thread principal está em necessidade crítica de poder de processamento, como quando o usuário está no meio da ação.</span><span class="sxs-lookup"><span data-stu-id="8460f-130">However, because the installation consumes processor cycles, it is generally not a good idea to perform the installation when the primary thread is in critical need of processing power, such as when the user is in the middle of the action.</span></span> <span data-ttu-id="8460f-131">Por exemplo, um bom momento para executar a instalação pode ser durante o tempo que o usuário está no menu do jogo, quando o jogo é pausado ou minimizado, ou quando o usuário está assistindo ao filme de introdução ou cutscenes.</span><span class="sxs-lookup"><span data-stu-id="8460f-131">For example, a good time to perform the installation may be during the time the user is in the game menu, when the game is paused or minimized, or when the user is watching the introduction movie or cutscenes.</span></span>

## <a name="patching-support"></a><span data-ttu-id="8460f-132">Suporte a patches</span><span class="sxs-lookup"><span data-stu-id="8460f-132">Patching Support</span></span>

<span data-ttu-id="8460f-133">Atualmente, a maioria dos jogos precisa ser atualizada mesmo depois que eles são enviados conforme os bugs são corrigidos e novos recursos são adicionados.</span><span class="sxs-lookup"><span data-stu-id="8460f-133">Most games today need to be updated even after they ship as bugs get fixed and new features get added.</span></span> <span data-ttu-id="8460f-134">A atualização geralmente requer aplicação de patch, que é tradicionalmente um procedimento direto para jogos.</span><span class="sxs-lookup"><span data-stu-id="8460f-134">Updating often requires patching, which is traditionally a straightforward procedure for games.</span></span> <span data-ttu-id="8460f-135">Como todos os arquivos necessários são instalados no disco rígido do usuário, a aplicação de patches em um jogo envolve copiar arquivos revisados no disco rígido, substituindo os arquivos existentes.</span><span class="sxs-lookup"><span data-stu-id="8460f-135">Because all of the necessary files are installed onto the user's hard drive, patching a game involves copying revised files onto the hard drive, overwriting existing files.</span></span> <span data-ttu-id="8460f-136">Quando a instalação sob demanda é empregada, nem todos os arquivos são instalados e copiados no momento da aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="8460f-136">When install-on-demand is employed, not all files are installed and copied at the time of patching.</span></span> <span data-ttu-id="8460f-137">Portanto, o patcher não pode simplesmente gravar arquivos atualizados na pasta do jogo.</span><span class="sxs-lookup"><span data-stu-id="8460f-137">Therefore, the patcher cannot simply write updated files onto the game folder.</span></span>

<span data-ttu-id="8460f-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) tem recursos para aplicação de patch de aplicativos que usam a instalação sob demanda.</span><span class="sxs-lookup"><span data-stu-id="8460f-138">[Windows Installer](/windows/desktop/Msi/windows-installer-portal) has features for patching applications that use install-on-demand.</span></span> <span data-ttu-id="8460f-139">Ao aplicar um patch, o instalador armazena em cache o patch no sistema.</span><span class="sxs-lookup"><span data-stu-id="8460f-139">When applying a patch, the installer caches the patch onto the system.</span></span> <span data-ttu-id="8460f-140">Esse recurso funciona bem para patches com deltas pequenos.</span><span class="sxs-lookup"><span data-stu-id="8460f-140">This feature works well for patches with small deltas.</span></span> <span data-ttu-id="8460f-141">Os arquivos liberados originalmente não precisam mais estar no disco no momento da aplicação de patch, portanto, esses arquivos podem ser anunciados.</span><span class="sxs-lookup"><span data-stu-id="8460f-141">The originally released files no longer need to be on the disk at the time of patching, so those files can be advertised.</span></span> <span data-ttu-id="8460f-142">Posteriormente, quando o aplicativo for executado e precisar acessar os arquivos, o instalador instalará a versão mais recente desses arquivos copiando a versão originalmente liberada da mídia (por exemplo, CDs) e aplicando o patch depois de ler os dados de patch salvos.</span><span class="sxs-lookup"><span data-stu-id="8460f-142">Later, when the application runs and needs to access the files, the installer installs the most recent version of those files by copying the originally released version from the media (for example, CDs) and applying the patch after reading the saved patch data.</span></span>

## <a name="the-installondemand-sdk-sample"></a><span data-ttu-id="8460f-143">O exemplo do SDK do InstallOnDemand</span><span class="sxs-lookup"><span data-stu-id="8460f-143">The InstallOnDemand SDK Sample</span></span>

<span data-ttu-id="8460f-144">O exemplo de instalação sob demanda para jogos demonstra as técnicas de instalação sob demanda abordadas neste artigo.</span><span class="sxs-lookup"><span data-stu-id="8460f-144">The Install-on-Demand for Games sample demonstrates the install-on-demand techniques discussed in this article.</span></span> <span data-ttu-id="8460f-145">Ao contrário de outros exemplos, a instalação sob demanda para jogos não pode ser executada diretamente do navegador de exemplo.</span><span class="sxs-lookup"><span data-stu-id="8460f-145">Unlike other samples, Install-on-Demand for Games cannot be run directly from the sample browser.</span></span> <span data-ttu-id="8460f-146">Como o exemplo usa o [Windows Installer](/windows/desktop/Msi/windows-installer-portal) para gerenciar sua instalação, ele precisa ser incluído no banco de dados do instalador de aplicativos instalados.</span><span class="sxs-lookup"><span data-stu-id="8460f-146">Because the sample uses the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) to manage its installation, it needs to be included in the installer's database of installed applications.</span></span>

<span data-ttu-id="8460f-147">**Para iniciar o exemplo**</span><span class="sxs-lookup"><span data-stu-id="8460f-147">**To launch the sample**</span></span>

1.  <span data-ttu-id="8460f-148">Use o link instalar projeto no navegador de exemplo para copiar os arquivos de exemplo para uma pasta.</span><span class="sxs-lookup"><span data-stu-id="8460f-148">Use the Install Project link in the sample browser to copy the sample's files to a folder.</span></span>
2.  <span data-ttu-id="8460f-149">Clique duas vezes em InstallOnDemand.msi para instalar o exemplo.</span><span class="sxs-lookup"><span data-stu-id="8460f-149">Double click InstallOnDemand.msi to install the sample.</span></span>
3.  <span data-ttu-id="8460f-150">Selecione instalação típica.</span><span class="sxs-lookup"><span data-stu-id="8460f-150">Select Typical Install.</span></span>
4.  <span data-ttu-id="8460f-151">Inicie o exemplo iniciando o InstallOnDemand.exe na pasta instalada (normalmente arquivos de programas \\ InstallOnDemand) ou iniciando nos programas do menu iniciar \\ .</span><span class="sxs-lookup"><span data-stu-id="8460f-151">Start the sample by launching the InstallOnDemand.exe in the installed folder (typically Program Files\\InstallOnDemand) or by launching from Start Menu\\Programs.</span></span>

<span data-ttu-id="8460f-152">InstallOnDemand.msi é um banco de dados reconhecido pelo instalador.</span><span class="sxs-lookup"><span data-stu-id="8460f-152">InstallOnDemand.msi is a database recognized by the installer.</span></span> <span data-ttu-id="8460f-153">Ele define todo o processo de instalação: a estrutura de diretório, o que será e não será copiado, quais recursos serão copiados juntos, quais valores de registro gravar, quais atalhos criar e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="8460f-153">It defines the entire installation process: the directory structure, what will and will not be copied, what resources will be copied together, what registry values to write, what shortcuts to create, and so forth.</span></span>

<span data-ttu-id="8460f-154">Quando iniciado, o exemplo reproduz uma sequência de introdução.</span><span class="sxs-lookup"><span data-stu-id="8460f-154">When launched, the sample plays an introduction sequence.</span></span> <span data-ttu-id="8460f-155">O jogador pode encerrar e inserir o menu principal pressionando a tecla ESC.</span><span class="sxs-lookup"><span data-stu-id="8460f-155">The player can end it and enter the main menu by pressing the ESC key.</span></span> <span data-ttu-id="8460f-156">Após a introdução, o jogador pode iniciar um novo jogo inserindo um nome de caractere e rolando as estatísticas.</span><span class="sxs-lookup"><span data-stu-id="8460f-156">Following the introduction, the player can start a new game by entering a character name and scrolling through the statistics.</span></span> <span data-ttu-id="8460f-157">Antes que o exemplo comece a reproduzir a sequência de introdução, o exemplo chama uma função de instalador para verificar se o recurso do nível 1 está instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-157">Before the sample begins to play the introduction sequence, the sample calls an installer function to check if the feature for level 1 is installed.</span></span> <span data-ttu-id="8460f-158">Se o recurso nível 1 não tiver sido instalado, o exemplo usará um thread em segundo plano para solicitar que o instalador instale o jogo, enquanto o thread principal está fazendo algo mais (como reproduzir a sequência de introdução, renderizar o menu ou interagir com o Player na criação de caracteres).</span><span class="sxs-lookup"><span data-stu-id="8460f-158">If the level 1 feature has not been installed, the sample uses a background thread to ask the installer to install the game, while the primary thread is doing something else (such as playing the introduction sequence, rendering the menu, or interacting with the player on character creation).</span></span> <span data-ttu-id="8460f-159">A experiência é diferente da instalação tradicional do jogo, pois o usuário está ocupado no jogo (observando a introdução ou criando um novo caractere) enquanto a instalação está em andamento.</span><span class="sxs-lookup"><span data-stu-id="8460f-159">The experience is different from traditional game installation in that the user is occupied in the game (watching the introduction or creating a new character) while installation is in progress.</span></span> <span data-ttu-id="8460f-160">Depois que o jogador terminar de criar um caractere, o exemplo carregará os recursos para o nível 1.</span><span class="sxs-lookup"><span data-stu-id="8460f-160">After the player has finished creating a character, the sample loads the resources for level 1.</span></span>

<span data-ttu-id="8460f-161">No lado direito da tela de exemplo estão cinco botões marcados como "reproduzir nível 1" por meio de "reproduzir nível 5".</span><span class="sxs-lookup"><span data-stu-id="8460f-161">On the right side of the sample screen are five buttons marked "Play Level 1" through "Play Level 5."</span></span> <span data-ttu-id="8460f-162">Esses botões simulam a conclusão do Player do nível atual e o avanço para o próximo.</span><span class="sxs-lookup"><span data-stu-id="8460f-162">These buttons simulate the player's completion of the current level and advancement to the next.</span></span> <span data-ttu-id="8460f-163">Quando um desses botões é clicado, uma tela de estatísticas é exibida mostrando informações sobre o nível que acabou de terminar.</span><span class="sxs-lookup"><span data-stu-id="8460f-163">When one of these buttons is clicked, a statistics screen appears showing information about the level that he has just finished.</span></span> <span data-ttu-id="8460f-164">O exemplo também leva esse tempo para solicitar que o instalador Verifique e instale o próximo nível, se ele ainda não estiver instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-164">The sample also takes this time to ask the installer to check and install the next level, if it is not already installed.</span></span> <span data-ttu-id="8460f-165">A instalação ocorre enquanto o player está lendo a tela estatísticas, de modo que, quando o usuário clicar em OK para inserir o próximo nível, os recursos do nível serão todos instalados e prontos para serem carregados.</span><span class="sxs-lookup"><span data-stu-id="8460f-165">The installation occurs while the player is reading the statistics screen, so that when the user clicks OK to enter the next level, the level's resources are all installed and ready to be loaded.</span></span>

## <a name="the-samples-features-and-components"></a><span data-ttu-id="8460f-166">Os recursos e componentes do exemplo</span><span class="sxs-lookup"><span data-stu-id="8460f-166">The Sample's Features and Components</span></span>

<span data-ttu-id="8460f-167">Tradicionalmente, os jogos exigem que todos ou a maioria dos arquivos sejam instalados antes de iniciar.</span><span class="sxs-lookup"><span data-stu-id="8460f-167">Traditionally, games require that all or most of the files be installed prior to launching.</span></span> <span data-ttu-id="8460f-168">Para obter a instalação sob demanda, os recursos do jogo precisam ser modulares; ou seja, o desenvolvedor deve dividir os recursos do aplicativo (gráficos, áudio e assim por diante) em componentes.</span><span class="sxs-lookup"><span data-stu-id="8460f-168">In order to achieve install-on-demand, the game resources need to be modular; that is, the developer must divide the application's resources (graphics, audio, and so on) into components.</span></span> <span data-ttu-id="8460f-169">Cada componente é um conjunto de recursos que podem ser instalados ou removidos como uma unidade.</span><span class="sxs-lookup"><span data-stu-id="8460f-169">Each component is a set of resources that can be installed or removed as a unit.</span></span> <span data-ttu-id="8460f-170">Quando isso for feito, o desenvolvedor do jogo definirá um ou mais recursos, normalmente um ou mais por nível ou zona.</span><span class="sxs-lookup"><span data-stu-id="8460f-170">Once this is done, the game developer defines one or more features, typically one or more per level or zone.</span></span> <span data-ttu-id="8460f-171">Cada recurso de um aplicativo especifica um conjunto de componentes necessários para executar esse recurso específico.</span><span class="sxs-lookup"><span data-stu-id="8460f-171">Each feature of an application specifies a set of components necessary for running that particular feature.</span></span> <span data-ttu-id="8460f-172">Quando um aplicativo é instalado, seus recursos podem ser marcados como "instalar" (componentes copiados para o disco rígido local no momento da instalação) ou "anunciados" (componentes copiados para o disco rígido local quando o aplicativo usa posteriormente esse recurso).</span><span class="sxs-lookup"><span data-stu-id="8460f-172">When an application is installed, its features can be marked as "install" (components copied to the local hard drive at installation time) or "advertised" (components copied to the local hard drive when the application later uses that feature).</span></span> <span data-ttu-id="8460f-173">Um desenvolvedor de jogos pode reduzir o tempo de instalação projetando o jogo para iniciar e começar a execução com um conjunto mínimo de recursos instalados.</span><span class="sxs-lookup"><span data-stu-id="8460f-173">A game developer can reduce the installation time by designing the game to launch and start running with a minimal set of features installed.</span></span> <span data-ttu-id="8460f-174">O restante de seus recursos pode ser marcado como anunciado e instalado sob demanda quando o aplicativo realmente precisa usar funcionalidades que esses recursos fornecem.</span><span class="sxs-lookup"><span data-stu-id="8460f-174">The rest of its features can be marked as advertised and installed on-demand when the application actually needs to use functionalities that those features provide.</span></span>

<span data-ttu-id="8460f-175">A tabela a seguir lista os seis recursos de nível superior que o exemplo define.</span><span class="sxs-lookup"><span data-stu-id="8460f-175">The following table lists the six top-level features that the sample defines.</span></span>



| <span data-ttu-id="8460f-176">Nome do recurso</span><span class="sxs-lookup"><span data-stu-id="8460f-176">Feature Name</span></span> | <span data-ttu-id="8460f-177">Funcionalidade</span><span class="sxs-lookup"><span data-stu-id="8460f-177">Functionality</span></span>                                                                                                                                                                                                             | <span data-ttu-id="8460f-178">Componentes</span><span class="sxs-lookup"><span data-stu-id="8460f-178">Components</span></span>  | <span data-ttu-id="8460f-179">Arquivos</span><span class="sxs-lookup"><span data-stu-id="8460f-179">Files</span></span>                                                                     |
|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------------------------------------------------------------------|
| <span data-ttu-id="8460f-180">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-180">Core</span></span>         | <span data-ttu-id="8460f-181">Inclui recursos sempre necessários, independentemente do nível.</span><span class="sxs-lookup"><span data-stu-id="8460f-181">Includes resources required at all times, regardless of level.</span></span> <span data-ttu-id="8460f-182">Esses recursos são: executável de exemplo, mídia exigida pela sequência de introdução e pela tela de carregamento e arquivo. FX que manipula toda a renderização no exemplo.</span><span class="sxs-lookup"><span data-stu-id="8460f-182">These resources are: sample executable, media required by introduction sequence and loading screen, and .fx file that handles all rendering in the sample.</span></span> | <span data-ttu-id="8460f-183">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-183">Core</span></span>        | <span data-ttu-id="8460f-184">InstallOnDemand.exe, InstallOnDemand. FX, Loading.bmp, Level. x</span><span class="sxs-lookup"><span data-stu-id="8460f-184">InstallOnDemand.exe, InstallOnDemand.fx, Loading.bmp, Level.x</span></span>             |
| <span data-ttu-id="8460f-185">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-185">Core</span></span>         | <span data-ttu-id="8460f-186">(o mesmo que acima)</span><span class="sxs-lookup"><span data-stu-id="8460f-186">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="8460f-187">CoreUI</span><span class="sxs-lookup"><span data-stu-id="8460f-187">CoreUI</span></span>      | <span data-ttu-id="8460f-188">\\Interface do usuário \\ de mídia dxutcontrols. DDS, Media \\ UI \\ DXUTShared. FX, Media \\ UI \\ Arrow. x</span><span class="sxs-lookup"><span data-stu-id="8460f-188">Media\\UI\\dxutcontrols.dds, Media\\UI\\DXUTShared.fx, Media\\UI\\arrow.x</span></span> |
| <span data-ttu-id="8460f-189">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-189">Core</span></span>         | <span data-ttu-id="8460f-190">(o mesmo que acima)</span><span class="sxs-lookup"><span data-stu-id="8460f-190">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="8460f-191">CoreMisc</span><span class="sxs-lookup"><span data-stu-id="8460f-191">CoreMisc</span></span>    | <span data-ttu-id="8460f-192">Media \\ misc \\ . x multisoloseafloor.bmp de \\ \\ mídia</span><span class="sxs-lookup"><span data-stu-id="8460f-192">Media\\Misc\\seafloor.x, Media\\Misc\\seafloor.bmp</span></span>                        |
| <span data-ttu-id="8460f-193">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-193">Core</span></span>         | <span data-ttu-id="8460f-194">(o mesmo que acima)</span><span class="sxs-lookup"><span data-stu-id="8460f-194">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="8460f-195">CoreSpeeder</span><span class="sxs-lookup"><span data-stu-id="8460f-195">CoreSpeeder</span></span> | <span data-ttu-id="8460f-196">\\Demonstração de PRT \\ de mídia LandShark. x, \\ acelerador de demonstração de prt de mídia \\ \_diff.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-196">Media\\PRT Demo\\LandShark.x, Media\\PRT Demo\\speeder\_diff.jpg</span></span>          |
| <span data-ttu-id="8460f-197">Core</span><span class="sxs-lookup"><span data-stu-id="8460f-197">Core</span></span>         | <span data-ttu-id="8460f-198">(o mesmo que acima)</span><span class="sxs-lookup"><span data-stu-id="8460f-198">(same as above)</span></span>                                                                                                                                                                                                           | <span data-ttu-id="8460f-199">CoreReg</span><span class="sxs-lookup"><span data-stu-id="8460f-199">CoreReg</span></span>     | <span data-ttu-id="8460f-200">N/A (valor do registro)</span><span class="sxs-lookup"><span data-stu-id="8460f-200">N/A (registry value)</span></span>                                                      |
| <span data-ttu-id="8460f-201">Level1</span><span class="sxs-lookup"><span data-stu-id="8460f-201">Level1</span></span>       | <span data-ttu-id="8460f-202">Fornece recursos usados pelo nível 1.</span><span class="sxs-lookup"><span data-stu-id="8460f-202">Provides resources used by level 1.</span></span>                                                                                                                                                                                       | <span data-ttu-id="8460f-203">Level1</span><span class="sxs-lookup"><span data-stu-id="8460f-203">Level1</span></span>      | <span data-ttu-id="8460f-204">Level1.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-204">Level1.jpg</span></span>                                                                |
| <span data-ttu-id="8460f-205">Level1</span><span class="sxs-lookup"><span data-stu-id="8460f-205">Level1</span></span>       | <span data-ttu-id="8460f-206">(o mesmo que o anterior)</span><span class="sxs-lookup"><span data-stu-id="8460f-206">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="8460f-207">L1Skybox</span><span class="sxs-lookup"><span data-stu-id="8460f-207">L1Skybox</span></span>    | <span data-ttu-id="8460f-208">Investigação de luz de mídia \\ \\ Galileo \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="8460f-208">Media\\Light Probes\\galileo\_cross.dds</span></span>                                   |
| <span data-ttu-id="8460f-209">Level2</span><span class="sxs-lookup"><span data-stu-id="8460f-209">Level2</span></span>       | <span data-ttu-id="8460f-210">Fornece recursos usados pelo nível 2.</span><span class="sxs-lookup"><span data-stu-id="8460f-210">Provides resources used by level 2.</span></span>                                                                                                                                                                                       | <span data-ttu-id="8460f-211">Level2</span><span class="sxs-lookup"><span data-stu-id="8460f-211">Level2</span></span>      | <span data-ttu-id="8460f-212">Level2.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-212">Level2.jpg</span></span>                                                                |
| <span data-ttu-id="8460f-213">Level2</span><span class="sxs-lookup"><span data-stu-id="8460f-213">Level2</span></span>       | <span data-ttu-id="8460f-214">(o mesmo que o anterior)</span><span class="sxs-lookup"><span data-stu-id="8460f-214">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="8460f-215">L2Skybox</span><span class="sxs-lookup"><span data-stu-id="8460f-215">L2Skybox</span></span>    | <span data-ttu-id="8460f-216">Cortesia de investigações de luz de mídia \\ \\ \_ cruzada. DDS</span><span class="sxs-lookup"><span data-stu-id="8460f-216">Media\\Light Probes\\grace\_cross.dds</span></span>                                     |
| <span data-ttu-id="8460f-217">Level3</span><span class="sxs-lookup"><span data-stu-id="8460f-217">Level3</span></span>       | <span data-ttu-id="8460f-218">Fornece recursos usados pelo nível 3.</span><span class="sxs-lookup"><span data-stu-id="8460f-218">Provides resources used by level 3.</span></span>                                                                                                                                                                                       | <span data-ttu-id="8460f-219">Level3</span><span class="sxs-lookup"><span data-stu-id="8460f-219">Level3</span></span>      | <span data-ttu-id="8460f-220">Level3.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-220">Level3.jpg</span></span>                                                                |
| <span data-ttu-id="8460f-221">Level3</span><span class="sxs-lookup"><span data-stu-id="8460f-221">Level3</span></span>       | <span data-ttu-id="8460f-222">(o mesmo que o anterior)</span><span class="sxs-lookup"><span data-stu-id="8460f-222">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="8460f-223">L3Skybox</span><span class="sxs-lookup"><span data-stu-id="8460f-223">L3Skybox</span></span>    | <span data-ttu-id="8460f-224">Investigação de luz de mídia \\ \\ RNL \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="8460f-224">Media\\Light Probes\\rnl\_cross.dds</span></span>                                       |
| <span data-ttu-id="8460f-225">Nível4</span><span class="sxs-lookup"><span data-stu-id="8460f-225">Level4</span></span>       | <span data-ttu-id="8460f-226">Fornece recursos usados pelo nível 4.</span><span class="sxs-lookup"><span data-stu-id="8460f-226">Provides resources used by level 4.</span></span>                                                                                                                                                                                       | <span data-ttu-id="8460f-227">Nível4</span><span class="sxs-lookup"><span data-stu-id="8460f-227">Level4</span></span>      | <span data-ttu-id="8460f-228">Level4.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-228">Level4.jpg</span></span>                                                                |
| <span data-ttu-id="8460f-229">Nível4</span><span class="sxs-lookup"><span data-stu-id="8460f-229">Level4</span></span>       | <span data-ttu-id="8460f-230">(o mesmo que o anterior)</span><span class="sxs-lookup"><span data-stu-id="8460f-230">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="8460f-231">L4Skybox</span><span class="sxs-lookup"><span data-stu-id="8460f-231">L4Skybox</span></span>    | <span data-ttu-id="8460f-232">Investigações de luz de mídia \\ \\ entre os superpeters \_ . DDS</span><span class="sxs-lookup"><span data-stu-id="8460f-232">Media\\Light Probes\\stpeters\_cross.dds</span></span>                                  |
| <span data-ttu-id="8460f-233">Level5</span><span class="sxs-lookup"><span data-stu-id="8460f-233">Level5</span></span>       | <span data-ttu-id="8460f-234">Fornece recursos usados pelo nível 5.</span><span class="sxs-lookup"><span data-stu-id="8460f-234">Provides resources used by level 5.</span></span>                                                                                                                                                                                       | <span data-ttu-id="8460f-235">Level5</span><span class="sxs-lookup"><span data-stu-id="8460f-235">Level5</span></span>      | <span data-ttu-id="8460f-236">Level5.jpg</span><span class="sxs-lookup"><span data-stu-id="8460f-236">Level5.jpg</span></span>                                                                |
| <span data-ttu-id="8460f-237">Level5</span><span class="sxs-lookup"><span data-stu-id="8460f-237">Level5</span></span>       | <span data-ttu-id="8460f-238">(o mesmo que o anterior)</span><span class="sxs-lookup"><span data-stu-id="8460f-238">(same as previous)</span></span>                                                                                                                                                                                                        | <span data-ttu-id="8460f-239">L5Skybox</span><span class="sxs-lookup"><span data-stu-id="8460f-239">L5Skybox</span></span>    | <span data-ttu-id="8460f-240">Investigação de luz de mídia \\ \\ Uffizi \_ Cross. DDS</span><span class="sxs-lookup"><span data-stu-id="8460f-240">Media\\Light Probes\\uffizi\_cross.dds</span></span>                                    |



 

<span data-ttu-id="8460f-241">Os recursos do Level1 por meio do Level5 têm sub-recursos adicionais que contêm arquivos que não são usados diretamente pelo exemplo.</span><span class="sxs-lookup"><span data-stu-id="8460f-241">The Level1 through Level5 features have additional sub-features that contain files not directly used by the sample.</span></span> <span data-ttu-id="8460f-242">Esses arquivos de sub-recursos foram adicionados para fazer com que a instalação demore mais.</span><span class="sxs-lookup"><span data-stu-id="8460f-242">These sub-features files have been added to make the installation take longer.</span></span> <span data-ttu-id="8460f-243">Isso é feito para ilustrar a operação de instalação em andamento que está sendo executada em segundo plano enquanto o exemplo está em execução.</span><span class="sxs-lookup"><span data-stu-id="8460f-243">This is done to illustrate the ongoing installation operation that is running in the background while the sample is running.</span></span>

<span data-ttu-id="8460f-244">A tabela a seguir lista os sub-recursos.</span><span class="sxs-lookup"><span data-stu-id="8460f-244">The following table lists the sub-features.</span></span>



| <span data-ttu-id="8460f-245">Recurso</span><span class="sxs-lookup"><span data-stu-id="8460f-245">Feature</span></span> | <span data-ttu-id="8460f-246">Sub-recursos</span><span class="sxs-lookup"><span data-stu-id="8460f-246">Sub-features</span></span>                      | <span data-ttu-id="8460f-247">Arquivos</span><span class="sxs-lookup"><span data-stu-id="8460f-247">Files</span></span>                                                                                                                                                                          |
|---------|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8460f-248">Level1</span><span class="sxs-lookup"><span data-stu-id="8460f-248">Level1</span></span>  | <span data-ttu-id="8460f-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span><span class="sxs-lookup"><span data-stu-id="8460f-249">L1PH1, L1PH2, L1PH3, L1PH4, L1PH5</span></span> | <span data-ttu-id="8460f-250">Level1 PlaceHolder data \\ L1PH1. dat Level1 dados de espaço reservado \\ L1PH2. dat Level1 espaço reservado L1PH3 \\ . dat Level1 espaço reservado dados \\ L1PH4. dat Level1 espaço reservado dados \\ L1PH5. dat</span><span class="sxs-lookup"><span data-stu-id="8460f-250">Level1 Placeholder Data\\L1PH1.dat Level1 Placeholder Data\\L1PH2.dat Level1 Placeholder Data\\L1PH3.dat Level1 Placeholder Data\\L1PH4.dat Level1 Placeholder Data\\L1PH5.dat</span></span> |
| <span data-ttu-id="8460f-251">Level2</span><span class="sxs-lookup"><span data-stu-id="8460f-251">Level2</span></span>  | <span data-ttu-id="8460f-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span><span class="sxs-lookup"><span data-stu-id="8460f-252">L2PH1, L2PH2, L2PH3, L2PH4, L2PH5</span></span> | <span data-ttu-id="8460f-253">Level2 PlaceHolder data \\ L2PH1. dat Level2 dados de espaço reservado \\ L2PH2. dat Level2 espaço reservado L2PH3 \\ . dat Level2 espaço reservado dados \\ L2PH4. dat Level2 espaço reservado dados \\ L2PH5. dat</span><span class="sxs-lookup"><span data-stu-id="8460f-253">Level2 Placeholder Data\\L2PH1.dat Level2 Placeholder Data\\L2PH2.dat Level2 Placeholder Data\\L2PH3.dat Level2 Placeholder Data\\L2PH4.dat Level2 Placeholder Data\\L2PH5.dat</span></span> |
| <span data-ttu-id="8460f-254">Level3</span><span class="sxs-lookup"><span data-stu-id="8460f-254">Level3</span></span>  | <span data-ttu-id="8460f-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span><span class="sxs-lookup"><span data-stu-id="8460f-255">L3PH1, L3PH2, L3PH3, L3PH4, L3PH5</span></span> | <span data-ttu-id="8460f-256">Level3 PlaceHolder data \\ L3PH1. dat Level3 dados de espaço reservado \\ L3PH2. dat Level3 espaço reservado L3PH3 \\ . dat Level3 espaço reservado dados \\ L3PH4. dat Level3 espaço reservado dados \\ L3PH5. dat</span><span class="sxs-lookup"><span data-stu-id="8460f-256">Level3 Placeholder Data\\L3PH1.dat Level3 Placeholder Data\\L3PH2.dat Level3 Placeholder Data\\L3PH3.dat Level3 Placeholder Data\\L3PH4.dat Level3 Placeholder Data\\L3PH5.dat</span></span> |
| <span data-ttu-id="8460f-257">Nível4</span><span class="sxs-lookup"><span data-stu-id="8460f-257">Level4</span></span>  | <span data-ttu-id="8460f-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span><span class="sxs-lookup"><span data-stu-id="8460f-258">L4PH1, L4PH2, L4PH3, L4PH4, L4PH5</span></span> | <span data-ttu-id="8460f-259">Level4 PlaceHolder data \\ L4PH1. dat Level4 dados de espaço reservado \\ L4PH2. dat Level4 espaço reservado L4PH3 \\ . dat Level4 espaço reservado dados \\ L4PH4. dat Level4 espaço reservado dados \\ L4PH5. dat</span><span class="sxs-lookup"><span data-stu-id="8460f-259">Level4 Placeholder Data\\L4PH1.dat Level4 Placeholder Data\\L4PH2.dat Level4 Placeholder Data\\L4PH3.dat Level4 Placeholder Data\\L4PH4.dat Level4 Placeholder Data\\L4PH5.dat</span></span> |
| <span data-ttu-id="8460f-260">Level5</span><span class="sxs-lookup"><span data-stu-id="8460f-260">Level5</span></span>  | <span data-ttu-id="8460f-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span><span class="sxs-lookup"><span data-stu-id="8460f-261">L5PH1, L5PH2, L5PH3, L5PH4, L5PH5</span></span> | <span data-ttu-id="8460f-262">Level5 PlaceHolder data \\ L5PH1. dat Level5 dados de espaço reservado \\ L5PH2. dat Level5 espaço reservado L5PH3 \\ . dat Level5 espaço reservado dados \\ L5PH4. dat Level5 espaço reservado dados \\ L5PH5. dat</span><span class="sxs-lookup"><span data-stu-id="8460f-262">Level5 Placeholder Data\\L5PH1.dat Level5 Placeholder Data\\L5PH2.dat Level5 Placeholder Data\\L5PH3.dat Level5 Placeholder Data\\L5PH4.dat Level5 Placeholder Data\\L5PH5.dat</span></span> |



 

<span data-ttu-id="8460f-263">Durante a instalação, o recurso principal deve ser marcado como "instalar" e todos os outros recursos devem ser marcados como "anunciados".</span><span class="sxs-lookup"><span data-stu-id="8460f-263">During installation, the core feature should be marked "install" and all other features should be marked "advertised."</span></span> <span data-ttu-id="8460f-264">Ao instalar apenas um recurso em vez de seis, o tempo que o Player deve aguardar até que o jogo seja reiniciado é significativamente reduzido.</span><span class="sxs-lookup"><span data-stu-id="8460f-264">By only installing one feature instead of six, the time that the player must wait until the game launches is significantly reduced.</span></span>

## <a name="installation"></a><span data-ttu-id="8460f-265">Instalação</span><span class="sxs-lookup"><span data-stu-id="8460f-265">Installation</span></span>

<span data-ttu-id="8460f-266">O [Windows Installer](/windows/desktop/Msi/windows-installer-portal) fornece um mecanismo para um aplicativo solicitar que um recurso anunciado seja instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-266">The [Windows Installer](/windows/desktop/Msi/windows-installer-portal) provides a mechanism for an application to request that an advertised feature be installed.</span></span> <span data-ttu-id="8460f-267">No entanto, o mecanismo é uma chamada de API (interface de programação de aplicativo) síncrona, o que significa que o aplicativo precisa aguardar dentro da chamada até que a instalação seja concluída.</span><span class="sxs-lookup"><span data-stu-id="8460f-267">However, the mechanism is a synchronous application programming interface (API) call, which means that the application has to wait inside the call until the installation is complete.</span></span> <span data-ttu-id="8460f-268">Para obter a instalação em segundo plano, um thread de trabalho é necessário para que o thread do aplicativo principal seja gratuito para executar outras tarefas importantes, como a renderização na tela para continuar fornecendo os comentários visuais do jogador.</span><span class="sxs-lookup"><span data-stu-id="8460f-268">To achieve background installation, a worker thread is required so that the main application thread is free to perform other important tasks, such as rendering on the screen to continue giving the player visual feedback.</span></span>

<span data-ttu-id="8460f-269">No exemplo, há três Estados de instalação que ocorrem durante a execução de exemplo: instalação ativa, instalação passiva e sem instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-269">In the sample, there are three states of installation that happen during the sample execution: active installation, passive installation, and no installation.</span></span>

-   <span data-ttu-id="8460f-270">A instalação ativa é uma solicitação iniciada pelo exemplo quando precisa acessar ou carregar recursos fornecidos por um ou mais recursos.</span><span class="sxs-lookup"><span data-stu-id="8460f-270">Active installation is a request initiated by the sample when it needs to access or load resources provided by one or more features.</span></span> <span data-ttu-id="8460f-271">O exemplo faz isso quando não pode continuar até que o recurso seja instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-271">The sample does this when it can not continue until the resource is installed.</span></span>
-   <span data-ttu-id="8460f-272">A instalação passiva é iniciada quando o exemplo não está executando uma tarefa crítica, como quando o jogador está em um menu ou assistindo a uma cena de recorte.</span><span class="sxs-lookup"><span data-stu-id="8460f-272">Passive installation is initiated when the sample is not performing a critical task such as when the player is at a menu or watching a cut scene.</span></span> <span data-ttu-id="8460f-273">Quando esse for o caso, o thread de trabalho verificará se algum recurso do exemplo ainda está anunciado.</span><span class="sxs-lookup"><span data-stu-id="8460f-273">When this is the case, the worker thread checks if any feature of the sample is still advertised.</span></span> <span data-ttu-id="8460f-274">Se ele puder encontrar um, ele chamará o instalador para instalar esse recurso.</span><span class="sxs-lookup"><span data-stu-id="8460f-274">If it can find one, it calls the installer to install that feature.</span></span> <span data-ttu-id="8460f-275">Esse processo se repete até que todos os recursos do exemplo sejam instalados.</span><span class="sxs-lookup"><span data-stu-id="8460f-275">This process repeats until every feature of the sample is installed.</span></span> <span data-ttu-id="8460f-276">Essencialmente, a instalação passiva utiliza ciclos de processador extras para executar a instalação em segundo plano quando é menos invasiva para o exemplo principal.</span><span class="sxs-lookup"><span data-stu-id="8460f-276">Essentially, passive installation utilizes extra processor cycles to perform installation in the background when it is least intrusive to the main sample.</span></span>
-   <span data-ttu-id="8460f-277">Nenhuma instalação acontece quando o jogador está ativamente envolvido no jogo; Isso impede que um descarte de taxa de quadros interrompa a experiência do usuário.</span><span class="sxs-lookup"><span data-stu-id="8460f-277">No installation happens when the player is actively engaged in the game; this prevents a framerate drop which would disrupt the user experience.</span></span>

<span data-ttu-id="8460f-278">No exemplo, uma classe CMsiUtil é definida para lidar com todas as tarefas relacionadas à instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-278">In the sample, a class CMsiUtil is defined to handle all installation-related tasks.</span></span> <span data-ttu-id="8460f-279">Essencialmente, o CMsiUtil usa um thread de trabalho que invoca o instalador para instalar os recursos do exemplo em um loop.</span><span class="sxs-lookup"><span data-stu-id="8460f-279">Essentially, CMsiUtil uses a worker thread that invokes the installer to install the sample's features in a loop.</span></span> <span data-ttu-id="8460f-280">A classe tem duas filas que armazenam solicitações de instalação: uma fila de alta prioridade para instalação ativa e uma fila de baixa prioridade para instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-280">The class has two queues that store installation requests: one high priority queue for active installation and one low priority queue for passive installation.</span></span> <span data-ttu-id="8460f-281">Durante a inicialização, a classe enumera todos os recursos do produto e os adiciona à fila de instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-281">During initialization, the class enumerates all features of the product and adds them to the passive installation queue.</span></span> <span data-ttu-id="8460f-282">Como o produto inteiro é colocado na fila dessa forma, todo o produto será instalado eventualmente se o exemplo tiver ciclos de processador livres suficientes.</span><span class="sxs-lookup"><span data-stu-id="8460f-282">Because the entire product is queued this way, the entire product will eventually be installed if the sample has enough free processor cycles.</span></span>

<span data-ttu-id="8460f-283">Quando o exemplo precisa solicitar uma instalação ativa, o exemplo pode chamar CMsiUtil:: UseFeatureSet () e passar o nome do recurso de nível superior.</span><span class="sxs-lookup"><span data-stu-id="8460f-283">When the sample needs to request an active installation, the sample can call CMsiUtil::UseFeatureSet() and pass the name of the top-level feature.</span></span> <span data-ttu-id="8460f-284">UseFeatureSet () colocará em fila o recurso solicitado e todos os seus sub-recursos na fila de instalação ativa para que o thread de trabalho possa instalá-los.</span><span class="sxs-lookup"><span data-stu-id="8460f-284">UseFeatureSet() will queue the requested feature and all of its sub-features in the active installation queue so that the worker thread can install them.</span></span>

<span data-ttu-id="8460f-285">Durante a execução de uma solicitação de instalação, o thread de trabalho verificará a fila de instalação ativa, bem como a fila de instalação passiva, para ver se a fila tem alguma solicitação adicional.</span><span class="sxs-lookup"><span data-stu-id="8460f-285">While executing an install request, the worker thread will check the active installation queue as well as the passive installation queue to see if either queue has any additional requests.</span></span> <span data-ttu-id="8460f-286">Cada vez que o thread encontra uma solicitação, ele chamará a API do instalador para executar a instalação real.</span><span class="sxs-lookup"><span data-stu-id="8460f-286">Each time the thread finds a request, it will call the installer API to perform the actual installation.</span></span> <span data-ttu-id="8460f-287">Depois que ambas as filas estiverem vazias, o thread de trabalho entrará em suspensão com uma chamada para [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject).</span><span class="sxs-lookup"><span data-stu-id="8460f-287">Once both queues are empty, the worker thread will go to sleep with a call to [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject).</span></span> <span data-ttu-id="8460f-288">Como o produto inteiro é colocado na fila de instalação passiva durante a inicialização, uma fila vazia implica que todo o produto foi instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-288">Because the entire product is placed in the passive installation queue during initialization, an empty queue implies that the entire product has been installed.</span></span>

<span data-ttu-id="8460f-289">O exemplo chama CMsiUtil:: EnablePassiveInstall () para habilitar ou desabilitar a instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-289">The sample calls CMsiUtil::EnablePassiveInstall() to enable or disable passive installation.</span></span> <span data-ttu-id="8460f-290">EnablePassiveInstall (true) incrementa a contagem de habilitação para instalação passiva e EnablePassiveInstall (false) diminui.</span><span class="sxs-lookup"><span data-stu-id="8460f-290">EnablePassiveInstall(true) increments the enable count for passive installation, and EnablePassiveInstall(false) decrements it.</span></span> <span data-ttu-id="8460f-291">Se a contagem de habilitação for maior que 0, a classe processará a fila de instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-291">If the enable count is greater than 0, the class will process the passive installation queue.</span></span> <span data-ttu-id="8460f-292">O exemplo permite a instalação passiva quando qualquer uma das seguintes opções for verdadeira:</span><span class="sxs-lookup"><span data-stu-id="8460f-292">The sample allows passive installation when any of the following is true:</span></span>

-   <span data-ttu-id="8460f-293">O usuário está exibindo a sequência de introdução inicial.</span><span class="sxs-lookup"><span data-stu-id="8460f-293">The user is viewing the initial introduction sequence.</span></span>
-   <span data-ttu-id="8460f-294">O usuário está navegando no menu de exemplo.</span><span class="sxs-lookup"><span data-stu-id="8460f-294">The user is navigating in the sample menu.</span></span>
-   <span data-ttu-id="8460f-295">O usuário está exibindo as estatísticas no final de um nível.</span><span class="sxs-lookup"><span data-stu-id="8460f-295">The user is viewing the statistics at the end of a level.</span></span>
-   <span data-ttu-id="8460f-296">O aplicativo de exemplo perde seu foco e vai para o plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="8460f-296">The sample application loses its focus and goes to the background.</span></span>

<span data-ttu-id="8460f-297">Os métodos de CMsiUtil estão listados abaixo:</span><span class="sxs-lookup"><span data-stu-id="8460f-297">The methods of CMsiUtil are listed below:</span></span>



| <span data-ttu-id="8460f-298">Método</span><span class="sxs-lookup"><span data-stu-id="8460f-298">Method</span></span>                | <span data-ttu-id="8460f-299">Descrição</span><span class="sxs-lookup"><span data-stu-id="8460f-299">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8460f-300">AbortAllRequests</span><span class="sxs-lookup"><span data-stu-id="8460f-300">AbortAllRequests</span></span>      | <span data-ttu-id="8460f-301">Faz com que a instalação atual anule e esvazia a fila de solicitações de instalação ativa.</span><span class="sxs-lookup"><span data-stu-id="8460f-301">Causes the current installation to abort and empties the active installation request queue.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="8460f-302">AbortCurrentRequest</span><span class="sxs-lookup"><span data-stu-id="8460f-302">AbortCurrentRequest</span></span>   | <span data-ttu-id="8460f-303">Faz com que a instalação em andamento seja anulada.</span><span class="sxs-lookup"><span data-stu-id="8460f-303">Causes the installation in progress to abort.</span></span> <span data-ttu-id="8460f-304">O thread de trabalho processa a próxima solicitação na fila, se existir uma.</span><span class="sxs-lookup"><span data-stu-id="8460f-304">The worker thread then processes the next request in the queue, if one exists.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="8460f-305">EnablePassiveInstall</span><span class="sxs-lookup"><span data-stu-id="8460f-305">EnablePassiveInstall</span></span>  | <span data-ttu-id="8460f-306">Incrementa ou decrementa a contagem de habilitação da instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-306">Increments or decrements passive installation enable count.</span></span> <span data-ttu-id="8460f-307">O exemplo usa essa chamada para controlar quando a instalação passiva pode e não pode acontecer.</span><span class="sxs-lookup"><span data-stu-id="8460f-307">The sample uses this call to control when passive installation can and cannot happen.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="8460f-308">GetCurrentFeatureName</span><span class="sxs-lookup"><span data-stu-id="8460f-308">GetCurrentFeatureName</span></span> | <span data-ttu-id="8460f-309">Retorna o nome do recurso que está sendo instalado ativamente.</span><span class="sxs-lookup"><span data-stu-id="8460f-309">Returns the name of the feature that is actively being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="8460f-310">GetFeatureProgress</span><span class="sxs-lookup"><span data-stu-id="8460f-310">GetFeatureProgress</span></span>    | <span data-ttu-id="8460f-311">Retorna a posição da escala atual para o recurso que está sendo instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-311">Returns the current tick position for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="8460f-312">GetFeatureProgressMax</span><span class="sxs-lookup"><span data-stu-id="8460f-312">GetFeatureProgressMax</span></span> | <span data-ttu-id="8460f-313">Retorna o número máximo de tiques de progresso para o recurso que está sendo instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-313">Returns the maximum number of progress tick for the feature that is being installed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="8460f-314">Obter Último Erro</span><span class="sxs-lookup"><span data-stu-id="8460f-314">GetLastError</span></span>          | <span data-ttu-id="8460f-315">Use este método para recuperar o código de retorno da solicitação de instalação anterior.</span><span class="sxs-lookup"><span data-stu-id="8460f-315">Use this method to retrieve the return code from the previous installation request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="8460f-316">GetPassiveProgress</span><span class="sxs-lookup"><span data-stu-id="8460f-316">GetPassiveProgress</span></span>    | <span data-ttu-id="8460f-317">Retorna a posição de tique da barra de progresso para instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-317">Returns the progress bar tick position for passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="8460f-318">GetPassiveProgressMax</span><span class="sxs-lookup"><span data-stu-id="8460f-318">GetPassiveProgressMax</span></span> | <span data-ttu-id="8460f-319">Retorna a posição de tique atual e o número máximo de tiques para instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-319">Returns the current tick position and the maximum number of ticks for passive installation.</span></span> <span data-ttu-id="8460f-320">Juntos, o exemplo pode usá-los para mostrar o progresso geral da instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-320">Together, the sample can use them to show the overall progress of the passive installation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="8460f-321">GetProgress</span><span class="sxs-lookup"><span data-stu-id="8460f-321">GetProgress</span></span>           | <span data-ttu-id="8460f-322">Retorna a posição de tique da barra de progresso para a instalação do conjunto de recursos ativo.</span><span class="sxs-lookup"><span data-stu-id="8460f-322">Returns the progress bar tick position for the active feature set installation.</span></span> <span data-ttu-id="8460f-323">Isso é usado quando o exemplo renderiza a barra de progresso da instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-323">This is used when the sample renders the installation progress bar.</span></span> <span data-ttu-id="8460f-324">Como o Windows Installer só fornece informações de progresso para o recurso que está sendo instalado, o método divide a barra de progresso entre os recursos solicitados para que o usuário ainda Veja toda a instalação como uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="8460f-324">Because the Windows Installer only provides progress information for the one feature being installed, the method divides the progress bar among the requested features so that the user still sees the entire installation as one task.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="8460f-325">GetProgressMax</span><span class="sxs-lookup"><span data-stu-id="8460f-325">GetProgressMax</span></span>        | <span data-ttu-id="8460f-326">Retorna a contagem máxima de tiques da barra de progresso para a instalação ativa do conjunto de recursos.</span><span class="sxs-lookup"><span data-stu-id="8460f-326">Returns the maximum progress bar tick count for the active feature set installation.</span></span> <span data-ttu-id="8460f-327">Isso é usado quando o exemplo renderiza a barra de progresso da instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-327">This is used when the sample renders the installation progress bar.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="8460f-328">Inicializar</span><span class="sxs-lookup"><span data-stu-id="8460f-328">Initialize</span></span>            | <span data-ttu-id="8460f-329">Inicializa a classe com o GUID (identificador global exclusivo) do produto.</span><span class="sxs-lookup"><span data-stu-id="8460f-329">Initializes the class with the product globally unique identifier (GUID).</span></span> <span data-ttu-id="8460f-330">Esse método também enumera todos os recursos do aplicativo que foi anunciado, mas ainda não instalado, e os coloca na fila de instalação passiva para configurar a instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-330">This method also enumerates every feature of the application which has been advertised but not yet installed, and places it in the passive installation queue to set up the passive installation.</span></span>                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="8460f-331">IsInstallInProgress</span><span class="sxs-lookup"><span data-stu-id="8460f-331">IsInstallInProgress</span></span>   | <span data-ttu-id="8460f-332">Use este método para descobrir se uma instalação ativa está sendo processada.</span><span class="sxs-lookup"><span data-stu-id="8460f-332">Use this method to find out whether an active installation is being processed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="8460f-333">UseFeature</span><span class="sxs-lookup"><span data-stu-id="8460f-333">UseFeature</span></span>            | <span data-ttu-id="8460f-334">Método particular chamado por UseFeatureSet.</span><span class="sxs-lookup"><span data-stu-id="8460f-334">Private method called by UseFeatureSet.</span></span> <span data-ttu-id="8460f-335">Verifica se um recurso está instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-335">Checks if a feature is installed.</span></span> <span data-ttu-id="8460f-336">Se o recurso solicitado for instalado, o método retornará.</span><span class="sxs-lookup"><span data-stu-id="8460f-336">If the requested feature is installed the method returns.</span></span> <span data-ttu-id="8460f-337">Se o recurso ainda não estiver instalado (anunciado), o método enfileirará uma nova solicitação de instalação ativa para o thread de trabalho e, em seguida, retornará.</span><span class="sxs-lookup"><span data-stu-id="8460f-337">If the feature is not yet installed (advertised), the method queues a new active installation request for the worker thread and then returns.</span></span> <span data-ttu-id="8460f-338">O identificador de evento opcional que será sinalizado quando a instalação solicitada for concluída.</span><span class="sxs-lookup"><span data-stu-id="8460f-338">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                        |
| <span data-ttu-id="8460f-339">UseFeatureSet</span><span class="sxs-lookup"><span data-stu-id="8460f-339">UseFeatureSet</span></span>         | <span data-ttu-id="8460f-340">Chamado pelo exemplo quando ele precisa acessar as funcionalidades fornecidas por um determinado recurso ou qualquer um de seus sub-recursos.</span><span class="sxs-lookup"><span data-stu-id="8460f-340">Called by the sample when it needs to access functionalities provided by a particular feature or any of its sub-features.</span></span> <span data-ttu-id="8460f-341">O método enumera todos os recursos do exemplo e chama UseFeature () para os sub-recursos do recurso raiz especificado.</span><span class="sxs-lookup"><span data-stu-id="8460f-341">The method enumerates all features of the sample and calls UseFeature() for sub-features of the specified root feature.</span></span> <span data-ttu-id="8460f-342">O exemplo pode passar um identificador de evento que será sinalizado quando todo o conjunto de recursos for instalado.</span><span class="sxs-lookup"><span data-stu-id="8460f-342">The sample can pass in an event handle that will be signaled when the entire feature set is installed.</span></span> <span data-ttu-id="8460f-343">Como os recursos são todos instalados como um conjunto, o identificador é especificado para o último recurso enfileirado por UseFeature () em vez de todos os recursos, para que o exemplo seja notificado uma vez após a instalação de todos os recursos solicitados.</span><span class="sxs-lookup"><span data-stu-id="8460f-343">Because the features all installed as a set, The handle is specified for the last feature queued by UseFeature() instead of every feature, so that the sample gets notified once after all requested features are installed.</span></span> |
| <span data-ttu-id="8460f-344">UseProduct</span><span class="sxs-lookup"><span data-stu-id="8460f-344">UseProduct</span></span>            | <span data-ttu-id="8460f-345">Enfileira uma solicitação de instalação ativa para o thread de trabalho chamar o instalador para executar uma instalação completa do produto.</span><span class="sxs-lookup"><span data-stu-id="8460f-345">Queues an active installation request for the worker thread to call the installer to perform a full product installation.</span></span> <span data-ttu-id="8460f-346">O identificador de evento opcional que será sinalizado quando a instalação solicitada for concluída.</span><span class="sxs-lookup"><span data-stu-id="8460f-346">The optional event handle that will be signaled when the requested installation is complete.</span></span>                                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="limitation"></a><span data-ttu-id="8460f-347">Limitação</span><span class="sxs-lookup"><span data-stu-id="8460f-347">Limitation</span></span>

<span data-ttu-id="8460f-348">A versão atual do instalador não foi projetada para acesso simultâneo por vários threads.</span><span class="sxs-lookup"><span data-stu-id="8460f-348">The current version of installer is not designed for simultaneous access by multiple threads.</span></span> <span data-ttu-id="8460f-349">Portanto, quando o thread de trabalho está chamando o instalador, o thread principal não deve chamar o instalador.</span><span class="sxs-lookup"><span data-stu-id="8460f-349">Therefore, when the worker thread is calling into the installer, the main thread should not call the installer.</span></span> <span data-ttu-id="8460f-350">Um exemplo dessa limitação ocorre no exemplo quando o thread principal solicita um recurso e, em seguida, solicita o mesmo recurso novamente antes que o thread de trabalho conclua a instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-350">An example of this limitation occurs in the sample when the main thread requests a feature, then requests the same feature again before the worker thread completes the installation.</span></span> <span data-ttu-id="8460f-351">A segunda solicitação chama MsiQueryFeatureState () para descobrir se o recurso solicitado já está instalado, pois o instalador pode, às vezes, indicar que o recurso foi completamente instalado quando o thread de trabalho ainda está copiando os arquivos.</span><span class="sxs-lookup"><span data-stu-id="8460f-351">The second request calls MsiQueryFeatureState() to find out whether the requested feature is already installed, since the installer may sometimes indicate that the feature is completely installed when the worker thread is still copying the files.</span></span>

<span data-ttu-id="8460f-352">Felizmente, há uma solução fácil para isso.</span><span class="sxs-lookup"><span data-stu-id="8460f-352">Fortunately, there is an easy work-around for this.</span></span> <span data-ttu-id="8460f-353">CMsiUtil verificará se um recurso está sendo instalado pelo thread de trabalho antes de chamar funções como MsiQueryFeatureState () ou MsiUseFeature () para solicitar o estado de instalação do recurso em questão.</span><span class="sxs-lookup"><span data-stu-id="8460f-353">CMsiUtil will check whether a feature is being installed by the worker thread before it calls functions such as MsiQueryFeatureState() or MsiUseFeature() to ask for the install state of the feature in question.</span></span> <span data-ttu-id="8460f-354">Lembre-se de que essa limitação também pode se tornar um problema em outro lugar.</span><span class="sxs-lookup"><span data-stu-id="8460f-354">Be aware that this limitation can also become an issue elsewhere.</span></span>

<span data-ttu-id="8460f-355">A aplicação de patches pode afetar o funcionamento da instalação sob demanda no computador de um usuário final.</span><span class="sxs-lookup"><span data-stu-id="8460f-355">Patching can affect how well install-on-demand works on an end-user's computer.</span></span> <span data-ttu-id="8460f-356">Aplicar um patch que contém apenas dados que foram alterados da versão anterior pode exigir que a versão anterior do arquivo atualizado seja instalada para aplicar o Delta.</span><span class="sxs-lookup"><span data-stu-id="8460f-356">Applying a patch that only contains data that has changed from the previous version may require that the previous version of the updated file be installed in order to apply the delta.</span></span> <span data-ttu-id="8460f-357">Nessa situação, o patch deve solicitar que o instalador instale os recursos anunciados afetados antes de aplicar o patch ao jogo.</span><span class="sxs-lookup"><span data-stu-id="8460f-357">In this situation, the patch must request that the installer install affected advertised features before applying the patch to the game.</span></span>

<span data-ttu-id="8460f-358">O exemplo é instalado inicializando InstallOnDemand.msi porque supõe que o [Windows Installer](/windows/desktop/Msi/windows-installer-portal) está presente no computador.</span><span class="sxs-lookup"><span data-stu-id="8460f-358">The sample is installed by launching InstallOnDemand.msi because it assumes that the [Windows Installer](/windows/desktop/Msi/windows-installer-portal) is present on the computer.</span></span> <span data-ttu-id="8460f-359">Se o instalador estiver ausente, os arquivos. msi não serão reconhecidos e as inicializações não funcionarão.</span><span class="sxs-lookup"><span data-stu-id="8460f-359">If the installer is absent, .msi files are not recognized and launching them will not work.</span></span> <span data-ttu-id="8460f-360">Para superar esse problema, um aplicativo deve usar um programa de instalação para executar a tarefa.</span><span class="sxs-lookup"><span data-stu-id="8460f-360">To overcome this problem, an application should use an installation program to perform the task.</span></span> <span data-ttu-id="8460f-361">Esse programa deve primeiro verificar se o instalador está presente e, em caso afirmativo, sua versão.</span><span class="sxs-lookup"><span data-stu-id="8460f-361">This program should first check to see if the installer is present, and if so, its version.</span></span> <span data-ttu-id="8460f-362">Se a versão não atender ao requisito do aplicativo, o programa de instalação deverá instalar o Windows Installer e, em seguida, iniciar o arquivo. msi.</span><span class="sxs-lookup"><span data-stu-id="8460f-362">If the version does not meet the application's requirement, the installation program should install the Windows Installer, then launch the .msi file.</span></span> <span data-ttu-id="8460f-363">Esse processo é conhecido como inicialização.</span><span class="sxs-lookup"><span data-stu-id="8460f-363">This process is known as bootstrapping.</span></span> <span data-ttu-id="8460f-364">Os aplicativos normalmente nomeam seu programa de instalação de inicialização Setup.exe.</span><span class="sxs-lookup"><span data-stu-id="8460f-364">Applications typically name their bootstrapping installation program Setup.exe.</span></span> <span data-ttu-id="8460f-365">O exemplo não trata de inicialização.</span><span class="sxs-lookup"><span data-stu-id="8460f-365">The sample does not handle bootstrapping.</span></span> <span data-ttu-id="8460f-366">No entanto, detalhes completos sobre a inicialização podem ser encontrados no Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="8460f-366">However, complete details on bootstrapping can be found in the Windows Installer.</span></span>

<span data-ttu-id="8460f-367">Os desenvolvedores também devem prestar atenção ao tamanho de cada recurso em seus jogos.</span><span class="sxs-lookup"><span data-stu-id="8460f-367">Developers should also pay attention to the size of each feature in their games.</span></span> <span data-ttu-id="8460f-368">Ao cancelar uma instalação em andamento, o instalador restaura o computador para o estado anterior à instalação.</span><span class="sxs-lookup"><span data-stu-id="8460f-368">When canceling an installation in progress, the installer restores the computer to the state before the installation.</span></span> <span data-ttu-id="8460f-369">Isso significa que a instalação do recurso é completamente desfeita e não há nenhuma instalação de recurso parcial.</span><span class="sxs-lookup"><span data-stu-id="8460f-369">This means that the installation of the feature is completely undone, and there is no partial feature installation.</span></span> <span data-ttu-id="8460f-370">Um recurso grande requer mais tempo para instalar, o que aumenta a probabilidade de que a instalação seja interrompida e cancelada ou a instalação irá interferir no aplicativo principal.</span><span class="sxs-lookup"><span data-stu-id="8460f-370">A large feature requires longer time to install, which either increases the likelihood that the install will be interrupted and cancelled or the install will interfere with the main application.</span></span> <span data-ttu-id="8460f-371">Um exemplo seria habilitar a instalação passiva quando o usuário abrir o menu do jogo no meio do jogo jogar.</span><span class="sxs-lookup"><span data-stu-id="8460f-371">An example would be enabling passive installation when the user brings up the game menu in the middle of game play.</span></span> <span data-ttu-id="8460f-372">Se um recurso estiver sendo instalado e o usuário voltar para a execução, o jogo poderá executar uma das duas ações: ele poderá permitir que a instalação passiva seja concluída ou pode cancelar a instalação passiva.</span><span class="sxs-lookup"><span data-stu-id="8460f-372">If a feature is installing and the user goes back to playing, the game can do one of two things: it can let the passive installation complete, or it can cancel the passive installation.</span></span> <span data-ttu-id="8460f-373">Um recurso grande se ajustaria de forma ruim com qualquer um dos modelos.</span><span class="sxs-lookup"><span data-stu-id="8460f-373">A large feature would fit poorly with either model.</span></span> <span data-ttu-id="8460f-374">Se o jogo permitir que a instalação grande seja concluída, a instalação poderá atrapalhar o desempenho de renderização do jogo por um longo tempo.</span><span class="sxs-lookup"><span data-stu-id="8460f-374">If the game lets the large installation complete, the installation may hinder the game's rendering performance for a long time.</span></span> <span data-ttu-id="8460f-375">Por outro lado, se o jogo cancelar a instalação, o usuário deverá permanecer no menu por um longo tempo antes de retornar ao jogo.</span><span class="sxs-lookup"><span data-stu-id="8460f-375">Conversely, if the game cancels the installation, then the user must stay in the menu for a long time before returning to the game.</span></span> <span data-ttu-id="8460f-376">Os desenvolvedores devem encontrar um tamanho de recurso equilibrado que funcione melhor para seus jogos individuais.</span><span class="sxs-lookup"><span data-stu-id="8460f-376">Developers should find a balanced feature size that works best for their individual games.</span></span>

 

 