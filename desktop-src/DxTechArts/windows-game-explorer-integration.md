---
title: Explorador de jogos do Windows para desenvolvedores de jogos
description: Este artigo descreve o processo de registro de um jogo com o explorador de jogos e controles dos pais no Windows Vista e no Windows 7 usando o novo esquema GDF.
ms.assetid: 628f14bf-2714-0d68-8267-4f7f48c2774a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c7f59b90a23f407be3990a6a4e24b92d39e66852
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105754683"
---
# <a name="windows-games-explorer-for-game-developers"></a><span data-ttu-id="53d24-103">Explorador de jogos do Windows para desenvolvedores de jogos</span><span class="sxs-lookup"><span data-stu-id="53d24-103">Windows Games Explorer for Game Developers</span></span>

<span data-ttu-id="53d24-104">O Windows Vista aprimora a experiência do usuário de jogos no Windows, incluindo o explorador de jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-104">Windows Vista improves the user experience of gaming on Windows by including Games Explorer.</span></span> <span data-ttu-id="53d24-105">O explorador de jogos é exposto no menu Iniciar do Windows Vista como a pasta jogos e fornece um local central para o acesso a jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-105">Games Explorer is exposed in the Windows Vista Start Menu as the Games folder and provides a central location for accessing games.</span></span>

<span data-ttu-id="53d24-106">A partir da versão de março de 2009 do SDK do DirectX, um novo esquema de GDF (arquivo de definição de jogo) é usado para dar suporte a recursos no Windows 7, provedor de jogos e RSS feed e IGameExplorer2.</span><span class="sxs-lookup"><span data-stu-id="53d24-106">Starting with the March 2009 release of the DirectX SDK, a new game definition file (GDF) schema is used to support features in Windows 7, Game Provider and RSS feed, and IGameExplorer2.</span></span> <span data-ttu-id="53d24-107">O IGameExplorer2 é uma nova interface no Windows 7 que simplifica o processo de integração de um jogo com o explorador de jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-107">IGameExplorer2 is a new interface on Windows 7 that simplifies the process of integrating a game with Games Explorer.</span></span>

<span data-ttu-id="53d24-108">Este artigo descreve o processo de registro de um jogo com o explorador de jogos e controles dos pais no Windows Vista e no Windows 7 usando o novo esquema GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-108">This article outlines the process of registering a game with Games Explorer and parental controls on Windows Vista and Windows 7 by using the new GDF schema.</span></span>

<span data-ttu-id="53d24-109">Conteúdo:</span><span class="sxs-lookup"><span data-stu-id="53d24-109">Contents:</span></span>

-   [<span data-ttu-id="53d24-110">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="53d24-110">Prerequisites</span></span>](#prerequisites)
-   [<span data-ttu-id="53d24-111">Integração com um instalador</span><span class="sxs-lookup"><span data-stu-id="53d24-111">Integrating with an Installer</span></span>](#integrating-with-an-installer)
-   [<span data-ttu-id="53d24-112">Processo de integração</span><span class="sxs-lookup"><span data-stu-id="53d24-112">Integration Process</span></span>](#integration-process)
-   [<span data-ttu-id="53d24-113">Tarefas do explorador de jogos</span><span class="sxs-lookup"><span data-stu-id="53d24-113">Games Explorer Tasks</span></span>](#games-explorer-tasks)
-   [<span data-ttu-id="53d24-114">Integrando no InstallScript</span><span class="sxs-lookup"><span data-stu-id="53d24-114">Integrating into InstallScript</span></span>](#integrating-into-installscript)
-   [<span data-ttu-id="53d24-115">Integrando-se a um pacote MSI</span><span class="sxs-lookup"><span data-stu-id="53d24-115">Integrating into an MSI Package</span></span>](#integrating-into-an-msi-package)
-   [<span data-ttu-id="53d24-116">Dicas de depuração</span><span class="sxs-lookup"><span data-stu-id="53d24-116">Debugging Tips</span></span>](#debugging-tips)
    -   [<span data-ttu-id="53d24-117">Teste com código de exemplo</span><span class="sxs-lookup"><span data-stu-id="53d24-117">Test with sample code</span></span>](#test-with-sample-code)
    -   [<span data-ttu-id="53d24-118">Certifique-se de que seu jogo foi removido corretamente</span><span class="sxs-lookup"><span data-stu-id="53d24-118">Make sure that your game was removed properly</span></span>](#make-sure-that-your-game-was-removed-properly)
    -   [<span data-ttu-id="53d24-119">Não se esqueça de assinar usando Authenticode</span><span class="sxs-lookup"><span data-stu-id="53d24-119">Be sure to sign using Authenticode</span></span>](#be-sure-to-sign-using-authenticode)
    -   [<span data-ttu-id="53d24-120">Verifique se os controles dos pais estão disponíveis</span><span class="sxs-lookup"><span data-stu-id="53d24-120">Be sure that parental controls are available</span></span>](#be-sure-that-parental-controls-are-available)
    -   [<span data-ttu-id="53d24-121">Verificar se as tarefas são do tipo correto</span><span class="sxs-lookup"><span data-stu-id="53d24-121">Verify that tasks are of the correct type</span></span>](#verify-that-tasks-are-of-the-correct-type)
    -   [<span data-ttu-id="53d24-122">Verificar os dados no binário GDF</span><span class="sxs-lookup"><span data-stu-id="53d24-122">Verify the data in GDF binary</span></span>](#verify-the-data-in-gdf-binary)
-   [<span data-ttu-id="53d24-123">Resumo</span><span class="sxs-lookup"><span data-stu-id="53d24-123">Summary</span></span>](#summary)

## <a name="prerequisites"></a><span data-ttu-id="53d24-124">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="53d24-124">Prerequisites</span></span>

<span data-ttu-id="53d24-125">Para poder integrar um jogo no explorador de jogos, você deve criar um arquivo de definição de jogo (GDF).</span><span class="sxs-lookup"><span data-stu-id="53d24-125">Before you can integrate a game into Games Explorer, you must create a game definition file (GDF).</span></span> <span data-ttu-id="53d24-126">Um GDF é um arquivo XML que contém metadados que descrevem o jogo.</span><span class="sxs-lookup"><span data-stu-id="53d24-126">A GDF is an XML file that contains metadata that describes the game.</span></span> <span data-ttu-id="53d24-127">Na versão de março de 2009 do SDK do DirectX, uma seção para o provedor de jogos, o RSS feed e a tarefa de jogo foram adicionados ao esquema GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-127">In the March 2009 release of the DirectX SDK, a section for game provider, RSS feed, and game task has been added to the GDF schema.</span></span> <span data-ttu-id="53d24-128">Para usar as instruções neste artigo, você deve usar esse novo formato GDF para criar o arquivo GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-128">To use the instructions in this article, you must use this new GDF format to create your GDF file.</span></span>

<span data-ttu-id="53d24-129">A Microsoft fornece uma ferramenta para a criação de GDFs no SDK do DirectX, editor de arquivos de definição de jogos, para facilitar esse processo de criação.</span><span class="sxs-lookup"><span data-stu-id="53d24-129">Microsoft provides a tool for authoring GDFs in the DirectX SDK, Game Definition File Editor, to make this creation process easier.</span></span> <span data-ttu-id="53d24-130">Essa ferramenta também ajuda a criar versões localizadas de um GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-130">This tool also helps you create localized versions of a GDF.</span></span>

<span data-ttu-id="53d24-131">Depois que um GDF tiver sido criado e localizado, ele deverá ser encapsulado dentro de uma seção de recurso de um arquivo binário (executável ou DLL), junto com a miniatura e o ícone do jogo.</span><span class="sxs-lookup"><span data-stu-id="53d24-131">Once a GDF has been authored and localized, it must be encapsulated within a resource section of a binary file (either an executable or DLL), along with the game's thumbnail and icon.</span></span> <span data-ttu-id="53d24-132">O GDF contém todos os metadados associados ao jogo, incluindo a classificação do jogo.</span><span class="sxs-lookup"><span data-stu-id="53d24-132">The GDF contains all of the metadata associated with the game, including the game's rating.</span></span> <span data-ttu-id="53d24-133">Os controles dos pais do Windows usam a classificação do jogo para permitir que os pais controlem o acesso ao jogo.</span><span class="sxs-lookup"><span data-stu-id="53d24-133">Windows Parental Controls use the game's rating to allow parents to control access to the game.</span></span> <span data-ttu-id="53d24-134">O arquivo binário que contém o GDF deve ser assinado digitalmente com um certificado Authenticode válido; caso contrário, o explorador de jogos e o sistema de controle de pais ignoram a classificação do jogo, pois as informações de classificação não podem ser confiáveis sem certificação.</span><span class="sxs-lookup"><span data-stu-id="53d24-134">The binary file which contains the GDF must be digitally signed with a valid Authenticode certificate; otherwise, Games Explorer and the parental control system ignores the game's rating, because the rating information cannot be trusted without certification.</span></span> <span data-ttu-id="53d24-135">Para obter mais detalhes sobre o código de assinatura com Authenticode, consulte [assinatura Authenticode para desenvolvedores de jogos](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="53d24-135">For more details about signing code with Authenticode, see [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

## <a name="integrating-with-an-installer"></a><span data-ttu-id="53d24-136">Integração com um instalador</span><span class="sxs-lookup"><span data-stu-id="53d24-136">Integrating with an Installer</span></span>

<span data-ttu-id="53d24-137">Para simplificar a integração do explorador de jogos, o exemplo GameUXInstallHelper fornece uma API comum que pode ser chamada no Windows XP, no Windows Vista e no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="53d24-137">To simplify Games Explorer integration, the GameUXInstallHelper sample provides a common API that can be called on Windows XP, Windows Vista, and Windows 7.</span></span> <span data-ttu-id="53d24-138">Ele foi projetado para trabalhar com scripts para o sistema de instalação do InstallShield e Wise, bem como ações personalizadas do MSI e ferramentas de instalação personalizadas.</span><span class="sxs-lookup"><span data-stu-id="53d24-138">It is designed to work with scripts for InstallShield and Wise Installation System, as well as MSI custom actions and custom installation tools.</span></span> <span data-ttu-id="53d24-139">A detecção do sistema operacional é tratada dentro dessa DLL de exemplo, portanto, o chamador não precisa se preocupar se o cliente está executando o Windows XP, o Windows Vista ou o Windows 7.</span><span class="sxs-lookup"><span data-stu-id="53d24-139">Detection of the operating system is handled inside this sample DLL, so the caller does not need to worry whether the client is running Windows XP, Windows Vista, or Windows 7.</span></span>

<span data-ttu-id="53d24-140">As funções exportadas por essa DLL são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="53d24-140">The functions exported by this DLL are the following:</span></span>

<dl> <dt>

<span data-ttu-id="53d24-141"><span id="GameExplorerInstallW"></span><span id="gameexplorerinstallw"></span><span id="GAMEEXPLORERINSTALLW"></span>**GameExplorerInstallW**</span><span class="sxs-lookup"><span data-stu-id="53d24-141"><span id="GameExplorerInstallW"></span><span id="gameexplorerinstallw"></span><span id="GAMEEXPLORERINSTALLW"></span>**GameExplorerInstallW**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-142">Registra um jogo com o explorador de jogos, dado um caminho para o binário GDF, um caminho completo para a pasta em que o jogo está instalado e o escopo da instalação.</span><span class="sxs-lookup"><span data-stu-id="53d24-142">Registers a game with Games Explorer, given a path to the GDF binary, a full path to the folder where the game is installed, and the installation scope.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-143"><span id="GameExplorerInstallA"></span><span id="gameexplorerinstalla"></span><span id="GAMEEXPLORERINSTALLA"></span>**GameExplorerInstallA**</span><span class="sxs-lookup"><span data-stu-id="53d24-143"><span id="GameExplorerInstallA"></span><span id="gameexplorerinstalla"></span><span id="GAMEEXPLORERINSTALLA"></span>**GameExplorerInstallA**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-144">Registra um jogo com o explorador de jogos; Versão ANSI do **GameExplorerInstallW**.</span><span class="sxs-lookup"><span data-stu-id="53d24-144">Registers a game with Games Explorer; ANSI version of **GameExplorerInstallW**.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-145"><span id="GameExplorerUninstallW"></span><span id="gameexploreruninstallw"></span><span id="GAMEEXPLORERUNINSTALLW"></span>**GameExplorerUninstallW**</span><span class="sxs-lookup"><span data-stu-id="53d24-145"><span id="GameExplorerUninstallW"></span><span id="gameexploreruninstallw"></span><span id="GAMEEXPLORERUNINSTALLW"></span>**GameExplorerUninstallW**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-146">Remove um jogo do registro com o explorador de jogos, dado um caminho para o binário GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-146">Removes a game from registration with Games Explorer, given a path to the GDF binary.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-147"><span id="GameExplorerUninstallA"></span><span id="gameexploreruninstalla"></span><span id="GAMEEXPLORERUNINSTALLA"></span>**GameExplorerUninstallA**</span><span class="sxs-lookup"><span data-stu-id="53d24-147"><span id="GameExplorerUninstallA"></span><span id="gameexploreruninstalla"></span><span id="GAMEEXPLORERUNINSTALLA"></span>**GameExplorerUninstallA**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-148">Remove um jogo do registro com o explorador de jogos; Versão ANSI do **GameExplorerUninstallW**.</span><span class="sxs-lookup"><span data-stu-id="53d24-148">Removes a game from registration with Games Explorer; ANSI version of **GameExplorerUninstallW**.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-149"><span id="GameExplorerSetMSIProperties"></span><span id="gameexplorersetmsiproperties"></span><span id="GAMEEXPLORERSETMSIPROPERTIES"></span>**GameExplorerSetMSIProperties**</span><span class="sxs-lookup"><span data-stu-id="53d24-149"><span id="GameExplorerSetMSIProperties"></span><span id="gameexplorersetmsiproperties"></span><span id="GAMEEXPLORERSETMSIPROPERTIES"></span>**GameExplorerSetMSIProperties**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-150">Configura as propriedades CustomActionData para as ações de uma instalação personalizada adiada do MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-150">Configures the CustomActionData properties for the actions of an MSI deferred custom installation.</span></span> <span data-ttu-id="53d24-151">O uso dessa função é descrito em detalhes posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="53d24-151">Usage of this function is described in detail later in this article.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-152"><span id="GameExplorerInstallUsingMSI"></span><span id="gameexplorerinstallusingmsi"></span><span id="GAMEEXPLORERINSTALLUSINGMSI"></span>**GameExplorerInstallUsingMSI**</span><span class="sxs-lookup"><span data-stu-id="53d24-152"><span id="GameExplorerInstallUsingMSI"></span><span id="gameexplorerinstallusingmsi"></span><span id="GAMEEXPLORERINSTALLUSINGMSI"></span>**GameExplorerInstallUsingMSI**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-153">Adiciona um jogo ao explorador de jogos; para uso durante uma instalação de ação personalizada do MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-153">Adds a game to Games Explorer; for use during an MSI custom action installation.</span></span>

</dd> <dt>

<span data-ttu-id="53d24-154"><span id="GameExplorerUninstallUsingMSI"></span><span id="gameexploreruninstallusingmsi"></span><span id="GAMEEXPLORERUNINSTALLUSINGMSI"></span>**GameExplorerUninstallUsingMSI**</span><span class="sxs-lookup"><span data-stu-id="53d24-154"><span id="GameExplorerUninstallUsingMSI"></span><span id="gameexploreruninstallusingmsi"></span><span id="GAMEEXPLORERUNINSTALLUSINGMSI"></span>**GameExplorerUninstallUsingMSI**</span></span>
</dt> <dd>

<span data-ttu-id="53d24-155">Remover um jogo do explorador de jogos; para uso durante uma instalação de ação personalizada do MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-155">Remove a game from Games Explorer; for use during an MSI custom action installation.</span></span>

</dd> </dl>

<span data-ttu-id="53d24-156">Essas funções são explicadas ainda mais no cabeçalho GameUXInstallHelper. h.</span><span class="sxs-lookup"><span data-stu-id="53d24-156">These functions are further explained in the GameUXInstallHelper.h header.</span></span>

## <a name="integration-process"></a><span data-ttu-id="53d24-157">Processo de integração</span><span class="sxs-lookup"><span data-stu-id="53d24-157">Integration Process</span></span>

<span data-ttu-id="53d24-158">Depois que o GDF e os arquivos relacionados tiverem sido adicionados a um recurso binário, será possível integrar o jogo ao explorador de jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-158">Once the GDF and related files have been added to a binary resource, it is then possible to integrate the game with Games Explorer.</span></span> <span data-ttu-id="53d24-159">O uso do **GameUXInstallHelper** simplificará o processo de integração.</span><span class="sxs-lookup"><span data-stu-id="53d24-159">Using **GameUXInstallHelper** will simplify the integration process.</span></span> <span data-ttu-id="53d24-160">Para registrar o jogo no explorador de jogos, chame o **GameExplorerInstall** com um caminho para o binário GDF, um caminho completo para a pasta em que o jogo está instalado e o escopo de instalação.</span><span class="sxs-lookup"><span data-stu-id="53d24-160">To register the game with Games Explorer, call the **GameExplorerInstall** with a path to the GDF binary, a full path to the folder where the game is installed, and the installation scope.</span></span> <span data-ttu-id="53d24-161">Para remover o registro do jogo, chame **GameExplorerUninstall** com um caminho para o binário GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-161">To remove the game's registration, call **GameExplorerUninstall** with a path to the GDF binary.</span></span>

<span data-ttu-id="53d24-162">Observe que o processo de remoção remove apenas uma instalação exclusiva.</span><span class="sxs-lookup"><span data-stu-id="53d24-162">Note that the removal process only removes one unique installation.</span></span> <span data-ttu-id="53d24-163">Se um jogo tiver sido instalado várias vezes, esse processo deverá ser repetido para cada instalação exclusiva.</span><span class="sxs-lookup"><span data-stu-id="53d24-163">If a game has been installed multiple times, this process must be repeated for each unique installation.</span></span>

## <a name="games-explorer-tasks"></a><span data-ttu-id="53d24-164">Tarefas do explorador de jogos</span><span class="sxs-lookup"><span data-stu-id="53d24-164">Games Explorer Tasks</span></span>

<span data-ttu-id="53d24-165">As tarefas do explorador de jogos serão exibidas no menu de contexto de um item no explorador de jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-165">Games Explorer tasks will appear in the context menu of an item in Games Explorer.</span></span> <span data-ttu-id="53d24-166">As tarefas são divididas em tarefas de reprodução e tarefas de suporte.</span><span class="sxs-lookup"><span data-stu-id="53d24-166">Tasks are divided into play tasks and support tasks.</span></span> <span data-ttu-id="53d24-167">As tarefas de reprodução iniciam um jogo em um modo específico, enquanto as tarefas de suporte atendem a qualquer outra finalidade, incluindo a vinculação a sites da Web.</span><span class="sxs-lookup"><span data-stu-id="53d24-167">Play tasks launch a game into a particular mode, while support tasks serve any other purpose, including linking to web sites.</span></span>

<span data-ttu-id="53d24-168">No Windows Vista, as tarefas são simplesmente atalhos que estão localizados em pastas específicas.</span><span class="sxs-lookup"><span data-stu-id="53d24-168">In Windows Vista, tasks are simply shortcuts that are located in specific folders.</span></span> <span data-ttu-id="53d24-169">Tarefas de reprodução e tarefas de suporte são armazenadas em pastas com os nomes correspondentes PlayTasks e SupportTasks.</span><span class="sxs-lookup"><span data-stu-id="53d24-169">Play tasks and support tasks are stored in folders with the corresponding names PlayTasks and SupportTasks.</span></span> <span data-ttu-id="53d24-170">GameUXInstallHelper pode ler as informações sobre a tarefa do jogo do arquivo binário GDF e criar todos os atalhos automaticamente.</span><span class="sxs-lookup"><span data-stu-id="53d24-170">GameUXInstallHelper can read the game's task information from the GDF binary file and create all of the shortcuts automatically.</span></span>

<span data-ttu-id="53d24-171">No Windows 7, os atalhos para as tarefas não são necessários, pois o explorador de jogos obtém todas as informações da tarefa diretamente do arquivo binário GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-171">In Windows 7, the shortcuts to the tasks are not needed, because Games Explorer obtains all of the task information directly from the GDF binary file.</span></span>

## <a name="integrating-into-installscript"></a><span data-ttu-id="53d24-172">Integrando no InstallScript</span><span class="sxs-lookup"><span data-stu-id="53d24-172">Integrating into InstallScript</span></span>

<span data-ttu-id="53d24-173">Chamar APIs do explorador de jogos do InstallScript do InstallShield é facilitado usando o exemplo GameUXInstallHelper.</span><span class="sxs-lookup"><span data-stu-id="53d24-173">Calling Games Explorer APIs from InstallShield's InstallScript is made easy by using the GameUXInstallHelper sample.</span></span> <span data-ttu-id="53d24-174">As etapas necessárias para a integração com o InstallShield são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="53d24-174">The steps required to integrate with InstallShield are as follows:</span></span>

1.  <span data-ttu-id="53d24-175">Abra um projeto do InstallScript no editor do InstallShield.</span><span class="sxs-lookup"><span data-stu-id="53d24-175">Open an InstallScript project in the InstallShield editor.</span></span>
2.  <span data-ttu-id="53d24-176">Adicione GameUXInstallHelper.dll ao projeto a ser instalado no diretório de destino.</span><span class="sxs-lookup"><span data-stu-id="53d24-176">Add GameUXInstallHelper.dll to the project to be installed to the target directory.</span></span>

    <span data-ttu-id="53d24-177">**Para adicionar GameUXInstallHelper.dll a um projeto de InstallScript:**</span><span class="sxs-lookup"><span data-stu-id="53d24-177">**To add GameUXInstallHelper.dll to an InstallScript project:**</span></span>

    1.  <span data-ttu-id="53d24-178">Na guia **Designer de instalação** , clique em **dados do aplicativo** no painel de navegação à esquerda.</span><span class="sxs-lookup"><span data-stu-id="53d24-178">On the **Installation Designer** tab, click **Application Data** in the navigation pane on the left.</span></span>
    2.  <span data-ttu-id="53d24-179">Clique em **arquivos e pastas** e procure nas **pastas do computador de origem** para localizar GameUXInstallerHelper.dll nos **arquivos do computador de origem**.</span><span class="sxs-lookup"><span data-stu-id="53d24-179">Click **Files and Folders** and browse in **Source computer's folders** to locate GameUXInstallerHelper.dll in **Source computer's files**.</span></span>

        <span data-ttu-id="53d24-180">O local padrão para GameUXInstallerHelper.dll é o DirectX SDK root \\ Samples \\ C++ \\ misc \\ bin \\ x86.</span><span class="sxs-lookup"><span data-stu-id="53d24-180">The default location for GameUXInstallerHelper.dll is DirectX SDK root\\Samples\\C++\\Misc\\Bin\\x86.</span></span>

    3.  <span data-ttu-id="53d24-181">Em **pastas do computador de destino**, clique em **pasta de destino do aplicativo**.</span><span class="sxs-lookup"><span data-stu-id="53d24-181">Under **Destination computer's folders**, click **Application Target Folder**.</span></span>
    4.  <span data-ttu-id="53d24-182">Arraste GameUXInstallerHelper.dll dos **arquivos do computador de origem** para **os arquivos do computador de destino**.</span><span class="sxs-lookup"><span data-stu-id="53d24-182">Drag GameUXInstallerHelper.dll from **Source computer's files** to **Destination computer's files**.</span></span>

3.  <span data-ttu-id="53d24-183">No Gerenciador de InstallScript, clique no arquivo InstallScript (geralmente setup. RUL) que chama a função DLL.</span><span class="sxs-lookup"><span data-stu-id="53d24-183">In the InstallScript explorer, click the InstallScript file (usually setup.rul) that calls the DLL function.</span></span>
4.  <span data-ttu-id="53d24-184">Cole o seguinte InstallScript no arquivo:</span><span class="sxs-lookup"><span data-stu-id="53d24-184">Paste the following InstallScript into the file:</span></span>

    ``` syntax
    typedef GUID
    begin
    LONG  Data1;
    SHORT Data2;
    SHORT Data3;
    CHAR  Data4(8);
    end;

    prototype LONG GameUXInstallHelper.GameExplorerInstallW(WSTRING, WSTRING, NUMBER);
    prototype LONG GameUXInstallHelper.GameExplorerUninstallW(WSTRING);

    function OnMoved()

    WSTRING gdfbin[256];
    WSTRING path[256];
    NUMBER scope;

    begin

    if !MAINTENANCE then

    UseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UseDLL( WINSYSDIR ^ "OLE32.dll" );

    path = TARGETDIR;
    gdfbin = TARGETDIR ^ "bin\\ExampleGame.exe";  // TODO: Change this to point to binary containing the GDF

    if ALLUSERS == 1 then
    scope = 3;
    else
    scope = 2;
    endif;

    GameUXInstallHelper.GameExplorerInstallW( gdfbin, path, scope);

    UnUseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UnUseDLL( WINSYSDIR ^ "OLE32.dll" );

    endif;

    end;

    function OnMoving()

    WSTRING gdfbin[256];

    begin

    if MAINTENANCE && UNINST != "" then

    UseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UseDLL( WINSYSDIR ^ "OLE32.dll" );

    gdfbin = path ^ "bin\\ExampleGame.exe";  // TODO: Change this to point to binary containing the GDF

    GameUXInstallHelper.GameExplorerUninstallW(gdfbin);
    UnUseDLL( TARGETDIR ^ "GameUXInstallHelper.dll" );
    UnUseDLL( WINSYSDIR ^ "OLE32.dll" );

    endif;

    end;
    ```

## <a name="integrating-into-an-msi-package"></a><span data-ttu-id="53d24-185">Integrando-se a um pacote MSI</span><span class="sxs-lookup"><span data-stu-id="53d24-185">Integrating into an MSI Package</span></span>

<span data-ttu-id="53d24-186">Veja a seguir uma descrição de alto nível das etapas necessárias para chamar as APIs do explorador de jogos usando as ações personalizadas do MSI:</span><span class="sxs-lookup"><span data-stu-id="53d24-186">The following is a high-level description of the steps required to call the Games Explorer APIs using MSI custom actions:</span></span>

1.  <span data-ttu-id="53d24-187">Adicione uma propriedade à tabela de propriedades do MSI chamada "RelativePathToGDF" contendo o caminho relativo para o binário GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-187">Add a property to the MSI Property table called "RelativePathToGDF" containing the relative path to the GDF binary.</span></span>
2.  <span data-ttu-id="53d24-188">Após a ação CostFinalize, chame a função GameUXInstallHelper DLL **SetMSIGameExplorerProperties** em uma ação personalizada imediata para definir as propriedades apropriadas do MSI para as outras ações personalizadas.</span><span class="sxs-lookup"><span data-stu-id="53d24-188">After the CostFinalize action, call the GameUXInstallHelper DLL function **SetMSIGameExplorerProperties** in an immediate custom action to set the appropriate MSI properties for the other custom actions.</span></span>
3.  <span data-ttu-id="53d24-189">Após a instalação, dispare uma ação personalizada adiada após a ação InstallFiles que chama a função GameUXInstallHelper DLL **AddToGameExplorerUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="53d24-189">Upon installation, trigger a deferred custom action after the InstallFiles action that calls the GameUXInstallHelper DLL function **AddToGameExplorerUsingMSI**.</span></span> <span data-ttu-id="53d24-190">Se a instalação for para todos os usuários, a ação personalizada deverá definir o sinalizador msidbCustomActionTypeNoImpersonate; caso contrário, ele não deve definir esse sinalizador.</span><span class="sxs-lookup"><span data-stu-id="53d24-190">If the installation is for all users, then the custom action must set the flag msidbCustomActionTypeNoImpersonate; otherwise, it must not set this flag.</span></span> <span data-ttu-id="53d24-191">Portanto, duas ações personalizadas quase idênticas são definidas: GameUXAddAsAdmin e GameUXAddAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="53d24-191">Therefore, two nearly identical custom actions are defined: GameUXAddAsAdmin and GameUXAddAsCurUser.</span></span>
4.  <span data-ttu-id="53d24-192">Após a remoção da instalação, dispare uma ação personalizada adiada antes da ação removida que chama a função GameUXInstallHelper DLL **RemoveFromGameExplorerUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="53d24-192">Upon removal of the installation, trigger a deferred custom action before the RemoveFiles action that calls the GameUXInstallHelper DLL function **RemoveFromGameExplorerUsingMSI**.</span></span> <span data-ttu-id="53d24-193">Se a instalação for para todos os usuários, a ação personalizada deverá definir o sinalizador msidbCustomActionTypeNoImpersonate; caso contrário, ele não deve definir esse sinalizador.</span><span class="sxs-lookup"><span data-stu-id="53d24-193">If the installation was for all users, then the custom action must set the flag msidbCustomActionTypeNoImpersonate; otherwise, it must not set this flag.</span></span> <span data-ttu-id="53d24-194">Portanto, duas ações personalizadas quase idênticas são definidas: GameUXRemoveAsAdmin e GameUXRemoveAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="53d24-194">Therefore, two nearly identical custom actions are defined: GameUXRemoveAsAdmin and GameUXRemoveAsCurUser.</span></span>
5.  <span data-ttu-id="53d24-195">Defina reversão de ações personalizadas para lidar com o caso em que o usuário cancelar a instalação ou remoção depois que uma das ações personalizadas já tiver acontecido.</span><span class="sxs-lookup"><span data-stu-id="53d24-195">Define rollback custom actions to handle the case where the user cancels installing or removing after one of the these custom actions has already happened.</span></span> <span data-ttu-id="53d24-196">Isso resulta em quatro ações personalizadas adicionais: GameUXRollBackAddAsAdmin, GameUXRollBackAddAsCurUser, GameUXRollBackRemoveAsAdmin e GameUXRollBackRemoveAsCurUser.</span><span class="sxs-lookup"><span data-stu-id="53d24-196">This results in an additional 4 custom actions: GameUXRollBackAddAsAdmin, GameUXRollBackAddAsCurUser, GameUXRollBackRemoveAsAdmin, and GameUXRollBackRemoveAsCurUser.</span></span>

<span data-ttu-id="53d24-197">Esse procedimento é descrito em detalhes nas instruções a seguir, que descrevem um processo que pode ser feito usando um editor de MSI, como o editor Orca encontrado no SDK da plataforma.</span><span class="sxs-lookup"><span data-stu-id="53d24-197">This procedure is described in detail in the following instructions, which describe a process that can be done using an MSI editor, such as the Orca editor found in the Platform SDK.</span></span> <span data-ttu-id="53d24-198">Alguns editores MSI têm assistentes que simplificam algumas dessas etapas de configuração.</span><span class="sxs-lookup"><span data-stu-id="53d24-198">Some MSI editors have wizards which simplify some of these configuration steps.</span></span>

<span data-ttu-id="53d24-199">**Para configurar um pacote MSI para integração com o explorador de jogos**</span><span class="sxs-lookup"><span data-stu-id="53d24-199">**To configure an MSI package for integration with Games Explorer**</span></span>

1.  <span data-ttu-id="53d24-200">Abra o pacote MSI em orca.</span><span class="sxs-lookup"><span data-stu-id="53d24-200">Open the MSI package in Orca.</span></span>
2.  <span data-ttu-id="53d24-201">Adicione a linha mostrada na tabela a seguir à tabela **binária** no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-201">Add the row shown in the following table to the **Binary** table in the MSI package.</span></span> 

    | <span data-ttu-id="53d24-202">Nome</span><span class="sxs-lookup"><span data-stu-id="53d24-202">Name</span></span>   | <span data-ttu-id="53d24-203">Dados</span><span class="sxs-lookup"><span data-stu-id="53d24-203">Data</span></span>                                          |
    |--------|-----------------------------------------------|
    | <span data-ttu-id="53d24-204">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-204">GAMEUX</span></span> | <span data-ttu-id="53d24-205">caminho do arquivo para a DLL \\GameUXInstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="53d24-205">file path to the DLL\\GameUXInstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="53d24-206">Esse arquivo será inserido no pacote MSI, portanto, você deve fazer essa etapa sempre que recompilar GameUXInstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="53d24-206">This file will be embedded in the MSI package, so you must do this step every time you recompile GameUXInstallHelper.dll.</span></span>

     

3.  <span data-ttu-id="53d24-207">Adicione as linhas mostradas na tabela a seguir à tabela **CustomAction** no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-207">Add the rows shown in the following table to the **CustomAction** table in the MSI package.</span></span>

    | <span data-ttu-id="53d24-208">Ação</span><span class="sxs-lookup"><span data-stu-id="53d24-208">Action</span></span>                        | <span data-ttu-id="53d24-209">Tipo</span><span class="sxs-lookup"><span data-stu-id="53d24-209">Type</span></span>                                                                                                                                                                                                   | <span data-ttu-id="53d24-210">Fonte</span><span class="sxs-lookup"><span data-stu-id="53d24-210">Source</span></span> | <span data-ttu-id="53d24-211">Destino</span><span class="sxs-lookup"><span data-stu-id="53d24-211">Target</span></span>                         |
    |-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|--------------------------------|
    | <span data-ttu-id="53d24-212">GameUXSetMSIProperties</span><span class="sxs-lookup"><span data-stu-id="53d24-212">GameUXSetMSIProperties</span></span>        | <span data-ttu-id="53d24-213">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span><span class="sxs-lookup"><span data-stu-id="53d24-213">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                                                        | <span data-ttu-id="53d24-214">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-214">GAMEUX</span></span> | <span data-ttu-id="53d24-215">SetMSIGameExplorerProperties</span><span class="sxs-lookup"><span data-stu-id="53d24-215">SetMSIGameExplorerProperties</span></span>   |
    | <span data-ttu-id="53d24-216">GameUXAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-216">GameUXAddAsAdmin</span></span>              | <span data-ttu-id="53d24-217">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="53d24-217">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span>                                 | <span data-ttu-id="53d24-218">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-218">GAMEUX</span></span> | <span data-ttu-id="53d24-219">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-219">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="53d24-220">GameUXAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-220">GameUXAddAsCurUser</span></span>            | <span data-ttu-id="53d24-221">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span><span class="sxs-lookup"><span data-stu-id="53d24-221">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span></span>                                                                      | <span data-ttu-id="53d24-222">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-222">GAMEUX</span></span> | <span data-ttu-id="53d24-223">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-223">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="53d24-224">GameUXRollBackAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-224">GameUXRollBackAddAsAdmin</span></span>      | <span data-ttu-id="53d24-225">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span><span class="sxs-lookup"><span data-stu-id="53d24-225">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span></span> | <span data-ttu-id="53d24-226">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-226">GAMEUX</span></span> | <span data-ttu-id="53d24-227">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-227">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="53d24-228">GameUXRollBackAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-228">GameUXRollBackAddAsCurUser</span></span>    | <span data-ttu-id="53d24-229">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span><span class="sxs-lookup"><span data-stu-id="53d24-229">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span></span>                                      | <span data-ttu-id="53d24-230">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-230">GAMEUX</span></span> | <span data-ttu-id="53d24-231">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-231">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="53d24-232">GameUXRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-232">GameUXRemoveAsAdmin</span></span>           | <span data-ttu-id="53d24-233">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="53d24-233">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span>                                 | <span data-ttu-id="53d24-234">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-234">GAMEUX</span></span> | <span data-ttu-id="53d24-235">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-235">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="53d24-236">GameUXRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-236">GameUXRemoveAsCurUser</span></span>         | <span data-ttu-id="53d24-237">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span><span class="sxs-lookup"><span data-stu-id="53d24-237">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript = 1089</span></span>                                                                      | <span data-ttu-id="53d24-238">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-238">GAMEUX</span></span> | <span data-ttu-id="53d24-239">RemoveFromGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-239">RemoveFromGameExplorerUsingMSI</span></span> |
    | <span data-ttu-id="53d24-240">GameUXRollBackRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-240">GameUXRollBackRemoveAsAdmin</span></span>   | <span data-ttu-id="53d24-241">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span><span class="sxs-lookup"><span data-stu-id="53d24-241">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3393</span></span> | <span data-ttu-id="53d24-242">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-242">GAMEUX</span></span> | <span data-ttu-id="53d24-243">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-243">AddToGameExplorerUsingMSI</span></span>      |
    | <span data-ttu-id="53d24-244">GameUXRollBackRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-244">GameUXRollBackRemoveAsCurUser</span></span> | <span data-ttu-id="53d24-245">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span><span class="sxs-lookup"><span data-stu-id="53d24-245">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeRollback + msidbCustomActionTypeInScript = 1345</span></span>                                      | <span data-ttu-id="53d24-246">GAMEUX</span><span class="sxs-lookup"><span data-stu-id="53d24-246">GAMEUX</span></span> | <span data-ttu-id="53d24-247">AddToGameExplorerUsingMSI</span><span class="sxs-lookup"><span data-stu-id="53d24-247">AddToGameExplorerUsingMSI</span></span>      |

    

     

4.  <span data-ttu-id="53d24-248">Adicione os valores mostrados para ação, condição e sequência na tabela a seguir à tabela **InstallExecuteSequence** no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-248">Add the values shown for Action, Condition, and Sequence in the following table to the **InstallExecuteSequence** table in the MSI package.</span></span>

    | <span data-ttu-id="53d24-249">Ação</span><span class="sxs-lookup"><span data-stu-id="53d24-249">Action</span></span>                        | <span data-ttu-id="53d24-250">Condição</span><span class="sxs-lookup"><span data-stu-id="53d24-250">Condition</span></span>                      | <span data-ttu-id="53d24-251">Sequência</span><span class="sxs-lookup"><span data-stu-id="53d24-251">Sequence</span></span> | <span data-ttu-id="53d24-252">Observações</span><span class="sxs-lookup"><span data-stu-id="53d24-252">Notes</span></span>                                                                                                                                                                                            |
    |-------------------------------|--------------------------------|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="53d24-253">GameUXSetMSIProperties</span><span class="sxs-lookup"><span data-stu-id="53d24-253">GameUXSetMSIProperties</span></span>        |                                | <span data-ttu-id="53d24-254">1015</span><span class="sxs-lookup"><span data-stu-id="53d24-254">1015</span></span>     | <span data-ttu-id="53d24-255">O número de sequência coloca a ação logo após CostFinalize.</span><span class="sxs-lookup"><span data-stu-id="53d24-255">The sequence number places the action soon after CostFinalize.</span></span>                                                                                                                                   |
    | <span data-ttu-id="53d24-256">GameUXAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-256">GameUXAddAsAdmin</span></span>              | <span data-ttu-id="53d24-257">NÃO instalado e ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-257">NOT Installed AND ALLUSERS</span></span>     | <span data-ttu-id="53d24-258">4003</span><span class="sxs-lookup"><span data-stu-id="53d24-258">4003</span></span>     | <span data-ttu-id="53d24-259">Essa ação personalizada só ocorrerá durante uma nova instalação para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="53d24-259">This custom action will only happen during a fresh installation for all users.</span></span> <span data-ttu-id="53d24-260">O número de sequência coloca a ação após InstallFiles e após as reversões.</span><span class="sxs-lookup"><span data-stu-id="53d24-260">The sequence number places the action after InstallFiles and after the rollbacks.</span></span>                                 |
    | <span data-ttu-id="53d24-261">GameUXAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-261">GameUXAddAsCurUser</span></span>            | <span data-ttu-id="53d24-262">NÃO instalado e não é ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-262">NOT Installed AND NOT ALLUSERS</span></span> | <span data-ttu-id="53d24-263">4004</span><span class="sxs-lookup"><span data-stu-id="53d24-263">4004</span></span>     | <span data-ttu-id="53d24-264">Essa ação personalizada só ocorrerá durante uma nova instalação para o usuário atual.</span><span class="sxs-lookup"><span data-stu-id="53d24-264">This custom action will only happen during a fresh installation for the current user only.</span></span> <span data-ttu-id="53d24-265">O número de sequência coloca a ação após InstallFiles e após as reversões.</span><span class="sxs-lookup"><span data-stu-id="53d24-265">The sequence number places the action after InstallFiles and after the rollbacks.</span></span>                     |
    | <span data-ttu-id="53d24-266">GameUXRollBackAddAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-266">GameUXRollBackAddAsAdmin</span></span>      | <span data-ttu-id="53d24-267">NÃO instalado e ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-267">NOT Installed AND ALLUSERS</span></span>     | <span data-ttu-id="53d24-268">4001</span><span class="sxs-lookup"><span data-stu-id="53d24-268">4001</span></span>     | <span data-ttu-id="53d24-269">Essa ação personalizada ocorrerá somente quando uma instalação nova para todos os usuários for cancelada.</span><span class="sxs-lookup"><span data-stu-id="53d24-269">This custom action will only happen when a fresh installation for all users is cancelled.</span></span> <span data-ttu-id="53d24-270">O número de sequência coloca a ação após InstallFiles e antes da ação de adicionar Personalizada.</span><span class="sxs-lookup"><span data-stu-id="53d24-270">The sequence number places the action after InstallFiles and before the Add custom action.</span></span>             |
    | <span data-ttu-id="53d24-271">GameUXRollBackAddAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-271">GameUXRollBackAddAsCurUser</span></span>    | <span data-ttu-id="53d24-272">NÃO instalado e não é ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-272">NOT Installed AND NOT ALLUSERS</span></span> | <span data-ttu-id="53d24-273">4002</span><span class="sxs-lookup"><span data-stu-id="53d24-273">4002</span></span>     | <span data-ttu-id="53d24-274">Essa ação personalizada só acontecerá quando uma nova instalação do usuário atual for cancelada.</span><span class="sxs-lookup"><span data-stu-id="53d24-274">This custom action will only happen when a fresh installation for the current user only is cancelled.</span></span> <span data-ttu-id="53d24-275">O número de sequência coloca a ação após InstallFiles e antes da ação de adicionar Personalizada.</span><span class="sxs-lookup"><span data-stu-id="53d24-275">The sequence number places the action after InstallFiles and before the Add custom action.</span></span> |
    | <span data-ttu-id="53d24-276">GameUXRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-276">GameUXRemoveAsAdmin</span></span>           | <span data-ttu-id="53d24-277">REMOVER ~ = "TODOS" E ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-277">REMOVE~="ALL" AND ALLUSERS</span></span>     | <span data-ttu-id="53d24-278">3452</span><span class="sxs-lookup"><span data-stu-id="53d24-278">3452</span></span>     | <span data-ttu-id="53d24-279">Essa ação personalizada só ocorrerá durante a remoção para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="53d24-279">This custom action will only happen during removal for all users.</span></span> <span data-ttu-id="53d24-280">O número de sequência coloca a ação diretamente antes de removes e após as reversões.</span><span class="sxs-lookup"><span data-stu-id="53d24-280">The sequence number places the action directly before RemoveFiles and after the rollbacks.</span></span>                                     |
    | <span data-ttu-id="53d24-281">GameUXRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-281">GameUXRemoveAsCurUser</span></span>         | <span data-ttu-id="53d24-282">REMOVER ~ = "ALL" E NÃO ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-282">REMOVE~="ALL" AND NOT ALLUSERS</span></span> | <span data-ttu-id="53d24-283">3453</span><span class="sxs-lookup"><span data-stu-id="53d24-283">3453</span></span>     | <span data-ttu-id="53d24-284">Esta ação personalizada só ocorrerá durante a remoção do usuário atual.</span><span class="sxs-lookup"><span data-stu-id="53d24-284">This custom action will only happen during removal for the current user.</span></span> <span data-ttu-id="53d24-285">O número de sequência coloca a ação diretamente antes de removes e após as reversões.</span><span class="sxs-lookup"><span data-stu-id="53d24-285">The sequence number places the action directly before RemoveFiles and after the rollbacks.</span></span>                              |
    | <span data-ttu-id="53d24-286">GameUXRollBackRemoveAsAdmin</span><span class="sxs-lookup"><span data-stu-id="53d24-286">GameUXRollBackRemoveAsAdmin</span></span>   | <span data-ttu-id="53d24-287">REMOVER ~ = "TODOS" E ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-287">REMOVE~="ALL" AND ALLUSERS</span></span>     | <span data-ttu-id="53d24-288">3450</span><span class="sxs-lookup"><span data-stu-id="53d24-288">3450</span></span>     | <span data-ttu-id="53d24-289">Esta ação personalizada ocorrerá somente quando a remoção de todos os usuários for cancelada.</span><span class="sxs-lookup"><span data-stu-id="53d24-289">This custom action will only happen when removal for all users is cancelled.</span></span> <span data-ttu-id="53d24-290">O número de sequência coloca a ação diretamente antes de removidas e antes da ação personalizada de remoção.</span><span class="sxs-lookup"><span data-stu-id="53d24-290">The sequence number places the action directly before RemoveFiles and before the Remove custom action.</span></span>              |
    | <span data-ttu-id="53d24-291">GameUXRollBackRemoveAsCurUser</span><span class="sxs-lookup"><span data-stu-id="53d24-291">GameUXRollBackRemoveAsCurUser</span></span> | <span data-ttu-id="53d24-292">REMOVER ~ = "ALL" E NÃO ALLUSERS</span><span class="sxs-lookup"><span data-stu-id="53d24-292">REMOVE~="ALL" AND NOT ALLUSERS</span></span> | <span data-ttu-id="53d24-293">3451</span><span class="sxs-lookup"><span data-stu-id="53d24-293">3451</span></span>     | <span data-ttu-id="53d24-294">Esta ação personalizada ocorrerá somente quando a remoção do usuário atual for cancelada.</span><span class="sxs-lookup"><span data-stu-id="53d24-294">This custom action will only happen when removal for the current user is cancelled.</span></span> <span data-ttu-id="53d24-295">O número de sequência coloca a ação diretamente antes de removidas e antes da ação personalizada de remoção.</span><span class="sxs-lookup"><span data-stu-id="53d24-295">The sequence number places the action directly before RemoveFiles and before the Remove custom action.</span></span>       |

    

     

5.  <span data-ttu-id="53d24-296">Adicione a linha mostrada na tabela a seguir à tabela de propriedades no pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-296">Add the row shown in the following table to the Property table in the MSI package.</span></span>

    | <span data-ttu-id="53d24-297">Propriedade</span><span class="sxs-lookup"><span data-stu-id="53d24-297">Property</span></span>          | <span data-ttu-id="53d24-298">Valor</span><span class="sxs-lookup"><span data-stu-id="53d24-298">Value</span></span>                                                         |
    |-------------------|---------------------------------------------------------------|
    | <span data-ttu-id="53d24-299">RelativePathToGDF</span><span class="sxs-lookup"><span data-stu-id="53d24-299">RelativePathToGDF</span></span> | <span data-ttu-id="53d24-300">\\nome do caminho de arquivo relativo do arquivo binário que contém o GDF</span><span class="sxs-lookup"><span data-stu-id="53d24-300">relative file path\\name of binary file that contains the GDF</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="53d24-301">O local especificado pelo caminho é relativo ao local especificado pelo caminho de instalação.</span><span class="sxs-lookup"><span data-stu-id="53d24-301">The location specified by the path is relative to the location specified by the installation path.</span></span> <span data-ttu-id="53d24-302">Por exemplo, bin \\GDF.dll.</span><span class="sxs-lookup"><span data-stu-id="53d24-302">For example, bin\\GDF.dll.</span></span>

     

6.  <span data-ttu-id="53d24-303">Salve o pacote MSI.</span><span class="sxs-lookup"><span data-stu-id="53d24-303">Save the MSI package.</span></span>

<span data-ttu-id="53d24-304">Para obter informações mais detalhadas sobre pacotes e Windows Installer do MSI, consulte [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="53d24-304">For more detailed information about MSI packages and Windows Installer, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="debugging-tips"></a><span data-ttu-id="53d24-305">Dicas de depuração</span><span class="sxs-lookup"><span data-stu-id="53d24-305">Debugging Tips</span></span>

<span data-ttu-id="53d24-306">Veja a seguir algumas dicas para ajudar a depurar problemas ao chamar APIs do explorador de jogos:</span><span class="sxs-lookup"><span data-stu-id="53d24-306">The following are some tips to help debug issues when calling Games Explorer APIs:</span></span>

### <a name="test-with-sample-code"></a><span data-ttu-id="53d24-307">Teste com código de exemplo</span><span class="sxs-lookup"><span data-stu-id="53d24-307">Test with sample code</span></span>

<span data-ttu-id="53d24-308">A criação da solução de exemplo GameUXInstallHelper criará uma GameUXInstallHelper.dll e uma GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="53d24-308">Building the GameUXInstallHelper sample solution will create a GameUXInstallHelper.dll and a GDFInstall.exe.</span></span> <span data-ttu-id="53d24-309">O GDFInstall.exe é um aplicativo de exemplo que usa GameUXInstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="53d24-309">The GDFInstall.exe is a sample application that uses GameUXInstallHelper.dll.</span></span> <span data-ttu-id="53d24-310">A execução de GDFInstall.exe será solicitada se você quiser instalar ou remover um binário GDF do explorador de jogos.</span><span class="sxs-lookup"><span data-stu-id="53d24-310">Running GDFInstall.exe will prompt if you want install or remove a GDF binary from game explorer.</span></span> <span data-ttu-id="53d24-311">Você pode testar o arquivo binário GDF passando-o como o primeiro ARG de linha de comando para GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="53d24-311">You can test your GDF binary file by passing it in as the first command line arg to GDFInstall.exe.</span></span>

<span data-ttu-id="53d24-312">Se você não tiver um binário GDF ou o seu não for instalado, tente usar o GDF de exemplo no SDK do DirectX.</span><span class="sxs-lookup"><span data-stu-id="53d24-312">If you don't have a GDF binary or yours fails to install, try using the sample GDF in the DirectX SDK.</span></span> <span data-ttu-id="53d24-313">O exemplo de GDFExampleBinary é encontrado no SDK do DirectX e é apenas uma DLL que contém apenas um arquivo GDF.</span><span class="sxs-lookup"><span data-stu-id="53d24-313">The GDFExampleBinary sample is found in the DirectX SDK and is just a DLL that only contains a GDF file.</span></span> <span data-ttu-id="53d24-314">Também estão incluídos na fonte seu projeto GDFMaker.</span><span class="sxs-lookup"><span data-stu-id="53d24-314">Also included in the source is its GDFMaker project.</span></span> <span data-ttu-id="53d24-315">Você pode compilá-lo e testá-lo usando GDFInstall.exe.</span><span class="sxs-lookup"><span data-stu-id="53d24-315">You can build it and test it using GDFInstall.exe.</span></span> <span data-ttu-id="53d24-316">Você também pode comparar o XML com o seu para identificar exatamente onde está o problema.</span><span class="sxs-lookup"><span data-stu-id="53d24-316">You can also compare the its XML to yours to pinpoint exactly where the issue is.</span></span>

### <a name="make-sure-that-your-game-was-removed-properly"></a><span data-ttu-id="53d24-317">Certifique-se de que seu jogo foi removido corretamente</span><span class="sxs-lookup"><span data-stu-id="53d24-317">Make sure that your game was removed properly</span></span>

<span data-ttu-id="53d24-318">Se o jogo já estiver instalado no explorador de jogos, as chamadas subsequentes para **IGameExplorer:: addgame** retornarão E \_ falharão. portanto, verifique se o jogo não está instalado antes do teste.</span><span class="sxs-lookup"><span data-stu-id="53d24-318">If the game is already installed in Games Explorer, then subsequent calls to **IGameExplorer::AddGame** will return E\_FAIL so make sure your game isn't installed before testing.</span></span> <span data-ttu-id="53d24-319">Isso também se aplicará se você instalar o GDF somente para o usuário atual e, em seguida, tentar instalar o GDF para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="53d24-319">This also applies if you install the GDF for only the current user and then try to install the GDF for all users.</span></span> <span data-ttu-id="53d24-320">Primeiro, você deve remover o jogo dos usuários atuais antes de **IGameExplorer:: addgame** terá sucesso.</span><span class="sxs-lookup"><span data-stu-id="53d24-320">You must first remove the game from the current users before **IGameExplorer::AddGame** will succeed.</span></span>

<span data-ttu-id="53d24-321">Se você executar **GDFInstall.exe Enumeração**, o aplicativo de exemplo entrará em um modo diferente que enumerará todos os jogos do explorador de jogos instalados e solicitará que você os remova.</span><span class="sxs-lookup"><span data-stu-id="53d24-321">If you run **GDFInstall.exe enum**, the sample application will enter a different mode which will enumerate all of the installed Games Explorer games and prompt you to remove them.</span></span> <span data-ttu-id="53d24-322">Você também pode procurar e pesquisar o registro em HKEY \_ local \_ Machine \\ software \\ Microsoft \\ Windows \\ CurrentVersion \\ GameUX para ter certeza de que seu jogo não está instalado para outro usuário no sistema.</span><span class="sxs-lookup"><span data-stu-id="53d24-322">You can also browse and search the registry in HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\GameUX to make sure that your game isn't installed for another user on the system.</span></span> <span data-ttu-id="53d24-323">No entanto, não altere essas configurações de registro para nenhuma outra finalidade, pois não há garantia de que elas permaneçam compatíveis em versões futuras do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="53d24-323">However, do not alter these registry settings for any other purpose, as they are not guaranteed to remain compatible in future versions of the operating system.</span></span>

### <a name="be-sure-to-sign-using-authenticode"></a><span data-ttu-id="53d24-324">Não se esqueça de assinar usando Authenticode</span><span class="sxs-lookup"><span data-stu-id="53d24-324">Be sure to sign using Authenticode</span></span>

<span data-ttu-id="53d24-325">Se você forneceu uma classificação, mas não a está vendo no explorador de jogos, certifique-se de que usou o Authenticode para assinar o arquivo executável ou DLL que contém a classificação.</span><span class="sxs-lookup"><span data-stu-id="53d24-325">If you have provided a rating, but are not seeing it in Games Explorer, make sure that you have used Authenticode to sign the executable or DLL file that contains the rating.</span></span> <span data-ttu-id="53d24-326">O explorador de jogos ignora as informações de classificações em arquivos não assinados.</span><span class="sxs-lookup"><span data-stu-id="53d24-326">Games Explorer ignores ratings information in unsigned files.</span></span> <span data-ttu-id="53d24-327">Para obter mais informações sobre Authenticode, consulte [assinatura Authenticode para desenvolvedores de jogos](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="53d24-327">For more information about Authenticode, see [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

### <a name="be-sure-that-parental-controls-are-available"></a><span data-ttu-id="53d24-328">Verifique se os controles dos pais estão disponíveis</span><span class="sxs-lookup"><span data-stu-id="53d24-328">Be sure that parental controls are available</span></span>

<span data-ttu-id="53d24-329">Verifique se você está testando controles dos pais em uma edição do Windows Vista que fornece controles dos pais: Home Basic, Home Premium ou Ultimate.</span><span class="sxs-lookup"><span data-stu-id="53d24-329">Ensure that you are testing parental controls on an edition of Windows Vista that provides parental controls: Home Basic, Home Premium, or Ultimate.</span></span> <span data-ttu-id="53d24-330">O Windows Vista Business e o Windows Vista Enterprise não fornecem controles dos pais no entanto, se você estiver testando no Windows Vista Ultimate e o computador de teste estiver ingressado em um domínio, será necessário alterar uma configuração de diretiva de grupo para tornar os controles pais visíveis.</span><span class="sxs-lookup"><span data-stu-id="53d24-330">Windows Vista Business and Windows Vista Enterprise do not provide parental controls however if you are testing on Windows Vista Ultimate, and the test computer is joined to a domain, you must change a group policy setting make parental controls visible.</span></span> <span data-ttu-id="53d24-331">Para fazer isso, consulte [introdução com o explorador de jogos](/previous-versions/windows/desktop/legacy/ee417682(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="53d24-331">To do this, see [Getting Started with Games Explorer](/previous-versions/windows/desktop/legacy/ee417682(v=vs.85)).</span></span>

### <a name="verify-that-tasks-are-of-the-correct-type"></a><span data-ttu-id="53d24-332">Verificar se as tarefas são do tipo correto</span><span class="sxs-lookup"><span data-stu-id="53d24-332">Verify that tasks are of the correct type</span></span>

<span data-ttu-id="53d24-333">Se você tiver especificado tarefas de suporte que não aparecem no explorador de jogos, verifique se elas são todos os links da Web.</span><span class="sxs-lookup"><span data-stu-id="53d24-333">If you have specified support tasks that do not appear in Games Explorer, verify that they are all Web links.</span></span> <span data-ttu-id="53d24-334">Qualquer outra tarefa de atalho deve ser criada como tarefas de reprodução.</span><span class="sxs-lookup"><span data-stu-id="53d24-334">Any other shortcut tasks must be created as play tasks.</span></span> <span data-ttu-id="53d24-335">As tarefas são abordadas anteriormente neste artigo em [tarefas do explorador de jogos](#games-explorer-tasks).</span><span class="sxs-lookup"><span data-stu-id="53d24-335">Tasks are covered earlier in this article in [Games Explorer Tasks](#games-explorer-tasks).</span></span>

### <a name="verify-the-data-in-gdf-binary"></a><span data-ttu-id="53d24-336">Verificar os dados no binário GDF</span><span class="sxs-lookup"><span data-stu-id="53d24-336">Verify the data in GDF binary</span></span>

<span data-ttu-id="53d24-337">GDFTrace.exe é uma ferramenta encontrada no SDK do DirectX.</span><span class="sxs-lookup"><span data-stu-id="53d24-337">GDFTrace.exe is a tool found in the DirectX SDK.</span></span> <span data-ttu-id="53d24-338">Você pode executar GDFTrace.exe em seu binário GDF e produzirá todos os metadados GDF contidos no binário para cada idioma com suporte para validação rápida.</span><span class="sxs-lookup"><span data-stu-id="53d24-338">You can run GDFTrace.exe on your GDF binary and it will output all the GDF metadata contained in the binary for every supported language for quick validation.</span></span> <span data-ttu-id="53d24-339">Ele também exibe quaisquer avisos sobre informações ausentes ou desatualizadas.</span><span class="sxs-lookup"><span data-stu-id="53d24-339">It also displays any warnings about missing or outdated information.</span></span>

## <a name="summary"></a><span data-ttu-id="53d24-340">Resumo</span><span class="sxs-lookup"><span data-stu-id="53d24-340">Summary</span></span>

<span data-ttu-id="53d24-341">O Game Explorer do Windows Vista fornece uma maneira fácil e personalizável de apresentar os usuários do Windows Vista, mas também exige que você registre o jogo com o sistema durante o processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="53d24-341">Games Explorer in Windows Vista provides an easy, customizable way to present your game to users of Windows Vista, but it also requires you to register the game with the system during the installation process.</span></span> <span data-ttu-id="53d24-342">O exemplo GameUXInstallHelper simplifica muito esse processo para os desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="53d24-342">The GameUXInstallHelper sample greatly simplifies this process for developers.</span></span>

 

 