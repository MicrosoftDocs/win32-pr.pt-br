---
title: Windows Installer para desenvolvedores de jogos
description: Este artigo fornece uma visão geral das Windows Installer, especificamente direcionadas aos desenvolvedores de jogos. Para obter a documentação detalhada sobre os recursos e as APIs mencionadas neste artigo, consulte o SDK da plataforma Windows.
ms.assetid: 07401792-b34b-71c9-18f8-a11c916c7d81
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e44227b633f7f9491b8a69bc06aa7945941a154
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104366266"
---
# <a name="windows-installer-for-game-developers"></a><span data-ttu-id="930d4-104">Windows Installer para desenvolvedores de jogos</span><span class="sxs-lookup"><span data-stu-id="930d4-104">Windows Installer for Game Developers</span></span>

<span data-ttu-id="930d4-105">Mostra como Windows Installer pode ser usado para instalar jogos em computadores de usuário final.</span><span class="sxs-lookup"><span data-stu-id="930d4-105">Shows how Windows Installer can be used to install games on end-user machines.</span></span> <span data-ttu-id="930d4-106">O Windows Installer oferece suporte completo para uma interface de usuário personalizada, bem como para aplicação de patches.</span><span class="sxs-lookup"><span data-stu-id="930d4-106">Windows Installer offers full support for a customized user interface, as well as for patching.</span></span>

<span data-ttu-id="930d4-107">Microsoft Windows Installer é a API preferida para instalar o software em computadores baseados no Windows.</span><span class="sxs-lookup"><span data-stu-id="930d4-107">Microsoft Windows Installer is the preferred API for installing software on Windows-based computers.</span></span> <span data-ttu-id="930d4-108">Embora muitos dos recursos do Windows Installer sejam projetados para dar suporte à implantação de aplicativos de negócios em um ambiente corporativo, o Windows Installer também é totalmente adequado para a instalação de jogos em computadores de usuários finais.</span><span class="sxs-lookup"><span data-stu-id="930d4-108">While many of the features of Windows Installer are designed to support deployment of business applications in a corporate environment, Windows Installer is also completely suitable for installing games on end-user machines.</span></span> <span data-ttu-id="930d4-109">As principais vantagens de usar o Windows Installer para instalação de jogos são:</span><span class="sxs-lookup"><span data-stu-id="930d4-109">The primary advantages of using Windows Installer for game installation are:</span></span>

-   <span data-ttu-id="930d4-110">Desinstalação confiável</span><span class="sxs-lookup"><span data-stu-id="930d4-110">Reliable uninstall</span></span>
-   <span data-ttu-id="930d4-111">Capacidade de instalar conteúdo sob demanda</span><span class="sxs-lookup"><span data-stu-id="930d4-111">Ability to install content on demand</span></span>
-   <span data-ttu-id="930d4-112">Suporte para interface do usuário totalmente personalizada</span><span class="sxs-lookup"><span data-stu-id="930d4-112">Support for completely custom user interface</span></span>
-   <span data-ttu-id="930d4-113">Aplicação de patch eficiente</span><span class="sxs-lookup"><span data-stu-id="930d4-113">Efficient patching</span></span>

<span data-ttu-id="930d4-114">Este artigo fornece uma visão geral das Windows Installer, especificamente direcionadas aos desenvolvedores de jogos.</span><span class="sxs-lookup"><span data-stu-id="930d4-114">This article gives an overview of Windows Installer, specifically targeted to game developers.</span></span> <span data-ttu-id="930d4-115">Para obter a documentação detalhada sobre os recursos e as APIs mencionadas neste artigo, consulte o SDK da plataforma Windows.</span><span class="sxs-lookup"><span data-stu-id="930d4-115">For detailed documentation on the features and APIs mentioned in this article, please refer to the Windows Platform SDK.</span></span>

-   [<span data-ttu-id="930d4-116">Visão geral</span><span class="sxs-lookup"><span data-stu-id="930d4-116">Overview</span></span>](#overview)
-   [<span data-ttu-id="930d4-117">Conceitos principais do Windows Installer</span><span class="sxs-lookup"><span data-stu-id="930d4-117">Key Windows Installer Concepts</span></span>](#key-windows-installer-concepts)
    -   [<span data-ttu-id="930d4-118">Componentes</span><span class="sxs-lookup"><span data-stu-id="930d4-118">Components</span></span>](#components)
    -   [<span data-ttu-id="930d4-119">Recursos</span><span class="sxs-lookup"><span data-stu-id="930d4-119">Features</span></span>](#features)
-   [<span data-ttu-id="930d4-120">Estados de instalação</span><span class="sxs-lookup"><span data-stu-id="930d4-120">Install States</span></span>](#install-states)
-   [<span data-ttu-id="930d4-121">Instalar sob demanda</span><span class="sxs-lookup"><span data-stu-id="930d4-121">Install on Demand</span></span>](#install-on-demand)
-   [<span data-ttu-id="930d4-122">Interface do usuário personalizada</span><span class="sxs-lookup"><span data-stu-id="930d4-122">Custom User Interface</span></span>](#custom-user-interface)
-   [<span data-ttu-id="930d4-123">Aplicação de patch</span><span class="sxs-lookup"><span data-stu-id="930d4-123">Patching</span></span>](#patching)
-   [<span data-ttu-id="930d4-124">Outros recursos</span><span class="sxs-lookup"><span data-stu-id="930d4-124">Other Resources</span></span>](#other-resources)

## <a name="overview"></a><span data-ttu-id="930d4-125">Visão geral</span><span class="sxs-lookup"><span data-stu-id="930d4-125">Overview</span></span>

<span data-ttu-id="930d4-126">Todas as configurações baseadas em Windows Installer usam um arquivo de banco de dados de instalação chamado arquivo MSI para descrever como o aplicativo deve ser instalado.</span><span class="sxs-lookup"><span data-stu-id="930d4-126">All Windows Installer-based setups use an installation database file called an MSI file to describe how the application is to be installed.</span></span> <span data-ttu-id="930d4-127">O arquivo MSI contém informações sobre quais arquivos, chaves do registro, atalhos de área de trabalho, associações de arquivo e outros elementos de aplicativo devem ser instalados.</span><span class="sxs-lookup"><span data-stu-id="930d4-127">The MSI file contains information on what files, registry keys, desktop shortcuts, file associations, and other application elements are to be installed.</span></span> <span data-ttu-id="930d4-128">Os arquivos reais a serem instalados podem ser compactados no próprio arquivo MSI, agrupados e compactados em "arquivos de gabinete" separados ou armazenados em outro lugar na mídia de instalação como arquivos individuais descompactados.</span><span class="sxs-lookup"><span data-stu-id="930d4-128">The actual files to be installed can be compressed within the MSI file itself, bundled and compressed into separate "cabinet files", or stored elsewhere on the installation media as individual uncompressed files.</span></span> <span data-ttu-id="930d4-129">O arquivo MSI também pode referenciar ações personalizadas implementadas externamente, a fim de permitir ações para as quais o arquivo MSI não permite nativamente.</span><span class="sxs-lookup"><span data-stu-id="930d4-129">The MSI file can also reference externally implemented custom actions, in order to allow for actions for which the MSI file does not natively allow.</span></span>

<span data-ttu-id="930d4-130">Um arquivo MSI pode, opcionalmente, conter uma interface do usuário para orientar o usuário durante o processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="930d4-130">An MSI file can optionally contain a user interface to guide the user through the installation process.</span></span> <span data-ttu-id="930d4-131">Essa interface do usuário é adequada para a maioria dos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="930d4-131">This UI is adequate for most applications.</span></span> <span data-ttu-id="930d4-132">No entanto, ele tem a aparência de um aplicativo normal do Windows, e muitos desenvolvedores de jogos preferem que seu aplicativo de instalação mantenha a aparência do próprio jogo, a fim de fornecer uma experiência de usuário final mais consistente.</span><span class="sxs-lookup"><span data-stu-id="930d4-132">However, it has the look and feel of a regular Windows application, and many game developers prefer to have their setup application maintain the look and feel of the game itself, in order to provide a more consistent end-user experience.</span></span> <span data-ttu-id="930d4-133">Para dar suporte a esse cenário de interface do usuário totalmente personalizado, um aplicativo de instalação pode desativar a interface de usuário interna do Windows Installer e manipular toda a própria interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="930d4-133">To support this fully custom UI scenario, a setup application can turn off Windows Installer's built-in UI, and handle the entire user interface itself.</span></span> <span data-ttu-id="930d4-134">A API de Windows Installer expõe um mecanismo de retorno de chamada para permitir que uma interface do usuário de instalação personalizada seja notificada do progresso da instalação, bem como eventos importantes, como solicitações de alteração de disco.</span><span class="sxs-lookup"><span data-stu-id="930d4-134">The Windows Installer API exposes a callback mechanism to allow a custom setup UI to be notified of the progress of the installation, as well as important events such as disk change requests.</span></span>

<span data-ttu-id="930d4-135">Windows Installer não é uma solução de ponta a ponta para a criação de configurações.</span><span class="sxs-lookup"><span data-stu-id="930d4-135">Windows Installer is not an end-to-end solution for creating setups.</span></span> <span data-ttu-id="930d4-136">É apenas uma API que pode ser usada por um programa de instalação para fazer a instalação real de arquivos, chaves do registro, atalhos da área de trabalho e outros elementos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="930d4-136">It is only an API that can be used by a setup program to do the actual installation of files, registry keys, desktop shortcuts, and other elements of the application.</span></span> <span data-ttu-id="930d4-137">As versões recentes de todas as principais ferramentas de configuração comercial (por exemplo, InstallShield, inteligente e Microsoft Visual Studio) dão suporte a Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="930d4-137">Recent versions of all of the major commercial setup tools (for example, InstallShield, WISE, and Microsoft Visual Studio) support Windows Installer.</span></span> <span data-ttu-id="930d4-138">Essas ferramentas fornecem interfaces de usuário convenientes para criar a configuração para um jogo, mas elas dependem da API de Windows Installer para fazer grande parte da instalação real.</span><span class="sxs-lookup"><span data-stu-id="930d4-138">These tools provide convenient user interfaces for creating the setup for a game, but they rely on the Windows Installer API to do much of the actual installation.</span></span> <span data-ttu-id="930d4-139">Essas ferramentas também podem ser usadas apenas para criar um banco de dados MSI que contém o pacote de instalação, que pode ser instalado a partir de uma interface do usuário de instalação personalizada.</span><span class="sxs-lookup"><span data-stu-id="930d4-139">These tools can also be used just to build an MSI database containing the setup package, which can then be installed from a custom-written setup UI.</span></span> <span data-ttu-id="930d4-140">Como uma alternativa para ferramentas de terceiros, a API de Windows Installer fornece todas as funções necessárias para criar e manipular um banco de dados MSI de forma programática, e o SDK da plataforma Windows inclui uma ferramenta de edição de banco de dados MSI básica, chamada orca.</span><span class="sxs-lookup"><span data-stu-id="930d4-140">As an alternative to third-party tools, the Windows Installer API provides all of the functions necessary for creating and manipulating an MSI database programmatically, and the Windows Platform SDK includes a bare-bones MSI database-editing tool called Orca.</span></span>

## <a name="key-windows-installer-concepts"></a><span data-ttu-id="930d4-141">Conceitos principais do Windows Installer</span><span class="sxs-lookup"><span data-stu-id="930d4-141">Key Windows Installer Concepts</span></span>

<span data-ttu-id="930d4-142">Aqui estão os componentes e recursos Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="930d4-142">Here are the Windows Installer components and features.</span></span>

### <a name="components"></a><span data-ttu-id="930d4-143">Componentes</span><span class="sxs-lookup"><span data-stu-id="930d4-143">Components</span></span>

<span data-ttu-id="930d4-144">Um aplicativo é composto de um ou mais componentes, identificados por uma ID de componente GUID.</span><span class="sxs-lookup"><span data-stu-id="930d4-144">An application is made up of one or more components, identified by a GUID component ID.</span></span> <span data-ttu-id="930d4-145">Um componente é uma unidade atômica; Ele está totalmente instalado ou não está instalado.</span><span class="sxs-lookup"><span data-stu-id="930d4-145">A component is an atomic unit; it is either entirely installed or not installed at all.</span></span> <span data-ttu-id="930d4-146">Um componente pode consistir em um único arquivo, vários arquivos, chaves do registro, atalhos da área de trabalho ou alguma combinação deles.</span><span class="sxs-lookup"><span data-stu-id="930d4-146">A component can consist of a single file, multiple files, registry keys, desktop shortcuts, or some combination thereof.</span></span> <span data-ttu-id="930d4-147">Os recursos (arquivos, etc.) dentro de um componente devem ser exclusivos desse componente; dois componentes não podem conter o mesmo recurso.</span><span class="sxs-lookup"><span data-stu-id="930d4-147">The resources (files, and so on) within a component must be unique to that component-no two components can contain the same resource.</span></span> <span data-ttu-id="930d4-148">Um componente nunca é instalado explicitamente; Ele é instalado apenas como parte de um recurso (consulte a seguir).</span><span class="sxs-lookup"><span data-stu-id="930d4-148">A component is never installed explicitly; it is only installed as part of a feature (see following).</span></span>

### <a name="features"></a><span data-ttu-id="930d4-149">Recursos</span><span class="sxs-lookup"><span data-stu-id="930d4-149">Features</span></span>

<span data-ttu-id="930d4-150">Um recurso é um grupo de componentes, identificado por uma ID de recurso de GUID.</span><span class="sxs-lookup"><span data-stu-id="930d4-150">A feature is a group of components, identified by a GUID feature ID.</span></span> <span data-ttu-id="930d4-151">Ao contrário dos componentes, vários recursos podem conter o mesmo componente.</span><span class="sxs-lookup"><span data-stu-id="930d4-151">Unlike components, multiple features may contain the same component.</span></span> <span data-ttu-id="930d4-152">Um componente compartilhado entre vários recursos será instalado se algum desses recursos estiver instalado e removido somente quando todos os recursos que fazem referência ao componente tiverem sido desinstalados.</span><span class="sxs-lookup"><span data-stu-id="930d4-152">A component shared between multiple features will be installed if any of those features is installed, and removed only when all features that reference the component have been uninstalled.</span></span> <span data-ttu-id="930d4-153">A instalação de um recurso pode ser feita automaticamente como parte da instalação de um produto ou pode ser feita manualmente usando a API [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="930d4-153">Installation of a feature can be done automatically as part of the installation of a product, or it can be done manually using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span>

<span data-ttu-id="930d4-154">Embora alguns jogos tenham vários "recursos" que podem ser instalados de forma independente, o conceito de Windows Installer de um recurso ainda é útil.</span><span class="sxs-lookup"><span data-stu-id="930d4-154">Although few games have multiple "features" that can be installed independently, the Windows Installer concept of a feature is still useful.</span></span> <span data-ttu-id="930d4-155">Como um recurso de Windows Installer não é nada mais do que uma coleção de componentes que podem ser instalados juntos, os jogos podem usar recursos para agrupar todo o conteúdo necessário para um estágio específico do jogo.</span><span class="sxs-lookup"><span data-stu-id="930d4-155">Since a Windows Installer feature is nothing more than a collection of components that can be installed together, games can use features to group together all of the content needed for a particular stage of the game.</span></span> <span data-ttu-id="930d4-156">Por exemplo, um jogo orientado por nível pode definir um recurso por nível, consistindo em todo o conteúdo necessário para esse nível.</span><span class="sxs-lookup"><span data-stu-id="930d4-156">For example, a level-oriented game could define one feature per level, consisting of all of the content required for that level.</span></span> <span data-ttu-id="930d4-157">Isso permitiria que o jogo instalasse o conteúdo um nível por vez no próprio jogo, em vez de instalar todo o conteúdo de todos os níveis durante a instalação inicial.</span><span class="sxs-lookup"><span data-stu-id="930d4-157">This would allow the game to install the content one level at a time from within the game itself, rather than installing all of the content for all of the levels during the initial installation.</span></span>

## <a name="install-states"></a><span data-ttu-id="930d4-158">Estados de instalação</span><span class="sxs-lookup"><span data-stu-id="930d4-158">Install States</span></span>

<span data-ttu-id="930d4-159">Cada componente ou recurso tem um estado de instalação associado, que determina se o componente ou recurso está disponível e, em caso afirmativo, onde os arquivos do componente ou recurso estão instalados.</span><span class="sxs-lookup"><span data-stu-id="930d4-159">Each component or feature has an associated install state, which determines whether the component or feature is available, and if so, where the files for the component or feature are installed.</span></span> <span data-ttu-id="930d4-160">Os Estados de instalação possíveis para um recurso são:</span><span class="sxs-lookup"><span data-stu-id="930d4-160">The possible install states for a feature are:</span></span>

<dl> <dt>

<span data-ttu-id="930d4-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Ausente</span><span class="sxs-lookup"><span data-stu-id="930d4-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Absent</span></span>
</dt> <dd>

<span data-ttu-id="930d4-162">O recurso não está instalado e, portanto, está inacessível.</span><span class="sxs-lookup"><span data-stu-id="930d4-162">The feature is not installed and is therefore inaccessible.</span></span>

</dd> <dt>

<span data-ttu-id="930d4-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Local</span><span class="sxs-lookup"><span data-stu-id="930d4-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Local</span></span>
</dt> <dd>

<span data-ttu-id="930d4-164">O recurso está disponível e é instalado para ser executado do disco rígido local.</span><span class="sxs-lookup"><span data-stu-id="930d4-164">The feature is available and is installed to run from the local hard drive.</span></span>

</dd> <dt>

<span data-ttu-id="930d4-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Original</span><span class="sxs-lookup"><span data-stu-id="930d4-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Source</span></span>
</dt> <dd>

<span data-ttu-id="930d4-166">O recurso está disponível e é instalado para ser executado a partir da mídia de origem original (geralmente um CD ou DVD).</span><span class="sxs-lookup"><span data-stu-id="930d4-166">The feature is available and is installed to run from the original source media (usually a CD or DVD).</span></span>

</dd> <dt>

<span data-ttu-id="930d4-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Anunciados</span><span class="sxs-lookup"><span data-stu-id="930d4-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Advertised</span></span>
</dt> <dd>

<span data-ttu-id="930d4-168">O recurso não está instalado, mas pode ser instalado sob demanda usando a API [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="930d4-168">The feature is not installed, but can be installed on demand using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span> <span data-ttu-id="930d4-169">Quando o recurso está realmente instalado, ele pode ser instalado no estado local ou de origem.</span><span class="sxs-lookup"><span data-stu-id="930d4-169">When the feature is actually installed, it can be installed either to the Local or Source state.</span></span>

</dd> </dl>

<span data-ttu-id="930d4-170">Um componente pode ter qualquer um dos Estados acima, exceto para "anunciado".</span><span class="sxs-lookup"><span data-stu-id="930d4-170">A component can have any of the above states except for "Advertised."</span></span> <span data-ttu-id="930d4-171">Se um componente fizer parte de um recurso anunciado, o componente será exibido como "ausente" até que o recurso seja instalado.</span><span class="sxs-lookup"><span data-stu-id="930d4-171">If a component is part of an advertised feature, the component will appear as "Absent" until the feature is installed.</span></span>

## <a name="install-on-demand"></a><span data-ttu-id="930d4-172">Instalar sob demanda</span><span class="sxs-lookup"><span data-stu-id="930d4-172">Install on Demand</span></span>

<span data-ttu-id="930d4-173">Windows Installer permite que um aplicativo marque recursos como anunciados, o que significa que o recurso ainda não está instalado, mas está disponível para instalação no tempo de execução, se necessário.</span><span class="sxs-lookup"><span data-stu-id="930d4-173">Windows Installer allows an application to mark features as Advertised, meaning that the feature is not yet installed, but is available to install at runtime if it is needed.</span></span> <span data-ttu-id="930d4-174">A instalação de recursos em tempo de execução é conhecida como "instalar sob demanda".</span><span class="sxs-lookup"><span data-stu-id="930d4-174">Installing features at runtime is known as "Install on Demand."</span></span> <span data-ttu-id="930d4-175">Os jogos podem usar a instalação sob demanda para reduzir drasticamente o tempo necessário para a configuração inicial do jogo, adiando a instalação do conteúdo do jogo até que seja necessário em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="930d4-175">Games can use Install on Demand to drastically reduce the time required for the initial game setup by deferring the installation of game content until it is needed at runtime.</span></span> <span data-ttu-id="930d4-176">O atraso necessário para instalar o conteúdo em tempo de execução geralmente pode ser parcial ou completamente ocultado fazendo a instalação sob demanda em um thread em segundo plano, enquanto o usuário está ocupado com o jogo.</span><span class="sxs-lookup"><span data-stu-id="930d4-176">The delay required to install the content at runtime can often be partially or completely hidden by doing the on-demand installation in a background thread, while the user is otherwise occupied with the game.</span></span>

## <a name="custom-user-interface"></a><span data-ttu-id="930d4-177">Interface do usuário personalizada</span><span class="sxs-lookup"><span data-stu-id="930d4-177">Custom User Interface</span></span>

<span data-ttu-id="930d4-178">Embora Windows Installer forneça uma interface do usuário padrão que orienta o usuário por meio da instalação do aplicativo, essa interface é parecida com a de um aplicativo padrão do Windows.</span><span class="sxs-lookup"><span data-stu-id="930d4-178">Although Windows Installer provides a default user interface that guides the user through the installation of the application, this interface looks like that of a standard Windows application.</span></span> <span data-ttu-id="930d4-179">Muitos desenvolvedores de jogos preferem que sua interface do usuário de instalação tenha a mesma aparência que o próprio jogo, para fornecer ao usuário um gosto do ambiance do jogo.</span><span class="sxs-lookup"><span data-stu-id="930d4-179">Many game developers prefer that their installation UI have the same look and feel as the game itself, to provide the user with a taste of the game's ambiance.</span></span> <span data-ttu-id="930d4-180">Para dar suporte a isso, Windows Installer permite que a interface do usuário interna seja completamente desabilitada, permitindo que o desenvolvedor forneça uma interface do usuário totalmente personalizada.</span><span class="sxs-lookup"><span data-stu-id="930d4-180">To support this, Windows Installer allows its built-in user interface to be completely disabled, allowing the developer to provide a completely custom UI.</span></span>

<span data-ttu-id="930d4-181">Primeiro, o programa de instalação personalizada desabilita a interface do usuário interna Windows Installer usando a API [**MsiSetInternalUI**](/windows/desktop/api/msi/nf-msi-msisetinternalui) para definir o nível de interface de usuário como INSTALLUILEVEL \_ None.</span><span class="sxs-lookup"><span data-stu-id="930d4-181">The custom setup program first disables Windows Installer's built-in user interface using the [**MsiSetInternalUI**](/windows/desktop/api/msi/nf-msi-msisetinternalui) API to set the UI level to INSTALLUILEVEL\_NONE.</span></span> <span data-ttu-id="930d4-182">Em seguida, ele chama a API [**MsiSetExternalUI**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) para especificar uma função de retorno de chamada que será chamada durante o processo de instalação para notificar o programa de instalação de eventos-chave durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="930d4-182">It then calls the [**MsiSetExternalUI**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) API to specify a callback function that will be called during the installation process to notify the setup program of key events during the installation.</span></span>

<span data-ttu-id="930d4-183">O processo de instalação real é iniciado chamando a API [**MsiInstallProduct**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) .</span><span class="sxs-lookup"><span data-stu-id="930d4-183">The actual installation process is then started by calling the [**MsiInstallProduct**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) API.</span></span> <span data-ttu-id="930d4-184">Essa API aceita uma cadeia de caracteres de parâmetro que permite que o chamador especifique valores para propriedades nomeadas.</span><span class="sxs-lookup"><span data-stu-id="930d4-184">This API accepts a parameter string that allows the caller to specify values for named properties.</span></span> <span data-ttu-id="930d4-185">Essas propriedades podem ser usadas no próprio banco de dados de instalação para personalizar como o aplicativo será instalado.</span><span class="sxs-lookup"><span data-stu-id="930d4-185">These properties can be used within the installation database itself to customize how the application is to be installed.</span></span> <span data-ttu-id="930d4-186">Essas propriedades podem ser usadas para especificar:</span><span class="sxs-lookup"><span data-stu-id="930d4-186">These properties can be used to specify:</span></span>

-   <span data-ttu-id="930d4-187">O diretório no qual o aplicativo deve ser instalado</span><span class="sxs-lookup"><span data-stu-id="930d4-187">The directory to which the application is to be installed</span></span>
-   <span data-ttu-id="930d4-188">Quais recursos devem ser instalados localmente e que devem ser instalados para serem executados a partir do CD/DVD (por exemplo, para habilitar a escolha entre uma instalação mínima e uma instalação completa)</span><span class="sxs-lookup"><span data-stu-id="930d4-188">Which features are to be installed locally and which are to be installed to run from the CD/DVD (for example, to enable choosing between a minimal install and a full install)</span></span>
-   <span data-ttu-id="930d4-189">Se o aplicativo deve ser instalado para todos os usuários do computador ou apenas para o usuário atual</span><span class="sxs-lookup"><span data-stu-id="930d4-189">Whether the application should be installed for all users of the machine, or for only the current user</span></span>

<span data-ttu-id="930d4-190">Durante a instalação, o programa de instalação usa as mensagens de notificação enviadas para sua função de retorno de chamada para determinar quando atualizar sua interface do usuário do indicador de progresso, quando solicitar que o usuário insira o próximo CD ou quando notificar o utilizador sobre um erro no processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="930d4-190">During the course of the installation, the setup program uses the notification messages sent to its callback function to determine when to update its progress indicator UI, when to prompt the user to insert the next CD, or when to notify the user about an error in the installation process.</span></span>

## <a name="patching"></a><span data-ttu-id="930d4-191">Aplicação de patch</span><span class="sxs-lookup"><span data-stu-id="930d4-191">Patching</span></span>

<span data-ttu-id="930d4-192">Windows Installer permite que os aplicativos instalados sejam corrigidos aplicando um arquivo de patch.</span><span class="sxs-lookup"><span data-stu-id="930d4-192">Windows Installer allows installed applications to be patched by applying a patch file.</span></span> <span data-ttu-id="930d4-193">Um arquivo de patch contém os novos arquivos a serem adicionados pelo patch, os arquivos que são modificados pelo patch e uma lista de alterações a serem feitas no banco de dados de instalação.</span><span class="sxs-lookup"><span data-stu-id="930d4-193">A patch file contains the new files to be added by the patch, the files that are modified by the patch, and a list of changes to make to the installation database.</span></span> <span data-ttu-id="930d4-194">Para conservar o espaço, em vez de armazenar o conteúdo completo de um arquivo alterado pelo patch, o arquivo de patch realmente contém apenas as diferenças entre a versão original do arquivo e a nova versão do arquivo.</span><span class="sxs-lookup"><span data-stu-id="930d4-194">To conserve space, instead of storing the complete contents of a file changed by the patch, the patch file actually contains only the differences between the original version of the file and the new version of the file.</span></span>

<span data-ttu-id="930d4-195">Para criar um patch, você precisa da imagem de instalação para cada uma das versões do aplicativo do qual deseja que o patch seja atualizado, bem como a imagem de instalação para a nova versão atualizada do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="930d4-195">In order to create a patch, you need the setup image for each of the versions of the application that you wish the patch to upgrade from, as well as the setup image for the new, upgraded version of the application.</span></span> <span data-ttu-id="930d4-196">Uma imagem de instalação consiste no banco de dados MSI e em todos os arquivos reais para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="930d4-196">A setup image consists of the MSI database and all of the actual data files for the application.</span></span> <span data-ttu-id="930d4-197">A melhor maneira de criar uma imagem de instalação para uma nova versão do aplicativo é copiar a imagem de instalação da versão anterior do aplicativo e, em seguida, fazer as alterações necessárias para atualizar essa cópia para a versão corrigida.</span><span class="sxs-lookup"><span data-stu-id="930d4-197">The best way to create a setup image for a new version of the application is to copy the setup image from the previous version of the application, and then make any changes necessary to update that copy to the patched version.</span></span>

<span data-ttu-id="930d4-198">Depois de ter todas as imagens de instalação necessárias, você pode criar os patches usando o Msimsp.exe, que é uma ferramenta de criação de patch disponível como parte do SDK da plataforma.</span><span class="sxs-lookup"><span data-stu-id="930d4-198">Once you have all of the necessary setup images, you can create the patches using Msimsp.exe, which is a patch creation tool available as part of the Platform SDK.</span></span> <span data-ttu-id="930d4-199">A ferramenta solicitará os locais de cada uma das imagens de instalação e, em seguida, determinará como representar com eficiência as diferenças entre as versões sucessivas.</span><span class="sxs-lookup"><span data-stu-id="930d4-199">The tool will ask for the locations of each of the setup images, and then determine how to efficiently represent the differences between the successive versions.</span></span> <span data-ttu-id="930d4-200">A saída da ferramenta é o arquivo de patch final (identificado pela extensão MSP).</span><span class="sxs-lookup"><span data-stu-id="930d4-200">The output of the tool is the final patch file (identified by the extension MSP).</span></span> <span data-ttu-id="930d4-201">Para instalar o patch programaticamente, chame a API [**MsiApplyPatch**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) .</span><span class="sxs-lookup"><span data-stu-id="930d4-201">In order to install the patch programmatically, call the [**MsiApplyPatch**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) API.</span></span> <span data-ttu-id="930d4-202">O usuário também pode instalar o patch manualmente clicando duas vezes no arquivo MSP no Explorer.</span><span class="sxs-lookup"><span data-stu-id="930d4-202">The user can also install the patch manually by double-clicking on the MSP file in Explorer.</span></span>

## <a name="other-resources"></a><span data-ttu-id="930d4-203">Outros recursos</span><span class="sxs-lookup"><span data-stu-id="930d4-203">Other Resources</span></span>

-   <span data-ttu-id="930d4-204">Para obter informações detalhadas sobre a API de Windows Installer, consulte [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="930d4-204">For detailed info on the Windows Installer API, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>
-   <span data-ttu-id="930d4-205">Para obter informações sobre as práticas recomendadas para instalação de jogos, consulte [instalação e manutenção de jogos](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span><span class="sxs-lookup"><span data-stu-id="930d4-205">For info on best practices for game installation, see [Installation and Maintenance of Games](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span></span>

 

 