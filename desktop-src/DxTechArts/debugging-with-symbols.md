---
title: Depurando com símbolos
description: Este artigo fornece uma visão geral de alto nível de como usar melhor os símbolos no processo de depuração.
ms.assetid: 7ce0c9c7-485c-8d72-0353-27fd2e369a7c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff63e2404a07a2f0ab5adcb156d83dc989b42fd4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104499095"
---
# <a name="debugging-with-symbols"></a><span data-ttu-id="1125a-103">Depurando com símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-103">Debugging with Symbols</span></span>

<span data-ttu-id="1125a-104">Este artigo fornece uma visão geral de alto nível de como usar melhor os símbolos no processo de depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-104">This article provides a high level overview of how to best use symbols in your debugging process.</span></span> <span data-ttu-id="1125a-105">Ele explica como usar o servidor de símbolos da Microsoft e também como configurar e usar seu próprio servidor de símbolos privado.</span><span class="sxs-lookup"><span data-stu-id="1125a-105">It explains how to use the Microsoft symbol server, and also how to set up and use your own private symbol server.</span></span> <span data-ttu-id="1125a-106">Essas práticas recomendadas podem ajudar a aumentar sua eficácia e a capacidade de depurar problemas, mesmo em casos em que todos os símbolos e arquivos executáveis relacionados a um problema não estejam localizados no seu computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-106">These best practices can help increase your effectiveness and ability to debug issues, even in cases where all the symbols and executable files that are related to a problem are not located on your computer.</span></span>

-   [<span data-ttu-id="1125a-107">Símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-107">Symbols</span></span>](#debugging-with-symbols)
-   [<span data-ttu-id="1125a-108">Usando símbolos para depuração</span><span class="sxs-lookup"><span data-stu-id="1125a-108">Using Symbols for Debugging</span></span>](#using-symbols-for-debugging)
-   [<span data-ttu-id="1125a-109">Obtendo os símbolos necessários</span><span class="sxs-lookup"><span data-stu-id="1125a-109">Getting the Symbols You Need</span></span>](#getting-the-symbols-you-need)
    -   [<span data-ttu-id="1125a-110">Verificar se um determinado arquivo DLL ou. exe e PDB na mesma pasta correspondem</span><span class="sxs-lookup"><span data-stu-id="1125a-110">Check if a given DLL or .exe file and PDB in the same folder match</span></span>](#check-if-a-given-dll-or-exe-file-and-pdb-in-the-same-folder-match)
    -   [<span data-ttu-id="1125a-111">Verificar se todos os arquivos dll e executáveis em um conjunto de pastas têm PDBs correspondentes</span><span class="sxs-lookup"><span data-stu-id="1125a-111">Check if all the DLLs and executable files in a set of folders have matching PDBs</span></span>](#check-if-all-the-dlls-and-executable-files-in-a-set-of-folders-have-matching-pdbs)
    -   [<span data-ttu-id="1125a-112">Como o Symchk funciona</span><span class="sxs-lookup"><span data-stu-id="1125a-112">How symchk Works</span></span>](#how-symchk-works)
-   [<span data-ttu-id="1125a-113">Servidores de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-113">Symbol Servers</span></span>](#symbol-servers)
-   [<span data-ttu-id="1125a-114">Usando o servidor de símbolos da Microsoft</span><span class="sxs-lookup"><span data-stu-id="1125a-114">Using the Microsoft Symbol Server</span></span>](#using-the-microsoft-symbol-server)
-   [<span data-ttu-id="1125a-115">Obtendo símbolos manualmente</span><span class="sxs-lookup"><span data-stu-id="1125a-115">Getting Symbols Manually</span></span>](#getting-symbols-manually)
-   [<span data-ttu-id="1125a-116">Configurando um servidor de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-116">Setting Up a Symbol Server</span></span>](#setting-up-a-symbol-server)
-   [<span data-ttu-id="1125a-117">Adicionando símbolos a um servidor de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-117">Adding Symbols to a Symbol Server</span></span>](#adding-symbols-to-a-symbol-server)
-   [<span data-ttu-id="1125a-118">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="1125a-118">Best Practices</span></span>](#best-practices)

## <a name="symbols"></a><span data-ttu-id="1125a-119">Símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-119">Symbols</span></span>

<span data-ttu-id="1125a-120">Vários tipos diferentes de símbolos estão disponíveis para depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-120">A number of different types of symbols are available for debugging.</span></span> <span data-ttu-id="1125a-121">Eles incluem símbolos CodeView, COFF, DBG, SYM, PDB e até mesmo símbolos de exportação que são gerados de uma tabela de exportação de arquivos binários.</span><span class="sxs-lookup"><span data-stu-id="1125a-121">They include CodeView symbols, COFF, DBG, SYM, PDB, and even export symbols that are generated from a binary files export table.</span></span> <span data-ttu-id="1125a-122">Este white paper aborda apenas VS.NET e símbolos de formato PDB, pois eles são o formato preferencial mais recente.</span><span class="sxs-lookup"><span data-stu-id="1125a-122">This white paper discusses only VS.NET and the PDB format symbols, because they are the most recent, preferred format.</span></span> <span data-ttu-id="1125a-123">Eles são gerados por padrão para projetos que são compilados usando o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1125a-123">They are generated by default for projects that are compiled by using Visual Studio.</span></span>

<span data-ttu-id="1125a-124">A geração de arquivos PDB para executáveis de versão não afeta nenhuma otimização ou altera significativamente o tamanho dos arquivos gerados.</span><span class="sxs-lookup"><span data-stu-id="1125a-124">Generating PDB files for release executables does not affect any optimizations, or significantly alter the size of the generated files.</span></span> <span data-ttu-id="1125a-125">Normalmente, a única diferença é o caminho e o nome de arquivo do arquivo PDB é inserido no executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-125">Typically, the only difference is the path, and the file name of the PDB file is embedded in the executable.</span></span> <span data-ttu-id="1125a-126">Por esse motivo, você sempre deve produzir arquivos PDB, mesmo que não queira enviá-los com o executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-126">For this reason, you should always produce PDB files, even if you don't want to ship them with the executable.</span></span>

<span data-ttu-id="1125a-127">Os arquivos PDB são gerados se um projeto é criado usando a opção de compilador **/Zi** ou **/Zi** (produzir informações PDB), junto com a opção de vinculador de **/debug** (gerar informações de depuração).</span><span class="sxs-lookup"><span data-stu-id="1125a-127">PDB files are generated if a project is built by using the **/Zi** or **/ZI** (Produce PDB Information) compiler switch, together with the **/DEBUG** (Generate Debug Info) linker switch.</span></span> <span data-ttu-id="1125a-128">Os arquivos PDB gerados pelo compilador são combinados e gravados em um único arquivo PDB que é colocado no mesmo diretório que o executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-128">The compiler-generated PDB files are combined and written into a single PDB file that is placed in the same directory as the executable.</span></span>

<span data-ttu-id="1125a-129">Por padrão, os arquivos PDB contêm as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="1125a-129">By default, PDB files contain the following information:</span></span>

-   <span data-ttu-id="1125a-130">Símbolos públicos (normalmente todas as funções, variáveis estáticas e globais)</span><span class="sxs-lookup"><span data-stu-id="1125a-130">Public symbols (typically all functions, static and global variables)</span></span>
-   <span data-ttu-id="1125a-131">Uma lista de arquivos de objeto que são responsáveis por seções de código no executável</span><span class="sxs-lookup"><span data-stu-id="1125a-131">A list of object files that are responsible for sections of code in the executable</span></span>
-   <span data-ttu-id="1125a-132">Informações de otimização do ponteiro do quadro (FPO)</span><span class="sxs-lookup"><span data-stu-id="1125a-132">Frame pointer optimization information (FPO)</span></span>
-   <span data-ttu-id="1125a-133">Informações de nome e tipo para variáveis locais e estruturas de dados</span><span class="sxs-lookup"><span data-stu-id="1125a-133">Name and type information for local variables and data structures</span></span>
-   <span data-ttu-id="1125a-134">Informações de número de arquivo e linha de origem</span><span class="sxs-lookup"><span data-stu-id="1125a-134">Source file and line number information</span></span>

<span data-ttu-id="1125a-135">Se você estiver preocupado com as pessoas que usam as informações do arquivo PDB para ajudá-las a fazer a engenharia reversa do seu executável, também poderá gerar arquivos PDB removidos usando a opção de vinculador **/PDBSTRIPPED: filename** .</span><span class="sxs-lookup"><span data-stu-id="1125a-135">If you are concerned about people using the PDB file information to help them reverse engineer your executable, you can also generate stripped PDB files, by using the **/PDBSTRIPPED:filename** linker option.</span></span> <span data-ttu-id="1125a-136">Se você tiver arquivos PDB existentes dos quais gostaria de remover informações particulares, poderá usar uma ferramenta chamada pdbcopy, que faz parte das ferramentas de depuração para Windows.</span><span class="sxs-lookup"><span data-stu-id="1125a-136">If you have existing PDB files that you would like to strip private information from, you can use a tool called pdbcopy, which is part of the debugging tools for Windows.</span></span>

<span data-ttu-id="1125a-137">Por padrão, os arquivos PDB removidos contêm as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="1125a-137">By default, stripped PDB files contain the following information:</span></span>

-   <span data-ttu-id="1125a-138">Símbolos públicos (normalmente apenas funções não estáticas e variáveis globais)</span><span class="sxs-lookup"><span data-stu-id="1125a-138">Public symbols (typically only non-static functions and global variables)</span></span>
-   <span data-ttu-id="1125a-139">Uma lista de arquivos de objeto que são responsáveis por seções de código no executável</span><span class="sxs-lookup"><span data-stu-id="1125a-139">A list of object files that are responsible for sections of code in the executable</span></span>
-   <span data-ttu-id="1125a-140">Informações de otimização do ponteiro do quadro (FPO)</span><span class="sxs-lookup"><span data-stu-id="1125a-140">Frame pointer optimization information (FPO)</span></span>

<span data-ttu-id="1125a-141">Essas são as informações mínimas necessárias para permitir a depuração confiável.</span><span class="sxs-lookup"><span data-stu-id="1125a-141">This is the minimum information that is required to allow reliable debugging.</span></span> <span data-ttu-id="1125a-142">As informações mínimas também dificultam a obtenção de qualquer informação adicional sobre o código-fonte original.</span><span class="sxs-lookup"><span data-stu-id="1125a-142">Minimum information also makes it difficult to obtain any additional information about your original source code.</span></span> <span data-ttu-id="1125a-143">Como um arquivo PDB removido e um arquivo PDB regular são gerados, você pode fornecer a versão removida aos usuários que podem precisar de recursos de depuração limitados, mas manter a confidencialidade completa.</span><span class="sxs-lookup"><span data-stu-id="1125a-143">Because both a stripped PDB file and a regular PDB file are generated, you can provide the stripped version to users who may need limited debugging abilities, but keep the full PDBs confidential.</span></span> <span data-ttu-id="1125a-144">Observe que **/PDBSTRIPPED** gera um segundo arquivo PDB menor, portanto, certifique-se de usar o arquivo PDB correto ao gerar compilações para distribuir em grande escala.</span><span class="sxs-lookup"><span data-stu-id="1125a-144">Note that **/PDBSTRIPPED** generates a second, smaller PDB file, so make sure that you use the correct PDB file when you generate builds to distribute broadly.</span></span> <span data-ttu-id="1125a-145">Para um projeto típico, um PDB regular pode ter alguns megabytes de tamanho, mas uma versão removida do PDB pode ter apenas algumas centenas de kilobytes.</span><span class="sxs-lookup"><span data-stu-id="1125a-145">For a typical project, a regular PDB may be a few megabytes in size, but a stripped version of the PDB may be only a few hundred kilobytes.</span></span>

## <a name="using-symbols-for-debugging"></a><span data-ttu-id="1125a-146">Usando símbolos para depuração</span><span class="sxs-lookup"><span data-stu-id="1125a-146">Using Symbols for Debugging</span></span>

<span data-ttu-id="1125a-147">Quando você estiver depurando um aplicativo que falhou, o depurador tentará mostrar as funções na pilha que levaram à falha.</span><span class="sxs-lookup"><span data-stu-id="1125a-147">When you are debugging an application that has crashed, the debugger attempts to show you the functions on the stack that led up to the crash.</span></span> <span data-ttu-id="1125a-148">Sem um arquivo PDB, o depurador não pode resolver os nomes de função, seus parâmetros ou quaisquer variáveis locais que estejam armazenadas na pilha.</span><span class="sxs-lookup"><span data-stu-id="1125a-148">Without a PDB file, the debugger can not resolve the function names, their parameters, or any local variables that are stored on the stack.</span></span> <span data-ttu-id="1125a-149">Se você depurar executáveis de 32 bits, há situações em que você não pode até mesmo obter rastreamentos de pilha confiáveis sem símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-149">If you debug 32-bit executables, there are situations where you cannot even get reliable stack traces without symbols.</span></span> <span data-ttu-id="1125a-150">Às vezes, é possível examinar os valores brutos na pilha e solucionar quais valores podem retornar endereços, mas eles podem ser facilmente confundidos com referências de função ou dados.</span><span class="sxs-lookup"><span data-stu-id="1125a-150">Sometimes it's possible to look at the raw values on the stack, and work out which values might be return addresses, but these can be easily confused with function references or data.</span></span>

<span data-ttu-id="1125a-151">Se as funções na pilha atual foram compiladas usando a otimização omitir ponteiros de quadro (**/Oy**) e, se os símbolos não estiverem presentes, o depurador não poderá determinar de forma confiável qual função chamou a função atual.</span><span class="sxs-lookup"><span data-stu-id="1125a-151">If functions on the current stack were compiled by using the Omit Frame Pointers (**/Oy**) optimization, and if symbols are not present, the debugger cannot reliably determine which function called the current function.</span></span> <span data-ttu-id="1125a-152">Isso ocorre porque, sem as informações de FPO (otimização de ponteiro de quadro) que PDBs contêm, o depurador não pode contar com o EBP (registro de ponteiro de quadro) para apontar para o ponteiro de quadro anterior salvo e no endereço de retorno da função pai.</span><span class="sxs-lookup"><span data-stu-id="1125a-152">This is because without the Frame Pointer Optimization (FPO) information that PDBs contain, the debugger cannot rely on the frame pointer register (EBP) to point at the saved previous frame pointer and at the return address of the parent function.</span></span> <span data-ttu-id="1125a-153">Em vez disso, ele é adivinhado.</span><span class="sxs-lookup"><span data-stu-id="1125a-153">Instead, it guesses.</span></span> <span data-ttu-id="1125a-154">Às vezes, ele fica certo.</span><span class="sxs-lookup"><span data-stu-id="1125a-154">Sometimes it gets it right.</span></span> <span data-ttu-id="1125a-155">No entanto, ele geralmente fica errado, o que pode ser enganoso.</span><span class="sxs-lookup"><span data-stu-id="1125a-155">However, it often gets it wrong, which can be misleading.</span></span> <span data-ttu-id="1125a-156">Se você vir um aviso sobre símbolos ausentes ou nenhum símbolo carregado, como no exemplo a seguir, não confie na pilha a partir desse ponto abaixo.</span><span class="sxs-lookup"><span data-stu-id="1125a-156">If you see a warning about missing symbols, or no symbols loaded, as in the following example, do not trust the stack from that point down.</span></span>

``` syntax
SWPerfTest.exe!TextFunction(... ...)    Line 59    C++
d3dx9d.dll!008829b5()
[Frames below may be incorrect and/or missing, no symbols loaded for d3dx9d.dll]
SWPerfTest.exe!main(int argc=, const char * * argv=)  Line 328 + 0x12 bytes     C++
SWPerfTest.exe!__mainCRTStartup() Line 716 + 0x17 bytes    C
kernel32.dll!@BaseThreadInitThunk@12() + 0x12 bytes
ntdll.dll!__RtlUserThreadStart@8() + 0x27 bytes
```

<span data-ttu-id="1125a-157">Em muitos casos, é possível continuar a depuração sem símbolos, pois o problema está em um local que tem símbolos precisos e você não precisa examinar as funções mais adiante na pilha de chamadas.</span><span class="sxs-lookup"><span data-stu-id="1125a-157">In many cases, it's possible to continue debugging without symbols, because the problem is in a location that has accurate symbols, and you don't need to look at functions further down the call stack.</span></span> <span data-ttu-id="1125a-158">Mesmo que uma biblioteca que esteja em sua pilha de chamadas não tenha PDBs disponíveis, desde que elas tenham sido compiladas com ponteiros de quadro, o depurador deverá ser capaz de adivinhar corretamente nas funções pai.</span><span class="sxs-lookup"><span data-stu-id="1125a-158">Even if a library that is in your call stack doesn't have PDBs available, as long as they were compiled with frame pointers, the debugger should be able to guess correctly at the parent functions.</span></span> <span data-ttu-id="1125a-159">A partir do Windows XP Service Pack 2, todos os arquivos executáveis e DLL do Windows são compilados com o FPO desabilitado, pois torna a depuração mais precisa.</span><span class="sxs-lookup"><span data-stu-id="1125a-159">Starting with Windows XP Service Pack 2, all Windows DLL and executable files are compiled with FPO disabled, because it makes debugging more accurate.</span></span> <span data-ttu-id="1125a-160">Desabilitar o FPO também permite que os profileres de amostragem orientem a pilha durante o tempo de execução, com impacto mínimo no desempenho.</span><span class="sxs-lookup"><span data-stu-id="1125a-160">Disabling FPO also allows sampling profilers to walk the stack during run-time, with minimal performance impact.</span></span> <span data-ttu-id="1125a-161">Em versões do Windows anteriores ao Windows XP SP2, todos os binários do sistema operacional exigem arquivos de símbolo correspondentes que contenham informações FPO para permitir depuração e criação de perfil precisas.</span><span class="sxs-lookup"><span data-stu-id="1125a-161">On versions of Windows before Windows XP SP2, all operating system binaries require matching symbol files that contain FPO information, to allow accurate debugging and profiling.</span></span>

<span data-ttu-id="1125a-162">Se você depurar executáveis nativos de 64 bits, não precisará de arquivos de símbolo para produzir rastreamentos de pilha válidos, pois os compiladores e sistemas operacionais x64 são projetados para não exigir.</span><span class="sxs-lookup"><span data-stu-id="1125a-162">If you debug 64-bit native executables, you do not need symbol files to produce valid stack traces, because x64 operating systems and compilers are designed not to require them.</span></span> <span data-ttu-id="1125a-163">No entanto, você ainda precisa de arquivos de símbolo para recuperar os nomes de função, parâmetros de chamada e variáveis locais.</span><span class="sxs-lookup"><span data-stu-id="1125a-163">However, you still need symbol files to retrieve the function names, call parameters and local variables.</span></span>

<span data-ttu-id="1125a-164">No entanto, alguns casos são particularmente difíceis de depurar sem símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-164">However, some cases are particularly difficult to debug without symbols.</span></span> <span data-ttu-id="1125a-165">Por exemplo, se você depurar um programa para o qual criou um arquivo PDB e se falhar em um retorno de chamada de uma função em uma DLL para a qual você não tem símbolos, não será possível ver qual função causou o retorno de chamada, porque você não poderá decodificar a pilha.</span><span class="sxs-lookup"><span data-stu-id="1125a-165">For example, if you debug a program for which you built a PDB file, and if you crash in a callback from a function in a DLL that you don't have symbols for, you will not be able to see which function caused the callback, because you will not be able to decode the stack.</span></span> <span data-ttu-id="1125a-166">Isso geralmente ocorre em bibliotecas de terceiros, se PDBs não forem fornecidos ou em componentes antigos do sistema operacional, se PDBs não estiverem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="1125a-166">This frequently happens in third-party libraries, if PDBs are not provided, or in old operating system components, if PDBs are not available.</span></span> <span data-ttu-id="1125a-167">Os retornos de chamada geralmente ocorrem durante a passagem de mensagens, a enumeração, a alocação de memória ou o tratamento de exceções.</span><span class="sxs-lookup"><span data-stu-id="1125a-167">Callbacks often happen during message passing, enumeration, memory allocation, or exception handling.</span></span> <span data-ttu-id="1125a-168">A depuração dessas funções sem uma pilha precisa pode ser frustrante.</span><span class="sxs-lookup"><span data-stu-id="1125a-168">Debugging these functions without an accurate stack can be frustrating.</span></span>

<span data-ttu-id="1125a-169">Para depurar com confiança os minidespejos gerados em um computador diferente ou que falharam no código que você não possui, é importante poder acessar todos os símbolos e binários para os executáveis que são referenciados no mini-despejo.</span><span class="sxs-lookup"><span data-stu-id="1125a-169">To reliably debug mini-dumps that are generated on a different computer, or that crashed in code that you do not own, it's important to be able to access all the symbols and binaries for the executables that are referenced in the mini-dump.</span></span> <span data-ttu-id="1125a-170">Se os símbolos e os binários estiverem disponíveis em um servidor de símbolos, eles serão obtidos automaticamente pelo depurador.</span><span class="sxs-lookup"><span data-stu-id="1125a-170">If the symbols and binaries are available from a symbol server, they are automatically obtained by the debugger.</span></span> <span data-ttu-id="1125a-171">Para obter mais informações sobre minidespejos, consulte o white paper de [análise de despejo](/windows/desktop/DxTechArts/crash-dump-analysis) de memória.</span><span class="sxs-lookup"><span data-stu-id="1125a-171">For more information on mini-dumps, see the [Crash Dump Analysis](/windows/desktop/DxTechArts/crash-dump-analysis) white paper.</span></span>

## <a name="getting-the-symbols-you-need"></a><span data-ttu-id="1125a-172">Obtendo os símbolos necessários</span><span class="sxs-lookup"><span data-stu-id="1125a-172">Getting the Symbols You Need</span></span>

<span data-ttu-id="1125a-173">O Visual Studio e outros depuradores da Microsoft, como o WinDbg, normalmente são configurados para funcionar apenas se você estiver criando um aplicativo e Depurando-o em seu próprio computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-173">Visual Studio and other Microsoft debuggers, such as WinDbg, are typically set up to just work if you are building an application and debugging it on your own computer.</span></span> <span data-ttu-id="1125a-174">Se você precisar dar ao seu executável para outra pessoa, se você tiver várias versões de uma DLL ou um arquivo. exe em seu computador, ou se quiser depurar com precisão um aplicativo que usa o Windows ou outras bibliotecas, como o DirectX, você precisa entender como os depuradores localizam e carregam símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-174">If you need to give your executable to someone else, if you have multiple versions of a DLL or an .exe file on your computer, or if you want to accurately debug an application that uses Windows or other libraries, such as DirectX, you need to understand how debuggers find and load symbols.</span></span> <span data-ttu-id="1125a-175">O depurador usa o caminho de pesquisa de símbolo especificado pelo usuário — que é encontrado em opções \\ Depurando \\ símbolos no Visual Studio — ou na \_ \_ variável de \_ ambiente caminho de símbolo NT.</span><span class="sxs-lookup"><span data-stu-id="1125a-175">The debugger uses either the symbol search path that is specified by the user—which is found in Options\\Debugging\\Symbols in Visual Studio—or the \_NT\_SYMBOL\_PATH environment variable.</span></span> <span data-ttu-id="1125a-176">Normalmente, o depurador procura PDBs correspondentes nos seguintes locais:</span><span class="sxs-lookup"><span data-stu-id="1125a-176">Typically, the debugger searches for matching PDBs in the following locations:</span></span>

-   <span data-ttu-id="1125a-177">No local especificado dentro da DLL ou do arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-177">The location that is specified inside the DLL or the executable file.</span></span>

    <span data-ttu-id="1125a-178">Se você tiver criado uma DLL ou um arquivo executável em seu computador, por padrão, o vinculador colocará o caminho completo e o nome do arquivo PDB dentro da DLL ou do arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-178">If you have built a DLL or an executable file on your computer, by default the linker places the full path and file name of the associated PDB file inside the DLL or the executable file.</span></span> <span data-ttu-id="1125a-179">Quando você depura, o depurador verifica primeiro se o arquivo de símbolo existe no local especificado dentro da DLL ou no arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-179">When you debug, the debugger first checks to see if the symbol file exists in the location that is specified inside the DLL or the executable file.</span></span> <span data-ttu-id="1125a-180">Isso é útil, pois você sempre tem símbolos disponíveis para o código que você compilou em seu computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-180">This is helpful, because you always have symbols available for code that you have compiled on your computer.</span></span>

-   <span data-ttu-id="1125a-181">PDBs que podem estar presentes na mesma pasta que a DLL ou o arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-181">PDBs that may be present in the same folder as the DLL or executable file.</span></span>
-   <span data-ttu-id="1125a-182">Em algumas pastas de cache de símbolo locais.</span><span class="sxs-lookup"><span data-stu-id="1125a-182">Any local symbol cache folders.</span></span>
-   <span data-ttu-id="1125a-183">Qualquer servidor de símbolos de compartilhamento de arquivos de rede local.</span><span class="sxs-lookup"><span data-stu-id="1125a-183">Any local network file share symbol servers.</span></span>
-   <span data-ttu-id="1125a-184">Qualquer servidor de símbolos da Internet, como o Microsoft Symbol Server.</span><span class="sxs-lookup"><span data-stu-id="1125a-184">Any Internet symbol servers, such as the Microsoft symbol server.</span></span>

<span data-ttu-id="1125a-185">Para ter certeza de que você tem todos os PDBs necessários para a depuração precisa, instale as ferramentas de depuração para Windows.</span><span class="sxs-lookup"><span data-stu-id="1125a-185">To make sure that you have all the PDBs that you need for accurate debugging, install the debugging tools for Windows.</span></span> <span data-ttu-id="1125a-186">As versões 32 e 64 bits podem ser encontradas em [ferramentas de depuração para Windows](/windows-hardware/drivers/debugger/).</span><span class="sxs-lookup"><span data-stu-id="1125a-186">The 32 and 64 bit versions can be found at [Debugging Tools for Windows](/windows-hardware/drivers/debugger/).</span></span>

<span data-ttu-id="1125a-187">Uma ferramenta útil instalada com esse pacote é symchk.exe.</span><span class="sxs-lookup"><span data-stu-id="1125a-187">A useful tool that is installed with this package is symchk.exe.</span></span> <span data-ttu-id="1125a-188">Ele pode ajudar a identificar símbolos ausentes ou incorretos.</span><span class="sxs-lookup"><span data-stu-id="1125a-188">It can help to identify missing or incorrect symbols.</span></span> <span data-ttu-id="1125a-189">Essa ferramenta tem um grande número de opções de linha de comando potenciais.</span><span class="sxs-lookup"><span data-stu-id="1125a-189">This tool has a large number of potential command line options.</span></span> <span data-ttu-id="1125a-190">Aqui estão dois dos mais úteis e comumente usados.</span><span class="sxs-lookup"><span data-stu-id="1125a-190">Here are two of the more useful and commonly used ones.</span></span>

### <a name="check-if-a-given-dll-or-exe-file-and-pdb-in-the-same-folder-match"></a><span data-ttu-id="1125a-191">Verificar se um determinado arquivo DLL ou. exe e PDB na mesma pasta correspondem</span><span class="sxs-lookup"><span data-stu-id="1125a-191">Check if a given DLL or .exe file and PDB in the same folder match</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" testing.dll /s

SYMCHK: FAILED files = 0
SYMCHK: PASSED + IGNORED files = 1
```

<span data-ttu-id="1125a-192">A opção **/s** diz ao **Symchk** para procurar símbolos somente na pasta atual e não examinar nenhum servidor de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-192">The **/s** option tells **symchk** to look for symbols only in the current folder, and not to look in any symbol servers.</span></span>

### <a name="check-if-all-the-dlls-and-executable-files-in-a-set-of-folders-have-matching-pdbs"></a><span data-ttu-id="1125a-193">Verificar se todos os arquivos dll e executáveis em um conjunto de pastas têm PDBs correspondentes</span><span class="sxs-lookup"><span data-stu-id="1125a-193">Check if all the DLLs and executable files in a set of folders have matching PDBs</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" *.* /r
```

<span data-ttu-id="1125a-194">A opção **/r** define **Symchk** para percorrer recursivamente as pastas, para verificar se todos os arquivos executáveis têm PDBs correspondentes.</span><span class="sxs-lookup"><span data-stu-id="1125a-194">The **/r** option sets **symchk** to recursively traverse through folders, to check that all the executable files have matching PDBs.</span></span> <span data-ttu-id="1125a-195">Sem a opção **/s** , **Symchk** usa o \_ caminho do símbolo NT atual \_ \_ para procurar por símbolos em qualquer servidor privado ou local ou nos servidores de símbolo da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-195">Without the **/s** option, **symchk** uses the current \_NT\_SYMBOL\_PATH to search for symbols on any private or local server, or on the Microsoft symbol servers.</span></span> <span data-ttu-id="1125a-196">A ferramenta **Symchk** pesquisa apenas os símbolos para arquivos executáveis (. exe,. dll e semelhantes).</span><span class="sxs-lookup"><span data-stu-id="1125a-196">The **symchk** tool searches only for symbols for executable files (.exe, .dll, and similar).</span></span> <span data-ttu-id="1125a-197">Você não pode usar curingas para procurar por símbolos para arquivos não executáveis.</span><span class="sxs-lookup"><span data-stu-id="1125a-197">You cannot use wild cards search for symbols for non-executable files.</span></span>

### <a name="how-symchk-works"></a><span data-ttu-id="1125a-198">Como o Symchk funciona</span><span class="sxs-lookup"><span data-stu-id="1125a-198">How symchk Works</span></span>

<span data-ttu-id="1125a-199">Quando o vinculador gera arquivos. dll, executáveis e PDB, ele armazena GUIDs idênticos em cada arquivo.</span><span class="sxs-lookup"><span data-stu-id="1125a-199">When the linker generates .dll, executable, and PDB files, it stores identical GUIDs in each file.</span></span> <span data-ttu-id="1125a-200">O GUID é usado pelas ferramentas para determinar se um determinado arquivo PDB corresponde a uma DLL ou a um arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-200">The GUID is used by tools to determine if a given PDB file matches a DLL or an executable file.</span></span> <span data-ttu-id="1125a-201">Se você alterar uma DLL ou um arquivo executável — usando um editor de recursos ou uma codificação de proteção de cópia ou alterando suas informações de versão, o GUID será atualizado e o depurador não poderá carregar o arquivo PDB.</span><span class="sxs-lookup"><span data-stu-id="1125a-201">If you alter a DLL or an executable file—by using a resource editor or copy protection encoding, or by altering its version information—the GUID is updated and the debugger cannot load the PDB file.</span></span> <span data-ttu-id="1125a-202">Por esse motivo, é muito importante evitar manipular a DLL ou o arquivo executável depois que ele é criado pelo vinculador.</span><span class="sxs-lookup"><span data-stu-id="1125a-202">For this reason, it's very important to avoid manipulating the DLL or executable file after it is created by the linker.</span></span>

<span data-ttu-id="1125a-203">Você também pode usar o utilitário DUMPBIN que vem com VS.NET para mostrar os caminhos de símbolo que são pesquisados e ver se são encontrados arquivos de símbolo que correspondam a um determinado DLL ou arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-203">You can also use the DUMPBIN utility that comes with VS.NET to show the symbol paths that are searched, and to see if symbol files are found that match a given DLL or executable file.</span></span> <span data-ttu-id="1125a-204">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="1125a-204">For example:</span></span>

``` syntax
DUMPBIN /PDBPATH:VERBOSE filename.exe
```

## <a name="symbol-servers"></a><span data-ttu-id="1125a-205">Servidores de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-205">Symbol Servers</span></span>

<span data-ttu-id="1125a-206">Um servidor de símbolos é um repositório para várias versões de arquivos executáveis e de símbolo.</span><span class="sxs-lookup"><span data-stu-id="1125a-206">A symbol server is a repository for multiple versions of executable and symbol files.</span></span> <span data-ttu-id="1125a-207">Ele contém os próprios arquivos de símbolo ou os ponteiros para os arquivos de símbolo associados.</span><span class="sxs-lookup"><span data-stu-id="1125a-207">It contains either the symbol files themselves, or pointers to the associated symbol files.</span></span> <span data-ttu-id="1125a-208">Os depuradores entendem como usar servidores de símbolos e podem usá-los para pesquisar símbolos ausentes ou desconhecidos.</span><span class="sxs-lookup"><span data-stu-id="1125a-208">Debuggers understand how to use symbol servers, and can use them to search for missing or unknown symbols.</span></span>

<span data-ttu-id="1125a-209">DLL e arquivos executáveis também estão disponíveis no servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-209">DLL and executable files are also available from the Microsoft symbol server.</span></span> <span data-ttu-id="1125a-210">Isso torna possível depurar falhas e examinar o código de arquivos do sistema operacional que podem não existir em seu computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-210">This makes it possible to debug crashes and examine code for operating system files that may not exist on your machine.</span></span> <span data-ttu-id="1125a-211">Se um depurador encontrar um arquivo executável ou uma DLL que não exista no sistema que você está usando para depuração, ele solicitará automaticamente os símbolos e uma cópia do arquivo binário dos servidores de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-211">If a debugger encounters an executable file or a DLL that does not exist on the system that you are using for debugging, it automatically requests both the symbols and a copy of the binary file from the Microsoft symbol servers.</span></span> <span data-ttu-id="1125a-212">Isso é útil se você estiver depurando um componente que tem muitas versões, por exemplo, msvcrt.dll — e você precisa examinar o código para uma versão que não existe em seu computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-212">This is helpful if you are debugging a component that has many versions—for example, msvcrt.dll—and you need to examine the code for a version that does not exist on your computer.</span></span> <span data-ttu-id="1125a-213">Isso também ajuda a depurar minidespejos gerados em um sistema operacional diferente do sistema que você está usando para depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-213">This also helps debug mini-dumps that are generated on an operating system that is different from the system that you are using for debugging.</span></span>

<span data-ttu-id="1125a-214">A Microsoft publica todos os arquivos PDB de todos os sistemas operacionais e outros componentes redistribuídos, como o SDK do DirectX, em seu servidor de símbolos acessível externamente.</span><span class="sxs-lookup"><span data-stu-id="1125a-214">Microsoft publishes all the PDB files for all operating systems and other redistributed components, such as the DirectX SDK, on its externally accessible symbol server.</span></span> <span data-ttu-id="1125a-215">Isso facilita a depuração de um aplicativo que usa esses arquivos DLL ou executáveis.</span><span class="sxs-lookup"><span data-stu-id="1125a-215">This makes it easy to debug an application that uses these DLL or executable files.</span></span> <span data-ttu-id="1125a-216">Você pode usar o servidor de símbolos da Microsoft para resolver símbolos, junto com quaisquer símbolos locais para componentes que foram criados em seu computador.</span><span class="sxs-lookup"><span data-stu-id="1125a-216">You can use the Microsoft symbol server to resolve symbols, together with any local symbols for components that were built on your computer.</span></span>

<span data-ttu-id="1125a-217">Você pode configurar seu computador para usar o servidor de símbolos da Microsoft, que fornece acesso a todos os arquivos de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-217">You can set up your computer to use the Microsoft symbol server, which gives you access to all Microsoft symbol files.</span></span> <span data-ttu-id="1125a-218">Você também pode configurar um servidor de símbolos privado para sua empresa, equipe ou rede, que pode ser usado para armazenar várias versões mais antigas de um projeto no qual você está trabalhando ou para fornecer um cache local para os símbolos que você usa do servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-218">You can also set up a private symbol server for your company, team or network, which can be used to store multiple older versions of a project you are working on, or to provide a local cache for the symbols that you use from the Microsoft symbol server.</span></span>

<span data-ttu-id="1125a-219">Para usar um servidor de símbolos, especifique o caminho de pesquisa em uma variável de ambiente chamada \_ NT \_ Symbol \_ Path.</span><span class="sxs-lookup"><span data-stu-id="1125a-219">To use a symbol server, specify the search path in an environment variable that is called \_NT\_SYMBOL\_PATH.</span></span> <span data-ttu-id="1125a-220">Os depuradores e as ferramentas modernas, como o WinDbg, o NTSD ou o Visual Studio, usam automaticamente esse caminho para procurar por símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-220">Debuggers and modern tools, such as WinDbg, NTSD or Visual Studio, automatically use this path to search for symbols.</span></span>

<span data-ttu-id="1125a-221">Quando um depurador procura por símbolos, ele primeiro pesquisa localmente.</span><span class="sxs-lookup"><span data-stu-id="1125a-221">When a debugger searches for symbols, it first searches locally.</span></span> <span data-ttu-id="1125a-222">Em seguida, ele examina os servidores de símbolo.</span><span class="sxs-lookup"><span data-stu-id="1125a-222">Then it looks on symbol servers.</span></span> <span data-ttu-id="1125a-223">Quando ele encontra um símbolo correspondente, ele transfere o arquivo de símbolo para o cache local.</span><span class="sxs-lookup"><span data-stu-id="1125a-223">When it finds a matching symbol, it transfers the symbol file to your local cache.</span></span> <span data-ttu-id="1125a-224">Os símbolos de um arquivo executável ou DLL típico variam de 1 a 100 MB de tamanho.</span><span class="sxs-lookup"><span data-stu-id="1125a-224">The symbols for a typical DLL or executable file range from 1 to 100 MB in size.</span></span> <span data-ttu-id="1125a-225">Portanto, se você estiver depurando um processo que inclui muitas DLLs, pode levar algum tempo para resolver todos os símbolos e transferi-los para um cache local.</span><span class="sxs-lookup"><span data-stu-id="1125a-225">Therefore, if you are debugging a process that includes many DLLs, it can take some time to resolve all the symbols and transfer them to a local cache.</span></span>

## <a name="using-the-microsoft-symbol-server"></a><span data-ttu-id="1125a-226">Usando o servidor de símbolos da Microsoft</span><span class="sxs-lookup"><span data-stu-id="1125a-226">Using the Microsoft Symbol Server</span></span>

<span data-ttu-id="1125a-227">O servidor de símbolos da Microsoft permite que você obtenha todos os símbolos mais recentes, incluindo símbolos para arquivos atualizados ou corrigidos.</span><span class="sxs-lookup"><span data-stu-id="1125a-227">The Microsoft symbol server allows you to obtain all the latest symbols, including symbols for patched or updated files.</span></span> <span data-ttu-id="1125a-228">O servidor de símbolos da Microsoft está disponível em <https://msdl.microsoft.com/download/symbols> .</span><span class="sxs-lookup"><span data-stu-id="1125a-228">The Microsoft symbol server is available at <https://msdl.microsoft.com/download/symbols>.</span></span>

<span data-ttu-id="1125a-229">Você pode acessar o servidor de símbolos de uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="1125a-229">You can access the symbol server in one of the following ways:</span></span>

-   <span data-ttu-id="1125a-230">Insira o endereço do servidor diretamente.</span><span class="sxs-lookup"><span data-stu-id="1125a-230">Enter the server address directly.</span></span> <span data-ttu-id="1125a-231">No Visual Studio, no menu **ferramentas** , escolha **Opções**, escolha **depuração** e, em seguida, escolha **símbolos**.</span><span class="sxs-lookup"><span data-stu-id="1125a-231">In Visual Studio, from the **Tools** menu, choose **Options**, then choose **Debugging**, and then choose **Symbols**.</span></span>
-   <span data-ttu-id="1125a-232">Use a variável de \_ ambiente \_ caminho do símbolo NT \_ .</span><span class="sxs-lookup"><span data-stu-id="1125a-232">Use the environment variable \_NT\_SYMBOL\_PATH.</span></span> <span data-ttu-id="1125a-233">Este método é recomendável.</span><span class="sxs-lookup"><span data-stu-id="1125a-233">We recommend this method.</span></span>

    <span data-ttu-id="1125a-234">Isso é usado por todas as ferramentas de depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-234">This is used by all debugging tools.</span></span> <span data-ttu-id="1125a-235">Ele também é usado pelo Visual Studio e é lido e decodificado quando o Visual Studio é aberto.</span><span class="sxs-lookup"><span data-stu-id="1125a-235">It is also used by Visual Studio, and is read and decoded when Visual Studio opens.</span></span> <span data-ttu-id="1125a-236">Portanto, se você alterá-lo, precisará reiniciar o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1125a-236">Therefore, if you change it, you need to restart Visual Studio.</span></span>

    <span data-ttu-id="1125a-237">Essa variável de ambiente permite que você especifique vários servidores de símbolo — por exemplo, um servidor de símbolos privado interno.</span><span class="sxs-lookup"><span data-stu-id="1125a-237">This environment variable allows you to specify multiple symbol servers—for example, an internal private symbol server.</span></span> <span data-ttu-id="1125a-238">Ele também permite que você especifique um diretório de cache local para armazenar PDBs para todos os símbolos que você procura dos servidores de símbolos, tanto internamente quanto pela Internet.</span><span class="sxs-lookup"><span data-stu-id="1125a-238">It also allows you to specify a local cache directory to store PDBs for all symbols that you look up from symbol servers, both internally and over the Internet.</span></span>

<span data-ttu-id="1125a-239">A sintaxe para a \_ \_ variável de caminho de símbolo NT \_ é:</span><span class="sxs-lookup"><span data-stu-id="1125a-239">The syntax for the \_NT\_SYMBOL\_PATH variable is:</span></span>

``` syntax
srv*[local cache]*[private symbol server]*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="1125a-240">Substitua \[ o cache local \] pelo nome de um diretório no computador em que você deseja armazenar um cache de quaisquer símbolos usados, por exemplo,% SystemRoot% \\ Symbols ou c: \\ Symbols.</span><span class="sxs-lookup"><span data-stu-id="1125a-240">Replace \[local cache\] with the name of a directory on your computer where you want to store a cache of any symbols used—for example, %SYSTEMROOT%\\Symbols, or c:\\symbols.</span></span>

<span data-ttu-id="1125a-241">O \[ servidor de símbolos privado \] é opcional.</span><span class="sxs-lookup"><span data-stu-id="1125a-241">The \[private symbol server\] is optional.</span></span> <span data-ttu-id="1125a-242">Ele pode apontar para um servidor de símbolos que está localizado em sua rede ou pode apontar para um servidor de símbolos compartilhado por sua equipe, grupo de produtos ou empresa.</span><span class="sxs-lookup"><span data-stu-id="1125a-242">It can point to a symbol server that is located on your network, or it can point to a symbol server that is shared by your team, product group, or company.</span></span>

<span data-ttu-id="1125a-243">Para usar apenas o servidor de símbolos da Microsoft junto com um cache local de símbolos, para acelerar o acesso pela Internet, use a seguinte configuração para o \_ \_ caminho do símbolo NT \_ :</span><span class="sxs-lookup"><span data-stu-id="1125a-243">To use only the Microsoft symbol server together with a local cache of symbols, to speed up access over the Internet, use the following setting for \_NT\_SYMBOL\_PATH:</span></span>

``` syntax
srv*c:\symbols*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="1125a-244">Você pode encontrar outras opções para o \_ \_ caminho do símbolo NT \_ no arquivo de ajuda que é instalado com o pacote Microsoft Debugging Tools for Windows.</span><span class="sxs-lookup"><span data-stu-id="1125a-244">You can find other options for the \_NT\_SYMBOL\_PATH in the help file that is installed with the Microsoft Debugging Tools for Windows package.</span></span>

<span data-ttu-id="1125a-245">Os executáveis sem símbolos podem aumentar o tempo necessário para iniciar um depurador se você usar um servidor de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-245">Executables without symbols can increase the time it takes to launch a debugger if you use a symbol server.</span></span> <span data-ttu-id="1125a-246">Isso ocorre porque o depurador consulta o servidor de símbolos sempre que tenta carregar o executável.</span><span class="sxs-lookup"><span data-stu-id="1125a-246">This is because the debugger queries the symbol server each time it tries to load the executable.</span></span> <span data-ttu-id="1125a-247">Por esse motivo, é melhor solicitar sempre símbolos para todos os componentes.</span><span class="sxs-lookup"><span data-stu-id="1125a-247">For this reason, it is best to always request symbols for all components.</span></span>

<span data-ttu-id="1125a-248">Talvez não seja possível solicitar símbolos para cada componente — por exemplo, os drivers de vídeo podem ter DLLs em seu espaço de processo e os arquivos PDB necessários estão disponíveis no servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-248">It may not be possible to request symbols for every component—for example, video drivers may have DLLs in your process space, and the required PDB files are available on the Microsoft symbol server.</span></span> <span data-ttu-id="1125a-249">Nesse caso, há um pequeno atraso ao iniciar uma sessão de depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-249">In this case, there is a small delay when you start a debugging session.</span></span>

<span data-ttu-id="1125a-250">Para evitar mesmo esse pequeno atraso, você pode executar o depurador uma vez para armazenar em cache todos os símbolos localmente do servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-250">To avoid even this small delay, you can run the debugger once, to cache all the symbols locally from the Microsoft symbol server.</span></span> <span data-ttu-id="1125a-251">Em seguida, modifique o caminho do seu \_ \_ símbolo NT \_ para remover o servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-251">Then, modify your \_NT\_SYMBOL\_PATH to remove the Microsoft symbol server.</span></span> <span data-ttu-id="1125a-252">A menos que os arquivos executáveis sejam alterados, o verifica se os arquivos executáveis que não têm símbolos não exigirão uma consulta pela Internet, porque você tem cópias em cache locais de todos os símbolos necessários do servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-252">Unless the executable files change, checks for executable files that do not have symbols will not require a query over the Internet, because you have local cached copies of all the symbols that you need from the Microsoft symbol server.</span></span>

## <a name="getting-symbols-manually"></a><span data-ttu-id="1125a-253">Obtendo símbolos manualmente</span><span class="sxs-lookup"><span data-stu-id="1125a-253">Getting Symbols Manually</span></span>

<span data-ttu-id="1125a-254">Se você tiver configurado o depurador corretamente, ele carregará automaticamente todos os símbolos que ele exigir do seu cache local ou de um servidor de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-254">If you have set up your debugger correctly, it automatically loads any symbols that it requires from your local cache or from a symbol server.</span></span> <span data-ttu-id="1125a-255">Se você quiser obter os símbolos para apenas um único executável, ou para uma pasta de executáveis, você pode usar **Symchk**.</span><span class="sxs-lookup"><span data-stu-id="1125a-255">If you would like to get the symbols for just a single executable, or for a folder of executables, you can use **symchk**.</span></span> <span data-ttu-id="1125a-256">Por exemplo, se você quiser baixar os símbolos para o arquivo de \_30.dll d3dx9 na pasta de sistema do Windows para o diretório atual, poderá usar o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="1125a-256">For example, if you want to download the symbols for the d3dx9\_30.dll file in the Windows System folder into the current directory, you can use the following command:</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symchk" c:\Windows\System32\d3dx9_30.dll /oc \.
```

<span data-ttu-id="1125a-257">A ferramenta **Symchk** tem muitos outros usos.</span><span class="sxs-lookup"><span data-stu-id="1125a-257">The **symchk** tool has many other uses.</span></span> <span data-ttu-id="1125a-258">Para obter detalhes, consulte **Symchk/?** ou procure na documentação das ferramentas de depuração da Microsoft para Windows.</span><span class="sxs-lookup"><span data-stu-id="1125a-258">For details, see **symchk /?**, or look in the Microsoft Debugging Tools for Windows documentation.</span></span>

## <a name="setting-up-a-symbol-server"></a><span data-ttu-id="1125a-259">Configurando um servidor de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-259">Setting Up a Symbol Server</span></span>

<span data-ttu-id="1125a-260">A configuração de um servidor de símbolos é muito simples.</span><span class="sxs-lookup"><span data-stu-id="1125a-260">Setting up a symbol server is very simple.</span></span> <span data-ttu-id="1125a-261">Isso é útil pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="1125a-261">It is useful for the following reasons:</span></span>

-   <span data-ttu-id="1125a-262">Para economizar largura de banda ou para acelerar a resolução de símbolos para sua empresa, equipe ou produto.</span><span class="sxs-lookup"><span data-stu-id="1125a-262">To save bandwidth, or to speed up symbol resolution for your company, team or product.</span></span> <span data-ttu-id="1125a-263">Um servidor de símbolos interno em um compartilhamento de arquivos local em sua rede armazena em cache todas as referências a servidores de símbolos externos, como o servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-263">An internal symbol server on a local file share on your network caches any references to external symbol servers, such as the Microsoft symbol server.</span></span> <span data-ttu-id="1125a-264">Um servidor de símbolos local ou interno pode ser acessado rapidamente por muitas pessoas ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="1125a-264">A local or internal symbol server can be accessed quickly by many people at the same time.</span></span> <span data-ttu-id="1125a-265">Portanto, ele economiza largura de banda e a latência que as solicitações de símbolo duplicadas podem criar.</span><span class="sxs-lookup"><span data-stu-id="1125a-265">Therefore, it saves bandwidth and the latency that duplicate symbol requests can create.</span></span>
-   <span data-ttu-id="1125a-266">Para armazenar símbolos para compilações antigas, versões ou versões externas do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1125a-266">To store symbols for old builds, versions or external releases of your application.</span></span> <span data-ttu-id="1125a-267">Ao armazenar os símbolos para essas compilações em um servidor de símbolos que você pode acessar facilmente, você pode depurar falhas e problemas nessas compilações em qualquer computador que tenha um depurador e uma conexão com o servidor de símbolo local.</span><span class="sxs-lookup"><span data-stu-id="1125a-267">By storing the symbols for these builds on a symbol server that you can easily access, you can debug crashes and problems in these builds on any computer that has a debugger and a connection to the local symbol server.</span></span> <span data-ttu-id="1125a-268">Isso é particularmente útil se você depurar minidespejos que são gerados por executáveis que você não criou, ou seja, compilações que foram geradas por outro programador ou por um computador de compilação.</span><span class="sxs-lookup"><span data-stu-id="1125a-268">This is particularly useful if you debug mini-dumps that are generated by executables that you did not build yourself—that is, builds that were generated by another programmer or by a build machine.</span></span> <span data-ttu-id="1125a-269">Se os símbolos para essas compilações forem armazenados no seu servidor de símbolos, você terá uma depuração confiável e precisa.</span><span class="sxs-lookup"><span data-stu-id="1125a-269">If the symbols for these builds are stored on your symbol server, you will have reliable and accurate debugging.</span></span>
-   <span data-ttu-id="1125a-270">Para manter os símbolos atualizados.</span><span class="sxs-lookup"><span data-stu-id="1125a-270">To keep symbols up to date.</span></span> <span data-ttu-id="1125a-271">Quando os componentes são atualizados, como OS componentes do sistema operacional que são modificados por Windows Update ou pelo SDK do DirectX, você ainda pode depurar usando todos os símbolos mais recentes.</span><span class="sxs-lookup"><span data-stu-id="1125a-271">When components are updated, such as OS components that are modified by Windows Update or by the DirectX SDK, you can still debug by using all the latest symbols.</span></span>

<span data-ttu-id="1125a-272">Configurar um servidor de símbolos em sua própria rede local é tão simples quanto criar um compartilhamento de arquivos em um servidor e dar aos usuários permissões completas para acessar o compartilhamento, para criar arquivos e pastas.</span><span class="sxs-lookup"><span data-stu-id="1125a-272">Setting up a symbol server on your own local network is as simple as creating a file share on a server and giving users full permissions to access the share, to create files and folders.</span></span> <span data-ttu-id="1125a-273">Esse compartilhamento deve ser criado em um sistema operacional de servidor, como o Windows Server 2003, para que o número de pessoas que podem acessar o compartilhamento simultaneamente não seja limitado.</span><span class="sxs-lookup"><span data-stu-id="1125a-273">This share should be created on a server operating system, such as Windows Server 2003, so that the number of people who can access the share simultaneously is not limited.</span></span>

<span data-ttu-id="1125a-274">Por exemplo, se você configurar um compartilhamento de arquivos em \\ \\ \\ símbolos mainserver, os membros de sua equipe definirão o \_ caminho do símbolo do NT \_ \_ como o seguinte:</span><span class="sxs-lookup"><span data-stu-id="1125a-274">For example, if you set up a file share on \\\\mainserver\\symbols, then the members of your team set the \_NT\_SYMBOL\_PATH to the following:</span></span>

``` syntax
Srv*c:\symbols*\\mainserver\symbols*https://msdl.microsoft.com/download/symbols
```

<span data-ttu-id="1125a-275">À medida que os símbolos são recuperados, os arquivos e as pastas são exibidos no \\ \\ \\ diretório compartilhado mainserver Symbols, bem como em caches individuais, no diretório c: \\ Symbols.</span><span class="sxs-lookup"><span data-stu-id="1125a-275">As symbols are retrieved, files and folders appear in the \\\\mainserver\\symbols shared directory, as well as in individual caches, in the c:\\symbols directory.</span></span>

<span data-ttu-id="1125a-276">Normalmente, isso é tudo que está envolvido na configuração e no uso do seu próprio servidor de símbolos ou do servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-276">This is typically all that is involved in setting up and using either your own symbol server, or the Microsoft symbol server.</span></span>

## <a name="adding-symbols-to-a-symbol-server"></a><span data-ttu-id="1125a-277">Adicionando símbolos a um servidor de símbolos</span><span class="sxs-lookup"><span data-stu-id="1125a-277">Adding Symbols to a Symbol Server</span></span>

<span data-ttu-id="1125a-278">Para adicionar, excluir ou editar arquivos em um compartilhamento de servidor de símbolos, use a ferramenta symstore.exe.</span><span class="sxs-lookup"><span data-stu-id="1125a-278">To add, delete or edit files on a symbol server share, use the symstore.exe tool.</span></span> <span data-ttu-id="1125a-279">Essa ferramenta faz parte do pacote das ferramentas de depuração para Windows da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-279">This tool is part of the Microsoft Debugging Tools for Windows package.</span></span> <span data-ttu-id="1125a-280">A documentação completa sobre servidores de símbolos, a ferramenta SymStore e os símbolos de indexação está incluída no pacote ferramentas de depuração para Windows.</span><span class="sxs-lookup"><span data-stu-id="1125a-280">Full documentation on symbol servers, the symstore tool, and indexing symbols is included in the Debugging Tools for Windows package.</span></span>

<span data-ttu-id="1125a-281">Talvez você queira adicionar símbolos diretamente ao seu próprio servidor de símbolos, como parte de um processo de compilação, ou disponibilizar os símbolos para toda a equipe para bibliotecas ou ferramentas de terceiros.</span><span class="sxs-lookup"><span data-stu-id="1125a-281">You may want to add symbols directly to your own symbol server, as part of a build process, or to make symbols available to your whole team for third-party libraries or tools.</span></span> <span data-ttu-id="1125a-282">O processo de adicionar um símbolo a um compartilhamento de arquivos de servidor de símbolos é chamado de indexação de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-282">The process of adding a symbol to a symbol server file share is called indexing symbols.</span></span> <span data-ttu-id="1125a-283">Há duas maneiras comuns de indexar símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-283">There are two common ways to index symbols.</span></span> <span data-ttu-id="1125a-284">Um arquivo de símbolo pode ser copiado para o servidor de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-284">A symbol file can be copied to the symbol server.</span></span> <span data-ttu-id="1125a-285">Ou, um ponteiro para o local do símbolo pode ser copiado para o servidor de símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-285">Or, a pointer to the location of the symbol can be copied to the symbol server.</span></span> <span data-ttu-id="1125a-286">Se você tiver uma pasta de arquivo morto que contém suas compilações antigas, talvez queira indexar ponteiros para os arquivos PDB que já estão no compartilhamento, em vez de duplicar os símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-286">If you have an archive folder that contains your old builds, you may want to index pointers to the PDB files that are already on the share, instead of duplicating symbols.</span></span> <span data-ttu-id="1125a-287">Como os símbolos podem ser, às vezes, dezenas de megabytes de tamanho, é uma boa ideia planejar com antecedência quanto espaço você pode precisar para arquivar todas as compilações do seu projeto durante o desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="1125a-287">Because symbols can sometimes be tens of megabytes in size, it's a good idea to plan ahead for how much space you may require to archive all the builds of your project throughout development.</span></span> <span data-ttu-id="1125a-288">Se você indexar apenas ponteiros para símbolos, poderá ter problemas se remover compilações antigas ou alterar o nome de um compartilhamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="1125a-288">If you index only pointers to symbols, you may have problems if you remove old builds, or change the name of a file share.</span></span>

<span data-ttu-id="1125a-289">Por exemplo, para indexar recursivamente todos os símbolos em c: \\ dxsym os \\ \\ símbolos extras que você obteve do SDK do DirectX de outubro de 2006 em um compartilhamento de arquivos do servidor de símbolos chamado \\ \\ mainserver \\ Symbols, você pode usar o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="1125a-289">For example, to index recursively all the symbols in c:\\dxsym\\Extras\\Symbols that you obtained from the October 2006 DirectX SDK onto a symbol server file share called \\\\mainserver\\symbols, you can use the following command:</span></span>

``` syntax
"c:\Program Files\Debugging Tools for Windows\symstore" add /f "C:\dxsym\Extras\Symbols\*.pdb"
/s \\mainserver\symbols /t "October 2006 DirectX SDK " /r
```

<span data-ttu-id="1125a-290">O parâmetro **/t "Comment"** é usado para adicionar uma descrição à transação que adicionou os símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-290">The **/t "comment"** parameter is used to add a description to the transaction that added the symbols.</span></span> <span data-ttu-id="1125a-291">Isso pode ser útil ao executar tarefas administrativas nos símbolos.</span><span class="sxs-lookup"><span data-stu-id="1125a-291">This can be useful when performing administrative tasks on the symbols.</span></span>

## <a name="best-practices"></a><span data-ttu-id="1125a-292">Práticas Recomendadas</span><span class="sxs-lookup"><span data-stu-id="1125a-292">Best Practices</span></span>

-   <span data-ttu-id="1125a-293">Configure seu próprio compartilhamento de arquivos de servidor de símbolos para sua equipe, empresa ou produto.</span><span class="sxs-lookup"><span data-stu-id="1125a-293">Set up your own symbol server file share for your team, company, or product.</span></span>
-   <span data-ttu-id="1125a-294">Configure \_ \_ \_ o caminho do símbolo do NT para apontar para um cache local, para um servidor de símbolos privado e para o servidor de símbolos da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1125a-294">Set up \_NT\_SYMBOL\_PATH to point to a local cache, to a private symbol server, and to the Microsoft symbol server.</span></span>
-   <span data-ttu-id="1125a-295">Se um depurador não puder carregar símbolos para um componente que você está Depurando, entre em contato com o proprietário do componente para solicitar símbolos — pelo menos um PDB removido.</span><span class="sxs-lookup"><span data-stu-id="1125a-295">If a debugger cannot load symbols for a component you are debugging, contact the owner of the component to request symbols—at least a stripped PDB.</span></span>
-   <span data-ttu-id="1125a-296">Configure um sistema de compilação automatizado para indexar símbolos no seu servidor de símbolos privado para cada compilação produzida.</span><span class="sxs-lookup"><span data-stu-id="1125a-296">Set up an automated build system to index symbols on your private symbol server for each build that is produced.</span></span> <span data-ttu-id="1125a-297">Certifique-se de que as compilações distribuídas sejam as compilações geradas por esse processo.</span><span class="sxs-lookup"><span data-stu-id="1125a-297">Make sure that the builds that you distribute are the builds that are generated by this process.</span></span> <span data-ttu-id="1125a-298">Isso garante que os símbolos estejam sempre disponíveis para problemas de depuração.</span><span class="sxs-lookup"><span data-stu-id="1125a-298">This ensures that symbols are always available to debug problems.</span></span>
-   <span data-ttu-id="1125a-299">Configure um servidor de símbolos para permitir que os depuradores acessem o código-fonte de um módulo específico diretamente de um sistema de controle do código-fonte com base em uma fonte Visual segura ou Perforce.</span><span class="sxs-lookup"><span data-stu-id="1125a-299">Set up a symbol server to allow debuggers to access the source code for a specific module directly from a Visual Source Safe or Perforce based source control system.</span></span> <span data-ttu-id="1125a-300">Se as informações e os símbolos do arquivo de origem de uma versão lançada de um jogo forem indexados, os desenvolvedores que têm acesso ao servidor de símbolos podem ter depuração de nível de origem completa de problemas relatados, sem manter os ambientes de compilação ou versões antigas dos arquivos de origem em seus computadores de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="1125a-300">If the source file information and symbols for a released version of a game are indexed, developers who have access to your symbol server can have full source level debugging of reported issues, without keeping build environments or old versions of source files on their development computers.</span></span> <span data-ttu-id="1125a-301">Para configurar o servidor de símbolos para permitir a indexação de informações do arquivo de origem, consulte a documentação do servidor de origem.</span><span class="sxs-lookup"><span data-stu-id="1125a-301">To set up your symbol server to allow indexing of source file information, see source server documentation.</span></span>

 

 