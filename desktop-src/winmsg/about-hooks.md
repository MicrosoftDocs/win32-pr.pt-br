---
description: Este tópico discute como os ganchos devem ser usados.
ms.assetid: 9ced0ac4-e602-425f-b954-6af9c741699a
title: Visão geral de ganchos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 36c5d89f111604418d1dc3ea9a4ebce6fe0a8124
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105749163"
---
# <a name="hooks-overview"></a><span data-ttu-id="8e7a7-103">Visão geral de ganchos</span><span class="sxs-lookup"><span data-stu-id="8e7a7-103">Hooks Overview</span></span>

<span data-ttu-id="8e7a7-104">Um *gancho* é um mecanismo pelo qual um aplicativo pode interceptar eventos, como mensagens, ações do mouse e pressionamentos de teclas.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-104">A *hook* is a mechanism by which an application can intercept events, such as messages, mouse actions, and keystrokes.</span></span> <span data-ttu-id="8e7a7-105">Uma função que intercepta um determinado tipo de evento é conhecida como um *procedimento de gancho*.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-105">A function that intercepts a particular type of event is known as a *hook procedure*.</span></span> <span data-ttu-id="8e7a7-106">Um procedimento de gancho pode agir em cada evento que recebe e, em seguida, modificar ou descartar o evento.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-106">A hook procedure can act on each event it receives, and then modify or discard the event.</span></span>

<span data-ttu-id="8e7a7-107">Veja a seguir alguns exemplos de uso para ganchos:</span><span class="sxs-lookup"><span data-stu-id="8e7a7-107">The following some example uses for hooks:</span></span>

-   <span data-ttu-id="8e7a7-108">Monitorar mensagens para fins de depuração</span><span class="sxs-lookup"><span data-stu-id="8e7a7-108">Monitor messages for debugging purposes</span></span>
-   <span data-ttu-id="8e7a7-109">Fornecer suporte para gravação e reprodução de macros</span><span class="sxs-lookup"><span data-stu-id="8e7a7-109">Provide support for recording and playback of macros</span></span>
-   <span data-ttu-id="8e7a7-110">Fornecer suporte para uma tecla de ajuda (F1)</span><span class="sxs-lookup"><span data-stu-id="8e7a7-110">Provide support for a help key (F1)</span></span>
-   <span data-ttu-id="8e7a7-111">Simular entrada de mouse e teclado</span><span class="sxs-lookup"><span data-stu-id="8e7a7-111">Simulate mouse and keyboard input</span></span>
-   <span data-ttu-id="8e7a7-112">Implementar um aplicativo de treinamento baseado em computador (CBT)</span><span class="sxs-lookup"><span data-stu-id="8e7a7-112">Implement a computer-based training (CBT) application</span></span>

> [!Note]  
> <span data-ttu-id="8e7a7-113">Os ganchos tendem a diminuir o desempenho do sistema porque aumentam a quantidade de processamento que o sistema deve executar para cada mensagem.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-113">Hooks tend to slow down the system because they increase the amount of processing the system must perform for each message.</span></span> <span data-ttu-id="8e7a7-114">Você deve instalar um gancho somente quando necessário e removê-lo assim que possível.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-114">You should install a hook only when necessary, and remove it as soon as possible.</span></span>

 

<span data-ttu-id="8e7a7-115">Esta seção discute o seguinte:</span><span class="sxs-lookup"><span data-stu-id="8e7a7-115">This section discusses the following:</span></span>

-   [<span data-ttu-id="8e7a7-116">Cadeias de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-116">Hook Chains</span></span>](#hook-chains)
-   [<span data-ttu-id="8e7a7-117">Procedimentos de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-117">Hook Procedures</span></span>](#hook-procedures)
-   [<span data-ttu-id="8e7a7-118">Tipos de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-118">Hook Types</span></span>](#hook-types)
    -   [<span data-ttu-id="8e7a7-119">QU \_ CALLWNDPROC e qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="8e7a7-119">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
    -   [<span data-ttu-id="8e7a7-120">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="8e7a7-120">WH\_CBT</span></span>](#wh_cbt)
    -   [<span data-ttu-id="8e7a7-121">Depurar do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-121">WH\_DEBUG</span></span>](#wh_debug)
    -   [<span data-ttu-id="8e7a7-122">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-122">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
    -   [<span data-ttu-id="8e7a7-123">QU \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-123">WH\_GETMESSAGE</span></span>](#wh_getmessage)
    -   [<span data-ttu-id="8e7a7-124">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="8e7a7-124">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
    -   [<span data-ttu-id="8e7a7-125">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="8e7a7-125">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
    -   [<span data-ttu-id="8e7a7-126">teclado do qu \_ \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-126">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
    -   [<span data-ttu-id="8e7a7-127">teclado do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-127">WH\_KEYBOARD</span></span>](#wh_keyboard)
    -   [<span data-ttu-id="8e7a7-128">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-128">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
    -   [<span data-ttu-id="8e7a7-129">\_mouse do qu</span><span class="sxs-lookup"><span data-stu-id="8e7a7-129">WH\_MOUSE</span></span>](#wh_mouse)
    -   [<span data-ttu-id="8e7a7-130">QU \_ MSGFILTER e qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="8e7a7-130">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
    -   [<span data-ttu-id="8e7a7-131">Shell do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-131">WH\_SHELL</span></span>](#wh_shell)

## <a name="hook-chains"></a><span data-ttu-id="8e7a7-132">Cadeias de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-132">Hook Chains</span></span>

<span data-ttu-id="8e7a7-133">O sistema dá suporte a vários tipos diferentes de ganchos; cada tipo fornece acesso a um aspecto diferente de seu mecanismo de manipulação de mensagens.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-133">The system supports many different types of hooks; each type provides access to a different aspect of its message-handling mechanism.</span></span> <span data-ttu-id="8e7a7-134">Por exemplo, um aplicativo pode usar o gancho do The [qu \_ mouse](#wh_mouse) para monitorar o tráfego da mensagem para mensagens do mouse.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-134">For example, an application can use the [WH\_MOUSE](#wh_mouse) hook to monitor the message traffic for mouse messages.</span></span>

<span data-ttu-id="8e7a7-135">O sistema mantém uma cadeia de ganchos separada para cada tipo de gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-135">The system maintains a separate hook chain for each type of hook.</span></span> <span data-ttu-id="8e7a7-136">Uma *cadeia de gancho* é uma lista de ponteiros para funções de retorno de chamada especiais definidas por aplicativo chamadas de *procedimentos de gancho*.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-136">A *hook chain* is a list of pointers to special, application-defined callback functions called *hook procedures*.</span></span> <span data-ttu-id="8e7a7-137">Quando ocorre uma mensagem associada a um determinado tipo de gancho, o sistema passa a mensagem para cada procedimento de gancho referenciado na cadeia de gancho, uma após a outra.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-137">When a message occurs that is associated with a particular type of hook, the system passes the message to each hook procedure referenced in the hook chain, one after the other.</span></span> <span data-ttu-id="8e7a7-138">A ação que um procedimento de gancho pode tomar depende do tipo de gancho envolvido.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-138">The action a hook procedure can take depends on the type of hook involved.</span></span> <span data-ttu-id="8e7a7-139">Os procedimentos de gancho para alguns tipos de ganchos só podem monitorar mensagens; outras pessoas podem modificar mensagens ou interromper seu progresso por meio da cadeia, impedindo que elas atinjam o próximo procedimento de gancho ou a janela de destino.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-139">The hook procedures for some types of hooks can only monitor messages; others can modify messages or stop their progress through the chain, preventing them from reaching the next hook procedure or the destination window.</span></span>

## <a name="hook-procedures"></a><span data-ttu-id="8e7a7-140">Procedimentos de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-140">Hook Procedures</span></span>

<span data-ttu-id="8e7a7-141">Para aproveitar um determinado tipo de gancho, o desenvolvedor fornece um procedimento de gancho e usa a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) para instalá-lo na cadeia associada ao gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-141">To take advantage of a particular type of hook, the developer provides a hook procedure and uses the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function to install it into the chain associated with the hook.</span></span> <span data-ttu-id="8e7a7-142">Um procedimento de gancho deve ter a seguinte sintaxe:</span><span class="sxs-lookup"><span data-stu-id="8e7a7-142">A hook procedure must have the following syntax:</span></span>

``` syntax
LRESULT CALLBACK HookProc(
  int nCode, 
  WPARAM wParam, 
  LPARAM lParam
)
{
   // process event
   ...

   return CallNextHookEx(NULL, nCode, wParam, lParam);
}
```

<span data-ttu-id="8e7a7-143">*HookProc* é um espaço reservado para um nome definido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-143">*HookProc* is a placeholder for an application-defined name.</span></span>

<span data-ttu-id="8e7a7-144">O parâmetro *nCode* é um código de gancho que o procedimento de gancho usa para determinar a ação a ser executada.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-144">The *nCode* parameter is a hook code that the hook procedure uses to determine the action to perform.</span></span> <span data-ttu-id="8e7a7-145">O valor do código do gancho depende do tipo do gancho; cada tipo tem seu próprio conjunto característico de códigos de gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-145">The value of the hook code depends on the type of the hook; each type has its own characteristic set of hook codes.</span></span> <span data-ttu-id="8e7a7-146">Os valores dos parâmetros *wParam* e *lParam* dependem do código do gancho, mas normalmente contêm informações sobre uma mensagem que foi enviada ou postada.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-146">The values of the *wParam* and *lParam* parameters depend on the hook code, but they typically contain information about a message that was sent or posted.</span></span>

<span data-ttu-id="8e7a7-147">A função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) sempre instala um procedimento de gancho no início de uma cadeia de ganchos.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-147">The [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function always installs a hook procedure at the beginning of a hook chain.</span></span> <span data-ttu-id="8e7a7-148">Quando ocorre um evento que é monitorado por um determinado tipo de gancho, o sistema chama o procedimento no início da cadeia de ganchos associada ao gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-148">When an event occurs that is monitored by a particular type of hook, the system calls the procedure at the beginning of the hook chain associated with the hook.</span></span> <span data-ttu-id="8e7a7-149">Cada procedimento de gancho na cadeia determina se o evento deve ser passado para o próximo procedimento.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-149">Each hook procedure in the chain determines whether to pass the event to the next procedure.</span></span> <span data-ttu-id="8e7a7-150">Um procedimento de gancho passa um evento para o próximo procedimento chamando a função [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-150">A hook procedure passes an event to the next procedure by calling the [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) function.</span></span>

<span data-ttu-id="8e7a7-151">Observe que os procedimentos de gancho para alguns tipos de ganchos só podem monitorar mensagens.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-151">Note that the hook procedures for some types of hooks can only monitor messages.</span></span> <span data-ttu-id="8e7a7-152">o sistema passa mensagens para cada procedimento de gancho, independentemente de um procedimento específico chamar [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-152">the system passes messages to each hook procedure, regardless of whether a particular procedure calls [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span></span>

<span data-ttu-id="8e7a7-153">Um *gancho global* monitora mensagens de todos os threads na mesma área de trabalho que o thread de chamada.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-153">A *global hook* monitors messages for all threads in the same desktop as the calling thread.</span></span> <span data-ttu-id="8e7a7-154">Um *gancho específico de thread* monitora mensagens somente para um thread individual.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-154">A *thread-specific hook* monitors messages for only an individual thread.</span></span> <span data-ttu-id="8e7a7-155">Um procedimento de gancho global pode ser chamado no contexto de qualquer aplicativo na mesma área de trabalho que o thread de chamada, portanto, o procedimento deve estar em um módulo de DLL separado.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-155">A global hook procedure can be called in the context of any application in the same desktop as the calling thread, so the procedure must be in a separate DLL module.</span></span> <span data-ttu-id="8e7a7-156">Um procedimento de gancho específico de thread é chamado apenas no contexto do thread associado.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-156">A thread-specific hook procedure is called only in the context of the associated thread.</span></span> <span data-ttu-id="8e7a7-157">Se um aplicativo instalar um procedimento de gancho para um de seus próprios threads, o procedimento de gancho poderá estar no mesmo módulo que o restante do código do aplicativo ou em uma DLL.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-157">If an application installs a hook procedure for one of its own threads, the hook procedure can be in either the same module as the rest of the application's code or in a DLL.</span></span> <span data-ttu-id="8e7a7-158">Se o aplicativo instalar um procedimento de gancho para um thread de um aplicativo diferente, o procedimento deverá estar em uma DLL.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-158">If the application installs a hook procedure for a thread of a different application, the procedure must be in a DLL.</span></span> <span data-ttu-id="8e7a7-159">Para obter informações, consulte [bibliotecas de vínculo dinâmico](../dlls/dynamic-link-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-159">For information, see [Dynamic-Link Libraries](../dlls/dynamic-link-libraries.md).</span></span>

> [!Note]  
> <span data-ttu-id="8e7a7-160">Você deve usar ganchos globais somente para fins de depuração; caso contrário, você deve evitá-los.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-160">You should use global hooks only for debugging purposes; otherwise, you should avoid them.</span></span> <span data-ttu-id="8e7a7-161">Os ganchos globais prejudicam o desempenho do sistema e causam conflitos com outros aplicativos que implementam o mesmo tipo de gancho global.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-161">Global hooks hurt system performance and cause conflicts with other applications that implement the same type of global hook.</span></span>

 

## <a name="hook-types"></a><span data-ttu-id="8e7a7-162">Tipos de gancho</span><span class="sxs-lookup"><span data-stu-id="8e7a7-162">Hook Types</span></span>

<span data-ttu-id="8e7a7-163">Cada tipo de gancho permite que um aplicativo monitore um aspecto diferente do mecanismo de manipulação de mensagens do sistema.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-163">Each type of hook enables an application to monitor a different aspect of the system's message-handling mechanism.</span></span> <span data-ttu-id="8e7a7-164">As seções a seguir descrevem os ganchos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-164">The following sections describe the available hooks.</span></span>

-   [<span data-ttu-id="8e7a7-165">QU \_ CALLWNDPROC e qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="8e7a7-165">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
-   [<span data-ttu-id="8e7a7-166">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="8e7a7-166">WH\_CBT</span></span>](#wh_cbt)
-   [<span data-ttu-id="8e7a7-167">Depurar do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-167">WH\_DEBUG</span></span>](#wh_debug)
-   [<span data-ttu-id="8e7a7-168">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-168">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
-   [<span data-ttu-id="8e7a7-169">QU \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-169">WH\_GETMESSAGE</span></span>](#wh_getmessage)
-   [<span data-ttu-id="8e7a7-170">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="8e7a7-170">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
-   [<span data-ttu-id="8e7a7-171">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="8e7a7-171">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
-   [<span data-ttu-id="8e7a7-172">teclado do qu \_ \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-172">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
-   [<span data-ttu-id="8e7a7-173">teclado do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-173">WH\_KEYBOARD</span></span>](#wh_keyboard)
-   [<span data-ttu-id="8e7a7-174">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-174">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
-   [<span data-ttu-id="8e7a7-175">\_mouse do qu</span><span class="sxs-lookup"><span data-stu-id="8e7a7-175">WH\_MOUSE</span></span>](#wh_mouse)
-   [<span data-ttu-id="8e7a7-176">QU \_ MSGFILTER e qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="8e7a7-176">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
-   [<span data-ttu-id="8e7a7-177">Shell do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-177">WH\_SHELL</span></span>](#wh_shell)

### <a name="wh_callwndproc-and-wh_callwndprocret"></a><span data-ttu-id="8e7a7-178">QU \_ CALLWNDPROC e qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="8e7a7-178">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>

<span data-ttu-id="8e7a7-179">Os ganchos **\_ CALLWNDPROC** e **qu \_ CALLWNDPROCRET** permitem que você monitore mensagens enviadas a procedimentos de janela.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-179">The **WH\_CALLWNDPROC** and **WH\_CALLWNDPROCRET** hooks enable you to monitor messages sent to window procedures.</span></span> <span data-ttu-id="8e7a7-180">O sistema chama um procedimento de gancho **\_ CALLWNDPROC** antes de passar a mensagem para o procedimento de janela de recebimento e chama o procedimento de gancho **qu \_ CALLWNDPROCRET** depois que o procedimento de janela tiver processado a mensagem.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-180">The system calls a **WH\_CALLWNDPROC** hook procedure before passing the message to the receiving window procedure, and calls the **WH\_CALLWNDPROCRET** hook procedure after the window procedure has processed the message.</span></span>

<span data-ttu-id="8e7a7-181">O gancho **qu \_ CALLWNDPROCRET** passa um ponteiro para uma estrutura [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) para o procedimento de gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-181">The **WH\_CALLWNDPROCRET** hook passes a pointer to a [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) structure to the hook procedure.</span></span> <span data-ttu-id="8e7a7-182">A estrutura contém o valor de retorno do procedimento de janela que processou a mensagem, bem como os parâmetros de mensagem associados à mensagem.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-182">The structure contains the return value from the window procedure that processed the message, as well as the message parameters associated with the message.</span></span> <span data-ttu-id="8e7a7-183">A subclasse da janela não funciona para mensagens definidas entre processos.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-183">Subclassing the window does not work for messages set between processes.</span></span>

<span data-ttu-id="8e7a7-184">Para obter mais informações, consulte as funções de retorno de chamada [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) e [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-184">For more information, see the [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) and [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) callback functions.</span></span>

### <a name="wh_cbt"></a><span data-ttu-id="8e7a7-185">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="8e7a7-185">WH\_CBT</span></span>

<span data-ttu-id="8e7a7-186">O sistema chama um procedimento de gancho **\_ CBT** antes de ativar, criar, destruir, minimizar, maximizar, mover ou dimensionar uma janela; antes de concluir um comando do sistema; antes de remover um evento de mouse ou de teclado da fila de mensagens do sistema; antes de definir o foco de entrada; ou antes de sincronizar com a fila de mensagens do sistema.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-186">The system calls a **WH\_CBT** hook procedure before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the input focus; or before synchronizing with the system message queue.</span></span> <span data-ttu-id="8e7a7-187">O valor que o procedimento de gancho retorna determina se o sistema permite ou impede uma dessas operações.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-187">The value the hook procedure returns determines whether the system allows or prevents one of these operations.</span></span> <span data-ttu-id="8e7a7-188">O gancho do **\_ CBT** é destinado principalmente a aplicativos de treinamento baseado em computador (CBT).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-188">The **WH\_CBT** hook is intended primarily for computer-based training (CBT) applications.</span></span>

<span data-ttu-id="8e7a7-189">Para obter mais informações, consulte a função de retorno de chamada [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-189">For more information, see the [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) callback function.</span></span>

<span data-ttu-id="8e7a7-190">Para obter informações, consulte [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-190">For information, see [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span></span>

### <a name="wh_debug"></a><span data-ttu-id="8e7a7-191">Depurar do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-191">WH\_DEBUG</span></span>

<span data-ttu-id="8e7a7-192">O sistema chama um procedimento de Hook de **\_ depuração do qu** antes de chamar os procedimentos de gancho associados a qualquer outro gancho no sistema.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-192">The system calls a **WH\_DEBUG** hook procedure before calling hook procedures associated with any other hook in the system.</span></span> <span data-ttu-id="8e7a7-193">Você pode usar esse gancho para determinar se deve permitir que o sistema chame procedimentos de gancho associados a outros tipos de ganchos.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-193">You can use this hook to determine whether to allow the system to call hook procedures associated with other types of hooks.</span></span>

<span data-ttu-id="8e7a7-194">Para obter mais informações, consulte a função de retorno de chamada [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-194">For more information, see the [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) callback function.</span></span>

### <a name="wh_foregroundidle"></a><span data-ttu-id="8e7a7-195">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-195">WH\_FOREGROUNDIDLE</span></span>

<span data-ttu-id="8e7a7-196">O **gancho \_ FOREGROUNDIDLE** permite que você execute tarefas de baixa prioridade durante os horários em que o thread em primeiro plano está ocioso.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-196">The **WH\_FOREGROUNDIDLE** hook enables you to perform low priority tasks during times when its foreground thread is idle.</span></span> <span data-ttu-id="8e7a7-197">O sistema chama um procedimento de gancho **\_ FOREGROUNDIDLE** quando o thread de primeiro plano do aplicativo está prestes a ficar ocioso.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-197">The system calls a **WH\_FOREGROUNDIDLE** hook procedure when the application's foreground thread is about to become idle.</span></span>

<span data-ttu-id="8e7a7-198">Para obter mais informações, consulte a função de retorno de chamada [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-198">For more information, see the [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) callback function.</span></span>

### <a name="wh_getmessage"></a><span data-ttu-id="8e7a7-199">QU \_ GETMESSAGE</span><span class="sxs-lookup"><span data-stu-id="8e7a7-199">WH\_GETMESSAGE</span></span>

<span data-ttu-id="8e7a7-200">O gancho do **qu \_ GETMESSAGE** permite que um aplicativo monitore mensagens a serem retornadas pela função [**GETMESSAGE**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-200">The **WH\_GETMESSAGE** hook enables an application to monitor messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="8e7a7-201">Você pode usar o gancho do **qu \_ GETMESSAGE** para monitorar a entrada do mouse e do teclado e outras mensagens postadas na fila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-201">You can use the **WH\_GETMESSAGE** hook to monitor mouse and keyboard input and other messages posted to the message queue.</span></span>

<span data-ttu-id="8e7a7-202">Para obter mais informações, consulte a função de retorno de chamada [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-202">For more information, see the [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) callback function.</span></span>

### <a name="wh_journalplayback"></a><span data-ttu-id="8e7a7-203">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="8e7a7-203">WH\_JOURNALPLAYBACK</span></span>

<span data-ttu-id="8e7a7-204">O gancho do **qu \_ JOURNALPLAYBACK** permite que um aplicativo insira mensagens na fila de mensagens do sistema.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-204">The **WH\_JOURNALPLAYBACK** hook enables an application to insert messages into the system message queue.</span></span> <span data-ttu-id="8e7a7-205">Você pode usar esse gancho para reproduzir uma série de eventos de mouse e de teclado gravados anteriormente usando o [ \_ JOURNALRECORD](#wh_journalrecord).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-205">You can use this hook to play back a series of mouse and keyboard events recorded earlier by using [WH\_JOURNALRECORD](#wh_journalrecord).</span></span> <span data-ttu-id="8e7a7-206">A entrada regular de mouse e teclado é desabilitada desde que um gancho **\_ JOURNALPLAYBACK** esteja instalado.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-206">Regular mouse and keyboard input is disabled as long as a **WH\_JOURNALPLAYBACK** hook is installed.</span></span> <span data-ttu-id="8e7a7-207">Um gancho do **qu \_ JOURNALPLAYBACK** é um gancho global — ele não pode ser usado como um gancho específico do thread.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-207">A **WH\_JOURNALPLAYBACK** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="8e7a7-208">O gancho do **qu \_ JOURNALPLAYBACK** retorna um valor de tempo limite.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-208">The **WH\_JOURNALPLAYBACK** hook returns a time-out value.</span></span> <span data-ttu-id="8e7a7-209">Esse valor informa ao sistema quantos milissegundos aguardar antes de processar a mensagem atual do gancho de reprodução.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-209">This value tells the system how many milliseconds to wait before processing the current message from the playback hook.</span></span> <span data-ttu-id="8e7a7-210">Isso permite que o gancho controle o tempo dos eventos reproduzidos.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-210">This enables the hook to control the timing of the events it plays back.</span></span>

<span data-ttu-id="8e7a7-211">Para obter mais informações, consulte a função de retorno de chamada [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-211">For more information, see the [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) callback function.</span></span>

### <a name="wh_journalrecord"></a><span data-ttu-id="8e7a7-212">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="8e7a7-212">WH\_JOURNALRECORD</span></span>

<span data-ttu-id="8e7a7-213">O **gancho \_ JOURNALRECORD** permite que você monitore e registre eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-213">The **WH\_JOURNALRECORD** hook enables you to monitor and record input events.</span></span> <span data-ttu-id="8e7a7-214">Normalmente, você usa esse gancho para gravar uma sequência de eventos de mouse e de teclado para reproduzir mais tarde usando o [ \_ JOURNALPLAYBACK](#wh_journalplayback).</span><span class="sxs-lookup"><span data-stu-id="8e7a7-214">Typically, you use this hook to record a sequence of mouse and keyboard events to play back later by using [WH\_JOURNALPLAYBACK](#wh_journalplayback).</span></span> <span data-ttu-id="8e7a7-215">O gancho do **\_ JOURNALRECORD** é um gancho global; ele não pode ser usado como um gancho específico do thread.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-215">The **WH\_JOURNALRECORD** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="8e7a7-216">Para obter mais informações, consulte a função de retorno de chamada [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-216">For more information, see the [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard_ll"></a><span data-ttu-id="8e7a7-217">teclado do qu \_ \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-217">WH\_KEYBOARD\_LL</span></span>

<span data-ttu-id="8e7a7-218">O gancho do **\_ \_ teclado do qu** faz com que você monitore os eventos de entrada do teclado para serem postados em uma fila de entrada de thread.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-218">The **WH\_KEYBOARD\_LL** hook enables you to monitor keyboard input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="8e7a7-219">Para obter mais informações, consulte a função de retorno de chamada [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-219">For more information, see the [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard"></a><span data-ttu-id="8e7a7-220">teclado do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-220">WH\_KEYBOARD</span></span>

<span data-ttu-id="8e7a7-221">O gancho de **\_ teclado do qu** permite que um aplicativo monitore o tráfego de mensagens para mensagens do [**WM \_ KEYDOWN**](/windows/desktop/inputdev/wm-keydown) e do [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) a serem retornadas pela função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-221">The **WH\_KEYBOARD** hook enables an application to monitor message traffic for [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) and [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="8e7a7-222">Você pode usar o gancho de **\_ teclado do qu** para monitorar a entrada do teclado postada em uma fila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-222">You can use the **WH\_KEYBOARD** hook to monitor keyboard input posted to a message queue.</span></span>

<span data-ttu-id="8e7a7-223">Para obter mais informações, consulte a função de retorno de chamada [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-223">For more information, see the [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse_ll"></a><span data-ttu-id="8e7a7-224">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="8e7a7-224">WH\_MOUSE\_LL</span></span>

<span data-ttu-id="8e7a7-225">O gancho do **\_ domouse \_ ll** permite que você monitore eventos de entrada do mouse a serem postados em uma fila de entrada de thread.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-225">The **WH\_MOUSE\_LL** hook enables you to monitor mouse input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="8e7a7-226">Para obter mais informações, consulte a função de retorno de chamada [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-226">For more information, see the [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse"></a><span data-ttu-id="8e7a7-227">\_mouse do qu</span><span class="sxs-lookup"><span data-stu-id="8e7a7-227">WH\_MOUSE</span></span>

<span data-ttu-id="8e7a7-228">O gancho do **\_ Dorato do qu** permite que você monitore as mensagens do mouse a serem retornadas pela função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-228">The **WH\_MOUSE** hook enables you to monitor mouse messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="8e7a7-229">Você pode usar o gancho do teclado do **qu \_** para monitorar a entrada do mouse postada em uma fila de mensagens.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-229">You can use the **WH\_MOUSE** hook to monitor mouse input posted to a message queue.</span></span>

<span data-ttu-id="8e7a7-230">Para obter mais informações, consulte a função de retorno de chamada [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-230">For more information, see the [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) callback function.</span></span>

### <a name="wh_msgfilter-and-wh_sysmsgfilter"></a><span data-ttu-id="8e7a7-231">QU \_ MSGFILTER e qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="8e7a7-231">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>

<span data-ttu-id="8e7a7-232">Os ganchos **\_ MSGFILTER** e **qu \_ SYSMSGFILTER** permitem que você monitore mensagens prestes a serem processadas por um menu, barra de rolagem, caixa de mensagem ou caixa de diálogo e para detectar quando uma janela diferente está prestes a ser ativada como resultado do pressionamento da combinação de teclas Alt + Tab ou Alt + Esc.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-232">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to monitor messages about to be processed by a menu, scroll bar, message box, or dialog box, and to detect when a different window is about to be activated as a result of the user's pressing the ALT+TAB or ALT+ESC key combination.</span></span> <span data-ttu-id="8e7a7-233">O **gancho \_ MSGFILTER** só pode monitorar as mensagens passadas para um menu, barra de rolagem, caixa de mensagem ou caixa de diálogo criado pelo aplicativo que instalou o procedimento de gancho.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-233">The **WH\_MSGFILTER** hook can only monitor messages passed to a menu, scroll bar, message box, or dialog box created by the application that installed the hook procedure.</span></span> <span data-ttu-id="8e7a7-234">O gancho **qu \_ SYSMSGFILTER** monitora essas mensagens para todos os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-234">The **WH\_SYSMSGFILTER** hook monitors such messages for all applications.</span></span>

<span data-ttu-id="8e7a7-235">Os ganchos **\_ MSGFILTER** e **qu \_ SYSMSGFILTER** permitem que você execute a filtragem de mensagens durante loops modais equivalentes à filtragem feita no loop de mensagem principal.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-235">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to perform message filtering during modal loops that is equivalent to the filtering done in the main message loop.</span></span> <span data-ttu-id="8e7a7-236">Por exemplo, um aplicativo geralmente examina uma nova mensagem no loop principal entre o tempo que recupera a mensagem da fila e a hora em que ela despacha a mensagem, executando processamento especial, conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-236">For example, an application often examines a new message in the main loop between the time it retrieves the message from the queue and the time it dispatches the message, performing special processing as appropriate.</span></span> <span data-ttu-id="8e7a7-237">No entanto, durante um loop modal, o sistema recupera e despacha mensagens sem permitir que um aplicativo filtre as mensagens em seu loop de mensagem principal.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-237">However, during a modal loop, the system retrieves and dispatches messages without allowing an application the chance to filter the messages in its main message loop.</span></span> <span data-ttu-id="8e7a7-238">Se um aplicativo instalar um procedimento de Hook **\_ MSGFILTER** ou **qu \_ SYSMSGFILTER** , o sistema chamará o procedimento durante o loop modal.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-238">If an application installs a **WH\_MSGFILTER** or **WH\_SYSMSGFILTER** hook procedure, the system calls the procedure during the modal loop.</span></span>

<span data-ttu-id="8e7a7-239">Um aplicativo pode chamar o **gancho \_ MSGFILTER** diretamente chamando a função [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-239">An application can call the **WH\_MSGFILTER** hook directly by calling the [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) function.</span></span> <span data-ttu-id="8e7a7-240">Usando essa função, o aplicativo pode usar o mesmo código para filtrar mensagens durante loops modais conforme ele usa no loop de mensagem principal.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-240">By using this function, the application can use the same code to filter messages during modal loops as it uses in the main message loop.</span></span> <span data-ttu-id="8e7a7-241">Para fazer isso, encapsular as operações de filtragem em um procedimento de gancho **\_ MSGFILTER** e chamar **CallMsgFilter** entre as chamadas para as funções [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) e [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-241">To do so, encapsulate the filtering operations in a **WH\_MSGFILTER** hook procedure and call **CallMsgFilter** between the calls to the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) and [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) functions.</span></span>

``` syntax
while (GetMessage(&msg, (HWND) NULL, 0, 0)) 
{ 
    if (!CallMsgFilter(&qmsg, 0)) 
        DispatchMessage(&qmsg); 
} 
```

<span data-ttu-id="8e7a7-242">O último argumento de [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) é simplesmente passado para o procedimento de gancho; Você pode inserir qualquer valor.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-242">The last argument of [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) is simply passed to the hook procedure; you can enter any value.</span></span> <span data-ttu-id="8e7a7-243">O procedimento de gancho, definindo uma constante como **MSGF \_ MAINLOOP**, pode usar esse valor para determinar para onde o procedimento foi chamado.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-243">The hook procedure, by defining a constant such as **MSGF\_MAINLOOP**, can use this value to determine where the procedure was called from.</span></span>

<span data-ttu-id="8e7a7-244">Para obter mais informações, consulte as funções de retorno de chamada [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) e [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-244">For more information, see the [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) and [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) callback functions.</span></span>

### <a name="wh_shell"></a><span data-ttu-id="8e7a7-245">Shell do qu \_</span><span class="sxs-lookup"><span data-stu-id="8e7a7-245">WH\_SHELL</span></span>

<span data-ttu-id="8e7a7-246">Um aplicativo de shell pode usar o gancho do **\_ shell do qu** para receber notificações importantes.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-246">A shell application can use the **WH\_SHELL** hook to receive important notifications.</span></span> <span data-ttu-id="8e7a7-247">O sistema chama um procedimento de Hook do **\_ shell do qu** quando o aplicativo de Shell está prestes a ser ativado e quando uma janela de nível superior é criada ou destruída.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-247">The system calls a **WH\_SHELL** hook procedure when the shell application is about to be activated and when a top-level window is created or destroyed.</span></span>

<span data-ttu-id="8e7a7-248">Observe que os aplicativos Shell personalizados não recebem mensagens do **\_ shell do qu** .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-248">Note that custom shell applications do not receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="8e7a7-249">Portanto, qualquer aplicativo que se registra como o shell padrão deve chamar a função [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) antes que ele (ou qualquer outro aplicativo) possa receber mensagens do **\_ shell do qu** .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-249">Therefore, any application that registers itself as the default shell must call the [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) function before it (or any other application) can receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="8e7a7-250">Essa função deve ser chamada com **SPI \_ SETMINIMIZEDMETRICS** e uma estrutura [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-250">This function must be called with **SPI\_SETMINIMIZEDMETRICS** and a [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) structure.</span></span> <span data-ttu-id="8e7a7-251">Defina o membro **iArrange** dessa estrutura como **ARW \_ Hide**.</span><span class="sxs-lookup"><span data-stu-id="8e7a7-251">Set the **iArrange** member of this structure to **ARW\_HIDE**.</span></span>

<span data-ttu-id="8e7a7-252">Para obter mais informações, consulte a função de retorno de chamada [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="8e7a7-252">For more information, see the [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) callback function.</span></span>

 

 
