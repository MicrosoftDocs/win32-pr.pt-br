---
description: Cada janela é um membro de uma determinada classe de janela. A classe Window determina o procedimento de janela padrão que uma janela individual usa para processar suas mensagens.
ms.assetid: 3a8e8f4e-910d-4863-a4a7-dd37c2dfa402
title: Sobre os procedimentos de janela
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f1f63586b9ca4ac6fe8486ba112316174533b44e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105783780"
---
# <a name="about-window-procedures"></a><span data-ttu-id="8fc00-104">Sobre os procedimentos de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-104">About Window Procedures</span></span>

<span data-ttu-id="8fc00-105">Cada janela é um membro de uma determinada classe de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-105">Each window is a member of a particular window class.</span></span> <span data-ttu-id="8fc00-106">A classe Window determina o procedimento de janela padrão que uma janela individual usa para processar suas mensagens.</span><span class="sxs-lookup"><span data-stu-id="8fc00-106">The window class determines the default window procedure that an individual window uses to process its messages.</span></span> <span data-ttu-id="8fc00-107">Todas as janelas que pertencem à mesma classe usam o mesmo procedimento de janela padrão.</span><span class="sxs-lookup"><span data-stu-id="8fc00-107">All windows belonging to the same class use the same default window procedure.</span></span> <span data-ttu-id="8fc00-108">Por exemplo, o sistema define um procedimento de janela para a classe de caixa de combinação (**ComboBox**); em seguida, todas as caixas de combinação usam esse procedimento de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-108">For example, the system defines a window procedure for the combo box class (**COMBOBOX**); all combo boxes then use that window procedure.</span></span>

<span data-ttu-id="8fc00-109">Um aplicativo normalmente registra pelo menos uma nova classe de janela e seu procedimento de janela associado.</span><span class="sxs-lookup"><span data-stu-id="8fc00-109">An application typically registers at least one new window class and its associated window procedure.</span></span> <span data-ttu-id="8fc00-110">Depois de registrar uma classe, o aplicativo pode criar muitas janelas dessa classe, todas as quais usam o mesmo procedimento de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-110">After registering a class, the application can create many windows of that class, all of which use the same window procedure.</span></span> <span data-ttu-id="8fc00-111">Como isso significa que várias fontes poderiam chamar simultaneamente a mesma parte do código, você deve ter cuidado ao modificar recursos compartilhados de um procedimento de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-111">Because this means several sources could simultaneously call the same piece of code, you must be careful when modifying shared resources from a window procedure.</span></span> <span data-ttu-id="8fc00-112">Para obter mais informações, consulte [classes de janela](window-classes.md).</span><span class="sxs-lookup"><span data-stu-id="8fc00-112">For more information, see [Window Classes](window-classes.md).</span></span>

<span data-ttu-id="8fc00-113">Os procedimentos de janela para caixas de diálogo (chamadas de procedimentos de caixa de diálogo) têm uma estrutura e função semelhantes como procedimentos de janela regular.</span><span class="sxs-lookup"><span data-stu-id="8fc00-113">Window procedures for dialog boxes (called dialog box procedures) have a similar structure and function as regular window procedures.</span></span> <span data-ttu-id="8fc00-114">Todos os pontos que se referem aos procedimentos de janela nesta seção também se aplicam aos procedimentos da caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="8fc00-114">All points referring to window procedures in this section also apply to dialog box procedures.</span></span> <span data-ttu-id="8fc00-115">Para obter mais informações, consulte [caixas de diálogo](/windows/desktop/dlgbox/dialog-boxes).</span><span class="sxs-lookup"><span data-stu-id="8fc00-115">For more information, see [Dialog Boxes](/windows/desktop/dlgbox/dialog-boxes).</span></span>

<span data-ttu-id="8fc00-116">Esta seção aborda os tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="8fc00-116">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="8fc00-117">Estrutura de um procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-117">Structure of a Window Procedure</span></span>](#structure-of-a-window-procedure)
-   [<span data-ttu-id="8fc00-118">Procedimento de janela padrão</span><span class="sxs-lookup"><span data-stu-id="8fc00-118">Default Window Procedure</span></span>](#default-window-procedure)
-   [<span data-ttu-id="8fc00-119">Subclasse de procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-119">Window Procedure Subclassing</span></span>](#window-procedure-subclassing)
    -   [<span data-ttu-id="8fc00-120">Subclasse de instância</span><span class="sxs-lookup"><span data-stu-id="8fc00-120">Instance Subclassing</span></span>](#instance-subclassing)
    -   [<span data-ttu-id="8fc00-121">Subclasse global</span><span class="sxs-lookup"><span data-stu-id="8fc00-121">Global Subclassing</span></span>](#global-subclassing)
-   [<span data-ttu-id="8fc00-122">Superclasse de procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-122">Window Procedure Superclassing</span></span>](#window-procedure-superclassing)

## <a name="structure-of-a-window-procedure"></a><span data-ttu-id="8fc00-123">Estrutura de um procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-123">Structure of a Window Procedure</span></span>

<span data-ttu-id="8fc00-124">Um procedimento de janela é uma função que tem quatro parâmetros e retorna um valor assinado.</span><span class="sxs-lookup"><span data-stu-id="8fc00-124">A window procedure is a function that has four parameters and returns a signed value.</span></span> <span data-ttu-id="8fc00-125">Os parâmetros consistem em um identificador de janela, um identificador de mensagem **uint** e dois parâmetros de mensagem declarados com os tipos de dados **wParam** e **lParam** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-125">The parameters consist of a window handle, a **UINT** message identifier, and two message parameters declared with the **WPARAM** and **LPARAM** data types.</span></span> <span data-ttu-id="8fc00-126">Para obter mais informações, consulte [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="8fc00-126">For more information, see [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span></span>

<span data-ttu-id="8fc00-127">Os parâmetros de mensagem geralmente contêm informações em suas palavras de ordem inferior e de ordem superior.</span><span class="sxs-lookup"><span data-stu-id="8fc00-127">Message parameters often contain information in both their low-order and high-order words.</span></span> <span data-ttu-id="8fc00-128">Há várias macros que um aplicativo pode usar para extrair informações dos parâmetros da mensagem.</span><span class="sxs-lookup"><span data-stu-id="8fc00-128">There are several macros an application can use to extract information from the message parameters.</span></span> <span data-ttu-id="8fc00-129">A macro [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) , por exemplo, extrai a palavra de ordem inferior (bits 0 a 15) de um parâmetro de mensagem.</span><span class="sxs-lookup"><span data-stu-id="8fc00-129">The [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) macro, for example, extracts the low-order word (bits 0 through 15) from a message parameter.</span></span> <span data-ttu-id="8fc00-130">Outras macros incluem [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**LOBYTE**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85))e [**HIBYTE**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="8fc00-130">Other macros include [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**LOBYTE**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85)), and [**HIBYTE**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span></span>

<span data-ttu-id="8fc00-131">A interpretação do valor de retorno depende da mensagem específica.</span><span class="sxs-lookup"><span data-stu-id="8fc00-131">The interpretation of the return value depends on the particular message.</span></span> <span data-ttu-id="8fc00-132">Consulte a descrição de cada mensagem para determinar o valor de retorno apropriado.</span><span class="sxs-lookup"><span data-stu-id="8fc00-132">Consult the description of each message to determine the appropriate return value.</span></span>

<span data-ttu-id="8fc00-133">Como é possível chamar um procedimento de janela recursivamente, é importante minimizar o número de variáveis locais que ele usa.</span><span class="sxs-lookup"><span data-stu-id="8fc00-133">Because it is possible to call a window procedure recursively, it is important to minimize the number of local variables that it uses.</span></span> <span data-ttu-id="8fc00-134">Ao processar mensagens individuais, um aplicativo deve chamar funções fora do procedimento de janela para evitar o uso excessivo de variáveis locais, possivelmente causando o estouro da pilha durante a recursão profunda.</span><span class="sxs-lookup"><span data-stu-id="8fc00-134">When processing individual messages, an application should call functions outside the window procedure to avoid excessive use of local variables, possibly causing the stack to overflow during deep recursion.</span></span>

## <a name="default-window-procedure"></a><span data-ttu-id="8fc00-135">Procedimento de janela padrão</span><span class="sxs-lookup"><span data-stu-id="8fc00-135">Default Window Procedure</span></span>

<span data-ttu-id="8fc00-136">A função de procedimento de janela padrão, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , define determinado comportamento fundamental compartilhado por todas as janelas.</span><span class="sxs-lookup"><span data-stu-id="8fc00-136">The default window procedure function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) defines certain fundamental behavior shared by all windows.</span></span> <span data-ttu-id="8fc00-137">O procedimento de janela padrão fornece a funcionalidade mínima para uma janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-137">The default window procedure provides the minimal functionality for a window.</span></span> <span data-ttu-id="8fc00-138">Um procedimento de janela definido pelo aplicativo deve passar todas as mensagens que ele não processa para a função **DefWindowProc** para processamento padrão.</span><span class="sxs-lookup"><span data-stu-id="8fc00-138">An application-defined window procedure should pass any messages that it does not process to the **DefWindowProc** function for default processing.</span></span>

## <a name="window-procedure-subclassing"></a><span data-ttu-id="8fc00-139">Subclasse de procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-139">Window Procedure Subclassing</span></span>

<span data-ttu-id="8fc00-140">Quando um aplicativo cria uma janela, o sistema aloca um bloco de memória para armazenar informações específicas para a janela, incluindo o endereço do procedimento de janela que processa as mensagens da janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-140">When an application creates a window, the system allocates a block of memory for storing information specific to the window, including the address of the window procedure that processes messages for the window.</span></span> <span data-ttu-id="8fc00-141">Quando o sistema precisa passar uma mensagem para a janela, ele pesquisa as informações específicas da janela para o endereço do procedimento de janela e passa a mensagem para esse procedimento.</span><span class="sxs-lookup"><span data-stu-id="8fc00-141">When the system needs to pass a message to the window, it searches the window-specific information for the address of the window procedure and passes the message to that procedure.</span></span>

<span data-ttu-id="8fc00-142">A *subclasse* é uma técnica que permite que um aplicativo intercepte e processe mensagens enviadas ou postadas em uma janela específica antes que a janela tenha a oportunidade de processá-las.</span><span class="sxs-lookup"><span data-stu-id="8fc00-142">*Subclassing* is a technique that allows an application to intercept and process messages sent or posted to a particular window before the window has a chance to process them.</span></span> <span data-ttu-id="8fc00-143">Por meio da subclasse de uma janela, um aplicativo pode aumentar, modificar ou monitorar o comportamento da janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-143">By subclassing a window, an application can augment, modify, or monitor the behavior of the window.</span></span> <span data-ttu-id="8fc00-144">Um aplicativo pode subclasser uma janela que pertence a uma classe global do sistema, como um controle de edição ou uma caixa de listagem.</span><span class="sxs-lookup"><span data-stu-id="8fc00-144">An application can subclass a window belonging to a system global class, such as an edit control or a list box.</span></span> <span data-ttu-id="8fc00-145">Por exemplo, um aplicativo poderia subclasser um controle de edição para impedir que o controle aceite determinados caracteres.</span><span class="sxs-lookup"><span data-stu-id="8fc00-145">For example, an application could subclass an edit control to prevent the control from accepting certain characters.</span></span> <span data-ttu-id="8fc00-146">No entanto, você não pode fazer uma subclasse de uma janela ou classe que pertença a outro aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8fc00-146">However, you cannot subclass a window or class that belongs to another application.</span></span> <span data-ttu-id="8fc00-147">Todas as subclasses devem ser executadas no mesmo processo.</span><span class="sxs-lookup"><span data-stu-id="8fc00-147">All subclassing must be performed within the same process.</span></span>

<span data-ttu-id="8fc00-148">Um aplicativo faz uma subclasse de uma janela substituindo o endereço do procedimento de janela original da janela pelo endereço de um novo procedimento de janela, chamado de *procedimento de subclasse*.</span><span class="sxs-lookup"><span data-stu-id="8fc00-148">An application subclasses a window by replacing the address of the window's original window procedure with the address of a new window procedure, called the *subclass procedure*.</span></span> <span data-ttu-id="8fc00-149">Depois disso, o procedimento de subclasse recebe todas as mensagens enviadas ou postadas na janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-149">Thereafter, the subclass procedure receives any messages sent or posted to the window.</span></span>

<span data-ttu-id="8fc00-150">O procedimento de subclasse pode executar três ações após o recebimento de uma mensagem: ela pode passar a mensagem para o procedimento de janela original, modificar a mensagem e passá-la para o procedimento de janela original ou processar a mensagem e não passá-la para o procedimento de janela original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-150">The subclass procedure can take three actions upon receiving a message: it can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="8fc00-151">Se o procedimento de subclasse processar uma mensagem, ele poderá fazer isso antes, depois ou antes e depois de passar a mensagem para o procedimento de janela original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-151">If the subclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="8fc00-152">O sistema fornece dois tipos de subclasses: [instância](#instance-subclassing) e [global](#global-subclassing).</span><span class="sxs-lookup"><span data-stu-id="8fc00-152">The system provides two types of subclassing: [instance](#instance-subclassing) and [global](#global-subclassing).</span></span> <span data-ttu-id="8fc00-153">Na *subclasse de instância*, um aplicativo substitui o endereço de procedimento de janela de uma única instância de uma janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-153">In *instance subclassing*, an application replaces the window procedure address of a single instance of a window.</span></span> <span data-ttu-id="8fc00-154">Um aplicativo deve usar subclasse de instância para subclasse de uma janela existente.</span><span class="sxs-lookup"><span data-stu-id="8fc00-154">An application must use instance subclassing to subclass an existing window.</span></span> <span data-ttu-id="8fc00-155">Em uma *subclasse global*, um aplicativo substitui o endereço do procedimento de janela na estrutura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) de uma classe de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-155">In *global subclassing*, an application replaces the address of the window procedure in the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure of a window class.</span></span> <span data-ttu-id="8fc00-156">Todas as janelas subsequentes criadas com a classe têm o endereço do procedimento de subclasse, mas as janelas existentes da classe não são afetadas.</span><span class="sxs-lookup"><span data-stu-id="8fc00-156">All subsequent windows created with the class have the address of the subclass procedure, but existing windows of the class are not affected.</span></span>

### <a name="instance-subclassing"></a><span data-ttu-id="8fc00-157">Subclasse de instância</span><span class="sxs-lookup"><span data-stu-id="8fc00-157">Instance Subclassing</span></span>

<span data-ttu-id="8fc00-158">Um aplicativo subclasse uma instância de uma janela usando a função [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="8fc00-158">An application subclasses an instance of a window by using the [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function.</span></span> <span data-ttu-id="8fc00-159">O aplicativo passa o **sinalizador \_ WndProc GWL** , o identificador para a janela para subclasse e o endereço do procedimento de subclasse para **SetWindowLong**.</span><span class="sxs-lookup"><span data-stu-id="8fc00-159">The application passes the **GWL\_WNDPROC** flag, the handle to the window to subclass, and the address of the subclass procedure to **SetWindowLong**.</span></span> <span data-ttu-id="8fc00-160">O procedimento de subclasse pode residir tanto no executável do aplicativo quanto em uma DLL.</span><span class="sxs-lookup"><span data-stu-id="8fc00-160">The subclass procedure can reside in either the application's executable or a DLL.</span></span>

<span data-ttu-id="8fc00-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) retorna o endereço do procedimento de janela original da janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) returns the address of the window's original window procedure.</span></span> <span data-ttu-id="8fc00-162">O aplicativo deve salvar o endereço, usando-o em chamadas subsequentes para a função [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) , para passar mensagens interceptadas para o procedimento de janela original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-162">The application must save the address, using it in subsequent calls to the [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) function, to pass intercepted messages to the original window procedure.</span></span> <span data-ttu-id="8fc00-163">O aplicativo também deve ter o endereço do procedimento de janela original para remover a subclasse da janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-163">The application must also have the original window procedure address to remove the subclass from the window.</span></span> <span data-ttu-id="8fc00-164">Para remover a subclasse, o aplicativo chama **SetWindowLong** novamente, passando o endereço do procedimento de janela original com o sinalizador **GWL \_ WndProc** e o identificador para a janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-164">To remove the subclass, the application calls **SetWindowLong** again, passing the address of the original window procedure with the **GWL\_WNDPROC** flag and the handle to the window.</span></span>

<span data-ttu-id="8fc00-165">O sistema possui as classes globais do sistema, e aspectos dos controles podem mudar de uma versão do sistema para a próxima.</span><span class="sxs-lookup"><span data-stu-id="8fc00-165">The system owns the system global classes, and aspects of the controls might change from one version of the system to the next.</span></span> <span data-ttu-id="8fc00-166">Se o aplicativo deve subclasser uma janela que pertence a uma classe global do sistema, talvez o desenvolvedor precise atualizar o aplicativo quando uma nova versão do sistema for liberada.</span><span class="sxs-lookup"><span data-stu-id="8fc00-166">If the application must subclass a window that belongs to a system global class, the developer may need to update the application when a new version of the system is released.</span></span>

<span data-ttu-id="8fc00-167">Como a subclasse de instância ocorre depois que uma janela é criada, você não pode adicionar nenhum byte extra à janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-167">Because instance subclassing occurs after a window is created, you cannot add any extra bytes to the window.</span></span> <span data-ttu-id="8fc00-168">Aplicativos que a subclasse a Window deve usar a lista de propriedades da janela para armazenar os dados necessários para uma instância da janela de subclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-168">Applications that subclass a window should use the window's property list to store any data needed for an instance of the subclassed window.</span></span> <span data-ttu-id="8fc00-169">Para obter mais informações, consulte [Propriedades da janela](window-properties.md).</span><span class="sxs-lookup"><span data-stu-id="8fc00-169">For more information, see [Window Properties](window-properties.md).</span></span>

<span data-ttu-id="8fc00-170">Quando um aplicativo subclasse uma janela de subclasse, ele deve remover as subclasses na ordem inversa em que foram executadas.</span><span class="sxs-lookup"><span data-stu-id="8fc00-170">When an application subclasses a subclassed window, it must remove the subclasses in the reverse order they were performed.</span></span> <span data-ttu-id="8fc00-171">Se a ordem de remoção não for revertida, poderá ocorrer um erro irrecuperável do sistema.</span><span class="sxs-lookup"><span data-stu-id="8fc00-171">If the removal order is not reversed, an unrecoverable system error may occur.</span></span>

### <a name="global-subclassing"></a><span data-ttu-id="8fc00-172">Subclasse global</span><span class="sxs-lookup"><span data-stu-id="8fc00-172">Global Subclassing</span></span>

<span data-ttu-id="8fc00-173">Para fazer uma subclasse global de uma classe de janela, o aplicativo deve ter um identificador para uma janela da classe.</span><span class="sxs-lookup"><span data-stu-id="8fc00-173">To globally subclass a window class, the application must have a handle to a window of the class.</span></span> <span data-ttu-id="8fc00-174">O aplicativo também precisa do identificador para remover a subclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-174">The application also needs the handle to remove the subclass.</span></span> <span data-ttu-id="8fc00-175">Para obter o identificador, um aplicativo normalmente cria uma janela oculta da classe a ser subclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-175">To get the handle, an application typically creates a hidden window of the class to be subclassed.</span></span> <span data-ttu-id="8fc00-176">Depois de obter o identificador, o aplicativo chama a função [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) , especificando o identificador, o sinalizador **\_ WndProc GCL** e o endereço do procedimento de subclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-176">After obtaining the handle, the application calls the [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) function, specifying the handle, the **GCL\_WNDPROC** flag, and the address of the subclass procedure.</span></span> <span data-ttu-id="8fc00-177">**SetClassLong** retorna o endereço do procedimento de janela original para a classe.</span><span class="sxs-lookup"><span data-stu-id="8fc00-177">**SetClassLong** returns the address of the original window procedure for the class.</span></span>

<span data-ttu-id="8fc00-178">O endereço do procedimento de janela original é usado em subclasse global da mesma forma que é usado na subclasse da instância.</span><span class="sxs-lookup"><span data-stu-id="8fc00-178">The original window procedure address is used in global subclassing in the same way it is used in instance subclassing.</span></span> <span data-ttu-id="8fc00-179">O procedimento de subclasse passa mensagens para o procedimento de janela original chamando [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca).</span><span class="sxs-lookup"><span data-stu-id="8fc00-179">The subclass procedure passes messages to the original window procedure by calling [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca).</span></span> <span data-ttu-id="8fc00-180">O aplicativo remove a subclasse da classe Window chamando [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) novamente, especificando o endereço do procedimento de janela original, o sinalizador **\_ WndProc GCL** e o identificador para uma janela da classe que está sendo subclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-180">The application removes the subclass from the window class by calling [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) again, specifying the address of the original window procedure, the **GCL\_WNDPROC** flag, and the handle to a window of the class being subclassed.</span></span> <span data-ttu-id="8fc00-181">Um aplicativo que globalmente subclasse uma classe de controle deve remover a subclasse quando o aplicativo é encerrado; caso contrário, pode ocorrer um erro irrecuperável do sistema.</span><span class="sxs-lookup"><span data-stu-id="8fc00-181">An application that globally subclasses a control class must remove the subclass when the application terminates; otherwise, an unrecoverable system error may occur.</span></span>

<span data-ttu-id="8fc00-182">A subclasse global tem as mesmas limitações que a subclasse de instância, além de algumas restrições adicionais.</span><span class="sxs-lookup"><span data-stu-id="8fc00-182">Global subclassing has the same limitations as instance subclassing, plus some additional restrictions.</span></span> <span data-ttu-id="8fc00-183">Um aplicativo não deve usar os bytes extras para a classe ou a instância de janela sem saber exatamente como o procedimento de janela original os utiliza.</span><span class="sxs-lookup"><span data-stu-id="8fc00-183">An application should not use the extra bytes for either the class or the window instance without knowing exactly how the original window procedure uses them.</span></span> <span data-ttu-id="8fc00-184">Se o aplicativo precisar associar dados a uma janela, ele deverá usar as propriedades da janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-184">If the application must associate data with a window, it should use window properties.</span></span>

## <a name="window-procedure-superclassing"></a><span data-ttu-id="8fc00-185">Superclasse de procedimento de janela</span><span class="sxs-lookup"><span data-stu-id="8fc00-185">Window Procedure Superclassing</span></span>

<span data-ttu-id="8fc00-186">A *superclasseing* é uma técnica que permite que um aplicativo crie uma nova classe de janela com a funcionalidade básica da classe existente, além de aprimoramentos fornecidos pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8fc00-186">*Superclassing* is a technique that allows an application to create a new window class with the basic functionality of the existing class, plus enhancements provided by the application.</span></span> <span data-ttu-id="8fc00-187">Uma superclasse é baseada em uma classe de janela existente chamada *classe base*.</span><span class="sxs-lookup"><span data-stu-id="8fc00-187">A superclass is based on an existing window class called the *base class*.</span></span> <span data-ttu-id="8fc00-188">Frequentemente, a classe base é uma classe de janela global do sistema, como um controle de edição, mas pode ser qualquer classe de janela.</span><span class="sxs-lookup"><span data-stu-id="8fc00-188">Frequently, the base class is a system global window class such as an edit control, but it can be any window class.</span></span>

<span data-ttu-id="8fc00-189">Uma superclasse tem seu próprio procedimento de janela, chamado de procedimento de superclasse.</span><span class="sxs-lookup"><span data-stu-id="8fc00-189">A superclass has its own window procedure, called the superclass procedure.</span></span> <span data-ttu-id="8fc00-190">O *procedimento de superclasse* pode executar três ações após o recebimento de uma mensagem: ela pode passar a mensagem para o procedimento de janela original, modificar a mensagem e passá-la para o procedimento de janela original ou processar a mensagem e não passá-la para o procedimento de janela original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-190">The *superclass procedure* can take three actions upon receiving a message: It can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="8fc00-191">Se o procedimento de superclasse processa uma mensagem, ele pode fazer isso antes, depois ou antes e depois de passar a mensagem para o procedimento de janela original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-191">If the superclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="8fc00-192">Ao contrário de um procedimento de subclasse, um procedimento de superclasse pode processar mensagens de criação de janela ([**WM \_ NCCREATE**](wm-nccreate.md), [**WM \_ Create**](wm-create.md)e assim por diante), mas também deve passá-las para o procedimento de janela de classe base original para que o procedimento de janela de classe base possa executar seu procedimento de inicialização.</span><span class="sxs-lookup"><span data-stu-id="8fc00-192">Unlike a subclass procedure, a superclass procedure can process window creation messages ([**WM\_NCCREATE**](wm-nccreate.md), [**WM\_CREATE**](wm-create.md), and so on), but it must also pass them to the original base-class window procedure so that the base-class window procedure can perform its initialization procedure.</span></span>

<span data-ttu-id="8fc00-193">Para superclassear uma classe de janela, um aplicativo primeiro chama a função [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) para recuperar informações sobre a classe base.</span><span class="sxs-lookup"><span data-stu-id="8fc00-193">To superclass a window class, an application first calls the [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function to retrieve information about the base class.</span></span> <span data-ttu-id="8fc00-194">**GetClassInfo** preenche uma estrutura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) com os valores da estrutura **WNDCLASS** da classe base.</span><span class="sxs-lookup"><span data-stu-id="8fc00-194">**GetClassInfo** fills a [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure with the values from the **WNDCLASS** structure of the base class.</span></span> <span data-ttu-id="8fc00-195">Em seguida, o aplicativo copia seu próprio identificador de instância para o membro **HINSTANCE** da estrutura **WNDCLASS** e copia o nome da superclasse no membro **lpszClassName** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-195">Next, the application copies its own instance handle into the **hInstance** member of the **WNDCLASS** structure and copies the name of the superclass into the **lpszClassName** member.</span></span> <span data-ttu-id="8fc00-196">Se a classe base tiver um menu, o aplicativo deverá fornecer um novo menu com os mesmos identificadores de menu e copiar o nome do menu para o membro **lpszMenuName** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-196">If the base class has a menu, the application must provide a new menu with the same menu identifiers and copy the menu name into the **lpszMenuName** member.</span></span> <span data-ttu-id="8fc00-197">Se o procedimento de superclasse processar a mensagem de [**\_ comando do WM**](/windows/desktop/menurc/wm-command) e não passá-la para o procedimento de janela da classe base, o menu não precisará ter identificadores correspondentes.</span><span class="sxs-lookup"><span data-stu-id="8fc00-197">If the superclass procedure processes the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message and does not pass it to the window procedure of the base class, the menu need not have corresponding identifiers.</span></span> <span data-ttu-id="8fc00-198">**GetClassInfo** não retorna o membro **lpszMenuName**, **LpszClassName** ou **HINSTANCE** da estrutura **WNDCLASS** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-198">**GetClassInfo** does not return the **lpszMenuName**, **lpszClassName**, or **hInstance** member of the **WNDCLASS** structure.</span></span>

<span data-ttu-id="8fc00-199">Um aplicativo também deve definir o membro **lpfnWndProc** da estrutura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) .</span><span class="sxs-lookup"><span data-stu-id="8fc00-199">An application must also set the **lpfnWndProc** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure.</span></span> <span data-ttu-id="8fc00-200">A função [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) preenche esse membro com o endereço do procedimento de janela original para a classe.</span><span class="sxs-lookup"><span data-stu-id="8fc00-200">The [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function fills this member with the address of the original window procedure for the class.</span></span> <span data-ttu-id="8fc00-201">O aplicativo deve salvar esse endereço, para passar mensagens para o procedimento de janela original e, em seguida, copiar o endereço do procedimento de superclasse no membro **lpfnWndProc** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-201">The application must save this address, to pass messages to the original window procedure, and then copy the address of the superclass procedure into the **lpfnWndProc** member.</span></span> <span data-ttu-id="8fc00-202">O aplicativo pode, se necessário, modificar quaisquer outros membros da estrutura **WNDCLASS** .</span><span class="sxs-lookup"><span data-stu-id="8fc00-202">The application can, if necessary, modify any other members of the **WNDCLASS** structure.</span></span> <span data-ttu-id="8fc00-203">Depois de preencher a estrutura **WNDCLASS** , o aplicativo registra a superclasse passando o endereço da estrutura para a função [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="8fc00-203">After it fills the **WNDCLASS** structure, the application registers the superclass by passing the address of the structure to the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="8fc00-204">A superclasse pode ser usada para criar o Windows.</span><span class="sxs-lookup"><span data-stu-id="8fc00-204">The superclass can then be used to create windows.</span></span>

<span data-ttu-id="8fc00-205">Como a superclasse registra uma nova classe de janela, um aplicativo pode adicionar tanto os bytes de classe extras quanto os bytes de janela extras.</span><span class="sxs-lookup"><span data-stu-id="8fc00-205">Because superclassing registers a new window class, an application can add to both the extra class bytes and the extra window bytes.</span></span> <span data-ttu-id="8fc00-206">A superclasse não deve usar os bytes extras originais para a classe base ou a janela pelos mesmos motivos para que uma subclasse de instância ou uma subclasse global não deva usá-las.</span><span class="sxs-lookup"><span data-stu-id="8fc00-206">The superclass must not use the original extra bytes for the base class or the window for the same reasons that an instance subclass or a global subclass should not use them.</span></span> <span data-ttu-id="8fc00-207">Além disso, se o aplicativo Adicionar bytes extras para seu uso na classe ou na instância de janela, ele deverá referenciar os bytes extras relativos ao número de bytes extras usados pela classe base original.</span><span class="sxs-lookup"><span data-stu-id="8fc00-207">Also, if the application adds extra bytes for its use to either the class or the window instance, it must reference the extra bytes relative to the number of extra bytes used by the original base class.</span></span> <span data-ttu-id="8fc00-208">Como o número de bytes usados pela classe base pode variar de uma versão da classe base para a próxima, o deslocamento inicial para os próprios bytes extras da superclasse também pode variar de uma versão da classe base para a próxima.</span><span class="sxs-lookup"><span data-stu-id="8fc00-208">Because the number of bytes used by the base class may vary from one version of the base class to the next, the starting offset for the superclass's own extra bytes may also vary from one version of the base class to the next.</span></span>

 

 
