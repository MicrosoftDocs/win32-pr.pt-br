---
description: Este tópico descreve como criar, identificar, definir e excluir temporizadores.
ms.assetid: 509a6fc4-ddee-4ff4-88a2-25dad4c48c2f
title: Sobre temporizadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3163dbfd5357de516e0202665cd76d017335593
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103922832"
---
# <a name="about-timers"></a><span data-ttu-id="9f49b-103">Sobre temporizadores</span><span class="sxs-lookup"><span data-stu-id="9f49b-103">About Timers</span></span>

<span data-ttu-id="9f49b-104">Este tópico descreve como criar, identificar, definir e excluir temporizadores.</span><span class="sxs-lookup"><span data-stu-id="9f49b-104">This topic describes how to create, identify, set, and delete timers.</span></span> <span data-ttu-id="9f49b-105">Um aplicativo usa um temporizador para agendar um evento para uma janela depois que um tempo especificado tiver decorrido.</span><span class="sxs-lookup"><span data-stu-id="9f49b-105">An application uses a timer to schedule an event for a window after a specified time has elapsed.</span></span> <span data-ttu-id="9f49b-106">Cada vez que o intervalo especificado (ou valor de tempo limite) para um temporizador expira, o sistema notifica a janela associada ao temporizador.</span><span class="sxs-lookup"><span data-stu-id="9f49b-106">Each time the specified interval (or time-out value) for a timer elapses, the system notifies the window associated with the timer.</span></span> <span data-ttu-id="9f49b-107">Como a precisão de um temporizador depende da taxa de relógio do sistema e da frequência com que o aplicativo recupera mensagens da fila de mensagens, o valor de tempo limite é aproximado.</span><span class="sxs-lookup"><span data-stu-id="9f49b-107">Because a timer's accuracy depends on the system clock rate and how often the application retrieves messages from the message queue, the time-out value is only approximate.</span></span>

<span data-ttu-id="9f49b-108">Este tópico inclui as seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f49b-108">This topic includes the following sections.</span></span>

-   [<span data-ttu-id="9f49b-109">Operações de temporizador</span><span class="sxs-lookup"><span data-stu-id="9f49b-109">Timer Operations</span></span>](#timer-operations)
-   [<span data-ttu-id="9f49b-110">Temporizador de alta resolução</span><span class="sxs-lookup"><span data-stu-id="9f49b-110">High-Resolution Timer</span></span>](#high-resolution-timer)
-   [<span data-ttu-id="9f49b-111">Objetos de timer que esperam</span><span class="sxs-lookup"><span data-stu-id="9f49b-111">Waitable Timer Objects</span></span>](#waitable-timer-objects)
-   [<span data-ttu-id="9f49b-112">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9f49b-112">Related topics</span></span>](#related-topics)

## <a name="timer-operations"></a><span data-ttu-id="9f49b-113">Operações de temporizador</span><span class="sxs-lookup"><span data-stu-id="9f49b-113">Timer Operations</span></span>

<span data-ttu-id="9f49b-114">Os aplicativos criam temporizadores usando a função [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) .</span><span class="sxs-lookup"><span data-stu-id="9f49b-114">Applications create timers by using the [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) function.</span></span> <span data-ttu-id="9f49b-115">Um novo temporizador começa a cronometrar o intervalo assim que ele é criado.</span><span class="sxs-lookup"><span data-stu-id="9f49b-115">A new timer starts timing the interval as soon as it is created.</span></span> <span data-ttu-id="9f49b-116">Um aplicativo pode alterar o valor de tempo limite de um temporizador usando **SetTimer** e pode destruir um temporizador usando a função [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) .</span><span class="sxs-lookup"><span data-stu-id="9f49b-116">An application can change a timer's time-out value by using **SetTimer** and can destroy a timer by using the [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) function.</span></span> <span data-ttu-id="9f49b-117">Para usar os recursos do sistema com eficiência, os aplicativos devem destruir temporizadores que não são mais necessários.</span><span class="sxs-lookup"><span data-stu-id="9f49b-117">To use system resources efficiently, applications should destroy timers that are no longer necessary.</span></span>

<span data-ttu-id="9f49b-118">Cada temporizador tem um identificador exclusivo.</span><span class="sxs-lookup"><span data-stu-id="9f49b-118">Each timer has a unique identifier.</span></span> <span data-ttu-id="9f49b-119">Ao criar um temporizador, um aplicativo pode especificar um identificador ou fazer com que o sistema crie um valor exclusivo.</span><span class="sxs-lookup"><span data-stu-id="9f49b-119">When creating a timer, an application can either specify an identifier or have the system create a unique value.</span></span> <span data-ttu-id="9f49b-120">O primeiro parâmetro de uma mensagem de [**\_ temporizador do WM**](wm-timer.md) contém o identificador do temporizador que postou a mensagem.</span><span class="sxs-lookup"><span data-stu-id="9f49b-120">The first parameter of a [**WM\_TIMER**](wm-timer.md) message contains the identifier of the timer that posted the message.</span></span>

<span data-ttu-id="9f49b-121">Se você especificar um identificador de janela na chamada para [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), o aplicativo associará o temporizador a essa janela.</span><span class="sxs-lookup"><span data-stu-id="9f49b-121">If you specify a window handle in the call to [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), the application associates the timer with that window.</span></span> <span data-ttu-id="9f49b-122">Sempre que o valor de tempo limite para o temporizador expira, o sistema posta uma mensagem de [**\_ temporizador do WM**](wm-timer.md) na janela associada ao temporizador.</span><span class="sxs-lookup"><span data-stu-id="9f49b-122">Whenever the time-out value for the timer elapses, the system posts a [**WM\_TIMER**](wm-timer.md) message to the window associated with the timer.</span></span> <span data-ttu-id="9f49b-123">Se nenhum identificador de janela for especificado na chamada para **SetTimer**, o aplicativo que criou o temporizador deverá monitorar sua fila de mensagens para mensagens de **\_ temporizador do WM** e expedir para a janela apropriada.</span><span class="sxs-lookup"><span data-stu-id="9f49b-123">If no window handle is specified in the call to **SetTimer**, the application that created the timer must monitor its message queue for **WM\_TIMER** messages and dispatch them to the appropriate window.</span></span> <span data-ttu-id="9f49b-124">Se você especificar uma função de retorno de chamada [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) , o procedimento de janela padrão chamará a função de retorno de chamada ao processar o **\_ temporizador do WM**.</span><span class="sxs-lookup"><span data-stu-id="9f49b-124">If you specify a [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) callback function, the default window procedure calls the callback function when it processes **WM\_TIMER**.</span></span> <span data-ttu-id="9f49b-125">Portanto, você precisa enviar mensagens no thread de chamada, mesmo quando você usa **TimerProc** em vez de processar **o \_ temporizador do WM**.</span><span class="sxs-lookup"><span data-stu-id="9f49b-125">Therefore, you need to dispatch messages in the calling thread, even when you use **TimerProc** instead of processing **WM\_TIMER**.</span></span>

<span data-ttu-id="9f49b-126">Se você precisar ser notificado quando um temporizador decorrer, use um temporizador que poderá ser aguardado.</span><span class="sxs-lookup"><span data-stu-id="9f49b-126">If you need to be notified when a timer elapses, use a waitable timer.</span></span> <span data-ttu-id="9f49b-127">Para obter mais informações, consulte [objetos de timer de espera](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="9f49b-127">For more information, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="high-resolution-timer"></a><span data-ttu-id="9f49b-128">Temporizador de High-Resolution</span><span class="sxs-lookup"><span data-stu-id="9f49b-128">High-Resolution Timer</span></span>

<span data-ttu-id="9f49b-129">Um contador é um termo geral usado na programação para se referir a uma variável de incremento.</span><span class="sxs-lookup"><span data-stu-id="9f49b-129">A counter is a general term used in programming to refer to an incrementing variable.</span></span> <span data-ttu-id="9f49b-130">Alguns sistemas incluem um contador de desempenho de alta resolução que fornece tempos decorridos de alta resolução.</span><span class="sxs-lookup"><span data-stu-id="9f49b-130">Some systems include a high-resolution performance counter that provides high-resolution elapsed times.</span></span>

<span data-ttu-id="9f49b-131">Se houver um contador de desempenho de alta resolução no sistema, você poderá usar a função [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) para expressar a frequência, em contagens por segundo.</span><span class="sxs-lookup"><span data-stu-id="9f49b-131">If a high-resolution performance counter exists on the system, you can use the [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) function to express the frequency, in counts per second.</span></span> <span data-ttu-id="9f49b-132">O valor da contagem é dependente do processador.</span><span class="sxs-lookup"><span data-stu-id="9f49b-132">The value of the count is processor dependent.</span></span> <span data-ttu-id="9f49b-133">Em alguns processadores, por exemplo, a contagem pode ser a taxa de ciclo do relógio do processador.</span><span class="sxs-lookup"><span data-stu-id="9f49b-133">On some processors, for example, the count might be the cycle rate of the processor clock.</span></span>

<span data-ttu-id="9f49b-134">A função [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) recupera o valor atual do contador de desempenho de alta resolução.</span><span class="sxs-lookup"><span data-stu-id="9f49b-134">The [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) function retrieves the current value of the high-resolution performance counter.</span></span> <span data-ttu-id="9f49b-135">Ao chamar essa função no início e no final de uma seção do código, um aplicativo usa basicamente o contador como um temporizador de alta resolução.</span><span class="sxs-lookup"><span data-stu-id="9f49b-135">By calling this function at the beginning and end of a section of code, an application essentially uses the counter as a high-resolution timer.</span></span> <span data-ttu-id="9f49b-136">Por exemplo, suponha que [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indica que a frequência do contador de desempenho de alta resolução é de 50.000 contagens por segundo.</span><span class="sxs-lookup"><span data-stu-id="9f49b-136">For example, suppose that [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indicates that the frequency of the high-resolution performance counter is 50,000 counts per second.</span></span> <span data-ttu-id="9f49b-137">Se o aplicativo chamar **QueryPerformanceCounter** imediatamente antes e imediatamente após a seção do código ser cronometrado, os valores do contador poderão ser 1500 contagens e 3500 contagens, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="9f49b-137">If the application calls **QueryPerformanceCounter** immediately before and immediately after the section of code to be timed, the counter values might be 1500 counts and 3500 counts, respectively.</span></span> <span data-ttu-id="9f49b-138">Esses valores indicam que .04 segundos (contagens de 2000) decorridos enquanto o código foi executado.</span><span class="sxs-lookup"><span data-stu-id="9f49b-138">These values would indicate that .04 seconds (2000 counts) elapsed while the code executed.</span></span>

## <a name="waitable-timer-objects"></a><span data-ttu-id="9f49b-139">Objetos de timer que esperam</span><span class="sxs-lookup"><span data-stu-id="9f49b-139">Waitable Timer Objects</span></span>

<span data-ttu-id="9f49b-140">Um objeto de timer de espera é um objeto de sincronização cujo estado é definido como sinalizado quando o tempo de espera especificado chega.</span><span class="sxs-lookup"><span data-stu-id="9f49b-140">A waitable timer object is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="9f49b-141">Há dois tipos de temporizadores esperados que podem ser criados: redefinição manual e sincronização.</span><span class="sxs-lookup"><span data-stu-id="9f49b-141">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="9f49b-142">Um temporizador de qualquer tipo também pode ser um temporizador periódico.</span><span class="sxs-lookup"><span data-stu-id="9f49b-142">A timer of either type can also be a periodic timer.</span></span>

<span data-ttu-id="9f49b-143">Um thread usa a função [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) ou [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) para criar um objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="9f49b-143">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="9f49b-144">O thread de criação especifica se o temporizador é um temporizador de redefinição manual ou um temporizador de sincronização.</span><span class="sxs-lookup"><span data-stu-id="9f49b-144">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="9f49b-145">O thread de criação pode especificar um nome para o objeto de timer.</span><span class="sxs-lookup"><span data-stu-id="9f49b-145">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="9f49b-146">Os threads em outros processos podem abrir um identificador para um temporizador existente especificando seu nome em uma chamada para a função [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="9f49b-146">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="9f49b-147">Qualquer thread com um identificador para um objeto de timer pode usar uma das funções Wait para aguardar que o estado do timer seja definido como signaled.</span><span class="sxs-lookup"><span data-stu-id="9f49b-147">Any thread with a handle to a timer object can use one of the wait functions to wait for the timer state to be set to signaled.</span></span>

<span data-ttu-id="9f49b-148">Para obter mais informações sobre como usar objetos de temporizador de espera para a sincronização de threads, consulte [objetos de timer de espera](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="9f49b-148">For more information about using waitable timer objects for thread synchronization, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="related-topics"></a><span data-ttu-id="9f49b-149">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9f49b-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9f49b-150">Usando temporizadores</span><span class="sxs-lookup"><span data-stu-id="9f49b-150">Using Timers</span></span>](using-timers.md)
</dt> </dl>

 

 
