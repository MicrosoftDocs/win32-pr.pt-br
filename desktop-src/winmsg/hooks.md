---
description: Esta seção aborda os ganchos. Um gancho é um ponto no mecanismo de manipulação de mensagens do sistema em que um aplicativo pode instalar uma sub-rotina para monitorar o tráfego da mensagem.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Ganchos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74057d25e3152c8782c2be364688bb971b08ddf5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171308"
---
# <a name="hooks"></a>Ganchos

Um gancho é um ponto no mecanismo de manipulação de mensagens do sistema em que um aplicativo pode instalar uma sub-rotina para monitorar o tráfego da mensagem no sistema e processar determinados tipos de mensagens antes que elas atinjam o procedimento da janela de destino.

### <a name="in-this-section"></a>Nesta seção



| Nome                                 | Descrição                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [Visão geral do gancho](about-hooks.md)     | Discute como os ganchos devem ser usados.<br/>                      |
| [Usando ganchos](using-hooks.md)       | Demonstra como executar tarefas associadas a ganchos.<br/> |
| [Referência de gancho](hook-reference.md) | Contém a referência de API.<br/>                              |



 

### <a name="hook-functions"></a>Funções de Hook



| Nome                                               | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | Passa a mensagem especificada e o código de gancho para os procedimentos de gancho associados aos procedimentos de gancho [**\_ SYSMSGFILTER**](about-hooks.md) e **qu \_ MSGFILTER** .<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | Passa as informações do gancho para o próximo procedimento de gancho na cadeia de ganchos atual. Um procedimento de gancho pode chamar essa função antes ou depois de processar as informações do gancho. <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))                   | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função antes de chamar o procedimento de janela para processar uma mensagem enviada para o thread.<br/>                                                                                                                                                                                                                                                                                                                                               |
| [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc)             | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função depois que a função [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) é chamada. O procedimento de gancho pode examinar a mensagem; Ele não pode modificá-lo. <br/>                                                                                                                                                                                                                                                                                         |
| [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))                           | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função antes de ativar, criar, destruir, minimizar, maximizar, mover ou dimensionar uma janela; antes de concluir um comando do sistema; antes de remover um evento de mouse ou de teclado da fila de mensagens do sistema; antes de definir o foco do teclado; ou antes de sincronizar com a fila de mensagens do sistema. Um aplicativo de treinamento baseado em computador (CBT) usa esse procedimento de conexão para receber notificações úteis do sistema. <br/> |
| [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))                       | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função antes de chamar os procedimentos de gancho associados a qualquer tipo de gancho. O sistema passa informações sobre o gancho a ser chamado para o procedimento de gancho [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) , que examina as informações e determina se deve permitir que o gancho seja chamado. <br/>                                                                                                                                                  |
| [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))     | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função sempre que o thread em primeiro plano está prestes a ficar ocioso. <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))                     | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função sempre que a função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) recuperou uma mensagem de uma fila de mensagens do aplicativo. Antes de retornar a mensagem recuperada para o chamador, o sistema passa a mensagem para o procedimento de gancho. <br/>                                                                                                                                                        |
| [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))   | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Normalmente, um aplicativo usa essa função para reproduzir uma série de mensagens de mouse e teclado registradas anteriormente pelo procedimento de gancho [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) . Desde que um procedimento de gancho [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) esteja instalado, a entrada regular de mouse e teclado estará desabilitada. <br/>                                                                                                                       |
| [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))       | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . A função registra as mensagens que o sistema remove da fila de mensagens do sistema. Posteriormente, um aplicativo pode usar um procedimento de gancho [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) para reproduzir as mensagens. <br/>                                                                                                                                                                                                                                               |
| [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))                 | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função sempre que um aplicativo chama a função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) e há uma mensagem de teclado ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) ou [**WM \_ KEYDOWN**](/windows/desktop/inputdev/wm-keydown)) a ser processada. <br/>                                                                                                                                                                         |
| [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função toda vez que um novo evento de entrada de teclado está prestes a ser Postado em uma fila de entrada de thread.<br/>                                                                                                                                                                                                                                                                                                                                     |
| [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))       | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função toda vez que um novo evento de entrada do mouse está prestes a ser Postado em uma fila de entrada de thread.<br/>                                                                                                                                                                                                                                                                                                                                        |
| [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))                   | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função depois que um evento de entrada ocorre em uma caixa de diálogo, caixa de mensagem, menu ou barra de rolagem, mas antes que a mensagem gerada pelo evento de entrada seja processada. O procedimento de gancho pode monitorar mensagens de uma caixa de diálogo, caixa de mensagem, menu ou barra de rolagem criada por um determinado aplicativo ou por todos os aplicativos.<br/>                                                                                                                       |
| [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))                       | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função sempre que um aplicativo chama a função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) e há uma mensagem do mouse a ser processada. <br/>                                                                                                                                                                                                                                                           |
| [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | Instala um procedimento de gancho definido pelo aplicativo em uma cadeia de ganchos. Você instalaria um procedimento de gancho para monitorar o sistema em busca de determinados tipos de eventos. Esses eventos são associados a um thread específico ou a todos os threads na mesma área de trabalho que o thread de chamada.<br/>                                                                                                                                                                                                                                                                                                           |
| [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))                       | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . A função recebe notificações de eventos do shell do sistema.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))                     | Uma função de retorno de chamada definida por aplicativo ou definida pela biblioteca usada com a função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . O sistema chama essa função depois que um evento de entrada ocorre em uma caixa de diálogo, caixa de mensagem, menu ou barra de rolagem, mas antes que a mensagem gerada pelo evento de entrada seja processada. A função pode monitorar mensagens para qualquer caixa de diálogo, caixa de mensagem, menu ou barra de rolagem no sistema. <br/>                                                                                                                                                                    |
| [**UnhookWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | Remove um procedimento de gancho instalado em uma cadeia de gancho pela função [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a>Notificações de gancho



| Nome                                          | Descrição                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CANCELJOURNAL do WM \_**](wm-canceljournal.md) | Postado em um aplicativo quando um usuário cancela as atividades de registro em diário do aplicativo. A mensagem é postada com um identificador de janela **nulo** . <br/>                              |
| [**QUEUESYNC do WM \_**](wm-queuesync.md)         | Enviado por um aplicativo CBT para separar mensagens de entrada de usuário de outras mensagens enviadas por meio do procedimento [**\_ JOURNALPLAYBACK do qu**](about-hooks.md) . <br/> |



 

### <a name="hook-structures"></a>Estruturas de gancho



| Nome                                           | Descrição                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CBT \_ CREATEWND**](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | Contém informações passadas para um procedimento de gancho **\_ CBT** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), antes de uma janela ser criada.<br/>                                                                                               |
| [**CBTACTIVATESTRUCT**](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | Contém informações passadas para um procedimento de gancho **\_ CBT** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), antes de uma janela ser ativada. <br/>                                                                                            |
| [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | Define os parâmetros de mensagem passados para um procedimento de gancho **\_ CALLWNDPROCRET** , [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc). <br/>                                                                                       |
| [**CWPSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | Define os parâmetros de mensagem passados para um procedimento de gancho **\_ CALLWNDPROC** , [*CALLWNDPROC*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)). <br/>                                                                                                |
| [**DEBUGHOOKINFO**](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | Contém informações de depuração passadas para um procedimento de gancho de **\_ depuração do qu** , [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)). <br/>                                                                                                          |
| [**EVENTMSG**](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | Contém informações sobre uma mensagem de hardware enviada para a fila de mensagens do sistema. Essa estrutura é usada para armazenar informações de mensagem para a função de retorno de chamada [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) . <br/> |
| [**KBDLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | Contém informações sobre um evento de entrada de teclado de baixo nível. <br/>                                                                                                                                                    |
| [**MOUSEHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | Contém informações sobre um evento de mouse passado para um procedimento de gancho **\_ do mouse de qu** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MOUSEHOOKSTRUCTEX**](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | Contém informações sobre um evento de mouse passado para um procedimento de gancho **\_ do mouse de qu** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MSLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | Contém informações sobre um evento de entrada do mouse de baixo nível. <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a>Tópicos relacionados

<dl> <dt>

[**SetWinEventHook**](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

