---
title: Arquitetura de plug-in
description: As unidades biométricas expõem os recursos de um dispositivo para a estrutura por meio de uma interface padrão que consiste em adaptadores de sensor, mecanismo e armazenamento.
ms.assetid: d2835413-70a3-45fa-93e2-3fe78097554f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52e43af9c0ea5a8db57cc0e0970b5625b1ba118f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104454213"
---
# <a name="plug-in-architecture"></a><span data-ttu-id="8d52e-103">Arquitetura de plug-in</span><span class="sxs-lookup"><span data-stu-id="8d52e-103">Plug-in architecture</span></span>

<span data-ttu-id="8d52e-104">Os dispositivos biométricos são fabricados em uma ampla variedade de tipos e configurações.</span><span class="sxs-lookup"><span data-stu-id="8d52e-104">Biometric devices are manufactured in a wide variety of types and configurations.</span></span> <span data-ttu-id="8d52e-105">A Windows Biometric Framework aborda essa variedade fornecendo uma arquitetura extensível que permite que desenvolvedores de terceiros criem componentes de plug-ins personalizados.</span><span class="sxs-lookup"><span data-stu-id="8d52e-105">The Windows Biometric Framework addresses this variety by providing an extensible architecture that enables third party developers to create custom plug-in components.</span></span> <span data-ttu-id="8d52e-106">O componente principal é um objeto de software chamado unidade biométrica.</span><span class="sxs-lookup"><span data-stu-id="8d52e-106">The primary component is a software object called a biometric unit.</span></span> <span data-ttu-id="8d52e-107">As unidades biométricas expõem os recursos de um dispositivo para a estrutura por meio de uma interface padrão que consiste em adaptadores de sensor, mecanismo e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="8d52e-107">Biometric units expose the capabilities of a device to the framework through a standard interface that consists of sensor, engine, and storage adapters.</span></span> <span data-ttu-id="8d52e-108">As unidades biométricas e seus componentes constituintes são discutidos nos tópicos a seguir.</span><span class="sxs-lookup"><span data-stu-id="8d52e-108">Biometric units and their constituent components are discussed in the following topics.</span></span>

## <a name="biometric-unit"></a><span data-ttu-id="8d52e-109">Unidade biométrica</span><span class="sxs-lookup"><span data-stu-id="8d52e-109">Biometric unit</span></span>

<span data-ttu-id="8d52e-110">O componente central da arquitetura de plug-in do Windows Biometric Framework é a unidade biométrica, um objeto de software que expõe os recursos de um dispositivo biométrico à estrutura por meio de uma interface padrão.</span><span class="sxs-lookup"><span data-stu-id="8d52e-110">The central component of the Windows Biometric Framework plug-in architecture is the biometric unit, a software object that exposes the capabilities of a biometric device to the framework through a standard interface.</span></span>

<span data-ttu-id="8d52e-111">Um único sensor físico é associado a cada unidade biométrica.</span><span class="sxs-lookup"><span data-stu-id="8d52e-111">A single physical sensor is associated with each biometric unit.</span></span> <span data-ttu-id="8d52e-112">O sensor captura dados biométricos e também pode, dependendo de seus recursos de hardware, executar outras operações biométricas, como correspondência de modelo e armazenamento.</span><span class="sxs-lookup"><span data-stu-id="8d52e-112">The sensor captures biometric data and may also, depending on its hardware capabilities, perform other biometric operations such as template matching and storage.</span></span> <span data-ttu-id="8d52e-113">Os sensores que não dão suporte à correspondência integrada ou ao armazenamento exigem módulos de software adicionais para executar essas funções.</span><span class="sxs-lookup"><span data-stu-id="8d52e-113">Sensors that do not support onboard matching or storage require additional software modules to perform these functions.</span></span> <span data-ttu-id="8d52e-114">Para obter mais informações, consulte [adaptadores](/previous-versions//dd401508(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="8d52e-114">For more information, see [Adapters](/previous-versions//dd401508(v=vs.85)).</span></span>

<span data-ttu-id="8d52e-115">A ilustração a seguir mostra como os dados fluem por meio de uma unidade biométrica.</span><span class="sxs-lookup"><span data-stu-id="8d52e-115">The following illustration shows how data flows through a biometric unit.</span></span> <span data-ttu-id="8d52e-116">Essencialmente, o fluxo de dados forma um tipo de pipeline.</span><span class="sxs-lookup"><span data-stu-id="8d52e-116">Essentially, the data flow forms a type of pipeline.</span></span> <span data-ttu-id="8d52e-117">A entrada inicial para o pipeline é um exemplo biométrico capturado por um sensor físico.</span><span class="sxs-lookup"><span data-stu-id="8d52e-117">The initial input to the pipeline is a biometric sample captured by a physical sensor.</span></span> <span data-ttu-id="8d52e-118">O mecanismo tenta corresponder o exemplo aos modelos que já existem no repositório de modelos ou, se nenhuma correspondência for encontrada, criará um novo modelo a partir de amostras físicas repetidas e salvará o modelo na loja.</span><span class="sxs-lookup"><span data-stu-id="8d52e-118">The engine attempts to match the sample to templates that already exist in the template store or, if no match is found, builds a new template from repeated physical samples and saves the template in the store.</span></span>

![fluxo de dados por meio de uma unidade biométrica](images/biometricunit-dataflow.png)

## <a name="biometric-unit-life-cycle"></a><span data-ttu-id="8d52e-120">Ciclo de vida da unidade biométrica</span><span class="sxs-lookup"><span data-stu-id="8d52e-120">Biometric unit life cycle</span></span>

### <a name="creation"></a><span data-ttu-id="8d52e-121">Criação</span><span class="sxs-lookup"><span data-stu-id="8d52e-121">Creation</span></span>

<span data-ttu-id="8d52e-122">Quando o serviço de biometria do Windows é iniciado ou quando recebe uma notificação de hardware do Gerenciador de Plug and Play, ele procura qualquer hardware que dê suporte ao \_ \_ E2B5183A-99EA-4cc3-AD6B-80CA8D715B80 (leitor biométrico DEVINTERFACE) de GUID de interface bem conhecida \_ .</span><span class="sxs-lookup"><span data-stu-id="8d52e-122">When the Windows Biometric Service starts or when it receives a hardware notification from the Plug and Play manager, it scans for any hardware that supports the well-known interface GUID\_DEVINTERFACE\_BIOMETRIC\_READER (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80).</span></span> <span data-ttu-id="8d52e-123">Para cada dispositivo biométrico descoberto, então:</span><span class="sxs-lookup"><span data-stu-id="8d52e-123">For each biometric device discovered it then:</span></span>

-   <span data-ttu-id="8d52e-124">Abre um identificador para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8d52e-124">Opens a handle to the device.</span></span>
-   <span data-ttu-id="8d52e-125">Consulta os recursos do dispositivo usando uma interface de controle de driver biométrico do Windows.</span><span class="sxs-lookup"><span data-stu-id="8d52e-125">Queries the device capabilities by using a Windows Biometric Driver control interface.</span></span>
-   <span data-ttu-id="8d52e-126">Abre a chave do registro do dispositivo e tenta localizar informações sobre quaisquer plug-ins do adaptador associado.</span><span class="sxs-lookup"><span data-stu-id="8d52e-126">Opens the device registry key and attempts to locate information about any associated adapter plug-ins.</span></span>
-   <span data-ttu-id="8d52e-127">Abre a chave do registro do serviço de biometria do Windows e procura informações sobre quaisquer plug-ins globais que devem substituir os valores específicos do dispositivo encontrados na etapa anterior.</span><span class="sxs-lookup"><span data-stu-id="8d52e-127">Opens the Windows Biometric Service registry key and searches for information about any global plug-ins that should override the device specific values found in the preceding step.</span></span>
-   <span data-ttu-id="8d52e-128">Cria uma unidade biométrica para representar o dispositivo e passa a unidade para um provedor de serviços biométricos.</span><span class="sxs-lookup"><span data-stu-id="8d52e-128">Builds a biometric unit to represent the device and passes the unit to a biometric service provider.</span></span>

### <a name="configuration"></a><span data-ttu-id="8d52e-129">Configuração</span><span class="sxs-lookup"><span data-stu-id="8d52e-129">Configuration</span></span>

<span data-ttu-id="8d52e-130">Após um provedor de serviços biométricos (BSP) aceitar uma unidade biométrica, ele configurará a unidade e a atribuirá a um pool de sensores.</span><span class="sxs-lookup"><span data-stu-id="8d52e-130">After a biometric service provider (BSP) accepts a biometric unit, it configures the unit and assigns it to a sensor pool.</span></span> <span data-ttu-id="8d52e-131">Para obter mais informações, consulte [pools de sensores](sensor-pools.md).</span><span class="sxs-lookup"><span data-stu-id="8d52e-131">For more information, see [Sensor Pools](sensor-pools.md).</span></span> <span data-ttu-id="8d52e-132">A unidade é configurada carregando os adaptadores apropriados, conectando-se a um repositório de modelos e possivelmente alterando o modo de operação.</span><span class="sxs-lookup"><span data-stu-id="8d52e-132">The unit is configured by loading the appropriate adapters, connecting to a template store, and possibly changing the operating mode.</span></span> <span data-ttu-id="8d52e-133">Uma unidade biométrica pode ser configurada para operar em um dos dois modos:</span><span class="sxs-lookup"><span data-stu-id="8d52e-133">A biometric unit can be configured to operate in one of two modes:</span></span>

-   <span data-ttu-id="8d52e-134">No modo básico, a unidade age como um dispositivo de captura simples.</span><span class="sxs-lookup"><span data-stu-id="8d52e-134">In the basic mode, the unit acts as a simple capture device.</span></span> <span data-ttu-id="8d52e-135">Ele não usa o processamento ou o armazenamento integrado, mas se baseia inteiramente em adaptadores de software para obter suporte adicional.</span><span class="sxs-lookup"><span data-stu-id="8d52e-135">It does not use onboard processing or storage but relies entirely on software adapters for additional support.</span></span> <span data-ttu-id="8d52e-136">Ele deve ser capaz de gerar amostras em um formato padrão.</span><span class="sxs-lookup"><span data-stu-id="8d52e-136">It should be able to generate samples in a standard format.</span></span> <span data-ttu-id="8d52e-137">Por exemplo, os leitores de impressão digital devem gerar exemplos que estão em conformidade com ANSI INCITS 381-2004.</span><span class="sxs-lookup"><span data-stu-id="8d52e-137">For example, fingerprint readers should generate samples that comply with ANSI INCITS 381-2004.</span></span> <span data-ttu-id="8d52e-138">A finalidade do modo básico é oferecer suporte à interoperabilidade entre componentes de fornecedores diferentes.</span><span class="sxs-lookup"><span data-stu-id="8d52e-138">The purpose of the basic mode is to support interoperability among components from different vendors.</span></span>
-   <span data-ttu-id="8d52e-139">No modo avançado, a unidade biométrica usa funções de armazenamento e processamento integrado.</span><span class="sxs-lookup"><span data-stu-id="8d52e-139">In the advanced mode, the biometric unit uses onboard processing and storage functions.</span></span> <span data-ttu-id="8d52e-140">Ele deve expor as interfaces padrão, mas pode gerar e processar amostras em qualquer formato desejado.</span><span class="sxs-lookup"><span data-stu-id="8d52e-140">It must expose the standard interfaces but can generate and process samples in any format desired.</span></span>

<span data-ttu-id="8d52e-141">Quando uma unidade biométrica é movida de um pool de sensores para outro, seus adaptadores são descarregados e reconfigurados para o novo pool de sensores.</span><span class="sxs-lookup"><span data-stu-id="8d52e-141">When a biometric unit is moved from one sensor pool to another, its adapters are unloaded and it is reconfigured for the new sensor pool.</span></span> <span data-ttu-id="8d52e-142">A identidade da unidade biométrica permanece constante; somente a configuração de hardware e os plug-ins de adaptador são alterados.</span><span class="sxs-lookup"><span data-stu-id="8d52e-142">The identity of the biometric unit remains constant; only the hardware configuration and adapter plug-ins change.</span></span>

### <a name="shut-down"></a><span data-ttu-id="8d52e-143">Desligar</span><span class="sxs-lookup"><span data-stu-id="8d52e-143">Shut Down</span></span>

<span data-ttu-id="8d52e-144">Quando o serviço de biometria do Windows é desligado ou quando o Plug and Play Manager o notifica de que uma unidade foi removida, o serviço exclui todas as unidades biométricas.</span><span class="sxs-lookup"><span data-stu-id="8d52e-144">When the Windows Biometric Service shuts down or when the Plug and Play manager notifies it that a unit has been removed, the service deletes all biometric units.</span></span>

## <a name="adapters"></a><span data-ttu-id="8d52e-145">Adaptadores</span><span class="sxs-lookup"><span data-stu-id="8d52e-145">Adapters</span></span>

<span data-ttu-id="8d52e-146">Os componentes de software de plug-in chamados adaptadores conectam uma unidade biométrica ao seu hardware subjacente e fornecem qualquer funcionalidade que possa estar faltando no hardware do sensor.</span><span class="sxs-lookup"><span data-stu-id="8d52e-146">Plug-in software components called adapters connect a biometric unit to its underlying hardware and supply any functionality that may be missing from the sensor hardware.</span></span> <span data-ttu-id="8d52e-147">Há três tipos de adaptadores que você pode criar:</span><span class="sxs-lookup"><span data-stu-id="8d52e-147">There are three types of adapters that you can create:</span></span>

-   <span data-ttu-id="8d52e-148">Um adaptador de sensor encapsula um dispositivo biométrico e fornece uma interface padrão para configurar o sensor, capturar amostras e controlar o fluxo de dados biométricos para o mecanismo de processamento.</span><span class="sxs-lookup"><span data-stu-id="8d52e-148">A sensor adapter wraps a biometric device and provides a standard interface for configuring the sensor, capturing samples, and controlling the flow of biometric data to the processing engine.</span></span>
-   <span data-ttu-id="8d52e-149">Um adaptador de mecanismo gera modelos biométricos de amostras capturadas, corresponde a amostras a modelos existentes e modelos de índices.</span><span class="sxs-lookup"><span data-stu-id="8d52e-149">An engine adapter generates biometric templates from captured samples, matches samples to existing templates, and indexes templates.</span></span>
-   <span data-ttu-id="8d52e-150">Um adaptador de armazenamento gerencia bancos de dados de modelo.</span><span class="sxs-lookup"><span data-stu-id="8d52e-150">A storage adapter manages template databases.</span></span>

<span data-ttu-id="8d52e-151">Os adaptadores podem ser carregados e descarregados em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="8d52e-151">Adapters can be loaded and unloaded at runtime.</span></span> <span data-ttu-id="8d52e-152">Isso permite que o serviço de biometria do Windows reconfigure dinamicamente uma unidade biométrica conectando-a a um conjunto diferente de adaptadores.</span><span class="sxs-lookup"><span data-stu-id="8d52e-152">This enables the Windows Biometric Service to dynamically reconfigure a biometric unit by connecting it to a different set of adapters.</span></span>

<span data-ttu-id="8d52e-153">Por fim, cada uma das interfaces de sensor, mecanismo e adaptador de armazenamento expõe dois métodos, **ControlUnit** e **ControlUnitPrivileged**, que permitem que os aplicativos cliente acessem os recursos de adaptador personalizado definidos pelo fornecedor.</span><span class="sxs-lookup"><span data-stu-id="8d52e-153">Finally, each of the sensor, engine, and storage adapter interfaces expose two methods, **ControlUnit** and **ControlUnitPrivileged**, that enable client applications to access custom adapter capabilities defined by the vendor.</span></span> <span data-ttu-id="8d52e-154">Isso permite que o fornecedor defina um conjunto quase ilimitado de operações de controle para um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8d52e-154">This allows the vendor to define an almost unlimited set of control operations for a device.</span></span> <span data-ttu-id="8d52e-155">Além disso, escolhendo qual função implementar, um fornecedor pode optar por disponibilizar algumas operações de controle para usuários sem privilégios, ao mesmo tempo que restringi outras operações a usuários com privilégios.</span><span class="sxs-lookup"><span data-stu-id="8d52e-155">Further, by choosing which function to implement, a vendor can choose to make some control operations available to non-privileged users while restricting other operations to privileged users.</span></span>

<span data-ttu-id="8d52e-156">Para obter mais informações sobre como criar adaptadores, consulte [criar plug-ins de adaptador](creating-adapter-plug-ins.md).</span><span class="sxs-lookup"><span data-stu-id="8d52e-156">For more information about how to create adapters, see [Create adapter plug-ins](creating-adapter-plug-ins.md).</span></span>

## <a name="adapter-performance-requirements"></a><span data-ttu-id="8d52e-157">Requisitos de desempenho do adaptador</span><span class="sxs-lookup"><span data-stu-id="8d52e-157">Adapter performance requirements</span></span>

<span data-ttu-id="8d52e-158">Como o objetivo é a rápida resposta geral, o desempenho de um adaptador não é especificado em termos de limites de tempo em rotinas específicas.</span><span class="sxs-lookup"><span data-stu-id="8d52e-158">Because the objective is fast response overall, the performance of an adapter isn't specified in terms of time limits on specific routines.</span></span> <span data-ttu-id="8d52e-159">Em vez disso, o desempenho é especificado como um conjunto de requisitos para a experiência geral do usuário.</span><span class="sxs-lookup"><span data-stu-id="8d52e-159">Instead, performance is specified as a set of requirements for the overall user experience.</span></span>

<span data-ttu-id="8d52e-160">Há dois requisitos:</span><span class="sxs-lookup"><span data-stu-id="8d52e-160">There are two requirements:</span></span>

-   <span data-ttu-id="8d52e-161">Qualquer interação entre o usuário e o sistema operacional que envolve a biometria deve ser concluída dentro de dois segundos.</span><span class="sxs-lookup"><span data-stu-id="8d52e-161">Any interaction between the user and the operating system that involves biometrics must complete within two seconds.</span></span> <span data-ttu-id="8d52e-162">Esse intervalo mede a hora de início a término que o usuário percebe a partir do momento em que toca ou passa o sensor até o momento em que algo visível acontece na tela do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8d52e-162">That interval measures the start-to-finish time that the user perceives from the time they touch or swipe the sensor until the time something visible happens on the device screen.</span></span> <span data-ttu-id="8d52e-163">(Por exemplo, durante o desbloqueio, não deve haver mais que um atraso de dois segundos entre o usuário tocar ou passar o sensor de impressão digital e a tela de bloqueio confirmando a identidade do usuário.)</span><span class="sxs-lookup"><span data-stu-id="8d52e-163">(For example, during unlock, there must be no more than a two-second delay between the user touching or swiping the fingerprint sensor and the lock screen acknowledging the user's identity.)</span></span>
-   <span data-ttu-id="8d52e-164">Para a aparência inicial dos blocos de credencial na tela de entrada ou de bloqueio, permitimos um pouco mais de tempo (três segundos, máximo), mas ainda preferimos mais cedo, em vez de mais tarde.</span><span class="sxs-lookup"><span data-stu-id="8d52e-164">For the initial appearance of credential tiles on the sign-in or lock screen, we allow a little more time (three seconds, maximum), but we still prefer sooner rather than later.</span></span> <span data-ttu-id="8d52e-165">Especificamente, o bloco bio precisa ser visível na tela dentro de três segundos da aparência do painel de bloqueio ou de entrada.</span><span class="sxs-lookup"><span data-stu-id="8d52e-165">Specifically, the bio tile needs to be visible on screen within three seconds of the appearance of the lock or sign-in panel.</span></span>

<span data-ttu-id="8d52e-166">Esses números não são arbitrários.</span><span class="sxs-lookup"><span data-stu-id="8d52e-166">These numbers are not arbitrary.</span></span> <span data-ttu-id="8d52e-167">Vários estudos mostraram que seres humanos tendem a experimentar tudo o que acontece dentro de um intervalo de dois segundos como parte do momento "agora".</span><span class="sxs-lookup"><span data-stu-id="8d52e-167">Numerous studies have shown that human beings tend to experience everything that happens within a two-second interval as part of the "now" moment.</span></span> <span data-ttu-id="8d52e-168">Se o evento A e o evento B ocorrerem dentro de dois segundos um do outro, as pessoas perceberão esses eventos como sendo simultâneos.</span><span class="sxs-lookup"><span data-stu-id="8d52e-168">If event A and event B happen within two seconds of each other, people perceive those events as being simultaneous.</span></span> <span data-ttu-id="8d52e-169">Se os eventos forem separados por mais de três segundos, as pessoas acham que há um atraso — eles acham que algo está "demorando muito."</span><span class="sxs-lookup"><span data-stu-id="8d52e-169">If the events are separated by more than about three seconds, people think there's a delay—they feel that something is "taking too long."</span></span> <span data-ttu-id="8d52e-170">Esse é um problema de psicologia humana fisicamente.</span><span class="sxs-lookup"><span data-stu-id="8d52e-170">So this is an issue of hardwired human psychology.</span></span>

 

 