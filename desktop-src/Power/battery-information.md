---
description: As baterias podem fornecer energia para computadores portáteis e computadores em execução em uma fonte de alimentação ininterrupta (UPS).
ms.assetid: 3580b37d-611c-46b4-9300-4943833d6852
title: Informações da bateria
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4f9838a2a95db037b9655f116f07e3cf2e072d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105766834"
---
# <a name="battery-information"></a><span data-ttu-id="44138-103">Informações da bateria</span><span class="sxs-lookup"><span data-stu-id="44138-103">Battery Information</span></span>

<span data-ttu-id="44138-104">As baterias podem fornecer energia para computadores portáteis e computadores em execução em uma fonte de alimentação ininterrupta (UPS).</span><span class="sxs-lookup"><span data-stu-id="44138-104">Batteries can provide power for portable computers and computers running on an uninterruptible power supply (UPS).</span></span> <span data-ttu-id="44138-105">Nesses computadores, o sistema operacional fornece informações sobre o estado da bateria para que os aplicativos possam fornecer funções úteis para o usuário.</span><span class="sxs-lookup"><span data-stu-id="44138-105">On these computers, the operating system provides information on the state of the battery so applications can provide useful functions for the user.</span></span> <span data-ttu-id="44138-106">(Alguns sistemas de bateria não padrão mais antigos e UPSs não têm suporte.)</span><span class="sxs-lookup"><span data-stu-id="44138-106">(Some older nonstandard battery systems and UPSs are not supported.)</span></span>

<span data-ttu-id="44138-107">Observe que esta visão geral pressupõe que você esteja familiarizado com o [Gerenciamento de dispositivos](/windows/desktop/DevIO/device-management).</span><span class="sxs-lookup"><span data-stu-id="44138-107">Note that this overview assumes you are familiar with [device management](/windows/desktop/DevIO/device-management).</span></span>

<span data-ttu-id="44138-108">Para obter informações sobre o status da bateria, use a função [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) , que retorna informações gerais sobre todas as fontes de energia no sistema.</span><span class="sxs-lookup"><span data-stu-id="44138-108">To obtain information about the battery status, use the [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) function, which returns general information about all power sources in the system.</span></span> <span data-ttu-id="44138-109">Você deve usar **GetSystemPowerStatus** sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="44138-109">You should use **GetSystemPowerStatus** whenever possible.</span></span>

<span data-ttu-id="44138-110">Em alguns casos, no entanto, são necessárias informações detalhadas sobre cada bateria individual.</span><span class="sxs-lookup"><span data-stu-id="44138-110">In some cases, however, detailed information about each individual battery is necessary.</span></span> <span data-ttu-id="44138-111">Para essa finalidade, cada dispositivo de bateria expõe uma interface de IOCTL.</span><span class="sxs-lookup"><span data-stu-id="44138-111">For this purpose, each battery device exposes an IOCTL interface.</span></span> <span data-ttu-id="44138-112">As seguintes operações de IOCTL são executadas usando a função [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) :</span><span class="sxs-lookup"><span data-stu-id="44138-112">The following IOCTL operations are performed using the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function:</span></span>

<dl>

[<span data-ttu-id="44138-113">**\_informações de \_ consulta da bateria do IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="44138-113">**IOCTL\_BATTERY\_QUERY\_INFORMATION**</span></span>](ioctl-battery-query-information.md)  
[<span data-ttu-id="44138-114">**\_status de \_ consulta da bateria do IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="44138-114">**IOCTL\_BATTERY\_QUERY\_STATUS**</span></span>](ioctl-battery-query-status.md)  
[<span data-ttu-id="44138-115">**\_marca de \_ consulta da bateria do IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="44138-115">**IOCTL\_BATTERY\_QUERY\_TAG**</span></span>](ioctl-battery-query-tag.md)  
[<span data-ttu-id="44138-116">**\_informações do \_ conjunto de baterias do IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="44138-116">**IOCTL\_BATTERY\_SET\_INFORMATION**</span></span>](ioctl-battery-set-information.md)  
</dl>

<span data-ttu-id="44138-117">Para usar essa interface, um aplicativo deve seguir várias etapas.</span><span class="sxs-lookup"><span data-stu-id="44138-117">To use this interface, an application must follow several steps.</span></span> <span data-ttu-id="44138-118">Primeiro, ele deve usar rotinas de instalação para enumerar todos os dispositivos que têm uma interface de classe de bateria.</span><span class="sxs-lookup"><span data-stu-id="44138-118">First, it must use setup routines to enumerate all devices that have a battery class interface.</span></span> <span data-ttu-id="44138-119">Observe que esses dispositivos representam as portas de bateria, não as baterias reais presentes no sistema.</span><span class="sxs-lookup"><span data-stu-id="44138-119">Note that these devices represent the battery ports, not actual batteries present in the system.</span></span> <span data-ttu-id="44138-120">O aplicativo deve, então, abrir um identificador para cada dispositivo para que ele possa usar a função [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) para enviar solicitações ao dispositivo e, em seguida, adquirir marcas para todas as baterias inseridas.</span><span class="sxs-lookup"><span data-stu-id="44138-120">The application must then open a handle to each device so it can use the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function to send requests to the device, and then acquire tags for any batteries that are inserted.</span></span> <span data-ttu-id="44138-121">Depois de concluir essas etapas, o aplicativo pode enviar consultas para cada dispositivo de bateria.</span><span class="sxs-lookup"><span data-stu-id="44138-121">After completing these steps, the application can send queries to each battery device.</span></span>

## <a name="battery-tags"></a><span data-ttu-id="44138-122">Marcas de bateria</span><span class="sxs-lookup"><span data-stu-id="44138-122">Battery Tags</span></span>

<span data-ttu-id="44138-123">Como cada dispositivo de bateria representa um slot no qual uma bateria pode ser inserida, deve haver uma maneira de determinar quando a bateria é removida e reinserida, substituída ou alterada de qualquer outra forma.</span><span class="sxs-lookup"><span data-stu-id="44138-123">Because each battery device represents a slot into which a battery can be inserted, there must be a way to determine when the battery is removed and reinserted, replaced, or changed in any other way.</span></span> <span data-ttu-id="44138-124">Para fazer isso, é atribuída uma marca a cada bateria em um slot específico.</span><span class="sxs-lookup"><span data-stu-id="44138-124">To do this, each battery in a particular slot is assigned a tag.</span></span> <span data-ttu-id="44138-125">Essa marca deve ser usada para todas as consultas para obter informações.</span><span class="sxs-lookup"><span data-stu-id="44138-125">This tag must be used for all queries for information.</span></span> <span data-ttu-id="44138-126">Se a marca fornecida pelo aplicativo não corresponder à bateria, a consulta falhará, indicando ao aplicativo que a bateria mudou de alguma forma.</span><span class="sxs-lookup"><span data-stu-id="44138-126">If the tag provided by the application does not match the battery, the query fails, indicating to the application that the battery has changed in some way.</span></span> <span data-ttu-id="44138-127">Para concluir a consulta com êxito, uma nova marca de bateria é necessária.</span><span class="sxs-lookup"><span data-stu-id="44138-127">To successfully complete the query, a new battery tag is required.</span></span> <span data-ttu-id="44138-128">Adquira a marca usando a operação de [**\_ \_ \_ marca de consulta da bateria do IOCTL**](ioctl-battery-query-tag.md) .</span><span class="sxs-lookup"><span data-stu-id="44138-128">Acquire the tag using the [**IOCTL\_BATTERY\_QUERY\_TAG**](ioctl-battery-query-tag.md) operation.</span></span> <span data-ttu-id="44138-129">Se uma bateria estiver presente nesse slot, a marca retornada poderá ser passada para qualquer uma das outras IOCTLs de bateria para executar outras funções.</span><span class="sxs-lookup"><span data-stu-id="44138-129">If a battery is present in that slot, the tag returned can be passed to any of the other battery IOCTLs to perform other functions.</span></span> <span data-ttu-id="44138-130">Em um sistema com várias baterias, cada dispositivo de bateria (slot) emite marcas de bateria de forma independente, portanto, a marca de dois dispositivos separados pode, às vezes, ser idêntica.</span><span class="sxs-lookup"><span data-stu-id="44138-130">On a multi-battery system, each battery device (slot) issues battery tags independently, so the tag from two separate devices could at times be identical.</span></span>

<span data-ttu-id="44138-131">Uma alteração na marca de bateria não significa necessariamente que a bateria foi removida e reinserida ou substituída.</span><span class="sxs-lookup"><span data-stu-id="44138-131">A change in the battery tag does not necessarily mean that the battery was removed and reinserted or replaced.</span></span> <span data-ttu-id="44138-132">Uma nova marca pode ser gerada se houver uma alteração em qualquer um dos dados que normalmente seriam estáticos.</span><span class="sxs-lookup"><span data-stu-id="44138-132">A new tag can be generated if there is a change in any of the data that would normally be static.</span></span> <span data-ttu-id="44138-133">Por exemplo, quando uma bateria é feita a cobrança, a última capacidade totalmente carregada pode ter mudado.</span><span class="sxs-lookup"><span data-stu-id="44138-133">For example, when a battery is done charging, the last fully charged capacity may have changed.</span></span> <span data-ttu-id="44138-134">A marca também pode mudar se a comunicação da bateria foi temporariamente perdida ou se houve uma notificação inadequada do BIOS.</span><span class="sxs-lookup"><span data-stu-id="44138-134">The tag can also change if battery communication was temporarily lost or if there was an improper notification from the BIOS.</span></span> <span data-ttu-id="44138-135">Em alguns sistemas, a marca de bateria pode ser atualizada sempre que o status de AC for alterado.</span><span class="sxs-lookup"><span data-stu-id="44138-135">On some systems, the battery tag may be updated whenever the AC status changes.</span></span> <span data-ttu-id="44138-136">Esse comportamento é devido a uma característica do sistema de bateria e não é comum.</span><span class="sxs-lookup"><span data-stu-id="44138-136">This behavior is due to a characteristic of the battery system and isn't common.</span></span>

<span data-ttu-id="44138-137">Sempre que a marca de bateria é atualizada, a bateria deve ser tratada como se fosse uma nova bateria e todos os dados armazenados em cache devem ser lidos novamente.</span><span class="sxs-lookup"><span data-stu-id="44138-137">Whenever the battery tag is updated, the battery should be treated as if it were a new battery and all cached data should be re-read.</span></span> <span data-ttu-id="44138-138">Se um aplicativo precisar saber se a mesma bateria física está presente, ele deve verificar o valor de **BatteryUniqueID** no buffer de saída das [**\_ \_ \_ informações de consulta da bateria do IOCTL**](ioctl-battery-query-information.md) quando chamado com o nível de informações **BatteryUniqueID** .</span><span class="sxs-lookup"><span data-stu-id="44138-138">If an application needs to know if the same physical battery is present, it should check the value of **BatteryUniqueID** in the output buffer of [**IOCTL\_BATTERY\_QUERY\_INFORMATION**](ioctl-battery-query-information.md) when called with the **BatteryUniqueID** information level.</span></span>

## <a name="related-topics"></a><span data-ttu-id="44138-139">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="44138-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="44138-140">Sobre o gerenciamento de energia</span><span class="sxs-lookup"><span data-stu-id="44138-140">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="44138-141">Enumerando dispositivos de bateria</span><span class="sxs-lookup"><span data-stu-id="44138-141">Enumerating Battery Devices</span></span>](enumerating-battery-devices.md)
</dt> </dl>

 

 
