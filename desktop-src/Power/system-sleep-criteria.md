---
description: Contanto que o sistema determine que há atividade de usuário ou aplicativo, ele não entrará em suspensão.
ms.assetid: 83c9394a-1813-405a-802a-0623e5de50d3
title: Critérios de suspensão do sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90950b980ec1e0fa06171d7a57d76b410534f96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103662177"
---
# <a name="system-sleep-criteria"></a><span data-ttu-id="a0c4f-103">Critérios de suspensão do sistema</span><span class="sxs-lookup"><span data-stu-id="a0c4f-103">System Sleep Criteria</span></span>

<span data-ttu-id="a0c4f-104">Contanto que o sistema determine que há atividade de usuário ou aplicativo, ele não entrará em suspensão.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-104">As long as the system determines that there is user or application activity, it will not enter sleep.</span></span> <span data-ttu-id="a0c4f-105">O sistema pode detectar determinadas atividades, como entrada de usuário ou comunicações de rede.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-105">The system can detect certain activities, such as user input or network communications.</span></span> <span data-ttu-id="a0c4f-106">No entanto, há outras atividades que o sistema não pode detectar.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-106">However, there are other activities that the system cannot detect.</span></span> <span data-ttu-id="a0c4f-107">Por exemplo, um aplicativo de apresentação requer a tela para exibição.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-107">For example, a presentation application requires the screen for display.</span></span> <span data-ttu-id="a0c4f-108">No entanto, pode parecer que o aplicativo está ocioso durante a apresentação, fazendo com que o sistema desative a exibição.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-108">However, it may appear that the application is idle during the presentation, causing the system to turn off the display.</span></span>

<span data-ttu-id="a0c4f-109">Para notificar o sistema de que seu aplicativo está ocupado, use a função [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) .</span><span class="sxs-lookup"><span data-stu-id="a0c4f-109">To notify the system that your application is busy, use the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function.</span></span> <span data-ttu-id="a0c4f-110">Essa função impede que o sistema entre em suspensão ou desative a exibição enquanto o aplicativo está em execução.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-110">This function prevents the system from entering sleep or turning off the display while the application is running.</span></span>

<span data-ttu-id="a0c4f-111">Os aplicativos de apresentação e multimídia devem chamar a função [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) com a **\_ exibição es \_ necessária** para que o sistema saiba que ele não deve colocar o dispositivo de vídeo em suspensão.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-111">Presentation and multimedia applications must call the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function with **ES\_DISPLAY\_REQUIRED** so that the system will know that it should not put the display device to sleep.</span></span> <span data-ttu-id="a0c4f-112">Aplicativos de manipulação de eventos, como ferramentas para gerenciar faxes de entrada, devem chamar **SetThreadExecutionState** com o **\_ sistema es \_ necessário**, manipular o evento e, em seguida, limpar o sinalizador para que o sistema possa retornar ao modo de suspensão.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-112">Event-handling applications, such as tools for managing incoming faxes, must call **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, handle the event, and then clear the flag so the system can return to sleep.</span></span> <span data-ttu-id="a0c4f-113">Observe que a maioria dos aplicativos de produtividade não precisa usar **SetThreadExecutionState** porque o sistema geralmente pode determinar a atividade por entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-113">Note that most productivity applications do not need to use **SetThreadExecutionState** because the system can usually determine activity by user input.</span></span>

<span data-ttu-id="a0c4f-114">Para manter o tempo desde a última entrada do usuário, o sistema usa um temporizador ocioso de vídeo e um temporizador ocioso do sistema.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-114">To maintain the time since the last user input, the system uses a display idle timer and a system idle timer.</span></span> <span data-ttu-id="a0c4f-115">O sistema compara os temporizadores ociosos com os valores configurados no plano de energia.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-115">The system compares the idle timers to the values configured in the power plan.</span></span> <span data-ttu-id="a0c4f-116">Se o valor do temporizador ocioso de exibição for maior que o valor de tempo limite de exibição e nenhum thread tiver solicitado a exibição chamando [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) com a **\_ exibição es \_ necessária**, o sistema desligará a exibição.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-116">If the display idle timer value is greater than the display time-out value, and no threads have requested the display by calling [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) with **ES\_DISPLAY\_REQUIRED**, the system powers off the display.</span></span> <span data-ttu-id="a0c4f-117">Da mesma forma, se o temporizador ocioso do sistema for maior que o valor do tempo limite do sistema e nenhum aplicativo tiver solicitado o sistema chamando **SetThreadExecutionState** com o **\_ sistema es \_ necessário**, o sistema entrará em suspensão.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-117">Similarly, if the system idle timer is greater than the system time-out value and no applications have requested the system by calling **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, the system enters sleep.</span></span>

<span data-ttu-id="a0c4f-118">O sistema mantém uma contagem de aplicativos que chamaram [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span><span class="sxs-lookup"><span data-stu-id="a0c4f-118">The system maintains a count of applications that have called [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span></span> <span data-ttu-id="a0c4f-119">O sistema rastreia cada thread que chama **SetThreadExecutionState** e ajusta o contador de acordo.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-119">The system tracks each thread that calls **SetThreadExecutionState** and adjusts the counter accordingly.</span></span> <span data-ttu-id="a0c4f-120">Se esse contador chegar a zero e não houver nenhuma entrada do usuário, o sistema entrará em suspensão.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-120">If this counter reaches zero and there has not been any user input, the system enters sleep.</span></span>

<span data-ttu-id="a0c4f-121">Se a energia for baixa, um aplicativo poderá solicitar a intervenção do usuário ou solicitar que o sistema se suspenda.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-121">If power is low, an application can request user intervention or request that the system suspend itself.</span></span> <span data-ttu-id="a0c4f-122">Você pode suspender a operação do sistema usando a função [**Setsuspendestate**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) .</span><span class="sxs-lookup"><span data-stu-id="a0c4f-122">You can suspend system operation by using the [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) function.</span></span>

<span data-ttu-id="a0c4f-123">Se o sistema for ativado automaticamente ([PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), nenhum dos temporizadores será relevante.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-123">If the system wakes automatically ([PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), none of the timers are relevant.</span></span> <span data-ttu-id="a0c4f-124">Para obter mais informações, consulte [eventos de ativação do sistema](system-wake-up-events.md).</span><span class="sxs-lookup"><span data-stu-id="a0c4f-124">For more information, see [System Wake-up Events](system-wake-up-events.md).</span></span>

## <a name="entering-sleep"></a><span data-ttu-id="a0c4f-125">Entrando em suspensão</span><span class="sxs-lookup"><span data-stu-id="a0c4f-125">Entering Sleep</span></span>

<span data-ttu-id="a0c4f-126">Quando o sistema entra em suspensão, ele preserva automaticamente o estado do sistema inteiro e de todos os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-126">When the system enters sleep, it will automatically preserve the state of the entire system and all applications.</span></span> <span data-ttu-id="a0c4f-127">Portanto, a maioria dos aplicativos não precisa executar nenhuma ação especial.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-127">Therefore, most applications do not need to take any special action.</span></span> <span data-ttu-id="a0c4f-128">Os aplicativos que precisam executar ações específicas antes que as transições do sistema possam se registrar para eventos de energia.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-128">Applications that need to perform specific actions before the system transitions can register for power events.</span></span>

<span data-ttu-id="a0c4f-129">Quando o sistema envia um evento [PBT \_ APMSUSPEND](pbt-apmsuspend.md) , cada aplicativo tem dois segundos para executar as ações necessárias antes que o sistema inicie a transição para Sleep.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-129">When the system sends a [PBT\_APMSUSPEND](pbt-apmsuspend.md) event, each application has two seconds to perform any necessary actions before the system starts the transition to sleep.</span></span> <span data-ttu-id="a0c4f-130">Os aplicativos devem limitar a ação que eles levam em resposta a esse evento para garantir que eles concluam todas as operações no tempo alocado.</span><span class="sxs-lookup"><span data-stu-id="a0c4f-130">Applications must limit what action they take in response to this event to ensure that they complete all operations in the time allotted.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a0c4f-131">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a0c4f-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a0c4f-132">Sobre o gerenciamento de energia</span><span class="sxs-lookup"><span data-stu-id="a0c4f-132">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="a0c4f-133">Eventos de ativação do sistema</span><span class="sxs-lookup"><span data-stu-id="a0c4f-133">System Wake-up Events</span></span>](system-wake-up-events.md)
</dt> </dl>

 

 



