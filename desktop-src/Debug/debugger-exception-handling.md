---
description: A manipulação do sistema de exceções de modo de usuário fornece suporte para depuradores sofisticados.
ms.assetid: c45a7dc6-e6b2-4fc4-9522-12d96893f4c7
title: Manipulação de exceção do depurador
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6aff6d566e8798aaf4f3113ce6d8f44a3bc71ba
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104456880"
---
# <a name="debugger-exception-handling"></a><span data-ttu-id="db210-103">Manipulação de exceção do depurador</span><span class="sxs-lookup"><span data-stu-id="db210-103">Debugger Exception Handling</span></span>

<span data-ttu-id="db210-104">A manipulação do sistema de exceções de modo de usuário fornece suporte para depuradores sofisticados.</span><span class="sxs-lookup"><span data-stu-id="db210-104">The system's handling of user-mode exceptions provides support for sophisticated debuggers.</span></span> <span data-ttu-id="db210-105">Se o processo no qual ocorre uma exceção estiver sendo depurado, o sistema gerará um evento de depuração.</span><span class="sxs-lookup"><span data-stu-id="db210-105">If the process in which an exception occurs is being debugged, the system generates a debug event.</span></span> <span data-ttu-id="db210-106">Se o depurador estiver usando a função [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) , o evento Debug fará com que essa função retorne com um ponteiro para uma estrutura de [**\_ eventos de depuração**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) .</span><span class="sxs-lookup"><span data-stu-id="db210-106">If the debugger is using the [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) function, the debug event causes that function to return with a pointer to a [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure.</span></span> <span data-ttu-id="db210-107">Essa estrutura contém o processo e os identificadores de thread que o depurador pode usar para acessar o registro de contexto do thread.</span><span class="sxs-lookup"><span data-stu-id="db210-107">This structure contains the process and thread identifiers the debugger can use to access the thread's context record.</span></span> <span data-ttu-id="db210-108">A estrutura também contém uma estrutura de [**\_ \_ informações de depuração de exceção**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) que inclui uma cópia do registro de exceção.</span><span class="sxs-lookup"><span data-stu-id="db210-108">The structure also contains an [**EXCEPTION\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) structure that includes a copy of the exception record.</span></span>

<span data-ttu-id="db210-109">Quando o sistema está procurando um manipulador de exceção, ele faz duas tentativas de notificar o depurador de um processo.</span><span class="sxs-lookup"><span data-stu-id="db210-109">When the system is searching for an exception handler, it makes two attempts to notify a process's debugger.</span></span> <span data-ttu-id="db210-110">A primeira tentativa de notificação fornece ao depurador uma oportunidade para manipular o ponto de interrupção ou exceções de etapa única.</span><span class="sxs-lookup"><span data-stu-id="db210-110">The first notification attempt provides the debugger with an opportunity to handle breakpoint or single-step exceptions.</span></span> <span data-ttu-id="db210-111">Isso é conhecido como *notificação de primeira chance*.</span><span class="sxs-lookup"><span data-stu-id="db210-111">This is known as *first-chance notification*.</span></span> <span data-ttu-id="db210-112">O usuário pode emitir comandos do depurador para manipular o ambiente do processo antes de qualquer manipulador de exceção ser executado.</span><span class="sxs-lookup"><span data-stu-id="db210-112">The user can then issue debugger commands to manipulate the process's environment before any exception handlers are executed.</span></span> <span data-ttu-id="db210-113">A segunda tentativa de notificar o depurador ocorrerá somente se o sistema não conseguir encontrar um manipulador de exceção baseado em quadro que manipule a exceção.</span><span class="sxs-lookup"><span data-stu-id="db210-113">The second attempt to notify the debugger occurs only if the system is unable to find a frame-based exception handler that handles the exception.</span></span> <span data-ttu-id="db210-114">Isso é conhecido como *notificação de última chance*.</span><span class="sxs-lookup"><span data-stu-id="db210-114">This is known as *last-chance notification*.</span></span> <span data-ttu-id="db210-115">Se o depurador não tratar a exceção após a notificação de última chance, o sistema encerrará o processo que está sendo depurado.</span><span class="sxs-lookup"><span data-stu-id="db210-115">If the debugger does not handle the exception after the last-chance notification, the system terminates the process being debugged.</span></span>

<span data-ttu-id="db210-116">Em cada tentativa de notificação, o depurador usa a função [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) para retornar o controle ao sistema.</span><span class="sxs-lookup"><span data-stu-id="db210-116">At each notification attempt, the debugger uses the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function to return control to the system.</span></span> <span data-ttu-id="db210-117">Antes de retornar o controle, o depurador pode manipular a exceção e modificar o estado do thread conforme apropriado ou pode optar por não lidar com a exceção.</span><span class="sxs-lookup"><span data-stu-id="db210-117">Before returning control, the debugger can handle the exception and modify the thread state as appropriate, or it can choose not to handle the exception.</span></span> <span data-ttu-id="db210-118">Usando **ContinueDebugEvent**, o depurador pode indicar que ele tratou a exceção; nesse caso, o estado da máquina é restaurado e a execução do thread continua no ponto em que a exceção ocorreu.</span><span class="sxs-lookup"><span data-stu-id="db210-118">Using **ContinueDebugEvent**, the debugger can indicate that it has handled the exception, in which case the machine state is restored and thread execution is continued at the point at which the exception occurred.</span></span> <span data-ttu-id="db210-119">O depurador também pode indicar que ele não trata a exceção, o que faz com que o sistema continue sua pesquisa por um manipulador de exceção.</span><span class="sxs-lookup"><span data-stu-id="db210-119">The debugger can also indicate that it did not handle the exception, which causes the system to continue its search for an exception handler.</span></span>

 

 
