---
description: O manipulador de símbolo carregará símbolos quando você chamar a função SymInitialize com o parâmetro fInvadeProcess definido como TRUE ou quando você chamar a função SymLoadModuleEx para especificar um módulo.
ms.assetid: fae1895e-9fed-45e3-8ecf-4c6cc67a6094
title: Carregamento de símbolos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 705a7af3525c784b2bbcd512b267309a466a11c1
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104370368"
---
# <a name="symbol-loading"></a><span data-ttu-id="318b4-103">Carregamento de símbolos</span><span class="sxs-lookup"><span data-stu-id="318b4-103">Symbol Loading</span></span>

<span data-ttu-id="318b4-104">O manipulador de símbolo carregará símbolos quando você chamar a função [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) com o parâmetro *FInvadeProcess* definido como **true** ou quando você chamar a função [**SymLoadModuleEx**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) para especificar um módulo.</span><span class="sxs-lookup"><span data-stu-id="318b4-104">The symbol handler will load symbols when you call the [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) function with the *fInvadeProcess* parameter set to **TRUE** or when you call the [**SymLoadModuleEx**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) function to specify a module.</span></span> <span data-ttu-id="318b4-105">Em ambos os casos, o manipulador de símbolo carrega os símbolos ou adia o carregamento do símbolo até que os símbolos sejam solicitados, dependendo das opções definidas pela função [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) .</span><span class="sxs-lookup"><span data-stu-id="318b4-105">In either case, the symbol handler either loads the symbols or defers symbol loading until symbols are requested, depending on the options set by the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function.</span></span>

<span data-ttu-id="318b4-106">O manipulador de símbolo pode ser usado para recuperar informações simbólicas de qualquer módulo; Ele não precisa estar associado a um processo especificado na chamada [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) .</span><span class="sxs-lookup"><span data-stu-id="318b4-106">The symbol handler can be used to retrieve symbolic information for any module; it does not need to be associated with a process specified in the [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) call.</span></span> <span data-ttu-id="318b4-107">Para usar um módulo arbitrário, especifique o caminho completo para a imagem do módulo no parâmetro *ImageName* .</span><span class="sxs-lookup"><span data-stu-id="318b4-107">To use an arbitrary module, specify the full path to the module image in the *ImageName* parameter.</span></span> <span data-ttu-id="318b4-108">Você pode usar um caminho para qualquer módulo executável que tenha informações de depuração (. exe,. dll,. drv,. sys,. SCR,. cpl ou. com).</span><span class="sxs-lookup"><span data-stu-id="318b4-108">You can use a path to any executable module that has debugging information (.exe, .dll, .drv, .sys, .scr, .cpl, or .com).</span></span> <span data-ttu-id="318b4-109">Use o parâmetro *BaseOfDll* para especificar qualquer endereço de carga e os endereços de símbolo serão baseados nesse endereço.</span><span class="sxs-lookup"><span data-stu-id="318b4-109">Use the *BaseOfDll* parameter to specify any load address, then symbol addresses will be based from that address.</span></span>

<span data-ttu-id="318b4-110">Pode não ser necessário manter um módulo de símbolo carregado por meio da duração de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="318b4-110">It may not be necessary to keep a symbol module loaded through the duration of an application.</span></span> <span data-ttu-id="318b4-111">Para liberar o módulo de símbolo da lista de módulos do manipulador de símbolos, use a função [**SymUnloadModule64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symunloadmodule) .</span><span class="sxs-lookup"><span data-stu-id="318b4-111">To release the symbol module from the symbol handler's list of modules, use the [**SymUnloadModule64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symunloadmodule) function.</span></span> <span data-ttu-id="318b4-112">Essa função libera a memória alocada para o módulo de símbolo.</span><span class="sxs-lookup"><span data-stu-id="318b4-112">This function releases the memory allocated for the symbol module.</span></span> <span data-ttu-id="318b4-113">Para usar os símbolos para esse módulo novamente, você deve chamar a função [**SymLoadModuleEx**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) mesmo se a opção de carga adiada de símbolo estiver definida.</span><span class="sxs-lookup"><span data-stu-id="318b4-113">To use symbols for that module again, you must call the [**SymLoadModuleEx**](/windows/desktop/api/Dbghelp/nf-dbghelp-symloadmoduleex) function even if the symbol deferred load option is set.</span></span>

## <a name="diagnosing-symbol-load-problems"></a><span data-ttu-id="318b4-114">Diagnosticando problemas de carregamento de símbolo</span><span class="sxs-lookup"><span data-stu-id="318b4-114">Diagnosing Symbol Load Problems</span></span>

<span data-ttu-id="318b4-115">Para exibir todas as tentativas de carregar símbolos, chame [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) com SYMOPT \_ debug.</span><span class="sxs-lookup"><span data-stu-id="318b4-115">To view all attempts to load symbols, call [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) with SYMOPT\_DEBUG.</span></span> <span data-ttu-id="318b4-116">Isso faz com que o DbgHelp chame a função [**OutputDebugString**](/windows/win32/api/debugapi/nf-debugapi-outputdebugstringa) com informações detalhadas sobre pesquisas de símbolos, como os diretórios que estão pesquisando e mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="318b4-116">This causes DbgHelp to call the [**OutputDebugString**](/windows/win32/api/debugapi/nf-debugapi-outputdebugstringa) function with detailed information on symbol searches, such as the directories it is searching and and error messages.</span></span> <span data-ttu-id="318b4-117">Se seu código usar [**SymRegisterCallback64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symregistercallback), dbghelp chamará sua função de retorno de chamada em vez de chamar **OutputDebugString**.</span><span class="sxs-lookup"><span data-stu-id="318b4-117">If your code uses [**SymRegisterCallback64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symregistercallback), DbgHelp will call your callback function instead of calling **OutputDebugString**.</span></span> <span data-ttu-id="318b4-118">O parâmetro *ActionCode* é definido como \_ informações de depuração do CBA \_ e o parâmetro *CallbackData* é uma cadeia de caracteres que pode ser exibida.</span><span class="sxs-lookup"><span data-stu-id="318b4-118">The *ActionCode* parameter is set to CBA\_DEBUG\_INFO and the *CallbackData* parameter is a string that can be displayed.</span></span>

<span data-ttu-id="318b4-119">Para permitir que essa saída de depuração seja exibida para o console sem alterar o código-fonte, defina a \_ variável de ambiente dbghelp DBGOUT como um valor não **nulo** antes de chamar a função [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) .</span><span class="sxs-lookup"><span data-stu-id="318b4-119">To enable this debug output to be displayed to the console without changing your source code, set the DBGHELP\_DBGOUT environment variable to a non-**NULL** value before calling the [**SymInitialize**](/windows/desktop/api/Dbghelp/nf-dbghelp-syminitialize) function.</span></span> <span data-ttu-id="318b4-120">Para registrar as informações em um arquivo, defina a \_ variável de ambiente de log dbghelp como o nome do arquivo de log a ser usado.</span><span class="sxs-lookup"><span data-stu-id="318b4-120">To log the information to a file, set the DBGHELP\_LOG environment variable to the name of the log file to be used.</span></span>

<span data-ttu-id="318b4-121">Observe que esses recursos devem ser usados somente quando necessário.</span><span class="sxs-lookup"><span data-stu-id="318b4-121">Note that these features should be used only when needed.</span></span> <span data-ttu-id="318b4-122">Eles podem reduzir o carregamento de símbolos de módulos que contêm muitos símbolos.</span><span class="sxs-lookup"><span data-stu-id="318b4-122">They may slow down symbol loading of modules that contain many symbols.</span></span>

 

 
