---
description: Os recursos de manipulação de símbolos da API DbgHelp evoluíram ao longo dos anos.
ms.assetid: 6dc41682-6104-418b-b045-7afe8c2b11e9
title: Símbolos públicos, globais e locais
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 623bf93ec8f11d1cec9c5fec64e2479dd91ee5cd
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010152"
---
# <a name="public-global-and-local-symbols"></a><span data-ttu-id="0fad1-103">Símbolos públicos, globais e locais</span><span class="sxs-lookup"><span data-stu-id="0fad1-103">Public, Global, and Local Symbols</span></span>

<span data-ttu-id="0fad1-104">Os recursos de manipulação de símbolos da API DbgHelp evoluíram ao longo dos anos.</span><span class="sxs-lookup"><span data-stu-id="0fad1-104">The symbol handling capabilities of the DbgHelp API have evolved over the years.</span></span> <span data-ttu-id="0fad1-105">Para garantir que seu código funcione em uma variedade de cenários e forneça detalhes completos sobre os símbolos, use as funções mais recentes sempre que possível.</span><span class="sxs-lookup"><span data-stu-id="0fad1-105">To ensure that your code works in a variety of scenarios and provides full details on the symbols, use the newest functions whenever possible.</span></span> <span data-ttu-id="0fad1-106">Por exemplo, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) substitui [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) substitui [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname)e [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) substitui [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span><span class="sxs-lookup"><span data-stu-id="0fad1-106">For example, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) replaces [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) replaces [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname), and [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) replaces [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span></span>

## <a name="public-symbols"></a><span data-ttu-id="0fad1-107">Símbolos públicos</span><span class="sxs-lookup"><span data-stu-id="0fad1-107">Public Symbols</span></span>

<span data-ttu-id="0fad1-108">Versões iniciais do DbgHelp.dll suportadas examinando apenas símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="0fad1-108">Initial versions of DbgHelp.dll supported examining only public symbols.</span></span> <span data-ttu-id="0fad1-109">Esses símbolos são gerados para qualquer item no código que deve ser exposto entre diferentes arquivos de origem.</span><span class="sxs-lookup"><span data-stu-id="0fad1-109">These symbols are generated for any item in the code that must be exposed between different source files.</span></span> <span data-ttu-id="0fad1-110">Eles também incluem todos os itens que são exportados para fora do módulo.</span><span class="sxs-lookup"><span data-stu-id="0fad1-110">They also include all items that are exported out of the module.</span></span>

<span data-ttu-id="0fad1-111">Os símbolos são inseridos na imagem ou armazenados separadamente em um arquivo. dbg ou. pdb.</span><span class="sxs-lookup"><span data-stu-id="0fad1-111">The symbols are either embedded in the image, or stored separately in a .dbg or .pdb file.</span></span> <span data-ttu-id="0fad1-112">As únicas informações armazenadas são o nome e o endereço do símbolo.</span><span class="sxs-lookup"><span data-stu-id="0fad1-112">The only information stored is the symbol name and address.</span></span> <span data-ttu-id="0fad1-113">Os nomes estão disponíveis como nomes decorados.</span><span class="sxs-lookup"><span data-stu-id="0fad1-113">The names are available as decorated names.</span></span> <span data-ttu-id="0fad1-114">Para exibir nomes não decorados, chame a função [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) com SYMOPT \_ UNDNAME ou use a função [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) .</span><span class="sxs-lookup"><span data-stu-id="0fad1-114">To view undecorated names, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with SYMOPT\_UNDNAME, or use the [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) function.</span></span>

<span data-ttu-id="0fad1-115">Observe que a API DbgHelp não foi inicialmente projetada para dar suporte a várias instâncias do mesmo símbolo dentro de um módulo.</span><span class="sxs-lookup"><span data-stu-id="0fad1-115">Note that the DbgHelp API was not initially designed to support multiple instances of the same symbol within a module.</span></span> <span data-ttu-id="0fad1-116">Isso ocorre porque os símbolos públicos são restritos a nomes exclusivos dentro de um módulo.</span><span class="sxs-lookup"><span data-stu-id="0fad1-116">This is because public symbols are restricted to unique names within a module.</span></span> <span data-ttu-id="0fad1-117">Portanto, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) retorna apenas o primeiro símbolo que corresponde.</span><span class="sxs-lookup"><span data-stu-id="0fad1-117">Therefore, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) returns only the first symbol that matches.</span></span> <span data-ttu-id="0fad1-118">Para recuperar todos os símbolos que correspondem, chame [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span><span class="sxs-lookup"><span data-stu-id="0fad1-118">To retrieve all symbols that match, call [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span></span>

## <a name="global-and-local-symbols"></a><span data-ttu-id="0fad1-119">Símbolos globais e locais</span><span class="sxs-lookup"><span data-stu-id="0fad1-119">Global and Local Symbols</span></span>

<span data-ttu-id="0fad1-120">As versões mais recentes do DbgHelp.dll dão suporte a símbolos globais e locais ao usar arquivos. pdb.</span><span class="sxs-lookup"><span data-stu-id="0fad1-120">Newer versions of DbgHelp.dll support global and local symbols when using .pdb files.</span></span> <span data-ttu-id="0fad1-121">Essas novas versões incluem funções estáticas, funções com escopo dentro de um arquivo de origem, parâmetros de função e variáveis locais.</span><span class="sxs-lookup"><span data-stu-id="0fad1-121">These new versions include static functions, functions scoped within a source file, function parameters, and local variables.</span></span> <span data-ttu-id="0fad1-122">Quando o DbgHelp pesquisa um símbolo, ele verifica as tabelas de símbolo globais e locais antes de verificar a tabela de símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="0fad1-122">When DbgHelp searches for a symbol, it checks the global and local symbol tables before checking the public symbol table.</span></span> <span data-ttu-id="0fad1-123">Isso ocorre porque há mais informações disponíveis para esses tipos de símbolos do que está disponível para símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="0fad1-123">This is because there is more information available for these types of symbols than is available for public symbols.</span></span>

<span data-ttu-id="0fad1-124">Os símbolos globais e locais são armazenados com nomes não decorados.</span><span class="sxs-lookup"><span data-stu-id="0fad1-124">Global and local symbols are stored with undecorated names.</span></span> <span data-ttu-id="0fad1-125">Portanto, o \_ sinalizador SYMOPT UNDNAME não tem nenhum efeito.</span><span class="sxs-lookup"><span data-stu-id="0fad1-125">Therefore, the SYMOPT\_UNDNAME flag has no effect.</span></span> <span data-ttu-id="0fad1-126">Para obter nomes de símbolo decorados, você deve usar o \_ sinalizador somente públicos SYMOPTs \_ .</span><span class="sxs-lookup"><span data-stu-id="0fad1-126">To get decorated symbol names, you must use the SYMOPT\_PUBLICS\_ONLY flag.</span></span> <span data-ttu-id="0fad1-127">Isso faz com que o DbgHelp pesquise apenas os símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="0fad1-127">This causes DbgHelp to search only the public symbols.</span></span>

<span data-ttu-id="0fad1-128">Para exibir os símbolos locais ou parâmetros de função, chame a função [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) com o membro **InstructionOffset** da estrutura de [**quadro de \_ pilha \_ do imagehlp**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) definida como o endereço de qualquer símbolo de função.</span><span class="sxs-lookup"><span data-stu-id="0fad1-128">To view local symbols or function parameters, call the [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) function with the **InstructionOffset** member of the [**IMAGEHLP\_STACK\_FRAME**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) structure set to the address of any function symbol.</span></span> <span data-ttu-id="0fad1-129">As chamadas subsequentes para [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) e [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) podem operar dentro do contexto desse endereço.</span><span class="sxs-lookup"><span data-stu-id="0fad1-129">Subsequent calls to [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) and [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) can operate within the context of this address.</span></span> <span data-ttu-id="0fad1-130">Para fazer isso, defina o parâmetro *BaseOfDll* como **NULL** e omita o especificador de módulo do parâmetro *Name* ou *Mask* .</span><span class="sxs-lookup"><span data-stu-id="0fad1-130">To do so, set the *BaseOfDll* parameter to **NULL** and omit the module specifier from the *Name* or *Mask* parameter.</span></span> <span data-ttu-id="0fad1-131">Isso força o DbgHelp a Pesquisar símbolos correspondentes no escopo indicado por **SymSetContext**.</span><span class="sxs-lookup"><span data-stu-id="0fad1-131">This forces DbgHelp to search for matching symbols within the scope indicated by **SymSetContext**.</span></span>

<span data-ttu-id="0fad1-132">Para determinar se um símbolo é um parâmetro, verifique o membro **flags** da estrutura [**de \_ informações de símbolo**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) .</span><span class="sxs-lookup"><span data-stu-id="0fad1-132">To determine if a symbol is a parameter, check the **Flags** member of the [**SYMBOL\_INFO**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) structure.</span></span> <span data-ttu-id="0fad1-133">Se o símbolo for um parâmetro, o membro conterá o \_ parâmetro SYMFLAG.</span><span class="sxs-lookup"><span data-stu-id="0fad1-133">If the symbol is a parameter, the member contains SYMFLAG\_PARAMETER.</span></span> <span data-ttu-id="0fad1-134">Se for um símbolo local, o membro conterá SYMFLAG \_ local.</span><span class="sxs-lookup"><span data-stu-id="0fad1-134">If it is a local symbol, the member contains SYMFLAG\_LOCAL.</span></span>

 

 



