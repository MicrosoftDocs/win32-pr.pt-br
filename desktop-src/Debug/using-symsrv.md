---
description: Usando SymSrv
ms.assetid: d400f222-c50c-4c7b-8f8a-0c3ed3bba3b9
title: Usando SymSrv
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5bbaf68e80555629db8bc9a2a21394b95fe6fb85
ms.sourcegitcommit: f848119a8faa29b27585f4df53f6e50ee9666684
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/27/2021
ms.locfileid: "110550031"
---
# <a name="using-symsrv"></a><span data-ttu-id="55417-103">Usando SymSrv</span><span class="sxs-lookup"><span data-stu-id="55417-103">Using SymSrv</span></span>

<span data-ttu-id="55417-104">O SymSrv entrega arquivos de símbolo de armazenamentos de símbolo centralizados.</span><span class="sxs-lookup"><span data-stu-id="55417-104">SymSrv delivers symbol files from centralized symbol stores.</span></span> <span data-ttu-id="55417-105">Esses armazenamentos podem conter qualquer número de arquivos de símbolo, correspondentes a qualquer número de programas ou sistemas operacionais.</span><span class="sxs-lookup"><span data-stu-id="55417-105">These stores can contain any number of symbol files, corresponding to any number of programs or operating systems.</span></span> <span data-ttu-id="55417-106">As lojas também podem conter arquivos binários, que são particularmente úteis durante a depuração de arquivos de minidespejo.</span><span class="sxs-lookup"><span data-stu-id="55417-106">The stores can also contain binary files, which are particularly useful when debugging minidump files.</span></span>

<span data-ttu-id="55417-107">As lojas podem conter o símbolo real e os arquivos binários ou simplesmente ponteiros para arquivos de símbolo.</span><span class="sxs-lookup"><span data-stu-id="55417-107">The stores can contain the actual symbol and binary files or simply pointers to symbol files.</span></span> <span data-ttu-id="55417-108">Se o repositório contiver ponteiros, o SymSrv recuperará os arquivos reais diretamente de suas origens.</span><span class="sxs-lookup"><span data-stu-id="55417-108">If the store contains pointers, SymSrv will retrieve the actual files directly from their sources.</span></span>

<span data-ttu-id="55417-109">SymSrv também pode separar um repositório de símbolos grande em um subconjunto menor apropriado para uma tarefa de depuração especializada.</span><span class="sxs-lookup"><span data-stu-id="55417-109">SymSrv can also separate a large symbol store into a smaller subset that is appropriate for a specialized debugging task.</span></span>

<span data-ttu-id="55417-110">Por fim, o SymSrv pode obter arquivos de símbolo de uma fonte HTTP ou HTTPS usando as informações de logon fornecidas pelo sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="55417-110">Finally, SymSrv can obtain symbol files from an HTTP or HTTPS source using the logon information provided by the operating system.</span></span> <span data-ttu-id="55417-111">O SymSrv dá suporte a sites HTTPS protegidos por cartões inteligentes, certificados e logons e senhas regulares.</span><span class="sxs-lookup"><span data-stu-id="55417-111">SymSrv supports HTTPS sites protected by smartcards, certificates, and regular logins and passwords.</span></span>

## <a name="setting-the-symbol-path"></a><span data-ttu-id="55417-112">Configurando o caminho do símbolo</span><span class="sxs-lookup"><span data-stu-id="55417-112">Setting the Symbol Path</span></span>

<span data-ttu-id="55417-113">Conforme descrito em [caminhos de símbolo](symbol-paths.md), o caminho do símbolo ( \_ variável de ambiente do caminho do NT \_ Symbol \_ ) pode ser composto por vários elementos de caminho separados por ponto e vírgula.</span><span class="sxs-lookup"><span data-stu-id="55417-113">As described in [Symbol Paths](symbol-paths.md), the symbol path (\_NT\_SYMBOL\_PATH environment variable) can be made up of several path elements separated by semicolons.</span></span> <span data-ttu-id="55417-114">Se qualquer um ou mais desses elementos de caminho começar com o texto "SRV \* ", o elemento será um servidor de símbolos e usará symsrv para localizar arquivos de símbolo.</span><span class="sxs-lookup"><span data-stu-id="55417-114">If any one or more of these path elements begins with the text "srv\*", then the element is a symbol server and will use SymSrv to locate symbol files.</span></span>

> [!Note]  
> <span data-ttu-id="55417-115">Se o texto "SRV \* " não for especificado, mas o elemento de caminho real for um armazenamento de servidor de símbolos, o manipulador de símbolo atuará como se "SRV \* " fosse especificado.</span><span class="sxs-lookup"><span data-stu-id="55417-115">If the "srv\*" text is not specified but the actual path element is a symbol server store, then the symbol handler will act as if "srv\*" were specified.</span></span> <span data-ttu-id="55417-116">O manipulador de símbolos faz essa determinação pesquisando a existência de um arquivo chamado "pingme.txt" no diretório raiz do caminho especificado.</span><span class="sxs-lookup"><span data-stu-id="55417-116">The symbol handler makes this determination by searching for the existence of a file called "pingme.txt" in the root directory of the specified path.</span></span>

 

<span data-ttu-id="55417-117">Assim como os caminhos de símbolo são compostos de elementos de caminho de símbolo separados por ponto e vírgula, os servidores de símbolos são compostos de elementos de repositório de símbolos separados por asteriscos.</span><span class="sxs-lookup"><span data-stu-id="55417-117">Just as symbol paths are made up of symbol path elements separated by semicolons, symbol servers are made up of symbol store elements separated by asterisks.</span></span> <span data-ttu-id="55417-118">Pode haver até 10 repositórios de símbolo após o prefixo "SRV \* ".</span><span class="sxs-lookup"><span data-stu-id="55417-118">There can be up to 10 symbol stores after the "srv\*" prefix.</span></span> <span data-ttu-id="55417-119">As lojas listadas à esquerda da lista são chamadas armazenamentos *downstream* e armazenamentos à direita são chamados de armazenamentos *upstream* .</span><span class="sxs-lookup"><span data-stu-id="55417-119">Stores listed to the left of the list are called *downstream* stores and stores to the right are called *upstream* stores.</span></span>

<dl> <span data-ttu-id="55417-120">\**SymbolStore* SRV</span><span class="sxs-lookup"><span data-stu-id="55417-120">srv\**SymbolStore*</span></span>  
<span data-ttu-id="55417-121">srv \* *SymbolStore1* \* *SymbolStoreN*  
</span><span class="sxs-lookup"><span data-stu-id="55417-121">srv\**SymbolStore1*\**SymbolStoreN*  
</span></span></dl>

<span data-ttu-id="55417-122">Se apenas um elemento de armazenamento de símbolos estiver incluído no caminho, SymSrv tentará usar qualquer arquivo solicitado diretamente desse armazenamento.</span><span class="sxs-lookup"><span data-stu-id="55417-122">If only one symbol store element is included in the path, then SymSrv will attempt to use the any requested file directly from that store.</span></span>

<span data-ttu-id="55417-123">Se houver dois armazenamentos de símbolos no caminho, o SymSrv procura o arquivo de símbolo no armazenamento de símbolos mais à esquerda.</span><span class="sxs-lookup"><span data-stu-id="55417-123">If there are two symbol stores in the path, SymSrv looks for the symbol file in the leftmost symbol store.</span></span> <span data-ttu-id="55417-124">Se o arquivo estiver lá, ele será usado.</span><span class="sxs-lookup"><span data-stu-id="55417-124">If the file is there, it is used.</span></span> <span data-ttu-id="55417-125">Se ele não estiver lá, SymSrv olhará no armazenamento de símbolos imediatamente à direita.</span><span class="sxs-lookup"><span data-stu-id="55417-125">If it is not there, SymSrv looks in the symbol store immediately to the right.</span></span> <span data-ttu-id="55417-126">Se o arquivo estiver lá, ele será copiado para o armazenamento esquerdo e aberto de lá.</span><span class="sxs-lookup"><span data-stu-id="55417-126">If the file is there, it is copied to the left store and opened from there.</span></span>

<span data-ttu-id="55417-127">Se houver mais de dois armazenamentos, esse comportamento continuará à direita até que o arquivo seja encontrado ou não haja mais armazenamentos na lista.</span><span class="sxs-lookup"><span data-stu-id="55417-127">If there are more than two stores, this behavior continues to the right until the file is found or there are no more stores in the list.</span></span>

<span data-ttu-id="55417-128">O arquivo nunca é aberto em nenhum armazenamento, mas no armazenamento mais à esquerda.</span><span class="sxs-lookup"><span data-stu-id="55417-128">The file is never opened from any store but the leftmost store.</span></span> <span data-ttu-id="55417-129">Se o arquivo for encontrado em qualquer outro lugar na cadeia, ele será copiado para todos os armazenamentos à esquerda dele.</span><span class="sxs-lookup"><span data-stu-id="55417-129">If the file is found anywhere else in the chain, it is copied to every store to the left of it.</span></span> <span data-ttu-id="55417-130">Esse processo de cópia é chamado de "em cascata" e fornece alguns benefícios que serão esclarecedos posteriormente neste documento.</span><span class="sxs-lookup"><span data-stu-id="55417-130">This copy process is called "cascading" and provides certain benefits that will clarfied later in this document.</span></span>

## <a name="types-of-symbol-stores"></a><span data-ttu-id="55417-131">Tipos de armazenamentos de símbolos</span><span class="sxs-lookup"><span data-stu-id="55417-131">Types of Symbol Stores</span></span>

<span data-ttu-id="55417-132">A tabela a seguir exibe exemplos dos tipos de armazenamento de símbolos com suporte.</span><span class="sxs-lookup"><span data-stu-id="55417-132">The following table displays examples of the supported symbol store types.</span></span>

|  <span data-ttu-id="55417-133">Tipo de armazenamento de símbolos</span><span class="sxs-lookup"><span data-stu-id="55417-133">Symbol store type</span></span>       |  <span data-ttu-id="55417-134">Description</span><span class="sxs-lookup"><span data-stu-id="55417-134">Description</span></span> |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="55417-135">\\\\compartilhamento \\ de servidor</span><span class="sxs-lookup"><span data-stu-id="55417-135">\\\\server\\share</span></span>          | <span data-ttu-id="55417-136">Um caminho UNC totalmente qualificado para um compartilhamento em um servidor remoto.</span><span class="sxs-lookup"><span data-stu-id="55417-136">A fully qualified UNC path to a share on a remote server.</span></span>                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="55417-137">c: \\ LocalCache</span><span class="sxs-lookup"><span data-stu-id="55417-137">c:\\LocalCache</span></span>             | <span data-ttu-id="55417-138">Um caminho para um diretório no computador cliente.</span><span class="sxs-lookup"><span data-stu-id="55417-138">A path to a directory on the client computer.</span></span>                                                                                                                                                                                                                                                                                                             |
| https://InternetSite        | <span data-ttu-id="55417-139">A URL para um site que hospeda os símbolos.</span><span class="sxs-lookup"><span data-stu-id="55417-139">The URL to a web site hosting the symbols.</span></span> <span data-ttu-id="55417-140">Deve ser o armazenamento mais à direita na lista e não deve ser o único armazenamento na lista.</span><span class="sxs-lookup"><span data-stu-id="55417-140">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                                                                                                                          |
| https://SecureInternetSite | <span data-ttu-id="55417-141">A URL para um site seguro que hospeda os símbolos.</span><span class="sxs-lookup"><span data-stu-id="55417-141">The URL to a secure web site hosting the symbols.</span></span> <span data-ttu-id="55417-142">Isso pode dar suporte a senhas, credenciais de logon do Windows, certificados e cartões inteligentes.</span><span class="sxs-lookup"><span data-stu-id="55417-142">This can support passwords, Windows login credentials, certificates, and smartcards.</span></span> <span data-ttu-id="55417-143">Deve ser o armazenamento mais à direita na lista e não deve ser o único repositório na lista.</span><span class="sxs-lookup"><span data-stu-id="55417-143">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                              |
| <blank>              | <span data-ttu-id="55417-144">Se não houver texto entre dois asteriscos, isso indicará o *armazenamento downstream padrão*.</span><span class="sxs-lookup"><span data-stu-id="55417-144">If there is no text between two asterisks, this indicates the *default downstream store*.</span></span> <span data-ttu-id="55417-145">O local é definido chamando [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span><span class="sxs-lookup"><span data-stu-id="55417-145">The location is set by calling [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span></span> <span data-ttu-id="55417-146">O valor padrão é um diretório chamado "Sym" logo abaixo do diretório de programa do aplicativo de chamada.</span><span class="sxs-lookup"><span data-stu-id="55417-146">The default value is a directory named "sym" immediately below the program directory of the calling application.</span></span> <span data-ttu-id="55417-147">Isso às vezes é chamado de *cache local padrão*.</span><span class="sxs-lookup"><span data-stu-id="55417-147">This is sometimes referred to as the *default local cache*.</span></span> |



 

<span data-ttu-id="55417-148">Como um armazenamento de símbolo baseado em HTTP não pode ser gravado, ele deve ser o armazenamento mais à direita na lista.</span><span class="sxs-lookup"><span data-stu-id="55417-148">Because an HTTP-based symbol store cannot be written to, it must be the rightmost store in the list.</span></span> <span data-ttu-id="55417-149">Se um armazenamento de símbolo baseado em HTTP estiver localizado no meio ou à esquerda da lista da loja, não será possível copiar os arquivos encontrados nele e a cadeia seria interrompida.</span><span class="sxs-lookup"><span data-stu-id="55417-149">If an HTTP-based symbol store was located in the middle or the left of the store list, it would not be possible to copy any found files to it and the chain would be broken.</span></span> <span data-ttu-id="55417-150">Além disso, como o manipulador de símbolo não pode abrir um arquivo de um site, um armazenamento baseado em HTTP não deve ser o mais à esquerda ou apenas armazenar na lista.</span><span class="sxs-lookup"><span data-stu-id="55417-150">Furthermore, because the symbol handler cannot open a file from a web site, an HTTP-based store should not be the leftmost or only store on the list.</span></span> <span data-ttu-id="55417-151">Se SymSrv for apresentado com esse caminho de símbolo, ele tentará se recuperar copiando o arquivo para o armazenamento downstream padrão e o abrirá a partir daí, independentemente de o armazenamento downstream padrão ser indicado no caminho do símbolo ou não.</span><span class="sxs-lookup"><span data-stu-id="55417-151">If SymSrv is ever presented with this symbol path, it will attempt to recover by copying the file to the default downstream store and open it from there, regardless of whether the default downstream store is indicated in the symbol path or not.</span></span>

## <a name="examples"></a><span data-ttu-id="55417-152">Exemplos</span><span class="sxs-lookup"><span data-stu-id="55417-152">Examples</span></span>

<span data-ttu-id="55417-153">Para usar o SymSrv com um repositório de símbolos em \\ \\ mybuilds \\ mysymbols, defina o seguinte caminho de símbolo:</span><span class="sxs-lookup"><span data-stu-id="55417-153">To use SymSrv with a symbol store on \\\\mybuilds\\mysymbols, set the following symbol path:</span></span>

<span data-ttu-id="55417-154">**definir \_ caminho do símbolo do NT \_ \_ = SRV \ \* \\ \\ Builds \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="55417-154">**set \_NT\_SYMBOL\_PATH= srv\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="55417-155">Para definir o caminho do símbolo para que o depurador Copie os arquivos de símbolo de um repositório de símbolos em \\ \\ mycompila \\ mysymbols para o diretório local c: \\ localsymbols, use:</span><span class="sxs-lookup"><span data-stu-id="55417-155">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to your local directory c:\\localsymbols, use:</span></span>

<span data-ttu-id="55417-156">**definir \_ \_ caminho do símbolo NT \_ = SRV \* c: \\ localsymbols \* \\ \\ mycompila \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="55417-156">**set \_NT\_SYMBOL\_PATH=srv\*c:\\localsymbols\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="55417-157">Para definir o caminho do símbolo para que o depurador Copie os arquivos de símbolo de um repositório de símbolos em \\ \\ mycompila \\ mysymbols para o armazenamento de downstream padrão (normalmente c: \\ Debuggers \\ Sym), use:</span><span class="sxs-lookup"><span data-stu-id="55417-157">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to the default downstream store (typically c:\\debuggers\\sym), use:</span></span>

<span data-ttu-id="55417-158">**definir \_ caminho do símbolo do NT \_ \_ = SRV \ \* \* \\ \\ Builds \\ mysymbols**</span><span class="sxs-lookup"><span data-stu-id="55417-158">**set \_NT\_SYMBOL\_PATH=srv\*\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="55417-159">Para usar um armazenamento em cascata, de definir o seguinte caminho de símbolo:</span><span class="sxs-lookup"><span data-stu-id="55417-159">To use a cascading store, set the following symbol path:</span></span>

<span data-ttu-id="55417-160">**set \_ NT \_ SYMBOL PATH = \_ srv \* c: \\ localsymbols \* \\ \\ \\ NearbyServer store\*https://DistantServer**</span><span class="sxs-lookup"><span data-stu-id="55417-160">**set \_NT\_SYMBOL\_PATH = srv\*c:\\localsymbols\*\\\\NearbyServer\\store\*https://DistantServer**</span></span>

<span data-ttu-id="55417-161">Neste exemplo, SymSrv primeiro procura o arquivo em c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="55417-161">In this example, SymSrv first looks for the file in c:\\localsymbols.</span></span> <span data-ttu-id="55417-162">Se for encontrado lá, ele retornará um caminho para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="55417-162">If it is found there, it will return a path to the file.</span></span> <span data-ttu-id="55417-163">Caso contrário, SymSrv procura o arquivo no \\ \\ armazenamento \\ NearbyServer.</span><span class="sxs-lookup"><span data-stu-id="55417-163">Otherwise, SymSrv looks for the file in \\\\NearbyServer\\store.</span></span> <span data-ttu-id="55417-164">Se ele for encontrado lá, SymSrv copia o arquivo para c: localsymbols e retorna um caminho para o arquivo; se ele não for encontrado, SymSrv procura o arquivo em e, se ele for encontrado lá, SymSrv copia o arquivo para o armazenamento NearbyServer e, em seguida, para \\ https://DistantServer \\ \\ \\ c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="55417-164">If it is found there, SymSrv copies the file to c:\\localsymbols and returns a path to the file; if it is not found, SymSrv looks for the file in https://DistantServer, and if it is found there, SymSrv copies the file to \\\\NearbyServer\\store, then to c:\\localsymbols.</span></span>

<span data-ttu-id="55417-165">Este último exemplo mostra como o design criterioso de um caminho de símbolo pode ser usado para otimizar o download de símbolos.</span><span class="sxs-lookup"><span data-stu-id="55417-165">This last example shows how judicious design of a symbol path can be used to optimize the downloading of symbols.</span></span> <span data-ttu-id="55417-166">Se você tiver um site de trabalho com um grupo de depurador e todos eles precisarem obter símbolos de um local distante, você poderá configurar um servidor comum com um armazenamento de símbolos próximo a todos os depurador.</span><span class="sxs-lookup"><span data-stu-id="55417-166">If you have a work site with a group of debuggers and they all need to get symbols from a distant location, you can set up a common server with a symbol store near all the debuggers.</span></span> <span data-ttu-id="55417-167">Em seguida, configure cada depurador com o caminho de símbolo acima.</span><span class="sxs-lookup"><span data-stu-id="55417-167">Then setup every debugger with the symbol path above.</span></span> <span data-ttu-id="55417-168">O primeiro depurador que requer uma determinada versão do foo.pdb o baixará do para o nearbyServer store e, em seguida, para seu próprio computador https://DistantServer \\ \\ \\ em c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="55417-168">The first debugger that requires a certain version of foo.pdb will download it from https://DistantServer to \\\\NearbyServer\\store and then to its own machine in c:\\localsymbols.</span></span> <span data-ttu-id="55417-169">O próximo depurador que requer o mesmo arquivo poderá baixá-lo do armazenamento NearbyServer porque ele já foi baixado para esse local pelo \\ \\ \\ depurador anterior.</span><span class="sxs-lookup"><span data-stu-id="55417-169">The next debugger that requires the same file will be able to download it from \\\\NearbyServer\\store because it was already downloaded to that location by the previous debugger.</span></span> <span data-ttu-id="55417-170">Esse cache de vários níveis economiza tempo significativo e largura de banda de rede.</span><span class="sxs-lookup"><span data-stu-id="55417-170">This multi-level caching saves significant time and network bandwidth.</span></span>

## <a name="microsoft-symbol-store"></a><span data-ttu-id="55417-171">Microsoft Symbol Store</span><span class="sxs-lookup"><span data-stu-id="55417-171">Microsoft Symbol Store</span></span>

<span data-ttu-id="55417-172">A Microsoft fornece acesso a um servidor de símbolos da Internet que contém arquivos de símbolo para as várias versões do sistema operacional Windows.</span><span class="sxs-lookup"><span data-stu-id="55417-172">Microsoft provides access to an Internet symbol server that contains symbol files for the many versions of the Windows operating system.</span></span> <span data-ttu-id="55417-173">Não há garantia de que esse catálogo de símbolos seja concluído, mas é abrangente.</span><span class="sxs-lookup"><span data-stu-id="55417-173">This catalog of symbols is not guaranteed to be complete, but it is extensive.</span></span> <span data-ttu-id="55417-174">Outros produtos da Microsoft também são representados.</span><span class="sxs-lookup"><span data-stu-id="55417-174">Other Microsoft products are also represented.</span></span>

<span data-ttu-id="55417-175">O servidor de símbolos da Internet é populado com uma variedade de símbolos do Windows para sistemas operacionais Microsoft Windows, incluindo correções ativas, Service Packs, Pacotes de Rollup de Segurança e versões de varejo.</span><span class="sxs-lookup"><span data-stu-id="55417-175">The Internet symbol server is populated with a variety of Windows symbols for Microsoft Windows operating systems, including hot fixes, Service Packs, Security Rollup Packages, and retail releases.</span></span> <span data-ttu-id="55417-176">Os símbolos também estão disponíveis no servidor para betas atuais e candidatos à versão para produtos windows, além de uma variedade de outros produtos da Microsoft, como o Microsoft Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="55417-176">Symbols are also available on the server for current Betas and Release Candidates for Windows products, plus a variety of other Microsoft products, such as Microsoft Internet Explorer.</span></span>

<span data-ttu-id="55417-177">Se você tiver acesso à Internet durante a depuração, poderá configurar o depurador para baixar símbolos conforme necessário durante uma sessão de depuração, em vez de baixar arquivos de símbolo separadamente antes de uma sessão de depuração.</span><span class="sxs-lookup"><span data-stu-id="55417-177">If you have access to the Internet during debugging, you can configure the debugger to download symbols as needed during a debugging session, rather than downloading symbol files separately before a debugging session.</span></span> <span data-ttu-id="55417-178">Os símbolos são baixados para um local de diretório que você especifica e, em seguida, o depurador os carrega de lá.</span><span class="sxs-lookup"><span data-stu-id="55417-178">The symbols are downloaded to a directory location that you specify and then the debugger loads them from there.</span></span>

<span data-ttu-id="55417-179">A URL do armazenamento de símbolos da Microsoft é https://msdl.microsoft.com/download/symbols .</span><span class="sxs-lookup"><span data-stu-id="55417-179">The URL for the Microsoft symbol store is https://msdl.microsoft.com/download/symbols.</span></span> <span data-ttu-id="55417-180">O exemplo a seguir mostra como definir o caminho do símbolo do depurador (substitua o caminho do repositório downstream por *c: \\ DownstreamStore*):</span><span class="sxs-lookup"><span data-stu-id="55417-180">The following example shows how to set the debugger symbol path (substitute your downstream store path for *c:\\DownstreamStore*):</span></span>

``` syntax
srv*c:\DownstreamStore*https://msdl.microsoft.com/download/symbols
```

## <a name="compressed-files"></a><span data-ttu-id="55417-181">Arquivos compactados</span><span class="sxs-lookup"><span data-stu-id="55417-181">Compressed Files</span></span>

<span data-ttu-id="55417-182">O SymSrv é compatível com os armazenamentos de símbolos que contêm arquivos compactados, desde que essa compactação tenha sido pré-formada com a ferramenta compress.exe que foi distribuída com o Kit de Recursos do Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="55417-182">SymSrv is compatible with symbol stores that contain compressed files, as long as this compression has been preformed with the compress.exe tool that was distributed with the Windows Server 2003 Resource Kit.</span></span> <span data-ttu-id="55417-183">Arquivos compactados devem ter um sublinhado como o último caractere em suas extensões de arquivo (por exemplo, module1.pd \_ ou module2.db \_ ).</span><span class="sxs-lookup"><span data-stu-id="55417-183">Compressed files should have an underscore as the last character in their file extensions (for example, module1.pd\_ or module2.db\_).</span></span> <span data-ttu-id="55417-184">Para obter detalhes, [consulte Usando SymStore](using-symstore.md).</span><span class="sxs-lookup"><span data-stu-id="55417-184">For details, see [Using SymStore](using-symstore.md).</span></span>

<span data-ttu-id="55417-185">Durante a cascata, os arquivos não são descompactados, a menos que o armazenamento de destino seja o armazenamento mais à esquerda no caminho.</span><span class="sxs-lookup"><span data-stu-id="55417-185">When cascading, files are not uncompressed unless the target store is the leftmost store in the path.</span></span> <span data-ttu-id="55417-186">Se houver apenas um armazenamento no caminho e contiver um arquivo compactado, o SymSrv copiará o arquivo para o armazenamento downstream padrão e o abrirá a partir daí, mesmo que o armazenamento downstream padrão não seja indicado no caminho do símbolo.</span><span class="sxs-lookup"><span data-stu-id="55417-186">If there is only one store in the path and it contains a compressed file, SymSrv will copy the file to the default downstream store and open it from there, even though the default downstream store is not indicated in they symbol path.</span></span>

<span data-ttu-id="55417-187">**DbgHelp 6.1 e anterior.:** Se os arquivos no armazenamento mestre são compactados, você deve usar um armazenamento downstream.</span><span class="sxs-lookup"><span data-stu-id="55417-187">**DbgHelp 6.1 and earlier.:** If the files in the master store are compressed, you must use a downstream store.</span></span> <span data-ttu-id="55417-188">O SymSrv descompacta todos os arquivos antes de copiá-los para o armazenamento downstream.</span><span class="sxs-lookup"><span data-stu-id="55417-188">SymSrv will uncompress all files before copying them to the downstream store.</span></span>

## <a name="deleting-the-cache"></a><span data-ttu-id="55417-189">Excluindo o cache</span><span class="sxs-lookup"><span data-stu-id="55417-189">Deleting the Cache</span></span>

<span data-ttu-id="55417-190">Se você estiver usando um armazenamento downstream como cache, poderá excluir esse diretório a qualquer momento para economizar espaço em disco.</span><span class="sxs-lookup"><span data-stu-id="55417-190">If you are using a downstream store as a cache, you can delete this directory at any time to save disk space.</span></span>

<span data-ttu-id="55417-191">É possível ter um grande armazenamento de símbolos que inclui arquivos de símbolo para muitos programas diferentes ou versões do Windows.</span><span class="sxs-lookup"><span data-stu-id="55417-191">It is possible to have a vast symbol store that includes symbol files for many different programs or Windows versions.</span></span> <span data-ttu-id="55417-192">Se você atualizar a versão do Windows usada em seu computador de destino, os arquivos de símbolo armazenados em cache corresponderão à versão anterior.</span><span class="sxs-lookup"><span data-stu-id="55417-192">If you upgrade the version of Windows used on your target computer, the cached symbol files will all match the earlier version.</span></span> <span data-ttu-id="55417-193">Esses arquivos armazenados em cache não serão mais usados e, portanto, esse pode ser um bom momento para excluir o cache.</span><span class="sxs-lookup"><span data-stu-id="55417-193">These cached files will not be of any further use, and therefore this might be a good time to delete the cache.</span></span>

<span data-ttu-id="55417-194">As ferramentas de depuração para Windows vêm com um utilitário chamado agestore.exe que removerá os arquivos de uma árvore de diretório de forma seletiva, deixando os arquivos usados mais recentemente.</span><span class="sxs-lookup"><span data-stu-id="55417-194">Debugging Tools for Windows comes with a utility called agestore.exe that will selectively remove files from a directory tree, leaving the most recently used files.</span></span> <span data-ttu-id="55417-195">Essa ferramenta foi projetada para remover arquivos não utilizados de repositórios de servidores de símbolos.</span><span class="sxs-lookup"><span data-stu-id="55417-195">This tool is designed for pruning out unused files from symbol server stores.</span></span> <span data-ttu-id="55417-196">Ele permite que você controle várias opções, incluindo algoritmos de data de corte e tamanho de diretório.</span><span class="sxs-lookup"><span data-stu-id="55417-196">It allows you to control many options including cut off date and directory size algorithms.</span></span>

## <a name="flat-cache-directory"></a><span data-ttu-id="55417-197">Diretório de cache simples</span><span class="sxs-lookup"><span data-stu-id="55417-197">Flat Cache Directory</span></span>

<span data-ttu-id="55417-198">É possível declarar o armazenamento downstream padrão como um diretório simples, em vez de uma estrutura de árvore de símbolos padrão.</span><span class="sxs-lookup"><span data-stu-id="55417-198">It is possible to declare the default downstream store as a flat directory, rather than a standard symbol tree structure.</span></span> <span data-ttu-id="55417-199">Para fazer isso, chame a função [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) com **o \_ \_ diretório Flat do SYMOPT** (isso também define a opção de **\_ \_ \_ armazenamento padrão de SSRVOPT simples** em SymSrv).</span><span class="sxs-lookup"><span data-stu-id="55417-199">To do so, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with **SYMOPT\_FLAT\_DIRECTORY** (this also sets the **SSRVOPT\_FLAT\_DEFAULT\_STORE** option in SymSrv).</span></span> <span data-ttu-id="55417-200">Certifique-se de chamar [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) antes de fazer isso; caso contrário, os arquivos de símbolo podem ser gravados no diretório do programa.</span><span class="sxs-lookup"><span data-stu-id="55417-200">Be sure to call [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) before doing so; otherwise, the symbol files can be written to the program directory.</span></span>

## <a name="pointer-files"></a><span data-ttu-id="55417-201">Arquivos de ponteiro</span><span class="sxs-lookup"><span data-stu-id="55417-201">Pointer Files</span></span>

<span data-ttu-id="55417-202">O SymStore pode criar e usar arquivos que apontam para um arquivo de destino em vez do próprio arquivo de destino.</span><span class="sxs-lookup"><span data-stu-id="55417-202">SymStore can create and use files that point to a target file rather than the target file itself.</span></span> <span data-ttu-id="55417-203">Se um repositório de símbolos contiver esse arquivo de ponteiro, o padrão será copiar o arquivo do local indicado no arquivo de ponteiro para a loja.</span><span class="sxs-lookup"><span data-stu-id="55417-203">If a symbol store contains such a pointer file, the default is to copy the file from the location indicated in the pointer file to the store.</span></span> <span data-ttu-id="55417-204">Para configurar um repositório de modo que o arquivo de ponteiro seja copiado em vez do arquivo para o qual ele aponta, crie um arquivo chamado wantsptr.txt na raiz do repositório de destino.</span><span class="sxs-lookup"><span data-stu-id="55417-204">To configure a store such that the pointer file is copied instead of the file it points to, create a file named wantsptr.txt in the root of the target store.</span></span> <span data-ttu-id="55417-205">O conteúdo de wantsptr.txt não são importantes, apenas a presença do arquivo.</span><span class="sxs-lookup"><span data-stu-id="55417-205">The contents of wantsptr.txt are not important, only the presence of the file.</span></span>

## <a name="excluding-files-from-symbols-list"></a><span data-ttu-id="55417-206">Excluindo arquivos da lista de símbolos</span><span class="sxs-lookup"><span data-stu-id="55417-206">Excluding Files from Symbols List</span></span>

<span data-ttu-id="55417-207">Para excluir arquivos de uma pesquisa de símbolos, você pode especificar seus nomes no symsrv.ini ou no registro.</span><span class="sxs-lookup"><span data-stu-id="55417-207">To exclude files from a symbols search, you can specify their names in symsrv.ini or in the registry.</span></span> <span data-ttu-id="55417-208">Para especificar os arquivos em symsrv.ini, crie uma seção chamada exclusões e liste os arquivos.</span><span class="sxs-lookup"><span data-stu-id="55417-208">To specify the files in symsrv.ini, create a section named Exclusions and list the files.</span></span> <span data-ttu-id="55417-209">Os nomes de arquivo podem conter curingas, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="55417-209">The file names can contain wildcards, as shown in the following example:</span></span>

``` syntax
[Exclusions]
dbghelp.pdb
symsrv.*
mso*
```

<span data-ttu-id="55417-210">Symsrv.ini deve estar localizado no mesmo diretório em que symsrv.dll reside.</span><span class="sxs-lookup"><span data-stu-id="55417-210">Symsrv.ini should be located in the same directory that symsrv.dll resides.</span></span> <span data-ttu-id="55417-211">Na maioria das instalações, o arquivo não existe e você precisará criar um novo.</span><span class="sxs-lookup"><span data-stu-id="55417-211">In most installations, the file does not exist and you will need to create a new one.</span></span>

<span data-ttu-id="55417-212">Como alternativa, você pode armazenar os arquivos a serem excluídos no Registro.</span><span class="sxs-lookup"><span data-stu-id="55417-212">Alternatively, you can store the files to be excluded in the registry.</span></span> <span data-ttu-id="55417-213">Crie a seguinte chave do Registro: Exclusões do servidor de símbolos da **Microsoft HKEY \_ LOCAL MACHINE \_ \\ Software \\ \\ \\**.</span><span class="sxs-lookup"><span data-stu-id="55417-213">Create the following registry key: **HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Symbol Server\\Exclusions**.</span></span> <span data-ttu-id="55417-214">Armazene cada nome de arquivo como um valor de cadeia de caracteres (REG \_ SZ) dentro dessa chave.</span><span class="sxs-lookup"><span data-stu-id="55417-214">Store each file name as a string value (REG\_SZ) within this key.</span></span> <span data-ttu-id="55417-215">O nome do valor da cadeia de caracteres especifica o nome do arquivo a ser excluído.</span><span class="sxs-lookup"><span data-stu-id="55417-215">The name of the string value specifies the name of the file to be excluded.</span></span> <span data-ttu-id="55417-216">Você pode usar o conteúdo do valor da cadeia de caracteres para armazenar um comentário que descreve por que o arquivo está sendo excluído.</span><span class="sxs-lookup"><span data-stu-id="55417-216">You can use the contents of the string value to store a comment describing why the file is being excluded.</span></span>

## <a name="installation"></a><span data-ttu-id="55417-217">Instalação</span><span class="sxs-lookup"><span data-stu-id="55417-217">Installation</span></span>

<span data-ttu-id="55417-218">O servidor de símbolos SymSrv (symsrv.dll) está incluído no pacote Ferramentas de Depuração para Windows.</span><span class="sxs-lookup"><span data-stu-id="55417-218">The SymSrv (symsrv.dll) symbol server is included in the Debugging Tools for Windows package.</span></span> <span data-ttu-id="55417-219">Ele deve ser instalado no mesmo diretório que a cópia do dbghelp.dll que você está carregando.</span><span class="sxs-lookup"><span data-stu-id="55417-219">It must be installed in the same directory as the copy of dbghelp.dll that you are loading.</span></span> <span data-ttu-id="55417-220">Para obter mais detalhes, consulte [Chamando a biblioteca DbgHelp.](calling-the-dbghelp-library.md)</span><span class="sxs-lookup"><span data-stu-id="55417-220">For more details, see [Calling the DbgHelp Library](calling-the-dbghelp-library.md).</span></span>

 

 



