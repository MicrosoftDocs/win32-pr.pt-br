---
description: As APIs InkAnalysis fornecem aos desenvolvedores de Tablet PC ferramentas poderosas para examinar programaticamente a entrada de tinta. A API classifica a tinta em categorias significativas, como palavras, linhas, parágrafos e desenhos.
ms.assetid: d9521a8c-f61a-40ea-8603-e8afbba75a4e
title: Visão geral da análise de tinta
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e383d16c01cd9475d4c54587b4b5fb4c09791a0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501408"
---
# <a name="ink-analysis-overview"></a><span data-ttu-id="0f0e7-104">Visão geral da análise de tinta</span><span class="sxs-lookup"><span data-stu-id="0f0e7-104">Ink Analysis Overview</span></span>

<span data-ttu-id="0f0e7-105">As APIs InkAnalysis fornecem aos desenvolvedores de Tablet PC ferramentas poderosas para examinar programaticamente a entrada de tinta.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-105">The InkAnalysis APIs provide Tablet PC developers with powerful tools to programmatically examine ink input.</span></span> <span data-ttu-id="0f0e7-106">A API classifica a tinta em categorias significativas, como palavras, linhas, parágrafos e desenhos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-106">The API classifies ink into meaningful categories such as words, lines, paragraphs, and drawings.</span></span>

<span data-ttu-id="0f0e7-107">Você pode usar cada classificação de várias maneiras, incluindo melhorar os resultados de reconhecimento para manuscrito.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-107">You can use each classification in a variety of ways, including improving recognition results for handwriting.</span></span>

## <a name="ink-analysis-basics"></a><span data-ttu-id="0f0e7-108">Noções básicas de análise de tinta</span><span class="sxs-lookup"><span data-stu-id="0f0e7-108">Ink Analysis Basics</span></span>

<span data-ttu-id="0f0e7-109">Esta seção apresenta a tecnologia de análise de tinta da plataforma Tablet PC e explica quando e como usá-la.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-109">This section introduces the Tablet PC Platform ink analysis technology and explains when and how to use it.</span></span>

<span data-ttu-id="0f0e7-110">As APIs InkAnalysis combinam com eficiência duas tecnologias distintas, mas complementares: reconhecimento de manuscrito e classificação de layout.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-110">The InkAnalysis APIs effectively combine two distinct but complimentary technologies: handwriting recognition and layout classification.</span></span> <span data-ttu-id="0f0e7-111">A combinação dessas duas tecnologias fornece resultados definitivamente maiores do que as partes utilizadas sozinhas.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-111">Combining these two technologies gives definitively greater results than the parts taken alone.</span></span>

<span data-ttu-id="0f0e7-112">O reconhecimento de manuscrito é a análise computacional da tinta digital manuscrita para retornar a interpretação baseada em caracteres em um determinado idioma.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-112">Handwriting recognition is the computational analysis of handwritten digital ink to return character-based interpretation in a given language.</span></span> <span data-ttu-id="0f0e7-113">Ou seja, o reconhecimento de manuscrito é como o computador "lê" o manuscrito de uma pessoa.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-113">That is, handwriting recognition is how the computer "reads" a person's handwriting.</span></span>

<span data-ttu-id="0f0e7-114">A análise de tinta pode ser dividida na classificação de tinta e na análise de layout.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-114">Ink Analysis can be further broken down into ink classification and layout analysis.</span></span> <span data-ttu-id="0f0e7-115">A classificação de tinta é a divisão computacional da tinta em unidades semanticamente significativas, como parágrafos, linhas, palavras e desenhos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-115">Ink classification is the computational division of ink into semantically meaningful units such as paragraphs, lines, words, and drawings.</span></span> <span data-ttu-id="0f0e7-116">A análise de layout é o exame computacional da entrada de tinta para determinar a posição da tinta na superfície de escrita à tinta e como os traços se relacionam entre si de forma espacial e até mesmo semanticamente.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-116">Layout analysis is the computational examination of ink input to determine the position of the ink on the inking surface and how the strokes relate to each other spatially and even semantically.</span></span> <span data-ttu-id="0f0e7-117">Por exemplo, a análise de layout pode informar que uma determinada parte da tinta é uma anotação ou uma chamada.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-117">For example, layout analysis can tell you that a particular piece of ink is an annotation or a call out.</span></span>

### <a name="recognition"></a><span data-ttu-id="0f0e7-118">Reconhecimento</span><span class="sxs-lookup"><span data-stu-id="0f0e7-118">Recognition</span></span>

<span data-ttu-id="0f0e7-119">Um exemplo de como a combinação de reconhecimento com a análise de tinta na API InkAnalysis ajuda o desenvolvedor é a melhoria nos resultados do reconhecimento.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-119">One example of how the combination of recognition with ink analysis in the InkAnalysis API helps the developer is the improvement in recognition results.</span></span> <span data-ttu-id="0f0e7-120">Os mecanismos de reconhecimento de manuscrito do Tablet PC foram projetados principalmente para reconhecer uma única linha de tinta horizontal.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-120">The Tablet PC handwriting recognition engines have been primarily designed to recognize a single horizontal line of ink.</span></span> <span data-ttu-id="0f0e7-121">No entanto, as pessoas tendem a escrever várias linhas ao fazer anotações, e não há garantia de que essas linhas sejam horizontais em relação à página.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-121">However, people tend to write multiple lines when taking notes, and those lines are not guaranteed to be horizontal in relation to the page.</span></span> <span data-ttu-id="0f0e7-122">Com a API InkAnalysis, a tinta é pré-processado pelo analisador de tinta antes de ser enviada ao reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-122">With the InkAnalysis API, ink is preprocessed by the ink analyzer before being sent to the recognizer.</span></span> <span data-ttu-id="0f0e7-123">A tinta analisada é transformada em horizontal antes de ser reconhecida, melhorando os resultados de reconhecimento.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-123">The analyzed ink is transformed to horizontal before being recognized, improving the recognition results.</span></span>

<span data-ttu-id="0f0e7-124">Outros benefícios do reconhecimento são derivados ao fazer com que o Ink Analyzer corrija informações de ordem de traços incorretas antes de enviar a tinta para o reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-124">Other benefits to recognition are derived by having the ink analyzer correct incorrect stroke order information before sending the ink to the recognizer.</span></span> <span data-ttu-id="0f0e7-125">Além disso, os resultados de reconhecimento agora estão disponíveis de maneira seletiva.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-125">Further, recognition results are now available in a selective manner.</span></span> <span data-ttu-id="0f0e7-126">Ou seja, o desenvolvedor pode recuperar rapidamente os resultados de reconhecimento de uma única palavra, linha ou parágrafo em uma chamada.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-126">That is, the developer can quickly retrieve the recognition results for a single word, line, or paragraph in one call.</span></span>

### <a name="ink-classification"></a><span data-ttu-id="0f0e7-127">Classificação de tinta</span><span class="sxs-lookup"><span data-stu-id="0f0e7-127">Ink Classification</span></span>

<span data-ttu-id="0f0e7-128">Há, é claro, uma variedade de cenários em que você pode manter os dados de tinta intactos, em vez de convertê-los imediatamente em texto.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-128">There are, of course, a variety of scenarios in which you may to keep the ink data intact, rather than converting it immediately to text.</span></span> <span data-ttu-id="0f0e7-129">A análise de tinta também fornece benefícios aqui.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-129">Ink analysis provides benefits here as well.</span></span> <span data-ttu-id="0f0e7-130">Especificamente, as APIs do InkAnalysis fornecem a capacidade de dividir os traços de tinta de acordo com o fato de estarem escritos ou desenhos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-130">Specifically, the InkAnalysis APIs provide the ability to split ink strokes according to whether they are writing or drawings.</span></span> <span data-ttu-id="0f0e7-131">Os traços de tinta classificados como escrita são aqueles que compõem uma palavra ou caracteres.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-131">Ink strokes that are classified as writing are those that make up a word or characters.</span></span> <span data-ttu-id="0f0e7-132">Todos os outros traços são desenhos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-132">All other strokes are drawings.</span></span> <span data-ttu-id="0f0e7-133">Isso fornece uma nova maneira de acessar dados de tinta, permitindo novos cenários de usuário.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-133">This provides you with a new way to access ink data, enabling new user scenarios.</span></span> <span data-ttu-id="0f0e7-134">Por exemplo, você pode implementar a seleção para que ela seja diferente com base no tipo de traço no qual o usuário toca; se um usuário tocar em um traço de escrita, o aplicativo selecionará todo o conjunto de traços que compõem a palavra, se o usuário tocar em um atiçar de desenho, o aplicativo selecionará apenas esse traço.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-134">For instance, you may implement selection so that it is different based on which type of stroke the user taps on; if a user taps a writing stroke, the application selects the entire set of strokes that compose the word, if the user taps a drawing stoke, the application selects only that stroke.</span></span>

### <a name="layout-analysis"></a><span data-ttu-id="0f0e7-135">Análise de layout</span><span class="sxs-lookup"><span data-stu-id="0f0e7-135">Layout Analysis</span></span>

<span data-ttu-id="0f0e7-136">A análise de layout útil realmente vai muito além da análise relativamente simples da tinta em componentes de escrita e desenho.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-136">Useful layout analysis actually goes far beyond the relatively simple breakdown of ink into writing and drawing components.</span></span>

<span data-ttu-id="0f0e7-137">A análise de tinta também inclui uma divisão mais rica dos traços de escrita e desenho.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-137">Ink analysis also includes a richer breakdown of the writing and drawing strokes.</span></span> <span data-ttu-id="0f0e7-138">Como um exemplo muito simples, tire um blob de tinta, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-138">As a very simple example, take a blob of ink as shown in the following illustration.</span></span>

![duas linhas simples de manuscrito](images/12e7a221-59c1-4d69-b7aa-67f2caebe375.jpg)

<span data-ttu-id="0f0e7-140">Depois que a plataforma analisa esses traços, ela retorna uma representação em árvore desses traços, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-140">After the platform has analyzed these strokes, it returns a tree representation of these strokes as shown in the following illustration.</span></span> <span data-ttu-id="0f0e7-141">Para esse caso simples, a árvore contém apenas informações de parágrafo, linha e palavra, mas a riqueza dessa árvore aumenta à medida que a complexidade do documento de tinta aumenta.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-141">For this simple case, the tree contains only paragraph, line, and word information, but the richness of this tree increases as the complexity of the ink document increases.</span></span>

![representação em árvore de raiz, parágrafo, linhas e palavras](images/be5a7635-0abc-45ad-bcb5-98fddee5e148.jpg)

<span data-ttu-id="0f0e7-143">Como essas informações agora estão separadas em unidades gerenciáveis, agora você pode criar recursos mais poderosos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-143">Because this information is now separated into manageable units, you can now create more powerful features.</span></span> <span data-ttu-id="0f0e7-144">Por exemplo, o aplicativo pode estender o recurso no qual o usuário toca para selecionar uma palavra em um recurso no qual o usuário toca uma vez para selecionar a palavra, toca duas vezes para selecionar a linha inteira e toca três vezes para selecionar o parágrafo inteiro.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-144">As an example, the application can extend the feature in which the user taps to select a word into a feature in which the user taps once to select the word, taps twice to select the entire line, and taps three times to select the entire paragraph.</span></span> <span data-ttu-id="0f0e7-145">Aproveitando a estrutura de árvore retornada pela operação de análise, o aplicativo pode relacionar a área de tocado de volta a um traço na árvore.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-145">By leveraging the tree structure returned by the analysis operation, the application can relate the tapped area back to a stroke in the tree.</span></span> <span data-ttu-id="0f0e7-146">Depois que o aplicativo encontra um traço, ele pode percorrer a árvore para determinar como e quais traços vizinhos selecionar.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-146">After the application finds a stroke, it can walk up the tree to determine how and which neighboring strokes to select.</span></span>

<span data-ttu-id="0f0e7-147">A seleção de uma linha inteira é um exemplo simplista dos benefícios da análise de tinta, mas as possibilidades se tornam ótimas quando uma considera os diferentes tipos de estruturas hierárquicas que o analisador de tinta é capaz de detectar:</span><span class="sxs-lookup"><span data-stu-id="0f0e7-147">Selecting an entire line is a simplistic example of the benefits of ink analysis, but the possibilities become great when one considers the different types of hierarchical structures the ink analyzer is capable of detecting:</span></span>

-   <span data-ttu-id="0f0e7-148">Listas ordenadas e não ordenadas</span><span class="sxs-lookup"><span data-stu-id="0f0e7-148">Ordered and unordered lists</span></span>
-   <span data-ttu-id="0f0e7-149">Formas</span><span class="sxs-lookup"><span data-stu-id="0f0e7-149">Shapes</span></span>
-   <span data-ttu-id="0f0e7-150">Comentários anotados escritos embutidos com o texto</span><span class="sxs-lookup"><span data-stu-id="0f0e7-150">Annotative comments written inline with the text</span></span>

<span data-ttu-id="0f0e7-151">Os tipos de recursos variam de aplicativo para aplicativo e são baseados em requisitos e na análise de tinta e nos mecanismos de reconhecimento disponíveis.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-151">The types of features vary from application to application and are based on requirements and the available ink analysis and recognition engines.</span></span>

### <a name="key-ink-analysis-features"></a><span data-ttu-id="0f0e7-152">Principais recursos de análise de tinta</span><span class="sxs-lookup"><span data-stu-id="0f0e7-152">Key Ink Analysis Features</span></span>

<span data-ttu-id="0f0e7-153">Os principais recursos da API InkAnalysis incluem os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="0f0e7-153">The key capabilities of the InkAnalysis API include the following features:</span></span>

-   <span data-ttu-id="0f0e7-154">Análise incremental</span><span class="sxs-lookup"><span data-stu-id="0f0e7-154">Incremental Analysis</span></span>
-   <span data-ttu-id="0f0e7-155">Persistência</span><span class="sxs-lookup"><span data-stu-id="0f0e7-155">Persistence</span></span>
-   <span data-ttu-id="0f0e7-156">Proxy de dados</span><span class="sxs-lookup"><span data-stu-id="0f0e7-156">Data Proxy</span></span>
-   <span data-ttu-id="0f0e7-157">Reconciliação</span><span class="sxs-lookup"><span data-stu-id="0f0e7-157">Reconciliation</span></span>
-   <span data-ttu-id="0f0e7-158">Extensibilidade</span><span class="sxs-lookup"><span data-stu-id="0f0e7-158">Extensibility</span></span>

### <a name="incremental-analysis"></a><span data-ttu-id="0f0e7-159">Análise incremental</span><span class="sxs-lookup"><span data-stu-id="0f0e7-159">Incremental Analysis</span></span>

<span data-ttu-id="0f0e7-160">Quando os usuários finais trabalham com tinta, normalmente os tratam como manuscrito.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-160">When end users work with ink, they usually treat it like handwriting.</span></span> <span data-ttu-id="0f0e7-161">A tinta está continuamente sujeita a operações de edição, como a adição de nova tinta, exclusão de tinta existente e a modificação de propriedades de tinta, todas feitas da mesma maneira que o manuscrito é sempre editado.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-161">The ink is continually subject to editing operations such as the addition of new ink, deletion of existing ink, and the modification of ink properties, all done in the same way that handwriting is continually edited.</span></span> <span data-ttu-id="0f0e7-162">Essas operações de edição afetam os resultados da análise.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-162">These editing operations affect the analysis results.</span></span> <span data-ttu-id="0f0e7-163">Quando ocorrem edições, elas normalmente podem ser isoladas em seções do documento em pontos específicos no tempo.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-163">When edits occur, they can usually be isolated to sections of the document at specific points in time.</span></span> <span data-ttu-id="0f0e7-164">Por exemplo, suponha que um usuário escreva cinco linhas de tinta.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-164">For example, assume a user writes five lines of ink.</span></span> <span data-ttu-id="0f0e7-165">A maneira padrão que os aplicativos analisam a tinta é aguardar até que o usuário tenha terminado de escrever todas as cinco linhas de tinta — um parágrafo, por exemplo — e, em seguida, analisar os resultados, de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-165">The standard way that applications analyze ink is to wait until the user has finished writing all five lines of ink—a paragraph, for instance—and then analyze the results, either synchronously or asynchronously.</span></span>

<span data-ttu-id="0f0e7-166">Você pode otimizar o tempo total gasto na análise dessas cinco linhas isolando as áreas que são analisadas à medida que elas estão sendo gravadas e reanalisando apenas as partes dos resultados que foram alteradas.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-166">You can optimize the overall time spent analyzing these five lines by isolating the areas that are analyzed as they are being written, and then reanalyzing only the parts of the results that have changed.</span></span> <span data-ttu-id="0f0e7-167">Depois que a primeira linha for analisada, ela nunca será reconhecida novamente, a menos que seja modificada pelo usuário final.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-167">After the first line is analyzed, it will never be recognized again unless it is modified by the end user.</span></span> <span data-ttu-id="0f0e7-168">O reconhecimento da segunda linha é tratado como uma operação de reconhecimento independente.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-168">Recognition of the second line is treated as an independent recognition operation.</span></span>

<span data-ttu-id="0f0e7-169">Essa abordagem incremental funciona bem no nível de linha para as operações de reconhecimento, mas precisa trabalhar em um nível mais alto para a operação de análise de tinta.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-169">This incremental approach works well at the line level for the recognition operations, but it needs to work at a higher level for the ink analysis operation.</span></span> <span data-ttu-id="0f0e7-170">Como o Ink Analyzer pode detectar diferentes classificações de nível superior para essas cinco linhas de tinta (por exemplo, pode ser um parágrafo padrão ou cinco itens em uma lista), a abordagem incremental para o analisador de tinta é que ele precisa analisar essas estruturas mais altas.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-170">Because the ink analyzer can detect different higher level classifications for these five lines of ink (for example, it could be a standard paragraph or five items in a list), the incremental approach for the ink analyzer is that it has to analyze these higher structures.</span></span> <span data-ttu-id="0f0e7-171">Isso significa que, depois que o analisador de tinta classifica a primeira linha de tinta como uma linha, ele verifica se ela ainda é uma linha quando classifica a segunda linha.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-171">That is to say, after the ink analyzer classifies the first line of ink as a line, it double-checks that it is still a line when it classifies the second line.</span></span> <span data-ttu-id="0f0e7-172">No entanto, o analisador de tinta isola essa verificação dupla para o parágrafo e ignora o primeiro parágrafo ao analisar um segundo parágrafo, tratando o segundo parágrafo como uma operação independente do analisador de tinta.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-172">However, the ink analyzer isolates this double-checking to the paragraph and ignores the first paragraph when analyzing a second paragraph, treating the second paragraph as an independent ink analyzer operation.</span></span> <span data-ttu-id="0f0e7-173">Essa abordagem incremental para a análise poupa drasticamente o tempo de processamento quando grandes quantidades de tinta já existem no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-173">This incremental approach to analysis dramatically saves processing time when large amounts of ink already exist in the application.</span></span>

### <a name="persistence"></a><span data-ttu-id="0f0e7-174">Persistência</span><span class="sxs-lookup"><span data-stu-id="0f0e7-174">Persistence</span></span>

<span data-ttu-id="0f0e7-175">A análise incremental funciona bem em uma determinada sessão ou instância de um objeto [**InkAnalyzer**](inkanalyzer.md) .</span><span class="sxs-lookup"><span data-stu-id="0f0e7-175">Incremental analysis works well within a given session or instance of an [**InkAnalyzer**](inkanalyzer.md) object.</span></span> <span data-ttu-id="0f0e7-176">No entanto, a primeira geração de APIs da plataforma do Tablet PC não pode executar a análise incremental depois que a tinta é persistida no disco.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-176">However, the first generation Tablet PC Platform APIs cannot perform incremental analysis after the ink is persisted to disk.</span></span> <span data-ttu-id="0f0e7-177">A API InkAnalysis permite salvar a tinta em disco junto com uma forma persistente dos resultados da análise.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-177">The InkAnalysis API enables saving ink to disk along with a persisted form of the analysis results.</span></span> <span data-ttu-id="0f0e7-178">Os resultados da análise podem ser carregados quando a tinta é carregada e podem ser injetadas em uma nova instância de um **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-178">The analysis results can be loaded when the ink is loaded and can be injected into a new instance of an **InkAnalyzer**.</span></span> <span data-ttu-id="0f0e7-179">Uma nova instância do objeto **InkAnalyzer** tem o mesmo estado de resultados que tinha anteriormente e agora pode aceitar quaisquer modificações como alterações incrementais no estado existente, em vez de analisar tudo novamente.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-179">A new instance of the **InkAnalyzer** object then has the same results state it previously had and can now accept any modifications as incremental changes to the existing state, rather than analyzing everything again.</span></span>

### <a name="data-proxy"></a><span data-ttu-id="0f0e7-180">Proxy de dados</span><span class="sxs-lookup"><span data-stu-id="0f0e7-180">Data Proxy</span></span>

<span data-ttu-id="0f0e7-181">Muitos aplicativos já têm algum tipo de estrutura de documentos existente em seus aplicativos; por exemplo, um grafo ou um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-181">Many applications already have some sort of existing document structure in their applications; for instance, a graph or a database.</span></span> <span data-ttu-id="0f0e7-182">O [**InkAnalyzer**](inkanalyzer.md) também apresenta resultados em um formulário estruturado, em uma árvore de objetos [**ContextNode**](icontextnode.md) .</span><span class="sxs-lookup"><span data-stu-id="0f0e7-182">The [**InkAnalyzer**](inkanalyzer.md) also presents results in a structured form, in a tree of [**ContextNode**](icontextnode.md) objects.</span></span> <span data-ttu-id="0f0e7-183">A estrutura **InkAnalyzer** e a estrutura existente do aplicativo precisam interoperar em duas direções: os resultados são extraídos do **InkAnalyzer** para o aplicativo e o estado é enviado por push do aplicativo para o **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-183">The **InkAnalyzer** structure and the application's existing structure need to interoperate in two directions: results are pulled from the **InkAnalyzer** into the application and state is pushed from the application into the **InkAnalyzer**.</span></span>

<span data-ttu-id="0f0e7-184">Se a extração dos resultados do [**InkAnalyzer**](inkanalyzer.md) para a estrutura do aplicativo fosse tudo o que era necessário, seria relativamente simples.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-184">If pulling the results from the [**InkAnalyzer**](inkanalyzer.md) into the application's structure were all that was needed, it would be relatively simple.</span></span> <span data-ttu-id="0f0e7-185">Os aplicativos iteram na árvore de resultados e copiam (integram) todas as partes dos resultados de que precisam em sua estrutura de dados existente.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-185">Applications would iterate through the results tree and copy (integrate) all pieces of the results they need into their existing data structure.</span></span> <span data-ttu-id="0f0e7-186">No entanto, como muitos aplicativos horizontais exigem análise e persistência incremental no disco, o problema se torna bidirecional.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-186">However, because many horizontal applications require incremental analysis and persistence to disk, the problem becomes two-directional.</span></span> <span data-ttu-id="0f0e7-187">O estado (resultados anteriores) precisa ser extraído da estrutura do aplicativo e enviado por push para o **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-187">State (past results) needs to be pulled from the application's structure and pushed into the **InkAnalyzer**.</span></span>

<span data-ttu-id="0f0e7-188">Para atender a esse requisito, o [**InkAnalyzer**](inkanalyzer.md) contém uma série de eventos que ele gera no momento apropriado durante uma operação de análise para permitir que os aplicativos proxy a solicitação de dados de volta para suas estruturas existentes.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-188">To meet this requirement, the [**InkAnalyzer**](inkanalyzer.md) contains a series of events that it raises at the appropriate time during an analysis operation to allow applications to proxy the request for data back to their existing structures.</span></span> <span data-ttu-id="0f0e7-189">Esses eventos são gerados somente para os objetos [**ContextNode**](icontextnode.md) exigidos pela operação incremental.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-189">These events are raised only for those [**ContextNode**](icontextnode.md) objects required by the incremental operation.</span></span>

### <a name="reconciliation"></a><span data-ttu-id="0f0e7-190">Reconciliação</span><span class="sxs-lookup"><span data-stu-id="0f0e7-190">Reconciliation</span></span>

<span data-ttu-id="0f0e7-191">A maioria dos aplicativos vai querer analisar a tinta em segundo plano para manter o mínimo de interrupções da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-191">Most applications will want to analyze the ink in the background to keep user interface interruptions to a minimum.</span></span> <span data-ttu-id="0f0e7-192">A análise da tinta em segundo plano causa problemas, no entanto, se o usuário alterar a tinta (ou a tinta vizinha) que está sendo analisada.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-192">Analyzing ink in the background causes problems, however, if the user changes the ink (or neighboring ink) that is being analyzed.</span></span> <span data-ttu-id="0f0e7-193">Por exemplo, se o usuário excluir a tinta durante a operação em segundo plano, a estrutura resultante refletiria o estado do documento quando a operação em segundo plano fosse iniciada, em vez de quando ela fosse concluída.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-193">For example, if the user deletes the ink during the background operation, the resulting structure would reflect the state of the document when the background operation started, rather than when it was completed.</span></span>

<span data-ttu-id="0f0e7-194">Para auxiliar aplicativos, o [**InkAnalyzer**](inkanalyzer.md) reconcilia as diferenças no estado do documento entre o início e o fim da operação de análise.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-194">To assist applications, the [**InkAnalyzer**](inkanalyzer.md) reconciles the differences in document state between the beginning and end of the analysis operation.</span></span> <span data-ttu-id="0f0e7-195">As alterações feitas pelo usuário ou aplicativo enquanto a análise está sendo executada em segundo plano sempre substituem os resultados calculados em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-195">Changes made by the user or application while the analysis is running in the background always override the results calculated in the background.</span></span> <span data-ttu-id="0f0e7-196">Após a reconciliação, somente as partes da estrutura de resultados que não entram em conflito com as alterações do documento são relatadas e os traços conflitantes são marcados para análise futura.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-196">After reconciliation, only the parts of the results structure that do not conflict with document changes are reported, and the conflicting strokes are tagged for future analysis.</span></span> <span data-ttu-id="0f0e7-197">Na próxima vez em que a operação de análise em segundo plano for executada, os resultados serão recalculados com base no novo estado.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-197">The next time the background analysis operation is run, the results are recalculated based on the new state.</span></span>

<span data-ttu-id="0f0e7-198">O diagrama a seguir mostra esse processo.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-198">The following diagram shows this process.</span></span> <span data-ttu-id="0f0e7-199">O tempo é expresso linearmente de cima para baixo no diagrama.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-199">Time is expressed linearly from top to bottom in the diagram.</span></span>

![processo para reconciliação de alterações de estado do documento durante a operação de análise](images/6323e0b5-b6b3-4adc-8c73-da3fad5b4bc2.jpg)

1.  <span data-ttu-id="0f0e7-201">No tempo 1 (T1), o aplicativo está coletando tinta do usuário final, incluindo qualquer tipo de modificação de tinta, como adicionar, remover ou modificar.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-201">At time 1 (t1), the application is collecting ink from the end-user, including any kind of ink modification, such as adding, removing, or modifying.</span></span>
2.  <span data-ttu-id="0f0e7-202">Em T2, o aplicativo invoca a operação de análise em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-202">At t2, the application invokes the background analysis operation.</span></span> <span data-ttu-id="0f0e7-203">O [**InkAnalyzer**](inkanalyzer.md) determina qual tinta não tem resultados e qual tinta precisa ser verificada duas vezes.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-203">The [**InkAnalyzer**](inkanalyzer.md) determines what ink does not have results and what ink needs to be double-checked.</span></span> <span data-ttu-id="0f0e7-204">Ele copia os dados de tinta necessários para permitir que o thread em segundo plano seja executado de forma independente.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-204">It copies the needed ink data to allow the background thread to execute independently.</span></span>
3.  <span data-ttu-id="0f0e7-205">No T3, o [**InkAnalyzer**](inkanalyzer.md) retorna a execução do thread da interface do usuário para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-205">At t3, the [**InkAnalyzer**](inkanalyzer.md) returns the user interface thread execution to the application.</span></span> <span data-ttu-id="0f0e7-206">O **InkAnalyzer** cria um segundo thread, o thread de análise em segundo plano e os mecanismos de análise e reconhecimento de tinta analisam os dados de tinta copiados.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-206">The **InkAnalyzer** creates a second thread, the background analysis thread, and the ink analysis and recognition engines analyze the copied ink data.</span></span>
4.  <span data-ttu-id="0f0e7-207">Enquanto a operação de análise está ocorrendo no segundo thread em segundo plano, o usuário final continua editando o documento, adicionando e removendo dados de traço, em T4 e T5.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-207">While the analysis operation is occurring on the second background thread, the end user continues to edit the document, adding and removing stroke data, at t4 and t5.</span></span> <span data-ttu-id="0f0e7-208">Essas edições podem entrar em conflito com o trabalho que está sendo processado em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-208">These edits can conflict with the work that is being process in the background.</span></span>
5.  <span data-ttu-id="0f0e7-209">Em T6, o thread em segundo plano concluiu a operação de análise e os resultados estão prontos.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-209">At t6, the background thread has finished the analysis operation, and results are ready.</span></span> <span data-ttu-id="0f0e7-210">Antes que o [**InkAnalyzer**](inkanalyzer.md) comunique os resultados para o aplicativo, ele executa um algoritmo de reconciliação para determinar se as edições do usuário foram feitas enquanto a operação de análise estava sendo calculada (T4 e T5) em conflito com os resultados.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-210">Before the [**InkAnalyzer**](inkanalyzer.md) communicates the results to the application, it runs a reconciliation algorithm to determine if the user edits made while the analysis operation was being calculated (t4 and t5) conflict with the results.</span></span> <span data-ttu-id="0f0e7-211">Se qualquer colisão for detectada, os traços conflitantes serão sinalizados para reanálise, que ocorrerá na próxima vez que o aplicativo invocar a operação de análise em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-211">If any collisions are detected, the colliding strokes are flagged for re-analysis, which occurs the next time the application invokes the background analysis operation.</span></span>
6.  <span data-ttu-id="0f0e7-212">Por fim, em T7, com todas as colisões detectadas, o [**InkAnalyzer**](inkanalyzer.md) apresenta os resultados para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-212">Finally, at t7, with all the collisions detected, the [**InkAnalyzer**](inkanalyzer.md) presents the results to the application.</span></span>

### <a name="extensibility"></a><span data-ttu-id="0f0e7-213">Extensibilidade</span><span class="sxs-lookup"><span data-stu-id="0f0e7-213">Extensibility</span></span>

<span data-ttu-id="0f0e7-214">As APIs InkAnalysis permitem que novos tipos de mecanismos de análise sejam usados por aplicativos, de forma a impedir que o aplicativo precise reescrever todos os benefícios da API InkAnalysis, incluindo reconciliação, proxy de dados, persistência e análise incremental.</span><span class="sxs-lookup"><span data-stu-id="0f0e7-214">The InkAnalysis APIs allow new types of analysis engines to be used by applications, in such a way as to prevent the application from having to rewrite all of the benefits of the InkAnalysis API, including reconciliation, data proxy, persistence, and incremental analysis.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0f0e7-215">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="0f0e7-215">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="0f0e7-216">[Microsoft. Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="0f0e7-216">[Microsoft.Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span></span>
</dt> <dt>

[<span data-ttu-id="0f0e7-217">Referência de análise de tinta</span><span class="sxs-lookup"><span data-stu-id="0f0e7-217">Ink Analysis Reference</span></span>](ink-analysis-reference.md)
</dt> </dl>

 

 
