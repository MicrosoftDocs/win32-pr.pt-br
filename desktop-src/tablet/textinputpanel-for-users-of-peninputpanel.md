---
description: O lançamento do Windows Vista inclui um novo objeto de programação para o painel de entrada do Tablet PC que fornece um novo intervalo de possibilidade de como um aplicativo pode usar e interagir com o painel de entrada.
ms.assetid: 539f41d3-5fb8-4e20-99ba-0d5af1f0cc54
title: TextInputPanel para usuários de PenInputPanel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14ed213db49427d997f0ea1dda414cf1a6a0c2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104297464"
---
# <a name="textinputpanel-for-users-of-peninputpanel"></a>TextInputPanel para usuários de PenInputPanel

O lançamento do Windows Vista inclui um novo objeto de programação para o painel de entrada do Tablet PC que fornece um novo intervalo de possibilidade de como um aplicativo pode usar e interagir com o painel de entrada. Pela primeira vez, os desenvolvedores de aplicativos podem posicionar o In-Place ícone do painel de entrada para alinhar uma caixa de texto ou colocá-lo no canto de uma superfície de tinta do cliente para oferecer acesso a um modo de entrada alternativo. Os desenvolvedores têm o mesmo controle sobre o posicionamento quando o ícone do painel de entrada é expandido no painel de entrada In-Place. Isso torna possível garantir que o In-Place painel de entrada nunca se sobreponha aos principais elementos da interface do usuário no layout de um aplicativo ou mesmo para refluir a interface do usuário de um aplicativo para liberar espaço para o painel de entrada In-Place e, em seguida, colocá-lo no espaço reservado. O novo modelo de programação inclui suporte para mais do que apenas posicionar, mas os desenvolvedores também podem personalizar a área de entrada, o modo de correção e muitas outras propriedades do painel de entrada para adaptar a experiência de entrada de texto em um aplicativo. Por fim, pela primeira vez, é possível que um aplicativo receba a tinta do usuário, além do texto reconhecido, associado a inserções de texto do painel de entrada. Isso permite que novos cenários de aplicativos, incluindo tinta em logs de controle de alterações, e que os usuários editem ou exibam tinta no aplicativo. Esses novos recursos de programação são o resultado direto dos comentários que a Microsoft recebeu sobre a história do desenvolvedor do painel de entrada e que representa a primeira etapa para a integração mais rígida de aplicativos e painel de entrada.

Para fornecer esse modelo de programação de painel de entrada aprimorado, o mecanismo existente para interagir de forma programática com o painel de entrada, o objeto [**PenInputPanel**](peninputpanel-class.md) , está sendo preterido e substituído pelo novo objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) . Além de fornecer novos recursos de programação, o objeto **TextInputPanel** também fornece quase todos os recursos programáticos do objeto **PenInputPanel** . O objeto **TextInputPanel** está incluído no Windows Vista e no Windows Vista Software Developer Kit. O objeto **TextInputPanel** só é compatível com o painel de entrada do Windows Vista e não pode ser usado com o Windows XP Service Pack 2 ou com o painel de entrada mais antigo. O aplicativo que foi escrito anteriormente para usar o objeto **PenInputPanel** continuará funcionando com o painel de entrada do Windows Vista, no entanto, ao escrever novos aplicativos de Tablet, os desenvolvedores são altamente incentivados a usar o novo objeto **TextInputPanel** em vez do objeto **PenInputPanel** preterido.

Cada uma das opções de programação do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) pode ser aplicada em uma base de campo por texto. Isso é feito anexando uma instância do objeto **TextInputPanel** usando a propriedade [**AttachedEditWindow**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_attachededitwindow) . A propriedade deve ser definida como o identificador de janela para o campo de texto.

> [!Note]  
> : Várias das propriedades e métodos descritos abaixo se aplicam quando o painel de entrada está no modo de interação in-loco e não quando o painel de entrada está no modo de interação flutuante ou encaixada. O modo de interação in-loco é o comportamento do painel de entrada em que colocar o foco em um campo editável faz com que o ícone do painel de entrada apareça ao lado do campo e o toque no ícone do painel de entrada faz com que o painel de entrada seja expandido. Os métodos e as propriedades que se aplicam somente quando o painel de entrada está no modo de interação in-loco, todos contêm ' inplace ' no nome do método ou da propriedade.

 

## <a name="control-of-input-panel-icon-and-input-panel-visibility"></a>Controle do ícone do painel de entrada e da visibilidade do painel de entrada

O primeiro aspecto do painel de entrada que os desenvolvedores de aplicativos têm mais controle sobre o Windows Vista é sua visibilidade. Usando o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , é possível controlar a visibilidade do painel de entrada do In-Place de três maneiras. Com uma combinação de propriedades e métodos, um aplicativo pode determinar se o painel de entrada In-Place mostra, quando o painel de entrada do In-Place mostra e se ele aparece primeiro como o ícone do painel de entrada ou mostra imediatamente expandido. Ao combinar essas técnicas para controlar a visibilidade com as técnicas para controlar o posicionamento abordado na próxima seção, é possível que os desenvolvedores de aplicativos criem pontos de inicialização personalizados e fluxos de trabalho personalizados usando o In-Place painel de entrada em um aplicativo.

> [!Note]  
> As propriedades e os métodos discutidos nesta seção se aplicam somente quando o painel de entrada está no modo de interação In-Place.

 

Em primeiro lugar, é possível impedir que o painel de entrada In-Place e o ícone do painel de entrada apareçam definindo a propriedade [**InPlaceVisibleOnFocus**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplacevisibleonfocus) como **false**. Configurá-lo como **true** reverte para o padrão do sistema de aparecer quando possível, desde que ele não tenha sido desabilitado pelo usuário ou política de grupo. Essa opção é útil para aplicativos que incluem soluções de entrada de texto personalizadas como uma alternativa ao painel de entrada.

Em segundo lugar, ao definir a propriedade [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , um desenvolvedor pode especificar o estado in-loco, conforme especificado pela enumeração [**inlocostate**](/windows/win32/api/peninputpanel/ne-peninputpanel-inplacestate) , o painel de entrada In-Place aparece quando o foco é colocado em um campo de texto. O padrão do sistema é que o painel de entrada do In-Place apareça no estado de foco, a menos que o painel de entrada já esteja visível no estado expandido; nesse caso, o painel de entrada permanece expandido. A definição da propriedade **DefaultInPlaceState** como **inlocostate \_ expandida** faz com que o painel de entrada do In-Place sempre apareça expandido, em vez do ícone do painel de entrada aparecer primeiro e, em seguida, exigir que o usuário toque no ícone do painel de entrada antes que o painel de entrada se expanda. As outras duas opções são in- **locostate \_ automático**, que é o comportamento padrão do sistema e o **\_ HoverTarget** de entrada, que sempre faz com que o ícone do painel de entrada seja exibido. A capacidade de especificar que o painel de entrada do In-Place sempre aparece expandido é novo com o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) e não é possível usar o objeto [**PenInputPanel**](peninputpanel-class.md) . A ilustração a seguir mostra o In-Place ícone do painel de entrada e os Estados expandidos do painel.

![ícone do painel de entrada in-loco e estados expandidos](images/8ce866b6-9a45-499f-a3d1-95a1d34d6402.jpg)

Além de ser capaz de controlar o estado in-loco, também é possível que um desenvolvedor determine o estado in-loco em um determinado momento, obtendo a propriedade [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) . O **CurrentInPlaceState** é igual a [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) quando o painel de entrada não está visível, exceto quando **DefaultInPlaceState** é in- **placestate \_ automaticamente** , em que o **CurrentInPlaceState** se torna **inlocostate \_ HoverTarget**. Os eventos [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged) podem ser usados para controlar o estado de visibilidade do painel de entrada do In-Place.

Por fim, um desenvolvedor pode forçar o In-Place painel de entrada a ocultar ou mostrar usando o método [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) . Se o desenvolvedor tiver definido anteriormente a propriedade [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , o painel de entrada aparecerá no estado especificado quando for forçado a mostrar. Um aplicativo só é permitido para ocultar ou mostrar o painel de entrada do In-Place quando o foco está atualmente na janela em que o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) está anexado e quando o usuário não tem o painel de entrada aberto em outro modo de interação, como encaixado ou flutuante. A capacidade de forçar o In-Place painel de entrada para ocultar ou mostrar também é novo com o objeto **TextInputPanel** e não é possível usar o objeto [**PenInputPanel**](peninputpanel-class.md) .

Essas opções oferecem aos desenvolvedores de aplicativos um controle fino sobre quando o painel de entrada In-Place é exibido e em que estado. Personalizando o estado local padrão e controlando a visibilidade in-loco independentemente das alterações de foco, um desenvolvedor de aplicativos pode criar um fluxo de trabalho personalizado quando o painel de entrada responde às configurações do aplicativo ou entrada do usuário em um aplicativo.

## <a name="absolute-positioning-of-input-panel-icon-and-input-panel"></a>Posicionamento absoluto do ícone do painel de entrada e do painel de entrada

Possivelmente, o novo recurso mais interessante encontrado no objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) é o posicionamento absoluto do painel de entrada In-Place. Com essa nova funcionalidade, um desenvolvedor de aplicativos pode garantir que o painel de entrada do In-Place não se sobreponha a um ou mais elementos visuais principais em um layout de aplicativo. Usando o objeto [**PenInputPanel**](peninputpanel-class.md) , é possível posicionar o painel de entrada In-Place em relação a um campo de texto com base em um deslocamento, no entanto, o painel de entrada ainda se ajustará para manter na tela. Pela primeira vez no Vista, um aplicativo pode posicionar o In-Place painel de entrada em uma posição absoluta usando coordenadas de tela. Além disso, a responsabilidade de manter o painel de entrada na tela é deixada para o desenvolvedor do aplicativo, portanto, remover a chance de o painel de entrada ser automaticamente e, aparentemente, de forma aleatória, reposicionar-se.

> [!Note]  
> As propriedades e os métodos discutidos nesta seção se aplicam somente quando o painel de entrada está no modo de interação In-Place.

 

Os dois métodos principais necessários para posicionar absolutamente o In-Place painel de entrada são [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) e [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition). O primeiro é usado para especificar o local do In-Place painel de entrada e o segundo é usado para especificar o local do ícone do painel de entrada para o painel de entrada In-Place. Se um aplicativo optar por definir apenas o local do ícone do painel de entrada e não o local do In-Place painel de entrada, o painel de entrada In-Place aparecerá no local padrão determinado pelo sistema. Da mesma forma, se um aplicativo reposicionar o In-Place painel de entrada, mas não o ícone do painel de entrada, o ícone painel de entrada aparecerá no local padrão. O local é especificado em coordenadas da tela. O ponto real que está sendo posicionado é o canto superior esquerdo do ícone do painel de entrada ou painel de entrada sem expansão do pente de correção. Quando o pente de correção é expandido, o ponto que está sendo posicionado não é alterado. (Veja a Figura 2 abaixo) Não há restrições sobre onde o painel de entrada do In-Place e o In-Place ícone do painel de entrada podem ser locais, e é responsabilidade dos aplicativos que chamam esses métodos para mantê-los na tela. Os dois métodos são síncronos, o que significa que o posicionamento ocorre antes do retorno do método. No caso em que o painel de entrada já está aberto no modo flutuante ou de interação encaixada, uma tentativa de posicionar o In-Place painel de entrada ou o ícone do painel de entrada In-Place falha. Além disso, os métodos falham se a janela anexada ao objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) não tiver foco no momento.

Uma chamada para [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) ou [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) não faz com que o In-Place painel de entrada ou o ícone do painel de entrada seja mostrado automaticamente, ele simplesmente define a posição para a próxima vez em que são mostrados. Chamar [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) pode ser usado para forçá-los a mostrar imediatamente.

![medidas do painel de entrada in-loco](images/0c67a77a-5d2f-489f-9357-b8a168d024d3.jpg)

Ao posicionar o In-Place painel de entrada calculando se ele será desativado, a tela pode ser um pouco complicada. Para facilitar esse processo, há várias propriedades do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que podem ser usadas para simplificar esse processo. Juntas, essas propriedades e eventos podem ser usados para determinar o tamanho exato do painel de entrada In-Place em todos os seus Estados:

-   [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle)– essa propriedade fornece o retângulo delimitador para o painel de entrada do In-Place quando a maior área de entrada para o idioma de entrada atual é exibida. Se o painel de escrita ou o teclado de caracteres for determinado à área de entrada maior, a altura do botão de inserção será incluída. Ele não inclui a altura do pente de correção. Quando o painel de entrada In-Place aumenta automaticamente [](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging), o  /  par de eventos InPlaceSizeChanging [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged) é acionado e o valor dessa propriedade é atualizado para incluir a área de escrita adicional ou a linha de escrita.
-   [**PopUpCorrectionHeight**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_popupcorrectionheight)– essa propriedade especifica a altura do comb. de correção de inserção quando ele está posicionado acima do painel de entrada. Para obter a altura completa do painel de entrada do In-Place com o complemento de correção após a inserção, adicione a altura do [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) ao **PopUpCorrectionHeight**.

Como uma alternativa mais simples de definir a posição absoluta do painel de entrada do In-Place e o ícone do painel de entrada, um aplicativo pode apenas especificar se o painel de entrada do In-Place assume a exibição de um campo de entrada de texto acima ou abaixo dele. Dessa forma, é possível evitar sobreposição de elementos no layout do aplicativo de maneira mais flexível. Para fazer isso, o aplicativo define [**PreferredInPlaceDirection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_preferredinplacedirection) como **InPlaceDirection \_ inferior** ou **InPlaceDirection \_ superior**. A propriedade é uma preferência porque o painel de entrada In-Place substitui a preferência definida pelo aplicativo quando necessário para manter o painel de entrada na tela. O padrão do sistema é posicionar o painel de entrada In-Place abaixo de um campo de texto quando possível e, de outra forma, posicioná-lo acima. Definir o **PreferredInPlaceDirection** como **InPlaceDirection restaura \_ automaticamente** o padrão do sistema.

Juntas, as propriedades, os métodos e os eventos do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) oferecem aos desenvolvedores o controle necessário sobre o In-Place painel de entrada para poder posicionar de forma inteligente o painel de entrada In-Place e o ícone do painel de entrada em um layout de aplicativo, de modo que eles não interrompem o fluxo de layout e, em alguns casos, podem aparecer integrados. Esse novo nível de controle é um grande ganho para o design de aplicativos do Tablet.

## <a name="access-to-the-three-input-panel-areas-writing-pad-character-pad-and-keyboard"></a>Acesso às três áreas do painel de entrada: painel de escrita, painel de caracteres e teclado

O painel de entrada tem três áreas de entrada, o painel de escrita, o painel de caracteres e o teclado. Usando o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , um aplicativo pode especificar a área de entrada padrão que é mostrada para o usuário quando o painel de entrada é aberto. O principal motivo para um aplicativo fazer isso é emparelhar a área de entrada com o tipo de entrada de campo específico. Por exemplo, o painel de escrita provavelmente é mais adequado para preencher um campo de comentários, mas o teclado pode ser mais conveniente para inserir um número de série do produto que contenha números e letras. Para especificar a área de entrada padrão, os aplicativos definem a propriedade [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) como uma das três áreas de entrada, conforme definido pela enumeração [**PanelInputArea**](/windows/win32/api/peninputpanel/ne-peninputpanel-panelinputarea) . A ilustração a seguir mostra as três áreas de entrada.

![painel de entrada de escrita, caractere e teclado](images/3f1e3d03-88b9-478c-b12d-00d341bc8d5c.jpg)

A área de entrada padrão do sistema é o teclado de escrita para inglês, francês, alemão, espanhol, italiano, Português, holandês e todos os outros idiomas de entrada latinos. Para as linguagens de entrada do leste asiático, incluindo japonês, chinês e coreano, a área de entrada padrão é o painel de caracteres. No entanto, quando o usuário altera a área de entrada, ele substitui a área de entrada padrão para o idioma de entrada atual e é armazenado como o novo padrão para esse idioma de entrada. O teclado é a área de entrada padrão para campos de senha, independentemente do idioma de entrada, a menos que a segurança de senha tenha sido desabilitada pelo usuário ou pela política de grupo. Em todos os casos, definir a área do painel de entrada padrão programaticamente substitui o padrão do sistema, a menos que o campo atual seja um campo de senha ou o reconhecedor de manuscrito para a linguagem de entrada atual não ofereça suporte à área de entrada selecionada programaticamente. Definir a propriedade [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) como **InPlaceDirection restaura \_ automaticamente** as configurações padrão do sistema.

Independentemente de a área do painel de entrada padrão ter sido definida programaticamente ou não, o usuário tem a opção de alterar a área do painel de entrada atual quando o painel de entrada estiver aberto. Depois que o usuário altera a área de entrada atual, a seleção de usuário persiste até que o painel de entrada seja fechado ou o usuário altere a seleção novamente. Depois que o painel de entrada for fechado e reaberto, a área de entrada padrão definida de forma programática será remostrada.

Como a área do painel de entrada atual pode ser diferente da área do painel de entrada padrão, um aplicativo pode consultar a propriedade [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) para determinar qual área de entrada está visível no momento. Se o painel de entrada não estiver visível no momento, a área de entrada atual será igual à área de entrada padrão. A propriedade **CurrentInputArea** nunca é igual a **PanelInputArea \_ auto**. Se [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) for igual a **PanelInputArea \_ auto**, o **CurrentInputArea** será igual à última área de entrada mostrada ou ao padrão do sistema para o idioma de entrada atual se o painel de entrada nunca tiver sido mostrado.

A principal diferença entre o suporte da área de entrada encontrado no objeto [**PenInputPanel**](peninputpanel-class.md) e a do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) é o fato de que o aplicativo agora tem a opção de definir a área de entrada padrão como o painel de caracteres, além do teclado de escrita e do painel.

Usando as propriedades acima, um aplicativo pode controlar a área de entrada do painel de entrada mostrada em campos diferentes e otimizar a experiência de entrada de texto do usuário. Além disso, o aplicativo pode manter o reconhecimento da área de entrada atual e tomar decisões condicionais de acordo com a área de entrada mais adequada para a tarefa atual do usuário.

## <a name="detailed-information-about-input-panels-interaction-mode"></a>Informações detalhadas sobre o modo de interação do painel de entrada

Além de ser capaz de detectar a área de entrada atual do painel de entrada, também é possível detectar o modo de interação atual: in-loco, encaixado ou flutuante. Pode ser importante que o aplicativo saiba o modo de interação atual para entender como o usuário está interagindo com o aplicativo ou porque alguns métodos e propriedades do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) se aplicam somente ao modo de interação In-Place. Por exemplo, no aplicativo, o reflui os elementos da interface do usuário existentes e, em seguida, posiciona o In-Place painel de entrada em uma área em branco em suas interfaces de usuário deve verificar se o modo de interação atual está no local antes de fazer ajustes.

![modos de painel de entrada encaixados, flutuantes e no ritmo](images/98c8e96b-99b2-477a-9843-33b1fae7e75b.jpg)

A propriedade [**CurrentInteractionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinteractionmode) , do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , armazena o modo de interação atual como escolhido pelo usuário. Os modos possíveis são definidos pela enumeração entre [**ações**](/windows/win32/api/peninputpanel/ne-peninputpanel-interactionmode) como:

**Interaçãomode \_ Inplace**– no painel de entrada do modo de interação In-Place aparece ao lado do campo de entrada de texto que tem o foco no momento. Por padrão, o ícone do painel de entrada In-Place é exibido quando um ponto de inserção é colocado em um campo de entrada de texto. Tocar no ícone do painel de entrada faz com que o painel de entrada seja expandido. O painel de entrada In-Place só fica visível quando um ponto de inserção está em um campo editável.

Interaçãomode \_ flutuante – o modo de interação flutuante é semelhante ao modo de interação local, exceto que não está associado a um ponto de inserção. O painel entrada flutuante é aberto tocando na guia painel de entrada, que aparece por padrão na borda esquerda da tela. O painel de entrada flutuante e a guia painel de entrada podem ser arrastados e reposicionados pelo usuário. No modo flutuante, o posicionamento e o controle do painel de entrada são totalmente deixados para o usuário.

\_Interaction DockedTop – no painel de entrada do modo de interação Docked-Top aparece na parte superior da tela e o Active Desktop é redimensionado, portanto, o painel de entrada não se sobrepõe a nenhum outro elemento da interface do usuário ou do Windows. No painel de entrada do modo encaixado não pode ser arrastado ou movido.

\_Interaction DockedBottom – o modo de interação Docked-Bottom é o mesmo que o modo de Docked-Top, exceto que o painel de entrada é exibido na parte inferior da tela.

Quando o painel de entrada não está visível, o modo de interação atual é in-loco.

A publicação do modelo de interação atual é outra maneira como o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) fornece mais informações sobre o estado do painel de entrada do que está disponível em qualquer versão anterior.

## <a name="detailed-information-about-input-panels-correction-mode"></a>Informações detalhadas sobre o modo de correção do painel de entrada

O aspecto final do painel de entrada que o objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) fornece informações detalhadas e o controle do é o modo de correção. Saber o modo de correção ajuda os aplicativos a determinar o tamanho atual do painel de entrada. Controlar como a correção de pós-implantação se expande em um aplicativo é uma maneira de personalizar a experiência de correção em um aplicativo.

Há dois modos básicos nos quais o combr de correção pode aparecer: pré-inserção e após a inserção. O pente de correção de inserção é usado para corrigir o texto antes de inseri-lo em um aplicativo. Ele é ativado tocando no texto pendente que aparece abaixo da linha de base no painel de escrita como as tintas do usuário. O comb. de correção de inserção é usado para corrigir o texto depois que ele é inserido em um aplicativo. Ele é ativado colocando o ponto de inserção no ou selecionando o texto que foi inserido anteriormente. Além dos dois modos básicos, há várias variações de como o pente de correção de inserção pode ser exibido. Primeiro, ele pode aparecer acima ou abaixo do painel de entrada e o segundo pode aparecer recolhido ou expandido. No estado recolhido, o pente de correção de inserção mostra apenas uma lista de alternativas. No estado expandido, ele inclui as alternativas e uma área para reescrever a palavra.

![painel de entrada de combinação de correções, pré e pós-inserção](images/6cc627de-fc15-4721-9f6a-7e1517d9e650.jpg)

A propriedade [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) permite que um aplicativo determine a configuração atual do pente de correção. Os valores possíveis dessa propriedade, conforme definido pelas enumerações de [**correçãomode**](/windows/win32/api/peninputpanel/ne-peninputpanel-correctionmode) , são: não **visível**, de **preinserção**, **PostInsertionCollapsed** e **PostInsertionExpanded**. Quando nenhum painel de entrada ou de correção é visível, o **CurrentCorrectionMode** não é **visível**.

Por padrão, o sistema mostra o pente de correção após a inserção expandido quando o seleciona o texto corrigível e mostra que ele é recolhido quando o ponto de inserção é colocado em texto corrigível. Um aplicativo pode especificar onde o comb. de correção de inserção sempre deve mostrar expandido definindo a propriedade [**ExpandPostInsertionCorrection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_expandpostinsertioncorrection) como **true**. O padrão do sistema é **false**. Quando a propriedade **ExpandPostInsertionCorrection** é usada em conjunto com a interface [**IHandWrittenTextInsertion**](/windows/desktop/api/peninputpanel/nn-peninputpanel-ihandwrittentextinsertion) , um desenvolvedor de aplicativos pode adicionar o suporte de correção de forma barata a aplicativos que não o obtêm automaticamente.

Controlar e controlar o estado de correção do painel de entrada é um dos muitos recursos novos do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que tornam possível a integração do painel de entrada e do aplicativo mais rígidos.

## <a name="event-notification-before-and-after-the-event-occurs"></a>Notificação de eventos antes e depois do evento ocorrer

Outro aspecto da programação do painel de entrada que é muito aprimorado no objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) é o modelo de evento. Agora, em vez de gerar apenas eventos que sinalizam uma alteração no estado do painel de entrada depois que a alteração ocorreu, há eventos separados enviados antes e depois que a alteração ocorre. Os eventos que sinalizam o início de um evento contêm verbos conjugação, como ' Changing ' ou ' Inserting ', enquanto os eventos que sinalizam a conclusão de um evento contêm verbos conjugação passados, como ' changed ' ou ' inserted '.

Esse modelo de evento possibilita que um aplicativo reaja a uma alteração antes ou à medida que ela ocorre. O painel de entrada é impedido de prosseguir com uma alteração ou retomar após a alteração até que os manipuladores de eventos de todos os eventos tenham sido concluídos. Esses eventos são síncronos e, dessa forma, um aplicativo pode atrasar uma alteração até que tenha terminado de reagir. No entanto, o tempo em que um manipulador de eventos está executando o painel de entrada torna-se inacessível ao usuário e pode parecer suspenso, portanto, é importante que o manipulador de eventos tenha um bom desempenho. No entanto, não é possível que um aplicativo impeça ou cancele um evento. Todos os parâmetros de evento são somente leitura. Abaixo está uma descrição dos seis pares de eventos do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) :

-   [**InPlaceStateChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanging)  /  [**InPlaceStateChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanged)– notificação de que o estado in-loco está prestes a ou acabou de ser alternado de um foco para expandido ou vice-versa. Os parâmetros são o estado novo e antigo no local. Coincidences com uma alteração no valor da propriedade [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) .
-   [**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged)– indicado quando o tamanho do painel de entrada In-Place está prestes a ser alterado ou alterado devido a um redimensionamento do usuário, aumento automático ou uma alteração na área de entrada. Os parâmetros são o retângulo delimitador novo e antigo. Coincidences com uma alteração no valor da propriedade [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) .
-   [**InputAreaChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanging)  /  [**InputAreaChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanged)– relata quando a área de entrada do painel de entrada está prestes a ser alterada ou foi alterada de para outra das três áreas de entrada possíveis: painel de escrita, teclado de caracteres ou teclado. Os parâmetros são a área de entrada nova e antiga. Coincide com uma alteração no valor da propriedade [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea)
-   [**CorrectionModeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanging)  /  [**CorrectionModeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanged)– notificação de que o modo de correção está prestes a ser alterado ou alterado. Os modos de correção possíveis são: não visíveis, de inserção prévia, de pós-implantação recolhida e de inserção expandida. Os parâmetros são o modo de correção novo e antigo. Coincide com uma alteração no valor da propriedade [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) .
-   [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged)– indica quando a visibilidade do painel de entrada In-Place está prestes a ser alterada ou foi alterada. Os parâmetros são a visibilidade nova e antiga. Uma nova visibilidade de **false** significa que o painel de entrada In-Place não está aberto, mas não impede que o painel de entrada fique visível no modo de interação flutuante ou encaixado.
-   [**Inserindo**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting)  /  [**Textinserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted)– indica quando o texto está prestes a ser inserido ou foi inserido no painel de entrada. O parâmetro é uma matriz de objetos [**InkDisp**](inkdisp-class.md) , cada um contendo uma linha de tinta e texto que compõem a inserção. Mais sobre esse evento na próxima seção.

Esses eventos fornecem aos aplicativos informações essenciais sobre alterações no painel de entrada e permitem que eles reajam de acordo. Novamente, a alteração no modelo de evento do painel de entrada representa uma etapa para uma melhor interação entre os aplicativos e o painel de entrada.

## <a name="support-for-collecting-the-ink-and-text-entered-in-input-panel"></a>Suporte para coletar a tinta e o texto inseridos no painel de entrada

Por último, mas certamente não menos importante, um novo recurso muito eficiente do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) é a capacidade de obter o objeto de tinta para o texto inserido por meio do painel de entrada fora do painel de entrada no momento em que o texto é inserido em um aplicativo. Esse é um recurso geralmente solicitado para fins de controle de alterações e manutenção de registros. Ele também permite que os aplicativos façam uso da tinta em sua interface do usuário como um elemento estático ou com uma superfície de tinta personalizada.

Para receber o objeto [**InkDisp**](inkdisp-class.md) para o texto inserido por meio do painel de entrada, um aplicativo deve se registrar para receber os eventos [**textinserir**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) ou [**textinserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted) gerados pelo objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) . O evento **textinserir** é acionado imediatamente antes de o texto ser inserido do painel de entrada em um aplicativo e o texto não é inserido até que todos os manipuladores de eventos sejam concluídos. O evento **Textinserted** é acionado imediatamente após o teste ser inserido. O único parâmetro para o evento **Textinserting** e **textinserted** é uma matriz de objetos **InkDisp** que inclui um objeto **InkDisp** para cada linha de texto inserida no painel de entrada. Observação: o painel de entrada fica inativo enquanto os manipuladores de eventos estão em execução e podem parecer suspensos para o usuário, portanto, é importante tornar esses manipuladores de eventos um peso leve e garantir que eles sejam executados rapidamente. Além disso, um aplicativo não deve criar um manipulador para esse evento, a menos que ele tenha um uso específico para as informações, já que há um custo de desempenho associado a isso. O painel de entrada realizará marshaling somente dos dados de tinta se houver um aplicativo solicitando os dados, caso contrário, o painel de entrada poderá ignorar essa operação dispendiosa. Os parâmetros dos eventos **textinserir** e **textinserted** são somente leitura, o que significa que não é possível que os aplicativos alterem o texto inserido antes de serem inseridos no aplicativo.

As possibilidades para o que os aplicativos podem fazer com essa nova funcionalidade são amplas e não poderiam ser mais simples de usar. Permitir que o texto reconhecido e a tinta digitados por meio do painel de entrada sejam coletados por aplicativos é apenas outra maneira que a história de desenvolvedor do painel de entrada é aprimorada no Windows Vista.

## <a name="conclusion"></a>Conclusão

Em geral, a história de programação do painel de entrada do Tablet PC é bastante aprimorada com a introdução do objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) no Windows Vista. Usando o objeto **TextInputPanel** , os desenvolvedores de aplicativos têm mais controle e mais informações sobre o painel de entrada de estado na versão anterior. Como resultado, os desenvolvedores de aplicativos que criam novos aplicativos para Tablet PC ou Atualizando aplicativos existentes são altamente incentivados a usar o objeto **TextInputPanel** em vez do objeto [**PenInputPanel**](peninputpanel-class.md) agora preterido. Além disso, o suporte para novos recursos, como o posicionamento absoluto do painel de entrada e o ícone do painel de entrada, e a capacidade de o aplicativo receber o texto do reconhecedor e a tinta digitada por meio do painel de entrada habilita novos cenários e funcionalidade do aplicativo. A inclusão desses recursos e de vários outros estão em resposta direta aos comentários do desenvolvedor e marcam as primeiras etapas para a integração completa do painel de entrada com aplicativos do Tablet PC. Por fim, expandir a funcionalidade de aplicativo do Tablet PC é um grande ganho para os desenvolvedores de aplicativos e para a plataforma do Tablet PC.

 

 



