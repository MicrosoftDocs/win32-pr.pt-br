---
description: O exemplo de reconhecimento avançado demonstra os recursos avançados da API (interface de programação de aplicativo) do Microsoft Tablet PC Automation usada para o reconhecimento de manuscrito.
ms.assetid: 4c9b9f31-c317-43fd-8404-35295b41d093
title: Exemplo de reconhecimento avançado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e23a078ded9c6967f8e45780f8cb3a739b246f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103646554"
---
# <a name="advanced-recognition-sample"></a><span data-ttu-id="41488-103">Exemplo de reconhecimento avançado</span><span class="sxs-lookup"><span data-stu-id="41488-103">Advanced Recognition Sample</span></span>

<span data-ttu-id="41488-104">O exemplo de reconhecimento avançado demonstra os recursos avançados da API (interface de programação de aplicativo) do Microsoft Tablet PC Automation usada para o reconhecimento de manuscrito.</span><span class="sxs-lookup"><span data-stu-id="41488-104">The advanced recognition sample demonstrates advanced features of the Microsoft Tablet PC Automation application programming interface (API) used for handwriting recognition.</span></span>

<span data-ttu-id="41488-105">Ele contém os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="41488-105">It includes the following features:</span></span>

-   <span data-ttu-id="41488-106">Enumerando o reconhecedor instalado</span><span class="sxs-lookup"><span data-stu-id="41488-106">Enumerating the installed recognizer</span></span>
-   <span data-ttu-id="41488-107">Criando um contexto de reconhecedor com um idioma específico</span><span class="sxs-lookup"><span data-stu-id="41488-107">Creating a recognizer context with a specific language</span></span>
-   <span data-ttu-id="41488-108">Usando o objeto Recognizer</span><span class="sxs-lookup"><span data-stu-id="41488-108">Using the recognizer object</span></span>
-   <span data-ttu-id="41488-109">Definindo o facto de reconhecimento e as listas de palavras</span><span class="sxs-lookup"><span data-stu-id="41488-109">Setting recognition factoid and word lists</span></span>
-   <span data-ttu-id="41488-110">Usando guias para melhorar a qualidade do reconhecimento</span><span class="sxs-lookup"><span data-stu-id="41488-110">Using guides to improve the recognition quality</span></span>
-   <span data-ttu-id="41488-111">Reconhecimento dinâmico em segundo plano</span><span class="sxs-lookup"><span data-stu-id="41488-111">Dynamic background recognition</span></span>
-   <span data-ttu-id="41488-112">Reconhecimento de gesto</span><span class="sxs-lookup"><span data-stu-id="41488-112">Gesture recognition</span></span>

<span data-ttu-id="41488-113">As interfaces usadas são: [**IInkRecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **IInkRecoContext**, [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **IInkRecognitionGuide**, **IInkWordList**, [**IInkGesture**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **IInkCollector**, **IInkDisp**, **IInkRenderer**, **IInkDrawingAttributes**, **IInkStrokes** e **IInkStroke**.</span><span class="sxs-lookup"><span data-stu-id="41488-113">The interfaces used are: [**IInkRecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **IInkRecoContext**, [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **IInkRecognitionGuide**, **IInkWordList**, [**IInkGesture**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **IInkCollector**, **IInkDisp**, **IInkRenderer**, **IInkDrawingAttributes**, **IInkStrokes**, and **IInkStroke**.</span></span>

## <a name="ink-and-project-headers"></a><span data-ttu-id="41488-114">Cabeçalhos de tinta e de projeto</span><span class="sxs-lookup"><span data-stu-id="41488-114">Ink and Project Headers</span></span>

<span data-ttu-id="41488-115">Primeiro, inclua os cabeçalhos para interfaces de automação do Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="41488-115">First, include the headers for Tablet PC Automation interfaces.</span></span> <span data-ttu-id="41488-116">Eles são instalados com o SDK da plataforma Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="41488-116">These are installed with the Tablet PC Platform SDK.</span></span> <span data-ttu-id="41488-117">O arquivo TpcError. h contém as definições de código de erro da API do Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="41488-117">The TpcError.h file contains the Tablet PC API Error Code definitions.</span></span>


```C++
#include <msinkaut.h>
#include <msinkaut_i.c>
#include <TpcError.h>
```



<span data-ttu-id="41488-118">O arquivo EventSinks. h define as interfaces **IInkEventsImpl** e **IInkRecognitionEventsImpl** e configura os eventos [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md), [**Stroke**](inkcollector-stroke.md)e [**Gesture**](inkcollector-gesture.md) .</span><span class="sxs-lookup"><span data-stu-id="41488-118">The EventSinks.h file defines the **IInkEventsImpl** and **IInkRecognitionEventsImpl** interfaces, and sets up the [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md), [**Stroke**](inkcollector-stroke.md), and [**Gesture**](inkcollector-gesture.md) events.</span></span>


```C++
#include "EventSinks.h"
```



<span data-ttu-id="41488-119">O arquivo ChildWnds. h contém as definições das classes **CInkInputWnd** e **CRecoOutputWnd**, que são derivadas do CWindowImpl da ATL e usadas para criar as janelas filho da amostra.</span><span class="sxs-lookup"><span data-stu-id="41488-119">The ChildWnds.h file contains the definitions of the classes **CInkInputWnd** and **CRecoOutputWnd**, which are derived from the ATL's CWindowImpl and used for creating the sample's child windows.</span></span>


```C++
#include "ChildWnds.h"
```



<span data-ttu-id="41488-120">O arquivo AdvReco. h declara a classe **CAdvRecoApp** , que é a classe de janela do aplicativo para este exemplo.</span><span class="sxs-lookup"><span data-stu-id="41488-120">The AdvReco.h file declares the **CAdvRecoApp** class, which is the application window class for this sample.</span></span>


```C++
#include "AdvReco.h"
```



## <a name="initializing-the-application-window"></a><span data-ttu-id="41488-121">Inicializando a janela do aplicativo</span><span class="sxs-lookup"><span data-stu-id="41488-121">Initializing the Application Window</span></span>

<span data-ttu-id="41488-122">O método da janela `Run` configura o objeto **CAdvRecoApp** , carrega o menu e o ícone da janela, cria um objeto [**InkRecognizerContext**](inkrecognizercontext-class.md) para o reconhecedor padrão e inicia o loop de mensagem da janela.</span><span class="sxs-lookup"><span data-stu-id="41488-122">The window's `Run` method sets up the **CAdvRecoApp** object, loads the menu and icon for the window, creates an [**InkRecognizerContext**](inkrecognizercontext-class.md) object for the default recognizer, and starts the window's message loop.</span></span>

<span data-ttu-id="41488-123">O método **OnCreate** da janela manipula o evento de **\_ criação do WM** e cria as janelas filhas.</span><span class="sxs-lookup"><span data-stu-id="41488-123">The window's **OnCreate** method handles the **WM\_CREATE** event and creates the child windows.</span></span> <span data-ttu-id="41488-124">Um objeto [**InkCollector**](inkcollector-class.md) conecta-se à fonte do evento do coletor de tinta e habilita a entrada à tinta na janela de entrada.</span><span class="sxs-lookup"><span data-stu-id="41488-124">An [**InkCollector**](inkcollector-class.md) object connects to the ink collector's event source, and enables ink input on the input window.</span></span> <span data-ttu-id="41488-125">Em seguida, ele cria um objeto [**InkRecognizerGuide**](inkrecognizerguide-class.md) e usa a propriedade [**Renderer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) do coletor de tinta para converter os retângulos da caixa do guia de reconhecimento em espaço de tinta.</span><span class="sxs-lookup"><span data-stu-id="41488-125">Then it creates an [**InkRecognizerGuide**](inkrecognizerguide-class.md) object and uses the ink collector's [**Renderer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) property to convert the recognition guide box rectangles to ink space.</span></span> <span data-ttu-id="41488-126">Por fim, o método **OnCreate** cria um objeto [**InkWordList**](inkwordlist-class.md) .</span><span class="sxs-lookup"><span data-stu-id="41488-126">Finally, the **OnCreate** method creates an [**InkWordList**](inkwordlist-class.md) object.</span></span>

## <a name="handling-ink-collector-events"></a><span data-ttu-id="41488-127">Manipulando eventos do coletor de tinta</span><span class="sxs-lookup"><span data-stu-id="41488-127">Handling Ink Collector Events</span></span>

<span data-ttu-id="41488-128">O método **onstroke** da janela manipula o evento de [**traço**](inkcollector-stroke.md) do coletor de tinta.</span><span class="sxs-lookup"><span data-stu-id="41488-128">The window's **OnStroke** method handles the ink collector's [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="41488-129">O novo objeto [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) é adicionado à [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) da propriedade [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) do coletor de tinta.</span><span class="sxs-lookup"><span data-stu-id="41488-129">The new [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) object is added to the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property.</span></span>

<span data-ttu-id="41488-130">O método **ongesto** da janela manipula o evento de [**gesto**](inkcollector-gesture.md) do coletor de tinta.</span><span class="sxs-lookup"><span data-stu-id="41488-130">The window's **OnGesture** method handles the ink collector's [**Gesture**](inkcollector-gesture.md) event.</span></span> <span data-ttu-id="41488-131">O método **ongesto** identifica o gesto, usando o gesto de confiança mais alto primeiro e verifica se a janela dá suporte a esse gesto específico.</span><span class="sxs-lookup"><span data-stu-id="41488-131">The **OnGesture** method identifies the gesture, using the highest confidence gesture first, and checks if the window supports this particular gesture.</span></span> <span data-ttu-id="41488-132">Se houver suporte para o gesto, a caixa delimitadora do gesto será invalidada, pois o gesto será removido da coleção de traços.</span><span class="sxs-lookup"><span data-stu-id="41488-132">If the gesture is supported, the gesture's bounding box is invalidated, as the gesture is removed from the strokes collection.</span></span> <span data-ttu-id="41488-133">Se não houver suporte para o gesto, o evento de **gesto** será cancelado, o que faz com que o coletor de tinta gere um evento de [**traço**](inkcollector-stroke.md) .</span><span class="sxs-lookup"><span data-stu-id="41488-133">If the gesture is not supported, the **Gesture** event is canceled, which causes the ink collector to raise a [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="41488-134">Por fim, a janela de resultados é atualizada.</span><span class="sxs-lookup"><span data-stu-id="41488-134">Finally, the results window is updated.</span></span>

## <a name="handling-recognizer-context-events"></a><span data-ttu-id="41488-135">Lidando com eventos de contexto do reconhecedor</span><span class="sxs-lookup"><span data-stu-id="41488-135">Handling Recognizer Context Events</span></span>

<span data-ttu-id="41488-136">O método **OnRecognitionWithAlternates** da janela manipula o evento [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) do contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-136">The window's **OnRecognitionWithAlternates** method handles the recognizer context's [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) event.</span></span> <span data-ttu-id="41488-137">O método **OnRecognitionWithAlternates** exibe os resultados de reconhecimento na janela resultados.</span><span class="sxs-lookup"><span data-stu-id="41488-137">The **OnRecognitionWithAlternates** method displays the recognition results in the results window.</span></span>

## <a name="handling-menu-commands"></a><span data-ttu-id="41488-138">Manipulando comandos de menu</span><span class="sxs-lookup"><span data-stu-id="41488-138">Handling Menu Commands</span></span>

<span data-ttu-id="41488-139">O método **Recognizer** da janela manipula os comandos no menu Recognizer.</span><span class="sxs-lookup"><span data-stu-id="41488-139">The window's **OnRecognizer** method handles the commands on the Recognizer menu.</span></span> <span data-ttu-id="41488-140">Se o comando **padrão** foi selecionado, o método [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) do [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) será usado para recuperar o reconhecedor padrão; caso contrário, o reconhecedor selecionado será recuperado.</span><span class="sxs-lookup"><span data-stu-id="41488-140">If the **Default** command was selected, the [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) method of the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) is used to retrieve the default recognizer; otherwise, the selected recognizer is retrieved.</span></span> <span data-ttu-id="41488-141">Em seguida, um contexto de reconhecedor é criado e usado, e a barra de menus e de status é atualizada.</span><span class="sxs-lookup"><span data-stu-id="41488-141">Then, a recognizer context is created and used, and menu and status bar are updated.</span></span>

<span data-ttu-id="41488-142">O método **OnFactoidWordlist** da janela manipula o comando usar a barra de **palavras** no menu do **factor** .</span><span class="sxs-lookup"><span data-stu-id="41488-142">The window's **OnFactoidWordlist** method handles the **Use Wordlist** command on the **Factoid** menu.</span></span> <span data-ttu-id="41488-143">A propriedade [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) do contexto do reconhecedor é definida como **nula** para redefinir o contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-143">The recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property is set to **NULL** to reset the recognizer context.</span></span> <span data-ttu-id="41488-144">Se a opção **usar palavras** -opções estiver desativada, a propriedade de [**listas de palavras**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) do contexto do Recognizer será definida como **NULL**; caso contrário, a propriedade de **listas de palavras** do contexto do Recognizer é definida como o [**InkWordList**](inkwordlist-class.md) que foi criado no método **OnCreate** .</span><span class="sxs-lookup"><span data-stu-id="41488-144">If the **Use Wordlist** option is turned off, the recognizer context's [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) property is set to **NULL**; otherwise, the recognizer context's **WordList** property is set to the [**InkWordList**](inkwordlist-class.md) that was created in the **OnCreate** method.</span></span> <span data-ttu-id="41488-145">Por fim, o [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) do coletor de tinta é reanexado ao contexto do reconhecedor, o método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) do contexto do Recognizer é chamado e o menu é atualizado.</span><span class="sxs-lookup"><span data-stu-id="41488-145">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reattached to the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called, and the menu is updated.</span></span>

<span data-ttu-id="41488-146">O método **Onfactoid** da janela manipula os comandos de facto no menu do **factor** .</span><span class="sxs-lookup"><span data-stu-id="41488-146">The window's **OnFactoid** method handles the factoid commands on the **Factoid** menu.</span></span> <span data-ttu-id="41488-147">Ele primeiro define a propriedade [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) do contexto do Recognizer como **NULL**, define a propriedade [**factoname**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) do contexto do Recognizer para o factor selecionado e reatribui o [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) do coletor de tinta ao contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-147">It first sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) property to the selected factoid, and reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context.</span></span> <span data-ttu-id="41488-148">Se o objeto [factor](factoid-constants.md) for suportado pelo contexto do reconhecedor, o método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) do contexto do Recognizer será chamado; caso contrário, uma mensagem de erro será exibida.</span><span class="sxs-lookup"><span data-stu-id="41488-148">If the [Factoid](factoid-constants.md) object is supported by the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called; otherwise, an error message is displayed.</span></span> <span data-ttu-id="41488-149">Por fim, o menu e a barra de status são atualizados.</span><span class="sxs-lookup"><span data-stu-id="41488-149">Finally, the menu and status bar are updated.</span></span>

<span data-ttu-id="41488-150">O método **OnGuide** da janela manipula os comandos no menu **guia** .</span><span class="sxs-lookup"><span data-stu-id="41488-150">The window's **OnGuide** method handles the commands on the **Guide** menu.</span></span> <span data-ttu-id="41488-151">Se o contexto do reconhecedor oferecer suporte às opções de guia, o método **OnGuide** definirá a propriedade [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) do contexto do reconhecedor como **NULL**, definirá a propriedade [**guia**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) do contexto do reconhecedor como a configuração do guia selecionado, reatribuirá o [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) do coletor de tinta ao contexto do reconhecedor e chamará o método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) do contexto do Recognizer.</span><span class="sxs-lookup"><span data-stu-id="41488-151">If the recognizer context supports the guide options, the **OnGuide** method sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property to the selected guide setting, reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context, and calls the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span> <span data-ttu-id="41488-152">Caso contrário, uma mensagem de erro será exibida.</span><span class="sxs-lookup"><span data-stu-id="41488-152">Otherwise, an error message is displayed.</span></span> <span data-ttu-id="41488-153">Por fim, a janela de entrada, o menu e a barra de status são atualizados.</span><span class="sxs-lookup"><span data-stu-id="41488-153">Finally, the input window, menu, and status bar are updated.</span></span>

<span data-ttu-id="41488-154">O método **onmode** da janela manipula os comandos no menu **modo** .</span><span class="sxs-lookup"><span data-stu-id="41488-154">The window's **OnMode** method handles the commands on the **Mode** menu.</span></span> <span data-ttu-id="41488-155">Ele desabilita o coletor de tinta, atualiza a propriedade [**CollectionMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) do coletor de tinta, atualiza o menu e mostra ou oculta as listas de gestos.</span><span class="sxs-lookup"><span data-stu-id="41488-155">It disables the ink collector, updates the ink collector's [**CollectionMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) property, updates the menu, and shows or hides the gesture lists.</span></span> <span data-ttu-id="41488-156">Por fim, o coletor de tinta está habilitado.</span><span class="sxs-lookup"><span data-stu-id="41488-156">Finally, the ink collector is enabled.</span></span>

<span data-ttu-id="41488-157">O método **Recognize** da janela manipula o comando **Recognize** no menu Ink.</span><span class="sxs-lookup"><span data-stu-id="41488-157">The window's **OnRecognize** method handles the **Recognize** command on the Ink menu.</span></span> <span data-ttu-id="41488-158">Ele chama o método [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) do contexto do reconhecedor para impedir que a tinta seja adicionada ao contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-158">It calls the recognizer context's [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) method to keep ink from being added to the recognizer context.</span></span> <span data-ttu-id="41488-159">Às vezes, isso é necessário, pois nem todos os reconhecedores dão suporte ao reconhecimento parcial.</span><span class="sxs-lookup"><span data-stu-id="41488-159">This is sometimes necessary, as not all recognizers support partial recognition.</span></span> <span data-ttu-id="41488-160">Em seguida, ele chama o método [**Recognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) do contexto do Recognizer e passa os resultados para o método **OnRecognitionWithAlternates** da janela.</span><span class="sxs-lookup"><span data-stu-id="41488-160">Then it calls the recognizer context's [**Recognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) method, and passes the results to the window's **OnRecognitionWithAlternates** method.</span></span> <span data-ttu-id="41488-161">Por fim, o [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) do coletor de tinta é reatribuído ao contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-161">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reassigned to the recognizer context.</span></span>

<span data-ttu-id="41488-162">O método **OnClear** da janela manipula o comando **Clear** no menu **Ink** .</span><span class="sxs-lookup"><span data-stu-id="41488-162">The window's **OnClear** method handles the **Clear** command on the **Ink** menu.</span></span> <span data-ttu-id="41488-163">Ele exclui os traços da propriedade [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) do coletor de tinta, libera a coleção de traços antigos e cria um novo para a propriedade **Ink** do coletor de tinta e anexa a nova coleção Strokes ao contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-163">It deletes the strokes from the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property, releases the old strokes collection and creates a new one for the ink collector's **Ink** property, and attaches the new strokes collection to the recognizer context.</span></span>

<span data-ttu-id="41488-164">O método **onexit** da janela manipula o comando **Exit** no menu **Ink** e gera o \_ evento WM Close.</span><span class="sxs-lookup"><span data-stu-id="41488-164">The window's **OnExit** method handles the **Exit** command on the **Ink** menu, and raises the WM\_CLOSE event.</span></span>

## <a name="helper-methods"></a><span data-ttu-id="41488-165">Métodos auxiliares</span><span class="sxs-lookup"><span data-stu-id="41488-165">Helper Methods</span></span>

<span data-ttu-id="41488-166">O método **LoadMenu** da janela é chamado a partir do método **Run** da janela e adiciona a lista de reconhecedores com suporte e a lista de factores com suporte no menu.</span><span class="sxs-lookup"><span data-stu-id="41488-166">The window's **LoadMenu** method is called from the window's **Run** method, and adds the list of supported recognizers and the list of supported factoids to the menu.</span></span> <span data-ttu-id="41488-167">Primeiro, ele recupera o [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="41488-167">First, it retrieves the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)).</span></span> <span data-ttu-id="41488-168">Em seguida, ele faz a iteração pelos reconhecedores disponíveis e seleciona apenas aqueles que têm uma lista de idiomas na propriedade **Languages** , que ele adiciona ao menu **Recognizer** .</span><span class="sxs-lookup"><span data-stu-id="41488-168">Then it iterates through the available recognizers and only selects ones that have a list of languages in the **Languages** property, which it adds to the **Recognizer** menu.</span></span> <span data-ttu-id="41488-169">Por fim, ele preenche o menu do **factor** com a lista de factos definida como uma constante global.</span><span class="sxs-lookup"><span data-stu-id="41488-169">Finally, it populates the **Factoid** menu with the list of factoids defined as a global constant.</span></span>

<span data-ttu-id="41488-170">O método **UseRecognizer** da janela é chamado a partir do método **Recognizer** da janela quando o usuário seleciona um novo reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-170">The window's **UseRecognizer** method is called from the window's **OnRecognizer** method when the user selects a new recognizer.</span></span> <span data-ttu-id="41488-171">Ele cria um contexto de reconhecedor, desanexa o contexto antigo do coletor de eventos do reconhecedor, limpa e libera o contexto antigo e anexa o novo contexto ao coletor de eventos do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-171">It creates a recognizer context, detaches the old context from the recognizer event sink, clears and releases the old context, and attaches the new context to the recognizer event sink.</span></span>

<span data-ttu-id="41488-172">Em seguida, o método **UseRecognizer** verifica a propriedade [**Capabilities**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) do reconhecedor, que retorna um valor [**InkRecognizerCapabilities**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) .</span><span class="sxs-lookup"><span data-stu-id="41488-172">Then, the **UseRecognizer** method checks the recognizer's [**Capabilities**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) property, which returns an [**InkRecognizerCapabilities**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) value.</span></span> <span data-ttu-id="41488-173">Se o reconhecedor der suporte à entrada em linha, o comando **linhas** no menu **guia** será habilitado.</span><span class="sxs-lookup"><span data-stu-id="41488-173">If the recognizer supports lined input, the **Lines** command on the **Guide** menu is enabled.</span></span> <span data-ttu-id="41488-174">Se o reconhecedor der suporte à entrada em caixa, o comando **caixas** será habilitado.</span><span class="sxs-lookup"><span data-stu-id="41488-174">If the recognizer supports boxed input, the **Boxes** command is enabled.</span></span> <span data-ttu-id="41488-175">Se o reconhecedor não oferecer suporte à entrada gratuita, o comando **None** será desabilitado.</span><span class="sxs-lookup"><span data-stu-id="41488-175">If the recognizer does not support free input, the **None** command is disabled.</span></span> <span data-ttu-id="41488-176">Se a seleção atual do guia não for suportada, a propriedade [**guia**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) do contexto do reconhecedor e o menu serão atualizados.</span><span class="sxs-lookup"><span data-stu-id="41488-176">If the current guide selection is not supported, both the [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property of the recognizer context and the menu are updated.</span></span>

<span data-ttu-id="41488-177">Em seguida, o método **UseRecognizer** tenta definir as propriedades da propriedade de [**palavras**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) e do [**factor**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) do contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-177">Then, the **UseRecognizer** method attempts to set the [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) and [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) properties of the recognizer context.</span></span> <span data-ttu-id="41488-178">Se uma das configurações não for suportada pelo reconhecedor, o valor padrão será usado e o menu será atualizado.</span><span class="sxs-lookup"><span data-stu-id="41488-178">If either setting is not supported by the recognizer, then the default value is used and the menu is updated.</span></span>

<span data-ttu-id="41488-179">Por fim, o método **UseRecognizer** anexa a propriedade [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) do objeto [**InkDisp**](inkdisp-class.md) do coletor de tinta ao contexto do reconhecedor, altera a fonte da janela de saída para uma com suporte na linguagem do reconhecedor, redefine a janela de saída e atualiza os resultados de reconhecimento chamando o método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) do contexto do reconhecedor.</span><span class="sxs-lookup"><span data-stu-id="41488-179">Finally, the **UseRecognizer** method attaches the [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property of the ink collector's [**InkDisp**](inkdisp-class.md) object to the recognizer context, changes the output window's font to one supported by the language of the recognizer, resets the output window, and updates the recognition results by calling the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span>

<span data-ttu-id="41488-180">O método **Getgestoname** da janela é chamado a partir do método **ongesto** da janela.</span><span class="sxs-lookup"><span data-stu-id="41488-180">The window's **GetGestureName** method is called from the window's **OnGesture** method.</span></span> <span data-ttu-id="41488-181">Ele procura o gesto e retorna um índice para o nome do gesto, que é armazenado em uma tabela de cadeia de caracteres no arquivo AdvReco. rc.</span><span class="sxs-lookup"><span data-stu-id="41488-181">It searches for the gesture and returns an index to the gesture's name, which is stored in a string table in the AdvReco.rc file.</span></span>

 

 
