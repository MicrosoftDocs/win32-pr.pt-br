---
description: Conforme mencionado na visão geral da análise de tinta, a tecnologia de análise de tinta mantém internamente um modelo de documento baseado em árvore para conter resultados e relações de análise.
ms.assetid: 33ba9292-3bc7-41ba-a602-e2fc94cd3a57
title: Proxy de dados com análise de tinta
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52717b955625e67f50c20703dd0e84449aa1037f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103837029"
---
# <a name="data-proxy-with-ink-analysis"></a><span data-ttu-id="175d1-103">Proxy de dados com análise de tinta</span><span class="sxs-lookup"><span data-stu-id="175d1-103">Data Proxy with Ink Analysis</span></span>

<span data-ttu-id="175d1-104">Conforme mencionado na [visão geral da análise de tinta](ink-analysis-overview.md), a tecnologia de análise de tinta mantém internamente um modelo de documento baseado em árvore para conter resultados e relações de análise.</span><span class="sxs-lookup"><span data-stu-id="175d1-104">As mentioned in [Ink Analysis Overview](ink-analysis-overview.md), the ink analysis technology internally maintains a tree-based document model to contain analysis results and relationships.</span></span> <span data-ttu-id="175d1-105">Se seu aplicativo já tiver um repositório de documentos estabelecido que seja diferente, você precisará usar os recursos de análise de tinta projetados para dados de proxy entre modelos de documentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="175d1-105">If your application already has an established document store that is different, you will need to make use of the ink analysis features designed to proxy data between disparate document models.</span></span>

## <a name="types-of-data-proxy"></a><span data-ttu-id="175d1-106">Tipos de proxy de dados</span><span class="sxs-lookup"><span data-stu-id="175d1-106">Types of Data Proxy</span></span>

<span data-ttu-id="175d1-107">Os recursos do proxy de dados permitem que seu aplicativo:</span><span class="sxs-lookup"><span data-stu-id="175d1-107">The data proxy features enable your application to:</span></span>

-   <span data-ttu-id="175d1-108">Integre dados de resultados de análise de volta a um modelo de documento existente.</span><span class="sxs-lookup"><span data-stu-id="175d1-108">Integrate analysis results data back into an existing document model.</span></span>
-   <span data-ttu-id="175d1-109">Comunicar resultados anteriores (ou estado) de volta para o [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="175d1-109">Communicate previous results (or state) back into the [**InkAnalyzer**](inkanalyzer.md).</span></span>
-   <span data-ttu-id="175d1-110">Comunique o estado de não-tinta no [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="175d1-110">Communicate non-ink state into the [**InkAnalyzer**](inkanalyzer.md).</span></span>
-   <span data-ttu-id="175d1-111">Comunique somente o conjunto mínimo de dados (estado anterior e não-à tinta) necessário para concluir a operação de análise.</span><span class="sxs-lookup"><span data-stu-id="175d1-111">Communicate only the minimum set of data (both previous and non-ink state) needed to complete the analysis operation.</span></span>
-   <span data-ttu-id="175d1-112">Atualize facilmente o modelo de documento do aplicativo interno com os resultados da análise.</span><span class="sxs-lookup"><span data-stu-id="175d1-112">Easily update the internal application document model with analysis results.</span></span>

<span data-ttu-id="175d1-113">Há duas abordagens básicas para o proxy de dados de análise de tinta.</span><span class="sxs-lookup"><span data-stu-id="175d1-113">There are two basic approaches to ink analysis data proxy.</span></span> <span data-ttu-id="175d1-114">As diferenças são formatadas nos detalhes de quando e como ocorre a sincronização entre os modelos de documento.</span><span class="sxs-lookup"><span data-stu-id="175d1-114">The differences lay in the details of when and how the synchronization between the document models occurs.</span></span> <span data-ttu-id="175d1-115">A primeira abordagem, atualização síncrona, requer a modificação do modelo de documento de análise de tinta, pois ocorrem alterações no documento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="175d1-115">The first approach, synchronous update, requires the modification of the ink analysis document model as changes occur in the application document.</span></span> <span data-ttu-id="175d1-116">A segunda abordagem, atualização sob demanda, requer apenas os dados afetados por alterações no modelo de documento do aplicativo a serem passadas para o [**InkAnalyzer**](inkanalyzer.md).</span><span class="sxs-lookup"><span data-stu-id="175d1-116">The second approach, on-demand update, requires only the data affected by changes to the application document model to be passed to the [**InkAnalyzer**](inkanalyzer.md).</span></span> <span data-ttu-id="175d1-117">Ou seja, somente os dados para as partes do modelo de documento de análise de tinta que estão na mesma área que as modificações no documento de aplicativo precisam ser passados para o **InkAnalyzer** conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="175d1-117">That is, only the data for the parts of the Ink Analysis document model that are in the same area as modifications to the application document need be passed to the **InkAnalyzer** as it needs them.</span></span>

### <a name="synchronous-update"></a><span data-ttu-id="175d1-118">Atualização síncrona</span><span class="sxs-lookup"><span data-stu-id="175d1-118">Synchronous Update</span></span>

<span data-ttu-id="175d1-119">A abordagem de atualização síncrona requer a modificação (criação e exclusão) de nós na coleção do objeto [**InkAnalyzer**](inkanalyzer.md) de objetos [**ContextNode**](icontextnode.md) conforme eles ocorrem no documento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="175d1-119">The synchronous update approach requires the modification (creation and deletion) of nodes in the [**InkAnalyzer**](inkanalyzer.md) object's collection of [**ContextNode**](icontextnode.md) objects as they occur in the application document.</span></span> <span data-ttu-id="175d1-120">Por exemplo, sempre que uma palavra de texto é adicionada ao aplicativo, um **ContextNode** com estilo **textword** correspondente é criado no **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="175d1-120">For example, each time a text word is added to the application, a corresponding **TextWord** styled **ContextNode** is created in the **InkAnalyzer**.</span></span> <span data-ttu-id="175d1-121">Se o local da palavra de texto na página for alterado, o local do **ContextNode** correspondente será atualizado ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="175d1-121">If the location of the text word on the page changes, then the location of the corresponding **ContextNode** is updated at the same time.</span></span> <span data-ttu-id="175d1-122">Esse método é menos eficiente em termos de recursos de computação do que o método sob demanda, pois cada alteração de documento envolve uma atualização para o **InkAnalyzer**, mesmo que a alteração não afete a tinta que está sendo analisada.</span><span class="sxs-lookup"><span data-stu-id="175d1-122">This method is less efficient in terms of computing resources than the on-demand method because every document change involves an update to the **InkAnalyzer**, even if the change does not affect the ink being analyzed.</span></span>

<span data-ttu-id="175d1-123">O exemplo a seguir destina-se a mostrar como a atualização síncrona funciona.</span><span class="sxs-lookup"><span data-stu-id="175d1-123">The following example is meant to show how synchronous update works.</span></span> <span data-ttu-id="175d1-124">Imagine um aplicativo que tenha um modelo de documento existente.</span><span class="sxs-lookup"><span data-stu-id="175d1-124">Imagine an application that has an existing document model.</span></span> <span data-ttu-id="175d1-125">Quando o usuário final faz uma alteração no documento, como adicionar um novo texto, a alteração é processada da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="175d1-125">When the end-user makes a change to the document, such as adding new text, the change is processed as follows:</span></span>

1.  <span data-ttu-id="175d1-126">O usuário final cria os novos dados.</span><span class="sxs-lookup"><span data-stu-id="175d1-126">The end user creates the new data.</span></span>
2.  <span data-ttu-id="175d1-127">O aplicativo determina como processar os dados, os armazena e os renderiza.</span><span class="sxs-lookup"><span data-stu-id="175d1-127">The application determines how to process the data, stores it, and renders it.</span></span>
3.  <span data-ttu-id="175d1-128">Para fins práticos, ocorrem as etapas a seguir simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="175d1-128">For practical purposes, the following steps take place simultaneously.</span></span>
    1.  <span data-ttu-id="175d1-129">O aplicativo coloca os dados em seu modelo de documento.</span><span class="sxs-lookup"><span data-stu-id="175d1-129">The application places the data into its document model.</span></span>
    2.  <span data-ttu-id="175d1-130">O aplicativo cria um [**InkAnalyzer**](inkanalyzer.md) e o atualiza.</span><span class="sxs-lookup"><span data-stu-id="175d1-130">The application creates an [**InkAnalyzer**](inkanalyzer.md) and updates it.</span></span> <span data-ttu-id="175d1-131">Fazer isso simultaneamente garante que o **InkAnalyzer** sempre tenha as informações mais recentes.</span><span class="sxs-lookup"><span data-stu-id="175d1-131">Doing this simultaneously assures that the **InkAnalyzer** always has the most recent information.</span></span>
    3.  <span data-ttu-id="175d1-132">O aplicativo chama [**BackgroundAnalyze**](iinkanalyzer-backgroundanalyze.md) no [**InkAnalyzer**](inkanalyzer.md) para iniciar a análise.</span><span class="sxs-lookup"><span data-stu-id="175d1-132">The application calls [**BackgroundAnalyze**](iinkanalyzer-backgroundanalyze.md) on the [**InkAnalyzer**](inkanalyzer.md) to begin analysis.</span></span>
4.  <span data-ttu-id="175d1-133">Uma série de eventos será acionada se a alteração envolver tinta e o [**InkAnalyzer**](inkanalyzer.md) determinar novos resultados.</span><span class="sxs-lookup"><span data-stu-id="175d1-133">A series of events is fired if the change involves ink and the [**InkAnalyzer**](inkanalyzer.md) determines new results.</span></span> <span data-ttu-id="175d1-134">Um evento é acionado para cada alteração feita na coleção de objetos [**ContextNode**](icontextnode.md) no **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="175d1-134">One event is fired for each change made to the collection of [**ContextNode**](icontextnode.md) objects in the **InkAnalyzer**.</span></span> <span data-ttu-id="175d1-135">Esses eventos incluem [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md), [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md), [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md), [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md), [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md), [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)e [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md).</span><span class="sxs-lookup"><span data-stu-id="175d1-135">These events include [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md), [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md), [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md), [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md), [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md), [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md), and [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md).</span></span> <span data-ttu-id="175d1-136">O aplicativo manipula esses eventos para fazer o proxy dos resultados da operação de análise de volta para o modelo de documento, conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="175d1-136">The application handles these events to proxy the results of the analysis operation back into the document model as appropriate.</span></span>
5.  <span data-ttu-id="175d1-137">O aplicativo atualiza o layout do documento, extraindo os novos dados do modelo de documento.</span><span class="sxs-lookup"><span data-stu-id="175d1-137">The application updates the layout of the document, pulling the new data from the document model.</span></span>
6.  <span data-ttu-id="175d1-138">Os novos dados são processados de volta para o usuário final.</span><span class="sxs-lookup"><span data-stu-id="175d1-138">The new data is rendered back to the end user.</span></span>

### <a name="on-demand-update"></a><span data-ttu-id="175d1-139">Atualização sob demanda</span><span class="sxs-lookup"><span data-stu-id="175d1-139">On-Demand Update</span></span>

<span data-ttu-id="175d1-140">A abordagem sob demanda requer apenas que os dados sejam passados para os objetos [**ContextNode**](icontextnode.md) que estão nas áreas que estão sendo analisadas.</span><span class="sxs-lookup"><span data-stu-id="175d1-140">The on-demand approach only requires the data to be passed for those [**ContextNode**](icontextnode.md) objects that are in the areas that are being analyzed.</span></span> <span data-ttu-id="175d1-141">Os objetos **ContextNode** necessários são extraídos do modelo de documento do aplicativo logo após a operação de análise ser invocada e novamente antes de reconciliar os resultados.</span><span class="sxs-lookup"><span data-stu-id="175d1-141">The needed **ContextNode** objects are extracted from the application's document model just after the analysis operation is invoked, and again just prior to reconciling the results.</span></span> <span data-ttu-id="175d1-142">Embora seja mais complicado implementar do que as atualizações síncronas, essa abordagem gera melhores resultados de desempenho.</span><span class="sxs-lookup"><span data-stu-id="175d1-142">While more complicated to implement than synchronous updates, this approach yields better performance results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="175d1-143">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="175d1-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="175d1-144">Visão geral da análise de tinta</span><span class="sxs-lookup"><span data-stu-id="175d1-144">Ink Analysis Overview</span></span>](ink-analysis-overview.md)
</dt> <dt>

[<span data-ttu-id="175d1-145">**Classe InkAnalyzer (C++)**</span><span class="sxs-lookup"><span data-stu-id="175d1-145">**InkAnalyzer Class (C++)**</span></span>](inkanalyzer.md)
</dt> <dt>

<span data-ttu-id="175d1-146">[**Microsoft. Ink. InkAnalyzer**](/previous-versions/ms583671(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="175d1-146">[**Microsoft.Ink.InkAnalyzer**](/previous-versions/ms583671(v=vs.100))</span></span>
</dt> <dt>

<span data-ttu-id="175d1-147">[**Microsoft. Ink. ContextNode**](/previous-versions/ms551996(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="175d1-147">[**Microsoft.Ink.ContextNode**](/previous-versions/ms551996(v=vs.100))</span></span>
</dt> </dl>

 

 
