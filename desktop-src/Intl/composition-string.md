---
description: A cadeia de caracteres de composição é o texto atual na janela de composição.
ms.assetid: ab226567-f68d-4fa4-9ead-e9bfabde927e
title: Cadeia de caracteres de composição
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5cb63163ca9a8076edc4d01053e4baeffc619c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103921856"
---
# <a name="composition-string"></a><span data-ttu-id="30fae-103">Cadeia de caracteres de composição</span><span class="sxs-lookup"><span data-stu-id="30fae-103">Composition String</span></span>

<span data-ttu-id="30fae-104">A cadeia de caracteres de composição é o texto atual na janela de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-104">The composition string is the current text in the composition window.</span></span> <span data-ttu-id="30fae-105">Esse é o texto que o IME converte para os caracteres finais.</span><span class="sxs-lookup"><span data-stu-id="30fae-105">This is the text that the IME converts to final characters.</span></span> <span data-ttu-id="30fae-106">Cada cadeia de caracteres de composição consiste em uma ou mais "cláusulas".</span><span class="sxs-lookup"><span data-stu-id="30fae-106">Each composition string consists of one or more "clauses".</span></span> <span data-ttu-id="30fae-107">Uma cláusula é a menor combinação de caracteres que o IME pode converter em um caractere final.</span><span class="sxs-lookup"><span data-stu-id="30fae-107">A clause is the smallest combination of characters that the IME can convert to a final character.</span></span> <span data-ttu-id="30fae-108">Para obter e definir a cadeia de caracteres de composição, o aplicativo chama as funções [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) e [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="30fae-108">To get and set the composition string, the application calls the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) and [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) functions, respectively.</span></span>

<span data-ttu-id="30fae-109">Conforme o usuário digita o texto na janela de composição, o IME acompanha o status da cadeia de caracteres de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-109">As the user enters text in the composition window, the IME tracks the status of the composition string.</span></span> <span data-ttu-id="30fae-110">Esse status inclui informações de atributo, informações de cláusula, informações de digitação e posição do cursor.</span><span class="sxs-lookup"><span data-stu-id="30fae-110">This status includes attribute information, clause information, typing information, and cursor position.</span></span> <span data-ttu-id="30fae-111">O aplicativo pode recuperar o status da composição usando a função [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="30fae-111">The application can retrieve the composition status by using the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) function.</span></span>

<span data-ttu-id="30fae-112">As informações de atributo são renderizadas em uma matriz de valores de 8 bits que especifica o status dos caracteres na cadeia de caracteres de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-112">Attribute information is rendered in an array of 8-bit values that specifies the status of characters in the composition string.</span></span> <span data-ttu-id="30fae-113">Todos os caracteres de uma cláusula devem ter o mesmo atributo.</span><span class="sxs-lookup"><span data-stu-id="30fae-113">All characters of one clause must have the same attribute.</span></span> <span data-ttu-id="30fae-114">A matriz inclui um valor para cada byte na cadeia de caracteres, incluindo um byte cada para o cliente potencial e segundo bytes de qualquer caractere de byte duplo na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="30fae-114">The array includes one value for each byte in the string, including one byte each for the lead and second bytes of any double-byte characters in the string.</span></span> <span data-ttu-id="30fae-115">Para cada valor na matriz, o bits 0 a 3 pode ser uma combinação dos valores a seguir.</span><span class="sxs-lookup"><span data-stu-id="30fae-115">For each value in the array, bits 0 through 3 can be one combination of the following values.</span></span>



| <span data-ttu-id="30fae-116">Valor</span><span class="sxs-lookup"><span data-stu-id="30fae-116">Value</span></span>                      | <span data-ttu-id="30fae-117">Significado</span><span class="sxs-lookup"><span data-stu-id="30fae-117">Meaning</span></span>                                                                                                   |
|----------------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="30fae-118">\_entrada attr</span><span class="sxs-lookup"><span data-stu-id="30fae-118">ATTR\_INPUT</span></span>                | <span data-ttu-id="30fae-119">Caractere que está sendo inserido pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="30fae-119">Character being entered by the user.</span></span> <span data-ttu-id="30fae-120">O IME ainda não converte esse caractere.</span><span class="sxs-lookup"><span data-stu-id="30fae-120">The IME has yet to convert this character.</span></span>                           |
| <span data-ttu-id="30fae-121">\_erro de entrada attr \_</span><span class="sxs-lookup"><span data-stu-id="30fae-121">ATTR\_INPUT\_ERROR</span></span>         | <span data-ttu-id="30fae-122">Um caractere de erro que o IME não pode converter.</span><span class="sxs-lookup"><span data-stu-id="30fae-122">An error character that the IME cannot convert.</span></span> <span data-ttu-id="30fae-123">Por exemplo, o IME não pode reunir algumas consoantes.</span><span class="sxs-lookup"><span data-stu-id="30fae-123">For example, the IME cannot put together some consonants.</span></span> |
| <span data-ttu-id="30fae-124">\_destino attr \_ convertido</span><span class="sxs-lookup"><span data-stu-id="30fae-124">ATTR\_TARGET\_CONVERTED</span></span>    | <span data-ttu-id="30fae-125">Caractere selecionado pelo usuário e, em seguida, convertido pelo IME.</span><span class="sxs-lookup"><span data-stu-id="30fae-125">Character selected by the user and then converted by the IME.</span></span>                                             |
| <span data-ttu-id="30fae-126">ATTR \_ convertido</span><span class="sxs-lookup"><span data-stu-id="30fae-126">ATTR\_CONVERTED</span></span>            | <span data-ttu-id="30fae-127">Caractere que o IME já converteu.</span><span class="sxs-lookup"><span data-stu-id="30fae-127">Character that the IME has already converted.</span></span>                                                             |
| <span data-ttu-id="30fae-128">destino ATTR não \_ \_ convertido</span><span class="sxs-lookup"><span data-stu-id="30fae-128">ATTR\_TARGET\_NOTCONVERTED</span></span> | <span data-ttu-id="30fae-129">Caractere que está sendo convertido.</span><span class="sxs-lookup"><span data-stu-id="30fae-129">Character being converted.</span></span> <span data-ttu-id="30fae-130">O usuário selecionou esse caractere, mas o IME ainda não o converteu.</span><span class="sxs-lookup"><span data-stu-id="30fae-130">The user has selected this character but the IME has not yet converted it.</span></span>     |
| <span data-ttu-id="30fae-131">\_FIXEDCONVERTED attr</span><span class="sxs-lookup"><span data-stu-id="30fae-131">ATTR\_FIXEDCONVERTED</span></span>       | <span data-ttu-id="30fae-132">Caracteres que o IME não irá mais converter.</span><span class="sxs-lookup"><span data-stu-id="30fae-132">Characters that the IME will no longer convert.</span></span>                                                           |



 

<span data-ttu-id="30fae-133">Todos os outros valores são reservados.</span><span class="sxs-lookup"><span data-stu-id="30fae-133">All other values are reserved.</span></span> <span data-ttu-id="30fae-134">Em Japonês, qualquer caractere não convertido que tenha o \_ atributo de entrada attr é um caractere hiragana, Katakana ou alfanumérico.</span><span class="sxs-lookup"><span data-stu-id="30fae-134">In Japanese, any unconverted character having the ATTR\_INPUT attribute is a hiragana, katakana, or alphanumeric character.</span></span> <span data-ttu-id="30fae-135">Em coreano, esse atributo representa um caractere hangul que o IME ainda não converteu.</span><span class="sxs-lookup"><span data-stu-id="30fae-135">In Korean, this attribute represents a Hangul character that the IME has not yet converted.</span></span> <span data-ttu-id="30fae-136">No chinês tradicional e no chinês simplificado, cada IME pode limitar seu caractere dentro de algum intervalo.</span><span class="sxs-lookup"><span data-stu-id="30fae-136">In Traditional Chinese and Simplified Chinese, each IME can limit its character within some range.</span></span>

<span data-ttu-id="30fae-137">As informações de cláusula incluídas no status da cadeia de caracteres de composição são uma matriz de valores de 32 bits que especifica as posições das cláusulas na cadeia de caracteres de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-137">The clause information included in the composition string status is an array of 32-bit values that specifies the positions of the clauses in the composition string.</span></span> <span data-ttu-id="30fae-138">A matriz inclui um valor para cada cláusula e um valor final que especifica o comprimento da cadeia de caracteres completa.</span><span class="sxs-lookup"><span data-stu-id="30fae-138">The array includes one value for each clause and a final value that specifies the length of the full string.</span></span> <span data-ttu-id="30fae-139">Cada valor na matriz Especifica o deslocamento, em bytes, do início da cadeia de caracteres até a cláusula.</span><span class="sxs-lookup"><span data-stu-id="30fae-139">Each value in the array specifies the offset, in bytes, from the beginning of the string to the clause.</span></span> <span data-ttu-id="30fae-140">O primeiro valor é sempre 0 porque a primeira cláusula sempre começa no início da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="30fae-140">The first value is always 0 because the first clause always starts at the beginning of the string.</span></span> <span data-ttu-id="30fae-141">Por exemplo, se uma cadeia de caracteres tiver duas cláusulas, as informações de cláusula têm três valores: o primeiro valor é 0, o segundo valor é o deslocamento da segunda cláusula e o terceiro valor é o comprimento da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="30fae-141">For example, if a string has two clauses, the clause information has three values: the first value is 0, the second value is the offset of the second clause, and the third value is the length of the string.</span></span> <span data-ttu-id="30fae-142">Para Unicode, a posição de uma cláusula é contada em caracteres Unicode e o comprimento de uma cadeia de caracteres é o tamanho em caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="30fae-142">For Unicode, the position of a clause is counted in Unicode characters, and the length of a string is the size in Unicode characters.</span></span>

<span data-ttu-id="30fae-143">As informações de digitação incluídas no status da cadeia de caracteres de composição são uma cadeia de caracteres terminada em nulo que representa os caracteres que o usuário insere no teclado.</span><span class="sxs-lookup"><span data-stu-id="30fae-143">The typing information included in the composition string status is a null-terminated character string representing the characters that the user enters at the keyboard.</span></span>

<span data-ttu-id="30fae-144">A posição do cursor incluída no status da cadeia de caracteres de composição é um valor que indica a posição do cursor em relação aos caracteres na cadeia de caracteres de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-144">The cursor position included in the composition string status is a value indicating the position of the cursor relative to the characters in the composition string.</span></span> <span data-ttu-id="30fae-145">O valor é o deslocamento, em bytes, do início da cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="30fae-145">The value is the offset, in bytes, from the beginning of the string.</span></span> <span data-ttu-id="30fae-146">Se esse valor for 0, o cursor será imediatamente antes do primeiro caractere na cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="30fae-146">If this value is 0, the cursor is immediately before the first character in the string.</span></span> <span data-ttu-id="30fae-147">Se o valor for igual ao comprimento da cadeia de caracteres, o cursor será imediatamente após o último caractere.</span><span class="sxs-lookup"><span data-stu-id="30fae-147">If the value is equal to the length of the string, the cursor is immediately after the last character.</span></span> <span data-ttu-id="30fae-148">Se o valor for 1, o cursor não estará presente.</span><span class="sxs-lookup"><span data-stu-id="30fae-148">If the value is 1, the cursor is not present.</span></span> <span data-ttu-id="30fae-149">Para Unicode, a posição e o comprimento são medidos em caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="30fae-149">For Unicode, both position and length are measured in Unicode characters.</span></span>

<span data-ttu-id="30fae-150">Seu aplicativo pode definir a cadeia de caracteres de composição ou os elementos do status da composição usando a função [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="30fae-150">Your application can set the composition string or elements of the composition status by using the [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) function.</span></span> <span data-ttu-id="30fae-151">Para garantir que a janela de composição Atualize sua aparência com base nessas alterações, a função permite que o aplicativo envie uma mensagem de notificação para a janela.</span><span class="sxs-lookup"><span data-stu-id="30fae-151">To ensure that the composition window updates its appearance based on these changes, the function allows the application to send a notification message to the window.</span></span> <span data-ttu-id="30fae-152">Os aplicativos que definem uma combinação de elementos de status de composição normalmente desabilitam as notificações para todas, exceto a última chamada para essa função, de forma que apenas uma mensagem de notificação seja gerada para a janela de composição.</span><span class="sxs-lookup"><span data-stu-id="30fae-152">Applications that set a combination of composition status elements typically disable notifications for all but the last call to this function so that only one notification message is generated for the composition window.</span></span>

<span data-ttu-id="30fae-153">Por fim, o controle de edição dá suporte a duas mensagens para alterar o tratamento de cadeias de caracteres de composição pelo IME.</span><span class="sxs-lookup"><span data-stu-id="30fae-153">Finally, the edit control supports two messages for changing the handling of composition strings by the IME.</span></span> <span data-ttu-id="30fae-154">Para obter mais informações, consulte em [**\_ GETIMESTATUS**](../controls/em-getimestatus.md) e em [**\_ SETIMESTATUS**](../controls/em-setimestatus.md).</span><span class="sxs-lookup"><span data-stu-id="30fae-154">For more information, see [**EM\_GETIMESTATUS**](../controls/em-getimestatus.md) and [**EM\_SETIMESTATUS**](../controls/em-setimestatus.md).</span></span> <span data-ttu-id="30fae-155">Para obter mais informações sobre o controle de edição, consulte [Editar controle](../controls/edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="30fae-155">For more information on the edit control, see [Edit Control](../controls/edit-controls.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="30fae-156">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="30fae-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="30fae-157">Sobre o Gerenciador de métodos de entrada</span><span class="sxs-lookup"><span data-stu-id="30fae-157">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 
