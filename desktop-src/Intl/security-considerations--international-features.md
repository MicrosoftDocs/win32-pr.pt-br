---
description: Este tópico fornece informações sobre considerações de segurança relacionadas aos recursos de suporte internacional.
ms.assetid: 4034f479-ad29-4c6f-82c6-977f420c4d4d
title: 'Considerações sobre segurança: recursos internacionais'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeb9f8b849e9fb1a07f01031832449b9c9027ae5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104172037"
---
# <a name="security-considerations-international-features"></a><span data-ttu-id="977e0-103">Considerações sobre segurança: recursos internacionais</span><span class="sxs-lookup"><span data-stu-id="977e0-103">Security Considerations: International Features</span></span>

<span data-ttu-id="977e0-104">Este tópico fornece informações sobre considerações de segurança relacionadas aos recursos de suporte internacional.</span><span class="sxs-lookup"><span data-stu-id="977e0-104">This topic provides information about security considerations related to International Support features.</span></span> <span data-ttu-id="977e0-105">Você pode usá-lo como um ponto de partida e, em seguida, ver a documentação da tecnologia internacional de interesse para considerações de segurança específicas de tecnologia.</span><span class="sxs-lookup"><span data-stu-id="977e0-105">You can use it as a starting point and then see the documentation for the international technology of interest for technology-specific security considerations.</span></span>

<span data-ttu-id="977e0-106">Este tópico inclui as seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="977e0-106">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="977e0-107">Considerações de segurança para funções de conversão de caracteres</span><span class="sxs-lookup"><span data-stu-id="977e0-107">Security Considerations for Character Conversion Functions</span></span>](#security-considerations-for-character-conversion-functions)
-   [<span data-ttu-id="977e0-108">Considerações de segurança para funções de comparação</span><span class="sxs-lookup"><span data-stu-id="977e0-108">Security Considerations for Comparison Functions</span></span>](#security-considerations-for-comparison-functions)
-   [<span data-ttu-id="977e0-109">Considerações de segurança para conjuntos de caracteres em nomes de arquivos</span><span class="sxs-lookup"><span data-stu-id="977e0-109">Security Considerations for Character Sets in File Names</span></span>](#security-considerations-for-character-sets-in-file-names)
-   [<span data-ttu-id="977e0-110">Considerações de segurança para nomes de domínio internacionalizados</span><span class="sxs-lookup"><span data-stu-id="977e0-110">Security Considerations for Internationalized Domain Names</span></span>](#security-considerations-for-internationalized-domain-names)
-   [<span data-ttu-id="977e0-111">Considerações de segurança para funções ANSI</span><span class="sxs-lookup"><span data-stu-id="977e0-111">Security Considerations for ANSI Functions</span></span>](#security-considerations-for-ansi-functions)
-   [<span data-ttu-id="977e0-112">Considerações de segurança para normalização de Unicode</span><span class="sxs-lookup"><span data-stu-id="977e0-112">Security Considerations for Unicode Normalization</span></span>](#security-considerations-for-unicode-normalization)

## <a name="security-considerations-for-character-conversion-functions"></a><span data-ttu-id="977e0-113">Considerações de segurança para funções de conversão de caracteres</span><span class="sxs-lookup"><span data-stu-id="977e0-113">Security Considerations for Character Conversion Functions</span></span>

<span data-ttu-id="977e0-114">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) e [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) são as funções Unicode e de conjunto de caracteres usadas com mais frequência para converter caracteres entre ANSI e Unicode.</span><span class="sxs-lookup"><span data-stu-id="977e0-114">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) are the Unicode and character set functions most commonly used to convert characters between ANSI and Unicode.</span></span> <span data-ttu-id="977e0-115">Essas funções têm o potencial de causar riscos de segurança porque elas contam os elementos dos buffers de entrada e de saída de forma diferente.</span><span class="sxs-lookup"><span data-stu-id="977e0-115">These functions have the potential of causing security risks because they count the elements of the input and output buffers differently.</span></span> <span data-ttu-id="977e0-116">Por exemplo, [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) usa um buffer de entrada contado em bytes e coloca os caracteres convertidos em um buffer dimensionado em caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="977e0-116">For example, [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) takes an input buffer counted in bytes and puts the converted characters into a buffer sized in Unicode characters.</span></span> <span data-ttu-id="977e0-117">Quando seu aplicativo usa essa função, ele deve dimensionar os buffers corretamente para evitar uma saturação de buffer.</span><span class="sxs-lookup"><span data-stu-id="977e0-117">When your application uses this function, it must size the buffers correctly to avoid a buffer overrun.</span></span>

<span data-ttu-id="977e0-118">[**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) assume como padrão o mapeamento "melhor ajuste" para páginas de código, como 1252.</span><span class="sxs-lookup"><span data-stu-id="977e0-118">[**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) defaults to "best fit" mapping for code pages, such as 1252.</span></span> <span data-ttu-id="977e0-119">No entanto, esse tipo de mapeamento permite várias representações da mesma cadeia de caracteres, potencialmente deixando seu aplicativo vulnerável a ataques.</span><span class="sxs-lookup"><span data-stu-id="977e0-119">However, this type of mapping allows multiple representations of the same string, potentially leaving your application vulnerable to attack.</span></span> <span data-ttu-id="977e0-120">Por exemplo, A letra latina maiúscula A com trema ("Ä") pode ser mapeada para a letra latina maiúscula A ("A"); um caractere Unicode em um idioma asiático pode ser mapeado para uma barra ("/").</span><span class="sxs-lookup"><span data-stu-id="977e0-120">For example, Latin capital letter A with dieresis ("Ä") might map to Latin capital letter A ("A"); a Unicode character in an Asian language might map to a slash ("/").</span></span> <span data-ttu-id="977e0-121">O uso do sinalizador WC \_ nenhum \_ melhor \_ ajuste de \_ caracteres é preferencial de uma perspectiva de segurança.</span><span class="sxs-lookup"><span data-stu-id="977e0-121">The use of the WC\_NO\_BEST\_FIT\_CHARS flag is preferred from a security perspective.</span></span>

<span data-ttu-id="977e0-122">Algumas páginas de código, por exemplo, as páginas de código 5022x (ISO-2022-x), são inerentemente inseguras, pois permitem várias representações da mesma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="977e0-122">Some code pages, for example, the 5022x (iso-2022-x) code pages, are inherently insecure because they allow multiple representations of the same string.</span></span> <span data-ttu-id="977e0-123">O código escrito corretamente executa verificações de segurança no formato Unicode, mas esses tipos de páginas de código expandem o ataque susceptibilidade de seus aplicativos e devem ser evitados, se possível.</span><span class="sxs-lookup"><span data-stu-id="977e0-123">Properly written code performs security checks in the Unicode form, but these types of code pages expand the attack susceptibility of your applications and should be avoided if possible.</span></span>

## <a name="security-considerations-for-comparison-functions"></a><span data-ttu-id="977e0-124">Considerações de segurança para funções de comparação</span><span class="sxs-lookup"><span data-stu-id="977e0-124">Security Considerations for Comparison Functions</span></span>

<span data-ttu-id="977e0-125">Comparações de cadeia de caracteres podem potencialmente apresentar problemas de segurança.</span><span class="sxs-lookup"><span data-stu-id="977e0-125">String comparisons can potentially present security issues.</span></span> <span data-ttu-id="977e0-126">Como todas as funções de comparação são ligeiramente diferentes, uma função pode relatar duas cadeias de caracteres como iguais, enquanto outra função pode considerá-las distintas.</span><span class="sxs-lookup"><span data-stu-id="977e0-126">Because all comparison functions are slightly different, one function might report two strings as equal, while another function might consider them distinct.</span></span> <span data-ttu-id="977e0-127">A seguir estão várias funções que seus aplicativos podem usar para comparar cadeias de caracteres:</span><span class="sxs-lookup"><span data-stu-id="977e0-127">The following are several functions your applications can use to compare strings:</span></span>

-   <span data-ttu-id="977e0-128">[lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia).</span><span class="sxs-lookup"><span data-stu-id="977e0-128">[lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia).</span></span> <span data-ttu-id="977e0-129">Compara duas cadeias de caracteres de caractere de acordo com as regras da localidade, sem diferenciação de maiúsculas e minúsculas.</span><span class="sxs-lookup"><span data-stu-id="977e0-129">Compares two character strings according to the rules of the locale, without case-sensitivity.</span></span> <span data-ttu-id="977e0-130">A função compara as cadeias de caracteres, verificando os primeiros e assim por diante, os segundo caracteres entre si e assim por diante, até encontrar uma desigualdade ou atingir as extremidades das cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="977e0-130">The function compares the strings by checking the first characters against each other, the second characters against each other, and so on, until it finds an inequality or reaches the ends of the strings.</span></span>
-   <span data-ttu-id="977e0-131">[lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa).</span><span class="sxs-lookup"><span data-stu-id="977e0-131">[lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa).</span></span> <span data-ttu-id="977e0-132">Compara Cadeias de caracteres usando técnicas semelhantes às de [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia).</span><span class="sxs-lookup"><span data-stu-id="977e0-132">Compares strings using techniques similar to those of [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia).</span></span> <span data-ttu-id="977e0-133">A única diferença é que o [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) executa uma comparação de cadeia de caracteres que diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="977e0-133">The only difference is that [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) performs a case-sensitive string comparison.</span></span>
-   <span data-ttu-id="977e0-134">[**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw), [**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) (Windows Vista e posterior).</span><span class="sxs-lookup"><span data-stu-id="977e0-134">[**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw), [**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) (Windows Vista and later).</span></span> <span data-ttu-id="977e0-135">Execute uma comparação de cadeia de caracteres em uma localidade fornecida pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="977e0-135">Perform a string comparison on an application-supplied locale.</span></span> <span data-ttu-id="977e0-136">[**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) é semelhante a [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw), mas identifica uma localidade por [nome de localidade](locale-names.md) em vez de [identificador de localidade](locale-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="977e0-136">[**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) is similar to [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw), but it identifies a locale by [locale name](locale-names.md) instead of [locale identifier](locale-identifiers.md).</span></span> <span data-ttu-id="977e0-137">Essas funções são semelhantes a [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) e [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) , exceto que operam em uma localidade específica, em vez de uma localidade selecionada pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="977e0-137">These functions are similar to [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) and [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) except that they operate on a specific locale instead of a user-selected locale.</span></span>
-   <span data-ttu-id="977e0-138">[**CompareStringOrdinal**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringordinal) (Windows Vista e posterior).</span><span class="sxs-lookup"><span data-stu-id="977e0-138">[**CompareStringOrdinal**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringordinal) (Windows Vista and later).</span></span> <span data-ttu-id="977e0-139">Compara duas cadeias de caracteres Unicode para testar a equivalência binária.</span><span class="sxs-lookup"><span data-stu-id="977e0-139">Compares two Unicode strings to test binary equivalence.</span></span> <span data-ttu-id="977e0-140">Exceto pela opção de diferenciar maiúsculas de minúsculas, essa função desconsidera todas as equivalências não binárias e testa todos os pontos de código para igualdade, incluindo pontos de código que não recebem nenhum peso nos esquemas de [classificação](sorting.md) linguística.</span><span class="sxs-lookup"><span data-stu-id="977e0-140">Except for the option of being case-insensitive, this function disregards all non-binary equivalences, and tests all code points for equality, including code points that are not given any weight in linguistic [sorting](sorting.md) schemes.</span></span> <span data-ttu-id="977e0-141">Observe que as outras funções de comparação mencionadas neste tópico não testam todos os pontos de código para igualdade.</span><span class="sxs-lookup"><span data-stu-id="977e0-141">Note that the other comparison functions mentioned in this topic do not test all code points for equality.</span></span>
-   <span data-ttu-id="977e0-142">[**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), [**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) (Windows Vista e posterior).</span><span class="sxs-lookup"><span data-stu-id="977e0-142">[**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), [**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) (Windows Vista and later).</span></span> <span data-ttu-id="977e0-143">Localize uma cadeia de caracteres Unicode em outra cadeia de caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="977e0-143">Locate a Unicode string in another Unicode string.</span></span> <span data-ttu-id="977e0-144">[**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) é semelhante a [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), exceto que identifica uma localidade por nome de localidade em vez de identificador de localidade.</span><span class="sxs-lookup"><span data-stu-id="977e0-144">[**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) is similar to [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), except that it identifies a locale by locale name instead of locale identifier.</span></span>
-   <span data-ttu-id="977e0-145">[**FindStringOrdinal**](/windows/desktop/api/Libloaderapi/nf-libloaderapi-findstringordinal) (Windows 7 e posterior).</span><span class="sxs-lookup"><span data-stu-id="977e0-145">[**FindStringOrdinal**](/windows/desktop/api/Libloaderapi/nf-libloaderapi-findstringordinal) (Windows 7 and later).</span></span> <span data-ttu-id="977e0-146">Localiza uma cadeia de caracteres Unicode em outra cadeia de caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="977e0-146">Locates one Unicode string in another Unicode string.</span></span> <span data-ttu-id="977e0-147">O aplicativo deve usar essa função em vez de [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring) para todas as comparações não linguísticas.</span><span class="sxs-lookup"><span data-stu-id="977e0-147">The application should use this function instead of [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring) for all non-linguistic comparisons.</span></span>

<span data-ttu-id="977e0-148">Como [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) e [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa), [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) avalia as cadeias de caracteres por caractere.</span><span class="sxs-lookup"><span data-stu-id="977e0-148">Like [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) and [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa), [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) evaluates strings character by character.</span></span> <span data-ttu-id="977e0-149">No entanto, muitas linguagens têm elementos de vários caracteres, por exemplo, o elemento de dois caracteres "CH" em espanhol tradicional.</span><span class="sxs-lookup"><span data-stu-id="977e0-149">However, many languages have multiple-character elements, for example, the two-character element "CH" in traditional Spanish.</span></span> <span data-ttu-id="977e0-150">Como [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) usa a localidade fornecida pelo aplicativo para identificar elementos de vários caracteres e [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) e [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) usam a localidade do thread, cadeias de caracteres idênticas podem não ser comparadas como iguais.</span><span class="sxs-lookup"><span data-stu-id="977e0-150">Because [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) uses the locale furnished by the application to identify multiple-character elements and [lstrcmpi](/windows/win32/api/winbase/nf-winbase-lstrcmpia) and [lstrcmp](/windows/win32/api/winbase/nf-winbase-lstrcmpa) use the thread locale, identical strings might not compare as equal.</span></span>

<span data-ttu-id="977e0-151">O [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) ignora os caracteres indefinidos e, portanto, retorna zero (indicando cadeias iguais) para muitos pares de cadeias de caracteres que são bastante distintos.</span><span class="sxs-lookup"><span data-stu-id="977e0-151">[**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) ignores undefined characters, and thus returns zero (indicating equal strings) for many string pairs that are quite distinct.</span></span> <span data-ttu-id="977e0-152">Uma cadeia de caracteres pode conter valores que não são mapeados para qualquer caractere ou pode conter caracteres com semântica fora do domínio do aplicativo, como caracteres de controle em uma URL.</span><span class="sxs-lookup"><span data-stu-id="977e0-152">A string might contain values that do not map to any character or it might contain characters with semantics outside the domain of the application, such as control characters in a URL.</span></span> <span data-ttu-id="977e0-153">Os aplicativos que usam essa função devem fornecer manipuladores de erro e cadeias de caracteres de teste para certificar-se de que eles são válidos antes de usá-los.</span><span class="sxs-lookup"><span data-stu-id="977e0-153">Applications using this function should provide error handlers and test strings to make sure that they are valid before using them.</span></span>

> [!Note]  
> <span data-ttu-id="977e0-154">Para o Windows Vista e posterior, o [**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) é semelhante a [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw).</span><span class="sxs-lookup"><span data-stu-id="977e0-154">For Windows Vista and later, [**CompareStringEx**](/windows/desktop/api/Stringapiset/nf-stringapiset-comparestringex) is similar to [**CompareString**](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw).</span></span> <span data-ttu-id="977e0-155">Os problemas de segurança são idênticos para essas funções.</span><span class="sxs-lookup"><span data-stu-id="977e0-155">The security issues are identical for these functions.</span></span>

 

<span data-ttu-id="977e0-156">Problemas de segurança semelhantes se aplicam a funções, como [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), que fazem comparações implícitas.</span><span class="sxs-lookup"><span data-stu-id="977e0-156">Similar security issues apply to functions, such as [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring), that make implicit comparisons.</span></span> <span data-ttu-id="977e0-157">Dependendo dos sinalizadores definidos, os resultados da chamada de [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring) para pesquisar uma cadeia de caracteres dentro de outra cadeia de caracteres podem ser consideravelmente diferentes.</span><span class="sxs-lookup"><span data-stu-id="977e0-157">Depending on the flags that are set, the results of calling [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring) to search for one string within another string can differ considerably.</span></span>

> [!Note]  
> <span data-ttu-id="977e0-158">Para o Windows Vista e posterior, o [**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) é semelhante ao [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring).</span><span class="sxs-lookup"><span data-stu-id="977e0-158">For Windows Vista and later, [**FindNLSStringEx**](/windows/desktop/api/Winnls/nf-winnls-findnlsstringex) is similar to [**FindNLSString**](/windows/desktop/api/Winnls/nf-winnls-findnlsstring).</span></span> <span data-ttu-id="977e0-159">Os problemas de segurança são idênticos para essas funções.</span><span class="sxs-lookup"><span data-stu-id="977e0-159">The security issues are identical for these functions.</span></span>

 

## <a name="security-considerations-for-character-sets-in-file-names"></a><span data-ttu-id="977e0-160">Considerações de segurança para conjuntos de caracteres em nomes de arquivos</span><span class="sxs-lookup"><span data-stu-id="977e0-160">Security Considerations for Character Sets in File Names</span></span>

<span data-ttu-id="977e0-161">A página de código do Windows e os conjuntos de caracteres OEM usados em sistemas de idioma japonês contêm o símbolo de Iene (¥) em vez de uma barra invertida ( \\ ).</span><span class="sxs-lookup"><span data-stu-id="977e0-161">Windows code page and OEM character sets used on Japanese-language systems contain the Yen symbol (¥) instead of a backslash (\\).</span></span> <span data-ttu-id="977e0-162">Portanto, o caractere de Iene é um caractere proibido para sistemas de arquivos NTFS e FAT.</span><span class="sxs-lookup"><span data-stu-id="977e0-162">Thus, the Yen character is a prohibited character for NTFS and FAT file systems.</span></span> <span data-ttu-id="977e0-163">Ao mapear o Unicode para uma página de código de idioma japonês, as funções de conversão mapeiam ambas as barras invertidas (U + 005C) e o símbolo de iene Unicode normal (U + 00A5) para esse mesmo caractere.</span><span class="sxs-lookup"><span data-stu-id="977e0-163">When mapping Unicode to a Japanese-language code page, conversion functions map both backslash (U+005C) and the normal Unicode Yen symbol (U+00A5) to this same character.</span></span> <span data-ttu-id="977e0-164">Por motivos de segurança, os aplicativos normalmente não devem permitir o caractere U + 00A5 em uma cadeia de caracteres Unicode que pode ser convertida para uso como um nome de arquivo FAT.</span><span class="sxs-lookup"><span data-stu-id="977e0-164">For security reasons, your applications should not typically allow the character U+00A5 in a Unicode string that might be converted for use as a FAT file name.</span></span>

## <a name="security-considerations-for-internationalized-domain-names"></a><span data-ttu-id="977e0-165">Considerações de segurança para nomes de domínio internacionalizados</span><span class="sxs-lookup"><span data-stu-id="977e0-165">Security Considerations for Internationalized Domain Names</span></span>

<span data-ttu-id="977e0-166">Os IDNs (nomes de domínio internacionalizados) são especificados pelo [RFC 3490 do grupo de trabalho de rede: Internacionalizando nomes de domínio em aplicativos (IDNA)](http://www.faqs.org/rfcs/rfc3490.html).</span><span class="sxs-lookup"><span data-stu-id="977e0-166">Internationalized Domain Names (IDNs) are specified by Network Working Group [RFC 3490: Internationalizing Domain Names in Applications (IDNA)](http://www.faqs.org/rfcs/rfc3490.html).</span></span> <span data-ttu-id="977e0-167">O padrão apresenta vários problemas de segurança.</span><span class="sxs-lookup"><span data-stu-id="977e0-167">The standard introduces a number of security issues.</span></span>

<span data-ttu-id="977e0-168">Os glifos que representam determinados caracteres de scripts diferentes podem parecer semelhantes ou mesmo idênticos.</span><span class="sxs-lookup"><span data-stu-id="977e0-168">Glyphs representing certain characters from different scripts might appear similar or even identical.</span></span> <span data-ttu-id="977e0-169">Por exemplo, em muitas fontes, A letra cirílica minúscula A ("a") não é diferencial da letra latina minúscula A ("a").</span><span class="sxs-lookup"><span data-stu-id="977e0-169">For example, in many fonts, Cyrillic lowercase A ("a") is indistinguishable from Latin lowercase A ("a").</span></span> <span data-ttu-id="977e0-170">Não há como dizer visualmente que "example.com" e "example.com" são dois nomes de domínio diferentes, um com uma letra latina minúscula no nome, o outro com uma letra cirílica minúscula A. Um site de host inescrupuloso pode usar essa ambiguidade Visual para fingir ser outro site em um ataque de falsificação.</span><span class="sxs-lookup"><span data-stu-id="977e0-170">There is no way to tell visually that "example.com" and "example.com" are two different domain names,one with a Latin lowercase A in the name, the other with a Cyrillic lowercase A. An unscrupulous host site can use this visual ambiguity to pretend to be another site in a spoofing attack.</span></span>

<span data-ttu-id="977e0-171">O conjunto de caracteres estendidos que o IDNA permite para IDNs também tem potencial de falsificação dentro de um script específico.</span><span class="sxs-lookup"><span data-stu-id="977e0-171">The extended character set that IDNA allows for IDNs also has spoofing potential within a particular script.</span></span> <span data-ttu-id="977e0-172">Por exemplo, há uma forte semelhança entre o hífen-menos ("-" U + 002D), o hífen ("–" U + 2010), o hífen não separável ("-" U + 2011), a figura Dash ("\u2012" U + 2012), o traço en ("–" U + 2013) e o sinal de subtração ("−" U + 2212).</span><span class="sxs-lookup"><span data-stu-id="977e0-172">For example, there is a strong resemblance among the hyphen-minus ("-" U+002D), the hyphen ("—" U+2010), the non-breaking hyphen ("‑" U+2011), the figure dash ("‒" U+2012), the en dash ("–" U+2013), and the minus sign ("−" U+2212).</span></span>

<span data-ttu-id="977e0-173">Problemas semelhantes surgem de determinadas composições de compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="977e0-173">Similar issues arise from certain compatibility compositions.</span></span> <span data-ttu-id="977e0-174">Por exemplo, o número de caractere Unicode único vinte e uma parada completa ("20.", U + 249B) é convertido em "20".</span><span class="sxs-lookup"><span data-stu-id="977e0-174">For example, the single Unicode character NUMBER TWENTY FULL STOP ("⒛", U+249B) is converted to "20."</span></span> <span data-ttu-id="977e0-175">(U + 0032 U + 0030 U + 002E) em uma etapa NamePrep, antes da conversão para Punycode.</span><span class="sxs-lookup"><span data-stu-id="977e0-175">(U+0032 U+0030 U+002E) in a NamePrep step, prior to conversion to Punycode.</span></span> <span data-ttu-id="977e0-176">Em outras palavras, essa composição insere um ponto (parada completa).</span><span class="sxs-lookup"><span data-stu-id="977e0-176">In other words, this composition inserts a period (full stop).</span></span> <span data-ttu-id="977e0-177">Essas composições têm potencial de falsificação.</span><span class="sxs-lookup"><span data-stu-id="977e0-177">Such compositions have spoofing potential.</span></span>

<span data-ttu-id="977e0-178">A combinação de scripts diferentes em um IDN não necessariamente indica falsificação ou intenção enganosa.</span><span class="sxs-lookup"><span data-stu-id="977e0-178">Mixing of different scripts in an IDN does not necessarily indicate spoofing or deceptive intent.</span></span> <span data-ttu-id="977e0-179">[Relatório técnico \# 36: considerações de segurança de Unicode](https://www.unicode.org/reports/tr36/#international_domain_names) fornece vários exemplos de IDNs razoáveis que contêm uma mistura de scripts, como XML-Документы. com ("Документы" é russo para "Documents").</span><span class="sxs-lookup"><span data-stu-id="977e0-179">[Technical Report \#36: Unicode Security Considerations](https://www.unicode.org/reports/tr36/#international_domain_names) gives several examples of reasonable IDNs that contain a mix of scripts, such as XML-Документы.com ("Документы" is Russian for "documents").</span></span>

<span data-ttu-id="977e0-180">Ataques de falsificação não são restritos a IDNs.</span><span class="sxs-lookup"><span data-stu-id="977e0-180">Spoofing attacks are not restricted to IDNs.</span></span> <span data-ttu-id="977e0-181">Por exemplo, "rnicrosoft.com" parece muito com "microsoft.com", mas é um nome ASCII.</span><span class="sxs-lookup"><span data-stu-id="977e0-181">For example, "rnicrosoft.com" looks much like "microsoft.com", yet it is an ASCII name.</span></span> <span data-ttu-id="977e0-182">Além disso, um ataque de falsificação pode ser feito por corrupção de um nome.</span><span class="sxs-lookup"><span data-stu-id="977e0-182">Additionally, a spoofing attack can be made by corruption of a name.</span></span> <span data-ttu-id="977e0-183">A adição de rótulos extras após um nome de marca conhecido, ou incluindo o nome da marca no caminho de uma URL rotulada como segura, pode confundir usuários iniciantes, independentemente do uso do IDN.</span><span class="sxs-lookup"><span data-stu-id="977e0-183">Adding extra labels after a well-known brand name, or including the brand name in the path of a URL labeled as secure, can confuse novice users, regardless of the use of the IDN.</span></span> <span data-ttu-id="977e0-184">Para algumas localidades, os IDNs são necessários e a forma Punycode desses nomes é inaceitável, pois faz com que os nomes pareçam ininteligívels.</span><span class="sxs-lookup"><span data-stu-id="977e0-184">For some locales, IDNs are required and the Punycode form of these names is unacceptable, since it makes the names look like gibberish.</span></span>

<span data-ttu-id="977e0-185">Para obter mais informações sobre os problemas de segurança mencionados aqui, além de um grande número de outros problemas relevantes para o IDNA, consulte [relatório técnico \# 36: considerações de segurança de Unicode](https://www.unicode.org/reports/tr36/#international_domain_names).</span><span class="sxs-lookup"><span data-stu-id="977e0-185">For more information about the security issues mentioned here, plus a large number of other issues relevant to IDNA, see [Technical Report \#36: Unicode Security Considerations](https://www.unicode.org/reports/tr36/#international_domain_names).</span></span> <span data-ttu-id="977e0-186">Juntamente com discussões detalhadas sobre problemas de segurança relacionados a IDNA, este relatório oferece sugestões para lidar com IDNs suspeitos em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="977e0-186">Along with detailed discussions of IDNA-related security issues, this report offers suggestions for dealing with suspect IDNs in your applications.</span></span>

## <a name="security-considerations-for-ansi-functions"></a><span data-ttu-id="977e0-187">Considerações de segurança para funções ANSI</span><span class="sxs-lookup"><span data-stu-id="977e0-187">Security Considerations for ANSI Functions</span></span>

> [!Note]  
> <span data-ttu-id="977e0-188">É recomendável usar o Unicode em seus aplicativos globalizados, especialmente os novos, se possível.</span><span class="sxs-lookup"><span data-stu-id="977e0-188">You are recommended to use Unicode in your globalized applications, particularly new ones, if at all possible.</span></span> <span data-ttu-id="977e0-189">Você deve usar funções ANSI somente se tiver motivos de substituição para não usar Unicode, por exemplo, conformidade com um protocolo mais antigo que não ofereça suporte a Unicode.</span><span class="sxs-lookup"><span data-stu-id="977e0-189">You should use ANSI functions only if you have overriding reasons for not using Unicode, for example, conformance to an older protocol that does not support Unicode.</span></span>

 

<span data-ttu-id="977e0-190">Muitas funções NLS (suporte a idioma nacional), como [**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa) e [**GetCalendarInfo**](/windows/desktop/api/Winnls/nf-winnls-getcalendarinfoa), têm versões ANSI específicas, nesse caso, **getlocaleinfoa** e **GetCalendarInfoA**, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="977e0-190">Many National Language Support (NLS) functions, such as [**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa) and [**GetCalendarInfo**](/windows/desktop/api/Winnls/nf-winnls-getcalendarinfoa), have specific ANSI versions, in this case, **GetLocaleInfoA** and **GetCalendarInfoA**, respectively.</span></span> <span data-ttu-id="977e0-191">Quando seu aplicativo usa a versão ANSI de uma função com um sistema operacional baseado em Unicode, como o Windows NT, o Windows 2000, o Windows XP ou o Windows Vista, a função pode falhar ou produzir resultados indefinidos.</span><span class="sxs-lookup"><span data-stu-id="977e0-191">When your application uses the ANSI version of a function with a Unicode-based operating system, such as Windows NT, Windows 2000, Windows XP, or Windows Vista, the function can fail or produce undefined results.</span></span> <span data-ttu-id="977e0-192">Se você tiver um motivo convincente para usar funções ANSI com um sistema operacional como esse, verifique se os dados passados pelo seu aplicativo são válidos para ANSI.</span><span class="sxs-lookup"><span data-stu-id="977e0-192">If you have a compelling reason to use ANSI functions with such an operating system, ensure that the data passed by your application is valid for ANSI.</span></span>

## <a name="security-considerations-for-unicode-normalization"></a><span data-ttu-id="977e0-193">Considerações de segurança para normalização de Unicode</span><span class="sxs-lookup"><span data-stu-id="977e0-193">Security Considerations for Unicode Normalization</span></span>

<span data-ttu-id="977e0-194">Como a normalização Unicode pode alterar a forma de uma cadeia de caracteres, mecanismos de segurança ou algoritmos de validação de caracteres normalmente devem ser implementados após a normalização.</span><span class="sxs-lookup"><span data-stu-id="977e0-194">Since Unicode normalization can change the form of a string, security mechanisms or character validation algorithms should usually be implemented after normalization.</span></span> <span data-ttu-id="977e0-195">Por exemplo, considere um aplicativo com uma interface da Web que aceita um nome de arquivo, mas não aceita um nome de caminho.</span><span class="sxs-lookup"><span data-stu-id="977e0-195">For example, consider an application with a Web interface that accepts a file name, but does not accept a path name.</span></span> <span data-ttu-id="977e0-196">Um U + FF43 U + FF1A U + FF3C U + FF57 U + FF49 U + FF4E u + FF44 u + FF4F u + FF57 u + FF53 u + 0063 u + 001A u + 003C u + 0077 u + 0069 U + 006E + 0064 & u u + 006F i + 0077 `(c : \ w i n d o w s)` `(c:\windows)` com a normalização de forma 0073.</span><span class="sxs-lookup"><span data-stu-id="977e0-196">A full-width U+FF43 U+FF1A U+FF3C U+FF57 U+FF49 U+FF4E U+FF44 U+FF4F U+FF57 U+FF53 `(c : \ w i n d o w s)` changes to U+0063 U+001A U+003C U+0077 U+0069 U+006E U+0064 U+006F U+0077 U+0073 `(c:\windows)` with form KC normalization.</span></span> <span data-ttu-id="977e0-197">Se um aplicativo testar a presença dos dois pontos e dos caracteres de barra invertida antes de implementar a normalização, o resultado poderá ser o acesso ao arquivo não intencional.</span><span class="sxs-lookup"><span data-stu-id="977e0-197">If an application tests for the presence of the colon and backslash characters before it implements normalization, the result can be unintentional file access.</span></span>

<span data-ttu-id="977e0-198">Embora a normalização Unicode seja um elemento em tornar os sistemas operacionais seguros, lembre-se de que a normalização não é uma substituição para uma política de segurança abrangente.</span><span class="sxs-lookup"><span data-stu-id="977e0-198">While Unicode normalization is an element in making operating systems secure, remember that normalization is not a replacement for a comprehensive security policy.</span></span>

## <a name="related-topics"></a><span data-ttu-id="977e0-199">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="977e0-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="977e0-200">Conjuntos de caracteres usados em nomes de arquivo</span><span class="sxs-lookup"><span data-stu-id="977e0-200">Character Sets Used in File Names</span></span>](character-sets-used-in-file-names.md)
</dt> <dt>

[<span data-ttu-id="977e0-201">Convenções para protótipos de função</span><span class="sxs-lookup"><span data-stu-id="977e0-201">Conventions for Function Prototypes</span></span>](conventions-for-function-prototypes.md)
</dt> <dt>

[<span data-ttu-id="977e0-202">Lidando com a classificação em seus aplicativos</span><span class="sxs-lookup"><span data-stu-id="977e0-202">Handling Sorting in Your Applications</span></span>](handling-sorting-in-your-applications.md)
</dt> <dt>

[<span data-ttu-id="977e0-203">Tratando IDNs (nomes de domínio internacionalizados)</span><span class="sxs-lookup"><span data-stu-id="977e0-203">Handling Internationalized Domain Names (IDNs)</span></span>](handling-internationalized-domain-names--idns.md)
</dt> <dt>

[<span data-ttu-id="977e0-204">Unicode</span><span class="sxs-lookup"><span data-stu-id="977e0-204">Unicode</span></span>](unicode.md)
</dt> </dl>

 

 
