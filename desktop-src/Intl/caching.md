---
description: O Uniscribe salva mapeamentos de CMap (Unicode-to-glifo), larguras de glifo e tabelas de formatação de script OpenType.
ms.assetid: c06c0eaf-41cb-4fd1-9750-a78355217f12
title: Caching (internacionalização)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3cf8bf7dd10fe414bc170086ff9b8c34142dc197
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105779322"
---
# <a name="caching-internationalization"></a><span data-ttu-id="219b4-103">Caching (internacionalização)</span><span class="sxs-lookup"><span data-stu-id="219b4-103">Caching (Internationalization)</span></span>

<span data-ttu-id="219b4-104">O Uniscribe salva mapeamentos de CMap (Unicode-to-glifo), larguras de glifo e tabelas de formatação de script OpenType.</span><span class="sxs-lookup"><span data-stu-id="219b4-104">Uniscribe saves Unicode-to-glyph (cmap) mappings, glyph widths, and OpenType script shaping tables.</span></span> <span data-ttu-id="219b4-105">Um identificador para as tabelas de uma determinada fonte de um tamanho específico é chamado de "cache de script".</span><span class="sxs-lookup"><span data-stu-id="219b4-105">A handle to the tables for a particular font of a particular size is called a "script cache".</span></span> <span data-ttu-id="219b4-106">Muitas funções de Uniscribe chamam um parâmetro de identificador de contexto de dispositivo e um ponteiro para uma estrutura de [**\_ cache de script**](script-cache.md) .</span><span class="sxs-lookup"><span data-stu-id="219b4-106">Many Uniscribe functions call for both a device context handle parameter and a pointer to a [**SCRIPT\_CACHE**](script-cache.md) structure.</span></span> <span data-ttu-id="219b4-107">Essas funções procuram primeiro informações por meio do cache de script, usando o contexto do dispositivo somente quando as tabelas necessárias ainda não estiverem armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="219b4-107">These functions look first for information through the script cache, using the device context only when required tables are not already cached.</span></span> <span data-ttu-id="219b4-108">Ao chamar a função [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace)ou [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) , o aplicativo deve passar um ponteiro para uma estrutura **de \_ cache de script** .</span><span class="sxs-lookup"><span data-stu-id="219b4-108">When calling the [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), or [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) function, the application must pass a pointer to a **SCRIPT\_CACHE** structure.</span></span> <span data-ttu-id="219b4-109">O identificador deve ser inicializado como **nulo** antes da primeira vez que o aplicativo o transmite para uma função de Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="219b4-109">The handle should be initialized to **NULL** before the first time the application passes it to a Uniscribe function.</span></span> <span data-ttu-id="219b4-110">O aplicativo nunca deve passar o mesmo identificador para diferentes fontes ou tamanhos diferentes.</span><span class="sxs-lookup"><span data-stu-id="219b4-110">The application should never pass the same handle for different fonts or different sizes.</span></span>

<span data-ttu-id="219b4-111">Um aplicativo pode liberar um cache de script a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="219b4-111">An application can free a script cache at any time.</span></span> <span data-ttu-id="219b4-112">O Uniscribe mantém contagens de referência em seus caches de fonte e de forma livre, libera dados de fonte somente quando todos os tamanhos da fonte são liberados e libera dados de forma somente quando todas as fontes às quais a forma oferece suporte são liberadas.</span><span class="sxs-lookup"><span data-stu-id="219b4-112">Uniscribe maintains reference counts in its font and shaper caches, frees font data only when all sizes of the font are freed, and frees shaper data only when all fonts that the shaper supports are freed.</span></span> <span data-ttu-id="219b4-113">Quando o aplicativo é concluído com um estilo, ele deve chamar a função [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) para liberar o cache de script para o estilo.</span><span class="sxs-lookup"><span data-stu-id="219b4-113">When the application is done with a style, it should call the [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) function to free the script cache for the style.</span></span>

<span data-ttu-id="219b4-114">Para [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) e [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), é válido para o aplicativo passar um contexto de dispositivo nulo.</span><span class="sxs-lookup"><span data-stu-id="219b4-114">For [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) and [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), it is valid for the application to pass a null device context.</span></span> <span data-ttu-id="219b4-115">Geralmente, a chamada terá sucesso, pois as tabelas necessárias já estão armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="219b4-115">Most often the call will succeed, as required tables are already cached.</span></span> <span data-ttu-id="219b4-116">Se a formatação ou o posicionamento exigir acesso a um contexto de dispositivo, **ScriptShape** ou **ScriptPlace** retornará imediatamente com o \_ código de erro E pendente.</span><span class="sxs-lookup"><span data-stu-id="219b4-116">If the shaping or placement requires access to a device context, **ScriptShape** or **ScriptPlace** returns immediately with the E\_PENDING error code.</span></span> <span data-ttu-id="219b4-117">Em seguida, o aplicativo deve selecionar a fonte no contexto do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="219b4-117">Then the application must select the font in the device context.</span></span> <span data-ttu-id="219b4-118">Para a maioria dos aplicativos, isso ajuda o desempenho, evitando a preparação repetida de um identificador de contexto de dispositivo com chamadas para [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span><span class="sxs-lookup"><span data-stu-id="219b4-118">For most applications, this helps performance by avoiding repeated preparation of a device context handle with calls to [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span></span>

## <a name="related-topics"></a><span data-ttu-id="219b4-119">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="219b4-119">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="219b4-120">Usando o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="219b4-120">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
