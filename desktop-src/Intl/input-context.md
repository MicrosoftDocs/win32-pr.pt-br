---
description: Um &\# 0034; contexto de entrada&\# 0034; é uma estrutura interna mantida pelo IMM.
ms.assetid: 2b639e30-5368-45bb-943d-db1ab6b62582
title: Contexto de entrada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16f1f83a397373e17a7d637b61a3232a3d72acde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828270"
---
# <a name="input-context"></a><span data-ttu-id="8b00f-103">Contexto de entrada</span><span class="sxs-lookup"><span data-stu-id="8b00f-103">Input Context</span></span>

<span data-ttu-id="8b00f-104">Um "contexto de entrada" é uma estrutura interna mantida pelo IMM.</span><span class="sxs-lookup"><span data-stu-id="8b00f-104">An "input context" is an internal structure maintained by the IMM.</span></span> <span data-ttu-id="8b00f-105">Ele contém informações sobre o status do IME e é usado pelas janelas do IME.</span><span class="sxs-lookup"><span data-stu-id="8b00f-105">It contains information about the status of the IME and is used by IME windows.</span></span> <span data-ttu-id="8b00f-106">Por padrão, o sistema operacional cria e atribui um contexto de entrada para cada thread.</span><span class="sxs-lookup"><span data-stu-id="8b00f-106">By default, the operating system creates and assigns an input context to each thread.</span></span> <span data-ttu-id="8b00f-107">Dentro do thread, esse contexto de entrada padrão é um recurso compartilhado e é associado a cada janela recém-criada.</span><span class="sxs-lookup"><span data-stu-id="8b00f-107">Within the thread, this default input context is a shared resource and is associated with each newly created window.</span></span>

<span data-ttu-id="8b00f-108">Para recuperar ou definir informações no IME, um aplicativo com reconhecimento de IME deve primeiro recuperar um identificador para o contexto de entrada associado a uma janela especificada.</span><span class="sxs-lookup"><span data-stu-id="8b00f-108">To retrieve or set information in the IME, an IME-aware application must first retrieve a handle to the input context associated with a specified window.</span></span> <span data-ttu-id="8b00f-109">O aplicativo recupera o identificador usando a função [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-109">The application retrieves the handle by using the [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) function.</span></span> <span data-ttu-id="8b00f-110">Ele pode usar o identificador recuperado em chamadas subsequentes para as funções do IMM para recuperar e definir valores do IME, como o estilo da janela de composição, o estilo de composição e a posição da janela de status.</span><span class="sxs-lookup"><span data-stu-id="8b00f-110">It can use the retrieved handle in subsequent calls to the IMM functions to retrieve and set IME values, such as the composition window style, the composition style, and the status window position.</span></span> <span data-ttu-id="8b00f-111">Depois que o aplicativo terminar de usar o contexto, ele deverá liberar o contexto usando a função [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-111">Once the application has finished using the context, it must release the context using the [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) function.</span></span>

<span data-ttu-id="8b00f-112">Como o contexto de entrada padrão é um recurso compartilhado, todas as alterações que o aplicativo faz para ele se aplicam a todas as janelas no thread.</span><span class="sxs-lookup"><span data-stu-id="8b00f-112">Because the default input context is a shared resource, any changes the application makes to it apply to all windows in the thread.</span></span> <span data-ttu-id="8b00f-113">No entanto, o aplicativo pode substituir esse comportamento padrão criando seu próprio contexto de entrada e associando-o a uma ou mais janelas do thread.</span><span class="sxs-lookup"><span data-stu-id="8b00f-113">However, the application can override this default behavior by creating its own input context and associating it with one or more windows of the thread.</span></span> <span data-ttu-id="8b00f-114">As alterações feitas em um contexto de entrada específico do aplicativo aplicam-se somente ao Windows associado ao contexto.</span><span class="sxs-lookup"><span data-stu-id="8b00f-114">The changes made to an application-specific input context apply only to the windows associated with the context.</span></span>

<span data-ttu-id="8b00f-115">Seu aplicativo pode criar um contexto de entrada usando a função [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-115">Your application can create an input context by using the [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) function.</span></span> <span data-ttu-id="8b00f-116">Para atribuir o contexto a uma janela, o aplicativo chama a função [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-116">To assign the context to a window, the application calls the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="8b00f-117">Essa função retorna um identificador para o contexto de entrada associado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8b00f-117">This function returns a handle to the previously associated input context.</span></span> <span data-ttu-id="8b00f-118">Se o aplicativo ainda não tiver associado um contexto de entrada com a janela, o identificador retornado será para o contexto de entrada padrão.</span><span class="sxs-lookup"><span data-stu-id="8b00f-118">If the application has not already associated an input context with the window, the returned handle is for the default input context.</span></span> <span data-ttu-id="8b00f-119">Normalmente, o aplicativo salva esse identificador e depois o reassocia com a janela quando o contexto de entrada personalizado não é mais necessário.</span><span class="sxs-lookup"><span data-stu-id="8b00f-119">Typically, the application saves this handle and later reassociates it with the window when the customized input context is no longer needed.</span></span>

<span data-ttu-id="8b00f-120">Depois que um contexto de entrada é associado a uma janela, o sistema operacional seleciona automaticamente esse contexto quando a janela é ativada e recebe o foco de entrada.</span><span class="sxs-lookup"><span data-stu-id="8b00f-120">Once an input context is associated with a window, the operating system automatically selects that context when the window is activated and receives the input focus.</span></span> <span data-ttu-id="8b00f-121">O estilo e outras informações no contexto de entrada afetam a entrada de teclado subsequente para essa janela, determinando como o IME Opera.</span><span class="sxs-lookup"><span data-stu-id="8b00f-121">The style and other information in the input context affects subsequent keyboard input for that window, determining how the IME operates.</span></span>

<span data-ttu-id="8b00f-122">Seu aplicativo deve destruir qualquer contexto de entrada personalizado antes de ser encerrado.</span><span class="sxs-lookup"><span data-stu-id="8b00f-122">Your application must destroy any customized input context before it terminates.</span></span> <span data-ttu-id="8b00f-123">Primeiro, o aplicativo remove o contexto de entrada de qualquer associação feita com o Windows no thread usando a função [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-123">First, the application removes the input context from any association it has made with windows in the thread by using the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="8b00f-124">Em seguida, ele chama a função [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) .</span><span class="sxs-lookup"><span data-stu-id="8b00f-124">Then, it calls the [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8b00f-125">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="8b00f-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8b00f-126">Sobre o Gerenciador de métodos de entrada</span><span class="sxs-lookup"><span data-stu-id="8b00f-126">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 



