---
description: Para fornecer uma justificativa de texto, um aplicativo pode usar um dos dois métodos.
ms.assetid: 1190baed-5959-4f7a-8946-ac3b3da85821
title: Processando scripts complexos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87bea5b75e87afc4177b03c03f4263ba2592a0e0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010451"
---
# <a name="processing-complex-scripts"></a><span data-ttu-id="5942f-103">Processando scripts complexos</span><span class="sxs-lookup"><span data-stu-id="5942f-103">Processing Complex Scripts</span></span>

<span data-ttu-id="5942f-104">Para fornecer uma justificativa de texto, um aplicativo pode usar um dos dois métodos.</span><span class="sxs-lookup"><span data-stu-id="5942f-104">To provide text justification, an application can use one of two methods.</span></span> <span data-ttu-id="5942f-105">Para uma implementação simples de justificativa multilíngue, o aplicativo deve chamar [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span><span class="sxs-lookup"><span data-stu-id="5942f-105">For a simple implementation of multilingual justification, the application should call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span></span> <span data-ttu-id="5942f-106">Ele gera a matriz do Delta DX considerando kashida, depois espaçamento entre palavras e espaçamento entre caracteres.</span><span class="sxs-lookup"><span data-stu-id="5942f-106">It generates the delta dx array by considering kashida, then interword spacing, and then intercharacter spacing.</span></span> <span data-ttu-id="5942f-107">Para uma justificativa mais sofisticada, o aplicativo pode gerar uma matriz de DX Delta atualizada usando seu próprio conhecimento de linguagem e as informações recuperadas pelo [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) na matriz [**\_ VISATTR de script**](/windows/win32/api/usp10/ns-usp10-script_visattr) .</span><span class="sxs-lookup"><span data-stu-id="5942f-107">For more sophisticated justification, the application can generate an updated delta dx array using its own language knowledge and the information retrieved by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) in the [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr) array.</span></span>

<span data-ttu-id="5942f-108">O espaço de justificativa ou kashida deve ser inserido onde identificado pelo membro **uJustification** do [**script \_ VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span><span class="sxs-lookup"><span data-stu-id="5942f-108">Justification space or kashida should be inserted where identified by the **uJustification** member of [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span></span> <span data-ttu-id="5942f-109">Ao executar a justificação entre caracteres, o aplicativo deve inserir espaço extra somente após os glifos marcados com o \_ caractere de justificação do script \_ .</span><span class="sxs-lookup"><span data-stu-id="5942f-109">When performing inter-character justification, the application should insert extra space only after glyphs marked with SCRIPT\_JUSTIFY\_CHARACTER.</span></span>

<span data-ttu-id="5942f-110">O aplicativo faz o posicionamento do cursor e o teste de clique usando [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) e [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span><span class="sxs-lookup"><span data-stu-id="5942f-110">The application does caret placement and hit testing by using [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span></span> <span data-ttu-id="5942f-111">Para obter mais informações, consulte [Gerenciamento de posicionamento de cursor e teste de clique](managing-caret-placement-and-hit-testing.md).</span><span class="sxs-lookup"><span data-stu-id="5942f-111">For more information, see [Managing Caret Placement and Hit Testing](managing-caret-placement-and-hit-testing.md).</span></span>

<span data-ttu-id="5942f-112">Para obter larguras de maneira independente de fonte, o aplicativo chama [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span><span class="sxs-lookup"><span data-stu-id="5942f-112">To get widths in a font-independent manner, the application calls [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span></span> <span data-ttu-id="5942f-113">Ao passar as larguras lógicas para [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), um bloco de texto pode ser exibido novamente nos mesmos limites com perda aceitável de qualidade, mesmo quando a fonte original não está disponível.</span><span class="sxs-lookup"><span data-stu-id="5942f-113">By passing the logical widths to [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), a block of text can be redisplayed in the same boundaries with acceptable loss of quality even when the original font is not available.</span></span> <span data-ttu-id="5942f-114">Ele gera uma matriz de larguras de glifo ([larguras avançadas](uniscribe-glossary.md)) adequada para passar para [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span><span class="sxs-lookup"><span data-stu-id="5942f-114">It generates an array of glyph widths ([advance widths](uniscribe-glossary.md)) suitable for passing to [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span></span> <span data-ttu-id="5942f-115">A gravação e a reaplicação de informações de largura avançadas de maneira independente de fonte podem ser úteis em situações como a Metacriação em um formato definido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="5942f-115">Such recording and reapplying of advance width information in a font-independent manner can be useful in situations such as metafiling in an application defined format.</span></span>

> [!Note]  
> <span data-ttu-id="5942f-116">Os metaarquivos não oferecem suporte a índices de glifos.</span><span class="sxs-lookup"><span data-stu-id="5942f-116">Metafiles do not support glyph indexes.</span></span> <span data-ttu-id="5942f-117">Para gravar em um metarquivo avançado, o aplicativo deve usar [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) e gravar os caracteres lógicos diretamente.</span><span class="sxs-lookup"><span data-stu-id="5942f-117">To write to an enhanced metafile, the application should use [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and write the logical characters directly.</span></span> <span data-ttu-id="5942f-118">Usando esse mecanismo, a geração de glifos e o posicionamento não ocorrem até que o texto seja reproduzido.</span><span class="sxs-lookup"><span data-stu-id="5942f-118">Using this mechanism, the glyph generation and placement does not occur until the text is played back.</span></span>

 

<span data-ttu-id="5942f-119">Para recuperar os glifos específicos que são usados para o padrão, espaços em branco, kashida e assim por diante, para a fonte atual, o aplicativo deve chamar [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span><span class="sxs-lookup"><span data-stu-id="5942f-119">To retrieve the specific glyphs that are used for the default, blanks, kashida, and so forth, for the current font, the application should call [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="5942f-120">Para determinar quais caracteres em uma execução têm suporte na fonte selecionada, o aplicativo chama [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span><span class="sxs-lookup"><span data-stu-id="5942f-120">To determine which characters in a run are supported by the selected font, the application calls [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span></span> <span data-ttu-id="5942f-121">Os caracteres que não estão disponíveis têm o glifo padrão no buffer de glifo.</span><span class="sxs-lookup"><span data-stu-id="5942f-121">Characters that are not available have the default glyph in the glyph buffer.</span></span> <span data-ttu-id="5942f-122">Observe que esse método falhará se uma fonte renderizar um caractere usando uma combinação de glifos em vez de um único glifo.</span><span class="sxs-lookup"><span data-stu-id="5942f-122">Note that this method fails if a font renders a character using a combination of glyphs instead of a single glyph.</span></span> <span data-ttu-id="5942f-123">Por exemplo, 00C9; Letra latina maiúscula e com acento agudo podem ser renderizadas usando um glifo e um glifo maiúsculo.</span><span class="sxs-lookup"><span data-stu-id="5942f-123">For example, 00C9; LATIN CAPITAL LETTER E WITH ACUTE can be rendered using a capital E glyph and an acute glyph.</span></span> <span data-ttu-id="5942f-124">Para determinar o suporte de fonte para uma cadeia de caracteres que contém esses tipos de pontos de código, o aplicativo pode chamar [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span><span class="sxs-lookup"><span data-stu-id="5942f-124">To determine the font support for a string that contains these kinds of code points, the application can call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="5942f-125">Para obter mais informações, consulte [usando mecanismos de shaping](using-shaping-engines.md).</span><span class="sxs-lookup"><span data-stu-id="5942f-125">For more information, see [Using Shaping Engines](using-shaping-engines.md).</span></span>

<span data-ttu-id="5942f-126">A função [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) retorna a altura da fonte do cache de fontes.</span><span class="sxs-lookup"><span data-stu-id="5942f-126">The [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) function returns the height of the font from the font cache.</span></span> <span data-ttu-id="5942f-127">O [**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) fornece informações sobre o processamento especial necessário para todos os scripts, indexados por script.</span><span class="sxs-lookup"><span data-stu-id="5942f-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) provides information on the special processing required for all the scripts, indexed by script.</span></span> <span data-ttu-id="5942f-128">Por exemplo, ele inclui o idioma principal associado ao script, dados indicando se o script é numérico e dados indicando se o script é complexo.</span><span class="sxs-lookup"><span data-stu-id="5942f-128">For example, it includes the primary language associated with the script, data indicating if the script is numeric, and data indicating if the script is a complex script.</span></span>

<span data-ttu-id="5942f-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) retorna a [largura ABC](uniscribe-glossary.md) de um determinado glifo, que pode ser útil para desenhar gráficos de glifos.</span><span class="sxs-lookup"><span data-stu-id="5942f-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) returns the [ABC width](uniscribe-glossary.md) of a given glyph, which might be useful for drawing glyph charts.</span></span> <span data-ttu-id="5942f-130">No entanto, ele não deve ser usado para formatação de texto de script complexo normal.</span><span class="sxs-lookup"><span data-stu-id="5942f-130">However, it should not be used for normal complex script text formatting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5942f-131">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="5942f-131">Related Topics</span></span>

[<span data-ttu-id="5942f-132">Usando o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="5942f-132">Using Uniscribe</span></span>](using-uniscribe.md)


 

 
