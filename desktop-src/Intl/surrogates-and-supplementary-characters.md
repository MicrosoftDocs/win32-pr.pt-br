---
description: Caracteres substitutos e suplementares
ms.assetid: 0dea39e2-a2b4-47fc-b44a-56af8ba1e346
title: Caracteres substitutos e suplementares
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8d6b738955c8b8de4f6cb0ae43c78f86752a928
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105751462"
---
# <a name="surrogates-and-supplementary-characters"></a><span data-ttu-id="ef925-103">Caracteres substitutos e suplementares</span><span class="sxs-lookup"><span data-stu-id="ef925-103">Surrogates and Supplementary Characters</span></span>

<span data-ttu-id="ef925-104">Os aplicativos do Windows normalmente usam UTF-16 para representar dados de caractere [Unicode](unicode.md) .</span><span class="sxs-lookup"><span data-stu-id="ef925-104">Windows applications normally use UTF-16 to represent [Unicode](unicode.md) character data.</span></span> <span data-ttu-id="ef925-105">O uso de 16 bits permite a representação direta de 65.536 caracteres exclusivos, mas esse BMP (plano multilíngüe básico) não é quase suficiente para abranger todos os símbolos usados em idiomas humanos.</span><span class="sxs-lookup"><span data-stu-id="ef925-105">The use of 16 bits allows direct representation of 65,536 unique characters, but this Basic Multilingual Plane (BMP) is not nearly enough to cover all the symbols used in human languages.</span></span> <span data-ttu-id="ef925-106">A versão 4,1 do Unicode inclui mais de 97.000 caracteres, com mais de 70.000 caracteres somente para chinês.</span><span class="sxs-lookup"><span data-stu-id="ef925-106">Unicode version 4.1 includes over 97,000 characters, with over 70,000 characters for Chinese alone.</span></span>

<span data-ttu-id="ef925-107">O padrão Unicode estabeleceu 16 "planos" adicionais de caracteres, cada um com o mesmo tamanho do BMP.</span><span class="sxs-lookup"><span data-stu-id="ef925-107">The Unicode standard has established 16 additional "planes" of characters, each the same size as the BMP.</span></span> <span data-ttu-id="ef925-108">Naturalmente, a maioria dos pontos de código além do BMP ainda não tem caracteres atribuídos a eles, mas a definição dos planos fornece ao Unicode o potencial para definir 1.114.112 caracteres (ou seja, 2 ¹ ⁶ \* 17 caracteres) dentro do intervalo de pontos de código U + 0000 a u + 10FFFF.</span><span class="sxs-lookup"><span data-stu-id="ef925-108">Naturally, most code points beyond the BMP do not yet have characters assigned to them, but definition of the planes gives Unicode the potential to define 1,114,112 characters (that is, 2¹⁶ \* 17 characters) within the code point range U+0000 to U+10FFFF.</span></span> <span data-ttu-id="ef925-109">Para que o UTF-16 represente esse conjunto maior de caracteres, o padrão Unicode define "caracteres suplementares".</span><span class="sxs-lookup"><span data-stu-id="ef925-109">For UTF-16 to represent this larger set of characters, the Unicode Standard defines "supplementary characters".</span></span>

## <a name="about-supplementary-characters"></a><span data-ttu-id="ef925-110">Sobre caracteres suplementares</span><span class="sxs-lookup"><span data-stu-id="ef925-110">About Supplementary Characters</span></span>

<span data-ttu-id="ef925-111">Um caractere suplementar é um caractere localizado além do BMP, e um "substituto" é um valor de código UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ef925-111">A supplementary character is a character located beyond the BMP, and a "surrogate" is a UTF-16 code value.</span></span> <span data-ttu-id="ef925-112">Para UTF-16, um "par substituto" é necessário para representar um único caractere suplementar.</span><span class="sxs-lookup"><span data-stu-id="ef925-112">For UTF-16, a "surrogate pair" is required to represent a single supplementary character.</span></span> <span data-ttu-id="ef925-113">O primeiro substituto (alto) é um valor de código de 16 bits no intervalo U + D800 a U + DBFF.</span><span class="sxs-lookup"><span data-stu-id="ef925-113">The first (high) surrogate is a 16-bit code value in the range U+D800 to U+DBFF.</span></span> <span data-ttu-id="ef925-114">O segundo substituto (baixo) é um valor de código de 16 bits no intervalo U + DC00 a U + DFFF.</span><span class="sxs-lookup"><span data-stu-id="ef925-114">The second (low) surrogate is a 16-bit code value in the range U+DC00 to U+DFFF.</span></span> <span data-ttu-id="ef925-115">Usando o mecanismo substituto, o UTF-16 pode dar suporte a todos os 1.114.112 caracteres Unicode potenciais.</span><span class="sxs-lookup"><span data-stu-id="ef925-115">Using the surrogate mechanism, UTF-16 can support all 1,114,112 potential Unicode characters.</span></span> <span data-ttu-id="ef925-116">Para obter mais detalhes sobre caracteres suplementares, substitutos e pares substitutos, consulte [o padrão Unicode](https://www.unicode.org/standard/standard.html).</span><span class="sxs-lookup"><span data-stu-id="ef925-116">For more details about supplementary characters, surrogates, and surrogate pairs, refer to [The Unicode Standard](https://www.unicode.org/standard/standard.html).</span></span>

> [!Note]  
> <span data-ttu-id="ef925-117">O Windows 2000 apresenta suporte para entrada básica, saída e classificação simples de caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-117">Windows 2000 introduces support for basic input, output, and simple sorting of supplementary characters.</span></span> <span data-ttu-id="ef925-118">No entanto, nem todos os componentes do sistema são compatíveis com caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-118">However, not all system components are compatible with supplementary characters.</span></span>

 

<span data-ttu-id="ef925-119">O sistema operacional dá suporte a caracteres suplementares das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="ef925-119">The operating system supports supplementary characters in the following ways:</span></span>

-   <span data-ttu-id="ef925-120">O formato 12 da tabela de mapa de fontes OpenType dá suporte diretamente ao código de caractere de 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="ef925-120">Format 12 of the OpenType font cmap table directly supports the 4-byte character code.</span></span> <span data-ttu-id="ef925-121">Para obter mais informações, consulte a [especificação de fonte OpenType](/typography/opentype/spec/).</span><span class="sxs-lookup"><span data-stu-id="ef925-121">For more information, see the [OpenType font specification](/typography/opentype/spec/).</span></span>
-   <span data-ttu-id="ef925-122">O Windows oferece suporte a [IMEs (editores de método de entrada)](../dxtecharts/installing-and-using-input-method-editors.md)habilitados para substituto.</span><span class="sxs-lookup"><span data-stu-id="ef925-122">Windows supports surrogate-enabled [input method editors (IMEs)](../dxtecharts/installing-and-using-input-method-editors.md).</span></span>
-   <span data-ttu-id="ef925-123">A API [GDI do Windows](../gdi/windows-gdi.md) dá suporte ao formato 12 tabelas de CMap em fontes para que os substitutos possam ser exibidos corretamente.</span><span class="sxs-lookup"><span data-stu-id="ef925-123">The [Windows GDI](../gdi/windows-gdi.md) API supports format 12 cmap tables in fonts so that surrogates can be displayed correctly.</span></span>
-   <span data-ttu-id="ef925-124">A API do [Uniscribe](uniscribe.md) dá suporte a caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-124">The [Uniscribe](uniscribe.md) API supports supplementary characters.</span></span>
-   <span data-ttu-id="ef925-125">Os [controles do Windows](../controls/window-controls.md), incluindo [edição](../controls/edit-controls.md) e [edição avançada](../controls/rich-edit-controls.md), dão suporte a caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-125">[Windows controls](../controls/window-controls.md), including [Edit](../controls/edit-controls.md) and [Rich Edit](../controls/rich-edit-controls.md), support supplementary characters.</span></span>
-   <span data-ttu-id="ef925-126">O mecanismo HTML dá suporte a páginas HTML que incluem caracteres suplementares para exibição, edição (através do Outlook Express) e envio de formulários.</span><span class="sxs-lookup"><span data-stu-id="ef925-126">The HTML engine supports HTML pages that include supplementary characters for display, editing (through Outlook Express), and forms submission.</span></span>
-   <span data-ttu-id="ef925-127">A tabela de classificação do sistema operacional dá suporte a caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-127">The operating system sorting table supports supplementary characters.</span></span>

## <a name="general-guidelines-for-software-development-using-supplementary-characters"></a><span data-ttu-id="ef925-128">Diretrizes gerais para o desenvolvimento de software usando caracteres suplementares</span><span class="sxs-lookup"><span data-stu-id="ef925-128">General Guidelines for Software Development Using Supplementary Characters</span></span>

<span data-ttu-id="ef925-129">O UTF-16 lida com caracteres suplementares como pares substitutos.</span><span class="sxs-lookup"><span data-stu-id="ef925-129">UTF-16 handles supplementary characters as surrogate pairs.</span></span> <span data-ttu-id="ef925-130">O sistema operacional processa um par substituto da mesma forma que processa marcas de não [espaçamento](using-nonspacing-characters-and-diacritics.md).</span><span class="sxs-lookup"><span data-stu-id="ef925-130">The operating system processes a surrogate pair similarly to the way it processes [nonspacing marks](using-nonspacing-characters-and-diacritics.md).</span></span> <span data-ttu-id="ef925-131">No momento da exibição, o par alternativo é exibido como um glifo por meio do Uniscribe, conforme prescrito pelo padrão Unicode.</span><span class="sxs-lookup"><span data-stu-id="ef925-131">At display time, the surrogate pair displays as one glyph by means of Uniscribe, as prescribed by the Unicode Standard.</span></span>

<span data-ttu-id="ef925-132">O Windows Vista apresenta três novas macros para ajudar a identificar substitutos e pares substitutos em cadeias de caracteres UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ef925-132">Windows Vista introduces three new macros to help identify surrogates and surrogate pairs in UTF-16 strings.</span></span> <span data-ttu-id="ef925-133">Esses são [**\_ \_ substitutos altos**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate), são de [**\_ baixo \_ substituto**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate)e [**são \_ \_ pares substitutos**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span><span class="sxs-lookup"><span data-stu-id="ef925-133">These are [**IS\_HIGH\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate), [**IS\_LOW\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate), and [**IS\_SURROGATE\_PAIR**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span></span>

<span data-ttu-id="ef925-134">Os aplicativos dão suporte automaticamente a caracteres suplementares se eles dão suporte a Unicode e usam controles do sistema e funções de API padrão, como [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) e [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span><span class="sxs-lookup"><span data-stu-id="ef925-134">Applications automatically support supplementary characters if they support Unicode and use system controls and standard API functions, such as [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span></span> <span data-ttu-id="ef925-135">Portanto, se seu aplicativo usar controles de sistema padrão ou usar chamadas gerais de tipo [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)para exibir, caracteres suplementares devem funcionar sem qualquer codificação especial.</span><span class="sxs-lookup"><span data-stu-id="ef925-135">Thus, if your application uses standard system controls or uses general [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)-type calls to display, supplementary characters should work without any special coding.</span></span>

<span data-ttu-id="ef925-136">Os aplicativos que implementam seu próprio suporte de edição ao trabalhar com posições de glifo de maneira personalizada podem usar o Uniscribe para todo o processamento de texto.</span><span class="sxs-lookup"><span data-stu-id="ef925-136">Applications that implement their own editing support by working out glyph positions in a customized way can use Uniscribe for all text processing.</span></span> <span data-ttu-id="ef925-137">O Uniscribe tem funções separadas para lidar com processamento de script complexo, como exibição de texto, teste de clique e movimento de cursor.</span><span class="sxs-lookup"><span data-stu-id="ef925-137">Uniscribe has separate functions to deal with complex script processing, such as text display, hit testing, and cursor movement.</span></span> <span data-ttu-id="ef925-138">Um aplicativo deve chamar as funções de Uniscribe especificamente para obter esses recursos avançados.</span><span class="sxs-lookup"><span data-stu-id="ef925-138">An application must call the Uniscribe functions specifically to get these advanced features.</span></span> <span data-ttu-id="ef925-139">Observe que os aplicativos que usam as funções de Uniscribe são totalmente multilíngues, mas isso impõe uma penalidade de desempenho.</span><span class="sxs-lookup"><span data-stu-id="ef925-139">Note that applications using the Uniscribe functions are fully multilingual, but this imposes a performance penalty.</span></span> <span data-ttu-id="ef925-140">Portanto, alguns aplicativos devem fazer seu próprio processamento de caracteres suplementares.</span><span class="sxs-lookup"><span data-stu-id="ef925-140">Thus some applications should do their own processing of supplementary characters.</span></span>

<span data-ttu-id="ef925-141">Como o mecanismo substituto para representar caracteres suplementares é bem definido, seu aplicativo pode incluir código para manipular o processamento de texto substituto UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ef925-141">Because the surrogate mechanism to represent supplementary characters is well-defined, your application can include code to handle UTF-16 surrogate text processing.</span></span> <span data-ttu-id="ef925-142">Quando o aplicativo encontra um valor UTF-16 separado do intervalo substituto inferior reservado (um substituto baixo) ou o intervalo substituto Superior reservado (um substituto alto), o valor deve ser uma metade de um par alternativo.</span><span class="sxs-lookup"><span data-stu-id="ef925-142">When the application encounters a separated UTF-16 value from either the lower reserved surrogate range (a low surrogate) or the upper reserved surrogate range (a high surrogate), the value must be one half of a surrogate pair.</span></span> <span data-ttu-id="ef925-143">Assim, o aplicativo pode detectar um par alternativo fazendo uma verificação de intervalo simples.</span><span class="sxs-lookup"><span data-stu-id="ef925-143">Thus, the application can detect a surrogate pair by doing simple range checking.</span></span> <span data-ttu-id="ef925-144">Se encontrar um valor UTF-16 no intervalo inferior ou superior, ele deverá rastrear a largura de 1 16 bits para trás ou para frente para obter o restante do caractere.</span><span class="sxs-lookup"><span data-stu-id="ef925-144">If it encounters a UTF-16 value in the lower or upper range, it must track backward or forward one 16-bit width to get the rest of the character.</span></span> <span data-ttu-id="ef925-145">Ao escrever seu aplicativo, tenha em mente que [**CharNext**](/windows/win32/api/winuser/nf-winuser-charnexta) e [**CharPrev**](/windows/win32/api/winuser/nf-winuser-charpreva) se movem por pontos de código de 16 bits, não por pares substitutos.</span><span class="sxs-lookup"><span data-stu-id="ef925-145">When writing your application, keep in mind that [**CharNext**](/windows/win32/api/winuser/nf-winuser-charnexta) and [**CharPrev**](/windows/win32/api/winuser/nf-winuser-charpreva) move by 16-bit code points, not by surrogate pairs.</span></span>

> [!Note]  
> <span data-ttu-id="ef925-146">Pontos de código substituto autônomos têm um substituto alto sem um substituto baixo adjacente ou vice-versa.</span><span class="sxs-lookup"><span data-stu-id="ef925-146">Standalone surrogate code points have either a high surrogate without an adjacent low surrogate, or vice versa.</span></span> <span data-ttu-id="ef925-147">Esses pontos de código são inválidos e não têm suporte.</span><span class="sxs-lookup"><span data-stu-id="ef925-147">These code points are invalid and are not supported.</span></span> <span data-ttu-id="ef925-148">Seu comportamento é indefinido.</span><span class="sxs-lookup"><span data-stu-id="ef925-148">Their behavior is undefined.</span></span>

 

<span data-ttu-id="ef925-149">Se você estiver desenvolvendo um provedor de fonte ou IME, observe que os sistemas operacionais anteriores ao Windows XP desabilitam o suporte a caracteres suplementares por padrão.</span><span class="sxs-lookup"><span data-stu-id="ef925-149">If you are developing a font or IME provider, note that pre-Windows XP operating systems disable supplementary character support by default.</span></span> <span data-ttu-id="ef925-150">O Windows XP e posteriores habilitam caracteres suplementares por padrão.</span><span class="sxs-lookup"><span data-stu-id="ef925-150">Windows XP and later enable supplementary characters by default.</span></span> <span data-ttu-id="ef925-151">Se você fornecer uma fonte e um pacote do IME que exija caracteres suplementares, seu aplicativo deverá definir os seguintes valores de registro:</span><span class="sxs-lookup"><span data-stu-id="ef925-151">If you provide a font and IME package that requires supplementary characters, your application must set the following registry values:</span></span>


```C++
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\LanguagePack]
SURROGATE=(REG_DWORD)0x00000002

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\International\Scripts\42]
IEFixedFontName=[Surrogate Font Face Name]
IEPropFontName=[Surrogate Font Face Name]
```



## <a name="related-topics"></a><span data-ttu-id="ef925-152">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ef925-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ef925-153">Conjuntos de caracteres</span><span class="sxs-lookup"><span data-stu-id="ef925-153">Character Sets</span></span>](character-sets.md)
</dt> </dl>

 

 
