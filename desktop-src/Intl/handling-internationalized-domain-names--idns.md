---
description: Este tópico descreve como você pode trabalhar com IDNs (nomes de domínio internacionalizados) em seus aplicativos.
ms.assetid: e0ca356e-f8c1-4845-ae1e-ce2ae8987515
title: Tratando IDNs (nomes de domínio internacionalizados)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 95e853f0ea3f62fc3e5ee848431417cc031eaa5a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104170435"
---
# <a name="handling-internationalized-domain-names-idns"></a><span data-ttu-id="14c3a-103">Tratando IDNs (nomes de domínio internacionalizados)</span><span class="sxs-lookup"><span data-stu-id="14c3a-103">Handling Internationalized Domain Names (IDNs)</span></span>

<span data-ttu-id="14c3a-104">Este tópico descreve como você pode trabalhar com IDNs (nomes de domínio internacionalizados) em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="14c3a-104">This topic describes how you can work with internationalized domain names (IDNs) in your applications.</span></span> <span data-ttu-id="14c3a-105">Os IDNs são especificados pelo grupo de trabalho [de rede RFC 3490: Internacionalizando nomes de domínio em aplicativos (IDNA)](http://www.faqs.org/rfcs/rfc3490.html).</span><span class="sxs-lookup"><span data-stu-id="14c3a-105">IDNs are specified by Network Working Group [RFC 3490: Internationalizing Domain Names in Applications (IDNA)](http://www.faqs.org/rfcs/rfc3490.html).</span></span> <span data-ttu-id="14c3a-106">Antes desse padrão de rascunho, os IDNs eram limitados a caracteres latinos sem sinais diacríticos.</span><span class="sxs-lookup"><span data-stu-id="14c3a-106">Prior to this draft standard, IDNs were limited to Latin characters without diacritics.</span></span> <span data-ttu-id="14c3a-107">O IDNA permite que IDNs inclua caracteres latinos com sinais diacríticos, juntamente com caracteres de scripts não latinos, como cirílico, árabe e chinês.</span><span class="sxs-lookup"><span data-stu-id="14c3a-107">IDNA allows IDNs to include Latin characters with diacritics, along with characters from non-Latin scripts, such as Cyrillic, Arabic, and Chinese.</span></span> <span data-ttu-id="14c3a-108">O padrão também estabelece regras para mapear IDNs para nomes de domínio somente ASCII.</span><span class="sxs-lookup"><span data-stu-id="14c3a-108">The standard also establishes rules for mapping IDNs to ASCII-only domain names.</span></span> <span data-ttu-id="14c3a-109">Assim, problemas de IDNA podem ser tratados no lado do cliente, sem a necessidade de qualquer alteração de DNS (servidor de nome de domínio).</span><span class="sxs-lookup"><span data-stu-id="14c3a-109">Thus, IDNA issues can be handled on the client side, without requiring any domain name server (DNS) changes.</span></span>

> [!Caution]  
> <span data-ttu-id="14c3a-110">A RFC 3490 apresenta vários problemas de segurança relacionados ao uso de IDNs.</span><span class="sxs-lookup"><span data-stu-id="14c3a-110">RFC 3490 introduces a number of security issues related to the use of IDNs.</span></span> <span data-ttu-id="14c3a-111">Para obter mais informações, consulte a seção relacionada de [considerações de segurança: recursos internacionais](security-considerations--international-features.md).</span><span class="sxs-lookup"><span data-stu-id="14c3a-111">For more information see the related section of [Security Considerations: International Features](security-considerations--international-features.md).</span></span>

 

> [!Note]  
> <span data-ttu-id="14c3a-112">O IDNA atualmente é baseado em Unicode 3,2.</span><span class="sxs-lookup"><span data-stu-id="14c3a-112">IDNA is currently based on Unicode 3.2.</span></span>

 

## <a name="nls-api-functions-for-handling-idns"></a><span data-ttu-id="14c3a-113">Funções da API NLS para manipulação de IDNs</span><span class="sxs-lookup"><span data-stu-id="14c3a-113">NLS API Functions for Handling IDNs</span></span>

<span data-ttu-id="14c3a-114">O NLS inclui as seguintes funções de conversão que seu aplicativo pode usar para converter um IDN em representações diferentes.</span><span class="sxs-lookup"><span data-stu-id="14c3a-114">NLS includes the following conversion functions that your application can use to convert an IDN to different representations.</span></span> <span data-ttu-id="14c3a-115">Para obter um exemplo do uso dessas funções, consulte [exemplo de conversão NLS: nome de domínio internacionalizado (IDN)](nls--internationalized-domain-name--idn--conversion-sample.md).</span><span class="sxs-lookup"><span data-stu-id="14c3a-115">For an example of the use of these functions, see [NLS: Internationalized Domain Name (IDN) Conversion Sample](nls--internationalized-domain-name--idn--conversion-sample.md).</span></span>

-   <span data-ttu-id="14c3a-116">[**IdnToAscii**](/windows/desktop/api/Winnls/nf-winnls-idntoascii).</span><span class="sxs-lookup"><span data-stu-id="14c3a-116">[**IdnToAscii**](/windows/desktop/api/Winnls/nf-winnls-idntoascii).</span></span> <span data-ttu-id="14c3a-117">Converte um IDN em Punycode.</span><span class="sxs-lookup"><span data-stu-id="14c3a-117">Converts an IDN to Punycode.</span></span>
-   <span data-ttu-id="14c3a-118">[**IdnToNameprepUnicode**](/windows/desktop/api/Winnls/nf-winnls-idntonameprepunicode).</span><span class="sxs-lookup"><span data-stu-id="14c3a-118">[**IdnToNameprepUnicode**](/windows/desktop/api/Winnls/nf-winnls-idntonameprepunicode).</span></span> <span data-ttu-id="14c3a-119">Executa a parte NamePrep da conversão de um IDN em um nome ASCII.</span><span class="sxs-lookup"><span data-stu-id="14c3a-119">Performs the NamePrep portion of the conversion of an IDN to an ASCII name.</span></span> <span data-ttu-id="14c3a-120">Essa função cria uma representação Unicode canônica de uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="14c3a-120">This function creates a canonical Unicode representation of a string.</span></span>
-   <span data-ttu-id="14c3a-121">[**IdnToUnicode**](/windows/desktop/api/Winnls/nf-winnls-idntounicode).</span><span class="sxs-lookup"><span data-stu-id="14c3a-121">[**IdnToUnicode**](/windows/desktop/api/Winnls/nf-winnls-idntounicode).</span></span> <span data-ttu-id="14c3a-122">Converte uma cadeia de caracteres Punycode em uma cadeia de caracteres UTF-16 normal.</span><span class="sxs-lookup"><span data-stu-id="14c3a-122">Converts a Punycode string to a normal UTF-16 string.</span></span>

<span data-ttu-id="14c3a-123">O NLS também define várias funções de API que podem ser usadas para atenuar alguns dos riscos de segurança apresentados pela tecnologia IDN.</span><span class="sxs-lookup"><span data-stu-id="14c3a-123">NLS also defines several API functions that can be used to mitigate some of the security risks presented by the IDN technology.</span></span> <span data-ttu-id="14c3a-124">No Windows Vista e posterior, as funções a seguir são usadas para verificar se os caracteres em um determinado IDN são desenhados inteiramente dos scripts associados a uma localidade ou localidades em particular.</span><span class="sxs-lookup"><span data-stu-id="14c3a-124">On Windows Vista and later, the following functions are used to verify that the characters in a given IDN are drawn entirely from the scripts associated with a particular locale or locales.</span></span> <span data-ttu-id="14c3a-125">Para obter um exemplo do uso dessas funções, consulte [NLS: exemplo de mitigação do IDN (nome de domínio internacionalizado)](nls--internationalized-domain-name--idn--mitigation-sample.md).</span><span class="sxs-lookup"><span data-stu-id="14c3a-125">For an example of the use of these functions, see [NLS: Internationalized Domain Name (IDN) Mitigation Sample](nls--internationalized-domain-name--idn--mitigation-sample.md).</span></span>

-   <span data-ttu-id="14c3a-126">[**GetStringScripts**](/windows/desktop/api/Winnls/nf-winnls-getstringscripts).</span><span class="sxs-lookup"><span data-stu-id="14c3a-126">[**GetStringScripts**](/windows/desktop/api/Winnls/nf-winnls-getstringscripts).</span></span> <span data-ttu-id="14c3a-127">Fornece uma lista de scripts usados em uma cadeia de caracteres específica.</span><span class="sxs-lookup"><span data-stu-id="14c3a-127">Provides a list of scripts used in a particular string.</span></span>
-   <span data-ttu-id="14c3a-128">[**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa), [**GetLocaleInfoEx**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoex).</span><span class="sxs-lookup"><span data-stu-id="14c3a-128">[**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa), [**GetLocaleInfoEx**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoex).</span></span> <span data-ttu-id="14c3a-129">Recuperar informações de localidade.</span><span class="sxs-lookup"><span data-stu-id="14c3a-129">Retrieve locale information.</span></span> <span data-ttu-id="14c3a-130">Usar as funções com *LCTYPE* definido como [localidade \_ SSCRIPTS](locale-sscripts.md) fornece uma lista de scripts normalmente usados para uma localidade específica.</span><span class="sxs-lookup"><span data-stu-id="14c3a-130">Using the functions with *LCType* set to [LOCALE\_SSCRIPTS](locale-sscripts.md) provides a list of scripts normally used for a particular locale.</span></span>
-   <span data-ttu-id="14c3a-131">[**VerifyScripts**](/windows/desktop/api/Winnls/nf-winnls-verifyscripts).</span><span class="sxs-lookup"><span data-stu-id="14c3a-131">[**VerifyScripts**](/windows/desktop/api/Winnls/nf-winnls-verifyscripts).</span></span> <span data-ttu-id="14c3a-132">Compara listas de scripts.</span><span class="sxs-lookup"><span data-stu-id="14c3a-132">Compares lists of scripts.</span></span> <span data-ttu-id="14c3a-133">Para verificar em várias localidades, o aplicativo pode fazer várias chamadas para [**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa) ou [**GetLocaleInfoEx**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoex) e [**VerifyScripts**](/windows/desktop/api/Winnls/nf-winnls-verifyscripts).</span><span class="sxs-lookup"><span data-stu-id="14c3a-133">To verify against multiple locales, the application can make multiple calls to [**GetLocaleInfo**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoa) or [**GetLocaleInfoEx**](/windows/desktop/api/Winnls/nf-winnls-getlocaleinfoex) and [**VerifyScripts**](/windows/desktop/api/Winnls/nf-winnls-verifyscripts).</span></span>

<span data-ttu-id="14c3a-134">Para aplicativos executados no Windows XP e no Windows Server 2003, as funções [**DownlevelGetLocaleScripts**](downlevelgetlocalescripts.md), [**DownlevelGetStringScripts**](downlevelgetstringscripts.md)e [**DownlevelVerifyScripts**](downlevelverifyscripts.md) desempenham uma função semelhante às funções listadas acima em mitigar o risco de segurança.</span><span class="sxs-lookup"><span data-stu-id="14c3a-134">For applications that run on Windows XP and Windows Server 2003, the functions [**DownlevelGetLocaleScripts**](downlevelgetlocalescripts.md), [**DownlevelGetStringScripts**](downlevelgetstringscripts.md), and [**DownlevelVerifyScripts**](downlevelverifyscripts.md) play a similar role to the functions listed above in mitigating security risk.</span></span> <span data-ttu-id="14c3a-135">O download ["APIs de mitigação do IDN (Microsoft Internacionalizated Domain Name)"](https://www.microsoft.com/downloads/details.aspx?FamilyID=AD6158D7-DDBA-416A-9109-07607425A815&displaylang=en) está disponível no [centro de download do MSDN](https://www.microsoft.com/?ref=go).</span><span class="sxs-lookup"><span data-stu-id="14c3a-135">The ["Microsoft Internationalized Domain Name (IDN) Mitigation APIs"](https://www.microsoft.com/downloads/details.aspx?FamilyID=AD6158D7-DDBA-416A-9109-07607425A815&displaylang=en) download is available at the [MSDN Download Center](https://www.microsoft.com/?ref=go).</span></span>

## <a name="handle-unicode-strings"></a><span data-ttu-id="14c3a-136">Manipular cadeias de caracteres Unicode</span><span class="sxs-lookup"><span data-stu-id="14c3a-136">Handle Unicode Strings</span></span>

<span data-ttu-id="14c3a-137">O IDNA dá suporte à transformação de cadeias de caracteres Unicode em rótulos de nome de host legítimos, com exceção das cadeias de caracteres que contêm determinados personagens proibidos, como caracteres de controle, caracteres da área de uso particular (PUA) e similares.</span><span class="sxs-lookup"><span data-stu-id="14c3a-137">IDNA supports the transformation of Unicode strings into legitimate host name labels, with the exception of strings containing certain prohibited characters, such as control characters, characters from the private use area (PUA), and the like.</span></span> <span data-ttu-id="14c3a-138">Seu aplicativo pode usar o \_ sinalizador de uso de \_ regras STD3 ASCII de IDN \_ \_ com várias funções de conversão NLS para forçar a falha das funções se elas encontrarem caracteres ASCII que não sejam letras, números ou o caractere hífen-subtração (-), ou se uma cadeia de caracteres começar ou terminar com o caractere hífen-subtração.</span><span class="sxs-lookup"><span data-stu-id="14c3a-138">Your application can use the IDN\_USE\_STD3\_ASCII\_RULES flag with several NLS conversion functions to force the functions to fail if they encounter ASCII characters other than letters, numbers, or the hyphen-minus (-) character, or if a string begins or ends with the hyphen-minus character.</span></span> <span data-ttu-id="14c3a-139">Esses caracteres sempre foram proibidos de serem usados em nomes de domínio e permanecem proibidos no padrão de rascunho.</span><span class="sxs-lookup"><span data-stu-id="14c3a-139">These characters have always been prohibited from use in domain names, and remain prohibited in the draft standard.</span></span>

## <a name="handle-unassigned-code-points"></a><span data-ttu-id="14c3a-140">Manipular pontos de código não atribuídos</span><span class="sxs-lookup"><span data-stu-id="14c3a-140">Handle Unassigned Code Points</span></span>

<span data-ttu-id="14c3a-141">IDNs não podem conter pontos de código não atribuídos.</span><span class="sxs-lookup"><span data-stu-id="14c3a-141">IDNs cannot contain unassigned code points.</span></span> <span data-ttu-id="14c3a-142">Portanto, os pontos de código que não estão associados a um caractere ("atribuído") a partir de Unicode 3,2 não têm mapeamentos IDN definidos, embora o \_ sinal de permissão Allow \_ não atribuído em determinadas funções de conversão permita que eles sejam mapeados para Punycode.</span><span class="sxs-lookup"><span data-stu-id="14c3a-142">Therefore, code points that are not associated with a character ("assigned") as of Unicode 3.2 do not have defined IDN mappings, even though the IDN\_ALLOW\_UNASSIGNED flag in certain conversion functions allows them to be mapped to Punycode.</span></span> <span data-ttu-id="14c3a-143">Você pode encontrar uma lista de pontos de código não atribuídos no [RFC 3454](http://www.faqs.org/rfcs/rfc3454.html).</span><span class="sxs-lookup"><span data-stu-id="14c3a-143">You can find a list of unassigned code points in [RFC 3454](http://www.faqs.org/rfcs/rfc3454.html).</span></span>

> [!Caution]  
> <span data-ttu-id="14c3a-144">Se o seu aplicativo codifica pontos de código não atribuídos como Punycode, os nomes de domínio resultantes devem ser ilegais.</span><span class="sxs-lookup"><span data-stu-id="14c3a-144">If your application encodes unassigned code points as Punycode, the resulting domain names should be illegal.</span></span> <span data-ttu-id="14c3a-145">A segurança poderá ser comprometida se uma versão mais recente do IDNA tornar esses nomes legais ou se o aplicativo filtrar os caracteres ilegais para tentar criar um nome de domínio legal.</span><span class="sxs-lookup"><span data-stu-id="14c3a-145">Security can be compromised if a later version of IDNA makes these names legal or if the application filters out the illegal characters to try to create a legal domain name.</span></span>

 

<span data-ttu-id="14c3a-146">Pontos de código não atribuídos não são permitidos nas cadeias de caracteres armazenadas usadas em identificadores de protocolo e entidades nomeadas, como nomes em certificados digitais e partes de nome de domínio DNS.</span><span class="sxs-lookup"><span data-stu-id="14c3a-146">Unassigned code points are not allowed in the stored strings used in protocol identifiers and named entities, such as names in digital certificates and DNS domain name parts.</span></span> <span data-ttu-id="14c3a-147">No entanto, os pontos de código são permitidos em cadeias de caracteres de consulta, por exemplo, nomes inseridos pelo usuário para autoridades de certificação digitais e pesquisas de DNS, que são usadas para corresponder a identificadores armazenados.</span><span class="sxs-lookup"><span data-stu-id="14c3a-147">However, the code points are allowed in query strings, for example, user-entered names for digital certificate authorities and DNS lookups, which are used to match against stored identifiers.</span></span>

> [!Caution]  
> <span data-ttu-id="14c3a-148">Embora as cadeias de caracteres de consulta possam usar pontos de código não atribuídos, você não deve usá-las em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="14c3a-148">Although query strings can use unassigned code points, you should not use them in your applications.</span></span> <span data-ttu-id="14c3a-149">Até mesmo uma cadeia de caracteres de consulta fornecida pelo usuário apresenta um risco de um ataque de "falsificação".</span><span class="sxs-lookup"><span data-stu-id="14c3a-149">Even a user-supplied query string presents a risk of a "spoofing" attack.</span></span> <span data-ttu-id="14c3a-150">Nesse tipo de ataque, o site de host inescrupuloso redireciona os usuários do site que eles pretendem acessar para outro site que pode fornecer informações confidenciais a terceiros.</span><span class="sxs-lookup"><span data-stu-id="14c3a-150">In this type of attack, the unscrupulous host site reroutes users from the site they intend to access to another site that might provide sensitive information to a third party.</span></span> <span data-ttu-id="14c3a-151">Por exemplo, copiar uma cadeia de caracteres de um email de entrada pode apresentar os mesmos riscos que clicar em um link em um navegador.</span><span class="sxs-lookup"><span data-stu-id="14c3a-151">For example, copying a string from an incoming e-mail can present the same risks as clicking on a link in a browser.</span></span>

 

## <a name="convert-domain-names-to-ascii-names"></a><span data-ttu-id="14c3a-152">Converter nomes de domínio em nomes ASCII</span><span class="sxs-lookup"><span data-stu-id="14c3a-152">Convert Domain Names to ASCII Names</span></span>

<span data-ttu-id="14c3a-153">Seu aplicativo pode usar a função [**IdnToAscii**](/windows/desktop/api/Winnls/nf-winnls-idntoascii) e determinadas funções de mitigação para converter IDNs em ASCII.</span><span class="sxs-lookup"><span data-stu-id="14c3a-153">Your application can use the [**IdnToAscii**](/windows/desktop/api/Winnls/nf-winnls-idntoascii) function and certain mitigation functions to convert IDNs to ASCII.</span></span>

> [!Caution]  
> <span data-ttu-id="14c3a-154">Como as cadeias de caracteres com representações binárias muito diferentes podem ser comparadas como idênticas, essa função pode gerar certas preocupações de segurança.</span><span class="sxs-lookup"><span data-stu-id="14c3a-154">Because strings with very different binary representations can compare as identical, this function can raise certain security concerns.</span></span> <span data-ttu-id="14c3a-155">Para obter mais informações, consulte a discussão sobre funções de comparação em [considerações de segurança: recursos internacionais](security-considerations--international-features.md).</span><span class="sxs-lookup"><span data-stu-id="14c3a-155">For more information, see the discussion of comparison functions in [Security Considerations: International Features](security-considerations--international-features.md).</span></span>

 

## <a name="examples"></a><span data-ttu-id="14c3a-156">Exemplos</span><span class="sxs-lookup"><span data-stu-id="14c3a-156">Examples</span></span>

<span data-ttu-id="14c3a-157">[NLS: o exemplo de conversão de IDN (nome de domínio internacionalizado)](nls--internationalized-domain-name--idn--conversion-sample.md) demonstra o uso das funções de conversão de IDN.</span><span class="sxs-lookup"><span data-stu-id="14c3a-157">[NLS: Internationalized Domain Name (IDN) Conversion Sample](nls--internationalized-domain-name--idn--conversion-sample.md) demonstrates the use of the IDN conversion functions.</span></span> <span data-ttu-id="14c3a-158">[NLS: o exemplo de mitigação de IDN (nome de domínio internacionalizado)](nls--internationalized-domain-name--idn--mitigation-sample.md) demonstra o uso das funções de mitigação de IDN.</span><span class="sxs-lookup"><span data-stu-id="14c3a-158">[NLS: Internationalized Domain Name (IDN) Mitigation Sample](nls--internationalized-domain-name--idn--mitigation-sample.md) demonstrates the use of the IDN mitigation functions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="14c3a-159">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="14c3a-159">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="14c3a-160">Usando o suporte ao idioma nacional</span><span class="sxs-lookup"><span data-stu-id="14c3a-160">Using National Language Support</span></span>](using-national-language-support.md)
</dt> <dt>

[<span data-ttu-id="14c3a-161">Considerações sobre segurança: recursos internacionais</span><span class="sxs-lookup"><span data-stu-id="14c3a-161">Security Considerations: International Features</span></span>](security-considerations--international-features.md)
</dt> </dl>

 

 



