---
description: Seus aplicativos podem usar funções de API do Uniscribe para dar suporte à tipografia e à exibição e edição de texto internacional. O Uniscribe usa o parágrafo como a unidade para exibição de texto e a funcionalidade de Uniscribe deve ser usada para o parágrafo inteiro.
ms.assetid: e1adc567-0445-4deb-8634-25653f82127c
title: Exibindo texto com o Uniscribe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baeb9a2be4d00efaa2681097ddefe3a6de4c576b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104297281"
---
# <a name="displaying-text-with-uniscribe"></a><span data-ttu-id="91189-104">Exibindo texto com o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="91189-104">Displaying Text with Uniscribe</span></span>

<span data-ttu-id="91189-105">Seus aplicativos podem usar funções de API do Uniscribe para dar suporte à tipografia e à exibição e edição de texto internacional.</span><span class="sxs-lookup"><span data-stu-id="91189-105">Your applications can use Uniscribe API functions to support typography and the display and editing of international text.</span></span> <span data-ttu-id="91189-106">O Uniscribe usa o parágrafo como a unidade para exibição de texto e a funcionalidade de Uniscribe deve ser usada para o parágrafo inteiro.</span><span class="sxs-lookup"><span data-stu-id="91189-106">Uniscribe uses the paragraph as the unit for text display, and the Uniscribe functionality must be used for the entire paragraph.</span></span>

<span data-ttu-id="91189-107">Ao usar o Uniscribe para exibição de texto, um aplicativo deve passar por um processo de formatação ("layout"), normalmente usando o Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="91189-107">When using Uniscribe for display of text, an application must go through a formatting ("layout") process, typically using Uniscribe.</span></span> <span data-ttu-id="91189-108">O aplicativo divide um parágrafo de texto em cadeias de caracteres com o mesmo estilo, chamado "execuções".</span><span class="sxs-lookup"><span data-stu-id="91189-108">The application divides a text paragraph into strings of characters with the same style, called "runs".</span></span> <span data-ttu-id="91189-109">O estilo é determinado pela implementação específica, mas normalmente inclui atributos como fonte, tamanho e cor.</span><span class="sxs-lookup"><span data-stu-id="91189-109">The style is determined by the particular implementation, but typically includes such attributes as font, size, and color.</span></span> <span data-ttu-id="91189-110">Ao definir execuções, o aplicativo também pode aplicar outras informações, como os dados de idioma e localidade mantidos para uso com ferramentas lexicais.</span><span class="sxs-lookup"><span data-stu-id="91189-110">In defining runs, the application can also apply other information, such as language and locale data maintained for use with lexical tools.</span></span> <span data-ttu-id="91189-111">Por exemplo, um aplicativo pode tratar como uma passagem de execução separada em um texto essencialmente em inglês que é renderizado em francês.</span><span class="sxs-lookup"><span data-stu-id="91189-111">For example, an application might treat as a separate run a passage in a primarily English text that is rendered in French.</span></span>

<span data-ttu-id="91189-112">Depois de determinar as execuções para todos os parágrafos, o aplicativo divide cada parágrafo em cadeias de caracteres que têm o mesmo script e direção ("itens").</span><span class="sxs-lookup"><span data-stu-id="91189-112">Once it has determined the runs for all paragraphs, the application divides each paragraph into strings that have the same script and direction ("items").</span></span> <span data-ttu-id="91189-113">O aplicativo aplica as informações do item para produzir execuções que são exclusivas no script e na direção e ficam totalmente dentro de um único item ("Ranges").</span><span class="sxs-lookup"><span data-stu-id="91189-113">The application applies the item information to produce runs that are unique in script and direction and fall entirely within a single item ("ranges").</span></span>

<span data-ttu-id="91189-114">A divisão de um item em intervalos é um pouco arbitrária, embora um intervalo deva consistir em um ou mais agrupamentos de caracteres de indivisível, definidos por script consecutivos, chamados de "clusters".</span><span class="sxs-lookup"><span data-stu-id="91189-114">The breakdown of an item into ranges is somewhat arbitrary, although a range should consist of one or more consecutive script-defined, indivisible character groupings, called "clusters."</span></span> <span data-ttu-id="91189-115">Para idiomas europeus, um cluster geralmente corresponde a um único caractere de página de código ou ponto de código Unicode e consiste em um único [glifo](uniscribe-glossary.md).</span><span class="sxs-lookup"><span data-stu-id="91189-115">For European languages, a cluster typically corresponds to a single code page character or Unicode code point, and consists of a single [glyph](uniscribe-glossary.md).</span></span> <span data-ttu-id="91189-116">No entanto, em idiomas como o tailandês, um cluster é um agrupamento de glifos e corresponde a vários caracteres consecutivos ou pontos de código.</span><span class="sxs-lookup"><span data-stu-id="91189-116">However, in languages such as Thai, a cluster is a grouping of glyphs and corresponds to multiple consecutive characters or code points.</span></span> <span data-ttu-id="91189-117">Por exemplo, um cluster tailandês pode conter uma consoante, uma vogal e uma marca de Tom.</span><span class="sxs-lookup"><span data-stu-id="91189-117">For example, a Thai cluster might contain a consonant, a vowel, and a tone mark.</span></span> <span data-ttu-id="91189-118">Para que ele não interrompa os clusters, o aplicativo normalmente deve usar os intervalos mais longos que ele pode ou usar suas próprias informações léxicas para quebrar entre intervalos em locais que não estão no meio de um cluster.</span><span class="sxs-lookup"><span data-stu-id="91189-118">So that it does not break clusters, the application typically should either use the longest ranges it can or use its own lexical information to break between ranges in places that are not in the middle of a cluster.</span></span>

<span data-ttu-id="91189-119">Quando ele identificou os clusters em cada intervalo, o aplicativo deve determinar o tamanho de cada cluster.</span><span class="sxs-lookup"><span data-stu-id="91189-119">When it has identified the clusters in each range, the application must determine the size of each cluster.</span></span> <span data-ttu-id="91189-120">Ele usa o Uniscribe para somar os clusters para determinar o tamanho de cada intervalo.</span><span class="sxs-lookup"><span data-stu-id="91189-120">It uses Uniscribe to sum the clusters to determine the size of each range.</span></span> <span data-ttu-id="91189-121">Em seguida, o aplicativo soma os tamanhos dos intervalos até que eles ultrapassem uma linha, ou seja, atinjam a margem.</span><span class="sxs-lookup"><span data-stu-id="91189-121">Then the application sums the sizes of the ranges until they overflow a line, that is, reach the margin.</span></span> <span data-ttu-id="91189-122">O intervalo que estoura a linha é dividido entre a linha atual e a próxima linha.</span><span class="sxs-lookup"><span data-stu-id="91189-122">The range that overflows the line is divided between the current line and the next line.</span></span> <span data-ttu-id="91189-123">Para cada linha, o aplicativo cria um mapa da posição Visual para a posição lógica de cada intervalo.</span><span class="sxs-lookup"><span data-stu-id="91189-123">For each line, the application builds a map from visual position to logical position for each range.</span></span> <span data-ttu-id="91189-124">Em seguida, o aplicativo aponta os pontos de código para cada intervalo em glifos, que podem ser subsequentemente posicionados e renderizados.</span><span class="sxs-lookup"><span data-stu-id="91189-124">Then the application shapes the code points for each range into glyphs, which it can subsequently position and render.</span></span>

<span data-ttu-id="91189-125">Um aplicativo faz o layout de texto apenas uma vez.</span><span class="sxs-lookup"><span data-stu-id="91189-125">An application does text layout only one time.</span></span> <span data-ttu-id="91189-126">Depois disso, ele salva os glifos e as posições para fins de exibição ou os gera sempre que exibe o texto, com a compensação em velocidade versus memória.</span><span class="sxs-lookup"><span data-stu-id="91189-126">Afterwards, it either saves the glyphs and positions for display purposes or it generates them each time it displays the text, with the tradeoff being speed versus memory.</span></span> <span data-ttu-id="91189-127">Um aplicativo típico implementa o processo de layout uma vez e, em seguida, gera os glifos e posições cada vez que exibe o texto.</span><span class="sxs-lookup"><span data-stu-id="91189-127">A typical application implements the layout process once, then generates the glyphs and positions each time it displays the text.</span></span>

<span data-ttu-id="91189-128">Um aplicativo que usa [scripts complexos](uniscribe-glossary.md) tem os seguintes problemas com uma abordagem simples para layout e exibição.</span><span class="sxs-lookup"><span data-stu-id="91189-128">An application that uses [complex scripts](uniscribe-glossary.md) has the following problems with a simple approach to layout and display.</span></span>

-   <span data-ttu-id="91189-129">A largura de um caractere de script complexo depende de seu contexto.</span><span class="sxs-lookup"><span data-stu-id="91189-129">The width of a complex script character depends on its context.</span></span> <span data-ttu-id="91189-130">Não é possível salvar as larguras em tabelas simples.</span><span class="sxs-lookup"><span data-stu-id="91189-130">It is not possible to save the widths in simple tables.</span></span>
-   <span data-ttu-id="91189-131">A quebra entre palavras em scripts como o tailandês requer suporte a dicionário.</span><span class="sxs-lookup"><span data-stu-id="91189-131">Breaking between words in scripts such as Thai requires dictionary support.</span></span> <span data-ttu-id="91189-132">Por exemplo, nenhum caractere separador é usado entre as palavras em tailandês.</span><span class="sxs-lookup"><span data-stu-id="91189-132">For example, no separator character is used between Thai words.</span></span>
-   <span data-ttu-id="91189-133">Árabe, Hebraico, persa, urdu e outras linguagens de [texto bidirecionais](uniscribe-glossary.md) exigem reordenação antes da exibição.</span><span class="sxs-lookup"><span data-stu-id="91189-133">Arabic, Hebrew, Persian, Urdu, and other [bidirectional text](uniscribe-glossary.md) languages require reordering before display.</span></span>
-   <span data-ttu-id="91189-134">Muitas formas de associação de fontes geralmente são necessárias para o uso fácil de scripts complexos.</span><span class="sxs-lookup"><span data-stu-id="91189-134">Some form of font association is often required to easily use complex scripts.</span></span>

<span data-ttu-id="91189-135">O fato de o Uniscribe usar o parágrafo como a unidade de exibição ajuda o aplicativo a lidar adequadamente com esses problemas complexos de script.</span><span class="sxs-lookup"><span data-stu-id="91189-135">The fact that Uniscribe uses the paragraph as the display unit helps the application deal adequately with these complex script issues.</span></span>

> [!Note]  
> <span data-ttu-id="91189-136">O Uniscribe deve ser usado para um parágrafo inteiro, mesmo que as seções do parágrafo não sejam scripts complexos.</span><span class="sxs-lookup"><span data-stu-id="91189-136">Uniscribe must be used for an entire paragraph, even if sections of the paragraph are not complex scripts.</span></span>

 

<span data-ttu-id="91189-137">Conforme mostrado na tabela a seguir, o Uniscribe versão 1,6 ou superior dá suporte a várias funções que aproveitam as marcas OpenType.</span><span class="sxs-lookup"><span data-stu-id="91189-137">As shown in the following table, Uniscribe version 1.6 or greater supports several functions that take advantage of OpenType tags.</span></span> <span data-ttu-id="91189-138">Eles podem ser substituídos pelas funções regulares de Uniscribe correspondentes.</span><span class="sxs-lookup"><span data-stu-id="91189-138">They can be substituted for the corresponding regular Uniscribe functions.</span></span> <span data-ttu-id="91189-139">Em geral, seus aplicativos devem funcionar inteiramente com funções de um conjunto ou outro e não devem tentar "misturar e combinar" funções.</span><span class="sxs-lookup"><span data-stu-id="91189-139">Generally your applications should work entirely with functions from one set or the other and should not attempt to "mix and match" functions.</span></span>



| <span data-ttu-id="91189-140">Função de Uniscribe regular</span><span class="sxs-lookup"><span data-stu-id="91189-140">Regular Uniscribe function</span></span>             | <span data-ttu-id="91189-141">Função OpenType equivalente</span><span class="sxs-lookup"><span data-stu-id="91189-141">Equivalent OpenType function</span></span>                           |
|----------------------------------------|--------------------------------------------------------|
| [<span data-ttu-id="91189-142">**ScriptItemize**</span><span class="sxs-lookup"><span data-stu-id="91189-142">**ScriptItemize**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) | [<span data-ttu-id="91189-143">**ScriptItemizeOpenType**</span><span class="sxs-lookup"><span data-stu-id="91189-143">**ScriptItemizeOpenType**</span></span>](/windows/desktop/api/usp10/nf-usp10-scriptitemizeopentype) |
| [<span data-ttu-id="91189-144">**ScriptShape**</span><span class="sxs-lookup"><span data-stu-id="91189-144">**ScriptShape**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshape)     | [<span data-ttu-id="91189-145">**ScriptShapeOpenType**</span><span class="sxs-lookup"><span data-stu-id="91189-145">**ScriptShapeOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype)     |
| [<span data-ttu-id="91189-146">**ScriptPlace**</span><span class="sxs-lookup"><span data-stu-id="91189-146">**ScriptPlace**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplace)     | [<span data-ttu-id="91189-147">**ScriptPlaceOpenType**</span><span class="sxs-lookup"><span data-stu-id="91189-147">**ScriptPlaceOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplaceopentype)     |



 

## <a name="lay-out-text-using-uniscribe"></a><span data-ttu-id="91189-148">Dispor texto usando o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="91189-148">Lay Out Text Using Uniscribe</span></span>

<span data-ttu-id="91189-149">Seu aplicativo pode usar as etapas a seguir para fazer o layout de um parágrafo de texto com o Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="91189-149">Your application can use the following steps to lay out out a text paragraph with Uniscribe.</span></span> <span data-ttu-id="91189-150">Este procedimento pressupõe que o aplicativo já tenha dividido o parágrafo em execuções.</span><span class="sxs-lookup"><span data-stu-id="91189-150">This procedure assumes that the application has already divided the paragraph into runs.</span></span>

1.  <span data-ttu-id="91189-151">Chame [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) somente ao iniciar ou ao receber uma mensagem do [**WM \_ SETTINGCHANGE**](../winmsg/wm-settingchange.md) .</span><span class="sxs-lookup"><span data-stu-id="91189-151">Call [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) only when starting or when receiving a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message.</span></span>
2.  <span data-ttu-id="91189-152">Adicional Chame [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) para determinar se o parágrafo requer processamento complexo.</span><span class="sxs-lookup"><span data-stu-id="91189-152">(Optional) Call [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) to determine if the paragraph requires complex processing.</span></span>
3.  <span data-ttu-id="91189-153">Adicional Se estiver usando o Uniscribe para manipular a substituição de texto bidirecional e/ou dígito, chame [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) para preparar o [**\_ controle de script**](/windows/win32/api/usp10/ns-usp10-script_control) e as estruturas de [**\_ estado do script**](/windows/win32/api/usp10/ns-usp10-script_state) como entradas para [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span><span class="sxs-lookup"><span data-stu-id="91189-153">(Optional) If using Uniscribe to handle bidirectional text and/or digit substitution, call [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) to prepare the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures as inputs to [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> <span data-ttu-id="91189-154">Se você ignorar esta etapa, mas ainda precisar de substituição de dígitos, substitua os dígitos nacionais para Unicode U + 0030 por U + 0039 (dígitos europeus).</span><span class="sxs-lookup"><span data-stu-id="91189-154">If skipping this step, but still requiring digit substitution, substitute national digits for Unicode U+0030 through U+0039 (European digits).</span></span> <span data-ttu-id="91189-155">Para obter informações sobre substituição de dígitos, consulte [formas de dígitos](digit-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="91189-155">For information about digit substitution, see [Digit Shapes](digit-shapes.md).</span></span>
4.  <span data-ttu-id="91189-156">Chame [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) para dividir o parágrafo em itens.</span><span class="sxs-lookup"><span data-stu-id="91189-156">Call [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) to divide the paragraph into items.</span></span> <span data-ttu-id="91189-157">Se não estiver usando o Uniscribe para substituição de dígitos e a ordem bidirecional for conhecida, por exemplo, devido ao layout do teclado usado para inserir o caractere, chame **ScriptItemize**.</span><span class="sxs-lookup"><span data-stu-id="91189-157">If not using Uniscribe for digit substitution and the bidirectional order is known, for example, because of the keyboard layout used to enter the character, call **ScriptItemize**.</span></span> <span data-ttu-id="91189-158">Na chamada, forneça ponteiros nulos para [**o \_ controle de script**](/windows/win32/api/usp10/ns-usp10-script_control) e estruturas de [**\_ estado de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="91189-158">In the call, provide null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span> <span data-ttu-id="91189-159">Essa técnica gera itens pelo uso somente do mecanismo de Shaping, e os itens podem ser reordenados usando as informações do mecanismo.</span><span class="sxs-lookup"><span data-stu-id="91189-159">This technique generates items by use of the shaping engine only, and the items can be reordered using the engine information.</span></span>
    > [!Note]  
    > <span data-ttu-id="91189-160">Normalmente, os aplicativos que funcionam apenas com scripts da esquerda para a direita e sem nenhuma substituição de dígito devem passar por ponteiros nulos para o [**\_ controle de script**](/windows/win32/api/usp10/ns-usp10-script_control) e estruturas de [**\_ estado de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="91189-160">Typically, applications that work only with left-to-right scripts and without any digit substitution should pass null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span>

     

5.  <span data-ttu-id="91189-161">Mescle as informações do item com as informações de execução para produzir intervalos.</span><span class="sxs-lookup"><span data-stu-id="91189-161">Merge the item information with the run information to produce ranges.</span></span>
6.  <span data-ttu-id="91189-162">Chame [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para identificar clusters e gerar glifos.</span><span class="sxs-lookup"><span data-stu-id="91189-162">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to identify clusters and generate glyphs.</span></span>
7.  <span data-ttu-id="91189-163">Se [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) retornar o código \_ E o \_ script USP não estiver \_ \_ em \_ Font ou S \_ OK com a saída que contém os glifos ausentes, selecione os caracteres de uma fonte diferente.</span><span class="sxs-lookup"><span data-stu-id="91189-163">If [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) returns the code USP\_E\_SCRIPT\_NOT\_IN\_FONT or S\_OK with the output containing missing glyphs, select characters from a different font.</span></span> <span data-ttu-id="91189-164">Substitua outra fonte ou desabilite a formatação definindo o membro **eScript** da estrutura [**de \_ análise de script**](/windows/win32/api/usp10/ns-usp10-script_analysis) passada para **ScriptShape** para script \_ indefinido.</span><span class="sxs-lookup"><span data-stu-id="91189-164">Either substitute another font or disable shaping by setting the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure passed to **ScriptShape** to SCRIPT\_UNDEFINED.</span></span> <span data-ttu-id="91189-165">Para obter mais informações, consulte [usando o fallback de fonte](using-font-fallback.md).</span><span class="sxs-lookup"><span data-stu-id="91189-165">For more information, see [Using Font Fallback](using-font-fallback.md).</span></span>
8.  <span data-ttu-id="91189-166">Chame [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) para gerar [larguras avançadas](uniscribe-glossary.md) e posições x e y para os glifos em cada intervalo sucessivo.</span><span class="sxs-lookup"><span data-stu-id="91189-166">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate [advance widths](uniscribe-glossary.md) and x and y positions for the glyphs in each successive range.</span></span> <span data-ttu-id="91189-167">Esta é a primeira etapa para qual o tamanho do texto se torna uma consideração.</span><span class="sxs-lookup"><span data-stu-id="91189-167">This is the first step for which text size becomes a consideration.</span></span>
9.  <span data-ttu-id="91189-168">Some os tamanhos de intervalo até que a linha fique estourada.</span><span class="sxs-lookup"><span data-stu-id="91189-168">Sum the range sizes until the line overflows.</span></span>
10. <span data-ttu-id="91189-169">Quebre o intervalo em um limite de palavra usando os membros **fSoftBreak** e **fWhiteSpace** nos atributos lógicos.</span><span class="sxs-lookup"><span data-stu-id="91189-169">Break the range on a word boundary by using the **fSoftBreak** and **fWhiteSpace** members in the logical attributes.</span></span> <span data-ttu-id="91189-170">Para interromper um único cluster de caracteres de execução, use as informações retornadas chamando [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span><span class="sxs-lookup"><span data-stu-id="91189-170">To break a single character cluster off the run, use the information returned by calling [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span>
    > [!Note]  
    > <span data-ttu-id="91189-171">Decida se o primeiro ponto de código de um intervalo deve ser um ponto de quebra de palavra porque o último caractere do intervalo anterior exige.</span><span class="sxs-lookup"><span data-stu-id="91189-171">Decide if the first code point of a range should be a word break point because the last character of the previous range requires it.</span></span> <span data-ttu-id="91189-172">Por exemplo, se um intervalo terminar em uma vírgula, considere o primeiro caractere do próximo intervalo como um ponto de quebra de palavra.</span><span class="sxs-lookup"><span data-stu-id="91189-172">For example, if one range ends in a comma, consider the first character of the next range to be a word break point.</span></span>

     

11. <span data-ttu-id="91189-173">Repita as etapas de 6 a 10 para cada linha no parágrafo.</span><span class="sxs-lookup"><span data-stu-id="91189-173">Repeat steps 6 through 10 for each line in the paragraph.</span></span> <span data-ttu-id="91189-174">No entanto, se a última execução for interrompida na linha, chame [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para remodelar a parte restante da execução como a primeira execução na próxima linha.</span><span class="sxs-lookup"><span data-stu-id="91189-174">However, if breaking the last run on the line, call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to reshape the remaining part of the run as the first run on the next line.</span></span>

## <a name="display-text-using-uniscribe"></a><span data-ttu-id="91189-175">Exibir texto usando o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="91189-175">Display Text Using Uniscribe</span></span>

<span data-ttu-id="91189-176">Seu aplicativo pode usar as etapas a seguir para exibir um parágrafo de texto.</span><span class="sxs-lookup"><span data-stu-id="91189-176">Your application can use the following steps to display a text paragraph.</span></span> <span data-ttu-id="91189-177">Este procedimento pressupõe que o aplicativo já tenha definido o texto e não salvou os glifos e as posições do processo de layout.</span><span class="sxs-lookup"><span data-stu-id="91189-177">This procedure assumes that the application has already laid out the text and has not saved the glyphs and positions from the layout process.</span></span> <span data-ttu-id="91189-178">Se a velocidade for uma preocupação, o aplicativo poderá salvar os glifos e as posições do procedimento de layout e começar na etapa 2 no procedimento de exibição.</span><span class="sxs-lookup"><span data-stu-id="91189-178">If speed is a concern, the application can save the glyphs and positions from the layout procedure and start at step 2 in the display procedure.</span></span>

> [!Note]  
> <span data-ttu-id="91189-179">O aplicativo poderá omitir a etapa 2 se o texto não contiver caracteres de scripts da direita para a esquerda, não contiver nenhum caractere de controle bidirecional e usar um nível de incorporação de base da esquerda para a direita.</span><span class="sxs-lookup"><span data-stu-id="91189-179">The application can omit step 2 if the text contains no characters from right-to-left scripts, contains no bidirectional control characters, and uses a left-to-right base embedding level.</span></span>

 

1.  <span data-ttu-id="91189-180">Para cada execução, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="91189-180">For each run, do the following:</span></span>
    1.  <span data-ttu-id="91189-181">Se o estilo tiver sido alterado desde a última execução, atualize o identificador para o contexto do dispositivo, liberando-o e obtendo-o novamente.</span><span class="sxs-lookup"><span data-stu-id="91189-181">If the style has changed since the last run, update the handle to the device context by releasing and getting it again.</span></span>
    2.  <span data-ttu-id="91189-182">Chame [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para gerar glifos para a execução.</span><span class="sxs-lookup"><span data-stu-id="91189-182">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to generate glyphs for the run.</span></span>
    3.  <span data-ttu-id="91189-183">Chame [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) para gerar uma largura de avanço e um deslocamento x, y para cada glifo.</span><span class="sxs-lookup"><span data-stu-id="91189-183">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate an advance width and an x,y offset for each glyph.</span></span>
2.  <span data-ttu-id="91189-184">Faça o seguinte para estabelecer a ordem visual correta para as execuções na linha:</span><span class="sxs-lookup"><span data-stu-id="91189-184">Do the following to establish the correct visual order for the runs in the line:</span></span>
    1.  <span data-ttu-id="91189-185">Extraia uma matriz de [níveis de incorporação](uniscribe-glossary.md)bidirecional, uma por intervalo.</span><span class="sxs-lookup"><span data-stu-id="91189-185">Extract an array of bidirectional [embedding levels](uniscribe-glossary.md), one per range.</span></span> <span data-ttu-id="91189-186">O nível de incorporação é fornecido pelo si (item de SCRIPT \_ ) si. ( \_Análise de script) a.</span><span class="sxs-lookup"><span data-stu-id="91189-186">The embedding level is given by (SCRIPT\_ITEM) si.(SCRIPT\_ANALYSIS) a.</span></span> <span data-ttu-id="91189-187">(SCRIPT \_ STATE) s. uBidiLevel.</span><span class="sxs-lookup"><span data-stu-id="91189-187">(SCRIPT\_STATE) s.uBidiLevel.</span></span>
    2.  <span data-ttu-id="91189-188">Passe essa matriz para [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) para gerar um mapa de posições visuais para posições lógicas.</span><span class="sxs-lookup"><span data-stu-id="91189-188">Pass this array to [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) to generate a map of visual positions to logical positions.</span></span>
3.  <span data-ttu-id="91189-189">Adicional Para justificar o texto, chame [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) ou use o conhecimento especializado do texto.</span><span class="sxs-lookup"><span data-stu-id="91189-189">(Optional) To justify the text, either call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) or use specialized knowledge of the text.</span></span>
4.  <span data-ttu-id="91189-190">Use o mapa de Visual para lógico para exibir as execuções em ordem visual.</span><span class="sxs-lookup"><span data-stu-id="91189-190">Use the visual-to-logical map to display the runs in visual order.</span></span> <span data-ttu-id="91189-191">Começando na extremidade esquerda da linha, chame [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) para exibir a execução fornecida pela primeira entrada no mapa.</span><span class="sxs-lookup"><span data-stu-id="91189-191">Starting at the left end of the line, call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the run given by the first entry in the map.</span></span> <span data-ttu-id="91189-192">Para cada entrada subsequente no mapa, chame **ScriptTextOut** para exibir a execução indicada à direita da execução exibida anteriormente.</span><span class="sxs-lookup"><span data-stu-id="91189-192">For each subsequent entry in the map, call **ScriptTextOut** to display the indicated run to the right of the previously displayed run.</span></span>

    <span data-ttu-id="91189-193">Se omitir a etapa 2, comece na extremidade esquerda da linha e chame [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) para exibir a primeira execução lógica e, em seguida, para exibir cada execução lógica à direita da execução anterior.</span><span class="sxs-lookup"><span data-stu-id="91189-193">If omitting step 2, start at the left end of the line and call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the first logical run, and then to display each logical run to the right of the previous run.</span></span>

5.  <span data-ttu-id="91189-194">Repita as etapas acima para todas as linhas do parágrafo.</span><span class="sxs-lookup"><span data-stu-id="91189-194">Repeat the steps above for all lines in the paragraph.</span></span>

## <a name="related-topics"></a><span data-ttu-id="91189-195">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="91189-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="91189-196">Usando o Uniscribe</span><span class="sxs-lookup"><span data-stu-id="91189-196">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
