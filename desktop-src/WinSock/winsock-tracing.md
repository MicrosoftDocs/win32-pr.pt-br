---
description: Rastreamento de Winsock
ms.assetid: 0c430fc2-28e7-4537-a887-4c36d24fedee
title: Rastreamento de Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 803be6220d4d2d440811033786b0f043fab0ff9d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105814546"
---
# <a name="winsock-tracing"></a><span data-ttu-id="bf70a-103">Rastreamento de Winsock</span><span class="sxs-lookup"><span data-stu-id="bf70a-103">Winsock Tracing</span></span>

## <a name="introduction"></a><span data-ttu-id="bf70a-104">Introdução</span><span class="sxs-lookup"><span data-stu-id="bf70a-104">Introduction</span></span>

<span data-ttu-id="bf70a-105">O rastreamento do Winsock é um recurso de solução de problemas que pode ser habilitado em binários de varejo para rastrear certos eventos de soquete do Windows com sobrecarga mínima.</span><span class="sxs-lookup"><span data-stu-id="bf70a-105">Winsock tracing is a troubleshooting feature that can be enabled in retail binaries to trace certain Windows socket events with minimal overhead.</span></span> <span data-ttu-id="bf70a-106">O objetivo de adicionar o rastreamento de varejo ao Windows Sockets é permitir melhores recursos de diagnóstico para desenvolvedores e suporte a produtos.</span><span class="sxs-lookup"><span data-stu-id="bf70a-106">The goal of adding retail tracing to Windows Sockets is to allow for better diagnostic capabilities for developers and product support.</span></span> <span data-ttu-id="bf70a-107">O rastreamento de eventos de rede do Winsock dá suporte a operações de soquete de rastreamento para aplicativos IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="bf70a-107">Winsock network event tracing supports tracing socket operations for IPv4 and IPv6 applications.</span></span> <span data-ttu-id="bf70a-108">O rastreamento de alterações do catálogo Winsock dá suporte a alterações de rastreamento feitas no catálogo Winsock por provedores de serviço em camadas (LSPs).</span><span class="sxs-lookup"><span data-stu-id="bf70a-108">Winsock catalog change tracing supports tracing changes made to the Winsock catalog by layered service providers (LSPs).</span></span> <span data-ttu-id="bf70a-109">O rastreamento do Winsock tem suporte no Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="bf70a-109">Winsock tracing is supported on Windows Vista and later.</span></span>

> [!Note]  
> <span data-ttu-id="bf70a-110">Os provedores de serviço em camadas são preteridos.</span><span class="sxs-lookup"><span data-stu-id="bf70a-110">Layered Service Providers are deprecated.</span></span> <span data-ttu-id="bf70a-111">A partir do Windows 8 e do Windows Server 2012, use a [plataforma de filtragem do Windows](../fwp/windows-filtering-platform-start-page.md).</span><span class="sxs-lookup"><span data-stu-id="bf70a-111">Starting with Windows 8 and Windows Server 2012, use [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md).</span></span>

 

<span data-ttu-id="bf70a-112">Quando ocorre um erro inesperado em um soquete, a dica principal para diagnosticar o problema é o código de erro retornado.</span><span class="sxs-lookup"><span data-stu-id="bf70a-112">When an unexpected error occurs on a socket, the main clue to diagnose the problem is the error code returned.</span></span> <span data-ttu-id="bf70a-113">Com muita frequência, o código de erro retornado não explica por que o erro ocorreu, especialmente quando o erro é iniciado pelo transporte de rede subjacente.</span><span class="sxs-lookup"><span data-stu-id="bf70a-113">Very often, the returned error code does not explain why the error happened, especially when the error is initiated by the underlying network transport.</span></span> <span data-ttu-id="bf70a-114">O rastreamento do Winsock fornece um nível de rastreamento mais detalhado que pode registrar em log informações adicionais para detectar corrupção do buffer e aplicativos mal escritos.</span><span class="sxs-lookup"><span data-stu-id="bf70a-114">Winsock tracing provides a more verbose tracing level which can log additional information to catch buffer corruption and poorly written applications.</span></span>

<span data-ttu-id="bf70a-115">O rastreamento do Winsock usa o ETW (rastreamento de eventos para Windows), um recurso de rastreamento de uso geral de alta velocidade fornecido pelo sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="bf70a-115">Winsock tracing uses Event Tracing for Windows (ETW), a general-purpose, high-speed tracing facility provided by the operating system.</span></span> <span data-ttu-id="bf70a-116">Usando um mecanismo de registro em buffer e de log implementado no kernel, o ETW fornece um mecanismo de rastreamento para eventos gerados por aplicativos de modo de usuário e drivers de dispositivo em modo kernel.</span><span class="sxs-lookup"><span data-stu-id="bf70a-116">Using a buffering and logging mechanism implemented in the kernel, ETW provides a tracing mechanism for events raised by both user-mode applications and kernel-mode device drivers.</span></span> <span data-ttu-id="bf70a-117">Além disso, o ETW oferece a capacidade de habilitar e desabilitar o registro em log dinamicamente, facilitando a execução de rastreamento detalhado em ambientes de produção sem a necessidade de reinicializações ou reinicializações do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bf70a-117">Additionally, ETW gives you the ability to enable and disable logging dynamically, making it easy to perform detailed tracing in production environments without requiring reboots or application restarts.</span></span> <span data-ttu-id="bf70a-118">O mecanismo de registro em log usa buffers gravados no disco por um thread de gravador assíncrono.</span><span class="sxs-lookup"><span data-stu-id="bf70a-118">The logging mechanism uses buffers that are written to disk by an asynchronous writer thread.</span></span> <span data-ttu-id="bf70a-119">Isso permite que aplicativos de servidor de grande escala gravem eventos com distúrbios mínimo.</span><span class="sxs-lookup"><span data-stu-id="bf70a-119">This allows large-scale server applications to write events with minimum disturbance.</span></span> <span data-ttu-id="bf70a-120">O ETW foi introduzido pela primeira vez no Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="bf70a-120">ETW was first introduced on Windows 2000.</span></span> <span data-ttu-id="bf70a-121">O suporte ao rastreamento do Winsock usando o ETW foi adicionado ao Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="bf70a-121">Support for Winsock tracing using ETW was added on Windows Vista and later.</span></span> <span data-ttu-id="bf70a-122">Para obter informações gerais sobre o ETW, consulte [melhorar a depuração e ajuste de desempenho com o ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span><span class="sxs-lookup"><span data-stu-id="bf70a-122">For general information on ETW, see [Improve Debugging And Performance Tuning With ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span></span>

<span data-ttu-id="bf70a-123">O rastreamento do Winsock só pode ser habilitado no nível do sistema operacional para todos os processos e threads em execução em um computador.</span><span class="sxs-lookup"><span data-stu-id="bf70a-123">Winsock tracing can only be enabled at the operating system level for all processes and threads running on a computer.</span></span> <span data-ttu-id="bf70a-124">Atualmente, o rastreamento de Winsock não pode ser habilitado apenas para um único processo ou thread.</span><span class="sxs-lookup"><span data-stu-id="bf70a-124">Winsock tracing currently cannot be enabled for just a single process or thread.</span></span> <span data-ttu-id="bf70a-125">Quando o rastreamento de eventos de rede do Winsock está habilitado, todos os aplicativos de soquete (IPv4 e IPv6) em um computador são rastreados.</span><span class="sxs-lookup"><span data-stu-id="bf70a-125">When Winsock network event tracing is enabled, all socket applications (both IPv4 and IPv6) on a computer are traced.</span></span>

<span data-ttu-id="bf70a-126">Os tópicos a seguir descrevem o rastreamento do Winsock mais detalhadamente:</span><span class="sxs-lookup"><span data-stu-id="bf70a-126">The following topics describe Winsock tracing in more detail:</span></span>

-   [<span data-ttu-id="bf70a-127">Níveis de rastreamento do Winsock</span><span class="sxs-lookup"><span data-stu-id="bf70a-127">Winsock Tracing Levels</span></span>](winsock-tracing-levels.md)
-   [<span data-ttu-id="bf70a-128">Controle do rastreamento do Winsock</span><span class="sxs-lookup"><span data-stu-id="bf70a-128">Control of Winsock Tracing</span></span>](control-of-winsock-tracing.md)
-   [<span data-ttu-id="bf70a-129">Detalhes de rastreamento de eventos de rede do Winsock</span><span class="sxs-lookup"><span data-stu-id="bf70a-129">Winsock Network Event Tracing Details</span></span>](winsock-tracing-event-details.md)
-   [<span data-ttu-id="bf70a-130">Detalhes de rastreamento de alteração do catálogo Winsock</span><span class="sxs-lookup"><span data-stu-id="bf70a-130">Winsock Catalog Change Tracing Details</span></span>](winsock-layered-service-provider-tracing-event-details.md)

## <a name="related-topics"></a><span data-ttu-id="bf70a-131">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="bf70a-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bf70a-132">Melhore o ajuste de depuração e desempenho com o ETW</span><span class="sxs-lookup"><span data-stu-id="bf70a-132">Improve Debugging And Performance Tuning With ETW</span></span>](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw)
</dt> <dt>

[<span data-ttu-id="bf70a-133">Recursos de depuração e rastreamento</span><span class="sxs-lookup"><span data-stu-id="bf70a-133">Debug and Trace Facilities</span></span>](debug-and-trace-facilities-2.md)
</dt> </dl>

 

 
