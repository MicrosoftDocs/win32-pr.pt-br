---
description: Quando uma nova classe de serviço é instalada, uma estrutura WSASERVICECLASSINFO deve ser preparada e fornecida. Essa estrutura também consiste em subestruturas que contêm uma série de parâmetros que se aplicam a namespaces específicos.
ms.assetid: fb225e0c-a0c7-44e1-80fb-7b924b371afa
title: Estruturas de dados de classe de serviço no SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b5bf249c7437751e7c6d08b2fdf3830e92921ce7
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/12/2021
ms.locfileid: "104558650"
---
# <a name="service-class-data-structures-in-the-spi"></a><span data-ttu-id="647e4-104">Estruturas de dados de classe de serviço no SPI</span><span class="sxs-lookup"><span data-stu-id="647e4-104">Service Class Data Structures in the SPI</span></span>

<span data-ttu-id="647e4-105">Quando uma nova classe de serviço é instalada, uma estrutura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) deve ser preparada e fornecida.</span><span class="sxs-lookup"><span data-stu-id="647e4-105">When a new service class is installed, a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure must be prepared and supplied.</span></span> <span data-ttu-id="647e4-106">Essa estrutura também consiste em subestruturas que contêm uma série de parâmetros que se aplicam a namespaces específicos.</span><span class="sxs-lookup"><span data-stu-id="647e4-106">This structure also consists of substructures that contain a series of parameters that apply to specific namespaces.</span></span>

![Diagrama que mostra a estrutura WSASERVICECLASSINFO, subestruturas e parâmetros que se aplicam a namespaces específicos.](images/ovrvw3-3.png)

<span data-ttu-id="647e4-108">Para cada classe de serviço, há uma única estrutura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) .</span><span class="sxs-lookup"><span data-stu-id="647e4-108">For each service class, there is a single [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure.</span></span> <span data-ttu-id="647e4-109">Na estrutura **WSASERVICECLASSINFO** , o identificador exclusivo da classe de serviço está contido em **lpServiceClassId** e uma cadeia de caracteres de exibição associada é referenciada por **lpServiceClassName**.</span><span class="sxs-lookup"><span data-stu-id="647e4-109">Within the **WSASERVICECLASSINFO** structure, the service class's unique identifier is contained in **lpServiceClassId**, and an associated display string is referenced by **lpServiceClassName**.</span></span>

<span data-ttu-id="647e4-110">O membro **lpClassInfos** na estrutura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) faz referência a uma matriz de estruturas [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) , cada uma das quais fornece um parâmetro nomeado e digitado que se aplica a um namespace especificado.</span><span class="sxs-lookup"><span data-stu-id="647e4-110">The **lpClassInfos** member in the [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure references an array of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures, each of which supplies a named and typed parameter that applies to a specified namespace.</span></span> <span data-ttu-id="647e4-111">Exemplos de valores para o membro **lpszName** incluem: SAPID, TCPPORT, UDPPORT, etc. Essas cadeias de caracteres são geralmente específicas do namespace identificado em **dwNameSpace**.</span><span class="sxs-lookup"><span data-stu-id="647e4-111">Examples of values for the **lpszName** member include: SAPID, TCPPORT, UDPPORT, etc. These strings are generally specific to the namespace identified in **dwNameSpace**.</span></span> <span data-ttu-id="647e4-112">Os valores típicos para **dwValueType** podem ser reg \_ DWORD, Reg \_ sz, etc. O membro **dwValueSize** indica o comprimento do item de dados apontado por **lpValue**.</span><span class="sxs-lookup"><span data-stu-id="647e4-112">Typical values for **dwValueType** might be REG\_DWORD, REG\_SZ, etc. The **dwValueSize** member indicates the length of the data item pointed to by **lpValue**.</span></span>

<span data-ttu-id="647e4-113">Toda a coleção de dados representada em uma estrutura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) é fornecida para cada provedor de namespace por meio de [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span><span class="sxs-lookup"><span data-stu-id="647e4-113">The entire collection of data represented in a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure is provided to each namespace provider via [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span></span> <span data-ttu-id="647e4-114">Em seguida, cada provedor de namespace individual percorre a lista de estruturas [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) e retém as informações aplicáveis a ela.</span><span class="sxs-lookup"><span data-stu-id="647e4-114">Each individual namespace provider then sifts through the list of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures and retain the information applicable to it.</span></span> <span data-ttu-id="647e4-115">Essa arquitetura também prevê a existência futura de um provedor de namespace especial que manteria todas as informações de esquema de classe de serviço para todos os namespaces.</span><span class="sxs-lookup"><span data-stu-id="647e4-115">This architecture also envisions the future existence of a special namespace provider that would retain all of the service class schema information for all of the namespaces.</span></span> <span data-ttu-id="647e4-116">O \_32.dll Ws2 consultaria esse provedor para obter os dados de **WSASERVICECLASSINFO** necessários para fornecer aos provedores de namespace quando [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) for invocado para iniciar uma consulta e quando [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) for invocado para registrar um serviço.</span><span class="sxs-lookup"><span data-stu-id="647e4-116">The Ws2\_32.dll would query this provider to obtain the **WSASERVICECLASSINFO** data needed to supply to namespace providers when [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) is invoked to initiate a query, and when [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) is invoked to register a service.</span></span> <span data-ttu-id="647e4-117">O provedor de namespace não deve confiar nesse recurso por enquanto, e deve ter um meio específico do provedor para obter qualquer informação de esquema de classe de serviço necessária.</span><span class="sxs-lookup"><span data-stu-id="647e4-117">Namespace provider should not rely on this capability for the time being, and should instead have a provider-specific means to obtain any needed service class schema information.</span></span> <span data-ttu-id="647e4-118">Na ausência de um provedor que armazena todo o esquema de classe de serviço para todos os namespaces, o \_32.dll Ws2 usará [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) para obter essas informações de cada provedor de namespace individual.</span><span class="sxs-lookup"><span data-stu-id="647e4-118">In the absence of a provider that stores all service class schema for all namespaces, the Ws2\_32.dll will use [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) to obtain such information from each individual namespace provider.</span></span>

 

 



