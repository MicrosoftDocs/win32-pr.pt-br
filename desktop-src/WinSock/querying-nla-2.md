---
description: Para obter a notificação de redes lógicas invalidadas, use a função WSANSPIoctl para registrar-se para eventos de alteração de local de rede.
ms.assetid: 531b6269-5f35-44c1-ad0f-c5f103029893
title: Consultando NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0ac7a4f57e14bb967b04d3a9fd6fe66717da3878
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105782543"
---
# <a name="querying-nla"></a><span data-ttu-id="d5408-103">Consultando NLA</span><span class="sxs-lookup"><span data-stu-id="d5408-103">Querying NLA</span></span>

<span data-ttu-id="d5408-104">Para obter a notificação de redes lógicas invalidadas, use a função [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) para registrar-se para eventos de alteração de local de rede.</span><span class="sxs-lookup"><span data-stu-id="d5408-104">To obtain notification of invalidated logical networks, use the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to register for network location change events.</span></span> <span data-ttu-id="d5408-105">Dois métodos podem ser usados para determinar se um local de rede válido anteriormente se tornou inválido: métodos de sondagem ou notificação usando mensagens sobrepostas de e/s ou Windows.</span><span class="sxs-lookup"><span data-stu-id="d5408-105">Two methods can be used to determine whether a previously valid network location has become invalid: polling methods, or notification using overlapped I/O or Windows messaging.</span></span>

<span data-ttu-id="d5408-106">As consultas são formadas usando as funções [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) e [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) para enumerar todas as redes lógicas disponíveis.</span><span class="sxs-lookup"><span data-stu-id="d5408-106">Queries are formed using the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext,**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) and [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) functions to enumerate all available logical networks.</span></span> <span data-ttu-id="d5408-107">O uso de cada uma dessas funções é explicado individualmente durante o restante desta seção, começando pela função **WSALookupServiceBegin** .</span><span class="sxs-lookup"><span data-stu-id="d5408-107">The use of each of these functions is explained individually throughout the remainder of this section, beginning with the **WSALookupServiceBegin** function.</span></span>

> [!Note]  
> <span data-ttu-id="d5408-108">A NLA requer o arquivo de cabeçalho mswsock. h, que por padrão não está incluído no arquivo Winsock2. h.</span><span class="sxs-lookup"><span data-stu-id="d5408-108">NLA requires the Mswsock.h header file, which by default is not included in the Winsock2.h file.</span></span>

 

## <a name="step-1-initiate-the-query"></a><span data-ttu-id="d5408-109">Etapa 1: iniciar a consulta</span><span class="sxs-lookup"><span data-stu-id="d5408-109">Step 1: Initiate the Query</span></span>

<span data-ttu-id="d5408-110">Para referência rápida, a função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) tem a seguinte sintaxe:</span><span class="sxs-lookup"><span data-stu-id="d5408-110">For quick reference, the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceBegin(
  LPWSAQUERYSET lpqsRestrictions,
  DWORD dwControlFlags,
  LPHANDLE lphLookup
);
```

<span data-ttu-id="d5408-111">O NLA dá suporte aos seguintes sinalizadores de pesquisa *dwControlFlags* :</span><span class="sxs-lookup"><span data-stu-id="d5408-111">NLA supports the following *dwControlFlags* lookup flags:</span></span>

<dl> <span data-ttu-id="d5408-112">LUP \_ nome de retorno \_</span><span class="sxs-lookup"><span data-stu-id="d5408-112">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="d5408-113">\_Comentário de retorno do Lup \_</span><span class="sxs-lookup"><span data-stu-id="d5408-113">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="d5408-114">\_blob de retorno de Lup \_</span><span class="sxs-lookup"><span data-stu-id="d5408-114">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="d5408-115">LUP \_ retornar \_ tudo</span><span class="sxs-lookup"><span data-stu-id="d5408-115">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="d5408-116">LUP \_ profundo</span><span class="sxs-lookup"><span data-stu-id="d5408-116">LUP\_DEEP</span></span>  
</dl>

<span data-ttu-id="d5408-117">Esses sinalizadores restringem os conjuntos de resultados retornados nas chamadas subsequentes para o [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), a função para redes que contêm campos do tipo especificado.</span><span class="sxs-lookup"><span data-stu-id="d5408-117">These flags restrict the result sets returned in subsequent calls to the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function to networks that contain fields of the specified type.</span></span> <span data-ttu-id="d5408-118">Por exemplo, a especificação de \_ blob de retorno Lup \_ no parâmetro *dwControlFlags* da chamada de função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) restringe os conjuntos de resultados das chamadas subsequentes para **WSALookupServiceNext**, para redes que contêm informações de BLOB.</span><span class="sxs-lookup"><span data-stu-id="d5408-118">For example, specifying LUP\_RETURN\_BLOB in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call restricts result sets from subsequent calls to **WSALookupServiceNext**, to networks that contain BLOB information.</span></span> <span data-ttu-id="d5408-119">Usar o sinalizador LUP de \_ retorno \_ All é equivalente a especificar \_ o \_ nome de retorno de Lup, o \_ Comentário de retorno de Lup \_ e o blob de retorno de Lup \_ \_ , mas não os Lup de \_ profundidade.</span><span class="sxs-lookup"><span data-stu-id="d5408-119">Using the LUP\_RETURN\_ALL flag is equivalent to specifying LUP\_RETURN\_NAME, LUP\_RETURN\_COMMENT, and LUP\_RETURN\_BLOB, but not LUP\_DEEP.</span></span>

<span data-ttu-id="d5408-120">Para obter uma explicação desses sinalizadores de pesquisa, consulte a página de referência da função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="d5408-120">For an explanation of these lookup flags, consult the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span>

<span data-ttu-id="d5408-121">O identificador de pesquisa retornado pela NLA no parâmetro *lphLookup* é privado para NLA e não deve ser modificado.</span><span class="sxs-lookup"><span data-stu-id="d5408-121">The lookup handle returned by NLA in the *lphLookup* parameter is private to NLA, and should not be modified.</span></span> <span data-ttu-id="d5408-122">Como o identificador retornado é privado para NLA, funções como [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) não estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="d5408-122">Since the returned handle is private to NLA, functions such as [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) are not available.</span></span>

<span data-ttu-id="d5408-123">A NLA retorna zero após a conclusão bem-sucedida, conforme definido na página de referência da função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="d5408-123">NLA returns zero upon successful completion, as defined in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span> <span data-ttu-id="d5408-124">Caso contrário, o NLA dá suporte aos seguintes códigos de erro.</span><span class="sxs-lookup"><span data-stu-id="d5408-124">Otherwise, NLA supports the following error codes.</span></span>

| <span data-ttu-id="d5408-125">Erro</span><span class="sxs-lookup"><span data-stu-id="d5408-125">Error</span></span>                    | <span data-ttu-id="d5408-126">Significado</span><span class="sxs-lookup"><span data-stu-id="d5408-126">Meaning</span></span>                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d5408-127">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d5408-127">WSANOTINITIALISED</span></span>        | <span data-ttu-id="d5408-128">Uma chamada bem-sucedida para a função [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) para inicializar o NLA não foi executada.</span><span class="sxs-lookup"><span data-stu-id="d5408-128">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span>                                                   |
| <span data-ttu-id="d5408-129">WSAEINVAL</span><span class="sxs-lookup"><span data-stu-id="d5408-129">WSAEINVAL</span></span>                | <span data-ttu-id="d5408-130">Um ou mais parâmetros eram inválidos ou parâmetros especificados na chamada de função se aplicam a protocolos diferentes de IP.</span><span class="sxs-lookup"><span data-stu-id="d5408-130">One or more parameters were invalid, or parameters specified in the function call apply to protocols other than IP.</span></span>                                         |
| <span data-ttu-id="d5408-131">WSASERVICE \_ não \_ encontrado</span><span class="sxs-lookup"><span data-stu-id="d5408-131">WSASERVICE\_NOT\_FOUND</span></span>   | <span data-ttu-id="d5408-132">O parâmetro *lpServiceClassId* da estrutura [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) passado no parâmetro *lpqsRestrictions* contém um GUID inválido.</span><span class="sxs-lookup"><span data-stu-id="d5408-132">The *lpServiceClassId* parameter of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure passed in the *lpqsRestrictions* parameter contains an invalid GUID.</span></span> |
| <span data-ttu-id="d5408-133">dados do WSANO \_</span><span class="sxs-lookup"><span data-stu-id="d5408-133">WSANO\_DATA</span></span>              | <span data-ttu-id="d5408-134">O \_ sinalizador de contêineres Lup foi especificado no parâmetro *dwControlFlags* .</span><span class="sxs-lookup"><span data-stu-id="d5408-134">The LUP\_CONTAINERS flag was specified in *dwControlFlags* parameter.</span></span>                                                                                       |
| <span data-ttu-id="d5408-135">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="d5408-135">WSAEFAULT</span></span>                | <span data-ttu-id="d5408-136">Ocorreu uma violação de acesso ao tentar acessar os parâmetros fornecidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="d5408-136">An access violation occurred when attempting to access user-supplied parameters.</span></span>                                                                            |
| <span data-ttu-id="d5408-137">WSASYSNOTREADY</span><span class="sxs-lookup"><span data-stu-id="d5408-137">WSASYSNOTREADY</span></span>           | <span data-ttu-id="d5408-138">O serviço NLA não está disponível para processar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="d5408-138">The NLA service is unavailable to process the request.</span></span>                                                                                                      |
| <span data-ttu-id="d5408-139">o WSA \_ não tem \_ \_ memória suficiente</span><span class="sxs-lookup"><span data-stu-id="d5408-139">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="d5408-140">O NLA ou o serviço NLA não pôde alocar memória suficiente para processar essa solicitação.</span><span class="sxs-lookup"><span data-stu-id="d5408-140">NLA or the NLA service was unable to allocate enough memory to process this request.</span></span>                                                                        |



 

## <a name="step-2-perform-the-query"></a><span data-ttu-id="d5408-141">Etapa 2: executar a consulta</span><span class="sxs-lookup"><span data-stu-id="d5408-141">Step 2: Perform the Query</span></span>

<span data-ttu-id="d5408-142">A próxima etapa na consulta de NLA requer o uso da função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="d5408-142">The next step in querying NLA requires use of the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> <span data-ttu-id="d5408-143">Para referência rápida, a função **WSALookupServiceNext** tem a seguinte sintaxe:</span><span class="sxs-lookup"><span data-stu-id="d5408-143">For quick reference, the **WSALookupServiceNext**, function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceNext(
  HANDLE hLookup,
  DWORD dwControlFlags,
  LPDWORD lpdwBufferLength,
  LPWSAQUERYSET lpqsResults
);
```

<span data-ttu-id="d5408-144">O parâmetro *lLookup* é o identificador de pesquisa retornado da chamada anterior para a função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="d5408-144">The *lLookup* parameter is the lookup handle returned from the previous call to the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function.</span></span>

<span data-ttu-id="d5408-145">O parâmetro *dwControlFlags* dá suporte aos seguintes sinalizadores:</span><span class="sxs-lookup"><span data-stu-id="d5408-145">The *dwControlFlags* parameter supports the following flags:</span></span>

<dl> <span data-ttu-id="d5408-146">LUP \_ nome de retorno \_</span><span class="sxs-lookup"><span data-stu-id="d5408-146">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="d5408-147">\_Comentário de retorno do Lup \_</span><span class="sxs-lookup"><span data-stu-id="d5408-147">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="d5408-148">\_blob de retorno de Lup \_</span><span class="sxs-lookup"><span data-stu-id="d5408-148">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="d5408-149">LUP \_ retornar \_ tudo</span><span class="sxs-lookup"><span data-stu-id="d5408-149">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="d5408-150">LUP \_ FLUSHPREVIOUS</span><span class="sxs-lookup"><span data-stu-id="d5408-150">LUP\_FLUSHPREVIOUS</span></span>  
</dl>

<span data-ttu-id="d5408-151">Esses sinalizadores são independentes dos sinalizadores com suporte na chamada de função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="d5408-151">These flags are independent of the flags supported in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call.</span></span> <span data-ttu-id="d5408-152">Observe que todas as restrições especificadas na chamada anterior à função **WSALookupServiceBegin** restringem a pesquisa; a adição de sinalizadores com a função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) em uma tentativa de ampliar a consulta além das restrições especificadas na chamada **WSALookupServiceBegin** é silenciosamente ignorada.</span><span class="sxs-lookup"><span data-stu-id="d5408-152">Note that any constraints specified in the previous call to the **WSALookupServiceBegin** function constrain the lookup; adding flags with the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function in an attempt to broaden the query beyond the constraints specified in the **WSALookupServiceBegin** call are silently ignored.</span></span> <span data-ttu-id="d5408-153">No entanto, é permitido especificar um conjunto mais restritivo de sinalizadores do que o especificado na chamada **WSALookupServiceBegin** .</span><span class="sxs-lookup"><span data-stu-id="d5408-153">Specifying a more restrictive set of flags than that specified in the **WSALookupServiceBegin** call, however, is allowed.</span></span>

<span data-ttu-id="d5408-154">Se a rede detalhada no *lpqsResults* for uma rede ativa, uma série de estruturas de **\_ blob NLA** será anexada conforme especificado no membro **LpBlob** da estrutura [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) retornada em *lpqsResults*.</span><span class="sxs-lookup"><span data-stu-id="d5408-154">If the network detailed in *lpqsResults* is an active network, a series of **NLA\_BLOB** structures is appended as specified in the **lpBlob** member of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure returned in *lpqsResults*.</span></span> <span data-ttu-id="d5408-155">Essas estruturas de **\_ blob NLA** podem ser encadeadas e podem ser enumeradas atravessando a lista enquanto o NLA \_ BLOB. Header. nextOffset é diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="d5408-155">These **NLA\_BLOB** structures may be chained, and can be enumerated by traversing the list while NLA\_BLOB.header.nextOffset is nonzero.</span></span> <span data-ttu-id="d5408-156">Para obter os resultados de todas as informações de local de rede, continue chamando o [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), a função até que o WSA \_ E \_ nenhum \_ erro seja retornado, conforme explicado na página de referência **WSALookupServiceNext**.</span><span class="sxs-lookup"><span data-stu-id="d5408-156">To obtain results for all network location information, continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until the WSA\_E\_NO\_MORE error is returned, as explained in the **WSALookupServiceNext**, reference page.</span></span>

<span data-ttu-id="d5408-157">A função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) também é usada em conjunto com a função [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) para receber notificações de alterações de rede.</span><span class="sxs-lookup"><span data-stu-id="d5408-157">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function is also used in conjunction with the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to receive notification of network changes.</span></span> <span data-ttu-id="d5408-158">Consulte [notificação de NLA](notification-from-nla-2.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="d5408-158">See [Notification from NLA](notification-from-nla-2.md) for more information.</span></span>

<span data-ttu-id="d5408-159">A NLA retorna zero após a conclusão bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="d5408-159">NLA returns zero upon successful completion.</span></span> <span data-ttu-id="d5408-160">Os clientes de NLA devem continuar chamando o [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), a função até que o WSA \_ E \_ não \_ mais seja retornado, indicando que todas as informações sobre redes disponíveis foram retornadas.</span><span class="sxs-lookup"><span data-stu-id="d5408-160">Clients of NLA should continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until WSA\_E\_NO\_MORE is returned, indicating that all of the information about available networks has been returned.</span></span>

<span data-ttu-id="d5408-161">Caso contrário, chamar o [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), a função para NLA dá suporte aos seguintes códigos de erro.</span><span class="sxs-lookup"><span data-stu-id="d5408-161">Otherwise, calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function for NLA supports the following error codes.</span></span>

| <span data-ttu-id="d5408-162">Erro</span><span class="sxs-lookup"><span data-stu-id="d5408-162">Error</span></span>                    | <span data-ttu-id="d5408-163">Significado</span><span class="sxs-lookup"><span data-stu-id="d5408-163">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d5408-164">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d5408-164">WSANOTINITIALISED</span></span>        | <span data-ttu-id="d5408-165">Uma chamada bem-sucedida para a função [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) que iniciou a NLA não foi executada.</span><span class="sxs-lookup"><span data-stu-id="d5408-165">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function that initialized NLA was not performed.</span></span>                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="d5408-166">\_identificador inválido de WSA \_</span><span class="sxs-lookup"><span data-stu-id="d5408-166">WSA\_INVALID\_HANDLE</span></span>     | <span data-ttu-id="d5408-167">O identificador de pesquisa fornecido no parâmetro *HLOOKUP* não era um identificador válido de SP do NLA.</span><span class="sxs-lookup"><span data-stu-id="d5408-167">The lookup handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span> <span data-ttu-id="d5408-168">Os clientes devem primeiro chamar a função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) e receber um identificador válido do NLA SP para obter os resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="d5408-168">Clients must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function and receive a valid NLA SP handle to obtain query results.</span></span>                                                                                                                                                               |
| <span data-ttu-id="d5408-169">WSAESYSNOTREADY</span><span class="sxs-lookup"><span data-stu-id="d5408-169">WSAESYSNOTREADY</span></span>          | <span data-ttu-id="d5408-170">O serviço NLA não está disponível para processar essa solicitação.</span><span class="sxs-lookup"><span data-stu-id="d5408-170">The NLA service is unavailable to process this request.</span></span>                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="d5408-171">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="d5408-171">WSAEFAULT</span></span>                | <span data-ttu-id="d5408-172">O tamanho do buffer especificado no parâmetro *lpdwBufferLength* não era suficiente para manter os resultados apontados por *lpqsResults*.</span><span class="sxs-lookup"><span data-stu-id="d5408-172">The buffer size specified in the *lpdwBufferLength* parameter was insufficient to hold the results pointed to by *lpqsResults*.</span></span> <span data-ttu-id="d5408-173">O buffer necessário é especificado em *lpdwBufferLength*; Se o cliente não puder fornecer um buffer suficientemente grande, o cliente poderá chamar a função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) com *DWCONTROLFLAGS* definido como Lup \_ FLUSHPREVIOUS para ignorar a entrada.</span><span class="sxs-lookup"><span data-stu-id="d5408-173">The required buffer is specified in *lpdwBufferLength*; if the client cannot supply a sufficiently large buffer, the client can call the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function with *dwControlFlags* set to LUP\_FLUSHPREVIOUS to skip the entry.</span></span> |
| <span data-ttu-id="d5408-174">o WSA \_ não tem \_ \_ memória suficiente</span><span class="sxs-lookup"><span data-stu-id="d5408-174">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="d5408-175">A NLA não pode obter informações de rede do serviço de sistema NLA devido à memória insuficiente no processo de chamada.</span><span class="sxs-lookup"><span data-stu-id="d5408-175">NLA is unable to obtain network information from the NLA system service due to insufficient memory in the calling process.</span></span>                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="d5408-176">CABEÇALHO \_ E \_ não \_ mais</span><span class="sxs-lookup"><span data-stu-id="d5408-176">WSA\_E\_NO\_MORE</span></span>         | <span data-ttu-id="d5408-177">Não há redes adicionais a serem enumeradas para a consulta.</span><span class="sxs-lookup"><span data-stu-id="d5408-177">There are no additional networks to enumerate for the query.</span></span>                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="step-3-terminate-the-query"></a><span data-ttu-id="d5408-178">Etapa 3: encerrar a consulta</span><span class="sxs-lookup"><span data-stu-id="d5408-178">Step 3: Terminate the Query</span></span>

<span data-ttu-id="d5408-179">Quando todas as consultas para NLA são concluídas e um aplicativo não requer mais o uso de NLA, uma chamada para a função [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) deve ser feita.</span><span class="sxs-lookup"><span data-stu-id="d5408-179">When all queries to NLA are complete and an application no longer requires use of NLA, a call to the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function should be made.</span></span> <span data-ttu-id="d5408-180">Não chame **WSALookupServiceEnd** se o aplicativo receber a notificação de alteração com base na consulta enviada.</span><span class="sxs-lookup"><span data-stu-id="d5408-180">Do not call **WSALookupServiceEnd** if the application will receive change notification based on the submitted query.</span></span> <span data-ttu-id="d5408-181">Consulte [notificação de NLA](notification-from-nla-2.md) para obter mais informações sobre como receber notificações.</span><span class="sxs-lookup"><span data-stu-id="d5408-181">See [Notification from NLA](notification-from-nla-2.md) for more information on receiving notification.</span></span> <span data-ttu-id="d5408-182">Assim como a maioria dos provedores do Windows Sockets Service, a NLA mantém uma contagem de referência para seus clientes.</span><span class="sxs-lookup"><span data-stu-id="d5408-182">Like most Windows Sockets service providers, NLA maintains a reference count for its clients.</span></span> <span data-ttu-id="d5408-183">Chamar a função **WSALookupServiceEnd** quando as consultas para NLA são concluídas permite que os recursos do sistema não sejam mais exigidos pelo NLA para serem liberados.</span><span class="sxs-lookup"><span data-stu-id="d5408-183">Calling the **WSALookupServiceEnd** function when queries to NLA are completed enables system resources no longer required by NLA to be freed.</span></span>

<span data-ttu-id="d5408-184">O NLA dá suporte aos seguintes códigos de erro para chamadas de função [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="d5408-184">NLA supports the following error codes for [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function calls.</span></span>

| <span data-ttu-id="d5408-185">Erro</span><span class="sxs-lookup"><span data-stu-id="d5408-185">Error</span></span>                | <span data-ttu-id="d5408-186">Significado</span><span class="sxs-lookup"><span data-stu-id="d5408-186">Meaning</span></span>                                                                                                   |
|----------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d5408-187">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="d5408-187">WSANOTINITIALISED</span></span>    | <span data-ttu-id="d5408-188">Uma chamada bem-sucedida para a função [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) para inicializar o NLA não foi executada.</span><span class="sxs-lookup"><span data-stu-id="d5408-188">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span> |
| <span data-ttu-id="d5408-189">\_identificador inválido de WSA \_</span><span class="sxs-lookup"><span data-stu-id="d5408-189">WSA\_INVALID\_HANDLE</span></span> | <span data-ttu-id="d5408-190">O identificador fornecido no parâmetro *HLOOKUP* não era um identificador válido de SP do NLA.</span><span class="sxs-lookup"><span data-stu-id="d5408-190">The handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span>                             |



 

 

 



