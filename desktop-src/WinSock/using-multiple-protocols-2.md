---
description: Um aplicativo usa a função WSAEnumProtocols para determinar quais protocolos de transporte e cadeias de protocolo estão presentes e para obter informações sobre cada um conforme contido na estrutura de informações do WSAPROTOCOL associada \_ .
ms.assetid: 4f38cb07-d824-4d43-abd8-89d58dc15810
title: Usando vários protocolos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab9a37dcc90f1094126f701641539dd3f26a1a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090352"
---
# <a name="using-multiple-protocols"></a><span data-ttu-id="ee84a-103">Usando vários protocolos</span><span class="sxs-lookup"><span data-stu-id="ee84a-103">Using Multiple Protocols</span></span>

<span data-ttu-id="ee84a-104">Um aplicativo usa a função [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) para determinar quais protocolos de transporte e cadeias de protocolo estão presentes e para obter informações sobre cada um conforme contido na estrutura de [**\_ informações do WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) associada.</span><span class="sxs-lookup"><span data-stu-id="ee84a-104">An application uses the [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) function to determine which transport protocols and protocol chains are present, and to obtain information about each as contained in the associated [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span>

<span data-ttu-id="ee84a-105">Na maioria dos casos, há uma única estrutura de [**\_ informações de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) para cada protocolo ou cadeia de protocolos.</span><span class="sxs-lookup"><span data-stu-id="ee84a-105">In most instances, there is a single [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for each protocol or protocol chain.</span></span> <span data-ttu-id="ee84a-106">No entanto, alguns protocolos apresentam vários comportamentos.</span><span class="sxs-lookup"><span data-stu-id="ee84a-106">However, some protocols exhibit multiple behaviors.</span></span> <span data-ttu-id="ee84a-107">Por exemplo, o protocolo SPX é orientado a mensagens (ou seja, os limites de mensagem do remetente são preservados pela rede), mas o soquete de recebimento pode ignorar esses limites de mensagem e tratá-los como um fluxo de bytes.</span><span class="sxs-lookup"><span data-stu-id="ee84a-107">For example, the SPX protocol is message oriented (that is, the sender's message boundaries are preserved by the network), but the receiving socket can ignore these message boundaries and treat them as a byte stream.</span></span> <span data-ttu-id="ee84a-108">Portanto, duas entradas de estrutura de **\_ informações de WSAPROTOCOL** diferentes podem existir para o SPX — uma para cada comportamento.</span><span class="sxs-lookup"><span data-stu-id="ee84a-108">Thus, two different **WSAPROTOCOL\_INFO** structure entries could exist for SPX—one for each behavior.</span></span>

<span data-ttu-id="ee84a-109">No Windows Sockets 2, vários novos valores de família de endereços, tipos de soquete e protocolo são exibidos.</span><span class="sxs-lookup"><span data-stu-id="ee84a-109">In Windows Sockets 2, several new address family, socket type, and protocol values appear.</span></span> <span data-ttu-id="ee84a-110">O Windows Sockets 1,1 oferecia suporte a uma única família de endereços (série AF \_ ) para IPv4 que consistia em um pequeno número de tipos de soquete e identificadores de protocolo bem conhecidos.</span><span class="sxs-lookup"><span data-stu-id="ee84a-110">Windows Sockets 1.1 supported a single address family (AF\_INET) for IPv4 that consisted of a small number of well-known socket types and protocol identifiers.</span></span> <span data-ttu-id="ee84a-111">O Windows Sockets 2 retém a família de endereços existente, o tipo de soquete e os identificadores de protocolo por motivos de compatibilidade, mas também oferece suporte a novos valores de família de endereços para novos protocolos de transporte com novos tipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="ee84a-111">Windows Sockets 2 retains the existing address family, socket type, and protocol identifiers for compatibility reasons, but it also supports new address family values for new transport protocols with new media types.</span></span>

<span data-ttu-id="ee84a-112">Os identificadores novos e exclusivos não são necessariamente bem conhecidos, mas isso não deve representar um problema.</span><span class="sxs-lookup"><span data-stu-id="ee84a-112">New, unique identifiers are not necessarily well known, but this should not pose a problem.</span></span> <span data-ttu-id="ee84a-113">Os aplicativos que precisam ser independentes de protocolo são incentivados a selecionar um protocolo com base em sua adequação, em vez dos valores atribuídos aos seus parâmetros de *protocolo* ou *\_ tipo de soquete* .</span><span class="sxs-lookup"><span data-stu-id="ee84a-113">Applications that need to be protocol-independent are encouraged to select a protocol on the basis of its suitability rather than the values assigned to their *socket\_type* or *protocol* parameters.</span></span> <span data-ttu-id="ee84a-114">A adequação de protocolo é indicada pelos atributos de comunicação, como fluxo de mensagens e de bytes, e confiabilidade-versus-não confiável, que estão contidos na estrutura de [**\_ informações de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) de protocolo.</span><span class="sxs-lookup"><span data-stu-id="ee84a-114">Protocol suitability is indicated by the communications attributes, such as message-versus-byte stream, and reliable-versus-unreliable, that are contained in the protocol [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="ee84a-115">A seleção de protocolos com base em adequação, em oposição aos nomes de protocolo e tipos de soquete conhecidos, permite que aplicativos independentes de protocolo aproveitem os novos protocolos de transporte e seus tipos de mídia associados, pois eles se tornam disponíveis.</span><span class="sxs-lookup"><span data-stu-id="ee84a-115">Selecting protocols on the basis of suitability as opposed to well-known protocol names and socket types lets protocol-independent applications take advantage of new transport protocols and their associated media types, as they become available.</span></span>

<span data-ttu-id="ee84a-116">A metade do servidor de um aplicativo cliente/servidor beneficia-se estabelecendo soquetes de escuta em todos os protocolos de transporte adequados.</span><span class="sxs-lookup"><span data-stu-id="ee84a-116">The server half of a client/server application benefits by establishing listening sockets on all suitable transport protocols.</span></span> <span data-ttu-id="ee84a-117">Em seguida, o cliente pode estabelecer sua conexão usando qualquer protocolo adequado.</span><span class="sxs-lookup"><span data-stu-id="ee84a-117">Then, the client can establish its connection using any suitable protocol.</span></span> <span data-ttu-id="ee84a-118">Por exemplo, isso permitiria que um aplicativo cliente fosse cancelado se estava sendo executado em um sistema de desktop conectado por meio de LAN ou em um laptop usando uma rede sem fio.</span><span class="sxs-lookup"><span data-stu-id="ee84a-118">For example, this would let a client application be unmodified whether it was running on a desktop system connected through LAN or on a laptop using a wireless network.</span></span>

 

 
