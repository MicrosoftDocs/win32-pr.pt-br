---
description: O NLA é capaz de fornecer aos clientes notificação de alterações de local de rede. O mecanismo usado para solicitar a notificação de eventos de alteração é uma combinação das funções WSALookupServiceBegin, WSANSPIoctl e WSALookupServiceNext.
ms.assetid: fed5a90d-0bc5-46e7-b3d3-edc4b303d305
title: Notificação do NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13ee0ad0530725db27c8f5df39b6fc573f7e97c4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501680"
---
# <a name="notification-from-nla"></a><span data-ttu-id="d1f30-104">Notificação do NLA</span><span class="sxs-lookup"><span data-stu-id="d1f30-104">Notification from NLA</span></span>

<span data-ttu-id="d1f30-105">O NLA é capaz de fornecer aos clientes notificação de alterações de local de rede.</span><span class="sxs-lookup"><span data-stu-id="d1f30-105">NLA is capable of providing its clients with notification of network location changes.</span></span> <span data-ttu-id="d1f30-106">O mecanismo usado para solicitar a notificação de eventos de alteração é uma combinação das funções [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl)e [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="d1f30-106">The mechanism used to request notification of change events is a combination of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl), and [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) functions.</span></span>

<span data-ttu-id="d1f30-107">Para receber notificação de alteração da NLA, um cliente deve primeiro chamar o [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) para obter um identificador de pesquisa do NLA SP válido.</span><span class="sxs-lookup"><span data-stu-id="d1f30-107">In order to receive change notification from NLA, a client must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) to obtain a valid NLA SP lookup handle.</span></span> <span data-ttu-id="d1f30-108">Em seguida, o cliente pode chamar [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) ou [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) em qualquer ordem; para se registrar para notificação, chame a função **WSANSPIoctl** com o \_ código de controle de alteração sio NSP \_ notificar \_ definido no parâmetro *dwControlCode* .</span><span class="sxs-lookup"><span data-stu-id="d1f30-108">Next, the client can call [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) or [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in any order; to register for notification, call the **WSANSPIoctl** function with the SIO\_NSP\_NOTIFY\_CHANGE control code set in the *dwControlCode* parameter.</span></span>

<span data-ttu-id="d1f30-109">A função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) retorna WSA \_ E \_ não \_ mais como um delimitador de conjunto.</span><span class="sxs-lookup"><span data-stu-id="d1f30-109">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function returns WSA\_E\_NO\_MORE as a set delimiter.</span></span> <span data-ttu-id="d1f30-110">Quando um cliente tiver se registrado para notificação usando a função [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) e **WSALOOKUPSERVICENEXT** retornar o WSA \_ e \_ não \_ mais, chamar **WSALookupServiceNext** novamente revela se uma alteração ocorreu:</span><span class="sxs-lookup"><span data-stu-id="d1f30-110">When a client has registered for notification using the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function and **WSALookupServiceNext** returns WSA\_E\_NO\_MORE, calling **WSALookupServiceNext** again reveals whether a change has occurred:</span></span>

-   <span data-ttu-id="d1f30-111">Se nenhuma alteração ocorreu desde o WSA \_ e \_ não mais anterior \_ , o WSA \_ e \_ não \_ mais será retornado.</span><span class="sxs-lookup"><span data-stu-id="d1f30-111">If no changes have occurred since the previous WSA\_E\_NO\_MORE, WSA\_E\_NO\_MORE is returned.</span></span>
-   <span data-ttu-id="d1f30-112">Se uma alteração tiver ocorrido ou se uma alteração tiver ocorrido e uma chamada de sondagem for feita, a chamada de função [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) retornará redes como estruturas [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) , com um dos seguintes sinalizadores definidos em seu membro **dwOutputFlags** :</span><span class="sxs-lookup"><span data-stu-id="d1f30-112">If a change has occurred, or if a change has occurred and a polling call is made, the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function call returns networks as [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structures, with one of the following flags set in its **dwOutputFlags** member:</span></span>

    <dl> <span data-ttu-id="d1f30-113">o resultado \_ é \_ adicionado</span><span class="sxs-lookup"><span data-stu-id="d1f30-113">RESULT\_IS\_ADDED</span></span>  
    <span data-ttu-id="d1f30-114">o resultado \_ é \_ alterado</span><span class="sxs-lookup"><span data-stu-id="d1f30-114">RESULT\_IS\_CHANGED</span></span>  
    <span data-ttu-id="d1f30-115">o resultado \_ é \_ excluído</span><span class="sxs-lookup"><span data-stu-id="d1f30-115">RESULT\_IS\_DELETED</span></span>  
    </dl>

<span data-ttu-id="d1f30-116">A notificação de alteração é fornecida para todos os campos que foram alterados desde que o identificador de pesquisa NLA foi obtido com a chamada de função [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) , ou desde a última enumeração que resultou no \_ erro WSA E \_ não \_ mais.</span><span class="sxs-lookup"><span data-stu-id="d1f30-116">Change notification is provided for any fields that changed since the NLA lookup handle was obtained with the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call, or since the last enumeration that resulted in the WSA\_E\_NO\_MORE error.</span></span> <span data-ttu-id="d1f30-117">Quando todas as informações de local de rede alteradas são fornecidas, o WSA \_ E \_ não \_ mais é retornado.</span><span class="sxs-lookup"><span data-stu-id="d1f30-117">When all changed network location information is provided, WSA\_E\_NO\_MORE is returned.</span></span> <span data-ttu-id="d1f30-118">Os clientes podem reemitir uma chamada de função [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) no mesmo identificador de consulta a qualquer momento, uma de cada vez, com o \_ sinalizador de alteração sio NSP \_ notificar \_ .</span><span class="sxs-lookup"><span data-stu-id="d1f30-118">Clients can reissue a [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function call on the same query handle at any time, one at a time, with the SIO\_NSP\_NOTIFY\_CHANGE flag set.</span></span> <span data-ttu-id="d1f30-119">Esse recurso permite que um cliente recicle o identificador de consulta em uma base contínua, aliviando, assim, que o cliente precise manter informações de estado de alteração por conta própria.</span><span class="sxs-lookup"><span data-stu-id="d1f30-119">This capability enables a client to recycle the query handle on an ongoing basis, thereby relieving the client from having to maintain change-state information on its own.</span></span> <span data-ttu-id="d1f30-120">Quando um cliente não precisar mais de notificações de alteração, ele deverá fechar o identificador de consulta usando a função [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="d1f30-120">Once a client no longer needs change notifications, it should close the query handle using the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function.</span></span>

 

 



