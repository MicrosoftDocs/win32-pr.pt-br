---
description: 'Várias opções estão disponíveis para receber indicações de conclusão, fornecendo assim aplicativos com níveis apropriados de flexibilidade. Isso inclui: aguardando (ou bloqueando) em objetos de evento, objetos de evento de sondagem e rotinas de conclusão de e/s de soquete.'
ms.assetid: 071cf198-6b4c-445e-9bd9-044f57f994a3
title: Indicações de conclusão de recebimento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd05d8297af17c26393b5db113fac283b39fcbb3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105771617"
---
# <a name="receiving-completion-indications"></a><span data-ttu-id="9b330-104">Indicações de conclusão de recebimento</span><span class="sxs-lookup"><span data-stu-id="9b330-104">Receiving Completion Indications</span></span>

<span data-ttu-id="9b330-105">Várias opções estão disponíveis para receber indicações de conclusão, fornecendo assim aplicativos com níveis apropriados de flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="9b330-105">Several options are available for receiving completion indications, thus providing applications with appropriate levels of flexibility.</span></span> <span data-ttu-id="9b330-106">Isso inclui: aguardando (ou bloqueando) em objetos de evento, objetos de evento de sondagem e rotinas de conclusão de e/s de soquete.</span><span class="sxs-lookup"><span data-stu-id="9b330-106">These include: waiting (or blocking) on event objects, polling event objects, and socket I/O completion routines.</span></span>

## <a name="blocking-and-waiting-for-completion-indication"></a><span data-ttu-id="9b330-107">Bloqueando e aguardando indicação de conclusão</span><span class="sxs-lookup"><span data-stu-id="9b330-107">Blocking and Waiting for Completion Indication</span></span>

<span data-ttu-id="9b330-108">Os aplicativos podem ser bloqueados enquanto aguardam a definição de um ou mais objetos de evento usando a função [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) .</span><span class="sxs-lookup"><span data-stu-id="9b330-108">Applications can block while waiting for one or more event objects to become set using the [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) function.</span></span> <span data-ttu-id="9b330-109">Em implementações do Windows, o processo ou thread realmente bloqueia.</span><span class="sxs-lookup"><span data-stu-id="9b330-109">In Windows implementations, the process or thread truly blocks.</span></span> <span data-ttu-id="9b330-110">Como os objetos de evento do Windows Sockets 2 são implementados como eventos do Windows, a função nativa do Windows, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) também pode ser usada para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="9b330-110">Since Windows Sockets 2 event objects are implemented as Windows events, the native Windows function, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) can also be used for this purpose.</span></span> <span data-ttu-id="9b330-111">Isso é especialmente útil se o thread precisar aguardar em eventos de soquete e não soquete.</span><span class="sxs-lookup"><span data-stu-id="9b330-111">This is especially useful if the thread needs to wait on both socket and nonsocket events.</span></span>

## <a name="polling-for-completion-indication"></a><span data-ttu-id="9b330-112">Sondando a indicação de conclusão</span><span class="sxs-lookup"><span data-stu-id="9b330-112">Polling for Completion Indication</span></span>

<span data-ttu-id="9b330-113">Aplicativos que preferem não bloquear podem usar a função [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) para sondar o status de conclusão associado a qualquer objeto de evento específico.</span><span class="sxs-lookup"><span data-stu-id="9b330-113">Applications that prefer not to block can use the [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) function to poll for the completion status associated with any particular event object.</span></span> <span data-ttu-id="9b330-114">Essa função indica se a operação sobreposta foi concluída e, se for concluída, organiza a função [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) para recuperar o status de erro da operação sobreposta.</span><span class="sxs-lookup"><span data-stu-id="9b330-114">This function indicates whether or not the overlapped operation has completed, and if completed, arranges for the [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) function to retrieve the error status of the overlapped operation.</span></span>

## <a name="using-socket-io-completion-routines"></a><span data-ttu-id="9b330-115">Usando rotinas de conclusão de e/s de soquete</span><span class="sxs-lookup"><span data-stu-id="9b330-115">Using Socket I/O Completion Routines</span></span>

<span data-ttu-id="9b330-116">As funções usadas para iniciar e/s sobreposta ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) têm *lpCompletionRoutine* como um parâmetro de entrada opcional.</span><span class="sxs-lookup"><span data-stu-id="9b330-116">The functions used to initiate overlapped I/O ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) all take *lpCompletionRoutine* as an optional input parameter.</span></span> <span data-ttu-id="9b330-117">Este é um ponteiro para uma função específica do aplicativo que é chamada após a conclusão bem-sucedida da operação de e/s sobreposta (com êxito ou de outra forma).</span><span class="sxs-lookup"><span data-stu-id="9b330-117">This is a pointer to an application-specific function that is called after a successfully initiated overlapped I/O operation completes (successfully or otherwise).</span></span> <span data-ttu-id="9b330-118">A rotina de conclusão segue as mesmas regras que estipuladas para rotinas de conclusão de e/s de arquivo do Windows.</span><span class="sxs-lookup"><span data-stu-id="9b330-118">The completion routine follows the same rules as stipulated for Windows file I/O completion routines.</span></span> <span data-ttu-id="9b330-119">Ou seja, a rotina de conclusão não é invocada até que o thread esteja em um estado de espera alertável, como quando a função [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) é invocada com o `fAlertable` sinalizador definido.</span><span class="sxs-lookup"><span data-stu-id="9b330-119">That is, the completion routine is not invoked until the thread is in an alertable wait state, such as when the function [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) is invoked with the `fAlertable` flag set.</span></span> <span data-ttu-id="9b330-120">Um aplicativo que usa a opção de rotina de conclusão para uma determinada solicitação de e/s sobreposta pode não usar a opção de espera de [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) para essa mesma solicitação de e/s sobreposta.</span><span class="sxs-lookup"><span data-stu-id="9b330-120">An application that uses the completion routine option for a particular overlapped I/O request may not use the wait option of [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) for that same overlapped I/O request.</span></span>

<span data-ttu-id="9b330-121">Os transportes permitem que um aplicativo invoque operações de envio e recebimento de dentro do contexto da rotina de conclusão de e/s de soquete e garante que, para um determinado soquete, as rotinas de conclusão de e/s não serão aninhadas.</span><span class="sxs-lookup"><span data-stu-id="9b330-121">The transports allow an application to invoke send and receive operations from within the context of the socket I/O completion routine and guarantee that, for a given socket, I/O completion routines will not be nested.</span></span> <span data-ttu-id="9b330-122">Isso permite que as transmissões de dados sensíveis ao tempo ocorram inteiramente dentro de um contexto Preemptive.</span><span class="sxs-lookup"><span data-stu-id="9b330-122">This permits time-sensitive data transmissions to occur entirely within a preemptive context.</span></span>

## <a name="summary-of-overlapped-completion-indication-mechanisms"></a><span data-ttu-id="9b330-123">Resumo dos mecanismos de indicação de conclusão sobreposta</span><span class="sxs-lookup"><span data-stu-id="9b330-123">Summary of Overlapped Completion Indication Mechanisms</span></span>

<span data-ttu-id="9b330-124">A determinada indicação de conclusão de e/s sobreposta a ser usada para uma determinada operação sobreposta é determinada pelo fato de o aplicativo fornecer um ponteiro para uma função de conclusão, se uma estrutura [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) é referenciada e pelo valor do membro **hEvent** dentro da estrutura **WSAOVERLAPPED** (se fornecida).</span><span class="sxs-lookup"><span data-stu-id="9b330-124">The particular overlapped I/O completion indication to be used for a given overlapped operation is determined by whether the application supplies a pointer to a completion function, whether a [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) structure is referenced, and by the value of the **hEvent** member within the **WSAOVERLAPPED** structure (if supplied).</span></span> <span data-ttu-id="9b330-125">A tabela a seguir resume a semântica de conclusão para um Soquete sobreposto e mostra as várias combinações de *lpOverlapped*, **hEvent** e *lpCompletionRoutine*:</span><span class="sxs-lookup"><span data-stu-id="9b330-125">The following table summarizes the completion semantics for an overlapped socket and shows the various combinations of *lpOverlapped*, **hEvent**, and *lpCompletionRoutine*:</span></span>

| <span data-ttu-id="9b330-126">*lpOverlapped*</span><span class="sxs-lookup"><span data-stu-id="9b330-126">*lpOverlapped*</span></span> | <span data-ttu-id="9b330-127">hEvent</span><span class="sxs-lookup"><span data-stu-id="9b330-127">hEvent</span></span>         | <span data-ttu-id="9b330-128">*lpCompletionRoutine*</span><span class="sxs-lookup"><span data-stu-id="9b330-128">*lpCompletionRoutine*</span></span> | <span data-ttu-id="9b330-129">Indicação de conclusão</span><span class="sxs-lookup"><span data-stu-id="9b330-129">Completion indication</span></span>                                                                                                                                                                                                    |
|----------------|----------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9b330-130">NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-130">NULL</span></span>           | <span data-ttu-id="9b330-131">Não aplicável</span><span class="sxs-lookup"><span data-stu-id="9b330-131">Not applicable</span></span> | <span data-ttu-id="9b330-132">Ignored</span><span class="sxs-lookup"><span data-stu-id="9b330-132">Ignored</span></span>               | <span data-ttu-id="9b330-133">A operação é concluída de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="9b330-133">Operation completes synchronously.</span></span> <span data-ttu-id="9b330-134">Ele se comporta como se fosse um soquete não sobreposto.</span><span class="sxs-lookup"><span data-stu-id="9b330-134">It behaves as if it were a nonoverlapped socket.</span></span>                                                                                                                                      |
| <span data-ttu-id="9b330-135">! NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-135">!NULL</span></span>          | <span data-ttu-id="9b330-136">NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-136">NULL</span></span>           | <span data-ttu-id="9b330-137">NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-137">NULL</span></span>                  | <span data-ttu-id="9b330-138">A operação é concluída sobreposta, mas não há nenhum mecanismo de conclusão com suporte do Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="9b330-138">Operation completes overlapped, but there is no Windows Sockets 2-supported completion mechanism.</span></span> <span data-ttu-id="9b330-139">O mecanismo de porta de conclusão (se houver suporte) pode ser usado nesse caso.</span><span class="sxs-lookup"><span data-stu-id="9b330-139">The completion port mechanism (if supported) can be used in this case.</span></span> <span data-ttu-id="9b330-140">Caso contrário, não haverá nenhuma notificação de conclusão.</span><span class="sxs-lookup"><span data-stu-id="9b330-140">Otherwise, there is no completion notification.</span></span> |
| <span data-ttu-id="9b330-141">! NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-141">!NULL</span></span>          | <span data-ttu-id="9b330-142">! NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-142">!NULL</span></span>          | <span data-ttu-id="9b330-143">NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-143">NULL</span></span>                  | <span data-ttu-id="9b330-144">A operação é concluída sobreposta, notificação por objeto de evento de sinalização.</span><span class="sxs-lookup"><span data-stu-id="9b330-144">Operation completes overlapped, notification by signaling event object.</span></span>                                                                                                                                                  |
| <span data-ttu-id="9b330-145">! NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-145">!NULL</span></span>          | <span data-ttu-id="9b330-146">Ignored</span><span class="sxs-lookup"><span data-stu-id="9b330-146">Ignored</span></span>        | <span data-ttu-id="9b330-147">! NULO</span><span class="sxs-lookup"><span data-stu-id="9b330-147">!NULL</span></span>                 | <span data-ttu-id="9b330-148">A operação é concluída sobreposta, notificação pela rotina de conclusão do agendamento.</span><span class="sxs-lookup"><span data-stu-id="9b330-148">Operation completes overlapped, notification by scheduling completion routine.</span></span>                                                                                                                                           |



 

 

 
