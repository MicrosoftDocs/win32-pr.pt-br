---
description: O Windows Sockets permite a descoberta de ouvinte multicast (MLD) no IPv6 e o protocolo IGMP no IPv4 para aplicativos multicast por meio do uso de opções de soquete e de IOCTLs.
ms.assetid: a5de4273-e86e-4f13-b068-256cb38706d4
title: MLD e IGMP usando soquetes do Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6cb9f9c345463e283adea0136037d7ccd03cebd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104164470"
---
# <a name="mld-and-igmp-using-windows-sockets"></a><span data-ttu-id="51989-103">MLD e IGMP usando soquetes do Windows</span><span class="sxs-lookup"><span data-stu-id="51989-103">MLD and IGMP Using Windows Sockets</span></span>

<span data-ttu-id="51989-104">O Windows Sockets permite a descoberta de ouvinte multicast (MLD) no IPv6 e o protocolo IGMP no IPv4 para aplicativos multicast por meio do uso de opções de soquete e de IOCTLs.</span><span class="sxs-lookup"><span data-stu-id="51989-104">Windows Sockets enables the Multicast Listener Discovery (MLD) on IPv6 and the Internet Group Management Protocol (IGMP) on IPv4 for multicast applications through the use of socket options and IOCTLs.</span></span> <span data-ttu-id="51989-105">Esta página descreve as opções de soquete que habilitam a programação de multicast e descreve como elas são usadas.</span><span class="sxs-lookup"><span data-stu-id="51989-105">This page describes the socket options that enable multicast programming, and describes how they are used.</span></span> <span data-ttu-id="51989-106">Para obter definições de cada opção de soquete, consulte a página [Opções de soquete](socket-options.md) .</span><span class="sxs-lookup"><span data-stu-id="51989-106">For definitions of each socket option, consult the [Socket Options](socket-options.md) page.</span></span>

<span data-ttu-id="51989-107">Para obter informações sobre como usar os IOCTLs para programação de multicast, consulte [programação de multicast com base no estado final](final-state-based-multicast-programming.md) mais adiante nesta seção.</span><span class="sxs-lookup"><span data-stu-id="51989-107">For information on using IOCTLs for multicast programming, see [Final-State-Based Multicast Programming](final-state-based-multicast-programming.md) later in this section.</span></span>

<span data-ttu-id="51989-108">No Windows Vista e posterior, um conjunto de opções de soquete está disponível para programação de multicast que dá suporte a endereços IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="51989-108">On Windows Vista and later, a set of socket options are available for multicast programming that support IPv6 and IPv4 addresses.</span></span> <span data-ttu-id="51989-109">Essas opções de soquete são independentes de IP e podem ser usadas no IPv6 e no IPv4.</span><span class="sxs-lookup"><span data-stu-id="51989-109">These socket options are IP agnostic and can be used on both IPv6 and IPv4.</span></span> <span data-ttu-id="51989-110">No IPv6, essas opções de soquete usam o MLDv2.</span><span class="sxs-lookup"><span data-stu-id="51989-110">On IPv6, these socket options use MLDv2.</span></span> <span data-ttu-id="51989-111">No IPv4, essas opções de soquete usam IGMPv3.</span><span class="sxs-lookup"><span data-stu-id="51989-111">On IPv4, these socket options use IGMPv3.</span></span> <span data-ttu-id="51989-112">Essas opções independentes de IP são as opções de soquete preferenciais para programação multicast no Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="51989-112">These IP agnostic options are the preferred socket options for multicast programming on Windows Vista and later.</span></span> <span data-ttu-id="51989-113">O Windows Sockets usa as seguintes opções de soquete:</span><span class="sxs-lookup"><span data-stu-id="51989-113">Windows Sockets uses the following socket options:</span></span> 

| <span data-ttu-id="51989-114">Opção de soquete</span><span class="sxs-lookup"><span data-stu-id="51989-114">Socket option</span></span>               | <span data-ttu-id="51989-115">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="51989-115">Argument type</span></span>                                            |
|-----------------------------|----------------------------------------------------------|
| <span data-ttu-id="51989-116">\_origem do bloco mcast \_</span><span class="sxs-lookup"><span data-stu-id="51989-116">MCAST\_BLOCK\_SOURCE</span></span>        | <span data-ttu-id="51989-117">[**Grupo \_ Estrutura de \_ req de origem**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req)</span><span class="sxs-lookup"><span data-stu-id="51989-117">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="51989-118">\_grupo de junção mcast \_</span><span class="sxs-lookup"><span data-stu-id="51989-118">MCAST\_JOIN\_GROUP</span></span>          | <span data-ttu-id="51989-119">[**Grupo \_**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) Estrutura de req.</span><span class="sxs-lookup"><span data-stu-id="51989-119">[**GROUP\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) structure</span></span>                |
| <span data-ttu-id="51989-120">\_grupo de \_ origem de ingresso mcast \_</span><span class="sxs-lookup"><span data-stu-id="51989-120">MCAST\_JOIN\_SOURCE\_GROUP</span></span>  | <span data-ttu-id="51989-121">[**Grupo \_ Estrutura de \_ req de origem**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req)</span><span class="sxs-lookup"><span data-stu-id="51989-121">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="51989-122">MCAST \_ sair do \_ grupo</span><span class="sxs-lookup"><span data-stu-id="51989-122">MCAST\_LEAVE\_GROUP</span></span>         | <span data-ttu-id="51989-123">[**Grupo \_**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) Estrutura de req.</span><span class="sxs-lookup"><span data-stu-id="51989-123">[**GROUP\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) structure</span></span>                |
| <span data-ttu-id="51989-124">MCAST \_ sair \_ do \_ grupo de origem</span><span class="sxs-lookup"><span data-stu-id="51989-124">MCAST\_LEAVE\_SOURCE\_GROUP</span></span> | <span data-ttu-id="51989-125">[**Grupo \_ Estrutura de \_ req de origem**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req)</span><span class="sxs-lookup"><span data-stu-id="51989-125">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="51989-126">\_origem de desbloqueio mcast \_</span><span class="sxs-lookup"><span data-stu-id="51989-126">MCAST\_UNBLOCK\_SOURCE</span></span>      | <span data-ttu-id="51989-127">[**Grupo \_ Estrutura de \_ req de origem**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req)</span><span class="sxs-lookup"><span data-stu-id="51989-127">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |



 

<span data-ttu-id="51989-128">Um conjunto de opções de soquete está disponível para a programação de multicast que dá suporte apenas a endereços IPv6.</span><span class="sxs-lookup"><span data-stu-id="51989-128">A set of socket options are available for multicast programming that support IPv6 only addresses.</span></span> <span data-ttu-id="51989-129">Essas opções de soquete usam MLDv1 ou MLDv2.</span><span class="sxs-lookup"><span data-stu-id="51989-129">These socket options use MLDv1 or MLDv2.</span></span> <span data-ttu-id="51989-130">A versão do MLD usada depende da versão do Windows.</span><span class="sxs-lookup"><span data-stu-id="51989-130">The version of MLD used is dependent on the version of Windows.</span></span> <span data-ttu-id="51989-131">O MLDv2 tem suporte no Windows Vista e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="51989-131">MLDv2 is supported on Windows Vista and later.</span></span> <span data-ttu-id="51989-132">O Windows Sockets usa as seguintes opções de soquete:</span><span class="sxs-lookup"><span data-stu-id="51989-132">Windows Sockets uses the following socket options:</span></span> 

| <span data-ttu-id="51989-133">Opção de soquete</span><span class="sxs-lookup"><span data-stu-id="51989-133">Socket option</span></span>          | <span data-ttu-id="51989-134">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="51989-134">Argument type</span></span>                             |
|------------------------|-------------------------------------------|
| <span data-ttu-id="51989-135">\_Adicionar \_ Associação de IPv6</span><span class="sxs-lookup"><span data-stu-id="51989-135">IPV6\_ADD\_MEMBERSHIP</span></span>  | <span data-ttu-id="51989-136">estrutura de [**\_ mreq IPv6**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq)</span><span class="sxs-lookup"><span data-stu-id="51989-136">[**ipv6\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq) structure</span></span> |
| <span data-ttu-id="51989-137">\_Associação de remoção de IPv6 \_</span><span class="sxs-lookup"><span data-stu-id="51989-137">IPV6\_DROP\_MEMBERSHIP</span></span> | <span data-ttu-id="51989-138">estrutura de [**\_ mreq IPv6**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq)</span><span class="sxs-lookup"><span data-stu-id="51989-138">[**ipv6\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq) structure</span></span> |



 

<span data-ttu-id="51989-139">Um conjunto de opções de soquete está disponível para programação multicast que oferece suporte a endereços IPv4 somente.</span><span class="sxs-lookup"><span data-stu-id="51989-139">A set of socket options are available for multicast programming that support IPv4 only addresses.</span></span> <span data-ttu-id="51989-140">Essas opções de soquete usam IGMPv3 ou IGMPv2.</span><span class="sxs-lookup"><span data-stu-id="51989-140">These socket options use IGMPv3 or IGMPv2.</span></span> <span data-ttu-id="51989-141">A versão do IGMP usada depende da versão do Windows.</span><span class="sxs-lookup"><span data-stu-id="51989-141">The version of IGMP used is dependent on the version of Windows.</span></span> <span data-ttu-id="51989-142">O IGMPv3 tem suporte no Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="51989-142">IGMPv3 is supported on Windows Vista and later.</span></span> <span data-ttu-id="51989-143">O Windows Sockets usa as seguintes opções de soquete:</span><span class="sxs-lookup"><span data-stu-id="51989-143">Windows Sockets uses the following socket options:</span></span>

| <span data-ttu-id="51989-144">Opção de soquete</span><span class="sxs-lookup"><span data-stu-id="51989-144">Socket option</span></span>                | <span data-ttu-id="51989-145">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="51989-145">Argument type</span></span>                                        |
|------------------------------|------------------------------------------------------|
| <span data-ttu-id="51989-146">\_Adicionar \_ Associação de IP</span><span class="sxs-lookup"><span data-stu-id="51989-146">IP\_ADD\_MEMBERSHIP</span></span>          | <span data-ttu-id="51989-147">estrutura de [**\_ mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq)</span><span class="sxs-lookup"><span data-stu-id="51989-147">[**ip\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq) structure</span></span>                |
| <span data-ttu-id="51989-148">IP \_ Adicionar \_ Associação de origem \_</span><span class="sxs-lookup"><span data-stu-id="51989-148">IP\_ADD\_SOURCE\_MEMBERSHIP</span></span>  | <span data-ttu-id="51989-149">estrutura de [**\_ \_ origem de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="51989-149">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="51989-150">\_origem do bloco de IP \_</span><span class="sxs-lookup"><span data-stu-id="51989-150">IP\_BLOCK\_SOURCE</span></span>            | <span data-ttu-id="51989-151">estrutura de [**\_ \_ origem de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="51989-151">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="51989-152">\_Associação IP drop \_</span><span class="sxs-lookup"><span data-stu-id="51989-152">IP\_DROP\_MEMBERSHIP</span></span>         | <span data-ttu-id="51989-153">estrutura de [**\_ mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq)</span><span class="sxs-lookup"><span data-stu-id="51989-153">[**ip\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq) structure</span></span>                |
| <span data-ttu-id="51989-154">\_Associação de \_ origem IP drop \_</span><span class="sxs-lookup"><span data-stu-id="51989-154">IP\_DROP\_SOURCE\_MEMBERSHIP</span></span> | <span data-ttu-id="51989-155">estrutura de [**\_ \_ origem de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="51989-155">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="51989-156">\_origem de desbloqueio de IP \_</span><span class="sxs-lookup"><span data-stu-id="51989-156">IP\_UNBLOCK\_SOURCE</span></span>          | <span data-ttu-id="51989-157">estrutura de [**\_ \_ origem de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="51989-157">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |



 

<span data-ttu-id="51989-158">Quando o IGMPv3 está disponível, o IP \_ Adicionar \_ Associação de origem, origem do bloco de IP \_ \_ \_ , associação de \_ fonte IP drop \_ \_ e opções de origem de \_ desbloqueio de IP \_ são tratados com mais eficiência, pois o roteador pode manipular a filtragem.</span><span class="sxs-lookup"><span data-stu-id="51989-158">When IGMPv3 is available, the IP\_ADD\_SOURCE\_MEMBERSHIP, IP\_BLOCK\_SOURCE, IP\_DROP\_SOURCE\_MEMBERSHIP, and IP\_UNBLOCK\_SOURCE options are handled more efficiently since the router can handle the filtering.</span></span> <span data-ttu-id="51989-159">Quando apenas IGMPv2 está disponível, o host deve lidar com a filtragem.</span><span class="sxs-lookup"><span data-stu-id="51989-159">When only IGMPv2 is available, the host must handle the filtering.</span></span>

<span data-ttu-id="51989-160">Há duas categorias nas quais a maioria dos aplicativos provavelmente se enquadra: qualquer fonte e fonte controlada.</span><span class="sxs-lookup"><span data-stu-id="51989-160">There are two categories into which most applications are likely to fall: any-source and controlled-source.</span></span>

-   <span data-ttu-id="51989-161">Todos os aplicativos **de origem** aceitam todas as fontes por padrão, permitindo que fontes individuais sejam desativadas conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="51989-161">**Any-source** applications accept all sources by default, allowing individual sources to be turned off as required.</span></span> <span data-ttu-id="51989-162">Um exemplo de aplicativo de qualquer fonte é uma chamada de conferência de vídeo que permite que todos os destinatários participem.</span><span class="sxs-lookup"><span data-stu-id="51989-162">An example of an any-source application is a video conference call that enables all recipients to participate.</span></span>
-   <span data-ttu-id="51989-163">Os aplicativos **de origem controlada** limitam as fontes a uma determinada lista, como uma estação de rádio da Internet, ou a difusão de um evento notável.</span><span class="sxs-lookup"><span data-stu-id="51989-163">**Controlled-source** applications limit sources to a given list, such as an Internet radio station, or the broadcast of a notable event.</span></span> <span data-ttu-id="51989-164">O processo de usar as opções de soquete é um pouco diferente para cada.</span><span class="sxs-lookup"><span data-stu-id="51989-164">The process of using socket options is slightly different for each.</span></span>

<span data-ttu-id="51989-165">No Windows Vista e posterior, as seguintes etapas se aplicam a aplicativos de origem:</span><span class="sxs-lookup"><span data-stu-id="51989-165">On Windows Vista and later, the following steps apply for any-source applications:</span></span>

- <span data-ttu-id="51989-166">Use **o \_ \_ grupo de junção mcast** para ingressar em um grupo.</span><span class="sxs-lookup"><span data-stu-id="51989-166">Use **MCAST\_JOIN\_GROUP** to join a group.</span></span>  
- <span data-ttu-id="51989-167">Use **a \_ \_ origem do bloco mcast** para desativar uma determinada origem, se necessário.</span><span class="sxs-lookup"><span data-stu-id="51989-167">Use **MCAST\_BLOCK\_SOURCE** to turn off a given source, if required.</span></span>  
- <span data-ttu-id="51989-168">Use **mcast \_ desbloquear \_ origem** para reabilitar uma fonte bloqueada, se necessário.</span><span class="sxs-lookup"><span data-stu-id="51989-168">Use **MCAST\_UNBLOCK\_SOURCE** to re-allow a blocked source, if required.</span></span>  
- <span data-ttu-id="51989-169">Use **mcast \_ Leave \_ Group** para sair do grupo.</span><span class="sxs-lookup"><span data-stu-id="51989-169">Use **MCAST\_LEAVE\_GROUP** to leave the group.</span></span>  

<span data-ttu-id="51989-170">No Windows Vista e posterior, as seguintes etapas se aplicam a aplicativos de origem controlada:</span><span class="sxs-lookup"><span data-stu-id="51989-170">On Windows Vista and later, the following steps apply for controlled-source applications:</span></span>

- <span data-ttu-id="51989-171">Use **o \_ \_ \_ grupo de origem mcast Join** para unir cada par de grupo/fonte.</span><span class="sxs-lookup"><span data-stu-id="51989-171">Use **MCAST\_JOIN\_SOURCE\_GROUP** to join each group/source pair.</span></span>  
- <span data-ttu-id="51989-172">Use **mcast \_ deixar \_ o \_ grupo de origem** para sair de cada grupo/origem ou use o **\_ \_ grupo de saída mcast** para deixar todas as fontes, se o mesmo endereço de grupo for usado por todas as fontes.</span><span class="sxs-lookup"><span data-stu-id="51989-172">Use **MCAST\_LEAVE\_SOURCE\_GROUP** to leave each group/source, or use **MCAST\_LEAVE\_GROUP** to leave all sources, if the same group address is used by all sources.</span></span>  

<span data-ttu-id="51989-173">As etapas a seguir se aplicam a aplicativos de origem:</span><span class="sxs-lookup"><span data-stu-id="51989-173">The following steps apply for any-source applications:</span></span>

- <span data-ttu-id="51989-174">Usar **IP \_ Adicionar \_ Associação** para ingressar em um grupo (**IPv6 \_ Adicionar \_ Associação** para IPv6).</span><span class="sxs-lookup"><span data-stu-id="51989-174">Use **IP\_ADD\_MEMBERSHIP** to join a group (**IPV6\_ADD\_MEMBERSHIP** for IPv6).</span></span>  
- <span data-ttu-id="51989-175">Use **a \_ \_ origem do bloco de IP** para desativar uma determinada origem, se necessário.</span><span class="sxs-lookup"><span data-stu-id="51989-175">Use **IP\_BLOCK\_SOURCE** to turn off a given source, if required.</span></span>  
- <span data-ttu-id="51989-176">Use **a \_ \_ origem de desbloqueio de IP** para permitir novamente uma fonte bloqueada, se necessário.</span><span class="sxs-lookup"><span data-stu-id="51989-176">Use **IP\_UNBLOCK\_SOURCE** to re-allow a blocked source, if required.</span></span>  
- <span data-ttu-id="51989-177">Use **a \_ \_ Associação IP drop** para sair do grupo (**IPv6 \_ Remove \_ membership** para IPv6).</span><span class="sxs-lookup"><span data-stu-id="51989-177">Use **IP\_DROP\_MEMBERSHIP** to leave the group (**IPV6\_DROP\_MEMBERSHIP** for IPv6).</span></span>  

<span data-ttu-id="51989-178">As etapas a seguir se aplicam a aplicativos de origem controlada:</span><span class="sxs-lookup"><span data-stu-id="51989-178">The following steps apply for controlled-source applications:</span></span>

- <span data-ttu-id="51989-179">Usar **IP \_ Adicionar \_ \_ Associação de origem** para ingressar em cada par de grupo/fonte.</span><span class="sxs-lookup"><span data-stu-id="51989-179">Use **IP\_ADD\_SOURCE\_MEMBERSHIP** to join each group/source pair.</span></span>  
- <span data-ttu-id="51989-180">Use **a \_ \_ \_ Associação de origem IP drop** para deixar cada grupo/origem ou use a **\_ \_ Associação IP drop** para deixar todas as fontes, se o mesmo endereço de grupo for usado por todas as fontes.</span><span class="sxs-lookup"><span data-stu-id="51989-180">Use **IP\_DROP\_SOURCE\_MEMBERSHIP** to leave each group/source, or use **IP\_DROP\_MEMBERSHIP** to leave all sources, if the same group address is used by all sources.</span></span>  

<span data-ttu-id="51989-181">A ordem na qual essas opções de soquete estão definidas tem regras associadas.</span><span class="sxs-lookup"><span data-stu-id="51989-181">The order in which these socket options are set has associated rules.</span></span> <span data-ttu-id="51989-182">Para obter informações e informações de solução de problemas em opções de soquete de multicast, consulte [comportamento da opção de soquete multicast](multicast-socket-option-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="51989-182">For information and troubleshooting information on multicast socket options, see [Multicast Socket Option Behavior](multicast-socket-option-behavior.md).</span></span>
