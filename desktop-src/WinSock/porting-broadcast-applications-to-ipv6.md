---
description: Esta seção descreve as práticas recomendadas para portar um aplicativo de difusão IPv6 para os recursos de multicast disponíveis com o Windows Sockets.
ms.assetid: 12e491fd-650f-43b4-afa1-9f37b1c30240
title: Portando aplicativos de difusão para IPv6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b9f7dce09db6822a6f9b0a61873ca6bbff5a256b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104461109"
---
# <a name="porting-broadcast-applications-to-ipv6"></a><span data-ttu-id="680c6-103">Portando aplicativos de difusão para IPv6</span><span class="sxs-lookup"><span data-stu-id="680c6-103">Porting Broadcast Applications to IPv6</span></span>

<span data-ttu-id="680c6-104">Esta seção descreve as práticas recomendadas para portar um aplicativo de difusão IPv6 para os recursos de multicast disponíveis com o Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="680c6-104">This section describes best practices for porting an IPv6 broadcast application to the multicast capabilities available with Windows Sockets.</span></span>

## <a name="comparing-ipv4-to-ipv6"></a><span data-ttu-id="680c6-105">Comparando IPv4 com IPv6</span><span class="sxs-lookup"><span data-stu-id="680c6-105">Comparing IPv4 to IPv6</span></span>

<span data-ttu-id="680c6-106">A consideração mais notável ao se preparar para portar um aplicativo de difusão IPv4 para IPv6 é: o IPv6 não tem nenhum conceito de difusão implementado.</span><span class="sxs-lookup"><span data-stu-id="680c6-106">The most notable consideration when preparing to port an IPv4 broadcast application to IPv6 is this: IPv6 has no implemented concept of broadcast.</span></span> <span data-ttu-id="680c6-107">Em vez disso, o IPv6 usa multicast.</span><span class="sxs-lookup"><span data-stu-id="680c6-107">Instead, IPv6 uses multicast.</span></span>

<span data-ttu-id="680c6-108">O multicast para IPv6 pode emular os recursos de difusão tradicionais encontrados no IPv4.</span><span class="sxs-lookup"><span data-stu-id="680c6-108">Multicast for IPv6 can emulate traditional broadcast capabilities found in IPv4.</span></span> <span data-ttu-id="680c6-109">A definição da opção [IPv6 adicionar soquete de \_ \_ Associação](ipproto-ipv6-socket-options.md) com o endereço IPv6 definido como o escopo de vínculo local todos os nós endereço (FF02:: 1) é equivalente à difusão de endereços de difusão IPv4 usando a opção de soquete de [ \_ difusão](socket-options.md) .</span><span class="sxs-lookup"><span data-stu-id="680c6-109">Setting the [IPV6\_ADD\_MEMBERSHIP](ipproto-ipv6-socket-options.md) socket option with the IPv6 address set to the link-local scope all nodes address (FF02::1) is equivalent to broadcasting on IPv4 broadcast addresses using the [SO\_BROADCAST](socket-options.md) socket option.</span></span> <span data-ttu-id="680c6-110">Esse endereço às vezes é chamado de *grupo de multicast de todos os nós*.</span><span class="sxs-lookup"><span data-stu-id="680c6-110">This address is sometimes called the *all-nodes multicast group*.</span></span> <span data-ttu-id="680c6-111">Para aplicativos que simplesmente desejam emulação de difusão para IPv6, essa abordagem é operacionalmente equivalente.</span><span class="sxs-lookup"><span data-stu-id="680c6-111">For applications that simply want broadcast emulation for IPv6, that approach is operationally equivalent.</span></span> <span data-ttu-id="680c6-112">No entanto, uma diferença notável com o IPv6 é que as difusões seletivas no endereço do grupo multicast de todos os nós não são recebidas por padrão (as transmissões IPv4 são recebidas por padrão).</span><span class="sxs-lookup"><span data-stu-id="680c6-112">One notable difference with IPv6, however, is that multicasts on the all-nodes multicast group address are not received by default (IPv4 broadcasts are received by default).</span></span> <span data-ttu-id="680c6-113">Os programadores de aplicativos devem usar \_ a \_ opção IPv6 adicionar soquete de associação para habilitar a recepção multicast de qualquer fonte, incluindo o endereço de grupo multicast de todos os nós.</span><span class="sxs-lookup"><span data-stu-id="680c6-113">Application programmers must use the IPV6\_ADD\_MEMBERSHIP socket option to enable multicast reception from any source, including the all-nodes multicast group address.</span></span>

> [!Note]  
> <span data-ttu-id="680c6-114">No IPv6, a seleção de interface é especificada na estrutura de argumento passada para a opção de soquete multicast ou para o IOCTL.</span><span class="sxs-lookup"><span data-stu-id="680c6-114">In IPv6, interface selection is specified in the argument structure passed to the multicast socket option or IOCTL.</span></span>

 

<span data-ttu-id="680c6-115">Mas, para transmissões mais avançadas, mais robustas e mais gerenciáveis para vários hosts, os desenvolvedores de aplicativos devem considerar a mudança para um modelo de multicast.</span><span class="sxs-lookup"><span data-stu-id="680c6-115">But for richer, more robust, more selective and more manageable transmissions to multiple hosts, application developers should consider moving to a multicast model.</span></span>

## <a name="moving-to-multicast"></a><span data-ttu-id="680c6-116">Migrando para multicast</span><span class="sxs-lookup"><span data-stu-id="680c6-116">Moving to Multicast</span></span>

<span data-ttu-id="680c6-117">Com o multicast, os programadores de aplicativos podem escolher seletivamente um par de origem/grupo específico, habilitando um modelo de recepção seletiva.</span><span class="sxs-lookup"><span data-stu-id="680c6-117">With multicast, application programmers can selectively choose a particular source/group pair, enabling a selective reception model.</span></span> <span data-ttu-id="680c6-118">A descoberta de ouvinte multicast (MLD) no IPv6 e na versão 3 do protocolo IGMPv3 (Internet Group Management Protocol) no IPv4 dão suporte à programação de multidifusão.</span><span class="sxs-lookup"><span data-stu-id="680c6-118">The Multicast Listener Discovery (MLD) on IPv6 and version 3 of the Internet Group Management Protocol (IGMPv3) on IPv4 support multicasting programming.</span></span> <span data-ttu-id="680c6-119">Além disso, o multicast permite que os aplicativos bloqueiem (ou desbloqueiem) os remetentes em um grupo, protegendo ainda mais os aplicativos contra difusores não autorizados.</span><span class="sxs-lookup"><span data-stu-id="680c6-119">In addition, multicast enables applications to specifically block (or unblock) senders within a group, further protecting applications from rogue broadcasters.</span></span> <span data-ttu-id="680c6-120">Esse recurso está disponível para IPv4 (requer IGMPv3), bem como IPv6 (requer MLDv2).</span><span class="sxs-lookup"><span data-stu-id="680c6-120">This capability is available for IPv4 (requires IGMPv3) as well as IPv6 (requires MLDv2).</span></span>

<span data-ttu-id="680c6-121">Há dois cenários principais para programadores de aplicativos usando multicast: a portabilidade de aplicativos de difusão IPv4 (ou multicast) para IPv6 e os que criam novos aplicativos de multicast IPv6.</span><span class="sxs-lookup"><span data-stu-id="680c6-121">There are two primary scenarios for application programmers using multicast: those porting from IPv4 broadcast (or multicast) applications to IPv6, and those creating new IPv6 multicast applications.</span></span>

<span data-ttu-id="680c6-122">Para portar aplicativos existentes, há duas opções para mover para o multicast IPv6: usando opções de soquete e usando IOCTLs.</span><span class="sxs-lookup"><span data-stu-id="680c6-122">For porting existing applications, there are two options to move to IPv6 multicast: using socket options and using IOCTLs.</span></span>

-   <span data-ttu-id="680c6-123">O uso de opções de soquete é uma abordagem baseada em alteração, que permite aos desenvolvedores alterar as propriedades do soquete conforme necessário (como bloquear ou desbloquear um remetente, adicionar uma nova fonte e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="680c6-123">Using socket options is a change-based approach, which enables developers to change the socket properties as required (such as blocking or unblocking a sender, adding a new source, and so on).</span></span> <span data-ttu-id="680c6-124">Essa abordagem é mais intuitiva e a abordagem recomendada.</span><span class="sxs-lookup"><span data-stu-id="680c6-124">This approach is more intuitive and the recommended approach.</span></span> <span data-ttu-id="680c6-125">Para obter mais informações sobre a abordagem baseada em alteração para programação de multicast, consulte [MLD e IGMP usando soquetes do Windows](igmp-and-windows-sockets.md).</span><span class="sxs-lookup"><span data-stu-id="680c6-125">For more information on the change-based approach to multicast programming, see [MLD and IGMP Using Windows Sockets](igmp-and-windows-sockets.md).</span></span>
-   <span data-ttu-id="680c6-126">O uso de IOCTLs é uma abordagem baseada em estado final, pois permite que os desenvolvedores forneçam um estado de soquete totalmente configurado, incluindo listas de inclusão e exclusão, com uma chamada.</span><span class="sxs-lookup"><span data-stu-id="680c6-126">Using IOCTLs is a final-state based approach, because it enables developers to provide a fully-configured socket state, including inclusion and exclusion lists, with one call.</span></span> <span data-ttu-id="680c6-127">Para obter mais informações sobre a abordagem baseada em estado final, consulte [programação de multicast com base no estado final](final-state-based-multicast-programming.md).</span><span class="sxs-lookup"><span data-stu-id="680c6-127">For more information on the final-state based approach, see [Final-State-Based Multicast Programming](final-state-based-multicast-programming.md).</span></span>

<span data-ttu-id="680c6-128">Para aqueles que criam novos aplicativos de multicast IPv6, a prática recomendada é usar as opções de soquete, em vez de usar os IOCTLs.</span><span class="sxs-lookup"><span data-stu-id="680c6-128">For those creating new IPv6 multicast applications, the recommended practice is to use socket options, rather than using IOCTLs.</span></span>

<span data-ttu-id="680c6-129">Há uma outra abordagem para criar aplicativos multicast com IPv6, e isso envolve o uso da função [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) .</span><span class="sxs-lookup"><span data-stu-id="680c6-129">There is one other approach to creating multicast applications with IPv6, and that entails using the [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) function.</span></span> <span data-ttu-id="680c6-130">Embora o uso da função **WSAJoinLeaf** não seja a prática recomendada, há situações que podem ditar seu uso.</span><span class="sxs-lookup"><span data-stu-id="680c6-130">While using the **WSAJoinLeaf** function is not the recommended practice, there are situations that may dictate its use.</span></span> <span data-ttu-id="680c6-131">Por exemplo, uma desvantagem de usar as opções de soquete no Windows Server 2003 e versões anteriores é que elas são específicas de versão de IP.</span><span class="sxs-lookup"><span data-stu-id="680c6-131">For example, one drawback to using socket options on Windows Server 2003 and earlier is that they are IP version specific.</span></span> <span data-ttu-id="680c6-132">Nessas versões anteriores do Windows, diferentes opções de soquetes devem ser para IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="680c6-132">On these older versions of Windows, different sockets options must be for IPv6 and IPv4.</span></span> <span data-ttu-id="680c6-133">No Windows Vista e posterior, há suporte para novas opções de soquete que podem ser usadas com IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="680c6-133">On Windows Vista and later, new socket options are supported that can be used with both IPv4 and IPv6.</span></span> <span data-ttu-id="680c6-134">A função **WSAJoinLeaf** , por outro lado, é independente do protocolo e da versão do IP e, portanto, pode ser uma abordagem útil para criar um aplicativo que deve funcionar com várias versões de IP no Windows Server 2003 e versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="680c6-134">The **WSAJoinLeaf** function, in contrast, is IP version and protocol agnostic, and therefore it can be a useful approach for building an application that must work with multiple IP versions on Windows Server 2003 and earlier.</span></span> <span data-ttu-id="680c6-135">Usar a função **WSAJoinLeaf** pode ser mais apropriado em determinadas situações em que o protocolo e o indiferente de versão IP são necessários.</span><span class="sxs-lookup"><span data-stu-id="680c6-135">Using the **WSAJoinLeaf** function may be more appropriate in certain situations where protocol and IP-version agnosticism is required.</span></span>

 

 



