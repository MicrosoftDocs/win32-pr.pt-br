---
description: Como mencionado anteriormente, o WSPJoinLeaf é usado para unir um nó folha em uma sessão do MultiPoint.
ms.assetid: 03325f5e-4d4a-405b-b644-3d8c03435e17
title: Usando WSPJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef4426c0d22657b26dcc2217d856865d9ebe98db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104164460"
---
# <a name="using-wspjoinleaf"></a><span data-ttu-id="229d7-103">Usando WSPJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="229d7-103">Using WSPJoinLeaf</span></span>

<span data-ttu-id="229d7-104">Como mencionado anteriormente, o [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) é usado para unir um nó folha em uma sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="229d7-104">As mentioned previously, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="229d7-105">**WSPJoinLeaf** tem os mesmos parâmetros e semântica que [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) , exceto pelo fato de que ele retorna um descritor de soquete (como em [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)) e tem um parâmetro *dwFlags* adicional.</span><span class="sxs-lookup"><span data-stu-id="229d7-105">**WSPJoinLeaf** has the same parameters and semantics as [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) except that it returns a socket descriptor (as in [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)), and it has an additional *dwFlags* parameter.</span></span> <span data-ttu-id="229d7-106">O parâmetro *dwFlags* é usado para indicar se o soquete estará agindo somente como um remetente, somente como um receptor ou ambos.</span><span class="sxs-lookup"><span data-stu-id="229d7-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="229d7-107">Somente os soquetes do MultiPoint podem ser usados para os parâmetros de entrada *s* nesta função.</span><span class="sxs-lookup"><span data-stu-id="229d7-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="229d7-108">Se o soquete do MultiPoint estiver no modo de não bloqueio, o descritor de soquete retornado não será utilizável até que uma indicação de conexão FD correspondente \_ tenha sido recebida.</span><span class="sxs-lookup"><span data-stu-id="229d7-108">If the multipoint socket is in the nonblocking mode, the returned socket descriptor will not be usable until after a corresponding FD\_CONNECT indication has been received.</span></span> <span data-ttu-id="229d7-109">Um aplicativo raiz em uma sessão do MultiPoint pode chamar **WSPJoinLeaf** uma ou mais vezes para adicionar um número de nós folha, no entanto, no máximo uma solicitação de conexão do MultiPoint pode estar pendente por vez.</span><span class="sxs-lookup"><span data-stu-id="229d7-109">A root application in a multipoint session may call **WSPJoinLeaf** one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="229d7-110">O descritor de soquete retornado por [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) é diferente dependendo se o descritor de soquete de entrada, *s*, é uma \_ raiz c ou uma \_ folha c.</span><span class="sxs-lookup"><span data-stu-id="229d7-110">The socket descriptor returned by [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is different depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="229d7-111">Quando usado com um \_ soquete raiz c, o parâmetro *Name* designa um nó folha específico a ser adicionado e o descritor de soquete retornado é um \_ soquete folha c correspondente ao nó folha recém-adicionado.</span><span class="sxs-lookup"><span data-stu-id="229d7-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="229d7-112">Ele não se destina a ser usado para a troca de dados do MultiPoint, mas é usado para receber indicações de eventos de rede (por exemplo, o uso de FD \_ Close) para a conexão que existe para a folha c em particular \_ .</span><span class="sxs-lookup"><span data-stu-id="229d7-112">It is not intended to be used for exchange of multipoint data, but rather is used to receive network event indications (for example FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="229d7-113">Algumas implementações do MultiPoint também podem permitir que esse soquete seja usado para chats colaterais entre a raiz e um nó folha individual.</span><span class="sxs-lookup"><span data-stu-id="229d7-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="229d7-114">Uma \_ indicação de fechamento FD deve ser fornecida para este Soquete se o nó folha correspondente chamar [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) para sair da sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="229d7-114">An FD\_CLOSE indication should be given for this socket if the corresponding leaf node calls [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) to drop out of the multipoint session.</span></span> <span data-ttu-id="229d7-115">Simetricamente, invocar **WSPCloseSocket** no \_ soquete folha c retornado de [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) fará com que o soquete no nó folha correspondente obtenha a notificação de \_ fechamento FD.</span><span class="sxs-lookup"><span data-stu-id="229d7-115">Symmetrically, invoking **WSPCloseSocket** on the c\_leaf socket returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) will cause the socket in the corresponding leaf node to get FD\_CLOSE notification.</span></span>

<span data-ttu-id="229d7-116">Quando [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) é invocado com um \_ soquete de folha c, o parâmetro Name contém o endereço do aplicativo raiz (para um esquema de controle com raiz) ou uma sessão de MultiPoint existente (esquema de controle *sem* raiz) e o descritor de soquete retornado é o mesmo que o descritor de soquete de entrada.</span><span class="sxs-lookup"><span data-stu-id="229d7-116">When [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="229d7-117">Em um esquema de controle com raiz, o cliente raiz colocaria seu \_ soquete raiz c no modo de escuta chamando [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="229d7-117">In a rooted control scheme, the root client would put its c\_root socket in the listening mode by calling [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span></span> <span data-ttu-id="229d7-118">A notificação de aceitação do Standard FD \_ será entregue quando o nó folha solicitar a associação a si mesma à sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="229d7-118">The standard FD\_ACCEPT notification will be delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="229d7-119">O cliente raiz usa a função [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) usual para admitir o novo nó folha.</span><span class="sxs-lookup"><span data-stu-id="229d7-119">The root client uses the usual [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) function to admit the new leaf node.</span></span> <span data-ttu-id="229d7-120">O valor retornado de **WSPAccept** também é um \_ descritor de soquete folha c, assim como os retornados de **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="229d7-120">The value returned from **WSPAccept** is also a c\_leaf socket descriptor just like those returned from **WSPJoinLeaf**.</span></span> <span data-ttu-id="229d7-121">Para acomodar os esquemas do MultiPoint que permitem junções iniciadas pela raiz e por folha, é aceitável \_ que um soquete raiz c que já esteja no modo de escuta seja usado como entrada para **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="229d7-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as in input to **WSPJoinLeaf**.</span></span>

<span data-ttu-id="229d7-122">Um cliente raiz do MultiPoint é geralmente responsável pelo Dismantling ordenado de uma sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="229d7-122">A multipoint root client is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="229d7-123">Esse aplicativo pode usar [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) ou [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) em um \_ soquete raiz c para fazer com que todos os \_ soquetes de folha c associados, incluindo aqueles retornados de [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) e seus \_ soquetes de folha c correspondentes nos nós folha remoto, obtenham uma \_ notificação de fechamento FD.</span><span class="sxs-lookup"><span data-stu-id="229d7-123">Such an application may use [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) or [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 
