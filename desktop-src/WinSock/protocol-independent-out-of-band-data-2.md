---
description: A abstração de soquete de fluxo inclui a noção de dados de fora de banda (OOB).
ms.assetid: 1a517885-2688-421f-9389-2d329e5c3d56
title: Protocol-Independent dados fora de banda
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a929f4273d9cc9f268a296b711649406622ca9b4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104296343"
---
# <a name="protocol-independent-out-of-band-data"></a><span data-ttu-id="c5239-103">Protocol-Independent dados fora de banda</span><span class="sxs-lookup"><span data-stu-id="c5239-103">Protocol-Independent Out-of-Band Data</span></span>

<span data-ttu-id="c5239-104">A abstração de soquete de fluxo inclui a noção de dados de fora de banda (OOB).</span><span class="sxs-lookup"><span data-stu-id="c5239-104">The stream socket abstraction includes the notion of out of band (OOB) data.</span></span> <span data-ttu-id="c5239-105">Muitos protocolos permitem que partes de dados de entrada sejam marcadas como especiais de alguma forma, e esses blocos de dados especiais podem ser entregues ao usuário fora da sequência normal.</span><span class="sxs-lookup"><span data-stu-id="c5239-105">Many protocols allow portions of incoming data to be marked as special in some way, and these special data blocks can be delivered to the user out of the normal sequence.</span></span> <span data-ttu-id="c5239-106">Os exemplos incluem dados acelerados em X. 25 e outros protocolos OSI e dados urgentes no uso do TCP do BSD UNIX.</span><span class="sxs-lookup"><span data-stu-id="c5239-106">Examples include expedited data in X.25 and other OSI protocols, and urgent data in BSD UNIX's use of TCP.</span></span> <span data-ttu-id="c5239-107">A seção a seguir descreve a manipulação de dados OOB de maneira independente de protocolo.</span><span class="sxs-lookup"><span data-stu-id="c5239-107">The following section describes OOB data handling in a protocol-independent manner.</span></span> <span data-ttu-id="c5239-108">Uma discussão sobre os dados OOB implementados usando dados TCP urgentes segue a explicação independente de protocolo.</span><span class="sxs-lookup"><span data-stu-id="c5239-108">A discussion of OOB data implemented using TCP urgent data follows the protocol-independent explanation.</span></span> <span data-ttu-id="c5239-109">Em cada discussão, o uso de [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) também implica em [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv)e [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom), e as referências a [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) também se aplicam a [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span><span class="sxs-lookup"><span data-stu-id="c5239-109">In each discussion, the use of [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) also implies [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), and [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom), and references to [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) also apply to [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span></span>

## <a name="protocol-independent-oob-data"></a><span data-ttu-id="c5239-110">Dados OOB independentes de protocolo</span><span class="sxs-lookup"><span data-stu-id="c5239-110">Protocol Independent OOB Data</span></span>

<span data-ttu-id="c5239-111">Os dados OOB são um canal de transmissão logicamente independente associado a cada par de soquetes de fluxo conectados.</span><span class="sxs-lookup"><span data-stu-id="c5239-111">OOB data is a logically independent transmission channel associated with each pair of connected stream sockets.</span></span> <span data-ttu-id="c5239-112">Os dados OOB podem ser entregues ao usuário independentemente dos dados normais.</span><span class="sxs-lookup"><span data-stu-id="c5239-112">OOB data may be delivered to the user independently of normal data.</span></span> <span data-ttu-id="c5239-113">A abstração define que os recursos de dados OOB devem dar suporte à entrega confiável de pelo menos um bloco de dados OOB de cada vez.</span><span class="sxs-lookup"><span data-stu-id="c5239-113">The abstraction defines that the OOB data facilities must support the reliable delivery of at least one OOB data block at a time.</span></span> <span data-ttu-id="c5239-114">Esse bloco de dados pode conter pelo menos um byte de dados e pelo menos um bloco de dados OOB pode estar com entrega pendente para o usuário a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="c5239-114">This data block can contain at least one byte of data, and at least one OOB data block can be pending delivery to the user at any one time.</span></span> <span data-ttu-id="c5239-115">Para protocolos de comunicação que dão suporte à sinalização em banda (como TCP, em que os dados urgentes são entregues em sequência com os dados normais), o sistema normalmente extrai os dados OOB do fluxo de dados normal e os armazena separadamente (deixando uma lacuna no fluxo de dados normal).</span><span class="sxs-lookup"><span data-stu-id="c5239-115">For communications protocols that support in-band signaling (such as TCP, where the urgent data is delivered in sequence with the normal data), the system normally extracts the OOB data from the normal data stream and stores it separately (leaving a gap in the normal data stream).</span></span> <span data-ttu-id="c5239-116">Isso permite que os usuários escolham entre receber os dados OOB em ordem e recebê-los fora de sequência sem precisar armazenar em buffer todos os dados intermediários.</span><span class="sxs-lookup"><span data-stu-id="c5239-116">This allows users to choose between receiving the OOB data in order and receiving it out of sequence without having to buffer all the intervening data.</span></span> <span data-ttu-id="c5239-117">É possível inspecionar dados de fora de banda (OOB).</span><span class="sxs-lookup"><span data-stu-id="c5239-117">It is possible to peek at out-of-band (OOB) data.</span></span>

<span data-ttu-id="c5239-118">Um usuário pode determinar se algum dado OOB está aguardando para ser lido usando a função [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) ou [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) com o IOCTL **SIOCATMARK** .</span><span class="sxs-lookup"><span data-stu-id="c5239-118">A user can determine if any OOB data is waiting to be read using the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL.</span></span> <span data-ttu-id="c5239-119">Para protocolos em que o conceito da posição do bloco de dados OOB dentro do fluxo de dados normal é significativo, como o TCP, um provedor de serviços do Windows Sockets mantém um marcador conceitual que indica a posição do último byte de dados OOB dentro do fluxo de dados normal.</span><span class="sxs-lookup"><span data-stu-id="c5239-119">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, such as TCP, a Windows Sockets service provider maintains a conceptual marker indicating the position of the last byte of OOB data within the normal data stream.</span></span> <span data-ttu-id="c5239-120">Isso não é necessário para a implementação das funções **ioctlsocket** ou **WSAIoctl** que dão suporte a **SIOCATMARK**.</span><span class="sxs-lookup"><span data-stu-id="c5239-120">This is not necessary for the implementation of the **ioctlsocket** or **WSAIoctl** functions that support **SIOCATMARK**.</span></span> <span data-ttu-id="c5239-121">A presença ou a ausência de dados OOB é necessária.</span><span class="sxs-lookup"><span data-stu-id="c5239-121">The presence or absence of OOB data is all is required.</span></span>

<span data-ttu-id="c5239-122">Para protocolos em que o conceito da posição do bloco de dados OOB dentro do fluxo de dados normal é significativo, um aplicativo pode processar dados fora de banda embutidos, como parte do fluxo de dados normal.</span><span class="sxs-lookup"><span data-stu-id="c5239-122">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, an application might process out-of-band data inline, as part of the normal data stream.</span></span> <span data-ttu-id="c5239-123">Isso é feito definindo a opção socket de modo que \_ OOBINLINE com a função [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) .</span><span class="sxs-lookup"><span data-stu-id="c5239-123">This is achieved by setting the socket option SO\_OOBINLINE with the [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) function.</span></span> <span data-ttu-id="c5239-124">Para outros protocolos em que os blocos de dados OOB são verdadeiramente independentes do fluxo de dados normal, tentar definir \_ OOBINLINE resulta em um erro.</span><span class="sxs-lookup"><span data-stu-id="c5239-124">For other protocols where the OOB data blocks are truly independent of the normal data stream, attempting to set SO\_OOBINLINE results in an error.</span></span> <span data-ttu-id="c5239-125">Um aplicativo pode usar a função [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) ou [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) com o **SIOCATMARK** IOCTL para determinar se há algum dado OOB Não lido antes da marca.</span><span class="sxs-lookup"><span data-stu-id="c5239-125">An application can use the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL to determine whether there is any unread OOB data preceding the mark.</span></span> <span data-ttu-id="c5239-126">Por exemplo, ele pode usar essas informações para sincronizar novamente com seu par, garantindo que todos os dados até a marca no fluxo de dados sejam descartados quando apropriado.</span><span class="sxs-lookup"><span data-stu-id="c5239-126">For example, it can use this information to resynchronize with its peer by ensuring that all data up to the mark in the data stream is discarded when appropriate.</span></span>

<span data-ttu-id="c5239-127">Com \_ o OOBINLINE desabilitado (a configuração padrão):</span><span class="sxs-lookup"><span data-stu-id="c5239-127">With SO\_OOBINLINE disabled (the default setting):</span></span>

-   <span data-ttu-id="c5239-128">O Windows Sockets notifica um aplicativo sobre um \_ evento de OOB do FD, se o aplicativo estiver registrado para notificação com [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), exatamente da mesma forma que a leitura de FD \_ é usada para notificar a presença de dados normais.</span><span class="sxs-lookup"><span data-stu-id="c5239-128">Windows Sockets notifies an application of an FD\_OOB event, if the application registered for notification with [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), in exactly the same way FD\_READ is used to notify of the presence of normal data.</span></span> <span data-ttu-id="c5239-129">Ou seja, FD \_ OOB é Postado quando dados OOB chegam sem dados OOB anteriormente na fila.</span><span class="sxs-lookup"><span data-stu-id="c5239-129">That is, FD\_OOB is posted when OOB data arrives with no OOB data previously queued.</span></span> <span data-ttu-id="c5239-130">O OOB do FD \_ também é Postado quando os dados são lidos usando o sinalizador de OOB da msg \_ enquanto alguns dados OOB permanecem na fila depois que a operação de leitura é retornada.</span><span class="sxs-lookup"><span data-stu-id="c5239-130">The FD\_OOB is also posted when data is read using the MSG\_OOB flag while some OOB data remains queued after the read operation has returned.</span></span> <span data-ttu-id="c5239-131">\_As mensagens de leitura do FD não são postadas para dados OOB.</span><span class="sxs-lookup"><span data-stu-id="c5239-131">FD\_READ messages are not posted for OOB data.</span></span>
-   <span data-ttu-id="c5239-132">O Windows Sockets retorna de [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) com o conjunto de soquetes *exceptfds* apropriado se os dados OOB estiverem na fila no soquete.</span><span class="sxs-lookup"><span data-stu-id="c5239-132">Windows Sockets returns from [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) with the appropriate *exceptfds* socket set if OOB data is queued on the socket.</span></span>
-   <span data-ttu-id="c5239-133">O aplicativo pode chamar [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) com MSG \_ OOB para ler o bloco de dados urgentes a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="c5239-133">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with MSG\_OOB to read the urgent data block at any time.</span></span> <span data-ttu-id="c5239-134">O bloco de dados OOB salta a fila.</span><span class="sxs-lookup"><span data-stu-id="c5239-134">The block of OOB data jumps the queue.</span></span>
-   <span data-ttu-id="c5239-135">O aplicativo pode chamar [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) sem \_ o OOB de MSG para ler o fluxo de dados normal.</span><span class="sxs-lookup"><span data-stu-id="c5239-135">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without MSG\_OOB to read the normal data stream.</span></span> <span data-ttu-id="c5239-136">O bloco de dados OOB Não aparece no fluxo de dados com dados normais.</span><span class="sxs-lookup"><span data-stu-id="c5239-136">The OOB data block does not appear in the data stream with normal data.</span></span> <span data-ttu-id="c5239-137">Se os dados OOB permanecerem após qualquer chamada para **recv**, o Windows Sockets notificará o aplicativo com FD \_ OOB ou com *exceptfds* ao usar [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span><span class="sxs-lookup"><span data-stu-id="c5239-137">If OOB data remains after any call to **recv**, Windows Sockets notifies the application with FD\_OOB or with *exceptfds* when using [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span></span>
-   <span data-ttu-id="c5239-138">Para protocolos em que os dados OOB têm uma posição dentro do fluxo de dados normal, uma única operação de [**recebimento**](/windows/desktop/api/winsock/nf-winsock-recv) não abrange essa posição.</span><span class="sxs-lookup"><span data-stu-id="c5239-138">For protocols where the OOB data has a position within the normal data stream, a single [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) operation does not span that position.</span></span> <span data-ttu-id="c5239-139">Um **recv** retorna os dados normais antes da marca e um segundo **recv** é necessário para começar a ler os dados após a marca.</span><span class="sxs-lookup"><span data-stu-id="c5239-139">One **recv** returns the normal data before the mark, and a second **recv** is required to begin reading data after the mark.</span></span>

<span data-ttu-id="c5239-140">Com o \_ OOBINLINE habilitado:</span><span class="sxs-lookup"><span data-stu-id="c5239-140">With SO\_OOBINLINE enabled:</span></span>

-   <span data-ttu-id="c5239-141">\_As mensagens OOB do FD não são postadas para dados OOB.</span><span class="sxs-lookup"><span data-stu-id="c5239-141">FD\_OOB messages are not posted for OOB data.</span></span> <span data-ttu-id="c5239-142">Os dados OOB são tratados como normais para fins das funções [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) e [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) e são indicados pela definição do soquete no *readfds* ou pela envio de uma \_ mensagem de leitura FD, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c5239-142">OOB data is treated as normal for the purpose of the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) and [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) functions, and indicated by setting the socket in *readfds* or by sending an FD\_READ message respectively.</span></span>
-   <span data-ttu-id="c5239-143">O aplicativo não pode chamar [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) com o \_ sinalizador de mensagem OOB definido para ler o bloco de dados OOB.</span><span class="sxs-lookup"><span data-stu-id="c5239-143">The application cannot call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with the MSG\_OOB flag set to read the OOB data block.</span></span> <span data-ttu-id="c5239-144">O código de erro WSAEINVAL é retornado.</span><span class="sxs-lookup"><span data-stu-id="c5239-144">The error code WSAEINVAL is returned.</span></span>
-   <span data-ttu-id="c5239-145">O aplicativo pode chamar [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) sem o conjunto de sinalizadores de OOB de MSG \_ .</span><span class="sxs-lookup"><span data-stu-id="c5239-145">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without the MSG\_OOB flag set.</span></span> <span data-ttu-id="c5239-146">Todos os dados OOB são entregues em sua ordem correta dentro do fluxo de dados normal.</span><span class="sxs-lookup"><span data-stu-id="c5239-146">Any OOB data is delivered in its correct order within the normal data stream.</span></span> <span data-ttu-id="c5239-147">Os dados OOB nunca são misturados com dados normais.</span><span class="sxs-lookup"><span data-stu-id="c5239-147">OOB data is never mixed with normal data.</span></span> <span data-ttu-id="c5239-148">Deve haver três solicitações de leitura para passar os dados OOB.</span><span class="sxs-lookup"><span data-stu-id="c5239-148">There must be three read requests to get past the OOB data.</span></span> <span data-ttu-id="c5239-149">O primeiro retorna os dados normais antes do bloco de dados OOB, o segundo retorna os dados OOB, o terceiro retorna os dados normais que seguem os dados OOB.</span><span class="sxs-lookup"><span data-stu-id="c5239-149">The first returns the normal data prior to the OOB data block, the second returns the OOB data, the third returns the normal data following the OOB data.</span></span> <span data-ttu-id="c5239-150">Em outras palavras, os limites de bloco de dados OOB são preservados.</span><span class="sxs-lookup"><span data-stu-id="c5239-150">In other words, the OOB data block boundaries are preserved.</span></span>

<span data-ttu-id="c5239-151">A rotina [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) é particularmente adequada para lidar com a notificação da presença de dados fora de banda quando \_ OOBINLINE está desativado.</span><span class="sxs-lookup"><span data-stu-id="c5239-151">The [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) routine is particularly well suited to handling notification of the presence of out-of-band-data when SO\_OOBINLINE is off.</span></span>

## <a name="oob-data-in-tcp"></a><span data-ttu-id="c5239-152">Dados OOB no TCP</span><span class="sxs-lookup"><span data-stu-id="c5239-152">OOB Data in TCP</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c5239-153">A seguinte discussão sobre dados fora de banda (OOB), implementados usando dados urgentes TCP, segue o modelo usado na distribuição de software Berkeley.</span><span class="sxs-lookup"><span data-stu-id="c5239-153">The following discussion of out-of-band data (OOB), implemented using TCP urgent data, follows the model used in the Berkeley software distribution.</span></span> <span data-ttu-id="c5239-154">Os usuários e os implementadores devem estar cientes de que:</span><span class="sxs-lookup"><span data-stu-id="c5239-154">Users and implementers should be aware that:</span></span>

 

-   <span data-ttu-id="c5239-155">Há, no momento, duas interpretações conflitantes do [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (onde o conceito é introduzido).</span><span class="sxs-lookup"><span data-stu-id="c5239-155">There are, at present, two conflicting interpretations of [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (where the concept is introduced).</span></span>
-   <span data-ttu-id="c5239-156">A implementação de dados OOB na Berkeley Software Distribution (BSD) não está de acordo com os requisitos de host especificados no [RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span><span class="sxs-lookup"><span data-stu-id="c5239-156">The implementation of OOB data in the Berkeley Software Distribution (BSD) does not conform to the Host Requirements specified in [RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span></span>

    <span data-ttu-id="c5239-157">Especificamente, o ponteiro urgente TCP no BSD aponta para o byte após o byte de dados urgente e um ponteiro urgente TCP compatível com RFC aponta para o byte de dados urgente.</span><span class="sxs-lookup"><span data-stu-id="c5239-157">Specifically, the TCP urgent pointer in BSD points to the byte after the urgent data byte, and an RFC-compliant TCP urgent pointer points to the urgent data byte.</span></span> <span data-ttu-id="c5239-158">Como resultado, se um aplicativo enviar dados urgentes de uma implementação compatível com BSD para uma implementação compatível com o RFC 1122, o receptor lerá o byte de dados urgente incorreto (ele lê o byte localizado após o byte correto no fluxo de dados como o byte de dados urgente).</span><span class="sxs-lookup"><span data-stu-id="c5239-158">As a result, if an application sends urgent data from a BSD-compatible implementation to an implementation compatible with RFC 1122, the receiver reads the wrong urgent data byte (it reads the byte located after the correct byte in the data stream as the urgent data byte).</span></span>

    <span data-ttu-id="c5239-159">Para minimizar problemas de interoperabilidade, os gravadores de aplicativos são aconselhados a não usar dados OOB, a menos que isso seja necessário para interoperar com um serviço existente.</span><span class="sxs-lookup"><span data-stu-id="c5239-159">To minimize interoperability problems, applications writers are advised not to use OOB data unless this is required to interoperate with an existing service.</span></span> <span data-ttu-id="c5239-160">Os fornecedores do Windows Sockets são incentivados a documentar a semântica OOB (BSD ou RFC 1122) que seus produtos implementam.</span><span class="sxs-lookup"><span data-stu-id="c5239-160">Windows Sockets suppliers are urged to document the OOB semantics (BSD or RFC 1122) that their product implements.</span></span>

<span data-ttu-id="c5239-161">A chegada de um segmento TCP com o sinalizador de URG (para urgente) indica a existência de um único byte de dados OOB dentro do fluxo de dados TCP.</span><span class="sxs-lookup"><span data-stu-id="c5239-161">The arrival of a TCP segment with the URG (for urgent) flag set indicates the existence of a single byte of OOB data within the TCP data stream.</span></span> <span data-ttu-id="c5239-162">O bloco de dados OOB tem um tamanho de byte.</span><span class="sxs-lookup"><span data-stu-id="c5239-162">The OOB data block is one byte in size.</span></span> <span data-ttu-id="c5239-163">O ponteiro urgente é um deslocamento positivo do número de sequência atual no cabeçalho TCP que indica o local do bloco de dados OOB (de forma ambígua, conforme observado no anterior).</span><span class="sxs-lookup"><span data-stu-id="c5239-163">The urgent pointer is a positive offset from the current sequence number in the TCP header that indicates the location of the OOB data block (ambiguously, as noted in the preceding).</span></span> <span data-ttu-id="c5239-164">Portanto, ele pode apontar para dados que ainda não foram recebidos.</span><span class="sxs-lookup"><span data-stu-id="c5239-164">It might, therefore, point to data that has not yet been received.</span></span>

<span data-ttu-id="c5239-165">Se o \_ OOBINLINE estiver desabilitado (o padrão) quando o segmento TCP que contém o byte apontado pelo ponteiro urgente chegar, o bloco de dados OOB (um byte) será removido do fluxo de dados e armazenado em buffer.</span><span class="sxs-lookup"><span data-stu-id="c5239-165">If SO\_OOBINLINE is disabled (the default) when the TCP segment containing the byte pointed to by the urgent pointer arrives, the OOB data block (one byte) is removed from the data stream and buffered.</span></span> <span data-ttu-id="c5239-166">Se um segmento TCP subsequente chegar com o sinalizador urgente definido (e um novo ponteiro urgente), o byte OOB atualmente na fila poderá ser perdido quando for substituído pelo novo bloco de dados OOB (como ocorre na distribuição de software da Berkeley).</span><span class="sxs-lookup"><span data-stu-id="c5239-166">If a subsequent TCP segment arrives with the urgent flag set (and a new urgent pointer), the OOB byte currently queued can be lost as it is replaced by the new OOB data block (as occurs in Berkeley Software Distribution).</span></span> <span data-ttu-id="c5239-167">No entanto, ele nunca é substituído no fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="c5239-167">It is never replaced in the data stream, however.</span></span>

<span data-ttu-id="c5239-168">Com \_ o OOBINLINE habilitado, os dados urgentes permanecem no fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="c5239-168">With SO\_OOBINLINE enabled, the urgent data remains in the data stream.</span></span> <span data-ttu-id="c5239-169">Como resultado, o bloco de dados OOB nunca é perdido quando um novo segmento TCP chega contendo dados urgentes.</span><span class="sxs-lookup"><span data-stu-id="c5239-169">As a result, the OOB data block is never lost when a new TCP segment arrives containing urgent data.</span></span> <span data-ttu-id="c5239-170">A marca de dados OOB existente é atualizada para a nova posição.</span><span class="sxs-lookup"><span data-stu-id="c5239-170">The existing OOB data mark is updated to the new position.</span></span>

> [!Note]  
> <span data-ttu-id="c5239-171">Quando a \_ opção de soquete OOBINLINE é definida, o IOCTL SIOCATMARK sempre retorna **true** e os dados OOB são retornados ao usuário como dados normais.</span><span class="sxs-lookup"><span data-stu-id="c5239-171">When the SO\_OOBINLINE socket option is set, the SIOCATMARK IOCTL always returns **TRUE**, and OOB data is returned to the user as normal data.</span></span>

 

 

 



