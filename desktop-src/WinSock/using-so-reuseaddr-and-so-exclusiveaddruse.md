---
description: O desenvolvimento de uma infraestrutura de rede de alto nível segura é uma prioridade para a maioria dos desenvolvedores de aplicativos de rede. No entanto, a segurança do soquete geralmente é ignorada, apesar de ser muito importante ao considerar uma solução totalmente segura.
ms.assetid: b37a3e33-65ee-43b1-bc8b-3280db7ebee4
title: Usando SO_REUSEADDR e SO_EXCLUSIVEADDRUSE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aaa4024f031102cbd634c235bb39f4c7860e6c1d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103662321"
---
# <a name="using-so_reuseaddr-and-so_exclusiveaddruse"></a><span data-ttu-id="3acd3-104">Usando o \_ REUSEADDR e, portanto, \_ EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-104">Using SO\_REUSEADDR and SO\_EXCLUSIVEADDRUSE</span></span>

<span data-ttu-id="3acd3-105">O desenvolvimento de uma infraestrutura de rede de alto nível segura é uma prioridade para a maioria dos desenvolvedores de aplicativos de rede.</span><span class="sxs-lookup"><span data-stu-id="3acd3-105">Developing a secure high-level network infrastructure is a priority for most network application developers.</span></span> <span data-ttu-id="3acd3-106">No entanto, a segurança do soquete geralmente é ignorada, apesar de ser muito importante ao considerar uma solução totalmente segura.</span><span class="sxs-lookup"><span data-stu-id="3acd3-106">However, socket security is often overlooked despite being very critical when considering a fully secure solution.</span></span> <span data-ttu-id="3acd3-107">A segurança de soquete, especificamente, lida com processos que se associam à mesma porta associada anteriormente por outro processo de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3acd3-107">Socket security, specifically, deals with processes that bind to the same port previously bound by another application process.</span></span> <span data-ttu-id="3acd3-108">No passado, era possível que um aplicativo de rede "seqüestrasse" a porta de outro aplicativo, o que poderia facilmente causar um ataque de "negação de serviço" ou roubo de dados.</span><span class="sxs-lookup"><span data-stu-id="3acd3-108">In the past, it was possible for a network application to "hijack" the port of another application, which could easily lead to a "denial of service" attack or data theft.</span></span>

<span data-ttu-id="3acd3-109">Em geral, a segurança do soquete se aplica a processos do lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="3acd3-109">In general, socket security applies to server-side processes.</span></span> <span data-ttu-id="3acd3-110">Mais especificamente, a segurança de soquete se aplica a qualquer aplicativo de rede que aceite conexões e receba o tráfego de datagrama IP.</span><span class="sxs-lookup"><span data-stu-id="3acd3-110">More specifically, socket security applies to any network application that accepts connections and receives IP datagram traffic.</span></span> <span data-ttu-id="3acd3-111">Esses aplicativos normalmente se associam a uma porta conhecida e são destinos comuns de código de rede mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-111">These applications typically bind to a well-known port and are common targets for malicious network code.</span></span>

<span data-ttu-id="3acd3-112">Os aplicativos cliente têm menos probabilidade de serem os destinos desses ataques — não porque eles são menos suscetíveis, mas porque a maioria dos clientes se associa a portas locais "efêmeras" em vez de portas "de serviço" estáticas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-112">Client applications are less likely to be the targets of such attacks — not because they are less susceptible, but because most clients bind to "ephemeral" local ports rather than static "service" ports.</span></span> <span data-ttu-id="3acd3-113">Os aplicativos de rede do cliente devem sempre ser associados a portas efêmeras (especificando a porta 0 na estrutura [**SOCKADDR**](sockaddr-2.md) apontada pelo parâmetro *Name* ao chamar a função [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) ), a menos que haja um motivo de arquitetura atraente para não.</span><span class="sxs-lookup"><span data-stu-id="3acd3-113">Client network applications should always bind to ephemeral ports (by specifying port 0 in the [**SOCKADDR**](sockaddr-2.md) structure pointed to by the *name* parameter when calling the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) function) unless there is a compelling architectural reason not to.</span></span> <span data-ttu-id="3acd3-114">As portas locais efêmeras consistem em portas maiores que a porta 49151.</span><span class="sxs-lookup"><span data-stu-id="3acd3-114">The ephemeral local ports consist of ports greater than port 49151.</span></span> <span data-ttu-id="3acd3-115">A maioria dos aplicativos de servidor para serviços dedicados se associa a uma porta reservada conhecida que é menor ou igual à porta 49151.</span><span class="sxs-lookup"><span data-stu-id="3acd3-115">Most server applications for dedicated services bind to a well-known reserved port that is less than or equal to port 49151.</span></span> <span data-ttu-id="3acd3-116">Portanto, para a maioria dos aplicativos, geralmente não há um conflito para solicitações de ligação entre aplicativos cliente e servidor.</span><span class="sxs-lookup"><span data-stu-id="3acd3-116">So for most applications, there is not usually a conflict for bind requests between client and server applications.</span></span>

<span data-ttu-id="3acd3-117">Esta seção descreve o nível padrão de segurança em várias plataformas do Microsoft Windows e como as opções de soquete específicas são **\_ REUSEADDR** e [, portanto, \_ EXCLUSIVEADDRUSE](so-exclusiveaddruse.md) o impacto e afeta a segurança do aplicativo de rede.</span><span class="sxs-lookup"><span data-stu-id="3acd3-117">This section describes the default level of security on various Microsoft Windows platforms and how the specific socket options **SO\_REUSEADDR** and [SO\_EXCLUSIVEADDRUSE](so-exclusiveaddruse.md) impact and affect network application security.</span></span> <span data-ttu-id="3acd3-118">Um recurso adicional chamado segurança avançada de soquete está disponível no Windows Server 2003 e posterior.</span><span class="sxs-lookup"><span data-stu-id="3acd3-118">An additional feature called enhanced socket security is available on Windows Server 2003 and later.</span></span> <span data-ttu-id="3acd3-119">A disponibilidade dessas opções de soquete e a segurança avançada de soquete varia em todas as versões dos sistemas operacionais da Microsoft, conforme mostrado na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="3acd3-119">The availability of these socket options and enhanced socket security varies across versions of Microsoft operating systems, as shown in the table below.</span></span>

| <span data-ttu-id="3acd3-120">Plataforma</span><span class="sxs-lookup"><span data-stu-id="3acd3-120">Platform</span></span>            | <span data-ttu-id="3acd3-121">\_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-121">SO\_REUSEADDR</span></span> | <span data-ttu-id="3acd3-122">\_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-122">SO\_EXCLUSIVEADDRUSE</span></span>                  | <span data-ttu-id="3acd3-123">Segurança de soquete aprimorada</span><span class="sxs-lookup"><span data-stu-id="3acd3-123">Enhanced socket security</span></span> |
|---------------------|---------------|---------------------------------------|--------------------------|
| <span data-ttu-id="3acd3-124">Windows 95</span><span class="sxs-lookup"><span data-stu-id="3acd3-124">Windows 95</span></span>          | <span data-ttu-id="3acd3-125">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-125">Available</span></span>     | <span data-ttu-id="3acd3-126">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-126">Not Available</span></span>                         | <span data-ttu-id="3acd3-127">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-127">Not Available</span></span>            |
| <span data-ttu-id="3acd3-128">Windows 98</span><span class="sxs-lookup"><span data-stu-id="3acd3-128">Windows 98</span></span>          | <span data-ttu-id="3acd3-129">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-129">Available</span></span>     | <span data-ttu-id="3acd3-130">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-130">Not Available</span></span>                         | <span data-ttu-id="3acd3-131">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-131">Not Available</span></span>            |
| <span data-ttu-id="3acd3-132">Windows me</span><span class="sxs-lookup"><span data-stu-id="3acd3-132">Windows Me</span></span>          | <span data-ttu-id="3acd3-133">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-133">Available</span></span>     | <span data-ttu-id="3acd3-134">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-134">Not Available</span></span>                         | <span data-ttu-id="3acd3-135">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-135">Not Available</span></span>            |
| <span data-ttu-id="3acd3-136">Windows NT 4.0</span><span class="sxs-lookup"><span data-stu-id="3acd3-136">Windows NT 4.0</span></span>      | <span data-ttu-id="3acd3-137">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-137">Available</span></span>     | <span data-ttu-id="3acd3-138">Disponível no Service Pack 4 e posterior</span><span class="sxs-lookup"><span data-stu-id="3acd3-138">Available in Service Pack 4 and later</span></span> | <span data-ttu-id="3acd3-139">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-139">Not Available</span></span>            |
| <span data-ttu-id="3acd3-140">Windows 2000</span><span class="sxs-lookup"><span data-stu-id="3acd3-140">Windows 2000</span></span>        | <span data-ttu-id="3acd3-141">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-141">Available</span></span>     | <span data-ttu-id="3acd3-142">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-142">Available</span></span>                             | <span data-ttu-id="3acd3-143">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-143">Not Available</span></span>            |
| <span data-ttu-id="3acd3-144">Windows XP</span><span class="sxs-lookup"><span data-stu-id="3acd3-144">Windows XP</span></span>          | <span data-ttu-id="3acd3-145">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-145">Available</span></span>     | <span data-ttu-id="3acd3-146">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-146">Available</span></span>                             | <span data-ttu-id="3acd3-147">Não disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-147">Not Available</span></span>            |
| <span data-ttu-id="3acd3-148">Windows Server 2003</span><span class="sxs-lookup"><span data-stu-id="3acd3-148">Windows Server 2003</span></span> | <span data-ttu-id="3acd3-149">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-149">Available</span></span>     | <span data-ttu-id="3acd3-150">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-150">Available</span></span>                             | <span data-ttu-id="3acd3-151">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-151">Available</span></span>                |
| <span data-ttu-id="3acd3-152">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="3acd3-152">Windows Vista</span></span>       | <span data-ttu-id="3acd3-153">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-153">Available</span></span>     | <span data-ttu-id="3acd3-154">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-154">Available</span></span>                             | <span data-ttu-id="3acd3-155">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-155">Available</span></span>                |
| <span data-ttu-id="3acd3-156">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="3acd3-156">Windows Server 2008</span></span> | <span data-ttu-id="3acd3-157">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-157">Available</span></span>     | <span data-ttu-id="3acd3-158">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-158">Available</span></span>                             | <span data-ttu-id="3acd3-159">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-159">Available</span></span>                |
| <span data-ttu-id="3acd3-160">Windows 7and mais recente</span><span class="sxs-lookup"><span data-stu-id="3acd3-160">Windows 7and newer</span></span>  | <span data-ttu-id="3acd3-161">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-161">Available</span></span>     | <span data-ttu-id="3acd3-162">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-162">Available</span></span>                             | <span data-ttu-id="3acd3-163">Disponível</span><span class="sxs-lookup"><span data-stu-id="3acd3-163">Available</span></span>                |

## <a name="using-so_reuseaddr"></a><span data-ttu-id="3acd3-164">Usando o \_ REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-164">Using SO\_REUSEADDR</span></span>

<span data-ttu-id="3acd3-165">A opção de soquete **\_ REUSEADDR** permite que um soquete seja forçado a ligar a uma porta em uso por outro soquete.</span><span class="sxs-lookup"><span data-stu-id="3acd3-165">The **SO\_REUSEADDR** socket option allows a socket to forcibly bind to a port in use by another socket.</span></span> <span data-ttu-id="3acd3-166">O segundo Soquete chama [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) com o parâmetro *OptName* definido como **\_ REUSEADDR** e o parâmetro *optval* definido como um valor booliano de **true** antes de chamar a [**Associação**](/windows/win32/api/winsock/nf-winsock-bind) na mesma porta que o soquete original.</span><span class="sxs-lookup"><span data-stu-id="3acd3-166">The second socket calls [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) with the *optname* parameter set to **SO\_REUSEADDR** and the *optval* parameter set to a boolean value of **TRUE** before calling [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the same port as the original socket.</span></span> <span data-ttu-id="3acd3-167">Depois que o segundo soquete for associado com êxito, o comportamento de todos os soquetes vinculados a essa porta será indeterminado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-167">Once the second socket has successfully bound, the behavior for all sockets bound to that port is indeterminate.</span></span> <span data-ttu-id="3acd3-168">Por exemplo, se todos os soquetes na mesma porta fornecerem o serviço TCP, qualquer solicitação de conexão TCP de entrada na porta não poderá ser processada pelo soquete correto — o comportamento é não determinístico.</span><span class="sxs-lookup"><span data-stu-id="3acd3-168">For example, if all of the sockets on the same port provide TCP service, any incoming TCP connection requests over the port cannot be guaranteed to be handled by the correct socket — the behavior is non-deterministic.</span></span> <span data-ttu-id="3acd3-169">Um programa mal-intencionado pode usar **, portanto, \_ REUSEADDR** para forçar o BIND Sockets em uso para serviços de protocolo de rede padrão a fim de negar acesso a esses serviços.</span><span class="sxs-lookup"><span data-stu-id="3acd3-169">A malicious program can use **SO\_REUSEADDR** to forcibly bind sockets already in use for standard network protocol services in order to deny access to those service.</span></span> <span data-ttu-id="3acd3-170">Nenhum privilégio especial é necessário para usar essa opção.</span><span class="sxs-lookup"><span data-stu-id="3acd3-170">No special privileges are required to use this option.</span></span>

<span data-ttu-id="3acd3-171">Se um aplicativo cliente for associado a uma porta antes que um aplicativo de servidor seja capaz de se associar à mesma porta, poderão ocorrer problemas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-171">If a client application binds to a port before a server application is able to bind to the same port, then problems may result.</span></span> <span data-ttu-id="3acd3-172">Se o aplicativo de servidor for forçado a se associar usando a opção de soquete **\_ REUSEADDR** para a mesma porta, o comportamento de todos os soquetes vinculados a essa porta será indeterminado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-172">If the server application forcibly binds using the **SO\_REUSEADDR** socket option to the same port, then the behavior for all sockets bound to that port is indeterminate.</span></span>

<span data-ttu-id="3acd3-173">A exceção a esse comportamento não determinístico são os soquetes multicast.</span><span class="sxs-lookup"><span data-stu-id="3acd3-173">The exception to this non-deterministic behavior is multicast sockets.</span></span> <span data-ttu-id="3acd3-174">Se dois soquetes estiverem associados à mesma interface e porta e forem membros do mesmo grupo de multicast, os dados serão entregues a ambos os soquetes, em vez de um escolhido arbitrariamente.</span><span class="sxs-lookup"><span data-stu-id="3acd3-174">If two sockets are bound to the same interface and port and are members of the same multicast group, data will be delivered to both sockets, rather than an arbitrarily chosen one.</span></span>

## <a name="using-so_exclusiveaddruse"></a><span data-ttu-id="3acd3-175">Usando o \_ EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-175">Using SO\_EXCLUSIVEADDRUSE</span></span>

<span data-ttu-id="3acd3-176">Antes que a opção de soquete **\_ EXCLUSIVEADDRUSE** fosse introduzida, havia muito pouco um desenvolvedor de aplicativos de rede a fim de impedir que um programa mal-intencionado se vinculasse à porta na qual o aplicativo de rede tinha seus próprios soquetes ligados.</span><span class="sxs-lookup"><span data-stu-id="3acd3-176">Before the **SO\_EXCLUSIVEADDRUSE** socket option was introduced, there was very little a network application developer could do to prevent a malicious program from binding to the port on which the network application had its own sockets bound.</span></span> <span data-ttu-id="3acd3-177">Para resolver esse problema de segurança, o Windows Sockets introduziu a opção de soquete **\_ EXCLUSIVEADDRUSE** , que se tornou disponível no Windows NT 4,0 com Service Pack 4 (SP4) e posterior.</span><span class="sxs-lookup"><span data-stu-id="3acd3-177">In order to address this security issue, Windows Sockets introduced the **SO\_EXCLUSIVEADDRUSE** socket option, which became available on Windows NT 4.0 with Service Pack 4 (SP4) and later.</span></span>

<span data-ttu-id="3acd3-178">A opção de soquete **\_ EXCLUSIVEADDRUSE** só pode ser usada por membros do grupo de segurança Administradores no Windows XP e versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="3acd3-178">The **SO\_EXCLUSIVEADDRUSE** socket option can only be used by members of the Administrators security group on Windows XP and earlier.</span></span> <span data-ttu-id="3acd3-179">Os motivos pelos quais esse requisito foi alterado no Windows Server 2003 e versões posteriores são discutidos posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="3acd3-179">The reasons why this requirement was changed on Windows Server 2003 and later are discussed later in the article.</span></span>

<span data-ttu-id="3acd3-180">A **opção \_ EXCLUSIVEADDRUSE** é definida chamando a função [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) com o parâmetro *OptName* definido como **\_ EXCLUSIVEADDRUSE** e o parâmetro *optval* definido como um valor booliano de **true** antes de o soquete ser associado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-180">The **SO\_EXCLUSIVEADDRUSE** option is set by calling the [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) function with the *optname* parameter set to **SO\_EXCLUSIVEADDRUSE** and the *optval* parameter set to a boolean value of **TRUE** before the socket is bound.</span></span> <span data-ttu-id="3acd3-181">Após a opção ser definida, o comportamento das chamadas de [**ligação**](/windows/win32/api/winsock/nf-winsock-bind) subsequentes difere dependendo do endereço de rede especificado em cada chamada de **ligação** .</span><span class="sxs-lookup"><span data-stu-id="3acd3-181">After the option is set, the behavior of subsequent [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls differs depending on the network address specified in each **bind** call.</span></span>

<span data-ttu-id="3acd3-182">A tabela a seguir descreve o comportamento que ocorre no Windows XP e versões anteriores quando um segundo soquete tenta se associar a um endereço associado anteriormente a um primeiro soquete usando opções de soquete específicas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-182">The table below describes the behavior that occurs in Windows XP and earlier when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options.</span></span>

> [!NOTE]  
> <span data-ttu-id="3acd3-183">Na tabela abaixo, "wildcard" denota o endereço curinga para o protocolo fornecido (como "0.0.0.0" para IPv4 e "::" para IPv6).</span><span class="sxs-lookup"><span data-stu-id="3acd3-183">In the table below, "wildcard" denotes the wildcard address for the given protocol (such as "0.0.0.0" for IPv4 and "::" for IPv6).</span></span> <span data-ttu-id="3acd3-184">"Específico" indica um endereço IP específico atribuído a uma interface.</span><span class="sxs-lookup"><span data-stu-id="3acd3-184">"Specific" denotes a specific IP address assigned an interface.</span></span> <span data-ttu-id="3acd3-185">As células da tabela indicam se a ligação foi bem-sucedida ("success") ou se um erro é retornado ("INUSE" para o erro [WSAEADDRINUSE](windows-sockets-error-codes-2.md) ; "Acesso" para o erro [WSAEACCES](windows-sockets-error-codes-2.md) ).</span><span class="sxs-lookup"><span data-stu-id="3acd3-185">The table cells indicate whether or not the bind is successful ("Success") or an error is returned ("INUSE" for the [WSAEADDRINUSE](windows-sockets-error-codes-2.md) error; "ACCESS" for the [WSAEACCES](windows-sockets-error-codes-2.md) error).</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="3acd3-186">Primeira chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-186">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="3acd3-187">Segunda chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-187">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-188">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-188">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-189">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-189">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-190">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-190">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-191">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-191">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-192">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-192">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-193">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-193">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-194">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-194">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-195">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-195">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-196">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-196">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-197">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-197">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-198">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-198">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-199">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-199">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-200">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-200">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-201">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-201">Success</span></span></td>
        <td><span data-ttu-id="3acd3-202">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-202">Success</span></span></td>
        <td><span data-ttu-id="3acd3-203">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-203">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-204">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-204">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-205">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-205">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-206">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-206">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-207">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-207">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-208">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-208">Success</span></span></td>
        <td><span data-ttu-id="3acd3-209">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-209">Success</span></span></td>
        <td><span data-ttu-id="3acd3-210">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-210">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-211">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-211">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-212">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-212">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-213">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-213">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-214">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-214">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-215">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-215">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-216">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-216">Success</span></span></td>
        <td><span data-ttu-id="3acd3-217">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-217">Success</span></span></td>
        <td><span data-ttu-id="3acd3-218">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-218">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-219">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-219">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-220">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-220">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-221">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-221">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-222">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-222">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-223">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-223">Success</span></span></td>
        <td><span data-ttu-id="3acd3-224">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-224">Success</span></span></td>
        <td><span data-ttu-id="3acd3-225">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-225">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-226">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-226">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-227">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-227">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-228">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-228">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-229">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-229">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-230">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-230">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-231">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-231">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-232">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-232">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-233">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-233">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-234">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-234">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-235">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-235">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-236">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-236">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-237">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-237">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-238">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-238">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-239">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-239">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-240">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-240">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-241">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-241">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="3acd3-242">Quando dois soquetes estão associados ao mesmo número de porta, mas em diferentes interfaces explícitas, não há conflito.</span><span class="sxs-lookup"><span data-stu-id="3acd3-242">When two sockets are bound to the same port number but on different explicit interfaces, there is no conflict.</span></span> <span data-ttu-id="3acd3-243">Por exemplo, no caso em que um computador tem duas interfaces IP, 10.0.0.1 e 10.99.99.99, se a primeira chamada para [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) estiver em 10.0.0.1 com a porta definida como 5150 e, **portanto, \_ EXCLUSIVEADDRUSE** especificado, uma segunda chamada para **BIND** on 10.99.99.99 com a porta também será definida como 5150 e nenhuma opção especificada terá sucesso.</span><span class="sxs-lookup"><span data-stu-id="3acd3-243">For example, in the case where a computer has two IP interfaces, 10.0.0.1 and 10.99.99.99, if the first call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) is on 10.0.0.1 with the port set to 5150 and **SO\_EXCLUSIVEADDRUSE** specified, then a second call to **bind** on 10.99.99.99 with the port also set to 5150 and no options specified will succeed.</span></span> <span data-ttu-id="3acd3-244">No entanto, se o primeiro soquete estiver associado ao endereço curinga e à porta 5150, qualquer chamada de associação subsequente para a porta 5150 com o **\_ EXCLUSIVEADDRUSE** definido falhará com [WSAEADDRINUSE](windows-sockets-error-codes-2.md) ou [WSAEACCES](windows-sockets-error-codes-2.md) retornados pela operação de **Associação** .</span><span class="sxs-lookup"><span data-stu-id="3acd3-244">However, if the first socket is bound to the wildcard address and port 5150, then any subsequent bind call to port 5150 with **SO\_EXCLUSIVEADDRUSE** set will fail with either [WSAEADDRINUSE](windows-sockets-error-codes-2.md) or [WSAEACCES](windows-sockets-error-codes-2.md) returned by the **bind** operation.</span></span>

<span data-ttu-id="3acd3-245">No caso em que a primeira chamada para [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) define **\_ REUSEADDR** ou nenhuma opção de soquete, a segunda chamada de **ligação** irá "seqüestrar" a porta e o aplicativo não poderá determinar qual dos dois soquetes receberá pacotes específicos enviados para a porta "compartilhada".</span><span class="sxs-lookup"><span data-stu-id="3acd3-245">In the case where the first call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) sets either **SO\_REUSEADDR** or no socket options at all, the second **bind** call will "hijack" the port and the application will be unable to determine which of the two sockets received specific packets sent to the "shared" port.</span></span>

<span data-ttu-id="3acd3-246">Um aplicativo típico que chama a função de [**Associação**](/windows/win32/api/winsock/nf-winsock-bind) não aloca o soquete associado para uso exclusivo, a menos que a opção de soquete **\_ EXCLUSIVEADDRUSE** seja chamada no soquete antes da chamada para a função de **ligação** .</span><span class="sxs-lookup"><span data-stu-id="3acd3-246">A typical application that calls the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) function does not allocate the bound socket for exclusive use, unless the **SO\_EXCLUSIVEADDRUSE** socket option is called on the socket before the call to the **bind** function.</span></span> <span data-ttu-id="3acd3-247">Se um aplicativo cliente se associar a uma porta efêmera ou a uma porta específica antes que um aplicativo de servidor seja associado à mesma porta, poderão ocorrer problemas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-247">If a client application binds to an ephemeral port or a specific port before a server application binds to the same port, then problems can result.</span></span> <span data-ttu-id="3acd3-248">O aplicativo de servidor pode forçar a ligação com a mesma porta usando a opção de soquete **\_ REUSEADDR** no soquete antes de chamar a função **BIND** , mas o comportamento de todos os soquetes ligados a essa porta é, então, indeterminado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-248">The server application can forcibly bind to the same port by using the **SO\_REUSEADDR** socket option on the socket before calling the **bind** function, but the behavior for all sockets bound to that port is then indeterminate.</span></span> <span data-ttu-id="3acd3-249">Se o aplicativo de servidor tentar usar a opção de soquete **\_ EXCLUSIVEADDRUSE** para uso exclusivo da porta, a solicitação falhará.</span><span class="sxs-lookup"><span data-stu-id="3acd3-249">If the server application tries to use the **SO\_EXCLUSIVEADDRUSE** socket option for exclusive use of the port, the request will fail.</span></span>

<span data-ttu-id="3acd3-250">Por outro lado, um soquete com o **\_ EXCLUSIVEADDRUSE** definido não pode necessariamente ser reutilizado imediatamente após o fechamento do soquete.</span><span class="sxs-lookup"><span data-stu-id="3acd3-250">Conversely, a socket with the **SO\_EXCLUSIVEADDRUSE** set cannot necessarily be reused immediately after socket closure.</span></span> <span data-ttu-id="3acd3-251">Por exemplo, se um soquete de escuta com o **\_ EXCLUSIVEADDRUSE** Set aceitar uma conexão e, em seguida, for fechado posteriormente, outro soquete (também com **\_ EXCLUSIVEADDRUSE**) não poderá se associar à mesma porta que o primeiro soquete até que a conexão original se torne inativa.</span><span class="sxs-lookup"><span data-stu-id="3acd3-251">For example, if a listening socket with **SO\_EXCLUSIVEADDRUSE** set accepts a connection and is then subsequently closed, another socket (also with **SO\_EXCLUSIVEADDRUSE**) cannot bind to the same port as the first socket until the original connection becomes inactive.</span></span>

<span data-ttu-id="3acd3-252">Esse problema pode se tornar complicado porque o protocolo de transporte subjacente pode não encerrar a conexão, embora o soquete tenha sido fechado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-252">This issue can become complicated because the underlying transport protocol may not terminate the connection even though the socket has been closed.</span></span> <span data-ttu-id="3acd3-253">Mesmo após o soquete ser fechado pelo aplicativo, o sistema deve transmitir todos os dados armazenados em buffer, enviar uma mensagem de desconexão normal para o par e aguardar uma mensagem de desconexão normal correspondente do par.</span><span class="sxs-lookup"><span data-stu-id="3acd3-253">Even after the socket has been closed by the application, the system must transmit any buffered data, send a graceful disconnect message to the peer, and wait for a corresponding graceful disconnect message from the peer.</span></span> <span data-ttu-id="3acd3-254">É possível que o protocolo de transporte subjacente nunca libere a conexão; por exemplo, o par que participa da conexão original pode anunciar uma janela de tamanho zero ou alguma outra forma de configuração de "ataque".</span><span class="sxs-lookup"><span data-stu-id="3acd3-254">It is possible that the underlying transport protocol might never release the connection; for example, the peer participating in the original connection might advertise a zero-size window, or some other form of "attack" configuration.</span></span> <span data-ttu-id="3acd3-255">Nesse caso, a conexão do cliente permanece em um estado ativo, apesar da solicitação para fechá-la, já que os dados não confirmados permanecem no buffer.</span><span class="sxs-lookup"><span data-stu-id="3acd3-255">In such a case, the client connection remains in an active state despite the request to close it, since unacknowledged data remains in the buffer.</span></span>

<span data-ttu-id="3acd3-256">Para evitar essa situação, os aplicativos de rede devem garantir um desligamento normal chamando [**Shutdown**](/windows/win32/api/winsock/nf-winsock-shutdown) com o sinalizador de envio de SD \_ definido e aguardando em um loop de [**recepção**](/windows/win32/api/winsock/nf-winsock-recv) até que zero bytes sejam retornados pela conexão.</span><span class="sxs-lookup"><span data-stu-id="3acd3-256">To avoid this situation, network applications should ensure a graceful shutdown by calling [**shutdown**](/windows/win32/api/winsock/nf-winsock-shutdown) with the SD\_SEND flag set, and then wait in a [**recv**](/windows/win32/api/winsock/nf-winsock-recv) loop until zero bytes are returned over the connection.</span></span> <span data-ttu-id="3acd3-257">Isso garante que todos os dados sejam recebidos pelo par e, da mesma forma, confirmam com o par de que ele recebeu todos os dados transmitidos, além de evitar o problema de reutilização de porta mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="3acd3-257">This guarantees that all data is received by the peer and likewise confirms with the peer that it has received all of the transmitted data, as well as avoiding the aforementioned port reuse issue.</span></span>

<span data-ttu-id="3acd3-258">A \_ opção de soquete remanescente pode ser definida em um soquete para impedir que a porta esteja em transição para um estado de espera "ativa"; no entanto, isso não é recomendado, pois pode levar a efeitos desejados, como conexões de redefinição.</span><span class="sxs-lookup"><span data-stu-id="3acd3-258">The SO\_LINGER socket option may be set on a socket to prevent the port from transitioning to an "active" wait state; however, this is discouraged as it can lead to desired effects, such as reset connections.</span></span> <span data-ttu-id="3acd3-259">Por exemplo, se os dados forem recebidos pelo par, mas permanecerem não confirmados por ele e o computador local fechar o soquete com a \_ configuração remanescente, a conexão entre os dois computadores será redefinida e os dados não confirmados serão descartados pelo par.</span><span class="sxs-lookup"><span data-stu-id="3acd3-259">For example, if data is received by the peer but remains unacknowledged by it, and the local computer closes the socket with SO\_LINGER set on it, the connection between the two computers is reset and the unacknowledged data discarded by the peer.</span></span> <span data-ttu-id="3acd3-260">É difícil escolher um horário adequado para o remanescente, pois um valor de tempo limite menor geralmente resulta em conexões repentinamente anuladas, enquanto valores de tempo limite maiores deixam o sistema vulnerável a ataques de negação de serviço (estabelecendo muitas conexões e potencialmente bloqueando/bloquear threads de aplicativo).</span><span class="sxs-lookup"><span data-stu-id="3acd3-260">Picking a suitable time to linger is difficult as a smaller timeout value often results in suddenly aborted connections, whereas larger timeout values leave the system vulnerable to denial-of-service attacks (by establishing many connections and potentially stalling/blocking application threads).</span></span> <span data-ttu-id="3acd3-261">Fechar um soquete que tem um valor de tempo limite remanescente diferente também pode fazer com que a chamada [**fechamento**](/windows/win32/api/winsock/nf-winsock-closesocket) seja bloqueada.</span><span class="sxs-lookup"><span data-stu-id="3acd3-261">Closing a socket that has a nonzero linger timeout value may also cause the [**closesocket**](/windows/win32/api/winsock/nf-winsock-closesocket) call to block.</span></span>

## <a name="enhanced-socket-security"></a><span data-ttu-id="3acd3-262">Segurança de soquete aprimorada</span><span class="sxs-lookup"><span data-stu-id="3acd3-262">Enhanced Socket Security</span></span>

<span data-ttu-id="3acd3-263">A segurança avançada de soquete foi adicionada com o lançamento do Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="3acd3-263">Enhanced socket security was added with the release of Windows Server 2003.</span></span> <span data-ttu-id="3acd3-264">Em versões anteriores do sistema operacional Microsoft Server, a segurança de soquete padrão permitia facilmente processos para seqüestrar portas de aplicativos desconhecidos.</span><span class="sxs-lookup"><span data-stu-id="3acd3-264">In previous Microsoft server operating system releases, the default socket security easily allowed processes to hijack ports from unsuspecting applications.</span></span> <span data-ttu-id="3acd3-265">No Windows Server 2003, os soquetes não estão em um estado compartilhável por padrão.</span><span class="sxs-lookup"><span data-stu-id="3acd3-265">In Windows Server 2003, sockets are not in a sharable state by default.</span></span> <span data-ttu-id="3acd3-266">Portanto, se um aplicativo quiser permitir que outros processos reutilizem uma porta na qual um soquete já esteja associado, ele deverá habilitá-lo especificamente.</span><span class="sxs-lookup"><span data-stu-id="3acd3-266">Therefore, if an application wants to allow other processes to reuse a port on which a socket is already bound, it must specifically enable it.</span></span> <span data-ttu-id="3acd3-267">Se esse for o caso, o primeiro soquete para chamar a [**ligação**](/windows/win32/api/winsock/nf-winsock-bind) na porta deve ter **\_ REUSEADDR** definido no soquete.</span><span class="sxs-lookup"><span data-stu-id="3acd3-267">If that is the case, the first socket to call [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the port must have **SO\_REUSEADDR** set on the socket.</span></span> <span data-ttu-id="3acd3-268">A única exceção a esse caso ocorre quando a segunda chamada de **ligação** é executada pela mesma conta de usuário que fez com que a chamada original fosse **associada**.</span><span class="sxs-lookup"><span data-stu-id="3acd3-268">The only exception to this case occurs when the second **bind** call is performed by the same user account that made the original call to **bind**.</span></span> <span data-ttu-id="3acd3-269">Essa exceção existe apenas para fornecer compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="3acd3-269">This exception exists solely to provide backward compatibility.</span></span>

<span data-ttu-id="3acd3-270">A tabela a seguir descreve o comportamento que ocorre no Windows Server 2003 e sistemas operacionais posteriores quando um segundo soquete tenta se associar a um endereço associado anteriormente a um primeiro soquete usando opções de soquete específicas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-270">The table below describes the behavior that occurs in Windows Server 2003 and later operating systems when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options.</span></span>

> [!NOTE]
> <span data-ttu-id="3acd3-271">Na tabela abaixo, "wildcard" denota o endereço curinga para o protocolo fornecido (como "0.0.0.0" para IPv4 e "::" para IPv6).</span><span class="sxs-lookup"><span data-stu-id="3acd3-271">In the table below, "wildcard" denotes the wildcard address for the given protocol (such as "0.0.0.0" for IPv4 and "::" for IPv6).</span></span> <span data-ttu-id="3acd3-272">"Específico" indica um endereço IP específico atribuído a uma interface.</span><span class="sxs-lookup"><span data-stu-id="3acd3-272">"Specific" denotes a specific IP address assigned an interface.</span></span> <span data-ttu-id="3acd3-273">As células da tabela indicam se a ligação foi bem-sucedida ("success") ou o erro retornado ("INUSE" para o erro [WSAEADDRINUSE](windows-sockets-error-codes-2.md) ; "Acesso" para o erro [WSAEACCES](windows-sockets-error-codes-2.md) ).</span><span class="sxs-lookup"><span data-stu-id="3acd3-273">The table cells indicate whether or not the bind is successful ("Success") or the error returned ("INUSE" for the [WSAEADDRINUSE](windows-sockets-error-codes-2.md) error; "ACCESS" for the [WSAEACCES](windows-sockets-error-codes-2.md) error).</span></span>
>
> <span data-ttu-id="3acd3-274">Observe também que nessa tabela específica, ambas as chamadas de [**Associação**](/windows/win32/api/winsock/nf-winsock-bind) são feitas sob a mesma conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="3acd3-274">Also note that in this specific table, both [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls are made under the same user account.</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="3acd3-275">Primeira chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-275">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="3acd3-276">Segunda chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-276">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-277">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-277">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-278">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-278">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-279">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-279">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-280">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-280">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-281">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-281">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-282">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-282">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-283">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-283">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-284">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-284">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-285">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-285">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-286">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-286">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-287">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-287">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-288">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-288">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-289">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-289">Success</span></span></td>
        <td><span data-ttu-id="3acd3-290">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-290">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-291">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-291">Success</span></span></td>
        <td><span data-ttu-id="3acd3-292">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-292">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-293">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-293">Success</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-294">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-294">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-295">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-295">Success</span></span></td>
        <td><span data-ttu-id="3acd3-296">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-296">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-297">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-297">Success</span></span></td>
        <td><span data-ttu-id="3acd3-298">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-298">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-299">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-299">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-300">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-300">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-301">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-301">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-302">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-302">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-303">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-303">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-304">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-304">Success</span></span></td>
        <td><span data-ttu-id="3acd3-305">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-305">Success</span></span></td>
        <td><span data-ttu-id="3acd3-306">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-306">Success</span></span></td>
        <td><span data-ttu-id="3acd3-307">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-307">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-308">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-308">Success</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-309">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-309">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-310">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-310">Success</span></span></td>
        <td><span data-ttu-id="3acd3-311">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-311">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-312">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-312">Success</span></span></td>
        <td><span data-ttu-id="3acd3-313">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-313">Success</span></span></td>
        <td><span data-ttu-id="3acd3-314">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-314">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-315">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-315">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-316">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-316">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-317">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-317">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-318">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-318">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-319">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-319">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-320">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-320">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-321">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-321">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-322">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-322">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-323">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-323">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-324">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-324">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-325">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-325">Success</span></span></td>
        <td><span data-ttu-id="3acd3-326">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-326">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-327">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-327">Success</span></span></td>
        <td><span data-ttu-id="3acd3-328">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-328">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-329">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-329">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-330">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-330">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="3acd3-331">Algumas entradas na tabela acima da explicação de mérito.</span><span class="sxs-lookup"><span data-stu-id="3acd3-331">A few entries in the table above merit explanation.</span></span>

<span data-ttu-id="3acd3-332">Por exemplo, se o primeiro chamador definir **, portanto, \_ EXCLUSIVEADDRUSE** em um endereço específico, e o segundo chamador tentar chamar [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) com um endereço curinga na mesma porta, a segunda chamada de **ligação** terá sucesso.</span><span class="sxs-lookup"><span data-stu-id="3acd3-332">For example, if the first caller sets **SO\_EXCLUSIVEADDRUSE** on a specific address, and second caller attempts to call [**bind**](/windows/win32/api/winsock/nf-winsock-bind) with a wildcard address on the same port, the second **bind** call will succeed.</span></span> <span data-ttu-id="3acd3-333">Nesse caso em particular, o segundo chamador é associado a todas as interfaces, exceto o endereço específico ao qual o primeiro chamador está associado.</span><span class="sxs-lookup"><span data-stu-id="3acd3-333">In this particular case, the second caller is bound to all interfaces except the specific address to which the first caller is bound.</span></span> <span data-ttu-id="3acd3-334">Observe que o inverso desse caso não é verdadeiro: se o primeiro conjunto de chamadas for **\_ EXCLUSIVEADDRUSE** e chamar **BIND** com o sinalizador curinga, o segundo chamador não poderá chamar **BIND** com a mesma porta.</span><span class="sxs-lookup"><span data-stu-id="3acd3-334">Note that the reverse of this case is not true: if the first caller sets **SO\_EXCLUSIVEADDRUSE** and calls **bind** with the wildcard flag, the second caller is not able to call **bind** with the same port.</span></span>

<span data-ttu-id="3acd3-335">O comportamento de associação de soquete é alterado quando as chamadas de ligação de soquete são feitas em contas de usuário diferentes.</span><span class="sxs-lookup"><span data-stu-id="3acd3-335">The socket binding behavior changes when the socket bind calls are made under different user accounts.</span></span> <span data-ttu-id="3acd3-336">A tabela a seguir especifica o comportamento que ocorre no Windows Server 2003 e sistemas operacionais posteriores quando um segundo soquete tenta se associar a um endereço associado anteriormente a um primeiro soquete usando opções de soquete específicas e uma conta de usuário diferente.</span><span class="sxs-lookup"><span data-stu-id="3acd3-336">The table below specifies the behavior that occurs in Windows Server 2003 and later operating systems when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options and a different user account.</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="3acd3-337">Primeira chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-337">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="3acd3-338">Segunda chamada de <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>ligação</strong></a></span><span class="sxs-lookup"><span data-stu-id="3acd3-338">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-339">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-339">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-340">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-340">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="3acd3-341">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-341">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-342">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-342">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-343">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-343">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-344">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-344">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-345">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-345">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-346">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-346">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-347">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-347">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-348">Padrão</span><span class="sxs-lookup"><span data-stu-id="3acd3-348">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-349">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-349">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-350">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-350">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-351">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-351">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-352">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-352">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-353">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-353">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-354">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-354">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-355">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-355">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-356">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-356">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-357">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-357">Success</span></span></td>
        <td><span data-ttu-id="3acd3-358">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-358">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-359">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-359">Success</span></span></td>
        <td><span data-ttu-id="3acd3-360">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-360">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-361">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-361">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-362">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-362">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-363">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="3acd3-363">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-364">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-364">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-365">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-365">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-366">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-366">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-367">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-367">Success</span></span></td>
        <td><span data-ttu-id="3acd3-368">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-368">Success</span></span></td>
        <td><span data-ttu-id="3acd3-369">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-369">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-370">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-370">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-371">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-371">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-372">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-372">Success</span></span></td>
        <td><span data-ttu-id="3acd3-373">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-373">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-374">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-374">Success</span></span></td>
        <td><span data-ttu-id="3acd3-375">Êxito</span><span class="sxs-lookup"><span data-stu-id="3acd3-375">Success</span></span></td>
        <td><span data-ttu-id="3acd3-376">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-376">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-377">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-377">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="3acd3-378">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-378">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-379">Curinga</span><span class="sxs-lookup"><span data-stu-id="3acd3-379">Wildcard</span></span></td>
        <td><span data-ttu-id="3acd3-380">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-380">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-381">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-381">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-382">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-382">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-383">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-383">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-384">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-384">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-385">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-385">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="3acd3-386">Específicas</span><span class="sxs-lookup"><span data-stu-id="3acd3-386">Specific</span></span></td>
        <td><span data-ttu-id="3acd3-387">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-387">Success</span></span></td>
        <td><span data-ttu-id="3acd3-388">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-388">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-389">Sucesso</span><span class="sxs-lookup"><span data-stu-id="3acd3-389">Success</span></span></td>
        <td><span data-ttu-id="3acd3-390">ACCESS</span><span class="sxs-lookup"><span data-stu-id="3acd3-390">ACCESS</span></span></td>
        <td><span data-ttu-id="3acd3-391">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-391">INUSE</span></span></td>
        <td><span data-ttu-id="3acd3-392">INUSE</span><span class="sxs-lookup"><span data-stu-id="3acd3-392">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="3acd3-393">Observe que o comportamento padrão é diferente quando as chamadas de [**ligação**](/windows/win32/api/winsock/nf-winsock-bind) são feitas em contas de usuário diferentes.</span><span class="sxs-lookup"><span data-stu-id="3acd3-393">Note that the default behavior is different when the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls are made under different user accounts.</span></span> <span data-ttu-id="3acd3-394">Se o primeiro chamador não definir nenhuma opção no soquete e associar-se ao endereço curinga, o segundo chamador não poderá definir a opção for **\_ REUSEADDR** e se associar com êxito à mesma porta.</span><span class="sxs-lookup"><span data-stu-id="3acd3-394">If the first caller does not set any options on the socket and binds to the wildcard address, then the second caller cannot set the **SO\_REUSEADDR** option and successfully bind to the same port.</span></span> <span data-ttu-id="3acd3-395">O comportamento padrão sem opções definidas também retorna um erro.</span><span class="sxs-lookup"><span data-stu-id="3acd3-395">The default behavior with no options set returns an error, as well.</span></span>

<span data-ttu-id="3acd3-396">No Windows Vista e posterior, um soquete de pilha dual pode ser criado, que opera em IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="3acd3-396">On Windows Vista and later, a dual stack socket can be created which operates over both IPv6 and IPv4.</span></span> <span data-ttu-id="3acd3-397">Quando um soquete de pilha dupla está associado ao endereço curinga, a porta fornecida é reservada nas pilhas de rede IPv4 e IPv6 e as verificações associadas a **\_ REUSEADDR** e **\_ EXCLUSIVEADDRUSE** (se definido) são feitas.</span><span class="sxs-lookup"><span data-stu-id="3acd3-397">When a dual stack socket is bound to the wildcard address, the given port is reserved on both the IPv4 and IPv6 networking stacks and the checks associated with **SO\_REUSEADDR** and **SO\_EXCLUSIVEADDRUSE** (if set) are made.</span></span> <span data-ttu-id="3acd3-398">Essas verificações devem ter sucesso em ambas as pilhas de rede.</span><span class="sxs-lookup"><span data-stu-id="3acd3-398">These checks must succeed on both networking stacks.</span></span> <span data-ttu-id="3acd3-399">Por exemplo, se um soquete TCP de pilha dupla contiver **\_ EXCLUSIVEADDRUSE** e tentar se associar à porta 5000, nenhum outro soquete TCP poderá ser associado anteriormente à porta 5000 (curinga ou específico).</span><span class="sxs-lookup"><span data-stu-id="3acd3-399">For example, if a dual stack TCP socket sets **SO\_EXCLUSIVEADDRUSE** and then tries to bind to port 5000, then no other TCP socket can be previously bound to port 5000 (either wildcard or specific).</span></span> <span data-ttu-id="3acd3-400">Nesse caso, se um soquete TCP IPv4 tiver sido associado anteriormente ao endereço de loopback na porta 5000, a chamada de [**ligação**](/windows/win32/api/winsock/nf-winsock-bind) para o soquete de pilha dupla falharia com [WSAEACCES](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="3acd3-400">In this case if an IPv4 TCP socket was previously bound to the loopback address on port 5000, the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) call for the dual stack socket would fail with [WSAEACCES](windows-sockets-error-codes-2.md).</span></span>

## <a name="application-strategies"></a><span data-ttu-id="3acd3-401">Estratégias de aplicativo</span><span class="sxs-lookup"><span data-stu-id="3acd3-401">Application Strategies</span></span>

<span data-ttu-id="3acd3-402">Ao desenvolver um aplicativo de rede que opere na camada de soquete, é importante considerar o tipo de segurança de soquete necessário.</span><span class="sxs-lookup"><span data-stu-id="3acd3-402">When developing network application that operate at the socket layer, it is important to consider the type of socket security necessary.</span></span> <span data-ttu-id="3acd3-403">Aplicativos cliente — aplicativos que conectam ou enviam dados a um serviço — raramente exigem etapas adicionais, pois eles se associam a uma porta local aleatória (efêmera).</span><span class="sxs-lookup"><span data-stu-id="3acd3-403">Client applications — applications that connect or send data to a service — rarely require any additional steps since they bind to a random local (ephemeral) port.</span></span> <span data-ttu-id="3acd3-404">Se o cliente exigir uma associação de porta local específica para funcionar corretamente, você deve considerar a segurança do soquete.</span><span class="sxs-lookup"><span data-stu-id="3acd3-404">If the client does require a specific local port binding in order to function correctly, then you must consider socket security.</span></span>

<span data-ttu-id="3acd3-405">A **opção \_ REUSEADDR** tem muito poucos usos em aplicativos normais além dos soquetes multicast, nos quais os dados são entregues a todos os soquetes ligados na mesma porta.</span><span class="sxs-lookup"><span data-stu-id="3acd3-405">The **SO\_REUSEADDR** option has very few uses in normal applications aside from multicast sockets where data is delivered to all of the sockets bound on the same port.</span></span> <span data-ttu-id="3acd3-406">Caso contrário, qualquer aplicativo que define essa opção de soquete deve ser reprojetado para remover a dependência, pois ela está eminentemente vulnerável a "seqüestro de soquete".</span><span class="sxs-lookup"><span data-stu-id="3acd3-406">Otherwise, any application that sets this socket option should be redesigned to remove the dependency since it is eminently vulnerable to "socket hijacking".</span></span> <span data-ttu-id="3acd3-407">Desde que a opção de soquete **\_ REUSEADDR** possa ser usada para seqüestrar potencialmente uma porta em um aplicativo de servidor, o aplicativo deve ser considerado como não seguro.</span><span class="sxs-lookup"><span data-stu-id="3acd3-407">As long as **SO\_REUSEADDR** socket option can be used to potentially hijack a port in a server application, the application must be considered to be not secure.</span></span>

<span data-ttu-id="3acd3-408">Todos os aplicativos de servidor devem definir **\_ EXCLUSIVEADDRUSE** para um nível forte de segurança de soquete.</span><span class="sxs-lookup"><span data-stu-id="3acd3-408">All server applications must set **SO\_EXCLUSIVEADDRUSE** for a strong level of socket security.</span></span> <span data-ttu-id="3acd3-409">Isso não apenas impede que software mal-intencionado Capture a porta, mas também indica se outro aplicativo está associado ou não à porta solicitada.</span><span class="sxs-lookup"><span data-stu-id="3acd3-409">Not only does it prevent malicious software from hijacking the port, but it also indicates whether or not another application is bound to the requested port.</span></span> <span data-ttu-id="3acd3-410">Por exemplo, uma chamada para [**ligar**](/windows/win32/api/winsock/nf-winsock-bind) o endereço curinga por um processo com o **\_ EXCLUSIVEADDRUSE** Socket Option Set falhará se outro processo estiver atualmente associado à mesma porta em uma interface específica.</span><span class="sxs-lookup"><span data-stu-id="3acd3-410">For example, a call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the wildcard address by a process with the **SO\_EXCLUSIVEADDRUSE** socket option set will fail if another process is currently bound to the same port on a specific interface.</span></span>

<span data-ttu-id="3acd3-411">Por fim, embora a segurança de soquete tenha sido aprimorada no Windows Server 2003, um aplicativo sempre deve definir a opção de soquete **\_ EXCLUSIVEADDRUSE** para garantir que ele seja associado a todas as interfaces específicas que o processo solicitou.</span><span class="sxs-lookup"><span data-stu-id="3acd3-411">Lastly, even though socket security has been improved in Windows Server 2003, an application should always set the **SO\_EXCLUSIVEADDRUSE** socket option to ensure that it binds to all the specific interfaces the process has requested.</span></span> <span data-ttu-id="3acd3-412">A segurança de soquete no Windows Server 2003 adiciona um nível maior de segurança para aplicativos herdados, mas os desenvolvedores de aplicativos ainda precisam projetar seus produtos com todos os aspectos da segurança em mente.</span><span class="sxs-lookup"><span data-stu-id="3acd3-412">The socket security in Windows Server 2003 adds an increased level of security for legacy applications, but application developers must still design their products with all aspects of security in mind.</span></span>
