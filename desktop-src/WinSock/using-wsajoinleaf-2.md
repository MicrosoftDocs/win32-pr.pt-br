---
description: Conforme mencionado anteriormente, a função WSAJoinLeaf é usada para ingressar um nó folha em uma sessão do MultiPoint.
ms.assetid: eaa1593a-36eb-4d92-a3d9-91566fc0216b
title: Usando WSAJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 027262a117edc5541a4809481aa4607837343b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103828670"
---
# <a name="using-wsajoinleaf"></a><span data-ttu-id="b5421-103">Usando WSAJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="b5421-103">Using WSAJoinLeaf</span></span>

<span data-ttu-id="b5421-104">Conforme mencionado anteriormente, a função [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) é usada para ingressar um nó folha em uma sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="b5421-104">As mentioned previously, the function [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="b5421-105">**WSAJoinLeaf** tem os mesmos parâmetros e semântica que [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) , exceto pelo fato de que ele retorna um descritor de soquete (como em [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)) e tem um parâmetro *dwFlags* adicional.</span><span class="sxs-lookup"><span data-stu-id="b5421-105">**WSAJoinLeaf** has the same parameters and semantics as [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) except that it returns a socket descriptor (as in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)), and it has an additional *dwFlags* parameter.</span></span>

<span data-ttu-id="b5421-106">O parâmetro *dwFlags* é usado para indicar se o soquete estará agindo somente como um remetente, somente como um receptor ou ambos.</span><span class="sxs-lookup"><span data-stu-id="b5421-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="b5421-107">Somente os soquetes do MultiPoint podem ser usados para os parâmetros de entrada *s* nesta função.</span><span class="sxs-lookup"><span data-stu-id="b5421-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="b5421-108">Se o soquete do MultiPoint estiver no modo de não bloqueio, o descritor de soquete retornado não será utilizável até que uma indicação de conexão FD correspondente \_ seja recebida.</span><span class="sxs-lookup"><span data-stu-id="b5421-108">If the multipoint socket is in nonblocking mode, the returned socket descriptor is not usable until after a corresponding FD\_CONNECT indication is received.</span></span> <span data-ttu-id="b5421-109">Um aplicativo raiz em uma sessão do MultiPoint pode chamar [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) uma ou mais vezes para adicionar um número de nós folha, no entanto, no máximo uma solicitação de conexão do MultiPoint pode estar pendente por vez.</span><span class="sxs-lookup"><span data-stu-id="b5421-109">A root application in a multipoint session may call [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="b5421-110">O descritor de soquete retornado por [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) difere dependendo se o descritor de soquete de entrada, *s*, é uma \_ raiz c ou uma \_ folha c.</span><span class="sxs-lookup"><span data-stu-id="b5421-110">The socket descriptor returned by [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differs depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="b5421-111">Quando usado com um \_ soquete raiz c, o parâmetro *Name* designa um nó folha específico a ser adicionado e o descritor de soquete retornado é um \_ soquete folha c correspondente ao nó folha recém-adicionado.</span><span class="sxs-lookup"><span data-stu-id="b5421-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="b5421-112">Ele não se destina a ser usado para a troca de dados do MultiPoint, mas sim é usado para receber indicações do FD \_ xxx (por exemplo, FD \_ Close) para a conexão que existe para a folha c específica \_ .</span><span class="sxs-lookup"><span data-stu-id="b5421-112">It is not intended to be used for the exchange of multipoint data, but rather it is used to receive FD\_XXX indications (for example, FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="b5421-113">Algumas implementações do MultiPoint também podem permitir que esse soquete seja usado para chats colaterais entre a raiz e um nó folha individual.</span><span class="sxs-lookup"><span data-stu-id="b5421-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="b5421-114">Uma \_ indicação de fechamento FD será recebida para este Soquete se o nó folha correspondente chamar [**fechamento**](/windows/desktop/api/winsock/nf-winsock-closesocket) para sair da sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="b5421-114">An FD\_CLOSE indication is received for this socket if the corresponding leaf node calls [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) to drop out of the multipoint session.</span></span> <span data-ttu-id="b5421-115">Simetricamente, invocar **fechamento** no \_ soquete folha c retornado de **WSAJoinLeaf** faz com que o soquete no nó folha correspondente obtenha uma \_ notificação FD Close.</span><span class="sxs-lookup"><span data-stu-id="b5421-115">Symmetrically, invoking **closesocket** on the c\_leaf socket returned from **WSAJoinLeaf** causes the socket in the corresponding leaf node to get an FD\_CLOSE notification.</span></span>

<span data-ttu-id="b5421-116">Quando [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) é invocado com um \_ soquete de folha c, o parâmetro Name contém o endereço do aplicativo raiz (para um esquema de controle com raiz) ou uma sessão de MultiPoint existente (esquema de controle *sem* raiz) e o descritor de soquete retornado é o mesmo que o descritor de soquete de entrada.</span><span class="sxs-lookup"><span data-stu-id="b5421-116">When [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="b5421-117">Em um esquema de controle com raiz, o aplicativo raiz coloca seu \_ soquete raiz c no modo de escuta chamando [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span><span class="sxs-lookup"><span data-stu-id="b5421-117">In a rooted control scheme, the root application puts its c\_root socket in listening mode by calling [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span></span> <span data-ttu-id="b5421-118">A notificação de aceitação padrão do FD \_ é entregue quando o nó folha solicita a associação a si mesma à sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="b5421-118">The standard FD\_ACCEPT notification is delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="b5421-119">O aplicativo raiz usa as funções [](/windows/desktop/api/Winsock2/nf-winsock2-accept) / [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) de aceitação usuais para admitir o novo nó folha.</span><span class="sxs-lookup"><span data-stu-id="b5421-119">The root application uses the usual [**accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept)/[**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) functions to admit the new leaf node.</span></span> <span data-ttu-id="b5421-120">O valor retornado de **Accept** ou **WSAAccept** também é um \_ descritor de soquete folha c, assim como os retornados de **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="b5421-120">The value returned from either **accept** or **WSAAccept** is also a c\_leaf socket descriptor just like those returned from **WSAJoinLeaf**.</span></span> <span data-ttu-id="b5421-121">Para acomodar os esquemas do MultiPoint que permitem junções iniciadas pela raiz e por folha, é aceitável \_ que um soquete raiz c que já esteja no modo de escuta seja usado como entrada para **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="b5421-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as input to **WSAJoinLeaf**.</span></span>

<span data-ttu-id="b5421-122">Um aplicativo raiz do MultiPoint é geralmente responsável pelo Dismantling ordenado de uma sessão do MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="b5421-122">A multipoint root application is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="b5421-123">Esse aplicativo pode usar [**Shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) ou [**fechamento**](/windows/desktop/api/winsock/nf-winsock-closesocket) em um \_ soquete raiz c para causar todos os \_ soquetes de folha c associados, incluindo aqueles retornados de [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) e seus \_ soquetes de folha c correspondentes nos nós folha remota, para obter \_ notificação de fechamento de FD.</span><span class="sxs-lookup"><span data-stu-id="b5421-123">Such an application may use [**shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) or [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 



