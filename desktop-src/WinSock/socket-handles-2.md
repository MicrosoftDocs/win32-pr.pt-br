---
description: Um identificador de soquete pode, opcionalmente, ser um identificador de arquivo no Windows Sockets 2. Um identificador de soquete de um provedor Winsock pode ser usado com outras funções não Winsock, como ReadFile, WriteFile, ReadFileEx e WriteFileEx.
ms.assetid: 986dd9d8-52be-47aa-92b2-6cd40b83f5de
title: Identificadores de soquete
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca6ca8ed935819e018a59c52fb43dcf816530c07
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105787766"
---
# <a name="socket-handles"></a><span data-ttu-id="14240-104">Identificadores de soquete</span><span class="sxs-lookup"><span data-stu-id="14240-104">Socket Handles</span></span>

<span data-ttu-id="14240-105">Um identificador de soquete pode, opcionalmente, ser um identificador de arquivo no Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="14240-105">A socket handle can optionally be a file handle in Windows Sockets 2.</span></span> <span data-ttu-id="14240-106">Um identificador de soquete de um provedor Winsock pode ser usado com outras funções não Winsock, como [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/win32/api/fileapi/nf-fileapi-readfileex)e [**WriteFileEx**](/windows/win32/api/fileapi/nf-fileapi-writefileex).</span><span class="sxs-lookup"><span data-stu-id="14240-106">A socket handle from a Winsock provider can be used with other non-Winsock functions such as [**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/win32/api/fileapi/nf-fileapi-readfileex), and [**WriteFileEx**](/windows/win32/api/fileapi/nf-fileapi-writefileex).</span></span>

<span data-ttu-id="14240-107">O **XP1 \_ IFS \_ manipula** o membro na estrutura de informações de protocolo para um provedor determina se um identificador de soquete de um provedor é um identificador IFS (sistema de arquivos instalável).</span><span class="sxs-lookup"><span data-stu-id="14240-107">The **XP1\_IFS\_HANDLES** member in the protocol information structure for a provider determines whether a socket handle from a provider is an Installable File System (IFS) handle.</span></span> <span data-ttu-id="14240-108">Identificadores de soquete que são identificadores de IFS podem ser usados sem uma penalidade de desempenho com outras funções não Winsock ([**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) e [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), por exemplo).</span><span class="sxs-lookup"><span data-stu-id="14240-108">Socket handles that are IFS handles can be used without a performance penalty with other non-Winsock functions ([**ReadFile**](/windows/win32/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/win32/api/fileapi/nf-fileapi-writefile), for example).</span></span> <span data-ttu-id="14240-109">Qualquer identificador de soquete não IFS quando usado com funções não Winsock (**ReadFile** e **WriteFile**, por exemplo) resulta em interações entre o provedor e o sistema de arquivos onde a sobrecarga de processamento extra está envolvida e pode resultar em uma penalidade de desempenho significativa.</span><span class="sxs-lookup"><span data-stu-id="14240-109">Any non-IFS socket handles when used with non-Winsock functions (**ReadFile** and **WriteFile**, for example) result in interactions between the provider and the file system where extra processing overhead is involved that can result in a significant performance penalty.</span></span> <span data-ttu-id="14240-110">Ao usar identificadores de soquete com funções não Winsock, os códigos de erro propagados do sistema de arquivos base nem sempre são mapeados para códigos de erro do Winsock.</span><span class="sxs-lookup"><span data-stu-id="14240-110">When using socket handles with non-Winsock functions, the error codes propagated from the base file system are not always mapped to Winsock error codes.</span></span> <span data-ttu-id="14240-111">Consequentemente, é recomendável que os identificadores de soquete sejam usados apenas com as funções do Winsock.</span><span class="sxs-lookup"><span data-stu-id="14240-111">Consequently, it is recommended that socket handles be used only with Winsock functions.</span></span>

<span data-ttu-id="14240-112">Um identificador de soquete não deve ser usado com a função [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) .</span><span class="sxs-lookup"><span data-stu-id="14240-112">A socket handle should not be used with the [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) function.</span></span> <span data-ttu-id="14240-113">A presença de LSPs (provedores de serviço em camadas) pode causar a falha e não há nenhuma maneira para o processo de destino importar o identificador de soquete.</span><span class="sxs-lookup"><span data-stu-id="14240-113">The presence of layered service providers (LSPs) can cause this to fail and there is no way for the destination process to import the socket handle.</span></span>

> [!Note]  
> <span data-ttu-id="14240-114">Os provedores de serviço em camadas são preteridos.</span><span class="sxs-lookup"><span data-stu-id="14240-114">Layered Service Providers are deprecated.</span></span> <span data-ttu-id="14240-115">A partir do Windows 8 e do Windows Server 2012, use a [plataforma de filtragem do Windows](../fwp/windows-filtering-platform-start-page.md).</span><span class="sxs-lookup"><span data-stu-id="14240-115">Starting with Windows 8 and Windows Server 2012, use [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md).</span></span>

 

<span data-ttu-id="14240-116">O Windows Sockets 2 expandiu determinadas funções que transferem dados entre soquetes usando identificadores.</span><span class="sxs-lookup"><span data-stu-id="14240-116">Windows Sockets 2 has expanded certain functions that transfer data between sockets using handles.</span></span> <span data-ttu-id="14240-117">As funções oferecem vantagens específicas para soquetes para transferência de dados e incluem [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend)e [**WSADuplicateSocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsaduplicatesocketa).</span><span class="sxs-lookup"><span data-stu-id="14240-117">The functions offer advantages specific to sockets for transferring data and include [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), and [**WSADuplicateSocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsaduplicatesocketa).</span></span>

 

 
