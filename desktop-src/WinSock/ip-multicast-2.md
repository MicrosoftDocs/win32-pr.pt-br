---
description: O multicast de IP se enquadra na categoria de plano de dados não-raiz e plano de controle não raiz.
ms.assetid: 474a1c7f-0ece-4192-a2d9-6e2f3df2ac02
title: Multicast de IP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3bf9469822ae974b7c616b7904f9dc7120682acb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105790585"
---
# <a name="ip-multicast"></a><span data-ttu-id="3e8fc-103">Multicast de IP</span><span class="sxs-lookup"><span data-stu-id="3e8fc-103">IP Multicast</span></span>

<span data-ttu-id="3e8fc-104">O multicast de IP se enquadra na categoria de plano de dados não-raiz e plano de controle não raiz.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-104">IP multicast falls into the category of nonrooted data plane and nonrooted control plane.</span></span> <span data-ttu-id="3e8fc-105">Todos os aplicativos desempenham uma função de folha.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-105">All applications play a leaf role.</span></span> <span data-ttu-id="3e8fc-106">Atualmente, a maioria das implementações de multicast de IP usa um conjunto de opções de soquete propostas por Steve Deering para a IETF (Internet Engineering Task Force).</span><span class="sxs-lookup"><span data-stu-id="3e8fc-106">Currently, most IP multicast implementations use a set of socket options proposed by Steve Deering to the Internet Engineering Task Force (IETF).</span></span> <span data-ttu-id="3e8fc-107">Cinco operações são, portanto, disponibilizadas:</span><span class="sxs-lookup"><span data-stu-id="3e8fc-107">Five operations are thus made available:</span></span>

-   <span data-ttu-id="3e8fc-108">\_ \_ TTL de multicast de IP – define o escopo de vida de controles de uma sessão de multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-108">IP\_MULTICAST\_TTL—Sets time-to-live, controls scope of a multicast session.</span></span>
-   <span data-ttu-id="3e8fc-109">IP \_ multicast \_ If — determina a interface a ser usada para multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-109">IP\_MULTICAST\_IF—Determines interface to be used for multicasting.</span></span>
-   <span data-ttu-id="3e8fc-110">IP \_ Add \_ MEMBERSHI – une uma sessão de multicast especificada.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-110">IP\_ADD\_MEMBERSHI —Joins a specified multicast session.</span></span>
-   <span data-ttu-id="3e8fc-111">\_ \_ Associação de IP drop — sai de uma sessão multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-111">IP\_DROP\_MEMBERSHIP—Drops out of a multicast session.</span></span>
-   <span data-ttu-id="3e8fc-112">\_Loop multicast \_ de IP — controla o loopback do tráfego multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-112">IP\_MULTICAST\_LOOP—Controls loopback of multicast traffic.</span></span>

<span data-ttu-id="3e8fc-113">Definir a vida útil para um soquete de multicast de IP mapeia diretamente para o uso do código de \_ comando de escopo multicast sio \_ para [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl).</span><span class="sxs-lookup"><span data-stu-id="3e8fc-113">Setting the time-to-live for an IP-multicast socket maps directly to using the SIO\_MULTICAST\_SCOPE command code for [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl).</span></span>

<span data-ttu-id="3e8fc-114">O método para determinar a interface IP a ser usada para multicast é por meio de uma opção de soquete específica de TCP/IP, conforme descrito no Windows Sockets 2 Protocol-Specific anexo.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-114">The method for determining the IP interface to be used for multicasting is through a TCP/IP-specific socket option as described in the Windows Sockets 2 Protocol-Specific Annex.</span></span> <span data-ttu-id="3e8fc-115">As três operações restantes são bem cobertas com a semântica do Windows Sockets 2 descrita aqui.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-115">The remaining three operations are covered well with the Windows Sockets 2 semantics described here.</span></span>

<span data-ttu-id="3e8fc-116">O aplicativo abriria soquetes com \_ sinalizadores folha c/d \_ em [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa).</span><span class="sxs-lookup"><span data-stu-id="3e8fc-116">The application would open sockets with c\_leaf/d\_leaf flags in [**WSASocket**](/windows/desktop/api/Winsock2/nf-winsock2-wsasocketa).</span></span> <span data-ttu-id="3e8fc-117">Ele usaria [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) para se adicionar a um grupo de multicast na interface padrão designada para operações de multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-117">It would use [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) to add itself to a multicast group on the default interface designated for multicast operations.</span></span> <span data-ttu-id="3e8fc-118">Se o sinalizador em **WSAJoinLeaf** indicar que esse soquete é apenas um remetente, a operação de junção será essencialmente uma não operacional e nenhuma mensagem IGMP precisará ser enviada.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-118">If the flag in **WSAJoinLeaf** indicates that this socket is only a sender, then the join operation is essentially a no-op and no IGMP messages need to be sent.</span></span> <span data-ttu-id="3e8fc-119">Caso contrário, um pacote IGMP é enviado para o roteador para indicar os interesses no recebimento de pacotes enviados para o endereço de multicast especificado.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-119">Otherwise, an IGMP packet is sent out to the router to indicate interests in receiving packets sent to the specified multicast address.</span></span> <span data-ttu-id="3e8fc-120">Como o aplicativo criou \_ soquetes de folha c folha/d especiais \_ usados apenas para executar multicast, a função [**fechamento**](/windows/desktop/api/winsock/nf-winsock-closesocket) padrão seria usada para sair da sessão de multicast.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-120">Since the application created special c\_leaf/d\_leaf sockets used only for performing multicast, the standard [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) function would be used to drop out of the multicast session.</span></span> <span data-ttu-id="3e8fc-121">O \_ código de \_ comando de auto-retorno do sio MultiPoint para [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) fornece um mecanismo de controle genérico para determinar se os dados enviados em um \_ soquete de folha d em um esquema MultiPoint não raiz também podem ser recebidos no mesmo soquete.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-121">The SIO\_MULTIPOINT\_LOOPBACK command code for [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) provides a generic control mechanism for determining whether data sent on a d\_leaf socket in a nonrooted multipoint scheme can also be received on the same socket.</span></span>

> [!Note]  
> <span data-ttu-id="3e8fc-122">A versão do Winsock da \_ opção de loop multicast de IP \_ é semanticamente diferente da versão Unix da \_ opção de loop multicast de IP \_ :</span><span class="sxs-lookup"><span data-stu-id="3e8fc-122">The Winsock version of the IP\_MULTICAST\_LOOP option is semantically different than the UNIX version of the IP\_MULTICAST\_LOOP option:</span></span>

 

-   <span data-ttu-id="3e8fc-123">No Winsock, a \_ opção de \_ loop multicast IP se aplica somente ao caminho de recebimento.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-123">In Winsock, the IP\_MULTICAST\_LOOP option applies only to the receive path.</span></span>
-   <span data-ttu-id="3e8fc-124">Na versão do UNIX, a \_ opção de \_ loop multicast IP se aplica ao caminho de envio.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-124">In the UNIX version, the IP\_MULTICAST\_LOOP option applies to the send path.</span></span>

<span data-ttu-id="3e8fc-125">Por exemplo, aplicativos ATIVAdos e desativados (que são mais fáceis de rastrear que X e Y) ingressam no mesmo grupo na mesma interface; aplicativo em define a \_ opção de \_ loop multicast IP on, Application off define a \_ opção de loop multicast IP como \_ off.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-125">For example, applications ON and OFF (which are easier to track than X and Y) join the same group on the same interface; application ON sets the IP\_MULTICAST\_LOOP option on, application OFF sets the IP\_MULTICAST\_LOOP option off.</span></span> <span data-ttu-id="3e8fc-126">Se ON e OFF são aplicativos Winsock, OFF pode enviar para ON, mas ON não pode ser enviado para OFF.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-126">If ON and OFF are Winsock applications, OFF can send to ON, but ON cannot sent to OFF.</span></span> <span data-ttu-id="3e8fc-127">Por outro lado, se ON e OFF são aplicativos UNIX, ON pode enviar para OFF, mas OFF não pode enviar para em.</span><span class="sxs-lookup"><span data-stu-id="3e8fc-127">In contrast, if ON and OFF are UNIX applications, ON can send to OFF, but OFF cannot send to ON.</span></span>

 

 



