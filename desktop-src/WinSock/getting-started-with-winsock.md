---
description: Veja a seguir um guia passo a passo para a introdução à programação do Windows Sockets.
ms.assetid: 905cd5bc-44af-4d3f-841a-9e9a2700a785
title: Introdução com o Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 43751663a637fafb2eec453a48c329ff8e4499f2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105788910"
---
# <a name="getting-started-with-winsock"></a><span data-ttu-id="fa759-103">Introdução com o Winsock</span><span class="sxs-lookup"><span data-stu-id="fa759-103">Getting Started with Winsock</span></span>

<span data-ttu-id="fa759-104">Veja a seguir um guia passo a passo para a introdução à programação do Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="fa759-104">The following is a step-by-step guide to getting started with Windows Sockets programming.</span></span> <span data-ttu-id="fa759-105">Ele foi projetado para fornecer uma compreensão das funções e estruturas de dados básicas do Winsock e de como elas funcionam juntas.</span><span class="sxs-lookup"><span data-stu-id="fa759-105">It is designed to provide an understanding of basic Winsock functions and data structures, and how they work together.</span></span>

<span data-ttu-id="fa759-106">O aplicativo cliente e servidor usado para ilustração é um cliente e servidor muito básicos.</span><span class="sxs-lookup"><span data-stu-id="fa759-106">The client and server application that is used for illustration is a very basic client and server.</span></span> <span data-ttu-id="fa759-107">Exemplos de código mais avançados estão incluídos nos exemplos incluídos no SDK (Software Development Kit) do Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="fa759-107">More advanced code examples are included in the samples included with the Microsoft Windows Software Development Kit (SDK).</span></span>

<span data-ttu-id="fa759-108">As primeiras etapas são as mesmas para aplicativos de cliente e de servidor.</span><span class="sxs-lookup"><span data-stu-id="fa759-108">The first few steps are the same for both client and server applications.</span></span>

-   [<span data-ttu-id="fa759-109">Sobre servidores e clientes</span><span class="sxs-lookup"><span data-stu-id="fa759-109">About Servers and Clients</span></span>](about-clients-and-servers.md)
-   [<span data-ttu-id="fa759-110">Criando um aplicativo Winsock básico</span><span class="sxs-lookup"><span data-stu-id="fa759-110">Creating a Basic Winsock Application</span></span>](creating-a-basic-winsock-application.md)
-   [<span data-ttu-id="fa759-111">Inicializando o Winsock</span><span class="sxs-lookup"><span data-stu-id="fa759-111">Initializing Winsock</span></span>](initializing-winsock.md)

<span data-ttu-id="fa759-112">As seções a seguir descrevem as etapas restantes para criar um aplicativo cliente Winsock.</span><span class="sxs-lookup"><span data-stu-id="fa759-112">The following sections describe the remaining steps for creating a Winsock client application.</span></span>

-   [<span data-ttu-id="fa759-113">Criando um soquete para o cliente</span><span class="sxs-lookup"><span data-stu-id="fa759-113">Creating a Socket for the Client</span></span>](creating-a-socket-for-the-client.md)
-   [<span data-ttu-id="fa759-114">Conectando a um soquete</span><span class="sxs-lookup"><span data-stu-id="fa759-114">Connecting to a Socket</span></span>](connecting-to-a-socket.md)
-   [<span data-ttu-id="fa759-115">Enviando e recebendo dados no cliente</span><span class="sxs-lookup"><span data-stu-id="fa759-115">Sending and Receiving Data on the Client</span></span>](sending-and-receiving-data-on-the-client.md)
-   [<span data-ttu-id="fa759-116">Desconectando o cliente</span><span class="sxs-lookup"><span data-stu-id="fa759-116">Disconnecting the Client</span></span>](disconnecting-the-client.md)

<span data-ttu-id="fa759-117">As seções a seguir descrevem as etapas restantes para criar um aplicativo de servidor Winsock.</span><span class="sxs-lookup"><span data-stu-id="fa759-117">The following sections describe the remaining steps for creating a Winsock server application.</span></span>

-   [<span data-ttu-id="fa759-118">Criando um soquete para o servidor</span><span class="sxs-lookup"><span data-stu-id="fa759-118">Creating a Socket for the Server</span></span>](creating-a-socket-for-the-server.md)
-   [<span data-ttu-id="fa759-119">Ligando um soquete</span><span class="sxs-lookup"><span data-stu-id="fa759-119">Binding a Socket</span></span>](binding-a-socket.md)
-   [<span data-ttu-id="fa759-120">Ouvindo em um soquete</span><span class="sxs-lookup"><span data-stu-id="fa759-120">Listening on a Socket</span></span>](listening-on-a-socket.md)
-   [<span data-ttu-id="fa759-121">Aceitando uma conexão</span><span class="sxs-lookup"><span data-stu-id="fa759-121">Accepting a Connection</span></span>](accepting-a-connection.md)
-   [<span data-ttu-id="fa759-122">Recebendo e enviando dados no servidor</span><span class="sxs-lookup"><span data-stu-id="fa759-122">Receiving and Sending Data on the Server</span></span>](receiving-and-sending-data-on-the-server.md)
-   [<span data-ttu-id="fa759-123">Desconectando o servidor</span><span class="sxs-lookup"><span data-stu-id="fa759-123">Disconnecting the Server</span></span>](disconnecting-the-server.md)

<span data-ttu-id="fa759-124">O código-fonte completo para esses exemplos básicos.</span><span class="sxs-lookup"><span data-stu-id="fa759-124">The complete source code for these basic examples.</span></span>

-   [<span data-ttu-id="fa759-125">Executando o cliente Winsock e o exemplo de código do servidor</span><span class="sxs-lookup"><span data-stu-id="fa759-125">Running the Winsock Client and Server Code Sample</span></span>](finished-server-and-client-code.md)
-   [<span data-ttu-id="fa759-126">Código completo do cliente Winsock</span><span class="sxs-lookup"><span data-stu-id="fa759-126">Complete Winsock Client Code</span></span>](complete-client-code.md)
-   [<span data-ttu-id="fa759-127">Código completo do servidor Winsock</span><span class="sxs-lookup"><span data-stu-id="fa759-127">Complete Winsock Server Code</span></span>](complete-server-code.md)

## <a name="advanced-winsock-samples"></a><span data-ttu-id="fa759-128">Exemplos de Winsock avançados</span><span class="sxs-lookup"><span data-stu-id="fa759-128">Advanced Winsock Samples</span></span>

<span data-ttu-id="fa759-129">Vários exemplos de cliente e servidor Winsock mais avançados estão incluídos no SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="fa759-129">Several more advanced Winsock client and server samples are included with the Windows SDK.</span></span> <span data-ttu-id="fa759-130">Por padrão, o código-fonte de exemplo do Winsock é instalado no seguinte diretório pelo SDK do Windows para Windows 7:</span><span class="sxs-lookup"><span data-stu-id="fa759-130">By default, the Winsock sample source code is installed in the following directory by the Windows SDK for Windows 7:</span></span>

<span data-ttu-id="fa759-131">*C: \\ arquivos de programas \\ Microsoft SDKs \\ Windows \\ v 7.0 \\ amostras \\ NetDs \\ Winsock*</span><span class="sxs-lookup"><span data-stu-id="fa759-131">*C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock*</span></span>

<span data-ttu-id="fa759-132">Em versões anteriores do SDK do Windows, o número de versão no caminho acima seria alterado.</span><span class="sxs-lookup"><span data-stu-id="fa759-132">On earlier versions of the Windows SDK, the version number in the above path would change.</span></span> <span data-ttu-id="fa759-133">Por exemplo, o código-fonte de exemplo do Winsock é instalado no seguinte diretório padrão pelo SDK do Windows para Windows Vista</span><span class="sxs-lookup"><span data-stu-id="fa759-133">For example, the Winsock sample source code is installed in the following default directory by the Windows SDK for Windows Vista</span></span>

<span data-ttu-id="fa759-134">*C: \\ arquivos de programas \\ Microsoft SDKs \\ Windows \\ v 6.0 \\ amostras \\ NetDs \\ Winsock*</span><span class="sxs-lookup"><span data-stu-id="fa759-134">*C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0\\Samples\\NetDs\\winsock*</span></span>

<span data-ttu-id="fa759-135">Os exemplos mais avançados listados abaixo na ordem de mais alto para o menor desempenho são encontrados nos seguintes diretórios:</span><span class="sxs-lookup"><span data-stu-id="fa759-135">The more advanced samples listed below in order from higher to lower performance are found in the following directories:</span></span>

-   <span data-ttu-id="fa759-136">IOCP</span><span class="sxs-lookup"><span data-stu-id="fa759-136">iocp</span></span>

    <span data-ttu-id="fa759-137">Esse diretório contém três programas de exemplo que usam portas de conclusão de e/s.</span><span class="sxs-lookup"><span data-stu-id="fa759-137">This directory contains three sample programs that use I/O completion ports.</span></span> <span data-ttu-id="fa759-138">Os programas incluem um servidor Winsock (iocpserver) que usa a função [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) , um servidor Winsock (iocpserverex) que usa a função [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) e um cliente Winsock multithread simples (iocpclient) usado para testar qualquer um desses servidores.</span><span class="sxs-lookup"><span data-stu-id="fa759-138">The programs include a Winsock server (iocpserver) that uses the [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) function, a Winsock server (iocpserverex) that uses the [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) function, and a simple multithreaded Winsock client (iocpclient) used to test either of these servers.</span></span> <span data-ttu-id="fa759-139">Os programas de servidor dão suporte a vários clientes que se conectam via TCP/IP e enviam buffers de dados de tamanho arbitrário que o servidor, em seguida, retorna ao cliente.</span><span class="sxs-lookup"><span data-stu-id="fa759-139">The server programs support multiple clients connecting via TCP/IP and sending arbitrary sized data buffers which the server then echoes back to the client.</span></span> <span data-ttu-id="fa759-140">Para sua conveniência, um simples programa cliente, o iocpclient, foi desenvolvido para se conectar e enviar dados continuamente ao servidor para ressaltar o uso de vários threads.</span><span class="sxs-lookup"><span data-stu-id="fa759-140">For convenience, a simple client program, iocpclient, was developed to connect and continually send data to the server to stress it using multiple threads.</span></span> <span data-ttu-id="fa759-141">Os servidores Winsock que usam portas de conclusão de e/s fornecem a maior capacidade de desempenho.</span><span class="sxs-lookup"><span data-stu-id="fa759-141">Winsock servers that use I/O completion ports provide the most performance capability.</span></span>

-   <span data-ttu-id="fa759-142">post</span><span class="sxs-lookup"><span data-stu-id="fa759-142">overlap</span></span>

    <span data-ttu-id="fa759-143">Esse diretório contém um programa de servidor de exemplo que usa e/s sobreposta.</span><span class="sxs-lookup"><span data-stu-id="fa759-143">This directory contains a sample server program that uses overlapped I/O.</span></span> <span data-ttu-id="fa759-144">O programa de exemplo usa a função [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) e a e/s sobreposta para lidar com várias solicitações de conexão assíncronas de clientes com eficiência.</span><span class="sxs-lookup"><span data-stu-id="fa759-144">The sample program uses the [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) function and overlapped I/O to handle multiple asynchronous connection requests from clients effectively.</span></span> <span data-ttu-id="fa759-145">O servidor usa a função **AcceptEx** para multiplexar diferentes conexões de cliente em um aplicativo Win32 de thread único.</span><span class="sxs-lookup"><span data-stu-id="fa759-145">The server uses the **AcceptEx** function to multiplex different client connections in a single-threaded Win32 application.</span></span> <span data-ttu-id="fa759-146">O uso de e/s sobreposta permite maior escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="fa759-146">Using overlapped I/O allows for greater scalability.</span></span>

-   <span data-ttu-id="fa759-147">WSAPoll</span><span class="sxs-lookup"><span data-stu-id="fa759-147">WSAPoll</span></span>

    <span data-ttu-id="fa759-148">Esse diretório contém um programa de exemplo básico que demonstra o uso da função [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) .</span><span class="sxs-lookup"><span data-stu-id="fa759-148">This directory contains a basic sample program that demonstrates the use of the [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) function.</span></span> <span data-ttu-id="fa759-149">O programa de cliente e servidor combinado não está bloqueando e usam a função **WSAPoll** para determinar quando é possível enviar ou receber sem bloqueio.</span><span class="sxs-lookup"><span data-stu-id="fa759-149">The combined client and server program are non-blocking and use the **WSAPoll** function to determine when it is possible to send or receive without blocking.</span></span> <span data-ttu-id="fa759-150">Este exemplo é mais para ilustração e não é um servidor de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="fa759-150">This sample is more for illustration and is not a high-performance server.</span></span>

-   <span data-ttu-id="fa759-151">simple</span><span class="sxs-lookup"><span data-stu-id="fa759-151">simple</span></span>

    <span data-ttu-id="fa759-152">Esse diretório contém três programas de exemplo básicos que demonstram o uso de vários threads por um servidor.</span><span class="sxs-lookup"><span data-stu-id="fa759-152">This directory contains three basic sample programs that demonstrate the use of multiple threads by a server.</span></span> <span data-ttu-id="fa759-153">Os programas incluem um servidor TCP/UDP simples (simples), um servidor somente TCP ( \_ IOCTL simples) que usa a função [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) em um aplicativo de console do Win32 para dar suporte a várias solicitações de cliente e um SIMPLEC (programa TCP/UDP) de cliente para testar os servidores.</span><span class="sxs-lookup"><span data-stu-id="fa759-153">The programs include a simple TCP/UDP server (simples), a TCP-only server (simples\_ioctl) that uses the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function in a Win32 console application to support multiple client requests, and a client TCP/UDP program (simplec) for testing the servers.</span></span> <span data-ttu-id="fa759-154">Os servidores demonstram o uso de vários threads para lidar com várias solicitações de cliente.</span><span class="sxs-lookup"><span data-stu-id="fa759-154">The servers demonstrates the use of multiple threads to handle multiple client requests.</span></span> <span data-ttu-id="fa759-155">Esse método tem problemas de escalabilidade, uma vez que um thread separado é criado para cada solicitação do cliente.</span><span class="sxs-lookup"><span data-stu-id="fa759-155">This method has scalability issues since a separate thread is created for each client request.</span></span>

-   <span data-ttu-id="fa759-156">aceitar</span><span class="sxs-lookup"><span data-stu-id="fa759-156">accept</span></span>

    <span data-ttu-id="fa759-157">Esse diretório contém um servidor de exemplo básico e um programa cliente.</span><span class="sxs-lookup"><span data-stu-id="fa759-157">This directory contains a basic sample server and client program.</span></span> <span data-ttu-id="fa759-158">O servidor demonstra o uso de uma aceitação sem bloqueio usando a função [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) ou a aceitação assíncrona usando a função [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) .</span><span class="sxs-lookup"><span data-stu-id="fa759-158">The server demonstrates the use of either non-blocking accept using the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function or asynchronous accept using the [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) function.</span></span> <span data-ttu-id="fa759-159">Este exemplo é mais para ilustração e não é um servidor de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="fa759-159">This sample is more for illustration and is not a high-performance server.</span></span>

 

 
