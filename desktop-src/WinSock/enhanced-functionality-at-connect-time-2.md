---
description: O Windows Sockets 2 oferece um conjunto expandido de operações que podem ocorrer coincidentes para estabelecer uma conexão de soquete. Os requisitos do provedor de serviços para implementar esses recursos são descritos abaixo.
ms.assetid: fbc7055e-ea25-4d17-8039-f0fef300353c
title: Funcionalidade aprimorada no momento da conexão
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d33c6d7ee928fe7e97f535363e9e842285eef7fe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090396"
---
# <a name="enhanced-functionality-at-connect-time"></a><span data-ttu-id="a24ef-104">Funcionalidade aprimorada no momento da conexão</span><span class="sxs-lookup"><span data-stu-id="a24ef-104">Enhanced Functionality at Connect Time</span></span>

<span data-ttu-id="a24ef-105">O Windows Sockets 2 oferece um conjunto expandido de operações que podem ocorrer coincidentes para estabelecer uma conexão de soquete.</span><span class="sxs-lookup"><span data-stu-id="a24ef-105">Windows Sockets 2 offers an expanded set of operations that can occur coincident to establishing a socket connection.</span></span> <span data-ttu-id="a24ef-106">Os requisitos do provedor de serviços para implementar esses recursos são descritos abaixo.</span><span class="sxs-lookup"><span data-stu-id="a24ef-106">The service provider requirements for implementing these features are described below.</span></span>

## <a name="conditional-acceptance"></a><span data-ttu-id="a24ef-107">Aceitação condicional</span><span class="sxs-lookup"><span data-stu-id="a24ef-107">Conditional Acceptance</span></span>

<span data-ttu-id="a24ef-108">Conforme descrito anteriormente, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invoca uma função de condição fornecida pelo cliente que usa parâmetros de entrada para fornecer informações sobre a solicitação de conexão pendente.</span><span class="sxs-lookup"><span data-stu-id="a24ef-108">As described previously, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invokes a client-supplied condition function that uses input parameters to supply information about the pending connection request.</span></span> <span data-ttu-id="a24ef-109">Essas informações podem ser usadas pelo cliente para aceitar ou rejeitar uma solicitação de conexão com base em informações do chamador, como identificador de chamada, QoS, etc. Se a função Condition retornar o CF \_ Accept, um novo soquete será criado com as mesmas propriedades que o soquete de escuta e um identificador para o novo soquete será retornado.</span><span class="sxs-lookup"><span data-stu-id="a24ef-109">This information can be used by the client to accept or reject a connection request based on caller information such as caller identifier, QoS, etc. If the condition function returns CF\_ACCEPT, a new socket is created with the same properties as the listening socket, and a handle to the new socket is returned.</span></span> <span data-ttu-id="a24ef-110">Se a função Condition retornar o \_ rejeição de CF, a solicitação de conexão deverá ser rejeitada.</span><span class="sxs-lookup"><span data-stu-id="a24ef-110">If the condition function returns CF\_REJECT, the connection request should be rejected.</span></span> <span data-ttu-id="a24ef-111">Se a função Condition retornar o \_ adiamento de CF, a decisão de aceitar/rejeitar não poderá ser feita imediatamente e o provedor de serviços deverá deixar a solicitação de conexão na fila de pendências.</span><span class="sxs-lookup"><span data-stu-id="a24ef-111">If the condition function returns CF\_DEFER, the accept/reject decision cannot be made immediately, and the service provider must leave the connection request on the backlog queue.</span></span> <span data-ttu-id="a24ef-112">O cliente deve chamar **WSPAccept** novamente, quando estiver pronto para tomar uma decisão e organizar a função Condition para retornar a recusa de CF \_ Accept ou CF \_ .</span><span class="sxs-lookup"><span data-stu-id="a24ef-112">The client must call **WSPAccept** again, when it is ready to make a decision, and arrange for the condition function to return either CF\_ACCEPT or CF\_REJECT.</span></span> <span data-ttu-id="a24ef-113">Embora uma solicitação de conexão adiada esteja na parte superior da fila da lista de pendências, o provedor de serviços não emite nenhuma outra indicações para solicitações de conexão pendentes.</span><span class="sxs-lookup"><span data-stu-id="a24ef-113">While a deferred connection request is at the top of the backlog queue, the service provider does not issue any further indications for pending connection requests.</span></span>

## <a name="exchanging-user-data-at-connect-time"></a><span data-ttu-id="a24ef-114">Trocando dados do usuário no momento da conexão</span><span class="sxs-lookup"><span data-stu-id="a24ef-114">Exchanging User Data at Connect Time</span></span>

<span data-ttu-id="a24ef-115">Alguns protocolos permitem que uma pequena quantidade de dados do usuário seja trocada no momento do Connect.</span><span class="sxs-lookup"><span data-stu-id="a24ef-115">Some protocols allow a small amount of user data to be exchanged at connect time.</span></span> <span data-ttu-id="a24ef-116">Se esses dados tiverem sido recebidos do host de conexão, eles serão colocados em um buffer do provedor de serviços e um ponteiro para esse buffer junto com um valor de comprimento será fornecido ao cliente SPI do Winsock por meio de parâmetros de entrada para a função de condição [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) .</span><span class="sxs-lookup"><span data-stu-id="a24ef-116">If such data has been received from the connecting host, it is placed in a service provider buffer, and a pointer to this buffer along with a length value are supplied to the Winsock SPI client through input parameters to the [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) condition function.</span></span> <span data-ttu-id="a24ef-117">Se o cliente SPI do Winsock tiver dados de resposta para retornar ao host de conexão, ele poderá copiá-lo em um buffer fornecido pelo provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="a24ef-117">If the Winsock SPI client has response data to return to the connecting host, it may copy this into a buffer that is supplied by the service provider.</span></span> <span data-ttu-id="a24ef-118">Um ponteiro para esse buffer e um inteiro que indica o tamanho do buffer também são fornecidos como parâmetros de entrada de função de condição (se houver suporte para o protocolo).</span><span class="sxs-lookup"><span data-stu-id="a24ef-118">A pointer to this buffer and an integer indicating buffer size are also supplied as condition function input parameters (if supported by the protocol).</span></span>

## <a name="establishing-socket-groups"></a><span data-ttu-id="a24ef-119">Estabelecendo grupos de soquetes</span><span class="sxs-lookup"><span data-stu-id="a24ef-119">Establishing Socket Groups</span></span>

<span data-ttu-id="a24ef-120">Todo o uso de grupos de soquetes é reservado.</span><span class="sxs-lookup"><span data-stu-id="a24ef-120">All use of socket groups is reserved.</span></span>

 

 



