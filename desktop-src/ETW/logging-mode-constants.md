---
description: As constantes a seguir representam os modos de log possíveis para uma sessão de rastreamento de eventos.
ms.assetid: d12aaecb-776a-4476-9ba4-16af30fde9c2
title: Constantes de modo de registro em log
ms.topic: article
ms.date: 06/03/2020
ms.openlocfilehash: dd2a5e004b233637df26455c7eb69f45f4f41883
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2021
ms.locfileid: "122482862"
---
# <a name="logging-mode-constants"></a>Constantes de modo de registro em log

As constantes a seguir representam os modos de log possíveis para uma sessão de rastreamento de eventos.

As constantes são usadas nos membros **LogFileMode** das estruturas [**EVENT TRACE \_ \_ LOGFILE**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea), [**EVENT TRACE \_ \_ PROPERTIES**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) e [**TRACE \_ LOGFILE \_ HEADER.**](/windows/win32/api/evntrace/ns-evntrace-trace_logfile_header) Essas constantes são definidas no *arquivo de header Evntrace.h.*




| Mode | Descrição | 
|------|-------------|
| <strong>EVENT_TRACE_FILE_MODE_NONE</strong> (0x00000000) | O mesmo <strong>que EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> sem tamanho máximo de arquivo especificado. | 
| <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> (0x00000001) | Grava eventos em um arquivo de log sequencialmente; para quando o arquivo atinge seu tamanho máximo. Não use com <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> ou <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> (0x00000002) | Grava eventos em um arquivo de log. Depois que o arquivo atingir o tamanho máximo, os eventos mais antigos serão substituídos por eventos de entrada. Observe que o conteúdo do arquivo de log circular pode aparecer fora de ordem em computadores multiprocessadores.<br /> Não use com <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>ou <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> (0x00000004) | Anexa eventos a um arquivo de log sequencial existente. Se o arquivo não existir, ele será criado. Use somente se você especificar a <a href="wnode-header.md"><strong>hora do sistema</strong></a> para a resolução do relógio; caso contrário, o <a href="/windows/win32/api/evntrace/nf-evntrace-processtrace"><strong>ProcessTrace</strong></a> retornará eventos com carimbos de data/hora incorretos. Ao usar <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, os valores para <strong>BufferSize,</strong> <strong>NumberOfProcessors</strong>e <strong>ClockType</strong> devem ser fornecidos explicitamente e devem ser os mesmos no agente e no arquivo que está sendo anexado.<br /> Não use <strong>com</strong>EVENT_TRACE_REAL_TIME_MODE , <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>ou <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong> (0x00000008) | Alterna automaticamente para um novo arquivo de log quando o arquivo atinge o tamanho máximo. O <strong>membro MaximumFileSize</strong> do <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a> deve ser definido. O nome do arquivo especificado deve ser uma cadeia de caracteres formatada (por exemplo, a cadeia de caracteres contém %d, como c:\test%d.etl). Sempre que um novo arquivo é criado, um contador é incrementado e seu valor é usado, a cadeia de caracteres formatada é atualizada e a cadeia de caracteres resultante é usada como o nome do arquivo.<br /> Essa opção não é permitida para sessões de rastreamento de eventos particulares e não deve ser usada para sessões do NT kernel logger.<br /> Não use com <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> ou <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_PREALLOCATE</strong>(0x00000020) | Reserva <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize</strong></a> bytes de espaço em disco para o arquivo de log com antecedência. O arquivo ocupa todo o espaço durante o registro em log para arquivos de log circulares e sequenciais. Quando você para a sessão, o arquivo de log é reduzido ao tamanho necessário. Você deve definir <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize.</strong></a><br /> Não é possível usar o modo para sessões de rastreamento de eventos particulares.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_NONSTOPPABLE_MODE</strong>(0x00000040) | A sessão de registro em log não pode ser interrompida. Esse modo só tem suporte no Autologger. Essa opção tem suporte no Windows Vista e posterior.<br />. | 
| <strong>EVENT_TRACE_SECURE_MODE</strong> (0X00000080) | Restringe quem pode registrar eventos na sessão para aqueles com <a href="/windows/desktop/api/Evntcons/nf-evntcons-eventaccesscontrol"><strong>TRACELOG_LOG_EVENT</strong></a> permissão. Essa opção tem suporte no Windows Vista e posterior.<br /> | 
| <strong>EVENT_TRACE_REAL_TIME_MODE</strong> (0x00000100) | Entrega os eventos aos consumidores em tempo real. Os eventos são entregues quando os buffers são liberados, não no momento em que o provedor grava o evento. Você não deve habilitar o modo em tempo real se não houver consumidores para consumir os eventos porque as chamadas para eventos de log acabarão falhando quando os buffers se tornarem cheio. Antes do Windows Vista, se os eventos não estavam sendo consumidos, os eventos eram descartados. Não especifique mais de um consumidor em tempo real em um processo Windows XP ouWindows Server 2003. Em vez disso, fazer com que um thread consuma eventos e distribua os eventos para outros.<br /><strong>Antes do Windows Vista:</strong> Você não deve usar o modo em tempo real porque a taxa de eventos com suporte é muito menor do que a leitura do arquivo de log (os eventos podem ser descartados). Além disso, a ordem do evento não é garantida em computadores com vários processadores. O modo em tempo real é mais adequado para eventos de tipo de notificação de baixo tráfego.<br /><br /> Você pode combinar esse modo com outros modos de arquivo de log; no entanto, não use esse modo com EVENT_TRACE_PRIVATE_LOGGER_MODE. Observe que, se você combinar esse modo com outros modos de arquivo de log, os buffers serão liberados uma vez por segundo, resultando em buffers parcialmente preenchidos sendo gravados no arquivo de log. Por exemplo, se você usar buffers de 64k e sua taxa de registro em log for 1 evento a cada segundo, o serviço gravará 64k/segundo no arquivo de log.<br /> | 
| <strong>EVENT_TRACE_DELAY_OPEN_FILE_MODE</strong>(0x00000200) | Esse modo é usado para atrasar a abertura do arquivo de log até que ocorra um evento. <br /><blockquote><strong>Observação</strong>:<br />No Windows Vista ou posterior, esse modo não é aplicável não deve ser usado.</blockquote><br /> | 
| <strong>EVENT_TRACE_BUFFERING_MODE</strong> (0x00000400) | Esse modo grava eventos em um buffer de memória circular. Eventos gravados além do tamanho total do buffer eliminam os eventos mais antigos que ainda permanecem no buffer. O tamanho desse buffer de memória é o produto <strong>de MinimumBuffers</strong> e <strong>BufferSize</strong> <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>(consulte EVENT_TRACE_PROPERTIES</strong></a>). Como consequência dessa fórmula, qualquer buffer que <strong>usa</strong> EVENT_TRACE_BUFFERING_MODE ignorará o <strong>valor MaximumBuffers.</strong><br /> Os eventos não são gravados em um arquivo de log ou entregues em tempo real e o ETW não libera os buffers. Para obter um instantâneo do buffer, chame a <a href="/windows/win32/api/evntrace/nf-evntrace-flushtracea"><strong>função FlushTrace.</strong></a><br /> Esse modo é particularmente útil para depurar drivers de dispositivo em conjunto com a capacidade de exibir o conteúdo de buffers na memória com a extensão do depurador de kernel <a href="/windows-hardware/drivers/devtest/trace-session">WMITrace.</a><br /> Não use <strong>com</strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL , <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND,</strong> <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>ou <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> (0x00000800) | Cria uma sessão de rastreamento de eventos no modo de usuário que é executado no mesmo processo que seu provedor de rastreamento de eventos. A memória para buffers vem da memória do processo. Processos que não exigem dados do kernel podem eliminar a sobrecarga associada às transições de modo kernel usando uma sessão de rastreamento de eventos privado.<br /> Se o provedor for registrado por vários processos, o ETW anexa o identificador do processo ao nome do arquivo de log para criar um nome de arquivo de log exclusivo. Por exemplo, se o controlador especificar os nomes de arquivo de log como c:\mylogs\myprivatelog.etl, o ETW criará o arquivo de log como c:\mylogs\myprivatelog.etl_nnnn, em que nnnn é o identificador do processo. O identificador do processo não é anexado ao primeiro processo que registra o provedor, ele é anexado apenas aos processos subsequentes que registram o provedor.<br /> As sessões de rastreamento de eventos privados têm as seguintes limitações:<br /><ul><li>Uma sessão privada pode registrar eventos somente para os threads do processo no qual está em execução.</li><li>Pode haver até oito sessões privadas por processo.</li><li>As sessões privadas não podem ser usadas com entrega em tempo real.</li><li>Os eventos gerados por uma sessão privada não incluem o tempo de execução para instruções de modo kernel versus modo de usuário ou detalhes em nível de thread do tempo de CPU usado.</li></ul>Os filtros de ID do processo e os filtros de nome executáveis agora podem ser passados para APIs de controle de sessão quando os madeirões privados de todo o sistema são iniciados. Para os melhores resultados em cenários de processo cruzado, os mesmos filtros devem ser passados para cada operação de controle durante a sessão, incluindo chamadas habilitadas/diasráveis do provedor. Observe que os filtros têm o mesmo formato que aqueles consumidos por <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2</strong></a>. <br /> Você pode usar esse modo em conjunto com o <strong>modo EVENT_TRACE_PRIVATE_IN_PROC</strong> dados.<br /><strong>Antes da Windows 10, versão 1703:</strong> Somente LocalSystem, o administrador e os usuários no grupo de administradores executados em um processo elevado podem criar uma sessão privada. Se você incluir o <strong>sinalizador EVENT_TRACE_PRIVATE_IN_PROC,</strong> qualquer usuário poderá criar uma sessão privada em processo. Além disso, em versões anteriores do Windows, pode haver apenas uma sessão privada por processo (a menos que o modo EVENT_TRACE_PRIVATE_IN_PROC também seja especificado, nesse caso, você pode criar até três sessões privadas em processo). <br /><strong>Antes do Windows Vista:</strong> Os usuários no grupo Usuários do Log de Desempenho também podem criar uma sessão privada.<br /><br /> Não use com EVENT_TRACE_REAL_TIME_MODE.<br /><strong>Antes Windows 7 e Windows Server 2008 R2:</strong> Não use com EVENT_TRACE_FILE_MODE_NEWFILE.<br /> | 
| <strong>EVENT_TRACE_ADD_HEADER_MODE</strong>(0x00001000) | Essa opção adiciona um header ao arquivo de log.<br /><blockquote><strong>Observação</strong>:<br />No Windows Vista ou posterior, esse modo não é aplicável não deve ser usado.</blockquote><br /> | 
| <strong>EVENT_TRACE_USE_KBYTES_FOR_SIZE</strong>(0x00002000) | Use quilobytes como a unidade de medida para especificar o tamanho de um arquivo. A unidade de medida padrão é megabytes. Esse modo se aplica ao valor do <strong>Registro MaxFileSize</strong> para uma <a href="configuring-and-starting-an-autologger-session.md">sessão AutoLogger</a> e ao membro <strong>MaximumFileSize</strong> do <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>. Essa opção tem suporte no Windows Vista e posterior.<br /> | 
| <strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong>(0x00004000) | Usa números de sequência exclusivos em sessões de rastreamento de eventos. Esse modo se aplica somente aos eventos registrados usando a função <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>TraceMessage</strong></a> . Para obter mais informações, consulte <strong>TraceMessage</strong> para obter detalhes de uso.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> e <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> são mutuamente exclusivos.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> (0x00008000) | Usa números de sequência exclusivos somente para uma sessão de rastreamento de eventos individual. Esse modo se aplica somente aos eventos registrados usando a função <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>TraceMessage</strong></a> . Para obter mais informações, consulte <strong>TraceMessage</strong> para obter detalhes de uso.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> e <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> são mutuamente exclusivos.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_RELOG_MODE</strong> (0x00010000) | Registra o evento sem incluir <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_header"><strong>EVENT_TRACE_HEADER</strong></a>.<blockquote><strong>Observação</strong>:<br />Esse modo não deve ser usado. Ele é reservado para uso interno.</blockquote><br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> (0x00020000) | Use em conjunto com o modo de <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> para iniciar uma sessão privada. Esse modo impõe que apenas o processo que registrou o GUID do provedor possa iniciar a sessão do agente com esse GUID.<br /> Você pode criar até três sessões privadas em processo por processo.<br /> essa opção tem suporte no Windows Vista e versões posteriores.<br /> | 
| <strong>EVENT_TRACE_MODE_RESERVED</strong>(0x00100000) | Essa opção é usada para sinalizar o rastreamento de heap e seção crítica. essa opção tem suporte no Windows Vista e versões posteriores.<br /> | 
| <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong>(0x00400000) | Essa opção interrompe o registro em log no desligamento híbrido. Se nenhum <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> ou <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> for especificado, o ETW escolherá um padrão com base no fato de o chamador ser proveniente da sessão 0 ou não. essa opção tem suporte em Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong>(0x00800000) | Essa opção continua registrando em log o desligamento híbrido. Se nenhum <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> ou <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> for especificado, o ETW escolherá um padrão com base no fato de o chamador ser proveniente da sessão 0 ou não. essa opção tem suporte em Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_USE_PAGED_MEMORY</strong> (0x01000000) | Usa memória paginável. Essa configuração é recomendada para que os eventos não usem a memória não paginável. Os buffers não paginados usam memória não paginável para o espaço do buffer. Como os buffers não paginados nunca são paginados, uma sessão de registro em log é bem executada. O uso de buffers paginável é menos intensivo de recursos.<br /> Provedores de modo kernel e agentes do sistema não podem registrar eventos em sessões que especificam esse modo de log.<br /> Esse modo será ignorado se <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> estiver definido.<br /> Você não pode usar esse modo com o agente de log de kernel do NT.<br /><strong>Windows 2000:</strong> Não há suporte para esse valor.<br /> | 
| <strong>EVENT_TRACE_SYSTEM_LOGGER_MODE</strong>(0x02000000) | Esta opção receberá eventos de SystemTraceProvider. Se o parâmetro <strong>LOGFILEMODE</strong> de <a href="/windows/win32/api/evntrace/nf-evntrace-starttracea"><strong>StartTrace</strong></a><em>Properties</em> incluir esse sinalizador, o agente de log será um agente de log do sistema. essa opção tem suporte em Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_INDEPENDENT_SESSION_MODE</strong>(0x08000000) | Indica que uma sessão de registro em log não deve ser afetada por falhas de <a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwrite"><strong>EventWrite</strong></a> em outras sessões. Sem esse sinalizador, se um evento não puder ser publicado em uma das sessões para as quais um provedor está habilitado, o evento não será publicado em nenhuma das sessões. Quando esse sinalizador é definido, uma falha ao gravar um evento em uma sessão não fará com que a função <strong>EventWrite</strong> retorne um código de erro em outras sessões. <br /> Não use com <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>. <br /> essa opção tem suporte em Windows 8.1, Windows Server 2012 R2 e posterior.<br /> | 
| <strong>EVENT_TRACE_NO_PER_PROCESSOR_BUFFERING</strong> (0x10000000) | Grava eventos que foram registrados em processadores diferentes em um buffer comum. O uso desse modo pode eliminar o problema dos eventos que aparecem fora de ordem quando os eventos estão sendo publicados em processadores diferentes usando a hora do sistema. Esse modo também pode eliminar o problema com logs circulares que aparecem para descartar eventos em vários computadores de processador.<br /> Se você não usar esse modo e usar a hora do sistema, os eventos poderão aparecer fora de ordem em vários computadores de processador. Isso ocorre porque os buffers ETW são associados a um processador em vez de um thread. Como resultado, se um thread for alternado de uma CPU para outra, o buffer associado à última CPU poderá ser liberado para o disco antes do associado à CPU anterior.<br /> Se você espera um alto volume de eventos (por exemplo, mais de 1.000 eventos por segundo), não deve usar esse modo.<br /> Observe que o número do processador não está incluído no evento.<br /> essa opção tem suporte no Windows 7, Windows Server 2008 R2 e posterior.<br /> | 
| <strong>EVENT_TRACE_ADDTO_TRIAGE_DUMP</strong>(0x80000000) | Essa opção adiciona buffers ETW a despejos de triagem. essa opção tem suporte em Windows 8 e Windows Server 2012. <br /> | 

