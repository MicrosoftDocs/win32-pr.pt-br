---
description: Limitação do comprimento máximo do caminho.
title: Limitação do comprimento máximo do caminho
ms.topic: article
ms.custom: contperf-fy21q1
ms.date: 09/15/2020
ms.openlocfilehash: 3d71d87f69aeb224cde256ce78bd29fd0bf5c291
ms.sourcegitcommit: 78b64f3865e64768b5319d4f010032ee68924a98
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/13/2021
ms.locfileid: "107314799"
---
# <a name="maximum-path-length-limitation"></a><span data-ttu-id="4fc59-103">Limitação do comprimento máximo do caminho</span><span class="sxs-lookup"><span data-stu-id="4fc59-103">Maximum Path Length Limitation</span></span>

<span data-ttu-id="4fc59-104">Na API do Windows (com algumas exceções discutidas nos parágrafos a seguir), o comprimento máximo de um caminho é o **\_ caminho máximo**, que é definido como 260 caracteres.</span><span class="sxs-lookup"><span data-stu-id="4fc59-104">In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="4fc59-105">Um caminho local é estruturado na seguinte ordem: letra da unidade, dois-pontos, barra invertida, componentes de nome separados por barras invertidas e um caractere nulo de terminação.</span><span class="sxs-lookup"><span data-stu-id="4fc59-105">A local path is structured in the following order: drive letter, colon, backslash, name components separated by backslashes, and a terminating null character.</span></span> <span data-ttu-id="4fc59-106">Por exemplo, o caminho máximo na unidade D é "D: \\ *uma cadeia de caracteres de caminho de caractere 256* &lt; nul &gt; ", em que " &lt; nul &gt; " representa o caractere nulo de terminação invisível para a página de código do sistema atual.</span><span class="sxs-lookup"><span data-stu-id="4fc59-106">For example, the maximum path on drive D is "D:\\*some 256-character path string*&lt;NUL&gt;" where "&lt;NUL&gt;" represents the invisible terminating null character for the current system codepage.</span></span> <span data-ttu-id="4fc59-107">(Os caracteres < > são usados aqui para clareza visual e não podem fazer parte de uma cadeia de caracteres de caminho válida.)</span><span class="sxs-lookup"><span data-stu-id="4fc59-107">(The characters < > are used here for visual clarity and cannot be part of a valid path string.)</span></span>

<span data-ttu-id="4fc59-108">Por exemplo, você pode atingir essa limitação se estiver clonando um repositório git que tem nomes de arquivo longos em uma pasta que tem um nome longo.</span><span class="sxs-lookup"><span data-stu-id="4fc59-108">For example, you may hit this limitation if you are cloning a git repo that has long file names into a folder that itself has a long name.</span></span>


> [!Note]  
> <span data-ttu-id="4fc59-109">As funções de e/s de arquivo na API do Windows convertem "/" em " \\ " como parte da conversão do nome em um nome de estilo NT, exceto ao usar o \\ \\ prefixo "? \\ ", conforme detalhado nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="4fc59-109">File I/O functions in the Windows API convert "/" to "\\" as part of converting the name to an NT-style name, except when using the "\\\\?\\" prefix as detailed in the following sections.</span></span>

<span data-ttu-id="4fc59-110">A API do Windows tem muitas funções que também têm versões Unicode para permitir um caminho de tamanho estendido para um tamanho de caminho total máximo de 32.767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="4fc59-110">The Windows API has many functions that also have Unicode versions to permit an extended-length path for a maximum total path length of 32,767 characters.</span></span> <span data-ttu-id="4fc59-111">Esse tipo de caminho é composto por componentes separados por barras invertidas, cada um até o valor retornado no parâmetro *lpMaximumComponentLength* da função [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) (esse valor é normalmente de 255 caracteres).</span><span class="sxs-lookup"><span data-stu-id="4fc59-111">This type of path is composed of components separated by backslashes, each up to the value returned in the *lpMaximumComponentLength* parameter of the [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) function (this value is commonly 255 characters).</span></span> <span data-ttu-id="4fc59-112">Para especificar um caminho de comprimento estendido, use o \\ \\ prefixo "? \\ ".</span><span class="sxs-lookup"><span data-stu-id="4fc59-112">To specify an extended-length path, use the "\\\\?\\" prefix.</span></span> <span data-ttu-id="4fc59-113">Por exemplo, " \\ \\ ? \\ D: \\ *caminho muito longo*".</span><span class="sxs-lookup"><span data-stu-id="4fc59-113">For example, "\\\\?\\D:\\*very long path*".</span></span>

> [!Note]  
> <span data-ttu-id="4fc59-114">O caminho máximo de 32.767 caracteres é aproximado, pois o \\ \\ prefixo "? \\ " pode ser expandido para uma cadeia de caracteres mais longa pelo sistema em tempo de execução, e essa expansão se aplica ao comprimento total.</span><span class="sxs-lookup"><span data-stu-id="4fc59-114">The maximum path of 32,767 characters is approximate, because the "\\\\?\\" prefix may be expanded to a longer string by the system at run time, and this expansion applies to the total length.</span></span>

<span data-ttu-id="4fc59-115">O \\ \\ prefixo "? \\ " também pode ser usado com caminhos construídos de acordo com a UNC (Convenção de nomenclatura universal).</span><span class="sxs-lookup"><span data-stu-id="4fc59-115">The "\\\\?\\" prefix can also be used with paths constructed according to the universal naming convention (UNC).</span></span> <span data-ttu-id="4fc59-116">Para especificar esse caminho usando UNC, use o " \\ \\ ? \\ \\Prefixo "UNC.</span><span class="sxs-lookup"><span data-stu-id="4fc59-116">To specify such a path using UNC, use the "\\\\?\\UNC\\" prefix.</span></span> <span data-ttu-id="4fc59-117">Por exemplo, " \\ \\ ? \\ \\Compartilhamento de servidor UNC \\ ", onde" servidor "é o nome do computador e" compartilhamento "é o nome da pasta compartilhada.</span><span class="sxs-lookup"><span data-stu-id="4fc59-117">For example, "\\\\?\\UNC\\server\\share", where "server" is the name of the computer and "share" is the name of the shared folder.</span></span> <span data-ttu-id="4fc59-118">Esses prefixos não são usados como parte do próprio caminho.</span><span class="sxs-lookup"><span data-stu-id="4fc59-118">These prefixes are not used as part of the path itself.</span></span> <span data-ttu-id="4fc59-119">Eles indicam que o caminho deve ser passado para o sistema com a modificação mínima, o que significa que você não pode usar barras para representar separadores de caminho ou um período para representar o diretório atual ou pontos duplos para representar o diretório pai.</span><span class="sxs-lookup"><span data-stu-id="4fc59-119">They indicate that the path should be passed to the system with minimal modification, which means that you cannot use forward slashes to represent path separators, or a period to represent the current directory, or double dots to represent the parent directory.</span></span> <span data-ttu-id="4fc59-120">Como não é possível usar o \\ \\ prefixo "? \\ " com um caminho relativo, os caminhos relativos são sempre limitados a um total de caracteres de **\_ caminho máximo** .</span><span class="sxs-lookup"><span data-stu-id="4fc59-120">Because you cannot use the "\\\\?\\" prefix with a relative path, relative paths are always limited to a total of **MAX\_PATH** characters.</span></span>

<span data-ttu-id="4fc59-121">Não é necessário executar qualquer normalização Unicode nas cadeias de caracteres de nome de arquivo e caminho para uso pelas funções da API de e/s de arquivo do Windows porque o sistema de arquivos trata os nomes de caminho e arquivo como uma sequência opaca de **WCHAR** s.</span><span class="sxs-lookup"><span data-stu-id="4fc59-121">There is no need to perform any Unicode normalization on path and file name strings for use by the Windows file I/O API functions because the file system treats path and file names as an opaque sequence of **WCHAR** s.</span></span> <span data-ttu-id="4fc59-122">Qualquer normalização que seu aplicativo requer deve ser executada com isso em mente, externamente de todas as chamadas para funções de API de e/s de arquivo do Windows relacionadas.</span><span class="sxs-lookup"><span data-stu-id="4fc59-122">Any normalization that your application requires should be performed with this in mind, external of any calls to related Windows file I/O API functions.</span></span>

<span data-ttu-id="4fc59-123">Ao usar uma API para criar um diretório, o caminho especificado não pode ser tão longo que você não pode acrescentar um nome de arquivo 8,3 (ou seja, o nome do diretório não pode exceder o **\_ caminho máximo** menos 12).</span><span class="sxs-lookup"><span data-stu-id="4fc59-123">When using an API to create a directory, the specified path cannot be so long that you cannot append an 8.3 file name (that is, the directory name cannot exceed **MAX\_PATH** minus 12).</span></span>

<span data-ttu-id="4fc59-124">O Shell e o sistema de arquivos têm requisitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="4fc59-124">The shell and the file system have different requirements.</span></span> <span data-ttu-id="4fc59-125">É possível criar um caminho com a API do Windows que a interface do usuário do shell não possa interpretar corretamente.</span><span class="sxs-lookup"><span data-stu-id="4fc59-125">It is possible to create a path with the Windows API that the shell user interface is not able to interpret properly.</span></span>

## <a name="enable-long-paths-in-windows-10-version-1607-and-later"></a><span data-ttu-id="4fc59-126">Habilitar caminhos longos no Windows 10, versão 1607 e posterior</span><span class="sxs-lookup"><span data-stu-id="4fc59-126">Enable Long Paths in Windows 10, Version 1607, and Later</span></span>

<span data-ttu-id="4fc59-127">A partir do Windows 10, versão 1607, as limitações **máximas de \_ caminho** foram removidas das funções comuns de arquivo e diretório do Win32.</span><span class="sxs-lookup"><span data-stu-id="4fc59-127">Starting in Windows 10, version 1607, **MAX\_PATH** limitations have been removed from common Win32 file and directory functions.</span></span> <span data-ttu-id="4fc59-128">No entanto, você deve aceitar o novo comportamento.</span><span class="sxs-lookup"><span data-stu-id="4fc59-128">However, you must opt-in to the new behavior.</span></span>

<span data-ttu-id="4fc59-129">Para habilitar o novo comportamento de caminho longo, ambas as condições a seguir devem ser atendidas:</span><span class="sxs-lookup"><span data-stu-id="4fc59-129">To enable the new long path behavior, both of the following conditions must be met:</span></span>

* <span data-ttu-id="4fc59-130">A chave do registro `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` deve existir e ser definida como 1.</span><span class="sxs-lookup"><span data-stu-id="4fc59-130">The registry key `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` must exist and be set to 1.</span></span> <span data-ttu-id="4fc59-131">O valor da chave será armazenado em cache pelo sistema (por processo) após a primeira chamada para uma função de diretório ou arquivo Win32 afetado (veja abaixo a lista de funções).</span><span class="sxs-lookup"><span data-stu-id="4fc59-131">The key's value will be cached by the system (per process) after the first call to an affected Win32 file or directory function (see below for the list of functions).</span></span> <span data-ttu-id="4fc59-132">A chave do registro não será recarregada durante o tempo de vida do processo.</span><span class="sxs-lookup"><span data-stu-id="4fc59-132">The registry key will not be reloaded during the lifetime of the process.</span></span> <span data-ttu-id="4fc59-133">Para que todos os aplicativos no sistema reconheçam o valor da chave, uma reinicialização pode ser necessária porque alguns processos podem ter começado antes da definição da chave.</span><span class="sxs-lookup"><span data-stu-id="4fc59-133">In order for all apps on the system to recognize the value of the key, a reboot might be required because some processes may have started before the key was set.</span></span>

<span data-ttu-id="4fc59-134">Você também pode copiar esse código para um `.reg` arquivo que pode definir isso para você:</span><span class="sxs-lookup"><span data-stu-id="4fc59-134">You can also copy this code to a `.reg` file which can set this for you:</span></span>
```cmd
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
"LongPathsEnabled"=dword:00000001

```

> [!NOTE]  
> <span data-ttu-id="4fc59-135">Essa chave do registro também pode ser controlada por meio de Política de Grupo em `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths` .</span><span class="sxs-lookup"><span data-stu-id="4fc59-135">This registry key can also be controlled via Group Policy at `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths`.</span></span>

* <span data-ttu-id="4fc59-136">O [manifesto do aplicativo](../sbscs/application-manifests.md) também deve incluir o `longPathAware` elemento.</span><span class="sxs-lookup"><span data-stu-id="4fc59-136">The [application manifest](../sbscs/application-manifests.md) must also include the `longPathAware` element.</span></span>

    ```XML
    <application xmlns="urn:schemas-microsoft-com:asm.v3">
        <windowsSettings xmlns:ws2="http://schemas.microsoft.com/SMI/2016/WindowsSettings">
            <ws2:longPathAware>true</ws2:longPathAware>
        </windowsSettings>
    </application>
    ```

<span data-ttu-id="4fc59-137">Essas são as funções de gerenciamento de diretório que não têm mais restrições de **\_ caminho máximo** se você aceitar o comportamento de caminho longo: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span><span class="sxs-lookup"><span data-stu-id="4fc59-137">These are the directory management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span></span>

<span data-ttu-id="4fc59-138">Essas são as funções de gerenciamento de arquivo que não têm mais restrições de **\_ caminho máximo** se você aceitar o comportamento de caminho longo: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, createfile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW</span><span class="sxs-lookup"><span data-stu-id="4fc59-138">These are the file management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span></span>
