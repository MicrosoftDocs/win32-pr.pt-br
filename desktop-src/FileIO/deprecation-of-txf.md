---
description: Este tópico discute alternativas ao uso da API de NTFS Transacional (TxF) em cenários de uso comuns.
ms.assetid: 9ee26e7e-990e-4cd3-8180-f0fcaac2b752
title: Alternativas ao uso do NTFS Transacional
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cc69974f27abfba0323ea4d3f16a720e5e99e69d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105759419"
---
# <a name="alternatives-to-using-transactional-ntfs"></a><span data-ttu-id="77445-103">Alternativas ao uso do NTFS Transacional</span><span class="sxs-lookup"><span data-stu-id="77445-103">Alternatives to using Transactional NTFS</span></span>

-   [<span data-ttu-id="77445-104">Resumo</span><span class="sxs-lookup"><span data-stu-id="77445-104">Abstract</span></span>](#abstract)
-   [<span data-ttu-id="77445-105">Introdução</span><span class="sxs-lookup"><span data-stu-id="77445-105">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="77445-106">Alternativas para o TxF por cenário</span><span class="sxs-lookup"><span data-stu-id="77445-106">Alternatives to TxF by Scenario</span></span>](#alternatives-to-txf-by-scenario)
-   [<span data-ttu-id="77445-107">Aplicativos atualizando um único arquivo com dados "como documentos"</span><span class="sxs-lookup"><span data-stu-id="77445-107">Applications updating a single file with "document-like" data</span></span>](#applications-updating-a-single-file-with-document-like-data)
-   [<span data-ttu-id="77445-108">Aplicativos que executam atualizações em vários arquivos e/ou no hive do registro</span><span class="sxs-lookup"><span data-stu-id="77445-108">Applications performing updates to multiple files and/or to the registry hive</span></span>](#applications-performing-updates-to-multiple-files-andor-to-the-registry-hive)
-   [<span data-ttu-id="77445-109">Aplicativos que gerenciam um conjunto de dados estruturados</span><span class="sxs-lookup"><span data-stu-id="77445-109">Applications managing a set of structured data</span></span>](#applications-managing-a-set-of-structured-data)
-   [<span data-ttu-id="77445-110">Aplicativos com transações envolvendo arquivos em um volume NTFS local e tabelas em um banco de dados SQL externo</span><span class="sxs-lookup"><span data-stu-id="77445-110">Applications with Transactions involving files on a local NTFS volume and Tables in an external SQL database</span></span>](#applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database)
-   [<span data-ttu-id="77445-111">Fechando & ação recomendada</span><span class="sxs-lookup"><span data-stu-id="77445-111">Closing & Recommended Action</span></span>](/windows)

## <a name="abstract"></a><span data-ttu-id="77445-112">Resumo</span><span class="sxs-lookup"><span data-stu-id="77445-112">Abstract</span></span>

<span data-ttu-id="77445-113">A Microsoft recomenda enfaticamente que os desenvolvedores investiguem a utilização das alternativas discutidas (ou em alguns casos, investigue outras alternativas) em vez de adotar uma plataforma de API que pode não estar disponível em versões futuras do Windows.</span><span class="sxs-lookup"><span data-stu-id="77445-113">Microsoft strongly recommends developers investigate utilizing the discussed alternatives (or in some cases, investigate other alternatives) rather than adopting an API platform which may not be available in future versions of Windows.</span></span>

## <a name="introduction"></a><span data-ttu-id="77445-114">Introdução</span><span class="sxs-lookup"><span data-stu-id="77445-114">Introduction</span></span>

<span data-ttu-id="77445-115">O TxF foi introduzido com o Windows Vista como um meio de introduzir transações de arquivo atômica para o Windows.</span><span class="sxs-lookup"><span data-stu-id="77445-115">TxF was introduced with Windows Vista as a means to introduce atomic file transactions to Windows.</span></span> <span data-ttu-id="77445-116">Ele permite que os desenvolvedores do Windows tenham atomicidade transacional para operações de arquivo em transações com um único arquivo, em transações que envolvem vários arquivos e em transações que abrangem várias fontes – como o registro (por meio de TxR) e bancos de dados (como SQL).</span><span class="sxs-lookup"><span data-stu-id="77445-116">It allows for Windows developers to have transactional atomicity for file operations in transactions with a single file, in transactions involving multiple files, and in transactions spanning multiple sources – such as the Registry (through TxR), and databases (such as SQL).</span></span> <span data-ttu-id="77445-117">Embora o TxF seja um conjunto poderoso de APIs, houve um interesse de desenvolvedor extremamente limitado nessa plataforma de API desde o Windows Vista, principalmente devido à sua complexidade e a várias nuances que os desenvolvedores precisam considerar como parte do desenvolvimento de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="77445-117">While TxF is a powerful set of APIs, there has been extremely limited developer interest in this API platform since Windows Vista primarily due to its complexity and various nuances which developers need to consider as part of application development.</span></span> <span data-ttu-id="77445-118">Como resultado, a Microsoft está considerando a substituição de APIs de TxF em uma versão futura do Windows para concentrar os esforços de desenvolvimento e manutenção em outros recursos e APIs que têm mais valor para uma maior parte dos clientes.</span><span class="sxs-lookup"><span data-stu-id="77445-118">As a result, Microsoft is considering deprecating TxF APIs in a future version of Windows to focus development and maintenance efforts on other features and APIs which have more value to a larger majority of customers.</span></span> <span data-ttu-id="77445-119">A próxima seção descreve os métodos alternativos de exemplo para obter resultados semelhantes à medida que o TxF faria para vários tipos de cenários de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="77445-119">The next section describes sample alternative methods to achieve similar results as TxF would for several types of application scenarios.</span></span>

## <a name="alternatives-to-txf-by-scenario"></a><span data-ttu-id="77445-120">Alternativas para o TxF por cenário</span><span class="sxs-lookup"><span data-stu-id="77445-120">Alternatives to TxF by Scenario</span></span>

<span data-ttu-id="77445-121">Com as limitações descritas acima, os desenvolvedores devem investigar alternativas ao TxF para abranger cenários de aplicativos que não são atendidos pelo TxF.</span><span class="sxs-lookup"><span data-stu-id="77445-121">With the limitations described above, developers should investigate alternatives to TxF to cover application scenarios which are not met by TxF.</span></span> <span data-ttu-id="77445-122">Discutimos aqui algumas alternativas sugeridas para usos comuns do TxF para os desenvolvedores considerarem.</span><span class="sxs-lookup"><span data-stu-id="77445-122">Discussed here are some suggested alternatives to common uses of TxF for developers to consider.</span></span> <span data-ttu-id="77445-123">Observe que essa lista não é exaustiva nem completa.</span><span class="sxs-lookup"><span data-stu-id="77445-123">Note that this list is neither exhaustive nor complete.</span></span>

## <a name="applications-updating-a-single-file-with-document-like-data"></a><span data-ttu-id="77445-124">Aplicativos atualizando um único arquivo com dados "como documentos"</span><span class="sxs-lookup"><span data-stu-id="77445-124">Applications updating a single file with "document-like" data</span></span>

<span data-ttu-id="77445-125">Muitos aplicativos que lidam com dados "como documentos" tendem a carregar o documento inteiro na memória, operar nele e, em seguida, escrevê-lo novamente para salvar as alterações.</span><span class="sxs-lookup"><span data-stu-id="77445-125">Many applications which deal with "document-like" data tend to load the entire document into memory, operate on it, and then write it back out to save the changes.</span></span> <span data-ttu-id="77445-126">A atomicidade necessária aqui é que as alterações são completamente aplicadas ou não aplicadas, pois um estado inconsistente renderizaria o arquivo corrompido.</span><span class="sxs-lookup"><span data-stu-id="77445-126">The needed atomicity here is that the changes either are completely applied or not applied at all, as an inconsistent state would render the file corrupt.</span></span> <span data-ttu-id="77445-127">Uma abordagem comum é gravar o documento em um novo arquivo e, em seguida, substituir o arquivo original pelo novo.</span><span class="sxs-lookup"><span data-stu-id="77445-127">A common approach is to write the document to a new file, then replace the original file with the new one.</span></span> <span data-ttu-id="77445-128">Um método para fazer isso é com a API [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) .</span><span class="sxs-lookup"><span data-stu-id="77445-128">One method to do this is with the [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) API.</span></span>

## <a name="applications-performing-updates-to-multiple-files-andor-to-the-registry-hive"></a><span data-ttu-id="77445-129">Aplicativos que executam atualizações em vários arquivos e/ou no hive do registro</span><span class="sxs-lookup"><span data-stu-id="77445-129">Applications performing updates to multiple files and/or to the registry hive</span></span>

<span data-ttu-id="77445-130">Há muitos aplicativos que precisam executar atomicamente uma atualização para um conjunto de arquivos e para o registro.</span><span class="sxs-lookup"><span data-stu-id="77445-130">There are many applications which need to atomically perform an update to a set of files and to the registry.</span></span> <span data-ttu-id="77445-131">Esse cenário é mais comumente obtido por meio de um aplicativo de instalador, como Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="77445-131">This scenario is most commonly achieved through an installer application, such as Windows Installer.</span></span> <span data-ttu-id="77445-132">Para obter mais informações sobre Windows Installer, consulte [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="77445-132">For more information on Windows Installer, please refer to [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="applications-managing-a-set-of-structured-data"></a><span data-ttu-id="77445-133">Aplicativos que gerenciam um conjunto de dados estruturados</span><span class="sxs-lookup"><span data-stu-id="77445-133">Applications managing a set of structured data</span></span>

<span data-ttu-id="77445-134">Muitos aplicativos gerenciam um conjunto de estruturas de dados proprietários de tipos variados como um meio de armazenar dados.</span><span class="sxs-lookup"><span data-stu-id="77445-134">Many applications manage some set of proprietary data structures of varying types as a means to store data.</span></span> <span data-ttu-id="77445-135">Um desafio significativo para esses aplicativos é o processo de manutenção da integridade de ponteiros/referências internos se ocorrer uma falha durante uma operação de atualização.</span><span class="sxs-lookup"><span data-stu-id="77445-135">A significant challenge for these applications is the process of maintaining the integrity of internal pointers/references if a failure occurs during an update operation.</span></span> <span data-ttu-id="77445-136">Criar o mecanismo para isso é, na verdade, um "problema difícil" e, portanto, a maioria dos aplicativos dependerá de um servidor de banco de dados verdadeiro para gerenciar seu conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="77445-136">Creating the mechanism for this is indeed a "hard problem", and therefore most applications will rely on a true database server to manage their dataset.</span></span>

<span data-ttu-id="77445-137">Duas sugestões para ajudar a gerenciar dados estruturados são:</span><span class="sxs-lookup"><span data-stu-id="77445-137">Two suggestions to help manage structured data are:</span></span>

-   <span data-ttu-id="77445-138">A Microsoft fornece a caixa de entrada do ESE (mecanismo de armazenamento extensível) no Windows para permitir que os aplicativos executem operações de recuperação e atualização de dados transacionadas.</span><span class="sxs-lookup"><span data-stu-id="77445-138">Microsoft provides the Extensible Storage Engine (ESE) inbox in Windows to enable applications to perform transacted data update and retrieval operations.</span></span> <span data-ttu-id="77445-139">Para obter mais informações sobre o ESE (mecanismo de armazenamento extensível), consulte <https://msdn.microsoft.com/library/gg269259.aspx> .</span><span class="sxs-lookup"><span data-stu-id="77445-139">For more information on the Extensible Storage Engine (ESE), please see <https://msdn.microsoft.com/library/gg269259.aspx>.</span></span>
-   <span data-ttu-id="77445-140">Para aplicativos que exigem um provedor de banco de dados mais potente, robusto e escalonável, é recomendável que os clientes considerem o uso do recurso FileStream disponível com Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="77445-140">For applications that require a more powerful, robust, and scalable database provider, it is recommended that customers consider using the Filestream feature available with Microsoft SQL Server.</span></span> <span data-ttu-id="77445-141">Para obter mais informações sobre o SQL filestreams, consulte <https://technet.microsoft.com/library/bb933993.aspx> .</span><span class="sxs-lookup"><span data-stu-id="77445-141">For more information on SQL Filestreams, please see <https://technet.microsoft.com/library/bb933993.aspx>.</span></span>

## <a name="applications-with-transactions-involving-files-on-a-local-ntfs-volume-and-tables-in-an-external-sql-database"></a><span data-ttu-id="77445-142">Aplicativos com transações envolvendo arquivos em um volume NTFS local e tabelas em um banco de dados SQL externo</span><span class="sxs-lookup"><span data-stu-id="77445-142">Applications with Transactions involving files on a local NTFS volume and Tables in an external SQL database</span></span>

<span data-ttu-id="77445-143">Há classes de aplicativos que têm grandes necessidades de conjuntos de dados, ou precisam ter atomicidade transacional em uma operação que envolva um armazenamento local e um banco de dados externo.</span><span class="sxs-lookup"><span data-stu-id="77445-143">There are classes of applications which either have large dataset needs, or need to have transactional atomicity in an operation involving an external database and local storage.</span></span> <span data-ttu-id="77445-144">Para esse cenário, é altamente recomendável que os desenvolvedores considerem o uso de filestreams do SQL para executar operações de arquivo transacionais.</span><span class="sxs-lookup"><span data-stu-id="77445-144">For this scenario, it is highly recommended that developers consider using SQL Filestreams to perform transactional file operations.</span></span> <span data-ttu-id="77445-145">Para obter mais informações sobre o SQL filestreams, consulte <https://technet.microsoft.com/library/bb933993.aspx> .</span><span class="sxs-lookup"><span data-stu-id="77445-145">For more information on SQL Filestreams, please see <https://technet.microsoft.com/library/bb933993.aspx>.</span></span>

## <a name="closing--recommended-action"></a><span data-ttu-id="77445-146">Fechando & ação recomendada</span><span class="sxs-lookup"><span data-stu-id="77445-146">Closing & Recommended Action</span></span>

<span data-ttu-id="77445-147">O TxF é um conjunto complexo e nuance de APIs que não são normalmente usadas por aplicativos de terceiros.</span><span class="sxs-lookup"><span data-stu-id="77445-147">TxF is a complex and nuanced set of APIs which are not commonly used by 3rd party applications.</span></span> <span data-ttu-id="77445-148">Com a possibilidade de que essas APIs possam não estar disponíveis em versões futuras do Windows, e o fato de que há um meio mais simples de atingir muitos dos cenários para os quais o TxF foi desenvolvido, a Microsoft recomenda enfaticamente que os desenvolvedores investiguem esses meios alternativos em vez de criar uma dependência no TxF em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="77445-148">With the possibility that these APIs may not be available in future versions of Windows, and the fact that there are simpler alternative means to achieve many of the scenarios which TxF was developed for, Microsoft strongly recommends developers to investigate those alternative means instead of creating a dependency on TxF in their applications.</span></span>

 

 
