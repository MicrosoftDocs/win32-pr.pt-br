---
title: Usar rede hospedada sem fio, compartilhamento de conexão com a Internet
description: Usando rede hospedada sem fio e compartilhamento de conexão com a Internet
ms.assetid: 56e86ef8-f759-4e56-a591-74e03430125a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 972774e921199e32eb70841c74c7478e2178cda9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103921631"
---
# <a name="use-wireless-hosted-network-internet-connection-sharing"></a><span data-ttu-id="cc559-103">Usar rede hospedada sem fio, compartilhamento de conexão com a Internet</span><span class="sxs-lookup"><span data-stu-id="cc559-103">Use Wireless Hosted Network, Internet Connection Sharing</span></span>

<span data-ttu-id="cc559-104">A rede hospedada sem fio é um novo recurso de WLAN com suporte no Windows 7 e no Windows 8.</span><span class="sxs-lookup"><span data-stu-id="cc559-104">The Wireless Hosted Network is a new WLAN feature supported on Windows 7 and Windows 8.</span></span> <span data-ttu-id="cc559-105">Ele também tem suporte no Windows Server 2012 e no Windows Server 2008 R2 com o serviço de LAN sem fio instalado.</span><span class="sxs-lookup"><span data-stu-id="cc559-105">It is also supported on Windows Server 2012 and Windows Server 2008 R2 with the Wireless LAN Service installed.</span></span> <span data-ttu-id="cc559-106">Esse recurso implementa duas funções principais:</span><span class="sxs-lookup"><span data-stu-id="cc559-106">This feature implements two major functions:</span></span>

-   <span data-ttu-id="cc559-107">A virtualização de um adaptador sem fio físico em mais de um adaptador sem fio virtual, às vezes chamado de Wi-Fi virtual.</span><span class="sxs-lookup"><span data-stu-id="cc559-107">The virtualization of a physical wireless adapter into more than one virtual wireless adapter sometimes referred to as Virtual Wi-Fi.</span></span>
-   <span data-ttu-id="cc559-108">Um AP (ponto de acesso sem fio) baseado em software é, às vezes, chamado de SoftAP que usa um adaptador sem fio virtual designado.</span><span class="sxs-lookup"><span data-stu-id="cc559-108">A software-based wireless access point (AP) sometimes referred to as a SoftAP that uses a designated virtual wireless adapter.</span></span>

<span data-ttu-id="cc559-109">O ICS (compartilhamento de conexão com a Internet) é um recurso do Windows fornecido por meio do serviço SharedAccess.</span><span class="sxs-lookup"><span data-stu-id="cc559-109">Internet Connection Sharing (ICS) is a feature in Windows provided through the SharedAccess Service.</span></span> <span data-ttu-id="cc559-110">Estritamente falando, o SharedAccess permite o compartilhamento de rede por meio de um computador em que o acesso à rede compartilhada não fornece necessariamente acesso à Internet.</span><span class="sxs-lookup"><span data-stu-id="cc559-110">Strictly speaking, SharedAccess enables network sharing through a computer where the shared network access does not necessarily provide access to the Internet.</span></span> <span data-ttu-id="cc559-111">Usamos o termo ICS e SharedAccess interalteradomente nesta seção, pois o compartilhamento de conexão com a Internet é um cenário importante para a rede hospedada sem fio e o termo de ICS é mais bem conhecido para a comunidade de usuários.</span><span class="sxs-lookup"><span data-stu-id="cc559-111">We use the term ICS and SharedAccess interchangeably in this section, since Internet Connection Sharing is a major scenario for the wireless Hosted Network and the ICS term is better known to the user community.</span></span>

<span data-ttu-id="cc559-112">A rede hospedada sem fio está fortemente ligada ao ICS para habilitar a PAN (Wireless personal Area Network) e os cenários de compartilhamento de Internet.</span><span class="sxs-lookup"><span data-stu-id="cc559-112">Wireless Hosted Network is closely tied to ICS to enable both the wireless personal area network (PAN) and the Internet sharing scenarios.</span></span> <span data-ttu-id="cc559-113">Esta seção fornece recomendações gerais para os desenvolvedores de aplicativos sobre como integrar a rede hospedada sem fio e o ICS usando a rede hospedada pública sem fio e as APIs de ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-113">This section provides general recommendations to application developers on how to integrate wireless Hosted Network and ICS using the public wireless Hosted Network and ICS APIs.</span></span>

## <a name="internet-connection-sharing"></a><span data-ttu-id="cc559-114">Compartilhamento de Conexão com a Internet</span><span class="sxs-lookup"><span data-stu-id="cc559-114">Internet Connection Sharing</span></span>

<span data-ttu-id="cc559-115">O serviço ICS opera em um dos dois modos possíveis:</span><span class="sxs-lookup"><span data-stu-id="cc559-115">The ICS Service operates in one of the two possible modes:</span></span>

-   <span data-ttu-id="cc559-116">Modo autônomo</span><span class="sxs-lookup"><span data-stu-id="cc559-116">Standalone mode</span></span>

    <span data-ttu-id="cc559-117">Somente a função de servidor DHCPv4 está operando quando o serviço ICS é invocado.</span><span class="sxs-lookup"><span data-stu-id="cc559-117">Only the DHCPv4 server function is operating when the ICS service is invoked.</span></span> <span data-ttu-id="cc559-118">Esse é um modo de operação especial para o ICS e só é disponibilizado por meio da rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-118">This is a special operation mode for ICS and is only made available through the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-119">Um usuário ou aplicativo não é capaz de iniciar e parar diretamente o ICS autônomo por meio de APIs ICS públicas ou comandos **netsh** .</span><span class="sxs-lookup"><span data-stu-id="cc559-119">A user or application is not able to directly start and stop standalone ICS through public ICS APIs or **netsh** commands.</span></span> <span data-ttu-id="cc559-120">Iniciar a rede hospedada sem fio normalmente envolve iniciar o ICS no modo autônomo para usar a função de servidor DHCPv4 para fornecer endereços IPv4 privados para dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="cc559-120">Starting the wireless Hosted Network typically involves starting ICS in standalone mode to use the DHCPv4 server function to provide private IPv4 addresses for connected devices.</span></span> <span data-ttu-id="cc559-121">A comunicação de rede para os dispositivos conectados é limitada ao envio e ao recebimento de pacotes de rede entre um dispositivo conectado e o computador local que hospeda a rede hospedada sem fio e entre os próprios dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="cc559-121">Network communication for the connected devices is limited to sending and receiving network packets between a connected device and the local computer hosting the wireless Hosted Network and among the connected devices themselves.</span></span> <span data-ttu-id="cc559-122">Isso efetivamente habilita o cenário de rede de área pessoal sem fio para a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-122">This effectively enables the wireless personal area network scenario for the wireless Hosted Network.</span></span>

-   <span data-ttu-id="cc559-123">Modo completo</span><span class="sxs-lookup"><span data-stu-id="cc559-123">Full mode</span></span>

    <span data-ttu-id="cc559-124">Todos os recursos do ICS estão operando quando o serviço é invocado, como a conversão de endereços de rede e as funções de servidor DHCP para IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="cc559-124">All the features of ICS are operating when the service is invoked, such as network address translation and DHCP server functions for both IPv4 and IPv6.</span></span> <span data-ttu-id="cc559-125">Esse é o modo normal de operação para ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-125">This is the normal mode of operation for ICS.</span></span> <span data-ttu-id="cc559-126">Um usuário ou aplicativo pode iniciar e parar o modo ICS completo por meio de APIs públicas ou comandos do NetShell.</span><span class="sxs-lookup"><span data-stu-id="cc559-126">A user or application may start and stop full ICS mode through public APIs or netshell commands.</span></span> <span data-ttu-id="cc559-127">Por exemplo, esse serviço pode ser interrompido usando net stop SharedAccess em um prompt de comandos com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="cc559-127">For example, this service can be stopped using net stop sharedaccess from an elevated command prompt.</span></span> <span data-ttu-id="cc559-128">Combinando a rede hospedada sem fio com o ICS completo, a comunicação de rede para os dispositivos conectados não é limitada à PAN sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-128">Combining wireless Hosted Network with full ICS, Network communication for the connected devices is not limited to the wireless PAN.</span></span> <span data-ttu-id="cc559-129">Qualquer dispositivo conectado tem acesso à rede (como a Internet) por meio da conexão de rede compartilhada do computador que executa a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-129">Any connected device has access to network (such as the Internet) through the shared network connection from the computer running the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-130">Isso efetivamente habilita o cenário de compartilhamento de rede para a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-130">This effectively enables the Network sharing scenario for the wireless Hosted Network.</span></span>

<span data-ttu-id="cc559-131">Nesta seção, usamos o termo ICS completo para significar o caso em que todas as funções ICS são invocadas no serviço ICS para fornecer acesso a todos os recursos do ICS completos com a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-131">In this section, we use the term full ICS to mean the case where all the ICS functions are invoked in ICS Service to provide access to all the full ICS features with the wireless Hosted Network.</span></span>

<span data-ttu-id="cc559-132">Os dois modos de operação do ICS são mutuamente exclusivos com o ICS completo com precedência mais alta.</span><span class="sxs-lookup"><span data-stu-id="cc559-132">The two ICS operation modes are mutually exclusive with full ICS taking higher precedence.</span></span> <span data-ttu-id="cc559-133">O serviço ICS pode fazer a transição do modo autônomo para o modo completo, mas não do modo completo para o modo autônomo.</span><span class="sxs-lookup"><span data-stu-id="cc559-133">The ICS Service may transition from standalone mode to full mode, but not from full mode to standalone mode.</span></span> <span data-ttu-id="cc559-134">O modo autônomo do ICS foi introduzido no Windows 7 e no Windows Server 2008 R2 com o serviço de LAN sem fio instalado em conjunto com o recurso de rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-134">The ICS standalone mode was introduced in Windows 7 and on Windows Server 2008 R2 with the Wireless LAN Service installed in conjunction with the wireless Hosted Network feature.</span></span> <span data-ttu-id="cc559-135">Ele não está disponível em versões anteriores do Windows.</span><span class="sxs-lookup"><span data-stu-id="cc559-135">It is not available in previous versions of Windows.</span></span>

<span data-ttu-id="cc559-136">Qualquer operação ICS completa envolve dois adaptadores de rede diferentes no sistema:</span><span class="sxs-lookup"><span data-stu-id="cc559-136">Any full ICS operation involves two different network adapters in the system:</span></span>

-   <span data-ttu-id="cc559-137">A interface pública.</span><span class="sxs-lookup"><span data-stu-id="cc559-137">The public interface.</span></span> <span data-ttu-id="cc559-138">Essa é a interface de rede com acesso à Internet.</span><span class="sxs-lookup"><span data-stu-id="cc559-138">This is the network interface with access to the Internet.</span></span> <span data-ttu-id="cc559-139">É essa interface que o computador local que está executando o ICS usa para compartilhar a Internet com clientes e dispositivos que se conectam a ele por meio de SoftAP.</span><span class="sxs-lookup"><span data-stu-id="cc559-139">It is this interface that the local computer running ICS uses to share the Internet with clients and devices connecting to it via SoftAP.</span></span>
-   <span data-ttu-id="cc559-140">A interface privada.</span><span class="sxs-lookup"><span data-stu-id="cc559-140">The private interface.</span></span> <span data-ttu-id="cc559-141">Essa é a interface de rede que outros dispositivos usam para se conectar ao computador local que está executando o ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-141">This is the network interface that other devices use to connect to the local computer that is running ICS.</span></span> <span data-ttu-id="cc559-142">Um servidor DHCPv4 está sendo executado nessa interface privada para fornecer endereços IP locais privados para os outros computadores remotos.</span><span class="sxs-lookup"><span data-stu-id="cc559-142">A DHCPv4 server is running on this private interface to provide private local IP addresses to the other remote computers.</span></span>

<span data-ttu-id="cc559-143">Quando a interface pública não tem acesso à Internet, o servidor DHCP na interface privada continua a fornecer endereços IP locais para os dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="cc559-143">When the public interface does not have Internet access, the DHCP server on the private interface continues to provide local IP addresses to the connected devices.</span></span> <span data-ttu-id="cc559-144">O ICS autônomo envolve apenas a interface privada na qual o SoftAP está em execução; Ele não envolve nenhuma interface pública.</span><span class="sxs-lookup"><span data-stu-id="cc559-144">Standalone ICS only involves the private interface on which SoftAP is running; it does not involve any public interface.</span></span>

<span data-ttu-id="cc559-145">A qualquer momento, há no máximo uma instância do ICS completo em execução no computador local.</span><span class="sxs-lookup"><span data-stu-id="cc559-145">At any time, there is at most one instance of full ICS running on the local computer.</span></span> <span data-ttu-id="cc559-146">Se o ICS completo já estiver em execução no computador local, iniciar outro ICS completo apresentará os seguintes comportamentos funcionais:</span><span class="sxs-lookup"><span data-stu-id="cc559-146">If full ICS is already running on the local computer, starting another full ICS exhibits the following functional behaviors:</span></span>

-   <span data-ttu-id="cc559-147">Se as interfaces pública e privada do novo ICS completo forem as mesmas que o ICS completo existente, iniciar o segundo ICS completo será equivalente a um não op.</span><span class="sxs-lookup"><span data-stu-id="cc559-147">If the public and private interfaces of the new full ICS are the same as the existing full ICS, starting the second full ICS is equivalent to a no-op.</span></span>
-   <span data-ttu-id="cc559-148">Se a nova interface pública for diferente da interface pública antiga, mas a nova interface privada for a mesma interface privada antiga, iniciar um segundo ICS completo terá pouco impacto nos dispositivos conectados na mesma interface privada.</span><span class="sxs-lookup"><span data-stu-id="cc559-148">If the new public interface is different from the old public interface, but the new private interface is the same as the old private interface, starting a second full ICS has little impact on the connected devices on the same private interface.</span></span> <span data-ttu-id="cc559-149">A capacidade de acessar a Internet pode mudar com a nova interface pública.</span><span class="sxs-lookup"><span data-stu-id="cc559-149">The ability to access the Internet may change with the new public interface.</span></span>
-   <span data-ttu-id="cc559-150">Se a nova interface privada for diferente da interface privada antiga, as funções do ICS deixarão de funcionar na interface privada antiga e começarão a ser aplicadas à nova interface privada.</span><span class="sxs-lookup"><span data-stu-id="cc559-150">If the new private interface is different than the old private interface, ICS functions will stop working on the old private interface and start applying to the new private interface.</span></span> <span data-ttu-id="cc559-151">Qualquer dispositivo remoto conectando-se ao computador local usando a interface privada antiga perderá a conectividade IP com o computador local.</span><span class="sxs-lookup"><span data-stu-id="cc559-151">Any remote device connecting to the local computer using the old private interface will lose IP connectivity to the local computer.</span></span>

<span data-ttu-id="cc559-152">Quando o ICS completo já estiver em execução, invocar um segundo ICS completo será interrompido em dispositivos conectados remotamente usando a interface privada antiga, desde que a segunda integração de ICS use uma nova interface privada diferente.</span><span class="sxs-lookup"><span data-stu-id="cc559-152">When full ICS is already running, invoking a second full ICS is disruptive to remotely connected devices using the old private interface as long as the second ICS integration uses a different new private interface.</span></span>

<span data-ttu-id="cc559-153">Para gerenciar e usar o serviço ICS para dar suporte à integração de ICS com a rede hospedada sem fio, um aplicativo de software deve primeiro obter uma interface [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) .</span><span class="sxs-lookup"><span data-stu-id="cc559-153">To manage and use the ICS service to support ICS integration with wireless Hosted Network, a software application must first obtain an [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface.</span></span> <span data-ttu-id="cc559-154">A interface **INetSharingManager** fornece acesso direta ou indiretamente a todas as outras interfaces com na API do ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-154">The **INetSharingManager** interface provides access directly or indirectly to all the other COM interfaces in the ICS API.</span></span> <span data-ttu-id="cc559-155">O método [**Get \_ SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) na interface **INetSharingManager** relata se o computador local dá suporte ao compartilhamento de conexão.</span><span class="sxs-lookup"><span data-stu-id="cc559-155">The [**get\_SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) method on the **INetSharingManager** interface reports whether the local computer supports connection sharing.</span></span> <span data-ttu-id="cc559-156">O método [**Get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) na interface **INetSharingManager** recupera uma interface de enumeração para todas as conexões na pasta Connections.</span><span class="sxs-lookup"><span data-stu-id="cc559-156">The [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the **INetSharingManager** interface retrieves an enumeration interface for all connections in the connections folder.</span></span> <span data-ttu-id="cc559-157">O método [**Get \_ INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) recupera uma interface [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) para a conexão especificada.</span><span class="sxs-lookup"><span data-stu-id="cc559-157">The [**get\_INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) method retrieves an [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface for the specified connection.</span></span> <span data-ttu-id="cc559-158">Os métodos na interface **INetSharingConfiguration** podem ser usados para consultar e alterar as configurações de ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-158">Methods on the **INetSharingConfiguration** interface can be used to query and change ICS settings.</span></span>

<span data-ttu-id="cc559-159">A rede hospedada sem fio deve ser iniciada antes de chamar o método [**Get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) na interface [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) para enumerar todas as conexões na pasta Connections.</span><span class="sxs-lookup"><span data-stu-id="cc559-159">The wireless Hosted Network must be started before calling the [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface to enumerate all connections in the connections folder.</span></span>

<span data-ttu-id="cc559-160">Para obter informações sobre o ICS e as interfaces públicas e os métodos que podem ser usados para consultar e alterar as configurações de ICS, consulte a documentação sobre [compartilhamento de conexão com a Internet e firewall de conexão com a Internet](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span><span class="sxs-lookup"><span data-stu-id="cc559-160">For information on ICS and the public interfaces and methods that can be used to query and change ICS settings, please see the documentation on [About Internet Connection Sharing and Internet Connection Firewall](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span></span>

## <a name="hosted-network-and-ics-integration"></a><span data-ttu-id="cc559-161">Integração de rede hospedada e ICS</span><span class="sxs-lookup"><span data-stu-id="cc559-161">Hosted Network and ICS Integration</span></span>

<span data-ttu-id="cc559-162">Quando o ICS completo não está em execução, iniciar uma rede hospedada sem fio também inicia internamente o serviço do ICS no modo autônomo apenas com a função de servidor DHCPv4 para alocar endereços IP para os dispositivos conectados na interface de rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-162">When full ICS is not running, starting a wireless Hosted Network also internally starts the ICS Service in standalone mode with only the DHCPv4 server function to allocate IP addresses for the connected devices on the wireless Hosted Network interface.</span></span> <span data-ttu-id="cc559-163">O intervalo de endereços de sub-rede para o servidor DHCPv4 autônomo é 192.168.173.0/24.</span><span class="sxs-lookup"><span data-stu-id="cc559-163">The subnet address range for the standalone DHCPv4 server is 192.168.173.0/24.</span></span> <span data-ttu-id="cc559-164">Isso é diferente do intervalo de sub-rede de 192.168.137.0/24 usado com o ICS completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-164">This is different from the subnet range of 192.168.137.0/24 that is used with full ICS.</span></span>

<span data-ttu-id="cc559-165">Iniciar uma rede hospedada sem fio com o ICS completo emprega a seguinte lógica:</span><span class="sxs-lookup"><span data-stu-id="cc559-165">Starting a wireless Hosted Network with full ICS employs the following logic:</span></span>

-   <span data-ttu-id="cc559-166">Se o ICS completo ainda não estiver em execução, iniciar uma rede hospedada sem fio também iniciará o serviço ICS com o servidor DHCPv4 autônomo.</span><span class="sxs-lookup"><span data-stu-id="cc559-166">If full ICS is not already running, starting a wireless Hosted Network also starts the ICS Service with standalone DHCPv4 server.</span></span>
-   <span data-ttu-id="cc559-167">Se o ICS completo já estiver em execução e a interface privada for a interface de rede hospedada sem fio, basta iniciar a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-167">If full ICS is already running and the private interface is the wireless Hosted Network interface, just start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="cc559-168">Se o ICS completo já estiver em execução, mas a interface privada não for a interface de rede hospedada sem fio, a rede hospedada sem fio será iniciada sem a função de servidor DHCPv4 na interface de rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-168">If full ICS is already running but the private interface is not the wireless Hosted Network interface, the wireless Hosted Network will be started without the DHCPv4 server function on the wireless Hosted Network interface.</span></span>

<span data-ttu-id="cc559-169">O impacto da lógica acima realça os seguintes fatos:</span><span class="sxs-lookup"><span data-stu-id="cc559-169">The impact of the logic above highlights the following facts:</span></span>

-   <span data-ttu-id="cc559-170">O ICS não faz a transição do modo completo para o modo autônomo.</span><span class="sxs-lookup"><span data-stu-id="cc559-170">ICS does not transition from full mode to standalone mode.</span></span>
-   <span data-ttu-id="cc559-171">O modo autônomo só pode ser chamado pela rede hospedada sem fio quando o ICS não está em execução no modo completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-171">Standalone mode can only be invoked by the wireless Hosted Network when ICS is not running in full mode.</span></span>
-   <span data-ttu-id="cc559-172">Se o ICS estiver sendo executado no modo autônomo, ele será admitido em modo completo se um usuário ou aplicativo iniciar o ICS no modo completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-172">If ICS is running in standalone mode, it will be preempted into full mode if a user or application starts ICS in full mode.</span></span>
-   <span data-ttu-id="cc559-173">A transição do modo autônomo para o modo completo no ICS causará interrupções nos dispositivos conectados na PAN sem fio se a interface privada do ICS completo não for a mesma do SoftAP.</span><span class="sxs-lookup"><span data-stu-id="cc559-173">Transitioning from standalone mode to full mode in ICS will be disruptive to connected devices in the wireless PAN if the private interface of full ICS is not the same as the one for SoftAP.</span></span>

<span data-ttu-id="cc559-174">Demora um tempo para iniciar ou parar o serviço ICS no computador local no modo completo ou autônomo.</span><span class="sxs-lookup"><span data-stu-id="cc559-174">It takes time to start or stop the ICS Service on the local computer in either full or standalone mode.</span></span> <span data-ttu-id="cc559-175">Um aplicativo deve verificar o estado do serviço ICS usando a função **NotifyServiceStatusChange** para garantir que o serviço ICS não esteja no estado iniciar/parar pendente antes de iniciar ou parar a rede hospedada sem fio para uso com a integração do ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-175">An application should check the state of ICS Service using the **NotifyServiceStatusChange** function to make sure that the ICS Service is not in the start/stop pending state before starting or stopping the wireless Hosted Network for use with ICS integration.</span></span>

## <a name="starting-and-stopping-the-wireless-hosted-network"></a><span data-ttu-id="cc559-176">Iniciando e parando a rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-176">Starting and Stopping the Wireless Hosted Network</span></span>

<span data-ttu-id="cc559-177">O Windows fornece uma plataforma na qual mais de um aplicativo simultâneo tem permissão para gerenciar uma rede hospedada sem fio ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="cc559-177">Windows provides a platform where more than one concurrent application is allowed to manage a wireless Hosted Network at the same time.</span></span> <span data-ttu-id="cc559-178">Especificamente, cada aplicativo pode iniciar e parar a rede hospedada sem fio por conta própria, sem conhecimento prévio sobre outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cc559-178">Specifically each application can start and stop the wireless Hosted Network on its own, without prior knowledge about other applications.</span></span>

<span data-ttu-id="cc559-179">Há dois conjuntos de funções para iniciar e parar uma rede hospedada.</span><span class="sxs-lookup"><span data-stu-id="cc559-179">There are two sets of functions to start and stop a Hosted Network.</span></span>

<span data-ttu-id="cc559-180">Vários aplicativos podem exigir o uso da rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-180">Multiple applications may require the use of the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-181">As funções [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) e [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) iniciam e interrompem um entrada na rede hospedado sem fio de uma maneira compatível com outros aplicativos simultâneos.</span><span class="sxs-lookup"><span data-stu-id="cc559-181">The [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions start and stop a wireless Hosted Network in a way that is compatible with other concurrent applications.</span></span> <span data-ttu-id="cc559-182">As funções **WlanHostedNetworkStartUsing** e **WlanHostedNetworkStopUsing** permitem que um aplicativo tenha uma referência à rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-182">The **WlanHostedNetworkStartUsing** and **WlanHostedNetworkStopUsing** functions allow an application to have a reference to the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-183">Esse mecanismo mantém a rede hospedada sem fio em execução desde que pelo menos um outro aplicativo tenha uma referência atual à rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-183">This mechanism keeps the wireless Hosted Network running provided that at least one other application has a current reference to the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-184">Qualquer usuário pode chamar essas funções.</span><span class="sxs-lookup"><span data-stu-id="cc559-184">Any user can call these functions.</span></span> <span data-ttu-id="cc559-185">As chamadas com êxito para **WlanHostedNetworkStartUsing** devem ser combinadas por chamadas para a função **WlanHostedNetworkStopUsing** .</span><span class="sxs-lookup"><span data-stu-id="cc559-185">Successful calls to **WlanHostedNetworkStartUsing** must be matched by calls to the **WlanHostedNetworkStopUsing** function.</span></span> <span data-ttu-id="cc559-186">Qualquer alteração de estado de rede hospedada causada pela função **WlanHostedNetworkStartUsing** seria automaticamente desfeita se o aplicativo de chamada fechar seu identificador de chamada (chamando [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) com o mesmo parâmetro *hClientHandle* passado para **WlanHostedNetworkStartUsing**) ou se o processo terminar.</span><span class="sxs-lookup"><span data-stu-id="cc559-186">Any Hosted Network state change caused by the **WlanHostedNetworkStartUsing** function would be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to **WlanHostedNetworkStartUsing**) or if the process ends.</span></span>

<span data-ttu-id="cc559-187">As funções [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) e [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) forçam a iniciar e interromper uma rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-187">The [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) and [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) functions force start and stop a wireless Hosted Network.</span></span> <span data-ttu-id="cc559-188">Essas funções só poderão ser chamadas se o usuário tiver o privilégio elevado apropriado.</span><span class="sxs-lookup"><span data-stu-id="cc559-188">These functions can only be called if the user has the appropriate elevated privilege.</span></span> <span data-ttu-id="cc559-189">As chamadas bem-sucedidas para **WlanHostedNetworkForceStart** podem eventualmente ser correspondidas por uma chamada para a função **WlanHostedNetworkForceStop** , dependendo do design do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cc559-189">Successful calls to **WlanHostedNetworkForceStart** may eventually be matched by a call to the **WlanHostedNetworkForceStop** function, depending on the application design.</span></span> <span data-ttu-id="cc559-190">Essas funções passam o estado da rede hospedada sem fio sem associar a solicitação ao identificador de chamada do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cc559-190">These functions transition the wireless Hosted Network state without associating the request with the application's calling handle.</span></span> <span data-ttu-id="cc559-191">Qualquer alteração de estado de rede hospedada causada pela função **WlanHostedNetworkForceStart** não será desfeita automaticamente se o aplicativo de chamada fechar seu identificador de chamada (chamando [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) com o mesmo parâmetro *hClientHandle* passado para [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) ou se o processo terminar.</span><span class="sxs-lookup"><span data-stu-id="cc559-191">Any Hosted Network state change caused by the **WlanHostedNetworkForceStart** function would not be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) or if the process ends.</span></span> <span data-ttu-id="cc559-192">Se o aplicativo que chamou a função **WlanHostedNetworkForceStart** fechar sem chamar uma das funções para interromper a rede hospedada sem fio, a rede hospedada será deixada em execução.</span><span class="sxs-lookup"><span data-stu-id="cc559-192">If the application that called the **WlanHostedNetworkForceStart** function closes without calling one of the functions to stop the wireless Hosted Network, then Hosted Network is left running.</span></span> <span data-ttu-id="cc559-193">Um aplicativo pode chamar a função **WlanHostedNetworkForceStart** depois de garantir que um usuário de sistema elevado aceite os requisitos de energia maiores envolvidos na execução da rede hospedada sem fio por longos períodos de tempo.</span><span class="sxs-lookup"><span data-stu-id="cc559-193">An application might call the **WlanHostedNetworkForceStart** function after ensuring that an elevated system user accepts the increased power requirements involved in running the wireless Hosted Network for extended periods of time.</span></span>

<span data-ttu-id="cc559-194">As recomendações gerais sobre quais funções chamar para iniciar e parar uma rede hospedada sem fio são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="cc559-194">The general recommendations on which functions to call to start and stop a wireless Hosted Network are as follows:</span></span>

-   <span data-ttu-id="cc559-195">Use as funções [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) e [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) dentro de um aplicativo para iniciar e parar uma rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-195">Use the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions within an application to start and stop a wireless Hosted Network.</span></span>
-   <span data-ttu-id="cc559-196">Não use a função [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para iniciar uma rede hospedada sem fio, a menos que seja absolutamente exigido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cc559-196">Do not use the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to start a wireless Hosted Network unless it is absolutely required by the application.</span></span> <span data-ttu-id="cc559-197">A função **WlanHostedNetworkForceStart** também requer privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="cc559-197">The **WlanHostedNetworkForceStart** function also requires elevated privileges.</span></span>
-   <span data-ttu-id="cc559-198">Use apenas a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) como método de recuperação.</span><span class="sxs-lookup"><span data-stu-id="cc559-198">Only use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function as a recovery method.</span></span> <span data-ttu-id="cc559-199">A função **WlanHostedNetworkForceStop** faz com que uma rede hospedada sem fio pare imediatamente.</span><span class="sxs-lookup"><span data-stu-id="cc559-199">The **WlanHostedNetworkForceStop** function causes a wireless Hosted Network to stop immediately.</span></span> <span data-ttu-id="cc559-200">Outros aplicativos que escutam notificações de rede hospedada sem fio podem precisar fazer ações de recuperação.</span><span class="sxs-lookup"><span data-stu-id="cc559-200">Other applications that listen for wireless Hosted Network notifications may need to take recovery actions.</span></span> <span data-ttu-id="cc559-201">Para obter mais informações, consulte a discussão abaixo sobre a sequência de recuperação para rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-201">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

## <a name="start-sequence-for-wireless-hosted-network"></a><span data-ttu-id="cc559-202">Iniciar sequência para rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-202">Start Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="cc559-203">Para um aplicativo que inicia uma rede hospedada sem fio com o ICS completo, a recomendação é iniciar a rede hospedada sem fio e iniciar o ICS completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-203">For an application that starts a wireless Hosted Network with full ICS, the recommendation is to start the wireless Hosted Network, then start full ICS.</span></span> <span data-ttu-id="cc559-204">Se uma rede hospedada sem fio já estiver em execução, um aplicativo deverá usar a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para interromper a rede hospedada sem fio somente se o ICS completo for necessário, mas não tiver sido habilitado antes de a rede hospedada ser iniciada.</span><span class="sxs-lookup"><span data-stu-id="cc559-204">If a wireless Hosted Network is already running, an application should use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network only if full ICS is required but has not been enabled before the Hosted Network was started.</span></span> <span data-ttu-id="cc559-205">Isso permitirá que outros aplicativos se recuperem de possíveis interrupções causadas pelo início do ICS completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-205">This will allow other applications to recover from potential disruptions caused by the start of full ICS.</span></span> <span data-ttu-id="cc559-206">Para obter mais informações, consulte a discussão abaixo sobre a sequência de recuperação para rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-206">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span> <span data-ttu-id="cc559-207">A operação combinada deve ter êxito e falhar como um todo.</span><span class="sxs-lookup"><span data-stu-id="cc559-207">The combined operation should succeed and fail as a whole.</span></span>

> [!Note]  
> <span data-ttu-id="cc559-208">A rede hospedada sem fio deve ser iniciada antes de tentar enumerar o adaptador correspondente usando a interface [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) .</span><span class="sxs-lookup"><span data-stu-id="cc559-208">The wireless Hosted Network must be started before attempting to enumerate the corresponding adapter using the [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) interface.</span></span>

 

<span data-ttu-id="cc559-209">As etapas ordenadas a seguir são a sequência inicial recomendada em um aplicativo usando a rede hospedada sem fio com o ICS completo:</span><span class="sxs-lookup"><span data-stu-id="cc559-209">The following ordered steps are the recommended start sequence in an application using wireless Hosted Network with full ICS:</span></span>

-   <span data-ttu-id="cc559-210">Chame a função [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) para verificar se a rede hospedada sem fio está configurada e pronta para ser usada.</span><span class="sxs-lookup"><span data-stu-id="cc559-210">Call the [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) function to make sure wireless Hosted Network is configured and ready to be used.</span></span>
-   <span data-ttu-id="cc559-211">Chame as funções [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) e [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) para determinar se a rede hospedada sem fio é permitida e está disponível.</span><span class="sxs-lookup"><span data-stu-id="cc559-211">Call the [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) and [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) functions to determine if the wireless Hosted Network is allowed and available.</span></span> <span data-ttu-id="cc559-212">Se a rede hospedada sem fio não for permitida e não estiver disponível, retorne um erro.</span><span class="sxs-lookup"><span data-stu-id="cc559-212">If the wireless Hosted Network is not allowed and not available, return an error.</span></span>
-   <span data-ttu-id="cc559-213">Teste para ver se o serviço ICS usado para o ICS completo é permitido.</span><span class="sxs-lookup"><span data-stu-id="cc559-213">Test to see if the ICS Service used for full ICS is allowed.</span></span> <span data-ttu-id="cc559-214">Se o serviço ICS não puder ser iniciado, retorne um erro.</span><span class="sxs-lookup"><span data-stu-id="cc559-214">If the ICS service cannot be started, return an error.</span></span>
-   <span data-ttu-id="cc559-215">Chame a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para forçar uma interrupção da rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-215">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to force a stop of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="cc559-216">Chame a função [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) para iniciar a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-216">Call the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function to start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="cc559-217">Se a rede hospedada sem fio falhar ao iniciar, retorne um erro.</span><span class="sxs-lookup"><span data-stu-id="cc559-217">If the wireless Hosted Network fails to start, return an error.</span></span>
-   <span data-ttu-id="cc559-218">Se o ICS completo já estiver em execução e a interface pública ou privada atual for diferente da nova interface a ser usada, armazene em cache as interfaces públicas e privadas atuais.</span><span class="sxs-lookup"><span data-stu-id="cc559-218">If full ICS is already running and the current public or private interface is different from the new interface to be used, cache the current public and private interfaces.</span></span> <span data-ttu-id="cc559-219">Um aplicativo também pode optar por retornar um erro ou avisar o usuário se a integração com o ICS já estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="cc559-219">An application may also choose to return an error or prompt the user if ICS integration is already running.</span></span>
-   <span data-ttu-id="cc559-220">Inicie o ICS completo com as novas configurações para as interfaces pública e privada.</span><span class="sxs-lookup"><span data-stu-id="cc559-220">Start full ICS with the new settings for the public and private interfaces.</span></span>
-   <span data-ttu-id="cc559-221">Se o ICS completo não conseguir iniciar com essas configurações, tente iniciar o serviço ICS completo com as interfaces pública e privada em cache se o ICS completo estiver em execução antes.</span><span class="sxs-lookup"><span data-stu-id="cc559-221">If full ICS fails to start with these settings, try to start full ICS service with the cached public and private interfaces if full ICS was running before.</span></span> <span data-ttu-id="cc559-222">Chame a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para interromper a rede hospedada sem fio e retornar um erro.</span><span class="sxs-lookup"><span data-stu-id="cc559-222">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network and return an error.</span></span>
-   <span data-ttu-id="cc559-223">Retorne o êxito de que a rede hospedada sem fio e o ICS completo tenham êxito.</span><span class="sxs-lookup"><span data-stu-id="cc559-223">Return success that the wireless Hosted Network and full ICS succeed.</span></span>

## <a name="stop-sequence-for-wireless-hosted-network"></a><span data-ttu-id="cc559-224">Parar sequência para rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-224">Stop Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="cc559-225">Ao usar a rede hospedada sem fio com o ICS completo, um aplicativo que concluiu seu trabalho pode querer interromper a rede hospedada sem fio e o serviço do ICS usado para o ICS completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-225">When using wireless Hosted Network with full ICS, an application that has finished its work may want to stop the wireless Hosted Network and the ICS service used for full ICS.</span></span> <span data-ttu-id="cc559-226">Nesse caso, é recomendável que a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) seja chamada para parar a rede hospedada em vez de chamar a função [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) .</span><span class="sxs-lookup"><span data-stu-id="cc559-226">In this case, it is recommended that the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function be called to stop the Hosted Network rather than calling the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) function.</span></span> <span data-ttu-id="cc559-227">A função **WlanHostedNetworkForceStop** interrompe a rede hospedada sem fio e também serve para permitir que outros aplicativos se recuperem.</span><span class="sxs-lookup"><span data-stu-id="cc559-227">The **WlanHostedNetworkForceStop** function stops the wireless Hosted Network and also serves to allow other applications to recover.</span></span> <span data-ttu-id="cc559-228">Para obter mais informações, consulte a discussão abaixo sobre a sequência de recuperação para rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-228">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

<span data-ttu-id="cc559-229">As etapas ordenadas a seguir são a sequência de parada recomendada em um aplicativo usando a rede hospedada sem fio e o ICS completo:</span><span class="sxs-lookup"><span data-stu-id="cc559-229">The following ordered steps are the recommended stop sequence in an application using wireless Hosted Network and full ICS:</span></span>

-   <span data-ttu-id="cc559-230">Pare o ICS completo.</span><span class="sxs-lookup"><span data-stu-id="cc559-230">Stop full ICS.</span></span>
-   <span data-ttu-id="cc559-231">Chame a função [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para interromper a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-231">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span>

<span data-ttu-id="cc559-232">Um aplicativo que usa uma rede hospedada sem fio sem o ICS completo que termina com seu trabalho só precisa chamar a função [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) ou [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para interromper a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-232">An application using wireless Hosted Network without full ICS that is finished with its work just needs to call the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) or [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-233">Se a função [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) foi chamada para iniciar a rede hospedada sem fio, o aplicativo deverá chamar a função **WlanHostedNetworkStopUsing** para interromper a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-233">If the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function was called to start the wireless Hosted Network, then the application should call the **WlanHostedNetworkStopUsing** function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-234">Se a rede hospedada sem fio já tiver sido iniciada antes de o aplicativo ou o aplicativo ter chamado a função [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para forçar o início da rede hospedada sem fio, o aplicativo poderá chamar a função **WlanHostedNetworkForceStop** para interromper a rede hospedada sem fio ou não fazer nada (deixar a rede hospedada sem fio iniciada) dependendo do cenário.</span><span class="sxs-lookup"><span data-stu-id="cc559-234">If the wireless Hosted Network was was already started before the application or the application called the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to force start the wireless Hosted Network, then the application can call the **WlanHostedNetworkForceStop** function to stop the wireless Hosted Network or do nothing (leave wireless Hosted Network started) depending on the scenario.</span></span>

## <a name="recovery-sequence-for-wireless-hosted-network"></a><span data-ttu-id="cc559-235">Sequência de recuperação para rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-235">Recovery Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="cc559-236">Um aplicativo que usa a rede hospedada sem fio pode ser afetado pelas ações de outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cc559-236">An application using the wireless Hosted Network may be affected by the actions of other applications.</span></span> <span data-ttu-id="cc559-237">O serviço ICS e as interfaces para gerenciar o ICS não fornecem nenhum método para um aplicativo se registrar para notificações de alteração de ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-237">The ICS service and the interfaces for managing ICS provide no method for an application to register for ICS change notifications.</span></span> <span data-ttu-id="cc559-238">Se outro aplicativo chamar os métodos [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) ou [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) na interface [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) para habilitar ou desabilitar o compartilhamento em uma conexão, uma mensagem será enviada para a interface do usuário (a tela) no computador local, não para outros aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cc559-238">If another application calls the [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) or the [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) methods on the [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface to enable or disable sharing on a connection, a message is sent to the user interface (the screen) on the local computer not to other applications.</span></span> <span data-ttu-id="cc559-239">Portanto, um aplicativo precisa contar com as notificações de rede hospedada sem fio para executar ações de recuperação quando ocorrerem alterações de rede hospedada sem fio ou ICS.</span><span class="sxs-lookup"><span data-stu-id="cc559-239">So an application needs to rely on the wireless Hosted Network notifications to perform recovery actions when ICS or wireless Hosted Network changes occur.</span></span>

<span data-ttu-id="cc559-240">Um aplicativo que usa a rede hospedada sem fio deve se registrar para notificações de rede hospedada sem fio chamando o [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span><span class="sxs-lookup"><span data-stu-id="cc559-240">An application using the wireless Hosted Network should register for wireless Hosted Network notifications by calling the [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span></span> <span data-ttu-id="cc559-241">Se as notificações para apenas a rede hospedada sem fio forem necessárias, o aplicativo deverá passar a **fonte de notificação de WLAN \_ \_ \_ HNWK** no parâmetro *dwNotifSource* passado para o **WlanRegisterNotification**.</span><span class="sxs-lookup"><span data-stu-id="cc559-241">If notifications for only wireless Hosted Network are needed, then the application should pass **WLAN\_NOTIFICATION\_SOURCE\_HNWK** in the *dwNotifSource* parameter passed to the **WlanRegisterNotification**.</span></span> <span data-ttu-id="cc559-242">Se outras notarções sem fio também forem necessárias, **a \_ fonte de notificação de WLAN \_ \_ HNWK** deverá ser combinada com as constantes de origem de notificação para outros tipos de notificações sem fio desejadas e passar esse valor no parâmetro *dwNotifSource* .</span><span class="sxs-lookup"><span data-stu-id="cc559-242">If other wireless notications are also needed, then **WLAN\_NOTIFICATION\_SOURCE\_HNWK** should be combined with the notification source constants for other types of wireless notifications desired and pass this value in the *dwNotifSource* parameter.</span></span>

<span data-ttu-id="cc559-243">A sequência de recuperação é a mesma para aplicativos com ou sem o ICS completo, supondo que os aplicativos não desejam iniciar o serviço ICS novamente.</span><span class="sxs-lookup"><span data-stu-id="cc559-243">The recovery sequence is the same for applications with or without full ICS, assuming that applications don’t want to start ICS service again.</span></span> <span data-ttu-id="cc559-244">Após receber uma notificação de rede hospedada sem fio que a rede hospedada parou, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="cc559-244">Upon receiving a wireless Hosted Network notification that the Hosted Network has stopped, do the following:</span></span>

-   <span data-ttu-id="cc559-245">Se o aplicativo chamou [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para iniciar a rede hospedada sem fio, reinicie a rede hospedada chamando **WlanHostedNetworkForceStart**.</span><span class="sxs-lookup"><span data-stu-id="cc559-245">If the application called [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) to start the wireless Hosted Network, then restart the Hosted Network by calling **WlanHostedNetworkForceStart**.</span></span> <span data-ttu-id="cc559-246">Caso contrário, chame [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) para reiniciar a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-246">Otherwise, call [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) to restart the wireless Hosted Network.</span></span>

## <a name="recovery-sequence-for-connected-devices"></a><span data-ttu-id="cc559-247">Sequência de recuperação para dispositivos conectados</span><span class="sxs-lookup"><span data-stu-id="cc559-247">Recovery Sequence for Connected Devices</span></span>

<span data-ttu-id="cc559-248">Dispositivos remotos ou computadores conectados à rede hospedada sem fio podem ser afetados pelas ações de outros aplicativos que afetam o ICS e a rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-248">Remote devices or computers connected to the wireless Hosted Network may be affected by the actions of other applications that impact ICS and the wireless Hosted Network.</span></span> <span data-ttu-id="cc559-249">Felizmente, a maioria dos dispositivos tem lógica de repetição interna no aplicativo do dispositivo para lidar com uma perda temporária de sinal ou roaming.</span><span class="sxs-lookup"><span data-stu-id="cc559-249">Fortunately, most devices have built in retry logic in the device application to deal with a temporary loss of signal or roaming.</span></span>

<span data-ttu-id="cc559-250">Uma possível sequência de recuperação para dispositivos ou computadores conectados à rede hospedada sem fio que perde o contato é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="cc559-250">A possible recovery sequence for devices or computers connected to the wireless Hosted Network that lose contact is the following:</span></span>

-   <span data-ttu-id="cc559-251">O driver de dispositivo sem fio indica uma desconexão de mídia com as camadas superiores da pilha de rede no dispositivo.</span><span class="sxs-lookup"><span data-stu-id="cc559-251">The wireless device driver indicates a media disconnect to the upper layers of the network stack on the device.</span></span>
-   <span data-ttu-id="cc559-252">O aplicativo do dispositivo inicia verificações periódicas para a disponibilidade da rede hospedada sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-252">The device application starts periodic checks for the availability of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="cc559-253">Depois que o aplicativo do dispositivo detectar novamente a rede hospedada sem fio, o dispositivo iniciará uma conexão sem fio.</span><span class="sxs-lookup"><span data-stu-id="cc559-253">Once the device application again detects the wireless Hosted Network, the device initiates a wireless connection.</span></span>
-   <span data-ttu-id="cc559-254">Após uma conexão bem-sucedida com a rede hospedada sem fio, o aplicativo do dispositivo atualiza suas configurações de IP adequadamente.</span><span class="sxs-lookup"><span data-stu-id="cc559-254">Upon a successful connection with the wireless Hosted Network, the device application updates its IP settings accordingly.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cc559-255">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="cc559-255">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cc559-256">Sobre a rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-256">About the Wireless Hosted Network</span></span>](about-the-wireless-hosted-network.md)
</dt> <dt>

[<span data-ttu-id="cc559-257">Exemplo de rede hospedada sem fio</span><span class="sxs-lookup"><span data-stu-id="cc559-257">Wireless Hosted Network Sample</span></span>](wireless-hosted-network-sample.md)
</dt> <dt>

[<span data-ttu-id="cc559-258">**WlanHostedNetworkForceStart**</span><span class="sxs-lookup"><span data-stu-id="cc559-258">**WlanHostedNetworkForceStart**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)
</dt> <dt>

[<span data-ttu-id="cc559-259">**WlanHostedNetworkInitSettings**</span><span class="sxs-lookup"><span data-stu-id="cc559-259">**WlanHostedNetworkInitSettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings)
</dt> <dt>

[<span data-ttu-id="cc559-260">**WlanHostedNetworkQueryProperty**</span><span class="sxs-lookup"><span data-stu-id="cc559-260">**WlanHostedNetworkQueryProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)
</dt> <dt>

[<span data-ttu-id="cc559-261">**WlanHostedNetworkQuerySecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="cc559-261">**WlanHostedNetworkQuerySecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey)
</dt> <dt>

[<span data-ttu-id="cc559-262">**WlanHostedNetworkQueryStatus**</span><span class="sxs-lookup"><span data-stu-id="cc559-262">**WlanHostedNetworkQueryStatus**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus)
</dt> <dt>

[<span data-ttu-id="cc559-263">**WlanHostedNetworkRefreshSecuritySettings**</span><span class="sxs-lookup"><span data-stu-id="cc559-263">**WlanHostedNetworkRefreshSecuritySettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)
</dt> <dt>

[<span data-ttu-id="cc559-264">**WlanHostedNetworkSetProperty**</span><span class="sxs-lookup"><span data-stu-id="cc559-264">**WlanHostedNetworkSetProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetproperty)
</dt> <dt>

[<span data-ttu-id="cc559-265">**WlanHostedNetworkSetSecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="cc559-265">**WlanHostedNetworkSetSecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey)
</dt> <dt>

[<span data-ttu-id="cc559-266">**WlanHostedNetworkStartUsing**</span><span class="sxs-lookup"><span data-stu-id="cc559-266">**WlanHostedNetworkStartUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)
</dt> <dt>

[<span data-ttu-id="cc559-267">**WlanHostedNetworkStopUsing**</span><span class="sxs-lookup"><span data-stu-id="cc559-267">**WlanHostedNetworkStopUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)
</dt> <dt>

[<span data-ttu-id="cc559-268">**WlanRegisterVirtualStationNotification**</span><span class="sxs-lookup"><span data-stu-id="cc559-268">**WlanRegisterVirtualStationNotification**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanregistervirtualstationnotification)
</dt> </dl>

 

 
