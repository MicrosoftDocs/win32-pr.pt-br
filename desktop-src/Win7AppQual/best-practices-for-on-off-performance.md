---
description: Práticas recomendadas para o desempenho de ativar/desativar
ms.assetid: 872c2a33-327e-41a8-81db-905c46673f13
title: Práticas recomendadas para o desempenho de ativar/desativar
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e2c88eaf5175db43061e57bc4689d8bf256e6881
ms.sourcegitcommit: 95685061d5b0333bbf9e6ebd208dde8190f97005
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2021
ms.locfileid: "108088614"
---
# <a name="best-practices-for-onoff-performance"></a><span data-ttu-id="f5c13-103">Práticas recomendadas para o desempenho de ativar/desativar</span><span class="sxs-lookup"><span data-stu-id="f5c13-103">Best Practices for On/Off Performance</span></span>

## <a name="platform"></a><span data-ttu-id="f5c13-104">Plataforma</span><span class="sxs-lookup"><span data-stu-id="f5c13-104">Platform</span></span>

<span data-ttu-id="f5c13-105">**Clientes-** Windows Vista \| Windows 7</span><span class="sxs-lookup"><span data-stu-id="f5c13-105">**Clients -** Windows Vista \| Windows 7</span></span>  
<span data-ttu-id="f5c13-106">**Servidores-** Windows Server 2008 \| Windows server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="f5c13-106">**Servers -** Windows Server 2008 \| Windows Server 2008 R2</span></span>  

## <a name="description"></a><span data-ttu-id="f5c13-107">Descrição</span><span class="sxs-lookup"><span data-stu-id="f5c13-107">Description</span></span>

<span data-ttu-id="f5c13-108">Os Estados de energia do sistema (ou S-States), conforme definido na especificação ACPI (Advanced Computer Power Interface), são coloquialmente chamados de Estados ligado/desligado, uma vez que a transição de S-State mais comum é um computador ligado e desligado.</span><span class="sxs-lookup"><span data-stu-id="f5c13-108">The system power states (or S-states), as defined in the Advanced Computer Power Interface (ACPI) specification, are colloquially called on/off states since the most common S-state transition is a computer turning on and off.</span></span> <span data-ttu-id="f5c13-109">As diferentes transições de estado ligado/desligado em um sistema que executa o Windows Vista ou o Windows 7 são inicialização, suspensão (ACPI S3), hibernação (ACPI S4) e desligamento.</span><span class="sxs-lookup"><span data-stu-id="f5c13-109">The different on/off state transitions on a system running Windows Vista or Windows 7 are boot, sleep (ACPI S3), hibernate (ACPI S4), and shutdown.</span></span>

<span data-ttu-id="f5c13-110">O bom desempenho durante essas transições ativadas/desativadas não apenas melhora a qualidade percebida de um computador, mas também afeta muito os padrões de uso do computador e a confiabilidade do sistema.</span><span class="sxs-lookup"><span data-stu-id="f5c13-110">Good performance during these on/off transitions not only improves the perceived quality of a computer, but also greatly affects daily computer usage patterns and system reliability.</span></span> <span data-ttu-id="f5c13-111">Os clientes podem se sentir frustrados por sistemas que levam muito tempo para serem inicializados ou desligados.</span><span class="sxs-lookup"><span data-stu-id="f5c13-111">Customers can become frustrated by systems that take too long to boot or to shut down.</span></span> <span data-ttu-id="f5c13-112">Os sistemas móveis que têm transições de suspensão e hibernação longas podem desnecessariamente depauperam a vida útil da bateria.</span><span class="sxs-lookup"><span data-stu-id="f5c13-112">Mobile systems that have lengthy sleep and hibernation transitions can unnecessarily deplete battery life.</span></span> <span data-ttu-id="f5c13-113">Os tempos de desligamento mais longos também podem afetar negativamente a confiabilidade dos sistemas móveis.</span><span class="sxs-lookup"><span data-stu-id="f5c13-113">Longer shutdown times can also adversely affect the reliability of mobile systems.</span></span> <span data-ttu-id="f5c13-114">Por exemplo, eles aumentam o risco de recortes de energia inesperados.</span><span class="sxs-lookup"><span data-stu-id="f5c13-114">For example, they increase the risk of unexpected power cut-offs.</span></span>

<span data-ttu-id="f5c13-115">Extensões de sistema como drivers, aplicativos e serviços podem ter um impacto significativo sobre os tempos de transição ligado/desligado.</span><span class="sxs-lookup"><span data-stu-id="f5c13-115">System extensions like drivers, applications, and services can have a significant impact on on/off transition times.</span></span> <span data-ttu-id="f5c13-116">Esta seção aborda algumas das práticas recomendadas que os desenvolvedores de aplicativos e serviços podem seguir para evitar atrasos durante a inicialização, o modo de espera e o desligamento e para garantir uma experiência de usuário responsiva e após a retomada.</span><span class="sxs-lookup"><span data-stu-id="f5c13-116">This section discusses some of the best practices that application and service developers can follow to avoid delays during boot, standby, and shutdown, and to ensure a responsive post-boot and post-resume user experience.</span></span> <span data-ttu-id="f5c13-117">Para obter mais detalhes sobre como identificar problemas de desempenho de ativar/desativar usando o kit de ferramentas de desempenho do Windows e implementar as recomendações abaixo para seu aplicativo ou serviço, consulte os White papers na seção ' links para outros recursos '.</span><span class="sxs-lookup"><span data-stu-id="f5c13-117">For more details on how to identify on/off performance issues using the Windows Performance Toolkit and implement the below recommendations for your application or service, please refer to the whitepapers in the 'Links to other Resources' section.</span></span>

## <a name="best-practices"></a><span data-ttu-id="f5c13-118">Práticas Recomendadas</span><span class="sxs-lookup"><span data-stu-id="f5c13-118">Best Practices</span></span>

-   <span data-ttu-id="f5c13-119">Use o kit de ferramentas de desempenho do Windows para medir o desempenho durante todas as transições de ligado/desligado.</span><span class="sxs-lookup"><span data-stu-id="f5c13-119">Use the Windows Performance Toolkit to measure performance during all on/off transitions.</span></span>
-   <span data-ttu-id="f5c13-120">Executar testes de forma controlada e fazer comparações com relação a uma linha de base válida:</span><span class="sxs-lookup"><span data-stu-id="f5c13-120">Perform testing in a controlled way, and make comparisons against a valid baseline:</span></span>
    -   <span data-ttu-id="f5c13-121">Obter uma medida de linha de base em um sistema com o mínimo de extensões do sistema possível</span><span class="sxs-lookup"><span data-stu-id="f5c13-121">Obtain a baseline measurement on a system with as few system extensions as possible</span></span>
    -   <span data-ttu-id="f5c13-122">Adicionar aplicativos e serviços um de cada vez</span><span class="sxs-lookup"><span data-stu-id="f5c13-122">Add applications and services one at a time</span></span>
    -   <span data-ttu-id="f5c13-123">Testar se há regressões inaceitáveis em tempos de transição ligado/desligado</span><span class="sxs-lookup"><span data-stu-id="f5c13-123">Test for unacceptable regressions in on/off transition times</span></span>
-   <span data-ttu-id="f5c13-124">Evite usar código gerenciado para aplicativos no caminho de inicialização crítico.</span><span class="sxs-lookup"><span data-stu-id="f5c13-124">Avoid using managed code for applications on the critical boot path.</span></span>
-   <span data-ttu-id="f5c13-125">Verifique se todos os aplicativos respondem rapidamente às notificações de desligamento (mensagens do WM \_ QUERYENDSESSION e do WM \_ EndSession).</span><span class="sxs-lookup"><span data-stu-id="f5c13-125">Ensure that all applications respond quickly to shutdown notifications (WM\_QUERYENDSESSION and WM\_ENDSESSION messages).</span></span>
-   <span data-ttu-id="f5c13-126">Reduza atrasos no caminho de desligamento de serviços e aplicativos minimizando a atividade de CPU, disco e rede em resposta a notificações de desligamento.</span><span class="sxs-lookup"><span data-stu-id="f5c13-126">Reduce delays in the shutdown path of services and applications by minimizing CPU, disk, and network activity in response to shutdown notifications.</span></span>
-   <span data-ttu-id="f5c13-127">Evite atrasos no processamento da notificação de suspensão (mensagem do WM \_ POWERBROADCAST).</span><span class="sxs-lookup"><span data-stu-id="f5c13-127">Avoid delays in processing the suspend notification (WM\_POWERBROADCAST message).</span></span>
-   <span data-ttu-id="f5c13-128">Responda rapidamente a eventos de retomada e minimize o uso da CPU, do disco e da rede após o reinício.</span><span class="sxs-lookup"><span data-stu-id="f5c13-128">Respond quickly to resume events and minimize post-resume CPU, disk, and network usage.</span></span>
-   <span data-ttu-id="f5c13-129">Reduza o consumo de recursos do aplicativo após a inicialização.</span><span class="sxs-lookup"><span data-stu-id="f5c13-129">Reduce application resource consumption post-boot.</span></span>
-   <span data-ttu-id="f5c13-130">Não inicie aplicativos da chave RunOnce em cada inicialização.</span><span class="sxs-lookup"><span data-stu-id="f5c13-130">Do not start applications from the RunOnce key on every boot.</span></span>
-   <span data-ttu-id="f5c13-131">Converta todos os serviços não essenciais no início da demanda ou no início do gatilho para disponibilizar os recursos do sistema durante a inicialização.</span><span class="sxs-lookup"><span data-stu-id="f5c13-131">Convert all nonessential services to demand start or trigger start in order to make system resources available during boot.</span></span>
-   <span data-ttu-id="f5c13-132">Evite usar grupos de ordem de carregamento para expressar dependências de serviço.</span><span class="sxs-lookup"><span data-stu-id="f5c13-132">Avoid using load order groups to express service dependencies.</span></span>
-   <span data-ttu-id="f5c13-133">Verifique se todos os serviços em execução relatam esse status assim que possível durante a inicialização para evitar o bloqueio do SCM (Gerenciador de controle de serviço).</span><span class="sxs-lookup"><span data-stu-id="f5c13-133">Ensure that all running services report this status as soon as possible during boot to avoid blocking the Service Control Manager (SCM).</span></span>
-   <span data-ttu-id="f5c13-134">Evite usar código gerenciado para serviços no caminho de inicialização.</span><span class="sxs-lookup"><span data-stu-id="f5c13-134">Avoid using managed code for services on the startup path.</span></span>
-   <span data-ttu-id="f5c13-135">Não permita que os serviços optem por receber notificações de pré-desligamento e desligamento ( \_ códigos de controle de DESligamento de controle de serviço \_ e de encerramento de controle de serviço \_ \_ ), a menos que seja absolutamente necessário.</span><span class="sxs-lookup"><span data-stu-id="f5c13-135">Do not allow services to opt in to receive pre-shutdown and shutdown notifications (SERVICE\_CONTROL\_PRESHUTDOWN and SERVICE\_CONTROL\_SHUTDOWN control codes) unless absolutely required.</span></span>
-   <span data-ttu-id="f5c13-136">Verifique se todos os serviços que optaram por receber notificações de desligamento respondem rapidamente ao SCM.</span><span class="sxs-lookup"><span data-stu-id="f5c13-136">Ensure that all services that have opted to receive shutdown notifications respond quickly to the SCM.</span></span>
-   <span data-ttu-id="f5c13-137">Verifique se os serviços não optam por receber notificações de suspensão, a menos que seja absolutamente necessário.</span><span class="sxs-lookup"><span data-stu-id="f5c13-137">Verify that services do not opt in to receive suspend notifications unless absolutely required.</span></span>
-   <span data-ttu-id="f5c13-138">Verifique se todos os serviços respondem rapidamente para retomar eventos e minimizar a CPU, o disco e o uso da rede após a retomada.</span><span class="sxs-lookup"><span data-stu-id="f5c13-138">Ensure that all services respond quickly to resume events and minimize post-resume CPU, disk, and network usage.</span></span>

## <a name="links-to-other-resources"></a><span data-ttu-id="f5c13-139">Links para outros recursos</span><span class="sxs-lookup"><span data-stu-id="f5c13-139">Links to Other Resources</span></span>

-   -   [<span data-ttu-id="f5c13-140">Guia de soluções de transições on/off do Windows</span><span class="sxs-lookup"><span data-stu-id="f5c13-140">Windows On/Off Transitions Solutions Guide</span></span>](/windows-hardware/test/assessments/onoff-transition-performance)
-   [<span data-ttu-id="f5c13-141">Análise de desempenho de transição ativado/desativado do Windows Vista</span><span class="sxs-lookup"><span data-stu-id="f5c13-141">On/Off Transition Performance Analysis of Windows Vista</span></span>](/windows-hardware/test/assessments/onoff-transition-performance)
-   [<span data-ttu-id="f5c13-142">Análise de desempenho do Windows</span><span class="sxs-lookup"><span data-stu-id="f5c13-142">Windows Performance Analysis</span></span>](https://msdn.microsoft.com/performance/default.aspx)
-   [<span data-ttu-id="f5c13-143">Documentação do kit de ferramentas de desempenho do Windows no MSDN</span><span class="sxs-lookup"><span data-stu-id="f5c13-143">Windows Performance Toolkit documentation on MSDN</span></span>](/previous-versions/windows/desktop/xperf/windows-performance-analyzer--wpa-)
-   [<span data-ttu-id="f5c13-144">Fórum de análise de desempenho do Windows</span><span class="sxs-lookup"><span data-stu-id="f5c13-144">Windows Performance Analysis forum</span></span>](https://social.msdn.microsoft.com/Forums/wptk_v4/threads/)
-   [<span data-ttu-id="f5c13-145">Rastreamento de eventos para Windows no MSDN</span><span class="sxs-lookup"><span data-stu-id="f5c13-145">Event Tracing for Windows on MSDN</span></span>](../etw/event-tracing-portal.md)

 

 
