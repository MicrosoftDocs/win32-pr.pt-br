---
title: Solucionando problemas de aplicativos
description: Esta seção fornece soluções para problemas comuns.
ms.assetid: dfdc5a97-aa0a-4011-8f61-6e405e28b6f8
keywords:
- Windows Touch, solução de problemas de aplicativos
- Windows Touch, rejeição de Palm
- rejeição do Palm
- Windows Touch, suporte herdado
- solução de problemas do Windows Touch
- inércia, solução de problemas de aplicativos
- manipulações, solução de problemas de aplicativos
- gestos, aplicativos de solução de problemas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf1aeb37f139ea9063c07dd7d629ac5579229863
ms.sourcegitcommit: 70f39ec77d19d3c32c376ee2831753d2cafae41a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/09/2021
ms.locfileid: "103930266"
---
# <a name="troubleshooting-applications"></a>Solucionando problemas de aplicativos

Esta seção fornece soluções para problemas comuns.

## <a name="general-troubleshooting"></a>Solução de problemas gerais



|          |                                                                                                                                                                                                                                                                                                                    |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Estou executando o Windows Server 2008 e os recursos do Windows Touch não estão funcionando.                                                                                                                                                                                                                                       |
| Causa    | Você não habilitou a experiência desktop.                                                                                                                                                                                                                                                                        |
| Solução | Abra a ferramenta administrativa do Gerenciador do Servidor: clique em **Iniciar**, aponte para **Ferramentas administrativas** e clique em **Gerenciador do servidor**. Clique no item **recursos** na coluna esquerda. Clique em **Adicionar recursos** na seção **recursos** . Selecione **experiência da área de trabalho**, clique em **Avançar** e, em seguida, clique em **instalar**. |



 



|          |                                                                                                                                                                                                    |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Sempre que eu mover meu dedo rapidamente pelo meu aplicativo, uma seta é exibida e meu gesto ou manipulação não está registrando corretamente.                                                             |
| Causa    | Ter movimentos habilitados quando você não precisa dele.                                                                                                                                                      |
| Solução | Você tem movimentos habilitados quando deseja que ele seja desabilitado. Consulte [suporte herdado para panorâmica com barras de rolagem](legacy-support-for-panning-with-scrollbars.md) para obter informações sobre como desabilitar movimentos de caneta. |



 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Problema</td>
<td>Não consigo distinguir entre entrada do mouse e entrada do Windows Touch.</td>
</tr>
<tr class="even">
<td>Causa</td>
<td>O Windows gera mensagens de mouse para suporte herdado quando um usuário clica na tela.</td>
</tr>
<tr class="odd">
<td>Solução</td>
<td>Você pode chamar <a href="/windows/win32/api/winuser/nf-winuser-getmessageextrainfo">GetMessageExtraInfo</a> para o <strong>WM_LBUTTONDOWN</strong> e <strong>WM_LBUTTONUP</strong> mensagens para determinar a origem. O código a seguir mostra como isso pode ser feito. <span data-codelanguage="ManagedCPlusPlus"></span>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>C++</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>#define MOUSEEVENTF_FROMTOUCH 0xFF515700

if ((GetMessageExtraInfo() & MOUSEEVENTF_FROMTOUCH) == MOUSEEVENTF_FROMTOUCH) { 
    // Click was generated by wisptis / Windows Touch
}else{ 
    // Click was generated by the mouse.
}
</code></pre></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>



 



|          |                                                                                    |
|----------|------------------------------------------------------------------------------------|
| Problema    | Como fazer executar aplicativos do Microsoft PixelSense no Windows 7?                       |
| Causa    | O Windows Touch e o Microsoft PixelSense são incompatíveis.                           |
| Solução | Você precisa direcionar para a plataforma Windows 7 ou para a plataforma Microsoft PixelSense. |



 

## <a name="troubleshooting-manipulations-and-inertia"></a>Solucionando problemas de manipulação e inércia



|          |                                                                                                                                                                                                                                                          |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Meu aplicativo está congelando sem motivo. Estou obtendo violações de acesso quando inicializo as interfaces de objeto.                                                                                                                                          |
| Causa    | Falta uma chamada para o **CoInitialize** ao usar as interfaces [**IManipulationProcessor**](/windows/desktop/api/manipulations/nn-manipulations-imanipulationprocessor) ou [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) .                                                                                 |
| Solução | Isso pode ser causado pela instanciação dos objetos COM (Windows Touch Component Object Model) sem chamar o CoInitialize. Isso ocorre às vezes, quando você está convertendo projetos do uso de gestos para usar as interfaces Manipulation ou inércia. |



 



|          |                                                                                                                                                                                                                                                                                                                                                                                         |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Meu objeto está girando de forma inadequada quando está sendo traduzido. A rotação de um único dedo não está funcionando corretamente.                                                                                                                                                                                                                                                                           |
| Causa    | Configuração inadequada de pivôs em um objeto.                                                                                                                                                                                                                                                                                                                                                 |
| Solução | Você não está configurando os pontos de manipulação dinâmica corretamente. Defina as propriedades [**PivotPointX**](/windows/desktop/api/manipulations/nf-manipulations-imanipulationprocessor-get_pivotpointx) e [**PivotPointY**](/windows/desktop/api/manipulations/nf-manipulations-imanipulationprocessor-get_pivotpointy) como o centro do objeto ou o ponto que você deseja girar e defina a propriedade [**PivotRadius**](/windows/desktop/api/manipulations/nf-manipulations-imanipulationprocessor-get_pivotradius) como o raio do seu objeto. |



 

## <a name="troubleshooting-windows-touch-input"></a>Solucionando problemas de entrada por toque do Windows



|          |                                                                                                                                                                                                                                                                                                                                        |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Depois de lidar com a mensagem do [**WM \_ Touch**](wm-touchdown.md) , eu pare de obter comentários sobre limites.                                                                                                                                                                                                                                        |
| Causa    | Consumindo a mensagem do [**WM \_ Touch**](wm-touchdown.md) sem tratá-la.                                                                                                                                                                                                                                                           |
| Solução | Provavelmente, você está consumindo uma mensagem do Windows Touch sem encaminhá-la para **DefWindowProc**, o que resultará em um comportamento inesperado. Verifique [introdução com as mensagens do Windows Touch](getting-started-with-multi-touch-messages.md) para obter mais informações sobre como lidar corretamente com o [**WM \_ Touch**](wm-touchdown.md) messages. |



 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Problema</td>
<td>Estou incluindo o Windows. h, mas ainda diz que <a href="wm-touchdown.md"><strong>WM_TOUCH</strong></a> não está definido.</td>
</tr>
<tr class="even">
<td>Causa</td>
<td>A versão do Windows em targetver. h está incorreta.</td>
</tr>
<tr class="odd">
<td>Solução</td>
<td>Você não definiu a versão correta do Windows no seu projeto. O código a seguir ilustra as versões do Windows definidas corretamente para o Windows Touch no Windows 7. <span data-codelanguage="ManagedCPlusPlus"></span>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>C++</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>#ifndef WINVER                  // Specify that the minimum required platform is Windows 7.
#define WINVER 0x0601           
#endif</code></pre></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>



 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Problema</td>
<td>Minhas coordenadas x de entrada por toque e coordenadas y parecem inválidas. Eles são valores maiores que o esperado ou são valores negativos.</td>
</tr>
<tr class="even">
<td>Causa</td>
<td>Talvez seja necessário converter seus pontos de toque em pixels, ou talvez seja necessário converter as coordenadas da tela.</td>
</tr>
<tr class="odd">
<td>Solução</td>
<td>Certifique-se de que você está chamando <a href="/windows/desktop/api/winuser/nf-winuser-touch_coord_to_pixel"><strong>TOUCH_COORD_TO_PIXEL</strong></a> e <a href="/windows/desktop/api/winuser/nf-winuser-screentoclient"><strong>ScreenToClient</strong></a>. O código a seguir mostra como fazer isso. <span data-codelanguage="ManagedCPlusPlus"></span>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>C++</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>      POINT ptInput;
      if (GetTouchInputInfo((HTOUCHINPUT)lParam, cInputs, pInputs, sizeof(TOUCHINPUT))){
        for (int i=0; i < static_cast<INT>(cInputs); i++){
          TOUCHINPUT ti = pInputs[i];                       
          if (ti.dwID != 0){                
            // Do something with your touch input handle.
            ptInput.x = TOUCH_COORD_TO_PIXEL(ti.x);
            ptInput.y = TOUCH_COORD_TO_PIXEL(ti.y);
            ScreenToClient(hWnd, &ptInput);
            points[ti.dwID][0] = ptInput.x;
            points[ti.dwID][1] = ptInput.y;
          }
        }
      }</code></pre></td>
</tr>
</tbody>
</table>

<div class="alert">
<blockquote>
[!Note]<br />
Para usar a função <a href="/windows/desktop/api/winuser/nf-winuser-screentoclient"><strong>ScreenToClient</strong></a> , você deve ter suporte a DPI alto em seu aplicativo. Para obter mais informações sobre como dar suporte a DPI alto, visite a seção <a href=" /windows/win32/hidpi/high-dpi-desktop-application-development-on-windows">alta dpi</a> do MSDN.
</blockquote>
</div>
<div>
 
</div></td>
</tr>
</tbody>
</table>



 



|          |                                                                                                                                                                                                                                |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Não estou vendo as mensagens do [**WM \_ Touch**](wm-touchdown.md) , mas sei que o Windows Touch está funcionando porque estou vendo as mensagens de [**\_ gesto do WM**](wm-gesture.md) .                                                             |
| Causa    | Uma chamada para [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow)está ausente.                                                                                                                                                          |
| Solução | [**WM \_**](wm-touchdown.md) As mensagens [**de \_ gesto**](wm-gesture.md) do touch e do WM são mutuamente exclusivas. Se você não chamar [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow), receberá apenas mensagens **de \_ gesto do WM** . |



 



|          |                                                                                                                                                                                                                                                                                                                                                       |
|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Estou percebendo pequenos atrasos no momento em que eu toque meu dedo quando estou recebendo entrada no meu aplicativo.                                                                                                                                                                                                                                         |
| Causa    | A rejeição do Palm está causando atrasos na entrada.                                                                                                                                                                                                                                                                                                            |
| Solução | Se **TWF \_ WANTPALM** for definido em chamadas para [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow), a rejeição de Palm estará habilitada. Isso causa um pequeno atraso de (100 ms) enquanto o software testa se a entrada é proveniente de um dedo, caneta ou da palma do usuário. Desabilite a rejeição de Palm chamando **RegisterTouchWindow** com o sinalizador **TWF \_ WANTPALM** limpo. |



 

## <a name="troubleshooting-windows-touch-gestures"></a>Solução de problemas de gestos de toque do Windows



|          |                                                                                                                                                                                                                                                                                                                                                                                 |
|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Depois de manipular a mensagem de [**\_ gesto do WM**](wm-gesture.md) , pare de obter comentários sobre limites. Ou então, um gesto que funcionou anteriormente não funciona agora.                                                                                                                                                                                                                         |
| Causa    | Consumindo a mensagem de [**\_ gesto do WM**](wm-gesture.md) sem tratá-la.                                                                                                                                                                                                                                                                                                    |
| Solução | Provavelmente, você está consumindo uma mensagem do Windows Touch sem encaminhá-la para [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca), o que resultará em um comportamento inesperado. Verifique [introdução com gestos do Windows](getting-started-with-multi-touch-gestures.md) para obter mais informações sobre como lidar corretamente com as mensagens de [**\_ gesto do WM**](wm-gesture.md) . |



 



|          |                                                                                                                                                                                                                         |
|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Não estou vendo as mensagens de [**\_ gestos do WM**](wm-gesture.md) , mas sei que o Windows Touch está funcionando porque estou vendo as mensagens do [**WM \_ Touch**](wm-touchdown.md) .                                                      |
| Causa    | Chamando [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow).                                                                                                                                                             |
| Solução | [**WM \_**](wm-touchdown.md) As mensagens [**de \_ gesto**](wm-gesture.md) do touch e do WM são mutuamente exclusivas. Se você chamar [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow), não receberá mensagens **de \_ gesto do WM** . |



 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Problema</td>
<td>Não estou vendo todos os gestos que espero ver. Por exemplo, estou vendo gestos com o identificador <strong>GID_PAN</strong> mas não <strong>GID_ROTATE</strong>.</td>
</tr>
<tr class="even">
<td>Causa</td>
<td>Alguns gestos, como o gesto de rotação, não são habilitados por padrão.</td>
</tr>
<tr class="odd">
<td>Solução</td>
<td>Você precisa chamar <a href="/windows/desktop/api/winuser/nf-winuser-setgestureconfig"><strong>SetGestureConfig</strong></a> quando receber uma mensagem de <a href="wm-gesturenotify.md"><strong>WM_GESTURENOTIFY</strong></a> conforme descrito na referência de <strong>WM_GESTURENOTIFY</strong> ou precisar adicionar um manipulador para a mensagem de <strong>WM_GESTURENOTIFY</strong> . O código a seguir mostra como um manipulador pode ser implementado para habilitar o suporte para rotação. <span data-codelanguage="ManagedCPlusPlus"></span>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th>C++</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>// The message map.
BEGIN_MESSAGE_MAP()
    ON_WM_CREATE()
     ... ... ...
    ON_MESSAGE(WM_GESTURENOTIFY, OnWindowsGestureNotify)
END_MESSAGE_MAP()  

LRESULT CTestWndApp::OnWindowsGestureNotify(
    UINT    uMsg,
    WPARAM  wParam,
    LPARAM  lParam,
    BOOL&   bHandled
    ){
    GESTURECONFIG gc;
    gc.dwID    = GID_ROTATE; // The gesture identifier.
    gc.dwWant  = GC_ROTATE;  // The gesture command you are enabling for GID_ROTATE.
    gc.dwBlock = 0;          // Don&#39;t block anything.
    UINT uiGcs = 1;          // The number of gestures being set.

  BOOL bResult = SetGestureConfig(g_hMainWnd, 0, uiGcs, &gc, sizeof(GESTURECONFIG));
    if(!bResult) {
        // Something went wrong, report the error using your preferred logging.
    }

  return 0;
}  </code></pre></td>
</tr>
</tbody>
</table>

Para obter mais exemplos de configurações de gesto típicas, consulte <strong>SetGestureConfig</strong>.</td>
</tr>
</tbody>
</table>



 



|          |                                                                                                                                                                                                                                                                                                                                                                                                    |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | As barras de rolagem personalizadas no meu aplicativo não estão rolando quando executo o gesto de panorâmica.                                                                                                                                                                                                                                                                                                         |
| Causa    | Manipuladores ausentes para as \_ mensagens de rolagem corretas do WM \* .                                                                                                                                                                                                                                                                                                                                            |
| Solução | Você não está lidando com todas as \_ \* mensagens de rolagem do WM em suas barras de rolagem personalizadas. É recomendável que você manipule a mensagem de [**\_ gesto do WM**](wm-gesture.md) em vez de manter a funcionalidade de barra de rolagem personalizada por meio do suporte herdado. Você precisa dar suporte a mensagens, conforme detalhado na seção [suporte herdado para movimento panorâmico com barras de rolagem](legacy-support-for-panning-with-scrollbars.md). |



 



|          |                                                                                                                                                                                                                                                                 |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Problema    | Estou recebendo atrasos para gestos.                                                                                                                                                                                                                               |
| Causa    | Os movimentos podem estar causando atrasos para gestos.                                                                                                                                                                                                                      |
| Solução | Os movimentos podem causar atrasos por quanto tempo leva para seu aplicativo receber mensagens [**de \_ gesto do WM**](wm-gesture.md) . Consulte [suporte herdado para panorâmica com barras de rolagem](legacy-support-for-panning-with-scrollbars.md) para obter informações sobre como desabilitar movimentos. |



 

## <a name="related-topics"></a>Tópicos relacionados

<dl> <dt>

[Guia de programação](programming-guide.md)
</dt> </dl>

 

 