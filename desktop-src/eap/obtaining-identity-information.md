---
title: Obtendo informações de identidade
description: O fornecedor que implementa o protocolo de autenticação também pode fornecer uma interface de função que obtém informações de identificação inicial para o usuário que solicita autenticação.
ms.assetid: 773c9fdb-c810-4cea-afed-df6484a9c9c9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb9519da9d66937fd25245fe78f12ef34c3c0ad8
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104007389"
---
# <a name="obtaining-identity-information"></a><span data-ttu-id="1cfdc-103">Obtendo informações de identidade</span><span class="sxs-lookup"><span data-stu-id="1cfdc-103">Obtaining Identity Information</span></span>

<span data-ttu-id="1cfdc-104">O fornecedor que implementa o protocolo de autenticação também pode fornecer uma interface de função que obtém informações de identificação inicial para o usuário que solicita autenticação.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-104">The vendor that implements the authentication protocol may also provide a function interface that obtains initial identifying information for the user requesting authentication.</span></span>

<span data-ttu-id="1cfdc-105">O fornecedor deve implementar as funções a seguir.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-105">The vendor should implement the following functions.</span></span>

-   [<span data-ttu-id="1cfdc-106">**RasEapGetIdentity**</span><span class="sxs-lookup"><span data-stu-id="1cfdc-106">**RasEapGetIdentity**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity)
-   [<span data-ttu-id="1cfdc-107">**RasEapFreeMemory**</span><span class="sxs-lookup"><span data-stu-id="1cfdc-107">**RasEapFreeMemory**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory)

<span data-ttu-id="1cfdc-108">Essas funções podem ser implementadas na mesma DLL que o protocolo de autenticação ou em uma DLL separada.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-108">These functions may be implemented in the same DLL as the authentication protocol, or in a separate DLL.</span></span> <span data-ttu-id="1cfdc-109">Além disso, a DLL que implementa as funções de identidade pode dar suporte a mais de um protocolo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-109">Also, the DLL that implements the identity functions may support more than one authentication protocol.</span></span> <span data-ttu-id="1cfdc-110">O caminho para a DLL para essas funções é armazenado no valor de registro de [ \_ \_ \_ identidadename EAP do RAS](authentication-protocol-registry-values.md) , sob a chave para o protocolo de autenticação.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-110">The path to the DLL for these functions is stored in the [RAS\_EAP\_VALUENAME\_IDENTITY](authentication-protocol-registry-values.md) registry value, under the key for the authentication protocol.</span></span> <span data-ttu-id="1cfdc-111">Para obter mais informações sobre como criar esse valor de registro, consulte [instalação EAP](eap-installation.md).</span><span class="sxs-lookup"><span data-stu-id="1cfdc-111">For more information about creating this registry value, see [EAP Installation](eap-installation.md).</span></span>

<span data-ttu-id="1cfdc-112">A função [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) normalmente exibe uma interface do usuário para obter informações de identidade para o usuário.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-112">The [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) function typically displays a user interface (UI) to obtain identity information for the user.</span></span> <span data-ttu-id="1cfdc-113">No entanto, se o parâmetro *dwFlags* contiver o \_ \_ sinalizador não interativo de sinalizador EAP do RAS \_ \_ , **RasEapGetIdentity** não deverá exibir uma interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-113">However, if the *dwFlags* parameter contains the RAS\_EAP\_FLAG\_NON\_INTERACTIVE flag, **RasEapGetIdentity** should not display a UI.</span></span>

<span data-ttu-id="1cfdc-114">Se [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) exibir uma interface do usuário, a interface do usuário deverá oferecer suporte a mensagens de [**\_ comando do WM**](../menurc/wm-command.md) , em que o valor de [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) é igual a IDCANCEL.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-114">If [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) does display a UI, the UI must support [**WM\_COMMAND**](../menurc/wm-command.md) messages where the value of [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) is equal to IDCANCEL.</span></span>

<span data-ttu-id="1cfdc-115">O serviço de autenticação chama [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) se o valor [RAS \_ EAP \_ valueName \_ Invoke \_ NAMEDLG](authentication-protocol-registry-values.md) que está no registro para esse EAP é definido como zero.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-115">The authentication service calls [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) if the [RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG](authentication-protocol-registry-values.md) value that is in the registry for this EAP is set to zero.</span></span> <span data-ttu-id="1cfdc-116">Se RAS \_ EAP \_ valueName \_ Invoke \_ NAMEDLG não estiver presente, ou estiver presente e estiver definido como um, o serviço de autenticação exibirá a caixa de diálogo padrão de nome de usuário do sistema.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-116">If RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG is not present, or is present and is set to one, the authentication service displays the standard system user name dialog box.</span></span>

<span data-ttu-id="1cfdc-117">Além do RAS \_ EAP \_ valueName \_ Invoke \_ NAMEDLG, o fornecedor do EAP pode criar um valor relacionado, [RAS \_ EAP \_ valueName \_ invocar \_ PWDDLG](authentication-protocol-registry-values.md), no registro.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-117">In addition to RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG, the EAP vendor may create a related value, [RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG](authentication-protocol-registry-values.md), in the registry.</span></span> <span data-ttu-id="1cfdc-118">Se esse valor estiver presente e for definido como zero, o serviço não exibirá a caixa de diálogo padrão de senha do sistema.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-118">If this value is present and is set to zero, the service will not display the standard system password dialog.</span></span> <span data-ttu-id="1cfdc-119">Esse valor é útil ao implementar um método biométrico, como uma verificação de impressão digital, para autenticar o usuário.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-119">This value is useful when implementing a biometric method such as a fingerprint scan to authenticate the user.</span></span> <span data-ttu-id="1cfdc-120">Se os valores de RAS \_ EAP \_ valueName \_ Invoke \_ NAMEDLG e RAS \_ EAP \_ valueName \_ Invoke \_ PWDDLG forem zero, uma interface do usuário de identidade poderá ser usada para obter as informações de identidade e biométrica.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-120">If both the RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG and RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG values are zero, an identity UI could be used to obtain both the identity and biometric information.</span></span> <span data-ttu-id="1cfdc-121">No entanto, se somente RAS \_ EAP \_ valueName \_ Invoke \_ PWDDLG for zero, o serviço de autenticação não chamará [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span><span class="sxs-lookup"><span data-stu-id="1cfdc-121">However, if only RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG is zero, the authentication service will not call [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span></span> <span data-ttu-id="1cfdc-122">Nesse caso, você pode usar a [interface do usuário interativa](interactive-user-interface.md) para obter informações biométricas.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-122">In this case, you could use the [interactive user interface](interactive-user-interface.md) to obtain the biometric information.</span></span>

<span data-ttu-id="1cfdc-123">Para obter mais informações sobre esses valores de registro, consulte [valores de registro do protocolo de autenticação](authentication-protocol-registry-values.md).</span><span class="sxs-lookup"><span data-stu-id="1cfdc-123">For more information on these registry values, see [Authentication Protocol Registry Values](authentication-protocol-registry-values.md).</span></span>

<span data-ttu-id="1cfdc-124">As informações obtidas pelo [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) são passadas para o protocolo de autenticação durante a chamada para [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="1cfdc-124">The information obtained by [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) is passed to the authentication protocol during the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span></span> <span data-ttu-id="1cfdc-125">As informações são apontadas pelos membros **pszIdentity** e **pUserData** da estrutura de [**\_ \_ entrada do EAP do PPP**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) .</span><span class="sxs-lookup"><span data-stu-id="1cfdc-125">The information is pointed to by the **pszIdentity** and **pUserData** members of the [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) structure.</span></span> <span data-ttu-id="1cfdc-126">Para salvar essas informações no registro no computador cliente, o protocolo de autenticação deve retornar as informações no parâmetro *pEapOutput* de [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="1cfdc-126">To save this information in the registry on the client computer, the authentication protocol should return the information in the *pEapOutput* parameter of [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span></span>

<span data-ttu-id="1cfdc-127">Após a chamada para [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), o serviço de autenticação chama [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) para liberar a memória ocupada por esses dados.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-127">After the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), the authentication service calls [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) to free the memory occupied by this data.</span></span> <span data-ttu-id="1cfdc-128">Portanto, o protocolo de autenticação deve copiar as informações em um buffer de memória privada durante a chamada para **RasEapBegin**.</span><span class="sxs-lookup"><span data-stu-id="1cfdc-128">Therefore, the authentication protocol should copy the information into a private memory buffer during the call to **RasEapBegin**.</span></span>

 

 