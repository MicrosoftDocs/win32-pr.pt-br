---
title: Redirecionador do sistema de arquivos
description: O \\ diretório windir system32 é reservado para aplicativos de 64 bits no Windows de 64 bits.
ms.assetid: b4d36fe8-8bbb-469b-8ad1-650d559a4c75
keywords:
- Programação do Windows de redirecionador de sistema de arquivos de 64 bits
- Guia de programação do Windows de 64 bits, programação do Windows de 64 bits, redirecionador do sistema de arquivos
- Programação WOW64 de 64 bits do Windows, redirecionador de sistema de arquivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 568ddde85d18f90b951051251774c3509081dfdd
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443627"
---
# <a name="file-system-redirector"></a><span data-ttu-id="95063-106">Redirecionador do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="95063-106">File System Redirector</span></span>

<span data-ttu-id="95063-107">O diretório% windir% \\ System32 é reservado para aplicativos de 64 bits em janelas de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="95063-107">The %windir%\\System32 directory is reserved for 64-bit applications on 64-bit Windows.</span></span> <span data-ttu-id="95063-108">A maioria dos nomes de arquivo DLL não foi alterada quando as versões de 64 bits das DLLs foram criadas, portanto, as versões de 32 bits das DLLs são armazenadas em um diretório diferente.</span><span class="sxs-lookup"><span data-stu-id="95063-108">Most DLL file names were not changed when 64-bit versions of the DLLs were created, so 32-bit versions of the DLLs are stored in a different directory.</span></span> <span data-ttu-id="95063-109">O WOW64 oculta essa diferença usando um *redirecionador de sistema de arquivos*.</span><span class="sxs-lookup"><span data-stu-id="95063-109">WOW64 hides this difference by using a *file system redirector*.</span></span>

<span data-ttu-id="95063-110">Na maioria dos casos, sempre que um aplicativo de 32 bits tenta acessar% windir% \\ System32,% windir% \\ LastGood \\ System32 ou% windir% \\regedit.exe, o acesso é redirecionado para um caminho específico da arquitetura.</span><span class="sxs-lookup"><span data-stu-id="95063-110">In most cases, whenever a 32-bit application attempts to access %windir%\\System32, %windir%\\lastgood\\system32, or %windir%\\regedit.exe, the access is redirected to an architecture-specific path.</span></span>

> [!Note]  
> <span data-ttu-id="95063-111">Esses caminhos são fornecidos apenas para referência.</span><span class="sxs-lookup"><span data-stu-id="95063-111">These paths are provided for reference only.</span></span> <span data-ttu-id="95063-112">Para compatibilidade, os aplicativos não devem usar esses caminhos diretamente.</span><span class="sxs-lookup"><span data-stu-id="95063-112">For compatibility, applications should not use these paths directly.</span></span> <span data-ttu-id="95063-113">Em vez disso, eles devem chamar as APIs descritas abaixo.</span><span class="sxs-lookup"><span data-stu-id="95063-113">Instead, they should call the APIs described below.</span></span>

 



| <span data-ttu-id="95063-114">Caminho Original</span><span class="sxs-lookup"><span data-stu-id="95063-114">Original Path</span></span>                | <span data-ttu-id="95063-115">Caminho Redirecionado para processos x86 de 32 bits</span><span class="sxs-lookup"><span data-stu-id="95063-115">Redirected Path for 32-bit x86 Processes</span></span> | <span data-ttu-id="95063-116">Caminho Redirecionado para processos ARM de 32 bits</span><span class="sxs-lookup"><span data-stu-id="95063-116">Redirected Path for 32-bit ARM Processes</span></span> |
|------------------------------|------------------------------------------|------------------------------------------|
| <span data-ttu-id="95063-117">% WINDIR% \\ System32</span><span class="sxs-lookup"><span data-stu-id="95063-117">%windir%\\System32</span></span>           | <span data-ttu-id="95063-118">% WINDIR% \\ SysWOW64</span><span class="sxs-lookup"><span data-stu-id="95063-118">%windir%\\SysWOW64</span></span>                       | <span data-ttu-id="95063-119">% WINDIR% \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="95063-119">%windir%\\SysArm32</span></span>                       |
| <span data-ttu-id="95063-120">% WINDIR% \\ LastGood \\ System32</span><span class="sxs-lookup"><span data-stu-id="95063-120">%windir%\\lastgood\\system32</span></span> | <span data-ttu-id="95063-121">% WINDIR% \\ LastGood \\ SysWOW64</span><span class="sxs-lookup"><span data-stu-id="95063-121">%windir%\\lastgood\\SysWOW64</span></span>             | <span data-ttu-id="95063-122">% WINDIR% \\ LastGood \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="95063-122">%windir%\\lastgood\\SysArm32</span></span>             |
| <span data-ttu-id="95063-123">% WINDIR% \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="95063-123">%windir%\\regedit.exe</span></span>        | <span data-ttu-id="95063-124">% WINDIR% \\ SysWOW64 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="95063-124">%windir%\\SysWOW64\\regedit.exe</span></span>          | <span data-ttu-id="95063-125">% WINDIR% \\ SysArm32 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="95063-125">%windir%\\ SysArm32\\regedit.exe</span></span>         |



 

<span data-ttu-id="95063-126">Se o acesso fizer com que o sistema exiba o prompt do UAC, o redirecionamento não ocorrerá.</span><span class="sxs-lookup"><span data-stu-id="95063-126">If the access causes the system to display the UAC prompt, redirection does not occur.</span></span> <span data-ttu-id="95063-127">Em vez disso, a versão de 64 bits do arquivo solicitado é iniciada.</span><span class="sxs-lookup"><span data-stu-id="95063-127">Instead, the 64-bit version of the requested file is launched.</span></span> <span data-ttu-id="95063-128">Para evitar esse problema, especifique o diretório SysWOW64 para evitar o redirecionamento e garanta o acesso à versão de 32 bits do arquivo ou execute o aplicativo de 32 bits com privilégios de administrador para que o prompt do UAC não seja exibido.</span><span class="sxs-lookup"><span data-stu-id="95063-128">To prevent this problem, either specify the SysWOW64 directory to avoid redirection and ensure access to the 32-bit version of the file, or run the 32-bit application with administrator privileges so the UAC prompt is not displayed.</span></span>

<span data-ttu-id="95063-129">\* \* Não há suporte para o Windows Server 2003 e o Windows XP: \* \* UAC.</span><span class="sxs-lookup"><span data-stu-id="95063-129">\*\*Windows Server 2003 and Windows XP:  \*\* UAC is not supported.</span></span>

<span data-ttu-id="95063-130">Determinados subdiretórios são isentos do redirecionamento.</span><span class="sxs-lookup"><span data-stu-id="95063-130">Certain subdirectories are exempt from redirection.</span></span> <span data-ttu-id="95063-131">O acesso a esses subdiretórios não é redirecionado para% WINDIR% \\ SysWOW64:</span><span class="sxs-lookup"><span data-stu-id="95063-131">Access to these subdirectories is not redirected to %windir%\\SysWOW64:</span></span> <dl> <span data-ttu-id="95063-132">% WINDIR% \\ System32 \\ Catroot</span><span class="sxs-lookup"><span data-stu-id="95063-132">%windir%\\system32\\catroot</span></span>  
<span data-ttu-id="95063-133">% WINDIR% \\ System32 \\ Catroot2</span><span class="sxs-lookup"><span data-stu-id="95063-133">%windir%\\system32\\catroot2</span></span>  
<span data-ttu-id="95063-134">% WINDIR% \\ System32 \\ DriverStore</span><span class="sxs-lookup"><span data-stu-id="95063-134">%windir%\\system32\\driverstore</span></span>  
<span data-ttu-id="95063-135">% WINDIR% \\ System32 \\ drivers \\ etc</span><span class="sxs-lookup"><span data-stu-id="95063-135">%windir%\\system32\\drivers\\etc</span></span>  
<span data-ttu-id="95063-136">% WINDIR% \\ System32 \\ LogFiles</span><span class="sxs-lookup"><span data-stu-id="95063-136">%windir%\\system32\\logfiles</span></span>  
<span data-ttu-id="95063-137">% WINDIR% \\ System32 \\ spool</span><span class="sxs-lookup"><span data-stu-id="95063-137">%windir%\\system32\\spool</span></span>  
</dl>

<span data-ttu-id="95063-138">\* \* Windows Server 2008, Windows Vista, Windows Server 2003 e Windows XP: \* \*% WINDIR% \\ System32 \\ DriverStore é redirecionado.</span><span class="sxs-lookup"><span data-stu-id="95063-138">\*\*Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  \*\*%windir%\\system32\\driverstore is redirected.</span></span>

<span data-ttu-id="95063-139">Para recuperar o nome do diretório do sistema de 32 bits, os aplicativos de 64 bits devem usar a função [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) (Windows 10, versão 1511) ou a função [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) .</span><span class="sxs-lookup"><span data-stu-id="95063-139">To retrieve the name of the 32-bit system directory, 64-bit applications should use the [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) function (Windows 10, version 1511) or the [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) function.</span></span>

<span data-ttu-id="95063-140">Os aplicativos devem usar a função [**SHGetKnownFolderPath**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) para determinar o nome do diretório% ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="95063-140">Applications should use the [**SHGetKnownFolderPath**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="95063-141">**Windows Server 2003 e Windows XP:** Os aplicativos devem usar a função [**SHGetSpecialFolderPath**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) para determinar o nome do diretório% ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="95063-141">**Windows Server 2003 and Windows XP:** Applications should use the [**SHGetSpecialFolderPath**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="95063-142">Os aplicativos podem controlar o redirecionador do sistema de arquivos do WOW64 usando as funções [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection)e [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) .</span><span class="sxs-lookup"><span data-stu-id="95063-142">Applications can control the WOW64 file system redirector using the [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection), and [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) functions.</span></span> <span data-ttu-id="95063-143">Desabilitar o redirecionamento do sistema de arquivos afeta todas as operações de arquivo executadas pelo thread de chamada, portanto, ele deve ser desabilitado somente quando necessário para uma única chamada [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) e reabilitado imediatamente após a função retornar.</span><span class="sxs-lookup"><span data-stu-id="95063-143">Disabling file system redirection affects all file operations performed by the calling thread, so it should be disabled only when necessary for a single [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) call and re-enabled again immediately after the function returns.</span></span> <span data-ttu-id="95063-144">Desabilitar o redirecionamento do sistema de arquivos por períodos mais longos pode impedir que aplicativos de 32 bits carreguem DLLs do sistema, fazendo com que os aplicativos falhem.</span><span class="sxs-lookup"><span data-stu-id="95063-144">Disabling file system redirection for longer periods can prevent 32-bit applications from loading system DLLs, causing the applications to fail.</span></span>

<span data-ttu-id="95063-145">os aplicativos de 32 bits podem acessar o diretório nativo do sistema substituindo% windir% \\ SysNative para% WINDIR% \\ System32.</span><span class="sxs-lookup"><span data-stu-id="95063-145">32-bit applications can access the native system directory by substituting %windir%\\Sysnative for %windir%\\System32.</span></span> <span data-ttu-id="95063-146">O WOW64 reconhece SysNative como um alias especial usado para indicar que o sistema de arquivos não deve redirecionar o acesso.</span><span class="sxs-lookup"><span data-stu-id="95063-146">WOW64 recognizes Sysnative as a special alias used to indicate that the file system should not redirect the access.</span></span> <span data-ttu-id="95063-147">Esse mecanismo é flexível e fácil de usar, portanto, é o mecanismo recomendado para ignorar o redirecionamento do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="95063-147">This mechanism is flexible and easy to use, therefore, it is the recommended mechanism to bypass file system redirection.</span></span> <span data-ttu-id="95063-148">Observe que os aplicativos de 64 bits não podem usar o alias SysNative, pois ele é um diretório virtual, não um real.</span><span class="sxs-lookup"><span data-stu-id="95063-148">Note that 64-bit applications cannot use the Sysnative alias as it is a virtual directory not a real one.</span></span>

<span data-ttu-id="95063-149">**Windows Server 2003 e Windows XP:** O alias SysNative foi adicionado a partir do Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="95063-149">**Windows Server 2003 and Windows XP:** The Sysnative alias was added starting with Windows Vista.</span></span>

 

 