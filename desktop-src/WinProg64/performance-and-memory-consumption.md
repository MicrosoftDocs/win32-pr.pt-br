---
title: Desempenho e consumo de memória no WOW64
description: O consumo de desempenho e de memória sob o WOW64 é determinado pelos seguintes fatores.
ms.assetid: 77759840-7b1a-4956-a038-d6374b6ec354
keywords:
- desempenho sob programação WOW64 de 64 bits do Windows
- consumo de memória sob programação WOW64 de 64 bits do Windows
- Programação WOW64 para Windows de 64 bits, desempenho
- Programação WOW64 de 64 bits do Windows, consumo de memória
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8928e7d50c8396aa2b5b34081af3e4ee2719e044
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104366572"
---
# <a name="performance-and-memory-consumption-under-wow64"></a><span data-ttu-id="73ef8-107">Desempenho e consumo de memória no WOW64</span><span class="sxs-lookup"><span data-stu-id="73ef8-107">Performance and Memory Consumption Under WOW64</span></span>

<span data-ttu-id="73ef8-108">O consumo de desempenho e de memória sob o WOW64 é determinado pelos seguintes fatores:</span><span class="sxs-lookup"><span data-stu-id="73ef8-108">Performance and memory consumption under WOW64 are determined by the following factors:</span></span>

-   <span data-ttu-id="73ef8-109">Hardware do processador.</span><span class="sxs-lookup"><span data-stu-id="73ef8-109">Processor hardware.</span></span> <span data-ttu-id="73ef8-110">A emulação de instrução é executada no chip.</span><span class="sxs-lookup"><span data-stu-id="73ef8-110">Instruction emulation is performed on the chip.</span></span> <span data-ttu-id="73ef8-111">No processador x64, as instruções x86 são executadas nativamente pelo processador.</span><span class="sxs-lookup"><span data-stu-id="73ef8-111">On the x64 processor, x86 instructions are executed natively by the processor.</span></span> <span data-ttu-id="73ef8-112">Portanto, a velocidade de execução sob WOW64 em x64 é semelhante à sua velocidade em janelas de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="73ef8-112">Therefore, execution speed under WOW64 on x64 is similar to its speed under 32-bit Windows.</span></span> <span data-ttu-id="73ef8-113">No processador Intel Itanium e em qualquer processador de ARM64, mais software está envolvido na emulação e o desempenho é afetado como resultado.</span><span class="sxs-lookup"><span data-stu-id="73ef8-113">On the Intel Itanium processor and any ARM64 processors, more software is involved in the emulation, and performance suffers as a result.</span></span>
-   <span data-ttu-id="73ef8-114">Sobrecarga de conversão de API.</span><span class="sxs-lookup"><span data-stu-id="73ef8-114">API thunk overhead.</span></span> <span data-ttu-id="73ef8-115">Essa sobrecarga é pequena em comparação com as chamadas do sistema para o kernel do NT.</span><span class="sxs-lookup"><span data-stu-id="73ef8-115">This overhead is small compared to system calls to the NT kernel.</span></span> <span data-ttu-id="73ef8-116">As funções do kernel NT devem ser chamadas com pouca frequência.</span><span class="sxs-lookup"><span data-stu-id="73ef8-116">NT kernel functions are intended to be called infrequently.</span></span>
-   <span data-ttu-id="73ef8-117">Tamanho da memória virtual.</span><span class="sxs-lookup"><span data-stu-id="73ef8-117">Virtual memory size.</span></span> <span data-ttu-id="73ef8-118">No processador Intel Itanium, o WOW64 adiciona sobrecarga significativa se duas ou mais instâncias do mesmo aplicativo de 32 bits estiverem em execução simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="73ef8-118">On the Intel Itanium processor, WOW64 adds significant overhead if two or more instances of the same 32-bit application are running concurrently.</span></span> <span data-ttu-id="73ef8-119">Isso se deve às páginas nativas de 8 KB no Intel Itanium, o que complica a emulação das páginas nativas de 4 KB na arquitetura x86 (mais páginas são marcadas como graváveis; todas as páginas graváveis são privadas para o processo).</span><span class="sxs-lookup"><span data-stu-id="73ef8-119">This is due to the native 8 KB pages on the Intel Itanium, which complicates the emulation of the native 4 KB pages on the x86 architecture (more pages are marked as writable; all writable pages are private to the process).</span></span> <span data-ttu-id="73ef8-120">Isso pode afetar negativamente a escalabilidade dos serviços de terminal em determinados processadores.</span><span class="sxs-lookup"><span data-stu-id="73ef8-120">This can adversely affect the scalability of Terminal Services on certain processors.</span></span> <span data-ttu-id="73ef8-121">Esse não é o caso do processador x64.</span><span class="sxs-lookup"><span data-stu-id="73ef8-121">This is not the case for the x64 processor.</span></span>
-   <span data-ttu-id="73ef8-122">Conjunto de trabalho.</span><span class="sxs-lookup"><span data-stu-id="73ef8-122">Working set.</span></span> <span data-ttu-id="73ef8-123">O WOW64 aumenta o tamanho do conjunto de trabalho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="73ef8-123">WOW64 increases the size of the application's working set.</span></span>

<span data-ttu-id="73ef8-124">O WOW64 permite que os aplicativos de 32 bits tirem proveito do kernel de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="73ef8-124">WOW64 enables 32-bit applications to take advantage of the 64-bit kernel.</span></span> <span data-ttu-id="73ef8-125">Portanto, os aplicativos de 32 bits podem usar um número maior de identificadores de kernel e identificadores de janela.</span><span class="sxs-lookup"><span data-stu-id="73ef8-125">Therefore, 32-bit applications can use a larger number of kernel handles and window handles.</span></span> <span data-ttu-id="73ef8-126">No entanto, os aplicativos de 32 bits podem não ser capazes de criar tantos segmentos no WOW64 quanto podem ser executados nativamente em sistemas baseados em x86, pois o WOW64 aloca uma pilha de 64 bits adicional (geralmente 512 KB) para cada thread.</span><span class="sxs-lookup"><span data-stu-id="73ef8-126">However, 32-bit applications may not be able to create as many threads under WOW64 as they can when running natively on x86-based systems because WOW64 allocates an additional 64-bit stack (usually 512 KB) for each thread.</span></span> <span data-ttu-id="73ef8-127">Além disso, alguma quantidade de espaço de endereço é reservada para o WOW64 em si e as estruturas de dados que ele usa.</span><span class="sxs-lookup"><span data-stu-id="73ef8-127">In addition, some amount of address space is reserved for WOW64 itself and the data structures it uses.</span></span> <span data-ttu-id="73ef8-128">A quantidade reservada depende do processador; mais é reservado no Intel Itanium do que nos processadores x64 ou ARM64.</span><span class="sxs-lookup"><span data-stu-id="73ef8-128">The amount reserved depends on the processor; more is reserved on the Intel Itanium than on the x64 or ARM64 processors.</span></span>

<span data-ttu-id="73ef8-129">Se o aplicativo tiver o sinalizador de [**\_ \_ \_ \_ reconhecimento de endereço grande do arquivo de imagem**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) definido no cabeçalho da imagem, cada aplicativo de 32 bits receberá 4 GB de espaço de endereço virtual no ambiente WOW64.</span><span class="sxs-lookup"><span data-stu-id="73ef8-129">If the application has the [**IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) flag set in the image header, each 32-bit application receives 4 GB of virtual address space in the WOW64 environment.</span></span> <span data-ttu-id="73ef8-130">Se o sinalizador de **\_ \_ \_ \_ reconhecimento de endereço grande do arquivo de imagem** não estiver definido, cada aplicativo de 32 bits receberá 2 GB de espaço de endereço virtual no ambiente WOW64.</span><span class="sxs-lookup"><span data-stu-id="73ef8-130">If the **IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE** flag is not set, each 32-bit application receives 2 GB of virtual address space in the WOW64 environment.</span></span>

 

 