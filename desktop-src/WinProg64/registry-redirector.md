---
title: Redirecionador de registro
description: O redirecionador de registro isola os aplicativos de 32 bits e 64 bits fornecendo exibições lógicas separadas de determinadas partes do registro no WOW64.
ms.assetid: b3989f79-0439-485a-96c1-4f2227d48653
keywords:
- Guia de programação do Windows de 64 bits-programação do Windows de 64 bits, redirecionador de registro
- Programação do Windows redirecter de 64 bits
- Programação de redirecionamento do Windows de 64 bits
- Programação WOW64 de 64 bits do Windows, redirecionador de registro
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 04c11e68f307aa014adb7cae8415f1baba155678
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104364096"
---
# <a name="registry-redirector"></a><span data-ttu-id="2039e-107">Redirecionador de registro</span><span class="sxs-lookup"><span data-stu-id="2039e-107">Registry Redirector</span></span>

<span data-ttu-id="2039e-108">O redirecionador de registro isola os aplicativos de 32 bits e 64 bits fornecendo exibições lógicas separadas de determinadas partes do registro no WOW64.</span><span class="sxs-lookup"><span data-stu-id="2039e-108">The registry redirector isolates 32-bit and 64-bit applications by providing separate logical views of certain portions of the registry on WOW64.</span></span> <span data-ttu-id="2039e-109">O redirecionador de registro intercepta as chamadas de registro de 32 bits e 64 bits para suas respectivas exibições de registro lógico e as mapeia para o local de registro físico correspondente.</span><span class="sxs-lookup"><span data-stu-id="2039e-109">The registry redirector intercepts 32-bit and 64-bit registry calls to their respective logical registry views and maps them to the corresponding physical registry location.</span></span> <span data-ttu-id="2039e-110">O processo de redirecionamento é transparente para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2039e-110">The redirection process is transparent to the application.</span></span> <span data-ttu-id="2039e-111">Portanto, um aplicativo de 32 bits pode acessar os dados do registro como se estivessem em execução em janelas de 32 bits, mesmo que os dados sejam armazenados em um local diferente em janelas de bits 64.</span><span class="sxs-lookup"><span data-stu-id="2039e-111">Therefore, a 32-bit application can access registry data as if it were running on 32-bit Windows even if the data is stored in a different location on 64-bit Windows.</span></span>

<span data-ttu-id="2039e-112">**Windows 10 no ARM:** Além da exibição lógica de 32 bits para aplicativos x86, o Windows 10 no ARM inclui uma exibição lógica separada para aplicativos ARM de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="2039e-112">**Windows 10 on ARM:** In addition to the 32-bit logical view for x86 applications, Windows 10 on ARM includes a separate logical view for 32-bit ARM applications.</span></span>

<span data-ttu-id="2039e-113">Um subconjunto de chaves em caminhos de registro redirecionados é compartilhado.</span><span class="sxs-lookup"><span data-stu-id="2039e-113">A subset of keys under redirected registry paths are shared.</span></span> <span data-ttu-id="2039e-114">chamadas de registro de 32 bits para chaves compartilhadas não são redirecionadas.</span><span class="sxs-lookup"><span data-stu-id="2039e-114">32-bit registry calls to shared keys are not redirected.</span></span> <span data-ttu-id="2039e-115">Em vez disso, uma cópia física da chave é mapeada em cada exibição lógica do registro.</span><span class="sxs-lookup"><span data-stu-id="2039e-115">Instead, one physical copy of the key is mapped into each logical view of the registry.</span></span> <span data-ttu-id="2039e-116">Para obter uma lista de chaves redirecionadas e chaves compartilhadas, consulte [chaves do registro afetadas pelo WOW64](shared-registry-keys.md).</span><span class="sxs-lookup"><span data-stu-id="2039e-116">For a list of redirected keys and shared keys, see [Registry Keys Affected by WOW64](shared-registry-keys.md).</span></span>

<span data-ttu-id="2039e-117">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Para habilitar a interoperabilidade de aplicativos por meio de COM e outros mecanismos, um subconjunto de chaves de registro redirecionadas também é *refletido*.</span><span class="sxs-lookup"><span data-stu-id="2039e-117">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** To enable application interoperability through COM and other mechanisms, a subset of redirected registry keys are also *reflected*.</span></span> <span data-ttu-id="2039e-118">O processo de reflexão do registro copia chaves e valores do registro entre duas exibições do registro para mantê-las sincronizadas.</span><span class="sxs-lookup"><span data-stu-id="2039e-118">The process of registry reflection copies registry keys and values between two registry views to keep them synchronized.</span></span> <span data-ttu-id="2039e-119">A reflexão do registro foi removida a partir do Windows 7 e do Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="2039e-119">Registry reflection was removed starting with Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="2039e-120">Para obter mais informações, consulte [reflexão do registro](registry-reflection.md).</span><span class="sxs-lookup"><span data-stu-id="2039e-120">For more information, see [Registry Reflection](registry-reflection.md).</span></span>

<span data-ttu-id="2039e-121">O cenário a seguir ilustra o uso dessas exibições lógicas:</span><span class="sxs-lookup"><span data-stu-id="2039e-121">The following scenario illustrates the use of these logical views:</span></span>

-   <span data-ttu-id="2039e-122">Um aplicativo x86 de 32 bits verifica a existência da seguinte chave do registro: **HKEY \_ local \_ Machine \\ software \\ Hello**.</span><span class="sxs-lookup"><span data-stu-id="2039e-122">A 32-bit x86 application checks for the existence of the following registry key: **HKEY\_LOCAL\_MACHINE\\Software\\Hello**.</span></span> <span data-ttu-id="2039e-123">Se a chave não existir, o aplicativo a criará com um valor padrão de "Olá, mundo de 32 bits x86"; caso contrário, ele lê e exibe o valor.</span><span class="sxs-lookup"><span data-stu-id="2039e-123">If the key does not exist, the application creates it with a default value of "Hello 32-bit x86 world"; otherwise, it reads and displays the value.</span></span>
-   <span data-ttu-id="2039e-124">O mesmo aplicativo é modificado para escrever "Hello 64-bit World" em vez de "Hello 32-bit x86 World" e recompilado como um aplicativo de 64-bit x64 ou ARM64.</span><span class="sxs-lookup"><span data-stu-id="2039e-124">The same application is modified to write "Hello 64-bit world" instead of "Hello 32-bit x86 world" and recompiled as a 64-bit x64 or ARM64 application.</span></span>
-   <span data-ttu-id="2039e-125">**Windows 10 no ARM:** O mesmo aplicativo é modificado para gravar "Hello 32-bit ARM World" e recompilado como um aplicativo ARM de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="2039e-125">**Windows 10 on ARM:** The same application is modified to write “Hello 32-bit ARM world” and recompiled as a 32-bit ARM application.</span></span>
-   <span data-ttu-id="2039e-126">Quando o aplicativo x86 de 32 bits é executado no Windows de 64 bits, ele exibe "Olá, mundo de 32 de bits x86".</span><span class="sxs-lookup"><span data-stu-id="2039e-126">When the 32-bit x86 application is run on 64-bit Windows, it displays "Hello 32-bit x86 world".</span></span> <span data-ttu-id="2039e-127">Quando o aplicativo de 64 bits é executado, ele exibe "Olá, mundo de 64 bits".</span><span class="sxs-lookup"><span data-stu-id="2039e-127">When the 64-bit application is run, it displays "Hello 64-bit world".</span></span> <span data-ttu-id="2039e-128">**Windows 10 no ARM:** Quando o aplicativo ARM de 32 bits é executado em janelas ARM64 de 64 bits, ele exibe "Olá, mundo de" Hello 32-bit ARM ".</span><span class="sxs-lookup"><span data-stu-id="2039e-128">**Windows 10 on ARM:** When the 32-bit ARM application is run on 64-bit ARM64 Windows, it displays "Hello 32-bit ARM world".</span></span> <span data-ttu-id="2039e-129">Todos os aplicativos chamam as mesmas funções de registro com o mesmo identificador predefinido e o mesmo nome de chave; a diferença é que cada aplicativo opera em sua exibição lógica do registro, e cada exibição é mapeada para um local físico separado do registro, o que mantém todas as versões da cadeia de caracteres intactas.</span><span class="sxs-lookup"><span data-stu-id="2039e-129">All applications call the same registry functions with the same predefined handle and the same key name; the difference is that each application operates on its logical view of registry, and each view is mapped to a separate physical location of the registry, which keeps all versions of the string intact.</span></span>

<span data-ttu-id="2039e-130">As chaves redirecionadas são mapeadas para locais físicos em **Wow6432Node**.</span><span class="sxs-lookup"><span data-stu-id="2039e-130">Redirected keys are mapped to physical locations under **Wow6432Node**.</span></span> <span data-ttu-id="2039e-131">Por exemplo, **HKEY \_ local \_ Machine \\ software** é redirecionado para **HKEY \_ local \_ Machine \\ software \\ Wow6432Node**.</span><span class="sxs-lookup"><span data-stu-id="2039e-131">For example, **HKEY\_LOCAL\_MACHINE\\Software** is redirected to **HKEY\_LOCAL\_MACHINE\\Software\\Wow6432Node**.</span></span> <span data-ttu-id="2039e-132">No entanto, o local físico das chaves redirecionadas deve ser considerado reservado pelo sistema.</span><span class="sxs-lookup"><span data-stu-id="2039e-132">However, the physical location of redirected keys should be considered reserved by the system.</span></span> <span data-ttu-id="2039e-133">Os aplicativos não devem acessar a localização física de uma chave diretamente, pois esse local pode ser alterado.</span><span class="sxs-lookup"><span data-stu-id="2039e-133">Applications should not access a key's physical location directly, because this location may change.</span></span> <span data-ttu-id="2039e-134">Para obter mais informações, consulte [acessando uma exibição de registro alternativa](accessing-an-alternate-registry-view.md).</span><span class="sxs-lookup"><span data-stu-id="2039e-134">For more information, see [Accessing an Alternate Registry View](accessing-an-alternate-registry-view.md).</span></span>

<span data-ttu-id="2039e-135">**Windows 10 no ARM:** Chaves ARM de 32 bits redirecionadas são mapeadas para locais físicos em WowAA32Node.</span><span class="sxs-lookup"><span data-stu-id="2039e-135">**Windows 10 on ARM:** Redirected 32-bit ARM keys are mapped to physical locations under WowAA32Node.</span></span>

<span data-ttu-id="2039e-136">Para ajudar os aplicativos de 32 bits que gravam os dados **reg \_ sz** ou **reg \_ expandem o \_ sz** que contém% ProgramFiles% ou% COMMONPROGRAMFILES% ao registro, o WOW64 intercepta essas operações de gravação e as substitui por "% ProgramFiles (x86)%" e "% CommonProgramFiles (x86)%".</span><span class="sxs-lookup"><span data-stu-id="2039e-136">To help 32-bit applications that write **REG\_SZ** or **REG\_EXPAND\_SZ** data containing %ProgramFiles% or %commonprogramfiles% to the registry, WOW64 intercepts these write operations and replaces them with "%ProgramFiles(x86)%" and "%commonprogramfiles(x86)%".</span></span> <span data-ttu-id="2039e-137">Por exemplo, se o diretório arquivos de programas estiver na unidade C, "% ProgramFiles (x86)%" se expandirá para "C: \\ arquivos de programas (x86)".</span><span class="sxs-lookup"><span data-stu-id="2039e-137">For example, if the Program Files directory is on the C drive, then "%ProgramFiles(x86)%" expands to "C:\\Program Files (x86)".</span></span> <span data-ttu-id="2039e-138">A substituição ocorrerá somente se as seguintes condições forem atendidas:</span><span class="sxs-lookup"><span data-stu-id="2039e-138">The replacement occurs only if the following conditions are met:</span></span>

-   <span data-ttu-id="2039e-139">A cadeia de caracteres deve começar com% ProgramFiles% ou% COMMONPROGRAMFILES%.</span><span class="sxs-lookup"><span data-stu-id="2039e-139">The string must begin with %ProgramFiles% or %commonprogramfiles%.</span></span> <span data-ttu-id="2039e-140">Se a cadeia de caracteres começar com um espaço ou qualquer caractere diferente de%, ela não será substituída.</span><span class="sxs-lookup"><span data-stu-id="2039e-140">If the string begins with a space or any character other than %, it is not replaced.</span></span>
-   <span data-ttu-id="2039e-141">O caso de% ProgramFiles% ou% COMMONPROGRAMFILES% deve ser exatamente como mostrado porque a comparação de cadeia de caracteres diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="2039e-141">The case of %ProgramFiles% or %commonprogramfiles% must be exactly as shown because the string comparison is case-sensitive.</span></span> <span data-ttu-id="2039e-142">Por exemplo, se a cadeia de caracteres começar com% CommonProgramFiles% em vez de% COMMONPROGRAMFILES%, ela não será substituída.</span><span class="sxs-lookup"><span data-stu-id="2039e-142">For example, if the string begins with %CommonProgramFiles% instead of %commonprogramfiles%, it is not replaced.</span></span>
-   <span data-ttu-id="2039e-143">A cadeia de caracteres não pode exceder o \_ caminho máximo \* 2 + 15 caracteres.</span><span class="sxs-lookup"><span data-stu-id="2039e-143">The string cannot exceed MAX\_PATH\*2+15 characters.</span></span> <span data-ttu-id="2039e-144">Se ele exceder esse comprimento, ele não será substituído.</span><span class="sxs-lookup"><span data-stu-id="2039e-144">If it exceeds this length, it is not replaced.</span></span>
-   <span data-ttu-id="2039e-145">A chave não pode ser aberta com a chave \_ WOW64 \_ 64KEY.</span><span class="sxs-lookup"><span data-stu-id="2039e-145">The key cannot be opened with KEY\_WOW64\_64KEY.</span></span> <span data-ttu-id="2039e-146">Esse sinalizador especifica que as operações na chave devem ser executadas na exibição do registro de 64 bits, portanto, ela não é substituída.</span><span class="sxs-lookup"><span data-stu-id="2039e-146">This flag specifies that operations on the key should be performed on the 64-bit registry view, so it is not replaced.</span></span> <span data-ttu-id="2039e-147">Para obter mais informações, consulte [acessando uma exibição de registro alternativa](accessing-an-alternate-registry-view.md).</span><span class="sxs-lookup"><span data-stu-id="2039e-147">For more information, see [Accessing an Alternate Registry View](accessing-an-alternate-registry-view.md).</span></span>

<span data-ttu-id="2039e-148">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** O \_ sinalizador chave WOW \_ 64 \_ 64KEY não afeta se uma chave é substituída.</span><span class="sxs-lookup"><span data-stu-id="2039e-148">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** The KEY\_WOW\_64\_64KEY flag does not affect whether a key is replaced.</span></span> <span data-ttu-id="2039e-149">Esse sinalizador afeta a substituição a partir do Windows 7 e do Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="2039e-149">This flag affects replacement starting with Windows 7 and Windows Server 2008 R2.</span></span>

<span data-ttu-id="2039e-150">Além disso, \_ as chaves sz do reg ou reg \_ \_ que contêm system32 são substituídas por SysWOW64.</span><span class="sxs-lookup"><span data-stu-id="2039e-150">In addition, REG\_SZ or REG\_EXPAND\_SZ keys containing system32 are replaced with syswow64.</span></span> <span data-ttu-id="2039e-151">A cadeia de caracteres deve começar com o caminho apontando para ou em% windir% \\ System32.</span><span class="sxs-lookup"><span data-stu-id="2039e-151">The string must begin with the path pointing to or under %windir%\\system32.</span></span> <span data-ttu-id="2039e-152">A comparação de cadeia de caracteres não diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="2039e-152">The string comparison is not case-sensitive.</span></span> <span data-ttu-id="2039e-153">As variáveis de ambiente são expandidas antes de corresponder ao caminho, portanto, todos os seguintes caminhos são substituídos:% WINDIR% \\ System32,% SystemRoot% \\ System32 e C: \\ Windows \\ System32.</span><span class="sxs-lookup"><span data-stu-id="2039e-153">Environment variables are expanded before matching the path, so all of the following paths are replaced: %windir%\\system32, %SystemRoot%\\system32, and C:\\windows\\system32.</span></span> <span data-ttu-id="2039e-154">Esse patch é aplicado somente às chaves que foram refletidas antes do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="2039e-154">This patch is applied only to the keys that were reflected prior to Windows 7.</span></span>

<span data-ttu-id="2039e-155">Para mais informações, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="2039e-155">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="2039e-156">Reflexão do registro</span><span class="sxs-lookup"><span data-stu-id="2039e-156">Registry Reflection</span></span>](registry-reflection.md)
-   [<span data-ttu-id="2039e-157">Chaves do Registro afetadas pelo WOW64</span><span class="sxs-lookup"><span data-stu-id="2039e-157">Registry Keys Affected by WOW64</span></span>](shared-registry-keys.md)
-   [<span data-ttu-id="2039e-158">Acessando uma exibição alternativa do registro</span><span class="sxs-lookup"><span data-stu-id="2039e-158">Accessing an Alternate Registry View</span></span>](accessing-an-alternate-registry-view.md)
-   [<span data-ttu-id="2039e-159">Exemplo de redirecionamento de registro no WOW64</span><span class="sxs-lookup"><span data-stu-id="2039e-159">Example of Registry Redirection on WOW64</span></span>](example-of-registry-reflection-and-redirection-on-wow64.md)
-   [<span data-ttu-id="2039e-160">Acesso remoto ao registro no Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="2039e-160">Remote Registry Access in 64-bit Windows</span></span>](remote-registry-access-in-64-bit-windows.md)

 

 




