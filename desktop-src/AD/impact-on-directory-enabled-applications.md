---
title: Impacto em aplicativos Directory-Enabled
description: Este tópico descreve o impacto em aplicativos habilitados para diretório quando ocorrem distorções de versão, atualizações parciais ou colisões.
ms.assetid: 0aec6fe3-7757-4472-bc18-add2327d4e1b
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 061818fc791e1c75d440d0c477a321b8c4e5edfb
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "103917121"
---
# <a name="impact-on-directory-enabled-applications"></a><span data-ttu-id="8d3f0-103">Impacto em aplicativos Directory-Enabled</span><span class="sxs-lookup"><span data-stu-id="8d3f0-103">Impact on Directory-Enabled Applications</span></span>

## <a name="version-skew"></a><span data-ttu-id="8d3f0-104">Distorção de versão</span><span class="sxs-lookup"><span data-stu-id="8d3f0-104">Version Skew</span></span>

<span data-ttu-id="8d3f0-105">A distorção de versão ocorre quando os aplicativos lêem os mesmos objetos de réplicas diferentes antes que uma alteração seja replicada.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-105">Version skew occurs when applications read the same objects from different replicas before a change has replicated.</span></span> <span data-ttu-id="8d3f0-106">Os aplicativos que lêem a réplica remota reconhecem o objeto inalterado.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-106">Applications reading the remote replica recognize the unchanged object.</span></span> <span data-ttu-id="8d3f0-107">A distorção de versão é um problema quando um determinado aplicativo ou conjunto de aplicativos usa os dados no diretório para interoperar.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-107">Version skew is an issue when a given application or set of applications use the data in the directory to interoperate.</span></span>

<span data-ttu-id="8d3f0-108">Por exemplo, um serviço RPC pode publicar seus pontos de extremidade no diretório usando APIs RPC padrão (como [**RpcNsBindingExport**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindingexporta)).</span><span class="sxs-lookup"><span data-stu-id="8d3f0-108">For example, an RPC Service can publish its endpoints in the directory using standard RPC APIs (such as [**RpcNsBindingExport**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindingexporta)).</span></span> <span data-ttu-id="8d3f0-109">Os clientes se conectam ao serviço pesquisando o ponto de extremidade desejado no diretório ( [**RpcNsBindingLookupBegin**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina), [**RpcNsBindingLookupNext**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupnext)e assim por diante) e ligando a ele.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-109">Clients connect to the service by looking up the desired endpoint in the directory ( [**RpcNsBindingLookupBegin**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina), [**RpcNsBindingLookupNext**](/windows/desktop/api/rpcnsi/nf-rpcnsi-rpcnsbindinglookupnext), and so on) and binding to it.</span></span>

<span data-ttu-id="8d3f0-110">Suponha que um serviço RPC S ₁ publique o ponto de extremidade es ₁ e, subsequentemente, se mova para um computador diferente.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-110">Assume that an RPC Service S₁ publishes endpoint Eₛ₁ and subsequently moves to a different computer.</span></span> <span data-ttu-id="8d3f0-111">O ponto de extremidade original es ₁ é alterado para E<sub>S2,</sub> refletindo o endereço do novo computador.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-111">The original endpoint Eₛ₁ is changed to E<sub>s2,</sub> reflecting the new computer's address.</span></span> <span data-ttu-id="8d3f0-112">Os clientes que lêem réplicas remotas do serviço de diretório não podem se conectar ao serviço até que o ponto de extremidade atualizado seja replicado.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-112">Clients reading remote replicas of the directory service are unable to connect to the service until the updated endpoint is replicated.</span></span> <span data-ttu-id="8d3f0-113">No entanto, mover um serviço de um computador para outro é uma ocorrência rara; Portanto, essa interrupção/atraso deve ser raramente encontrada, especialmente se a movimentação do serviço estiver bem planejada.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-113">However, moving a service from one computer to another is a rare occurrence; therefore, this interruption/delay should rarely be encountered, especially if the movement of the service is well-planned.</span></span>

## <a name="partial-updates"></a><span data-ttu-id="8d3f0-114">Atualizações parciais</span><span class="sxs-lookup"><span data-stu-id="8d3f0-114">Partial Updates</span></span>

<span data-ttu-id="8d3f0-115">Em geral, a atualização parcial ocorre quando um aplicativo está lendo um conjunto de dados enquanto outro aplicativo está gravando no mesmo conjunto de dados.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-115">In general, partial update occurs when one application is reading a set of data while another application is writing to that same set of data.</span></span> <span data-ttu-id="8d3f0-116">Essa é uma situação que pode ocorrer com qualquer aplicativo em um sistema com vários mestres.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-116">This is a situation that can occur with any application in a multi-mastered system.</span></span> <span data-ttu-id="8d3f0-117">Há várias maneiras que isso pode ocorrer.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-117">There are many ways this can occur.</span></span> <span data-ttu-id="8d3f0-118">Você pode ter mais de um aplicativo gravando no mesmo conjunto de dados ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-118">You could have more than one application writing to the same data set at once.</span></span> <span data-ttu-id="8d3f0-119">Se você olhar dessa forma, o serviço de replicação de diretório é apenas outro aplicativo que pode estar gravando no mesmo conjunto de dados que outro aplicativo pode estar lendo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-119">If you look at it this way, the directory replication service is just another application that could potentially be writing to the same data set that another application may be reading.</span></span> <span data-ttu-id="8d3f0-120">Isso pode ser um possível problema para um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-120">This could be a potential problem for an application.</span></span> <span data-ttu-id="8d3f0-121">No entanto, a janela de tempo em que uma atualização parcial pode afetar seu aplicativo é relativamente pequena.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-121">However, the window of time in which a partial update can affect your application is relatively small.</span></span> <span data-ttu-id="8d3f0-122">Isso raramente deve ser um problema para aplicativos que não dependem da sincronização de vários objetos.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-122">This should rarely if ever be an issue for applications that are not dependent on the synchronization of multiple objects.</span></span> <span data-ttu-id="8d3f0-123">Se seu aplicativo for altamente dependente da sincronização de um conjunto de objetos relacionado, você deverá considerar os efeitos de uma atualização parcial no design do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-123">If your application is highly dependent on the synchronization of a related set of objects, you should consider the effects of a partial update in your application design.</span></span>

<span data-ttu-id="8d3f0-124">Em termos de replicação de diretório, a atualização parcial ocorre quando os aplicativos lêem o mesmo conjunto de objetos de réplicas diferentes enquanto a replicação está em andamento.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-124">In terms of the directory replication, partial update occurs when applications read the same set of objects from different replicas while replication is in progress.</span></span> <span data-ttu-id="8d3f0-125">Os aplicativos na réplica remota veem algumas, mas não todas, as alterações.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-125">Applications at the remote replica see some, but not all, of the changes.</span></span>

> [!Note]  
> <span data-ttu-id="8d3f0-126">A janela na qual a atualização parcial pode afetar um aplicativo é pequena: o aplicativo deve começar a ler objetos enquanto a replicação de entrada está em andamento, depois que um ou mais dos objetos relacionados e alterados tiverem sido recebidos, mas antes de todos terem sido recebidos.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-126">The window in which partial update can affect an application is small: the application must start reading objects while inbound replication is in progress, after one or more of the related, changed objects have been received but before all have been received.</span></span> <span data-ttu-id="8d3f0-127">O tempo entre as atualizações na réplica de origem afeta diretamente o tamanho dessa janela — as atualizações que ocorrem com um fechamento próximo no tempo são replicadas junto em tempo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-127">The time between the updates at the source replica directly affects the size of this window—updates that occur close together in time are replicated close together in time.</span></span> <span data-ttu-id="8d3f0-128">A atualização parcial pode ser um problema quando um aplicativo usa um conjunto de objetos relacionado.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-128">Partial update can be an issue when an application uses a related set of objects.</span></span>

 

<span data-ttu-id="8d3f0-129">Por exemplo, um serviço de acesso remoto pode usar o diretório para armazenar dados de perfil e política.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-129">For example, a remote access service can use the directory to store policy and profile data.</span></span> <span data-ttu-id="8d3f0-130">Os dados de política são armazenados em um conjunto de objetos e o perfil em outro conjunto.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-130">The policy data is stored in one set of objects, and the profile in another set.</span></span> <span data-ttu-id="8d3f0-131">Quando um usuário se conecta ao serviço de acesso remoto, o serviço de acesso remoto lê a política para determinar se o usuário tem permissão para se conectar e se o perfil a ser aplicado à sessão do usuário.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-131">When a user connects to the remote access service, the remote access service reads the policy to determine whether the user is allowed to connect, and if so what profile to apply to the user session.</span></span> <span data-ttu-id="8d3f0-132">A atualização parcial pode afetar o serviço de acesso remoto de várias maneiras:</span><span class="sxs-lookup"><span data-stu-id="8d3f0-132">Partial update can affect the remote access service in several ways:</span></span>

-   <span data-ttu-id="8d3f0-133">Se a política for complexa e consistir em vários objetos, o serviço de acesso remoto poderá ler uma política parcialmente atualizada, resultando em uma negação incorreta ou concessão de serviço ao usuário, incapacidade de processar a política devido à inconsistência interna e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-133">If the policy is complex and consists of multiple objects, the remote access service might read a partially updated policy resulting in incorrect denial or granting of service to the user, inability to process the policy due to internal inconsistency, and so on.</span></span>
-   <span data-ttu-id="8d3f0-134">Se a política e os perfis tiverem sido atualizados, o serviço poderá processar corretamente a política, mas aplicar um perfil obsoleto, pois os objetos de política foram replicados, mas os objetos de perfil não têm.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-134">If both the policy and profiles have been updated, the service might correctly process the policy but apply a stale profile, because the policy objects have replicated but the profile objects have not.</span></span>
-   <span data-ttu-id="8d3f0-135">Se o perfil for complexo e consistir em vários objetos, o serviço poderá processar corretamente a política, mas aplicar um perfil parcialmente atualizado porque os objetos de política foram replicados, mas apenas alguns dos objetos de perfil fizeram isso.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-135">If the profile is complex and consists of multiple objects, the service might correctly process the policy but apply a partially updated profile because the policy objects have replicated, but only some of the profile objects have done so.</span></span>

## <a name="collisions"></a><span data-ttu-id="8d3f0-136">Colisões</span><span class="sxs-lookup"><span data-stu-id="8d3f0-136">Collisions</span></span>

<span data-ttu-id="8d3f0-137">As colisões ocorrem quando os mesmos atributos de duas ou mais réplicas de um determinado objeto são alterados durante o mesmo intervalo de replicação.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-137">Collisions occur when the same attributes of two or more replicas of a given object are changed during the same replication interval.</span></span> <span data-ttu-id="8d3f0-138">O processo de replicação reconcilia a colisão; devido à reconciliação, um usuário ou aplicativo pode "ver" um valor diferente daquele que ele escreveu.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-138">The replication process reconciles the collision; because of reconciliation a user or application may "see" a value other than the one they wrote.</span></span>

<span data-ttu-id="8d3f0-139">Um exemplo simples são as informações de endereço do usuário: um usuário altera um endereço para correspondência na réplica R1 e um administrador altera o mesmo endereço para correspondência na réplica R2.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-139">A simple example is user address information: A user changes a mailing address at replica R1 and an administrator changes the same mailing address at replica R2.</span></span> <span data-ttu-id="8d3f0-140">Um valor gravado é propagado até que outro valor seja selecionado sobre esse valor pelo mecanismo de reconciliação de colisão.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-140">A written value propagates until another value is selected over that value by the collision reconciliation mechanism.</span></span> <span data-ttu-id="8d3f0-141">Desde que um valor continue a "vencer" em relação a outros valores no processo de resolução de colisão, o valor continuará a ser propagado.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-141">As long as a value continues to "win" against other values in the collision resolution process, the value continues to propagate.</span></span> <span data-ttu-id="8d3f0-142">Por fim, esse valor "vencedor" será propagado para R1, R2 e todas as outras réplicas se nenhuma outra alteração for feita.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-142">Ultimately, this "winning" value will be propagated to R1,R2, and all other replicas if no other changes are made.</span></span>

<span data-ttu-id="8d3f0-143">A resolução de colisão é um problema para aplicativos que fazem suposições sobre a consistência interna de objetos ou conjuntos de objetos.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-143">Collision resolution is an issue for applications that make assumptions about the internal consistency of objects or sets of objects.</span></span> <span data-ttu-id="8d3f0-144">Por exemplo, um serviço de gerenciamento de alocação de largura de banda de rede armazena dados de largura de banda de rede para um determinado segmento de rede no diretório em um objeto O1.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-144">For example, a network bandwidth allocation management service stores network bandwidth data for a given network segment in the directory in an object O1.</span></span> <span data-ttu-id="8d3f0-145">O objeto contém a largura de banda disponível em bits por segundo e a largura de banda máxima que qualquer usuário pode reservar.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-145">The object contains the bandwidth available in bits-per-second and the maximum bandwidth any single user can reserve.</span></span> <span data-ttu-id="8d3f0-146">O serviço espera que a largura de banda reservável do usuário seja sempre menor ou igual à largura de banda disponível.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-146">The service expects that the user reservable bandwidth will always be less than or equal to the bandwidth available.</span></span>

<span data-ttu-id="8d3f0-147">Considere a seguinte sequência de eventos:</span><span class="sxs-lookup"><span data-stu-id="8d3f0-147">Consider the following sequence of events:</span></span>

-   <span data-ttu-id="8d3f0-148">O objeto no estado inicial totalmente replicado fornece a largura de banda disponível como 56 kilobits por segundo e a largura de banda reservável do usuário como 9.600 bits por segundo.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-148">The object in the initial fully replicated state gives the available bandwidth as 56 kilobits-per-second, and the user reservable bandwidth as 9,600 bits-per-second.</span></span>
-   <span data-ttu-id="8d3f0-149">Um administrador na réplica R ₁ altera os valores para 64K e 19.200, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-149">An administrator at replica R₁ changes the values to 64k and 19,200 respectively.</span></span>
-   <span data-ttu-id="8d3f0-150">Um administrador na réplica R ₂ altera os valores para 10 milhões e 1 milhão, respectivamente, antes que a atualização do R ₁ chegue.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-150">An administrator at replica R₂ changes the values to 10 million and 1 million respectively before the update from R₁ arrives.</span></span>

<span data-ttu-id="8d3f0-151">Supondo que os atributos em questão tenham números de versão iguais quando ocorrerem as atualizações, há uma pequena, mas real possibilidade de que o objeto acabe com uma largura de banda máxima de 64K e um máximo reservável de usuário de 1 milhão — se o aplicativo executar as atualizações como operações de gravação separadas.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-151">Assuming the attributes in question have equal version numbers when the updates occur, there is a small, but real, possibility that the object will end up with a maximum bandwidth of 64k and a user reservable maximum of 1 million—if the application performs the updates as separate write operations.</span></span> <span data-ttu-id="8d3f0-152">O aplicativo sempre deve atualizar ambas as propriedades em uma única operação.</span><span class="sxs-lookup"><span data-stu-id="8d3f0-152">The application should always update both properties in a single operation.</span></span>

 

 