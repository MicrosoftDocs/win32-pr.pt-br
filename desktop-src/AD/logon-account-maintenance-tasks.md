---
title: Tarefas de manutenção da conta de logon
description: Este tópico descreve os problemas que pertencem a tarefas de manutenção de conta de logon.
ms.assetid: 528be433-58ef-400b-ba9a-d114f3f94ec6
ms.tgt_platform: multiple
keywords:
- AD de tarefas de manutenção da conta de logon
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa0f11f69d9a974fd666871833029eda0e059329
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104365819"
---
# <a name="logon-account-maintenance-tasks"></a><span data-ttu-id="7d55a-104">Tarefas de manutenção da conta de logon</span><span class="sxs-lookup"><span data-stu-id="7d55a-104">Logon Account Maintenance Tasks</span></span>

<span data-ttu-id="7d55a-105">Este tópico descreve os problemas que pertencem a tarefas de manutenção de conta de logon.</span><span class="sxs-lookup"><span data-stu-id="7d55a-105">This topic describes issues that pertain to logon account maintenance tasks.</span></span>

<span data-ttu-id="7d55a-106">Há dois problemas principais que se referem a tarefas de manutenção de conta de logon:</span><span class="sxs-lookup"><span data-stu-id="7d55a-106">There are two primary issues that concern logon account maintenance tasks:</span></span>

-   <span data-ttu-id="7d55a-107">Atualizando a senha da conta para uma instância de serviço que é executada em uma conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="7d55a-107">Updating the account password for a service instance that runs under a user account.</span></span> <span data-ttu-id="7d55a-108">Para obter mais informações, consulte [alterando a senha na conta de usuário de um serviço](changing-the-password-on-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="7d55a-108">For more information, see [Changing the Password on a Service's User Account](changing-the-password-on-a-serviceampaposs-user-account.md).</span></span>
-   <span data-ttu-id="7d55a-109">Tratamento de alterações na conta de logon de uma instância de serviço.</span><span class="sxs-lookup"><span data-stu-id="7d55a-109">Handling changes to the logon account of a service instance.</span></span>

<span data-ttu-id="7d55a-110">O segundo é um caso raro, mas pode acontecer.</span><span class="sxs-lookup"><span data-stu-id="7d55a-110">The latter is a rare case, but can happen.</span></span> <span data-ttu-id="7d55a-111">O sistema fornece a ferramenta administrativa de gerenciamento do computador que permite alterar para uma conta de logon de serviço.</span><span class="sxs-lookup"><span data-stu-id="7d55a-111">The system provides the Computer Management administrative tool that enables change to a service logon account.</span></span> <span data-ttu-id="7d55a-112">Além disso, outros aplicativos podem usar a função [**ChangeServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) para especificar uma nova conta de logon para um serviço instalado.</span><span class="sxs-lookup"><span data-stu-id="7d55a-112">In addition, other applications can use the [**ChangeServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) function to specify a new logon account for an installed service.</span></span> <span data-ttu-id="7d55a-113">Por padrão, são necessários privilégios de administrador local para alterar uma conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="7d55a-113">By default, local administrator privileges are required to change a service account.</span></span> <span data-ttu-id="7d55a-114">Se isso acontecer, ele poderia afetar o serviço de duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="7d55a-114">If this did happen, it could affect your service in two ways:</span></span>

-   <span data-ttu-id="7d55a-115">Se você tiver registrado os SPNs (nomes da entidade de serviço), eles serão registrados na conta errada.</span><span class="sxs-lookup"><span data-stu-id="7d55a-115">If you have registered service principal names (SPNs), they will be registered on the wrong account.</span></span>
-   <span data-ttu-id="7d55a-116">Se você definir ACEs para conceder acesso ao serviço, elas agora concederão acesso à conta incorreta.</span><span class="sxs-lookup"><span data-stu-id="7d55a-116">If you set ACEs to grant access to the service, they would now grant access to the wrong account.</span></span>

<span data-ttu-id="7d55a-117">Uma abordagem é fazer com que o instalador de serviço armazene os SPNs registrados para cada instância de serviço no registro no computador host.</span><span class="sxs-lookup"><span data-stu-id="7d55a-117">One approach is to have the service installer store the registered SPNs for each service instance in the registry on the host computer.</span></span> <span data-ttu-id="7d55a-118">Você pode usar a mesma chave do registro em HKEY \_ local \_ Machine que você usou para armazenar a cadeia de vinculação para o SCP de serviço.</span><span class="sxs-lookup"><span data-stu-id="7d55a-118">You could use the same registry key under HKEY\_LOCAL\_MACHINE that you used to store the binding string for the service SCP.</span></span> <span data-ttu-id="7d55a-119">Quando o serviço é iniciado, ele chama a função [**QueryServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) para determinar sua conta de logon e consulta o servidor de Active Directory para determinar se os SPNs estão registrados no objeto de diretório para essa conta.</span><span class="sxs-lookup"><span data-stu-id="7d55a-119">When the service starts, it calls the [**QueryServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) function to determine its logon account and then queries the Active Directory server to determine whether the SPNs are registered on the directory object for that account.</span></span> <span data-ttu-id="7d55a-120">Se os SPNs não estiverem registrados ou estiverem registrados na conta errada, o serviço se recusará a iniciar e exibirá uma mensagem informando que um administrador de domínio deve executar o programa de configuração do serviço para atualizar as configurações de conta de logon.</span><span class="sxs-lookup"><span data-stu-id="7d55a-120">If the SPNs are not registered, or are registered on the wrong account, the service refuses to start and displays a message saying that a domain administrator must run the service's configuration program to update the logon account settings.</span></span> <span data-ttu-id="7d55a-121">Lembre-se de que essa reconfiguração deve ser concluída por um administrador porque a conta de serviço não deve ter acesso para atualizar seu próprio SPN.</span><span class="sxs-lookup"><span data-stu-id="7d55a-121">Be aware that this reconfiguration must be completed by an administrator because the service account should not have access to update its own SPN.</span></span> <span data-ttu-id="7d55a-122">Além disso, lembre-se de que os SPNs devem ser removidos da conta antiga, caso contrário, os SPNs serão inúteis para autenticação porque não são exclusivos na floresta.</span><span class="sxs-lookup"><span data-stu-id="7d55a-122">Also be aware that SPNs must be removed from the old account, otherwise the SPNs will be useless for authentication because they are not unique in the forest.</span></span>

 

 