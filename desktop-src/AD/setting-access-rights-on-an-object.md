---
title: Configurando direitos de acesso em um objeto
description: Este tópico descreve como criar uma ACE para um direito de acesso e definir essa ACE na DACL de um objeto.
ms.assetid: c0b45709-4652-46c7-8d52-44076802d109
ms.tgt_platform: multiple
keywords:
- Configurando direitos de acesso em um anúncio de objeto
- AD de objetos, configurando direitos de acesso em um objeto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2bcf54de381dab2af1dab4ea44654fb0a5682f06
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104453902"
---
# <a name="setting-access-rights-on-an-object"></a><span data-ttu-id="6c390-105">Configurando direitos de acesso em um objeto</span><span class="sxs-lookup"><span data-stu-id="6c390-105">Setting Access Rights on an Object</span></span>

<span data-ttu-id="6c390-106">Ao usar os objetos COM ADSI [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) (descritor de segurança), [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) (DACLs e SACLs) e [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) (ACE) para adicionar uma ACE a uma ACL, você está fazendo alterações na propriedade **nTSecurityDescriptor** do objeto especificado no cache de propriedades.</span><span class="sxs-lookup"><span data-stu-id="6c390-106">When using the ADSI COM objects [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) (security descriptor), [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) (DACLs and SACLs), and [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) (ACE) to add an ACE to a ACL, you are making changes to the **nTSecurityDescriptor** property of the specified object in the property cache.</span></span> <span data-ttu-id="6c390-107">Isso significa colocar métodos nos objetos que contêm a nova ACE e o método [**IADs. setinfo**](/windows/desktop/api/iads/nf-iads-iads-setinfo) deve ser chamado para gravar o descritor de segurança atualizado no diretório do cache de propriedades.</span><span class="sxs-lookup"><span data-stu-id="6c390-107">This means put methods on the objects that contain the new ACE and the [**IADs.SetInfo**](/windows/desktop/api/iads/nf-iads-iads-setinfo) method must be called in order to write the updated security descriptor to the directory from the property cache.</span></span>

<span data-ttu-id="6c390-108">Para obter mais informações e um exemplo de código que define uma ACE em um objeto em Active Directory Domain Services, consulte [código de exemplo para definir uma ACE em um objeto de diretório](example-code-for-setting-an-ace-on-a-directory-object.md).</span><span class="sxs-lookup"><span data-stu-id="6c390-108">For more information and a code example that sets an ACE on an object in Active Directory Domain Services, see [Example Code for Setting an ACE on a Directory Object](example-code-for-setting-an-ace-on-a-directory-object.md).</span></span>

<span data-ttu-id="6c390-109">Use o seguinte processo geral para criar uma ACE para um direito de acesso e definir essa ACE na DACL de um objeto.</span><span class="sxs-lookup"><span data-stu-id="6c390-109">Use the following general process to create an ACE for an access right and setting that ACE on the DACL of an object.</span></span>

1.  <span data-ttu-id="6c390-110">Obtenha um ponteiro de interface [**IADs**](/windows/desktop/api/iads/nn-iads-iads) para o objeto.</span><span class="sxs-lookup"><span data-stu-id="6c390-110">Get an [**IADs**](/windows/desktop/api/iads/nn-iads-iads) interface pointer to the object.</span></span>
2.  <span data-ttu-id="6c390-111">Use o método [**IADs. Get**](/windows/desktop/api/iads/nf-iads-iads-get) para obter o descritor de segurança do objeto.</span><span class="sxs-lookup"><span data-stu-id="6c390-111">Use the [**IADs.Get**](/windows/desktop/api/iads/nf-iads-iads-get) method to get the security descriptor of the object.</span></span> <span data-ttu-id="6c390-112">O nome da propriedade que contém o descritor de segurança é **nTSecurityDescriptor**.</span><span class="sxs-lookup"><span data-stu-id="6c390-112">The name of the property containing the security descriptor is **nTSecurityDescriptor**.</span></span> <span data-ttu-id="6c390-113">A propriedade será retornada como uma [**variante**](/windows/win32/api/oaidl/ns-oaidl-variant) que contém um ponteiro [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) (o membro **VT** é **\_ despacho VT**).</span><span class="sxs-lookup"><span data-stu-id="6c390-113">The property will be returned as a [**VARIANT**](/windows/win32/api/oaidl/ns-oaidl-variant) containing an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer (the **vt** member is **VT\_DISPATCH**).</span></span> <span data-ttu-id="6c390-114">Chame **QueryInterface** nesse ponteiro **IDispatch** para obter uma interface [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) para usar os métodos nessa interface para acessar a ACL do descritor de segurança.</span><span class="sxs-lookup"><span data-stu-id="6c390-114">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) interface to use the methods on that interface to access the security descriptor's ACL.</span></span>
3.  <span data-ttu-id="6c390-115">Use a propriedade [**IADsSecurityDescriptor. DiscretionaryAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) para obter a DACL.</span><span class="sxs-lookup"><span data-stu-id="6c390-115">Use the [**IADsSecurityDescriptor.DiscretionaryAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) property to get the DACL.</span></span> <span data-ttu-id="6c390-116">O método retorna um ponteiro [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) .</span><span class="sxs-lookup"><span data-stu-id="6c390-116">The method returns an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer.</span></span> <span data-ttu-id="6c390-117">Chame **QueryInterface** nesse ponteiro **IDispatch** para obter uma interface [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) para usar os métodos nessa interface para acessar as ACEs individuais na ACL.</span><span class="sxs-lookup"><span data-stu-id="6c390-117">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) interface to use the methods on that interface to access the individual ACEs in the ACL.</span></span>
4.  <span data-ttu-id="6c390-118">Use [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) para criar o objeto com ADSI para a nova Ace e obter um ponteiro de interface [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) para esse objeto.</span><span class="sxs-lookup"><span data-stu-id="6c390-118">Use [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) to create the ADSI COM object for the new ACE and get an [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) interface pointer to that object.</span></span> <span data-ttu-id="6c390-119">Lembre-se de que a ID de classe é CLSID \_ AccessControlEntry.</span><span class="sxs-lookup"><span data-stu-id="6c390-119">Be aware that the class ID is CLSID\_AccessControlEntry.</span></span>
5.  <span data-ttu-id="6c390-120">Defina as propriedades da ACE usando os métodos [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) :</span><span class="sxs-lookup"><span data-stu-id="6c390-120">Set the properties of the ACE using the [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) methods:</span></span>

    1.  <span data-ttu-id="6c390-121">Use [**IADsAccessControlEntry::p UT \_ Trustee**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para definir o Trustee ao qual essa Ace se aplica.</span><span class="sxs-lookup"><span data-stu-id="6c390-121">Use [**IADsAccessControlEntry::put\_Trustee**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) to set the trustee to whom this ACE applies.</span></span> <span data-ttu-id="6c390-122">O objeto de confiança é um usuário, grupo ou outra entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="6c390-122">The trustee is a user, group, or other security principal.</span></span> <span data-ttu-id="6c390-123">Seu aplicativo deve usar o valor da propriedade apropriada do objeto de usuário ou grupo de objetos de confiança aos quais você deseja aplicar a ACE.</span><span class="sxs-lookup"><span data-stu-id="6c390-123">Your application should use the value from the appropriate property from the user or group object of the trustee to which you want to apply the ACE.</span></span> <span data-ttu-id="6c390-124">O Trustee é especificado como um **BSTR** e pode assumir os seguintes formatos:</span><span class="sxs-lookup"><span data-stu-id="6c390-124">The trustee is specified as a **BSTR** and can take the following forms:</span></span>
        -   <span data-ttu-id="6c390-125">Conta de domínio (o nome de logon usado em uma versão anterior do Windows NT) no formato " <domain> \\ <user account> ", em que " &lt; domínio &gt; " é o nome do domínio do Windows NT que contém o usuário e " &lt; conta de usuário &gt; " é a propriedade **sAMAccountName** do usuário especificado.</span><span class="sxs-lookup"><span data-stu-id="6c390-125">Domain account (the logon name used in a previous version of Windows NT) of the form "<domain>\\<user account>" where "&lt;domain&gt;" is the name of the Windows NT domain that contains the user and "&lt;user account&gt;" is the **sAMAccountName** property of the specified user.</span></span> <span data-ttu-id="6c390-126">Por exemplo: "fabrikam \\ jeffsmith".</span><span class="sxs-lookup"><span data-stu-id="6c390-126">For example: "fabrikam\\jeffsmith".</span></span>
        -   <span data-ttu-id="6c390-127">Entidade de segurança bem conhecida que representa identidades especiais definidas pelo sistema de segurança do Windows NT, como todos, sistema local, principal usuário autenticado, proprietário criador e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="6c390-127">Well-known security principal that represents special identities defined by the Windows NT security system, such as everyone, local system, principal self, authenticated user, creator owner, and so on.</span></span> <span data-ttu-id="6c390-128">Os objetos que representam as entidades de segurança conhecidas são armazenados no contêiner de entidades de segurança bem conhecidas sob o contêiner de configuração.</span><span class="sxs-lookup"><span data-stu-id="6c390-128">The objects representing the well-known security principals are stored in the Well Known Security Principals container beneath the Configuration container.</span></span> <span data-ttu-id="6c390-129">Por exemplo, logon anônimo.</span><span class="sxs-lookup"><span data-stu-id="6c390-129">For example, anonymous logon.</span></span>
        -   <span data-ttu-id="6c390-130">Grupo interno que representa os grupos de usuários internos definidos pelo sistema de segurança do Windows NT.</span><span class="sxs-lookup"><span data-stu-id="6c390-130">Built-in group that represent the built-in user groups defined by the Windows NT security system.</span></span> <span data-ttu-id="6c390-131">Ele tem o formato "BUILTIN \\ <group name> " onde " &lt; nome &gt; do grupo" é o nome do grupo de usuários interno.</span><span class="sxs-lookup"><span data-stu-id="6c390-131">It has the form "BUILTIN\\<group name>" where "&lt;group name&gt;" is the name of the built-in user group.</span></span> <span data-ttu-id="6c390-132">Os objetos que representam os grupos internos são armazenados no contêiner interno abaixo do contêiner de domínio.</span><span class="sxs-lookup"><span data-stu-id="6c390-132">The objects representing the built-in groups are stored in the Builtin container beneath the domain container.</span></span> <span data-ttu-id="6c390-133">Por exemplo, " \\ Administradores internos".</span><span class="sxs-lookup"><span data-stu-id="6c390-133">For example, "BUILTIN\\Administrators".</span></span>
        -   <span data-ttu-id="6c390-134">SID (formato de cadeia de caracteres) do usuário especificado, que é a propriedade **ObjectID** do usuário especificado.</span><span class="sxs-lookup"><span data-stu-id="6c390-134">SID (string format) of the specified user, which is the **objectSID** property of the specified user.</span></span> <span data-ttu-id="6c390-135">Você pode converter para formulário de cadeia de caracteres usando a função [**ConvertSidToStringSid**](/windows/desktop/api/sddl/nf-sddl-convertsidtostringsida) na API de segurança do Win32.</span><span class="sxs-lookup"><span data-stu-id="6c390-135">You can convert to string form using the [**ConvertSidToStringSid**](/windows/desktop/api/sddl/nf-sddl-convertsidtostringsida) function in the Win32 Security API.</span></span> <span data-ttu-id="6c390-136">Por exemplo: "S-1-5-32-548".</span><span class="sxs-lookup"><span data-stu-id="6c390-136">For example: "S-1-5-32-548".</span></span>
    2.  <span data-ttu-id="6c390-137">Use a propriedade [**IADsAccessControlEntry. AccessMask**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para definir a máscara que especifica o direito de acesso.</span><span class="sxs-lookup"><span data-stu-id="6c390-137">Use the [**IADsAccessControlEntry.AccessMask**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property to set the mask that specifies the access right.</span></span> <span data-ttu-id="6c390-138">A enumeração de [**\_ \_ enumeração de direitos de ADS**](/windows/win32/api/iads/ne-iads-ads_rights_enum) especifica os direitos de acesso que podem ser definidos em um objeto de diretório.</span><span class="sxs-lookup"><span data-stu-id="6c390-138">The [**ADS\_RIGHTS\_ENUM**](/windows/win32/api/iads/ne-iads-ads_rights_enum) enumeration specifies the access rights you can set on a directory object.</span></span>
    3.  <span data-ttu-id="6c390-139">Use a propriedade [**IADsAccessControlEntry. AceType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para especificar se deseja permitir ou negar os direitos de acesso definidos por **AccessMask**.</span><span class="sxs-lookup"><span data-stu-id="6c390-139">Use the [**IADsAccessControlEntry.AceType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property to specify whether to allow or deny the access rights set by **AccessMask**.</span></span> <span data-ttu-id="6c390-140">Para direitos padrão, pode ser **ADS \_ ACETYPE \_ acesso \_ permitido** ou **anúncios \_ ACETYPE \_ acesso \_ negado**.</span><span class="sxs-lookup"><span data-stu-id="6c390-140">For standard rights, this can be **ADS\_ACETYPE\_ACCESS\_ALLOWED** or **ADS\_ACETYPE\_ACCESS\_DENIED**.</span></span> <span data-ttu-id="6c390-141">Para direitos específicos do objeto (direitos que se aplicam a uma parte específica de um objeto ou a um tipo específico de objeto), use o **\_ \_ \_ \_ objeto permitido pelo ADS ACETYPE Access** ou o **\_ \_ \_ \_ objeto acesso negado do ADS ACETYPE**.</span><span class="sxs-lookup"><span data-stu-id="6c390-141">For object-specific rights (rights that apply to a specific part of an object or to a specific type of object), use **ADS\_ACETYPE\_ACCESS\_ALLOWED\_OBJECT** or **ADS\_ACETYPE\_ACCESS\_DENIED\_OBJECT**.</span></span> <span data-ttu-id="6c390-142">A enumeração de [**\_ \_ Enumeração ADS ACETYPE**](/windows/win32/api/iads/ne-iads-ads_acetype_enum) especifica os tipos de acesso que você pode definir em uma ACE.</span><span class="sxs-lookup"><span data-stu-id="6c390-142">The [**ADS\_ACETYPE\_ENUM**](/windows/win32/api/iads/ne-iads-ads_acetype_enum) enumeration specifies the access types you can set on an ACE.</span></span>
    4.  <span data-ttu-id="6c390-143">Use a propriedade [**IADsAccessControlEntry. AceFlags**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para especificar se outros contêineres ou objetos abaixo do objeto especificado podem herdar a Ace.</span><span class="sxs-lookup"><span data-stu-id="6c390-143">Use the [**IADsAccessControlEntry.AceFlags**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property to specify whether other containers or objects beneath the specified object can inherit the ACE.</span></span> <span data-ttu-id="6c390-144">A enumeração de [**\_ \_ Enumeração ADS ACEFLAG**](/windows/win32/api/iads/ne-iads-ads_aceflag_enum) especifica os sinalizadores de herança que podem ser definidos em uma ACE.</span><span class="sxs-lookup"><span data-stu-id="6c390-144">The [**ADS\_ACEFLAG\_ENUM**](/windows/win32/api/iads/ne-iads-ads_aceflag_enum) enumeration specifies the inheritance flags you can set on an ACE.</span></span>
    5.  <span data-ttu-id="6c390-145">Use a propriedade [**IADsAccessControlEntry. Flags**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para especificar se o direito se aplica a uma parte específica do objeto, um tipo de objeto herdado ou ambos.</span><span class="sxs-lookup"><span data-stu-id="6c390-145">Use the [**IADsAccessControlEntry.Flags**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property to specify whether the right applies to a specific part of the object, an inherited object type, or both.</span></span>
    6.  <span data-ttu-id="6c390-146">Se **sinalizadores** estiverem definidos para **o \_ tipo de objeto sinalizador ADS \_ \_ \_ presente**, defina a propriedade [**IADsAccessControlEntry. ObjectType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) o especificar uma cadeia de caracteres que contém o GUID da classe de objeto (para **anúncios, direito de \_ \_ criação de DS \_ \_** ou **AD de \_ \_ \_ exclusão \_ filho**), propriedade, conjunto de propriedades, gravação validada ou direito estendido ao qual a Ace se aplica.</span><span class="sxs-lookup"><span data-stu-id="6c390-146">If **Flags** is set to **ADS\_FLAG\_OBJECT\_TYPE\_PRESENT**, set the [**IADsAccessControlEntry.ObjectType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property o specify a string containing the GUID of the object class (for **ADS\_RIGHT\_DS\_CREATE\_CHILD** or **ADS\_RIGHT\_DS\_DELETE\_CHILD**), property, property set, validated write, or extended right that the ACE applies to.</span></span> <span data-ttu-id="6c390-147">O GUID deve ser especificado como uma cadeia de caracteres do formulário produzido pela função [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) na biblioteca com.</span><span class="sxs-lookup"><span data-stu-id="6c390-147">The GUID must be specified as a string of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function in the COM library.</span></span>
    7.  <span data-ttu-id="6c390-148">Se **flags** estiver definido como **ADS \_ sinalizar \_ tipo de objeto herdado \_ \_ \_ presente**, defina a propriedade [**IADsAccessControlEntry. InheritedObjectType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) para especificar uma cadeia de caracteres que contenha o GUID da classe de objeto herdada à qual a Ace se aplica.</span><span class="sxs-lookup"><span data-stu-id="6c390-148">If **Flags** is set to **ADS\_FLAG\_INHERITED\_OBJECT\_TYPE\_PRESENT**, set the [**IADsAccessControlEntry.InheritedObjectType**](/windows/desktop/ADSI/iadsaccesscontrolentry-property-methods) property to specify a string that contains the GUID of the inherited object class that the ACE applies to.</span></span> <span data-ttu-id="6c390-149">O GUID deve ser especificado como uma cadeia de caracteres do formulário produzido pela função [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) na biblioteca com.</span><span class="sxs-lookup"><span data-stu-id="6c390-149">The GUID must be specified as a string of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function in the COM library.</span></span>

6.  <span data-ttu-id="6c390-150">Use o método **QueryInterface** no objeto [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) para obter um ponteiro [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) .</span><span class="sxs-lookup"><span data-stu-id="6c390-150">Use the **QueryInterface** method on the [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) object to get an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer.</span></span> <span data-ttu-id="6c390-151">O método [**IADsAccessControlList. AddAce**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-addace) requer um ponteiro de interface **IDISPATCH** para a Ace.</span><span class="sxs-lookup"><span data-stu-id="6c390-151">The [**IADsAccessControlList.AddAce**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-addace) method requires an **IDispatch** interface pointer to the ACE.</span></span>
7.  <span data-ttu-id="6c390-152">Use [**IADsAccessControlList. AddAce**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-addace) para adicionar a nova Ace à DACL.</span><span class="sxs-lookup"><span data-stu-id="6c390-152">Use [**IADsAccessControlList.AddAce**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-addace) to add the new ACE to the DACL.</span></span> <span data-ttu-id="6c390-153">Lembre-se de que a ordem das ACEs dentro da ACL pode afetar a avaliação do acesso ao objeto.</span><span class="sxs-lookup"><span data-stu-id="6c390-153">Be aware that the order of the ACEs within the ACL can affect the evaluation of access to the object.</span></span> <span data-ttu-id="6c390-154">O acesso correto ao objeto pode exigir que você crie uma nova ACL, adicione as ACEs da ACL existente na ordem correta à nova ACL e, em seguida, substitua a ACL existente no descritor de segurança pela nova ACL.</span><span class="sxs-lookup"><span data-stu-id="6c390-154">The correct access to the object may require you to create an new ACL, add the ACEs from the existing ACL in the correct order to the new ACL, and then replace the existing ACL in the security descriptor with the new ACL.</span></span> <span data-ttu-id="6c390-155">Para obter mais informações, consulte [ordem das ACEs em uma DACL](/windows/desktop/SecAuthZ/order-of-aces-in-a-dacl).</span><span class="sxs-lookup"><span data-stu-id="6c390-155">For more information, see [Order of ACEs in a DACL](/windows/desktop/SecAuthZ/order-of-aces-in-a-dacl).</span></span>
8.  <span data-ttu-id="6c390-156">Use a propriedade [**IADsSecurityDescriptor. DiscretionaryAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) para gravar a DACL que contém a nova Ace para o descritor de segurança.</span><span class="sxs-lookup"><span data-stu-id="6c390-156">Use the [**IADsSecurityDescriptor.DiscretionaryAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) property to write the DACL containing the new ACE to the security descriptor.</span></span> <span data-ttu-id="6c390-157">Para obter mais informações sobre DACLs, consulte [DACLs nulas e DACLs vazias](null-dacls-and-empty-dacls.md).</span><span class="sxs-lookup"><span data-stu-id="6c390-157">For more information about DACLs, see [Null DACLs and Empty DACLs](null-dacls-and-empty-dacls.md).</span></span>
9.  <span data-ttu-id="6c390-158">Use o método [**IADs. put**](/windows/desktop/api/iads/nf-iads-iads-put) para gravar o descritor de segurança na propriedade **nTSecurityDescriptor** do objeto no cache de propriedades.</span><span class="sxs-lookup"><span data-stu-id="6c390-158">Use the [**IADs.Put**](/windows/desktop/api/iads/nf-iads-iads-put) method to write the security descriptor to the object's **nTSecurityDescriptor** property to the property cache.</span></span>
10. <span data-ttu-id="6c390-159">Use o método [**IADs. setinfo**](/windows/desktop/api/iads/nf-iads-iads-setinfo) para atualizar a propriedade no objeto no diretório.</span><span class="sxs-lookup"><span data-stu-id="6c390-159">Use the [**IADs.SetInfo**](/windows/desktop/api/iads/nf-iads-iads-setinfo) method to update the property on the object in the directory.</span></span>

 

 