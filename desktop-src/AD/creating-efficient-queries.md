---
title: Criando consultas eficientes
description: A tabela a seguir identifica conceitos importantes a serem considerados ao criar uma consulta eficiente.
ms.assetid: 1eb92d74-0a17-43f9-b5bf-eed731a52551
ms.tgt_platform: multiple
keywords:
- Exemplos de Active Directory Active Directory, criando consultas eficientes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8902fd3d512b940890ebdfd4c2640786c88c82a
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "103640419"
---
# <a name="creating-efficient-queries"></a><span data-ttu-id="5b514-104">Criando consultas eficientes</span><span class="sxs-lookup"><span data-stu-id="5b514-104">Creating Efficient Queries</span></span>

<span data-ttu-id="5b514-105">A tabela a seguir identifica conceitos importantes a serem considerados ao criar uma consulta eficiente.</span><span class="sxs-lookup"><span data-stu-id="5b514-105">The following table identifies important concepts to consider when creating an efficient query.</span></span>



| <span data-ttu-id="5b514-106">Área</span><span class="sxs-lookup"><span data-stu-id="5b514-106">Area</span></span>                  | <span data-ttu-id="5b514-107">Descrição</span><span class="sxs-lookup"><span data-stu-id="5b514-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5b514-108">Indexação</span><span class="sxs-lookup"><span data-stu-id="5b514-108">Indexing</span></span>              | <span data-ttu-id="5b514-109">Verifique se o filtro de consulta contém pelo menos um atributo indexado.</span><span class="sxs-lookup"><span data-stu-id="5b514-109">Ensure that the query filter contains at least one indexed attribute.</span></span><br/> <span data-ttu-id="5b514-110">Para obter mais informações, consulte [atributos indexados](indexed-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-110">For more information, see [Indexed Attributes](indexed-attributes.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="5b514-111">Classe vs. categoria</span><span class="sxs-lookup"><span data-stu-id="5b514-111">Class vs. Category</span></span>    | <span data-ttu-id="5b514-112">A instrução "objectClass = XYZ" refere-se a objetos de diretório nos quais "XYZ" representa qualquer classe na hierarquia de classes de objeto, enquanto "objectCategory = XYZ", refere-se a esses objetos de diretório nos quais "XYZ" identifica uma classe específica na hierarquia de classes de objeto.</span><span class="sxs-lookup"><span data-stu-id="5b514-112">The statement "objectClass=xyz" refers to directory objects in which "xyz" represents any class in the object class hierarchy, whereas "objectCategory=xyz", refers to those directory objects in which "xyz" identifies a specific class in the object class hierarchy.</span></span> <span data-ttu-id="5b514-113">A propriedade [**objectClass**](/windows/desktop/ADSchema/a-objectclass) pode receber vários valores, enquanto [**objectCategory**](/windows/desktop/ADSchema/a-objectcategory) usa um único valor e é, portanto, mais adequado para a correspondência de tipos de objetos em uma pesquisa de diretório.</span><span class="sxs-lookup"><span data-stu-id="5b514-113">The [**objectClass**](/windows/desktop/ADSchema/a-objectclass) property can take multiple values, whereas [**objectCategory**](/windows/desktop/ADSchema/a-objectcategory) takes a single value and is, thus, better suited for type matching of objects in a directory search.</span></span><br/>                                                                                                                                                                                          |
| <span data-ttu-id="5b514-114">Pesquisa de texto</span><span class="sxs-lookup"><span data-stu-id="5b514-114">Text searching</span></span>        | <span data-ttu-id="5b514-115">Evite Pesquisar texto no meio e no final de uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5b514-115">Avoid searching for text in the middle and on the end of a string.</span></span><br/> <span data-ttu-id="5b514-116">Por exemplo, "CN = \* Hill \* " ou "CN = \* Larouse".</span><span class="sxs-lookup"><span data-stu-id="5b514-116">For example, "cn=\*hille\*" or "cn=\*larouse".</span></span><br/> <span data-ttu-id="5b514-117">O uso de critérios de correspondência mais específicos tende a aumentar o desempenho da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="5b514-117">Using more specific matching criteria tends to increase search performance.</span></span> <span data-ttu-id="5b514-118">Isso ocorre porque Active Directory Domain Services avaliará todos os predicados, identificará os índices e, em seguida, escolherá um índice com maior probabilidade de produzir o menor conjunto de valores retornados.</span><span class="sxs-lookup"><span data-stu-id="5b514-118">This is because Active Directory Domain Services will evaluate all predicates, identifies the indices, and then chooses one index most likely to yield the smallest set of returned values.</span></span> <span data-ttu-id="5b514-119">Essa técnica não funciona bem com pesquisas de cadeia de caracteres intermediárias e de extremidade.</span><span class="sxs-lookup"><span data-stu-id="5b514-119">This technique does not work well with mid- and end-string searches.</span></span> <span data-ttu-id="5b514-120">Se você não tiver outra opção além de usar essas pesquisas, poderá definir um índice de tupla para o atributo.</span><span class="sxs-lookup"><span data-stu-id="5b514-120">If you have no other option other than using these searches, you can define a tuple index for the attribute.</span></span><br/> <span data-ttu-id="5b514-121">Para obter mais detalhes sobre os índices de tupla, consulte [como funciona a indexação de tupla](how-tuple-indexing-works.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-121">For more details about tuple indexes see [How Tuple Indexing Works](how-tuple-indexing-works.md).</span></span><br/> |
| <span data-ttu-id="5b514-122">Pesquisa de subárvore</span><span class="sxs-lookup"><span data-stu-id="5b514-122">Subtree searching</span></span>     | <span data-ttu-id="5b514-123">Use o catálogo global se você estiver considerando pesquisas de subárvores.</span><span class="sxs-lookup"><span data-stu-id="5b514-123">Use the global catalog if you are considering subtree searches.</span></span> <span data-ttu-id="5b514-124">A caça de referências requer recursos extensivos.</span><span class="sxs-lookup"><span data-stu-id="5b514-124">Chasing referrals requires extensive resources.</span></span><br/> <span data-ttu-id="5b514-125">Para obter mais informações, consulte [especificando outras opções de pesquisa](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-125">For more information, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="5b514-126">Uso de paginação</span><span class="sxs-lookup"><span data-stu-id="5b514-126">Use of paging</span></span>         | <span data-ttu-id="5b514-127">Suponha que uma pesquisa de subárvore retornará um grande conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="5b514-127">Assume that a subtree search will return a large result set.</span></span> <span data-ttu-id="5b514-128">Use a paginação ao executar pesquisas de subárvore.</span><span class="sxs-lookup"><span data-stu-id="5b514-128">Use paging when performing subtree searches.</span></span> <span data-ttu-id="5b514-129">O servidor transmitirá um conjunto de resultados grande em partes que reduzem os recursos de memória do lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="5b514-129">The server will stream a large result set in chunks reducing the server side memory resources.</span></span> <span data-ttu-id="5b514-130">Isso minimiza o uso da rede e reduz a necessidade de enviar grandes partes de dados em uma rede.</span><span class="sxs-lookup"><span data-stu-id="5b514-130">This minimizes network usage and reduces the need for sending large chunks of data over a network.</span></span><br/> <span data-ttu-id="5b514-131">Para obter mais informações, consulte [especificando outras opções de pesquisa](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-131">For more information, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span><br/>                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="5b514-132">Combinar pesquisas</span><span class="sxs-lookup"><span data-stu-id="5b514-132">Combine searches</span></span>      | <span data-ttu-id="5b514-133">Use vários atributos para uma pesquisa.</span><span class="sxs-lookup"><span data-stu-id="5b514-133">Use multiple attributes for a search.</span></span> <span data-ttu-id="5b514-134">Uma pesquisa de um objeto que lê dois atributos é mais eficiente do que duas pesquisas do mesmo objeto, cada uma retornando um atributo.</span><span class="sxs-lookup"><span data-stu-id="5b514-134">One search of an object that reads two attributes is more efficient than two searches of the same object, each returning one attribute.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="5b514-135">Uso eficiente da Associação</span><span class="sxs-lookup"><span data-stu-id="5b514-135">Efficient use of bind</span></span> | <span data-ttu-id="5b514-136">Associe a um objeto uma vez e mantenha o identificador de ligação para o restante da sessão.</span><span class="sxs-lookup"><span data-stu-id="5b514-136">Bind to an object one time and hold the binding handle for the rest of the session.</span></span> <span data-ttu-id="5b514-137">Não associe e desassocie para cada chamada.</span><span class="sxs-lookup"><span data-stu-id="5b514-137">Do not bind and unbind for each call.</span></span> <span data-ttu-id="5b514-138">Se você usar ADO ou OLE DB, não crie muitos objetos de conexão.</span><span class="sxs-lookup"><span data-stu-id="5b514-138">If you use ADO or OLE DB, do not create many connection objects.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5b514-139">Cache RoodDSE</span><span class="sxs-lookup"><span data-stu-id="5b514-139">RoodDSE caching</span></span>       | <span data-ttu-id="5b514-140">Leia o rootDSE uma vez e lembre-se do seu conteúdo para o restante da sessão.</span><span class="sxs-lookup"><span data-stu-id="5b514-140">Read the rootDSE one time and remember its contents for the rest of your session.</span></span><br/> <span data-ttu-id="5b514-141">Para obter mais informações, consulte [associação sem servidor e RootDSE](serverless-binding-and-rootdse.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-141">For more information, see [Serverless Binding and RootDSE](serverless-binding-and-rootdse.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="5b514-142">Persistência de referência</span><span class="sxs-lookup"><span data-stu-id="5b514-142">Reference persistance</span></span> | <span data-ttu-id="5b514-143">Persista referências a objetos como GUIDs, não nomes diferenciados, para serem renomeadas e excluídas com segurança.</span><span class="sxs-lookup"><span data-stu-id="5b514-143">Persist references to objects as GUIDs, not distinguished names, in order to be rename and delete safe.</span></span><br/> <span data-ttu-id="5b514-144">Para obter mais informações, consulte [usando objectGUID para associar a um objeto](using-objectguid-to-bind-to-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="5b514-144">For more information, see [Using objectGUID to Bind to an Object](using-objectguid-to-bind-to-an-object.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |



 

 

