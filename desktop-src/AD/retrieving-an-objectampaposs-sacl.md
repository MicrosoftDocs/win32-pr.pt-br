---
title: Recuperando a SACL de um objeto
description: O descritor de segurança de um objeto no Active Directory Domain Services pode conter uma SACL (lista de controle de acesso) do sistema.
ms.assetid: b1da91a2-d9b0-48a3-9de5-1e588209032d
ms.tgt_platform: multiple
keywords:
- AD SACL
- AD SACL, recuperando a SACL de um objeto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 537846f2080aecdab8e22f5fce5bdfa36298fb74
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104293885"
---
# <a name="retrieving-an-objects-sacl"></a><span data-ttu-id="aea57-105">Recuperando a SACL de um objeto</span><span class="sxs-lookup"><span data-stu-id="aea57-105">Retrieving an Object's SACL</span></span>

<span data-ttu-id="aea57-106">O descritor de segurança de um objeto no Active Directory Domain Services pode conter uma SACL (lista de controle de acesso) do sistema.</span><span class="sxs-lookup"><span data-stu-id="aea57-106">The security descriptor of an object in Active Directory Domain Services may contain a system access-control list (SACL).</span></span> <span data-ttu-id="aea57-107">Uma SACL contém ACEs (entradas de controle de acesso) que especificam os tipos de tentativas de acesso que geram registros de auditoria no log de eventos de segurança de um controlador de domínio.</span><span class="sxs-lookup"><span data-stu-id="aea57-107">A SACL contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log of a domain controller.</span></span> <span data-ttu-id="aea57-108">Lembre-se de que uma SACL gera entradas de log somente no controlador de domínio em que ocorreu a tentativa de acesso, não em cada DC que contém uma réplica do objeto.</span><span class="sxs-lookup"><span data-stu-id="aea57-108">Be aware that a SACL generates log entries only on the domain controller where the access attempt occurred, not on every DC that contains a replica of the object.</span></span>

<span data-ttu-id="aea57-109">Para definir ou obter a SACL de um descritor de segurança de objeto, o privilégio **\_ \_ nome de segurança se** deve ser habilitado no token de acesso do thread solicitante.</span><span class="sxs-lookup"><span data-stu-id="aea57-109">To set or get the SACL from an object security descriptor, the **SE\_SECURITY\_NAME** privilege must be enabled in the access token of the requesting thread.</span></span> <span data-ttu-id="aea57-110">O grupo Administradores tem esse privilégio por padrão e pode ser atribuído a outros usuários ou grupos.</span><span class="sxs-lookup"><span data-stu-id="aea57-110">The administrators group has this privilege by default, and it can be assigned to other users or groups.</span></span> <span data-ttu-id="aea57-111">Para obter mais informações, consulte [direitos de acesso à SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="aea57-111">For more information, see [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="aea57-112">Para obter e definir a SACL de um objeto de diretório, use a interface [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) .</span><span class="sxs-lookup"><span data-stu-id="aea57-112">To get and set the SACL of a directory object, use the [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) interface.</span></span> <span data-ttu-id="aea57-113">Usando C++, o método [**IADsSecurityDescriptor:: get \_ SystemAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) retorna um ponteiro [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) .</span><span class="sxs-lookup"><span data-stu-id="aea57-113">Using C++, the [**IADsSecurityDescriptor::get\_SystemAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) method returns an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer.</span></span> <span data-ttu-id="aea57-114">Chame **QueryInterface** nesse ponteiro **IDispatch** para obter uma interface [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) e use os métodos nessa interface para acessar as ACEs individuais na SACL.</span><span class="sxs-lookup"><span data-stu-id="aea57-114">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) interface, and use the methods on that interface to access the individual ACEs in the SACL.</span></span> <span data-ttu-id="aea57-115">Para obter mais informações sobre o procedimento para modificar uma SACL, que é semelhante àquela para modificar uma DACL, consulte [definindo direitos de acesso em um objeto](setting-access-rights-on-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="aea57-115">For more information about the procedure for modifying a SACL, which is similar to that for modifying a DACL, see [Setting Access Rights on an Object](setting-access-rights-on-an-object.md).</span></span>

<span data-ttu-id="aea57-116">Para enumerar as ACEs em uma SACL, use o método [**IADsAccessControlList:: get \_ \_ NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) , que retorna um ponteiro [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="aea57-116">To enumerate the ACEs in a SACL, use the [**IADsAccessControlList::get\_\_NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) method, which returns an [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) pointer.</span></span> <span data-ttu-id="aea57-117">Chame **QueryInterface** nesse ponteiro **IUnknown** para obter uma interface [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) .</span><span class="sxs-lookup"><span data-stu-id="aea57-117">Call **QueryInterface** on that **IUnknown** pointer to get an [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) interface.</span></span> <span data-ttu-id="aea57-118">Use o método [**IEnumVARIANT:: Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) para enumerar as ACEs na ACL.</span><span class="sxs-lookup"><span data-stu-id="aea57-118">Use the [**IEnumVARIANT::Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) method to enumerate the ACEs in the ACL.</span></span> <span data-ttu-id="aea57-119">Cada ACE é retornado como uma **variante** que contém um ponteiro [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) ; Lembre-se de que o membro **VT** é **\_ despacho VT**.</span><span class="sxs-lookup"><span data-stu-id="aea57-119">Each ACE is returned as a **VARIANT** that contains an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer; be aware that the **vt** member is **VT\_DISPATCH**.</span></span> <span data-ttu-id="aea57-120">Chame **QueryInterface** nesse ponteiro **IDispatch** para obter uma interface [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) para a Ace.</span><span class="sxs-lookup"><span data-stu-id="aea57-120">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) interface for the ACE.</span></span> <span data-ttu-id="aea57-121">Use os métodos de interface **IADsAccessControlEntry** para definir ou obter os componentes de uma ACE.</span><span class="sxs-lookup"><span data-stu-id="aea57-121">Use the **IADsAccessControlEntry** interface methods to set or get the components of an ACE.</span></span>

<span data-ttu-id="aea57-122">Para obter mais informações sobre as SACLs, consulte:</span><span class="sxs-lookup"><span data-stu-id="aea57-122">For more information about SACLs, see:</span></span>

-   [<span data-ttu-id="aea57-123">Listas de controle de acesso (ACLs)</span><span class="sxs-lookup"><span data-stu-id="aea57-123">Access-Control Lists (ACLs)</span></span>](/windows/desktop/SecAuthZ/access-control-lists)
-   [<span data-ttu-id="aea57-124">Geração de auditoria</span><span class="sxs-lookup"><span data-stu-id="aea57-124">Audit Generation</span></span>](/windows/desktop/SecAuthZ/audit-generation)

 

 