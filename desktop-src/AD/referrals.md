---
title: Referências (AD DS)
description: Active Directory Domain Services manter dados de referência em objetos crossRef armazenados no contêiner de partições (crossRefContainer) no contêiner de configuração.
ms.assetid: e4d6cc8a-9c2c-4e0f-acca-e9ecdd5e879b
ms.tgt_platform: multiple
keywords:
- ANÚNCIOS de referências
- Active Directory, referências
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f63c87fb0248d85ab20191296f9659eb58e460f6
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "105750381"
---
# <a name="referrals-ad-ds"></a><span data-ttu-id="3caa1-105">Referências (AD DS)</span><span class="sxs-lookup"><span data-stu-id="3caa1-105">Referrals (AD DS)</span></span>

<span data-ttu-id="3caa1-106">Active Directory Domain Services manter dados de referência em objetos [**crossRef**](/windows/desktop/ADSchema/c-crossref) armazenados no contêiner de partições ([**crossRefContainer**](/windows/desktop/ADSchema/c-crossrefcontainer)) no contêiner de configuração.</span><span class="sxs-lookup"><span data-stu-id="3caa1-106">Active Directory Domain Services maintain referral data in [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects stored in the partitions container ([**crossRefContainer**](/windows/desktop/ADSchema/c-crossrefcontainer)) in the configuration container.</span></span> <span data-ttu-id="3caa1-107">No tópico [decidindo onde Pesquisar](where-to-search.md) , as referências são discutidas no contexto de um domínio em uma árvore de domínio e a geração de referências a domínios subordinados em uma pesquisa de subárvore.</span><span class="sxs-lookup"><span data-stu-id="3caa1-107">In the [Deciding Where to Search](where-to-search.md) topic, referrals are discussed in the context of a domain within a domain tree and the generation of referrals to subordinate domains on a subtree search.</span></span>

<span data-ttu-id="3caa1-108">Active Directory Domain Services criar e manter objetos [**crossRef**](/windows/desktop/ADSchema/c-crossref) para todos os domínios na floresta.</span><span class="sxs-lookup"><span data-stu-id="3caa1-108">Active Directory Domain Services create and maintains [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects for all domains in the forest.</span></span> <span data-ttu-id="3caa1-109">Além disso, há objetos **crossRef** para os contêineres de configuração e esquema.</span><span class="sxs-lookup"><span data-stu-id="3caa1-109">In addition, there are **crossRef** objects for the configuration and schema containers.</span></span> <span data-ttu-id="3caa1-110">Esses objetos **crossRef** são usados para gerar referências em resposta a consultas que solicitam dados sobre objetos que existem na floresta, mas não estão contidos no servidor de diretório que manipula a solicitação.</span><span class="sxs-lookup"><span data-stu-id="3caa1-110">These **crossRef** objects are used to generate referrals in response to queries that request data about objects that exist in the forest, but not contained on the directory server handling the request.</span></span> <span data-ttu-id="3caa1-111">Elas são chamadas de *referências cruzadas internas*, pois se referem a domínios, esquemas e contêineres de configuração dentro da floresta.</span><span class="sxs-lookup"><span data-stu-id="3caa1-111">These are called *internal cross references*, because they refer to domains, schema, and configuration containers within the forest.</span></span>

<span data-ttu-id="3caa1-112">Se a busca de referência não estiver habilitada e uma pesquisa de subárvore for executada, a pesquisa retornará todos os objetos dentro do domínio especificado que atendem aos critérios de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="3caa1-112">If referral chasing is not enabled and a subtree search is performed, the search will return all objects within the specified domain that meet the search criteria.</span></span> <span data-ttu-id="3caa1-113">A pesquisa também retornará referências a quaisquer domínios subordinados que sejam descendentes diretos do domínio do servidor de diretório.</span><span class="sxs-lookup"><span data-stu-id="3caa1-113">The search will also return referrals to any subordinate domains that are direct descendants of the directory server domain.</span></span> <span data-ttu-id="3caa1-114">O cliente deve resolver as referências ligando-se ao caminho especificado pela referência e enviando outra consulta.</span><span class="sxs-lookup"><span data-stu-id="3caa1-114">The client must resolve the referrals by binding to the path specified by the referral and submitting another query.</span></span>

<span data-ttu-id="3caa1-115">Se a procura de referência estiver ativada e uma pesquisa de subárvore for executada, a API LDAP subjacente tentará automaticamente se associar a quaisquer referências e adicionará os resultados da pesquisa ao conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="3caa1-115">If referral chasing is turned on and a subtree search is performed, the underlying LDAP API will automatically attempt to bind to any referrals and add the search results to the result set.</span></span> <span data-ttu-id="3caa1-116">Na maioria dos casos, a caça de referência será transparente para o chamador.</span><span class="sxs-lookup"><span data-stu-id="3caa1-116">In most cases, the referral chasing will be transparent to the caller.</span></span> <span data-ttu-id="3caa1-117">Se a referência for para um objeto em um domínio ou floresta diferente, a API LDAP subjacente tentará usar as credenciais atuais para associar ao destino da referência.</span><span class="sxs-lookup"><span data-stu-id="3caa1-117">If the referral is to an object in a different domain or forest, the underlying LDAP API will attempt to use the current credentials to bind to the target of the referral.</span></span> <span data-ttu-id="3caa1-118">Se isso for bem-sucedido, a caça de referência será transparente.</span><span class="sxs-lookup"><span data-stu-id="3caa1-118">If this is successful, the referral chasing will be transparent.</span></span> <span data-ttu-id="3caa1-119">Se isso não for bem-sucedido, a referência e um código de erro de referência serão retornados.</span><span class="sxs-lookup"><span data-stu-id="3caa1-119">If this is not successful, the referral and a referral error code will be returned.</span></span>

<span data-ttu-id="3caa1-120">Para obter mais informações sobre como definir a preferência de pesquisa de busca de referência, consulte [especificando outras opções de pesquisa](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="3caa1-120">For more information about setting the referral chasing search preference, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span>

<span data-ttu-id="3caa1-121">Além do [**dNSRoot**](/windows/desktop/ADSchema/a-dnsroot) (nome DNS do domínio) e das propriedades do [**NCName**](/windows/desktop/ADSchema/a-ncname) (nome distinto para o domínio), o objeto [**CROSSREF**](/windows/desktop/ADSchema/c-crossref) também contém o **NetBiosName** (nome NetBIOS do domínio) e **trustParent** (nome distinto para o objeto **crossRef** que representa as propriedades do domínio pai direto do domínio).</span><span class="sxs-lookup"><span data-stu-id="3caa1-121">In addition to the [**dnsRoot**](/windows/desktop/ADSchema/a-dnsroot) (DNS name of the domain) and [**nCName**](/windows/desktop/ADSchema/a-ncname) (distinguished name for the domain) properties, the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object also contains the **nETBIOSName** (NetBIOS name of the domain) and **trustParent** (distinguished name for the **crossRef** object that represents the domain's direct parent domain) properties.</span></span>

<span data-ttu-id="3caa1-122">Active Directory Domain Services também pode ter *referências cruzadas externas* que se referem a objetos fora da floresta.</span><span class="sxs-lookup"><span data-stu-id="3caa1-122">Active Directory Domain Services can also have *external cross references* that refer to objects outside of the forest.</span></span> <span data-ttu-id="3caa1-123">As referências cruzadas externas devem ser adicionadas explicitamente por um administrador.</span><span class="sxs-lookup"><span data-stu-id="3caa1-123">External cross references must be added explicitly by an administrator.</span></span> <span data-ttu-id="3caa1-124">Lembre-se de que o servidor de destino da referência cruzada externa deve ter uma raiz DNS; ou seja, ele deve aderir ao RFC 2247.</span><span class="sxs-lookup"><span data-stu-id="3caa1-124">Be aware that the target server of the external cross reference must have a DNS root; that is, it must adhere to RFC 2247.</span></span>

<span data-ttu-id="3caa1-125">Uma referência cruzada externa se refere a um objeto em qualquer outra floresta, desde que o nome seja exclusivo na floresta de destino.</span><span class="sxs-lookup"><span data-stu-id="3caa1-125">An external cross reference refers to an object on any other forest, as long as the name is unique in the target forest.</span></span> <span data-ttu-id="3caa1-126">Por exemplo, os aplicativos cliente LDAP usados por sua empresa podem enviar operações para seus servidores de diretório para Fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="3caa1-126">For example, LDAP client applications that are used by your company can submit operations to your directory servers for Fabrikam.com.</span></span> <span data-ttu-id="3caa1-127">Você cria um objeto [**crossRef**](/windows/desktop/ADSchema/c-crossref) para fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="3caa1-127">You create a [**crossRef**](/windows/desktop/ADSchema/c-crossref) object for Fabrikam.com.</span></span> <span data-ttu-id="3caa1-128">Agora, em vez de retornar um erro de objeto não encontrado, os servidores de diretório podem retornar uma referência a um objeto no domínio Fabrikam.com e os clientes podem perseguir a referência.</span><span class="sxs-lookup"><span data-stu-id="3caa1-128">Now, instead of returning an Object Not Found error, your directory servers can return a referral to an object in the Fabrikam.com domain and the clients can chase the referral.</span></span> <span data-ttu-id="3caa1-129">Por exemplo, se você tiver um objeto com o seguinte nome distinto:</span><span class="sxs-lookup"><span data-stu-id="3caa1-129">For example, if you have an object with the following distinguished name:</span></span>


```C++
CN=SomeObject,OU=SomeOU,DC=Fabrikam,DC=Com
```



<span data-ttu-id="3caa1-130">Você pode adicionar uma referência cruzada externa para um objeto com o nome "ChildOfSomeObject".</span><span class="sxs-lookup"><span data-stu-id="3caa1-130">You can add an external cross reference for an object with the name "ChildOfSomeObject".</span></span>


```C++
CN=ChildOfSomeObject,CN=SomeObject,OU=SomeOU,DC=Fabrikam,DC=Com
```



<span data-ttu-id="3caa1-131">Uma pesquisa de subárvore que contém "SomeObject" também retornará uma referência a "ChildOfSomeObject".</span><span class="sxs-lookup"><span data-stu-id="3caa1-131">A subtree search that contains "SomeObject" will also return a referral to "ChildOfSomeObject".</span></span> <span data-ttu-id="3caa1-132">Lembre-se de que deve haver um servidor LDAP no endereço especificado pela referência (uma das propriedades no objeto [**crossRef**](/windows/desktop/ADSchema/c-crossref) ) e que esse servidor LDAP deve fornecer o namespace que é identificado por "ChildOfSomeObject".</span><span class="sxs-lookup"><span data-stu-id="3caa1-132">Be aware that there must be an LDAP server at the address that is specified by the referral (one of the properties on the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object) and that this LDAP server must serve the namespace that is identified by "ChildOfSomeObject".</span></span>

<span data-ttu-id="3caa1-133">Como os objetos [**crossRef**](/windows/desktop/ADSchema/c-crossref) são armazenados no contêiner de configuração, cada DC (controlador de domínio) tem uma cópia de todos os objetos **crossRef** .</span><span class="sxs-lookup"><span data-stu-id="3caa1-133">Because [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects are stored in the configuration container, each domain controller (DC) has a copy of all **crossRef** objects.</span></span> <span data-ttu-id="3caa1-134">Portanto, cada DC contém dados sobre cada domínio na floresta, bem como suas relações superiores/subordinadas.</span><span class="sxs-lookup"><span data-stu-id="3caa1-134">Therefore, every DC contains data about every domain in the forest as well as their superior/subordinate relationships.</span></span> <span data-ttu-id="3caa1-135">Isso permite que cada DC gere referências a qualquer domínio na floresta e as referências para o domínio subordinado, o esquema ou os contêineres de configuração não explorados em uma pesquisa de subárvore.</span><span class="sxs-lookup"><span data-stu-id="3caa1-135">This enables each DC to generate referrals to any domain in the forest and referrals for unexplored subordinate domain, schema, or configuration containers on a subtree search.</span></span>

<span data-ttu-id="3caa1-136">Para obter mais informações sobre referências, consulte:</span><span class="sxs-lookup"><span data-stu-id="3caa1-136">For more information about referrals, see:</span></span>

-   [<span data-ttu-id="3caa1-137">Quando as referências são geradas</span><span class="sxs-lookup"><span data-stu-id="3caa1-137">When Referrals Are Generated</span></span>](when-referrals-are-generated.md)
-   [<span data-ttu-id="3caa1-138">Criando uma referência externa</span><span class="sxs-lookup"><span data-stu-id="3caa1-138">Creating an External Referral</span></span>](creating-an-external-referral.md)

<span data-ttu-id="3caa1-139">Para obter mais informações e um exemplo de código que mostra como obter o nome distinto do contêiner partições, consulte [código de exemplo para localizar o contêiner partições](example-code-for-locating-the-partitions-container.md).</span><span class="sxs-lookup"><span data-stu-id="3caa1-139">For more information and a code example that shows how to obtain the distinguished name of the partitions container, see [Example Code for Locating the Partitions Container](example-code-for-locating-the-partitions-container.md).</span></span>

 

 