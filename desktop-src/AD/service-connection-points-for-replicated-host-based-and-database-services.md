---
title: Pontos de conexão de serviço para serviços replicados, baseados em host e de banco de dados
description: Quando você publica um serviço usando um SCP (ponto de conexão de serviço), considere como os clientes irão localizar o SCP para seu serviço.
ms.assetid: 944e8ecd-f8ea-4506-992c-bbbfc82d11f3
ms.tgt_platform: multiple
keywords:
- Pontos de conexão de serviço para AD replicados, baseados em host e de serviços de banco de dados
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 63b69491dd84a9367f8fd05e9d23ca771551dfbb
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104007289"
---
# <a name="service-connection-points-for-replicated-host-based-and-database-services"></a><span data-ttu-id="41959-104">Pontos de conexão de serviço para serviços replicados, baseados em host e de banco de dados</span><span class="sxs-lookup"><span data-stu-id="41959-104">Service Connection Points for Replicated, Host-based, and Database Services</span></span>

<span data-ttu-id="41959-105">Quando você publica um serviço usando um SCP (ponto de conexão de serviço), considere como os clientes irão localizar o SCP para seu serviço.</span><span class="sxs-lookup"><span data-stu-id="41959-105">When you publish a service using a service connection point (SCP), consider how clients will locate the SCP for your service.</span></span> <span data-ttu-id="41959-106">Se houver várias instâncias do serviço, considere como os clientes distinguirão o serviço com os recursos desejados de serviços semelhantes com diferentes recursos.</span><span class="sxs-lookup"><span data-stu-id="41959-106">If multiple instances of the service exist, consider how clients will distinguish the service with the desired features from similar services with different features.</span></span> <span data-ttu-id="41959-107">Se você publicar um serviço replicado, considere como um cliente escolherá uma réplica.</span><span class="sxs-lookup"><span data-stu-id="41959-107">If you publish a replicated service, consider how a client will choose a replica.</span></span> <span data-ttu-id="41959-108">Este tópico discute esses problemas para vários tipos de serviços.</span><span class="sxs-lookup"><span data-stu-id="41959-108">This topic discusses these issues for various types of services.</span></span>

## <a name="replicable-services"></a><span data-ttu-id="41959-109">Serviços replicáveis</span><span class="sxs-lookup"><span data-stu-id="41959-109">Replicable services</span></span>

<span data-ttu-id="41959-110">Para um serviço replicável pode haver uma ou mais instâncias, ou réplicas, do serviço, e os clientes não se preocupam com a qual réplica eles se conectam porque cada uma fornece o mesmo serviço.</span><span class="sxs-lookup"><span data-stu-id="41959-110">For a replicable service there can be one or many instances, or replicas, of the service, and clients do not care which replica they connect to because each provides the same service.</span></span> <span data-ttu-id="41959-111">Active Directory Domain Services são exemplos de serviços replicados: todos os controladores de domínio para um determinado domínio contêm dados idênticos, sujeitos à latência de replicação e fornecem serviços idênticos.</span><span class="sxs-lookup"><span data-stu-id="41959-111">Active Directory Domain Services are examples of replicated services: all domain controllers for a given domain hold identical data, subject to replication latency, and provide identical services.</span></span>

<span data-ttu-id="41959-112">Os serviços replicáveis podem armazenar o SCPs e outros objetos específicos de serviço para várias réplicas em um único contêiner.</span><span class="sxs-lookup"><span data-stu-id="41959-112">Replicable services can store the SCPs and other service-specific objects for multiple replicas in a single container.</span></span> <span data-ttu-id="41959-113">O aplicativo de instalação para a primeira réplica pode criar o contêiner como um filho do contêiner do sistema do domínio local.</span><span class="sxs-lookup"><span data-stu-id="41959-113">The setup application for the first replica can create the container as a child of the local domain's System container.</span></span> <span data-ttu-id="41959-114">Para obter mais informações, consulte [publicando em um contêiner do sistema de domínio](publishing-in-a-domain-system-container.md).</span><span class="sxs-lookup"><span data-stu-id="41959-114">For more information, see [Publishing in a Domain System Container](publishing-in-a-domain-system-container.md).</span></span> <span data-ttu-id="41959-115">Verifique se o descritor de segurança do seu contêiner permite que os programas de instalação para réplicas subsequentes criem seus objetos no mesmo contêiner.</span><span class="sxs-lookup"><span data-stu-id="41959-115">Ensure that the security descriptor for your container allows the setup programs for subsequent replicas to create their objects in the same container.</span></span> <span data-ttu-id="41959-116">Conceda permissões para que o administrador de instalação especifique os usuários ou grupos que podem criar ou modificar objetos no contêiner.</span><span class="sxs-lookup"><span data-stu-id="41959-116">Grant permissions for the installing administrator to specify the users or groups that can create or modify objects in the container.</span></span>

<span data-ttu-id="41959-117">Uma estratégia para um serviço replicável é criar um SCP para cada réplica.</span><span class="sxs-lookup"><span data-stu-id="41959-117">One strategy for a replicable service is to create an SCP for each replica.</span></span> <span data-ttu-id="41959-118">Quando um cliente consulta o GUID do produto do serviço ou outra palavra-chave de identificação, ele localiza os objetos SCP para todas as réplicas e seleciona uma aleatoriamente ou usando algum algoritmo de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="41959-118">When a client queries for the service's product GUID or other identifying keyword, it finds the SCP objects for all replicas and selects one at random or using some load-balancing algorithm.</span></span> <span data-ttu-id="41959-119">Por exemplo, um administrador poderia especificar a prioridade e os dados de balanceamento de carga para cada réplica, semelhante aos campos de prioridade e peso de um registro SRV do DNS.</span><span class="sxs-lookup"><span data-stu-id="41959-119">For example, an administrator could specify priority and load-balancing data for each replica, similar to the priority and weight fields of a DNS SRV record.</span></span> <span data-ttu-id="41959-120">O aplicativo de instalação do serviço pode armazenar esses dados no atributo **ServiceBindingInformation** do SCP de cada réplica.</span><span class="sxs-lookup"><span data-stu-id="41959-120">The service's setup application can store this data in the **serviceBindingInformation** attribute of each replica's SCP.</span></span> <span data-ttu-id="41959-121">Os clientes recuperam os dados de cada SCP e usam-os para selecionar uma réplica.</span><span class="sxs-lookup"><span data-stu-id="41959-121">Clients retrieve the data from each SCP and use it to select a replica.</span></span>

<span data-ttu-id="41959-122">Outra estratégia é criar um único SCP para todas as réplicas e definir o atributo SCP **serviceDNSName** como o nome de um registro SRV do DNS.</span><span class="sxs-lookup"><span data-stu-id="41959-122">Another strategy is to create a single SCP for all replicas and set the SCP **serviceDNSName** attribute to the name of a DNS SRV record.</span></span> <span data-ttu-id="41959-123">Em seguida, o aplicativo de instalação para cada réplica registra um registro SRV com esse nome.</span><span class="sxs-lookup"><span data-stu-id="41959-123">Then the setup application for each replica registers a SRV record with that name.</span></span> <span data-ttu-id="41959-124">Quando um cliente identifica o SCP solitário do serviço, o cliente recupera o nome do registro SRV e usa a função [**DnsQuery**](/windows/desktop/api/windns/nf-windns-dnsquery_a) para recuperar a matriz de registros SRV para as réplicas.</span><span class="sxs-lookup"><span data-stu-id="41959-124">When a client identifies the service's lone SCP, the client retrieves the name of the SRV record and uses the [**DnsQuery**](/windows/desktop/api/windns/nf-windns-dnsquery_a) function to retrieve the array of SRV records for the replicas.</span></span> <span data-ttu-id="41959-125">Cada registro SRV contém o nome de um computador host e dados adicionais que o cliente pode usar para selecionar uma réplica.</span><span class="sxs-lookup"><span data-stu-id="41959-125">Each SRV record contains the name of a host computer and additional data that the client can use to select a replica.</span></span>

## <a name="database-services"></a><span data-ttu-id="41959-126">Serviços de banco de dados</span><span class="sxs-lookup"><span data-stu-id="41959-126">Database services</span></span>

<span data-ttu-id="41959-127">Instâncias diferentes de um serviço de banco de dados podem conter um dado totalmente diferente, mesmo que sejam todos os mesmos tipos de serviço, geralmente chamados de classe de serviço.</span><span class="sxs-lookup"><span data-stu-id="41959-127">Different instances of a database service may contain entirely different data, even though they are all the same kind of service, usually called service class.</span></span> <span data-ttu-id="41959-128">Para publicar esse tipo de serviço, o atributo **Keywords** do SCP pode identificar a classe de serviço e o banco de dados específico.</span><span class="sxs-lookup"><span data-stu-id="41959-128">To publish this kind of service, the **keywords** attribute of the SCP can identify both the service class and the specific database.</span></span> <span data-ttu-id="41959-129">Um cliente de uso geral que conhece apenas o GUID da classe de serviço pode consultar todos os bancos de dados publicados por essa classe de serviço e, em seguida, apresentar uma interface do usuário para permitir que o usuário selecione um.</span><span class="sxs-lookup"><span data-stu-id="41959-129">A general-purpose client that knows only the GUID of the service class can query for all databases published by that service class, and then present a user interface to allow the user to select one.</span></span> <span data-ttu-id="41959-130">Para um cliente projetado especificamente para o banco de dados de destino, você pode embutir código na GUID do banco de dados no código do cliente.</span><span class="sxs-lookup"><span data-stu-id="41959-130">For a client that is designed specifically for the target database, you can hard-code the database GUID into the client code.</span></span>

## <a name="host-based-services"></a><span data-ttu-id="41959-131">Serviços baseados em host</span><span class="sxs-lookup"><span data-stu-id="41959-131">Host-based services</span></span>

<span data-ttu-id="41959-132">Os serviços baseados em host são serviços que estão fortemente ligados a um único computador host.</span><span class="sxs-lookup"><span data-stu-id="41959-132">Host-based services are services that are closely tied to a single host computer.</span></span> <span data-ttu-id="41959-133">Você pode instalar instâncias da classe de serviço em vários computadores e cada instância fornece serviços que são identificados com seu computador host.</span><span class="sxs-lookup"><span data-stu-id="41959-133">You can install instances of the service class on many computers and each instance provides services that are identified with its host computer.</span></span>

<span data-ttu-id="41959-134">Cada instância de um serviço baseado em host deve criar seu próprio SCP no objeto de computador de seu host.</span><span class="sxs-lookup"><span data-stu-id="41959-134">Each instance of a host-based service should create its own SCP under the computer object of its host.</span></span> <span data-ttu-id="41959-135">Os clientes que usam um GUID de produto para pesquisar o SCP de um serviço baseado em host normalmente localizam muitas instâncias da classe de serviço em toda a floresta da empresa.</span><span class="sxs-lookup"><span data-stu-id="41959-135">Clients who use a product GUID to search for the SCP of a host-based service typically find many instances of the service class throughout the enterprise forest.</span></span> <span data-ttu-id="41959-136">Os clientes podem usar o atributo **serviceDNSName** do SCPs para localizar o scp para a instância de serviço no computador host desejado.</span><span class="sxs-lookup"><span data-stu-id="41959-136">Clients can then use the **serviceDNSName** attribute of the SCPs to find the SCP for the service instance on the desired host computer.</span></span>

 

 