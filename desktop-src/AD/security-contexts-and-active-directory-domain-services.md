---
title: Contextos de segurança e Active Directory Domain Services
description: Quando um aplicativo é associado a um controlador de Domínio do Active Directory (DC), ele faz isso no contexto de segurança de uma entidade de segurança, que pode ser um usuário ou uma entidade, como um computador ou um serviço do sistema.
ms.assetid: 7ad0acbe-f81b-46d6-be87-3526b0bfbd1b
ms.tgt_platform: multiple
keywords:
- Active Directory Active Directory, contextos de segurança
- contextos de segurança Active Directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c337cb05f8158dbb90f231652c42fb10a486aef4
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/17/2020
ms.locfileid: "104007290"
---
# <a name="security-contexts-and-active-directory-domain-services"></a><span data-ttu-id="7f9be-105">Contextos de segurança e Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="7f9be-105">Security Contexts and Active Directory Domain Services</span></span>

<span data-ttu-id="7f9be-106">Quando um aplicativo é associado a um controlador de Domínio do Active Directory (DC), ele faz isso no contexto de segurança de uma entidade de segurança, que pode ser um usuário ou uma entidade, como um computador ou um serviço do sistema.</span><span class="sxs-lookup"><span data-stu-id="7f9be-106">When an application binds to an Active Directory Domain Controller (DC), it does so in the security context of a security principal, which can be a user or an entity such as a computer or a system service.</span></span> <span data-ttu-id="7f9be-107">O contexto de segurança é a conta de usuário que o sistema usa para impor a segurança quando um thread tenta acessar um objeto protegível.</span><span class="sxs-lookup"><span data-stu-id="7f9be-107">The security context is the user account that the system uses to enforce security when a thread attempts to access a securable object.</span></span> <span data-ttu-id="7f9be-108">Esses dados incluem o SID (identificador de segurança do usuário), as associações de grupo e os privilégios.</span><span class="sxs-lookup"><span data-stu-id="7f9be-108">This data includes the user security identifier (SID), group memberships, and privileges.</span></span>

<span data-ttu-id="7f9be-109">Um usuário estabelece um contexto de segurança apresentando credenciais para autenticação.</span><span class="sxs-lookup"><span data-stu-id="7f9be-109">A user establishes a security context by presenting credentials for authentication.</span></span> <span data-ttu-id="7f9be-110">Se as credenciais forem autenticadas, o sistema produzirá um token de acesso que identifica as associações de grupo e os privilégios associados à conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="7f9be-110">If the credentials are authenticated, the system produces an access token that identifies the group memberships and privileges associated with the user account.</span></span> <span data-ttu-id="7f9be-111">O sistema verifica seu token de acesso quando você tenta acessar um objeto de diretório.</span><span class="sxs-lookup"><span data-stu-id="7f9be-111">The system verifies your access token when you attempt to access a directory object.</span></span> <span data-ttu-id="7f9be-112">Ele compara os dados em seu token de acesso às contas e aos grupos com acesso concedido ou negado pelo descritor de segurança do objeto.</span><span class="sxs-lookup"><span data-stu-id="7f9be-112">It compares the data in your access token to the accounts and groups granted or denied access by the object security descriptor.</span></span>

<span data-ttu-id="7f9be-113">Use os métodos a seguir para controlar o contexto de segurança com o qual você se associa a um Active Directory DC:</span><span class="sxs-lookup"><span data-stu-id="7f9be-113">Use the following methods to control the security context with which you bind to an Active Directory DC:</span></span>

-   <span data-ttu-id="7f9be-114">Associe usando a opção de **\_ \_ autenticação segura do ADS** com a função [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) ou o método [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) e especifique explicitamente um nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="7f9be-114">Bind using the **ADS\_SECURE\_AUTHENTICATION** option with the [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) function or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) method and explicitly specify a user name and password.</span></span> <span data-ttu-id="7f9be-115">O sistema autentica essas credenciais e gera um token de acesso que ele usa para a verificação de acesso durante essa associação.</span><span class="sxs-lookup"><span data-stu-id="7f9be-115">The system authenticates these credentials and generates an access token that it uses for access verification for the duration of that binding.</span></span> <span data-ttu-id="7f9be-116">Para obter mais informações, consulte [Autenticação](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="7f9be-116">For more information, see [Authentication](authentication.md).</span></span>
-   <span data-ttu-id="7f9be-117">Associe usando a opção de **\_ \_ autenticação segura do ADS** , mas sem especificar credenciais.</span><span class="sxs-lookup"><span data-stu-id="7f9be-117">Bind using the **ADS\_SECURE\_AUTHENTICATION** option, but without specifying credentials.</span></span> <span data-ttu-id="7f9be-118">Se você não estiver representando um usuário, o sistema usará o contexto de segurança primário do seu aplicativo, ou seja, o contexto de segurança do usuário que iniciou seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7f9be-118">If you are not impersonating a user, the system uses the primary security context of your application, that is, the security context of the user who started your application.</span></span> <span data-ttu-id="7f9be-119">No caso de um serviço do sistema, esse é o contexto de segurança da conta de serviço ou da conta LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="7f9be-119">In the case of a system service, this is the security context of the service account or the LocalSystem account.</span></span>
-   <span data-ttu-id="7f9be-120">Representar um usuário e, em seguida, associar-se à **\_ \_ autenticação segura do ADS**, mas sem especificar credenciais.</span><span class="sxs-lookup"><span data-stu-id="7f9be-120">Impersonate a user and then bind with **ADS\_SECURE\_AUTHENTICATION**, but without specifying credentials.</span></span> <span data-ttu-id="7f9be-121">Nesse caso, o sistema usa o contexto de segurança do cliente que é representado.</span><span class="sxs-lookup"><span data-stu-id="7f9be-121">In this case, the system uses the security context of the client that is impersonated.</span></span> <span data-ttu-id="7f9be-122">Para obter mais informações, consulte [representação do cliente](/windows/desktop/SecAuthZ/client-impersonation).</span><span class="sxs-lookup"><span data-stu-id="7f9be-122">For more information, see [Client Impersonation](/windows/desktop/SecAuthZ/client-impersonation).</span></span>
-   <span data-ttu-id="7f9be-123">Associar usando [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) ou [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) com a opção **ADS \_ sem \_ autenticação** .</span><span class="sxs-lookup"><span data-stu-id="7f9be-123">Bind using [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) with the **ADS\_NO\_AUTHENTICATION** option.</span></span> <span data-ttu-id="7f9be-124">Esse método é associado sem autenticação e resulta em "todos" como contexto de segurança.</span><span class="sxs-lookup"><span data-stu-id="7f9be-124">This method binds without authentication and results in "Everyone" as the security context.</span></span> <span data-ttu-id="7f9be-125">Somente o provedor LDAP dá suporte a essa opção.</span><span class="sxs-lookup"><span data-stu-id="7f9be-125">Only the LDAP provider supports this option.</span></span>

<span data-ttu-id="7f9be-126">Se possível, associe sem especificar credenciais.</span><span class="sxs-lookup"><span data-stu-id="7f9be-126">If possible, bind without specifying credentials.</span></span> <span data-ttu-id="7f9be-127">Ou seja, use o contexto de segurança do usuário conectado ou o cliente representado.</span><span class="sxs-lookup"><span data-stu-id="7f9be-127">That is, use the security context of the logged-on user or the impersonated client.</span></span> <span data-ttu-id="7f9be-128">Isso permite que você evite as credenciais de cache.</span><span class="sxs-lookup"><span data-stu-id="7f9be-128">This enables you to avoid caching credentials.</span></span> <span data-ttu-id="7f9be-129">Se você precisar usar credenciais de usuário alternativas, solicite as credenciais, associe-as a elas, mas não as armazene em cache.</span><span class="sxs-lookup"><span data-stu-id="7f9be-129">If you must use alternate user credentials, prompt for the credentials, bind with them, but do not cache them.</span></span> <span data-ttu-id="7f9be-130">Para usar o mesmo contexto de segurança em várias operações de ligação, você pode especificar o nome de usuário e a senha para a primeira operação de ligação e, em seguida, especificar apenas o nome de usuário para fazer as associações subsequentes.</span><span class="sxs-lookup"><span data-stu-id="7f9be-130">To use the same security context in multiple bind operations, you can specify the user name and password for the first bind operation and then specify only the user name to make subsequent binds.</span></span> <span data-ttu-id="7f9be-131">Para obter mais informações sobre como usar essa técnica, consulte [autenticação](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="7f9be-131">For more information about using this technique, see [Authentication](authentication.md).</span></span>

<span data-ttu-id="7f9be-132">Alguns contextos de segurança são mais poderosos do que outros.</span><span class="sxs-lookup"><span data-stu-id="7f9be-132">Some security contexts are more powerful than others.</span></span> <span data-ttu-id="7f9be-133">Por exemplo, a conta LocalSystem em um controlador de domínio tem acesso completo ao Active Directory Domain Services, enquanto que um usuário típico tem acesso limitado a alguns dos objetos no diretório.</span><span class="sxs-lookup"><span data-stu-id="7f9be-133">For example, the LocalSystem account on a domain controller has complete access to Active Directory Domain Services, whereas a typical user has only limited access to a some of the objects in the directory.</span></span> <span data-ttu-id="7f9be-134">Em geral, seu aplicativo não deve ser executado em um contexto de segurança avançado, como LocalSystem, quando um contexto de segurança menos potente é suficiente para executar as operações.</span><span class="sxs-lookup"><span data-stu-id="7f9be-134">In general, your application should not run in a powerful security context, such as LocalSystem, when a less powerful security context is sufficient to perform the operations.</span></span> <span data-ttu-id="7f9be-135">Isso significa que talvez você queira dividir seu aplicativo em componentes separados, cada um deles executado em um contexto de segurança apropriado para as operações a serem executadas.</span><span class="sxs-lookup"><span data-stu-id="7f9be-135">This means that you may want to divide your application into separate components, each of which runs in a security context appropriate to the operations to perform.</span></span> <span data-ttu-id="7f9be-136">Por exemplo, a instalação do aplicativo pode ser dividida da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="7f9be-136">For example, your application setup can be divided as follows:</span></span>

-   <span data-ttu-id="7f9be-137">Execute alterações de esquema e extensões no contexto de um usuário que seja membro do grupo de administradores de esquema.</span><span class="sxs-lookup"><span data-stu-id="7f9be-137">Perform schema changes and extensions in the context of a user who is a member of the Schema Administrators group.</span></span>
-   <span data-ttu-id="7f9be-138">Execute alterações no contêiner de configuração no contexto de um usuário que seja membro do grupo de administradores de empresa.</span><span class="sxs-lookup"><span data-stu-id="7f9be-138">Perform configuration container changes in the context of a user who is a member of the Enterprise Administrators group.</span></span>
-   <span data-ttu-id="7f9be-139">Execute alterações no contêiner de domínio no contexto de um usuário que seja membro do grupo Administradores de domínio.</span><span class="sxs-lookup"><span data-stu-id="7f9be-139">Perform domain container changes in the context of a user who is a member of the Domain Administrators group.</span></span>

 

 