---
title: Restrições de shell gráfico do servidor
description: Os aplicativos do servidor devem ser capazes de executar sem o shell gráfico do servidor
ms.assetid: 8F531497-B64D-4E79-AD7A-790EFDC6ADFE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7666ae07a28d798a36d249bf37ab2d7719b9fba0
ms.sourcegitcommit: 46376be61d3fa308f9b1a06d7e2fa122a39755af
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/10/2020
ms.locfileid: "104366855"
---
# <a name="server-apps-must-be-able-to-run-without-the-server-graphical-shell"></a><span data-ttu-id="ab2d2-103">Os aplicativos do servidor devem ser capazes de executar sem o shell gráfico do servidor</span><span class="sxs-lookup"><span data-stu-id="ab2d2-103">Server apps must be able to run without the Server Graphical Shell</span></span>

## <a name="platform"></a><span data-ttu-id="ab2d2-104">Plataforma</span><span class="sxs-lookup"><span data-stu-id="ab2d2-104">Platform</span></span>

<span data-ttu-id="ab2d2-105">**Servidores** – Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="ab2d2-105">**Servers** – Windows Server 2012</span></span> 

## <a name="description"></a><span data-ttu-id="ab2d2-106">Description</span><span class="sxs-lookup"><span data-stu-id="ab2d2-106">Description</span></span>

<span data-ttu-id="ab2d2-107">O shell gráfico do servidor, o recurso que inclui o Windows Explorer e o Internet Explorer, é instalado por padrão nas instalações "servidor com uma GUI" do Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-107">Server Graphical Shell, the feature that includes Windows Explorer and Internet Explorer, is installed by default on “Server with a GUI” installations of Windows Server 2012.</span></span> <span data-ttu-id="ab2d2-108">O recurso de shell gráfico do servidor pode ser desinstalado para reduzir o potencial de manutenção e de serviço, limitando assim o número de reinicializações que o servidor pode incorrer e, ao mesmo tempo, permitindo que as ferramentas de gerenciamento sejam executadas localmente no servidor.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-108">The Server Graphical Shell feature can be uninstalled in order to reduce the potential servicing and performance footprint, thereby limiting the number of reboots that the server may incur, while still allowing management tools to be run locally on the server.</span></span>

<span data-ttu-id="ab2d2-109">Depois que um administrador desinstala o shell gráfico do servidor, o servidor está na configuração mínima da interface do servidor:</span><span class="sxs-lookup"><span data-stu-id="ab2d2-109">After an administrator uninstalls the Server Graphical Shell, the server is in the Minimal Server Interface configuration:</span></span>

![configuração da interface do shell gráfico do servidor](images/minimalserverinterface.png)

<span data-ttu-id="ab2d2-111">Os administradores podem optar por executar na configuração mínima da interface do servidor (que inclui um conjunto de ferramentas de gerenciamento local), como o padrão, em vez de no servidor com uma configuração de GUI.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-111">Administrators can then opt to run in the Minimal Server Interface configuration (which includes a set of local management tools), as the default, rather than in the Server with a GUI configuration.</span></span> <span data-ttu-id="ab2d2-112">Isso permite o monitoramento e o gerenciamento local, ao mesmo tempo em que reduz o uso de recursos e a frequência de manutenção.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-112">This allows local monitoring and management, while reducing both resource usage and frequency of servicing.</span></span>

<span data-ttu-id="ab2d2-113">Os administradores poderão reinstalar o shell gráfico do servidor posteriormente se precisarem da funcionalidade dentro dele.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-113">Administrators can reinstall Server Graphical Shell later if they need the functionality within it.</span></span> <span data-ttu-id="ab2d2-114">(Os administradores também podem iniciar a partir de uma instalação do Server Core e "criar" para a configuração mínima da interface do servidor usando os recursos de funcionalidade sob demanda.)</span><span class="sxs-lookup"><span data-stu-id="ab2d2-114">(Administrators can also start from a Server Core install, and “build up” to the Minimal Server Interface configuration using the Features On Demand functionality.)</span></span>

<span data-ttu-id="ab2d2-115">Os aplicativos de servidor devem ser capazes de executar na configuração mínima da interface do servidor para aproveitar a redução da utilização de recursos e da superfície de manutenção.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-115">Server apps must be capable of running in the Minimal Server Interface configuration to take advantage of the reduced resource utilization and servicing footprint.</span></span> <span data-ttu-id="ab2d2-116">Esse recurso pode ser obtido permitindo que o administrador opte por não instalar partes do aplicativo que precise do shell gráfico do servidor ou detectando a presença do shell gráfico do servidor e desabilitando alguns aspectos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-116">This capability can be achieved by allowing the administrator to choose not to install parts of the app that needs the Server Graphical Shell, or by detecting the presence of Server Graphical Shell and disabling some aspects of the app.</span></span>

<span data-ttu-id="ab2d2-117">A interface mínima do servidor tem um espaço reduzido de recursos e manutenção, pois muitas APIs e binários incluídos no shell gráfico do servidor não estão disponíveis nessa configuração.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-117">The Minimal Server Interface has a reduced resource and servicing footprint because many APIs and binaries that are included in the Server Graphical Shell are not available in this configuration.</span></span> <span data-ttu-id="ab2d2-118">Quando apropriado, os aplicativos de servidor também devem permitir a administração remota (preferencialmente por meio da comunicação remota do Windows PowerShell) de outra instalação do Windows Server ou do cliente Windows.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-118">Where appropriate, server apps should also allow remote administration (preferably via Windows PowerShell Remoting) from another Windows Server or Windows Client installation.</span></span> <span data-ttu-id="ab2d2-119">Isso permite uma melhor administração centralizada de um ou mais computadores na configuração mínima da interface do servidor ou de computadores em uma configuração de superfície ainda menor, como Server Core.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-119">This enables better centralized administration of one or more machines in the Minimal Server Interface configuration, or of machines in an even lower footprint configuration such as Server Core.</span></span>

## <a name="manifestation"></a><span data-ttu-id="ab2d2-120">Manifestação</span><span class="sxs-lookup"><span data-stu-id="ab2d2-120">Manifestation</span></span>

<span data-ttu-id="ab2d2-121">Se um aplicativo exigir qualquer uma das APIs ou binários que não estão disponíveis na configuração mínima da interface do servidor, ele poderá não ser exibido corretamente na tela e/ou ser inutilizável.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-121">If an app requires any of the APIs or binaries that are not available in the Minimal Server Interface configuration, it may not display properly on the screen and/or be unusable.</span></span>

## <a name="mitigation"></a><span data-ttu-id="ab2d2-122">Atenuação</span><span class="sxs-lookup"><span data-stu-id="ab2d2-122">Mitigation</span></span>

<span data-ttu-id="ab2d2-123">Os desenvolvedores de aplicativos de servidor devem identificar as partes de seus aplicativos que exigem qualquer uma das APIs ou binários removidos e incluir informações para o administrador do servidor que identifica as partes do aplicativo que não serão executadas corretamente ao usar a interface de servidor mínima.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-123">Server app developers should identify those parts of their apps that require any of the removed APIs or binaries and include info for the server administrator identifying the parts of the app that won’t run properly when using the Minimal Server Interface.</span></span> <span data-ttu-id="ab2d2-124">Se essas partes do aplicativo puderem ser instaladas opcionalmente ou não forem absolutamente necessárias para a funcionalidade do produto, o aplicativo ainda poderá ser instalado e executado na configuração mínima da interface do servidor.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-124">If those parts of the app can be optionally installed or are not absolutely required for product functionality, the app can still be installed and run under the Minimal Server Interface configuration.</span></span>

<span data-ttu-id="ab2d2-125">Se o aplicativo não puder ser usado sem o shell gráfico do servidor, essa limitação deverá ser documentada e o administrador do servidor deverá ser instruído a instalar o shell gráfico do servidor.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-125">If the app cannot be used at all without the Server Graphical Shell, this limitation should be documented and the server administrator should be instructed to install the Server Graphical Shell.</span></span> <span data-ttu-id="ab2d2-126">(Se estiver adicionando a uma instalação do Server Core, isso pode exigir a adição de recursos usando recursos sob demanda.) Além disso, o aplicativo deve verificar a inicialização de que todos os arquivos necessários estão disponíveis, pois o shell gráfico do servidor pode ser desinstalado a qualquer momento antes ou depois da instalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-126">(If adding to a Server Core installation, this might require adding features using Features On Demand.) In addition, the app should check on startup that all required files are available, as the Server Graphical Shell can be uninstalled at any time before or after the installation of the app.</span></span>

## <a name="solution"></a><span data-ttu-id="ab2d2-127">Solução</span><span class="sxs-lookup"><span data-stu-id="ab2d2-127">Solution</span></span>

<span data-ttu-id="ab2d2-128">Conte com o menor conjunto possível de dependências e modularizate aplicativos para que a funcionalidade principal do aplicativo possa funcionar sem a necessidade de componentes de interface do usuário mais pesados instalados.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-128">Rely on the smallest possible set of dependencies, and modularize apps so that the core app functionality can work without requiring more heavyweight user interface components installed.</span></span> <span data-ttu-id="ab2d2-129">Desenvolva aplicativos que não exigem nenhuma das APIs ou binários removidos e, em vez disso, conte com a funcionalidade contida na interface mínima do servidor ou Server Core.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-129">Develop apps that do not require any of the removed APIs or binaries, and rely instead on the functionality contained within the Minimal Server Interface or Server Core.</span></span> <span data-ttu-id="ab2d2-130">Isso reduzirá os requisitos de manutenção e melhorará o desempenho e a satisfação do usuário.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-130">This will reduce maintenance requirements while improving performance and user satisfaction.</span></span>

<span data-ttu-id="ab2d2-131">Onde há partes de um aplicativo que podem adicionar uma funcionalidade significativa quando o shell gráfico do servidor está disponível, os desenvolvedores de aplicativos podem:</span><span class="sxs-lookup"><span data-stu-id="ab2d2-131">Where there are parts of an app that might add significant functionality when the Server Graphical Shell is available, app developers can:</span></span>

-   <span data-ttu-id="ab2d2-132">Permitir que esses recursos adicionais usem o shell gráfico do servidor para serem instalados opcionalmente, para que possam ser omitidos das instalações em uma configuração mínima de interface do servidor</span><span class="sxs-lookup"><span data-stu-id="ab2d2-132">Allow these additional features making use of Server Graphical Shell to be optionally installed, so they can be omitted from installations on a Minimal Server Interface configuration</span></span>
-   <span data-ttu-id="ab2d2-133">Detectar a presença do shell gráfico do servidor e adaptar o comportamento do aplicativo</span><span class="sxs-lookup"><span data-stu-id="ab2d2-133">Detect the presence of Server Graphical Shell and adapt the app behavior</span></span>

<span data-ttu-id="ab2d2-134">Os desenvolvedores de aplicativos também devem garantir que os aplicativos de servidor sejam gerenciáveis remotamente quando possível e apropriados.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-134">App developers should also ensure that server apps are remotely manageable where possible and appropriate.</span></span>

## <a name="detecting-minimal-server-interface-and-server-core"></a><span data-ttu-id="ab2d2-135">Detectando a interface mínima do servidor e o Server Core</span><span class="sxs-lookup"><span data-stu-id="ab2d2-135">Detecting Minimal Server Interface and Server Core</span></span>

<span data-ttu-id="ab2d2-136">O Windows Server instalará um valor de registro correspondente para cada nível de servidor instalado.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-136">Windows Server will install a corresponding registry value for each server level installed.</span></span> <span data-ttu-id="ab2d2-137">Você pode consultar a existência dessas chaves para determinar se o shell gráfico do servidor ou os recursos de interface mínima do servidor estão instalados e habilitados.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-137">You can query for the existence of these keys to determine if the Server Graphical Shell or Minimal Server Interface features are installed and enabled.</span></span>

<span data-ttu-id="ab2d2-138">HKEY \_ local \_ Machine \\ software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Server \\ ServerLevels:</span><span class="sxs-lookup"><span data-stu-id="ab2d2-138">HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Server\\ServerLevels:</span></span>



|                  | <span data-ttu-id="ab2d2-139">Server Core</span><span class="sxs-lookup"><span data-stu-id="ab2d2-139">Server Core</span></span> | <span data-ttu-id="ab2d2-140">Interface Mínima do Servidor</span><span class="sxs-lookup"><span data-stu-id="ab2d2-140">Minimal Server Interface</span></span> | <span data-ttu-id="ab2d2-141">Shell gráfico do servidor</span><span class="sxs-lookup"><span data-stu-id="ab2d2-141">Server Graphical Shell</span></span> |
|------------------|-------------|--------------------------|------------------------|
| <span data-ttu-id="ab2d2-142">ServerCore = 1</span><span class="sxs-lookup"><span data-stu-id="ab2d2-142">ServerCore=1</span></span>     | <span data-ttu-id="ab2d2-143">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-143">X</span></span>           | <span data-ttu-id="ab2d2-144">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-144">X</span></span>                        | <span data-ttu-id="ab2d2-145">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-145">X</span></span>                      |
| <span data-ttu-id="ab2d2-146">Servidor-GuiMgmt = 1</span><span class="sxs-lookup"><span data-stu-id="ab2d2-146">Server-GuiMgmt=1</span></span> |             | <span data-ttu-id="ab2d2-147">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-147">X</span></span>                        | <span data-ttu-id="ab2d2-148">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-148">X</span></span>                      |
| <span data-ttu-id="ab2d2-149">ServerGuiShell = 1</span><span class="sxs-lookup"><span data-stu-id="ab2d2-149">ServerGuiShell=1</span></span> |             |                          | <span data-ttu-id="ab2d2-150">X</span><span class="sxs-lookup"><span data-stu-id="ab2d2-150">X</span></span>                      |



 

<span data-ttu-id="ab2d2-151">Um "X" na tabela acima significa que a chave do registro estará presente quando o recurso correspondente for instalado.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-151">An “X” in the table above means that registry key will be present when the corresponding feature is installed.</span></span>

<span data-ttu-id="ab2d2-152">Observe que esses níveis de servidor são aditivos; Se o shell gráfico do servidor estiver instalado, a interface do servidor e o Server Core serão mínimos.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-152">Note that these server levels are additive; if the Server Graphical Shell is installed, so is the Minimal Server Interface and Server Core.</span></span> <span data-ttu-id="ab2d2-153">Nesse caso, ambas as chaves do registro estarão presentes.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-153">In that case, both registry keys will be present.</span></span>

## <a name="tests"></a><span data-ttu-id="ab2d2-154">Testes</span><span class="sxs-lookup"><span data-stu-id="ab2d2-154">Tests</span></span>

<span data-ttu-id="ab2d2-155">Inspecione o código do aplicativo para obter os requisitos que usam qualquer um dos binários e APIs removidos.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-155">Inspect your app code for requirements that use any of the removed APIs and binaries.</span></span> <span data-ttu-id="ab2d2-156">Depois de ter removido todas as instâncias desses binários de "principais aplicativos", teste seu aplicativo em um ambiente que não inclua o shell gráfico do servidor.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-156">After you have removed any instances of these from “core application” binaries, test your app in an environment that does not include the Server Graphical Shell.</span></span> <span data-ttu-id="ab2d2-157">Ferramentas como o Process Monitor podem ajudar com isso.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-157">Tools such as the Process Monitor might help with this.</span></span>

<span data-ttu-id="ab2d2-158">Se você não puder interromper completamente o uso dessas APIs e binários, certifique-se de que seu aplicativo falhe normalmente quando executado na interface mínima do servidor ou Server Core.</span><span class="sxs-lookup"><span data-stu-id="ab2d2-158">If you cannot completely discontinue use of these APIs and binaries, ensure that your app fails gracefully when run on Minimal Server Interface or Server Core.</span></span>

## <a name="resources"></a><span data-ttu-id="ab2d2-159">Recursos</span><span class="sxs-lookup"><span data-stu-id="ab2d2-159">Resources</span></span>

-   <span data-ttu-id="ab2d2-160">[Documentos do Server Core existentes no MSDN](/previous-versions/windows/desktop/legacy/ms723891(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="ab2d2-160">[Existing Server Core docs on MSDN](/previous-versions/windows/desktop/legacy/ms723891(v=vs.85))</span></span>

 

 