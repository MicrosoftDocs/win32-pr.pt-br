---
description: As funções global e local têm suporte para portabilidade de código de 16 bits ou para manter a compatibilidade do código-fonte com o Windows de 16 bits.
ms.assetid: 97707ce7-4c65-4d0e-ba69-47fdaee73a9b
title: Funções globais e locais
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf356647f92f0e7d82e914a91020c438363ff082
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103827042"
---
# <a name="global-and-local-functions"></a><span data-ttu-id="abd3d-103">Funções globais e locais</span><span class="sxs-lookup"><span data-stu-id="abd3d-103">Global and Local Functions</span></span>

<span data-ttu-id="abd3d-104">As funções global e local têm suporte para portabilidade de código de 16 bits ou para manter a compatibilidade do código-fonte com o Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="abd3d-104">The global and local functions are supported for porting from 16-bit code, or for maintaining source code compatibility with 16-bit Windows.</span></span> <span data-ttu-id="abd3d-105">Começando com o Windows de 32 bits, as funções global e local são implementadas como funções de wrapper que chamam as [funções de heap](heap-functions.md) correspondentes usando um identificador para o heap padrão do processo.</span><span class="sxs-lookup"><span data-stu-id="abd3d-105">Starting with 32-bit Windows, the global and local functions are implemented as wrapper functions that call the corresponding [heap functions](heap-functions.md) using a handle to the process's default heap.</span></span> <span data-ttu-id="abd3d-106">Portanto, as funções global e local têm maior sobrecarga do que outras funções de gerenciamento de memória.</span><span class="sxs-lookup"><span data-stu-id="abd3d-106">Therefore, the global and local functions have greater overhead than other memory management functions.</span></span>

<span data-ttu-id="abd3d-107">As [funções de heap](heap-functions.md) fornecem mais recursos e controle do que as funções globais e locais.</span><span class="sxs-lookup"><span data-stu-id="abd3d-107">The [heap functions](heap-functions.md) provide more features and control than the global and local functions.</span></span> <span data-ttu-id="abd3d-108">Os novos aplicativos devem usar as funções de heap, a menos que a documentação declare especificamente que uma função global ou local deve ser usada.</span><span class="sxs-lookup"><span data-stu-id="abd3d-108">New applications should use the heap functions unless documentation specifically states that a global or local function should be used.</span></span> <span data-ttu-id="abd3d-109">Por exemplo, algumas funções do Windows alocam memória que deve ser liberada com [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree), e as funções globais ainda são usadas com troca dinâmica de dados (DDE), as funções da área de transferência e os objetos de dados OLE.</span><span class="sxs-lookup"><span data-stu-id="abd3d-109">For example, some Windows functions allocate memory that must be freed with [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree), and the global functions are still used with Dynamic Data Exchange (DDE), the clipboard functions, and OLE data objects.</span></span> <span data-ttu-id="abd3d-110">Para obter uma lista completa das funções globais e locais, consulte a tabela em [funções de gerenciamento de memória](memory-management-functions.md).</span><span class="sxs-lookup"><span data-stu-id="abd3d-110">For a complete list of global and local functions, see the table in [Memory Management Functions](memory-management-functions.md).</span></span>

<span data-ttu-id="abd3d-111">O gerenciamento de memória do Windows não fornece um heap local separado e um heap global, como o Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="abd3d-111">Windows memory management does not provide a separate local heap and global heap, as 16-bit Windows does.</span></span> <span data-ttu-id="abd3d-112">Como resultado, as famílias de funções global e local são equivalentes e escolher entre elas é uma questão de preferência pessoal.</span><span class="sxs-lookup"><span data-stu-id="abd3d-112">As a result, the global and local families of functions are equivalent and choosing between them is a matter of personal preference.</span></span> <span data-ttu-id="abd3d-113">Observe que a alteração de um modelo de memória segmentada de 16 bits para um modelo de memória virtual de 32 bits fez algumas das funções globais e locais relacionadas e suas opções desnecessárias ou sem sentido.</span><span class="sxs-lookup"><span data-stu-id="abd3d-113">Note that the change from a 16-bit segmented memory model to a 32-bit virtual memory model has made some of the related global and local functions and their options unnecessary or meaningless.</span></span> <span data-ttu-id="abd3d-114">Por exemplo, não há mais ponteiros próximos e distantes, porque as alocações locais e globais retornam endereços virtuais de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="abd3d-114">For example, there are no longer near and far pointers, because both local and global allocations return 32-bit virtual addresses.</span></span>

<span data-ttu-id="abd3d-115">Os objetos de memória alocados por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) estão em páginas privadas e confirmadas com acesso de leitura/gravação que não podem ser acessados por outros processos.</span><span class="sxs-lookup"><span data-stu-id="abd3d-115">Memory objects allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) are in private, committed pages with read/write access that cannot be accessed by other processes.</span></span> <span data-ttu-id="abd3d-116">A memória alocada usando **GlobalAlloc** com **GMEM \_ Ddeshare** não é realmente compartilhada globalmente como no Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="abd3d-116">Memory allocated by using **GlobalAlloc** with **GMEM\_DDESHARE** is not actually shared globally as it is in 16-bit Windows.</span></span> <span data-ttu-id="abd3d-117">Esse valor não tem nenhum efeito e está disponível apenas para compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="abd3d-117">This value has no effect and is available only for compatibility.</span></span> <span data-ttu-id="abd3d-118">Aplicativos que exigem memória compartilhada para outros fins devem usar objetos de mapeamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="abd3d-118">Applications requiring shared memory for other purposes must use file-mapping objects.</span></span> <span data-ttu-id="abd3d-119">Vários processos podem mapear uma exibição do mesmo objeto de mapeamento de arquivo para fornecer a memória compartilhada nomeada.</span><span class="sxs-lookup"><span data-stu-id="abd3d-119">Multiple processes can map a view of the same file-mapping object to provide named shared memory.</span></span> <span data-ttu-id="abd3d-120">Para obter mais informações, consulte [mapeamento de arquivo](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="abd3d-120">For more information, see [File Mapping](file-mapping.md).</span></span>

<span data-ttu-id="abd3d-121">As alocações de memória são limitadas apenas pela memória física disponível, incluindo o armazenamento no arquivo de paginação no disco.</span><span class="sxs-lookup"><span data-stu-id="abd3d-121">Memory allocations are limited only by the available physical memory, including storage in the paging file on disk.</span></span> <span data-ttu-id="abd3d-122">Quando você aloca memória fixa, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) retornam um ponteiro que o processo de chamada pode usar imediatamente para acessar a memória.</span><span class="sxs-lookup"><span data-stu-id="abd3d-122">When you allocate fixed memory, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) return a pointer that the calling process can immediately use to access the memory.</span></span> <span data-ttu-id="abd3d-123">Quando você aloca a memória móvel, o valor de retorno é um identificador.</span><span class="sxs-lookup"><span data-stu-id="abd3d-123">When you allocate moveable memory, the return value is a handle.</span></span> <span data-ttu-id="abd3d-124">Para obter um ponteiro para um objeto de memória móvel, use as funções [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) e [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) .</span><span class="sxs-lookup"><span data-stu-id="abd3d-124">To get a pointer to a movable memory object, use the [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) and [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) functions.</span></span>

<span data-ttu-id="abd3d-125">O tamanho real da memória alocada pode ser maior que o tamanho solicitado.</span><span class="sxs-lookup"><span data-stu-id="abd3d-125">The actual size of the memory allocated can be larger than the requested size.</span></span> <span data-ttu-id="abd3d-126">Para determinar o número real de bytes alocados, use a função [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) ou [**Localize**](/windows/desktop/api/WinBase/nf-winbase-localsize) .</span><span class="sxs-lookup"><span data-stu-id="abd3d-126">To determine the actual number of bytes allocated, use the [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) or [**LocalSize**](/windows/desktop/api/WinBase/nf-winbase-localsize) function.</span></span> <span data-ttu-id="abd3d-127">Se a quantidade alocada for maior que a quantidade solicitada, o processo poderá usar toda a quantidade.</span><span class="sxs-lookup"><span data-stu-id="abd3d-127">If the amount allocated is greater than the amount requested, the process can use the entire amount.</span></span>

<span data-ttu-id="abd3d-128">As funções [**GlobalRealloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) e [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) alteram o tamanho ou os atributos de um objeto de memória alocado por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span><span class="sxs-lookup"><span data-stu-id="abd3d-128">The [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) and [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) functions change the size or the attributes of a memory object allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span></span> <span data-ttu-id="abd3d-129">O tamanho pode aumentar ou diminuir.</span><span class="sxs-lookup"><span data-stu-id="abd3d-129">The size can increase or decrease.</span></span>

<span data-ttu-id="abd3d-130">As funções [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) e [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) liberam a memória alocada por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalRealloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc)ou [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span><span class="sxs-lookup"><span data-stu-id="abd3d-130">The [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) and [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) functions release memory allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc), or [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span></span> <span data-ttu-id="abd3d-131">Para descartar o objeto de memória especificado sem invalidar o identificador, use a função [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) ou [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) .</span><span class="sxs-lookup"><span data-stu-id="abd3d-131">To discard the specified memory object without invalidating the handle, use the [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) or [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) function.</span></span> <span data-ttu-id="abd3d-132">O identificador pode ser usado posteriormente por **GlobalRealloc** ou **LocalReAlloc** para alocar um novo bloco de memória associado ao mesmo identificador.</span><span class="sxs-lookup"><span data-stu-id="abd3d-132">The handle can be used later by **GlobalReAlloc** or **LocalReAlloc** to allocate a new block of memory associated with the same handle.</span></span>

<span data-ttu-id="abd3d-133">Para retornar informações sobre um objeto de memória especificado, use a função [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) ou [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) .</span><span class="sxs-lookup"><span data-stu-id="abd3d-133">To return information about a specified memory object, use the [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) or [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) function.</span></span> <span data-ttu-id="abd3d-134">As informações incluem a contagem de bloqueio do objeto e indica se o objeto é Descartado ou já foi Descartado.</span><span class="sxs-lookup"><span data-stu-id="abd3d-134">The information includes the object's lock count and indicates whether the object is discardable or has already been discarded.</span></span> <span data-ttu-id="abd3d-135">Para retornar um identificador para o objeto de memória associado a um ponteiro especificado, use a função [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) ou [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) .</span><span class="sxs-lookup"><span data-stu-id="abd3d-135">To return a handle to the memory object associated with a specified pointer, use the [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) or [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="abd3d-136">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="abd3d-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="abd3d-137">Comparando métodos de alocação de memória</span><span class="sxs-lookup"><span data-stu-id="abd3d-137">Comparing Memory Allocation Methods</span></span>](comparing-memory-allocation-methods.md)
</dt> </dl>

 

 
