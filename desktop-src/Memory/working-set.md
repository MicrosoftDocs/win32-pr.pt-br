---
description: O conjunto de trabalho de um processo é o conjunto de páginas no espaço de endereço virtual do processo que estão atualmente residentes na memória física.
ms.assetid: ff05276a-1d40-4844-b649-10e32e3f1937
title: Conjunto de Trabalho
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4985e7eb526d5dda8469ccc2f46bfe6fd050c745
ms.sourcegitcommit: b01ad017c152c6756f3638623fe335877644d414
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/06/2021
ms.locfileid: "111549888"
---
# <a name="working-set"></a><span data-ttu-id="86025-103">Conjunto de Trabalho</span><span class="sxs-lookup"><span data-stu-id="86025-103">Working Set</span></span>

<span data-ttu-id="86025-104">O conjunto de trabalho de um processo é o conjunto de páginas no espaço de endereço virtual do processo que estão atualmente residentes na memória física.</span><span class="sxs-lookup"><span data-stu-id="86025-104">The working set of a process is the set of pages in the virtual address space of the process that are currently resident in physical memory.</span></span> <span data-ttu-id="86025-105">O conjunto de trabalho contém apenas alocações de memória paginável; as alocações de memória não paginável, como [extensões](address-windowing-extensions.md) AWE ou de [página grande](large-page-support.md) , não são incluídas no conjunto de trabalho do.</span><span class="sxs-lookup"><span data-stu-id="86025-105">The working set contains only pageable memory allocations; nonpageable memory allocations such as [Address Windowing Extensions](address-windowing-extensions.md) (AWE) or [large page allocations](large-page-support.md) are not included in the working set.</span></span>

<span data-ttu-id="86025-106">Quando um processo faz referência à memória paginável que não está em seu conjunto de trabalho no momento, ocorre uma *falha de página* .</span><span class="sxs-lookup"><span data-stu-id="86025-106">When a process references pageable memory that is not currently in its working set, a *page fault* occurs.</span></span> <span data-ttu-id="86025-107">O manipulador de falhas de página do sistema tenta resolver a falha de página e, se tiver sucesso, a página será adicionada ao conjunto de trabalho.</span><span class="sxs-lookup"><span data-stu-id="86025-107">The system page fault handler attempts to resolve the page fault and, if it succeeds, the page is added to the working set.</span></span> <span data-ttu-id="86025-108">(O acesso às alocações AWE ou de página grande nunca causa uma falha de página, pois essas alocações não são paginável.)</span><span class="sxs-lookup"><span data-stu-id="86025-108">(Accessing AWE or large page allocations never causes a page fault, because these allocations are not pageable .)</span></span>

<span data-ttu-id="86025-109">Uma *falha de página de hardware* deve ser resolvida lendo o conteúdo da página no *repositório de backup* da página, que é o arquivo de paginação do sistema ou um arquivo mapeado por memória criado pelo processo.</span><span class="sxs-lookup"><span data-stu-id="86025-109">A *hard page fault* must be resolved by reading page contents from the page's *backing store*, which is either the system paging file or a memory-mapped file created by the process.</span></span> <span data-ttu-id="86025-110">Uma *falha de página flexível* pode ser resolvida sem acessar o armazenamento de backup.</span><span class="sxs-lookup"><span data-stu-id="86025-110">A *soft page fault* can be resolved without accessing the backing store.</span></span> <span data-ttu-id="86025-111">Uma falha de página flexível ocorre quando:</span><span class="sxs-lookup"><span data-stu-id="86025-111">A soft page fault occurs when:</span></span>

-   <span data-ttu-id="86025-112">A página está no conjunto de trabalho de algum outro processo, portanto, ela já está residente na memória.</span><span class="sxs-lookup"><span data-stu-id="86025-112">The page is in the working set of some other process, so it is already resident in memory.</span></span>
-   <span data-ttu-id="86025-113">A página está em transição, pois ela foi removida dos conjuntos de trabalho de todos os processos que estavam usando a página e ainda não foi realocada ou já está residente como resultado de uma operação de pré-busca do Gerenciador de memória.</span><span class="sxs-lookup"><span data-stu-id="86025-113">The page is in transition, because it either has been removed from the working sets of all processes that were using the page and has not yet been repurposed, or it is already resident as a result of a memory manager prefetch operation.</span></span>
-   <span data-ttu-id="86025-114">Um processo faz referência a uma página virtual alocada pela primeira vez (às vezes chamado de *falha de demanda zero*).</span><span class="sxs-lookup"><span data-stu-id="86025-114">A process references an allocated virtual page for the first time (sometimes called a *demand-zero fault*).</span></span>

<span data-ttu-id="86025-115">As páginas podem ser removidas de um conjunto de trabalho de processo como resultado das seguintes ações:</span><span class="sxs-lookup"><span data-stu-id="86025-115">Pages can be removed from a process working set as a result of the following actions:</span></span>

-   <span data-ttu-id="86025-116">O processo reduz ou esvazia o conjunto de trabalho chamando a função [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) ou [**EmptyWorkingSet**](/windows/win32/api/psapi/nf-psapi-emptyworkingset) .</span><span class="sxs-lookup"><span data-stu-id="86025-116">The process reduces or empties the working set by calling the [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) or [**EmptyWorkingSet**](/windows/win32/api/psapi/nf-psapi-emptyworkingset) function.</span></span>
-   <span data-ttu-id="86025-117">O processo chama a função [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) em um intervalo de memória que não está bloqueado.</span><span class="sxs-lookup"><span data-stu-id="86025-117">The process calls the [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) function on a memory range that is not locked.</span></span>
-   <span data-ttu-id="86025-118">O processo cancela o mapeamento de uma exibição mapeada de um arquivo usando a função [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="86025-118">The process unmaps a mapped view of a file using the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span>
-   <span data-ttu-id="86025-119">O Gerenciador de memória corta as páginas do conjunto de trabalho para criar mais memória disponível.</span><span class="sxs-lookup"><span data-stu-id="86025-119">The memory manager trims pages from the working set to create more available memory.</span></span>
-   <span data-ttu-id="86025-120">O Gerenciador de memória deve remover uma página do conjunto de trabalho para liberar espaço para uma nova página (por exemplo, porque o conjunto de trabalho está em seu tamanho máximo).</span><span class="sxs-lookup"><span data-stu-id="86025-120">The memory manager must remove a page from the working set to make room for a new page (for example, because the working set is at its maximum size).</span></span>

<span data-ttu-id="86025-121">Se vários processos compartilharem uma página, a remoção da página do conjunto de trabalho de um processo não afetará outros processos.</span><span class="sxs-lookup"><span data-stu-id="86025-121">If several processes share a page, removing the page from the working set of one process does not affect other processes.</span></span> <span data-ttu-id="86025-122">Depois que uma página é removida dos conjuntos de trabalho de todos os processos que o estavam usando, a página se torna uma *página de transição*.</span><span class="sxs-lookup"><span data-stu-id="86025-122">After a page is removed from the working sets of all processes that were using it, the page becomes a *transition page*.</span></span> <span data-ttu-id="86025-123">As páginas de transição permanecem armazenadas em cache na RAM até que a página seja referenciada novamente por algum processo ou seja realocada (por exemplo, preenchida com zeros e dada a outro processo).</span><span class="sxs-lookup"><span data-stu-id="86025-123">Transition pages remain cached in RAM until the page is either referenced again by some process or repurposed (for example, filled with zeros and given to another process).</span></span> <span data-ttu-id="86025-124">Se uma página de transição tiver sido modificada desde a última gravação no disco (ou seja, se a página for "suja"), a página deverá ser gravada em seu repositório de backup antes de poder ser realocada.</span><span class="sxs-lookup"><span data-stu-id="86025-124">If a transition page has been modified since it was last written to disk (that is, if the page is "dirty"), then the page must be written to its backing store before it can be repurposed.</span></span> <span data-ttu-id="86025-125">O sistema pode começar a gravar páginas de transição sujas em seu armazenamento de backup assim que essas páginas ficarem disponíveis.</span><span class="sxs-lookup"><span data-stu-id="86025-125">The system may start writing dirty transition pages to their backing store as soon as such pages become available.</span></span>

<span data-ttu-id="86025-126">Cada processo tem um tamanho de conjunto de trabalho mínimo e máximo que afeta o comportamento de paginação da memória virtual do processo.</span><span class="sxs-lookup"><span data-stu-id="86025-126">Each process has a minimum and maximum working set size that affect the virtual memory paging behavior of the process.</span></span> <span data-ttu-id="86025-127">Para obter o tamanho atual do conjunto de trabalho de um processo especificado, use a função [**GetProcessMemoryInfo**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo) .</span><span class="sxs-lookup"><span data-stu-id="86025-127">To obtain the current size of the working set of a specified process, use the [**GetProcessMemoryInfo**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo) function.</span></span> <span data-ttu-id="86025-128">Para obter ou alterar os tamanhos mínimo e máximo do conjunto de trabalho, use as funções [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) e [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) .</span><span class="sxs-lookup"><span data-stu-id="86025-128">To obtain or change the minimum and maximum working set sizes, use the [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) and [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) functions.</span></span>

<span data-ttu-id="86025-129">A interface de programação de aplicativo de status do processo (PSAPI) fornece várias funções que retornam informações detalhadas sobre o conjunto de trabalho de um processo.</span><span class="sxs-lookup"><span data-stu-id="86025-129">The process status application programming interface (PSAPI) provides a number of functions that return detailed information about the working set of a process.</span></span> <span data-ttu-id="86025-130">Para obter detalhes, consulte [informações do conjunto de trabalho](../psapi/working-set-information.md).</span><span class="sxs-lookup"><span data-stu-id="86025-130">For details, see [Working Set Information](../psapi/working-set-information.md).</span></span>

 

 
