---
description: Extensões AWE são um conjunto de extensões que permite que um aplicativo manipule rapidamente a memória física superior a 4 GB.
ms.assetid: 48a29922-8130-4540-86b0-0faa120566a6
title: Extensões de janelas de endereço
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8cb311bf9ecef2de334018ca3f9982a31f0b072
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828263"
---
# <a name="address-windowing-extensions"></a><span data-ttu-id="3fc13-103">Extensões de janelas de endereço</span><span class="sxs-lookup"><span data-stu-id="3fc13-103">Address Windowing Extensions</span></span>

<span data-ttu-id="3fc13-104">Extensões AWE são um conjunto de extensões que permite que um aplicativo manipule rapidamente a memória física superior a 4 GB.</span><span class="sxs-lookup"><span data-stu-id="3fc13-104">Address Windowing Extensions (AWE) is a set of extensions that allows an application to quickly manipulate physical memory greater than 4GB.</span></span> <span data-ttu-id="3fc13-105">Determinados aplicativos com uso intensivo de dados, como sistemas de gerenciamento de bancos de dados e software científico e de engenharia, precisam de acesso a caches muito grandes de data.</span><span class="sxs-lookup"><span data-stu-id="3fc13-105">Certain data-intensive applications, such as database management systems and scientific and engineering software, need access to very large caches of data.</span></span> <span data-ttu-id="3fc13-106">No caso de conjuntos de dados muito grandes, restringir o cache para se ajustar dentro de 2GB de espaço de endereço de usuário de um aplicativo é uma restrição severa.</span><span class="sxs-lookup"><span data-stu-id="3fc13-106">In the case of very large data sets, restricting the cache to fit within an application's 2GB of user address space is a severe restriction.</span></span> <span data-ttu-id="3fc13-107">Nessas situações, o cache é muito pequeno para dar suporte adequado ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3fc13-107">In these situations, the cache is too small to properly support the application.</span></span>

<span data-ttu-id="3fc13-108">O AWE resolve esse problema permitindo que os aplicativos resolvam diretamente enormes quantidades de memória enquanto continuam a usar ponteiros de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="3fc13-108">AWE solves this problem by allowing applications to directly address huge amounts of memory while continuing to use 32-bit pointers.</span></span> <span data-ttu-id="3fc13-109">O AWE permite que os aplicativos tenham caches de dados maiores que 4GB (em que há memória física suficiente).</span><span class="sxs-lookup"><span data-stu-id="3fc13-109">AWE allows applications to have data caches larger than 4GB (where sufficient physical memory is present).</span></span> <span data-ttu-id="3fc13-110">O AWE usa a memória física não paginável e exibições de janela de várias partes dessa memória física em um espaço de endereço virtual de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="3fc13-110">AWE uses physical nonpaged memory and window views of various portions of this physical memory within a 32-bit virtual address space.</span></span>

<span data-ttu-id="3fc13-111">O AWE coloca algumas restrições sobre como essa memória pode ser usada, principalmente porque essas restrições permitem mapeamento extremamente rápido, remapeamento e liberação.</span><span class="sxs-lookup"><span data-stu-id="3fc13-111">AWE places a few restrictions on how this memory may be used, primarily because these restrictions allow extremely fast mapping, remapping, and freeing.</span></span> <span data-ttu-id="3fc13-112">O gerenciamento rápido de memória é importante para esses espaços de endereço potencialmente enormes.</span><span class="sxs-lookup"><span data-stu-id="3fc13-112">Fast memory management is important for these potentially enormous address spaces.</span></span>

-   <span data-ttu-id="3fc13-113">Os intervalos de endereços virtuais alocados para o AWE não são compartilháveis com outros processos (e, portanto, não podem ser herdados).</span><span class="sxs-lookup"><span data-stu-id="3fc13-113">Virtual address ranges allocated for the AWE are not sharable with other processes (and therefore not inheritable).</span></span> <span data-ttu-id="3fc13-114">Na verdade, dois endereços virtuais AWE diferentes dentro do mesmo processo não têm permissão para mapear a mesma página física.</span><span class="sxs-lookup"><span data-stu-id="3fc13-114">In fact, two different AWE virtual addresses within the same process are not allowed to map the same physical page.</span></span> <span data-ttu-id="3fc13-115">Essas restrições fornecem remapeamento rápido e limpeza quando a memória é liberada.</span><span class="sxs-lookup"><span data-stu-id="3fc13-115">These restrictions provide fast remapping and cleanup when memory is freed.</span></span>
-   <span data-ttu-id="3fc13-116">As páginas físicas que podem ser alocadas para uma região AWE são limitadas pelo número de páginas físicas presentes no computador, já que essa memória nunca é paginada – ela é bloqueada até que o aplicativo a libere explicitamente ou saia.</span><span class="sxs-lookup"><span data-stu-id="3fc13-116">The physical pages that can be allocated for an AWE region are limited by the number of physical pages present in the machine, since this memory is never paged – it is locked down until the application explicitly frees it or exits.</span></span> <span data-ttu-id="3fc13-117">As páginas físicas alocadas para um determinado processo podem ser mapeadas para qualquer região virtual do AWE dentro do mesmo processo.</span><span class="sxs-lookup"><span data-stu-id="3fc13-117">The physical pages allocated for a given process can be mapped into any AWE virtual region within the same process.</span></span> <span data-ttu-id="3fc13-118">Os aplicativos que usam o AWE devem ter cuidado para não tomar muita memória física que fazem com que outros aplicativos façam a página excessivamente ou impeçam a criação de novos processos ou threads devido à falta de recursos.</span><span class="sxs-lookup"><span data-stu-id="3fc13-118">Applications that use AWE must be careful not to take so much physical memory that they cause other applications to page excessively or prevent creation of new processes or threads due to lack of resources.</span></span> <span data-ttu-id="3fc13-119">Use a função [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) para monitorar o uso da memória física.</span><span class="sxs-lookup"><span data-stu-id="3fc13-119">Use the [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) function to monitor physical memory use.</span></span>
-   <span data-ttu-id="3fc13-120">Os endereços virtuais AWE são sempre de leitura/gravação e não podem ser protegidos por meio de chamadas para [**usar VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) (ou seja, nenhuma memória somente leitura, memória NoAccess, páginas de proteção e similares podem ser especificados).</span><span class="sxs-lookup"><span data-stu-id="3fc13-120">AWE virtual addresses are always read/write and cannot be protected via calls to [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) (that is, no read-only memory, noaccess memory, guard pages, and the like can be specified).</span></span>
-   <span data-ttu-id="3fc13-121">Os intervalos de endereços AWE não podem ser usados para armazenar dados em buffer para chamadas de vídeo ou gráficos.</span><span class="sxs-lookup"><span data-stu-id="3fc13-121">AWE address ranges cannot be used to buffer data for graphics or video calls.</span></span>
-   <span data-ttu-id="3fc13-122">Um intervalo de memória AWE não pode ser dividido, nem pode ser excluído.</span><span class="sxs-lookup"><span data-stu-id="3fc13-122">An AWE memory range cannot be split, nor can pieces of it be deleted.</span></span> <span data-ttu-id="3fc13-123">Em vez disso, todo o intervalo de endereços virtuais deve ser excluído como uma unidade quando a exclusão é necessária.</span><span class="sxs-lookup"><span data-stu-id="3fc13-123">Instead, the entire virtual address range must be deleted as a unit when deletion is required.</span></span> <span data-ttu-id="3fc13-124">Isso significa que você deve especificar a **\_ versão mem** ao chamar [**VirtualFree**](/windows/win32/api/memoryapi/nf-memoryapi-virtualfree).</span><span class="sxs-lookup"><span data-stu-id="3fc13-124">This means you must specify **MEM\_RELEASE** when calling [**VirtualFree**](/windows/win32/api/memoryapi/nf-memoryapi-virtualfree).</span></span>
-   <span data-ttu-id="3fc13-125">Os aplicativos podem mapear várias regiões simultaneamente, desde que elas não se sobreponham.</span><span class="sxs-lookup"><span data-stu-id="3fc13-125">Applications can map multiple regions simultaneously, provided they do not overlap.</span></span>
-   <span data-ttu-id="3fc13-126">Não há suporte para aplicativos que usam AWE no modo de emulação.</span><span class="sxs-lookup"><span data-stu-id="3fc13-126">Applications that use AWE are not supported in emulation mode.</span></span> <span data-ttu-id="3fc13-127">Ou seja, um aplicativo x86 que usa funções AWE deve ser recompilado para ser executado em outro processador, enquanto a maioria dos aplicativos pode ser executada sem a recompilação em um emulador em outras plataformas.</span><span class="sxs-lookup"><span data-stu-id="3fc13-127">That is, an x86 application that uses AWE functions must be recompiled to run on another processor, whereas most applications can run without recompiling under an emulator on other platforms.</span></span>

<span data-ttu-id="3fc13-128">Essa solução resolve os problemas de memória física de maneira muito geral e amplamente aplicável.</span><span class="sxs-lookup"><span data-stu-id="3fc13-128">This solution addresses the physical memory issues in a very general, widely applicable manner.</span></span> <span data-ttu-id="3fc13-129">Alguns dos benefícios do AWE são:</span><span class="sxs-lookup"><span data-stu-id="3fc13-129">Some of the benefits of AWE are:</span></span>

-   <span data-ttu-id="3fc13-130">Um pequeno grupo de novas funções é definido para manipular a memória AWE.</span><span class="sxs-lookup"><span data-stu-id="3fc13-130">A small group of new functions is defined to manipulate AWE memory.</span></span>
-   <span data-ttu-id="3fc13-131">O AWE fornece um recurso de remapeamento muito rápido.</span><span class="sxs-lookup"><span data-stu-id="3fc13-131">AWE provides a very fast remapping capability.</span></span> <span data-ttu-id="3fc13-132">O remapeamento é feito pela manipulação de tabelas de memória virtual, não pela movimentação de dados na memória física.</span><span class="sxs-lookup"><span data-stu-id="3fc13-132">Remapping is done by manipulating virtual memory tables, not by moving data in physical memory.</span></span>
-   <span data-ttu-id="3fc13-133">O AWE fornece granularidade de tamanho de página apropriada ao processador (por exemplo, 4 KB no x86), que é mais útil para aplicativos do que páginas grandes (por exemplo, 2 MB ou 4 MB no x86).</span><span class="sxs-lookup"><span data-stu-id="3fc13-133">AWE provides page size granularity appropriate to the processor (for example, 4 KB on x86), which is more useful to applications than large pages (for example, 2MB or 4MB on x86).</span></span>

<span data-ttu-id="3fc13-134">Um aplicativo deve ter o privilégio bloquear páginas na memória para usar o AWE.</span><span class="sxs-lookup"><span data-stu-id="3fc13-134">An application must have the Lock Pages in Memory privilege to use AWE.</span></span> <span data-ttu-id="3fc13-135">Para obter esse privilégio, um administrador deve adicionar **páginas de bloqueio na memória** para as **atribuições de direitos de usuário** do usuário.</span><span class="sxs-lookup"><span data-stu-id="3fc13-135">To obtain this privilege, an administrator must add **Lock Pages in Memory** to the user's **User Rights Assignments**.</span></span> <span data-ttu-id="3fc13-136">Para obter mais informações sobre como fazer isso, consulte "direitos de usuário" na ajuda do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="3fc13-136">For more information on how to do this, see "User Rights" in the operating system help.</span></span>

<span data-ttu-id="3fc13-137">As funções a seguir compõem a API de extensões do Windows (AWE).</span><span class="sxs-lookup"><span data-stu-id="3fc13-137">The following functions make up the Address Windowing Extensions (AWE) API.</span></span>



| <span data-ttu-id="3fc13-138">Função</span><span class="sxs-lookup"><span data-stu-id="3fc13-138">Function</span></span>                                                                          | <span data-ttu-id="3fc13-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="3fc13-139">Description</span></span>                                                                                                                                                                                                                                               |
|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3fc13-140">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) e [ **VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)</span><span class="sxs-lookup"><span data-stu-id="3fc13-140">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) and [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)</span></span> | <span data-ttu-id="3fc13-141">Reserve uma parte do espaço de endereço virtual a ser usada para AWE, usando o **mem \_ físico**.</span><span class="sxs-lookup"><span data-stu-id="3fc13-141">Reserve a portion of virtual address space to use for AWE, using **MEM\_PHYSICAL**.</span></span>                                                                                                                                                                       |
| [<span data-ttu-id="3fc13-142">**AllocateUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="3fc13-142">**AllocateUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages)                    | <span data-ttu-id="3fc13-143">Aloque memória física para uso com o AWE.</span><span class="sxs-lookup"><span data-stu-id="3fc13-143">Allocate physical memory for use with AWE.</span></span>                                                                                                                                                                                                                |
| [<span data-ttu-id="3fc13-144">**MapUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="3fc13-144">**MapUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages)                              | <span data-ttu-id="3fc13-145">Mapeie (ou invalidar) endereços virtuais AWE em qualquer conjunto de páginas físicas obtidas com [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages).</span><span class="sxs-lookup"><span data-stu-id="3fc13-145">Map (or invalidate) AWE virtual addresses onto any set of physical pages obtained with [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages).</span></span>                                                                                                    |
| [<span data-ttu-id="3fc13-146">**MapUserPhysicalPagesScatter**</span><span class="sxs-lookup"><span data-stu-id="3fc13-146">**MapUserPhysicalPagesScatter**</span></span>](/windows/desktop/api/WinBase/nf-winbase-mapuserphysicalpagesscatter)                | <span data-ttu-id="3fc13-147">Mapeie (ou invalida) endereços virtuais AWE em qualquer conjunto de páginas físicas obtidas com [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages), mas com um controle mais preciso do que o fornecido pelo [**MapUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages).</span><span class="sxs-lookup"><span data-stu-id="3fc13-147">Map (or invalidate) AWE virtual addresses onto any set of physical pages obtained with [**AllocateUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-allocateuserphysicalpages), but with finer control than that provided by [**MapUserPhysicalPages**](/windows/win32/api/memoryapi/nf-memoryapi-mapuserphysicalpages).</span></span> |
| [<span data-ttu-id="3fc13-148">**FreeUserPhysicalPages**</span><span class="sxs-lookup"><span data-stu-id="3fc13-148">**FreeUserPhysicalPages**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-freeuserphysicalpages)                            | <span data-ttu-id="3fc13-149">Memória física livre que foi usada para AWE.</span><span class="sxs-lookup"><span data-stu-id="3fc13-149">Free physical memory that was used for AWE.</span></span>                                                                                                                                                                                                               |



 

 

 
