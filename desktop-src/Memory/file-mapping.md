---
description: O mapeamento de arquivo é a associação do conteúdo de um arquivo com uma parte do espaço de endereço virtual de um processo.
ms.assetid: 86a8bc81-914d-46a2-99fd-65dfd03bbcdd
title: Mapeamento de arquivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7f49162a4545d0e087e6b291e429d89049dbf57
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501761"
---
# <a name="file-mapping"></a><span data-ttu-id="309da-103">Mapeamento de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-103">File Mapping</span></span>

<span data-ttu-id="309da-104">O *mapeamento de arquivo* é a associação do conteúdo de um arquivo com uma parte do espaço de endereço virtual de um processo.</span><span class="sxs-lookup"><span data-stu-id="309da-104">*File mapping* is the association of a file's contents with a portion of the virtual address space of a process.</span></span> <span data-ttu-id="309da-105">O sistema cria um *objeto de mapeamento de arquivo* (também conhecido como um *objeto de seção*) para manter essa associação.</span><span class="sxs-lookup"><span data-stu-id="309da-105">The system creates a *file mapping object* (also known as a *section object*) to maintain this association.</span></span> <span data-ttu-id="309da-106">Uma *exibição de arquivo* é a parte do espaço de endereço virtual que um processo usa para acessar o conteúdo do arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-106">A *file view* is the portion of virtual address space that a process uses to access the file's contents.</span></span> <span data-ttu-id="309da-107">O mapeamento de arquivo permite que o processo use e/s (entrada e saída) aleatória e e/s sequencial.</span><span class="sxs-lookup"><span data-stu-id="309da-107">File mapping allows the process to use both random input and output (I/O) and sequential I/O.</span></span> <span data-ttu-id="309da-108">Ele também permite que o processo funcione com eficiência com um arquivo de dados grande, como um banco de dado, sem a necessidade de mapear o arquivo inteiro na memória.</span><span class="sxs-lookup"><span data-stu-id="309da-108">It also allows the process to work efficiently with a large data file, such as a database, without having to map the whole file into memory.</span></span> <span data-ttu-id="309da-109">Vários processos também podem usar arquivos mapeados por memória para compartilhar dados.</span><span class="sxs-lookup"><span data-stu-id="309da-109">Multiple processes can also use memory-mapped files to share data.</span></span>

<span data-ttu-id="309da-110">Processa a leitura e gravação na exibição de arquivo usando ponteiros, assim como faria com memória alocada dinamicamente.</span><span class="sxs-lookup"><span data-stu-id="309da-110">Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory.</span></span> <span data-ttu-id="309da-111">O uso do mapeamento de arquivos melhora a eficiência porque o arquivo reside no disco, mas a exibição do arquivo reside na memória.</span><span class="sxs-lookup"><span data-stu-id="309da-111">The use of file mapping improves efficiency because the file resides on disk, but the file view resides in memory.</span></span> <span data-ttu-id="309da-112">Os processos também podem manipular a exibição de arquivo com a função [**usar VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) .</span><span class="sxs-lookup"><span data-stu-id="309da-112">Processes can also manipulate the file view with the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function.</span></span>

<span data-ttu-id="309da-113">A ilustração a seguir mostra a relação entre o arquivo em disco, um objeto de mapeamento de arquivo e uma exibição de arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-113">The following illustration shows the relationship between the file on disk, a file mapping object, and a file view.</span></span>

![relação entre o arquivo no disco, um objeto de mapeamento de arquivo e uma exibição de arquivo.](images/fmap.png)

<span data-ttu-id="309da-115">O arquivo no disco pode ser qualquer arquivo que você deseja mapear na memória ou pode ser o arquivo de página do sistema.</span><span class="sxs-lookup"><span data-stu-id="309da-115">The file on disk can be any file that you want to map into memory, or it can be the system page file.</span></span> <span data-ttu-id="309da-116">O objeto de mapeamento de arquivo pode consistir em apenas parte do arquivo ou apenas.</span><span class="sxs-lookup"><span data-stu-id="309da-116">The file mapping object can consist of all or only part of the file.</span></span> <span data-ttu-id="309da-117">Ele é apoiado pelo arquivo em disco.</span><span class="sxs-lookup"><span data-stu-id="309da-117">It is backed by the file on disk.</span></span> <span data-ttu-id="309da-118">Isso significa que, quando o sistema troca páginas do objeto de mapeamento de arquivo, todas as alterações feitas no objeto de mapeamento de arquivo são gravadas no arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-118">This means that when the system swaps out pages of the file mapping object, any changes made to the file mapping object are written to the file.</span></span> <span data-ttu-id="309da-119">Quando as páginas do objeto de mapeamento de arquivo são trocadas novamente, elas são restauradas do arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-119">When the pages of the file mapping object are swapped back in, they are restored from the file.</span></span>

<span data-ttu-id="309da-120">Um modo de exibição de arquivo pode consistir em apenas parte do objeto de mapeamento de arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-120">A file view can consist of all or only part of the file mapping object.</span></span> <span data-ttu-id="309da-121">Um processo manipula o arquivo por meio de exibições de arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-121">A process manipulates the file through the file views.</span></span> <span data-ttu-id="309da-122">Um processo pode criar várias exibições para um objeto de mapeamento de arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-122">A process can create multiple views for a file mapping object.</span></span> <span data-ttu-id="309da-123">As exibições de arquivo criadas por cada processo residem no espaço de endereço virtual desse processo.</span><span class="sxs-lookup"><span data-stu-id="309da-123">The file views created by each process reside in the virtual address space of that process.</span></span> <span data-ttu-id="309da-124">Quando o processo precisa de dados de uma parte do arquivo que não seja o que está na exibição de arquivo atual, ele pode desmapear a exibição de arquivo atual e, em seguida, criar uma nova exibição de arquivo.</span><span class="sxs-lookup"><span data-stu-id="309da-124">When the process needs data from a portion of the file other than what is in the current file view, it can unmap the current file view, then create a new file view.</span></span>

<span data-ttu-id="309da-125">Quando vários processos usam o mesmo objeto de mapeamento de arquivo para criar exibições para um arquivo local, os dados são coerentes.</span><span class="sxs-lookup"><span data-stu-id="309da-125">When multiple processes use the same file mapping object to create views for a local file, the data is coherent.</span></span> <span data-ttu-id="309da-126">Ou seja, as exibições contêm cópias idênticas do arquivo no disco.</span><span class="sxs-lookup"><span data-stu-id="309da-126">That is, the views contain identical copies of the file on disk.</span></span> <span data-ttu-id="309da-127">O arquivo não pode residir em um computador remoto se você quiser compartilhar memória entre vários processos.</span><span class="sxs-lookup"><span data-stu-id="309da-127">The file cannot reside on a remote computer if you want to share memory between multiple processes.</span></span>

<span data-ttu-id="309da-128">Para mais informações, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="309da-128">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="309da-129">Criando um objeto de mapeamento de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-129">Creating a File Mapping Object</span></span>](creating-a-file-mapping-object.md)
-   [<span data-ttu-id="309da-130">Criando uma exibição de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-130">Creating a File View</span></span>](creating-a-file-view.md)
-   [<span data-ttu-id="309da-131">Compartilhando arquivos e memória</span><span class="sxs-lookup"><span data-stu-id="309da-131">Sharing Files and Memory</span></span>](sharing-files-and-memory.md)
-   [<span data-ttu-id="309da-132">Leitura e gravação de uma exibição de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-132">Reading and Writing From a File View</span></span>](reading-and-writing-from-a-file-view.md)
-   [<span data-ttu-id="309da-133">Fechando um objeto de mapeamento de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-133">Closing a File Mapping Object</span></span>](closing-a-file-mapping-object.md)
-   [<span data-ttu-id="309da-134">Segurança de mapeamento de arquivo e direitos de acesso</span><span class="sxs-lookup"><span data-stu-id="309da-134">File Mapping Security and Access Rights</span></span>](file-mapping-security-and-access-rights.md)
-   [<span data-ttu-id="309da-135">Usando mapeamento de arquivo</span><span class="sxs-lookup"><span data-stu-id="309da-135">Using File Mapping</span></span>](using-file-mapping.md)

 

 
