---
description: Para determinar o tamanho de uma página no computador atual, use a função GetSystemInfo.
ms.assetid: 953ddfc4-6126-41fb-81a3-0ce1f0fb223f
title: Trabalhando com páginas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66c12c99ada03dca1e17c72c2a5f0d5360b6a98d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104502059"
---
# <a name="working-with-pages"></a><span data-ttu-id="5ff3c-103">Trabalhando com páginas</span><span class="sxs-lookup"><span data-stu-id="5ff3c-103">Working with Pages</span></span>

<span data-ttu-id="5ff3c-104">Para determinar o tamanho de uma página no computador atual, use a função [**GetSystemInfo**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) .</span><span class="sxs-lookup"><span data-stu-id="5ff3c-104">To determine the size of a page on the current computer, use the [**GetSystemInfo**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) function.</span></span>

<span data-ttu-id="5ff3c-105">As funções [**VirtualQuery**](/windows/win32/api/memoryapi/nf-memoryapi-virtualquery) e [**VirtualQueryEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualqueryex) retornam informações sobre uma região de páginas consecutivas que começam em um endereço especificado no espaço de endereço de um processo.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-105">The [**VirtualQuery**](/windows/win32/api/memoryapi/nf-memoryapi-virtualquery) and [**VirtualQueryEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualqueryex) functions return information about a region of consecutive pages beginning at a specified address in the address space of a process.</span></span> <span data-ttu-id="5ff3c-106">**VirtualQuery** retorna informações sobre a memória no processo de chamada.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-106">**VirtualQuery** returns information about memory in the calling process.</span></span> <span data-ttu-id="5ff3c-107">**VirtualQueryEx** retorna informações sobre a memória em um processo especificado e é usada para dar suporte a depuradores que precisam de informações sobre um processo que está sendo depurado.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-107">**VirtualQueryEx** returns information about memory in a specified process and is used to support debuggers that need information about a process being debugged.</span></span> <span data-ttu-id="5ff3c-108">A região de páginas é limitada pelo endereço especificado arredondado para baixo até o limite de página mais próximo.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-108">The region of pages is bounded by the specified address rounded down to the nearest page boundary.</span></span> <span data-ttu-id="5ff3c-109">Ele se estende por todas as páginas subsequentes com os seguintes atributos em comum:</span><span class="sxs-lookup"><span data-stu-id="5ff3c-109">It extends through all subsequent pages with the following attributes in common:</span></span>

-   <span data-ttu-id="5ff3c-110">O estado de todas as páginas é o mesmo: confirmada, reservada ou gratuita.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-110">The state of all pages is the same: either committed, reserved, or free.</span></span>
-   <span data-ttu-id="5ff3c-111">Se a página inicial não for gratuita, todas as páginas na região serão parte da mesma alocação inicial de páginas que foram reservadas por uma chamada para o [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc).</span><span class="sxs-lookup"><span data-stu-id="5ff3c-111">If the initial page is not free, all pages in the region are part of the same initial allocation of pages that were reserved by a call to [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc).</span></span>
-   <span data-ttu-id="5ff3c-112">A proteção de acesso de todas as páginas é a mesma (ou seja, a **página \_ ReadOnly**, a **página \_ ReadWrite** ou a **página \_ NoAccess**).</span><span class="sxs-lookup"><span data-stu-id="5ff3c-112">The access protection of all pages is the same (that is, **PAGE\_READONLY**, **PAGE\_READWRITE**, or **PAGE\_NOACCESS**).</span></span>

<span data-ttu-id="5ff3c-113">A função [**VirtualLock**](/windows/win32/api/memoryapi/nf-memoryapi-virtuallock) permite que um processo bloqueie uma ou mais páginas de memória confirmada na memória física (RAM), impedindo que o sistema permutasse as páginas para o arquivo de paginação.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-113">The [**VirtualLock**](/windows/win32/api/memoryapi/nf-memoryapi-virtuallock) function enables a process to lock one or more pages of committed memory into physical memory (RAM), preventing the system from swapping the pages out to the paging file.</span></span> <span data-ttu-id="5ff3c-114">Ele pode ser usado para garantir que os dados críticos estejam acessíveis sem acesso ao disco.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-114">It can be used to ensure that critical data is accessible without disk access.</span></span> <span data-ttu-id="5ff3c-115">O bloqueio de páginas na memória é perigoso porque restringe a capacidade do sistema de gerenciar memória.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-115">Locking pages into memory is dangerous because it restricts the system's ability to manage memory.</span></span> <span data-ttu-id="5ff3c-116">O uso excessivo de **VirtualLock** pode prejudicar o desempenho do sistema, fazendo com que o código executável seja trocado para o arquivo de paginação.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-116">Excessive use of **VirtualLock** can degrade system performance by causing executable code to be swapped out to the paging file.</span></span> <span data-ttu-id="5ff3c-117">A função [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) desbloqueia a memória bloqueada pelo **VirtualLock**.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-117">The [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) function unlocks memory locked by **VirtualLock**.</span></span>

<span data-ttu-id="5ff3c-118">A função [**usar VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) permite que um processo modifique a proteção de acesso de qualquer página confirmada no espaço de endereço de um processo.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-118">The [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function enables a process to modify the access protection of any committed page in the address space of a process.</span></span> <span data-ttu-id="5ff3c-119">Por exemplo, um processo pode alocar páginas de leitura/gravação para armazenar dados confidenciais e, em seguida, pode alterar o acesso para somente leitura ou sem acesso para proteger contra a substituição acidental.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-119">For example, a process can allocate read/write pages to store sensitive data, and then it can change the access to read only or no access to protect against accidental overwriting.</span></span> <span data-ttu-id="5ff3c-120">O **usar VirtualProtect** normalmente é usado com páginas alocadas pelo [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), mas também funciona com páginas confirmadas por qualquer uma das outras funções de alocação.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-120">**VirtualProtect** is typically used with pages allocated by [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), but it also works with pages committed by any of the other allocation functions.</span></span> <span data-ttu-id="5ff3c-121">No entanto, o **usar VirtualProtect** altera a proteção de páginas inteiras e os ponteiros retornados pelas outras funções não são necessariamente alinhados aos limites da página.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-121">However, **VirtualProtect** changes the protection of entire pages, and pointers returned by the other functions are not necessarily aligned on page boundaries.</span></span> <span data-ttu-id="5ff3c-122">A função [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) é semelhante a **usar VirtualProtect**, exceto que ela altera a proteção da memória em um processo especificado.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-122">The [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) function is similar to **VirtualProtect**, except it changes the protection of memory in a specified process.</span></span> <span data-ttu-id="5ff3c-123">A alteração da proteção é útil para os depuradores no acesso à memória de um processo que está sendo depurado.</span><span class="sxs-lookup"><span data-stu-id="5ff3c-123">Changing the protection is useful to debuggers in accessing the memory of a process being debugged.</span></span>

 

 
