---
description: O modelo de segurança do Windows permite controlar o acesso aos objetos de mapeamento de arquivos. Para obter mais informações, consulte modelo de Access-Control.
ms.assetid: 8bbf7c98-ff83-4ed9-8b82-f08dcd31295c
title: Segurança de mapeamento de arquivo e direitos de acesso
ms.topic: article
ms.date: 10/06/2018
ms.openlocfilehash: 65d520e12d1b555e7c633f0d1e0ba5142c330ce8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105779478"
---
# <a name="file-mapping-security-and-access-rights"></a><span data-ttu-id="c0607-104">Segurança de mapeamento de arquivo e direitos de acesso</span><span class="sxs-lookup"><span data-stu-id="c0607-104">File-mapping security and access rights</span></span>

<span data-ttu-id="c0607-105">O modelo de segurança do Windows permite controlar o acesso aos objetos de mapeamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="c0607-105">The Windows security model lets you control access to file-mapping objects.</span></span> <span data-ttu-id="c0607-106">Para obter mais informações, consulte [modelo de controle de acesso](../secauthz/access-control-model.md).</span><span class="sxs-lookup"><span data-stu-id="c0607-106">For more information, see [Access-Control Model](../secauthz/access-control-model.md).</span></span>

<span data-ttu-id="c0607-107">Você pode especificar um [descritor de segurança](../secauthz/security-descriptors.md) para um objeto de mapeamento de arquivo ao chamar a função [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) .</span><span class="sxs-lookup"><span data-stu-id="c0607-107">You can specify a [security descriptor](../secauthz/security-descriptors.md) for a file-mapping object when you call the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span> <span data-ttu-id="c0607-108">Se você especificar **NULL**, o objeto obterá um descritor de segurança padrão.</span><span class="sxs-lookup"><span data-stu-id="c0607-108">If you specify **NULL**, the object gets a default security descriptor.</span></span> <span data-ttu-id="c0607-109">As ACLs no descritor de segurança padrão para um objeto de mapeamento de arquivo são provenientes do token principal ou de representação do criador.</span><span class="sxs-lookup"><span data-stu-id="c0607-109">The ACLs in the default security descriptor for a file-mapping object come from the primary or impersonation token of the creator.</span></span>

<span data-ttu-id="c0607-110">Para recuperar o descritor de segurança de um objeto de mapeamento de arquivo, chame a função [**GetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa) ou [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="c0607-110">To retrieve the security descriptor of a file-mapping object, call the [**GetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa) or [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span> <span data-ttu-id="c0607-111">Para definir o descritor de segurança de um objeto de mapeamento de arquivo, chame a função [**SetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa) ou [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="c0607-111">To set the security descriptor of a file-mapping object, call the [**SetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa) or [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="c0607-112">Os direitos de acesso válidos para objetos de mapeamento de arquivos incluem os [direitos de acesso padrão](../secauthz/standard-access-rights.md)de **excluir**, **\_ controle de leitura**, **gravação de \_ DAC** e **gravar \_ proprietário** .</span><span class="sxs-lookup"><span data-stu-id="c0607-112">The valid access rights for file-mapping objects include the **DELETE**, **READ\_CONTROL**, **WRITE\_DAC**, and **WRITE\_OWNER** [standard access rights](../secauthz/standard-access-rights.md).</span></span> <span data-ttu-id="c0607-113">Os objetos de mapeamento de arquivo não dão suporte ao direito de **sincronização** de acesso padrão.</span><span class="sxs-lookup"><span data-stu-id="c0607-113">File mapping objects do not support the **SYNCHRONIZE** standard access right.</span></span> <span data-ttu-id="c0607-114">A tabela a seguir lista os direitos de acesso específicos aos objetos de mapeamento de arquivos.</span><span class="sxs-lookup"><span data-stu-id="c0607-114">The following table lists the access rights that are specific to file-mapping objects.</span></span>

| <span data-ttu-id="c0607-115">Direito de acesso</span><span class="sxs-lookup"><span data-stu-id="c0607-115">Access right</span></span> | <span data-ttu-id="c0607-116">Significado</span><span class="sxs-lookup"><span data-stu-id="c0607-116">Meaning</span></span> |
|-|-|
| <span data-ttu-id="c0607-117">**\_todo o \_ \_ acesso ao mapa de arquivos**</span><span class="sxs-lookup"><span data-stu-id="c0607-117">**FILE\_MAP\_ALL\_ACCESS**</span></span> | <span data-ttu-id="c0607-118">Inclui todos os direitos de acesso a um objeto de mapeamento de arquivo, exceto a **\_ \_ execução do mapa de arquivo**.</span><span class="sxs-lookup"><span data-stu-id="c0607-118">Includes all access rights to a file-mapping object except **FILE\_MAP\_EXECUTE**.</span></span> <span data-ttu-id="c0607-119">As funções [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) e [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) tratam dessa mesma maneira de especificar a **\_ \_ gravação do mapa de arquivos**.</span><span class="sxs-lookup"><span data-stu-id="c0607-119">The [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) and [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) functions treat this the same as specifying **FILE\_MAP\_WRITE**.</span></span> |
| <span data-ttu-id="c0607-120">**\_execução do mapa de arquivos \_**</span><span class="sxs-lookup"><span data-stu-id="c0607-120">**FILE\_MAP\_EXECUTE**</span></span> | <span data-ttu-id="c0607-121">Permite o mapeamento de exibições executáveis do objeto de mapeamento de arquivo.</span><span class="sxs-lookup"><span data-stu-id="c0607-121">Allows mapping of executable views of the file-mapping object.</span></span> <span data-ttu-id="c0607-122">O objeto deve ter sido criado com a proteção de página que permite o acesso de execução, como **\_ executar \_ leitura de página**, **\_ executar \_ WRITECOPY** ou página **executar proteção \_ \_ ReadWrite** .</span><span class="sxs-lookup"><span data-stu-id="c0607-122">The object must have been created with page protection that allows execute access, such as **PAGE\_EXECUTE\_READ**, **PAGE\_EXECUTE\_WRITECOPY**, or **PAGE\_EXECUTE\_READWRITE** protection.</span></span>  |
| <span data-ttu-id="c0607-123">**\_leitura do mapa de arquivos \_**</span><span class="sxs-lookup"><span data-stu-id="c0607-123">**FILE\_MAP\_READ**</span></span> | <span data-ttu-id="c0607-124">Permite o mapeamento de exibições somente leitura ou de cópia em gravação do objeto de mapeamento de arquivo.</span><span class="sxs-lookup"><span data-stu-id="c0607-124">Allows mapping of read-only or copy-on-write views of the file-mapping object.</span></span>  |
| <span data-ttu-id="c0607-125">**\_gravação de mapa de arquivo \_**</span><span class="sxs-lookup"><span data-stu-id="c0607-125">**FILE\_MAP\_WRITE**</span></span> | <span data-ttu-id="c0607-126">Permite o mapeamento de exibições somente leitura, cópia em gravação ou leitura/gravação de um objeto de mapeamento de arquivo.</span><span class="sxs-lookup"><span data-stu-id="c0607-126">Allows mapping of read-only, copy-on-write, or read/write views of a file-mapping object.</span></span> <span data-ttu-id="c0607-127">O objeto deve ter sido criado com proteção de página que permita acesso de gravação, como a **página \_ ReadWrite** ou a proteção de página **\_ executar \_ ReadWrite** .</span><span class="sxs-lookup"><span data-stu-id="c0607-127">The object must have been created with page protection that allows write access, such as **PAGE\_READWRITE** or **PAGE\_EXECUTE\_READWRITE** protection.</span></span> |

<span data-ttu-id="c0607-128">O mapeamento de uma exibição de copiar na gravação de um objeto de mapeamento de arquivo requer o mesmo acesso que o mapeamento de uma exibição somente leitura.</span><span class="sxs-lookup"><span data-stu-id="c0607-128">Mapping a copy-on-write view of a file-mapping object requires the same access as mapping a read-only view.</span></span> <span data-ttu-id="c0607-129">O sinalizador de **\_ \_ cópia do mapa de arquivos** não é um direito de acesso e não deve ser especificado como parte de uma DACL em um descritor de segurança.</span><span class="sxs-lookup"><span data-stu-id="c0607-129">The **FILE\_MAP\_COPY** flag is not an access right, and it should not be specified as part of a DACL in a security descriptor.</span></span> <span data-ttu-id="c0607-130">Esse valor pode ser usado somente com funções que mapeiam uma exibição de um objeto de mapeamento de arquivo, como as funções [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) e [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) , ou com a função [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) , que trata a **cópia do \_ mapa \_ de arquivos** da mesma forma que trata a **leitura do \_ mapa \_ de arquivos**.</span><span class="sxs-lookup"><span data-stu-id="c0607-130">This value can be used only with functions that map a view of a file-mapping object, such as the [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) and [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) functions, or with the [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) function, which treats **FILE\_MAP\_COPY** the same way it treats **FILE\_MAP\_READ**.</span></span>

<span data-ttu-id="c0607-131">Você pode solicitar o direito de acesso de **\_ \_ segurança do sistema de acesso** a um objeto de mapeamento de arquivo se quiser ler ou gravar a SACL do objeto.</span><span class="sxs-lookup"><span data-stu-id="c0607-131">You can request the **ACCESS\_SYSTEM\_SECURITY** access right to a file-mapping object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="c0607-132">Para obter mais informações, consulte [listas de controle de acesso (ACLs)](../secauthz/access-control-lists.md) e [direito de acesso SACL](../secauthz/sacl-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="c0607-132">For more information, see [Access-Control Lists (ACLs)](../secauthz/access-control-lists.md) and [SACL Access Right](../secauthz/sacl-access-right.md).</span></span>
