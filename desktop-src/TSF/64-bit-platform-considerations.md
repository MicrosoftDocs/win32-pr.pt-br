---
title: Considerações de 64 bits
description: Com o aumento da disponibilidade do Windows de 64 bits, os usuários esperam métodos de entrada, como teclados internacionais em várias linguagens ou IMEs (Input Method Editors) em idiomas do leste asiático, para funcionar corretamente com os aplicativos de 32 bits e de 64 bits.
ms.assetid: 6a99ad45-202c-4fbb-9707-341bc9fde21e
keywords:
- TSF (estrutura de serviços de texto), Windows de 64 bits
- TSF (estrutura de serviços de texto), Windows de 64 bits
- serviços de texto, Windows de 64 bits
- Windows de 64 bits
- TSF (estrutura de serviços de texto), IME (editor de método de entrada)
- TSF (estrutura de serviços de texto), editor de método de entrada (IME)
- serviços de texto, editor de método de entrada (IME)
- Input Method Editor (IME)
- IME (editor de método de entrada)
- TSF (estrutura de serviços de texto), teclados internacionais
- TSF (estrutura de serviços de texto), teclados internacionais
- serviços de texto, teclados internacionais
- teclados internacionais
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 045ec699c7a433f15b92467e3072d30acbf01936
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104366179"
---
# <a name="64-bit-considerations"></a><span data-ttu-id="194f4-116">Considerações de 64 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-116">64-Bit Considerations</span></span>

<span data-ttu-id="194f4-117">Com o aumento da disponibilidade do Windows de 64 bits, os usuários esperam métodos de entrada, como teclados internacionais em várias linguagens ou IMEs (Input Method Editors) em idiomas do leste asiático, para funcionar corretamente com os aplicativos de 32 bits e de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-117">With the increasing availability of 64-bit Windows, users expect input methods, such as international keyboards in various languages or Input Method Editors (IMEs) in East Asian languages, to work properly with both 32-bit and 64-bit applications.</span></span> <span data-ttu-id="194f4-118">Ao desenvolver componentes de método de entrada ou serviços de texto para o Microsoft Windows, é importante considerar o Windows de 64 bits como uma plataforma de destino potencial para seu produto.</span><span class="sxs-lookup"><span data-stu-id="194f4-118">When developing input method components or text services for Microsoft Windows, it is important to consider 64-bit Windows as a potential target platform for your product.</span></span>

<span data-ttu-id="194f4-119">Como os IMEs e os serviços de texto (baseados na estrutura de serviços de texto) normalmente são implementados como DLLs (bibliotecas de vínculo dinâmico), é importante observar que as DLLs são criadas especificamente para uso em ambientes de 32 bits ou em ambientes de 64 bits; uma DLL criada para uso em ambientes de 32 bits não pode ser usada por aplicativos de 64 bits e vice-versa.</span><span class="sxs-lookup"><span data-stu-id="194f4-119">Because IMEs and text services (based on the Text Services Framework) are typically implemented as dynamic-link libraries (DLLs), it is important to note that DLLs are built specifically for use in either 32-bit environments or 64-bit environments; a DLL built for use in 32-bit environments cannot be used by 64-bit applications, and vice versa.</span></span>

> [!Note]  
> <span data-ttu-id="194f4-120">O WOW64 não atenua essa restrição de DLL específica de bit.</span><span class="sxs-lookup"><span data-stu-id="194f4-120">WOW64 does not mitigate this bit-specific DLL restriction.</span></span> <span data-ttu-id="194f4-121">Para obter informações sobre o WOW64, consulte [executando aplicativos de 32 bits](/windows/desktop/WinProg64/running-32-bit-applications).</span><span class="sxs-lookup"><span data-stu-id="194f4-121">For information about WOW64, see [Running 32-bit Applications](/windows/desktop/WinProg64/running-32-bit-applications).</span></span>

 

<span data-ttu-id="194f4-122">Este tópico discute considerações de design importantes para o desenvolvimento de IMEs e serviços de texto para uso em janelas de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-122">This topic discusses important design considerations for developing IMEs and text services for use on 64-bit Windows.</span></span>

## <a name="64-bit-considerations-for-imes"></a><span data-ttu-id="194f4-123">Considerações de 64 bits para IMEs</span><span class="sxs-lookup"><span data-stu-id="194f4-123">64-Bit Considerations for IMEs</span></span>

<span data-ttu-id="194f4-124">Esta seção descreve as considerações especiais envolvidas na criação de IMEs para uso com o Windows de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-124">This section describes the special considerations involved with building IMEs for use with 64-bit Windows.</span></span> <span data-ttu-id="194f4-125">Para obter informações sobre IMEs, consulte [Editor de método de entrada](/previous-versions/windows/desktop/dnacc/input-method-editor-and-text-services-framework-accessibility).</span><span class="sxs-lookup"><span data-stu-id="194f4-125">For information about IMEs, see [Input Method Editor](/previous-versions/windows/desktop/dnacc/input-method-editor-and-text-services-framework-accessibility).</span></span>

## <a name="building-32-bit-and-64-bit-versions-of-an-ime"></a><span data-ttu-id="194f4-126">Compilando versões de 32 bits e de 64 bits de um IME</span><span class="sxs-lookup"><span data-stu-id="194f4-126">Building 32-Bit and 64-Bit Versions of an IME</span></span>

<span data-ttu-id="194f4-127">Devido ao problema de compatibilidade de 32 bits/64 bits mencionado anteriormente com DLLs, algumas precauções devem ser tomadas para garantir que os IMEs trabalhem de forma transparente com qualquer aplicativo (32 bits ou 64 bits) em execução em janelas de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-127">Because of the previously mentioned 32-bit/64-bit compatibility issue with DLLs, some precautions must be taken to ensure that IMEs work transparently with any application (32-bit or 64-bit) running on 64-bit Windows.</span></span> <span data-ttu-id="194f4-128">A solução recomendada para habilitar o IME para trabalhar de forma transparente com os aplicativos de 32 bits e 64 bits em uma plataforma de 64 bits é criar e instalar versões paralelas de 32 bits e de 64 bits da DLL do IME.</span><span class="sxs-lookup"><span data-stu-id="194f4-128">The recommended solution for enabling your IME to work transparently with both 32-bit and 64-bit applications on a 64-bit platform is to build and install parallel 32-bit and 64-bit versions of the IME DLL.</span></span> <span data-ttu-id="194f4-129">Normalmente, os desenvolvedores criam DLLs paralelas de uma única fonte ajustando as configurações da plataforma de destino em seu ambiente de compilação.</span><span class="sxs-lookup"><span data-stu-id="194f4-129">Typically, developers build parallel DLLs from a single source by adjusting the target platform settings in their build environment.</span></span> <span data-ttu-id="194f4-130">Para obter mais informações sobre aplicativos de 32 bits e 64 bits de fornecimento único, confira [preparando-se para o Windows de 64 bits](/windows/desktop/WinProg64/getting-ready-for-64-bit-windows).</span><span class="sxs-lookup"><span data-stu-id="194f4-130">For more information about single-sourcing 32-bit and 64-bit applications, see [Getting Ready for 64-bit Windows](/windows/desktop/WinProg64/getting-ready-for-64-bit-windows).</span></span>

## <a name="side-by-side-installation-of-64-bit-and-32-bit-input-method-editors"></a><span data-ttu-id="194f4-131">Instalação lado a lado de editores de método de entrada de 64 bits e 32 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-131">Side-by-Side Installation of 64-Bit and 32-Bit Input Method Editors</span></span>

<span data-ttu-id="194f4-132">Os desenvolvedores de IMEs e serviços de texto devem estar cientes das considerações de 64 bits descritas em todo este tópico.</span><span class="sxs-lookup"><span data-stu-id="194f4-132">Developers of IMEs and text services should be aware of the 64-bit considerations described throughout this topic.</span></span> <span data-ttu-id="194f4-133">Felizmente, os usuários finais desses serviços não precisam se preocupar com esses detalhes específicos da implementação.</span><span class="sxs-lookup"><span data-stu-id="194f4-133">Fortunately, end users of these services need not be concerned with these implementation-specific details.</span></span> <span data-ttu-id="194f4-134">Um recurso do Windows de 64 bits é a capacidade de ocultar a necessidade de versões específicas de 64 bits e 32 bits das DLLs do IME dos usuários finais.</span><span class="sxs-lookup"><span data-stu-id="194f4-134">A feature of 64-bit Windows is the ability to hide the need for 64-bit and 32-bit-specific versions of the IME DLLs from end users.</span></span> <span data-ttu-id="194f4-135">Quando ambas as versões do IME são instaladas corretamente de maneira lado a lado, o Windows de 64 bits reconhece a presença de versões de 64 bits e de 32 bits do IME e apresenta esses IMEs específicos de bits ao usuário final como um único IME *lógico* .</span><span class="sxs-lookup"><span data-stu-id="194f4-135">When both versions of the IME are properly installed in a side-by-side manner, 64-bit Windows recognizes the presence of both 64-bit and 32-bit versions of the IME and presents these bit-specific IMEs to the end user as a single *logical* IME.</span></span> <span data-ttu-id="194f4-136">Quando um usuário final precisa usar um IME, o Windows de 64 bits escolhe de forma transparente a versão do IME (32 bits ou 64 bits) que é apropriada para as circunstâncias determinadas.</span><span class="sxs-lookup"><span data-stu-id="194f4-136">When an end user needs to use an IME, 64-bit Windows transparently chooses the version of the IME (32-bit or 64-bit) that is appropriate for the given circumstances.</span></span>

<span data-ttu-id="194f4-137">Para instalações lado a lado de IMEs de 64 bits e 32 bits para funcionar corretamente (ou seja, para representar as duas DLLs específicas de plataforma como um único IME lógico para o usuário), as seguintes condições devem ser atendidas:</span><span class="sxs-lookup"><span data-stu-id="194f4-137">For side-by-side installations of 64-bit and 32-bit IMEs to function properly (that is, to represent the two platform-specific DLLs as a single logical IME to the user), the following conditions must be met:</span></span>

-   <span data-ttu-id="194f4-138">Os desenvolvedores devem criar versões específicas da plataforma (uma para Windows de 32 bits e outra para o Windows de 64 bits) da DLL do IME.</span><span class="sxs-lookup"><span data-stu-id="194f4-138">Developers must build platform-specific versions (one for 32-bit Windows and one for 64-bit Windows) of the IME DLL.</span></span>
-   <span data-ttu-id="194f4-139">As DLLs de 32 bits e 64 bits devem compartilhar o mesmo nome de arquivo.</span><span class="sxs-lookup"><span data-stu-id="194f4-139">The 32-bit and 64-bit DLLs must share the same file name.</span></span>
-   <span data-ttu-id="194f4-140">Os requisitos do diretório de instalação devem ser seguidos.</span><span class="sxs-lookup"><span data-stu-id="194f4-140">Installation directory requirements must be followed.</span></span> <span data-ttu-id="194f4-141">Para obter mais informações, consulte Installation Directory requirements.</span><span class="sxs-lookup"><span data-stu-id="194f4-141">For more information, see Installation Directory Requirements.</span></span>

<span data-ttu-id="194f4-142">As instalações lado a lado das DLLs do IME de 32 bits e de 64 bits compartilham a mesma chave do registro para armazenar dados de configuração (incluindo o nome do arquivo DLL):</span><span class="sxs-lookup"><span data-stu-id="194f4-142">Side-by-side installations of 32-bit and 64-bit IME DLLs share the same registry key for storing configuration data (including the DLL file name):</span></span>


```C++
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Keyboard Layouts
```



<span data-ttu-id="194f4-143">A função [**ImmInstallIME**](/windows/desktop/api/imm/nf-imm-imminstallimea) é usada para criar essa chave do registro.</span><span class="sxs-lookup"><span data-stu-id="194f4-143">The [**ImmInstallIME**](/windows/desktop/api/imm/nf-imm-imminstallimea) function is used to create this registry key.</span></span> <span data-ttu-id="194f4-144">O programa de instalação e instalação para um IME deve chamar essa função para registrar o IME como um layout de teclado com suporte.</span><span class="sxs-lookup"><span data-stu-id="194f4-144">The setup and installation program for an IME must call this function to register the IME as a supported keyboard layout.</span></span> <span data-ttu-id="194f4-145">A função **ImmInstallIME** deve ser chamada apenas uma vez, a partir da versão de 32 bits ou 64 bits da dll do IME.</span><span class="sxs-lookup"><span data-stu-id="194f4-145">The **ImmInstallIME** function should be called only once, either from the 32-bit or 64-bit version of the IME DLL.</span></span>

## <a name="mismatched-ime-dlls"></a><span data-ttu-id="194f4-146">DLLs incompatíveis do IME</span><span class="sxs-lookup"><span data-stu-id="194f4-146">Mismatched IME DLLs</span></span>

<span data-ttu-id="194f4-147">A instalação somente da versão de 32 bits de um IME no Windows de 64 bits não é recomendada nem tem suporte.</span><span class="sxs-lookup"><span data-stu-id="194f4-147">Installing only the 32-bit version of an IME on 64-bit Windows is neither recommended nor supported.</span></span> <span data-ttu-id="194f4-148">Se um aplicativo de 64 bits tentar carregar um IME de 32 bits, o IME falhará silenciosamente quando o aplicativo tentar carregar o layout do teclado associado.</span><span class="sxs-lookup"><span data-stu-id="194f4-148">If a 64-bit application attempts to load a 32-bit IME, the IME fails silently when the application attempts to load the associated keyboard layout.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="194f4-149">Nenhuma caixa de diálogo ou mensagem de aviso é exibida quando ocorre um erro de conflito de IME de 32 bits/aplicativo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-149">No warning dialog or message displays when a 64-bit application/32-bit IME conflict error occurs.</span></span>

 

<span data-ttu-id="194f4-150">Considerações de 64 bits para serviços de texto</span><span class="sxs-lookup"><span data-stu-id="194f4-150">64-Bit Considerations for Text Services</span></span>

<span data-ttu-id="194f4-151">Esta seção descreve as considerações especiais envolvidas na criação de serviços de texto para uso em ambientes de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-151">This section describes the special considerations involved with building text services for use in 64-bit environments.</span></span> <span data-ttu-id="194f4-152">Para obter mais informações sobre os serviços de texto e a estrutura de serviços de texto, consulte [estrutura de serviços de texto](text-services-framework.md).</span><span class="sxs-lookup"><span data-stu-id="194f4-152">For more information about text services and the Text Services Framework, see [Text Services Framework](text-services-framework.md).</span></span>

## <a name="building-32-bit-and-64-bit-text-services"></a><span data-ttu-id="194f4-153">Criando serviços de texto de 32 bits e de 64 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-153">Building 32-Bit and 64-Bit Text Services</span></span>

<span data-ttu-id="194f4-154">Um serviço de texto é implementado como um objeto de Component Object Model (COM) exposto em uma DLL.</span><span class="sxs-lookup"><span data-stu-id="194f4-154">A text service is implemented as a Component Object Model (COM) object exposed on a DLL.</span></span> <span data-ttu-id="194f4-155">Consequentemente, os conflitos de DLL de 32 bits/64 bits podem ocorrer com os serviços de texto instalados no Windows de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-155">Consequently, 32-bit/64-bit DLL conflicts can occur with text services installed on 64-bit Windows.</span></span> <span data-ttu-id="194f4-156">Assim como acontece com os IMEs, a solução recomendada para permitir que seu serviço de texto funcione de forma transparente com os aplicativos de 32 bits e 64 bits em uma plataforma de 64 bits é criar e instalar versões paralelas de 32 bits e de 64 bits da DLL de serviço de texto.</span><span class="sxs-lookup"><span data-stu-id="194f4-156">Just as with IMEs, the recommended solution for enabling your text service to work transparently with both 32-bit and 64-bit applications on a 64-bit platform is to build and install parallel 32-bit and 64-bit versions of the text service DLL.</span></span>

## <a name="side-by-side-installation-of-64-bit-and-32-bit-text-services"></a><span data-ttu-id="194f4-157">Instalação lado a lado de serviços de texto de 64 bits e 32 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-157">Side-by-Side Installation of 64-Bit and 32-Bit Text Services</span></span>

<span data-ttu-id="194f4-158">Para uma versão de 32 bits e uma versão de 64 bits de um serviço de texto a ser instalado lado a lado e representado ao usuário como um único serviço de texto lógico, as seguintes condições devem ser atendidas:</span><span class="sxs-lookup"><span data-stu-id="194f4-158">For a 32-bit version and a 64-bit version of a text service to be installed side-by-side and represented to the user as a single, logical text service, the following conditions must be met:</span></span>

-   <span data-ttu-id="194f4-159">As duas versões do serviço de texto especificam o mesmo identificador de classe (CLSID) quando são registradas com o subsistema COM.</span><span class="sxs-lookup"><span data-stu-id="194f4-159">Both versions of the text service specify the same class identifier (CLSID) when they are registered with the COM subsystem.</span></span>
-   <span data-ttu-id="194f4-160">As duas versões do serviço de texto são registradas de forma independente.</span><span class="sxs-lookup"><span data-stu-id="194f4-160">Both versions of the text service are registered independently.</span></span> <span data-ttu-id="194f4-161">Para obter mais informações, consulte [registrando aplicativos com](/windows/desktop/com/registering-com-applications).</span><span class="sxs-lookup"><span data-stu-id="194f4-161">For more information, see [Registering COM Applications](/windows/desktop/com/registering-com-applications).</span></span>

<span data-ttu-id="194f4-162">Quando um serviço de texto de 32 bits é registrado com o Windows de 64 bits, a operação de registro é redirecionada de forma transparente para a seguinte chave do registro:</span><span class="sxs-lookup"><span data-stu-id="194f4-162">When a 32-bit text service is registered with 64-bit Windows, the registration operation is transparently redirected to the following registry key:</span></span>


```C++
HKEY_CLASS_ROOT\Wow6432Node\CLSID
```



[<span data-ttu-id="194f4-163">Redirecionador de registro</span><span class="sxs-lookup"><span data-stu-id="194f4-163">Registry Redirector</span></span>](/windows/desktop/WinProg64/registry-redirector)


```C++
HKEY_LOCAL_MACHINE\Software\Microsoft\CTF\TIP
```



<span data-ttu-id="194f4-164">[](/windows/desktop/api/Msctf/nn-msctf-itfinputprocessorprofiles)[Registro do serviço de texto](text-service-registration.md) ITfInputProcessorProfiles</span><span class="sxs-lookup"><span data-stu-id="194f4-164">[ITfInputProcessorProfiles](/windows/desktop/api/Msctf/nn-msctf-itfinputprocessorprofiles)[Text Service Registration](text-service-registration.md)</span></span>

<span data-ttu-id="194f4-165">A versão de 64 bits e a versão de 32 bits de um serviço de texto podem estar em uso simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="194f4-165">The 64-bit version and the 32-bit version of a text service might be in use simultaneously.</span></span> <span data-ttu-id="194f4-166">Nos casos em que ambas as versões de um serviço de texto precisam manipular objetos compartilhados, a coordenação de objetos compartilhados de acesso deve ser projetada no serviço de texto.</span><span class="sxs-lookup"><span data-stu-id="194f4-166">In cases where both versions of a text service need to manipulate any shared objects, coordination for access shared objects should be designed into the text service.</span></span> <span data-ttu-id="194f4-167">Cada serviço de texto é responsável pelo gerenciamento de objetos compartilhados que são usados ou necessários.</span><span class="sxs-lookup"><span data-stu-id="194f4-167">Each text service is responsible for managing any shared objects that are used or needed.</span></span>

## <a name="installing-only-32-bit-text-services-on-64-bit-windows"></a><span data-ttu-id="194f4-168">Instalando somente os serviços de texto de 32 bits no Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-168">Installing Only 32-Bit Text Services on 64-Bit Windows</span></span>

<span data-ttu-id="194f4-169">A instalação somente da versão de 32 bits de um serviço de texto em uma plataforma de 64 bits do Windows não é recomendada nem tem suporte.</span><span class="sxs-lookup"><span data-stu-id="194f4-169">Installing only the 32-bit version of a text service on a 64-bit Windows platform is neither recommended nor supported.</span></span> <span data-ttu-id="194f4-170">Devido ao mapeamento de registro que é feito em plataformas Windows de 64 bits, um aplicativo de 64 bits pode enumerar os serviços de um serviço de texto de 32 bits por meio da interface **ITfInputProcessorProfiles** .</span><span class="sxs-lookup"><span data-stu-id="194f4-170">Because of the registration mapping that is done on 64-bit Windows platforms, a 64-bit application can enumerate the services of a 32-bit Text Service through the **ITfInputProcessorProfiles** interface.</span></span> <span data-ttu-id="194f4-171">No entanto, se um aplicativo de 64 bits tentar carregar um serviço de texto de 32 bits, a carga falhará silenciosamente.</span><span class="sxs-lookup"><span data-stu-id="194f4-171">However, if a 64-bit application attempts to load a 32-bit text service, the load fails silently.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="194f4-172">Nenhuma caixa de diálogo ou mensagem de aviso é exibida quando ocorre um erro de conflito de serviço de texto de 32 bits/aplicativo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-172">No warning dialog or message displays when a 64-bit application/32-bit text service conflict error occurs.</span></span>

 

<span data-ttu-id="194f4-173">Outras considerações</span><span class="sxs-lookup"><span data-stu-id="194f4-173">Other Considerations</span></span>

## <a name="installation-directory-requirements"></a><span data-ttu-id="194f4-174">Requisitos do diretório de instalação</span><span class="sxs-lookup"><span data-stu-id="194f4-174">Installation Directory Requirements</span></span>

<span data-ttu-id="194f4-175">Esta seção descreve os requisitos para onde instalar o IME e os arquivos binários do serviço de texto.</span><span class="sxs-lookup"><span data-stu-id="194f4-175">This section describes requirements for where to install IME and text service binary files.</span></span> <span data-ttu-id="194f4-176">Se esses requisitos não forem seguidos, seu serviço de texto ou IME talvez não funcione corretamente.</span><span class="sxs-lookup"><span data-stu-id="194f4-176">If these requirements are not followed, your text service or IME might not function correctly.</span></span>

<span data-ttu-id="194f4-177">**DLLs do IME**</span><span class="sxs-lookup"><span data-stu-id="194f4-177">**IME DLLs**</span></span>

<span data-ttu-id="194f4-178">Em plataformas Windows de 64 bits, instale as DLLs do IME de 32 bits e 64 bits nos seguintes diretórios:</span><span class="sxs-lookup"><span data-stu-id="194f4-178">On 64-bit Windows platforms, install the 32-bit and 64-bit IME DLLs in the following directories:</span></span>

-   <span data-ttu-id="194f4-179">Instalar DLLs do IME de 32 bits no diretório do sistema do SysWOW64; Chame [**GetSystemWow64Directory**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directorya)ou [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) com **CSIDL \_ SYSTEMX86** para recuperar esse caminho de diretório.</span><span class="sxs-lookup"><span data-stu-id="194f4-179">Install 32-bit IME DLLs in the SysWOW64 system directory; call [**GetSystemWow64Directory**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directorya), or [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with **CSIDL\_SYSTEMX86** to retrieve this directory path.</span></span> <span data-ttu-id="194f4-180">Como alternativa, se você estiver usando [Windows Installer](/windows/desktop/Msi/about-windows-installer), use a propriedade [**SystemFolder**](/windows/desktop/Msi/systemfolder) .</span><span class="sxs-lookup"><span data-stu-id="194f4-180">Alternately, if you are using [Windows Installer](/windows/desktop/Msi/about-windows-installer), use the [**SystemFolder**](/windows/desktop/Msi/systemfolder) property.</span></span>
-   <span data-ttu-id="194f4-181">Instalar DLLs do IME de 64 bits no diretório do sistema system32; Chame [**GetSystemDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsystemdirectorya)ou **SHGetFolderPath** com o [ \_ sistema CSIDL](/windows/desktop/shell/csidl) para recuperar esse caminho de diretório.</span><span class="sxs-lookup"><span data-stu-id="194f4-181">Install 64-bit IME DLLs in the System32 system directory; call [**GetSystemDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsystemdirectorya), or **SHGetFolderPath** with [CSIDL\_SYSTEM](/windows/desktop/shell/csidl) to retrieve this directory path.</span></span> <span data-ttu-id="194f4-182">Ou, por Windows Installer, use a propriedade [**System64Folder**](/windows/desktop/Msi/system64folder) .</span><span class="sxs-lookup"><span data-stu-id="194f4-182">Or, for Windows Installer, use the [**System64Folder**](/windows/desktop/Msi/system64folder) property.</span></span>

<span data-ttu-id="194f4-183">**DLLs de serviço de texto e arquivos binários relacionados**</span><span class="sxs-lookup"><span data-stu-id="194f4-183">**Text Service DLLs and Related Binary Files**</span></span>

<span data-ttu-id="194f4-184">Em plataformas Windows de 64 bits, instale as DLLs de serviço de texto de 32 bits e 64 bits, bem como quaisquer outros arquivos binários relacionados ao seu serviço de texto ou IME nos seguintes diretórios:</span><span class="sxs-lookup"><span data-stu-id="194f4-184">On 64-bit Windows platforms, install the 32-bit and 64-bit text service DLLs, as well as any other binary files related to your text service or IME, in the following directories:</span></span>

-   <span data-ttu-id="194f4-185">Instalar DLLs de serviço de texto de 32 bits e quaisquer outros arquivos binários de 32 bits em um subdiretório no diretório arquivos de programas (x86); Chame **SHGetFolderPath** com **FILESX86 de \_ programa \_ CSIDL** para recuperar esse caminho de diretório.</span><span class="sxs-lookup"><span data-stu-id="194f4-185">Install 32-bit text service DLLs and any other 32-bit binary files in a subdirectory in the Program Files (x86) directory; call **SHGetFolderPath** with **CSIDL\_PROGRAM\_FILESX86** to retrieve this directory path.</span></span> <span data-ttu-id="194f4-186">Ou, por Windows Installer, use a propriedade [**ProgramFilesFolder**](/windows/desktop/Msi/programfilesfolder) .</span><span class="sxs-lookup"><span data-stu-id="194f4-186">Or, for Windows Installer, use the [**ProgramFilesFolder**](/windows/desktop/Msi/programfilesfolder) property.</span></span>
-   <span data-ttu-id="194f4-187">Instale DLLs de serviço de texto de 64 bits e quaisquer outros arquivos binários de 64 bits em um subdiretório no diretório arquivos de programas; Chame **SHGetFolderPath** com **arquivos de \_ programa \_ CSIDL** para recuperar esse caminho de diretório.</span><span class="sxs-lookup"><span data-stu-id="194f4-187">Install 64-bit text service DLLs and any other 64-bit binary files in a subdirectory under the Program Files directory; call **SHGetFolderPath** with **CSIDL\_PROGRAM\_FILES** to retrieve this directory path.</span></span> <span data-ttu-id="194f4-188">Ou, por Windows Installer, use a propriedade [**ProgramFiles64Folder**](/windows/desktop/Msi/programfiles64folder) .</span><span class="sxs-lookup"><span data-stu-id="194f4-188">Or, for Windows Installer, use the [**ProgramFiles64Folder**](/windows/desktop/Msi/programfiles64folder) property.</span></span>

<span data-ttu-id="194f4-189">Se você não estiver usando um pacote de Windows Installer para instalar o IME ou o serviço de texto, é altamente recommnded que você use um aplicativo de instalação de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-189">If you are not using a Windows Installer package to install your IME or text service, it is strongly recommnded that you use a 64-bit installation application.</span></span> <span data-ttu-id="194f4-190">O redirecionador do sistema de arquivos do WOW64 pode fazer com que instaladores de 32 bits coloquem arquivos nos diretórios errados (por exemplo, o redirecionamento do sistema de arquivos do WOW64 pode fazer com que os arquivos destinados ao diretório system32 sejam instalados no diretório SysWOW64).</span><span class="sxs-lookup"><span data-stu-id="194f4-190">The WOW64 file system redirector might cause 32-bit installers to place files in the wrong directories (for example, WOW64 file system redirection might cause files intended for the System32 directory to be installed in the SysWOW64 directory instead).</span></span> <span data-ttu-id="194f4-191">Se você precisar usar um instalador de 32 bits, desabilite o redirecionamento de arquivo do WOW64 durante o processo de instalação para garantir que o serviço de redirecionamento de arquivo não cause nenhum redirecionamento indesejado durante o processo de instalação.</span><span class="sxs-lookup"><span data-stu-id="194f4-191">If you must use a 32-bit installer, disable WOW64 file redirection during the installation process to ensure that the file-redirector service does not cause any unintended redirection during the installation process.</span></span> <span data-ttu-id="194f4-192">Para obter informações sobre o redirecionador do sistema de arquivos do WOW64, consulte [redirecionador do sistema de arquivos](/windows/desktop/WinProg64/file-system-redirector).</span><span class="sxs-lookup"><span data-stu-id="194f4-192">For information about the WOW64 file system redirector, see [File System Redirector](/windows/desktop/WinProg64/file-system-redirector).</span></span> <span data-ttu-id="194f4-193">Para obter informações sobre como desabilitar ou habilitar o redirecionamento do sistema de arquivos do WOW64, consulte [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection).</span><span class="sxs-lookup"><span data-stu-id="194f4-193">For information about how to disable or enable WOW64 file system redirection, see [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection).</span></span>

> [!TIP]
>
> <span data-ttu-id="194f4-194">Evite caminhos de instalação embutidos em código.</span><span class="sxs-lookup"><span data-stu-id="194f4-194">Avoid hard-coded installation paths.</span></span> <span data-ttu-id="194f4-195">Para obter mais informações, consulte [Localizar diretórios usando a interface de programação de aplicativos que não Hard-Coded caminhos](/previous-versions//ms675638(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="194f4-195">For more information, see [Locate Directories Using the Application Programming Interface Not Hard-Coded Paths](/previous-versions//ms675638(v=vs.85))</span></span>

 

> [!IMPORTANT]
>
> <span data-ttu-id="194f4-196">Não instale nenhum arquivo de serviço de texto ou IME no diretório especial% WINDIR% \\ IME (por padrão, c: \\ Windows \\ IME).</span><span class="sxs-lookup"><span data-stu-id="194f4-196">Do not install any IME or text service files in the special directory %WINDIR%\\IME (by default, c:\\Windows\\IME ).</span></span> <span data-ttu-id="194f4-197">Esse diretório contém arquivos do sistema que dão suporte a serviços de texto e IMEs; Ele não deve conter nenhum arquivo de serviço de texto ou IME de terceiros, e não há suporte para o redirecionamento do sistema de arquivos do WOW64 para esse diretório.</span><span class="sxs-lookup"><span data-stu-id="194f4-197">This directory contains system files that support text services and IMEs; it is not intended to contain any third-party IME or text service files, and WOW64 file system redirection is not supported for this directory.</span></span>

 

## <a name="dual-ctfmonexe-processes-run-on-64-bit-windows-platforms"></a><span data-ttu-id="194f4-198">Processos de Ctfmon.exe duplo executados em plataformas Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-198">Dual Ctfmon.exe Processes Run on 64-Bit Windows Platforms</span></span>

<span data-ttu-id="194f4-199">O processo de ctfmon.exe gerencia a estrutura de serviços de texto na área de trabalho e também fornece a interface do usuário da barra de idiomas.</span><span class="sxs-lookup"><span data-stu-id="194f4-199">The ctfmon.exe process manages the Text Services Framework on the desktop and also provides the language bar user interface (UI).</span></span> <span data-ttu-id="194f4-200">No Windows de 64 bits, uma versão de 32 bits e uma versão de 64 bits do processo de ctfmon.exe são executadas simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="194f4-200">On 64-bit Windows, a 32-bit version and a 64-bit version of the ctfmon.exe process run simultaneously.</span></span> <span data-ttu-id="194f4-201">O processo de ctfmon.exe de 64 bits gerencia serviços de texto de 64 bits e, da mesma forma, o processo de ctfmon.exe de 32 bits gerencia serviços de texto de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-201">The 64-bit ctfmon.exe process manages 64-bit text services, and, likewise, the 32-bit ctfmon.exe process manages 32-bit text services.</span></span>

## <a name="display-behavior-for-different-versions-of-the-language-bar-ui"></a><span data-ttu-id="194f4-202">Exibir o comportamento de diferentes versões da interface do usuário da barra de idiomas</span><span class="sxs-lookup"><span data-stu-id="194f4-202">Display Behavior for Different Versions of the Language Bar UI</span></span>

<span data-ttu-id="194f4-203">No Windows de 64 bits, somente a interface do usuário da barra de idiomas associada à versão de 64 bits de um serviço de texto é mostrada.</span><span class="sxs-lookup"><span data-stu-id="194f4-203">On 64-bit Windows, only the language bar UI associated with the 64-bit version of a text service is ever shown.</span></span> <span data-ttu-id="194f4-204">Nos casos em que um aplicativo de 32 bits está usando a versão de 32 bits de um serviço de texto, o Windows de 64 bits insere automaticamente a interface do usuário da barra de idiomas para o serviço de texto de 64 bits equivalente.</span><span class="sxs-lookup"><span data-stu-id="194f4-204">In cases where a 32-bit application is using the 32-bit version of a text service, 64-bit Windows automatically inserts the language bar UI for the equivalent 64-bit text service.</span></span> <span data-ttu-id="194f4-205">Isso garante que nenhum trabalho especial seja necessário para que os serviços de texto de 32 bits apareçam na versão de 64 bits da barra de idiomas.</span><span class="sxs-lookup"><span data-stu-id="194f4-205">This ensures that no special work is required for 32-bit text services to appear in the 64-bit version of the language bar.</span></span>

## <a name="control-panel-considerations-on-64-bit-windows"></a><span data-ttu-id="194f4-206">Considerações sobre o painel de controle no Windows de 64 bits</span><span class="sxs-lookup"><span data-stu-id="194f4-206">Control Panel Considerations on 64-Bit Windows</span></span>

<span data-ttu-id="194f4-207">o Windows de 64 bits fornece acesso a versões de 32 bits e 64 bits de serviços de texto e IMEs por meio do painel de controle.</span><span class="sxs-lookup"><span data-stu-id="194f4-207">64-bit Windows provides access to both 32-bit and 64-bit versions of text services and IMEs through the Control Panel.</span></span> <span data-ttu-id="194f4-208">Para acessar as configurações do painel de controle para versões específicas de serviços de texto ou IMEs, examine os locais a seguir.</span><span class="sxs-lookup"><span data-stu-id="194f4-208">To access Control Panel settings for specific versions of text services or IMEs, look in the following locations.</span></span>

-   <span data-ttu-id="194f4-209">**Acesso ao painel de controle para IMEs e serviços de texto de 32 bits:** Configurações de > de inicialização – painel de controle >-> exibir ícones do painel de controle x86</span><span class="sxs-lookup"><span data-stu-id="194f4-209">**Control Panel access for 32-bit Text Services and IMEs:** Start -> Settings -> Control Panel -> View x86 Control Panel Icons</span></span>
-   <span data-ttu-id="194f4-210">**Acesso ao painel de controle para IMEs e serviços de texto de 64 bits:** Configurações de >-> painel de controle-> opções regionais e de idioma</span><span class="sxs-lookup"><span data-stu-id="194f4-210">**Control Panel access for 64-bit Text Services and IMEs:** Start -> Settings -> Control Panel -> Regional and Language Options</span></span>

<span data-ttu-id="194f4-211">Pode haver circunstâncias em que algumas configurações podem estar disponíveis apenas por meio do painel de controle de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-211">There may be circumstances where some settings might be available only through the 32-bit Control Panel.</span></span> <span data-ttu-id="194f4-212">Nesses casos, certifique-se de que os usuários do seu serviço de texto ou IME estejam cientes disso, fornecendo a documentação apropriada ou oferecendo dicas de interface do usuário em sua interface de configurações de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="194f4-212">In these cases, be sure that users of your text service or IME are aware of this, by providing appropriate documentation or offering UI hints in your 64-bit settings interface.</span></span>

 

 