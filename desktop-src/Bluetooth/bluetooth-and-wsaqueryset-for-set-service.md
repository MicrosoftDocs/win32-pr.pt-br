---
title: Bluetooth e WSAQUERYSET para o serviço set
description: Usando a estrutura WSAQUERYSET com a função WSASetService para registrar ou remover instâncias de serviço no namespace do Bluetooth (NS \_ BTH).
ms.assetid: e582156d-a298-4d9b-8ed1-4c558fa4f203
keywords:
- Bluetooth e WSAQUERYSET para o serviço set Bluetooth
- WSAQUERYSET Bluetooth, para o serviço de conjunto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64a632cad2c813856367d4565bc69e0d4baf2eba
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103917388"
---
# <a name="bluetooth-and-wsaqueryset-for-set-service"></a>Bluetooth e WSAQUERYSET para o serviço set

O Bluetooth usa a estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para facilitar a descoberta de dispositivos e serviços no namespace do Bluetooth, NS \_ BTH.

A função [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) usa a estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para registrar ou remover instâncias de serviço no namespace do Bluetooth. A tabela a seguir lista os valores de membro na estrutura **WSAQUERYSET** .

| Membro                      | Valor necessário (entrada)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Saída                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **dwSize**                  | Deve ser definido como **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)). Usado como um mecanismo de controle de versão.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwOutputFlags**           | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszServiceInstanceName** | Opcional, mas recomendado. Usado para construir o atributo ServiceName do Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpServiceClassId**        | Obrigatórios. GUID correspondente à classe de serviço. Esse valor deve corresponder a um GUID do documento de números atribuídos do Bluetooth para perfis conhecidos ou a um UUID exclusivo gerado pelo aplicativo para aplicativos que não são baseados em perfil. Usado para construir uma sequência de atributo ServiceClassIdList com esta como seu único membro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpVersion**               | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszComment**             | Opcional. Usado para construir o atributo de ServiceDescription do Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNameSpace**             | Namespace no qual restringir o serviço. Deve ser NS \_ BTH.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpNSProviderId**          | Não necessário.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszContext**             | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfProtocols**     | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpafpProtocols**          | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszQueryString**         | Não usado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfCsAddrs**       | Número de endereços a serem registrados. Deve ser 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpcsaBuffer**             | Obrigatório se **lpBlob** não tiver sido populado com um fluxo SDP bruto. Ponteiro para uma estrutura de [**\_ informações de CSADDR**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info) com seu membro **localaddr. LpSockaddr** apontando para o [**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) onde o servidor está escutando conexões. A função [**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname) pode ser usada para retornar a **estrutura \_ BTH SOCKADDR** para um soquete associado. As informações no membro **lpcsaBuffer** são usadas pelo sistema para construir o atributo SDP ProtocolDescriptorList do Bluetooth. O protocolo e a porta fornecidos em **lpcsaBuffer** devem ser exclusivos (não registrados anteriormente) e são usados para indexar o registro para as chamadas subsequentes a serem excluídas. Usado para construir o atributo ProtocolDescriptorList Bluetooth do registro SDP. | Nenhum.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpBlob**                  | Opcional. Ponteiro para uma estrutura de [**blob**](/windows/desktop/api/nspapi/ns-nspapi-blob) que aponta para uma estrutura de [**serviço de \_ conjunto \_ de BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) , permitindo que o cliente forneça uma estrutura específica de Bluetooth que contém um registro SDP binário construído pelo aplicativo. Se **lpBlob** for fornecido para a função [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) , todos os outros membros da estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) , exceto **dwSize** e **dwNameSpace** , serão ignorados. Consulte [Bluetooth e BLOB](bluetooth-and-blob.md) para obter mais informações. O envio de um registro SDP binário é necessário em muitos casos, porque um número limitado de atributos SDP pode ser convertido da estrutura **WSAQUERYSET** e as cadeias de caracteres são convertidas somente para a codificação de idioma padrão UTF-8.           | Se as estruturas de [**\_ \_ serviço**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) de [**blob**](/windows/desktop/api/nspapi/ns-nspapi-blob) e BTH opcionais tiverem sido fornecidas na entrada, juntamente com a versão ULONG e os valores de identificador que devem ser apontados pelo **serviço do BTH \_ \_ set**, a versão será atualizada para conter o valor da versão BTH \_ SDP \_ para o provedor Bluetooth Windows Sockets e o identificador será fornecido, o que será necessário para excluir subsequentemente o registro. |



 

> [!Note]  
> Para remover um serviço, os únicos membros necessários na estrutura [**de \_ \_ serviço do conjunto de BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) são os membros **pSdpVersion** e **pRecordHandle** .

 

## <a name="related-topics"></a>Tópicos relacionados

<dl> <dt>

[Bluetooth e WSAQUERYSET para consulta de dispositivo](bluetooth-and-wsaqueryset-for-device-inquiry.md)
</dt> <dt>

[Bluetooth e WSAQUERYSET para consulta de serviço](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[Bluetooth e BLOB](bluetooth-and-blob.md)
</dt> <dt>

[Bluetooth e WSASetService](bluetooth-and-wsasetservice.md)
</dt> <dt>

[**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob)
</dt> <dt>

[**BTH \_ definir \_ serviço**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service)
</dt> <dt>

[**informações de CSADDR \_**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info)
</dt> <dt>

[**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname)
</dt> <dt>

[**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[Windows Sockets](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

 

 