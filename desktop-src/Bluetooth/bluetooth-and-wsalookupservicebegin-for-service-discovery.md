---
title: Bluetooth e WSALookupServiceBegin para descoberta de serviço
description: Para descobrir a existência de um serviço específico em um servidor Bluetooth, os clientes usam as funções WSALookupServiceBegin, WSALookupServiceNext e WSALookupServiceEnd.
ms.assetid: d9961600-cdca-42ec-92eb-118b8186ed2e
keywords:
- Bluetooth e WSALookupServiceBegin para o Bluetooth de descoberta de serviço
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 274b3beb3de7683bd43a0f99350db6e1a347f51e
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/08/2020
ms.locfileid: "103824038"
---
# <a name="bluetooth-and-wsalookupservicebegin-for-service-discovery"></a><span data-ttu-id="64e15-104">Bluetooth e WSALookupServiceBegin para descoberta de serviço</span><span class="sxs-lookup"><span data-stu-id="64e15-104">Bluetooth and WSALookupServiceBegin for Service Discovery</span></span>

<span data-ttu-id="64e15-105">Para descobrir a existência de um serviço específico em um servidor Bluetooth, os clientes usam as funções [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)e [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="64e15-105">To discover the existence of a particular service on a Bluetooth server, clients use the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta), and [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) functions.</span></span> <span data-ttu-id="64e15-106">As consultas podem ser executadas para endereços locais e remotos, mas as conexões só podem ser estabelecidas com endereços remotos.</span><span class="sxs-lookup"><span data-stu-id="64e15-106">Queries can be performed for local and remote addresses, but connections can only be established with remote addresses.</span></span> <span data-ttu-id="64e15-107">Os identificadores de serviço descobertos durante essa operação não podem ser usados para excluir o serviço por meio de [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span><span class="sxs-lookup"><span data-stu-id="64e15-107">Service handles discovered during this operation cannot be used to delete the service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span></span> <span data-ttu-id="64e15-108">O loopback não tem suporte do RFCOMM.</span><span class="sxs-lookup"><span data-stu-id="64e15-108">Loopback is not supported by RFCOMM.</span></span>

<span data-ttu-id="64e15-109">Dois tipos básicos de consultas de descoberta de serviço podem ser executados:</span><span class="sxs-lookup"><span data-stu-id="64e15-109">Two basic types of service discovery queries can be performed:</span></span>

-   <span data-ttu-id="64e15-110">Consultas para um ou mais serviços no dispositivo local</span><span class="sxs-lookup"><span data-stu-id="64e15-110">Queries for one or more services on the local device</span></span>
-   <span data-ttu-id="64e15-111">Consultas para um ou mais serviços em um dispositivo de mesmo nível especificado</span><span class="sxs-lookup"><span data-stu-id="64e15-111">Queries for one or more services on a specified peer device</span></span>

<span data-ttu-id="64e15-112">A função [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) recebe uma estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) em seu parâmetro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="64e15-112">The [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function receives a [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure in its *lpqsRestrictions* parameter.</span></span> <span data-ttu-id="64e15-113">**WSALookupServiceBegin** executa uma consulta de cliente com base no conjunto de restrições de pesquisa que o **WSAQUERYSET** contém.</span><span class="sxs-lookup"><span data-stu-id="64e15-113">**WSALookupServiceBegin** performs a client query based on the set of search restrictions that the **WSAQUERYSET** contains.</span></span> <span data-ttu-id="64e15-114">Os clientes Bluetooth devem especificar as restrições, listadas na tabela a seguir, na estrutura **WSAQUERYSET** ao usar a função **WSALookupServiceBegin** para consultar serviços.</span><span class="sxs-lookup"><span data-stu-id="64e15-114">Bluetooth clients must specify the restrictions, listed in the following table, in the **WSAQUERYSET** structure when using the **WSALookupServiceBegin** function to query for services.</span></span>



| <span data-ttu-id="64e15-115">Membro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="64e15-115">WSAQUERYSET member</span></span>    | <span data-ttu-id="64e15-116">Restrição</span><span class="sxs-lookup"><span data-stu-id="64e15-116">Restriction</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64e15-117">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="64e15-117">**dwSize**</span></span>            | <span data-ttu-id="64e15-118">Defina como **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="64e15-118">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="64e15-119">**lpServiceClassId**</span><span class="sxs-lookup"><span data-stu-id="64e15-119">**lpServiceClassId**</span></span>  | <span data-ttu-id="64e15-120">Defina como o UUID Bluetooth mais específico que pode ser usado para determinar o escopo da consulta.</span><span class="sxs-lookup"><span data-stu-id="64e15-120">Set to the most specific Bluetooth UUID that can be used to determine the scope of the query.</span></span> <span data-ttu-id="64e15-121">Por exemplo, a configuração de **lpServiceClassId** para o UUID do protocolo L2CAP resulta em todos os serviços L2CAP retornados, basicamente enumerando todos os registros SD no destino.</span><span class="sxs-lookup"><span data-stu-id="64e15-121">For example, setting **lpServiceClassId** to the UUID of the L2CAP protocol results in all L2CAP services returned, essentially enumerating all SD records on the target.</span></span> <span data-ttu-id="64e15-122">No entanto, definir o UUID para um serviço específico retorna apenas as instâncias desse serviço.</span><span class="sxs-lookup"><span data-stu-id="64e15-122">Setting the UUID to a specific service, however, returns only the instances of that service.</span></span><br/> |
| <span data-ttu-id="64e15-123">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="64e15-123">**dwNameSpace**</span></span>       | <span data-ttu-id="64e15-124">Defina como **ns \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="64e15-124">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="64e15-125">**dwNumberOfCsAddrs**</span><span class="sxs-lookup"><span data-stu-id="64e15-125">**dwNumberOfCsAddrs**</span></span> | <span data-ttu-id="64e15-126">Defina como 0.</span><span class="sxs-lookup"><span data-stu-id="64e15-126">Set to 0.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="64e15-127">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="64e15-127">**lpszContext**</span></span>       | <span data-ttu-id="64e15-128">Defina para o endereço de dispositivo Bluetooth com o qual estabelecer uma conexão SDP para executar a consulta de serviços.</span><span class="sxs-lookup"><span data-stu-id="64e15-128">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="64e15-129">Esse membro deve ser uma cadeia de caracteres que é convertida usando a função [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="64e15-129">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="64e15-130">Se o endereço de rádio local for fornecido, os registros SDP locais serão pesquisados.</span><span class="sxs-lookup"><span data-stu-id="64e15-130">If the local radio address is supplied, the local SDP records are searched.</span></span><br/>                                             |
| <span data-ttu-id="64e15-131">Outros membros</span><span class="sxs-lookup"><span data-stu-id="64e15-131">Other members</span></span>         | <span data-ttu-id="64e15-132">Todos os outros membros da estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) são ignorados.</span><span class="sxs-lookup"><span data-stu-id="64e15-132">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="64e15-133">A conexão SDP com o dispositivo remoto não permanece ativa após a função [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) concluir uma consulta de serviço; a conexão é encerrada antes de o **WSALookupServiceBegin** retornar.</span><span class="sxs-lookup"><span data-stu-id="64e15-133">The SDP connection to the remote device does not remain active after the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function completes a service query; the connection is terminated before **WSALookupServiceBegin** returns.</span></span> <span data-ttu-id="64e15-134">Os aplicativos que exigem a conexão SDP permanecerão ativas após a conclusão de uma consulta de serviço devem especificar o UUID de classe de serviço ao qual se conectar usando o membro Service **ClassID** da estrutura [**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) ao emitir a chamada de função do Windows Sockets [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="64e15-134">Applications that require the SDP connection to remain active after a service query completes should specify the service class UUID to which to connect by using the **serviceClassId** member of the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure when issuing the Windows Sockets [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call.</span></span>

<span data-ttu-id="64e15-135">Os sinalizadores, listados na tabela a seguir, são usados no parâmetro *dwControlFlags* das funções [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) e [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) para controlar os resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="64e15-135">The flags, listed in the following table, are used in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) and [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) functions to control the query results.</span></span> <span data-ttu-id="64e15-136">Os **\_ contêineres Lup** e sinalizadores **Lup \_ FLUSHCACHE** são usados pela função **WSALookupServiceBegin** ; o restante dos sinalizadores é usado em chamadas para a função **WSALookupServiceNext** .</span><span class="sxs-lookup"><span data-stu-id="64e15-136">The **LUP\_CONTAINERS** and **LUP\_FLUSHCACHE** flags are used by the **WSALookupServiceBegin** function; the rest of the flags are used in calls to the **WSALookupServiceNext** function.</span></span>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="64e15-137">Sinalizador</span><span class="sxs-lookup"><span data-stu-id="64e15-137">Flag</span></span></th>
<th><span data-ttu-id="64e15-138">Resultado</span><span class="sxs-lookup"><span data-stu-id="64e15-138">Result</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="64e15-139"><strong>LUP_CONTAINERS</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-139"><strong>LUP_CONTAINERS</strong></span></span></td>
<td><span data-ttu-id="64e15-140">Não deve ser definido.</span><span class="sxs-lookup"><span data-stu-id="64e15-140">Must not be set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="64e15-141"><strong>LUP_FLUSHCACHE</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-141"><strong>LUP_FLUSHCACHE</strong></span></span></td>
<td><span data-ttu-id="64e15-142">Os aplicativos geralmente devem especificar <strong>LUP_FLUSHCACHE</strong>.</span><span class="sxs-lookup"><span data-stu-id="64e15-142">Applications should generally specify <strong>LUP_FLUSHCACHE</strong>.</span></span> <span data-ttu-id="64e15-143">Esse sinalizador instrui o sistema a ignorar todas as informações armazenadas em cache e estabelecer uma conexão SDP over-the-Air para o dispositivo especificado para executar a pesquisa SDP.</span><span class="sxs-lookup"><span data-stu-id="64e15-143">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="64e15-144">Essa operação não armazenada em cache pode levar vários segundos (enquanto uma pesquisa armazenada em cache retorna rapidamente).</span><span class="sxs-lookup"><span data-stu-id="64e15-144">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="64e15-145">No momento, o Bluetooth não armazena de forma proativa os registros SDP de dispositivos próximos, nem atualmente faz o cache de consultas anteriores no momento.</span><span class="sxs-lookup"><span data-stu-id="64e15-145">Bluetooth currently does not proactively cache SDP records from nearby devices, nor does it currently aggressively cache previous queries.</span></span> <span data-ttu-id="64e15-146">Portanto, os aplicativos devem prever que as consultas podem não retornar resultados (com um código de erro de <strong>WSASERVICE_NOT_FOUND</strong>) se <strong>LUP_FLUSHCACHE</strong> não for especificado.</span><span class="sxs-lookup"><span data-stu-id="64e15-146">Therefore, applications should anticipate that queries may return no results (with an error code of <strong>WSASERVICE_NOT_FOUND</strong>) if <strong>LUP_FLUSHCACHE</strong> is not specified.</span></span> <span data-ttu-id="64e15-147">Os dados armazenados em cache que estão disponíveis usando a interface do Windows Sockets podem ser aprimorados no futuro.</span><span class="sxs-lookup"><span data-stu-id="64e15-147">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="64e15-148"><strong>LUP_RES_SERVICE</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-148"><strong>LUP_RES_SERVICE</strong></span></span></td>
<td><span data-ttu-id="64e15-149">Retornar informações sobre o endereço Bluetooth local.</span><span class="sxs-lookup"><span data-stu-id="64e15-149">Return information about the local Bluetooth address.</span></span> <span data-ttu-id="64e15-150">Esse sinalizador terá efeito somente se <strong>LUP_RETURN_ADDR</strong> também for especificado.</span><span class="sxs-lookup"><span data-stu-id="64e15-150">This flag has an effect only if <strong>LUP_RETURN_ADDR</strong> is also specified.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="64e15-151"><strong>LUP_RETURN_NAME</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-151"><strong>LUP_RETURN_NAME</strong></span></span></td>
<td><span data-ttu-id="64e15-152">Retorne o nome de exibição do serviço no membro <strong>lpszServiceInstanceName</strong> da estrutura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> para cada chamada para a função <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="64e15-152">Return the display name of the service in the <strong>lpszServiceInstanceName</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="64e15-153"><strong>LUP_RETURN_TYPE</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-153"><strong>LUP_RETURN_TYPE</strong></span></span></td>
<td><span data-ttu-id="64e15-154">Retorne a ID de classe de serviço no membro <strong>lpServiceClassId</strong> da estrutura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="64e15-154">Return the service class ID in the <strong>lpServiceClassId</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="64e15-155">O uso desse sinalizador só é aplicável à função <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="64e15-155">Use of this flag is only applicable to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> function.</span></span> <span data-ttu-id="64e15-156">Esse valor é sempre zero para <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="64e15-156">This value is always zero for <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="64e15-157"><strong>LUP_RETURN_ADDR</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-157"><strong>LUP_RETURN_ADDR</strong></span></span></td>
<td><span data-ttu-id="64e15-158">Retorne um endereço no membro <strong>lpcsaBuffer</strong> para ser usado com chamadas de função de <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>conexão</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="64e15-158">Return an address in the <strong>lpcsaBuffer</strong> member to be used with <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>connect</strong></a> function calls.</span></span> <span data-ttu-id="64e15-159">O endereço retornado contém o número da porta.</span><span class="sxs-lookup"><span data-stu-id="64e15-159">The returned address contains the port number.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="64e15-160"><strong>LUP_RETURN_BLOB</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-160"><strong>LUP_RETURN_BLOB</strong></span></span></td>
<td><span data-ttu-id="64e15-161">Retorne os registros SD correspondentes no membro <strong>lpBlob</strong> , formatados de acordo com a especificação de registro SDP do Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="64e15-161">Return the matching SD records in the <strong>lpBlob</strong> member, formatted according to the Bluetooth SDP record specification.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="64e15-162"><strong>LUP_RETURN_ALL</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-162"><strong>LUP_RETURN_ALL</strong></span></span></td>
<td><span data-ttu-id="64e15-163">Retornar todas as informações sobre os sinalizadores acima.</span><span class="sxs-lookup"><span data-stu-id="64e15-163">Return all of the above flags' information.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="64e15-164"><strong>LUP_RETURN_COMMENT</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-164"><strong>LUP_RETURN_COMMENT</strong></span></span></td>
<td><span data-ttu-id="64e15-165">Retorne a descrição do serviço no membro <strong>lpszComment</strong> da estrutura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> para cada chamada para a função <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="64e15-165">Return the service description in the <strong>lpszComment</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="64e15-166"><strong>LUP_FLUSHPREVIOUS</strong></span><span class="sxs-lookup"><span data-stu-id="64e15-166"><strong>LUP_FLUSHPREVIOUS</strong></span></span></td>
<td><span data-ttu-id="64e15-167">Ignore o próximo registro disponível e retorne o registro que o segue.</span><span class="sxs-lookup"><span data-stu-id="64e15-167">Skip the next available record, and return the record that follows it.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="advanced-service-queries"></a><span data-ttu-id="64e15-168">Consultas de serviço avançadas</span><span class="sxs-lookup"><span data-stu-id="64e15-168">Advanced Service Queries</span></span>

<span data-ttu-id="64e15-169">As operações de consulta descritas na seção anterior podem ser usadas para retornar todos os resultados de um único GUID, o que deve ser suficiente para a maioria dos aplicativos.</span><span class="sxs-lookup"><span data-stu-id="64e15-169">The query operations that are described in the previous section can be used to return all results from a single GUID, which should be sufficient for most applications.</span></span> <span data-ttu-id="64e15-170">Uma consulta avançada permite que um aplicativo crie uma consulta mais específica; Ele fornece a capacidade de corresponder UUIDs e atributos nas informações retornadas.</span><span class="sxs-lookup"><span data-stu-id="64e15-170">An advanced query enables an application to create a more specific query; it provides the capability to match UUIDs and attributes in returned information.</span></span>

<span data-ttu-id="64e15-171">Para executar uma consulta avançada para serviços, os clientes Bluetooth devem especificar as seguintes restrições na estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) que é passada para o parâmetro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="64e15-171">To perform an advanced query for services, Bluetooth clients must specify the following restrictions in the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is passed into the *lpqsRestrictions* parameter.</span></span>



| <span data-ttu-id="64e15-172">Membro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="64e15-172">WSAQUERYSET member</span></span>   | <span data-ttu-id="64e15-173">Restrição</span><span class="sxs-lookup"><span data-stu-id="64e15-173">Restriction</span></span>                                                                                                                                                                                                                                                                                                                         |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64e15-174">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="64e15-174">**dwSize**</span></span>           | <span data-ttu-id="64e15-175">Defina como **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="64e15-175">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="64e15-176">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="64e15-176">**lpszContext**</span></span>      | <span data-ttu-id="64e15-177">Defina para o endereço de dispositivo Bluetooth com o qual estabelecer uma conexão SDP para executar a consulta de serviços.</span><span class="sxs-lookup"><span data-stu-id="64e15-177">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="64e15-178">Esse membro deve ser uma cadeia de caracteres que é convertida usando a função [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="64e15-178">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="64e15-179">Se o endereço de rádio local for fornecido, os registros SDP locais serão pesquisados.</span><span class="sxs-lookup"><span data-stu-id="64e15-179">If the local radio address is supplied, the local SDP records are searched.</span></span><br/> |
| <span data-ttu-id="64e15-180">**lpBlob.pBlobData**</span><span class="sxs-lookup"><span data-stu-id="64e15-180">**lpBlob.pBlobData**</span></span> | <span data-ttu-id="64e15-181">Ponteiro para uma estrutura de [**\_ \_ serviço de consulta BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) que contém todos os parâmetros que limitam os resultados da consulta.</span><span class="sxs-lookup"><span data-stu-id="64e15-181">Pointer to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains all parameters that limit the results of the query.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="64e15-182">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="64e15-182">**dwNameSpace**</span></span>      | <span data-ttu-id="64e15-183">Defina como **ns \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="64e15-183">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="64e15-184">Outros membros</span><span class="sxs-lookup"><span data-stu-id="64e15-184">Other members</span></span>        | <span data-ttu-id="64e15-185">Todos os outros membros da estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) são ignorados.</span><span class="sxs-lookup"><span data-stu-id="64e15-185">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                            |



 

<span data-ttu-id="64e15-186">Os sinalizadores a seguir são passados no parâmetro *dwControlFlags* de [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) para controlar os resultados de uma consulta avançada.</span><span class="sxs-lookup"><span data-stu-id="64e15-186">The following flags are passed in the *dwControlFlags* parameter of [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) to control the results of an advanced query.</span></span>

| <span data-ttu-id="64e15-187">Sinalizador</span><span class="sxs-lookup"><span data-stu-id="64e15-187">Flag</span></span>                     | <span data-ttu-id="64e15-188">Resultado</span><span class="sxs-lookup"><span data-stu-id="64e15-188">Result</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64e15-189">**\_contêineres de Lup**</span><span class="sxs-lookup"><span data-stu-id="64e15-189">**LUP\_CONTAINERS**</span></span>      | <span data-ttu-id="64e15-190">Não deve ser definido.</span><span class="sxs-lookup"><span data-stu-id="64e15-190">Must not be set.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="64e15-191">**LUP \_ FLUSHCACHE**</span><span class="sxs-lookup"><span data-stu-id="64e15-191">**LUP\_FLUSHCACHE**</span></span>      | <span data-ttu-id="64e15-192">Os aplicativos geralmente devem especificar **Lup \_ FLUSHCACHE**.</span><span class="sxs-lookup"><span data-stu-id="64e15-192">Applications should generally specify **LUP\_FLUSHCACHE**.</span></span> <span data-ttu-id="64e15-193">Esse sinalizador instrui o sistema a ignorar todas as informações armazenadas em cache e estabelecer uma conexão SDP over-the-Air para o dispositivo especificado para executar a pesquisa SDP.</span><span class="sxs-lookup"><span data-stu-id="64e15-193">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="64e15-194">Essa operação não armazenada em cache pode levar vários segundos (enquanto uma pesquisa armazenada em cache retorna rapidamente).</span><span class="sxs-lookup"><span data-stu-id="64e15-194">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="64e15-195">O Bluetooth não armazena de forma proativa os registros SDP de dispositivos próximos, nem armazena agressivamente as consultas anteriores em cache.</span><span class="sxs-lookup"><span data-stu-id="64e15-195">Bluetooth does not proactively cache SDP records from nearby devices, nor does it aggressively cache previous queries.</span></span> <span data-ttu-id="64e15-196">Portanto, os aplicativos devem esperar que as consultas com frequência não retornem nenhum resultado (**WSASERVICE \_ não \_ encontrado**) se **Lup \_ FLUSHCACHE** não for especificado.</span><span class="sxs-lookup"><span data-stu-id="64e15-196">Therefore applications should expect that queries may frequently return no results (**WSASERVICE\_NOT\_FOUND**) if **LUP\_FLUSHCACHE** is not specified.</span></span> <span data-ttu-id="64e15-197">Os dados armazenados em cache que estão disponíveis usando a interface do Windows Sockets podem ser aprimorados no futuro.</span><span class="sxs-lookup"><span data-stu-id="64e15-197">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span> |
| <span data-ttu-id="64e15-198">**\_serviço Lup res \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-198">**LUP\_RES\_SERVICE**</span></span>    | <span data-ttu-id="64e15-199">Retornar informações para o endereço local do Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="64e15-199">Return information for the local Bluetooth Address.</span></span> <span data-ttu-id="64e15-200">A definição desse sinalizador terá efeito somente se o **Lup de \_ retorno do remetente \_** também for especificado.</span><span class="sxs-lookup"><span data-stu-id="64e15-200">Setting this flag has an effect only if **LUP\_RETURN\_ADDRR** is also specified.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="64e15-201">**LUP \_ nome de retorno \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-201">**LUP\_RETURN\_NAME**</span></span>    | <span data-ttu-id="64e15-202">Retornar o nome de exibição do serviço.</span><span class="sxs-lookup"><span data-stu-id="64e15-202">Return the display name of the service.</span></span> <span data-ttu-id="64e15-203">Esse sinalizador é ignorado para **a \_ \_ \_ solicitação de pesquisa do serviço SDP**.</span><span class="sxs-lookup"><span data-stu-id="64e15-203">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="64e15-204">**\_tipo de retorno Lup \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-204">**LUP\_RETURN\_TYPE**</span></span>    | <span data-ttu-id="64e15-205">Retornar a ID de classe de serviço.</span><span class="sxs-lookup"><span data-stu-id="64e15-205">Return the service class ID.</span></span> <span data-ttu-id="64e15-206">Esse sinalizador é ignorado para **a \_ \_ \_ solicitação de pesquisa do serviço SDP**.</span><span class="sxs-lookup"><span data-stu-id="64e15-206">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="64e15-207">**\_endereço de retorno de Lup \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-207">**LUP\_RETURN\_ADDR**</span></span>    | <span data-ttu-id="64e15-208">Retorne um endereço no membro **lpcsaBuffer** para ser usado com chamadas de função de [**conexão**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="64e15-208">Return an address in the **lpcsaBuffer** member to be used with [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function calls.</span></span> <span data-ttu-id="64e15-209">O endereço retornado contém o número da porta.</span><span class="sxs-lookup"><span data-stu-id="64e15-209">The returned address contains the port number.</span></span> <span data-ttu-id="64e15-210">Esse sinalizador é ignorado para **a \_ \_ \_ solicitação de pesquisa do serviço SDP**.</span><span class="sxs-lookup"><span data-stu-id="64e15-210">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="64e15-211">**\_blob de retorno de Lup \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-211">**LUP\_RETURN\_BLOB**</span></span>    | <span data-ttu-id="64e15-212">Retorne os registros SD correspondentes em um formato que esteja de acordo com a especificação de registro SDP do Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="64e15-212">Return the matching SD records in a format that conforms to the Bluetooth SDP record specification.</span></span> <span data-ttu-id="64e15-213">Para **a \_ \_ \_ solicitação de pesquisa de serviço SDP**, o resultado em **LpBlob** para a chamada subsequente para [**WSALOOKUPSERVICENEXT**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) é uma matriz de identificadores de SDP de Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="64e15-213">For **SDP\_SERVICE\_SEARCH\_REQUEST**, the result in **lpBlob** for the subsequent call to [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) is an array of Bluetooth SDP handles.</span></span> <span data-ttu-id="64e15-214">Para solicitação de **\_ \_ atributo \_ de serviço SDP** e **solicitação de atributo de \_ pesquisa de serviço \_ \_ \_ SDP**, o resultado de cada chamada subsequente para **WSALookupServiceNext** é um registro de SDP Bluetooth binário cujos atributos são restritos àqueles especificados pelo membro **pRange** da consulta.</span><span class="sxs-lookup"><span data-stu-id="64e15-214">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST** and **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**, the result for each subsequent call to **WSALookupServiceNext** is a binary Bluetooth SDP record whose attributes are restricted to those specified by the **pRange** member of the query.</span></span> <span data-ttu-id="64e15-215">Esse sinalizador é necessário para **a \_ \_ \_ solicitação de pesquisa de serviço SDP**.</span><span class="sxs-lookup"><span data-stu-id="64e15-215">This flag is required for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                               |
| <span data-ttu-id="64e15-216">**\_Comentário de retorno do Lup \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-216">**LUP\_RETURN\_COMMENT**</span></span> | <span data-ttu-id="64e15-217">Retorne a descrição do serviço no membro **lpszComment** da estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para cada chamada para a função [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="64e15-217">Return the service description in the **lpszComment** member of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure for each call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="64e15-218">**LUP \_ FLUSHPREVIOUS**</span><span class="sxs-lookup"><span data-stu-id="64e15-218">**LUP\_FLUSHPREVIOUS**</span></span>   | <span data-ttu-id="64e15-219">Ignore o próximo registro disponível e retorne o registro que o segue.</span><span class="sxs-lookup"><span data-stu-id="64e15-219">Skip the next available record, and return the record that follows it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



 

<span data-ttu-id="64e15-220">Na entrada, **lpBlob** -> **pBlobData** aponta para uma estrutura de [**\_ \_ serviço de consulta do BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) que contém os valores listados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="64e15-220">On input, **lpBlob**->**pBlobData** points to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains the values listed in the following table.</span></span>

> [!Note]  
> <span data-ttu-id="64e15-221">A solicitação inicial de pesquisa deve ser capaz de se ajustar a um pacote L2CAP.</span><span class="sxs-lookup"><span data-stu-id="64e15-221">The initial search request must be able to fit into one L2CAP packet.</span></span> <span data-ttu-id="64e15-222">A resposta, no entanto, pode ser dividida em vários pacotes L2CAP.</span><span class="sxs-lookup"><span data-stu-id="64e15-222">The response, however, may be broken into many L2CAP packets.</span></span>

 



| <span data-ttu-id="64e15-223">Membro</span><span class="sxs-lookup"><span data-stu-id="64e15-223">Member</span></span>            | <span data-ttu-id="64e15-224">Valor</span><span class="sxs-lookup"><span data-stu-id="64e15-224">Value</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64e15-225">**tipo**</span><span class="sxs-lookup"><span data-stu-id="64e15-225">**type**</span></span>          | <span data-ttu-id="64e15-226">Tipo de pesquisa a ser executada.</span><span class="sxs-lookup"><span data-stu-id="64e15-226">Type of search to perform.</span></span> <span data-ttu-id="64e15-227">Esse valor pode ser uma das solicitações de **\_ \_ pesquisa \_ de serviço SDP**, **solicitação de \_ atributo de serviço \_ \_ SDP** ou solicitação de atributo de **pesquisa de \_ serviço \_ \_ \_ SDP**.</span><span class="sxs-lookup"><span data-stu-id="64e15-227">This value can be one of **SDP\_SERVICE\_SEARCH\_REQUEST**, **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**.</span></span> <span data-ttu-id="64e15-228">Cada tipo de pesquisa é associado a um mecanismo de pesquisa subjacente que é definido pela especificação de SDP do Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="64e15-228">Each search type is associated with an underlying search mechanism that is defined by the Bluetooth SDP specification.</span></span> <span data-ttu-id="64e15-229">Cada retorno resulta no formulário descrito pela estrutura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) que é definida anteriormente nesta seção (consultas de serviço avançadas).</span><span class="sxs-lookup"><span data-stu-id="64e15-229">Each return results in the form described by the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is defined earlier in this (Advanced Service Queries) section.</span></span> |
| <span data-ttu-id="64e15-230">**Gerenciador de controle**</span><span class="sxs-lookup"><span data-stu-id="64e15-230">**serviceHandle**</span></span> | <span data-ttu-id="64e15-231">Usado para pesquisas de atributo.</span><span class="sxs-lookup"><span data-stu-id="64e15-231">Used for attribute searches.</span></span> <span data-ttu-id="64e15-232">Esse valor especifica o identificador de serviço com o qual consultar os atributos no membro **pRange** .</span><span class="sxs-lookup"><span data-stu-id="64e15-232">This value specifies the service handle with which to query the attributes in the **pRange** member.</span></span>                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="64e15-233">**UUIDs**</span><span class="sxs-lookup"><span data-stu-id="64e15-233">**uuids**</span></span>         | <span data-ttu-id="64e15-234">Usado para pesquisas de serviço e **ServiceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="64e15-234">Used for service and **serviceAttribute** searches.</span></span> <span data-ttu-id="64e15-235">Esse valor especifica os UUIDs que um registro deve conter para corresponder à pesquisa.</span><span class="sxs-lookup"><span data-stu-id="64e15-235">This value specifies the UUIDs that a record must contain to match the search.</span></span> <span data-ttu-id="64e15-236">Se for necessário consultar os UUIDs inferiores a Max nos UUIDs de **\_ \_ \_ consulta** , esse valor definirá o elemento SdpQueryUuid que segue imediatamente o último UUID válido para todos os zeros.</span><span class="sxs-lookup"><span data-stu-id="64e15-236">If less than **MAX\_UUIDS\_IN\_QUERY** UUIDs are to be queried, this value sets the SdpQueryUuid element that immediately follows the last valid UUID to all zeros.</span></span>                                                                                                                                                                       |
| <span data-ttu-id="64e15-237">**numRange**</span><span class="sxs-lookup"><span data-stu-id="64e15-237">**numRange**</span></span>      | <span data-ttu-id="64e15-238">Usado para pesquisas de atributo e **ServiceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="64e15-238">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="64e15-239">Esse valor especifica o número de elementos em **pRange**.</span><span class="sxs-lookup"><span data-stu-id="64e15-239">This value specifies the number of elements in **pRange**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="64e15-240">**pRange**</span><span class="sxs-lookup"><span data-stu-id="64e15-240">**pRange**</span></span>        | <span data-ttu-id="64e15-241">Usado para pesquisas de atributo e **ServiceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="64e15-241">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="64e15-242">Esse valor especifica os valores de atributo a serem recuperados para qualquer registro correspondente.</span><span class="sxs-lookup"><span data-stu-id="64e15-242">This value specifies the attribute values to retrieve for any matching records.</span></span>                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="64e15-243">Após cada chamada bem-sucedida para a função [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) , **lpBlob** -> **pBlobData** aponta para um bloco de dados que contém os valores listados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="64e15-243">After each successful call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function, **lpBlob**->**pBlobData** points to a block of data that contains the values listed in the following table.</span></span>

| <span data-ttu-id="64e15-244">Valor</span><span class="sxs-lookup"><span data-stu-id="64e15-244">Value</span></span>                                                                                | <span data-ttu-id="64e15-245">Descrição</span><span class="sxs-lookup"><span data-stu-id="64e15-245">Description</span></span>                                                                                                                                                                                                                                                                                                                                          |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64e15-246">**\_solicitação de \_ pesquisa do serviço SDP \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-246">**SDP\_SERVICE\_SEARCH\_REQUEST**</span></span>                                                    | <span data-ttu-id="64e15-247">Uma matriz de identificadores de registro SDP que é idêntica à **ServiceRecordHandleList** definida pelo Bluetooth 1,1 SDP 4.5.2.</span><span class="sxs-lookup"><span data-stu-id="64e15-247">An array of SDP record handles that is identical to the **ServiceRecordHandleList** defined by Bluetooth 1.1 SDP 4.5.2.</span></span> <span data-ttu-id="64e15-248">O número de identificadores SDP que é retornado é calculado por (**lpBlob**->cbSize)/**sizeof**(ULong).</span><span class="sxs-lookup"><span data-stu-id="64e15-248">The number of SDP handles that is returned is calculated by (**lpBlob**->cbSize)/**sizeof**(ULONG).</span></span> <span data-ttu-id="64e15-249">Todos os resultados são retornados em uma única chamada para a função [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="64e15-249">All results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> |
| <span data-ttu-id="64e15-250">**SDP \_ Solicitação \_ de \_** atributo de serviço ou **solicitações de atributo de \_ pesquisa de serviço \_ \_ \_ SDP**</span><span class="sxs-lookup"><span data-stu-id="64e15-250">**SDP\_SERVICE\_ATTRIBUTE\_REQUEST** or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**</span></span> | <span data-ttu-id="64e15-251">Um registro de SDP Bluetooth binário.</span><span class="sxs-lookup"><span data-stu-id="64e15-251">A binary Bluetooth SDP record.</span></span> <span data-ttu-id="64e15-252">Para **a \_ \_ \_ solicitação de atributo de serviço SDP**, todos os resultados são retornados em uma única chamada para a função [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="64e15-252">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, all results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                       |



 

> [!Note]  
> <span data-ttu-id="64e15-253">Se o membro **lpBlob** não for especificado durante a entrada de uma consulta de serviço, uma pesquisa de serviço e de atributo será executada para o serviço especificado no membro **lpServiceClassId** em atributos de 0 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="64e15-253">If the **lpBlob** member is not specified during input for a service query, a service and attribute search is performed for the service specified in the **lpServiceClassId** member on attributes from 0 through 0xFFFF.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="64e15-254">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="64e15-254">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="64e15-255">Bluetooth e WSAQUERYSET para consulta de serviço</span><span class="sxs-lookup"><span data-stu-id="64e15-255">Bluetooth and WSAQUERYSET for Service Inquiry</span></span>](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[<span data-ttu-id="64e15-256">Descobrir dispositivos e serviços Bluetooth</span><span class="sxs-lookup"><span data-stu-id="64e15-256">Discovering Bluetooth Devices and Services</span></span>](discovering-bluetooth-devices-and-services.md)
</dt> <dt>

[<span data-ttu-id="64e15-257">Bluetooth e WSALookupServiceNext</span><span class="sxs-lookup"><span data-stu-id="64e15-257">Bluetooth and WSALookupServiceNext</span></span>](bluetooth-and-wsalookupservicenext.md)
</dt> <dt>

[<span data-ttu-id="64e15-258">Bluetooth e WSALookupServiceBegin para consulta de dispositivo</span><span class="sxs-lookup"><span data-stu-id="64e15-258">Bluetooth and WSALookupServiceBegin for Device Inquiry</span></span>](bluetooth-and-wsalookupservicebegin-for-device-inquiry.md)
</dt> <dt>

[<span data-ttu-id="64e15-259">**\_serviço de consulta do BTH \_**</span><span class="sxs-lookup"><span data-stu-id="64e15-259">**BTH\_QUERY\_SERVICE**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service)
</dt> <dt>

[<span data-ttu-id="64e15-260">**conectar**</span><span class="sxs-lookup"><span data-stu-id="64e15-260">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="64e15-261">**SOCKADDR \_ BTH**</span><span class="sxs-lookup"><span data-stu-id="64e15-261">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[<span data-ttu-id="64e15-262">**WSAAddressToString**</span><span class="sxs-lookup"><span data-stu-id="64e15-262">**WSAAddressToString**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa)
</dt> <dt>

[<span data-ttu-id="64e15-263">**WSALookupServiceBegin**</span><span class="sxs-lookup"><span data-stu-id="64e15-263">**WSALookupServiceBegin**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina)
</dt> <dt>

[<span data-ttu-id="64e15-264">**WSALookupServiceEnd**</span><span class="sxs-lookup"><span data-stu-id="64e15-264">**WSALookupServiceEnd**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend)
</dt> <dt>

[<span data-ttu-id="64e15-265">**WSALookupServiceNext**</span><span class="sxs-lookup"><span data-stu-id="64e15-265">**WSALookupServiceNext**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)
</dt> <dt>

[<span data-ttu-id="64e15-266">**WSAQUERYSET**</span><span class="sxs-lookup"><span data-stu-id="64e15-266">**WSAQUERYSET**</span></span>](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[<span data-ttu-id="64e15-267">Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="64e15-267">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

