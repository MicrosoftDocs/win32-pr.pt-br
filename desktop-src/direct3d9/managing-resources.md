---
description: O gerenciamento de recursos é o processo em que os recursos são promovidos do armazenamento de memória do sistema para o armazenamento acessível ao dispositivo e descartados do armazenamento acessível ao dispositivo.
ms.assetid: 4aa55313-b86c-48e7-829a-a0917c2ebae7
title: Gerenciando recursos (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ef7a8be0e71c652b6e3f2ed467e866fd922791
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104163757"
---
# <a name="managing-resources-direct3d-9"></a><span data-ttu-id="0004e-103">Gerenciando recursos (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="0004e-103">Managing Resources (Direct3D 9)</span></span>

<span data-ttu-id="0004e-104">O gerenciamento de recursos é o processo em que os recursos são promovidos do armazenamento de memória do sistema para o armazenamento acessível ao dispositivo e descartados do armazenamento acessível ao dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0004e-104">Resource management is the process where resources are promoted from system-memory storage to device-accessible storage and discarded from device-accessible storage.</span></span> <span data-ttu-id="0004e-105">O tempo de execução do Direct3D tem seu próprio algoritmo de gerenciamento baseado em uma técnica de prioridade menos usada recentemente.</span><span class="sxs-lookup"><span data-stu-id="0004e-105">The Direct3D run time has its own management algorithm based on a least-recently-used priority technique.</span></span> <span data-ttu-id="0004e-106">O Direct3D alterna para uma técnica de prioridade usada mais recentemente quando detecta que mais recursos do que podem coexistir na memória acessível pelo dispositivo são usados em um único quadro-entre [**IDirect3DDevice9:: BeginScene**](/windows/desktop/api) e [**IDirect3DDevice9:: endscenetion**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) calls.</span><span class="sxs-lookup"><span data-stu-id="0004e-106">Direct3D switches to a most-recently-used priority technique when it detects that more resources than can coexist in device-accessible memory are used in a single frame - between [**IDirect3DDevice9::BeginScene**](/windows/desktop/api) and [**IDirect3DDevice9::EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) calls.</span></span>

<span data-ttu-id="0004e-107">Use o [**sinalizador \_ padrão D3DPOOL**](./d3dpool.md) no momento da criação para especificar que um recurso seja colocado no pool de memória mais apropriado para o conjunto de usos solicitados para o recurso fornecido.</span><span class="sxs-lookup"><span data-stu-id="0004e-107">Use the [**D3DPOOL\_DEFAULT**](./d3dpool.md) flag at creation time to specify that a resource are placed in the memory pool most appropriate for the set of usages requested for the given resource.</span></span> <span data-ttu-id="0004e-108">Normalmente, essa é a memória de vídeo, incluindo a memória local de vídeo e a memória AGP (Accelerated Graphics Port).</span><span class="sxs-lookup"><span data-stu-id="0004e-108">This is usually video memory, including both local video memory and accelerated graphics port (AGP) memory.</span></span> <span data-ttu-id="0004e-109">Os recursos no pool padrão não persistem por meio de transições entre os Estados perdido e operacional do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0004e-109">Resources in the default pool do not persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="0004e-110">Esses recursos devem ser liberados antes de chamar Reset e, em seguida, devem ser recriados.</span><span class="sxs-lookup"><span data-stu-id="0004e-110">These resources must be released before calling reset and must then be re-created.</span></span>

<span data-ttu-id="0004e-111">Use o [**sinalizador \_ gerenciado D3DPOOL**](./d3dpool.md) no momento da criação para especificar um recurso gerenciado.</span><span class="sxs-lookup"><span data-stu-id="0004e-111">Use the [**D3DPOOL\_MANAGED**](./d3dpool.md) flag at creation time to specify a managed resource.</span></span> <span data-ttu-id="0004e-112">Os recursos gerenciados persistem por transições entre os Estados perdido e operacional do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0004e-112">Managed resources persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="0004e-113">Esses recursos existem tanto na memória de vídeo quanto do sistema.</span><span class="sxs-lookup"><span data-stu-id="0004e-113">These resources exist both in video and system memory.</span></span> <span data-ttu-id="0004e-114">Um recurso gerenciado será copiado para a memória de vídeo quando necessário durante a renderização.</span><span class="sxs-lookup"><span data-stu-id="0004e-114">A managed resource will be copied into video memory when it is needed during rendering.</span></span> <span data-ttu-id="0004e-115">O dispositivo pode ser restaurado com uma chamada para [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), e esses recursos continuam funcionando normalmente sem serem recarregados com os dados.</span><span class="sxs-lookup"><span data-stu-id="0004e-115">The device can be restored with a call to [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), and such resources continue to function normally without being reloaded with data.</span></span> <span data-ttu-id="0004e-116">No entanto, se o dispositivo precisar ser destruído e recriado, todos os recursos deverão ser recriados.</span><span class="sxs-lookup"><span data-stu-id="0004e-116">However, if the device must be destroyed and re-created, all resources must be re-created.</span></span>

<span data-ttu-id="0004e-117">O gerenciamento de recursos não é recomendado para recursos que mudam com alta frequência.</span><span class="sxs-lookup"><span data-stu-id="0004e-117">Resource management is not recommended for resources which change with high frequency.</span></span> <span data-ttu-id="0004e-118">Por exemplo, os buffers de vértice e de índice que são usados para atravessar um grafo de cena cada quadro que renderiza somente a geometria visível para o usuário altera todos os quadros.</span><span class="sxs-lookup"><span data-stu-id="0004e-118">For example, vertex and index buffers which are used to traverse a scene graph every frame rendering only geometry visible to the user changes every frame.</span></span> <span data-ttu-id="0004e-119">Como os recursos gerenciados são apoiados pela memória do sistema, as alterações constantes devem ser atualizadas na memória do sistema, o que pode causar uma degradação grave no desempenho.</span><span class="sxs-lookup"><span data-stu-id="0004e-119">Since managed resources are backed by system memory, the constant changes must be updated in system memory, which can cause a severe degradation in performance.</span></span> <span data-ttu-id="0004e-120">Para esse cenário específico, [**D3DPOOL \_ padrão**](./d3dpool.md) juntamente com [**D3DUSAGE \_ dinâmico**](d3dusage.md) deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="0004e-120">For this particular scenario, [**D3DPOOL\_DEFAULT**](./d3dpool.md) along with [**D3DUSAGE\_DYNAMIC**](d3dusage.md) should be used.</span></span>

<span data-ttu-id="0004e-121">Outro exemplo para o qual o gerenciamento de recursos não é recomendado (e explicitamente não permitido pelo tempo de execução) é o gerenciamento de uma textura criada com [**D3DUSAGE \_ RENDERTARGET**](d3dusage.md).</span><span class="sxs-lookup"><span data-stu-id="0004e-121">Another example for which resource management is not recommended (and explicitly not allowed by the runtime) is management of a texture created with [**D3DUSAGE\_RENDERTARGET**](d3dusage.md).</span></span> <span data-ttu-id="0004e-122">Se a memória usada pelos destinos de renderização fosse gerenciada pelo tempo de execução, o conteúdo teria de ser copiado constantemente para a memória do sistema durante o processamento, causando grandes penalidades de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0004e-122">If the memory used by render targets were managed by the runtime, it's contents would have to constantly be copied to system memory during rendering, causing large performance penalties.</span></span> <span data-ttu-id="0004e-123">Por esse motivo, os destinos de renderização devem ser criados no pool padrão.</span><span class="sxs-lookup"><span data-stu-id="0004e-123">For this reason, render targets must be created in the default pool.</span></span> <span data-ttu-id="0004e-124">Se o acesso de CPU dos dados contidos em um destino de renderização for necessário, os dados deverão ser copiados para um recurso criado em [**D3DPOOL \_ SYSTEMMEM**](./d3dpool.md) usando [**IDirect3DDevice9:: UpdateTexture**](/windows/desktop/api)ou [**IDirect3DDevice9:: UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span><span class="sxs-lookup"><span data-stu-id="0004e-124">If CPU access of the data contained in a render target is needed, the data must be copied to a resource created in [**D3DPOOL\_SYSTEMMEM**](./d3dpool.md) using [**IDirect3DDevice9::UpdateTexture**](/windows/desktop/api), or [**IDirect3DDevice9::UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span></span>

<span data-ttu-id="0004e-125">Para obter mais informações sobre o estado perdido de um dispositivo, consulte [dispositivos perdidos (Direct3D 9)](lost-devices.md).</span><span class="sxs-lookup"><span data-stu-id="0004e-125">For more information about the lost state of a device, see [Lost Devices (Direct3D 9)](lost-devices.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="0004e-126">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="0004e-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0004e-127">Recursos do Direct3D</span><span class="sxs-lookup"><span data-stu-id="0004e-127">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> </dl>

 

 
