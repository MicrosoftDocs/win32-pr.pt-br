---
description: Buffers de índice, representados pela interface IDirect3DIndexBuffer9, são buffers de memória que contêm dados de índice.
ms.assetid: baa60cd1-a1f0-4dbe-b934-aeb1a5c6b784
title: Buffers de índice (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7151fae6deb72a0c569d269c80e5b13bf946f9d0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103825604"
---
# <a name="index-buffers-direct3d-9"></a><span data-ttu-id="8ba82-103">Buffers de índice (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="8ba82-103">Index Buffers (Direct3D 9)</span></span>

<span data-ttu-id="8ba82-104">Buffers de índice, representados pela interface [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) , são buffers de memória que contêm dados de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-104">Index buffers, represented by the [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface, are memory buffers that contain index data.</span></span> <span data-ttu-id="8ba82-105">Os dados de índice, ou índices, são deslocamentos inteiros em buffers de vértice e são usados para renderizar primitivos usando o método [**IDirect3DDevice9::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) .</span><span class="sxs-lookup"><span data-stu-id="8ba82-105">Index data, or indices, are integer offsets into vertex buffers and are used to render primitives using the [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) method.</span></span>

<span data-ttu-id="8ba82-106">Um buffer de vértices contém vértices. Portanto, você pode desenhar um buffer de vértice com ou sem primitivas indexadas.</span><span class="sxs-lookup"><span data-stu-id="8ba82-106">A vertex buffer contains vertices; therefore, you can draw a vertex buffer either with or without indexed primitives.</span></span> <span data-ttu-id="8ba82-107">No entanto, como um buffer de índice contém índices, você não pode usar um buffer de índice sem um buffer de vértice correspondente.</span><span class="sxs-lookup"><span data-stu-id="8ba82-107">However, because an index buffer contains indices, you cannot use an index buffer without a corresponding vertex buffer.</span></span> <span data-ttu-id="8ba82-108">(Como uma observação adicional, [**IDirect3DDevice9::D rawindexedprimitiveup**](/windows/desktop/api) e [**IDirect3DDevice9::D rawprimitiveup**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) são os únicos métodos draw que desenham sem um índice ou um buffer de vértice.)</span><span class="sxs-lookup"><span data-stu-id="8ba82-108">(As a side note, [**IDirect3DDevice9::DrawIndexedPrimitiveUP**](/windows/desktop/api) and [**IDirect3DDevice9::DrawPrimitiveUP**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) are the only draw methods that draw without an index or a vertex buffer.)</span></span>

## <a name="index-buffer-description"></a><span data-ttu-id="8ba82-109">Descrição de buffer de índice</span><span class="sxs-lookup"><span data-stu-id="8ba82-109">Index Buffer Description</span></span>

<span data-ttu-id="8ba82-110">Um buffer de índice é descrito em termos de suas funcionalidades, como onde ele existe na memória, se suporta leitura e gravação, e o tipo e o número de índices que contém.</span><span class="sxs-lookup"><span data-stu-id="8ba82-110">An index buffer is described in terms of its capabilities, such as where it exists in memory, whether it supports reading and writing, and the type and number of indices it can contain.</span></span> <span data-ttu-id="8ba82-111">Essas características são mantidas em uma [**estrutura \_ desc de D3DINDEXBUFFER**](d3dindexbuffer-desc.md) .</span><span class="sxs-lookup"><span data-stu-id="8ba82-111">These traits are held in a [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="8ba82-112">Descrições de buffer de índice informam ao seu app como um buffer existente foi criado.</span><span class="sxs-lookup"><span data-stu-id="8ba82-112">Index buffer descriptions tell your application how an existing buffer was created.</span></span> <span data-ttu-id="8ba82-113">Você fornece uma estrutura de descrição vazia para o sistema preencher com os recursos de um buffer de índice criado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8ba82-113">You provide an empty description structure for the system to fill with the capabilities of a previously created index buffer.</span></span>

-   <span data-ttu-id="8ba82-114">O membro Format descreve o formato da superfície dos dados do buffer do índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-114">The Format member describes the surface format of the index buffer data.</span></span>
-   <span data-ttu-id="8ba82-115">O tipo identifica o tipo de recurso do buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-115">The Type identifies the resource type of the index buffer.</span></span>
-   <span data-ttu-id="8ba82-116">O membro da estrutura de uso contém sinalizadores de capacidade geral.</span><span class="sxs-lookup"><span data-stu-id="8ba82-116">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="8ba82-117">O \_ sinalizador D3DUSAGE SOFTWAREPROCESSING indica que o buffer de índice deve ser usado com o processamento de vértice de software.</span><span class="sxs-lookup"><span data-stu-id="8ba82-117">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="8ba82-118">A presença do \_ sinalizador WRITEONLY D3DUSAGE em uso indica que a memória do buffer de índice é usada somente para operações de gravação.</span><span class="sxs-lookup"><span data-stu-id="8ba82-118">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the index buffer memory is used only for write operations.</span></span> <span data-ttu-id="8ba82-119">Isso libera o driver para posicionar os dados de índice no melhor local de memória para permitir processamento e renderização rápidos.</span><span class="sxs-lookup"><span data-stu-id="8ba82-119">This frees the driver to place the index data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="8ba82-120">Se o \_ sinalizador WRITEONLY D3DUSAGE não for usado, será menos provável que o driver Coloque os dados em um local ineficiente para operações de leitura.</span><span class="sxs-lookup"><span data-stu-id="8ba82-120">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="8ba82-121">Isso sacrificaria algum processamento e velocidade de renderização.</span><span class="sxs-lookup"><span data-stu-id="8ba82-121">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="8ba82-122">Se esse sinalizador não for especificado, supõe-se que os aplicativos executam operações de leitura e gravação nos dados no buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-122">If this flag is not specified, it is assumed that applications perform read and write operations on the data in the index buffer.</span></span>
-   <span data-ttu-id="8ba82-123">Pool especifica a classe de memória alocada para o buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-123">Pool specifies the memory class allocated for the index buffer.</span></span> <span data-ttu-id="8ba82-124">O \_ sinalizador D3DPOOL SYSTEMMEM indica que o sistema criou o buffer de índice na memória do sistema.</span><span class="sxs-lookup"><span data-stu-id="8ba82-124">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the index buffer in system memory.</span></span>
-   <span data-ttu-id="8ba82-125">O membro de tamanho armazena o tamanho, em bytes, dos dados do buffer de vértice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-125">The Size member stores the size, in bytes, of the vertex buffer data.</span></span>
-   <span data-ttu-id="8ba82-126">O último parâmetro pSharedHandle não é usado.</span><span class="sxs-lookup"><span data-stu-id="8ba82-126">The last parameter pSharedHandle is not used.</span></span> <span data-ttu-id="8ba82-127">Defina-a como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="8ba82-127">Set it to **NULL**.</span></span>

## <a name="index-processing-requirements"></a><span data-ttu-id="8ba82-128">Requisitos de processamento de índice</span><span class="sxs-lookup"><span data-stu-id="8ba82-128">Index Processing Requirements</span></span>

<span data-ttu-id="8ba82-129">O desempenho das operações de processamento de índice depende muito onde o buffer de índice existe na memória e qual tipo de dispositivo de renderização que está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="8ba82-129">The performance of index processing operations depends heavily on where the index buffer exists in memory and what type of rendering device is being used.</span></span> <span data-ttu-id="8ba82-130">Os apps controlam a alocação de memória para buffers de índice quando eles são criados.</span><span class="sxs-lookup"><span data-stu-id="8ba82-130">Applications control the memory allocation for index buffers when they are created.</span></span> <span data-ttu-id="8ba82-131">Quando o \_ sinalizador de memória D3DPOOL SYSTEMMEM é definido, o buffer de índice é criado na memória do sistema.</span><span class="sxs-lookup"><span data-stu-id="8ba82-131">When the D3DPOOL\_SYSTEMMEM memory flag is set, the index buffer is created in system memory.</span></span> <span data-ttu-id="8ba82-132">Quando o \_ sinalizador de memória padrão D3DPOOL é usado, o driver de dispositivo determina onde a memória do buffer de índice é melhor alocada, geralmente conhecida como memória de driver ideal.</span><span class="sxs-lookup"><span data-stu-id="8ba82-132">When the D3DPOOL\_DEFAULT memory flag is used, the device driver determines where the memory for the index buffer is best allocated, often referred to as driver-optimal memory.</span></span> <span data-ttu-id="8ba82-133">Driver-a memória ideal pode ser memória de vídeo local, memória de vídeo não local ou memória do sistema.</span><span class="sxs-lookup"><span data-stu-id="8ba82-133">Driver-optimal memory can be local video memory, non-local video memory, or system memory.</span></span>

<span data-ttu-id="8ba82-134">Definir o \_ sinalizador de comportamento D3DUSAGE SOFTWAREPROCESSING ao chamar o método [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) especifica que o buffer de índice deve ser usado com o processamento de vértice de software.</span><span class="sxs-lookup"><span data-stu-id="8ba82-134">Setting the D3DUSAGE\_SOFTWAREPROCESSING behavior flag when calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method specifies that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="8ba82-135">Esse sinalizador é necessário no processamento de vértices de modo misto (D3DCREATE \_ Mixed \_ VERTEXPROCESSING) quando o processamento de vértice de software é usado.</span><span class="sxs-lookup"><span data-stu-id="8ba82-135">This flag is required in mixed mode vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING) when software vertex processing is used.</span></span>

<span data-ttu-id="8ba82-136">O app pode gravar diretamente índices em um buffer de índice alocado na memória ideal de driver.</span><span class="sxs-lookup"><span data-stu-id="8ba82-136">The application can directly write indices to a index buffer allocated in driver-optimal memory.</span></span> <span data-ttu-id="8ba82-137">Essa técnica impede uma operação de cópia redundante mais tarde.</span><span class="sxs-lookup"><span data-stu-id="8ba82-137">This technique prevents a redundant copy operation later.</span></span> <span data-ttu-id="8ba82-138">Essa técnica não funciona bem se o app lê dados de um buffer de índice, pois operações de leitura feitas pelo host da memória ideal de driver podem ser muito lentas.</span><span class="sxs-lookup"><span data-stu-id="8ba82-138">This technique does not work well if your application reads data back from an index buffer, because read operations done by the host from driver-optimal memory can be very slow.</span></span> <span data-ttu-id="8ba82-139">Portanto, se seu app precisar ler durante o processamento ou gravar dados no buffer de modo irregular, um buffer de índice de memória do sistema é a melhor opção.</span><span class="sxs-lookup"><span data-stu-id="8ba82-139">Therefore, if your application needs to read during processing or writes data to the buffer erratically, a system-memory index buffer is a better choice.</span></span>

> [!Note]  
> <span data-ttu-id="8ba82-140">Sempre use D3DPOOL \_ padrão, exceto quando você não quiser usar a memória de vídeo ou usar grandes quantidades de RAM bloqueada por página quando o driver estiver colocando buffers de vértice ou de índice na memória AGP.</span><span class="sxs-lookup"><span data-stu-id="8ba82-140">Always use D3DPOOL\_DEFAULT, except when you don't want to use video memory or use large amounts of page-locked RAM when the driver is putting vertex or index buffers into AGP memory.</span></span>

 

## <a name="create-an-index-buffer"></a><span data-ttu-id="8ba82-141">Criar um buffer de índice</span><span class="sxs-lookup"><span data-stu-id="8ba82-141">Create an Index Buffer</span></span>

<span data-ttu-id="8ba82-142">Crie um objeto de buffer de índice chamando o método [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) , que aceita seis parâmetros.</span><span class="sxs-lookup"><span data-stu-id="8ba82-142">Create an index buffer object by calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method, which accepts six parameters.</span></span>

-   <span data-ttu-id="8ba82-143">O primeiro parâmetro especifica o tamanho do buffer de índice, em bytes.</span><span class="sxs-lookup"><span data-stu-id="8ba82-143">The first parameter specifies the index buffer length, in bytes.</span></span>
-   <span data-ttu-id="8ba82-144">O segundo parâmetro é um conjunto de controles de uso.</span><span class="sxs-lookup"><span data-stu-id="8ba82-144">The second parameter is a set of usage controls.</span></span> <span data-ttu-id="8ba82-145">Entre outras coisas, seu valor determina se os vértices que estão sendo referenciados pelos índices são capazes de conter informações de recorte.</span><span class="sxs-lookup"><span data-stu-id="8ba82-145">Among other things, its value determines whether the vertices being referred to by the indices are capable of containing clipping information.</span></span> <span data-ttu-id="8ba82-146">Para melhorar o desempenho, especifique D3DUSAGE \_ DONOTCLIP quando o recorte não for necessário.</span><span class="sxs-lookup"><span data-stu-id="8ba82-146">To improve performance, specify D3DUSAGE\_DONOTCLIP when clipping is not required.</span></span>

    <span data-ttu-id="8ba82-147">O \_ sinalizador D3DUSAGE SOFTWAREPROCESSING pode ser definido quando o processamento de vértices de software ou de modo misto (D3DCREATE \_ Misto \_ VERTEXPROCESSING/D3DCREATE \_ software \_ VERTEXPROCESSING) está habilitado para esse dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8ba82-147">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="8ba82-148">D3DUSAGE \_ SOFTWAREPROCESSING deve ser definido para os buffers a serem usados com o processamento de vértice de software no modo misto, mas não deve ser definido para o melhor desempenho possível ao usar o processamento de índice de hardware no modo misto (D3DCREATE \_ hardware \_ VERTEXPROCESSING).</span><span class="sxs-lookup"><span data-stu-id="8ba82-148">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware index processing in mixed mode (D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="8ba82-149">No entanto, definir D3DUSAGE \_ SOFTWAREPROCESSING é a única opção quando um único buffer é usado com o processamento de vértice de hardware e software.</span><span class="sxs-lookup"><span data-stu-id="8ba82-149">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is used with both hardware and software vertex processing.</span></span> <span data-ttu-id="8ba82-150">D3DUSAGE \_ SOFTWAREPROCESSING é permitido para dispositivos mistos e de software.</span><span class="sxs-lookup"><span data-stu-id="8ba82-150">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed and software devices.</span></span>

    <span data-ttu-id="8ba82-151">É possível forçar os buffers de vértice e de índice na memória do sistema, especificando D3DPOOL \_ SYSTEMMEM, mesmo quando o processamento do índice está sendo feito no hardware.</span><span class="sxs-lookup"><span data-stu-id="8ba82-151">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the index processing is being done in hardware.</span></span> <span data-ttu-id="8ba82-152">Essa é uma maneira de evitar grandes quantidades de memória bloqueada por página quando um driver está colocando esses buffers na memória AGP.</span><span class="sxs-lookup"><span data-stu-id="8ba82-152">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

-   <span data-ttu-id="8ba82-153">O terceiro parâmetro é o membro D3DFMT \_ INDEX16 ou D3DFMT \_ INDEX32 do tipo enumerado [D3DFORMAT](d3dformat.md) que especifica o tamanho de cada índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-153">The third parameter is either the D3DFMT\_INDEX16 or D3DFMT\_INDEX32 member of the [D3DFORMAT](d3dformat.md) enumerated type that specifies the size of each index.</span></span>

-   <span data-ttu-id="8ba82-154">O quarto parâmetro é um membro do tipo enumerado [**D3DPOOL**](./d3dpool.md) que informa ao sistema onde a memória deve posicionar o novo buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-154">The fourth parameter is a member of the [**D3DPOOL**](./d3dpool.md) enumerated type that tells the system where in memory to place the new index buffer.</span></span>

-   <span data-ttu-id="8ba82-155">O parâmetro final que [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) aceita é o endereço de uma variável que é preenchida com um ponteiro para a nova interface [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) do objeto de buffer de vértice, caso a chamada tenha sucesso.</span><span class="sxs-lookup"><span data-stu-id="8ba82-155">The final parameter that [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) accepts is the address of a variable that is filled with a pointer to the new [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface of the vertex buffer object, if the call succeeds.</span></span>

<span data-ttu-id="8ba82-156">O exemplo de código C++ a seguir mostra como a criação de um buffer de índice pode ser semelhante ao código.</span><span class="sxs-lookup"><span data-stu-id="8ba82-156">The following C++ code example shows what creating an index buffer might look like in code.</span></span>


```
/*
 * For the purposes of this example, the d3dDevice variable is the 
 * address of an IDirect3DDevice9 interface exposed by a 
 * Direct3DDevice object, g_IB is a variable of type 
 * LPDIRECT3DINDEXBUFFER9.
 */

if( FAILED( d3dDevice->CreateIndexBuffer( 16384 *sizeof(WORD),
           D3DUSAGE_WRITEONLY, D3DFMT_INDEX16, D3DPOOL_DEFAULT, 
           &g_IB, NULL ) ) )
    return E_FAIL;
```



## <a name="access-an-index-buffer"></a><span data-ttu-id="8ba82-157">Acessar um buffer de índice</span><span class="sxs-lookup"><span data-stu-id="8ba82-157">Access an Index Buffer</span></span>

<span data-ttu-id="8ba82-158">Os objetos de buffer de índice permitem que os aplicativos acessem diretamente a memória alocada para dados de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-158">Index buffer objects enable applications to directly access the memory allocated for index data.</span></span> <span data-ttu-id="8ba82-159">Você pode recuperar um ponteiro para indexar a memória do buffer chamando o método [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) e, em seguida, acessando a memória conforme necessário para preencher o buffer com novos dados de índice ou para ler os dados que ele contém.</span><span class="sxs-lookup"><span data-stu-id="8ba82-159">You can retrieve a pointer to index buffer memory by calling the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, and then accessing the memory as needed to fill the buffer with new index data or to read any data it contains.</span></span> <span data-ttu-id="8ba82-160">O método Lock aceita quatro parâmetros.</span><span class="sxs-lookup"><span data-stu-id="8ba82-160">The Lock method accepts four parameters.</span></span> <span data-ttu-id="8ba82-161">O primeiro, *offsetToLock*, é o deslocamento nos dados do índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-161">The first, *OffsetToLock*, is the offset into the index data.</span></span> <span data-ttu-id="8ba82-162">O segundo parâmetro é o tamanho, medido em bytes, dos dados do índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-162">The second parameter is the size, measured in bytes, of the index data.</span></span> <span data-ttu-id="8ba82-163">O terceiro parâmetro aceito pelo método **IDirect3DIndexBuffer9:: Lock** , *ppbData*, é o endereço de um ponteiro de byte preenchido com um ponteiro para os dados do índice, caso a chamada tenha sucesso.</span><span class="sxs-lookup"><span data-stu-id="8ba82-163">The third parameter accepted by the **IDirect3DIndexBuffer9::Lock** method, *ppbData*, is the address of a BYTE pointer filled with a pointer to the index data, if the call succeeds.</span></span>

<span data-ttu-id="8ba82-164">O último parâmetro, *flags*, informa ao sistema como a memória deve ser bloqueada.</span><span class="sxs-lookup"><span data-stu-id="8ba82-164">The last parameter, *Flags*, tells the system how the memory should be locked.</span></span> <span data-ttu-id="8ba82-165">Você pode usá-lo para indicar como o aplicativo acessa os dados no buffer.</span><span class="sxs-lookup"><span data-stu-id="8ba82-165">You can use it to indicate how the application accesses the data in the buffer.</span></span> <span data-ttu-id="8ba82-166">Especifique constantes para o parâmetro *flags* de acordo com a maneira como os dados de índice serão acessados pelo seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8ba82-166">Specify constants for the *Flags* parameter according to the way the index data will be accessed by your application.</span></span> <span data-ttu-id="8ba82-167">Isso permite que o driver bloqueie a memória e forneça o melhor desempenho de acordo com o tipo de acesso solicitado.</span><span class="sxs-lookup"><span data-stu-id="8ba82-167">This allows the driver to lock the memory and provide the best performance given the requested access type.</span></span> <span data-ttu-id="8ba82-168">Use \_ o sinalizador ReadOnly D3DLOCK se seu aplicativo for lido somente da memória do buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-168">Use D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="8ba82-169">A inclusão desse sinalizador permite que o Direct3D Otimize seus procedimentos internos para melhorar a eficiência, Considerando que o acesso à memória será somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8ba82-169">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>

<span data-ttu-id="8ba82-170">Depois de preencher ou ler os dados do índice, chame o método [**IDirect3DIndexBuffer9:: Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) , conforme mostrado no exemplo de código a seguir.</span><span class="sxs-lookup"><span data-stu-id="8ba82-170">After you fill or read the index data, call the [**IDirect3DIndexBuffer9::Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) method, as shown in the following code example.</span></span>


```
// This code example assumes the m_pIndexBuffer is a variable of type 
// LPDIRECT3DINDEXBUFFER9 and that g_Indices has been properly 
// initialized with indices.

// To fill the index buffer, you must lock the buffer to gain 
// access to the indices. This mechanism is required because index
// buffers may be in device memory.

VOID* pIndices;

if( FAILED( m_pIndexBuffer->Lock( 
      0,                 // Fill from start of the buffer
      sizeof(g_Indices), // Size of the data to load
      BYTE**)&pIndices,  // Returned index data
      0 ) ) )            // Send default flags to the lock
{
    SAFE_RELEASE(m_pIndexBuffer);
    return E_FAIL;
}

memcpy( pIndices, g_Indices, sizeof(g_Indices) );
m_pIndexBuffer->Unlock();
```



> [!Note]
>
> <span data-ttu-id="8ba82-171">Se você criar um buffer de índice com o \_ sinalizador WRITEONLY D3DUSAGE, não use o \_ sinalizador de bloqueio ReadOnly do D3DLOCK.</span><span class="sxs-lookup"><span data-stu-id="8ba82-171">If you create an index buffer with the D3DUSAGE\_WRITEONLY flag, do not use the D3DLOCK\_READONLY locking flag.</span></span> <span data-ttu-id="8ba82-172">Use o \_ sinalizador D3DLOCK ReadOnly se seu aplicativo for ler apenas da memória do buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-172">Use the D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="8ba82-173">A inclusão desse sinalizador permite que o Direct3D Otimize seus procedimentos internos para melhorar a eficiência, Considerando que o acesso à memória será somente leitura.</span><span class="sxs-lookup"><span data-stu-id="8ba82-173">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>
>
> <span data-ttu-id="8ba82-174">Para obter informações sobre como usar D3DLOCK \_ descarte ou D3DLOCK \_ NoOverwrite para o parâmetro *flags* do método [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) , consulte [otimizações de desempenho (Direct3D 9)](performance-optimizations.md).</span><span class="sxs-lookup"><span data-stu-id="8ba82-174">For information about using D3DLOCK\_DISCARD or D3DLOCK\_NOOVERWRITE for the *Flags* parameter of the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, see [Performance Optimizations (Direct3D 9)](performance-optimizations.md).</span></span>

 

<span data-ttu-id="8ba82-175">Em C++, como você acessa diretamente a memória alocada para o buffer de índice, verifique se o aplicativo acessa corretamente a memória alocada.</span><span class="sxs-lookup"><span data-stu-id="8ba82-175">In C++, because you directly access the memory allocated for the index buffer, make sure your application properly accesses the allocated memory.</span></span> <span data-ttu-id="8ba82-176">Caso contrário, você correrá o risco de renderizar a memória inválida.</span><span class="sxs-lookup"><span data-stu-id="8ba82-176">Otherwise, you risk rendering that memory invalid.</span></span> <span data-ttu-id="8ba82-177">Use o stride do formato de índice que seu aplicativo usa para mover de um índice no buffer alocado para outro.</span><span class="sxs-lookup"><span data-stu-id="8ba82-177">Use the stride of the index format your application uses to move from one index in the allocated buffer to another.</span></span>

<span data-ttu-id="8ba82-178">Recupere informações sobre um buffer de índice chamando o método [**IDirect3DIndexBuffer9:: GetDesc**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="8ba82-178">Retrieve information about an index buffer by calling the [**IDirect3DIndexBuffer9::GetDesc**](/windows/desktop/api) method.</span></span> <span data-ttu-id="8ba82-179">Esse método preenche os membros da estrutura [**\_ desc D3DINDEXBUFFER**](d3dindexbuffer-desc.md) com informações sobre o buffer de índice.</span><span class="sxs-lookup"><span data-stu-id="8ba82-179">This method fills the members of the [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure with information about the index buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8ba82-180">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="8ba82-180">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8ba82-181">Recursos do Direct3D</span><span class="sxs-lookup"><span data-stu-id="8ba82-181">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="8ba82-182">Renderização de vértices e buffers de índice (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="8ba82-182">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="8ba82-183">Buffers de vértice (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="8ba82-183">Vertex Buffers (Direct3D 9)</span></span>](vertex-buffers.md)
</dt> </dl>

 

 
