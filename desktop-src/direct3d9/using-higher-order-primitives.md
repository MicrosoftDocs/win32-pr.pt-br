---
description: Esta seção mostra como usar primitivos de ordem superior em seu aplicativo.
ms.assetid: 7aa4f3ab-cfce-4f8f-a538-384f038fd324
title: Usando primitivos de Higher-Order (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e8d1447635c38e5e5df3d16ebca5ee3ee142020
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104550355"
---
# <a name="using-higher-order-primitives-direct3d-9"></a><span data-ttu-id="12855-103">Usando primitivos de Higher-Order (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="12855-103">Using Higher-Order Primitives (Direct3D 9)</span></span>

<span data-ttu-id="12855-104">Esta seção mostra como usar primitivos de ordem superior em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="12855-104">This section shows you how to use higher-order primitives in your application.</span></span>

-   [<span data-ttu-id="12855-105">Determinando Higher-Order suporte primitivo</span><span class="sxs-lookup"><span data-stu-id="12855-105">Determining Higher-Order Primitive Support</span></span>](#determining-higher-order-primitive-support)
-   [<span data-ttu-id="12855-106">Patches de desenho</span><span class="sxs-lookup"><span data-stu-id="12855-106">Drawing Patches</span></span>](#drawing-patches)
-   [<span data-ttu-id="12855-107">Gerando coordenadas normais e de textura</span><span class="sxs-lookup"><span data-stu-id="12855-107">Generating Normals and Texture Coordinates</span></span>](#generating-normals-and-texture-coordinates)

## <a name="determining-higher-order-primitive-support"></a><span data-ttu-id="12855-108">Determinando Higher-Order suporte primitivo</span><span class="sxs-lookup"><span data-stu-id="12855-108">Determining Higher-Order Primitive Support</span></span>

<span data-ttu-id="12855-109">O membro DevCaps da estrutura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) pode ser consultado para determinar o nível de suporte para operações que envolvem primitivos de ordem superior.</span><span class="sxs-lookup"><span data-stu-id="12855-109">The [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's DevCaps member can be queried to determine the level of support for operations involving higher-order primitives.</span></span> <span data-ttu-id="12855-110">A tabela a seguir lista os recursos de dispositivo relacionados a primitivos de ordem superior no Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="12855-110">The following table lists the device capabilities related to higher-order primitives in Direct3D 9.</span></span>



| <span data-ttu-id="12855-111">Funcionalidade do dispositivo</span><span class="sxs-lookup"><span data-stu-id="12855-111">Device capability</span></span>             | <span data-ttu-id="12855-112">Descrição</span><span class="sxs-lookup"><span data-stu-id="12855-112">Description</span></span>                                                                                                                                                  |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="12855-113">D3DDEVCAPS \_ NPATCHES</span><span class="sxs-lookup"><span data-stu-id="12855-113">D3DDEVCAPS\_NPATCHES</span></span>          | <span data-ttu-id="12855-114">O dispositivo dá suporte a N-patches e é baseado em [triângulos de PN curvos](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (um tipo especial de triângulos Bézier cúbicos).</span><span class="sxs-lookup"><span data-stu-id="12855-114">Device supports N-patches and is based on [Curved PN Triangles](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (a special kind of cubic Bézier triangles).</span></span> |
| <span data-ttu-id="12855-115">D3DDEVCAPS \_ QUINTICRTPATCHES</span><span class="sxs-lookup"><span data-stu-id="12855-115">D3DDEVCAPS\_QUINTICRTPATCHES</span></span>  | <span data-ttu-id="12855-116">O dispositivo dá suporte a curvas de Bézier QUINTIC e a linhas B.</span><span class="sxs-lookup"><span data-stu-id="12855-116">Device supports quintic Bezier curves and B-splines.</span></span>                                                                                                         |
| <span data-ttu-id="12855-117">D3DDEVCAPS \_ RTPATCHES</span><span class="sxs-lookup"><span data-stu-id="12855-117">D3DDEVCAPS\_RTPATCHES</span></span>         | <span data-ttu-id="12855-118">O dispositivo dá suporte a patches retangulares e triangulares (RT-patches).</span><span class="sxs-lookup"><span data-stu-id="12855-118">Device supports rectangular and triangular patches (RT-patches).</span></span>                                                                                             |
| <span data-ttu-id="12855-119">D3DDEVCAPS \_ RTPATCHHANDLEZERO</span><span class="sxs-lookup"><span data-stu-id="12855-119">D3DDEVCAPS\_RTPATCHHANDLEZERO</span></span> | <span data-ttu-id="12855-120">RT-patches podem ser desenhados com eficiência usando o identificador zero.</span><span class="sxs-lookup"><span data-stu-id="12855-120">RT-patches might be drawn efficiently using handle zero.</span></span>                                                                                                     |



 

<span data-ttu-id="12855-121">Observe que D3DDEVCAPS \_ RTPATCHHANDLEZERO não significa que um patch com o identificador zero possa ser desenhado.</span><span class="sxs-lookup"><span data-stu-id="12855-121">Note that D3DDEVCAPS\_RTPATCHHANDLEZERO does not mean that a patch with handle zero can be drawn.</span></span> <span data-ttu-id="12855-122">Um patch de manipulação zero sempre pode ser desenhado, independentemente de essa capacidade de dispositivo ser definida ou não.</span><span class="sxs-lookup"><span data-stu-id="12855-122">A handle zero patch can always be drawn, whether this device capability is set or not.</span></span> <span data-ttu-id="12855-123">Quando esse recurso é definido, a arquitetura de hardware não exige o armazenamento em cache de nenhuma informação e que patches não armazenados em cache (identificador zero) sejam desenhados com eficiência como em cache.</span><span class="sxs-lookup"><span data-stu-id="12855-123">When this capability is set, the hardware architecture does not require caching of any information and that uncached patches (handle zero) be drawn as efficiently as cached ones.</span></span>

## <a name="drawing-patches"></a><span data-ttu-id="12855-124">Patches de desenho</span><span class="sxs-lookup"><span data-stu-id="12855-124">Drawing Patches</span></span>

<span data-ttu-id="12855-125">O Direct3D 9 dá suporte a dois tipos de primitivos de ordem superior ou patches.</span><span class="sxs-lookup"><span data-stu-id="12855-125">Direct3D 9 supports two types of higher-order primitives, or patches.</span></span> <span data-ttu-id="12855-126">Eles são chamados de patches N-patches e RECT/tri.</span><span class="sxs-lookup"><span data-stu-id="12855-126">These are referred to as N-Patches and Rect/Tri patches.</span></span> <span data-ttu-id="12855-127">N-os patches podem ser renderizados usando qualquer chamada de renderização de triângulo habilitando N-patches por meio da chamada para [**IDirect3DDevice9:: SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)(nSegments) com valor nSegments maior que 1,0.</span><span class="sxs-lookup"><span data-stu-id="12855-127">N-patches can be rendered using any triangle rendering call by enabling N-patches through the call to [**IDirect3DDevice9::SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)( nSegments ) with nSegments value greater than 1.0.</span></span> <span data-ttu-id="12855-128">Patches Rect/Tri devem ser renderizados usando os seguintes pontos de entrada explícitos.</span><span class="sxs-lookup"><span data-stu-id="12855-128">Rect/Tri patches must be rendered using the following explicit entry points.</span></span>

<span data-ttu-id="12855-129">Você pode usar os métodos a seguir para desenhar patches.</span><span class="sxs-lookup"><span data-stu-id="12855-129">You can use the following methods to draw patches.</span></span>

-   <span data-ttu-id="12855-130">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span><span class="sxs-lookup"><span data-stu-id="12855-130">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span></span> <span data-ttu-id="12855-131">Para entender melhor como os dados de patch são referenciados no buffer de vértice, consulte [**D3DRECTPATCH \_ info**](d3drectpatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="12855-131">To better understand how the patch data is referenced in the vertex buffer, see [**D3DRECTPATCH\_INFO**](d3drectpatch-info.md).</span></span>
-   <span data-ttu-id="12855-132">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="12855-132">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api).</span></span> <span data-ttu-id="12855-133">Para entender melhor como os dados de patch são referenciados no buffer de vértice, consulte [**D3DTRIPATCH \_ info**](d3dtripatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="12855-133">To better understand how the patch data is referenced in the vertex buffer, see [**D3DTRIPATCH\_INFO**](d3dtripatch-info.md).</span></span>

<span data-ttu-id="12855-134">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) desenha um patch de ordem superior Retangular especificado pelo parâmetro pRectPatchInfo usando os fluxos definidos no momento.</span><span class="sxs-lookup"><span data-stu-id="12855-134">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) draws a rectangular high-order patch specified by the pRectPatchInfo parameter using the currently set streams.</span></span> <span data-ttu-id="12855-135">O parâmetro Handle é usado para associar o patch a um identificador, de forma que na próxima vez que o patch for desenhado, não seja necessário reespecificar pRectPatchInfo.</span><span class="sxs-lookup"><span data-stu-id="12855-135">The Handle parameter is used to associate the patch with a handle, so that the next time the patch is drawn, there is no need to respecify pRectPatchInfo.</span></span> <span data-ttu-id="12855-136">Isso possibilita que pré-calcular e coeficientes de diferença de encaminhamento em cache ou outras informações que, por sua vez, habilitam chamadas subsequentes para **IDirect3DDevice9::D rawrectpatch** usando o mesmo identificador para ser executado com eficiência.</span><span class="sxs-lookup"><span data-stu-id="12855-136">This makes it possible to precompute and cache forward difference coefficients or other information, which in turn enables subsequent calls to **IDirect3DDevice9::DrawRectPatch** using the same handle to run efficiently.</span></span>

<span data-ttu-id="12855-137">O objetivo é que, para patches estáticos, um aplicativo defina o sombreador de vértice e os fluxos apropriados, forneça informações de patch no parâmetro pRectPatchInfo e especifique um identificador para que o Direct3D possa capturar e armazenar informações em cache.</span><span class="sxs-lookup"><span data-stu-id="12855-137">It is intended that for static patches, an application would set the vertex shader and appropriate streams, supply patch information in the pRectPatchInfo parameter, and specify a handle so that Direct3D can capture and cache information.</span></span> <span data-ttu-id="12855-138">O aplicativo pode então chamar [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) subsequentemente com pRectPatchInfo definido como **NULL** para desenhar o patch com eficiência.</span><span class="sxs-lookup"><span data-stu-id="12855-138">The application can then call [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) subsequently with pRectPatchInfo set to **NULL** to efficiently draw the patch.</span></span> <span data-ttu-id="12855-139">Ao desenhar um patch em cache, os fluxos definidos atualmente são ignorados.</span><span class="sxs-lookup"><span data-stu-id="12855-139">When drawing a cached patch, the currently set streams are ignored.</span></span> <span data-ttu-id="12855-140">No entanto, é possível substituir o pNumSegs armazenado em cache especificando novos valores para pNumSegs.</span><span class="sxs-lookup"><span data-stu-id="12855-140">However, it is possible to override the cached pNumSegs by specifying new values for pNumSegs.</span></span> <span data-ttu-id="12855-141">Além disso, é necessário definir o mesmo sombreador de vértice ao renderizar um patch em cache como foi definido quando ele foi capturado.</span><span class="sxs-lookup"><span data-stu-id="12855-141">Also, it is required to set the same vertex shader when rendering a cached patch as was set when it was captured.</span></span>

<span data-ttu-id="12855-142">Para patches dinâmicos, os dados de patch são alterados para cada renderização do patch, portanto, não é eficiente armazenar informações em cache.</span><span class="sxs-lookup"><span data-stu-id="12855-142">For dynamic patches, the patch data changes for every rendering of the patch, so it is not efficient to cache information.</span></span> <span data-ttu-id="12855-143">O aplicativo pode transmitir isso para o Direct3D definindo o identificador como 0.</span><span class="sxs-lookup"><span data-stu-id="12855-143">The application can convey this to Direct3D by setting Handle to 0.</span></span> <span data-ttu-id="12855-144">Nesse caso, o Direct3D desenha o patch usando os fluxos atualmente definidos e os valores de pNumSegs e não armazena em cache nenhuma informação.</span><span class="sxs-lookup"><span data-stu-id="12855-144">In this case, Direct3D draws the patch using the currently set streams and the pNumSegs values and does not cache any information.</span></span> <span data-ttu-id="12855-145">Não é válido definir simultaneamente o identificador como 0 e pPatch como **nulo**.</span><span class="sxs-lookup"><span data-stu-id="12855-145">It is not valid to simultaneously set Handle to 0 and pPatch to **NULL**.</span></span>

<span data-ttu-id="12855-146">Ao reespecificar pRectPatchInfo para o mesmo identificador, o aplicativo pode substituir as informações armazenadas em cache anteriormente.</span><span class="sxs-lookup"><span data-stu-id="12855-146">By respecifying pRectPatchInfo for the same handle, the application can overwrite the previously cached information.</span></span>

<span data-ttu-id="12855-147">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api) é semelhante a [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) , exceto que ele desenha um patch triangular de ordem superior.</span><span class="sxs-lookup"><span data-stu-id="12855-147">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api) is similar to [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) except that it draws a triangular high-order patch.</span></span>

## <a name="generating-normals-and-texture-coordinates"></a><span data-ttu-id="12855-148">Gerando coordenadas normais e de textura</span><span class="sxs-lookup"><span data-stu-id="12855-148">Generating Normals and Texture Coordinates</span></span>

<span data-ttu-id="12855-149">Se você estiver usando um sombreador FVF (formato de vértice flexível), a geração automática de normais e coordenadas de textura não será possível.</span><span class="sxs-lookup"><span data-stu-id="12855-149">If you are using a flexible vertex format (FVF) shader, automatic generation of normals and texture coordinates is not possible.</span></span>

<span data-ttu-id="12855-150">Para os normais, você pode fornecê-los diretamente ou fazer com que o Direct3D os calcule para você.</span><span class="sxs-lookup"><span data-stu-id="12855-150">For normals, you can either directly supply them or have Direct3D calculate them for you.</span></span>

<span data-ttu-id="12855-151">As coordenadas geradas para patches retangulares são coordenadas baseadas em spline, conforme mostrado nas ilustrações a seguir.</span><span class="sxs-lookup"><span data-stu-id="12855-151">The coordinates generated for rectangular patches are spline-based coordinates, as shown in the following illustrations.</span></span>

![ilustração de uma textura original e a textura com coordenadas baseadas em spline](images/texturespline.png)

<span data-ttu-id="12855-153">As coordenadas geradas para patches triangulares são coordenadas baseadas em spline barycentric, conforme mostrado nas ilustrações a seguir.</span><span class="sxs-lookup"><span data-stu-id="12855-153">The coordinates generated for triangular patches are barycentric spline-based coordinates, as shown in the following illustrations.</span></span>

![ilustração de uma textura original e a textura com coordenadas baseadas em spline barycentric](images/texturebarycentricspline.png)

<span data-ttu-id="12855-155">Se um aplicativo precisar alterar o intervalo das coordenadas de textura geradas, isso poderá ser feito usando transformações de textura.</span><span class="sxs-lookup"><span data-stu-id="12855-155">If an application must change the range of the generated texture coordinates, this can be done using texture transforms.</span></span>

## <a name="related-topics"></a><span data-ttu-id="12855-156">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="12855-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="12855-157">Primitivos de ordem superior</span><span class="sxs-lookup"><span data-stu-id="12855-157">Higher-Order Primitives</span></span>](higher-order-primitives.md)
</dt> </dl>

 

 
