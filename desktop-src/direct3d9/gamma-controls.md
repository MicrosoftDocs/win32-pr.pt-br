---
description: Os controles gama permitem alterar o modo como o sistema exibe o conteúdo da superfície, sem afetar o conteúdo da superfície em si.
ms.assetid: 74f106be-8f47-4875-9908-32ff35912968
title: Controles gama (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6484bcf7e8fa5e07a3bf4bb718cd361330560f8c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104570121"
---
# <a name="gamma-controls-direct3d-9"></a><span data-ttu-id="f0c1d-103">Controles gama (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="f0c1d-103">Gamma Controls (Direct3D 9)</span></span>

<span data-ttu-id="f0c1d-104">Os controles gama permitem alterar o modo como o sistema exibe o conteúdo da superfície, sem afetar o conteúdo da superfície em si.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-104">Gamma controls allow you to change how the system displays the contents of the surface, without affecting the contents of the surface itself.</span></span> <span data-ttu-id="f0c1d-105">Imagine esses controles como filtros muito simples que o Direct3D aplica aos dados à medida que deixa uma superfície e antes de ser renderizado na tela.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-105">Think of these controls as very simple filters that Direct3D applies to data as it leaves a surface and before it is rendered on the screen.</span></span>

<span data-ttu-id="f0c1d-106">Os controles gama são uma propriedade de uma cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-106">Gamma controls are a property of a swap chain.</span></span> <span data-ttu-id="f0c1d-107">Os controles gama possibilitam alterar dinamicamente como os níveis vermelho, verde e azul da superfície são mapeados para os níveis reais que o sistema exibe.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-107">Gamma controls make it possible to dynamically change how a surface's red, green, and blue levels map to the actual levels that the system displays.</span></span> <span data-ttu-id="f0c1d-108">Ao definir os níveis de gama, você pode fazer com que a tela do usuário pisque cores-vermelho quando o caractere do usuário é capturado, verde quando o caractere pega um novo item e assim por diante, sem copiar novas imagens para o buffer de quadro para obter o efeito.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-108">By setting gamma levels, you can cause the user's screen to flash colors - red when the user's character is shot, green when the character picks up a new item, and so on - without copying new images to the frame buffer to achieve the effect.</span></span> <span data-ttu-id="f0c1d-109">Ou, você pode ajustar os níveis de cor para aplicar uma tendência de cor às imagens no buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-109">Or, you might adjust color levels to apply a color bias to the images in the back buffer.</span></span>

<span data-ttu-id="f0c1d-110">Sempre há pelo menos uma cadeia de permuta (a cadeia de permuta implícita) para cada dispositivo porque o Direct3D 9 tem uma cadeia de permuta como uma propriedade do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-110">There is always at least one swap chain (the implicit swap chain) for each device because Direct3D 9 has one swap chain as a property of the device.</span></span> <span data-ttu-id="f0c1d-111">Como a rampa de gama é uma propriedade da cadeia de permuta, a rampa de gama pode ser aplicada quando a cadeia de permuta é janelada.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-111">Because the gamma ramp is a property of the swap chain, the gamma ramp can be applied when the swap chain is windowed.</span></span> <span data-ttu-id="f0c1d-112">A rampa de gama entra em vigor imediatamente.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-112">The gamma ramp takes effect immediately.</span></span> <span data-ttu-id="f0c1d-113">Não há nenhuma espera por uma operação de sincronização vertical.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-113">There is no waiting for a vertical sync operation.</span></span>

<span data-ttu-id="f0c1d-114">Os métodos [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) e [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) permitem manipular níveis de Rampes que afetam os componentes de cores vermelho, verde e azul dos pixels da superfície antes de serem enviados ao conversor digital para analógico (DAC) para exibição.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-114">The [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods allow you to manipulate ramp levels that affect the red, green, and blue color components of pixels from the surface before they are sent to the digital-to-analog converter (DAC) for display.</span></span>

## <a name="gamma-ramp-levels"></a><span data-ttu-id="f0c1d-115">Níveis de rampa gama</span><span class="sxs-lookup"><span data-stu-id="f0c1d-115">Gamma Ramp Levels</span></span>

<span data-ttu-id="f0c1d-116">No Direct3D, o termo faixa gama descreve um conjunto de valores que mapeiam o nível de um componente de cor específico-vermelho, verde, azul-para todos os pixels no buffer de quadro para novos níveis que são recebidos pelo DAC para exibição.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-116">In Direct3D, the term gamma ramp describes a set of values that map the level of a particular color component - red, green, blue - for all pixels in the frame buffer to new levels that are received by the DAC for display.</span></span> <span data-ttu-id="f0c1d-117">O remapeamento é executado por meio de três tabelas de pesquisa, uma para cada componente de cor.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-117">The remapping is performed by way of three look-up tables, one for each color component.</span></span>

<span data-ttu-id="f0c1d-118">Veja como funciona: o Direct3D usa um pixel do buffer de quadro e avalia seus componentes de cor de vermelho, verde e azul individuais.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-118">Here's how it works: Direct3D takes a pixel from the frame buffer and evaluates its individual red, green, and blue color components.</span></span> <span data-ttu-id="f0c1d-119">Cada componente é representado por um valor de 0 a 65535.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-119">Each component is represented by a value from 0 to 65535.</span></span> <span data-ttu-id="f0c1d-120">O Direct3D usa o valor original e o usa para indexar uma matriz de elemento 256 (a rampa), em que cada elemento contém um valor que substitui o original.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-120">Direct3D takes the original value and uses it to index a 256-element array (the ramp), where each element contains a value that replaces the original one.</span></span> <span data-ttu-id="f0c1d-121">O Direct3D executa esse processo de pesquisa e substituição para cada componente de cor de cada pixel no buffer de quadros, alterando assim as cores finais de todos os pixels na tela.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-121">Direct3D performs this look-up and replace process for each color component of each pixel in the frame buffer, thereby changing the final colors for all the on-screen pixels.</span></span>

<span data-ttu-id="f0c1d-122">É útil visualizar os valores de rampa ao grafá-los, conforme mostrado nos dois grafos a seguir.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-122">It's handy to visualize the ramp values by graphing them, as shown in the following two graphs.</span></span> <span data-ttu-id="f0c1d-123">O gráfico esquerdo mostra uma rampa que não modifica as cores.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-123">The left graph shows a ramp that doesn't modify colors at all.</span></span> <span data-ttu-id="f0c1d-124">O gráfico à direita mostra uma rampa que impõe uma tendência negativa para o componente de cor ao qual ela é aplicada.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-124">The right graph shows a ramp that imposes a negative bias to the color component to which it is applied.</span></span>

![grafos dos valores de rampa gama](images/gammalv.png)

<span data-ttu-id="f0c1d-126">Os elementos de matriz para o grafo à esquerda contêm valores idênticos ao seu índice-0 no elemento no índice 0 e 65535 no índice 255.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-126">The array elements for the graph on the left contain values identical to their index - 0 in the element at index 0, and 65535 at index 255.</span></span> <span data-ttu-id="f0c1d-127">Esse tipo de rampa é o padrão, pois ele não altera os valores de entrada antes que eles sejam exibidos.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-127">This type of ramp is the default, as it doesn't change the input values before they're displayed.</span></span> <span data-ttu-id="f0c1d-128">O grafo certo fornece mais variação; sua rampa contém valores que variam de 0 no primeiro elemento a 32768 no último elemento, com valores que variam uniformemente entre eles.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-128">The right graph provides more variation; its ramp contains values that range from 0 in the first element to 32768 in the last element, with values ranging uniformly in between.</span></span> <span data-ttu-id="f0c1d-129">O efeito é que o componente de cor que usa essa rampa parece sem áudio na tela.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-129">The effect is that the color component that uses this ramp appears muted on the display.</span></span> <span data-ttu-id="f0c1d-130">Você não está limitado a usar grafos lineares; Se o seu aplicativo puder atribuir mapeamento arbitrário, se necessário.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-130">You are not limited to using linear graphs; if your application can assign arbitrary mapping if needed.</span></span> <span data-ttu-id="f0c1d-131">Você pode até mesmo definir as entradas para todos os zeros para remover completamente um componente de cor da exibição.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-131">You can even set the entries to all zeroes to remove a color component completely from the display.</span></span>

## <a name="setting-and-retrieving-gamma-ramp-levels"></a><span data-ttu-id="f0c1d-132">Configurando e recuperando os níveis de rampa gama</span><span class="sxs-lookup"><span data-stu-id="f0c1d-132">Setting and Retrieving Gamma Ramp Levels</span></span>

<span data-ttu-id="f0c1d-133">Os níveis de rampa de gama são efetivamente tabelas de pesquisa que o Direct3D usa para mapear os componentes de cor do buffer de quadros para novos níveis que serão exibidos.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-133">Gamma ramp levels are effectively look-up tables that Direct3D uses to map the frame buffer color components to new levels that will be displayed.</span></span> <span data-ttu-id="f0c1d-134">Você pode definir e recuperar os níveis de rampa para a superfície primária chamando os métodos [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) e [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) .</span><span class="sxs-lookup"><span data-stu-id="f0c1d-134">You can set and retrieve ramp levels for the primary surface by calling the [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods.</span></span> <span data-ttu-id="f0c1d-135">**SetGammaRamp** aceita dois parâmetros e **GetGammaRamp** aceita um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-135">**SetGammaRamp** accepts two parameters and **GetGammaRamp** accepts one parameter.</span></span> <span data-ttu-id="f0c1d-136">Para **SetGammaRamp**, o primeiro parâmetro é D3DSGR \_ CALIBRATE ou D3DSGR \_ sem \_ calibragem.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-136">For **SetGammaRamp**, the first parameter is either D3DSGR\_CALIBRATE or D3DSGR\_NO\_CALIBRATION.</span></span> <span data-ttu-id="f0c1d-137">O segundo parâmetro, pRamp, é um ponteiro para uma estrutura [**D3DGAMMARAMP**](d3dgammaramp.md) .</span><span class="sxs-lookup"><span data-stu-id="f0c1d-137">The second parameter, pRamp, is a pointer to a [**D3DGAMMARAMP**](d3dgammaramp.md) structure.</span></span> <span data-ttu-id="f0c1d-138">A estrutura **D3DGAMMARAMP** contém matrizes de 3 256 elementos de palavras, uma matriz cada para conter as rampas de gama vermelha, verde e azul.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-138">The **D3DGAMMARAMP** structure contains three 256-element arrays of WORDs, one array each to contain the red, green, and blue gamma ramps.</span></span> <span data-ttu-id="f0c1d-139">**GetGammaRamp** tem um parâmetro que usa um ponteiro para um tipo **D3DGAMMARAMP** que será preenchido com a rampa de gama atual.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-139">**GetGammaRamp** has one parameter that takes a pointer to a **D3DGAMMARAMP** type that will be filled with the current gamma ramp.</span></span>

<span data-ttu-id="f0c1d-140">Você pode incluir o \_ valor de calibragem D3DSGR para o primeiro parâmetro de [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) para invocar o calibrador ao definir novos níveis de gama.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-140">You can include the D3DSGR\_CALIBRATE value for the first parameter of [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) to invoke the calibrator when setting new gamma levels.</span></span> <span data-ttu-id="f0c1d-141">A calibragem de escalas gama gera uma sobrecarga de processamento e não deve ser usada com frequência.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-141">Calibrating gamma ramps incurs some processing overhead, and should not be used frequently.</span></span> <span data-ttu-id="f0c1d-142">A definição de uma rampa de gama calibrada fornece um valor gama consistente e absoluto para o usuário, independentemente do adaptador de vídeo e do monitor.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-142">Setting a calibrated gamma ramp provides a consistent and absolute gamma value for the user, regardless of the display adapter and monitor.</span></span>

<span data-ttu-id="f0c1d-143">Nem todos os sistemas dão suporte à calibragem gama.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-143">Not all systems support gamma calibration.</span></span> <span data-ttu-id="f0c1d-144">Para determinar se a calibragem gama tem suporte, chame [**GetDeviceCaps**](/windows/desktop/api)e examine o membro Caps2 da estrutura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) associada depois que o método retornar.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-144">To determine if gamma calibration is supported, call [**GetDeviceCaps**](/windows/desktop/api), and examine the Caps2 member of the associated [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure after the method returns.</span></span> <span data-ttu-id="f0c1d-145">Se o \_ sinalizador de funcionalidade D3DCAPS2 CANCALIBRATEGAMMA estiver presente, a calibração gama terá suporte.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-145">If the D3DCAPS2\_CANCALIBRATEGAMMA capability flag is present, then gamma calibration is supported.</span></span>

<span data-ttu-id="f0c1d-146">Ao definir novos níveis de ramp, lembre-se de que os níveis definidos nas matrizes são usados apenas quando seu aplicativo está no modo de tela inteira e exclusivo.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-146">When setting new ramp levels, keep in mind that the levels you set in the arrays are only used when your application is in full-screen, exclusive mode.</span></span> <span data-ttu-id="f0c1d-147">Sempre que o aplicativo muda para o modo normal, os níveis de rampa são separados, dando efeito novamente quando o aplicativo reabilita o modo de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-147">Whenever your application changes to normal mode, the ramp levels are set aside, taking effect again when the application reinstates full-screen mode.</span></span>

<span data-ttu-id="f0c1d-148">Se o dispositivo não oferecer suporte a rampas de gama no modo de apresentação atual da cadeia de troca (tela inteira ou em janela), nenhum valor de erro será retornado.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-148">If the device does not support gamma ramps in the swap chain's current presentation mode (full-screen or windowed), no error value is returned.</span></span> <span data-ttu-id="f0c1d-149">Os aplicativos podem verificar os \_ bits de recurso D3DCAPS2 FULLSCREENGAMMA e D3DCAPS2 \_ CANCALIBRATEGAMMA no membro Caps2 do tipo D3DCAPS9 para determinar os recursos do dispositivo e se um calibrador está instalado.</span><span class="sxs-lookup"><span data-stu-id="f0c1d-149">Applications can check the D3DCAPS2\_FULLSCREENGAMMA and D3DCAPS2\_CANCALIBRATEGAMMA capability bits in the Caps2 member of the D3DCAPS9 type to determine the capabilities of the device and whether a calibrator is installed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f0c1d-150">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="f0c1d-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f0c1d-151">Superfícies de Direct3D</span><span class="sxs-lookup"><span data-stu-id="f0c1d-151">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
