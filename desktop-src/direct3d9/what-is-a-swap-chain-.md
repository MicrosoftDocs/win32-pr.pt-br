---
description: Uma cadeia de troca é uma coleção de buffers que são usados para exibir quadros para o usuário.
ms.assetid: aefc0680-cbe6-42eb-8c00-eaa343eee469
title: O que é uma cadeia de permuta? (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c8fc1fd2d313c70a680d9b276a3aabedc6d8cff
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104163732"
---
# <a name="what-is-a-swap-chain-direct3d-9"></a><span data-ttu-id="7bf48-104">O que é uma cadeia de permuta?</span><span class="sxs-lookup"><span data-stu-id="7bf48-104">What Is a Swap Chain?</span></span> <span data-ttu-id="7bf48-105">(Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="7bf48-105">(Direct3D 9)</span></span>

<span data-ttu-id="7bf48-106">Uma cadeia de troca é uma coleção de buffers que são usados para exibir quadros para o usuário.</span><span class="sxs-lookup"><span data-stu-id="7bf48-106">A swap chain is a collection of buffers that are used for displaying frames to the user.</span></span> <span data-ttu-id="7bf48-107">Cada vez que um aplicativo apresenta um novo quadro para exibição, o primeiro buffer da cadeia de troca assume o lugar do buffer exibido.</span><span class="sxs-lookup"><span data-stu-id="7bf48-107">Each time an application presents a new frame for display, the first buffer in the swap chain takes the place of the displayed buffer.</span></span> <span data-ttu-id="7bf48-108">Esse processo é chamado troca ou inversão.</span><span class="sxs-lookup"><span data-stu-id="7bf48-108">This process is called swapping or flipping.</span></span>

<span data-ttu-id="7bf48-109">Um adaptador gráfico contém um ponteiro para uma superfície que representa a imagem que está sendo exibida no monitor, chamado de um buffer frontal.</span><span class="sxs-lookup"><span data-stu-id="7bf48-109">A graphics adapter holds a pointer to a surface that represents the image being displayed on the monitor, called a front buffer.</span></span> <span data-ttu-id="7bf48-110">Como o monitor é atualizado, a placa gráfica envia o conteúdo do buffer frontal para o monitor para ser exibido.</span><span class="sxs-lookup"><span data-stu-id="7bf48-110">As the monitor is refreshed, the graphics card sends the contents of the front buffer to the monitor to be displayed.</span></span> <span data-ttu-id="7bf48-111">No entanto, isso leva a um problema ao renderizar gráficos em tempo real.</span><span class="sxs-lookup"><span data-stu-id="7bf48-111">However, this leads to a problem when rendering real-time graphics.</span></span> <span data-ttu-id="7bf48-112">O coração do problema é que as taxas de atualização do monitor são muito lentas em comparação com o restante do computador.</span><span class="sxs-lookup"><span data-stu-id="7bf48-112">The heart of the problem is that monitor refresh rates are very slow in comparison to the rest of the computer.</span></span> <span data-ttu-id="7bf48-113">As taxas de atualização comuns variam de 60 Hz (60 vezes por segundo) a 100 Hz.</span><span class="sxs-lookup"><span data-stu-id="7bf48-113">Common refresh rates range from 60 Hz (60 times per second) to 100 Hz.</span></span> <span data-ttu-id="7bf48-114">Se seu aplicativo está atualizando o buffer frontal enquanto o monitor está no meio de uma atualização, a imagem exibida será recortada na metade com a metade superior da tela que contém a imagem anterior e a metade inferior que contém a nova imagem.</span><span class="sxs-lookup"><span data-stu-id="7bf48-114">If your application is updating the front buffer while the monitor is in the middle of a refresh, the image that is displayed will be cut in half with the upper half of the display containing the old image and the lower half containing the new image.</span></span> <span data-ttu-id="7bf48-115">Esse problema é conhecido como desmembramento.</span><span class="sxs-lookup"><span data-stu-id="7bf48-115">This problem is referred to as tearing.</span></span>

<span data-ttu-id="7bf48-116">O Direct3D implementa duas opções para evitar a divisão:</span><span class="sxs-lookup"><span data-stu-id="7bf48-116">Direct3D implements two options to avoid tearing:</span></span>

-   <span data-ttu-id="7bf48-117">Uma opção para permitir somente as atualizações de monitor na operação de retorno vertical (ou sincronização vertical).</span><span class="sxs-lookup"><span data-stu-id="7bf48-117">An option to only allow updates of the monitor on the vertical retrace (or vertical sync) operation.</span></span> <span data-ttu-id="7bf48-118">Um monitor normalmente atualiza sua imagem, movendo um marcador de luz horizontalmente, fazendo um movimento em zigue-zague na parte superior esquerda do monitor e terminando na parte inferior direita.</span><span class="sxs-lookup"><span data-stu-id="7bf48-118">A monitor typically refreshes its image by moving a light pin horizontally, zigzagging from the top left of the monitor and ending at the bottom right.</span></span> <span data-ttu-id="7bf48-119">Quando o marcador de luz atinge a parte inferior, o monitor calibra novamente o marcador de luz, movendo-o novamente para o canto superior esquerdo para que o processo possa iniciar novamente.</span><span class="sxs-lookup"><span data-stu-id="7bf48-119">When the light pin reaches the bottom, the monitor recalibrates the light pin by moving it back to the upper left so that the process can start again.</span></span> <span data-ttu-id="7bf48-120">Essa recalibração é denominada sincronização vertical. Durante uma sincronização vertical, nada é desenhado no monitor, portanto, qualquer atualização para o buffer frontal não será vista até o monitor comece a desenhar novamente.</span><span class="sxs-lookup"><span data-stu-id="7bf48-120">This recalibration is called a vertical sync. During a vertical sync, the monitor is not drawing anything, so any update to the front buffer will not be seen until the monitor starts to draw again.</span></span> <span data-ttu-id="7bf48-121">A sincronização vertical é relativamente lenta, no entanto, não lenta o suficiente para renderizar uma cena complexa durante o tempo de espera.</span><span class="sxs-lookup"><span data-stu-id="7bf48-121">The vertical sync is relatively slow; however, not slow enough to render a complex scene while waiting.</span></span> <span data-ttu-id="7bf48-122">O que é necessário para evitar o desmembramento e ser capaz de renderizar cenas complexas é um processo chamado de armazenamento em buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="7bf48-122">What is needed to avoid tearing and be able to render complex scenes is a process called back buffering.</span></span>
-   <span data-ttu-id="7bf48-123">Uma opção para usar uma técnica chamada de armazenamento em buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="7bf48-123">An option to use a technique called back buffering.</span></span> <span data-ttu-id="7bf48-124">O armazenamento em buffer de trás é o processo de desenhar uma cena em uma superfície fora da tela, chamada de buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="7bf48-124">Back buffering is the process of drawing a scene to an off-screen surface, called a back buffer.</span></span> <span data-ttu-id="7bf48-125">Observe que qualquer superfície diferente do buffer frontal é chamada de superfície fora da tela porque nunca é exibida diretamente pelo monitor.</span><span class="sxs-lookup"><span data-stu-id="7bf48-125">Note that any surface other than the front buffer is called an off-screen surface because it is never directly viewed by the monitor.</span></span> <span data-ttu-id="7bf48-126">Usando um buffer de fundo, um aplicativo tem a liberdade de renderizar uma cena sempre que o sistema estiver ocioso (ou seja, não há mensagens do Windows esperando) sem precisar considerar a taxa de atualização do monitor.</span><span class="sxs-lookup"><span data-stu-id="7bf48-126">By using a back buffer, an application has the freedom to render a scene whenever the system is idle (that is, no windows messages are waiting) without having to consider the monitor's refresh rate.</span></span> <span data-ttu-id="7bf48-127">O armazenamento em buffer de fundo traz uma complicação adicional sobre como e quando mover o buffer de fundo para o buffer frontal.</span><span class="sxs-lookup"><span data-stu-id="7bf48-127">Back buffering brings in an additional complication of how and when to move the back buffer to the front buffer.</span></span>

<span data-ttu-id="7bf48-128">O processo de mover o buffer de fundo para o buffer frontal é chamado de inversão de superfície.</span><span class="sxs-lookup"><span data-stu-id="7bf48-128">The process of moving the back buffer to the front buffer is called surface flipping.</span></span> <span data-ttu-id="7bf48-129">Como a placa gráfica simplesmente usa um ponteiro para uma superfície para representar o buffer frontal, uma simples alteração no ponteiro é tudo o que é necessário para definir o buffer de fundo no buffer frontal.</span><span class="sxs-lookup"><span data-stu-id="7bf48-129">Because the graphics card simply uses a pointer to a surface to represent the front buffer, a simple pointer change is all that is needed to set the back buffer to the front buffer.</span></span> <span data-ttu-id="7bf48-130">Quando um aplicativo solicita ao Direct3D para apresentar o buffer de fundo no buffer frontal, o Direct3D simplesmente "vira" os dois ponteiros de superfície.</span><span class="sxs-lookup"><span data-stu-id="7bf48-130">When an application asks Direct3D to present the back buffer to the front buffer, Direct3D simply "flips" the two surface pointers.</span></span> <span data-ttu-id="7bf48-131">O resultado é que o buffer de fundo agora é o novo buffer frontal e o buffer frontal antigo é o novo buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="7bf48-131">The result is that the back buffer is now the new front buffer, and the old front buffer is the new back buffer.</span></span> <span data-ttu-id="7bf48-132">A inversão de superfície é invocada sempre que um aplicativo solicita ao dispositivo Direct3D para apresentar o buffer de fundo, no entanto, você pode configurar o Direct3D para enfileirar as solicitações até que uma sincronização vertical ocorra.</span><span class="sxs-lookup"><span data-stu-id="7bf48-132">A surface flip is invoked whenever an application asks the Direct3D device to present the back buffer; however, Direct3D can be set up to queue the requests until a vertical sync occurs.</span></span> <span data-ttu-id="7bf48-133">Essa opção é conhecida como intervalo de apresentação do dispositivo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="7bf48-133">This option is referred to as the Direct3D device's presentation interval.</span></span> <span data-ttu-id="7bf48-134">Observe que os dados no novo buffer de fundo podem não ser reutilizáveis, dependendo de como um aplicativo especifica como o Direct3D deve lidar com a inversão da superfície.</span><span class="sxs-lookup"><span data-stu-id="7bf48-134">Note that the data in the new back buffer may not be reusable, depending on how an application specifies how Direct3D should handle surface flipping.</span></span> <span data-ttu-id="7bf48-135">A inversão de superfície é fundamental para multimídia, animação e software de jogo; ela é equivalente à maneira como você faz animações usando uma folha de papel.</span><span class="sxs-lookup"><span data-stu-id="7bf48-135">Surface flipping is key in multimedia, animation, and game software; it is equivalent to the way you can do animation with a pad of paper.</span></span> <span data-ttu-id="7bf48-136">Em cada página, o artista muda as figuras ligeiramente, para que ao navegar rapidamente entre as folhas, o desenho pareça animado.</span><span class="sxs-lookup"><span data-stu-id="7bf48-136">On each page, the artist changes the figures slightly, so that when you flip rapidly between sheets, the drawing appears animated.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7bf48-137">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7bf48-137">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7bf48-138">Superfícies de Direct3D</span><span class="sxs-lookup"><span data-stu-id="7bf48-138">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> <dt>

[<span data-ttu-id="7bf48-139">Invertendo superfícies (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="7bf48-139">Flipping Surfaces (Direct3D 9)</span></span>](flipping-surfaces.md)
</dt> </dl>

 

 



