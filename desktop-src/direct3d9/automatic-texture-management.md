---
description: O gerenciamento de textura é o processo de determinar quais texturas são necessárias para a renderização em um determinado momento e garantir que essas texturas sejam carregadas na memória de vídeo.
ms.assetid: ea6d64ee-f570-49eb-b5fd-67fcde3f8ddc
title: Gerenciamento automático de textura (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d0eb14eede197661bc127a062229ebed31274ae8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103826601"
---
# <a name="automatic-texture-management-direct3d-9"></a><span data-ttu-id="7e4f6-103">Gerenciamento automático de textura (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="7e4f6-103">Automatic Texture Management (Direct3D 9)</span></span>

<span data-ttu-id="7e4f6-104">O gerenciamento de textura é o processo de determinar quais texturas são necessárias para a renderização em um determinado momento e garantir que essas texturas sejam carregadas na memória de vídeo.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-104">Texture management is the process of determining which textures are needed for rendering at a given time and ensuring that those textures are loaded into video memory.</span></span> <span data-ttu-id="7e4f6-105">Assim como acontece com qualquer algoritmo, os esquemas de gerenciamento de textura variam em complexidade, mas qualquer abordagem ao gerenciamento de textura envolve as seguintes tarefas principais.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-105">As with any algorithm, texture management schemes vary in complexity, but any approach to texture management involves the following key tasks.</span></span>

-   <span data-ttu-id="7e4f6-106">Acompanhando a quantidade de memória de textura disponível.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-106">Tracking the amount of available texture memory.</span></span>
-   <span data-ttu-id="7e4f6-107">Calculando quais texturas são necessárias para a renderização e quais não são.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-107">Calculating which textures are needed for rendering, and which are not.</span></span>
-   <span data-ttu-id="7e4f6-108">Determinar quais recursos de textura existentes podem ser recarregados com outra imagem de textura e quais superfícies devem ser destruídas e substituídas por novos recursos de textura.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-108">Determining which existing texture resources can be reloaded with another texture image, and which surfaces should be destroyed and replaced with new texture resources.</span></span>

<span data-ttu-id="7e4f6-109">O Direct3D implementa o gerenciamento de textura com suporte do sistema para garantir que as texturas sejam carregadas para um desempenho ideal.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-109">Direct3D implements system-supported texture management to ensure that textures are loaded for optimal performance.</span></span> <span data-ttu-id="7e4f6-110">Os recursos de textura que o Direct3D gerencia são chamados de texturas gerenciadas.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-110">Texture resources that Direct3D manages are referred to as managed textures.</span></span>

<span data-ttu-id="7e4f6-111">O Gerenciador de textura rastreia texturas com um carimbo de data/hora que identifica quando a textura foi usada pela última vez.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-111">The texture manager tracks textures with a time-stamp that identifies when the texture was last used.</span></span> <span data-ttu-id="7e4f6-112">Em seguida, ele usa um algoritmo menos usado recentemente para determinar quais texturas devem ser removidas.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-112">It then uses a least-recently-used algorithm to determine which textures should be removed.</span></span> <span data-ttu-id="7e4f6-113">As prioridades de textura são usadas como separadores de ligação quando duas texturas são destinadas para remoção da memória.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-113">Texture priorities are used as tie breakers when two textures are targeted for removal from memory.</span></span> <span data-ttu-id="7e4f6-114">Se duas texturas tiverem o mesmo valor de prioridade, a textura menos usada recentemente será removida.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-114">If two textures have the same priority value, the least-recently-used texture is removed.</span></span> <span data-ttu-id="7e4f6-115">No entanto, se duas texturas tiverem o mesmo carimbo de data/hora, a textura que tem uma prioridade mais baixa será removida primeiro.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-115">However, if two textures have the same time-stamp, the texture that has a lower priority is removed first.</span></span>

<span data-ttu-id="7e4f6-116">Você solicita o gerenciamento automático de textura para superfícies de textura ao criá-las.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-116">You request automatic texture management for texture surfaces when you create them.</span></span> <span data-ttu-id="7e4f6-117">Para recuperar uma textura gerenciada em um aplicativo C++, crie um recurso de textura chamando [**IDirect3DDevice9:: CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) e ESPECIFICANDO o D3DPOOL \_ gerenciado para o parâmetro de pool.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-117">To retrieve a managed texture in a C++ application, create a texture resource by calling [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) and specifying the D3DPOOL\_MANAGED for the Pool parameter.</span></span> <span data-ttu-id="7e4f6-118">Você não tem permissão para especificar onde deseja que a textura seja criada.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-118">You are not allowed to specify where you want the texture created.</span></span> <span data-ttu-id="7e4f6-119">Você não pode usar os \_ sinalizadores D3DPOOL padrão ou D3DPOOL \_ SYSTEMMEM ao criar uma textura gerenciada.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-119">You cannot use the D3DPOOL\_DEFAULT or D3DPOOL\_SYSTEMMEM flags when creating a managed texture.</span></span> <span data-ttu-id="7e4f6-120">Depois de criar a textura gerenciada, você pode chamar o método [**IDirect3DDevice9:: SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) para defini-lo como um estágio na cascata de textura do dispositivo de renderização.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-120">After creating the managed texture, you can call the [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) method to set it to a stage in the rendering device's texture cascade.</span></span>

<span data-ttu-id="7e4f6-121">Você pode atribuir uma prioridade a texturas gerenciadas chamando o método [**IDirect3DResource9:: prepriorion**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) para a superfície de textura.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-121">You can assign a priority to managed textures by calling the [**IDirect3DResource9::SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) method for the texture surface.</span></span>

<span data-ttu-id="7e4f6-122">O Direct3D baixa automaticamente as texturas na memória de vídeo conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-122">Direct3D automatically downloads textures into video memory as needed.</span></span> <span data-ttu-id="7e4f6-123">O sistema pode armazenar em cache as texturas gerenciadas na memória de vídeo local ou não local, dependendo da disponibilidade da memória de vídeo não local ou de outros fatores.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-123">The system might cache managed textures in local or nonlocal video memory, depending on the availability of nonlocal video memory or other factors.</span></span> <span data-ttu-id="7e4f6-124">O local do cache de suas texturas gerenciadas não é comunicado ao seu aplicativo, nem essas informações são necessárias para usar o gerenciamento automático de textura.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-124">The cache location of your managed textures is not communicated to your application, nor is this information required to use automatic texture management.</span></span> <span data-ttu-id="7e4f6-125">Se seu aplicativo usa mais texturas do que pode caber na memória de vídeo, o Direct3D remove as texturas mais antigas da memória de vídeo para liberar espaço para as novas texturas.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-125">If your application uses more textures than can fit in video memory, Direct3D removes older textures from video memory to make room for the new textures.</span></span> <span data-ttu-id="7e4f6-126">Se você usar uma textura removida novamente, o sistema usará a superfície de textura da memória do sistema original para recarregar a textura no cache de memória de vídeo.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-126">If you use a removed texture again, the system uses the original system-memory texture surface to reload the texture in the video-memory cache.</span></span> <span data-ttu-id="7e4f6-127">Embora o recarregamento da textura seja necessário, ele também diminui o desempenho do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-127">Although reloading the texture is necessary, it also decreases the application's performance.</span></span>

<span data-ttu-id="7e4f6-128">Você pode modificar dinamicamente a cópia original da memória do sistema da textura atualizando ou bloqueando o recurso de textura.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-128">You can dynamically modify the original system-memory copy of the texture by updating or locking the texture resource.</span></span> <span data-ttu-id="7e4f6-129">Quando o sistema detecta uma superfície suja-depois que uma atualização é concluída, ou quando a superfície é desbloqueada, o Gerenciador de textura atualiza automaticamente a cópia da memória de vídeo da textura.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-129">When the system detects a dirty surface - after an update is completed, or when the surface is unlocked - the texture manager automatically updates the video-memory copy of the texture.</span></span> <span data-ttu-id="7e4f6-130">O impacto de desempenho incorrido é semelhante ao recarregamento de uma textura removida.</span><span class="sxs-lookup"><span data-stu-id="7e4f6-130">The performance hit incurred is similar to reloading a removed texture.</span></span>

<span data-ttu-id="7e4f6-131">Ao inserir um novo nível em um jogo, seu aplicativo pode precisar liberar todas as texturas gerenciadas da memória de vídeo (chamando [**IDirect3DDevice9:: EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span><span class="sxs-lookup"><span data-stu-id="7e4f6-131">When entering a new level in a game, your application might need to flush all managed textures from video memory (by calling [**IDirect3DDevice9::EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span></span>

<span data-ttu-id="7e4f6-132">Para obter mais informações sobre o gerenciamento de recursos, consulte [Managing Resources (Direct3D 9)](managing-resources.md).</span><span class="sxs-lookup"><span data-stu-id="7e4f6-132">For more information about resource management, see [Managing Resources (Direct3D 9)](managing-resources.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="7e4f6-133">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7e4f6-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7e4f6-134">Texturas do Direct3D</span><span class="sxs-lookup"><span data-stu-id="7e4f6-134">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
