---
description: Conceitualmente, um visor é um retângulo bidimensional (2D) no qual uma cena 3D é projetada.
ms.assetid: eddadaa1-9181-47fa-8530-44aa46fea286
title: Visores e recorte (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d57f64d17f7abf4e370406f984fa50037be6d44e
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104087213"
---
# <a name="viewports-and-clipping-direct3d-9"></a><span data-ttu-id="9eec5-103">Visores e recorte (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="9eec5-103">Viewports and Clipping (Direct3D 9)</span></span>

<span data-ttu-id="9eec5-104">Conceitualmente, um visor é um retângulo bidimensional (2D) no qual uma cena 3D é projetada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-104">Conceptually, a viewport is a two-dimensional (2D) rectangle into which a 3D scene is projected.</span></span> <span data-ttu-id="9eec5-105">No Direct3D, o retângulo existe como coordenadas dentro de uma superfície do Direct3D que o sistema usa como um destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-105">In Direct3D, the rectangle exists as coordinates within a Direct3D surface that the system uses as a rendering target.</span></span> <span data-ttu-id="9eec5-106">A transformação da projeção converte os vértices no sistema de coordenadas usado para o visor.</span><span class="sxs-lookup"><span data-stu-id="9eec5-106">The projection transformation converts vertices into the coordinate system used for the viewport.</span></span> <span data-ttu-id="9eec5-107">Um visor também é usado para especificar o intervalo de valores de profundidade em uma superfície de destino de renderização na qual uma cena será renderizada (geralmente 0.0 a 1.0).</span><span class="sxs-lookup"><span data-stu-id="9eec5-107">A viewport is also used to specify the range of depth values on a render-target surface into which a scene will be rendered (usually 0.0 to 1.0).</span></span>

## <a name="the-viewing-frustum"></a><span data-ttu-id="9eec5-108">Tronco de exibição</span><span class="sxs-lookup"><span data-stu-id="9eec5-108">The Viewing Frustum</span></span>

<span data-ttu-id="9eec5-109">Um tronco de exibição é o volume 3D em uma cena posicionado com relação à câmera do visor.</span><span class="sxs-lookup"><span data-stu-id="9eec5-109">A viewing frustum is 3D volume in a scene positioned relative to the viewport's camera.</span></span> <span data-ttu-id="9eec5-110">A forma do volume afeta como os modelos são projetados do espaço da câmera na tela.</span><span class="sxs-lookup"><span data-stu-id="9eec5-110">The shape of the volume affects how models are projected from camera space onto the screen.</span></span> <span data-ttu-id="9eec5-111">O tipo mais comum de projeção, uma projeção de perspectiva, é responsável por fazer com que os objetos próximos da câmera pareçam maiores que os objetos distantes.</span><span class="sxs-lookup"><span data-stu-id="9eec5-111">The most common type of projection, a perspective projection, is responsible for making objects near the camera appear bigger than objects in the distance.</span></span> <span data-ttu-id="9eec5-112">Para a exibição de perspectiva, o tronco de exibição pode ser visualizado como uma pirâmide, com a câmera posicionada na ponta conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="9eec5-112">For perspective viewing, the viewing frustum can be visualized as a pyramid, with the camera positioned at the tip as shown in the following illustration.</span></span> <span data-ttu-id="9eec5-113">Esta pirâmide é intersectada por um plano de recorte traseiro e frontal.</span><span class="sxs-lookup"><span data-stu-id="9eec5-113">This pyramid is intersected by a front and back clipping plane.</span></span> <span data-ttu-id="9eec5-114">O volume na pirâmide entre aos planos de recorte dianteiro e traseiro é o tronco de exibição.</span><span class="sxs-lookup"><span data-stu-id="9eec5-114">The volume within the pyramid between the front and back clipping planes is the viewing frustum.</span></span> <span data-ttu-id="9eec5-115">Os objetos ficam visíveis somente quando estão nesse volume.</span><span class="sxs-lookup"><span data-stu-id="9eec5-115">Objects are visible only when they are in this volume.</span></span>

![ilustração de um tronco de exibição com um plano de recorte traseiro e frontal](images/frustum.png)

<span data-ttu-id="9eec5-117">Se você imaginar que está parado em uma sala escura e olhando por uma janela quadrada, estará visualizando um tronco de exibição.</span><span class="sxs-lookup"><span data-stu-id="9eec5-117">If you imagine that you are standing in a dark room and looking through a square window, you are visualizing a viewing frustum.</span></span> <span data-ttu-id="9eec5-118">Nessa analogia, o plano de recorte próximo é a janela, e o plano de recorte de fundo é tudo o que finalmente interrompe sua visão – os arranha-céus do outro lado da rua, as montanhas distantes, ou nada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-118">In this analogy, the near clipping plane is the window, and the back clipping plane is whatever finally interrupts your view - the skyscraper across the street, the mountains in the distance, or nothing at all.</span></span> <span data-ttu-id="9eec5-119">Você pode ver tudo dentro da pirâmide truncada que começa na janela e termina com o que quer que interrompa sua visão, impedindo sua visão.</span><span class="sxs-lookup"><span data-stu-id="9eec5-119">You can see everything inside the truncated pyramid that starts at the window and ends with whatever interrupts your view, and you can see nothing else.</span></span>

<span data-ttu-id="9eec5-120">O tronco de exibição é definido por fov (campo de visão) e por distâncias dos planos de recorte traseiro e frontal, especificados em coordenadas de z, conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="9eec5-120">The viewing frustum is defined by fov (field of view) and by the distances of the front and back clipping planes, specified in z-coordinates, as shown in the following diagram.</span></span>

![diagrama do tronco de exibição](images/fovdiag.png)

<span data-ttu-id="9eec5-122">Neste diagrama, a variável D é a distância da câmera até a origem do espaço que foi definido na última parte do pipeline de geometria - a transformação de exibição.</span><span class="sxs-lookup"><span data-stu-id="9eec5-122">In this diagram, the variable D is the distance from the camera to the origin of the space that was defined in the last part of the geometry pipeline - the viewing transformation.</span></span> <span data-ttu-id="9eec5-123">Este é o espaço em torno do qual você organiza os limites de seu tronco de exibição.</span><span class="sxs-lookup"><span data-stu-id="9eec5-123">This is the space around which you arrange the limits of your viewing frustum.</span></span> <span data-ttu-id="9eec5-124">Para obter informações sobre como essa variável D é usada para criar a matriz de projeção, consulte a [transformação projeção (Direct3D 9)](projection-transform.md)</span><span class="sxs-lookup"><span data-stu-id="9eec5-124">For information about how this D variable is used to build the projection matrix, see the [Projection Transform (Direct3D 9)](projection-transform.md)</span></span>

## <a name="viewport-rectangle"></a><span data-ttu-id="9eec5-125">Retângulo do visor</span><span class="sxs-lookup"><span data-stu-id="9eec5-125">Viewport Rectangle</span></span>

<span data-ttu-id="9eec5-126">Você define o retângulo do visor em C++ usando a estrutura [**D3DVIEWPORT9**](d3dviewport9.md) .</span><span class="sxs-lookup"><span data-stu-id="9eec5-126">You define the viewport rectangle in C++ by using the [**D3DVIEWPORT9**](d3dviewport9.md) structure.</span></span> <span data-ttu-id="9eec5-127">A estrutura D3DVIEWPORT9 é usada com os seguintes métodos de manipulação do visor expostos pela interface IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="9eec5-127">The D3DVIEWPORT9 structure is used with the following viewport manipulation methods exposed by the IDirect3DDevice9 interface.</span></span>

-   [<span data-ttu-id="9eec5-128">**IDirect3DDevice9:: getviewport**</span><span class="sxs-lookup"><span data-stu-id="9eec5-128">**IDirect3DDevice9::GetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getviewport)
-   [<span data-ttu-id="9eec5-129">**IDirect3DDevice9:: setviewport**</span><span class="sxs-lookup"><span data-stu-id="9eec5-129">**IDirect3DDevice9::SetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport)

<span data-ttu-id="9eec5-130">A estrutura D3DVIEWPORT9 contém quatro membros-X, Y, largura, altura, que definem a área da superfície de destino de renderização na qual uma cena será renderizada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-130">The D3DVIEWPORT9 structure contains four members - X, Y, Width, Height - that define the area of the render-target surface into which a scene will be rendered.</span></span> <span data-ttu-id="9eec5-131">Esses valores correspondem ao retângulo de destino ou retângulo do visor, conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="9eec5-131">These values correspond to the destination rectangle, or viewport rectangle, as shown in the following diagram.</span></span>

![diagrama do retângulo do visor](images/destrect.png)

<span data-ttu-id="9eec5-133">Os valores que você especificar para os membros X, Y, largura, altura são coordenadas de tela relativas ao canto superior esquerdo da superfície do destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-133">The values you specify for the X, Y, Width, Height members are screen coordinates relative to the upper-left corner of the render-target surface.</span></span> <span data-ttu-id="9eec5-134">A estrutura define dois membros adicionais (MinZ e MaxZ) que indicam os intervalos de profundidade nos quais a cena será renderizada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-134">The structure defines two additional members (MinZ and MaxZ) that indicate the depth-ranges into which the scene will be rendered.</span></span>

<span data-ttu-id="9eec5-135">O Direct3D pressupõe que o volume de recorte do visor varia de -1,0 a 1,0 em X e de 1,0 a -1,0 em Y. Essas eram as configurações usadas mais frequentemente por aplicativos no passado.</span><span class="sxs-lookup"><span data-stu-id="9eec5-135">Direct3D assumes that the viewport clipping volume ranges from -1.0 to 1.0 in X, and from 1.0 to -1.0 in Y. These were the settings used most often by applications in the past.</span></span> <span data-ttu-id="9eec5-136">Você pode ajustar a taxa de proporção do visor antes de recortar usando a [transformação da projeção](projection-transform.md).</span><span class="sxs-lookup"><span data-stu-id="9eec5-136">You can adjust the viewport aspect ratio before clipping using the [projection transform](projection-transform.md).</span></span>

> [!Note]  
> <span data-ttu-id="9eec5-137">MinZ e MaxZ indicam os intervalos de profundidade nos quais a cena será renderizada e não será usada para recortar.</span><span class="sxs-lookup"><span data-stu-id="9eec5-137">MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="9eec5-138">A maioria dos aplicativos irá definir esses membros como 0,0 e 1,0 para permitir que o sistema seja renderizado em todo o intervalo de valores de profundidade no buffer de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-138">Most applications will set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="9eec5-139">Em alguns casos, você pode conseguir efeitos especiais usando outros intervalos de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-139">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="9eec5-140">Por exemplo, para renderizar um painel transparente em um jogo, você pode definir os dois valores como 0,0 para forçar o sistema a renderizar objetos em uma cena em primeiro plano, ou você pode defini-los como 1,0 para renderizar um objeto que sempre deve estar em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="9eec5-140">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

<span data-ttu-id="9eec5-141">As dimensões usadas nos Membros X, Y, Width e Height da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) de um visor definem o local e as dimensões do visor na superfície de destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-141">The dimensions used in the X, Y, Width, Height members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure for a viewport define the location and dimensions of the viewport on the render-target surface.</span></span> <span data-ttu-id="9eec5-142">Esses valores são dados em coordenadas de tela, relativas ao canto superior esquerdo da superfície.</span><span class="sxs-lookup"><span data-stu-id="9eec5-142">These values are in screen coordinates, relative to the upper-left corner of the surface.</span></span>

<span data-ttu-id="9eec5-143">O Direct3D usa a localização do visor e as dimensões para dimensionar os vértices para inserir uma cena renderizada no local apropriado na superfície de destino.</span><span class="sxs-lookup"><span data-stu-id="9eec5-143">Direct3D uses the viewport location and dimensions to scale the vertices to fit a rendered scene into the appropriate location on the target surface.</span></span> <span data-ttu-id="9eec5-144">Internamente, o Direct3D insere esses valores na matriz a seguir, que é aplicada a cada vértice.</span><span class="sxs-lookup"><span data-stu-id="9eec5-144">Internally, Direct3D inserts these values into the following matrix that is applied to each vertex.</span></span>

![equação da matriz que é aplicada a cada vértice](images/vpscale.png)

<span data-ttu-id="9eec5-146">Essa matriz dimensiona os vértices de acordo com a dimensão do visor e o intervalo de profundidade desejado, e os move para o local apropriado na superfície do destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-146">This matrix scales vertices according to the viewport dimensions and desired depth range and translates them to the appropriate location on the render-target surface.</span></span> <span data-ttu-id="9eec5-147">A matriz também gira a coordenada y para refletir uma origem de tela no canto superior esquerdo com y aumentando para baixo.</span><span class="sxs-lookup"><span data-stu-id="9eec5-147">The matrix also flips the y-coordinate to reflect a screen origin at the top-left corner with y increasing downward.</span></span> <span data-ttu-id="9eec5-148">Depois que essa matriz é aplicada, os vértices ainda são homogêneos, ou seja, eles ainda existem como \[ x, y, z, w \] vértices-e devem ser convertidos em coordenadas não homogêneas antes de serem enviados ao rasterizador.</span><span class="sxs-lookup"><span data-stu-id="9eec5-148">After this matrix is applied, vertices are still homogeneous - that is, they still exist as \[x,y,z,w\] vertices - and they must be converted to non-homogeneous coordinates before being sent to the rasterizer.</span></span>

> [!Note]  
> <span data-ttu-id="9eec5-149">A matriz de dimensionamento do visor incorpora os membros MinZ e MaxZ da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) para dimensionar vértices de acordo com o intervalo de profundidade \[ Minz, MaxZ \] .</span><span class="sxs-lookup"><span data-stu-id="9eec5-149">The viewport scaling matrix incorporates the MinZ and MaxZ members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to scale vertices to fit the depth range \[MinZ, MaxZ\].</span></span> <span data-ttu-id="9eec5-150">Isso representa uma semântica diferente das versões anteriores do DirectX, nas quais esses membros foram usados para recorte.</span><span class="sxs-lookup"><span data-stu-id="9eec5-150">This represents different semantics from previous releases of DirectX, in which these members were used for clipping.</span></span>

 

> [!Note]  
> <span data-ttu-id="9eec5-151">Normalmente, os aplicativos definem MinZ e MaxZ como 0,0 e 1,0, respectivamente, para fazer com que o sistema seja renderizado para todo o intervalo de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-151">Applications typically set MinZ and MaxZ to 0.0 and 1.0 respectively to cause the system to render to the entire depth range.</span></span> <span data-ttu-id="9eec5-152">No entanto, você pode usar outros valores para alcançar determinados efeitos.</span><span class="sxs-lookup"><span data-stu-id="9eec5-152">However, you can use other values to achieve certain affects.</span></span> <span data-ttu-id="9eec5-153">Por exemplo, você pode definir os dois valores como 0,0 para forçar todos os objetos no primeiro plano ou definir ambos como 1,0 para renderizar todos os objetos em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="9eec5-153">For example, you might set both values to 0.0 to force all objects into the foreground, or set both to 1.0 to render all objects into the background.</span></span>

 

## <a name="clearing-a-viewport"></a><span data-ttu-id="9eec5-154">Limpar um visor</span><span class="sxs-lookup"><span data-stu-id="9eec5-154">Clearing a Viewport</span></span>

<span data-ttu-id="9eec5-155">Limpar o visor redefine o conteúdo do retângulo do visor na superfície do destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-155">Clearing the viewport resets the contents of the viewport rectangle on the render-target surface.</span></span> <span data-ttu-id="9eec5-156">Ele também pode limpar o retângulo nas superfícies de buffer de estêncil e de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-156">It can also clear the rectangle in the depth and stencil buffer surfaces.</span></span>

<span data-ttu-id="9eec5-157">Use [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) para limpar o visor.</span><span class="sxs-lookup"><span data-stu-id="9eec5-157">Use [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) to clear the viewport.</span></span> <span data-ttu-id="9eec5-158">O método aceita um ou mais retângulos que definem as áreas na superfície que estão sendo apagadas.</span><span class="sxs-lookup"><span data-stu-id="9eec5-158">The method accepts one or more rectangles that define the areas on the surface being cleared.</span></span> <span data-ttu-id="9eec5-159">Definir o parâmetro de contagem como 1 e o parâmetro pRects como o endereço de um único retângulo que abrange toda a área do visor limpará todo o visor.</span><span class="sxs-lookup"><span data-stu-id="9eec5-159">Setting the Count parameter to 1, and the pRects parameter to the address of a single rectangle that covers the entire viewport area will clear the entire viewport.</span></span> <span data-ttu-id="9eec5-160">Outra maneira de limpar todo o visor é definir o parâmetro pRects como **NULL** e o parâmetro count como 0.</span><span class="sxs-lookup"><span data-stu-id="9eec5-160">Another way to clear the entire viewport is to set the pRects parameter to **NULL** and the Count parameter to 0.</span></span>

<span data-ttu-id="9eec5-161">O [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) pode ser usado para limpar bits de estêncil dentro de um buffer de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-161">The [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) can be used for clearing stencil bits within a depth buffer.</span></span> <span data-ttu-id="9eec5-162">Basta definir o parâmetro flags para determinar como **IDirect3DDevice9:: Clear** funciona com o destino de renderização e quaisquer buffers de profundidade ou estêncil associados.</span><span class="sxs-lookup"><span data-stu-id="9eec5-162">Simply set the Flags parameter to determine how **IDirect3DDevice9::Clear** works with the render target and any associated depth or stencil buffers.</span></span> <span data-ttu-id="9eec5-163">O \_ sinalizador de destino D3DCLEAR limpará o visor usando uma cor RGBA arbitrária que você fornecer no argumento Color (essa não é a cor do material).</span><span class="sxs-lookup"><span data-stu-id="9eec5-163">The D3DCLEAR\_TARGET flag will clear the viewport using an arbitrary RGBA color that you provide in the Color argument (this is not the material color).</span></span> <span data-ttu-id="9eec5-164">O \_ sinalizador D3DCLEAR ZBUFFER limpará o buffer de profundidade para uma profundidade arbitrária que você especificar em Z: 0,0 é a distância mais próxima e 1,0 é o mais distante.</span><span class="sxs-lookup"><span data-stu-id="9eec5-164">The D3DCLEAR\_ZBUFFER flag will clear the depth buffer to an arbitrary depth you specify in Z: 0.0 is the closest distance, and 1.0 is the farthest.</span></span> <span data-ttu-id="9eec5-165">O \_ sinalizador de estêncil D3DCLEAR redefinirá os bits de estêncil para o valor que você fornecer no argumento de estêncil.</span><span class="sxs-lookup"><span data-stu-id="9eec5-165">The D3DCLEAR\_STENCIL flag will reset the stencil bits to the value you provide in the Stencil argument.</span></span> <span data-ttu-id="9eec5-166">Você pode usar números inteiros que variam de 0 a 2n-1, em que n é a profundidade de bits do buffer de estêncil.</span><span class="sxs-lookup"><span data-stu-id="9eec5-166">You can use integers that range from 0 to 2n-1, where n is the stencil buffer bit depth.</span></span>

<span data-ttu-id="9eec5-167">Em algumas situações, você pode estar renderizando apenas para pequenas partes do destino de renderização e das superfícies de buffer de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-167">In some situations, you might be rendering only to small portions of the render target and depth buffer surfaces.</span></span> <span data-ttu-id="9eec5-168">Os métodos claros também permitem que você desmarque várias áreas de suas superfícies em uma única chamada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-168">The clear methods also enable you to clear multiple areas of your surfaces in a single call.</span></span> <span data-ttu-id="9eec5-169">Faça isso definindo o parâmetro de contagem para o número de retângulos que você deseja limpar e especifique o endereço do primeiro retângulo em uma matriz de retângulos no parâmetro pRects.</span><span class="sxs-lookup"><span data-stu-id="9eec5-169">Do this by setting the Count parameter to the number of rectangles you want cleared, and specify the address of the first rectangle in an array of rectangles in the pRects parameter.</span></span>

## <a name="set-up-the-viewport-for-clipping"></a><span data-ttu-id="9eec5-170">Configurar o visor para o recorte</span><span class="sxs-lookup"><span data-stu-id="9eec5-170">Set Up the Viewport for Clipping</span></span>

<span data-ttu-id="9eec5-171">Os resultados da matriz de projeção determinam o volume de recorte no espaço de projeção:</span><span class="sxs-lookup"><span data-stu-id="9eec5-171">The results of the projection matrix determine the clipping volume in projection space as:</span></span>

<span data-ttu-id="9eec5-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="9eec5-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="9eec5-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="9eec5-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="9eec5-174">0 <= z<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="9eec5-174">0 <= z<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="9eec5-175">Onde: x, y, z e w representam as coordenadas de vértice depois que a transformação da projeção é aplicada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-175">Where: x, y, z, and w represent the vertex coordinates after the projection transformation is applied.</span></span> <span data-ttu-id="9eec5-176">Qualquer vértice que tiver um componente x, y ou z fora desses intervalos será recortado, se o recorte estiver habilitado (comportamento padrão).</span><span class="sxs-lookup"><span data-stu-id="9eec5-176">Any vertices that have an x-, y-, or z-component outside these ranges are clipped, if clipping is enabled (the default behavior).</span></span>

<span data-ttu-id="9eec5-177">Com exceção dos buffers de vértice, os aplicativos habilitam ou desabilitam o recorte por meio do estado de renderização de [**\_ recorte de D3DRS**](./d3drenderstatetype.md) .</span><span class="sxs-lookup"><span data-stu-id="9eec5-177">With the exception of vertex buffers, applications enable or disable clipping by way of the [**D3DRS\_CLIPPING**](./d3drenderstatetype.md) render state.</span></span> <span data-ttu-id="9eec5-178">As informações de recorte para buffers de vértice são geradas durante o processamento.</span><span class="sxs-lookup"><span data-stu-id="9eec5-178">Clipping information for vertex buffers is generated during processing.</span></span> <span data-ttu-id="9eec5-179">Para obter mais informações, consulte [processamento de vértice de função fixa (Direct3D 9)](fixed-function-vertex-processing.md) e [processamento de vértice programável (Direct3D 9)](programmable-vertex-processing.md).</span><span class="sxs-lookup"><span data-stu-id="9eec5-179">For more information, see [Fixed Function Vertex Processing (Direct3D 9)](fixed-function-vertex-processing.md) and [Programmable Vertex Processing (Direct3D 9)](programmable-vertex-processing.md).</span></span>

<span data-ttu-id="9eec5-180">O Direct3D não corta os vértices transformados de um primitivo de um buffer de vértice, a menos que venha de [**IDirect3DDevice9::P rocessvertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span><span class="sxs-lookup"><span data-stu-id="9eec5-180">Direct3D does not clip transformed vertices of a primitive from a vertex buffer unless it comes from [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span></span> <span data-ttu-id="9eec5-181">Se você estiver fazendo suas próprias transformações e precisar do Direct3D para fazer o recorte, não deverá usar buffers de vértice.</span><span class="sxs-lookup"><span data-stu-id="9eec5-181">If you are doing your own transforms and need Direct3D to do the clipping, you should not use vertex buffers.</span></span> <span data-ttu-id="9eec5-182">Nesse caso, o aplicativo atravessa os dados para transformá-los.</span><span class="sxs-lookup"><span data-stu-id="9eec5-182">In this case, the application traverses the data to transform it.</span></span> <span data-ttu-id="9eec5-183">O Direct3D percorre os dados uma segunda vez para recortar e, em seguida, o driver renderiza os dados, o que é ineficiente.</span><span class="sxs-lookup"><span data-stu-id="9eec5-183">Direct3D traverses the data a second time to clip it, and then the driver renders the data, which is inefficient.</span></span> <span data-ttu-id="9eec5-184">Portanto, se o aplicativo transformar os dados, o também deverá cortar os dados.</span><span class="sxs-lookup"><span data-stu-id="9eec5-184">So, if the application transforms the data, is should also clip the data.</span></span>

<span data-ttu-id="9eec5-185">Quando o dispositivo recebe vértices previamente transformados e acesos (T&L vértices) que precisam ser recortados, para executar a operação de recorte, os vértices são transformados de volta para o espaço de recorte usando as informações de visor (RHW) recíprocas homogêneas do vértice.</span><span class="sxs-lookup"><span data-stu-id="9eec5-185">When the device receives pre-transformed and lit vertices (T&L vertices) that need to be clipped, in order to perform the clipping operation the vertices are back-transformed to the clipping space using the vertex's reciprocal homogeneous w (RHW) and the viewport information.</span></span> <span data-ttu-id="9eec5-186">O recorte é então executado.</span><span class="sxs-lookup"><span data-stu-id="9eec5-186">Clipping is then performed.</span></span> <span data-ttu-id="9eec5-187">Nem todos os dispositivos são capazes de executar essa transformação de back-Transform para recortar os vértices T&L.</span><span class="sxs-lookup"><span data-stu-id="9eec5-187">Not all devices are capable of performing this back-transform in order to clip T&L vertices.</span></span>

<span data-ttu-id="9eec5-188">A \_ funcionalidade de dispositivo D3DPMISCCAPS CLIPTLVERTS indica se o dispositivo é capaz de recortar T&L vértices.</span><span class="sxs-lookup"><span data-stu-id="9eec5-188">The D3DPMISCCAPS\_CLIPTLVERTS device capability indicates whether the device is capable of clipping T&L vertices.</span></span> <span data-ttu-id="9eec5-189">Se esse recurso não for definido, o aplicativo será responsável por recortar os vértices T&L que ele pretende enviar para baixo até o dispositivo a ser renderizado.</span><span class="sxs-lookup"><span data-stu-id="9eec5-189">If this capability is not set, the application is responsible for clipping the T&L vertices that it intends to send down to the device to be rendered.</span></span> <span data-ttu-id="9eec5-190">O dispositivo é sempre capaz de recortar os vértices de T&L no modo de processamento de vértice de software (independentemente de o dispositivo ser criado no modo de processamento de vértice de software ou alternado para o modo de processamento de vértice de software).</span><span class="sxs-lookup"><span data-stu-id="9eec5-190">The device is always capable of clipping T&L vertices in the software vertex processing mode (regardless of whether the device is created in the software vertex processing mode, or switched to the software vertex processing mode).</span></span>

<span data-ttu-id="9eec5-191">O único requisito para configurar os parâmetros do visor para um dispositivo de renderização é definir o volume de recorte do visor.</span><span class="sxs-lookup"><span data-stu-id="9eec5-191">The only requirement for configuring the viewport parameters for a rendering device is to set the viewport's clipping volume.</span></span> <span data-ttu-id="9eec5-192">Para fazer isso, você inicializa e define os valores de recorte para o volume de recorte e para a superfície de destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="9eec5-192">To do this, you initialize and set clipping values for the clipping volume and for the render-target surface.</span></span> <span data-ttu-id="9eec5-193">As visores normalmente são configuradas para renderização na área completa da superfície de destino de renderização, mas isso não é um requisito.</span><span class="sxs-lookup"><span data-stu-id="9eec5-193">Viewports are commonly set up to render to the full area of the render-target surface, but this isn't a requirement.</span></span>

<span data-ttu-id="9eec5-194">Você pode usar as configurações a seguir para os membros da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) para conseguir isso em C++.</span><span class="sxs-lookup"><span data-stu-id="9eec5-194">You can use the following settings for the members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to achieve this in C++.</span></span>


```
D3DVIEWPORT9 viewData = { 0, 0, width, height, 0.0f, 1.0f };
```



<span data-ttu-id="9eec5-195">Depois de definir valores na estrutura [**D3DVIEWPORT9**](d3dviewport9.md) , aplique os parâmetros do visor ao dispositivo chamando o método [**IDirect3DDevice9:: setviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) .</span><span class="sxs-lookup"><span data-stu-id="9eec5-195">After setting values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure, apply the viewport parameters to the device by calling its [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) method.</span></span> <span data-ttu-id="9eec5-196">O exemplo de código a seguir mostra como seria essa chamada.</span><span class="sxs-lookup"><span data-stu-id="9eec5-196">The following code example shows what this call might look like.</span></span>


```
HRESULT hr;

hr = pd3dDevice->SetViewport(&viewData);
if(FAILED(hr))
    return hr;
```



<span data-ttu-id="9eec5-197">Se a chamada for bem sucedido, os parâmetros do visor serão definidos e entrarão em vigor na próxima vez que um método de renderização for chamado.</span><span class="sxs-lookup"><span data-stu-id="9eec5-197">If the call succeeds, the viewport parameters are set and will take effect the next time a rendering method is called.</span></span> <span data-ttu-id="9eec5-198">Para fazer alterações nos parâmetros do visor, basta atualizar os valores na estrutura [**D3DVIEWPORT9**](d3dviewport9.md) e chamar [**IDirect3DDevice9:: setviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) novamente.</span><span class="sxs-lookup"><span data-stu-id="9eec5-198">To make changes to the viewport parameters, just update the values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure and call [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) again.</span></span>

> [!Note]  
> <span data-ttu-id="9eec5-199">Os membros da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) Minz e MaxZ indicam os intervalos de profundidade nos quais a cena será renderizada e não serão usadas para recortar.</span><span class="sxs-lookup"><span data-stu-id="9eec5-199">The [**D3DVIEWPORT9**](d3dviewport9.md) structure members MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="9eec5-200">A maioria dos aplicativos define esses membros como 0,0 e 1,0 para permitir que o sistema seja renderizado em todo o intervalo de valores de profundidade no buffer de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-200">Most applications set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="9eec5-201">Em alguns casos, você pode conseguir efeitos especiais usando outros intervalos de profundidade.</span><span class="sxs-lookup"><span data-stu-id="9eec5-201">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="9eec5-202">Por exemplo, para renderizar um painel transparente em um jogo, você pode definir os dois valores como 0,0 para forçar o sistema a renderizar objetos em uma cena em primeiro plano, ou você pode defini-los como 1,0 para renderizar um objeto que sempre deve estar em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="9eec5-202">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="9eec5-203">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9eec5-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9eec5-204">Introdução</span><span class="sxs-lookup"><span data-stu-id="9eec5-204">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
