---
description: O suporte para sprites de ponto no Direct3D 9 permite a renderização de pontos de alto desempenho (sistemas de partículas). Os sprites de ponto são generalizações de pontos genéricos que permitem que formas arbitrárias sejam renderizadas conforme definido por texturas.
ms.assetid: a9046c7e-779c-4f33-b8ff-f189da3dcfc5
title: Sprites de ponto (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c988a104eb65b5e2d7e56ff2444e8d422c422df2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104500464"
---
# <a name="point-sprites-direct3d-9"></a><span data-ttu-id="6f0c1-104">Sprites de ponto (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="6f0c1-104">Point Sprites (Direct3D 9)</span></span>

<span data-ttu-id="6f0c1-105">O suporte para sprites de ponto no Direct3D 9 permite a renderização de pontos de alto desempenho (sistemas de partículas).</span><span class="sxs-lookup"><span data-stu-id="6f0c1-105">Support for point sprites in Direct3D 9 enables the high-performance rendering of points (particle systems).</span></span> <span data-ttu-id="6f0c1-106">Os sprites de ponto são generalizações de pontos genéricos que permitem que formas arbitrárias sejam renderizadas conforme definido por texturas.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-106">Point sprites are generalizations of generic points that enable arbitrary shapes to be rendered as defined by textures.</span></span>

-   [<span data-ttu-id="6f0c1-107">Controles de renderização de ponto primitivo</span><span class="sxs-lookup"><span data-stu-id="6f0c1-107">Point Primitive Rendering Controls</span></span>](#point-primitive-rendering-controls)
-   [<span data-ttu-id="6f0c1-108">Cálculos de tamanho de ponto</span><span class="sxs-lookup"><span data-stu-id="6f0c1-108">Point Size Computations</span></span>](#point-size-computations)
-   [<span data-ttu-id="6f0c1-109">Renderização de ponto</span><span class="sxs-lookup"><span data-stu-id="6f0c1-109">Point Rendering</span></span>](#point-rendering)

## <a name="point-primitive-rendering-controls"></a><span data-ttu-id="6f0c1-110">Controles de renderização de ponto primitivo</span><span class="sxs-lookup"><span data-stu-id="6f0c1-110">Point Primitive Rendering Controls</span></span>

<span data-ttu-id="6f0c1-111">O Direct3D 9 dá suporte a parâmetros adicionais para controlar a renderização de sprites de ponto (primitivos de ponto).</span><span class="sxs-lookup"><span data-stu-id="6f0c1-111">Direct3D 9 supports additional parameters to control the rendering of point sprites (point primitives).</span></span> <span data-ttu-id="6f0c1-112">Esses parâmetros permitem que os pontos sejam do tamanho da variável e tenham um mapa de textura completo aplicado.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-112">These parameters enable points to be of variable size and have a full texture map applied.</span></span> <span data-ttu-id="6f0c1-113">O tamanho de cada ponto é determinado por um tamanho especificado pelo aplicativo, combinado com uma função baseada em distância calculada pelo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-113">The size of each point is determined by an application-specified size combined with a distance-based function computed by Direct3D.</span></span> <span data-ttu-id="6f0c1-114">O aplicativo pode especificar um tamanho de ponto como por vértice ou definindo D3DRS \_ Points, que se aplica a pontos sem um tamanho por vértice.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-114">The application can specify point size either as per-vertex or by setting D3DRS\_POINTSIZE, which applies to points without a per-vertex size.</span></span> <span data-ttu-id="6f0c1-115">O tamanho do ponto é expresso em unidades de espaço da câmera, com exceção de quando o aplicativo está passando vértices de FVF (formato de vértice flexível) após a transformação.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-115">The point size is expressed in camera space units, with the exception of when the application is passing post-transformed flexible vertex format (FVF) vertices.</span></span> <span data-ttu-id="6f0c1-116">Nesse caso, a função baseada em distância não é aplicada e o tamanho do ponto é expresso em unidades de pixels no destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-116">In this case, the distance-based function is not applied and the point size is expressed in units of pixels on the render target.</span></span>

<span data-ttu-id="6f0c1-117">As coordenadas de textura computadas e usadas quando os pontos de renderização dependem da configuração de D3DRS \_ POINTSPRITEENABLE.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-117">The texture coordinates computed and used when rendering points depends on the setting of D3DRS\_POINTSPRITEENABLE.</span></span> <span data-ttu-id="6f0c1-118">Quando esse valor é definido como **true**, as coordenadas de textura são definidas para que cada ponto exiba a textura completa.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-118">When this value is set to **TRUE**, the texture coordinates are set so that each point displays the full texture.</span></span> <span data-ttu-id="6f0c1-119">Em geral, isso só é útil quando os pontos são significativamente maiores que um pixel.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-119">In general, this is only useful when points are significantly larger than one pixel.</span></span> <span data-ttu-id="6f0c1-120">Quando D3DRS \_ POINTSPRITEENABLE é definido como **false**, a coordenada de textura do vértice de cada ponto é usada para todo o ponto.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-120">When D3DRS\_POINTSPRITEENABLE is set to **FALSE**, each point's vertex texture coordinate is used for the entire point.</span></span>

## <a name="point-size-computations"></a><span data-ttu-id="6f0c1-121">Cálculos de tamanho de ponto</span><span class="sxs-lookup"><span data-stu-id="6f0c1-121">Point Size Computations</span></span>

<span data-ttu-id="6f0c1-122">O tamanho do ponto é determinado por D3DRS \_ POINTSCALEENABLE.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-122">Point size is determined by D3DRS\_POINTSCALEENABLE.</span></span> <span data-ttu-id="6f0c1-123">Se esse valor for definido como **false**, o tamanho do ponto especificado pelo aplicativo será usado como o tamanho do espaço da tela (após a transformação).</span><span class="sxs-lookup"><span data-stu-id="6f0c1-123">If this value is set to **FALSE**, the application-specified point size is used as the screen-space (post-transformed) size.</span></span> <span data-ttu-id="6f0c1-124">Os vértices passados para o Direct3D no espaço da tela não têm tamanhos de ponto calculados; o tamanho do ponto especificado é interpretado como tamanho do espaço de tela.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-124">Vertices that are passed to Direct3D in screen space do not have point sizes computed; the specified point size is interpreted as screen-space size.</span></span>

<span data-ttu-id="6f0c1-125">Se D3DRS \_ POINTSCALEENABLE for **true**, o Direct3D calculará o tamanho do ponto de espaço de tela de acordo com a fórmula a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-125">If D3DRS\_POINTSCALEENABLE is **TRUE**, Direct3D computes the screen-space point size according to the following formula.</span></span> <span data-ttu-id="6f0c1-126">O tamanho do ponto especificado pelo aplicativo é expresso em unidades de espaço da câmera.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-126">The application-specified point size is expressed in camera space units.</span></span>

<span data-ttu-id="6f0c1-127">S s = VH \* s <sub></sub> \* sqrt (1/B \* D ₑ + C \* (D ₑ ²)))</span><span class="sxs-lookup"><span data-stu-id="6f0c1-127">S ₛ = Vₕ \* S <sub>i</sub> \* sqrt(1/(A + B \* D ₑ + C \*( D ₑ² )))</span></span>

<span data-ttu-id="6f0c1-128">Nessa fórmula, o tamanho do ponto de entrada, S <sub>i</sub>, é por vértice ou o valor de D3DRS pontos de \_ processamento.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-128">In this formula, the input point size, S <sub>i</sub>, is either per-vertex or the value of the D3DRS\_POINTSIZE render state.</span></span> <span data-ttu-id="6f0c1-129">Os fatores de escala de pontos, D3DRS \_ POINTSCALE \_ A, D3DRS \_ POINTSCALE \_ B e D3DRS \_ POINTSCALE \_ C, são representados pelos pontos a, B e c. A altura do visor, V h, é o membro de altura da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) que representa o visor.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-129">The point scale factors, D3DRS\_POINTSCALE\_A, D3DRS\_POINTSCALE\_B, and D3DRS\_POINTSCALE\_C, are represented by the points A, B, and C. The height of the viewport, V ₕ, is the [**D3DVIEWPORT9**](d3dviewport9.md) structure's Height member representing the viewport.</span></span> <span data-ttu-id="6f0c1-130">D ₑ, a distância do olho até a posição (o olho na origem), é calculada por meio da posição do espaço de olho do ponto (X ₑ, Y ₑ, Z ₑ) e da execução da operação a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-130">D ₑ, the distance from the eye to the position (the eye at the origin), is computed by taking the eye space position of the point (Xₑ, Yₑ, Zₑ) and performing the following operation.</span></span>

<span data-ttu-id="6f0c1-131">D ₑ = sqrt (X ₑ ² + Y ₑ ² + Z ₑ ²)</span><span class="sxs-lookup"><span data-stu-id="6f0c1-131">D ₑ = sqrt (Xₑ² + Y ₑ² + Z ₑ²)</span></span>

<span data-ttu-id="6f0c1-132">O tamanho máximo do ponto, PM ₐ ₓ, é determinado com o menor valor do membro MaxPointSize da estrutura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) ou o \_ estado máximo de processamento de D3DRS de pontos de extremidade \_ .</span><span class="sxs-lookup"><span data-stu-id="6f0c1-132">The maximum point size, Pₘₐₓ, is determined by taking the smaller of either the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member or the D3DRS\_POINTSIZE\_MAX render state.</span></span> <span data-ttu-id="6f0c1-133">O tamanho mínimo do ponto, P<sub>min</sub>, é determinado pela consulta do valor de D3DRS \_ pointse \_ min.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-133">The minimum point size, P<sub>min</sub>, is determined by querying the value of D3DRS\_POINTSIZE\_MIN.</span></span> <span data-ttu-id="6f0c1-134">Portanto, o tamanho do ponto de espaço da tela final, S, é determinado da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-134">Thus the final screen-space point size, S, is determined in the following manner.</span></span>

-   <span data-ttu-id="6f0c1-135">Se SS > PM ₐ ₓ, então S = P m ₐ ₓ</span><span class="sxs-lookup"><span data-stu-id="6f0c1-135">If Sₛ > Pₘₐₓ, then S = P ₘₐₓ</span></span>
-   <span data-ttu-id="6f0c1-136">se S < P<sub>min</sub>, s = P <sub>min</sub></span><span class="sxs-lookup"><span data-stu-id="6f0c1-136">if S < P<sub>min</sub>, then S = P <sub>min</sub></span></span>
-   <span data-ttu-id="6f0c1-137">Caso contrário, S = S s</span><span class="sxs-lookup"><span data-stu-id="6f0c1-137">Otherwise, S = S ₛ</span></span>

## <a name="point-rendering"></a><span data-ttu-id="6f0c1-138">Renderização de ponto</span><span class="sxs-lookup"><span data-stu-id="6f0c1-138">Point Rendering</span></span>

<span data-ttu-id="6f0c1-139">Um ponto de espaço na tela, P = (X, Y, Z, W), do tamanho do espaço de tela S é rasterizado como um diamante dos quatro vértices a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-139">A screen-space point, P = ( X, Y, Z, W), of screen-space size S is rasterized as a quadrilateral of the following four vertices.</span></span>

<span data-ttu-id="6f0c1-140">(X + S/2, Y + S/2, Z, W), (X + S/2, Y-S/2, Z, W), (X-S/2, Y-S/2, Z, W), (X-S/2, Y + S/2, Z, W))</span><span class="sxs-lookup"><span data-stu-id="6f0c1-140">(( X + S/2, Y + S/2, Z, W), ( X + S/2, Y - S/2, Z, W), ( X - S/2, Y- S/2, Z, W), ( X - S/2, Y + S/2, Z, W))</span></span>

<span data-ttu-id="6f0c1-141">Os atributos de cor do vértice são duplicados em cada vértice; Portanto, cada ponto sempre é renderizado com cores constantes.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-141">The vertex color attributes are duplicated at each vertex; thus each point is always rendered with constant colors.</span></span>

<span data-ttu-id="6f0c1-142">A atribuição de índices de textura é controlada pela \_ configuração do estado de RENDERIZAÇÃO D3DRS POINTSPRITEENABLE.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-142">The assignment of texture indices is controlled by the D3DRS\_POINTSPRITEENABLE render state setting.</span></span> <span data-ttu-id="6f0c1-143">Se D3DRS \_ POINTSPRITEENABLE for definido como **false**, as coordenadas de textura de vértice serão duplicadas em cada vértice.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-143">If D3DRS\_POINTSPRITEENABLE is set to **FALSE**, then the vertex texture coordinates are duplicated at each vertex.</span></span> <span data-ttu-id="6f0c1-144">Se D3DRS \_ POINTSPRITEENABLE for definido como **true**, as coordenadas de textura nos quatro vértices serão definidas com os valores a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-144">If D3DRS\_POINTSPRITEENABLE is set to **TRUE**, then the texture coordinates at the four vertices are set to the following values.</span></span>

<span data-ttu-id="6f0c1-145">(0. F, 0. F), (0. F, 1. F), (1. F, 0. F), (1. F, 1. F)</span><span class="sxs-lookup"><span data-stu-id="6f0c1-145">(0.F, 0.F), (0.F, 1.F), (1.F, 0.F), (1.F, 1.F)</span></span>

<span data-ttu-id="6f0c1-146">Isso é mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-146">This is shown in the following diagram.</span></span>

![diagrama de um quadrado com vértices rotulados para valores de coordenadas (u, v) e (x, y)](images/spritepoint.png)

<span data-ttu-id="6f0c1-148">Quando o recorte está habilitado, os pontos são recortados da maneira a seguir.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-148">When clipping is enabled, points are clipped in the following manner.</span></span> <span data-ttu-id="6f0c1-149">Se o vértice exceder o intervalo de valores de profundidade – MinZ e MaxZ da estrutura [**D3DVIEWPORT9**](d3dviewport9.md) – no qual uma cena deve ser renderizada, o ponto existirá fora da exibição frustum e não será renderizado.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-149">If the vertex exceeds the range of depth values - MinZ and MaxZ of the [**D3DVIEWPORT9**](d3dviewport9.md) structure - into which a scene is to be rendered, the point exists outside of the view frustum and is not rendered.</span></span> <span data-ttu-id="6f0c1-150">Se o ponto, levando em conta o tamanho do ponto, estiver completamente fora do visor em X e Y, o ponto não será renderizado; os pontos restantes são renderizados.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-150">If the point, taking into account the point size, is completely outside the viewport in X and Y, then the point is not rendered; the remaining points are rendered.</span></span> <span data-ttu-id="6f0c1-151">É possível que a posição do ponto esteja fora do visor em X ou Y e ainda esteja parcialmente visível.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-151">It is possible for the point position to be outside the viewport in X or Y and still be partially visible.</span></span>

<span data-ttu-id="6f0c1-152">Os pontos podem ou não ser corretamente recortados em planos de clipes definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-152">Points may or may not be correctly clipped to user-defined clip planes.</span></span> <span data-ttu-id="6f0c1-153">Se D3DPMISCCAPS \_ CLIPPLANESCALEDPOINTS não estiver definido no membro PrimitiveMiscCaps da estrutura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) , os pontos serão recortados para os planos de clipes definidos pelo usuário com base apenas na posição do vértice, ignorando o tamanho do ponto.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-153">If D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS is not set in the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's PrimitiveMiscCaps member, points are clipped to user-defined clip planes based only on the vertex position, ignoring the point size.</span></span> <span data-ttu-id="6f0c1-154">Nesse caso, os pontos dimensionados são totalmente renderizados quando a posição do vértice está dentro dos planos de corte e descartados quando a posição do vértice está fora de um plano de corte.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-154">In this case, scaled points are fully rendered when the vertex position is inside the clip planes, and discarded when the vertex position is outside a clip plane.</span></span> <span data-ttu-id="6f0c1-155">Os aplicativos podem impedir possíveis artefatos adicionando uma geometria de borda a planos de clipes que seja tão grande quanto o tamanho máximo do ponto.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-155">Applications can prevent potential artifacts by adding a border geometry to clip planes that is as large as the maximum point size.</span></span>

<span data-ttu-id="6f0c1-156">Se o \_ bit D3DPMISCCAPS CLIPPLANESCALEDPOINTS for definido, os pontos dimensionados serão recortados corretamente em planos de clipe definidos pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-156">If the D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS bit is set, then the scaled points are correctly clipped to user-defined clip planes.</span></span>

<span data-ttu-id="6f0c1-157">O processamento de vértices de hardware pode ou não dar suporte ao tamanho do ponto.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-157">Hardware vertex processing may or may not support point size.</span></span> <span data-ttu-id="6f0c1-158">Por exemplo, se um dispositivo for criado com D3DCREATE de \_ hardware \_ VERTEXPROCESSING em um dispositivo HAL (camada de abstração de hardware) ( \_ Hal D3DDEVTYPE) que tenha o membro MaxPointSize da estrutura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) definido como 1,0 ou 0,0, todos os pontos serão um único pixel.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-158">For example, if a device is created with D3DCREATE\_HARDWARE\_VERTEXPROCESSING on a hardware abstraction layer (HAL) device (D3DDEVTYPE\_HAL) that has the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member set to 1.0 or 0.0, then all points are a single pixel.</span></span> <span data-ttu-id="6f0c1-159">Para renderizar sprites de ponto de pixel menor que 1,0, você deve usar vértices FVF TL (transformados e iluminados) ou o processamento de vértice de software (D3DCREATE \_ software \_ VERTEXPROCESSING). nesse caso, o tempo de execução do Direct3D emula a renderização de Sprite de ponto.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-159">To render pixel point sprites less than 1.0, you must use either FVF TL (transformed and lit) vertices or software vertex processing (D3DCREATE\_SOFTWARE\_VERTEXPROCESSING), in which case the Direct3D run time emulates the point sprite rendering.</span></span>

<span data-ttu-id="6f0c1-160">Um dispositivo de hardware que faz o processamento de vértices e dá suporte a Point sprites-MaxPointSize definido como maior que 1,0 f-é necessário para executar a computação de tamanho para sprites não transformados e é necessário para definir corretamente os vértices por vértice ou D3DRS \_ POINTSIZED3DRS \_ para os cantos de TL.</span><span class="sxs-lookup"><span data-stu-id="6f0c1-160">A hardware device that does vertex processing and supports point sprites - MaxPointSize set to greater than 1.0f - is required to perform the size computation for nontransformed sprites and is required to properly set the per-vertex or D3DRS\_POINTSIZED3DRS\_POINTSIZE for TL vertices.</span></span>

<span data-ttu-id="6f0c1-161">Para obter informações sobre regras de renderização para pontos, linhas e triângulos, consulte [regras de rasterização (Direct3D 9)](rasterization-rules.md).</span><span class="sxs-lookup"><span data-stu-id="6f0c1-161">For information about rendering rules for points, lines, and triangles, see [Rasterization Rules (Direct3D 9)](rasterization-rules.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6f0c1-162">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6f0c1-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6f0c1-163">Pipeline de vértice</span><span class="sxs-lookup"><span data-stu-id="6f0c1-163">Vertex Pipeline</span></span>](vertex-pipeline.md)
</dt> </dl>

 

 



