---
description: Mapas de ambiente esféricos, ou mapas de esfera, são texturas especiais que contêm uma imagem da cena em torno de um objeto ou os efeitos de iluminação em torno do objeto.
ms.assetid: b4a8defc-876f-4a23-a12e-e7423a1e8f89
title: Mapeamento de ambiente esférico (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9b0e7aaa123478ecc7cc327dca0b13a8aae3d0c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "105758501"
---
# <a name="spherical-environment-mapping-direct3d-9"></a><span data-ttu-id="d06ad-103">Mapeamento de ambiente esférico (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="d06ad-103">Spherical Environment Mapping (Direct3D 9)</span></span>

<span data-ttu-id="d06ad-104">Mapas de ambiente esféricos, ou mapas de esfera, são texturas especiais que contêm uma imagem da cena em torno de um objeto ou os efeitos de iluminação em torno do objeto.</span><span class="sxs-lookup"><span data-stu-id="d06ad-104">Spherical environment maps, or sphere maps, are special textures that contain an image of the scene surrounding an object, or the lighting effects around the object.</span></span> <span data-ttu-id="d06ad-105">Ao contrário dos mapas de ambiente cúbico, os mapas de esfera não representam diretamente os arredores de um objeto.</span><span class="sxs-lookup"><span data-stu-id="d06ad-105">Unlike cubic environment maps, sphere maps don't directly represent an object's surroundings.</span></span> <span data-ttu-id="d06ad-106">O tópico imagem bule no [mapeamento de ambiente (Direct3D 9)](environment-mapping.md) mostra os efeitos de reflexão que você pode obter com o mapeamento de esfera.</span><span class="sxs-lookup"><span data-stu-id="d06ad-106">The teapot image in [Environment Mapping (Direct3D 9)](environment-mapping.md) topic shows the reflection effects you can achieve with sphere mapping.</span></span> <span data-ttu-id="d06ad-107">Um mapa de esfera é uma representação 2D da exibição de 360 graus completa da cena em torno de um objeto, como se fosse feito por meio de uma lente olho-de-peixe, como mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="d06ad-107">A sphere map is a 2D representation of the full 360-degree view of the scene surrounding of an object, as if taken through a fish-eye lens, as shown in the following illustration.</span></span>

![ilustração de um mapa de esfera do interior de um edifício](images/spheremap.png)

## <a name="texture-coordinates-for-spherical-environment-maps"></a><span data-ttu-id="d06ad-109">Coordenadas de textura para mapas de ambiente esféricos</span><span class="sxs-lookup"><span data-stu-id="d06ad-109">Texture Coordinates for Spherical Environment Maps</span></span>

<span data-ttu-id="d06ad-110">As coordenadas de textura que você especifica para cada vértice que recebe um mapeamento de ambiente devem endereçar a textura como uma função da distorção refletida criada pela curvatura da superfície.</span><span class="sxs-lookup"><span data-stu-id="d06ad-110">The texture coordinates that you specify for each vertex receiving an environment mapping should address the texture as a function of the reflective distortion created by the curvature of the surface.</span></span> <span data-ttu-id="d06ad-111">Os aplicativos devem computar essas coordenadas de textura para cada vértice para alcançar o efeito desejado.</span><span class="sxs-lookup"><span data-stu-id="d06ad-111">Applications must compute these texture coordinates for each vertex to achieve the desired effect.</span></span> <span data-ttu-id="d06ad-112">Uma maneira simples e eficaz de gerar coordenadas de textura usa o vértice normal como entrada.</span><span class="sxs-lookup"><span data-stu-id="d06ad-112">One simple and effective way to generate texture coordinates uses the vertex normal as input.</span></span> <span data-ttu-id="d06ad-113">Embora existam vários métodos, a equação a seguir é comum entre aplicativos que executam o mapeamento de ambiente com mapas de esfera.</span><span class="sxs-lookup"><span data-stu-id="d06ad-113">Although several methods exist, the following equation is common among applications that perform environment mapping with sphere maps.</span></span>

![equação de coordenadas de textura de computação para um mapa de esfera](images/spheremap-formula.png)

<span data-ttu-id="d06ad-115">Nessas fórmulas, você e v são as coordenadas de textura sendo computadas, e N<sub>x</sub> e n<sub>Y</sub> são os componentes X e Y do vértice de espaço da câmera normal.</span><span class="sxs-lookup"><span data-stu-id="d06ad-115">In these formulas, u and v are the texture coordinates being computed, and N<sub>X</sub> and N<sub>Y</sub> are the x and y components of the camera-space vertex normal.</span></span> <span data-ttu-id="d06ad-116">A fórmula é simples, mas eficaz.</span><span class="sxs-lookup"><span data-stu-id="d06ad-116">The formula is simple but effective.</span></span> <span data-ttu-id="d06ad-117">Se o normal tiver um componente x positivo, os pontos normais à direita e a coordenada u serão ajustados para tratar a textura adequadamente.</span><span class="sxs-lookup"><span data-stu-id="d06ad-117">If the normal has a positive x component, the normal points to the right, and the u coordinate is adjusted to address the texture appropriately.</span></span> <span data-ttu-id="d06ad-118">Da mesma forma, para a coordenada v: y positivo indica que o normal aponta para cima.</span><span class="sxs-lookup"><span data-stu-id="d06ad-118">Likewise for the v coordinate: positive y indicates that the normal points up.</span></span> <span data-ttu-id="d06ad-119">O oposto é verdadeiro para valores negativos em cada componente.</span><span class="sxs-lookup"><span data-stu-id="d06ad-119">The opposite is true for negative values in each component.</span></span>

<span data-ttu-id="d06ad-120">Se os pontos normais estiverem diretamente na câmera, as coordenadas resultantes não devem receber nenhuma distorção.</span><span class="sxs-lookup"><span data-stu-id="d06ad-120">If the normal points directly at the camera, the resulting coordinates should receive no distortion.</span></span> <span data-ttu-id="d06ad-121">A tendência de + 0,5 para ambas as coordenadas coloca o ponto de distorção zero no centro do mapa de esfera e um vértice normal de (0, 0, z) atende a esse ponto.</span><span class="sxs-lookup"><span data-stu-id="d06ad-121">The +0.5 bias to both coordinates places the point of zero-distortion at the center of the sphere map, and a vertex normal of (0, 0, z) addresses this point.</span></span> <span data-ttu-id="d06ad-122">Essa fórmula não conta com o componente z do normal, mas os aplicativos que usam a fórmula podem otimizar cálculos ignorando vértices com um normal que tenha um elemento z positivo.</span><span class="sxs-lookup"><span data-stu-id="d06ad-122">This formula doesn't account for the z component of the normal, but applications that use the formula can optimize computations by skipping vertices with a normal that has a positive z element.</span></span> <span data-ttu-id="d06ad-123">Isso funciona para objetos com sombreamento simples porque, no espaço da câmera, se os pontos normais longe da câmera (z positivo), o vértice será retirado quando o objeto for renderizado.</span><span class="sxs-lookup"><span data-stu-id="d06ad-123">This works for flat-shaded objects because, in camera space, if the normal points away from the camera (positive z), the vertex is culled when the object is rendered.</span></span> <span data-ttu-id="d06ad-124">Para objetos Gouraud, um normal pode apontar para fora da câmera (x positivo) e o triângulo que contém o vértice ainda pode estar visível.</span><span class="sxs-lookup"><span data-stu-id="d06ad-124">For Gouraud-shaded objects, a normal can point away from the camera (positive x), and the triangle containing the vertex can still be visible.</span></span> <span data-ttu-id="d06ad-125">Se você não calcular você e v para este vértice, a face ainda poderá ser usada, resultando em um comportamento inesperado.</span><span class="sxs-lookup"><span data-stu-id="d06ad-125">If you don't compute u and v for this vertex, the face might still be used, resulting in unexpected behavior.</span></span>

## <a name="applying-spherical-environment-maps"></a><span data-ttu-id="d06ad-126">Aplicando mapas de ambiente esféricos</span><span class="sxs-lookup"><span data-stu-id="d06ad-126">Applying Spherical Environment Maps</span></span>

<span data-ttu-id="d06ad-127">Você aplica um mapa de ambiente a objetos da mesma maneira que para qualquer outra textura, definindo a textura para o estágio de textura apropriado com o método [**IDirect3DDevice9:: SetTexture**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="d06ad-127">You apply an environment map to objects in the same manner as for any other texture, by setting the texture to the appropriate texture stage with the [**IDirect3DDevice9::SetTexture**](/windows/desktop/api) method.</span></span> <span data-ttu-id="d06ad-128">Defina o primeiro parâmetro para o índice para o estágio de textura desejado e defina o segundo parâmetro como o endereço da interface [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) retornado quando você criou a textura para o mapa de ambiente.</span><span class="sxs-lookup"><span data-stu-id="d06ad-128">Set the first parameter to the index for the desired texture stage, and set the second parameter to the address of the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface returned when you created the texture for the environment map.</span></span> <span data-ttu-id="d06ad-129">Você pode definir as operações de mesclagem de cor e alfa e os argumentos conforme necessário para atingir os efeitos de mesclagem de textura desejados.</span><span class="sxs-lookup"><span data-stu-id="d06ad-129">You can set the color and alpha blending operations and arguments as needed to achieve the desired texture blending effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d06ad-130">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="d06ad-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d06ad-131">Mapeamento de ambiente</span><span class="sxs-lookup"><span data-stu-id="d06ad-131">Environment Mapping</span></span>](environment-mapping.md)
</dt> </dl>

 

 
