---
description: Sobre o WASAPI
ms.assetid: 452b9725-b0b9-4888-bbb5-a23e0067e840
title: Sobre o WASAPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f869319f3100b797e58c7b43597869c9767ac037
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103920403"
---
# <a name="about-wasapi"></a><span data-ttu-id="bca9f-103">Sobre o WASAPI</span><span class="sxs-lookup"><span data-stu-id="bca9f-103">About WASAPI</span></span>

<span data-ttu-id="bca9f-104">A API de sessão de áudio do Windows (WASAPI) permite que os aplicativos cliente gerenciem o fluxo de dados de áudio entre o aplicativo e um [dispositivo de ponto de extremidade de áudio](audio-endpoint-devices.md).</span><span class="sxs-lookup"><span data-stu-id="bca9f-104">The Windows Audio Session API (WASAPI) enables client applications to manage the flow of audio data between the application and an [audio endpoint device](audio-endpoint-devices.md).</span></span>

<span data-ttu-id="bca9f-105">Os arquivos de cabeçalho Audioclient. h e Audiopolicy. h definem as interfaces WASAPI.</span><span class="sxs-lookup"><span data-stu-id="bca9f-105">Header files Audioclient.h and Audiopolicy.h define the WASAPI interfaces.</span></span>

<span data-ttu-id="bca9f-106">Cada fluxo de áudio é um membro de uma [sessão de áudio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="bca9f-106">Every audio stream is a member of an [audio session](audio-sessions.md).</span></span> <span data-ttu-id="bca9f-107">Por meio da abstração de sessão, um cliente WASAPI pode identificar um fluxo de áudio como um membro de um grupo de fluxos de áudio relacionados.</span><span class="sxs-lookup"><span data-stu-id="bca9f-107">Through the session abstraction, a WASAPI client can identify an audio stream as a member of a group of related audio streams.</span></span> <span data-ttu-id="bca9f-108">O sistema pode gerenciar todos os fluxos na sessão como uma única unidade.</span><span class="sxs-lookup"><span data-stu-id="bca9f-108">The system can manage all of the streams in the session as a single unit.</span></span>

<span data-ttu-id="bca9f-109">O mecanismo de áudio é o [componente de áudio do modo de usuário](user-mode-audio-components.md) por meio do qual os aplicativos compartilham o acesso a um dispositivo de ponto de extremidade de áudio.</span><span class="sxs-lookup"><span data-stu-id="bca9f-109">The audio engine is the [user-mode audio component](user-mode-audio-components.md) through which applications share access to an audio endpoint device.</span></span> <span data-ttu-id="bca9f-110">O mecanismo de áudio transporta dados de áudio entre um buffer de ponto de extremidade e um dispositivo de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="bca9f-110">The audio engine transports audio data between an endpoint buffer and an endpoint device.</span></span> <span data-ttu-id="bca9f-111">Para reproduzir um fluxo de áudio por meio de um dispositivo de ponto de extremidade de renderização, um aplicativo grava periodicamente os dados de áudio em um buffer de ponto de extremidade</span><span class="sxs-lookup"><span data-stu-id="bca9f-111">To play an audio stream through a rendering endpoint device, an application periodically writes audio data to a rendering endpoint buffer.</span></span> <span data-ttu-id="bca9f-112">O mecanismo de áudio combina os fluxos de vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="bca9f-112">The audio engine mixes the streams from the various applications.</span></span> <span data-ttu-id="bca9f-113">Para gravar um fluxo de áudio de um dispositivo de ponto de extremidade de captura, um aplicativo lê periodicamente dados de áudio de um buffer de ponto de extremidade de captura.</span><span class="sxs-lookup"><span data-stu-id="bca9f-113">To record an audio stream from a capture endpoint device, an application periodically reads audio data from a capture endpoint buffer.</span></span>

<span data-ttu-id="bca9f-114">O WASAPI consiste em várias interfaces.</span><span class="sxs-lookup"><span data-stu-id="bca9f-114">WASAPI consists of several interfaces.</span></span> <span data-ttu-id="bca9f-115">A primeira delas é a interface [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) .</span><span class="sxs-lookup"><span data-stu-id="bca9f-115">The first of these is the [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) interface.</span></span> <span data-ttu-id="bca9f-116">Para acessar as interfaces WASAPI, um cliente primeiro obtém uma referência à interface **IAudioClient** de um dispositivo de ponto de extremidade de áudio chamando o método [**IMMDevice:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) com o parâmetro *IID* definido como **REFIID** IID \_ IAudioClient.</span><span class="sxs-lookup"><span data-stu-id="bca9f-116">To access the WASAPI interfaces, a client first obtains a reference to the **IAudioClient** interface of an audio endpoint device by calling the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method with parameter *iid* set to **REFIID** IID\_IAudioClient.</span></span> <span data-ttu-id="bca9f-117">O cliente chama o método [**IAudioClient:: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) para inicializar um fluxo em um dispositivo de ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="bca9f-117">The client calls the [**IAudioClient::Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) method to initialize a stream on an endpoint device.</span></span> <span data-ttu-id="bca9f-118">Depois de inicializar um fluxo, o cliente pode obter referências às outras interfaces WASAPI chamando o método [**IAudioClient:: GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) .</span><span class="sxs-lookup"><span data-stu-id="bca9f-118">After initializing a stream, the client can obtain references to the other WASAPI interfaces by calling the [**IAudioClient::GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) method.</span></span>

<span data-ttu-id="bca9f-119">Muitos dos métodos em WASAPI retornam o código de erro AUDCLNT \_ E \_ \_ o dispositivo invalidado se o dispositivo de ponto de extremidade de áudio que um aplicativo cliente está usando se tornar inválido.</span><span class="sxs-lookup"><span data-stu-id="bca9f-119">Many of the methods in WASAPI return error code AUDCLNT\_E\_DEVICE\_INVALIDATED if the audio endpoint device that a client application is using becomes invalid.</span></span> <span data-ttu-id="bca9f-120">Frequentemente, o aplicativo pode se recuperar desse erro.</span><span class="sxs-lookup"><span data-stu-id="bca9f-120">Frequently, the application can recover from this error.</span></span> <span data-ttu-id="bca9f-121">Para obter mais informações, consulte [recuperando de um erro de Invalid-Device](recovering-from-an-invalid-device-error.md).</span><span class="sxs-lookup"><span data-stu-id="bca9f-121">For more information, see [Recovering from an Invalid-Device Error](recovering-from-an-invalid-device-error.md).</span></span>

<span data-ttu-id="bca9f-122">WASAPI implementa as interfaces a seguir.</span><span class="sxs-lookup"><span data-stu-id="bca9f-122">WASAPI implements the following interfaces.</span></span>



| <span data-ttu-id="bca9f-123">Interface</span><span class="sxs-lookup"><span data-stu-id="bca9f-123">Interface</span></span>                                            | <span data-ttu-id="bca9f-124">Descrição</span><span class="sxs-lookup"><span data-stu-id="bca9f-124">Description</span></span>                                                                                                                                                     |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="bca9f-125">**IAudioCaptureClient**</span><span class="sxs-lookup"><span data-stu-id="bca9f-125">**IAudioCaptureClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiocaptureclient)   | <span data-ttu-id="bca9f-126">Permite que um cliente leia dados de entrada de um buffer de ponto de extremidade de captura.</span><span class="sxs-lookup"><span data-stu-id="bca9f-126">Enables a client to read input data from a capture endpoint buffer.</span></span>                                                                                             |
| [<span data-ttu-id="bca9f-127">**IAudioClient**</span><span class="sxs-lookup"><span data-stu-id="bca9f-127">**IAudioClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient)                 | <span data-ttu-id="bca9f-128">Permite que um cliente crie e inicialize um fluxo de áudio entre um aplicativo de áudio e o mecanismo de áudio ou o buffer de hardware de um dispositivo de ponto de extremidade de áudio.</span><span class="sxs-lookup"><span data-stu-id="bca9f-128">Enables a client to create and initialize an audio stream between an audio application and the audio engine or the hardware buffer of an audio endpoint device.</span></span> |
| [<span data-ttu-id="bca9f-129">**IAudioClock**</span><span class="sxs-lookup"><span data-stu-id="bca9f-129">**IAudioClock**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclock)                   | <span data-ttu-id="bca9f-130">Permite que um cliente monitore a taxa de dados de um fluxo e a posição atual no fluxo.</span><span class="sxs-lookup"><span data-stu-id="bca9f-130">Enables a client to monitor a stream's data rate and the current position in the stream.</span></span>                                                                        |
| [<span data-ttu-id="bca9f-131">**IAudioRenderClient**</span><span class="sxs-lookup"><span data-stu-id="bca9f-131">**IAudioRenderClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiorenderclient)     | <span data-ttu-id="bca9f-132">Permite que um cliente grave dados de saída em um buffer de ponto de extremidade de renderização.</span><span class="sxs-lookup"><span data-stu-id="bca9f-132">Enables a client to write output data to a rendering endpoint buffer.</span></span>                                                                                           |
| [<span data-ttu-id="bca9f-133">**IAudioSessionControl**</span><span class="sxs-lookup"><span data-stu-id="bca9f-133">**IAudioSessionControl**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessioncontrol) | <span data-ttu-id="bca9f-134">Permite que um cliente configure os parâmetros de controle para uma sessão de áudio e monitore eventos na sessão.</span><span class="sxs-lookup"><span data-stu-id="bca9f-134">Enables a client to configure the control parameters for an audio session and to monitor events in the session.</span></span>                                                 |
| [<span data-ttu-id="bca9f-135">**IAudioSessionManager**</span><span class="sxs-lookup"><span data-stu-id="bca9f-135">**IAudioSessionManager**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionmanager) | <span data-ttu-id="bca9f-136">Permite que um cliente acesse os controles de sessão e os controles de volume para sessões de áudio de processo cruzado e específicas de processo.</span><span class="sxs-lookup"><span data-stu-id="bca9f-136">Enables a client to access the session controls and volume controls for both cross-process and process-specific audio sessions.</span></span>                                 |
| [<span data-ttu-id="bca9f-137">**IAudioStreamVolume**</span><span class="sxs-lookup"><span data-stu-id="bca9f-137">**IAudioStreamVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume)     | <span data-ttu-id="bca9f-138">Permite que um cliente controle e monitore os níveis de volume para todos os canais em um fluxo de áudio.</span><span class="sxs-lookup"><span data-stu-id="bca9f-138">Enables a client to control and monitor the volume levels for all of the channels in an audio stream.</span></span>                                                           |
| [<span data-ttu-id="bca9f-139">**IChannelAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="bca9f-139">**IChannelAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume)   | <span data-ttu-id="bca9f-140">Permite que um cliente controle os níveis de volume para todos os canais na sessão de áudio a que o fluxo pertence.</span><span class="sxs-lookup"><span data-stu-id="bca9f-140">Enables a client to control the volume levels for all of the channels in the audio session that the stream belongs to.</span></span>                                          |
| [<span data-ttu-id="bca9f-141">**ISimpleAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="bca9f-141">**ISimpleAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)     | <span data-ttu-id="bca9f-142">Permite que um cliente controle o nível de volume mestre de uma sessão de áudio.</span><span class="sxs-lookup"><span data-stu-id="bca9f-142">Enables a client to control the master volume level of an audio session.</span></span>                                                                                        |



 

<span data-ttu-id="bca9f-143">Os clientes WASAPI que exigem a notificação de eventos relacionados à sessão devem implementar a interface a seguir.</span><span class="sxs-lookup"><span data-stu-id="bca9f-143">WASAPI clients that require notification of session-related events should implement the following interface.</span></span>



| <span data-ttu-id="bca9f-144">Interface</span><span class="sxs-lookup"><span data-stu-id="bca9f-144">Interface</span></span>                                          | <span data-ttu-id="bca9f-145">Descrição</span><span class="sxs-lookup"><span data-stu-id="bca9f-145">Description</span></span>                                                                                                            |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="bca9f-146">**IAudioSessionEvents**</span><span class="sxs-lookup"><span data-stu-id="bca9f-146">**IAudioSessionEvents**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) | <span data-ttu-id="bca9f-147">Fornece notificações de eventos relacionados à sessão, como alterações no nível do volume, no nome de exibição e no estado da sessão.</span><span class="sxs-lookup"><span data-stu-id="bca9f-147">Provides notifications of session-related events such as changes in the volume level, display name, and session state.</span></span> |



 

## <a name="related-topics"></a><span data-ttu-id="bca9f-148">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="bca9f-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bca9f-149">Gerenciamento de fluxo</span><span class="sxs-lookup"><span data-stu-id="bca9f-149">Stream Management</span></span>](stream-management.md)
</dt> <dt>

[<span data-ttu-id="bca9f-150">**Referência de programação**</span><span class="sxs-lookup"><span data-stu-id="bca9f-150">**Programming Reference**</span></span>](programming-reference.md)
</dt> </dl>

 

 



