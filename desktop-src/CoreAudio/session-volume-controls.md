---
description: Controles de volume de sessão
ms.assetid: e6d112f9-08c9-4d95-b37b-267beebd0d7f
title: Controles de volume de sessão
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: add29b18b39c942c54926190ef9c0f85e447bb88
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103826480"
---
# <a name="session-volume-controls"></a><span data-ttu-id="6e96c-103">Controles de volume de sessão</span><span class="sxs-lookup"><span data-stu-id="6e96c-103">Session Volume Controls</span></span>

<span data-ttu-id="6e96c-104">Conforme explicado anteriormente, os clientes do WASAPI podem controlar individualmente o nível de volume de cada [sessão de áudio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="6e96c-104">As explained previously, WASAPI clients can individually control the volume level of each [audio session](audio-sessions.md).</span></span> <span data-ttu-id="6e96c-105">WASAPI aplica a configuração de volume para uma sessão de forma uniforme a todos os fluxos na sessão.</span><span class="sxs-lookup"><span data-stu-id="6e96c-105">WASAPI applies the volume setting for a session uniformly to all of the streams in the session.</span></span> <span data-ttu-id="6e96c-106">Cada nível de volume é um valor no intervalo de 0,0 a 1,0, onde 0,0 indica silêncio e 1,0 indica o volume completo (sem atenuação).</span><span class="sxs-lookup"><span data-stu-id="6e96c-106">Each volume level is a value in the range 0.0 to 1.0, where 0.0 indicates silence and 1.0 indicates full volume (no attenuation).</span></span>

<span data-ttu-id="6e96c-107">Um cliente cria implicitamente uma sessão atribuindo o primeiro fluxo a essa sessão.</span><span class="sxs-lookup"><span data-stu-id="6e96c-107">A client implicitly creates a session by assigning the first stream to that session.</span></span> <span data-ttu-id="6e96c-108">O nível de volume padrão da nova sessão é 1,0.</span><span class="sxs-lookup"><span data-stu-id="6e96c-108">The default volume level of the new session is 1.0.</span></span> <span data-ttu-id="6e96c-109">Conforme discutido anteriormente, o usuário pode ajustar o nível de volume da sessão por meio da interface do usuário de um programa de controle (por exemplo, SNDVOL) que é um cliente WASAPI.</span><span class="sxs-lookup"><span data-stu-id="6e96c-109">As discussed previously, the user can adjust the volume level of the session through the user interface of a control program (for example, Sndvol) that is a WASAPI client.</span></span> <span data-ttu-id="6e96c-110">As configurações de controle são persistentes.</span><span class="sxs-lookup"><span data-stu-id="6e96c-110">The control settings are persistent.</span></span>

<span data-ttu-id="6e96c-111">Além das configurações de volume controladas pelo cliente, o sistema aplica suas próprias configurações de volume a sessões.</span><span class="sxs-lookup"><span data-stu-id="6e96c-111">In addition to the client-controlled volume settings, the system applies its own volume settings to sessions.</span></span> <span data-ttu-id="6e96c-112">Essas configurações são baseadas na política de áudio e mudam dinamicamente em resposta a alterações nos fluxos que compõem a combinação de áudio global.</span><span class="sxs-lookup"><span data-stu-id="6e96c-112">These settings are based on audio policy and change dynamically in response to changes in the streams that make up the global audio mix.</span></span> <span data-ttu-id="6e96c-113">Para obter mais informações sobre a política de áudio, consulte [componentes de áudio do modo de usuário](user-mode-audio-components.md).</span><span class="sxs-lookup"><span data-stu-id="6e96c-113">For more information about audio policy, see [User-Mode Audio Components](user-mode-audio-components.md).</span></span>

<span data-ttu-id="6e96c-114">O software do sistema que implementa o controle de volume para cada fluxo multiplica os exemplos de PCM no fluxo pelo nível de volume efetivo.</span><span class="sxs-lookup"><span data-stu-id="6e96c-114">The system software that implements the volume control for each stream multiplies the PCM samples in the stream by the effective volume level.</span></span> <span data-ttu-id="6e96c-115">O nível de volume efetivo é o resultado da multiplicação das configurações de volume do cliente e do sistema.</span><span class="sxs-lookup"><span data-stu-id="6e96c-115">The effective volume level is the result of multiplying the client and system volume settings.</span></span> <span data-ttu-id="6e96c-116">Assim, a alteração resultante na amplitude do sinal é uma combinação linear dos níveis de volume do cliente e do sistema.</span><span class="sxs-lookup"><span data-stu-id="6e96c-116">Thus, the resulting change in signal amplitude is a linear combination of the client and system volume levels.</span></span> <span data-ttu-id="6e96c-117">Por exemplo, se o nível de volume do cliente for 0,8 e o nível de volume do sistema for 0,5, o nível de volume efetivo será (0,8)<sup>.</sup> (0,5) = 0,4.</span><span class="sxs-lookup"><span data-stu-id="6e96c-117">For example, if the client volume level is 0.8 and the system volume level is 0.5, the effective volume level is (0.8)<sup>.</sup>(0.5) = 0.4.</span></span>

<span data-ttu-id="6e96c-118">Observe que a intensidade percebida não é linear em relação à amplitude de sinal.</span><span class="sxs-lookup"><span data-stu-id="6e96c-118">Note that perceived loudness is not linear with respect to signal amplitude.</span></span> <span data-ttu-id="6e96c-119">Em vez disso, a intensidade varia aproximadamente como o logaritmo do nível de volume v:</span><span class="sxs-lookup"><span data-stu-id="6e96c-119">Instead, loudness varies approximately as the logarithm of the volume level v:</span></span>

<span data-ttu-id="6e96c-120">intensidade em decibéis = 20<sup>.</sup> log ₁ ₀ (v)</span><span class="sxs-lookup"><span data-stu-id="6e96c-120">loudness in decibels = 20<sup>.</sup>log₁₀(v)</span></span>

<span data-ttu-id="6e96c-121">Portanto, a configuração v = 0,5 atenua a intensidade do sinal original (o sinal antes de o nível do volume ser aplicado) por 6 decibéis, a configuração de v = 0,25 atenua o sinal por 12 decibéis e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="6e96c-121">Thus, setting v = 0.5 attenuates the loudness of the original signal (the signal before the volume level is applied) by 6 decibels, setting v = 0.25 attenuates the signal by 12 decibels, and so on.</span></span> <span data-ttu-id="6e96c-122">Um nível de volume v = 1,0, correspondente a 0 decibéis, não altera o nível de sinal original.</span><span class="sxs-lookup"><span data-stu-id="6e96c-122">A volume level v = 1.0, corresponding to 0 decibels, does not alter the original signal level.</span></span>

<span data-ttu-id="6e96c-123">Os aplicativos de áudio com interfaces de usuário para controlar o nível de volume normalmente exibem controles deslizantes que geram alterações na intensidade percebida que são linearmente proporcional às alterações na posição do controle deslizante.</span><span class="sxs-lookup"><span data-stu-id="6e96c-123">Audio applications with user interfaces for controlling the volume level typically display sliders that generate changes in perceived loudness that are linearly proportional to changes in slider position.</span></span> <span data-ttu-id="6e96c-124">Para produzir uma relação linear entre a intensidade percebida e a posição do controle deslizante, o aplicativo deve definir uma relação não linear entre o nível de volume v e a posição do controle deslizante.</span><span class="sxs-lookup"><span data-stu-id="6e96c-124">To produce a linear relationship between perceived loudness and slider position, the application must define a nonlinear relationship between the volume level v and the slider position.</span></span> <span data-ttu-id="6e96c-125">Para obter mais informações, consulte [controles de volume de áudio cônico](audio-tapered-volume-controls.md).</span><span class="sxs-lookup"><span data-stu-id="6e96c-125">For more information, see [Audio-Tapered Volume Controls](audio-tapered-volume-controls.md).</span></span>

<span data-ttu-id="6e96c-126">Conforme explicado anteriormente, o programa de controle de volume do sistema, SNDVOL, exibe os controles deslizantes de volume para as sessões de áudio que estão jogando em cada dispositivo de renderização de áudio.</span><span class="sxs-lookup"><span data-stu-id="6e96c-126">As explained previously, the system volume-control program, Sndvol, displays volume sliders for the audio sessions that are playing on each audio rendering device.</span></span> <span data-ttu-id="6e96c-127">Esses controles deslizantes aparecem na caixa de grupo rotulada **aplicativos** na janela SndVol.</span><span class="sxs-lookup"><span data-stu-id="6e96c-127">These sliders appear in the group box labeled **Applications** in the SndVol window.</span></span> <span data-ttu-id="6e96c-128">Normalmente, cada sessão contém todos os fluxos de reprodução de uma janela de aplicativo específica.</span><span class="sxs-lookup"><span data-stu-id="6e96c-128">Typically, each session contains all of the playback streams from a particular application window.</span></span> <span data-ttu-id="6e96c-129">Por meio dos controles deslizantes na janela SNDVOL, os usuários controlam os níveis de volume de aplicativos de áudio individuais.</span><span class="sxs-lookup"><span data-stu-id="6e96c-129">Through the sliders in the Sndvol window, users control the volume levels of individual audio applications.</span></span>

<span data-ttu-id="6e96c-130">Como regra geral, um aplicativo deve atribuir todos os seus fluxos de reprodução à mesma sessão de áudio.</span><span class="sxs-lookup"><span data-stu-id="6e96c-130">As a general rule, an application should assign all of its playback streams to the same audio session.</span></span> <span data-ttu-id="6e96c-131">O WASAPI não impede que um aplicativo distribua seus fluxos de reprodução entre várias sessões.</span><span class="sxs-lookup"><span data-stu-id="6e96c-131">WASAPI does not prevent an application from distributing its playback streams among multiple sessions.</span></span> <span data-ttu-id="6e96c-132">No entanto, a proliferação resultante de controles deslizantes de volume em SNDVOL pode confundir os usuários.</span><span class="sxs-lookup"><span data-stu-id="6e96c-132">However, the resulting proliferation of volume sliders in Sndvol might confuse users.</span></span>

<span data-ttu-id="6e96c-133">Como opção, uma janela de aplicativo pode exibir um controle deslizante de volume.</span><span class="sxs-lookup"><span data-stu-id="6e96c-133">As an option, an application window can display a volume slider.</span></span> <span data-ttu-id="6e96c-134">O controle deslizante do aplicativo deve refletir o estado do controle deslizante SNDVOL correspondente em todos os momentos.</span><span class="sxs-lookup"><span data-stu-id="6e96c-134">The application slider should reflect the state of the corresponding Sndvol slider at all times.</span></span> <span data-ttu-id="6e96c-135">Portanto, se o usuário alterar o nível de volume movendo o controle deslizante na janela do aplicativo, o controle deslizante correspondente na janela SNDVOL deverá se mover de forma inarmazenada com o controle deslizante do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6e96c-135">Thus, if the user changes the volume level by moving the slider in the application window, then the corresponding slider in the Sndvol window should move in unison with the application slider.</span></span> <span data-ttu-id="6e96c-136">Da mesma forma, se o usuário mover o controle deslizante SNDVOL, o controle deslizante do aplicativo deverá se mover de maneira inigual ao controle deslizante SNDVOL.</span><span class="sxs-lookup"><span data-stu-id="6e96c-136">Similarly, if the user moves the Sndvol slider, then the application slider should move in unison with the Sndvol slider.</span></span>

<span data-ttu-id="6e96c-137">Para dar suporte a esse comportamento, o WASAPI implementa a interface [**ISimpleAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume) .</span><span class="sxs-lookup"><span data-stu-id="6e96c-137">To support this behavior, WASAPI implements the [**ISimpleAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume) interface.</span></span> <span data-ttu-id="6e96c-138">Quando o usuário move o controle deslizante do aplicativo, o aplicativo chama o método [**ISimpleAudioVolume:: SetMasterVolume**](/windows/desktop/api/Audioclient/nf-audioclient-isimpleaudiovolume-setmastervolume) para ajustar o nível de volume da sessão adequadamente.</span><span class="sxs-lookup"><span data-stu-id="6e96c-138">When the user moves the application slider, the application calls the [**ISimpleAudioVolume::SetMasterVolume**](/windows/desktop/api/Audioclient/nf-audioclient-isimpleaudiovolume-setmastervolume) method to adjust the session volume level accordingly.</span></span> <span data-ttu-id="6e96c-139">O SNDVOL monitora as alterações de volume feitas por esse método e reflete as alterações nos controles deslizantes de volume que ele exibe.</span><span class="sxs-lookup"><span data-stu-id="6e96c-139">Sndvol monitors volume changes made through this method and reflects the changes in the volume sliders that it displays.</span></span> <span data-ttu-id="6e96c-140">Além disso, um aplicativo pode receber notificações de alterações de volume de sessão que o usuário faz por meio do SNDVOL.</span><span class="sxs-lookup"><span data-stu-id="6e96c-140">In addition, an application can receive notifications of session volume changes that the user makes through Sndvol.</span></span> <span data-ttu-id="6e96c-141">Para essa finalidade, o aplicativo implementa uma interface [**IAudioSessionEvents**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) e registra a interface com WASAPI.</span><span class="sxs-lookup"><span data-stu-id="6e96c-141">For this purpose, the application implements an [**IAudioSessionEvents**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) interface and registers the interface with WASAPI.</span></span> <span data-ttu-id="6e96c-142">Depois disso, cada vez que o usuário altera o nível de volume da sessão por meio de SNDVOL, o aplicativo recebe uma chamada de notificação pelo método [**IAudioSessionEvents:: OnSimpleVolumeChanged**](/windows/desktop/api/Audiopolicy/nf-audiopolicy-iaudiosessionevents-onsimplevolumechanged) .</span><span class="sxs-lookup"><span data-stu-id="6e96c-142">Thereafter, each time the user changes the session volume level through Sndvol, the application receives a notification call through the [**IAudioSessionEvents::OnSimpleVolumeChanged**](/windows/desktop/api/Audiopolicy/nf-audiopolicy-iaudiosessionevents-onsimplevolumechanged) method.</span></span> <span data-ttu-id="6e96c-143">Para obter um exemplo de código que implementa uma interface **IAudioSessionEvents** , consulte [eventos de sessão de áudio](audio-session-events.md).</span><span class="sxs-lookup"><span data-stu-id="6e96c-143">For a code example that implements an **IAudioSessionEvents** interface, see [Audio Session Events](audio-session-events.md).</span></span> <span data-ttu-id="6e96c-144">Para obter um exemplo de código que registra uma interface **IAudioSessionEvents** , consulte [eventos de áudio para aplicativos de áudio herdados](audio-events-for-legacy-audio-applications.md).</span><span class="sxs-lookup"><span data-stu-id="6e96c-144">For a code example that registers an **IAudioSessionEvents** interface, see [Audio Events for Legacy Audio Applications](audio-events-for-legacy-audio-applications.md).</span></span>

<span data-ttu-id="6e96c-145">A interface **ISimpleAudioVolume** aplica o mesmo nível de volume uniformemente a todos os canais em uma sessão de áudio.</span><span class="sxs-lookup"><span data-stu-id="6e96c-145">The **ISimpleAudioVolume** interface applies the same volume level uniformly to all of the channels in an audio session.</span></span> <span data-ttu-id="6e96c-146">Embora essa interface deva atender aos requisitos de controle de volume da maioria dos aplicativos, alguns aplicativos podem exigir recursos de controle de volume mais especializados.</span><span class="sxs-lookup"><span data-stu-id="6e96c-146">Although this interface should satisfy the volume-control requirements of most applications, a few applications might require more specialized volume-control capabilities.</span></span> <span data-ttu-id="6e96c-147">A interface [**IAudioStreamVolume**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume) controla o volume de um fluxo individual em uma sessão relativa a outros fluxos na sessão.</span><span class="sxs-lookup"><span data-stu-id="6e96c-147">The [**IAudioStreamVolume**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume) interface controls the volume of an individual stream in a session relative to the other streams in the session.</span></span> <span data-ttu-id="6e96c-148">O **IAudioStreamVolume** também permite que um cliente controle individualmente os níveis de volume de todos os canais no fluxo.</span><span class="sxs-lookup"><span data-stu-id="6e96c-148">**IAudioStreamVolume** also enables a client to individually control the volume levels of all the channels in the stream.</span></span> <span data-ttu-id="6e96c-149">Por exemplo, um aplicativo pode usar essa capacidade para obter efeitos de áudio, como simular a movimentação espacial de uma fonte de áudio, movendo o movimento da esquerda para a direita.</span><span class="sxs-lookup"><span data-stu-id="6e96c-149">For example, an application might use this capability to achieve audio effects such as simulating spatial movement of an audio source by panning from left to right.</span></span> <span data-ttu-id="6e96c-150">Outra interface especializada, [**IChannelAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume), controla os níveis de volume dos canais individuais em uma sessão.</span><span class="sxs-lookup"><span data-stu-id="6e96c-150">Another specialized interface, [**IChannelAudioVolume**](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume), controls the volume levels of the individual channels in a session.</span></span> <span data-ttu-id="6e96c-151">Por exemplo, um aplicativo pode usar **IChannelAudioVolume** para implementar controles de saldo para um sistema de som stereophonic.</span><span class="sxs-lookup"><span data-stu-id="6e96c-151">For example, an application might use **IChannelAudioVolume** to implement balance controls for a stereophonic sound system.</span></span>

<span data-ttu-id="6e96c-152">Os controles deslizantes de volume na caixa **aplicativos** no SNDVOL refletem apenas as alterações de volume feitas por meio da interface **ISimpleAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="6e96c-152">The volume sliders in the **Applications** box in Sndvol reflect only volume changes that are made through the **ISimpleAudioVolume** interface.</span></span> <span data-ttu-id="6e96c-153">Eles não refletem as alterações de volume feitas por meio das interfaces **IAudioStreamVolume** e **IChannelAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="6e96c-153">They do not reflect volume changes that are made through the **IAudioStreamVolume** and **IChannelAudioVolume** interfaces.</span></span> <span data-ttu-id="6e96c-154">Embora alguns aplicativos possam permitir que os usuários controlem as configurações de volume direta ou indiretamente por meio de **IAudioStreamVolume** e **IChannelAudioVolume**, os desenvolvedores devem evitar a apresentação de controles deslizantes de aplicativos para essas configurações de volume que os usuários provavelmente confundirão com os controles deslizantes de volume no SNDVOL.</span><span class="sxs-lookup"><span data-stu-id="6e96c-154">Although some applications might enable users to directly or indirectly control volume settings through **IAudioStreamVolume** and **IChannelAudioVolume**, developers should avoid presenting application sliders for these volume settings that users are likely to confuse with the volume sliders in Sndvol.</span></span> <span data-ttu-id="6e96c-155">Caso contrário, um usuário pode mover um controle deslizante de aplicativo esperando ver a alteração refletida em um controle deslizante SNDVOL e ficar confuso quando nenhuma alteração ocorrer.</span><span class="sxs-lookup"><span data-stu-id="6e96c-155">Otherwise, a user might move an application slider expecting to see the change reflected in a Sndvol slider and become confused when no such change occurs.</span></span> <span data-ttu-id="6e96c-156">Os desenvolvedores podem evitar esse problema por meio do design cuidadoso da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="6e96c-156">Developers can avoid this problem through careful user interface design.</span></span>

<span data-ttu-id="6e96c-157">O nível de volume efetivo de qualquer canal na sessão submix, como ouvido nos alto-falantes, é o produto dos quatro fatores de nível de volume a seguir:</span><span class="sxs-lookup"><span data-stu-id="6e96c-157">The effective volume level of any channel in the session submix, as heard at the speakers, is the product of the following four volume-level factors:</span></span>

-   <span data-ttu-id="6e96c-158">Os níveis de volume por canal dos fluxos na sessão, que os clientes podem controlar por meio dos métodos na interface **IAudioStreamVolume** .</span><span class="sxs-lookup"><span data-stu-id="6e96c-158">The per-channel volume levels of the streams in the session, which clients can control through the methods in the **IAudioStreamVolume** interface.</span></span>
-   <span data-ttu-id="6e96c-159">O nível de volume por canal da sessão, que os clientes podem controlar por meio dos métodos na interface **IChannelAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="6e96c-159">The per-channel volume level of the session, which clients can control through the methods in the **IChannelAudioVolume** interface.</span></span>
-   <span data-ttu-id="6e96c-160">O nível de volume mestre da sessão, que os clientes podem controlar por meio dos métodos na interface **ISimpleAudioVolume** .</span><span class="sxs-lookup"><span data-stu-id="6e96c-160">The master volume level of the session, which clients can control through the methods in the **ISimpleAudioVolume** interface.</span></span>
-   <span data-ttu-id="6e96c-161">O nível de volume baseado em políticas da sessão, que o sistema modifica dinamicamente à medida que a combinação global é alterada.</span><span class="sxs-lookup"><span data-stu-id="6e96c-161">The policy-based volume level of the session, which the system dynamically modifies as the global mix changes.</span></span>

<span data-ttu-id="6e96c-162">Cada um dos quatro fatores de nível de volume na lista anterior é um valor no intervalo de 0,0 a 1,0, em que 0,0 indica silêncio e 1,0 indica volume completo (sem atenuação).</span><span class="sxs-lookup"><span data-stu-id="6e96c-162">Each of the four volume-level factors in the preceding list is a value in the range 0.0 to 1.0, where 0.0 indicates silence and 1.0 indicates full volume (no attenuation).</span></span> <span data-ttu-id="6e96c-163">O nível de volume efetivo também é um valor no intervalo de 0,0 a 1,0.</span><span class="sxs-lookup"><span data-stu-id="6e96c-163">The effective volume level is also a value in the range 0.0 to 1.0.</span></span>

<span data-ttu-id="6e96c-164">O mecanismo de áudio aplica o nível de volume efetivo para cada canal aos canais em um fluxo antes de misturar o fluxo com os outros fluxos na sessão de áudio.</span><span class="sxs-lookup"><span data-stu-id="6e96c-164">The audio engine applies the effective volume level for each channel to the channels in a stream before mixing the stream with the other streams in the audio session.</span></span> <span data-ttu-id="6e96c-165">Se os valores de exemplo em um canal excederem 0 decibéis depois que o mecanismo de áudio os multiplicar pelo nível de volume efetivo, o mecanismo cortará as amostras antes de adicioná-las à sessão submix.</span><span class="sxs-lookup"><span data-stu-id="6e96c-165">If any sample values in a channel exceed 0 decibels after the audio engine has multiplied them by the effective volume level, the engine clips the samples before adding them to the session submix.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6e96c-166">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6e96c-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6e96c-167">Controles de volume</span><span class="sxs-lookup"><span data-stu-id="6e96c-167">Volume Controls</span></span>](volume-controls.md)
</dt> </dl>

 

 



