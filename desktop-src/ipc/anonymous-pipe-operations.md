---
description: Operações de pipe anônimo, incluindo criação de pipe, gravação em um pipe, identificadores de pipe.
ms.assetid: df81471c-1072-4456-a877-304e76ade4bd
title: Operações de pipe anônimo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 963d7127c51859b05e570d00291470a49be5ba66
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105761308"
---
# <a name="anonymous-pipe-operations"></a><span data-ttu-id="9c186-103">Operações de pipe anônimo</span><span class="sxs-lookup"><span data-stu-id="9c186-103">Anonymous Pipe Operations</span></span>

<span data-ttu-id="9c186-104">A função [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe) cria um pipe anônimo e retorna dois identificadores: um identificador de leitura para o pipe e um identificador de gravação para o pipe.</span><span class="sxs-lookup"><span data-stu-id="9c186-104">The [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe) function creates an anonymous pipe and returns two handles: a read handle to the pipe and a write handle to the pipe.</span></span> <span data-ttu-id="9c186-105">O identificador de leitura tem acesso somente leitura ao pipe e o identificador de gravação tem acesso somente gravação ao pipe.</span><span class="sxs-lookup"><span data-stu-id="9c186-105">The read handle has read-only access to the pipe, and the write handle has write-only access to the pipe.</span></span> <span data-ttu-id="9c186-106">Para se comunicar usando o pipe, o servidor de pipe deve passar um identificador de pipe para outro processo.</span><span class="sxs-lookup"><span data-stu-id="9c186-106">To communicate using the pipe, the pipe server must pass a pipe handle to another process.</span></span> <span data-ttu-id="9c186-107">Normalmente, isso é feito por meio de herança; ou seja, o processo permite que o identificador seja herdado por um processo filho.</span><span class="sxs-lookup"><span data-stu-id="9c186-107">Usually, this is done through inheritance; that is, the process allows the handle to be inherited by a child process.</span></span> <span data-ttu-id="9c186-108">O processo também pode duplicar um identificador de pipe usando a função [**DuplicateHandle**](/windows/desktop/api/handleapi/nf-handleapi-duplicatehandle) e enviá-lo para um processo não relacionado usando alguma forma de comunicação entre processos, como DDE ou memória compartilhada.</span><span class="sxs-lookup"><span data-stu-id="9c186-108">The process can also duplicate a pipe handle using the [**DuplicateHandle**](/windows/desktop/api/handleapi/nf-handleapi-duplicatehandle) function and send it to an unrelated process using some form of interprocess communication, such as DDE or shared memory.</span></span>

<span data-ttu-id="9c186-109">Um servidor de pipe pode enviar a alça de leitura ou o identificador de gravação para o cliente de pipe, dependendo se o cliente deve usar o pipe anônimo para enviar informações ou receber informações.</span><span class="sxs-lookup"><span data-stu-id="9c186-109">A pipe server can send either the read handle or the write handle to the pipe client, depending on whether the client should use the anonymous pipe to send information or receive information.</span></span> <span data-ttu-id="9c186-110">Para ler a partir do pipe, use o identificador de leitura do pipe em uma chamada para a função [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) .</span><span class="sxs-lookup"><span data-stu-id="9c186-110">To read from the pipe, use the pipe's read handle in a call to the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) function.</span></span> <span data-ttu-id="9c186-111">A chamada **ReadFile** retorna quando outro processo foi gravado no pipe.</span><span class="sxs-lookup"><span data-stu-id="9c186-111">The **ReadFile** call returns when another process has written to the pipe.</span></span> <span data-ttu-id="9c186-112">A chamada **ReadFile** também pode retornar se todos os identificadores de gravação no pipe tiverem sido fechados ou se um erro ocorrer antes da operação de leitura ser concluída.</span><span class="sxs-lookup"><span data-stu-id="9c186-112">The **ReadFile** call can also return if all write handles to the pipe have been closed or if an error occurs before the read operation has been completed.</span></span>

<span data-ttu-id="9c186-113">Para gravar no pipe, use o identificador de gravação do pipe em uma chamada para a função [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) .</span><span class="sxs-lookup"><span data-stu-id="9c186-113">To write to the pipe, use the pipe's write handle in a call to the [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) function.</span></span> <span data-ttu-id="9c186-114">A chamada **WriteFile** não retorna até que tenha gravado o número especificado de bytes no pipe ou um erro ocorra.</span><span class="sxs-lookup"><span data-stu-id="9c186-114">The **WriteFile** call does not return until it has written the specified number of bytes to the pipe or an error occurs.</span></span> <span data-ttu-id="9c186-115">Se o buffer de pipe estiver cheio e houver mais bytes a serem gravados, **WriteFile** não retornará até que outro processo Leia a partir do pipe, disponibilizando mais espaço em buffer.</span><span class="sxs-lookup"><span data-stu-id="9c186-115">If the pipe buffer is full and there are more bytes to be written, **WriteFile** does not return until another process reads from the pipe, making more buffer space available.</span></span> <span data-ttu-id="9c186-116">O servidor de pipe especifica o tamanho do buffer para o pipe quando ele chama [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe).</span><span class="sxs-lookup"><span data-stu-id="9c186-116">The pipe server specifies the buffer size for the pipe when it calls [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe).</span></span>

<span data-ttu-id="9c186-117">Não há suporte para operações de leitura e gravação assíncronas (sobrepostas) em Pipes anônimos.</span><span class="sxs-lookup"><span data-stu-id="9c186-117">Asynchronous (overlapped) read and write operations are not supported by anonymous pipes.</span></span> <span data-ttu-id="9c186-118">Isso significa que você não pode usar as funções [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) e [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) com Pipes anônimos.</span><span class="sxs-lookup"><span data-stu-id="9c186-118">This means that you cannot use the [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) and [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) functions with anonymous pipes.</span></span> <span data-ttu-id="9c186-119">Além disso, o parâmetro *lpOverlapped* de [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) e [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) é ignorado quando essas funções são usadas com Pipes anônimos.</span><span class="sxs-lookup"><span data-stu-id="9c186-119">In addition, the *lpOverlapped* parameter of [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) is ignored when these functions are used with anonymous pipes.</span></span>

<span data-ttu-id="9c186-120">Um pipe anônimo existe até que todos os identificadores de pipe, leitura e gravação, tenham sido fechados.</span><span class="sxs-lookup"><span data-stu-id="9c186-120">An anonymous pipe exists until all pipe handles, both read and write, have been closed.</span></span> <span data-ttu-id="9c186-121">Um processo pode fechar seus identificadores de pipe usando a função [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) .</span><span class="sxs-lookup"><span data-stu-id="9c186-121">A process can close its pipe handles by using the [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) function.</span></span> <span data-ttu-id="9c186-122">Todos os identificadores de pipe também são fechados quando o processo é encerrado.</span><span class="sxs-lookup"><span data-stu-id="9c186-122">All pipe handles are also closed when the process terminates.</span></span>

<span data-ttu-id="9c186-123">Os pipes anônimos são implementados usando um pipe nomeado com um nome exclusivo.</span><span class="sxs-lookup"><span data-stu-id="9c186-123">Anonymous pipes are implemented using a named pipe with a unique name.</span></span> <span data-ttu-id="9c186-124">Portanto, muitas vezes você pode passar um identificador para um pipe anônimo para uma função que requer um identificador para um pipe nomeado.</span><span class="sxs-lookup"><span data-stu-id="9c186-124">Therefore, you can often pass a handle to an anonymous pipe to a function that requires a handle to a named pipe.</span></span>

 

 
