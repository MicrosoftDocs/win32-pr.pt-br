---
description: Estratégias para a comunicação com vários clientes de pipe e manutenção de várias instâncias de pipe.
ms.assetid: c764bde5-e053-4124-b859-1d2839ada918
title: Instâncias de pipe nomeado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4b7d1ec591996e83853ae6faede899ecd4e4ea2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105763999"
---
# <a name="named-pipe-instances"></a><span data-ttu-id="3e0fe-103">Instâncias de pipe nomeado</span><span class="sxs-lookup"><span data-stu-id="3e0fe-103">Named Pipe Instances</span></span>

<span data-ttu-id="3e0fe-104">O servidor de pipe mais simples cria uma única instância de um pipe, conecta-se a um único cliente, se comunica com o cliente, desconecta do cliente, fecha o identificador de pipe e termina.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-104">The simplest pipe server creates a single instance of a pipe, connects to a single client, communicates with the client, disconnects from the client, closes the pipe handle, and terminates.</span></span> <span data-ttu-id="3e0fe-105">No entanto, é mais comum que um servidor de pipe se comunique com vários clientes de pipe.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-105">However, it is more common for a pipe server to communicate with multiple pipe clients.</span></span> <span data-ttu-id="3e0fe-106">Um servidor de pipe pode usar uma única instância de pipe para se conectar a vários clientes de pipe conectando-se ao e desconectando-se de cada cliente em sequência, mas o desempenho seria ruim.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-106">A pipe server could use a single pipe instance to connect with multiple pipe clients by connecting to and disconnecting from each client in sequence, but performance would be poor.</span></span> <span data-ttu-id="3e0fe-107">O servidor de pipe deve criar várias instâncias de pipe para lidar com eficiência com vários clientes simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-107">The pipe server must create multiple pipe instances to efficiently handle multiple clients simultaneously.</span></span>

<span data-ttu-id="3e0fe-108">Há três estratégias básicas para atender a várias instâncias de pipe.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-108">There are three basic strategies for servicing multiple pipe instances.</span></span>

-   <span data-ttu-id="3e0fe-109">Crie um thread separado para cada instância do pipe.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-109">Create a separate thread for each instance of the pipe.</span></span> <span data-ttu-id="3e0fe-110">Para obter um exemplo de um servidor de pipe multi-threaded, consulte [servidor de pipe multi-threaded](multithreaded-pipe-server.md).</span><span class="sxs-lookup"><span data-stu-id="3e0fe-110">For an example of a multithreaded pipe server, see [Multithreaded Pipe Server](multithreaded-pipe-server.md).</span></span>
-   <span data-ttu-id="3e0fe-111">Use operações sobrepostas especificando uma estrutura [**sobreposta**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) nas funções [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)e [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) .</span><span class="sxs-lookup"><span data-stu-id="3e0fe-111">Use overlapped operations by specifying an [**OVERLAPPED**](/windows/desktop/api/minwinbase/ns-minwinbase-overlapped) structure in the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), and [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) functions.</span></span> <span data-ttu-id="3e0fe-112">Para obter um exemplo, consulte [servidor de pipe nomeado usando e/s sobreposta](named-pipe-server-using-overlapped-i-o.md).</span><span class="sxs-lookup"><span data-stu-id="3e0fe-112">For an example, see [Named Pipe Server Using Overlapped I/O](named-pipe-server-using-overlapped-i-o.md).</span></span>
-   <span data-ttu-id="3e0fe-113">Use operações sobrepostas usando as funções [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) e [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) , que especificam uma rotina de conclusão a ser executada quando a operação for concluída.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-113">Use overlapped operations by using the [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) and [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) functions, which specify a completion routine to be executed when the operation is completed.</span></span> <span data-ttu-id="3e0fe-114">Para obter um exemplo, consulte [servidor de pipe nomeado usando rotinas de conclusão](named-pipe-server-using-completion-routines.md).</span><span class="sxs-lookup"><span data-stu-id="3e0fe-114">For an example, see [Named Pipe Server Using Completion Routines](named-pipe-server-using-completion-routines.md).</span></span>

<span data-ttu-id="3e0fe-115">O servidor de pipe multi-threaded é mais fácil de escrever, porque o thread de cada instância lida com comunicações para um único cliente de pipe.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-115">The multithreaded pipe server is easiest to write, because the thread for each instance handles communications for a single pipe client.</span></span> <span data-ttu-id="3e0fe-116">O sistema aloca o tempo do processador para cada thread, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-116">The system allocates processor time to each thread as needed.</span></span> <span data-ttu-id="3e0fe-117">Mas cada thread usa recursos do sistema, que é uma desvantagem para um servidor de pipe que lida com um grande número de clientes.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-117">But each thread uses system resources, which is a disadvantage for a pipe server that handles a large number of clients.</span></span>

<span data-ttu-id="3e0fe-118">Com um servidor de thread único, é mais fácil coordenar operações que afetam vários clientes e é mais fácil proteger recursos compartilhados de acesso simultâneo por vários clientes.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-118">With a single-threaded server, it is easier to coordinate operations that affect multiple clients, and it is easier to protect shared resources from simultaneous access by multiple clients.</span></span> <span data-ttu-id="3e0fe-119">O desafio de um servidor de thread único é que ele requer a coordenação de operações sobrepostas para alocar o tempo do processador para lidar com as necessidades simultâneas dos clientes.</span><span class="sxs-lookup"><span data-stu-id="3e0fe-119">The challenge of a single-threaded server is that it requires coordination of overlapped operations to allocate processor time for handling the simultaneous needs of clients.</span></span>

 

 
