---
description: O servidor de pipe especifica os modos de acesso, sobreposição e write-through do pipe no parâmetro dwOpenMode da função CreateNamedPipe. Os clientes do pipe podem especificar esses modos abertos para seus identificadores de pipe usando a função CreateFile.
ms.assetid: 88824566-93c7-4941-a4fc-3a7ae9a332a4
title: Modos abertos do pipe nomeado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97f51d41ea98a47a269634b06ccdad869bd649fa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103922655"
---
# <a name="named-pipe-open-modes"></a><span data-ttu-id="cff1f-104">Modos abertos do pipe nomeado</span><span class="sxs-lookup"><span data-stu-id="cff1f-104">Named Pipe Open Modes</span></span>

<span data-ttu-id="cff1f-105">O servidor de pipe especifica os modos de acesso, sobreposição e write-through do pipe no parâmetro *dwOpenMode* da função [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="cff1f-105">The pipe server specifies the pipe access, overlap, and write-through modes in the *dwOpenMode* parameter of the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="cff1f-106">Os clientes do pipe podem especificar esses modos abertos para seus identificadores de pipe usando a função [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="cff1f-106">The pipe clients can specify these open modes for their pipe handles using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

## <a name="access-mode"></a><span data-ttu-id="cff1f-107">Modo de acesso</span><span class="sxs-lookup"><span data-stu-id="cff1f-107">Access Mode</span></span>

<span data-ttu-id="cff1f-108">Definir o modo de acesso do pipe é equivalente a especificar o acesso de leitura ou gravação associado às alças do servidor de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-108">Setting the pipe access mode is equivalent to specifying read or write access associated with the pipe server's handles.</span></span> <span data-ttu-id="cff1f-109">A tabela a seguir mostra o direito de acesso genérico equivalente para cada modo de acesso que você pode especificar com [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span><span class="sxs-lookup"><span data-stu-id="cff1f-109">The following table shows the equivalent generic access right for each access mode you can specify with [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span></span>



| <span data-ttu-id="cff1f-110">Modo de acesso</span><span class="sxs-lookup"><span data-stu-id="cff1f-110">Access mode</span></span>            | <span data-ttu-id="cff1f-111">Direito de acesso genérico equivalente</span><span class="sxs-lookup"><span data-stu-id="cff1f-111">Equivalent generic access right</span></span> |
|------------------------|---------------------------------|
| <span data-ttu-id="cff1f-112">\_entrada de acesso de pipe \_</span><span class="sxs-lookup"><span data-stu-id="cff1f-112">PIPE\_ACCESS\_INBOUND</span></span>  | <span data-ttu-id="cff1f-113">\_leitura genérica</span><span class="sxs-lookup"><span data-stu-id="cff1f-113">GENERIC\_READ</span></span>                   |
| <span data-ttu-id="cff1f-114">\_saída de acesso de pipe \_</span><span class="sxs-lookup"><span data-stu-id="cff1f-114">PIPE\_ACCESS\_OUTBOUND</span></span> | <span data-ttu-id="cff1f-115">\_gravação genérica</span><span class="sxs-lookup"><span data-stu-id="cff1f-115">GENERIC\_WRITE</span></span>                  |
| <span data-ttu-id="cff1f-116">\_duplex de acesso de pipe \_</span><span class="sxs-lookup"><span data-stu-id="cff1f-116">PIPE\_ACCESS\_DUPLEX</span></span>   | <span data-ttu-id="cff1f-117">gravação genérica de \_ leitura genérica \| \_</span><span class="sxs-lookup"><span data-stu-id="cff1f-117">GENERIC\_READ \| GENERIC\_WRITE</span></span> |



 

<span data-ttu-id="cff1f-118">Se o servidor de pipe criar um pipe com acesso de PIPE de \_ \_ entrada, o pipe será somente leitura para o servidor de pipe e somente gravação para o cliente de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-118">If the pipe server creates a pipe with PIPE\_ACCESS\_INBOUND, the pipe is read-only for the pipe server and write-only for the pipe client.</span></span> <span data-ttu-id="cff1f-119">Se o servidor de pipe criar um pipe com \_ saída de acesso de pipe \_ , o pipe será somente gravação para o servidor de pipe e somente leitura para o cliente do pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-119">If the pipe server creates a pipe with PIPE\_ACCESS\_OUTBOUND, the pipe is write-only for the pipe server and read-only for the pipe client.</span></span> <span data-ttu-id="cff1f-120">Um pipe criado com o \_ duplex de acesso de pipe \_ é de leitura/gravação para o servidor de pipe e o cliente de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-120">A pipe created with PIPE\_ACCESS\_DUPLEX is read/write for both the pipe server and the pipe client.</span></span>

<span data-ttu-id="cff1f-121">Os clientes de pipe que usam [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) para se conectar a um pipe nomeado devem especificar um direito de acesso no parâmetro *dwDesiredAccess* que seja compatível com o modo de acesso especificado pelo servidor de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-121">Pipe clients using [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) to connect to a named pipe must specify an access right in the *dwDesiredAccess* parameter that is compatible with the access mode specified by the pipe server.</span></span> <span data-ttu-id="cff1f-122">Por exemplo, um cliente deve especificar \_ o acesso de leitura genérico para abrir um identificador para um pipe que o servidor de pipe criado com acesso de saída de pipe \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="cff1f-122">For example, a client must specify GENERIC\_READ access to open a handle for a pipe that the pipe server created with PIPE\_ACCESS\_OUTBOUND.</span></span> <span data-ttu-id="cff1f-123">Os modos de acesso devem ser os mesmos para todas as instâncias de um pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-123">The access modes must be the same for all instances of a pipe.</span></span>

<span data-ttu-id="cff1f-124">Para ler atributos de pipe, como o modo de leitura ou o modo de bloqueio, o identificador de pipe deve ter o \_ direito de acesso aos atributos de leitura de arquivo \_ ; para gravar os atributos de pipe, o identificador de pipe deve ter o \_ direito de acesso atributos de gravação de arquivo \_ .</span><span class="sxs-lookup"><span data-stu-id="cff1f-124">To read pipe attributes such as the read mode or blocking mode, the pipe handle must have the FILE\_READ\_ATTRIBUTES access right; to write pipe attributes, the pipe handle must have the FILE\_WRITE\_ATTRIBUTES access right.</span></span> <span data-ttu-id="cff1f-125">Esses direitos de acesso podem ser combinados com o direito de acesso genérico apropriado para o pipe: \_ leitura genérica com \_ \_ atributos de gravação de arquivo para um pipe somente leitura ou \_ gravação genérica com \_ \_ atributos de leitura de arquivo para um pipe somente gravação.</span><span class="sxs-lookup"><span data-stu-id="cff1f-125">These access rights can be combined with the generic access right that is appropriate for the pipe: GENERIC\_READ with FILE\_WRITE\_ATTRIBUTES for a read-only pipe, or GENERIC\_WRITE with FILE\_READ\_ATTRIBUTES for a write-only pipe.</span></span> <span data-ttu-id="cff1f-126">Restringir os direitos de acesso dessa maneira fornece melhor segurança para o pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-126">Restricting access rights in this way provides better security for the pipe.</span></span>

## <a name="overlapped-mode"></a><span data-ttu-id="cff1f-127">Modo sobreposto</span><span class="sxs-lookup"><span data-stu-id="cff1f-127">Overlapped Mode</span></span>

<span data-ttu-id="cff1f-128">No modo sobreposto, as funções que executam operações longas de leitura, gravação e conexão podem retornar imediatamente.</span><span class="sxs-lookup"><span data-stu-id="cff1f-128">In overlapped mode, functions performing lengthy read, write, and connect operations can return immediately.</span></span> <span data-ttu-id="cff1f-129">Isso permite que o thread execute outras operações enquanto uma operação demorada está em execução em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="cff1f-129">This enables the thread to perform other operations while a time-consuming operation is executing in the background.</span></span> <span data-ttu-id="cff1f-130">Para especificar o modo sobreposto, use o \_ sinalizador de sinalizador de arquivo \_ sobreposto.</span><span class="sxs-lookup"><span data-stu-id="cff1f-130">To specify overlapped mode, use the FILE\_FLAG\_OVERLAPPED flag.</span></span> <span data-ttu-id="cff1f-131">Para obter mais informações, consulte [entrada e saída síncronas e sobrepostas](synchronous-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="cff1f-131">For more information, see [Synchronous and Overlapped Input and Output](synchronous-and-overlapped-input-and-output.md).</span></span>

<span data-ttu-id="cff1f-132">A função [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) permite que o cliente de pipe defina o modo sobreposto ( \_ sinalizador de arquivo \_ sobreposto) para seus identificadores de pipe usando o parâmetro *dwFlagsAndAttributes* .</span><span class="sxs-lookup"><span data-stu-id="cff1f-132">The [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function allows the pipe client to set overlapped mode (FILE\_FLAG\_OVERLAPPED) for its pipe handles using the *dwFlagsAndAttributes* parameter.</span></span>

## <a name="write-through-mode"></a><span data-ttu-id="cff1f-133">Modo de Write-Through</span><span class="sxs-lookup"><span data-stu-id="cff1f-133">Write-Through Mode</span></span>

<span data-ttu-id="cff1f-134">Especifique o modo de write-through com gravação de sinalizador de arquivo \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="cff1f-134">Specify write-through mode with FILE\_FLAG\_WRITE\_THROUGH.</span></span> <span data-ttu-id="cff1f-135">Esse modo afeta somente operações de gravação em pipes de tipo de byte entre clientes de pipe e servidores de pipe em computadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="cff1f-135">This mode affects only write operations to byte-type pipes between pipe clients and pipe servers on different computers.</span></span> <span data-ttu-id="cff1f-136">No modo de write-through, as funções que gravam em um pipe nomeado não retornam até que os dados sejam transmitidos pela rede e para o buffer do pipe no computador remoto.</span><span class="sxs-lookup"><span data-stu-id="cff1f-136">In write-through mode, the functions that write to a named pipe do not return until the data is transmitted across the network and into the pipe's buffer on the remote computer.</span></span> <span data-ttu-id="cff1f-137">O modo de write-through é útil para aplicativos que exigem sincronização para cada operação de gravação.</span><span class="sxs-lookup"><span data-stu-id="cff1f-137">Write-through mode is useful for applications that require synchronization for every write operation.</span></span>

<span data-ttu-id="cff1f-138">Se o modo write-through não estiver habilitado, o sistema aprimorará a eficiência das operações de rede armazenando dados em buffer até que um número mínimo de bytes seja acumulado ou até que um período de tempo máximo tenha decorrido.</span><span class="sxs-lookup"><span data-stu-id="cff1f-138">If write-through mode is not enabled, the system enhances the efficiency of network operations by buffering data until a minimum number of bytes have accumulated or until a maximum time period has elapsed.</span></span> <span data-ttu-id="cff1f-139">O armazenamento em buffer permite que o sistema combine várias operações de gravação em uma única transmissão de rede.</span><span class="sxs-lookup"><span data-stu-id="cff1f-139">Buffering enables the system to combine multiple write operations into a single network transmission.</span></span> <span data-ttu-id="cff1f-140">Isso significa que uma operação de gravação pode ser concluída com êxito depois que o sistema coloca os dados no buffer de saída, mas antes que o sistema o transmita pela rede.</span><span class="sxs-lookup"><span data-stu-id="cff1f-140">This means that a write operation can be successfully completed after the system puts the data in the outbound buffer, but before the system transmits it across the network.</span></span>

<span data-ttu-id="cff1f-141">A função [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) permite que o cliente de pipe defina o modo de write-through ( \_ gravação de sinalizador de arquivo \_ \_ ) para seus identificadores de pipe usando o parâmetro *dwFlagsAndAttributes* .</span><span class="sxs-lookup"><span data-stu-id="cff1f-141">The [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function allows the pipe client to set write-through mode (FILE\_FLAG\_WRITE\_THROUGH) for its pipe handles using the *dwFlagsAndAttributes* parameter.</span></span> <span data-ttu-id="cff1f-142">O modo de write-through de um identificador de pipe não pode ser alterado após a criação do identificador de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-142">The write-through mode of a pipe handle cannot be changed after the pipe handle has been created.</span></span> <span data-ttu-id="cff1f-143">O modo write-through pode ser diferente para identificadores de servidor e cliente para a mesma instância de pipe.</span><span class="sxs-lookup"><span data-stu-id="cff1f-143">The write-through mode can be different for server and client handles to the same pipe instance.</span></span>

<span data-ttu-id="cff1f-144">Um cliente de pipe pode usar a função [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) para controlar o número de bytes e o período de tempo limite antes da transmissão para um pipe no qual o modo de write-through está desabilitado.</span><span class="sxs-lookup"><span data-stu-id="cff1f-144">A pipe client can use the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function to control the number of bytes and the time-out period before transmission for a pipe on which write-through mode is disabled.</span></span> <span data-ttu-id="cff1f-145">Para um pipe somente leitura, o identificador de pipe deve ser aberto com os \_ direitos de acesso de atributos de leitura e gravação de arquivo genéricos \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="cff1f-145">For a read-only pipe, the pipe handle must be opened with the GENERIC\_READ and FILE\_WRITE\_ATTRIBUTES access rights.</span></span>

 

 
