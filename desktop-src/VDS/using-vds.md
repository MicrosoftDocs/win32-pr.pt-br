---
description: Usando VDS
ms.assetid: aa4be499-625d-4dbd-828c-4a55ff2dba2c
title: Usando VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c648c5cc2507c4819f98367c367099248a0e723f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171662"
---
# <a name="using-vds"></a><span data-ttu-id="4425d-103">Usando VDS</span><span class="sxs-lookup"><span data-stu-id="4425d-103">Using VDS</span></span>

<span data-ttu-id="4425d-104">\[A partir do Windows 8 e do Windows Server 2012, a interface com do [serviço de disco virtual](virtual-disk-service-portal.md) é substituída pela [API de gerenciamento de armazenamento do Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span><span class="sxs-lookup"><span data-stu-id="4425d-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="4425d-105">O VDS fornece uma interface para o desenvolvimento de scripts e GUI que pode simplificar as atividades executadas por um administrador do Windows Server que gerencia um conjunto heterogêneo de sistemas de armazenamento, migrando dados entre diferentes configurações de hardware ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="4425d-105">VDS supplies an interface for scripting and GUI development that can simplify the activities that are performed by a Windows server administrator who manages a heterogeneous set of storage systems, migrating data across different hardware configurations over time.</span></span> <span data-ttu-id="4425d-106">Se você não estiver familiarizado com os objetos que são usados no desenvolvimento do VDS, consulte o [modelo de objeto do VDS](vds-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="4425d-106">If you are unfamiliar with the objects that are used in VDS development, see the [VDS Object Model](vds-object-model.md).</span></span>

<span data-ttu-id="4425d-107">Alguns pontos antes de começar:</span><span class="sxs-lookup"><span data-stu-id="4425d-107">A few points before you begin:</span></span>

-   <span data-ttu-id="4425d-108">Embora o VDS inclua um provedor de software, você deve adquirir um provedor de hardware e o hardware associado separadamente para tirar proveito das operações do provedor de hardware.</span><span class="sxs-lookup"><span data-stu-id="4425d-108">While VDS includes a software provider, you must purchase a hardware provider and the associated hardware separately to take advantage of the hardware provider operations.</span></span> <span data-ttu-id="4425d-109">Para obter instruções de instalação, consulte a documentação fornecida pelo fabricante do hardware.</span><span class="sxs-lookup"><span data-stu-id="4425d-109">For installation instructions, see the documentation that is provided by the hardware manufacturer.</span></span>
-   <span data-ttu-id="4425d-110">Algumas operações exigem volumes formatados com NTFS.</span><span class="sxs-lookup"><span data-stu-id="4425d-110">Some operations require NTFS-formatted volumes.</span></span> <span data-ttu-id="4425d-111">Por exemplo, quando você monta um volume em um diretório existente, o volume que contém o diretório deve ser formatado com NTFS.</span><span class="sxs-lookup"><span data-stu-id="4425d-111">For example, when you mount a volume on an existing directory, the volume that contains the directory must be formatted with NTFS.</span></span> <span data-ttu-id="4425d-112">Outros sistemas de arquivos não oferecem suporte a essa operação.</span><span class="sxs-lookup"><span data-stu-id="4425d-112">Other file systems do not support this operation.</span></span> <span data-ttu-id="4425d-113">Para obter informações sobre as operações que exigem NTFS, consulte cada página de método na [referência do VDS](vds-reference.md).</span><span class="sxs-lookup"><span data-stu-id="4425d-113">For information about operations that require NTFS, see each method page in [VDS Reference](vds-reference.md).</span></span>

## <a name="programming-languages"></a><span data-ttu-id="4425d-114">Linguagens de programação</span><span class="sxs-lookup"><span data-stu-id="4425d-114">Programming Languages</span></span>

<span data-ttu-id="4425d-115">Use qualquer linguagem de programação adequada para desenvolvimento com com, como a linguagem C ou C++.</span><span class="sxs-lookup"><span data-stu-id="4425d-115">Use any programming language that is suitable for development with COM, such as the C language or C++.</span></span>

## <a name="security"></a><span data-ttu-id="4425d-116">Segurança</span><span class="sxs-lookup"><span data-stu-id="4425d-116">Security</span></span>

<span data-ttu-id="4425d-117">O Firewall do Windows está habilitado por padrão.</span><span class="sxs-lookup"><span data-stu-id="4425d-117">Windows Firewall is enabled by default.</span></span> <span data-ttu-id="4425d-118">Isso pode fazer com que a autenticação falhe para interfaces de retorno de chamada, como [**IVdsAdviseSink**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), que pode ser executada remotamente.</span><span class="sxs-lookup"><span data-stu-id="4425d-118">This can cause authentication to fail for callback interfaces, such as [**IVdsAdviseSink**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), that can be executed remotely.</span></span> <span data-ttu-id="4425d-119">Se o Firewall do Windows estiver habilitado no cliente ou no servidor, você deverá adicionar o gerenciamento de volume remoto à guia **exceções** no firewall do Windows.</span><span class="sxs-lookup"><span data-stu-id="4425d-119">If Windows Firewall is enabled on either the client or the server, you must add Remote Volume Management to the **Exceptions** tab in Windows Firewall.</span></span>

<span data-ttu-id="4425d-120">**Windows Server 2003:** No Windows Server 2003 com Service Pack 2 (SP2) e Windows Server 2003 com Service Pack 1 (SP1), se o Firewall do Windows estiver habilitado no cliente ou no servidor e se o servidor estiver configurado para usar a autenticação NTLM, você deverá adicionar as seguintes configurações à guia **exceções** no firewall do Windows para o computador apropriado.</span><span class="sxs-lookup"><span data-stu-id="4425d-120">**Windows Server 2003:** In Windows Server 2003 with Service Pack 2 (SP2) and Windows Server 2003 with Service Pack 1 (SP1), if Windows Firewall is enabled on either the client or the server and if the server is configured to use NTLM authentication, you must add the following settings to the **Exceptions** tab in Windows Firewall for the appropriate computer.</span></span>

| <span data-ttu-id="4425d-121">Computador</span><span class="sxs-lookup"><span data-stu-id="4425d-121">Computer</span></span>                 | <span data-ttu-id="4425d-122">Configurações de exceções</span><span class="sxs-lookup"><span data-stu-id="4425d-122">Exceptions settings</span></span>                                                                 |
|--------------------------|-------------------------------------------------------------------------------------|
| <span data-ttu-id="4425d-123">Computador cliente (local)</span><span class="sxs-lookup"><span data-stu-id="4425d-123">Client computer (local)</span></span>  | <span data-ttu-id="4425d-124">Dmremote.exe</span><span class="sxs-lookup"><span data-stu-id="4425d-124">Dmremote.exe</span></span><br/> <span data-ttu-id="4425d-125">Mmc.exe</span><span class="sxs-lookup"><span data-stu-id="4425d-125">Mmc.exe</span></span><br/> <span data-ttu-id="4425d-126">Vdsldr.exe</span><span class="sxs-lookup"><span data-stu-id="4425d-126">Vdsldr.exe</span></span><br/> <span data-ttu-id="4425d-127">TCP 135</span><span class="sxs-lookup"><span data-stu-id="4425d-127">TCP 135</span></span><br/> |
| <span data-ttu-id="4425d-128">Computador servidor (remoto)</span><span class="sxs-lookup"><span data-stu-id="4425d-128">Server computer (remote)</span></span> | <span data-ttu-id="4425d-129">Dmadmin.exe</span><span class="sxs-lookup"><span data-stu-id="4425d-129">Dmadmin.exe</span></span><br/> <span data-ttu-id="4425d-130">Vds.exe</span><span class="sxs-lookup"><span data-stu-id="4425d-130">Vds.exe</span></span><br/> <span data-ttu-id="4425d-131">TCP 135</span><span class="sxs-lookup"><span data-stu-id="4425d-131">TCP 135</span></span><br/>                        |



 

<span data-ttu-id="4425d-132">Observe que o Firewall do Windows não está habilitado por padrão até o Windows Server 2003 com SP1.</span><span class="sxs-lookup"><span data-stu-id="4425d-132">Note that Windows Firewall is not enabled by default until Windows Server 2003 with SP1.</span></span>

<span data-ttu-id="4425d-133">Um aplicativo que está usando o VDS deve ser executado sob a conta de grupo de operadores de backup ou administradores.</span><span class="sxs-lookup"><span data-stu-id="4425d-133">An application that is using VDS must run under the Backup Operator or Administrators group account.</span></span> <span data-ttu-id="4425d-134">Sem o privilégio apropriado, um aplicativo pode criar um objeto de carregador de serviço, mas o objeto não carregará o VDS.</span><span class="sxs-lookup"><span data-stu-id="4425d-134">Without the appropriate privilege, an application can create a service loader object, but the object will not load VDS.</span></span> <span data-ttu-id="4425d-135">Em vez disso, ele retorna um erro indicando que o acesso ao VDS foi negado.</span><span class="sxs-lookup"><span data-stu-id="4425d-135">Instead, it returns an error indicating that access to VDS is denied.</span></span>

<span data-ttu-id="4425d-136">Se a rede usar a autenticação NTLM, o computador cliente deverá permitir o acesso anônimo.</span><span class="sxs-lookup"><span data-stu-id="4425d-136">If the network uses NTLM authentication, the client computer should allow anonymous access.</span></span> <span data-ttu-id="4425d-137">Nesse caso, se o computador cliente estiver executando um sistema operacional Windows Server, o acesso anônimo será habilitado por padrão.</span><span class="sxs-lookup"><span data-stu-id="4425d-137">In this case, if the client computer is running a Windows Server operating system, anonymous access is enabled by default.</span></span> <span data-ttu-id="4425d-138">Se estiver executando um sistema operacional cliente Windows, o acesso anônimo deverá ser habilitado usando Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="4425d-138">If it is running a Windows Client operating system, anonymous access must be enabled using Dcomcnfg.exe.</span></span>

## <a name="configuration-and-query-operations"></a><span data-ttu-id="4425d-139">Operações de configuração e consulta</span><span class="sxs-lookup"><span data-stu-id="4425d-139">Configuration and Query Operations</span></span>

<span data-ttu-id="4425d-140">As operações de configuração e consulta têm como escopo o computador, o provedor, o subsistema ou o pacote mais relevante.</span><span class="sxs-lookup"><span data-stu-id="4425d-140">Configuration and query operations are scoped by the most relevant computer, provider, subsystem, or pack.</span></span> <span data-ttu-id="4425d-141">As consultas atravessam apenas um provedor ou um nível da hierarquia de associação.</span><span class="sxs-lookup"><span data-stu-id="4425d-141">Queries traverse only one provider or one level of the binding hierarchy.</span></span> <span data-ttu-id="4425d-142">Para criar uma exibição completa, o chamador deve fazer uma consulta horizontal e verticalmente em cada nível.</span><span class="sxs-lookup"><span data-stu-id="4425d-142">To build a full view, the caller must query across and down each level.</span></span> <span data-ttu-id="4425d-143">A lista a seguir inclui exemplos:</span><span class="sxs-lookup"><span data-stu-id="4425d-143">The following list includes examples:</span></span>

-   <span data-ttu-id="4425d-144">Para exibir todos os discos em um computador, os chamadores devem consultar todos os provedores de software para os discos que são reivindicados por esses provedores.</span><span class="sxs-lookup"><span data-stu-id="4425d-144">To view all disks on a computer, callers must query across all software providers for the disks that are claimed by those providers.</span></span>
-   <span data-ttu-id="4425d-145">Para determinar quais discos contribuem para um volume empilhado por software, os chamadores primeiro determinam os plexes contribuintes e, em seguida, consultam as extensões de disco para cada Plex.</span><span class="sxs-lookup"><span data-stu-id="4425d-145">To determine which disks contribute to a software-stacked volume, callers first determine the contributing plexes and then query for the disk extents for each plex.</span></span>
-   <span data-ttu-id="4425d-146">Para exibir todas as unidades que estão anexadas a um determinado subsistema, os chamadores devem consultar o subsistema.</span><span class="sxs-lookup"><span data-stu-id="4425d-146">To view all the drives that are attached to a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="4425d-147">Para exibir todos os LUNs expostos por um determinado subsistema, os chamadores devem consultar o subsistema.</span><span class="sxs-lookup"><span data-stu-id="4425d-147">To view all the LUNs that are exposed by a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="4425d-148">Para exibir todo o armazenamento em uma SAN ou em um cluster, os chamadores devem consultar cada computador para todos os provedores de hardware, consultar cada provedor de todos os subsistemas e, em seguida, consultar cada subsistema.</span><span class="sxs-lookup"><span data-stu-id="4425d-148">To view all storage on a SAN or a cluster, callers must query each computer for all hardware providers, query each provider for all subsystems, and then query each subsystem.</span></span>

<span data-ttu-id="4425d-149">Embora cada consulta individual não retorne duplicatas, as consultas repetidas entre computadores ou entre provedores podem acumular duplicatas.</span><span class="sxs-lookup"><span data-stu-id="4425d-149">While each individual query will not return duplicates, repeated queries across computers or across providers can accumulate duplicates.</span></span> <span data-ttu-id="4425d-150">Os chamadores devem implementar qualquer filtragem.</span><span class="sxs-lookup"><span data-stu-id="4425d-150">Callers must implement any filtering.</span></span> <span data-ttu-id="4425d-151">Observe também que os aplicativos de gerenciamento de SAN podem usar o Active Directory ou um repositório para manter as informações de configuração; Talvez não seja necessário consultar cada computador.</span><span class="sxs-lookup"><span data-stu-id="4425d-151">Note also that SAN management applications can use the Active Directory or a repository to persist configuration information; it might not be necessary to query each computer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4425d-152">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="4425d-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4425d-153">Serviço de Disco Virtual</span><span class="sxs-lookup"><span data-stu-id="4425d-153">Virtual Disk Service</span></span>](virtual-disk-service-portal.md)
</dt> <dt>

[<span data-ttu-id="4425d-154">Modelo de objeto VDS</span><span class="sxs-lookup"><span data-stu-id="4425d-154">VDS Object Model</span></span>](vds-object-model.md)
</dt> <dt>

[<span data-ttu-id="4425d-155">Referência do VDS</span><span class="sxs-lookup"><span data-stu-id="4425d-155">VDS Reference</span></span>](vds-reference.md)
</dt> </dl>

 

