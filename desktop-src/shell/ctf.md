---
description: Sinalizadores que controlam o comportamento da função de chamada. Usado por SHCreateThread e SHCreateThreadWithHandle. Nessas funções, esses valores são definidos como sendo do tipo \_ sinalizadores SHCT.
title: Sinalizadores CTF (shlwapi. h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: bfad2b2e662a80501d0f869d6f9e7849e01c5dcc3e949834b698a3c583fef3d6
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/11/2021
ms.locfileid: "118224840"
---
# <a name="ctf-flags"></a>Sinalizadores de CTF

Sinalizadores que controlam o comportamento da função de chamada. Usado por [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) e [**SHCreateThreadWithHandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle). Nessas funções, esses valores são definidos como sendo do tipo \_ sinalizadores SHCT.



| Constante/valor                                                                                                                                                                                                                                             | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <dt>**CTF \_ INSISTIr**</dt> <dt>0x00000001</dt> </dl>                                       | 0x00000001. Se a tentativa de criar o thread com [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) falhar, definir esse sinalizador fará com que a função apontada por *pfnThreadProc* seja chamada de forma síncrona do thread de chamada. Esse sinalizador só poderá ser usado se *pfnCallback* for **nulo**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <dt>**CTF \_ \_Referência de thread**</dt> <dt>0x00000002</dt> </dl>                          | 0x00000002. Mantenha uma referência para o thread de criação durante a chamada para a função apontada por *pfnThreadProc*. Essa referência deve ter sido definida com [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <dt>**CTF \_ PROCESSAR \_ referência**</dt> <dt>0x00000004</dt> </dl>                       | 0x00000004. mantenha uma referência ao processo do Windows Explorer durante a chamada para a função apontada por *pfnThreadProc*. esse sinalizador é útil para [manipuladores de extensão de Shell](handlers.md), que talvez precisem manter o processo do Windows Explorer de fechar prematuramente. Essa ação é útil durante tarefas como trabalhar em um thread em segundo plano ou copiar arquivos. Para obter mais informações, consulte [**SHGetInstanceExplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <dt>**CTF \_ Coinit \_ STA**</dt> <dt>0x00000008</dt> </dl>                          | 0x00000008. Inicialize COM como um STA (single-threaded apartment) para o thread criado antes de chamar a função opcional apontada por *pfnCallback* ou a função apontada por *pfnThreadProc*. Esse sinalizador é útil quando o COM precisa ser inicializado para um thread. COM também será automaticamente não inicializado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <dt>**CTF \_ 0x00000008 de coinicialização**</dt> <dt></dt> </dl>                                       | Equivalente a CTF de \_ outinit \_ Sta.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <dt>**CTF \_ FREELIBANDEXIT**</dt> <dt>0x00000010</dt> </dl>               | 0x00000010. **Internet Explorer 6 ou posterior.** [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) será chamado na DLL que contém a função *pfnThreadProc* para impedir que ela seja descarregada. Após o retorno de *pfnThreadProc* , a dll será liberada com [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary), diminuindo assim a contagem de referência de dll. Passe este sinalizador para impedir que a DLL seja descarregada prematuramente; por exemplo, por [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries). Observe que, se esse sinalizador for passado, a função *pfnThreadProc* deverá residir em uma dll. esse sinalizador é implícito no Windows Vista e versões posteriores.<br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <dt>**CTF \_ REF \_ contado**</dt> <dt>0x00000020</dt> </dl>                       | 0x00000020. **Internet Explorer 6 ou posterior.** Uma referência de thread será criada automaticamente para o thread criado e definida com [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref). Depois que *pfnThreadProc* retorna, a referência de thread é liberada e as mensagens são enviadas até que a contagem de referência na referência de thread caia para zero, ou seja, até que os threads que dependem do thread criado tenham liberado suas referências.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <dt>**CTF \_ Aguarde \_ ALLOWCOM**</dt> <dt>0x00000040</dt> </dl>                 | 0x00000040. **Internet Explorer 6 ou posterior.** O thread de chamada aguarda e bombas mensagens COM e [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . se o procedimento síncrono tentar enviar uma mensagem de Windows com **SendMessage** para uma janela hospedada no thread de chamada, a mensagem será entregue com êxito. Se o procedimento síncrono tentar usar COM para se comunicar com um objeto STA hospedado no thread de chamada, a chamada de função atingirá com êxito o objeto pretendido. O thread de chamada está aberto para redigitar fragilidade. Embora o thread de chamada possa manipular o uso de **SendMessage** e com do procedimento síncrono, se outros threads estiverem usando **SendMessage** ou com para se comunicar com objetos hospedados no thread de chamada, eles poderão ser mensagens inesperadas ou chamadas de função que são processadas enquanto o procedimento síncrono está sendo concluído.<br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <dt>**CTF \_ 0x00000080 não utilizados**</dt> <dt></dt> </dl>                                       | 0x00000080. **Internet Explorer 7 ou posterior.** Não usado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <dt>**CTF \_ INHERITWOW64**</dt> <dt>0x00000100</dt> </dl>                     | 0x00000100. **Internet Explorer 7 ou posterior.** o novo thread herda o estado de desabilitação do Windows-on-Windows 64 bits (WOW64) para o redirecionador do sistema de arquivos.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <dt>**CTF \_ \_Não esperar \_ nenhum**</dt> <dt>0x00000200</dt> de reentrância </dl> | 0x00000200. **Windows Vista ou posterior.** O thread de chamada bloqueia todos os outros processos enquanto aguarda o procedimento síncrono ser executado no novo thread. se o procedimento síncrono tentar enviar uma mensagem de Windows com [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) para uma janela hospedada no thread de chamada, isso fará com que o procedimento síncrono seja bloqueado. Se o procedimento síncrono tentar usar COM para se comunicar com um objeto STA hospedado no thread de chamada, isso também fará com que o procedimento síncrono seja bloqueado. O thread de chamada é protegido de todas as questões de reentrada, especificando esse sinalizador.<br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <dt>**CTF \_ \_Localidade do teclado**</dt> <dt>0x00000400</dt> </dl>           | 0x00000400. **Windows 7 ou posterior.** Use a localidade do teclado do thread original no novo thread que ele gera.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <dt>**CTF \_ OLEINITIALIZE**</dt> <dt>0x00000800</dt> </dl>                  | 0x00000800. **Windows 7 ou posterior.** Inicialize com com o modelo STA (single-threaded apartment) para o thread criado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <dt>**CTF \_ 0x00001000 \_ MTA de PARAinit**</dt> <dt></dt> </dl>                          | 0x00001000. **Windows 7 e posterior**. Inicialize com com o modelo de MTA (multithreaded apartment) para o thread criado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <dt>**CTF \_ NOADDREFLIB**</dt> <dt>0x00002000</dt> </dl>                        | 0x00002000. **Windows 7 ou posterior.** Esse sinalizador é essencialmente o oposto de CTF \_ FREELIBANDEXIT. Isso evita chamadas [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) / [**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) que podem resultar em contenção para o bloqueio do carregador. Use CTF \_ NOADDREFLIB somente quando o novo thread tiver meios para garantir que o código do procedimento de thread original permanecerá carregado. Esse valor não deve ser usado no contexto de objetos COM, porque objetos COM devem garantir que a DLL permaneça carregada (normalmente, COM descarrega as DLLs).<br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a>Comentários

Se nenhum \_ \_ sinalizador de espera de CTF for especificado, o thread de chamada aguardará e enviará mensagens [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . se o procedimento síncrono tentar enviar uma mensagem de Windows com **SendMessage** para uma janela hospedada no thread de chamada, a mensagem será exibida para a janela desejada. Se o procedimento síncrono tentar usar COM para se comunicar com um objeto STA hospedado no thread de chamada, o procedimento síncrono será bloqueado. O thread de chamada está aberto para redigitar fragilidade. Embora o thread de chamada possa manipular o uso de **SendMessage** do procedimento síncrono, se outros threads usarem **SendMessage** para se comunicarem com uma janela hospedada no thread de chamada, essas mensagens poderão ser inesperadas. Isso pode fazer com que eles sejam processados enquanto o procedimento síncrono estiver sendo concluído.

## <a name="requirements"></a>Requisitos



| Requisito | Valor |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Cliente mínimo com suporte<br/> | Windows 2000 Professional, Windows XP, Windows 7 \[ aplicativos de área de trabalho\]<br/>    |
| Servidor mínimo com suporte<br/> | Windows 2000 Server \[somente aplicativos da área de trabalho\]<br/>                                 |
| Cabeçalho<br/>                   | <dl> <dt>Shlwapi. h</dt> </dl> |



 

 
