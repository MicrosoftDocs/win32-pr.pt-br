---
description: Este tópico fornece ISVs (fornecedores de software independentes) com um guia rápido para as etapas necessárias para registrar e gerenciar os padrões de aplicativo no Windows Vista e versões posteriores. São fornecidos links para artigos mais detalhados sobre o tópico de cada seção.
ms.assetid: 649eb20d-07d3-4209-abff-45fc50f05631
title: Gerenciando aplicativos padrão
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de40d6c80aae4005fc015c08ef7bf2907289e795
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828277"
---
# <a name="managing-default-applications"></a><span data-ttu-id="dccfc-104">Gerenciando aplicativos padrão</span><span class="sxs-lookup"><span data-stu-id="dccfc-104">Managing Default Applications</span></span>

<span data-ttu-id="dccfc-105">O recurso **Definir acesso do programa e padrões do computador** (SPAD) foi adicionado ao Windows XP e versões posteriores do Windows para gerenciar padrões por computador.</span><span class="sxs-lookup"><span data-stu-id="dccfc-105">The **Set Program Access and Computer Defaults** (SPAD) feature was added to Windows XP and later versions of Windows to manage per-computer defaults.</span></span> <span data-ttu-id="dccfc-106">Além do SPAD, o Windows Vista introduziu o conceito de aplicativos padrão por usuário e o item **programas padrão** no painel de controle.</span><span class="sxs-lookup"><span data-stu-id="dccfc-106">In addition to SPAD, Windows Vista introduced the concept of per-user default applications and the **Default Programs** item in Control Panel.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dccfc-107">Este tópico não se aplica ao Windows 10.</span><span class="sxs-lookup"><span data-stu-id="dccfc-107">This topic does not apply for Windows 10.</span></span> <span data-ttu-id="dccfc-108">A maneira como as associações de arquivo padrão funcionam alteradas no Windows 10.</span><span class="sxs-lookup"><span data-stu-id="dccfc-108">The way that default file associations work changed in Windows 10.</span></span> <span data-ttu-id="dccfc-109">Para obter mais informações, consulte a seção sobre **alterações de como o Windows 10 trata os aplicativos padrão** nesta [postagem](https://blogs.windows.com/bloggingwindows/2015/05/20/announcing-windows-10-insider-preview-build-10122-for-pcs/).</span><span class="sxs-lookup"><span data-stu-id="dccfc-109">For more information, see the section on **Changes to how Windows 10 handles default apps** in [this post](https://blogs.windows.com/bloggingwindows/2015/05/20/announcing-windows-10-insider-preview-build-10122-for-pcs/).</span></span>

 

<span data-ttu-id="dccfc-110">As configurações padrão por usuário são específicas para uma conta de usuário individual no sistema.</span><span class="sxs-lookup"><span data-stu-id="dccfc-110">Per-user default settings are specific to an individual user account on the system.</span></span> <span data-ttu-id="dccfc-111">Se as configurações padrão por usuário estiverem presentes, elas terão precedência sobre os padrões correspondentes por computador para essa conta.</span><span class="sxs-lookup"><span data-stu-id="dccfc-111">If per-user default settings are present, they take precedence over corresponding per-computer defaults for that account.</span></span> <span data-ttu-id="dccfc-112">A partir do Windows 8, o sistema de extensibilidade para o tipo de arquivo e padrões de protocolo é estritamente por usuário e os padrões por computador são ignorados.</span><span class="sxs-lookup"><span data-stu-id="dccfc-112">As of Windows 8, the extensibility system for file type and protocol defaults is strictly per-user and per-computer defaults are ignored.</span></span> <span data-ttu-id="dccfc-113">SPAD também mudou no Windows 8 para definir padrões por usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-113">SPAD also changed in Windows 8 to set per-user defaults.</span></span>

-   <span data-ttu-id="dccfc-114">Em sistemas que executam versões do Windows anteriores ao Windows 8, uma conta de usuário criada recentemente recebe padrões por computador até que os padrões por usuário sejam estabelecidos.</span><span class="sxs-lookup"><span data-stu-id="dccfc-114">On systems running versions of Windows earlier than Windows 8, a newly created user account receives per-computer defaults until per-user defaults are established.</span></span> <span data-ttu-id="dccfc-115">No Windows Vista e posterior, os usuários podem usar o item **programas padrão** no painel de controle para definir ou alterar seus padrões por usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-115">In Windows Vista and later, users can use the **Default Programs** item in Control Panel to set or change their per-user defaults.</span></span> <span data-ttu-id="dccfc-116">Além disso, quando um aplicativo é executado pela primeira vez, os padrões por usuário podem ser definidos usando as diretrizes a seguir na seção [execução e padrões da primeira aplicação](#application-first-run-and-defaults) .</span><span class="sxs-lookup"><span data-stu-id="dccfc-116">In addition, when an application is run for the first time, per-user defaults can be set using the guidelines that follow in the [Application First Run and Defaults](#application-first-run-and-defaults) section.</span></span>
-   <span data-ttu-id="dccfc-117">Em sistemas que executam o Windows 8, uma conta de usuário recém-criada depende de padrões por usuário desde o início e a configuração desses padrões na primeira execução, conforme explicado na primeira [execução do aplicativo e os padrões](#application-first-run-and-defaults) não são mais suportados.</span><span class="sxs-lookup"><span data-stu-id="dccfc-117">On systems running Windows 8, a newly created user account relies on per-user defaults from the start and the setting of those defaults on first run as explained in the [Application First Run and Defaults](#application-first-run-and-defaults) section is no longer supported.</span></span>

<span data-ttu-id="dccfc-118">Um aplicativo deve ser registrado com o SPAD e o recurso de programas padrão para ser oferecido como o programa padrão no Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="dccfc-118">An application must register with both SPAD and the Default Programs feature to be offered as the default program in Windows Vista and later.</span></span>

<span data-ttu-id="dccfc-119">Este tópico fornece ISVs (fornecedores de software independentes) com um guia rápido para as etapas necessárias para registrar e gerenciar os padrões de aplicativo no Windows Vista e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="dccfc-119">This topic provides independent software vendors (ISVs) with a quick guide to the steps necessary to register and manage application defaults in Windows Vista and later.</span></span> <span data-ttu-id="dccfc-120">São fornecidos links para artigos mais detalhados sobre o tópico de cada seção.</span><span class="sxs-lookup"><span data-stu-id="dccfc-120">Links are provided to more in-depth articles about each section's topic.</span></span>

-   [<span data-ttu-id="dccfc-121">Item programas padrão no painel de controle</span><span class="sxs-lookup"><span data-stu-id="dccfc-121">Default Programs Item in Control Panel</span></span>](#default-programs-item-in-control-panel)
-   [<span data-ttu-id="dccfc-122">Definir o acesso do programa e padrões do computador</span><span class="sxs-lookup"><span data-stu-id="dccfc-122">Set Program Access and Computer Defaults</span></span>](#set-program-access-and-computer-defaults)
    -   [<span data-ttu-id="dccfc-123">Definindo padrões em SPAD</span><span class="sxs-lookup"><span data-stu-id="dccfc-123">Setting Defaults in SPAD</span></span>](#setting-defaults-in-spad)
    -   [<span data-ttu-id="dccfc-124">Ocultar o acesso no SPAD</span><span class="sxs-lookup"><span data-stu-id="dccfc-124">Hide Access in SPAD</span></span>](#hide-access-in-spad)
-   [<span data-ttu-id="dccfc-125">Registrando para pontos de entrada de aplicativo</span><span class="sxs-lookup"><span data-stu-id="dccfc-125">Registering for Application Entry Points</span></span>](#registering-for-application-entry-points)
    -   [<span data-ttu-id="dccfc-126">Abrir com</span><span class="sxs-lookup"><span data-stu-id="dccfc-126">Open With</span></span>](#open-with)
    -   [<span data-ttu-id="dccfc-127">Menu iniciar e barra de início rápido</span><span class="sxs-lookup"><span data-stu-id="dccfc-127">Start Menu and Quick Launch Bar</span></span>](#start-menu-and-quick-launch-bar)
-   [<span data-ttu-id="dccfc-128">Instalação e padrões do aplicativo</span><span class="sxs-lookup"><span data-stu-id="dccfc-128">Application Installation and Defaults</span></span>](#application-installation-and-defaults)
-   [<span data-ttu-id="dccfc-129">Atualizações e padrões de aplicativos</span><span class="sxs-lookup"><span data-stu-id="dccfc-129">Application Upgrades and Defaults</span></span>](#application-upgrades-and-defaults)
-   [<span data-ttu-id="dccfc-130">Execução e padrões da primeira aplicação</span><span class="sxs-lookup"><span data-stu-id="dccfc-130">Application First Run and Defaults</span></span>](#application-first-run-and-defaults)
-   [<span data-ttu-id="dccfc-131">Verificando padrões e solicitando o consentimento do usuário</span><span class="sxs-lookup"><span data-stu-id="dccfc-131">Verifying Defaults and Asking for User Consent</span></span>](#verifying-defaults-and-asking-for-user-consent)
-   [<span data-ttu-id="dccfc-132">Dicas de compatibilidade de aplicativos</span><span class="sxs-lookup"><span data-stu-id="dccfc-132">Application Compatibility Tips</span></span>](#application-compatibility-tips)
    -   [<span data-ttu-id="dccfc-133">Evite disparar Per-User virtualização</span><span class="sxs-lookup"><span data-stu-id="dccfc-133">Avoid Triggering Per-User Virtualization</span></span>](#avoid-triggering-per-user-virtualization)
    -   [<span data-ttu-id="dccfc-134">Evitar avisos ou blocos de AppCompat do assistente de compatibilidade de programa</span><span class="sxs-lookup"><span data-stu-id="dccfc-134">Avoid AppCompat Warnings or Blocks from the Program Compatibility Assistant</span></span>](#avoid-appcompat-warnings-or-blocks-from-the-program-compatibility-assistant)
    -   [<span data-ttu-id="dccfc-135">Suporte para versões anteriores do sistema operacional Windows</span><span class="sxs-lookup"><span data-stu-id="dccfc-135">Support for Previous Windows Operating System Versions</span></span>](#support-for-previous-windows-operating-system-versions)
-   [<span data-ttu-id="dccfc-136">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="dccfc-136">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="dccfc-137">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="dccfc-137">Related topics</span></span>](#related-topics)

## <a name="default-programs-item-in-control-panel"></a><span data-ttu-id="dccfc-138">Item programas padrão no painel de controle</span><span class="sxs-lookup"><span data-stu-id="dccfc-138">Default Programs Item in Control Panel</span></span>

<span data-ttu-id="dccfc-139">O **programas padrão** é um recurso introduzido no Windows Vista, acessível diretamente do menu **Iniciar** , bem como do painel de controle.</span><span class="sxs-lookup"><span data-stu-id="dccfc-139">**Default Programs** is a feature introduced in Windows Vista, accessible directly from the **Start** menu as well as Control Panel.</span></span> <span data-ttu-id="dccfc-140">Ele fornece uma nova infraestrutura que funciona com o privilégio de usuário padrão (não elevado) e foi projetado para permitir que usuários e aplicativos gerenciem padrões por usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-140">It provides a new infrastructure that works with standard user privilege (not elevated) and is designed to enable users and applications to manage per-user defaults.</span></span> <span data-ttu-id="dccfc-141">Para os usuários, os programas padrão fornecem uma maneira unificada e facilmente acessível para gerenciar padrões, associações de arquivos e configurações de reprodução automática em todos os aplicativos no sistema.</span><span class="sxs-lookup"><span data-stu-id="dccfc-141">For users, Default Programs provides a unified and easily accessible way to manage defaults, file associations, and Autoplay settings across all applications on the system.</span></span> <span data-ttu-id="dccfc-142">Para aplicativos, o uso do escopo por usuário fornecido pelas APIs de programas padrão oferece as seguintes vantagens:</span><span class="sxs-lookup"><span data-stu-id="dccfc-142">For applications, using the per-user scope provided by the Default Programs APIs offers the following advantages:</span></span>

-   <span data-ttu-id="dccfc-143">**Sem elevação**</span><span class="sxs-lookup"><span data-stu-id="dccfc-143">**No Elevation**</span></span>

    <span data-ttu-id="dccfc-144">Um aplicativo não precisa elevar seus privilégios para declarar padrões.</span><span class="sxs-lookup"><span data-stu-id="dccfc-144">An application does not have to elevate its privileges to claim defaults.</span></span>

-   <span data-ttu-id="dccfc-145">**Boa cidadania**</span><span class="sxs-lookup"><span data-stu-id="dccfc-145">**Good Citizenship**</span></span>

    <span data-ttu-id="dccfc-146">Em um computador com vários usuários, cada usuário pode selecionar diferentes aplicativos padrão.</span><span class="sxs-lookup"><span data-stu-id="dccfc-146">On a multiple-user computer, each user can select different default applications.</span></span>

-   <span data-ttu-id="dccfc-147">**Gerenciamento padrão**</span><span class="sxs-lookup"><span data-stu-id="dccfc-147">**Default Management**</span></span>

    <span data-ttu-id="dccfc-148">As APIs de programas padrão oferecem um mecanismo confiável e consistente para verificar automaticamente o status padrão e recuperar as configurações perdidas sem recorrer à gravação diretamente no registro.</span><span class="sxs-lookup"><span data-stu-id="dccfc-148">Default Programs APIs offer a reliable and consistent mechanism for self-checking the default status and reclaiming lost settings without resorting to writing directly to the registry.</span></span> <span data-ttu-id="dccfc-149">No entanto, a partir do Windows 8, não recomendamos que os aplicativos consultem o status padrão, pois um aplicativo não pode mais alterar as configurações padrão — essas alterações podem ser feitas somente pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-149">However, as of Windows 8, we do not recommended that applications query the default status because an application can no longer change the default settings—those changes can be made only by the user.</span></span>

<span data-ttu-id="dccfc-150">Para permitir que seu aplicativo gerencie os padrões com eficiência, você deve registrar seu aplicativo como um programa padrão potencial.</span><span class="sxs-lookup"><span data-stu-id="dccfc-150">To enable your application to manage defaults effectively, you must register your application as a potential default program.</span></span> <span data-ttu-id="dccfc-151">Para obter detalhes sobre como registrar e usar as APIs de programas padrão, consulte [programas padrão](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="dccfc-151">For details on registering and using the Default Programs APIs, see [Default Programs](default-programs.md).</span></span>

<span data-ttu-id="dccfc-152">Os programas padrão também fornecem estes dois recursos:</span><span class="sxs-lookup"><span data-stu-id="dccfc-152">Default Programs also provides these two features:</span></span>

-   <span data-ttu-id="dccfc-153">**IU de padrões reutilizáveis**</span><span class="sxs-lookup"><span data-stu-id="dccfc-153">**Reusable Defaults UI**</span></span>

    <span data-ttu-id="dccfc-154">A interface do usuário de ambos os padrões do programa (**definir seus programas padrão**) e as associações de arquivo (**associar um tipo de arquivo ou protocolo a um programa**) podem ser reutilizadas e chamadas de dentro de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-154">The UI of both the program defaults (**Set your default programs**) and file associations (**Associate a file type or protocol with a program**) can be reused and called from within an application.</span></span> <span data-ttu-id="dccfc-155">Isso permite que os aplicativos forneçam uma experiência de usuário padrão para o gerenciamento de padrões e evita que os ISVs precisem desenvolver uma interface do usuário personalizada ou equivalente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-155">This enables applications to provide a standard user experience for managing defaults and saves ISVs from having to develop a custom or equivalent UI.</span></span>

-   <span data-ttu-id="dccfc-156">**Inclusão de informações de URL e marketing**</span><span class="sxs-lookup"><span data-stu-id="dccfc-156">**Inclusion of URL and Marketing Information**</span></span>

    <span data-ttu-id="dccfc-157">Como parte da página **definir programas padrão** do item **programas padrão** no painel de controle, um aplicativo pode fornecer informações de marketing e um link para o site do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="dccfc-157">As part of the **Set your default programs** page of the **Default Programs** item in Control Panel, an application can provide marketing information and a link to the vendor's website.</span></span> <span data-ttu-id="dccfc-158">Essa URL é derivada do certificado Authenticode com o qual o aplicativo foi assinado.</span><span class="sxs-lookup"><span data-stu-id="dccfc-158">This URL is derived from the Authenticode certificate that the application has been signed with.</span></span> <span data-ttu-id="dccfc-159">Isso impede o uso indevido e a substituição não autorizada desse link.</span><span class="sxs-lookup"><span data-stu-id="dccfc-159">This prevents misuse and unauthorized replacement of this link.</span></span> <span data-ttu-id="dccfc-160">Se um aplicativo tiver um certificado Authenticode que inclui uma URL inserida, a interface do usuário do Windows exibirá essa URL inserida.</span><span class="sxs-lookup"><span data-stu-id="dccfc-160">If an application has an Authenticode certificate that includes an embedded URL, Windows UI displays that embedded URL.</span></span> <span data-ttu-id="dccfc-161">Os ISVs devem aproveitar esse recurso para direcionar os usuários ao site para atualizações e outros downloads.</span><span class="sxs-lookup"><span data-stu-id="dccfc-161">ISVs should take advantage of this feature to direct users to their website for updates and other downloads.</span></span>

## <a name="set-program-access-and-computer-defaults"></a><span data-ttu-id="dccfc-162">Definir o acesso do programa e padrões do computador</span><span class="sxs-lookup"><span data-stu-id="dccfc-162">Set Program Access and Computer Defaults</span></span>

<span data-ttu-id="dccfc-163">**Definir acesso do programa e padrões do computador** (SPAD) permite que os administradores gerenciem padrões de todo o computador que são herdados por todos os novos usuários desse computador.</span><span class="sxs-lookup"><span data-stu-id="dccfc-163">**Set Program Access and Computer Defaults** (SPAD) enables administrators to manage computer-wide defaults that are inherited by all new users of that computer.</span></span> <span data-ttu-id="dccfc-164">Antes do Windows 8, o SPAD também permitia que os administradores reparasse as associações de arquivos se fossem desfeitos quando os programas foram removidos do sistema.</span><span class="sxs-lookup"><span data-stu-id="dccfc-164">Prior to Windows 8, SPAD also enabled administrators to repair file associations should they become broken when programs were removed from the system.</span></span> <span data-ttu-id="dccfc-165">No entanto, a partir do Windows 8, SPAD afeta apenas os padrões específicos do usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-165">However, as of Windows 8, SPAD affects only user-specific defaults.</span></span>

<span data-ttu-id="dccfc-166">Para obter mais informações sobre como registrar um aplicativo em SPAD, consulte [trabalhando com definir acesso do programa e padrões do computador (SPAD)](cpl-setprogramaccess.md) e [registrar programas com tipos de cliente](reg-middleware-apps.md).</span><span class="sxs-lookup"><span data-stu-id="dccfc-166">For more information on registering an application in SPAD, see [Working with Set Program Access and Computer Defaults (SPAD)](cpl-setprogramaccess.md) and [Registering Programs with Client Types](reg-middleware-apps.md).</span></span> <span data-ttu-id="dccfc-167">As alterações específicas e as novas recomendações são discutidas nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="dccfc-167">Specific changes and new recommendations are discussed in the sections that follow.</span></span>

### <a name="setting-defaults-in-spad"></a><span data-ttu-id="dccfc-168">Definindo padrões em SPAD</span><span class="sxs-lookup"><span data-stu-id="dccfc-168">Setting Defaults in SPAD</span></span>

<span data-ttu-id="dccfc-169">Padrões por usuário substituem padrões por computador.</span><span class="sxs-lookup"><span data-stu-id="dccfc-169">Per-user defaults override per-computer defaults.</span></span>

-   <span data-ttu-id="dccfc-170">**Antes do Windows 8**: os padrões definidos em SPAD (que são por computador) não serão vistos pelos usuários se os padrões correspondentes por usuário estiverem definidos.</span><span class="sxs-lookup"><span data-stu-id="dccfc-170">**Before Windows 8**: Defaults set in SPAD (which are per-computer) will not be seen by users if corresponding per-user defaults are set.</span></span> <span data-ttu-id="dccfc-171">Se um usuário não tiver definido um padrão por usuário, o sistema usará o padrão do computador correspondente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-171">If a user has not set a per-user default, the system uses the corresponding computer default.</span></span> <span data-ttu-id="dccfc-172">As novas contas de usuário em um computador inicialmente herdam os padrões do computador.</span><span class="sxs-lookup"><span data-stu-id="dccfc-172">New user accounts on a computer initially inherit the computer defaults.</span></span> <span data-ttu-id="dccfc-173">Na primeira vez que um usuário executa um aplicativo, o aplicativo deve solicitar que o usuário atribua seus padrões por usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-173">The first time a user runs an application, the application should prompt the user to assign their per-user defaults.</span></span> <span data-ttu-id="dccfc-174">Consulte [execução e padrões da primeira aplicação](#application-first-run-and-defaults).</span><span class="sxs-lookup"><span data-stu-id="dccfc-174">See [Application First Run and Defaults](#application-first-run-and-defaults).</span></span>
-   <span data-ttu-id="dccfc-175">**A partir do Windows 8**: todos os padrões são por usuário e qualquer configuração padrão por computador é ignorada.</span><span class="sxs-lookup"><span data-stu-id="dccfc-175">**As of Windows 8**: All defaults are per-user and any per-computer default setting is ignored.</span></span> <span data-ttu-id="dccfc-176">Os aplicativos não podem mais definir opções padrão, para que não possam orientar o usuário por meio de sua atribuição desses padrões.</span><span class="sxs-lookup"><span data-stu-id="dccfc-176">Applications can no longer set default choices, so they cannot walk the user through their assigning of those defaults.</span></span>

<span data-ttu-id="dccfc-177">Quando um aplicativo anterior ao Windows 8 implementa **definido como padrão** no SPAD, essas diretrizes devem ser seguidas:</span><span class="sxs-lookup"><span data-stu-id="dccfc-177">When a pre-Windows 8 application implements **Set as Default** in SPAD, these guidelines should be followed:</span></span>

-   <span data-ttu-id="dccfc-178">Os aplicativos devem reivindicar apenas os padrões no nível do computador por meio de SPAD.</span><span class="sxs-lookup"><span data-stu-id="dccfc-178">Applications should claim only computer-level defaults through SPAD.</span></span>
-   <span data-ttu-id="dccfc-179">Os aplicativos *não* devem reivindicar padrões por usuário por meio de SPAD.</span><span class="sxs-lookup"><span data-stu-id="dccfc-179">Applications should *not* claim per-user defaults through SPAD.</span></span>

<span data-ttu-id="dccfc-180">Quando um aplicativo do Windows 8 implementa **definido como padrão** no SPAD, ele deve registrar seus tipos de arquivo e protocolos em [programas padrão](default-programs.md), usando o mesmo nome de aplicativo usado em SPAD.</span><span class="sxs-lookup"><span data-stu-id="dccfc-180">When a Windows 8 application implements **Set as Default** in SPAD, they must register their file types and protocols in [Default Programs](default-programs.md), using the same application name used in SPAD.</span></span> <span data-ttu-id="dccfc-181">Isso permite que uma alteração no SPAD reflita como uma alteração na entrada de programas padrão correspondente para o usuário atual.</span><span class="sxs-lookup"><span data-stu-id="dccfc-181">This allows a change in SPAD to reflect as a change in the corresponding Default Programs entry for the current user.</span></span>

### <a name="hide-access-in-spad"></a><span data-ttu-id="dccfc-182">Ocultar o acesso no SPAD</span><span class="sxs-lookup"><span data-stu-id="dccfc-182">Hide Access in SPAD</span></span>

<span data-ttu-id="dccfc-183">A opção ocultar acesso para cada padrão possível no SPAD é acessada de uma das duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="dccfc-183">The hide access option for each possible default in SPAD is accessed in one of two ways:</span></span>

-   <span data-ttu-id="dccfc-184">Escolha a categoria de padrões **que não são da Microsoft** , que remove o acesso a todos os padrões da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="dccfc-184">Choose the **Non-Microsoft** category of defaults, which removes access to all Microsoft defaults.</span></span>
-   <span data-ttu-id="dccfc-185">Escolha a categoria **personalizado** e desmarque a caixa de seleção **habilitar o acesso a este programa** .</span><span class="sxs-lookup"><span data-stu-id="dccfc-185">Choose the **Custom** category and clear the **Enable access to this program** check box.</span></span>

<span data-ttu-id="dccfc-186">Anteriormente, executar qualquer uma dessas ações removeu todos os pontos de entrada para os aplicativos apropriados no sistema.</span><span class="sxs-lookup"><span data-stu-id="dccfc-186">Previously, taking either of those actions removed all entry points to the appropriate applications on the system.</span></span> <span data-ttu-id="dccfc-187">Diretrizes específicas para essa situação dizem como remover atalhos e ícones dos seguintes locais:</span><span class="sxs-lookup"><span data-stu-id="dccfc-187">Specific guidelines for this situation say to remove shortcuts and icons from the following locations:</span></span>

-   <span data-ttu-id="dccfc-188">Área de trabalho</span><span class="sxs-lookup"><span data-stu-id="dccfc-188">Desktop</span></span>
-   <span data-ttu-id="dccfc-189">Menu Iniciar</span><span class="sxs-lookup"><span data-stu-id="dccfc-189">Start menu</span></span>
-   <span data-ttu-id="dccfc-190">Barra de início rápido (somente Windows Vista e anterior)</span><span class="sxs-lookup"><span data-stu-id="dccfc-190">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="dccfc-191">Área de notificação</span><span class="sxs-lookup"><span data-stu-id="dccfc-191">Notification area</span></span>
-   <span data-ttu-id="dccfc-192">Menus de atalho</span><span class="sxs-lookup"><span data-stu-id="dccfc-192">Shortcut menus</span></span>
-   <span data-ttu-id="dccfc-193">Faixa de tarefas da pasta</span><span class="sxs-lookup"><span data-stu-id="dccfc-193">Folder task band</span></span>

<span data-ttu-id="dccfc-194">Os fornecedores são incentivados a implementar essas diretrizes na função de retorno de chamada ocultar acesso do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-194">Vendors are encouraged to implement these guidelines in the application's Hide Access callback function.</span></span>

### <a name="alternate-hide-access-method-in-spad"></a><span data-ttu-id="dccfc-195">Alternar método de acesso de ocultar no SPAD</span><span class="sxs-lookup"><span data-stu-id="dccfc-195">Alternate Hide Access Method in SPAD</span></span>

<span data-ttu-id="dccfc-196">Para alguns aplicativos herdados, uma implementação completa do acesso de ocultar pode não ser prática.</span><span class="sxs-lookup"><span data-stu-id="dccfc-196">For some legacy applications, a full implementation of Hide Access may not be practical.</span></span> <span data-ttu-id="dccfc-197">Um método alternativo que alcança o mesmo efeito, mas não é facilmente reversível pelo usuário, é desinstalar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-197">An alternate method that achieves the same effect, but is not easily reversible by the user, is to uninstall the application.</span></span> <span data-ttu-id="dccfc-198">O exemplo a seguir mostra o comportamento de amostra e código para implementar isso.</span><span class="sxs-lookup"><span data-stu-id="dccfc-198">The following shows sample behavior and example code to implement this.</span></span>

<span data-ttu-id="dccfc-199">A experiência do usuário recomendada para essa alternativa é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="dccfc-199">The recommended user experience for this alternative is as follows:</span></span>

-   <span data-ttu-id="dccfc-200">Quando o usuário limpa a caixa **habilitar o acesso a este programa** no SPAD, a interface do usuário a seguir é apresentada.</span><span class="sxs-lookup"><span data-stu-id="dccfc-200">When the user clears the **Enable access to this program** box in SPAD, the following UI is presented.</span></span>

    ![caixa de diálogo vista sobre como ocultar o acesso ao programa](images/hideaccessvista.png)

-   <span data-ttu-id="dccfc-202">Quando o usuário clica em **OK**, o item **programas e recursos** no painel de controle é exibido para que o usuário possa desinstalar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-202">When the user clicks **OK**, the **Programs and Features** item in Control Panel is displayed so that the user can uninstall the application.</span></span>
-   <span data-ttu-id="dccfc-203">Os usuários do Windows XP devem ser apresentados com a caixa de diálogo a seguir.</span><span class="sxs-lookup"><span data-stu-id="dccfc-203">Windows XP users should be presented with the following dialog box.</span></span>

    ![caixa de diálogo do Windows XP sobre como ocultar o acesso ao programa](images/hideaccessxp.png)

-   <span data-ttu-id="dccfc-205">Quando o usuário do Windows XP clica em **OK**, o item **Adicionar ou remover programas** no painel de controle é exibido para que o usuário possa desinstalar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-205">When the Windows XP user clicks **OK**, the **Add or Remove Programs** item in Control Panel is displayed so that the user can uninstall the application.</span></span>

<span data-ttu-id="dccfc-206">O código a seguir fornece uma implementação reutilizável para o recurso ocultar acesso conforme descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-206">The following code provides a reusable implementation for the Hide Access feature as outlined previously.</span></span> <span data-ttu-id="dccfc-207">Ele pode ser usado no Windows XP, no Windows Vista e no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="dccfc-207">It can be used on Windows XP, Windows Vista, and Windows 7.</span></span>


```
#include <windows.h>
#include <shlwapi.h>
#include <strsafe.h>

PCWSTR c_pszMessage1 = L"To hide access to this program, you need to uninstall it by ";
PCWSTR c_pszMessage2 = L"using\n%s in Control Panel.\n\nWould you like to start %s?";
PCWSTR c_pszApplicationName  = L"Sample App";

int _tmain(int argc, WCHAR* argv[])
{
    OSVERSIONINFO version;
    version.dwOSVersionInfoSize = sizeof(version);

    if (GetVersionEx(&version))
    {
        PCWSTR pszCPLName = NULL;

        if (version.dwMajorVersion >= 6)
        {
            // Windows Vista and later
            pszCPLName = L"Programs and Features";
        }
        else if (version.dwMajorVersion == 5 &&
                 version.dwMinorVersion == 1)
        {
            // XP
            pszCPLName = L"Add/Remove Programs";
        }

        if (pszCPLName != NULL)
        {
            WCHAR szMessage[256], szScratch[256];
            if (SUCCEEDED(StringCchPrintf(szScratch, 
                                          ARRAYSIZE(szScratch), 
                                          c_pszMessage2, 
                                          pszCPLName, 
                                          pszCPLName)))
            {
                if (SUCCEEDED(StringCchCopy(szMessage, 
                                            ARRAYSIZE(szMessage), 
                                            c_pszMessage1)))
                {
                    if (SUCCEEDED(StringCchCat(szMessage, 
                                               ARRAYSIZE(szMessage), 
                                               szScratch)))
                    {
                        if (IDOK == MessageBox(NULL, 
                                               szMessage, 
                                               c_pszApplicationName, 
                                               MB_OKCANCEL))
                        {
                            ShellExecute(NULL, 
                                         NULL, 
                                         L"appwiz.cpl", 
                                         NULL, 
                                         NULL, 
                                         SW_SHOWNORMAL);
                        }
                    }
                }
            }
        }
    }
    return 0;
}
```



## <a name="registering-for-application-entry-points"></a><span data-ttu-id="dccfc-208">Registrando para pontos de entrada de aplicativo</span><span class="sxs-lookup"><span data-stu-id="dccfc-208">Registering for Application Entry Points</span></span>

<span data-ttu-id="dccfc-209">Um aplicativo pode ter muitos pontos de entrada no sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="dccfc-209">An application can have many entry points within the operating system.</span></span> <span data-ttu-id="dccfc-210">Estes são os locais recomendados para pontos de entrada:</span><span class="sxs-lookup"><span data-stu-id="dccfc-210">The following are recommended locations for entry points:</span></span>

-   <span data-ttu-id="dccfc-211">Área de trabalho</span><span class="sxs-lookup"><span data-stu-id="dccfc-211">Desktop</span></span>
-   <span data-ttu-id="dccfc-212">Menu Iniciar</span><span class="sxs-lookup"><span data-stu-id="dccfc-212">Start menu</span></span>
-   <span data-ttu-id="dccfc-213">Barra de início rápido (somente Windows Vista e anterior)</span><span class="sxs-lookup"><span data-stu-id="dccfc-213">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="dccfc-214">Área de notificação</span><span class="sxs-lookup"><span data-stu-id="dccfc-214">Notification area</span></span>
-   <span data-ttu-id="dccfc-215">Menus de atalho</span><span class="sxs-lookup"><span data-stu-id="dccfc-215">Shortcut menus</span></span>
-   <span data-ttu-id="dccfc-216">Faixa de tarefas da pasta</span><span class="sxs-lookup"><span data-stu-id="dccfc-216">Folder task band</span></span>

<span data-ttu-id="dccfc-217">Esta seção enfoca estas áreas específicas:</span><span class="sxs-lookup"><span data-stu-id="dccfc-217">This section focuses on these specific areas:</span></span>

-   [<span data-ttu-id="dccfc-218">Abrir com</span><span class="sxs-lookup"><span data-stu-id="dccfc-218">Open With</span></span>](#open-with)
-   [<span data-ttu-id="dccfc-219">Menu iniciar e barra de início rápido</span><span class="sxs-lookup"><span data-stu-id="dccfc-219">Start Menu and Quick Launch Bar</span></span>](#start-menu-and-quick-launch-bar)

### <a name="open-with"></a><span data-ttu-id="dccfc-220">Abrir com</span><span class="sxs-lookup"><span data-stu-id="dccfc-220">Open With</span></span>

<span data-ttu-id="dccfc-221">O menu de atalho **abrir com** permite que o usuário selecione um aplicativo que possa manipular um tipo de arquivo específico.</span><span class="sxs-lookup"><span data-stu-id="dccfc-221">The **Open With** shortcut menu enables the user to select an application that can handle a specific file type.</span></span> <span data-ttu-id="dccfc-222">Embora **Open with** possa ser usado para abrir um arquivo com um aplicativo uma vez, ele também pode ser usado para definir o padrão para essa extensão de nome de arquivo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-222">While **Open With** can be used to open a file with an application one time, it can also be used to set the default for that file name extension.</span></span> <span data-ttu-id="dccfc-223">Portanto, um aplicativo sempre deve se registrar para **abrir com** para que os usuários sejam apresentados com esse aplicativo como uma opção.</span><span class="sxs-lookup"><span data-stu-id="dccfc-223">Therefore, an application should always register for **Open With** so that users are presented with that application as a choice.</span></span> <span data-ttu-id="dccfc-224">Os aplicativos podem registrar os tipos de arquivo e os protocolos para **abrir com**.</span><span class="sxs-lookup"><span data-stu-id="dccfc-224">Applications can register both file types and protocols for **Open With**.</span></span> <span data-ttu-id="dccfc-225">Os aplicativos que registram protocolos na estrutura de programas padrão são adicionados automaticamente às opções **abrir com** para protocolos.</span><span class="sxs-lookup"><span data-stu-id="dccfc-225">Applications that register protocols in the Default Programs framework are automatically added to the **Open With** options for protocols.</span></span>

<span data-ttu-id="dccfc-226">Para obter informações sobre o registro para **Open with**, consulte [Introduction to file Associations](fa-intro.md).</span><span class="sxs-lookup"><span data-stu-id="dccfc-226">For information on registering for **Open With**, see [Introduction to File Associations](fa-intro.md).</span></span>

### <a name="start-menu-and-quick-launch-bar"></a><span data-ttu-id="dccfc-227">Menu iniciar e barra de início rápido</span><span class="sxs-lookup"><span data-stu-id="dccfc-227">Start Menu and Quick Launch Bar</span></span>

<span data-ttu-id="dccfc-228">Para se tornar mais detectável para o usuário, os aplicativos podem adicionar atalhos a vários locais no Windows.</span><span class="sxs-lookup"><span data-stu-id="dccfc-228">To become more discoverable to the user, applications can add shortcuts to various locations in Windows.</span></span> <span data-ttu-id="dccfc-229">O local mais comum para adicionar um atalho é o menu **Iniciar** .</span><span class="sxs-lookup"><span data-stu-id="dccfc-229">The most common place to add a shortcut is the **Start** menu.</span></span> <span data-ttu-id="dccfc-230">No Windows Vista e posterior, um aplicativo cria um atalho na pasta oculta% ProgramData% \\ do \\ \\ menu Iniciar do Microsoft Windows \\ para aparecer na lista de programas do menu **Iniciar** para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="dccfc-230">In Windows Vista and later, an application creates a shortcut in the hidden folder %ProgramData%\\Microsoft\\Windows\\Start Menu\\Programs to appear in the **Start** menu's list of programs for all users.</span></span> <span data-ttu-id="dccfc-231">Normalmente, um aplicativo adiciona uma subpasta que contém o atalho.</span><span class="sxs-lookup"><span data-stu-id="dccfc-231">Commonly, an application adds a subfolder that contains the shortcut.</span></span>

<span data-ttu-id="dccfc-232">Para programas de navegador e email, o menu **Iniciar** do Windows Vista também apresenta dois links dedicados fora da lista de programas, intitulada na **Internet** e no **email**.</span><span class="sxs-lookup"><span data-stu-id="dccfc-232">For browser and email programs, the Windows Vista **Start** menu also presents two dedicated links outside of the program list, canonically titled **Internet** and **E-mail**.</span></span> <span data-ttu-id="dccfc-233">Depois que um aplicativo é registrado para essas categorias, a estrutura de programas padrão pode gerenciar o que é iniciado por meio desses links.</span><span class="sxs-lookup"><span data-stu-id="dccfc-233">After an application registers for those categories, the Default Programs framework can manage what is launched through those links.</span></span>

> [!Note]  
> <span data-ttu-id="dccfc-234">Os links do menu **Iniciar** da **Internet** e do **email** dedicado não estão mais presentes no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="dccfc-234">The **Internet** and **E-mail** dedicated **Start** menu links are no longer present as of Windows 7.</span></span>

 

<span data-ttu-id="dccfc-235">Para aumentar ainda mais a capacidade de descoberta, os aplicativos também podem adicionar atalhos à área de trabalho e à barra de início rápido.</span><span class="sxs-lookup"><span data-stu-id="dccfc-235">To further increase discoverability, applications can also add shortcuts to the desktop and the Quick Launch bar.</span></span> <span data-ttu-id="dccfc-236">Os aplicativos devem pedir permissão ao usuário (geralmente durante a instalação ou na primeira execução) antes de adicionar um ícone ao menu **Iniciar** , à área de trabalho ou à barra de início rápido.</span><span class="sxs-lookup"><span data-stu-id="dccfc-236">Applications should ask the user for permission (usually during installation or on first run) before adding an icon to the **Start** menu, desktop, or Quick Launch bar.</span></span>

> [!Note]  
> <span data-ttu-id="dccfc-237">A barra de início rápido não está mais disponível a partir do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="dccfc-237">The Quick Launch bar is no longer available as of Windows 7.</span></span> <span data-ttu-id="dccfc-238">A alternativa do Windows 7 é fazer com que o aplicativo seja fixado na barra de tarefas, mas a fixação não pode ser realizada programaticamente, pois é estritamente uma opção de usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-238">The Windows 7 alternative is to have the application pinned to the Taskbar, but pinning cannot be done programmatically as it is strictly a user choice.</span></span>

 

<span data-ttu-id="dccfc-239">Para saber mais, consulte esses tópicos:</span><span class="sxs-lookup"><span data-stu-id="dccfc-239">For more information, see these topics:</span></span>

-   [<span data-ttu-id="dccfc-240">Como registrar um navegador da Internet ou cliente de email com o menu Iniciar do Windows</span><span class="sxs-lookup"><span data-stu-id="dccfc-240">How to Register an Internet Browser or Email Client With the Windows Start Menu</span></span>](start-menu-reg.md)
-   [<span data-ttu-id="dccfc-241">Registrando programas com tipos de cliente</span><span class="sxs-lookup"><span data-stu-id="dccfc-241">Registering Programs with Client Types</span></span>](reg-middleware-apps.md)

## <a name="application-installation-and-defaults"></a><span data-ttu-id="dccfc-242">Instalação e padrões do aplicativo</span><span class="sxs-lookup"><span data-stu-id="dccfc-242">Application Installation and Defaults</span></span>

<span data-ttu-id="dccfc-243">Os procedimentos de instalação do aplicativo não foram alterados fundamentalmente desde o Windows XP, com exceção de uma nova diretriz para sistemas que executam versões do Windows anteriores ao Windows 8: assumem padrões por computador no momento da instalação, mas não definem padrões por usuário até que o usuário execute o aplicativo pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="dccfc-243">Application installation procedures have not fundamentally changed since Windows XP, with the exception of a new guideline for systems running versions of Windows older than Windows 8: take per-computer defaults at installation time but do not set any per-user defaults until that user first runs the application.</span></span> <span data-ttu-id="dccfc-244">(Consulte [execução e padrões do aplicativo pela primeira vez](#application-first-run-and-defaults).) Os aplicativos não devem definir padrões por usuário durante a instalação porque há situações em que a pessoa que está instalando o aplicativo não é o usuário pretendido.</span><span class="sxs-lookup"><span data-stu-id="dccfc-244">(See [Application First Run and Defaults](#application-first-run-and-defaults).) Applications should not set per-user defaults during installation because there are situations in which the person installing the application is not the intended user.</span></span> <span data-ttu-id="dccfc-245">A partir do Windows 8, não há suporte para padrões por computador e os aplicativos não podem alterar as configurações padrão por usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-245">As of Windows 8, per-computer defaults are not supported and applications cannot change per-user default settings.</span></span>

<span data-ttu-id="dccfc-246">Durante a instalação, um aplicativo deve copiar seus binários para o disco rígido e gravar seus ProgIDs no registro.</span><span class="sxs-lookup"><span data-stu-id="dccfc-246">During installation, an application should copy its binaries to the hard disk and write its ProgIDs to the registry.</span></span> <span data-ttu-id="dccfc-247">O aplicativo também deve se registrar para programas padrão e **abrir com** no momento para cada associação de arquivo que for um candidato a ser manipulado.</span><span class="sxs-lookup"><span data-stu-id="dccfc-247">The application should also register for Default Programs and **Open With** at this time for every file association it is a candidate to handle.</span></span> <span data-ttu-id="dccfc-248">O aplicativo pode usar a subchave **OpenWithProgIDs** para se registrar com **Open with**.</span><span class="sxs-lookup"><span data-stu-id="dccfc-248">The application can use the **OpenWithProgIds** subkey to register with **Open With**.</span></span>

<span data-ttu-id="dccfc-249">Para saber mais, consulte esses tópicos:</span><span class="sxs-lookup"><span data-stu-id="dccfc-249">For more information, see these topics:</span></span>

-   [<span data-ttu-id="dccfc-250">Programas padrão</span><span class="sxs-lookup"><span data-stu-id="dccfc-250">Default Programs</span></span>](default-programs.md)
-   [<span data-ttu-id="dccfc-251">Introdução às associações de arquivo</span><span class="sxs-lookup"><span data-stu-id="dccfc-251">Introduction to File Associations</span></span>](fa-intro.md)

## <a name="application-upgrades-and-defaults"></a><span data-ttu-id="dccfc-252">Atualizações e padrões de aplicativos</span><span class="sxs-lookup"><span data-stu-id="dccfc-252">Application Upgrades and Defaults</span></span>

<span data-ttu-id="dccfc-253">Muitos aplicativos têm a capacidade de atualizar a si mesmos ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-253">Many applications have the ability to upgrade themselves over time.</span></span> <span data-ttu-id="dccfc-254">Esse procedimento de atualização não deve alterar o estado de padrões por usuário, pois essa alteração seria inesperada para o usuário.</span><span class="sxs-lookup"><span data-stu-id="dccfc-254">This upgrade procedure should not change the state of per-user defaults because that change would be unexpected to the user.</span></span> <span data-ttu-id="dccfc-255">No entanto, é aceitável que um aplicativo Verifique as associações de arquivo no nível do computador e repare-as se elas estiverem corrompidas.</span><span class="sxs-lookup"><span data-stu-id="dccfc-255">However, it is acceptable for an application to check computer-level file associations and repair them if they have been corrupted.</span></span>

## <a name="application-first-run-and-defaults"></a><span data-ttu-id="dccfc-256">Execução e padrões da primeira aplicação</span><span class="sxs-lookup"><span data-stu-id="dccfc-256">Application First Run and Defaults</span></span>

> [!Note]  
> <span data-ttu-id="dccfc-257">A partir do Windows 8, o sistema lida com esse procedimento em nome de todos os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="dccfc-257">As of Windows 8, the system handles this procedure on behalf of all applications.</span></span> <span data-ttu-id="dccfc-258">Os próprios aplicativos não podem mais consultar e alterar os padrões.</span><span class="sxs-lookup"><span data-stu-id="dccfc-258">Applications themselves can no longer query and change defaults.</span></span> <span data-ttu-id="dccfc-259">Somente o usuário pode fazer isso.</span><span class="sxs-lookup"><span data-stu-id="dccfc-259">Only the user can do that.</span></span> <span data-ttu-id="dccfc-260">Portanto, os aplicativos não devem tentar consultar o padrão atual ou alterar o padrão por meio de qualquer mecanismo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-260">Therefore, applications should not attempt to query for the current default or change that default through any mechanism.</span></span> <span data-ttu-id="dccfc-261">No entanto, os aplicativos podem fornecer um ponto de entrada para programas padrão no painel de controle chamando o método [**LaunchAdvancedAssociationUI**](/windows/desktop/api/Shobjidl/nf-shobjidl-iapplicationassociationregistrationui-launchadvancedassociationui) da interface [**IApplicationAssociationRegistrationUI**](/windows/desktop/api/Shobjidl/nn-shobjidl-iapplicationassociationregistrationui) .</span><span class="sxs-lookup"><span data-stu-id="dccfc-261">However, applications can provide an entry point to Default Programs in the Control Panel by calling the [**LaunchAdvancedAssociationUI**](/windows/desktop/api/Shobjidl/nf-shobjidl-iapplicationassociationregistrationui-launchadvancedassociationui) method of the [**IApplicationAssociationRegistrationUI**](/windows/desktop/api/Shobjidl/nn-shobjidl-iapplicationassociationregistrationui) interface.</span></span>

 

<span data-ttu-id="dccfc-262">Com a introdução de padrões por usuário no Windows Vista, é importante que os aplicativos que contratam extensões de nome de arquivo populares forneçam uma experiência de usuário comum para reivindicar essas extensões.</span><span class="sxs-lookup"><span data-stu-id="dccfc-262">With the introduction of per-user defaults in Windows Vista, it is important that applications that contest for popular file name extensions all provide a common user experience to claim these extensions.</span></span> <span data-ttu-id="dccfc-263">Como esses padrões agora estão definidos no contexto do usuário, eles devem se apresentar como uma possibilidade padrão somente quando o usuário executa o programa após a instalação.</span><span class="sxs-lookup"><span data-stu-id="dccfc-263">Because these defaults are now set in the context of the user, they should present themselves as a default possibility only when the user runs the program after installation.</span></span>

<span data-ttu-id="dccfc-264">A diretriz para estabelecer padrões por usuário é: quando um aplicativo é executado pela primeira vez para um usuário específico, esse aplicativo deve solicitar as preferências do usuário para os padrões e as associações de arquivo para si mesmo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-264">The guideline for establishing per-user defaults is this: When an application is first run for a specific user, that application should request user preferences for defaults and file associations for itself.</span></span>

<span data-ttu-id="dccfc-265">A interface de usuário recomendada deve fornecer duas opções claras para o usuário:</span><span class="sxs-lookup"><span data-stu-id="dccfc-265">The recommended UI should provide two clear choices to the user:</span></span>

1.  <span data-ttu-id="dccfc-266">Aceite todos os padrões que o aplicativo gostaria de reivindicar.</span><span class="sxs-lookup"><span data-stu-id="dccfc-266">Accept all defaults that the application would like to claim.</span></span> <span data-ttu-id="dccfc-267">Essa opção também pode definir outras propriedades padrão do aplicativo, como privacidade ou configurações de atualização automática.</span><span class="sxs-lookup"><span data-stu-id="dccfc-267">This option might also set other default properties of the application such as privacy or automatic update settings.</span></span> <span data-ttu-id="dccfc-268">Essa opção permite que o aplicativo solicite todos os seus padrões registrados.</span><span class="sxs-lookup"><span data-stu-id="dccfc-268">This option allows the application to claim all of its registered defaults.</span></span>
2.  <span data-ttu-id="dccfc-269">Personalize aceitando ou não aceitando seleções padrão e configurações de programa individualmente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-269">Customize by accepting or not accepting default selections and program settings individually.</span></span> <span data-ttu-id="dccfc-270">Essa opção apresenta uma interface de usuário adicional que permite que o usuário faça escolhas granulares para suas opções padrão.</span><span class="sxs-lookup"><span data-stu-id="dccfc-270">This option presents further UI that enables the user to make granular choices for their default options.</span></span>

<span data-ttu-id="dccfc-271">Para obter mais informações, consulte [programas padrão](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="dccfc-271">For more information, see [Default Programs](default-programs.md).</span></span>

## <a name="verifying-defaults-and-asking-for-user-consent"></a><span data-ttu-id="dccfc-272">Verificando padrões e solicitando o consentimento do usuário</span><span class="sxs-lookup"><span data-stu-id="dccfc-272">Verifying Defaults and Asking for User Consent</span></span>

> [!Note]  
> <span data-ttu-id="dccfc-273">Não há suporte para isso a partir do Windows 8.</span><span class="sxs-lookup"><span data-stu-id="dccfc-273">This is not supported as of Windows 8.</span></span>

 

<span data-ttu-id="dccfc-274">Depois que um aplicativo é registrado com programas padrão no Windows Vista e posterior, determinadas APIs ficam disponíveis para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-274">After an application registers with Default Programs in Windows Vista and later, certain APIs become available to the application.</span></span> <span data-ttu-id="dccfc-275">Por exemplo, um aplicativo pode precisar verificar se ele é o programa padrão.</span><span class="sxs-lookup"><span data-stu-id="dccfc-275">For instance, an application might need to check whether it is the default program.</span></span> <span data-ttu-id="dccfc-276">A interface [**IApplicationAssociationRegistration**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iapplicationassociationregistration) fornece métodos para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="dccfc-276">The [**IApplicationAssociationRegistration**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iapplicationassociationregistration) interface provides methods to do this.</span></span>

<span data-ttu-id="dccfc-277">Qualquer aplicativo que queira declarar padrões deve primeiro perguntar ao usuário e nunca reivindicar os padrões sem permissão.</span><span class="sxs-lookup"><span data-stu-id="dccfc-277">Any application that wants to claim defaults must first ask the user and never claim defaults without permission.</span></span> <span data-ttu-id="dccfc-278">O usuário deve ser perguntado se deseja tornar o aplicativo o padrão ou deixar o padrão atual no local.</span><span class="sxs-lookup"><span data-stu-id="dccfc-278">The user should be asked whether they want to make the application the default or leave the current default in place.</span></span> <span data-ttu-id="dccfc-279">Também deve haver uma opção para não ser feita essa pergunta novamente depois que o usuário tiver feito sua escolha.</span><span class="sxs-lookup"><span data-stu-id="dccfc-279">There should also be an option not to be asked this question again after the user has made their choice.</span></span>

<span data-ttu-id="dccfc-280">Para obter mais informações, consulte [programas padrão](default-programs.md).</span><span class="sxs-lookup"><span data-stu-id="dccfc-280">For more information, see [Default Programs](default-programs.md).</span></span>

## <a name="application-compatibility-tips"></a><span data-ttu-id="dccfc-281">Dicas de compatibilidade de aplicativos</span><span class="sxs-lookup"><span data-stu-id="dccfc-281">Application Compatibility Tips</span></span>

<span data-ttu-id="dccfc-282">Esta seção fornece algumas dicas de compatibilidade de aplicativos relacionadas à experiência de programas padrão no Windows.</span><span class="sxs-lookup"><span data-stu-id="dccfc-282">This section provides some application compatibility tips related to the Default Programs experience in Windows.</span></span>

### <a name="avoid-triggering-per-user-virtualization"></a><span data-ttu-id="dccfc-283">Evite disparar Per-User virtualização</span><span class="sxs-lookup"><span data-stu-id="dccfc-283">Avoid Triggering Per-User Virtualization</span></span>

<span data-ttu-id="dccfc-284">Com o ambiente de controle de conta de usuário (UAC), os aplicativos sempre devem ser executados com direitos de usuário padrão para a melhor experiência do cliente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-284">With the user account control (UAC) environment, applications should always run with only standard user rights for the best customer experience.</span></span> <span data-ttu-id="dccfc-285">Por motivos de segurança, os aplicativos com um nível de privilégio de usuário padrão são impedidos de gravar em determinadas partes do registro e em determinados arquivos do sistema.</span><span class="sxs-lookup"><span data-stu-id="dccfc-285">For security reasons, applications with a standard user privilege level are blocked from writing to certain parts of the registry and to certain system files.</span></span> <span data-ttu-id="dccfc-286">O Windows Vista e versões posteriores do Windows fornecem uma camada de compatibilidade de aplicativos temporária (AppCompat) para ajudar os aplicativos a fazer a transição.</span><span class="sxs-lookup"><span data-stu-id="dccfc-286">Windows Vista and later versions of Windows provide a temporary application compatibility (AppCompat) layer to help applications make the transition.</span></span> <span data-ttu-id="dccfc-287">As tentativas bloqueadas de gravar no registro ou em arquivos do sistema são "virtualizadas" para que o aplicativo continue a ser executado, mas as áreas confidenciais do sistema não são alteradas.</span><span class="sxs-lookup"><span data-stu-id="dccfc-287">Blocked attempts to write to the registry or to system files are "virtualized" so that the application continues to run, but the sensitive areas of the system are not altered.</span></span> <span data-ttu-id="dccfc-288">No entanto, os aplicativos não devem contar com a tecnologia AppCompat como uma solução de longo prazo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-288">However, applications should not rely on the AppCompat technology as a long-term solution.</span></span> <span data-ttu-id="dccfc-289">Em vez disso, os aplicativos devem usar as várias ferramentas disponíveis para verificar se podem ser executados com êxito em direitos de usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="dccfc-289">Instead, applications should use the many available tools to verify that they can run successfully under standard user rights.</span></span> <span data-ttu-id="dccfc-290">Uma reprogramação do aplicativo pode ser necessária para fazer isso, mas deve ser feita no interesse da compatibilidade de longo prazo.</span><span class="sxs-lookup"><span data-stu-id="dccfc-290">Some reprogramming of the application might be required to accomplish this, but it should be done in the interest of long-term compatibility.</span></span>

### <a name="avoid-appcompat-warnings-or-blocks-from-the-program-compatibility-assistant"></a><span data-ttu-id="dccfc-291">Evitar avisos ou blocos de AppCompat do assistente de compatibilidade de programa</span><span class="sxs-lookup"><span data-stu-id="dccfc-291">Avoid AppCompat Warnings or Blocks from the Program Compatibility Assistant</span></span>

<span data-ttu-id="dccfc-292">O PCA (Assistente de compatibilidade de programa) é fornecido no Windows Vista e posterior.</span><span class="sxs-lookup"><span data-stu-id="dccfc-292">The Program Compatibility Assistant (PCA) is provided in Windows Vista and later.</span></span> <span data-ttu-id="dccfc-293">Seu objetivo é fornecer um método automatizado para que os programas mais antigos com problemas de compatibilidade funcionem melhor.</span><span class="sxs-lookup"><span data-stu-id="dccfc-293">Its purpose is to provide an automated method to make older programs with compatibility issues work better.</span></span> <span data-ttu-id="dccfc-294">O PCA monitora os programas em busca de problemas conhecidos.</span><span class="sxs-lookup"><span data-stu-id="dccfc-294">The PCA monitors programs for known issues.</span></span> <span data-ttu-id="dccfc-295">Se um problema for detectado, ele notificará o usuário sobre o problema e oferecerá a aplicação de soluções efetivas antes que o usuário execute o programa novamente.</span><span class="sxs-lookup"><span data-stu-id="dccfc-295">If an issue is detected, it notifies the user of the problem and offers to apply effective solutions before the user runs the program again.</span></span> <span data-ttu-id="dccfc-296">Para evitar a exibição desses avisos ou blocos, os ISVs devem usar as várias ferramentas disponíveis para garantir que seus aplicativos sejam compatíveis com o Windows Vista, o Windows 7 e versões posteriores.</span><span class="sxs-lookup"><span data-stu-id="dccfc-296">To avoid seeing these warnings or blocks, ISVs should use the many available tools to ensure that their applications are compatible with Windows Vista, Windows 7, and later.</span></span>

### <a name="support-for-previous-windows-operating-system-versions"></a><span data-ttu-id="dccfc-297">Suporte para versões anteriores do sistema operacional Windows</span><span class="sxs-lookup"><span data-stu-id="dccfc-297">Support for Previous Windows Operating System Versions</span></span>

<span data-ttu-id="dccfc-298">A infraestrutura de programas padrão não está disponível em nenhum sistema operacional Windows antes do Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="dccfc-298">The Default Programs infrastructure is not available on any Windows operating system before Windows Vista.</span></span> <span data-ttu-id="dccfc-299">Portanto, quando os aplicativos se movem para a nova infraestrutura de programas padrão, eles devem reter o código de padrão de aplicativo mais antigo para manter a compatibilidade com versões mais antigas do Windows.</span><span class="sxs-lookup"><span data-stu-id="dccfc-299">Therefore, when applications move to the new Default Programs infrastructure, they should retain their older application-defaults code to maintain compatibility with older versions of Windows.</span></span> <span data-ttu-id="dccfc-300">Um aplicativo deve executar uma verificação de versão do sistema operacional como parte de sua instalação para determinar qual o código de padrões de aplicativo a ser executado.</span><span class="sxs-lookup"><span data-stu-id="dccfc-300">An application should run an operating system version check as part of its installation to determine which application-defaults code to run.</span></span>

<span data-ttu-id="dccfc-301">Para dar suporte a uma atualização do Windows XP para o Windows Vista ou posterior, os aplicativos devem adicionar todas as entradas de Registro necessárias para programas padrão mesmo quando eles estão sendo instalados em um computador que executa o Windows XP.</span><span class="sxs-lookup"><span data-stu-id="dccfc-301">To support an upgrade from Windows XP to Windows Vista or later, applications should add all the registry entries required for Default Programs even when they are installing on a computer running Windows XP.</span></span> <span data-ttu-id="dccfc-302">O registro não terá nenhum efeito em um computador que esteja executando o Windows XP, mas se o computador for atualizado posteriormente, o aplicativo já estará registrado e poderá aproveitar a estrutura.</span><span class="sxs-lookup"><span data-stu-id="dccfc-302">The registration will have no effect on a computer running Windows XP, but if the computer is later upgraded, the application will be already registered and able to take advantage of the framework.</span></span>

<span data-ttu-id="dccfc-303">Para obter mais informações, consulte [**OSVersionInfo**](/windows/win32/api/winnt/ns-winnt-osversioninfoa).</span><span class="sxs-lookup"><span data-stu-id="dccfc-303">For more information, see [**OSVERSIONINFO**](/windows/win32/api/winnt/ns-winnt-osversioninfoa).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="dccfc-304">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="dccfc-304">Additional Resources</span></span>

-   [<span data-ttu-id="dccfc-305">Introdução às associações de arquivo</span><span class="sxs-lookup"><span data-stu-id="dccfc-305">Introduction to File Associations</span></span>](fa-intro.md)
-   [<span data-ttu-id="dccfc-306">Como registrar um navegador da Internet ou cliente de email com o menu Iniciar do Windows</span><span class="sxs-lookup"><span data-stu-id="dccfc-306">How to Register an Internet Browser or Email Client With the Windows Start Menu</span></span>](start-menu-reg.md)
-   <span data-ttu-id="dccfc-307">[Registrando um aplicativo em um esquema de URI](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="dccfc-307">[Registering an Application to a URI Scheme](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85))</span></span>

## <a name="related-topics"></a><span data-ttu-id="dccfc-308">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="dccfc-308">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="dccfc-309">Práticas recomendadas para associações de arquivo</span><span class="sxs-lookup"><span data-stu-id="dccfc-309">Best Practices for File Associations</span></span>](fa-best-practices.md)
</dt> <dt>

[<span data-ttu-id="dccfc-310">Cenário de exemplo de associação de arquivo</span><span class="sxs-lookup"><span data-stu-id="dccfc-310">File Association Sample Scenario</span></span>](fa-sample-scenarios.md)
</dt> <dt>

[<span data-ttu-id="dccfc-311">Programas padrão</span><span class="sxs-lookup"><span data-stu-id="dccfc-311">Default Programs</span></span>](default-programs.md)
</dt> <dt>

[<span data-ttu-id="dccfc-312">Trabalhando com definir acesso a programas e padrões do computador (SPAD)</span><span class="sxs-lookup"><span data-stu-id="dccfc-312">Working with Set Program Access and Computer Defaults (SPAD)</span></span>](cpl-setprogramaccess.md)
</dt> </dl>

 

 
