---
description: Este tópico descreve algumas das coisas a considerar ao usar bibliotecas em seu programa.
ms.assetid: 40ACC8F6-1416-4390-A8D7-8F924DC2C2FE
title: Usando bibliotecas em seu programa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2812a66b148d9bd16fc3951efab64a4d37afaaff
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104297720"
---
# <a name="using-libraries-in-your-program"></a><span data-ttu-id="92619-103">Usando bibliotecas em seu programa</span><span class="sxs-lookup"><span data-stu-id="92619-103">Using Libraries in your Program</span></span>

<span data-ttu-id="92619-104">Este tópico descreve algumas das coisas a considerar ao usar bibliotecas em seu programa.</span><span class="sxs-lookup"><span data-stu-id="92619-104">This topic describes some of the things to consider when using libraries in your program.</span></span>

<span data-ttu-id="92619-105">Neste tópico:</span><span class="sxs-lookup"><span data-stu-id="92619-105">In this topic:</span></span>

-   [<span data-ttu-id="92619-106">Visão geral de programação de biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-106">Library programming overview</span></span>](#library-programming-overview)
-   [<span data-ttu-id="92619-107">Programação com bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-107">Programming with Libraries</span></span>](#programming-with-libraries)
    -   [<span data-ttu-id="92619-108">Movendo de pastas conhecidas para bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-108">Moving from Known Folders to Libraries</span></span>](#moving-from-known-folders-to-libraries)
    -   [<span data-ttu-id="92619-109">Grupo doméstico e bibliotecas compartilhadas</span><span class="sxs-lookup"><span data-stu-id="92619-109">HomeGroup and shared libraries</span></span>](#homegroup-and-shared-libraries)
-   [<span data-ttu-id="92619-110">Usando uma caixa de diálogo de arquivo comum com bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-110">Using a common file dialog box with libraries</span></span>](#using-a-common-file-dialog-box-with-libraries)
-   [<span data-ttu-id="92619-111">Habilitando a seleção de biblioteca na interface do usuário</span><span class="sxs-lookup"><span data-stu-id="92619-111">Enabling library selection from the user interface</span></span>](#enabling-library-selection-from-the-user-interface)
-   [<span data-ttu-id="92619-112">Acessando o conteúdo da biblioteca em um programa</span><span class="sxs-lookup"><span data-stu-id="92619-112">Accessing library content in a program</span></span>](#accessing-library-content-in-a-program)
    -   [<span data-ttu-id="92619-113">Acessando o conteúdo da biblioteca com a interface IShellLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-113">Accessing library content with the IShellLibrary interface</span></span>](#accessing-library-content-with-the-ishelllibrary-interface)
    -   [<span data-ttu-id="92619-114">Acessando o conteúdo da biblioteca com as APIs do Shell</span><span class="sxs-lookup"><span data-stu-id="92619-114">Accessing library content with the Shell APIs</span></span>](#accessing-library-content-with-the-shell-apis)
-   [<span data-ttu-id="92619-115">Salvando o conteúdo do usuário em uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-115">Saving user content in a library</span></span>](#saving-user-content-in-a-library)
-   [<span data-ttu-id="92619-116">Suporte a operações de arrastar e soltar em uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-116">Supporting drag-and-drop operations in a library</span></span>](#supporting-drag-and-drop-operations-in-a-library)
-   [<span data-ttu-id="92619-117">Mantendo a sincronização com uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-117">Keeping in sync with a library</span></span>](#keeping-in-sync-with-a-library)
    -   [<span data-ttu-id="92619-118">Atualização em Massa</span><span class="sxs-lookup"><span data-stu-id="92619-118">Bulk Update</span></span>](#bulk-update)
    -   [<span data-ttu-id="92619-119">Notificação da API do Shell</span><span class="sxs-lookup"><span data-stu-id="92619-119">Shell API Notification</span></span>](#shell-api-notification)
    -   [<span data-ttu-id="92619-120">Notificação da API do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="92619-120">File-system API Notification</span></span>](#file-system-api-notification)
-   [<span data-ttu-id="92619-121">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="92619-121">Related topics</span></span>](#related-topics)

## <a name="library-programming-overview"></a><span data-ttu-id="92619-122">Visão geral de programação de biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-122">Library programming overview</span></span>

<span data-ttu-id="92619-123">As bibliotecas permitem que os usuários organizem seu conteúdo baseado em arquivo de uma maneira que seja significativa para eles e não sejam limitados pela organização do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-123">Libraries enable users to organize their file-based content in a way that is meaningful to them and not limited by the organization of the file system.</span></span> <span data-ttu-id="92619-124">Quando o programa oferece suporte a bibliotecas, ele permite que o usuário encontre seu conteúdo de uma maneira que faça sentido para eles ao mesmo tempo em que apresenta uma interface do usuário consistente com a experiência do usuário do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-124">When your program supports libraries, it allows the user to find their content in a way that makes sense to them while presenting a user interface that is consistent with the Windows 7 user experience.</span></span> <span data-ttu-id="92619-125">As bibliotecas também facilitam o seu programa de localizar conteúdo baseado em arquivo armazenado em pastas diferentes ou em computadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="92619-125">Libraries also make it easier for your program to locate file-based content that is stored in different folders or on different machines.</span></span>

<span data-ttu-id="92619-126">Os tópicos nesta seção descrevem como você pode adicionar suporte à biblioteca para seu programa e aproveitar os novos recursos oferecidos pelas bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="92619-126">The topics in this section describe how you can add library support to your program and take advantage of the new capabilities that libraries offer.</span></span> <span data-ttu-id="92619-127">Por padrão, o Windows 7 fornece um pouco desse suporte.</span><span class="sxs-lookup"><span data-stu-id="92619-127">Windows 7 provides some of this support by default.</span></span> <span data-ttu-id="92619-128">Se o programa não modificar as caixas de diálogo de arquivo comuns que ele usa atualmente, ele poderá exigir muito pouca programação adicional para oferecer suporte a bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="92619-128">If your program does not modify the common file dialog boxes that it currently uses, it might require very little additional programming to support libraries.</span></span>

<span data-ttu-id="92619-129">Esta seção descreve alguns dos principais recursos que as bibliotecas fornecem e como dar suporte a elas em seu programa.</span><span class="sxs-lookup"><span data-stu-id="92619-129">This section describes some of the key features that libraries provide and how to support them in your program.</span></span> <span data-ttu-id="92619-130">Com essas informações, você pode decidir quais recursos fornecerão a melhor experiência de usuário do seu programa.</span><span class="sxs-lookup"><span data-stu-id="92619-130">With this information, you can decide which features will provide the best user experience from your program.</span></span> <span data-ttu-id="92619-131">Se o programa personalizar as caixas de diálogo de arquivo comum, as informações contidas nesta seção podem ajudá-lo a determinar como usar as caixas de diálogo do novo arquivo comum para usar bibliotecas e fornecer funcionalidade equivalente no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-131">If your program customizes the common file dialog boxes, the information in this section can help you determine how to use the new common file dialog boxes to use libraries and provide equivalent functionality in Windows 7.</span></span>

## <a name="programming-with-libraries"></a><span data-ttu-id="92619-132">Programação com bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-132">Programming with Libraries</span></span>

<span data-ttu-id="92619-133">O modelo de programação do shell do Windows descreve como um programa interage com objetos de programação do shell do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-133">The Windows Shell programming model describes how a program interacts with Windows Shell programming objects.</span></span> <span data-ttu-id="92619-134">Embora os objetos do sistema de arquivos, como arquivos e diretórios, sejam representados por objetos do shell do Windows, nem todos os objetos do Windows Shell são representados pelo sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-134">While file-system objects, such as files and directories, are represented by Windows Shell objects, not all Windows Shell objects are represented by the file-system.</span></span> <span data-ttu-id="92619-135">As bibliotecas, por exemplo, são objetos de shell do Windows que não têm um sistema de arquivos equivalente.</span><span class="sxs-lookup"><span data-stu-id="92619-135">Libraries, for example, are Windows Shell objects that do not have a file-system equivalent.</span></span> <span data-ttu-id="92619-136">O uso de objetos do shell do Windows em seu programa permite que seu programa acesse todos os objetos do Shell e não apenas os objetos do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-136">Using Windows Shell objects in your program enables your program to access all Shell objects and not just file-system objects.</span></span>

<span data-ttu-id="92619-137">Para obter melhores resultados, seu programa usaria a [**API da biblioteca do Shell**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) para interagir com bibliotecas e acessar seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="92619-137">For the best results, your program would use the [**Shell Library API**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) to interact with libraries and access their contents.</span></span> <span data-ttu-id="92619-138">Embora as bibliotecas contenham itens de sistema de arquivos, como pastas e arquivos, as bibliotecas não são itens do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-138">While libraries contain file-system items such as folders and files, libraries are not file-system items.</span></span> <span data-ttu-id="92619-139">Dessa forma, as APIs do sistema de arquivos não podem ser usadas para acessar os recursos da biblioteca ou o conteúdo da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-139">As such, file-system APIs cannot be used to access library features or library contents.</span></span>

<span data-ttu-id="92619-140">Se você tiver um programa existente que atualmente usa muitas APIs de sistema de arquivos, seu programa ainda poderá aproveitar os recursos de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-140">If you have an existing program that currently uses many file-system APIs, your program can still take advantage of library features.</span></span> <span data-ttu-id="92619-141">A [**API da biblioteca do Shell**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) pode fornecer referências de sistema de arquivos para os itens encontrados em uma biblioteca e essas referências de sistema de arquivos, como o nome do arquivo e o caminho, podem ser passadas para as APIs do sistema de arquivos existentes que estão no seu programa existente.</span><span class="sxs-lookup"><span data-stu-id="92619-141">The [**Shell Library API**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) can provide file-system references to the items that are found in a library and these file-system references, such as the file name and path, can be passed to the existing file-system APIs that are in your existing program.</span></span>

### <a name="moving-from-known-folders-to-libraries"></a><span data-ttu-id="92619-142">Movendo de pastas conhecidas para bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-142">Moving from Known Folders to Libraries</span></span>

<span data-ttu-id="92619-143">Antes do Windows 7, era comum usar uma pasta conhecida, como a pasta meus documentos, como a pasta padrão nas operações salvar arquivo ou abrir arquivo.</span><span class="sxs-lookup"><span data-stu-id="92619-143">Before Windows 7 it was common to use a known folder, such as the My Documents folder, as the default folder in file save or file open operations.</span></span> <span data-ttu-id="92619-144">No Windows 7, a biblioteca correspondente deve ser usada para que o usuário tenha a mesma experiência em seu programa como faria com outros programas do Windows 7, como o Windows Explorer.</span><span class="sxs-lookup"><span data-stu-id="92619-144">In Windows 7, the corresponding library should be used so the user will have the same experience in your program as they would with other Windows 7 programs, such as the Windows Explorer.</span></span>

<span data-ttu-id="92619-145">Se você estiver usando a API do shell do Windows no seu programa, adicionar suporte à biblioteca será simples.</span><span class="sxs-lookup"><span data-stu-id="92619-145">If you are currently using the Windows Shell API in your program, adding library support is straightforward.</span></span> <span data-ttu-id="92619-146">Por exemplo, se você chamar a função [**SHGetKnownFolderItem**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderitem) no momento para obter o local da pasta meus documentos, poderá substituir o valor [**KNOWNFOLDERID**](knownfolderid.md) da pasta meus documentos conhecidos pelo valor **KNOWNFOLDERID** da biblioteca correspondente.</span><span class="sxs-lookup"><span data-stu-id="92619-146">For example, if you currently call the [**SHGetKnownFolderItem**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderitem) function to get the location of the My Documents folder, you can replace the [**KNOWNFOLDERID**](knownfolderid.md) value of the My Documents known folder with the **KNOWNFOLDERID** value of the corresponding library.</span></span>

<span data-ttu-id="92619-147">A tabela a seguir mostra a relação entre os valores de [**KNOWNFOLDERID**](knownfolderid.md) de pastas conhecidas e o valor **KNOWNFOLDERID** da biblioteca correspondente no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-147">The following table shows the relationship between the [**KNOWNFOLDERID**](knownfolderid.md) values of known folders and the **KNOWNFOLDERID** value of the corresponding library in Windows 7.</span></span> 

| <span data-ttu-id="92619-148">Valores de KNOWNFOLDERID de pasta conhecidos</span><span class="sxs-lookup"><span data-stu-id="92619-148">Known Folder KNOWNFOLDERID values</span></span> | <span data-ttu-id="92619-149">Valores de KNOWNFOLDERID de biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-149">Library KNOWNFOLDERID values</span></span> |
|-----------------------------------|------------------------------|
| <span data-ttu-id="92619-150">Documentos de FOLDERid \_</span><span class="sxs-lookup"><span data-stu-id="92619-150">FOLDERID\_Documents</span></span>               | <span data-ttu-id="92619-151">PASTA de \_ DocumentsLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-151">FOLDERID\_DocumentsLibrary</span></span>   |
| <span data-ttu-id="92619-152">Imagens de FOLDERid \_</span><span class="sxs-lookup"><span data-stu-id="92619-152">FOLDERID\_Pictures</span></span>                | <span data-ttu-id="92619-153">PASTA de \_ PicturesLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-153">FOLDERID\_PicturesLibrary</span></span>    |
| <span data-ttu-id="92619-154">PASTA de \_ músicas</span><span class="sxs-lookup"><span data-stu-id="92619-154">FOLDERID\_Music</span></span>                   | <span data-ttu-id="92619-155">PASTA de \_ MusicLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-155">FOLDERID\_MusicLibrary</span></span>       |
| <span data-ttu-id="92619-156">PASTA de \_ RecordedTV</span><span class="sxs-lookup"><span data-stu-id="92619-156">FOLDERID\_RecordedTV</span></span>              | <span data-ttu-id="92619-157">PASTA de \_ RecordedTVLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-157">FOLDERID\_RecordedTVLibrary</span></span>  |



 

### <a name="homegroup-and-shared-libraries"></a><span data-ttu-id="92619-158">Grupo doméstico e bibliotecas compartilhadas</span><span class="sxs-lookup"><span data-stu-id="92619-158">HomeGroup and shared libraries</span></span>

<span data-ttu-id="92619-159">Adicionar suporte de biblioteca ao seu programa permitirá o suporte para bibliotecas compartilhadas em um grupo doméstico.</span><span class="sxs-lookup"><span data-stu-id="92619-159">Adding library support to your program will enable support for shared libraries in a HomeGroup.</span></span> <span data-ttu-id="92619-160">O grupo doméstico é identificado por seu valor de [**KNOWNFOLDERID**](knownfolderid.md) do [**\_ grupo de pastas**](knownfolderid.md).</span><span class="sxs-lookup"><span data-stu-id="92619-160">The HomeGroup is identified by its [**KNOWNFOLDERID**](knownfolderid.md) value of [**FOLDERID\_HomeGroup**](knownfolderid.md).</span></span> <span data-ttu-id="92619-161">Seu programa pode localizar identificar o local de salvamento padrão particular ou compartilhado do usuário, definindo o valor [**DEFAULTSAVEFOLDERTYPE**](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-defaultsavefoldertype) na chamada para o método [**IShellLibrary:: GetDefaultSaveFolder**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-ishelllibrary-getdefaultsavefolder) .</span><span class="sxs-lookup"><span data-stu-id="92619-161">Your program can find identify the user's private or shared default save location by setting the [**DEFAULTSAVEFOLDERTYPE**](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-defaultsavefoldertype) value in the call to [**IShellLibrary::GetDefaultSaveFolder**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-ishelllibrary-getdefaultsavefolder) method.</span></span>

## <a name="using-a-common-file-dialog-box-with-libraries"></a><span data-ttu-id="92619-162">Usando uma caixa de diálogo de arquivo comum com bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-162">Using a common file dialog box with libraries</span></span>

<span data-ttu-id="92619-163">Usando uma caixa de diálogo de arquivo comum com bibliotecas, a caixa de diálogo arquivo comum foi atualizada para dar suporte a bibliotecas no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-163">Using a common file dialog box with libraries The common file dialog box has been updated to support libraries in Windows 7.</span></span> <span data-ttu-id="92619-164">A ilustração a seguir mostra como a caixa de diálogo arquivo comum aparece para um usuário no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-164">The following illustration shows how the common file dialog box appears to a user in Windows 7.</span></span>

![captura de tela da caixa de diálogo arquivo comum mostrando bibliotecas](images/libraries-commonfiledialog.png)

<span data-ttu-id="92619-166">No Windows 7, se seu programa atualmente exibir uma caixa de diálogo de arquivo comum e não alterar o modelo da caixa de diálogo nem vincular nenhum de seus eventos, ele exibirá a nova versão do Windows 7 da caixa de diálogo automaticamente.</span><span class="sxs-lookup"><span data-stu-id="92619-166">In Windows 7, if your program currently displays a common file dialog box and does not change the dialog box template or hook any of its events, it will display the new Windows 7 version of the dialog box automatically.</span></span> <span data-ttu-id="92619-167">Especificamente, na chamada para a função de caixa de diálogo Common File, os membros **lpfnHook**, **HINSTANCE**, **lpTemplatename** da estrutura [**da OPENFILENAME**](/windows/win32/api/commdlg/ns-commdlg-openfilenamea) devem ser **nulos** e os sinalizadores OFN **\_ ENABLEHOOK** e **OFN \_ ENABLETEMPLATE** devem ser claros.</span><span class="sxs-lookup"><span data-stu-id="92619-167">Specifically, in the call to the common file dialog box function, the **lpfnHook**, **hInstance**, **lpTemplatename** members of the [**OPENFILENAME**](/windows/win32/api/commdlg/ns-commdlg-openfilenamea) structure must be **NULL** and the **OFN\_ENABLEHOOK** and **OFN\_ENABLETEMPLATE** flags must be clear.</span></span>

<span data-ttu-id="92619-168">No Windows 7, as interfaces relacionadas ao [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)substituem as funções comuns de caixa de diálogo de arquivo que foram usadas em versões anteriores do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-168">In Windows 7, the [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)-related interfaces replace the common file dialog box functions that were used in earlier versions of Windows.</span></span> <span data-ttu-id="92619-169">As funções anteriores da caixa de diálogo arquivo comum ainda têm suporte no Windows 7, mas não fornecem a experiência completa do usuário do Windows 7 e não oferecem suporte a bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="92619-169">The earlier common file dialog box functions are still supported in Windows 7 but they do not provide the complete Windows 7 user experience and they do not support libraries.</span></span> <span data-ttu-id="92619-170">Alguns dos novos recursos com suporte nas interfaces relacionadas ao **IFileDialog** incluem:</span><span class="sxs-lookup"><span data-stu-id="92619-170">Some of the new features supported by the **IFileDialog**-related interfaces include:</span></span>

-   <span data-ttu-id="92619-171">O usuário pode acessar as propriedades de arquivo com suporte pelo Windows Explorer do Windows 7 para pesquisar e selecionar os arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-171">The user can access the file properties supported by the Windows 7 Windows Explorer to search and select the files.</span></span>
-   <span data-ttu-id="92619-172">O programa pode usar interfaces e métodos da API de namespace do Shell para trabalhar com os itens.</span><span class="sxs-lookup"><span data-stu-id="92619-172">The program can use interfaces and methods from the Shell namespace API to work with the items.</span></span>
-   <span data-ttu-id="92619-173">O programa pode usar um modelo de personalização controlado por dados em vez de um modelo de personalização controlado por arquivo-recurso para adicionar novos controles às caixas de diálogo de arquivo comuns.</span><span class="sxs-lookup"><span data-stu-id="92619-173">The program can use a data-driven customization model instead of a resource-file-driven customization model to add new controls to the common file dialog boxes.</span></span>

<span data-ttu-id="92619-174">Você deve usar as interfaces relacionadas ao [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)quando:</span><span class="sxs-lookup"><span data-stu-id="92619-174">You should use the [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)-related interfaces when:</span></span>

-   <span data-ttu-id="92619-175">Você precisa personalizar a caixa de diálogo arquivo comum para seu programa no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-175">you need to customize the common file dialog box for your program in Windows 7.</span></span> <span data-ttu-id="92619-176">Isso permitirá que o seu programa trabalhe com bibliotecas e dê suporte à personalização da caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="92619-176">This will allow your program to work with libraries and support customizing your dialog box.</span></span>
-   <span data-ttu-id="92619-177">você deseja que o usuário possa selecionar vários arquivos em uma caixa de diálogo de arquivo comum.</span><span class="sxs-lookup"><span data-stu-id="92619-177">you want the user to be able to select multiple files from a common file dialog box.</span></span> <span data-ttu-id="92619-178">Isso garantirá que você obtenha os caminhos corretos para o objeto selecionado, pois uma biblioteca pode ter conteúdo armazenado em pastas diferentes.</span><span class="sxs-lookup"><span data-stu-id="92619-178">This will ensure you get the correct paths to the selected object because a library can have contents that are stored in different folders.</span></span>

<span data-ttu-id="92619-179">Para obter mais informações sobre as interfaces relacionadas ao [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog), consulte:</span><span class="sxs-lookup"><span data-stu-id="92619-179">For more information on the [**IFileDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)-related interfaces, see:</span></span>

-   [<span data-ttu-id="92619-180">**IFileDialog**</span><span class="sxs-lookup"><span data-stu-id="92619-180">**IFileDialog**</span></span>](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)
-   [<span data-ttu-id="92619-181">**IFileOpenDialog**</span><span class="sxs-lookup"><span data-stu-id="92619-181">**IFileOpenDialog**</span></span>](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog)
-   [<span data-ttu-id="92619-182">**IFileSaveDialog**</span><span class="sxs-lookup"><span data-stu-id="92619-182">**IFileSaveDialog**</span></span>](/windows/desktop/api/Shobjidl_core/nn-shobjidl_core-ifilesavedialog)
-   [<span data-ttu-id="92619-183">**IFileDialogCustomize**</span><span class="sxs-lookup"><span data-stu-id="92619-183">**IFileDialogCustomize**</span></span>](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ifiledialogcustomize)
-   [<span data-ttu-id="92619-184">**IFileDialogEvents**</span><span class="sxs-lookup"><span data-stu-id="92619-184">**IFileDialogEvents**</span></span>](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ifiledialogevents)
-   [<span data-ttu-id="92619-185">**IFileDialogControlEvents**</span><span class="sxs-lookup"><span data-stu-id="92619-185">**IFileDialogControlEvents**</span></span>](/windows/desktop/api/Shobjidl/nn-shobjidl-ifiledialogcontrolevents)

## <a name="enabling-library-selection-from-the-user-interface"></a><span data-ttu-id="92619-186">Habilitando a seleção de biblioteca na interface do usuário</span><span class="sxs-lookup"><span data-stu-id="92619-186">Enabling library selection from the user interface</span></span>

<span data-ttu-id="92619-187">Se o seu programa permitir que o usuário selecione uma pasta, como para funções de importação ou exportação, no Windows 7, ele também deverá permitir que o usuário selecione uma biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-187">If your program allows the user to select a folder, such as for import or export functions, in Windows 7, it should allow the user to select a library as well.</span></span> <span data-ttu-id="92619-188">A interface [**IFileOpenDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog) e a função [**SHBrowseForFolder**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shbrowseforfoldera) permitem que o usuário selecione uma biblioteca quando for solicitado a selecionar uma pasta.</span><span class="sxs-lookup"><span data-stu-id="92619-188">The [**IFileOpenDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog) interface and [**SHBrowseForFolder**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shbrowseforfoldera) function allow the user to select a library when prompted to select a folder.</span></span> <span data-ttu-id="92619-189">A interface **IFileOpenDialog** é preferida sobre a função **SHBrowseForFolder** porque o **IFileOpenDialog** dá suporte à interface do usuário do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-189">The **IFileOpenDialog** interface is preferred over the **SHBrowseForFolder** function because **IFileOpenDialog** supports the Windows 7 user interface.</span></span>

<span data-ttu-id="92619-190">Para permitir que os usuários selecionem pastas ao usar a interface [**IFileOpenDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog) , chame SetOptions com o \_ sinalizador FOS PICKFOLDERS definido e verifique se o \_ sinalizador FOS FORCEFILESYSTEM está claro.</span><span class="sxs-lookup"><span data-stu-id="92619-190">To allow users to select folders when using the [**IFileOpenDialog**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog) interface, call SetOptions with the FOS\_PICKFOLDERS flag set and make sure the FOS\_FORCEFILESYSTEM flag is clear.</span></span>


```C++
FILEOPENDIALOGOPTIONS fileOptions;

hr = fileOpenDialogBox->GetOptions(&fileOptions);
fileOptions = fileOptions | FOS_PICKFOLDERS | ~FOS_FORCEFILESYSTEM;
hr = fileOpenDialogBox->SetOptions(fileOptions);
```



<span data-ttu-id="92619-191">Para permitir que os usuários selecionem pastas ao chamar a função SHBrowseForFolder, no membro ulFlags da estrutura [**BROWSEINFO**](/windows/desktop/api/shlobj_core/ns-shlobj_core-browseinfoa) , defina o \_ sinalizador BSE USENEWUI e desmarque o \_ sinalizador BSE RETURNONLYFSDIRS.</span><span class="sxs-lookup"><span data-stu-id="92619-191">To allow users to select folders when calling the SHBrowseForFolder function, in the ulFlags member of the [**BROWSEINFO**](/windows/desktop/api/shlobj_core/ns-shlobj_core-browseinfoa) structure, set the BIF\_USENEWUI flag and clear the BIF\_RETURNONLYFSDIRS flag.</span></span>


```C++
BROWSEINFO    browseInfo;
browseInfo.ulFlags = BIF_USENEWUI | ~BIF_RETURNONLYFSDIRS;
// Set other member values
pidl = SHBrowseForFolder(&browseInfo);
```



## <a name="accessing-library-content-in-a-program"></a><span data-ttu-id="92619-192">Acessando o conteúdo da biblioteca em um programa</span><span class="sxs-lookup"><span data-stu-id="92619-192">Accessing library content in a program</span></span>

<span data-ttu-id="92619-193">Para acessar o conteúdo de uma biblioteca, você deve usar a API do shell do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-193">To access the contents of a library, you must use the Windows Shell API.</span></span> <span data-ttu-id="92619-194">As funções da API do sistema de arquivos não podem ser usadas para acessar o conteúdo da biblioteca porque as bibliotecas não são objetos do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-194">Functions of the file-system API cannot be used to access library contents because libraries are not file-system objects.</span></span> <span data-ttu-id="92619-195">Se o seu programa usar um navegador de arquivos personalizado baseado na API do sistema de arquivos, ele não poderá procurar bibliotecas ou acessar o conteúdo da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-195">If your program uses a custom file browser that is based on the file-system API, it will not be able to browse libraries or access library content.</span></span>

<span data-ttu-id="92619-196">Esta seção descreve como você pode acessar o conteúdo da biblioteca para que você possa selecionar a melhor maneira de atualizar o programa para trabalhar com bibliotecas.</span><span class="sxs-lookup"><span data-stu-id="92619-196">This section describes how you can access library content so that you can select the best way to update your program to work with libraries.</span></span>

### <a name="accessing-library-content-with-the-ishelllibrary-interface"></a><span data-ttu-id="92619-197">Acessando o conteúdo da biblioteca com a interface IShellLibrary</span><span class="sxs-lookup"><span data-stu-id="92619-197">Accessing library content with the IShellLibrary interface</span></span>

<span data-ttu-id="92619-198">A maneira mais fácil de um programa acessar o conteúdo da biblioteca é usar a [**API da biblioteca do Shell**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary).</span><span class="sxs-lookup"><span data-stu-id="92619-198">The easiest way for a program to access library content is to use the [**Shell Library API**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary).</span></span> <span data-ttu-id="92619-199">Se você estiver trabalhando em um programa que usa a API do sistema de arquivos, a **API da biblioteca do Shell** poderá retornar as pastas do sistema de arquivos de uma biblioteca, o que minimiza a alteração em seu código de programa existente.</span><span class="sxs-lookup"><span data-stu-id="92619-199">If you are working on a program that uses the file-system API, the **Shell Library API** can return the file-system folders of a library, which minimizes the change to your existing program code.</span></span>


```C++
IShellLibrary *picturesLibrary;

hr = SHLoadLibraryFromKnownFolder(FOLDERID_PicturesLibrary, 
                                  STGM_READ, 
                                  IID_PPV_ARGS(&picturesLibrary));

// picturesLibrary now points to the user's picture library
    
IShellItemArray *pictureFolders; 

hr = pslLibrary->GetFolders(LFF_FORCEFILESYSTEM, IID_PPV_ARGS(&pictureFolders));

// pictureFolders now contains an array of Shell items that
// represent the folders found in the user's pictures library
```



### <a name="accessing-library-content-with-the-shell-apis"></a><span data-ttu-id="92619-200">Acessando o conteúdo da biblioteca com as APIs do Shell</span><span class="sxs-lookup"><span data-stu-id="92619-200">Accessing library content with the Shell APIs</span></span>

<span data-ttu-id="92619-201">Como os objetos de biblioteca fazem parte do modelo de programação shell, eles podem ser usados com outras APIs de shell do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-201">Because the library objects are part of the Shell programming model, they can be used with other Windows Shell APIs.</span></span> <span data-ttu-id="92619-202">Por exemplo, você pode usar as interfaces [**IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) e [**IShellFolder**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellfolder) em seu programa, juntamente com funções auxiliares relacionadas, para acessar o conteúdo de uma biblioteca da mesma maneira como você enumeraria pastas e conteúdos de pasta para acessar o conteúdo com as APIs do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-202">For example you can use the [**IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) and [**IShellFolder**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellfolder) interfaces in your program, along with related helper functions, to access the contents of a library in the same way as you would enumerate folders and folder contents to access content with the file system APIs.</span></span>

<span data-ttu-id="92619-203">As APIs do shell do Windows dão suporte a dois modos de enumeração para acessar o conteúdo de uma biblioteca:</span><span class="sxs-lookup"><span data-stu-id="92619-203">The Windows Shell APIs support two enumeration modes to access the contents of a library:</span></span>

-   <span data-ttu-id="92619-204">**Procurar enumeração**</span><span class="sxs-lookup"><span data-stu-id="92619-204">**Browse enumeration**</span></span>

    <span data-ttu-id="92619-205">Procurar enumeração é o modo de enumeração padrão e enumera o conteúdo de uma pasta de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-205">Browse enumeration is the default enumeration mode and enumerates the contents of a library folder.</span></span> <span data-ttu-id="92619-206">Desmarque o \_ sinalizador de enumeração de navegação SHCONTF \_ para usar esse modo.</span><span class="sxs-lookup"><span data-stu-id="92619-206">Clear the SHCONTF\_NAVIGATION\_ENUM flag to use this mode.</span></span>

-   <span data-ttu-id="92619-207">**Enumeração de navegação**</span><span class="sxs-lookup"><span data-stu-id="92619-207">**Navigation enumeration**</span></span>

    <span data-ttu-id="92619-208">A enumeração de navegação enumera as pastas de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-208">Navigation enumeration enumerates the library folders.</span></span> <span data-ttu-id="92619-209">Defina o \_ sinalizador de enumeração de navegação SHCONTF \_ para usar esse modo.</span><span class="sxs-lookup"><span data-stu-id="92619-209">Set the SHCONTF\_NAVIGATION\_ENUM flag to use this mode.</span></span>

<span data-ttu-id="92619-210">Se o seu programa usar um controle de árvore personalizado para navegar pelas pastas do usuário, a enumeração das pastas no modo de enumeração de navegação fornecerá uma lista das pastas de uma biblioteca que é consistente com o modo como o Windows Explorer enumera as pastas no Windows 7.</span><span class="sxs-lookup"><span data-stu-id="92619-210">If your program uses a custom tree control to navigate the user's folders, enumerating the folders in the navigation enumeration mode will give you a list of a library's folders that is consistent with how the Windows Explorer enumerates folders in Windows 7.</span></span>

<span data-ttu-id="92619-211">Para obter exemplos de como usar esses recursos em um programa, consulte o exemplo ShellStorage no SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-211">For examples of how to uses these features in a program, see the ShellStorage sample in the Windows SDK.</span></span>

## <a name="saving-user-content-in-a-library"></a><span data-ttu-id="92619-212">Salvando o conteúdo do usuário em uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-212">Saving user content in a library</span></span>

<span data-ttu-id="92619-213">Seu programa pode salvar o conteúdo do usuário em uma biblioteca, bem como em uma pasta na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-213">Your program can save user content to a library as well as to a folder in the library.</span></span> <span data-ttu-id="92619-214">Da mesma forma, o usuário pode salvar em uma pasta específica em uma biblioteca ou pode apenas salvar na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-214">Likewise, the user can save to a specific folder in a library or they can just save to the library.</span></span>

<span data-ttu-id="92619-215">Cada biblioteca tem uma pasta que é designada como o local de salvamento padrão.</span><span class="sxs-lookup"><span data-stu-id="92619-215">Every library has a folder that is designated as the default save location.</span></span> <span data-ttu-id="92619-216">O local de salvamento padrão é definido quando a biblioteca é criada; no entanto, o usuário pode reatribuir o local de salvamento padrão para qualquer pasta na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-216">The default save location is defined when the library is created; however the user can reassign the default save location to be any folder in the library.</span></span> <span data-ttu-id="92619-217">Embora o usuário não precise configurar um local de salvamento padrão, ele tem a opção de alterá-lo.</span><span class="sxs-lookup"><span data-stu-id="92619-217">While the user does not need to configure a default save location, they have the option to change it.</span></span> <span data-ttu-id="92619-218">Se o usuário excluir a pasta que está definida atualmente como o local de salvamento padrão, a biblioteca configurará automaticamente a próxima pasta na biblioteca para ser o local de salvamento padrão.</span><span class="sxs-lookup"><span data-stu-id="92619-218">If the user deletes the folder that is currently set as the default save location, the library will automatically configure the next folder in the library to be the default save location.</span></span>

<span data-ttu-id="92619-219">Há várias maneiras de salvar o conteúdo do usuário em uma biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-219">There are several ways you can save user content to a library.</span></span>

-   <span data-ttu-id="92619-220">**API do Shell**</span><span class="sxs-lookup"><span data-stu-id="92619-220">**Shell API**</span></span>

    <span data-ttu-id="92619-221">Se você estiver usando o modelo de programação shell e salvar um item de Shell, conforme representado por um [**IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem), IStorage ou IStream, em um objeto de biblioteca, o item de shell será armazenado automaticamente no local de salvamento padrão da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-221">If you are using the Shell programming model and save a Shell item, as represented by an [**IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem), IStorage, or IStream, to a library object, the Shell item will be automatically stored in the default save location of the library.</span></span>

-   <span data-ttu-id="92619-222">**API do sistema de arquivos**</span><span class="sxs-lookup"><span data-stu-id="92619-222">**File-system API**</span></span>

    <span data-ttu-id="92619-223">Se você tiver um programa existente que usa muitas chamadas à API do sistema de arquivos, poderá obter um caminho para a pasta que está definida como o local de salvamento padrão da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-223">If you have an existing program that uses many file-system API calls, you can get a path to the folder that is defined as the library's default save location.</span></span> <span data-ttu-id="92619-224">O caminho da pasta pode ser passado para uma API do sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="92619-224">The folder path can then be passed to a file-system API.</span></span>

<span data-ttu-id="92619-225">Para obter exemplos de como usar esses recursos em um programa, consulte o exemplo ShellStorage no SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-225">For examples of how to uses these features in a program, see the ShellStorage sample in the Windows SDK.</span></span>

## <a name="supporting-drag-and-drop-operations-in-a-library"></a><span data-ttu-id="92619-226">Suporte a operações de arrastar e soltar em uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-226">Supporting drag-and-drop operations in a library</span></span>

<span data-ttu-id="92619-227">Se o seu programa der suporte a ações de arrastar e soltar, elas deverão ser atualizadas para dar suporte à interação correta da biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-227">If your program supports drag-and-drop actions, those should be updated to support the correct library interaction.</span></span> <span data-ttu-id="92619-228">Se um arquivo for descartado em uma biblioteca, o arquivo Descartado deverá ser salvo no local de salvamento padrão.</span><span class="sxs-lookup"><span data-stu-id="92619-228">If a file is dropped into a library, the dropped file should be saved in the default save location.</span></span> <span data-ttu-id="92619-229">Se uma pasta for descartada em uma biblioteca, a pasta descartada deverá ser adicionada como uma nova pasta à biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-229">If a folder is dropped into a library, the dropped folder should be added as a new folder to the library.</span></span> <span data-ttu-id="92619-230">Se um arquivo for descartado em uma pasta existente que não seja o local de salvamento padrão, o arquivo deverá ser adicionado à pasta selecionada.</span><span class="sxs-lookup"><span data-stu-id="92619-230">If a file is dropped into an existing folder that is not the default save location, the file should be added to the selected folder.</span></span>

<span data-ttu-id="92619-231">Para obter exemplos de como adicionar suporte à biblioteca para a funcionalidade de arrastar e soltar dos seus programas, consulte o exemplo ShellLibraryCommandLine no SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="92619-231">For examples of how to add library support for your programs drag-and-drop functionality, see the ShellLibraryCommandLine sample in the Windows SDK.</span></span>

## <a name="keeping-in-sync-with-a-library"></a><span data-ttu-id="92619-232">Mantendo a sincronização com uma biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-232">Keeping in sync with a library</span></span>

<span data-ttu-id="92619-233">Este tópico descreve como um programa pode manter sua exibição do conteúdo de uma biblioteca atualizada.</span><span class="sxs-lookup"><span data-stu-id="92619-233">This topic describes how a program can keep its view of a library's content up-to-date.</span></span>

### <a name="bulk-update"></a><span data-ttu-id="92619-234">Atualização em Massa</span><span class="sxs-lookup"><span data-stu-id="92619-234">Bulk Update</span></span>

<span data-ttu-id="92619-235">Como o usuário pode modificar as pastas de uma biblioteca interativamente quando o programa não estiver em execução, seu programa deverá chamar [**SHResolveLibrary**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-shresolvelibrary) quando começar a descobrir e armazenar quaisquer alterações na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-235">Because the user can modify the folders of a library interactively when your program is not running, your program should call [**SHResolveLibrary**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-shresolvelibrary) when it starts to discover and store any changes to the library.</span></span> <span data-ttu-id="92619-236">A API do Shell fornece a função **SHResolveLibrary** para permitir que um programa obtenha o conteúdo atual de uma biblioteca e os locais atuais de qualquer pasta que a biblioteca possa conter.</span><span class="sxs-lookup"><span data-stu-id="92619-236">The Shell API provides the **SHResolveLibrary** function to enable a program to get the current contents of a library and the current locations of any folders the library might contain.</span></span>

<span data-ttu-id="92619-237">Observe que [**SHResolveLibrary**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-shresolvelibrary) é uma função de bloqueio que pode levar muito tempo para retornar, dependendo do que foi alterado na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-237">Note that [**SHResolveLibrary**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-shresolvelibrary) is a blocking function that could take a long time to return depending on what has changed in the library.</span></span> <span data-ttu-id="92619-238">Como tal, ele não deve ser chamado de um thread de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="92619-238">As such, it should not be called from a UI thread.</span></span>

<span data-ttu-id="92619-239">Depois que o programa for atualizado, ele poderá se registrar para as notificações de alteração para manter uma exibição atual.</span><span class="sxs-lookup"><span data-stu-id="92619-239">After the program has been brought up-to-date, it can then register for change notifications to maintain a current view.</span></span>

### <a name="shell-api-notification"></a><span data-ttu-id="92619-240">Notificação da API do Shell</span><span class="sxs-lookup"><span data-stu-id="92619-240">Shell API Notification</span></span>

<span data-ttu-id="92619-241">A API do shell do Windows fornece a função [**SHChangeNotifyRegister**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotifyregister) , que é a maneira preferida para que processos que não sejam de serviço sejam notificados sobre uma alteração na biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-241">The Windows Shell API provides the [**SHChangeNotifyRegister**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotifyregister) function, which is the preferred way for non-service processes to be notified of a change in the library.</span></span>

<span data-ttu-id="92619-242">Para detectar alterações em itens em uma biblioteca usando a API do shell do Windows, chame [**SHChangeNotifyRegister**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotifyregister) para registrar seu programa para notificações de alterações em itens em uma pasta de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="92619-242">To detect changes to items within a library using the Windows Shell API, call [**SHChangeNotifyRegister**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shchangenotifyregister) to register your program for notifications of changes to items in a library folder.</span></span> <span data-ttu-id="92619-243">Essa função pode notificar seu programa se houver uma alteração em qualquer biblioteca ou apenas em uma biblioteca específica.</span><span class="sxs-lookup"><span data-stu-id="92619-243">This function can notify your program if there is a change in any library or just in a specific library.</span></span> <span data-ttu-id="92619-244">As notificações são enviadas imediatamente quando uma biblioteca é alterada.</span><span class="sxs-lookup"><span data-stu-id="92619-244">Notifications are sent immediately when a library is changed.</span></span>

### <a name="file-system-api-notification"></a><span data-ttu-id="92619-245">Notificação da API do sistema de arquivos</span><span class="sxs-lookup"><span data-stu-id="92619-245">File-system API Notification</span></span>

<span data-ttu-id="92619-246">As notificações do sistema de arquivos devem ser usadas em processos de serviço.</span><span class="sxs-lookup"><span data-stu-id="92619-246">File system notifications must be used in service processes.</span></span>

<span data-ttu-id="92619-247">Para detectar alterações em itens em uma biblioteca usando a API do sistema de arquivos, enumere as pastas na biblioteca e chame [**FindFirstChangeNotification**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) para cada pasta a ser monitorada.</span><span class="sxs-lookup"><span data-stu-id="92619-247">To detect changes to items in a library using the file-system API, enumerate the folders in the library and call [**FindFirstChangeNotification**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) for each folder to monitor.</span></span> <span data-ttu-id="92619-248">Seu programa receberá uma notificação quando uma pasta monitorada for alterada.</span><span class="sxs-lookup"><span data-stu-id="92619-248">Your program will receive notification when a monitored folder changes.</span></span> <span data-ttu-id="92619-249">Para localizar o arquivo específico de arquivos que foram alterados na pasta, chame [**ReadDirectoryChangesW**](/windows/win32/api/winbase/nf-winbase-readdirectorychangesw).</span><span class="sxs-lookup"><span data-stu-id="92619-249">To find the specific file of files that changed in the folder, call [**ReadDirectoryChangesW**](/windows/win32/api/winbase/nf-winbase-readdirectorychangesw).</span></span> <span data-ttu-id="92619-250">Para detectar alterações no arquivo de descrição da biblioteca, monitore a pasta que a contém.</span><span class="sxs-lookup"><span data-stu-id="92619-250">To detect changes in the library description file, monitor the folder that contains it.</span></span> <span data-ttu-id="92619-251">O arquivo de descrição da biblioteca pode ser encontrado na pasta [**\_ bibliotecas FolderId**](knownfolderid.md) .</span><span class="sxs-lookup"><span data-stu-id="92619-251">The library description file can be found in the [**FOLDERID\_Libraries**](knownfolderid.md) folder.</span></span> <span data-ttu-id="92619-252">O arquivo de descrição da biblioteca, no entanto, não deve ser aberto ou modificado.</span><span class="sxs-lookup"><span data-stu-id="92619-252">The library description file, however, should not be opened or modified.</span></span>

## <a name="related-topics"></a><span data-ttu-id="92619-253">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="92619-253">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="92619-254">Sobre bibliotecas</span><span class="sxs-lookup"><span data-stu-id="92619-254">About Libraries</span></span>](library-leverage-to-manage-folders.md)
</dt> <dt>

[<span data-ttu-id="92619-255">**IShellLibrary**</span><span class="sxs-lookup"><span data-stu-id="92619-255">**IShellLibrary**</span></span>](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishelllibrary)
</dt> <dt>

[<span data-ttu-id="92619-256">Links do Shell</span><span class="sxs-lookup"><span data-stu-id="92619-256">Shell Links</span></span>](./links.md)
</dt> <dt>

[<span data-ttu-id="92619-257">Pastas conhecidas</span><span class="sxs-lookup"><span data-stu-id="92619-257">Known Folders</span></span>](known-folders.md)
</dt> <dt>

[<span data-ttu-id="92619-258">Esquema de descrição da biblioteca</span><span class="sxs-lookup"><span data-stu-id="92619-258">Library Description Schema</span></span>](library-schema-entry.md)
</dt> <dt>

[<span data-ttu-id="92619-259">**\_argumentos de PPV de IID \_**</span><span class="sxs-lookup"><span data-stu-id="92619-259">**IID\_PPV\_ARGS**</span></span>](/windows/win32/api/combaseapi/nf-combaseapi-iid_ppv_args)
</dt> </dl>

 

 
