---
description: As contas de usuário do Windows XP permitem que vários usuários sejam conectados simultaneamente, cada um com suas próprias configurações e cada um executando seus próprios aplicativos.
ms.assetid: bc404afc-f73e-404d-854d-faab5cf205a5
title: Contas de usuário com troca rápida de usuário e Área de Trabalho Remota
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fc26471bcf56efce79fb5ccc91a78c24e43ae312
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104989005"
---
# <a name="user-accounts-with-fast-user-switching-and-remote-desktop"></a><span data-ttu-id="b9b15-103">Contas de usuário com troca rápida de usuário e Área de Trabalho Remota</span><span class="sxs-lookup"><span data-stu-id="b9b15-103">User Accounts with Fast User Switching and Remote Desktop</span></span>

<span data-ttu-id="b9b15-104">As contas de usuário do Windows XP permitem que vários usuários sejam conectados simultaneamente, cada um com suas próprias configurações e cada um executando seus próprios aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-104">Windows XP user accounts enable multiple users to be logged on simultaneously, each with his or her own settings and each running his or her own applications.</span></span> <span data-ttu-id="b9b15-105">Como um usuário não precisa fazer logoff para permitir o acesso a outro usuário, a área de trabalho de cada usuário é facilmente acessada usando o recurso de troca rápida de usuário.</span><span class="sxs-lookup"><span data-stu-id="b9b15-105">Because one user does not have to log off to allow access to another user, each user's desktop is easily accessed using the fast user switching feature.</span></span> <span data-ttu-id="b9b15-106">As contas de usuário também incluem o recurso de Terminal Server pessoal ou Área de Trabalho Remota, que permite aos usuários acessar sua conta de área de trabalho por meio de sistemas remotos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-106">User accounts also include the Personal Terminal Server feature, or Remote Desktop, which enables users to access their desktop account from remote systems.</span></span>

<span data-ttu-id="b9b15-107">Os tópicos a seguir são discutidos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-107">The following topics are discussed.</span></span>

-   [<span data-ttu-id="b9b15-108">Requisitos de uso da infraestrutura</span><span class="sxs-lookup"><span data-stu-id="b9b15-108">Infrastructure Usage Requirements</span></span>](#infrastructure-usage-requirements)
-   [<span data-ttu-id="b9b15-109">Compatibilidade com aplicativos existentes</span><span class="sxs-lookup"><span data-stu-id="b9b15-109">Compatibility with Existing Applications</span></span>](#compatibility-with-existing-applications)
-   [<span data-ttu-id="b9b15-110">Registrando para notificação de alternância de sessão</span><span class="sxs-lookup"><span data-stu-id="b9b15-110">Registering for Session Switching Notification</span></span>](#registering-for-session-switching-notification)
-   [<span data-ttu-id="b9b15-111">Garantindo que apenas uma instância do seu aplicativo esteja em execução</span><span class="sxs-lookup"><span data-stu-id="b9b15-111">Ensuring Only One Instance of Your Application Is Running</span></span>](#ensuring-only-one-instance-of-your-application-is-running)
-   [<span data-ttu-id="b9b15-112">Desligando seu aplicativo em todas as sessões</span><span class="sxs-lookup"><span data-stu-id="b9b15-112">Shutting Down Your Application Across All Sessions</span></span>](#shutting-down-your-application-across-all-sessions)
-   [<span data-ttu-id="b9b15-113">Interação com serviços do sistema</span><span class="sxs-lookup"><span data-stu-id="b9b15-113">Interaction with System Services</span></span>](#interaction-with-system-services)
-   [<span data-ttu-id="b9b15-114">Área de Trabalho Remota e largura de banda</span><span class="sxs-lookup"><span data-stu-id="b9b15-114">Remote Desktop and Bandwidth</span></span>](#remote-desktop-and-bandwidth)

## <a name="infrastructure-usage-requirements"></a><span data-ttu-id="b9b15-115">Requisitos de uso da infraestrutura</span><span class="sxs-lookup"><span data-stu-id="b9b15-115">Infrastructure Usage Requirements</span></span>

<span data-ttu-id="b9b15-116">A infraestrutura subjacente herdada do Windows 2000 dá suporte à separação de estado dos dados do usuário, configurações do usuário e configurações do computador.</span><span class="sxs-lookup"><span data-stu-id="b9b15-116">Underlying infrastructure inherited from Windows 2000 supports state separation of user data, user settings, and computer settings.</span></span> <span data-ttu-id="b9b15-117">Aproveitando essa infraestrutura, os itens a seguir são necessários para executar com êxito o aplicativo no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="b9b15-117">Taking advantage of this infrastructure, the following are required to successfully run your application under Windows XP.</span></span>

-   <span data-ttu-id="b9b15-118">O padrão é a pasta **meus documentos** para armazenamento de dados criados pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="b9b15-118">Default to the **My Documents** folder for storage of user-created data.</span></span>
-   <span data-ttu-id="b9b15-119">Classifique e armazene dados de aplicativo corretamente.</span><span class="sxs-lookup"><span data-stu-id="b9b15-119">Classify and store application data correctly.</span></span>
-   <span data-ttu-id="b9b15-120">Degradar normalmente as mensagens de "acesso negado".</span><span class="sxs-lookup"><span data-stu-id="b9b15-120">Degrade gracefully on "Access Denied" messages.</span></span>

<span data-ttu-id="b9b15-121">Arquivos temporários, arquivos mapeados por memória e documentos devem ser armazenados no subdiretório apropriado do diretório de perfil do usuário.</span><span class="sxs-lookup"><span data-stu-id="b9b15-121">Temporary files, memory-mapped files, and documents should all be stored in the appropriate subdirectory of the user's profile directory.</span></span> <span data-ttu-id="b9b15-122">Use [**SHGetFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) ou [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) para determinar o local de armazenamento apropriado para esses arquivos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-122">Use [**SHGetFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) or [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) to determine the appropriate storage location for these files.</span></span> <span data-ttu-id="b9b15-123">Passar o sinalizador [**CSIDL \_ AppData**](csidl.md) para essas funções retorna o caminho de um diretório do sistema de arquivos que serve como um repositório comum para dados específicos do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b9b15-123">Passing the [**CSIDL\_APPDATA**](csidl.md) flag to these functions returns the path of a file system directory that serves as a common repository for application-specific data.</span></span> <span data-ttu-id="b9b15-124">Use o sinalizador [**CSIDL \_ local de \_ AppData**](csidl.md) no lugar da **CSIDL \_ AppData** para dados que devem ser alterados quando o usuário mudar, como arquivos temporários.</span><span class="sxs-lookup"><span data-stu-id="b9b15-124">Use the flag [**CSIDL\_LOCAL\_APPDATA**](csidl.md) in place of **CSIDL\_APPDATA** for data that should change when the user changes, such as temporary files.</span></span>

<span data-ttu-id="b9b15-125">Os requisitos listados acima são um subconjunto daqueles no programa de certificação da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b9b15-125">The requirements listed above are a subset of those in the Microsoft Certification program.</span></span> <span data-ttu-id="b9b15-126">Para obter mais informações, consulte a página **Certified for Windows Program** em https://www.microsoft.com/windowsserver2003/partners/isvs/cfw.mspx .</span><span class="sxs-lookup"><span data-stu-id="b9b15-126">For more information, see the **Certified for Windows Program** page at https://www.microsoft.com/windowsserver2003/partners/isvs/cfw.mspx.</span></span>

## <a name="compatibility-with-existing-applications"></a><span data-ttu-id="b9b15-127">Compatibilidade com aplicativos existentes</span><span class="sxs-lookup"><span data-stu-id="b9b15-127">Compatibility with Existing Applications</span></span>

<span data-ttu-id="b9b15-128">A troca rápida de usuário e a Terminal Server pessoal usam a tecnologia de serviços de terminal e, portanto, são compatíveis com a maioria dos aplicativos Microsoft Win32 mais antigos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-128">Both fast user switching and Personal Terminal Server use Terminal Services technology and therefore are compatible with most earlier Microsoft Win32 applications.</span></span> <span data-ttu-id="b9b15-129">Se um aplicativo for compatível com o logotipo do Windows 2000, implementando recursos básicos de separação de perfil e gerenciamento de energia, esse aplicativo deverá ser executado corretamente em contas de usuário individuais do Windows XP.</span><span class="sxs-lookup"><span data-stu-id="b9b15-129">If an application is Windows 2000 Logo compliant, implementing basic profile separation and power management features, that application should run properly under individual Windows XP user accounts.</span></span>

## <a name="registering-for-session-switching-notification"></a><span data-ttu-id="b9b15-130">Registrando para notificação de alternância de sessão</span><span class="sxs-lookup"><span data-stu-id="b9b15-130">Registering for Session Switching Notification</span></span>

<span data-ttu-id="b9b15-131">Normalmente, um aplicativo não precisa ser notificado quando ocorre uma comutador de área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9b15-131">Typically, an application does not need to be notified when a desktop switch occurs.</span></span> <span data-ttu-id="b9b15-132">No entanto, os aplicativos que devem ser notificados quando a conta sob a qual estão sendo executados são a área de trabalho atual, como aplicativos que acessam a porta serial ou outros recursos compartilhados, podem se registrar para a notificação do comutador da área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9b15-132">However, applications that must be notified when the account under which they are running is the current desktop, such as applications that access the serial port or other shared resources, can register for desktop switch notification.</span></span> <span data-ttu-id="b9b15-133">Para registrar-se para uma notificação, use a função [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) .</span><span class="sxs-lookup"><span data-stu-id="b9b15-133">To register for a notification, use the [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) function.</span></span>

<span data-ttu-id="b9b15-134">Depois que essa função for chamada, a janela com o identificador *HWND* será registrada para receber uma mensagem de [**alteração do WM \_ \_ WTSSESSION**](../termserv/wm-wtssession-change.md) por meio de sua função **WndProc** .</span><span class="sxs-lookup"><span data-stu-id="b9b15-134">Once that function has been called, the window with handle *hWnd* is registered to receive a [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message through its **WndProc** function.</span></span> <span data-ttu-id="b9b15-135">A ID de sessão é enviada no parâmetro **lParam** e um código que indica o evento que gerou a mensagem é enviado em **wParam** como um dos sinalizadores a seguir.</span><span class="sxs-lookup"><span data-stu-id="b9b15-135">The session ID is sent in the **lParam** parameter, and a code that indicates the event that generated the message is sent in **wParam** as one of the following flags.</span></span>

-   <span data-ttu-id="b9b15-136">\_conexão do console do WTS \_</span><span class="sxs-lookup"><span data-stu-id="b9b15-136">WTS\_CONSOLE\_CONNECT</span></span>
-   <span data-ttu-id="b9b15-137">desconexão do console do WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="b9b15-137">WTS\_CONSOLE\_DISCONNECT</span></span>
-   <span data-ttu-id="b9b15-138">\_conexão remota \_ WTS</span><span class="sxs-lookup"><span data-stu-id="b9b15-138">WTS\_REMOTE\_CONNECT</span></span>
-   <span data-ttu-id="b9b15-139">\_desconexão remota WTS \_</span><span class="sxs-lookup"><span data-stu-id="b9b15-139">WTS\_REMOTE\_DISCONNECT</span></span>
-   <span data-ttu-id="b9b15-140">\_logoff de sessão WTS \_</span><span class="sxs-lookup"><span data-stu-id="b9b15-140">WTS\_SESSION\_LOGOFF</span></span>
-   <span data-ttu-id="b9b15-141">\_logon de sessão do WTS \_</span><span class="sxs-lookup"><span data-stu-id="b9b15-141">WTS\_SESSION\_LOGON</span></span>

<span data-ttu-id="b9b15-142">Os aplicativos podem usar essa mensagem para controlar seu estado, bem como para liberar e adquirir recursos específicos do console.</span><span class="sxs-lookup"><span data-stu-id="b9b15-142">Applications can use this message to track their state, as well as to release and acquire console-specific resources.</span></span> <span data-ttu-id="b9b15-143">As áreas de trabalho do usuário podem ser alternadas dinamicamente entre o controle remoto e o console.</span><span class="sxs-lookup"><span data-stu-id="b9b15-143">User desktops can be dynamically switched between remote and console control.</span></span> <span data-ttu-id="b9b15-144">Os aplicativos devem usar a mensagem de [**\_ \_ alteração do WM WTSSESSION**](../termserv/wm-wtssession-change.md) para sincronizar com o estado de conexão remota ou local.</span><span class="sxs-lookup"><span data-stu-id="b9b15-144">Applications should use the [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message to synchronize with the remote or local connection state.</span></span>

<span data-ttu-id="b9b15-145">Quando o processo não exige mais essas notificações ou está sendo encerrado, ele deve chamar [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) para cancelar o registro de sua notificação.</span><span class="sxs-lookup"><span data-stu-id="b9b15-145">When your process no longer requires these notifications or is terminating, it should call [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) to unregister its notification.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b9b15-146">Os valores de **HWND** passados para [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) são contados como referência, portanto, você deve fazer um número igual de chamadas para [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) para garantir o lançamento de todos os recursos alocados.</span><span class="sxs-lookup"><span data-stu-id="b9b15-146">The **hWnd** values passed to [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) are reference counted, so you must make an equal number of calls to [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) to ensure the release of all allocated resources.</span></span>

 

## <a name="ensuring-only-one-instance-of-your-application-is-running"></a><span data-ttu-id="b9b15-147">Garantindo que apenas uma instância do seu aplicativo esteja em execução</span><span class="sxs-lookup"><span data-stu-id="b9b15-147">Ensuring Only One Instance of Your Application Is Running</span></span>

<span data-ttu-id="b9b15-148">Muitos aplicativos devem garantir que eles tenham apenas uma instância em execução.</span><span class="sxs-lookup"><span data-stu-id="b9b15-148">Many applications must ensure that they have only one instance running.</span></span> <span data-ttu-id="b9b15-149">Há várias maneiras de fazer isso no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="b9b15-149">There are several ways to do this in Windows XP.</span></span> <span data-ttu-id="b9b15-150">Entre elas, estão as seguintes:</span><span class="sxs-lookup"><span data-stu-id="b9b15-150">Among them are the following:</span></span>

-   <span data-ttu-id="b9b15-151">Use [**FindWindow**](/windows/win32/api/winuser/nf-winuser-findwindowa) ou [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) para procurar uma janela conhecida que seu aplicativo abra.</span><span class="sxs-lookup"><span data-stu-id="b9b15-151">Use [**FindWindow**](/windows/win32/api/winuser/nf-winuser-findwindowa) or [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) to search for a known window that your application opens.</span></span> <span data-ttu-id="b9b15-152">Se essa janela já estiver aberta, você poderá usá-la como uma indicação de que o aplicativo já está em execução.</span><span class="sxs-lookup"><span data-stu-id="b9b15-152">If that window is already open, you can use that as an indication that the application is already running.</span></span>
-   <span data-ttu-id="b9b15-153">Crie um objeto mutex ou Semaphore quando seu aplicativo for aberto e feche esse objeto quando o aplicativo for encerrado.</span><span class="sxs-lookup"><span data-stu-id="b9b15-153">Create a mutex or semaphore object when your application is opened, and close that object when the application terminates.</span></span> <span data-ttu-id="b9b15-154">O namespace do objeto global é separado para cada área de trabalho, permitindo uma lista exclusiva de objetos mutex e Semaphore para cada um.</span><span class="sxs-lookup"><span data-stu-id="b9b15-154">The global object namespace is separated for each desktop, allowing a unique list of mutex and semaphore objects for each.</span></span>

## <a name="shutting-down-your-application-across-all-sessions"></a><span data-ttu-id="b9b15-155">Desligando seu aplicativo em todas as sessões</span><span class="sxs-lookup"><span data-stu-id="b9b15-155">Shutting Down Your Application Across All Sessions</span></span>

<span data-ttu-id="b9b15-156">Um aplicativo pode precisar ser desligado em todas as sessões.</span><span class="sxs-lookup"><span data-stu-id="b9b15-156">An application might need to shut itself down across all sessions.</span></span> <span data-ttu-id="b9b15-157">Por exemplo, um aplicativo em execução em duas ou mais sessões pode, simultaneamente, baixar um novo arquivo da Web.</span><span class="sxs-lookup"><span data-stu-id="b9b15-157">For example, an application running in two or more sessions simultaneously might download a new file from the web.</span></span> <span data-ttu-id="b9b15-158">Em seguida, talvez seja necessário fechar a si mesmo e reiniciar com os bits atualizados.</span><span class="sxs-lookup"><span data-stu-id="b9b15-158">Then it might need to close itself and restart with the updated bits.</span></span> <span data-ttu-id="b9b15-159">Isso, é claro, precisaria ser feito em todas as sessões em execução.</span><span class="sxs-lookup"><span data-stu-id="b9b15-159">This, of course, would need to be done in all running sessions.</span></span> <span data-ttu-id="b9b15-160">Seu aplicativo deve ser escrito para que ele saia corretamente quando uma notificação é recebida.</span><span class="sxs-lookup"><span data-stu-id="b9b15-160">Your application should be written so that it exits cleanly when a notification is received.</span></span>

## <a name="interaction-with-system-services"></a><span data-ttu-id="b9b15-161">Interação com serviços do sistema</span><span class="sxs-lookup"><span data-stu-id="b9b15-161">Interaction with System Services</span></span>

<span data-ttu-id="b9b15-162">Do ponto de vista programático, os casos a seguir precisam ser resolvidos.</span><span class="sxs-lookup"><span data-stu-id="b9b15-162">From a programmatic standpoint, the following cases need to be addressed.</span></span>

-   <span data-ttu-id="b9b15-163">O processo do servidor recebe uma solicitação direta de um processo de cliente.</span><span class="sxs-lookup"><span data-stu-id="b9b15-163">The server process receives a direct request from a client process.</span></span>

    <span data-ttu-id="b9b15-164">Nesse caso, a mensagem é provavelmente transmitida usando uma LPC (chamada de procedimento local) ou uma RPC (chamada de procedimento remoto).</span><span class="sxs-lookup"><span data-stu-id="b9b15-164">In this case, the message is probably transmitted using a local procedure call (LPC) or a remote procedure call (RPC).</span></span> <span data-ttu-id="b9b15-165">Há APIs para LPC ou RPC que habilitam a recuperação do token do cliente.</span><span class="sxs-lookup"><span data-stu-id="b9b15-165">There are APIs for either LPC or RPC that enable retrieval of the client token.</span></span> <span data-ttu-id="b9b15-166">Depois que o token do cliente é obtido, o servidor pode usá-lo em uma chamada para [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera).</span><span class="sxs-lookup"><span data-stu-id="b9b15-166">Once the client token is obtained, the server can use it in a call to [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera).</span></span> <span data-ttu-id="b9b15-167">Isso abre o processo na estação de janela correta, supondo que o token de usuário do cliente tenha uma marca de sessão, o que deveria.</span><span class="sxs-lookup"><span data-stu-id="b9b15-167">This brings up the process on the correct window station, assuming that the client user token has a session tag, which it should.</span></span>

    > [!Note]  
    > <span data-ttu-id="b9b15-168">O [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) não dá suporte à herança de identificador entre sessões no momento.</span><span class="sxs-lookup"><span data-stu-id="b9b15-168">[**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) does not support handle inheritance across sessions at this time.</span></span>

     

-   <span data-ttu-id="b9b15-169">O processo do servidor recebe uma notificação e precisa exibir a interface de usuário, mas a exibição não precisa estar no contexto do usuário atual.</span><span class="sxs-lookup"><span data-stu-id="b9b15-169">The server process receives a notification and needs to display the UI, but the display does not have to be in the current user's context.</span></span>

    <span data-ttu-id="b9b15-170">Nesse caso, o processo do servidor pode duplicar seu token de processo primário e alterar o identificador da sessão em questão para corresponder ao identificador da sessão atual.</span><span class="sxs-lookup"><span data-stu-id="b9b15-170">In this case, the server process can duplicate its primary process token and change the session identifier in question to match the current session identifier.</span></span> <span data-ttu-id="b9b15-171">O identificador de sessão atual pode ser obtido usando a função [**WTSGetActiveConsoleSessionId**](/windows/win32/api/winbase/nf-winbase-wtsgetactiveconsolesessionid) .</span><span class="sxs-lookup"><span data-stu-id="b9b15-171">The current session identifier can be obtained by using the [**WTSGetActiveConsoleSessionId**](/windows/win32/api/winbase/nf-winbase-wtsgetactiveconsolesessionid) function.</span></span>

    > [!Note]  
    > <span data-ttu-id="b9b15-172">Para definir a ID de sessão do token, você precisa do **\_ \_ privilégio do se TCB**.</span><span class="sxs-lookup"><span data-stu-id="b9b15-172">To set the token session ID, you need the **SE\_TCB\_PRIVILEGE**.</span></span> <span data-ttu-id="b9b15-173">Você só terá isso como um serviço em execução no sistema de Autoridade NT \\ .</span><span class="sxs-lookup"><span data-stu-id="b9b15-173">You will have this only as a service running in NT AUTHORITY\\SYSTEM.</span></span>

     

## <a name="remote-desktop-and-bandwidth"></a><span data-ttu-id="b9b15-174">Área de Trabalho Remota e largura de banda</span><span class="sxs-lookup"><span data-stu-id="b9b15-174">Remote Desktop and Bandwidth</span></span>

<span data-ttu-id="b9b15-175">Com a adição do recurso de Área de Trabalho Remota ao Windows XP, os aplicativos devem fazer um esforço para não usar mais largura de banda do que o necessário, evitando desenhos de tela e efeitos de animação extensivos se a área de trabalho estiver conectada remotamente.</span><span class="sxs-lookup"><span data-stu-id="b9b15-175">With the addition of the Remote Desktop feature to Windows XP, applications should make an effort not to use more bandwidth than needed, avoiding extensive screen drawings and animation effects if the desktop is connected remotely.</span></span> <span data-ttu-id="b9b15-176">Para determinar se a sessão atual é remota, você pode chamar [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) com **SM \_ REMOTESESSION**.</span><span class="sxs-lookup"><span data-stu-id="b9b15-176">To determine whether the current session is remote, you can call [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) with **SM\_REMOTESESSION**.</span></span> <span data-ttu-id="b9b15-177">No entanto, lembre-se de que essa chamada não faz distinção entre o remoto e o desconectado.</span><span class="sxs-lookup"><span data-stu-id="b9b15-177">Be aware, however, that this call does not distinguish between remote and disconnected.</span></span>

 

 
