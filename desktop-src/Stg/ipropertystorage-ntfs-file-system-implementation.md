---
title: IPropertyStorage-implementação do sistema de arquivos NTFS
description: A versão 5,0 do NTFS fornece uma implementação da interface IPropertyStorage para arquivos em um volume NTFS quando os arquivos não são arquivos compostos.
ms.assetid: d0ffd975-5bc2-4de3-b0c1-c9188541f46a
keywords:
- IPropertyStorage Strctd STG, implementações, sistema de arquivos NTFS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca359bebbd05e67a034494023d7fc23089396b32
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105749194"
---
# <a name="ipropertystorage-ntfs-file-system-implementation"></a><span data-ttu-id="66bcd-104">IPropertyStorage-implementação do sistema de arquivos NTFS</span><span class="sxs-lookup"><span data-stu-id="66bcd-104">IPropertyStorage-NTFS File System Implementation</span></span>

<span data-ttu-id="66bcd-105">A versão 5,0 do NTFS fornece uma implementação da interface [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) para arquivos em um volume NTFS quando os arquivos não são arquivos compostos.</span><span class="sxs-lookup"><span data-stu-id="66bcd-105">The NTFS version 5.0 provides an implementation of the [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) interface for files on an NTFS volume when the files are not compound files.</span></span>

<span data-ttu-id="66bcd-106">**Para obter um ponteiro para a implementação do sistema de arquivos NTFS de IPropertySetStorage**</span><span class="sxs-lookup"><span data-stu-id="66bcd-106">**To get a pointer to the NTFS file system implementation of IPropertySetStorage**</span></span>

1.  <span data-ttu-id="66bcd-107">Chame [**IPropertySetStorage:: Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) usando a implementação NTFS de [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="66bcd-107">Call [**IPropertySetStorage::Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>
2.  <span data-ttu-id="66bcd-108">Chame [**IPropertySetStorage:: Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) usando a implementação NTFS de [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="66bcd-108">Call [**IPropertySetStorage::Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>

## <a name="when-to-use"></a><span data-ttu-id="66bcd-109">Quando usar</span><span class="sxs-lookup"><span data-stu-id="66bcd-109">When to Use</span></span>

<span data-ttu-id="66bcd-110">Use [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) para gerenciar Propriedades em um único conjunto de propriedades.</span><span class="sxs-lookup"><span data-stu-id="66bcd-110">Use [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) to manage properties within a single property set.</span></span> <span data-ttu-id="66bcd-111">Seus métodos dão suporte à leitura, gravação e exclusão de propriedades e aos nomes de cadeia de caracteres opcionais que podem ser associados a identificadores de propriedade.</span><span class="sxs-lookup"><span data-stu-id="66bcd-111">Its methods support reading, writing, and deleting properties and the optional string names that can be associated with property identifiers.</span></span> <span data-ttu-id="66bcd-112">Outro método permite definir os horários associados ao armazenamento de propriedades e outro permite a atribuição de um CLSID, usado para associar outro código, como o código da interface do usuário, com o conjunto de propriedades.</span><span class="sxs-lookup"><span data-stu-id="66bcd-112">Another method enables you to set times associated with the property storage, and another permits the assignment of a CLSID, used to associate other code, such as user interface (UI) code, with the property set.</span></span> <span data-ttu-id="66bcd-113">Chamar o método [**enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) fornece um ponteiro para a implementação NTFS de [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), que permite enumerar as propriedades no conjunto.</span><span class="sxs-lookup"><span data-stu-id="66bcd-113">Calling the [**Enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) method supplies a pointer to the NTFS implementation of [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), which enables you to enumerate the properties in the set.</span></span>

## <a name="remarks"></a><span data-ttu-id="66bcd-114">Comentários</span><span class="sxs-lookup"><span data-stu-id="66bcd-114">Remarks</span></span>

<span data-ttu-id="66bcd-115">A implementação de NTFS fornece essencialmente os mesmos recursos que a implementação do arquivo composto.</span><span class="sxs-lookup"><span data-stu-id="66bcd-115">The NTFS implementation provides essentially the same features as the compound file implementation.</span></span> <span data-ttu-id="66bcd-116">Para obter mais informações, consulte [implementação de arquivo composto IPropertyStorage](ipropertystorage-compound-file-implementation.md).</span><span class="sxs-lookup"><span data-stu-id="66bcd-116">For more information, see [IPropertyStorage-Compound File Implementation](ipropertystorage-compound-file-implementation.md).</span></span>

<span data-ttu-id="66bcd-117">Como o NTFS é um sistema de arquivos robusto, um conjunto de propriedades NTFS nunca será deixado em um estado incorreto.</span><span class="sxs-lookup"><span data-stu-id="66bcd-117">Because NTFS is a robust file system, an NTFS property set will never be left in an incorrect state.</span></span> <span data-ttu-id="66bcd-118">Quando o conteúdo de um [**IPROPERTYSTORAGE**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) NTFS é liberado para o arquivo NTFS subjacente, todo ou nenhum do estado é gravado no arquivo como uma operação atômica, mesmo que haja uma falha durante a operação, como uma terminação de processo anormal.</span><span class="sxs-lookup"><span data-stu-id="66bcd-118">When the content of an NTFS [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) is flushed to the underlying NTFS file, either all or none of the state is written to the file as an atomic operation, even if there is a failure during the operation such as an abnormal process termination.</span></span> <span data-ttu-id="66bcd-119">Para obter um comportamento semelhante com a implementação do arquivo composto, a interface [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) pai deve ser aberta no modo transacionado.</span><span class="sxs-lookup"><span data-stu-id="66bcd-119">To achieve similar behavior with the compound file implementation, the parent [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) interface must be opened in transacted mode.</span></span>

<span data-ttu-id="66bcd-120">Esse nível de robustez só é possível ao acessar uma propriedade NTFS definida em um volume NTFS 5,0.</span><span class="sxs-lookup"><span data-stu-id="66bcd-120">This level of robustness is only possible when accessing an NTFS property set on an NTFS 5.0 volume.</span></span> <span data-ttu-id="66bcd-121">É possível acessar os conjuntos de propriedades NTFS em versões anteriores do NTFS (por exemplo, um computador em execução no Windows NT ou no Windows 2000 que acessa os conjuntos de propriedades em um computador do servidor de arquivos em execução no Windows NT 4,0), mas não há garantia de que eles estejam em um estado correto no caso de uma falha inesperada.</span><span class="sxs-lookup"><span data-stu-id="66bcd-121">It is possible to access NTFS property sets on earlier versions of NTFS (for example, a computer running on Windows NT or Windows 2000 that accesses the property sets on a file server computer running on Windows NT 4.0), but they are not guaranteed to be in a correct state in the event of an unexpected failure.</span></span>

<span data-ttu-id="66bcd-122">Embora a implementação NTFS do [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) não ofereça suporte à transacção, a implementação NTFS do [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) dá suporte a ela.</span><span class="sxs-lookup"><span data-stu-id="66bcd-122">Although the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) does not support transactioning, the NTFS implementation of [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) supports it.</span></span> <span data-ttu-id="66bcd-123">Ou seja, **STGM \_ transacionado** pode ser especificado no parâmetro *GrfMode* para os métodos [**Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) e [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) de **IPropertySetStorage**.</span><span class="sxs-lookup"><span data-stu-id="66bcd-123">That is, **STGM\_TRANSACTED** may be specified in the *grfMode* parameter to the [**Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) and [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) methods of **IPropertySetStorage**.</span></span> <span data-ttu-id="66bcd-124">Como na implementação do arquivo composto, o modo transacionado é possível apenas para armazenamentos de propriedade não simples (especificando **PROPSETFLAG não \_ simples** no parâmetro *grfFlags* ).</span><span class="sxs-lookup"><span data-stu-id="66bcd-124">As in the compound file implementation, transacted mode is possible only for nonsimple property storages (specifying **PROPSETFLAG\_NONSIMPLE** in the *grfFlags* parameter).</span></span>

## <a name="related-topics"></a><span data-ttu-id="66bcd-125">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="66bcd-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="66bcd-126">**IPropertyStorage**</span><span class="sxs-lookup"><span data-stu-id="66bcd-126">**IPropertyStorage**</span></span>](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage)
</dt> <dt>

[<span data-ttu-id="66bcd-127">IPropertySetStorage-implementação do sistema de arquivos NTFS</span><span class="sxs-lookup"><span data-stu-id="66bcd-127">IPropertySetStorage-NTFS File System Implementation</span></span>](ipropertysetstorage-ntfs-file-system-implementation.md)
</dt> </dl>

 

 