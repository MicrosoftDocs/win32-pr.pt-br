---
title: Arquivos compostos assíncronos
description: Os arquivos compostos assíncronos, a implementação fornecida pelo sistema do armazenamento assíncrono, permitem o download eficiente de arquivos compostos da Internet em geral e a Web em particular.
ms.assetid: 6cad074e-07a8-434f-a402-e29cb66a1a18
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 04de2162b50283b12bc8deed6ec908d92e7584d7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104366491"
---
# <a name="asynchronous-compound-files"></a><span data-ttu-id="29837-103">Arquivos compostos assíncronos</span><span class="sxs-lookup"><span data-stu-id="29837-103">Asynchronous Compound Files</span></span>

<span data-ttu-id="29837-104">Os arquivos compostos assíncronos, a implementação fornecida pelo sistema do armazenamento assíncrono, permitem o download eficiente de arquivos compostos da Internet em geral e a Web em particular.</span><span class="sxs-lookup"><span data-stu-id="29837-104">Asynchronous Compound Files, the system-provided implementation of asynchronous storage, enables the efficient downloading of compound files from the Internet in general and the Web in particular.</span></span> <span data-ttu-id="29837-105">A arquitetura básica de arquivos compostos assíncronos é mostrada no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="29837-105">The basic architecture of Asynchronous Compound Files is shown in the following diagram.</span></span>

![arquitetura básica de arquivos compostos assíncronos](images/asy-stor.png)

<span data-ttu-id="29837-107">A implementação de arquivos compostos assíncronos pode funcionar com novos tipos de moniker assíncronos que entendem protocolos de Internet e podem ser associados a um objeto identificado por uma URL.</span><span class="sxs-lookup"><span data-stu-id="29837-107">The Asynchronous Compound Files implementation can work with new asynchronous moniker types that understand Internet protocols and can bind to an object identified by a URL.</span></span> <span data-ttu-id="29837-108">Tal moniker retornaria um ponteiro de [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) ou [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) assíncrono da chamada do cliente para [**IMoniker:: BindToStorage**](/windows/win32/api/objidl/nf-objidl-imoniker-bindtostorage).</span><span class="sxs-lookup"><span data-stu-id="29837-108">Such a moniker would return an asynchronous [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) or [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) pointer from the client's call to [**IMoniker::BindToStorage**](/windows/win32/api/objidl/nf-objidl-imoniker-bindtostorage).</span></span>

<span data-ttu-id="29837-109">Os arquivos compostos em geral são implementados na parte superior de um objeto de matriz de bytes, uma abstração de um arquivo que representa os dados de um objeto como uma matriz de bytes simples.</span><span class="sxs-lookup"><span data-stu-id="29837-109">Compound Files in general are implemented on top of a byte array object, an abstraction of a file that represents an object's data as a flat byte array.</span></span> <span data-ttu-id="29837-110">O objeto da matriz de bytes expõe sua funcionalidade por meio da interface [**ILockBytes**](/windows/desktop/api/Objidl/nn-objidl-ilockbytes) .</span><span class="sxs-lookup"><span data-stu-id="29837-110">The byte array object exposes its functionality through the [**ILockBytes**](/windows/desktop/api/Objidl/nn-objidl-ilockbytes) interface.</span></span> <span data-ttu-id="29837-111">Se uma matriz de bytes der suporte ao armazenamento assíncrono não bloqueado, ela retornará E \_ pendente para a implementação de arquivo composto que, por sua vez, propaga o erro de volta para o chamador.</span><span class="sxs-lookup"><span data-stu-id="29837-111">If a byte array supports nonblocking asynchronous storage, it returns E\_PENDING to the compound-file implementation, which in turn propagates the error back to the caller.</span></span>

<span data-ttu-id="29837-112">Para manter o controle dos dados disponíveis durante um download, uma matriz de bytes que dá suporte ao armazenamento assíncrono expõe a interface [**IFillLockBytes**](/windows/desktop/api/Objidl/nn-objidl-ifilllockbytes) em um objeto wrapper fornecido pelo sistema especificamente para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="29837-112">To keep track of the data available during a download, a byte array that supports asynchronous storage exposes the [**IFillLockBytes**](/windows/desktop/api/Objidl/nn-objidl-ifilllockbytes) interface on a wrapper object provided by the system specifically for this purpose.</span></span> <span data-ttu-id="29837-113">O código de download fornecido por um moniker assíncrono chama essa interface para preencher a matriz de bytes de forma assíncrona, pois os dados estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="29837-113">The downloading code provided by an asynchronous moniker calls this interface to fill the byte array asynchronously, as data is available.</span></span> <span data-ttu-id="29837-114">O objeto wrapper também expõe uma interface **ILockBytes** , que a implementação dos arquivos compostos assíncronos usa para ler e gravar dados de e para a matriz.</span><span class="sxs-lookup"><span data-stu-id="29837-114">The wrapper object also exposes an **ILockBytes** interface, which the Asynchronous Compound Files implementation uses to read and write data from and to the array.</span></span>

<span data-ttu-id="29837-115">O armazenamento assíncrono e os objetos de fluxo fornecem um ponto de conexão para a interface [**IProgressNotify**](/windows/win32/api/objidl/nn-objidl-iprogressnotify) , que é implementada pelo código de download do moniker assíncrono.</span><span class="sxs-lookup"><span data-stu-id="29837-115">Asynchronous storage and stream objects provide a connection point for the [**IProgressNotify**](/windows/win32/api/objidl/nn-objidl-iprogressnotify) interface, which is implemented by the asynchronous moniker's downloading code.</span></span> <span data-ttu-id="29837-116">A implementação de arquivos compostos assíncronos chama **IProgressNotify** para fornecer ao Downloader informações sobre o status da operação de download.</span><span class="sxs-lookup"><span data-stu-id="29837-116">The Asynchronous Compound Files implementation calls **IProgressNotify** to provide the downloader with information about the status of the downloading operation.</span></span>

 

 