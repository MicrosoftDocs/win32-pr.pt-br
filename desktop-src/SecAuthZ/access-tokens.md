---
description: Um token de acesso é um objeto que descreve o contexto de segurança de um processo ou thread.
ms.assetid: 350159c9-2399-427a-ba44-c897a9664299
title: Tokens de acesso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0993c1f5aebab797ab28e61b36f59507e4d2f1ab
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103828831"
---
# <a name="access-tokens"></a><span data-ttu-id="42e40-103">Tokens de acesso</span><span class="sxs-lookup"><span data-stu-id="42e40-103">Access Tokens</span></span>

<span data-ttu-id="42e40-104">Um [*token de acesso*](/windows/desktop/SecGloss/a-gly) é um objeto que descreve o [*contexto de segurança*](/windows/desktop/SecGloss/s-gly) de um [*processo*](/windows/desktop/SecGloss/p-gly) ou thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-104">An [*access token*](/windows/desktop/SecGloss/a-gly) is an object that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of a [*process*](/windows/desktop/SecGloss/p-gly) or thread.</span></span> <span data-ttu-id="42e40-105">As informações em um token incluem a identidade e os privilégios da conta de usuário associada ao processo ou thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-105">The information in a token includes the identity and privileges of the user account associated with the process or thread.</span></span> <span data-ttu-id="42e40-106">Quando um usuário faz logon, o sistema verifica a senha do usuário comparando-a com as informações armazenadas em um banco de dados de segurança.</span><span class="sxs-lookup"><span data-stu-id="42e40-106">When a user logs on, the system verifies the user's password by comparing it with information stored in a security database.</span></span> <span data-ttu-id="42e40-107">Se a senha for [*autenticada*](/windows/desktop/SecGloss/a-gly), o sistema produzirá um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-107">If the password is [*authenticated*](/windows/desktop/SecGloss/a-gly), the system produces an access token.</span></span> <span data-ttu-id="42e40-108">Cada processo executado em nome desse usuário tem uma cópia desse token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-108">Every process executed on behalf of this user has a copy of this access token.</span></span>

<span data-ttu-id="42e40-109">O sistema usa um token de acesso para identificar o usuário quando um thread interage com um [objeto protegível](securable-objects.md) ou tenta executar uma tarefa do sistema que exige privilégios.</span><span class="sxs-lookup"><span data-stu-id="42e40-109">The system uses an access token to identify the user when a thread interacts with a [securable object](securable-objects.md) or tries to perform a system task that requires privileges.</span></span> <span data-ttu-id="42e40-110">Os tokens de acesso contêm as seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="42e40-110">Access tokens contain the following information:</span></span>

-   <span data-ttu-id="42e40-111">O [identificador de segurança](security-identifiers.md) (SID) da conta do usuário</span><span class="sxs-lookup"><span data-stu-id="42e40-111">The [security identifier](security-identifiers.md) (SID) for the user's account</span></span>
-   <span data-ttu-id="42e40-112">SIDs para os grupos dos quais o usuário é membro</span><span class="sxs-lookup"><span data-stu-id="42e40-112">SIDs for the groups of which the user is a member</span></span>
-   <span data-ttu-id="42e40-113">Um [*Sid de logon*](/windows/desktop/SecGloss/l-gly) que identifica a [*sessão de logon*](/windows/desktop/SecGloss/l-gly) atual</span><span class="sxs-lookup"><span data-stu-id="42e40-113">A [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current [*logon session*](/windows/desktop/SecGloss/l-gly)</span></span>
-   <span data-ttu-id="42e40-114">Uma lista dos [privilégios](privileges.md) mantidos pelo usuário ou pelos grupos do usuário</span><span class="sxs-lookup"><span data-stu-id="42e40-114">A list of the [privileges](privileges.md) held by either the user or the user's groups</span></span>
-   <span data-ttu-id="42e40-115">Um SID de proprietário</span><span class="sxs-lookup"><span data-stu-id="42e40-115">An owner SID</span></span>
-   <span data-ttu-id="42e40-116">O SID do grupo primário</span><span class="sxs-lookup"><span data-stu-id="42e40-116">The SID for the primary group</span></span>
-   <span data-ttu-id="42e40-117">A [DACL](access-control-lists.md) padrão que o sistema usa quando o usuário cria um objeto protegível sem especificar um [*descritor de segurança*](/windows/desktop/SecGloss/s-gly)</span><span class="sxs-lookup"><span data-stu-id="42e40-117">The default [DACL](access-control-lists.md) that the system uses when the user creates a securable object without specifying a [*security descriptor*](/windows/desktop/SecGloss/s-gly)</span></span>
-   <span data-ttu-id="42e40-118">A origem do token de acesso</span><span class="sxs-lookup"><span data-stu-id="42e40-118">The source of the access token</span></span>
-   <span data-ttu-id="42e40-119">Se o token é um token [*primário*](/windows/desktop/SecGloss/p-gly) ou de [representação](client-impersonation.md)</span><span class="sxs-lookup"><span data-stu-id="42e40-119">Whether the token is a [*primary*](/windows/desktop/SecGloss/p-gly) or [impersonation](client-impersonation.md) token</span></span>
-   <span data-ttu-id="42e40-120">Uma lista opcional de [restrição de SIDs](restricted-tokens.md)</span><span class="sxs-lookup"><span data-stu-id="42e40-120">An optional list of [restricting SIDs](restricted-tokens.md)</span></span>
-   <span data-ttu-id="42e40-121">Níveis de representação atuais</span><span class="sxs-lookup"><span data-stu-id="42e40-121">Current impersonation levels</span></span>
-   <span data-ttu-id="42e40-122">Outras estatísticas</span><span class="sxs-lookup"><span data-stu-id="42e40-122">Other statistics</span></span>

<span data-ttu-id="42e40-123">Cada processo tem um [*token primário*](/windows/desktop/SecGloss/p-gly) que descreve o [*contexto de segurança*](/windows/desktop/SecGloss/s-gly) da conta de usuário associada ao processo.</span><span class="sxs-lookup"><span data-stu-id="42e40-123">Every process has a [*primary token*](/windows/desktop/SecGloss/p-gly) that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of the user account associated with the process.</span></span> <span data-ttu-id="42e40-124">Por padrão, o sistema usa o token primário quando um thread do processo interage com um objeto protegível.</span><span class="sxs-lookup"><span data-stu-id="42e40-124">By default, the system uses the primary token when a thread of the process interacts with a securable object.</span></span> <span data-ttu-id="42e40-125">Além disso, um thread pode representar uma conta de cliente.</span><span class="sxs-lookup"><span data-stu-id="42e40-125">Moreover, a thread can impersonate a client account.</span></span> <span data-ttu-id="42e40-126">A representação permite que o thread interaja com objetos protegíveis usando o contexto de segurança do cliente.</span><span class="sxs-lookup"><span data-stu-id="42e40-126">Impersonation allows the thread to interact with securable objects using the client's security context.</span></span> <span data-ttu-id="42e40-127">Um thread que está representando um cliente tem um token primário e um [*token de representação*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="42e40-127">A thread that is impersonating a client has both a primary token and an [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="42e40-128">Use a função [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) para recuperar um identificador para o token primário de um processo.</span><span class="sxs-lookup"><span data-stu-id="42e40-128">Use the [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) function to retrieve a handle to the primary token of a process.</span></span> <span data-ttu-id="42e40-129">Use a função [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) para recuperar um identificador para o token de representação de um thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-129">Use the [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) function to retrieve a handle to the impersonation token of a thread.</span></span> <span data-ttu-id="42e40-130">Para obter mais informações, consulte [Impersonation](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="42e40-130">For more information, see [Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="42e40-131">Você pode usar as seguintes funções para manipular tokens de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-131">You can use the following functions to manipulate access tokens.</span></span>



| <span data-ttu-id="42e40-132">Função</span><span class="sxs-lookup"><span data-stu-id="42e40-132">Function</span></span>                                               | <span data-ttu-id="42e40-133">Descrição</span><span class="sxs-lookup"><span data-stu-id="42e40-133">Description</span></span>                                                                                                                                                            |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="42e40-134">**AdjustTokenGroups**</span><span class="sxs-lookup"><span data-stu-id="42e40-134">**AdjustTokenGroups**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups)         | <span data-ttu-id="42e40-135">Altera as informações do grupo em um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-135">Changes the group information in an access token.</span></span>                                                                                                                      |
| [<span data-ttu-id="42e40-136">**AdjustTokenPrivileges**</span><span class="sxs-lookup"><span data-stu-id="42e40-136">**AdjustTokenPrivileges**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) | <span data-ttu-id="42e40-137">Habilita ou desabilita os privilégios em um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-137">Enables or disables the privileges in an access token.</span></span> <span data-ttu-id="42e40-138">Ele não concede novos privilégios nem revoga os existentes.</span><span class="sxs-lookup"><span data-stu-id="42e40-138">It does not grant new privileges or revoke existing ones.</span></span>                                                       |
| [<span data-ttu-id="42e40-139">**CheckTokenMembership**</span><span class="sxs-lookup"><span data-stu-id="42e40-139">**CheckTokenMembership**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership)   | <span data-ttu-id="42e40-140">Determina se um SID especificado está habilitado em um token de acesso especificado.</span><span class="sxs-lookup"><span data-stu-id="42e40-140">Determines whether a specified SID is enabled in a specified access token.</span></span>                                                                                             |
| [<span data-ttu-id="42e40-141">**CreateRestrictedToken**</span><span class="sxs-lookup"><span data-stu-id="42e40-141">**CreateRestrictedToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) | <span data-ttu-id="42e40-142">Cria um novo token que é uma versão restrita de um token existente.</span><span class="sxs-lookup"><span data-stu-id="42e40-142">Creates a new token that is a restricted version of an existing token.</span></span> <span data-ttu-id="42e40-143">O token restrito pode ter SIDs desabilitados, privilégios excluídos e uma lista de SIDs restritos.</span><span class="sxs-lookup"><span data-stu-id="42e40-143">The restricted token can have disabled SIDs, deleted privileges, and a list of restricted SIDs.</span></span> |
| [<span data-ttu-id="42e40-144">**DuplicateToken**</span><span class="sxs-lookup"><span data-stu-id="42e40-144">**DuplicateToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetoken)               | <span data-ttu-id="42e40-145">Cria um novo token de representação que duplica um token existente.</span><span class="sxs-lookup"><span data-stu-id="42e40-145">Creates a new impersonation token that duplicates an existing token.</span></span>                                                                                                   |
| [<span data-ttu-id="42e40-146">**DuplicateTokenEx**</span><span class="sxs-lookup"><span data-stu-id="42e40-146">**DuplicateTokenEx**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetokenex)           | <span data-ttu-id="42e40-147">Cria um novo token primário ou token de representação que duplica um token existente.</span><span class="sxs-lookup"><span data-stu-id="42e40-147">Creates a new primary token or impersonation token that duplicates an existing token.</span></span>                                                                                  |
| [<span data-ttu-id="42e40-148">**GetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="42e40-148">**GetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation)     | <span data-ttu-id="42e40-149">Recupera informações sobre um token.</span><span class="sxs-lookup"><span data-stu-id="42e40-149">Retrieves information about a token.</span></span>                                                                                                                                   |
| [<span data-ttu-id="42e40-150">**IsTokenRestricted**</span><span class="sxs-lookup"><span data-stu-id="42e40-150">**IsTokenRestricted**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-istokenrestricted)         | <span data-ttu-id="42e40-151">Determina se um token tem uma lista de SIDs de restrição.</span><span class="sxs-lookup"><span data-stu-id="42e40-151">Determines whether a token has a list of restricting SIDs.</span></span>                                                                                                             |
| [<span data-ttu-id="42e40-152">**OpenProcessToken**</span><span class="sxs-lookup"><span data-stu-id="42e40-152">**OpenProcessToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)           | <span data-ttu-id="42e40-153">Recupera um identificador para o token de acesso primário de um processo.</span><span class="sxs-lookup"><span data-stu-id="42e40-153">Retrieves a handle to the primary access token for a process.</span></span>                                                                                                          |
| [<span data-ttu-id="42e40-154">**OpenThreadToken**</span><span class="sxs-lookup"><span data-stu-id="42e40-154">**OpenThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken)             | <span data-ttu-id="42e40-155">Recupera um identificador para o token de acesso de representação de um thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-155">Retrieves a handle to the impersonation access token for a thread.</span></span>                                                                                                     |
| [<span data-ttu-id="42e40-156">**SetThreadToken**</span><span class="sxs-lookup"><span data-stu-id="42e40-156">**SetThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken)               | <span data-ttu-id="42e40-157">Atribui ou remove um token de representação para um thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-157">Assigns or removes an impersonation token for a thread.</span></span>                                                                                                                |
| [<span data-ttu-id="42e40-158">**SetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="42e40-158">**SetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-settokeninformation)     | <span data-ttu-id="42e40-159">Altera o proprietário de um token, o grupo primário ou a DACL padrão.</span><span class="sxs-lookup"><span data-stu-id="42e40-159">Changes a token's owner, primary group, or default DACL.</span></span>                                                                                                               |



 

<span data-ttu-id="42e40-160">As funções de token de acesso usam as seguintes estruturas para descrever as partes de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-160">The access token functions use the following structures to describe the parts of an access token.</span></span>



| <span data-ttu-id="42e40-161">Estrutura</span><span class="sxs-lookup"><span data-stu-id="42e40-161">Structure</span></span>                                            | <span data-ttu-id="42e40-162">Descrição</span><span class="sxs-lookup"><span data-stu-id="42e40-162">Description</span></span>                                                                                           |
|------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="42e40-163">**controle de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-163">**TOKEN\_CONTROL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_control)              | <span data-ttu-id="42e40-164">Informações que identificam um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-164">Information that identifies an access token.</span></span>                                                          |
| [<span data-ttu-id="42e40-165">**\_DACL padrão do token \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-165">**TOKEN\_DEFAULT\_DACL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_default_dacl)   | <span data-ttu-id="42e40-166">A DACL padrão que o sistema usa nos descritores de segurança de novos objetos criados por um thread.</span><span class="sxs-lookup"><span data-stu-id="42e40-166">The default DACL that the system uses in the security descriptors of new objects created by a thread.</span></span> |
| [<span data-ttu-id="42e40-167">**grupos de TOKENs \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-167">**TOKEN\_GROUPS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_groups)                | <span data-ttu-id="42e40-168">Especifica os SIDs e atributos dos SIDs de grupo em um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-168">Specifies the SIDs and attributes of the group SIDs in an access token.</span></span>                               |
| [<span data-ttu-id="42e40-169">**proprietário do TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-169">**TOKEN\_OWNER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_owner)                  | <span data-ttu-id="42e40-170">O SID do proprietário padrão para os descritores de segurança dos novos objetos.</span><span class="sxs-lookup"><span data-stu-id="42e40-170">The default owner SID for the security descriptors of new objects.</span></span>                                    |
| [<span data-ttu-id="42e40-171">**\_grupo primário de tokens \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-171">**TOKEN\_PRIMARY\_GROUP**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_primary_group) | <span data-ttu-id="42e40-172">O SID do grupo primário padrão para os descritores de segurança dos novos objetos.</span><span class="sxs-lookup"><span data-stu-id="42e40-172">The default primary group SID for the security descriptors of new objects.</span></span>                            |
| [<span data-ttu-id="42e40-173">**privilégios de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-173">**TOKEN\_PRIVILEGES**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_privileges)        | <span data-ttu-id="42e40-174">Os privilégios associados a um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-174">The privileges associated with an access token.</span></span> <span data-ttu-id="42e40-175">Também determina se os privilégios estão habilitados.</span><span class="sxs-lookup"><span data-stu-id="42e40-175">Also determines whether the privileges are enabled.</span></span>   |
| [<span data-ttu-id="42e40-176">**origem do TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-176">**TOKEN\_SOURCE**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_source)                | <span data-ttu-id="42e40-177">A origem de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-177">The source of an access token.</span></span>                                                                        |
| [<span data-ttu-id="42e40-178">**Estatísticas de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-178">**TOKEN\_STATISTICS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_statistics)        | <span data-ttu-id="42e40-179">Estatísticas associadas a um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-179">Statistics associated with an access token.</span></span>                                                           |
| [<span data-ttu-id="42e40-180">**usuário do TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-180">**TOKEN\_USER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_user)                    | <span data-ttu-id="42e40-181">O SID do usuário associado a um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-181">The SID of the user associated with an access token.</span></span>                                                  |



 

<span data-ttu-id="42e40-182">As funções de token de acesso usam os seguintes tipos de enumeração.</span><span class="sxs-lookup"><span data-stu-id="42e40-182">The access token functions use the following enumeration types.</span></span>



| <span data-ttu-id="42e40-183">Tipo de enumeração</span><span class="sxs-lookup"><span data-stu-id="42e40-183">Enumeration type</span></span>                                             | <span data-ttu-id="42e40-184">Especifica</span><span class="sxs-lookup"><span data-stu-id="42e40-184">Specifies</span></span>                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="42e40-185">**\_classe de informações de token \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-185">**TOKEN\_INFORMATION\_CLASS**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_information_class) | <span data-ttu-id="42e40-186">Identifica o tipo de informações que estão sendo definidas ou recuperadas de um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="42e40-186">Identifies the type of information being set or retrieved from an access token.</span></span> |
| [<span data-ttu-id="42e40-187">**tipo de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="42e40-187">**TOKEN\_TYPE**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_type)                            | <span data-ttu-id="42e40-188">Identifica um token de acesso como um token primário ou de representação.</span><span class="sxs-lookup"><span data-stu-id="42e40-188">Identifies an access token as a primary or impersonation token.</span></span>                 |



 

 

 
