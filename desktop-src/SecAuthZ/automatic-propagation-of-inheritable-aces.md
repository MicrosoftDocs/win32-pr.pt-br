---
description: As funções SetNamedSecurityInfo e SetSecurityInfo dão suporte à propagação automática de ACEs (entradas de controle de acesso) herdáveis.
ms.assetid: 0aa49b9b-13e3-4ef9-921d-ea47a013e5a1
title: Propagação automática de ACEs herdáveis
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8fab03c73a1c926468e46a0d0492e512dab42af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104172320"
---
# <a name="automatic-propagation-of-inheritable-aces"></a><span data-ttu-id="affd5-103">Propagação automática de ACEs herdáveis</span><span class="sxs-lookup"><span data-stu-id="affd5-103">Automatic Propagation of Inheritable ACEs</span></span>

<span data-ttu-id="affd5-104">As funções [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) e [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) dão suporte à propagação automática de ACEs (entradas de [*controle de acesso*](/windows/desktop/SecGloss/a-gly) ) herdáveis.</span><span class="sxs-lookup"><span data-stu-id="affd5-104">The [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions support automatic propagation of inheritable [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs).</span></span> <span data-ttu-id="affd5-105">Por exemplo, se você usar essas funções para adicionar uma ACE herdável a um diretório em um NTFS, o sistema aplicará a ACE conforme apropriado às ACLs ( [*listas de controle de acesso*](/windows/desktop/SecGloss/a-gly) ) de quaisquer subdiretórios ou arquivos existentes.</span><span class="sxs-lookup"><span data-stu-id="affd5-105">For example, if you use these functions to add an inheritable ACE to a directory in an NTFS, the system applies the ACE as appropriate to the [*access control lists*](/windows/desktop/SecGloss/a-gly) (ACLs) of any existing subdirectories or files.</span></span>

<span data-ttu-id="affd5-106">ACEs aplicadas diretamente têm precedência sobre ACEs herdadas.</span><span class="sxs-lookup"><span data-stu-id="affd5-106">Directly applied ACEs have precedence over inherited ACEs.</span></span> <span data-ttu-id="affd5-107">O sistema implementa essa precedência colocando ACEs diretamente aplicadas à frente de ACEs herdadas em uma DACL ( [*lista de controle de acesso discricionário*](/windows/desktop/SecGloss/d-gly) ).</span><span class="sxs-lookup"><span data-stu-id="affd5-107">The system implements this precedence by placing directly applied ACEs ahead of inherited ACEs in a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL).</span></span> <span data-ttu-id="affd5-108">Quando você chama as funções [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) e [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) para definir as informações de segurança de um objeto, o sistema impõe o modelo de herança atual nas ACLs de todos os objetos na hierarquia abaixo do objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="affd5-108">When you call the [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions to set the security information of an object, the system imposes the current inheritance model on the ACLs of all objects in the hierarchy below the target object.</span></span> <span data-ttu-id="affd5-109">Para objetos que foram convertidos para o modelo de herança atual, os bits herdados auto herdados do SE da \_ DACL \_ e da \_ \_ SACL \_ \_ são definidos no campo de controle do [*descritor de segurança*](/windows/desktop/SecGloss/s-gly) do objeto.</span><span class="sxs-lookup"><span data-stu-id="affd5-109">For objects that have been converted to the current inheritance model, the SE\_DACL\_AUTO\_INHERITED and SE\_SACL\_AUTO\_INHERITED bits are set in the control field of the [*security descriptor*](/windows/desktop/SecGloss/s-gly) of the object.</span></span>

<span data-ttu-id="affd5-110">Quando você cria um novo descritor de segurança que reflete o modelo de herança atual, é necessário ter cuidado para não alterar a semântica do descritor de segurança.</span><span class="sxs-lookup"><span data-stu-id="affd5-110">When you build a new security descriptor that reflects the current inheritance model, care is taken not to change the semantics of the security descriptor.</span></span> <span data-ttu-id="affd5-111">Assim, as ACEs allow e Deny nunca são movidas em relação uma à outra.</span><span class="sxs-lookup"><span data-stu-id="affd5-111">As such, allow and deny ACEs are never moved in relation to one another.</span></span> <span data-ttu-id="affd5-112">Se esse movimento for necessário (por exemplo, para posicionar todas as ACEs não herdadas na frente de uma ACL), a ACL será marcada como protegida para evitar a alteração semântica.</span><span class="sxs-lookup"><span data-stu-id="affd5-112">If such movement is needed (for instance to place all noninherited ACEs at the front of an ACL), the ACL is marked as protected to prevent the semantic change.</span></span>

<span data-ttu-id="affd5-113">O sistema usa as seguintes regras ao propagar ACEs herdadas para objetos filho:</span><span class="sxs-lookup"><span data-stu-id="affd5-113">The system uses the following rules when propagating inherited ACEs to child objects:</span></span>

-   <span data-ttu-id="affd5-114">Se um objeto filho sem nenhuma DACL herdar uma ACE, o resultado será um objeto filho com uma DACL que contém apenas a ACE herdada.</span><span class="sxs-lookup"><span data-stu-id="affd5-114">If a child object with no DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="affd5-115">Se um objeto filho com uma DACL vazia herdar uma ACE, o resultado será um objeto filho com uma DACL que contém apenas a ACE herdada.</span><span class="sxs-lookup"><span data-stu-id="affd5-115">If a child object with an empty DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="affd5-116">Se você remover uma ACE herdável de um objeto pai, a herança automática removerá todas as cópias da ACE que foram herdadas por objetos filho.</span><span class="sxs-lookup"><span data-stu-id="affd5-116">If you remove an inheritable ACE from a parent object, automatic inheritance removes any copies of the ACE that were inherited by child objects.</span></span>
-   <span data-ttu-id="affd5-117">Se a herança automática resultar na remoção de todas as ACEs da DACL de um objeto filho, o objeto filho terá uma DACL vazia em vez de nenhuma DACL.</span><span class="sxs-lookup"><span data-stu-id="affd5-117">If automatic inheritance results in the removal of all ACEs from the DACL of a child object, the child object has an empty DACL rather than no DACL.</span></span>

<span data-ttu-id="affd5-118">Essas regras podem ter o resultado inesperado de converter um objeto sem DACL para um objeto com uma DACL vazia.</span><span class="sxs-lookup"><span data-stu-id="affd5-118">These rules can have the unexpected result of converting an object with no DACL to an object with an empty DACL.</span></span> <span data-ttu-id="affd5-119">Um objeto sem nenhuma DACL permite acesso completo, mas um objeto com uma DACL vazia não permite acesso.</span><span class="sxs-lookup"><span data-stu-id="affd5-119">An object with no DACL allows full access, but an object with an empty DACL allows no access.</span></span> <span data-ttu-id="affd5-120">Como um exemplo de como essas regras podem criar uma DACL vazia, suponha que você adicione uma ACE herdável ao objeto raiz de uma árvore de objetos.</span><span class="sxs-lookup"><span data-stu-id="affd5-120">As an example of how these rules can create an empty DACL, suppose you add an inheritable ACE to the root object of a tree of objects.</span></span> <span data-ttu-id="affd5-121">A herança automática propaga a ACE herdável para todos os objetos na árvore.</span><span class="sxs-lookup"><span data-stu-id="affd5-121">Automatic inheritance propagates the inheritable ACE to all the objects in the tree.</span></span> <span data-ttu-id="affd5-122">Os objetos filho que começaram com nenhuma DACL agora têm uma DACL com a ACE herdada.</span><span class="sxs-lookup"><span data-stu-id="affd5-122">Child objects that started with no DACL now have a DACL with the inherited ACE.</span></span> <span data-ttu-id="affd5-123">Se você remover a ACE herdável do objeto raiz, o sistema propagará automaticamente a alteração para os objetos filho.</span><span class="sxs-lookup"><span data-stu-id="affd5-123">If you remove the inheritable ACE from the root object, the system automatically propagates the change to the child objects.</span></span> <span data-ttu-id="affd5-124">Os objetos filho iniciados sem nenhuma DACL (permitindo acesso completo) agora têm uma DACL vazia (não permitindo acesso).</span><span class="sxs-lookup"><span data-stu-id="affd5-124">Child objects that started with no DACL (allowing full access) now have an empty DACL (allowing no access).</span></span>

<span data-ttu-id="affd5-125">Para garantir que um objeto filho sem nenhuma DACL não seja afetado por ACEs herdáveis, defina o \_ sinalizador se \_ protegido por DACL no descritor de segurança do objeto.</span><span class="sxs-lookup"><span data-stu-id="affd5-125">To ensure that a child object with no DACL is not affected by inheritable ACEs, set the SE\_DACL\_PROTECTED flag in the security descriptor of the object.</span></span>

<span data-ttu-id="affd5-126">Para obter informações sobre como criar uma DACL corretamente, consulte [criando uma DACL](/windows/desktop/SecBP/creating-a-dacl).</span><span class="sxs-lookup"><span data-stu-id="affd5-126">For information about how to properly create a DACL, see [Creating a DACL](/windows/desktop/SecBP/creating-a-dacl).</span></span>

 

 
