---
description: O Windows dá suporte a um conjunto de funções que criam uma ACL (lista de controle de acesso) ou modificam as ACEs (entradas de controle de acesso) em uma ACL existente.
ms.assetid: 71301aab-1040-4f61-855f-2b891c8b6077
title: Criando ou modificando uma ACL
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a0deb72bcd1a1c805dd8524027601952dda0eac1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103827453"
---
# <a name="creating-or-modifying-an-acl"></a><span data-ttu-id="197ea-103">Criando ou modificando uma ACL</span><span class="sxs-lookup"><span data-stu-id="197ea-103">Creating or Modifying an ACL</span></span>

<span data-ttu-id="197ea-104">O Windows dá suporte a um conjunto de funções que criam uma ACL ( [*lista de controle de acesso*](/windows/desktop/SecGloss/a-gly) ) ou modificam as ACEs (entradas de controle de [*acesso*](/windows/desktop/SecGloss/a-gly) ) em uma ACL existente.</span><span class="sxs-lookup"><span data-stu-id="197ea-104">Windows supports a set of functions that create an [*access control list*](/windows/desktop/SecGloss/a-gly) (ACL) or modify the [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in an existing ACL.</span></span>

<span data-ttu-id="197ea-105">A função [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) cria uma nova ACL.</span><span class="sxs-lookup"><span data-stu-id="197ea-105">The [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) function creates a new ACL.</span></span> <span data-ttu-id="197ea-106">**SetEntriesInAcl** pode especificar um conjunto completamente novo de ACEs para a ACL ou pode mesclar uma ou mais ACEs novas com as ACEs de uma ACL existente.</span><span class="sxs-lookup"><span data-stu-id="197ea-106">**SetEntriesInAcl** can specify a completely new set of ACEs for the ACL, or it can merge one or more new ACEs with the ACEs of an existing ACL.</span></span> <span data-ttu-id="197ea-107">A função **SetEntriesInAcl** usa uma matriz de estruturas de [**\_ acesso explícita**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) para especificar as informações para as novas ACEs.</span><span class="sxs-lookup"><span data-stu-id="197ea-107">The **SetEntriesInAcl** function uses an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures to specify the information for the new ACEs.</span></span> <span data-ttu-id="197ea-108">Cada estrutura de **\_ acesso explícita** contém informações que DESCREVEM uma única Ace.</span><span class="sxs-lookup"><span data-stu-id="197ea-108">Each **EXPLICIT\_ACCESS** structure contains information that describes a single ACE.</span></span> <span data-ttu-id="197ea-109">Essas informações incluem os direitos de acesso, o tipo de ACE, os sinalizadores que controlam a herança de ACE e uma estrutura de [**confiança**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) que identifica o Trustee.</span><span class="sxs-lookup"><span data-stu-id="197ea-109">This information includes the access rights, the type of ACE, the flags that control ACE inheritance, and a [**TRUSTEE**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) structure that identifies the trustee.</span></span>

<span data-ttu-id="197ea-110">**Para adicionar uma nova ACE a uma ACL existente**</span><span class="sxs-lookup"><span data-stu-id="197ea-110">**To add a new ACE to an existing ACL**</span></span>

1.  <span data-ttu-id="197ea-111">Use a função [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) ou [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) para obter a DACL ou SACL existente do [*descritor de segurança*](/windows/desktop/SecGloss/s-gly)de um objeto.</span><span class="sxs-lookup"><span data-stu-id="197ea-111">Use the [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) or [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) function to get the existing DACL or SACL from an object's [*security descriptor*](/windows/desktop/SecGloss/s-gly).</span></span>
2.  <span data-ttu-id="197ea-112">Para cada nova ACE, chame a função [**BuildExplicitAccessWithName**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) para preencher uma estrutura de [**\_ acesso explícita**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) com as informações que descrevem a Ace.</span><span class="sxs-lookup"><span data-stu-id="197ea-112">For each new ACE, call the [**BuildExplicitAccessWithName**](/windows/desktop/api/Aclapi/nf-aclapi-buildexplicitaccesswithnamea) function to fill an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure with the information that describes the ACE.</span></span>
3.  <span data-ttu-id="197ea-113">Chame [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), ESPECIFICANDO a ACL existente e uma matriz de estruturas de [**\_ acesso explícita**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) para as novas ACEs.</span><span class="sxs-lookup"><span data-stu-id="197ea-113">Call [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla), specifying the existing ACL and an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures for the new ACEs.</span></span> <span data-ttu-id="197ea-114">A função **SetEntriesInAcl** aloca e INICIALIZA a ACL e suas ACEs.</span><span class="sxs-lookup"><span data-stu-id="197ea-114">The **SetEntriesInAcl** function allocates and initializes the ACL and its ACEs.</span></span>
4.  <span data-ttu-id="197ea-115">Chame a função [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) ou [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) para anexar a nova ACL ao descritor de segurança do objeto.</span><span class="sxs-lookup"><span data-stu-id="197ea-115">Call the [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) or [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) function to attach the new ACL to the object's security descriptor.</span></span>

<span data-ttu-id="197ea-116">Se o chamador especificar uma ACL existente, o [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) mesclará as novas informações de ACE com as ACEs existentes na ACL.</span><span class="sxs-lookup"><span data-stu-id="197ea-116">If the caller specifies an existing ACL, [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) merges the new ACE information with the existing ACEs in the ACL.</span></span> <span data-ttu-id="197ea-117">Considere o caso, por exemplo, no qual a ACL existente concede acesso a um confiável especificado e uma estrutura de [**\_ acesso explícita**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) nega o acesso ao mesmo Trustee.</span><span class="sxs-lookup"><span data-stu-id="197ea-117">Consider the case, for example, in which the existing ACL grants access to a specified trustee and an [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structure denies access to the same trustee.</span></span> <span data-ttu-id="197ea-118">Nesse caso, **SetEntriesInAcl** adiciona uma nova ACE de acesso negado para o Trustee e exclui ou modifica a Ace permitida pelo Access existente para o Trustee.</span><span class="sxs-lookup"><span data-stu-id="197ea-118">In this case, **SetEntriesInAcl** adds a new access-denied ACE for the trustee and deletes or modifies the existing access-allowed ACE for the trustee.</span></span>

<span data-ttu-id="197ea-119">Para obter um exemplo de código que mescla uma nova ACE em uma ACL existente, consulte [modificando as ACLs de um objeto em C++](modifying-the-acls-of-an-object-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="197ea-119">For sample code that merges a new ACE into an existing ACL, see [Modifying the ACLs of an Object in C++](modifying-the-acls-of-an-object-in-c--.md).</span></span>

 

 
