---
description: Fornece um mecanismo para controlar o acesso a objetos protegíveis.
ms.assetid: 5923cb4c-f663-40d2-989a-07d71ac475db
title: Controle de Integridade de Credenciais
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c184ba01da0a55309fcb27ace9b0fe156edd6425
ms.sourcegitcommit: 4570ac533e129ff88b23f2c2b69e0140ead3a4a4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/26/2021
ms.locfileid: "105748955"
---
# <a name="mandatory-integrity-control"></a><span data-ttu-id="15f03-103">Controle de Integridade de Credenciais</span><span class="sxs-lookup"><span data-stu-id="15f03-103">Mandatory Integrity Control</span></span>

<span data-ttu-id="15f03-104">O Controle de Integridade de Credenciais (MIC) fornece um mecanismo para controlar o acesso a objetos protegíveis.</span><span class="sxs-lookup"><span data-stu-id="15f03-104">Mandatory Integrity Control (MIC) provides a mechanism for controlling access to securable objects.</span></span> <span data-ttu-id="15f03-105">Esse mecanismo é além do controle de acesso discricional e avalia o acesso antes que as verificações de acesso na [*lista de controle de acesso discricional*](/windows/desktop/SecGloss/d-gly) (DACL) de um objeto sejam avaliadas.</span><span class="sxs-lookup"><span data-stu-id="15f03-105">This mechanism is in addition to discretionary access control and evaluates access before access checks against an object's [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL) are evaluated.</span></span>

<span data-ttu-id="15f03-106">O MIC usa níveis de integridade e política obrigatória para avaliar o acesso.</span><span class="sxs-lookup"><span data-stu-id="15f03-106">MIC uses integrity levels and mandatory policy to evaluate access.</span></span> <span data-ttu-id="15f03-107">[*Entidades de segurança*](/windows/desktop/SecGloss/s-gly) e objetos protegíveis recebem níveis de integridade que determinam seus níveis de proteção ou acesso.</span><span class="sxs-lookup"><span data-stu-id="15f03-107">[*Security principals*](/windows/desktop/SecGloss/s-gly) and securable objects are assigned integrity levels that determine their levels of protection or access.</span></span> <span data-ttu-id="15f03-108">Por exemplo, uma entidade com um nível de baixa integridade não pode gravar em um objeto com um nível de integridade médio, mesmo se a DACL do objeto permitir acesso de gravação à entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="15f03-108">For example, a principal with a low integrity level cannot write to an object with a medium integrity level, even if that object's DACL allows write access to the principal.</span></span>

<span data-ttu-id="15f03-109">O Windows define quatro níveis de integridade: baixo, médio, alto e sistema.</span><span class="sxs-lookup"><span data-stu-id="15f03-109">Windows defines four integrity levels: low, medium, high, and system.</span></span> <span data-ttu-id="15f03-110">Os usuários padrão recebem alto, os usuários com privilégios elevados recebem alta.</span><span class="sxs-lookup"><span data-stu-id="15f03-110">Standard users receive medium, elevated users receive high.</span></span> <span data-ttu-id="15f03-111">Os processos que você inicia e os objetos criados recebem seu nível de integridade (médio ou alto) ou baixo se o nível do arquivo executável for baixo; os serviços do sistema recebem a integridade do sistema.</span><span class="sxs-lookup"><span data-stu-id="15f03-111">Processes you start and objects you create receive your integrity level (medium or high) or low if the executable file's level is low; system services receive system integrity.</span></span> <span data-ttu-id="15f03-112">Objetos que não têm um rótulo de integridade são tratados como médios pelo sistema operacional; Isso impede que o código de baixa integridade modifique objetos sem rótulo.</span><span class="sxs-lookup"><span data-stu-id="15f03-112">Objects that lack an integrity label are treated as medium by the operating system; this prevents low-integrity code from modifying unlabeled objects.</span></span> <span data-ttu-id="15f03-113">Além disso, o Windows garante que os processos em execução com um nível de baixa integridade não possam obter acesso a um processo associado a um contêiner de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="15f03-113">Additionally, Windows ensures that processes running with a low integrity level cannot obtain access to a process which is associated with an app container.</span></span>

## <a name="integrity-labels"></a><span data-ttu-id="15f03-114">Rótulos de integridade</span><span class="sxs-lookup"><span data-stu-id="15f03-114">Integrity Labels</span></span>

<span data-ttu-id="15f03-115">Rótulos de integridade especificam os níveis de integridade de objetos protegíveis e entidades de segurança.</span><span class="sxs-lookup"><span data-stu-id="15f03-115">Integrity labels specify the integrity levels of securable objects and security principals.</span></span> <span data-ttu-id="15f03-116">Os rótulos de integridade são representados por [*SIDs de integridade*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="15f03-116">Integrity labels are represented by [*integrity SIDs*](/windows/desktop/SecGloss/i-gly).</span></span> <span data-ttu-id="15f03-117">O SID de integridade para um objeto protegível é armazenado em sua SACL ( [*lista de controle de acesso*](/windows/desktop/SecGloss/s-gly) ) do sistema.</span><span class="sxs-lookup"><span data-stu-id="15f03-117">The integrity SID for a securable object is stored in its [*system access control list*](/windows/desktop/SecGloss/s-gly) (SACL).</span></span> <span data-ttu-id="15f03-118">A SACL contém uma ACE ( [*entrada de controle de acesso*](/windows/desktop/SecGloss/a-gly) ) de [**\_ \_ rótulo \_ obrigatório do sistema**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) que, por sua vez, contém o Sid de integridade.</span><span class="sxs-lookup"><span data-stu-id="15f03-118">The SACL contains a [**SYSTEM\_MANDATORY\_LABEL\_ACE**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) [*access control entry*](/windows/desktop/SecGloss/a-gly) (ACE) that in turn contains the integrity SID.</span></span> <span data-ttu-id="15f03-119">Qualquer objeto sem um SID de integridade é tratado como se tivesse uma integridade média.</span><span class="sxs-lookup"><span data-stu-id="15f03-119">Any object without an integrity SID is treated as if it had medium integrity.</span></span>

<span data-ttu-id="15f03-120">O SID de integridade para uma entidade de segurança é armazenado em seu token de acesso.</span><span class="sxs-lookup"><span data-stu-id="15f03-120">The integrity SID for a security principal is stored in its access token.</span></span> <span data-ttu-id="15f03-121">Um token de acesso pode conter um ou mais SIDs de integridade.</span><span class="sxs-lookup"><span data-stu-id="15f03-121">An access token may contain one or more integrity SIDs.</span></span>

<span data-ttu-id="15f03-122">Para obter informações detalhadas sobre os SIDs de integridade definidos, consulte [SIDs conhecidos](well-known-sids.md).</span><span class="sxs-lookup"><span data-stu-id="15f03-122">For detailed information about the defined integrity SIDs, see [Well-known SIDs](well-known-sids.md).</span></span>

## <a name="process-creation"></a><span data-ttu-id="15f03-123">Criação de processo</span><span class="sxs-lookup"><span data-stu-id="15f03-123">Process Creation</span></span>

<span data-ttu-id="15f03-124">Quando um usuário tenta iniciar um arquivo executável, o novo processo é criado com o mínimo do nível de integridade do usuário e o nível de integridade do arquivo.</span><span class="sxs-lookup"><span data-stu-id="15f03-124">When a user attempts to launch an executable file, the new process is created with the minimum of the user integrity level and the file integrity level.</span></span> <span data-ttu-id="15f03-125">Isso significa que o novo processo nunca será executado com maior integridade do que o arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="15f03-125">This means that the new process will never execute with higher integrity than the executable file.</span></span> <span data-ttu-id="15f03-126">Se o usuário administrador executar um programa de baixa integridade, o token para o novo processo funcionará com o nível de baixa integridade.</span><span class="sxs-lookup"><span data-stu-id="15f03-126">If the administrator user executes a low integrity program, the token for the new process functions with the low integrity level.</span></span> <span data-ttu-id="15f03-127">Isso ajuda a proteger um usuário que inicia código não confiável de atos mal-intencionados executados por esse código.</span><span class="sxs-lookup"><span data-stu-id="15f03-127">This helps protect a user who launches untrustworthy code from malicious acts performed by that code.</span></span> <span data-ttu-id="15f03-128">Os dados do usuário, que estão no nível de integridade do usuário típico, são protegidos contra gravação em relação a esse novo processo.</span><span class="sxs-lookup"><span data-stu-id="15f03-128">The user data, which is at the typical user integrity level, is write-protected against this new process.</span></span>

## <a name="mandatory-policy"></a><span data-ttu-id="15f03-129">Política obrigatória</span><span class="sxs-lookup"><span data-stu-id="15f03-129">Mandatory Policy</span></span>

<span data-ttu-id="15f03-130">A [**Ace \_ \_ \_ Ace do rótulo obrigatório do sistema**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) na SACL de um objeto protegível contém uma máscara de acesso que especifica o acesso que as entidades de segurança com níveis de integridade inferiores ao objeto são concedidas.</span><span class="sxs-lookup"><span data-stu-id="15f03-130">The [**SYSTEM\_MANDATORY\_LABEL\_ACE**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) ACE in the SACL of a securable object contains an access mask that specifies the access that principals with integrity levels lower than the object are granted.</span></span> <span data-ttu-id="15f03-131">Os valores definidos para esta máscara de acesso **são \_ rótulo obrigatório do sistema \_ \_ sem \_ gravação \_**, **\_ rótulo obrigatório do sistema \_ \_ sem \_ leitura \_** e **\_ rótulo obrigatório do sistema \_ \_ não \_ executar \_**.</span><span class="sxs-lookup"><span data-stu-id="15f03-131">The values defined for this access mask are **SYSTEM\_MANDATORY\_LABEL\_NO\_WRITE\_UP**, **SYSTEM\_MANDATORY\_LABEL\_NO\_READ\_UP**, and **SYSTEM\_MANDATORY\_LABEL\_NO\_EXECUTE\_UP**.</span></span> <span data-ttu-id="15f03-132">Por padrão, o sistema cria todos os objetos com uma máscara de acesso de **\_ rótulo obrigatório do sistema \_ \_ sem \_ gravação \_**.</span><span class="sxs-lookup"><span data-stu-id="15f03-132">By default, the system creates every object with an access mask of **SYSTEM\_MANDATORY\_LABEL\_NO\_WRITE\_UP**.</span></span>

<span data-ttu-id="15f03-133">Cada token de acesso também especifica uma política obrigatória que é definida pela [*autoridade de segurança local*](/windows/desktop/SecGloss/l-gly) (LSA) quando o token é criado.</span><span class="sxs-lookup"><span data-stu-id="15f03-133">Every access token also specifies a mandatory policy that is set by the [*Local Security Authority*](/windows/desktop/SecGloss/l-gly) (LSA) when the token is created.</span></span> <span data-ttu-id="15f03-134">Essa política é especificada por uma estrutura de [**\_ \_ política obrigatória de token**](/windows/desktop/api/Winnt/ns-winnt-token_mandatory_policy) associada ao token.</span><span class="sxs-lookup"><span data-stu-id="15f03-134">This policy is specified by a [**TOKEN\_MANDATORY\_POLICY**](/windows/desktop/api/Winnt/ns-winnt-token_mandatory_policy) structure associated with the token.</span></span> <span data-ttu-id="15f03-135">Essa estrutura pode ser consultada chamando-se a função [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) com o valor do parâmetro *TokenInformationClass* definido como **TokenMandatoryPolicy**.</span><span class="sxs-lookup"><span data-stu-id="15f03-135">This structure can be queried by calling the [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) function with the value of the *TokenInformationClass* parameter set to **TokenMandatoryPolicy**.</span></span>

 

 
