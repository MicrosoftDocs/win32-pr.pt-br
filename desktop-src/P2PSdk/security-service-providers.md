---
description: A interface de provedor de serviços de segurança (SSPI) fornece uma interface padrão da indústria para aplicativos distribuídos seguros.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Provedores de serviços de segurança
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105757493"
---
# <a name="security-service-providers"></a><span data-ttu-id="b0d8e-103">Provedores de serviços de segurança</span><span class="sxs-lookup"><span data-stu-id="b0d8e-103">Security Service Providers</span></span>

<span data-ttu-id="b0d8e-104">A interface de provedor de serviços de segurança (SSPI) fornece uma interface padrão da indústria para aplicativos distribuídos seguros.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-104">The Security Service Provider Interface (SSPI) provides a universal, industry-standard interface for secure distributed applications.</span></span> <span data-ttu-id="b0d8e-105">A API de grafo de pares fornece uma maneira para que os aplicativos protejam os links em um grafo, especificando um SSP (provedor de serviços de segurança), que é uma DLL que implementa uma interface SSPI.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-105">The Peer Graphing API provides a way for applications to secure links in a graph by specifying a Security Service Provider (SSP), which is a DLL that implements an SSPI interface.</span></span> <span data-ttu-id="b0d8e-106">Um aplicativo especifica um SSP quando ele cria um grafo usando [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="b0d8e-106">An application specifies an SSP when it creates a graph by using [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>

<span data-ttu-id="b0d8e-107">Para obter mais informações sobre como criar seu próprio SSP, consulte o link de documentação SSPI na lista de [links de referência de gráfico](graphing-reference-links.md).</span><span class="sxs-lookup"><span data-stu-id="b0d8e-107">For more information about creating your own SSP, see the SSPI documentation link in the list of [Graphing Reference Links](graphing-reference-links.md).</span></span>

## <a name="programming-considerations-for-implementing-an-ssp"></a><span data-ttu-id="b0d8e-108">Considerações de programação para implementar um SSP</span><span class="sxs-lookup"><span data-stu-id="b0d8e-108">Programming Considerations for Implementing an SSP</span></span>

<span data-ttu-id="b0d8e-109">Tome cuidado ao chamar um aplicativo de dentro de um SSP.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-109">Use caution when calling into an application from within an SSP.</span></span> <span data-ttu-id="b0d8e-110">As seguintes considerações se aplicam a retornos de chamada do SSP:</span><span class="sxs-lookup"><span data-stu-id="b0d8e-110">The following considerations apply to SSP callbacks:</span></span>

-   <span data-ttu-id="b0d8e-111">Os retornos de chamada não devem demorar muito para serem retornados, pois eles são chamados durante a negociação da conexão.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-111">Callbacks should not take a long time to return, because they are called during connection negotiation.</span></span> <span data-ttu-id="b0d8e-112">Se levar muito tempo para que uma conexão seja estabelecida, a conexão poderá ser descartada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-112">If it takes too long for a connection to be established, the connection can be dropped.</span></span>
-   <span data-ttu-id="b0d8e-113">A API de grafo de pares ajusta dinamicamente os valores de tempo limite de conexão, com base na carga real de um sistema.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-113">The Peer Graphing API dynamically adjusts connection timeout values, based on the actual load of a system.</span></span> <span data-ttu-id="b0d8e-114">O menor valor de tempo limite é de 20 segundos.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-114">The lowest timeout value is 20 seconds.</span></span>
-   <span data-ttu-id="b0d8e-115">Para evitar possíveis situações de deadlock, um aplicativo não deve acessar o banco de dados de grafo de pares de um retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-115">To avoid potential deadlock situations, an application must not access the peer graphing database from a callback.</span></span> <span data-ttu-id="b0d8e-116">Se um aplicativo exigir informações do banco de dados de gráfico, o aplicativo poderá armazenar em cache as informações necessárias e, em seguida, consultar o cache de dentro do retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-116">If an application requires information from the graphing database, the application can cache the necessary information, and then refer to the cache from within the callback.</span></span> <span data-ttu-id="b0d8e-117">O Caching também pode ajudar a diminuir o tempo de conexão.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-117">Caching can also help decrease connection time.</span></span>

<span data-ttu-id="b0d8e-118">Ao chamar os pontos de entrada SSPI, a infraestrutura de grafo de pares requer valores específicos para parâmetros específicos de cinco (5) funções.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-118">When calling the SSPI entry points, the Peer Graphing Infrastructure requires specific values for specific parameters of five (5) functions.</span></span> <span data-ttu-id="b0d8e-119">Você não pode alterar esses valores de parâmetro fornecidos para o SSP, e o SSP pode ignorar os valores para os cinco parâmetros ou tratá-los normalmente.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-119">You cannot change these parameter values provided to SSP, and the SSP can either ignore the values for the five parameters or handle them gracefully.</span></span> <span data-ttu-id="b0d8e-120">A lista a seguir identifica esses parâmetros específicos e os valores necessários:</span><span class="sxs-lookup"><span data-stu-id="b0d8e-120">The following list identifies these specific parameters and required values:</span></span>

-   [<span data-ttu-id="b0d8e-121">**Falha AcquireCredentialsHandle**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-121">**AcquireCredentialsHandle**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="b0d8e-122">Especifique um (1) para o parâmetro *pvGetKeyArgument* .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-122">Specify one (1) for the *pvGetKeyArgument* parameter.</span></span> <span data-ttu-id="b0d8e-123">Especifica **NULL** para os parâmetros *pszPrincipal*, *pvLogonID* e *pGetKeyFn* .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-123">Specifies **NULL** for the *pszPrincipal*, *pvLogonID*, and *pGetKeyFn* parameters.</span></span>

-   [<span data-ttu-id="b0d8e-124">**InitializeSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-124">**InitializeSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="b0d8e-125">Especifique os seguintes sinalizadores para o parâmetro *fContextReq* : **ISC \_ req \_ Mutual \_ auth \| ISC \_ req \_ confidenciality ISC req \| \_ \_ Integrity \| ISC \_ req \_ Sequence detectar a \_ \| ISC \_ req \_ Stream \| ISC \_ req \_ alocar \_ memória**.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-125">Specify the following flags for the *fContextReq* parameter: **ISC\_REQ\_MUTUAL\_AUTH \| ISC\_REQ\_CONFIDENTIALITY \| ISC\_REQ\_INTEGRITY \| ISC\_REQ\_SEQUENCE\_DETECT \| ISC\_REQ\_STREAM \| ISC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="b0d8e-126">**AcceptSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-126">**AcceptSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="b0d8e-127">Especifique os seguintes sinalizadores para o parâmetro *fContextReq* : **ASC \_ req \_ Mutual \_ auth \| ASC \_ req \_ confidenciality \| ASC \_ req \_ Integrity \| ASC req \_ \_ Sequence \_ redetect \| ASC \_ req \_ Stream \| ASC \_ req \_ alocar \_ memória**.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-127">Specify the following flags for the *fContextReq* parameter: **ASC\_REQ\_MUTUAL\_AUTH \| ASC\_REQ\_CONFIDENTIALITY \| ASC\_REQ\_INTEGRITY \| ASC\_REQ\_SEQUENCE\_DETECT \| ASC\_REQ\_STREAM \| ASC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="b0d8e-128">**EncryptMessage**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-128">**EncryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="b0d8e-129">Especifique zero (0) para os parâmetros *fQOP* e *MessageSeqNo* .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-129">Specify zero (0) for the *fQOP* and *MessageSeqNo* parameters.</span></span>

-   [<span data-ttu-id="b0d8e-130">**DecryptMessage**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-130">**DecryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="b0d8e-131">Especifique zero (0) para o parâmetro *MessageSeqNo* e **NULL** para o parâmetro *pfQOP* .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-131">Specify zero (0) for the *MessageSeqNo* parameter and **NULL** for the *pfQOP* parameter.</span></span>

<span data-ttu-id="b0d8e-132">Ao chamar [**EncryptMessage**](graphing-reference-links.md), quatro buffers são passados na estrutura **SecBufferDesc** .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-132">When calling [**EncryptMessage**](graphing-reference-links.md), four buffers are passed in the **SecBufferDesc** structure.</span></span> <span data-ttu-id="b0d8e-133">A tabela a seguir identifica a ordem para passar os buffers.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-133">The following table identifies the order to pass the buffers.</span></span>

| <span data-ttu-id="b0d8e-134">Estrutura específica do SSP</span><span class="sxs-lookup"><span data-stu-id="b0d8e-134">SSP-specific structure</span></span>         | <span data-ttu-id="b0d8e-135">Descrição</span><span class="sxs-lookup"><span data-stu-id="b0d8e-135">Description</span></span>                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b0d8e-136">**\_cabeçalho de fluxo de SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-136">**SECBUFFER\_STREAM\_HEADER**</span></span>  | <span data-ttu-id="b0d8e-137">Contém os dados do cabeçalho de segurança.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-137">Contains the security header data.</span></span> <span data-ttu-id="b0d8e-138">O tamanho do buffer de cabeçalho é obtido chamando [**QueryContextAttributes**](graphing-reference-links.md) e especificando o atributo **de \_ \_ \_ tamanhos de fluxo de attr SECPKG** .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-138">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span>  |
| <span data-ttu-id="b0d8e-139">**dados do SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-139">**SECBUFFER\_DATA**</span></span>            | <span data-ttu-id="b0d8e-140">Contém a mensagem de texto sem formatação a ser criptografada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-140">Contains the plain-text message to be encrypted.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="b0d8e-141">**\_trailer de fluxo de SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-141">**SECBUFFER\_STREAM\_TRAILER**</span></span> | <span data-ttu-id="b0d8e-142">Contém os dados do trailer de segurança.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-142">Contains the security trailer data.</span></span> <span data-ttu-id="b0d8e-143">O tamanho do buffer de cabeçalho é obtido chamando [**QueryContextAttributes**](graphing-reference-links.md) e especificando o atributo **de \_ \_ \_ tamanhos de fluxo de attr SECPKG** .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-143">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span> |
| <span data-ttu-id="b0d8e-144">**SECBUFFER \_ vazio**</span><span class="sxs-lookup"><span data-stu-id="b0d8e-144">**SECBUFFER\_EMPTY**</span></span>           | <span data-ttu-id="b0d8e-145">Não inicializado.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-145">Not initialized.</span></span> <span data-ttu-id="b0d8e-146">O tamanho desse buffer é zero (0).</span><span class="sxs-lookup"><span data-stu-id="b0d8e-146">The size of this buffer is zero (0).</span></span>                                                                                                                                                             |



 

<span data-ttu-id="b0d8e-147">Ao chamar [**DecryptMessage**](graphing-reference-links.md), a API de grafo de pares passa exatamente quatro estruturas **SecBuffer** .</span><span class="sxs-lookup"><span data-stu-id="b0d8e-147">When calling [**DecryptMessage**](graphing-reference-links.md), the Peer Graphing API passes exactly four **SecBuffer** structures.</span></span> <span data-ttu-id="b0d8e-148">O primeiro buffer é **SECBUFFER \_ dados** e contém uma mensagem criptografada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-148">The first buffer is **SECBUFFER\_DATA**, and contains an encrypted message.</span></span> <span data-ttu-id="b0d8e-149">Os buffers restantes são usados para saída e são do tipo **SECBUFFER \_ vazio**.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-149">The remaining buffers are used for output, and are of type **SECBUFFER\_EMPTY**.</span></span>

<span data-ttu-id="b0d8e-150">O SSP precisa dar suporte à criptografia e à descriptografia de buffers de dados de usuário com tamanhos de 16K e maior em uma chamada.</span><span class="sxs-lookup"><span data-stu-id="b0d8e-150">The SSP needs to support encrypting and decrypting user data buffers with sizes of 16K and greater in one call.</span></span>

 

 



