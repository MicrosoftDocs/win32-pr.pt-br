---
description: Uma DRT (tabela de roteamento distribuído) existe como uma malha de nós de cooperação, onde cada nó é uma instância de um aplicativo usando a API DRT.
ms.assetid: 257ad7ea-636b-45f2-b514-4a213939d107
title: Sobre tabelas de roteamento distribuído
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2dfca9f81cc609d97584ef5a11f999722c696858
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828421"
---
# <a name="about-distributed-routing-tables"></a><span data-ttu-id="a4e54-103">Sobre tabelas de roteamento distribuído</span><span class="sxs-lookup"><span data-stu-id="a4e54-103">About Distributed Routing Tables</span></span>

<span data-ttu-id="a4e54-104">Uma DRT (tabela de roteamento distribuído) existe como uma malha de nós de cooperação, onde cada nó é uma instância de um aplicativo usando a API DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-104">A Distributed Routing Table (DRT) exists as a mesh of cooperating nodes, where each node is an instance of an application using the DRT API.</span></span> <span data-ttu-id="a4e54-105">Nós que publicam chaves são responsáveis por auxiliar outros nós a publicar e resolver chaves.</span><span class="sxs-lookup"><span data-stu-id="a4e54-105">Nodes that publish keys are responsible for assisting other nodes publish and resolve keys.</span></span> <span data-ttu-id="a4e54-106">Os nós também podem participar de uma maneira "resolver somente", o que não exige que eles ajudem os colegas.</span><span class="sxs-lookup"><span data-stu-id="a4e54-106">Nodes can also participate in a "resolve only" fashion, which does not require them to assist peers.</span></span> <span data-ttu-id="a4e54-107">O protocolo DRT é executado em um transporte UDP/IPv6.</span><span class="sxs-lookup"><span data-stu-id="a4e54-107">The DRT protocol executes over a UDP/IPv6 transport.</span></span>

<span data-ttu-id="a4e54-108">Um nó que publica uma chave compila e mantém uma tabela de roteamento local de outros nós na malha.</span><span class="sxs-lookup"><span data-stu-id="a4e54-108">A node that publishes a key builds and maintains a local routing table of other nodes in the mesh.</span></span> <span data-ttu-id="a4e54-109">Essa tabela de roteamento é otimizada para que o nó possa localizar rapidamente uma chave específica na malha localizando a chave diretamente na tabela de roteamento local ou perguntando outros nós publicando chaves numericamente perto do destino.</span><span class="sxs-lookup"><span data-stu-id="a4e54-109">This routing table is optimized so that the node can quickly locate a specific key in the mesh by finding the key directly in the local routing table, or by asking other nodes publishing keys numerically close to the target.</span></span> <span data-ttu-id="a4e54-110">Essa ação é repetida até que a chave necessária seja encontrada ou o nó determine que não existe tal chave.</span><span class="sxs-lookup"><span data-stu-id="a4e54-110">This action is repeated until the required key is found or the node determines that no such key exists.</span></span>

<span data-ttu-id="a4e54-111">As chaves DRT são inteiros sem sinal de 256 bits.</span><span class="sxs-lookup"><span data-stu-id="a4e54-111">DRT keys are 256-bit unsigned integers.</span></span> <span data-ttu-id="a4e54-112">A proximidade entre as chaves é definida pela diferença numérica entre elas.</span><span class="sxs-lookup"><span data-stu-id="a4e54-112">Closeness between keys is defined by the numerical difference between them.</span></span> <span data-ttu-id="a4e54-113">O keyspace de DRT é considerado circular.</span><span class="sxs-lookup"><span data-stu-id="a4e54-113">The DRT keyspace is considered circular.</span></span> <span data-ttu-id="a4e54-114">Por exemplo, o primeiro valor de chave possível e o último valor de chave possível são considerados vizinhos.</span><span class="sxs-lookup"><span data-stu-id="a4e54-114">For example, the first possible key value, and the last possible key value are considered neighbors.</span></span>

<span data-ttu-id="a4e54-115">Em um DRT seguro, os nós são necessários para autenticar as chaves que eles publicam.</span><span class="sxs-lookup"><span data-stu-id="a4e54-115">In a secure DRT, nodes are required to authenticate the keys they publish.</span></span> <span data-ttu-id="a4e54-116">O mecanismo pelo qual os nós autenticam chaves deve ser definido usando a API DRT quando o DRT é inicializado.</span><span class="sxs-lookup"><span data-stu-id="a4e54-116">The mechanism by which nodes authenticate keys must be set using the DRT API when the DRT is initialized.</span></span> <span data-ttu-id="a4e54-117">Isso é feito escolhendo um provedor de segurança para o DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-117">This is done by choosing a security provider for the DRT.</span></span> <span data-ttu-id="a4e54-118">Um provedor de segurança é um módulo que pode produzir tokens usados para autenticar chaves e verificar tokens produzidos por outros nós.</span><span class="sxs-lookup"><span data-stu-id="a4e54-118">A security provider is a module that can produce tokens used to authenticate keys, and verify tokens produced by other nodes.</span></span> <span data-ttu-id="a4e54-119">Ele deve implementar a interface do provedor de segurança que está definida nesta documentação.</span><span class="sxs-lookup"><span data-stu-id="a4e54-119">It must implement the security provider interface that is defined in this documentation.</span></span> <span data-ttu-id="a4e54-120">A DRT do Windows 7 vem com dois provedores de segurança totalmente implementados que podem ser usados para criar aplicativos do Windows.</span><span class="sxs-lookup"><span data-stu-id="a4e54-120">The Windows 7 DRT ships with two fully implemented security providers that can be used to build Windows applications.</span></span>

<span data-ttu-id="a4e54-121">Durante a inicialização, um aplicativo também deve fornecer o DRT com um provedor de inicialização.</span><span class="sxs-lookup"><span data-stu-id="a4e54-121">During initialization, an application must also supply the DRT with a bootstrap provider.</span></span> <span data-ttu-id="a4e54-122">O provedor de inicialização é um módulo que pode recuperar os pontos de extremidade de rede dos nós já presentes na malha DRT e é chamado pelo DRT quando um novo nó é estabelecido.</span><span class="sxs-lookup"><span data-stu-id="a4e54-122">The bootstrap provider is a module that can retrieve the network endpoints of nodes already present in the DRT mesh, and is called upon by the DRT when a new node is established.</span></span> <span data-ttu-id="a4e54-123">Assim como o módulo do provedor de segurança, o provedor Bootstrap deve implementar uma interface bem definida.</span><span class="sxs-lookup"><span data-stu-id="a4e54-123">Like the security provider module, the bootstrap provider must implement a well defined interface.</span></span> <span data-ttu-id="a4e54-124">A DRT do Windows 7 vem com dois provedores de inicialização totalmente implementados.</span><span class="sxs-lookup"><span data-stu-id="a4e54-124">The Windows 7 DRT ships with two fully implemented bootstrap providers.</span></span>

<span data-ttu-id="a4e54-125">A DRT considera os vizinhos imediatos de uma chave especial.</span><span class="sxs-lookup"><span data-stu-id="a4e54-125">The DRT considers the immediate neighbors of a key special.</span></span> <span data-ttu-id="a4e54-126">As cinco chaves mais próximas numericamente menores e as cinco chaves mais próximas numericamente maiores que um formulário de chave publicado, o que é chamado de um conjunto de folha.</span><span class="sxs-lookup"><span data-stu-id="a4e54-126">The five closest keys numerically smaller and the five closest keys numerically larger than a published key form what is called a leaf set.</span></span> <span data-ttu-id="a4e54-127">Os relatórios de DRT são alterados para o conjunto de folha de uma chave por meio da API DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-127">The DRT reports changes to the leaf set of a key through the DRT API.</span></span>

## <a name="drt-life-cycle-and-state-transitions"></a><span data-ttu-id="a4e54-128">Ciclo de vida de DRT e transições de estado</span><span class="sxs-lookup"><span data-stu-id="a4e54-128">DRT Life Cycle and State Transitions</span></span>

<span data-ttu-id="a4e54-129">Um aplicativo pode inicializar uma instância DRT local usando a função [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) .</span><span class="sxs-lookup"><span data-stu-id="a4e54-129">An application can initialize a local DRT instance using the [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) function.</span></span> <span data-ttu-id="a4e54-130">Essa função dispara o processo de inicialização, em que a API DRT chama o provedor Bootstrap para aprender as chaves e os pontos de extremidade de rede de outros nós já participando do DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-130">This function triggers the bootstrapping process, where the DRT API calls upon the bootstrap provider to learn the keys and network endpoints of other nodes already participating in the DRT.</span></span> <span data-ttu-id="a4e54-131">Se o provedor de inicialização localizar com êxito pelo menos um outro nó, o DRT entrará no \_ estado de DRT ativo.</span><span class="sxs-lookup"><span data-stu-id="a4e54-131">If the bootstrap provider successfully locates at least one other node, the DRT enters the DRT\_ACTIVE state.</span></span> <span data-ttu-id="a4e54-132">Nesse estado, o aplicativo pode pesquisar chaves publicadas por outros nós e pode publicar chaves que podem ser resolvidas.</span><span class="sxs-lookup"><span data-stu-id="a4e54-132">In this state, the application can search for keys published by other nodes, and can publish keys that can be resolved.</span></span> <span data-ttu-id="a4e54-133">Se o provedor de inicialização não conseguir localizar outros nós com êxito, o DRT entrará no estado de DRT \_ sozinho.</span><span class="sxs-lookup"><span data-stu-id="a4e54-133">If the bootstrap provider cannot successfully locate other nodes, the DRT enters the DRT\_ALONE state.</span></span> <span data-ttu-id="a4e54-134">O DRT permanecerá no estado de DRT \_ sozinho e tentará realizar a inicialização periodicamente para localizar os pares e passar para o \_ estado ativo DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-134">The DRT will stay in the DRT\_ALONE state and will attempt to bootstrap periodically in order to locate peers and move to the DRT\_ACTIVE state.</span></span>

<span data-ttu-id="a4e54-135">Um nó pode fazer a transição para esses Estados de DRT \_ ativa.</span><span class="sxs-lookup"><span data-stu-id="a4e54-135">A node can transition to these states from DRT\_ACTIVE.</span></span>

| <span data-ttu-id="a4e54-136">Estado do ciclo de vida</span><span class="sxs-lookup"><span data-stu-id="a4e54-136">Life Cycle State</span></span> | <span data-ttu-id="a4e54-137">Condições</span><span class="sxs-lookup"><span data-stu-id="a4e54-137">Conditions</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a4e54-138">\_somente DRT</span><span class="sxs-lookup"><span data-stu-id="a4e54-138">DRT\_ALONE</span></span>       | <span data-ttu-id="a4e54-139">O nó local não descobriu outros nós no DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-139">The local node has not discovered other nodes in the DRT.</span></span> <span data-ttu-id="a4e54-140">Enquanto estiver nesse estado, o nó continuará a escutar outros nós dentro do DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-140">While in this state, the node continues to listen for other nodes within the DRT.</span></span><br/> <span data-ttu-id="a4e54-141">Se outro nó ingressar no DRT, o nó local passará para o \_ estado ativo DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-141">If another node joins the DRT, the local node will transition to the DRT\_ACTIVE state.</span></span> <span data-ttu-id="a4e54-142">Se a rede estiver inoperante, ela fará a transição para DRT \_ sem \_ rede.</span><span class="sxs-lookup"><span data-stu-id="a4e54-142">If the network is down, it will transition to DRT\_NO\_NETWORK.</span></span> <span data-ttu-id="a4e54-143">No caso de um erro sério com o DRT, o nó passará para o \_ estado de falha DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-143">In the event of a serious error with the DRT the node will transition to the DRT\_FAULTED state.</span></span><br/> |
| <span data-ttu-id="a4e54-144">DRT \_ sem \_ rede</span><span class="sxs-lookup"><span data-stu-id="a4e54-144">DRT\_NO\_NETWORK</span></span> | <span data-ttu-id="a4e54-145">Quando um nó perde a conectividade de rede, ele faz a transição para o \_ estado DRT sem \_ rede.</span><span class="sxs-lookup"><span data-stu-id="a4e54-145">When a node loses network connectivity, it transitions to the DRT\_NO\_NETWORK state.</span></span> <span data-ttu-id="a4e54-146">Neste ponto, o aplicativo pode aguardar a restauração da conectividade de rede e pode fechar o DRT.</span><span class="sxs-lookup"><span data-stu-id="a4e54-146">At this point the application can wait for network connectivity to be restored, and can close the DRT.</span></span><br/>                                                                                                                                                                                                                    |
| <span data-ttu-id="a4e54-147">DRT \_ com falha</span><span class="sxs-lookup"><span data-stu-id="a4e54-147">DRT\_FAULTED</span></span>     | <span data-ttu-id="a4e54-148">Ocorreu um erro sério no nó local.</span><span class="sxs-lookup"><span data-stu-id="a4e54-148">A serious error has occurred within the local node.</span></span> <span data-ttu-id="a4e54-149">Por exemplo, se o computador local ficar sem memória física.</span><span class="sxs-lookup"><span data-stu-id="a4e54-149">For example, if the local machine runs out of physical memory.</span></span><br/> <span data-ttu-id="a4e54-150">Enquanto um nó entra nesse estado, o aplicativo deve chamar a API [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) , corrigir o problema e reinicializar o DRT com [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span><span class="sxs-lookup"><span data-stu-id="a4e54-150">While a node enters this state, the application must call the [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) API, correct the problem, and re-initialize the DRT with [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span></span><br/>                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="a4e54-151">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="a4e54-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a4e54-152">Usando o API de Tabela de roteamento distribuído</span><span class="sxs-lookup"><span data-stu-id="a4e54-152">Using the Distributed Routing Table API</span></span>](using-the-distributed-routing-table-api.md)
</dt> <dt>

[<span data-ttu-id="a4e54-153">Referência de API de Tabela de roteamento distribuído</span><span class="sxs-lookup"><span data-stu-id="a4e54-153">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 




