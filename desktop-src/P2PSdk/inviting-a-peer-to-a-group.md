---
description: Este tópico discute o processo de convidar um par para ingressar em um grupo de pares usando as APIs de agrupamento de pares.
ms.assetid: 6afcbfec-b1df-45cd-8a43-221dfe5d8c33
title: Convidando um par a um grupo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b1e8852f58387d424944d4a8821f56b5e11e8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103921765"
---
# <a name="inviting-a-peer-to-a-group"></a><span data-ttu-id="c7d2e-103">Convidando um par a um grupo</span><span class="sxs-lookup"><span data-stu-id="c7d2e-103">Inviting a Peer to a Group</span></span>

<span data-ttu-id="c7d2e-104">Este tópico discute o processo de convidar um par para ingressar em um grupo de pares usando as APIs de agrupamento de pares.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-104">This topic discusses the process of inviting a peer to join a peer group using the Peer Grouping APIs.</span></span>

<span data-ttu-id="c7d2e-105">Um grupo de pares requer credenciais válidas para participar.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-105">A peer group requires valid credentials to participate.</span></span> <span data-ttu-id="c7d2e-106">As credenciais são emitidas de fora de um grupo na forma de convites ou diretamente aos membros de um grupo quando são necessárias atualizações de credenciais.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-106">Credentials are issued from outside a group in the form of invitations, or directly to members within a group when credential updates are needed.</span></span>

## <a name="group-member-certificates"></a><span data-ttu-id="c7d2e-107">Certificados de membro de grupo</span><span class="sxs-lookup"><span data-stu-id="c7d2e-107">Group Member Certificates</span></span>

<span data-ttu-id="c7d2e-108">Um grupo de pares é criado quando um aplicativo faz uma chamada para [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-108">A peer group is created when an application makes a call to [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span></span>

<span data-ttu-id="c7d2e-109">Para participar de um grupo de pares, cada par deve ter uma identidade de par.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-109">To participate in a peer group, each peer must have a peer identity.</span></span> <span data-ttu-id="c7d2e-110">Chame [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) até que todas as identidades de pares definidas para o par tenham sido retornadas e selecione aquela que deve ser usada.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-110">Call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) until all peer identities defined for the peer have been returned, and select the one that should be used.</span></span> <span data-ttu-id="c7d2e-111">Se uma identidade de par não existir, crie uma chamando [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-111">If a peer identity does not exist, create one by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span>

<span data-ttu-id="c7d2e-112">Cada identidade de par é associada a um conjunto específico de credenciais que podem ser usadas para provar a associação de grupo de sistemas pares ao se conectar, bem como ao publicar registros ou convidar membros adicionais.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-112">Each peer identity is associated with a specific set of credentials that can be used to prove peer group membership when connecting, as well as when publishing records or inviting additional members.</span></span> <span data-ttu-id="c7d2e-113">Essas credenciais são representadas como cadeias de [certificados X. 509](https://www.ietf.org/rfc/rfc2511.txt) chamados de GMC (certificados de associação de grupo).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-113">These credentials are represented as chains of [X.509 certificates](https://www.ietf.org/rfc/rfc2511.txt) called Group Membership Certificates (GMC).</span></span>

<span data-ttu-id="c7d2e-114">Para criar o GMC para uma identidade de par, você deve primeiro obter sua chave pública.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-114">To create the GMC for a peer identity, you must first obtain its public key.</span></span> <span data-ttu-id="c7d2e-115">Essa chave é obtida chamando [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) no possível convidado e passando sua identidade de par.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-115">This key is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) on the potential invitee and passing in its peer identity.</span></span> <span data-ttu-id="c7d2e-116">Essa função retorna um certificado codificado em base 64 (IDC) que contém a chave pública RSA usada para criar o GMC para a identidade de par (entre outras coisas), encapsulada em um blob XML, no seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="c7d2e-116">This function returns a base-64 encoded certificate (IDC) that contains the RSA public key used to create the GMC for the peer identity (among other things), encapsulated in an XML blob, in the following format:</span></span>

``` syntax
<PEERIDENTITYINFO VERSION="1.0">
     <IDC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          <!-- Base-64 encoded certificate  -->
     </IDC>
</PEERIDENTITYINFO>
```

<span data-ttu-id="c7d2e-117">Essa cadeia de caracteres pode ser passada para [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), que retorna um convite que contém o GMC para essa identidade de par.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-117">This string can be passed to [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), which returns an invitation that contains the GMC for that peer identity.</span></span> <span data-ttu-id="c7d2e-118">O convite deve ser passado para o convidado usando um processo diferente, como email, FTP ou um compartilhamento de arquivos seguro.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-118">The invitation must be passed to the invitee using a different process such as e-mail, FTP, or a secure file share.</span></span>

<span data-ttu-id="c7d2e-119">Como alternativa, a própria IDC pode ser colocada em uma nova estrutura de [**\_ \_ informações de credenciais de mesmo nível**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) e transmitida para [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), que, da mesma forma, gera um convite.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-119">Alternatively, the IDC itself can be placed in a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure and passed to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), which likewise generates an invitation.</span></span>

<span data-ttu-id="c7d2e-120">Observe que os aplicativos não têm permissão para adicionar marcas na marca **PEERIDENTITYINFO** ou modificar esse fragmento XML de qualquer forma.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-120">Note that applications are not allowed to add tags within the **PEERIDENTITYINFO** tag or modify this XML fragment in any way.</span></span> <span data-ttu-id="c7d2e-121">Os aplicativos têm permissão para incorporar esse fragmento XML em outros documentos XML, mas devem retirar todo o XML específico do aplicativo antes de passar esse fragmento para as funções [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) ou [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) .</span><span class="sxs-lookup"><span data-stu-id="c7d2e-121">Applications are allowed to incorporate this XML fragment into other XML documents, but must strip out all application-specific XML before passing this fragment to the [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) functions.</span></span>

<span data-ttu-id="c7d2e-122">Os GMCs de membros são emitidos por administradores e pelo criador do grupo de pares.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-122">Member GMCs are issued by administrators and the peer group creator.</span></span> <span data-ttu-id="c7d2e-123">Os membros devem obter novos GMCs com tempos de vida estendidos seus GMCs antes que o tempo de expiração tenha passado.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-123">Members must obtain new GMCs with extended lifetimes their GMCs before the expiration time has passed.</span></span> <span data-ttu-id="c7d2e-124">O administrador do grupo de sistemas pares emite credenciais atualizadas chamando [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) com as credenciais existentes para esse par.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-124">The peer group administrator issues updated credentials by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) with the existing credentials for that peer.</span></span>

<span data-ttu-id="c7d2e-125">A estrutura de [**\_ \_ informações de credenciais de par**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) contém os dados básicos do status de associação de um par, incluindo a chave pública para seus GMC.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-125">The [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure contains the basic data on a peer's membership status, including the public key for their GMC.</span></span> <span data-ttu-id="c7d2e-126">As credenciais emitidas recentemente podem ser publicadas no grupo de pares definindo o \_ sinalizador de credenciais do repositório do grupo par \_ \_ na chamada para [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-126">Newly-issued credentials can be published to the peer group by setting the PEER\_GROUP\_STORE\_CREDENTIALS flag in the call to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="c7d2e-127">Quando o destinatário das novas credenciais ingressar no grupo par, as credenciais existentes serão atualizadas pela infraestrutura de agrupamento de pares.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-127">When the recipient of the new credentials joins the peer group, it's existing credentials will be updated by the Peer Grouping Infrastructure.</span></span>

## <a name="issuing-an-invitation"></a><span data-ttu-id="c7d2e-128">Emitindo um convite</span><span class="sxs-lookup"><span data-stu-id="c7d2e-128">Issuing an Invitation</span></span>

<span data-ttu-id="c7d2e-129">Um membro é convidado para ingressar no grupo de pares de uma das duas maneiras a seguir:</span><span class="sxs-lookup"><span data-stu-id="c7d2e-129">A member is invited to join the peer group in one of the following two ways:</span></span>

-   <span data-ttu-id="c7d2e-130">Um administrador de grupo de sistemas pares chama [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passando a cadeia de caracteres XML de informações de identidade obtida do convidado potencial por meio de um mecanismo comum fora de banda, como email ou uma sessão de mensagem instantânea.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-130">A peer group administrator calls [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passing in the identity information XML string obtained from the potential invitee via a common out-of-band mechanism, such as email or an IM session.</span></span> <span data-ttu-id="c7d2e-131">O convite também é transmitido por algum processo ou mecanismo externo para o par, que, por fim, o receberá como uma cadeia de caracteres XML ou um arquivo de texto.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-131">The invitation is also passed through some external process or mechanism to the peer, who will ultimately receive it as an XML string or text file.</span></span>
-   <span data-ttu-id="c7d2e-132">Um administrador de grupo de sistemas pares chama [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-132">A peer group administrator calls [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="c7d2e-133">Para usar essa função, o par deve já ter publicado informações de associação para o grupo par [**( \_ membro par**](/windows/desktop/api/P2P/ns-p2p-peer_member)) ou ter uma chave pública disponível (do par de chaves RSA usado para criar a identidade da entidade).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-133">To use this function, the peer must have already published membership information to the peer group ([**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member)), or have an available public key (of the RSA key pair used to create the subject identity).</span></span> <span data-ttu-id="c7d2e-134">No primeiro caso, a estrutura [**de \_ \_ informações de credenciais de par**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) necessária para **PeerGroupIssueCredentials** pode ser obtida na estrutura de **\_ membros de pares** ; no último caso, uma nova estrutura de **\_ \_ informações de credenciais de par** pode ser populada com a chave pública.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-134">In the former case, the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure required for **PeerGroupIssueCredentials** can be obtained from the **PEER\_MEMBER** structure; in the latter case, a new **PEER\_CREDENTIAL\_INFO** structure can be populated with the public key.</span></span>

<span data-ttu-id="c7d2e-135">Depois de receber a cadeia de caracteres de convite, o ponto passa a ela para [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) para ingressar no grupo de pares.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-135">After receiving the invitation string, the peer passes it to [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) to join the peer group.</span></span> <span data-ttu-id="c7d2e-136">Se a chamada para **PeerGroupJoin** for bem-sucedida, o par poderá abrir o grupo de par mais tarde chamando [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span><span class="sxs-lookup"><span data-stu-id="c7d2e-136">If the call to **PeerGroupJoin** is successful, the peer can later open the peer group by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span>

## <a name="parsing-an-invitation"></a><span data-ttu-id="c7d2e-137">Analisando um convite</span><span class="sxs-lookup"><span data-stu-id="c7d2e-137">Parsing an Invitation</span></span>

<span data-ttu-id="c7d2e-138">Opcionalmente, um convite pode ser analisado chamando [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), que retorna uma estrutura [**de \_ \_ informações de convite de mesmo nível**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) .</span><span class="sxs-lookup"><span data-stu-id="c7d2e-138">Optionally, an invitation can be parsed by calling [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), which returns a [**PEER\_INVITATION\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) structure.</span></span> <span data-ttu-id="c7d2e-139">Os campos na estrutura podem ser facilmente obtidos para fins de exibição.</span><span class="sxs-lookup"><span data-stu-id="c7d2e-139">The fields in the structure can be easily obtained for display purposes.</span></span>

 

 



