---
description: Antes que um aplicativo possa Pesquisar a DRT (tabela de roteamento distribuído), uma consulta de pesquisa deve ser criada.
ms.assetid: b3403a64-128c-461e-9384-8e62c03322e1
title: Pesquisando uma tabela de roteamento distribuída
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c9977ca395393cef09198182fb8790738d2b00c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105780490"
---
# <a name="searching-a-distributed-routing-table"></a><span data-ttu-id="43cdb-103">Pesquisando uma tabela de roteamento distribuída</span><span class="sxs-lookup"><span data-stu-id="43cdb-103">Searching a Distributed Routing Table</span></span>

<span data-ttu-id="43cdb-104">Antes que um aplicativo possa Pesquisar a DRT (tabela de roteamento distribuído), uma consulta de pesquisa deve ser criada.</span><span class="sxs-lookup"><span data-stu-id="43cdb-104">Before an application can search the Distributed Routing Table (DRT), a search query must be created.</span></span> <span data-ttu-id="43cdb-105">O valor de chave desejado é especificado pelo aplicativo quando a função [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) é chamada.</span><span class="sxs-lookup"><span data-stu-id="43cdb-105">The desired key value is specified by the application when the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function is called.</span></span> <span data-ttu-id="43cdb-106">O comportamento da pesquisa é determinado pelas informações especificadas pelo aplicativo na estrutura de [**informações de \_ pesquisa \_ DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) .</span><span class="sxs-lookup"><span data-stu-id="43cdb-106">The behavior of the search is determined by information specified by the application in the [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) structure.</span></span>

<span data-ttu-id="43cdb-107">Normalmente, um evento de aplicativo é sinalizado quando a pesquisa descobre resultados e outra na conclusão da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="43cdb-107">Typically, an application event is signaled when the search discovers results and another at the conclusion of the search.</span></span> <span data-ttu-id="43cdb-108">No entanto, se **fIterative** for definido em [**\_ \_ informações de pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info), um evento de aplicativo poderá ser sinalizado quando o contato for feito com cada nó ao longo do caminho.</span><span class="sxs-lookup"><span data-stu-id="43cdb-108">However, if **fIterative** is set in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info), an application event can be signaled when contact is made with each node along the way.</span></span>

<span data-ttu-id="43cdb-109">Depois que um evento é sinalizado, o aplicativo chama a função [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) para os resultados.</span><span class="sxs-lookup"><span data-stu-id="43cdb-109">After an event is signaled, the application then calls the [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) function for the results.</span></span> <span data-ttu-id="43cdb-110">Se o código retornado for **S \_ OK**, os resultados serão apontados na estrutura [**de \_ \_ resultados da pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result) retornada pela API.</span><span class="sxs-lookup"><span data-stu-id="43cdb-110">If the returned code is **S\_OK**, the results are pointed to in the [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result) structure returned by the API.</span></span> <span data-ttu-id="43cdb-111">Os resultados retornados se enquadram no intervalo de valores especificado em [**\_ \_ informações de pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="43cdb-111">The returned results fall into the range of values specified in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="43cdb-112">Caso a pesquisa não encontre nenhuma correspondência, somente o valor **DRT \_ E \_ nenhum \_ maior** será retornado na conclusão dos retornos de resultado.</span><span class="sxs-lookup"><span data-stu-id="43cdb-112">In the event that the search finds no matches, only the **DRT\_E\_NO\_MORE** value will be returned at the conclusion of result returns.</span></span>

<span data-ttu-id="43cdb-113">As informações a seguir detalham como os membros contidos nas [**\_ \_ informações de pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) permitem que um aplicativo dite especificamente o comportamento de pesquisa da infraestrutura DRT:</span><span class="sxs-lookup"><span data-stu-id="43cdb-113">The following information details how the members contained in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) allow an application to specifically dictate the search behavior of the DRT infrastructure:</span></span>

## <a name="fallowcurrentinstancematch"></a><span data-ttu-id="43cdb-114">fAllowCurrentInstanceMatch</span><span class="sxs-lookup"><span data-stu-id="43cdb-114">fAllowCurrentInstanceMatch</span></span>

<span data-ttu-id="43cdb-115">Por padrão, os resultados da pesquisa DRT incluem somente correspondências encontradas fora do nó local.</span><span class="sxs-lookup"><span data-stu-id="43cdb-115">By default, DRT search results include only matches found outside of the local node.</span></span> <span data-ttu-id="43cdb-116">A configuração de **fAllowCurrentInstanceMatch** especifica que os resultados da pesquisa também incluem correspondências encontradas na instância DRT local.</span><span class="sxs-lookup"><span data-stu-id="43cdb-116">Setting **fAllowCurrentInstanceMatch** specifies that the search results also include matches found in the local DRT instance.</span></span>

## <a name="cmaxendpoints"></a><span data-ttu-id="43cdb-117">cMaxEndpoints</span><span class="sxs-lookup"><span data-stu-id="43cdb-117">cMaxEndpoints</span></span>

<span data-ttu-id="43cdb-118">A quantidade e o intervalo dos resultados retornados pela pesquisa são especificados pelo aplicativo com os valores de **cMaxEndpoints** (quantidade) e **pMinimumKey** e **pMaximumKey** (intervalo) e referenciados pelas informações de [**\_ pesquisa DRT \_**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="43cdb-118">The quantity and range of the results returned by the search are specified by the application with the **cMaxEndpoints** (quantity) and the **pMinimumKey** and **pMaximumKey** (range) values, and referenced by [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

<span data-ttu-id="43cdb-119">Quando **cMaxEndpoints = 1**, a infraestrutura DRT procura uma chave, retornando uma correspondência dentro do intervalo especificado pelos valores **pMinimumKey** e **PMaximumKey** nas [**informações de \_ pesquisa \_ DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="43cdb-119">When **cMaxEndpoints = 1**, the DRT infrastructure searches for a key, returning one match within the range specified by the **pMinimumKey** and **pMaximumKey** values in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="43cdb-120">Essa correspondência pode ser uma correspondência exata ou a correspondência mais próxima no intervalo.</span><span class="sxs-lookup"><span data-stu-id="43cdb-120">This match can be either an exact match or the nearest match within range.</span></span> <span data-ttu-id="43cdb-121">Se uma correspondência não for encontrada, **DRT \_ E \_ não \_ mais** será retornado.</span><span class="sxs-lookup"><span data-stu-id="43cdb-121">If a match is not found, **DRT\_E\_NO\_MORE** is returned.</span></span>

<span data-ttu-id="43cdb-122">Se **cMaxEndpoints > 1**, a infraestrutura DRT retornará correspondências dentro do intervalo até o valor de **cMaxEndpoints**.</span><span class="sxs-lookup"><span data-stu-id="43cdb-122">If **cMaxEndpoints > 1**, the DRT infrastructure will return matches within the range up to the value of **cMaxEndpoints**.</span></span> <span data-ttu-id="43cdb-123">As correspondências retornadas podem conter uma correspondência exata ou os resultados de correspondência mais próximos no intervalo.</span><span class="sxs-lookup"><span data-stu-id="43cdb-123">The returned matches can contain an exact match or the nearest match results within range.</span></span> <span data-ttu-id="43cdb-124">Além disso, se **pMinimumKey** e **pMaximumKey** forem definidos com o mesmo valor, uma pesquisa será executada somente para esse valor, retornando **DRT \_ E \_ não \_ mais** se não for encontrada.</span><span class="sxs-lookup"><span data-stu-id="43cdb-124">Additionally, if **pMinimumKey** and **pMaximumKey** are set to the same value, a search is carried out only for that value, returning **DRT\_E\_NO\_MORE** if it is not found.</span></span>

## <a name="fanymatchinrange"></a><span data-ttu-id="43cdb-125">fAnyMatchInRange</span><span class="sxs-lookup"><span data-stu-id="43cdb-125">fAnyMatchInRange</span></span>

<span data-ttu-id="43cdb-126">O membro **fAnyMatchInRange** indica se a pesquisa será interrompida depois que a primeira correspondência estiver localizada dentro do intervalo especificado, ou se a pesquisa continuar para a correspondência mais próxima à chave especificada na API [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) .</span><span class="sxs-lookup"><span data-stu-id="43cdb-126">The **fAnyMatchInRange** member indicates whether the search will stop after the first match is located within the specified range, or if the search will continue for the closest match to the key specified in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) API.</span></span> <span data-ttu-id="43cdb-127">Quando **fAnyMatchInRange** é definido, a pesquisa é executada com **cMaxEndpoints = 1** , independentemente do valor especificado de **CMaxEndpoints** nas [**\_ \_ informações de pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="43cdb-127">When **fAnyMatchInRange** is set, the search is carried out with **cMaxEndpoints = 1** regardless of the specified value of **cMaxEndpoints** in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

## <a name="fiterative"></a><span data-ttu-id="43cdb-128">fIterative</span><span class="sxs-lookup"><span data-stu-id="43cdb-128">fIterative</span></span>

<span data-ttu-id="43cdb-129">O membro **fIterative** especifica se cada nó contatado pela infraestrutura DRT durante a pesquisa terá os dados de chave/ponto de extremidade associados a ele disponibilizados para o aplicativo por meio do [**\_ \_ resultado da pesquisa DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span><span class="sxs-lookup"><span data-stu-id="43cdb-129">The **fIterative** member specifies if each node contacted by the DRT infrastructure during the search will have the key/endpoint data associated with it made available to the application via [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span></span> <span data-ttu-id="43cdb-130">Ao definir **fIterative** como **true**, o valor de **cMaxEndpoints = 1** será forçado.</span><span class="sxs-lookup"><span data-stu-id="43cdb-130">By setting **fIterative** to **TRUE**, the value of **cMaxEndpoints = 1** will be forced.</span></span> <span data-ttu-id="43cdb-131">Quando **fIterative** é definido como **true** em uma consulta de pesquisa para o DRT, o aplicativo é chamado de volta após o contato com cada nó ou "hop".</span><span class="sxs-lookup"><span data-stu-id="43cdb-131">When **fIterative** is set to **TRUE** within a search query for the DRT, the application is called back after contact with each node or "hop."</span></span> <span data-ttu-id="43cdb-132">Cada resultado de salto contém uma chave que indica qual nó será pesquisado pelo DRT em seguida.</span><span class="sxs-lookup"><span data-stu-id="43cdb-132">Each hop result contains a key indicating which node the DRT will search next.</span></span> <span data-ttu-id="43cdb-133">Um resultado de salto é retornado por meio de [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) como um resultado **\_ \_ intermediário de correspondência DRT** .</span><span class="sxs-lookup"><span data-stu-id="43cdb-133">A hop result is returned via [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) as a **DRT\_MATCH\_INTERMEDIATE** result.</span></span>

## <a name="pminimumkey-and-pmaximumkey"></a><span data-ttu-id="43cdb-134">pMinimumKey e pMaximumKey</span><span class="sxs-lookup"><span data-stu-id="43cdb-134">pMinimumKey and pMaximumKey</span></span>

<span data-ttu-id="43cdb-135">Os membros **pMinimumKey** e **pMaximumKey** podem ser usados para pesquisar chaves que estejam dentro de um intervalo.</span><span class="sxs-lookup"><span data-stu-id="43cdb-135">The **pMinimumKey** and **pMaximumKey** members can be used to search for keys falling within a range.</span></span> <span data-ttu-id="43cdb-136">Se o membro **fAnyMatchInRange** for definido como **false**, o DRT retornará as chaves mais próximas para o destino de pesquisa (especificado usando o argumento PKey passado na função [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) ) que se enquadram dentro do intervalo.</span><span class="sxs-lookup"><span data-stu-id="43cdb-136">If the **fAnyMatchInRange** member is set to **FALSE**, the DRT will return the closest key(s) to the search target (specified using the pKey argument passed in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function) falling within the range.</span></span> <span data-ttu-id="43cdb-137">Observe que o argumento *pKey* passado para **DrtStartSearch** deve estar dentro do intervalo definido por **pMinimumKey** e **pMaximumKey**.</span><span class="sxs-lookup"><span data-stu-id="43cdb-137">Note that the *pKey* argument passed to **DrtStartSearch** must fall within the range defined by **pMinimumKey** and **pMaximumKey**.</span></span> <span data-ttu-id="43cdb-138">Para procurar uma chave precisa, defina **pMinimumKey**, **pMaximumKey** e *pKey* com o mesmo valor.</span><span class="sxs-lookup"><span data-stu-id="43cdb-138">To search for a precise key, set **pMinimumKey**, **pMaximumKey** and *pKey* to the same value.</span></span>

## <a name="related-topics"></a><span data-ttu-id="43cdb-139">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="43cdb-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="43cdb-140">Registrando e cancelando o registro de chaves</span><span class="sxs-lookup"><span data-stu-id="43cdb-140">Registering and Deregistering Keys</span></span>](registering-and-deregistering-keys.md)
</dt> <dt>

[<span data-ttu-id="43cdb-141">Sobre tabelas de roteamento distribuído</span><span class="sxs-lookup"><span data-stu-id="43cdb-141">About Distributed Routing Tables</span></span>](about-distributed-routing-tables.md)
</dt> <dt>

[<span data-ttu-id="43cdb-142">Referência de API de Tabela de roteamento distribuído</span><span class="sxs-lookup"><span data-stu-id="43cdb-142">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 



