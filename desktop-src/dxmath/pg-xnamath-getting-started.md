---
title: Introdução (DirectXMath)
description: A biblioteca DirectXMath implementa uma interface ideal e portátil para operações de algebra aritméticos e lineares em vetores de ponto flutuante de precisão simples (2D, 3D e 4D) ou matrizes (3 × 3 e 4 × 4).
ms.assetid: 9972e382-7a0f-88a7-ad44-18521af3520d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 05e599acfc498e28b33acfc5bbbba2bea5669d2a
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/10/2021
ms.locfileid: "104297853"
---
# <a name="getting-started-directxmath"></a><span data-ttu-id="114ab-103">Introdução (DirectXMath)</span><span class="sxs-lookup"><span data-stu-id="114ab-103">Getting started (DirectXMath)</span></span>

<span data-ttu-id="114ab-104">A biblioteca DirectXMath implementa uma interface ideal e portátil para operações de algebra aritméticos e lineares em vetores de ponto flutuante de precisão simples (2D, 3D e 4D) ou matrizes (3 × 3 e 4 × 4).</span><span class="sxs-lookup"><span data-stu-id="114ab-104">The DirectXMath Library implements an optimal and portable interface for arithmetic and linear algebra operations on single-precision floating-point vectors (2D, 3D, and 4D) or matrices (3×3 and 4×4).</span></span> <span data-ttu-id="114ab-105">A biblioteca tem algum suporte limitado para operações de vetor de inteiros.</span><span class="sxs-lookup"><span data-stu-id="114ab-105">The library has some limited support for integer vector operations.</span></span> <span data-ttu-id="114ab-106">Essas operações são usadas extensivamente na renderização e animação por programas gráficos.</span><span class="sxs-lookup"><span data-stu-id="114ab-106">These operations are used extensively in rendering and animation by graphics programs.</span></span> <span data-ttu-id="114ab-107">Não há suporte para vetores de precisão dupla (incluindo longas, curtas ou bytes) e apenas operações de vetor de inteiro limitadas.</span><span class="sxs-lookup"><span data-stu-id="114ab-107">There is no support for double-precision vectors (including longs, shorts, or bytes), and only limited integer vector operations.</span></span>

<span data-ttu-id="114ab-108">A biblioteca está disponível em uma variedade de plataformas Windows.</span><span class="sxs-lookup"><span data-stu-id="114ab-108">The library is available on a variety of Windows platforms.</span></span> <span data-ttu-id="114ab-109">Como a biblioteca fornece funcionalidade não disponível anteriormente, esta versão substitui as seguintes bibliotecas:</span><span class="sxs-lookup"><span data-stu-id="114ab-109">Because the library provides functionality not available previously, this version supersedes the following libraries:</span></span>

-   <span data-ttu-id="114ab-110">Biblioteca de matemática do Xbox fornecida pelo cabeçalho Xboxmath. h</span><span class="sxs-lookup"><span data-stu-id="114ab-110">Xbox Math library provided by the Xboxmath.h header</span></span>
-   <span data-ttu-id="114ab-111">Biblioteca do D3DX 9 fornecida pelas DLLs do D3DX 9</span><span class="sxs-lookup"><span data-stu-id="114ab-111">D3DX 9 library provided by the D3DX 9 DLLs</span></span>
-   <span data-ttu-id="114ab-112">D3DX 10 biblioteca matemática fornecida por meio das DLLs do D3DX 10</span><span class="sxs-lookup"><span data-stu-id="114ab-112">D3DX 10 math library provided through the D3DX 10 DLLs</span></span>
-   <span data-ttu-id="114ab-113">Biblioteca matemática do XNA fornecida pelo cabeçalho xnamath. h no SDK do DirectX e no Xbox 360 XDK</span><span class="sxs-lookup"><span data-stu-id="114ab-113">XNA Math library provided by the xnamath.h header in the DirectX SDK and Xbox 360 XDK</span></span>

<span data-ttu-id="114ab-114">Estas seções descrevem as noções básicas de introdução.</span><span class="sxs-lookup"><span data-stu-id="114ab-114">These sections outline the basics of getting started.</span></span>

-   [<span data-ttu-id="114ab-115">Download</span><span class="sxs-lookup"><span data-stu-id="114ab-115">Download</span></span>](#download)
-   [<span data-ttu-id="114ab-116">Requisitos do sistema de tempo de execução</span><span class="sxs-lookup"><span data-stu-id="114ab-116">Run-Time System Requirements</span></span>](#run-time-system-requirements)
-   [<span data-ttu-id="114ab-117">Visão geral do design</span><span class="sxs-lookup"><span data-stu-id="114ab-117">Design Overview</span></span>](#design-overview)
-   [<span data-ttu-id="114ab-118">Convenção de matriz</span><span class="sxs-lookup"><span data-stu-id="114ab-118">Matrix convention</span></span>](#matrix-convention)
-   [<span data-ttu-id="114ab-119">Uso básico</span><span class="sxs-lookup"><span data-stu-id="114ab-119">Basic Usage</span></span>](#basic-usage)
-   [<span data-ttu-id="114ab-120">Diretrizes de uso de tipo</span><span class="sxs-lookup"><span data-stu-id="114ab-120">Type Usage Guidelines</span></span>](#type-usage-guidelines)
-   [<span data-ttu-id="114ab-121">Criando vetores</span><span class="sxs-lookup"><span data-stu-id="114ab-121">Creating Vectors</span></span>](#creating-vectors)
    -   [<span data-ttu-id="114ab-122">VETORES DE CONSTANTE</span><span class="sxs-lookup"><span data-stu-id="114ab-122">CONSTANT VECTORS</span></span>](#constant-vectors)
    -   [<span data-ttu-id="114ab-123">VETORES DE VARIÁVEIS</span><span class="sxs-lookup"><span data-stu-id="114ab-123">VECTORS FROM VARIABLES</span></span>](#vectors-from-variables)
    -   [<span data-ttu-id="114ab-124">VETORES DE VETORES</span><span class="sxs-lookup"><span data-stu-id="114ab-124">VECTORS FROM VECTORS</span></span>](#vectors-from-vectors)
    -   [<span data-ttu-id="114ab-125">VETORES DA MEMÓRIA</span><span class="sxs-lookup"><span data-stu-id="114ab-125">VECTORS FROM MEMORY</span></span>](#vectors-from-memory)
-   [<span data-ttu-id="114ab-126">Extraindo componentes de vetores</span><span class="sxs-lookup"><span data-stu-id="114ab-126">Extracting Components from Vectors</span></span>](#extracting-components-from-vectors)
-   [<span data-ttu-id="114ab-127">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="114ab-127">Related topics</span></span>](#related-topics)

## <a name="download"></a><span data-ttu-id="114ab-128">Baixar</span><span class="sxs-lookup"><span data-stu-id="114ab-128">Download</span></span>

<span data-ttu-id="114ab-129">A biblioteca DirectXMath está incluída na SDK do Windows.</span><span class="sxs-lookup"><span data-stu-id="114ab-129">The DirectXMath library is included in the Windows SDK.</span></span> <span data-ttu-id="114ab-130">Como alternativa, você pode baixá-lo do [GitHub/Microsoft/DirectXMath](https://github.com/Microsoft/DirectXMath).</span><span class="sxs-lookup"><span data-stu-id="114ab-130">Alternatively you can download it from [GitHub/Microsoft/DirectXMath](https://github.com/Microsoft/DirectXMath).</span></span> <span data-ttu-id="114ab-131">Este site também contém projetos de exemplo relacionados.</span><span class="sxs-lookup"><span data-stu-id="114ab-131">This site also contains related sample projects.</span></span>

## <a name="run-time-system-requirements"></a><span data-ttu-id="114ab-132">Run-Time requisitos do sistema</span><span class="sxs-lookup"><span data-stu-id="114ab-132">Run-Time System Requirements</span></span>

<span data-ttu-id="114ab-133">A biblioteca DirectXMath usa instruções de processador especializadas para operações de vetor quando elas estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="114ab-133">The DirectXMath Library uses specialized processor instructions for vector operations when they are available.</span></span> <span data-ttu-id="114ab-134">Para evitar que um programa gere falhas de "exceção de instrução desconhecida", verifique o suporte ao processador chamando [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport) antes de usar a biblioteca DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="114ab-134">To avoid having a program generate "unknown instruction exception" faults, check for processor support by calling [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport) before using the DirectXMath Library.</span></span>

<span data-ttu-id="114ab-135">Estes são os requisitos de suporte de tempo de execução da biblioteca DirectXMath básica:</span><span class="sxs-lookup"><span data-stu-id="114ab-135">These are the basic DirectXMath Library run-time support requirements:</span></span>

-   <span data-ttu-id="114ab-136">A compilação padrão em uma plataforma Windows (x86/x64) requer suporte de instruções SSE/SSE2.</span><span class="sxs-lookup"><span data-stu-id="114ab-136">Default compilation on a Windows (x86/x64) platform requires SSE/SSE2 instruction support.</span></span>
-   <span data-ttu-id="114ab-137">O compliation padrão em uma plataforma Windows RT requer suporte de instrução ARM-NEON.</span><span class="sxs-lookup"><span data-stu-id="114ab-137">Default compliation on a Windows RT platform requires ARM-NEON instruction support.</span></span>
-   <span data-ttu-id="114ab-138">A compilação com [**\_ XM \_ nenhum \_ intrínsecos \_**](ovw-xnamath-reference-directives.md) definido requer apenas suporte à operação de ponto flutuante padrão.</span><span class="sxs-lookup"><span data-stu-id="114ab-138">Compilation with [**\_XM\_NO\_INTRINSICS\_**](ovw-xnamath-reference-directives.md) defined requires only standard floating-point operation support.</span></span>

> [!Note]  
> <span data-ttu-id="114ab-139">Ao chamar [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport), inclua <> Windows. h antes de incluir <DirectXMath. h>.</span><span class="sxs-lookup"><span data-stu-id="114ab-139">When you call [**XMVerifyCPUSupport**](/windows/win32/api/directxmath/nf-directxmath-xmverifycpusupport), include <windows.h> before you include <DirectXMath.h>.</span></span> <span data-ttu-id="114ab-140">Essa é a única função na biblioteca que requer qualquer conteúdo de <Windows. h> para que você não precise incluir <Windows. h> em todos os módulos que usam <DirectXMath. h>.</span><span class="sxs-lookup"><span data-stu-id="114ab-140">This is the only function in the library that requires any content from <windows.h> so you aren't required to include <windows.h> in every module that uses <DirectXMath.h>.</span></span>

 

## <a name="design-overview"></a><span data-ttu-id="114ab-141">Visão Geral do design</span><span class="sxs-lookup"><span data-stu-id="114ab-141">Design Overview</span></span>

<span data-ttu-id="114ab-142">A biblioteca DirectXMath dá suporte principalmente à linguagem de programação C++.</span><span class="sxs-lookup"><span data-stu-id="114ab-142">The DirectXMath Library primarily supports the C++ programming language.</span></span> <span data-ttu-id="114ab-143">A biblioteca é implementada usando rotinas embutidas nos arquivos de cabeçalho, DirectXMath \* . inl, DirectXPackedVector. inl e DirectXCollision. inl.</span><span class="sxs-lookup"><span data-stu-id="114ab-143">The library is implemented using inline routines in the header files, DirectXMath\*.inl, DirectXPackedVector.inl and DirectXCollision.inl.</span></span> <span data-ttu-id="114ab-144">Essa implementação usa intrínsecos de compilador de alto desempenho.</span><span class="sxs-lookup"><span data-stu-id="114ab-144">This implementation makes use of high-performance compiler intrinsics.</span></span>

<span data-ttu-id="114ab-145">A biblioteca DirectXMath fornece:</span><span class="sxs-lookup"><span data-stu-id="114ab-145">The DirectXMath Library provides:</span></span>

-   <span data-ttu-id="114ab-146">Uma implementação usando intrínsecos SSE/SSE2.</span><span class="sxs-lookup"><span data-stu-id="114ab-146">An implementation using SSE/SSE2 intrinsics.</span></span>
-   <span data-ttu-id="114ab-147">Uma implementação sem intrínsecos.</span><span class="sxs-lookup"><span data-stu-id="114ab-147">An implementation without intrinsics.</span></span>
-   <span data-ttu-id="114ab-148">Uma implementação que usa intrínsecos ARM-NEON.</span><span class="sxs-lookup"><span data-stu-id="114ab-148">An implementation using ARM-NEON intrinsics.</span></span>

<span data-ttu-id="114ab-149">Como a biblioteca é entregue usando arquivos de cabeçalho, use o código-fonte para personalizar e otimizar para seu próprio aplicativo.</span><span class="sxs-lookup"><span data-stu-id="114ab-149">Because the library is delivered using header files, use the source code to customize and optimize for your own app.</span></span>

## <a name="matrix-convention"></a><span data-ttu-id="114ab-150">Convenção de matriz</span><span class="sxs-lookup"><span data-stu-id="114ab-150">Matrix convention</span></span>

<span data-ttu-id="114ab-151">O DirectXMath usa matrizes de linha principal, vetores de linha e pré-multiplicidade.</span><span class="sxs-lookup"><span data-stu-id="114ab-151">DirectXMath uses row-major matrices, row vectors, and pre-multiplication.</span></span> <span data-ttu-id="114ab-152">Destromente é determinado pela qual a versão da função é usada (RH versus LH), caso contrário, a função funciona com as coordenadas da exibição da mão esquerda ou do lado direito.</span><span class="sxs-lookup"><span data-stu-id="114ab-152">Handedness is determined by which function version is used (RH vs. LH), otherwise the function works with either left-handed or right-handed view coordinates.</span></span>

<span data-ttu-id="114ab-153">Para referência, o Direct3D usou historicamente o sistema de coordenadas da esquerda, matrizes de linhas principais, vetores de linha e pré-multiplicação.</span><span class="sxs-lookup"><span data-stu-id="114ab-153">For reference, Direct3D has historically used left-handed coordinate system, row-major matrices, row vectors, and pre-multiplication.</span></span> <span data-ttu-id="114ab-154">O Direct3D moderno não tem um requisito forte para as coordenadas Left vs. canhotos e, normalmente, os sombreadores HLSL assumem como padrão o consumo de matrizes de coluna primária.</span><span class="sxs-lookup"><span data-stu-id="114ab-154">Modern Direct3D does not have a strong requirement for left vs. right-handed coordinates, and typically HLSL shaders default to consuming column-major matrices.</span></span> <span data-ttu-id="114ab-155">Consulte [ordenação de matriz HLSL](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-per-component-math) para obter detalhes.</span><span class="sxs-lookup"><span data-stu-id="114ab-155">See [HLSL Matrix Ordering](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-per-component-math) for details.</span></span>

## <a name="basic-usage"></a><span data-ttu-id="114ab-156">Uso básico</span><span class="sxs-lookup"><span data-stu-id="114ab-156">Basic Usage</span></span>

<span data-ttu-id="114ab-157">Para usar as funções de biblioteca DirectXMath, inclua os cabeçalhos DirectXMath. h, DirectXPackedVector. h, DirectXColors. h e/ou DirectXCollision. h.</span><span class="sxs-lookup"><span data-stu-id="114ab-157">To use DirectXMath Library functions, include the DirectXMath.h, DirectXPackedVector.h, DirectXColors.h, and/or DirectXCollision.h headers.</span></span> <span data-ttu-id="114ab-158">Os cabeçalhos são encontrados no kit de desenvolvimento de software do Windows para aplicativos da Windows Store.</span><span class="sxs-lookup"><span data-stu-id="114ab-158">The headers are found in the Windows Software Development Kit for Windows Store apps.</span></span>

## <a name="type-usage-guidelines"></a><span data-ttu-id="114ab-159">Diretrizes de uso de tipo</span><span class="sxs-lookup"><span data-stu-id="114ab-159">Type Usage Guidelines</span></span>

<span data-ttu-id="114ab-160">Os tipos [**XMVECTOR**](xmvector-data-type.md) e [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) são os cavalos de trabalho para a biblioteca DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="114ab-160">The [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types are the work horses for the DirectXMath Library.</span></span> <span data-ttu-id="114ab-161">Cada operação consome ou produz dados desses tipos.</span><span class="sxs-lookup"><span data-stu-id="114ab-161">Every operation consumes or produces data of these types.</span></span> <span data-ttu-id="114ab-162">Trabalhar com eles é a chave para usar a biblioteca.</span><span class="sxs-lookup"><span data-stu-id="114ab-162">Working with them is key to using the library.</span></span> <span data-ttu-id="114ab-163">No entanto, como o DirectXMath usa os conjuntos de instruções SIMD, esses tipos de dados estão sujeitos a várias restrições.</span><span class="sxs-lookup"><span data-stu-id="114ab-163">However, since DirectXMath makes use of the SIMD instruction sets, these data types are subject to a number of restrictions.</span></span> <span data-ttu-id="114ab-164">É fundamental que você entenda essas restrições se quiser fazer um bom uso das funções DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="114ab-164">It is critical that you understand these restrictions if you want to make good use of the DirectXMath functions.</span></span>

<span data-ttu-id="114ab-165">Você deve considerar o [**XMVECTOR**](xmvector-data-type.md) como um proxy para um registro de hardware SIMD e [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) como um proxy para um agrupamento lógico de quatro registros de hardware SIMD.</span><span class="sxs-lookup"><span data-stu-id="114ab-165">You should think of [**XMVECTOR**](xmvector-data-type.md) as a proxy for a SIMD hardware register, and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) as a proxy for a logical grouping of four SIMD hardware registers.</span></span> <span data-ttu-id="114ab-166">Esses tipos são anotados para indicar que exigem o alinhamento de 16 bytes para funcionar corretamente.</span><span class="sxs-lookup"><span data-stu-id="114ab-166">These types are annotated to indicate they require 16-byte alignment to work correctly.</span></span> <span data-ttu-id="114ab-167">O compilador os posicionará automaticamente na pilha quando forem usados como uma variável local ou colocá-los no segmento de dados quando eles forem usados como uma variável global.</span><span class="sxs-lookup"><span data-stu-id="114ab-167">The compiler will automatically place them correctly on the stack when they are used as a local variable, or place them in the data segment when they are used as a global variable.</span></span> <span data-ttu-id="114ab-168">Com as convenções adequadas, elas também podem ser passadas com segurança como parâmetros para uma função (consulte [convenções de chamada](pg-xnamath-internals.md) para obter detalhes).</span><span class="sxs-lookup"><span data-stu-id="114ab-168">With proper conventions, they can also be passed safely as parameters to a function (see [Calling Conventions](pg-xnamath-internals.md) for details).</span></span>

<span data-ttu-id="114ab-169">As alocações do heap, no entanto, são mais complicadas.</span><span class="sxs-lookup"><span data-stu-id="114ab-169">Allocations from the heap, however, are more complicated.</span></span> <span data-ttu-id="114ab-170">Assim, você precisa ter cuidado sempre que usar [**XMVECTOR**](xmvector-data-type.md) ou [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) como membro de uma classe ou estrutura a ser alocada a partir do heap.</span><span class="sxs-lookup"><span data-stu-id="114ab-170">As such, you need to be careful whenever you use either [**XMVECTOR**](xmvector-data-type.md) or [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) as a member of a class or structure to be allocated from the heap.</span></span> <span data-ttu-id="114ab-171">No Windows x64, todas as alocações de heap são alinhadas em 16 bytes, mas para o Windows x86, elas são apenas de 8 bytes alinhadas.</span><span class="sxs-lookup"><span data-stu-id="114ab-171">On Windows x64, all heap allocations are 16-byte aligned, but for Windows x86, they are only 8-byte aligned.</span></span> <span data-ttu-id="114ab-172">Há opções para alocar estruturas do heap com alinhamento de 16 bytes (consulte [alinhar alocações corretamente](pg-xnamath-optimizing.md)).</span><span class="sxs-lookup"><span data-stu-id="114ab-172">There are options for allocating structures from the heap with 16-byte alignment (see [Properly Align Allocations](pg-xnamath-optimizing.md)).</span></span> <span data-ttu-id="114ab-173">Para programas C++, você pode usar operadores New/Delete/New \[ \] /delete \[ \] (globalmente ou específicos de classe) para impor o alinhamento ideal, se desejado.</span><span class="sxs-lookup"><span data-stu-id="114ab-173">For C++ programs, you can use operator new/delete/new\[\]/delete\[\] overloads (either globally or class-specific) to enforce optimal alignment if desired.</span></span>

> [!Note]  
> <span data-ttu-id="114ab-174">Como alternativa para impor o alinhamento em sua classe C++ diretamente sobrecarregando novo/excluir, você pode usar o [idioma pImpl](https://en.wikipedia.org/wiki/Opaque_pointer).</span><span class="sxs-lookup"><span data-stu-id="114ab-174">As an alternative to enforcing alignment in your C++ class directly by overloading new/delete, you can use the [pImpl idiom](https://en.wikipedia.org/wiki/Opaque_pointer).</span></span> <span data-ttu-id="114ab-175">Se você garantir que sua classe **impl** esteja alinhada por meio de [**\_ \_ malloc alinhada**](/cpp/c-runtime-library/reference/aligned-malloc) internamente, você poderá usar livremente os tipos alinhados dentro da implementação interna.</span><span class="sxs-lookup"><span data-stu-id="114ab-175">If you ensure your **Impl** class is aligned via [**\_aligned\_malloc**](/cpp/c-runtime-library/reference/aligned-malloc) internally, you can then freely use aligned types within the internal implementation.</span></span> <span data-ttu-id="114ab-176">Essa é uma boa opção quando a classe ' Public ' é uma classe ref Windows Runtime ou destinada a uso com [**std:: Shared \_ PTR<>**](/cpp/standard-library/shared-ptr-class), o que, de outra forma, pode atrapalhar o alinhamento cuidadoso.</span><span class="sxs-lookup"><span data-stu-id="114ab-176">This is a good option when the 'public' class is a Windows Runtime ref class or intended for use with [**std::shared\_ptr<>**](/cpp/standard-library/shared-ptr-class), which can otherwise disrupt careful alignment.</span></span>

 

<span data-ttu-id="114ab-177">No entanto, geralmente é mais fácil e mais compacto evitar o uso de [**XMVECTOR**](xmvector-data-type.md) ou [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) diretamente em uma classe ou estrutura.</span><span class="sxs-lookup"><span data-stu-id="114ab-177">However, often it is easier and more compact to avoid using [**XMVECTOR**](xmvector-data-type.md) or [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) directly in a class or structure.</span></span> <span data-ttu-id="114ab-178">Em vez disso, faça uso de [**XMFLOAT3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat3), [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4), [**XMFLOAT4X3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x3), [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)e assim por diante, como membros de sua estrutura.</span><span class="sxs-lookup"><span data-stu-id="114ab-178">Instead, make use of the [**XMFLOAT3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat3), [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4), [**XMFLOAT4X3**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x3), [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4), and so on, as members of your structure.</span></span> <span data-ttu-id="114ab-179">Além disso, você pode usar as funções de [armazenamento de vetor](ovw-xnamath-reference-functions-storage.md) e de [carregamento de vetor](ovw-xnamath-reference-functions-load.md) para mover os dados com eficiência em variáveis locais **XMVECTOR** ou **XMMATRIX** , executar cálculos e armazenar os resultados.</span><span class="sxs-lookup"><span data-stu-id="114ab-179">Further, you can use the [Vector Loading](ovw-xnamath-reference-functions-load.md) and [Vector Storage](ovw-xnamath-reference-functions-storage.md) functions to move the data efficiently into **XMVECTOR** or **XMMATRIX** local variables, perform computations, and store the results.</span></span> <span data-ttu-id="114ab-180">Também há funções de streaming ([**XMVector3TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector3transformstream), [**XMVector4TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector4transformstream)e assim por diante) que operam com eficiência diretamente em matrizes desses tipos de dados.</span><span class="sxs-lookup"><span data-stu-id="114ab-180">There are also streaming functions ([**XMVector3TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector3transformstream), [**XMVector4TransformStream**](/windows/win32/api/directxmath/nf-directxmath-xmvector4transformstream), and so on) that efficiently operate directly on arrays of these data types.</span></span>

## <a name="creating-vectors"></a><span data-ttu-id="114ab-181">Criando vetores</span><span class="sxs-lookup"><span data-stu-id="114ab-181">Creating Vectors</span></span>

### <a name="constant-vectors"></a><span data-ttu-id="114ab-182">VETORES DE CONSTANTE</span><span class="sxs-lookup"><span data-stu-id="114ab-182">CONSTANT VECTORS</span></span>

<span data-ttu-id="114ab-183">Muitas operações exigem o uso de constantes em cálculos de vetor, e há várias maneiras de carregar um [**XMVECTOR**](xmvector-data-type.md) com os valores desejados.</span><span class="sxs-lookup"><span data-stu-id="114ab-183">Many operations require the use of constants in vector computations, and there are a number of ways to load an [**XMVECTOR**](xmvector-data-type.md) with the desired values.</span></span>

-   <span data-ttu-id="114ab-184">Se estiver carregando uma constante escalar em todos os elementos de um [**XMVECTOR**](xmvector-data-type.md), use [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) ou [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span><span class="sxs-lookup"><span data-stu-id="114ab-184">If loading a scalar constant into all elements of an [**XMVECTOR**](xmvector-data-type.md), use [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) or [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span></span>
    ```
    XMVECTOR vFive = XMVectorReplicate( 5.f );
    ```

    

-   <span data-ttu-id="114ab-185">Se estiver usando uma constante de vetor com valores fixos diferentes como um [**XMVECTOR**](xmvector-data-type.md), use as estruturas [**XMVECTORF32**](xmvectorf32-data-type.md), [**XMVECTORU32**](xmvectoru32-data-type.md), **XMVECTORI32** ou [**XMVECTORU8**](xmvectoru8-data-type.md) .</span><span class="sxs-lookup"><span data-stu-id="114ab-185">If using a vector constant with different fixed values as an [**XMVECTOR**](xmvector-data-type.md), use the [**XMVECTORF32**](xmvectorf32-data-type.md), [**XMVECTORU32**](xmvectoru32-data-type.md), **XMVECTORI32**, or [**XMVECTORU8**](xmvectoru8-data-type.md) structures.</span></span> <span data-ttu-id="114ab-186">Eles podem ser referenciados diretamente em qualquer lugar em que você passe um valor **XMVECTOR** .</span><span class="sxs-lookup"><span data-stu-id="114ab-186">These can be then referenced directly anywhere you would pass an **XMVECTOR** value.</span></span>
    ```
    static const XMVECTORF32 vFactors = { 1.0f, 2.0f, 3.0f, 4.0f };
    ```

    

    > [!Note]  
    > <span data-ttu-id="114ab-187">Não use listas de inicializadores diretamente com [**XMVECTOR**](xmvector-data-type.md) (ou seja, XMVECTOR v = {1.0 f, 2.0 f, 3.0 f, 4.0 f}).</span><span class="sxs-lookup"><span data-stu-id="114ab-187">Do not use initializer lists directly with [**XMVECTOR**](xmvector-data-type.md) (that is, XMVECTOR v = { 1.0f, 2.0f, 3.0f, 4.0f }).</span></span> <span data-ttu-id="114ab-188">Esse código não é eficiente e não é portátil em todas as plataformas com suporte do DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="114ab-188">Such code is inefficient and is not portable across all platforms that are supported by DirectXMath.</span></span>

     

-   <span data-ttu-id="114ab-189">O DirectXMath inclui várias constantes globais predefinidas que você pode usar em seu código (g \_ XMOne, g \_ XMOne3, g \_ XMTwo, g \_ XMOneHalf, g \_ XMHalfPi, g \_ XMPi e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="114ab-189">DirectXMath includes a number of pre-defined global constants you can make use of in your code (g\_XMOne, g\_XMOne3, g\_XMTwo, g\_XMOneHalf, g\_XMHalfPi, g\_XMPi, and so on).</span></span> <span data-ttu-id="114ab-190">Pesquise o cabeçalho DirectXMath. h para os valores de **XMGLOBALCONSTANT** .</span><span class="sxs-lookup"><span data-stu-id="114ab-190">Search the DirectXMath.h header for the **XMGLOBALCONSTANT** values.</span></span>
-   <span data-ttu-id="114ab-191">Há um conjunto de constantes de vetor para cores RGB comuns (vermelho, verde, azul, amarelo e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="114ab-191">There are a set of vector constants for common RGB colors (Red, Green, Blue, Yellow, and so on).</span></span> <span data-ttu-id="114ab-192">Para obter mais informações sobre essas constantes de vetor, consulte DirectXColors. h e o namespace DirectX:: Colors.</span><span class="sxs-lookup"><span data-stu-id="114ab-192">For more info about these vector constants, see DirectXColors.h and the DirectX::Colors namespace.</span></span>

### <a name="vectors-from-variables"></a><span data-ttu-id="114ab-193">VETORES DE VARIÁVEIS</span><span class="sxs-lookup"><span data-stu-id="114ab-193">VECTORS FROM VARIABLES</span></span>

-   <span data-ttu-id="114ab-194">Se estiver criando um vetor de uma única variável escalar, consulte [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) e [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span><span class="sxs-lookup"><span data-stu-id="114ab-194">If creating a vector from a single scalar variable, see [**XMVectorReplicate**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicate) and [**XMVectorReplicateInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateint).</span></span>
    ```
    XMVECTOR v = XMVectorReplicate( f  );
    ```

    

-   <span data-ttu-id="114ab-195">Se estiver criando um vetor de quatro variáveis escalares, consulte [**XMVectorSet**](/windows/win32/api/directxmath/nf-directxmath-xmvectorset) e [**XMVectorSetInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsetint).</span><span class="sxs-lookup"><span data-stu-id="114ab-195">If creating a vector from four scalar variables, see [**XMVectorSet**](/windows/win32/api/directxmath/nf-directxmath-xmvectorset) and [**XMVectorSetInt**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsetint).</span></span>
    ```
    XMVECTOR v = XMVectorSet( fx, fy, fz, fw );
    ```

    

### <a name="vectors-from-vectors"></a><span data-ttu-id="114ab-196">VETORES DE VETORES</span><span class="sxs-lookup"><span data-stu-id="114ab-196">VECTORS FROM VECTORS</span></span>

-   <span data-ttu-id="114ab-197">Se criar um vetor de outro vetor com um componente específico definido como uma variável, você poderá considerar o uso de [funções de acessador de vetor](ovw-xnamath-reference-functions-accessors.md).</span><span class="sxs-lookup"><span data-stu-id="114ab-197">If creating a vector from another vector with a specific component set to a variable, you can consider using [Vector Accessor Functions](ovw-xnamath-reference-functions-accessors.md).</span></span>
    ```
    XMVECTOR v2 = XMVectorSetW( v1, fw );
    ```

    

-   <span data-ttu-id="114ab-198">Se estiver criando um vetor de outro vetor com um único componente replicado, use [**XMVectorSplatX**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatx), [**XMVectorSplatY**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplaty), [**XMVectorSplatZ**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatz)e [**XMVectorSplatW**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatw).</span><span class="sxs-lookup"><span data-stu-id="114ab-198">If creating a vector from another vector with a single component replicated, use [**XMVectorSplatX**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatx), [**XMVectorSplatY**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplaty), [**XMVectorSplatZ**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatz), and [**XMVectorSplatW**](/windows/win32/api/directxmath/nf-directxmath-xmvectorsplatw).</span></span>
    ```
    XMVECTOR vz = XMVectorSplatZ( v );
    ```

    

-   <span data-ttu-id="114ab-199">Se estiver criando um vetor de outro vetor ou par de vetores com componentes reordenados, consulte [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle) e [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute).</span><span class="sxs-lookup"><span data-stu-id="114ab-199">If creating a vector from another vector or pair of vectors with reordered components, see [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle) and [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute).</span></span>
    ```
    XMVECTOR v2 = XMVectorSwizzle<XM_SWIZZLE_Z, XM_SWIZZLE_Y, XM_SWIZZLE_W, XM_SWIZZLE_X>( v1 );

    XMVECTOR v3 = XMVectorPermute<XM_PERMUTE_0W, XM_PERMUTE_1X, XM_PERMUTE_0X, XM_PERMUTE_1Z>( v1, v2 );
    ```

    

### <a name="vectors-from-memory"></a><span data-ttu-id="114ab-200">VETORES DA MEMÓRIA</span><span class="sxs-lookup"><span data-stu-id="114ab-200">VECTORS FROM MEMORY</span></span>

-   <span data-ttu-id="114ab-201">Para carregar um único valor float da memória, consulte [**XMVectorReplicatePtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateptr), [**XMVectorReplicateIntPtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateintptr), [**XMLoadFloat**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat)e [**XMLoadInt**](/windows/win32/api/directxmath/nf-directxmath-xmloadint).</span><span class="sxs-lookup"><span data-stu-id="114ab-201">For loading a single float value from memory, see [**XMVectorReplicatePtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateptr), [**XMVectorReplicateIntPtr**](/windows/win32/api/directxmath/nf-directxmath-xmvectorreplicateintptr), [**XMLoadFloat**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat), and [**XMLoadInt**](/windows/win32/api/directxmath/nf-directxmath-xmloadint).</span></span>
-   <span data-ttu-id="114ab-202">Maneiras comuns de carregar matrizes float são: [**XMLoadFloat2**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat2), [**XMLoadFloat3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3), [**XMLoadFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4), [**XMLoadFloat3x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3x3), [**XMLoadFloat4x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x3)e [**XMLoadFloat4x4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x4).</span><span class="sxs-lookup"><span data-stu-id="114ab-202">Common ways to load float arrays are: [**XMLoadFloat2**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat2), [**XMLoadFloat3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3), [**XMLoadFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4), [**XMLoadFloat3x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat3x3), [**XMLoadFloat4x3**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x3), and [**XMLoadFloat4x4**](/windows/win32/api/directxmath/nf-directxmath-xmloadfloat4x4).</span></span>
-   <span data-ttu-id="114ab-203">O DirectXMath inclui um conjunto avançado de tipos e cargas e armazenamentos relacionados para lidar com várias estruturas de dados e formatos de GPU comuns.</span><span class="sxs-lookup"><span data-stu-id="114ab-203">DirectXMath includes a rich set of types and related loads and stores for handling various data-structures and common GPU formats.</span></span> <span data-ttu-id="114ab-204">Consulte a [carga de vetor](ovw-xnamath-reference-functions-load.md) e o armazenamento de [vetores](ovw-xnamath-reference-functions-storage.md).</span><span class="sxs-lookup"><span data-stu-id="114ab-204">See [Vector Load](ovw-xnamath-reference-functions-load.md) and [Vector Store](ovw-xnamath-reference-functions-storage.md).</span></span>

## <a name="extracting-components-from-vectors"></a><span data-ttu-id="114ab-205">Extraindo componentes de vetores</span><span class="sxs-lookup"><span data-stu-id="114ab-205">Extracting Components from Vectors</span></span>

<span data-ttu-id="114ab-206">O processamento de SIMD é mais eficiente quando os dados são carregados nos registros de SIMD e totalmente processados antes de extrair os resultados.</span><span class="sxs-lookup"><span data-stu-id="114ab-206">SIMD processing is most efficient when data is loaded into the SIMD registers and fully processed before extracting the results.</span></span> <span data-ttu-id="114ab-207">A conversão entre formulários escalares e vetoriais é ineficiente, portanto, recomendamos que você o faça somente quando necessário.</span><span class="sxs-lookup"><span data-stu-id="114ab-207">Conversion between scalar and vector forms is inefficient, so we recommend that you do it only when required.</span></span> <span data-ttu-id="114ab-208">Por esse motivo, as funções na biblioteca DirectXMath que produzem um valor escalar são retornadas em um formato de vetor em que o resultado escalar é replicado pelo vetor resultante (ou seja, [**XMVector2Dot**](/windows/win32/api/directxmath/nf-directxmath-xmvector2dot), [**XMVector3Length**](/windows/win32/api/directxmath/nf-directxmath-xmvector3length)e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="114ab-208">For this reason, functions in the DirectXMath library that produce a scalar value are returned in a vector form where the scalar result is replicated across the resulting vector (that is, [**XMVector2Dot**](/windows/win32/api/directxmath/nf-directxmath-xmvector2dot), [**XMVector3Length**](/windows/win32/api/directxmath/nf-directxmath-xmvector3length), and so on).</span></span> <span data-ttu-id="114ab-209">No entanto, quando você precisa de valores escalares, aqui estão algumas opções sobre como fazê-lo:</span><span class="sxs-lookup"><span data-stu-id="114ab-209">However, when you need scalar values, here are a few choices on how to go about it:</span></span>

-   <span data-ttu-id="114ab-210">Se uma única resposta escalar for computada, o uso das [funções de acessador de vetor](ovw-xnamath-reference-functions-accessors.md) será apropriado:</span><span class="sxs-lookup"><span data-stu-id="114ab-210">If a single scalar answer is computed, use of the [Vector Accessor Functions](ovw-xnamath-reference-functions-accessors.md) is appropriate:</span></span>
    ```
    float f = XMVectorGetX( v );
    ```

    

-   <span data-ttu-id="114ab-211">Se for necessário extrair vários componentes do vetor, considere armazenar o vetor em uma estrutura de memória e lê-lo de volta.</span><span class="sxs-lookup"><span data-stu-id="114ab-211">If multiple components of the vector are required to be extracted, consider storing the vector in a memory structure and reading it back.</span></span> <span data-ttu-id="114ab-212">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="114ab-212">For example:</span></span>
    ```
    XMFLOAT4A t;
    XMStoreFloat4A( &t, v );
    // t.x, t.y, t.z, and t.w can be individually accessed now
    ```

    

-   <span data-ttu-id="114ab-213">A forma mais eficiente de processamento de vetor é usar o streaming de memória para memória em que os dados de entrada são carregados da memória (usando [funções de carga de vetor](ovw-xnamath-reference-functions-load.md)), processados totalmente no formato SIMD e gravados na memória (usando funções de armazenamento de [vetor](ovw-xnamath-reference-functions-storage.md)).</span><span class="sxs-lookup"><span data-stu-id="114ab-213">The most efficient form of vector processing is to use memory-to-memory streaming where the input data is loaded from memory (using [Vector Load Functions](ovw-xnamath-reference-functions-load.md)), processed fully in SIMD form, and then written to memory (using [Vector Store Functions](ovw-xnamath-reference-functions-storage.md)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="114ab-214">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="114ab-214">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="114ab-215">Guia de programação do DirectXMath</span><span class="sxs-lookup"><span data-stu-id="114ab-215">DirectXMath Programming Guide</span></span>](ovw-xnamath-progguide.md)
</dt> </dl>

 

 