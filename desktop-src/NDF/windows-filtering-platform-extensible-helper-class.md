---
title: Classe auxiliar extensível da plataforma de filtragem do Windows
description: A WFP (plataforma de filtragem do Windows) inclui uma classe auxiliar NDF (estrutura de diagnóstico de rede), chamada de FPHC (classe auxiliar de plataforma de filtragem).
ms.assetid: 006ea30c-8682-4a3d-803a-73dba5162696
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858835c1a649602293ed042c13205ca982de9258
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103917384"
---
# <a name="windows-filtering-platform-extensible-helper-class"></a><span data-ttu-id="30244-103">Classe auxiliar extensível da plataforma de filtragem do Windows</span><span class="sxs-lookup"><span data-stu-id="30244-103">Windows Filtering Platform Extensible Helper Class</span></span>

<span data-ttu-id="30244-104">A [WFP (plataforma de filtragem do Windows)](/windows/desktop/FWP/windows-filtering-platform-start-page) inclui uma classe auxiliar NDF (estrutura de diagnóstico de rede), chamada de FPHC (classe auxiliar de plataforma de filtragem).</span><span class="sxs-lookup"><span data-stu-id="30244-104">The [Windows Filtering Platform (WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) includes a Network Diagnostics Framework (NDF) helper class, called the Filtering Platform helper class (FPHC).</span></span> <span data-ttu-id="30244-105">O FPHC pode ajudar a identificar as causas raiz dos problemas de conectividade causados pela WFP.</span><span class="sxs-lookup"><span data-stu-id="30244-105">FPHC can help identify the root causes of connectivity issues caused by WFP.</span></span> <span data-ttu-id="30244-106">Os desenvolvedores de firewall de terceiros podem implementar suas próprias classes auxiliares NDF.</span><span class="sxs-lookup"><span data-stu-id="30244-106">Third-party firewall developers can implement their own NDF helper classes.</span></span> <span data-ttu-id="30244-107">A extensibilidade do FPHC permite que essas classes auxiliares de terceiros sejam invocadas durante o diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="30244-107">FPHC extensibility allows these third-party helper classes to be invoked during diagnostics.</span></span>

<span data-ttu-id="30244-108">Este tópico pressupõe familiaridade com a [API WFP](/windows/desktop/FWP/windows-filtering-platform-start-page).</span><span class="sxs-lookup"><span data-stu-id="30244-108">This topic assumes familiarity with the [WFP API](/windows/desktop/FWP/windows-filtering-platform-start-page).</span></span>

## <a name="why-extend-the-fphc"></a><span data-ttu-id="30244-109">Por que estender o FPHC?</span><span class="sxs-lookup"><span data-stu-id="30244-109">Why Extend the FPHC?</span></span>

<span data-ttu-id="30244-110">Todos os desenvolvedores que escrevem aplicativos que chamam a API WFP devem gravar uma classe auxiliar NDF que estenda FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-110">All developers that write applications that call the WFP API should write an NDF helper class that extends FPHC.</span></span>

<span data-ttu-id="30244-111">O FPHC pode identificar a WFP como a causa de um problema de conectividade.</span><span class="sxs-lookup"><span data-stu-id="30244-111">FPHC can identify WFP as the cause of a connectivity issue.</span></span> <span data-ttu-id="30244-112">Se disponível, o FPHC também pode identificar o provedor que criou o filtro que está bloqueando o tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="30244-112">If available, FPHC can also identify the provider that created the filter that is blocking network traffic.</span></span> <span data-ttu-id="30244-113">O FPHC passa essas informações para o NDF, que, por sua vez, pode notificar o usuário de que a WFP está causando o problema de conectividade e dar o nome do provedor que está bloqueando o tráfego.</span><span class="sxs-lookup"><span data-stu-id="30244-113">FPHC passes this information to NDF, which in turn can then notify the user that WFP is causing the connectivity problem and give the name of the provider blocking traffic.</span></span>

<span data-ttu-id="30244-114">No entanto, o FPHC não pode sugerir uma ação corretiva para o usuário, nem pode fornecer o motivo pelo qual o filtro está bloqueando o tráfego para o usuário.</span><span class="sxs-lookup"><span data-stu-id="30244-114">However, the FPHC cannot suggest a corrective action to the user, nor can it provide the reason that the filter is blocking traffic to the user.</span></span> <span data-ttu-id="30244-115">Somente uma extensão FPHC pode executar essas tarefas.</span><span class="sxs-lookup"><span data-stu-id="30244-115">Only a FPHC extension can perform those tasks.</span></span>

<span data-ttu-id="30244-116">Considere um aplicativo de firewall de terceiros que chama a API WFP.</span><span class="sxs-lookup"><span data-stu-id="30244-116">Consider a third-party firewall application that calls the WFP API.</span></span> <span data-ttu-id="30244-117">Se o firewall de terceiros implementar uma extensão FPHC, as ações personalizadas poderão ser implementadas para lidar com problemas de conectividade identificados pelo NDF.</span><span class="sxs-lookup"><span data-stu-id="30244-117">If the third-party firewall implements a FPHC extension, then custom actions can be implemented to handle connectivity issues identified by NDF.</span></span> <span data-ttu-id="30244-118">Quando o NDF diagnostica que um aplicativo foi bloqueado pelo firewall de terceiros, a extensão FPHC pode manipular o evento de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="30244-118">When NDF diagnoses that an application has been blocked by the third-party firewall, the FPHC extension can handle the blocking event.</span></span> <span data-ttu-id="30244-119">Uma maneira que a extensão FPHC poderia manipular um evento é apresentar ao usuário um prompt para desbloquear um programa usando o firewall e, em seguida, desbloquear o programa após a confirmação do usuário.</span><span class="sxs-lookup"><span data-stu-id="30244-119">One way that the FPHC extension could handle an event is to present the user with a prompt to unblock a program using the firewall and then unblock the program upon user confirmation.</span></span> <span data-ttu-id="30244-120">Como alternativa, a extensão FPHC poderia lidar com um evento notificando o usuário do motivo pelo qual o aplicativo foi bloqueado, como um aplicativo foi bloqueado porque ele foi considerado malware pelo firewall.</span><span class="sxs-lookup"><span data-stu-id="30244-120">Alternatively, the FPHC extension could handle an event by notifying the user of the reason why the application was blocked, such as an application was blocked because it was considered malware by the firewall.</span></span>

## <a name="about-wfp-diagnostics"></a><span data-ttu-id="30244-121">Sobre o diagnóstico de WFP</span><span class="sxs-lookup"><span data-stu-id="30244-121">About WFP Diagnostics</span></span>

<span data-ttu-id="30244-122">Quando o NDF é invocado para diagnosticar um problema de rede, as classes auxiliares são contatadas para determinar a causa do problema.</span><span class="sxs-lookup"><span data-stu-id="30244-122">When NDF is invoked to diagnose a network issue, helper classes are contacted to determine the cause of the issue.</span></span> <span data-ttu-id="30244-123">Se uma classe auxiliar de nível superior determinar que uma falha de rede pode ser causada pela WFP, ela gerará uma hipótese para FPHC com base nas informações disponíveis.</span><span class="sxs-lookup"><span data-stu-id="30244-123">If a higher-level helper class determines that a network failure may be caused by WFP, it generates a hypothesis for FPHC based on available information.</span></span> <span data-ttu-id="30244-124">O NDF passa essa hipótese, na forma de vários atributos de evento, para FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-124">NDF passes this hypothesis, in the form of several event attributes, to FPHC.</span></span> <span data-ttu-id="30244-125">Esses atributos são descritos detalhadamente na seção [atributos de evento FPHC](#windows-filtering-platform-extensible-helper-class) abaixo.</span><span class="sxs-lookup"><span data-stu-id="30244-125">These attributes are described in detail in the [FPHC Event Attributes](#windows-filtering-platform-extensible-helper-class) section below.</span></span>

<span data-ttu-id="30244-126">Um problema de rede pode ser descrito como um problema de conectividade que afeta uma tentativa de conexão específica.</span><span class="sxs-lookup"><span data-stu-id="30244-126">A network issue can be described as a connectivity problem affecting a particular connection attempt.</span></span> <span data-ttu-id="30244-127">Por exemplo, o usuário pode ter bloqueado acidentalmente um aplicativo clicando inadvertidamente em **não permitir**.</span><span class="sxs-lookup"><span data-stu-id="30244-127">For example, the user may have accidentally blocked an application by inadvertently clicking **Don't allow**.</span></span> <span data-ttu-id="30244-128">Em seguida, o Firewall bloqueará a associação do aplicativo a qualquer porta.</span><span class="sxs-lookup"><span data-stu-id="30244-128">The firewall will then block the application from binding to any port.</span></span> <span data-ttu-id="30244-129">O usuário, sem saber por que o aplicativo está bloqueado, pode tentar diagnosticar o problema por meio de um ponto de entrada oferecido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="30244-129">The user, not knowing why the application is blocked, may try to diagnose the issue through an entry point offered by the application.</span></span> <span data-ttu-id="30244-130">FPHC examinará os logs e, se encontrar uma correspondência, recuperará a ID do filtro e a ID do provedor desse filtro específico.</span><span class="sxs-lookup"><span data-stu-id="30244-130">FPHC will look at the logs, and if it finds a match it will retrieve the filter ID and the provider ID of that particular filter.</span></span> <span data-ttu-id="30244-131">Neste ponto, FPHC sabe quem é o proprietário do filtro e ele passará pelo processo de diagnóstico para a classe auxiliar apropriada para diagnóstico mais detalhado.</span><span class="sxs-lookup"><span data-stu-id="30244-131">At this point, FPHC knows who the owner of that filter is, and it will hand over the diagnostic process to the appropriate helper class for further diagnosis.</span></span>

<span data-ttu-id="30244-132">O evento mais recente nos logs de eventos de WFP para corresponder aos atributos é selecionado como sendo relevante para o problema de rede.</span><span class="sxs-lookup"><span data-stu-id="30244-132">The most recent event in the WFP event logs to match the attributes is selected as being relevant to the network issue.</span></span> <span data-ttu-id="30244-133">Se nenhum evento correspondente for encontrado e a hora em que o evento ocorreu for abordada no log WFP, FPHC indicará ao NDF que ele está íntegro.</span><span class="sxs-lookup"><span data-stu-id="30244-133">If no matching events are found and the time the event happened is covered in the WFP log, FPHC indicates to NDF that it is healthy.</span></span> <span data-ttu-id="30244-134">Se nenhum evento correspondente for encontrado e os logs de WFP não incluírem a hora em que o evento ocorreu, FPHC retornará um status indeterminado para NDF.</span><span class="sxs-lookup"><span data-stu-id="30244-134">If no matching events are found and the WFP logs do not include the time the event occurred, FPHC returns an indeterminate status to NDF.</span></span>

<span data-ttu-id="30244-135">Se um evento correspondente for encontrado, FPHC usará a ID do provedor do filtro que fez com que o evento identificasse o provedor da regra de segurança que bloqueou a conectividade.</span><span class="sxs-lookup"><span data-stu-id="30244-135">If a matching event is found, FPHC uses the provider ID of the filter which caused the event to identify the provider of the security rule that blocked connectivity.</span></span> <span data-ttu-id="30244-136">FPHC verifica se existe uma extensão de classe auxiliar para esse provedor.</span><span class="sxs-lookup"><span data-stu-id="30244-136">FPHC then checks whether a helper class extension exists for that provider.</span></span> <span data-ttu-id="30244-137">Se um for encontrado, FPHC gerará uma hipótese para esse provedor e, em seguida, NDF invocará a extensão.</span><span class="sxs-lookup"><span data-stu-id="30244-137">If one is found, FPHC generates a hypothesis for that provider and then NDF invokes the extension.</span></span> <span data-ttu-id="30244-138">A extensão deve retornar informações úteis de diagnóstico e reparo para o usuário.</span><span class="sxs-lookup"><span data-stu-id="30244-138">The extension should return helpful diagnostic and repair information to the user.</span></span>

## <a name="helper-class-registration"></a><span data-ttu-id="30244-139">Registro de classe auxiliar</span><span class="sxs-lookup"><span data-stu-id="30244-139">Helper Class Registration</span></span>

<span data-ttu-id="30244-140">Uma extensão FPHC deve ser registrada conforme descrito em [registrando extensões de classe auxiliar NDF](registering-ndf-helper-class-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="30244-140">A FPHC extension must be registered as described in [Registering NDF Helper Class Extensions](registering-ndf-helper-class-extensions.md).</span></span> <span data-ttu-id="30244-141">Os desenvolvedores que implementam uma classe auxiliar devem registrar suas extensões para garantir que a extensão seja chamada pelo NDF quando apropriado.</span><span class="sxs-lookup"><span data-stu-id="30244-141">Developers implementing a helper class must register their extensions to ensure that the extension is called by NDF when appropriate.</span></span> <span data-ttu-id="30244-142">O *atributo correspondente* descrito abaixo deve ser armazenado no registro em **HKLM \\ sistema \\ CurrentControlSet \\ Control \\ NetDiagFx** \\ *nome_do_fornecedorname* \\ **HostDLLs** \\ *auxiliar Class dll* \\ **HelperClasses** \\ *nome da classe auxiliar* \\ **MatchAttribute**.</span><span class="sxs-lookup"><span data-stu-id="30244-142">The *matching attribute* described below must be stored in the registry under **HKLM\\System\\CurrentControlSet\\Control\\NetDiagFx**\\*VendorName*\\**HostDLLs**\\*Helper Class DLL*\\**HelperClasses**\\*Helper Class Name*\\**MatchAttributes**.</span></span>

<span data-ttu-id="30244-143">A tabela a seguir mostra o atributo de correspondência usado para identificar a hipótese a ser usada no diagnóstico no log de eventos do WFP.</span><span class="sxs-lookup"><span data-stu-id="30244-143">The following table shows the matching attribute used to identify the hypothesis to use in diagnostics in the WFP event log.</span></span> 

| <span data-ttu-id="30244-144">Nome</span><span class="sxs-lookup"><span data-stu-id="30244-144">Name</span></span>       | <span data-ttu-id="30244-145">Tipo</span><span class="sxs-lookup"><span data-stu-id="30244-145">Type</span></span>    | <span data-ttu-id="30244-146">Descrição</span><span class="sxs-lookup"><span data-stu-id="30244-146">Description</span></span>                                                                                                                                                                                                                                                                                                 |
|------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="30244-147">ProviderID</span><span class="sxs-lookup"><span data-stu-id="30244-147">ProviderID</span></span> | <span data-ttu-id="30244-148">REG \_ sz</span><span class="sxs-lookup"><span data-stu-id="30244-148">REG\_SZ</span></span> | <span data-ttu-id="30244-149">O GUID da extensão FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-149">The GUID of the FPHC extension.</span></span> <span data-ttu-id="30244-150">Esse valor deve ser o mesmo que o GUID do provedor WFP.</span><span class="sxs-lookup"><span data-stu-id="30244-150">This value must be the same as the WFP Provider GUID.</span></span> <br/> <span data-ttu-id="30244-151">Essa cadeia de caracteres diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="30244-151">This string is case-sensitive.</span></span> <span data-ttu-id="30244-152">Ele deve ser armazenado no registro em maiúsculas com chaves e hifens delimitadores.</span><span class="sxs-lookup"><span data-stu-id="30244-152">It should be stored in the registry in upper case with enclosing braces and hyphens.</span></span> <span data-ttu-id="30244-153">Por exemplo, {C200E360-38C5-11CE-AE62-08002B2B79EF} é uma ProviderID válida.</span><span class="sxs-lookup"><span data-stu-id="30244-153">For example, {C200E360-38C5-11CE-AE62-08002B2B79EF} is a valid ProviderID.</span></span><br/> |



 

<span data-ttu-id="30244-154">Quando o ProviderId de um filtro de bloqueio corresponde ao de uma classe auxiliar registrada, o FPHC informa o NDF para invocar essa classe auxiliar, estendendo, assim, a capacidade de diagnóstico do FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-154">When the ProviderID of a blocking filter matches that of a registered helper class, FPHC informs NDF to invoke that helper class, thus extending the diagnostic capability of FPHC.</span></span>

## <a name="fphc-event-attributes"></a><span data-ttu-id="30244-155">Atributos de evento FPHC</span><span class="sxs-lookup"><span data-stu-id="30244-155">FPHC Event Attributes</span></span>

<span data-ttu-id="30244-156">A tabela a seguir lista os atributos de evento associados a cada evento correspondente.</span><span class="sxs-lookup"><span data-stu-id="30244-156">The following table lists the event attributes associated with each matching event.</span></span> <span data-ttu-id="30244-157">Cada atributo de evento é armazenado em uma estrutura de [**\_ atributo auxiliar**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) .</span><span class="sxs-lookup"><span data-stu-id="30244-157">Each event attribute is stored in a [**HELPER\_ATTRIBUTE**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) structure.</span></span> <span data-ttu-id="30244-158">Esses atributos são passados por NDF para FPHC quando um evento correspondente é encontrado.</span><span class="sxs-lookup"><span data-stu-id="30244-158">These attributes are passed by NDF to FPHC when a matching event is found.</span></span> <span data-ttu-id="30244-159">Por sua vez, eles podem ser passados para extensões FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-159">These can in turn be passed to FPHC extensions.</span></span>



| <span data-ttu-id="30244-160">Atributo</span><span class="sxs-lookup"><span data-stu-id="30244-160">Attribute</span></span>     | <span data-ttu-id="30244-161">[**Atributo \_**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) Valor do tipo</span><span class="sxs-lookup"><span data-stu-id="30244-161">[**ATTRIBUTE\_TYPE**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) value</span></span> | <span data-ttu-id="30244-162">Descrição</span><span class="sxs-lookup"><span data-stu-id="30244-162">Description</span></span>                                                                                                                               |
|---------------|-------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="30244-163">GUID do provedor</span><span class="sxs-lookup"><span data-stu-id="30244-163">Provider GUID</span></span> | <span data-ttu-id="30244-164">NO \_ GUID</span><span class="sxs-lookup"><span data-stu-id="30244-164">AT\_GUID</span></span>                                        | <span data-ttu-id="30244-165">O GUID do provedor associado ao filtro.</span><span class="sxs-lookup"><span data-stu-id="30244-165">The GUID of the provider associated with the filter.</span></span>                                                                                      |
| <span data-ttu-id="30244-166">Timestamp</span><span class="sxs-lookup"><span data-stu-id="30244-166">Timestamp</span></span>     | <span data-ttu-id="30244-167">\_cadeia de \_ caracteres de octeto</span><span class="sxs-lookup"><span data-stu-id="30244-167">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="30244-168">Um buffer do tipo FILETIME que especifica a hora em que o evento ocorreu.</span><span class="sxs-lookup"><span data-stu-id="30244-168">A buffer of type FILETIME that specifies the time at which the event occurred.</span></span> <span data-ttu-id="30244-169">Esse carimbo de data/hora pode ser usado para identificar exclusivamente um evento.</span><span class="sxs-lookup"><span data-stu-id="30244-169">This time stamp can be used to uniquely identify an event.</span></span> |
| <span data-ttu-id="30244-170">ipProtocol</span><span class="sxs-lookup"><span data-stu-id="30244-170">ipProtocol</span></span>    | <span data-ttu-id="30244-171">EM \_ UINT32</span><span class="sxs-lookup"><span data-stu-id="30244-171">AT\_UINT32</span></span>                                      | <span data-ttu-id="30244-172">O protocolo de camada de transporte, no formato UINT8.</span><span class="sxs-lookup"><span data-stu-id="30244-172">The transport layer protocol, in UINT8 format.</span></span>                                                                                            |
| <span data-ttu-id="30244-173">LocalAddr</span><span class="sxs-lookup"><span data-stu-id="30244-173">LocalAddr</span></span>     | <span data-ttu-id="30244-174">EM \_ SOCKADDR</span><span class="sxs-lookup"><span data-stu-id="30244-174">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="30244-175">O endereço IP local e a porta, armazenados em uma estrutura de [**\_ SOCKADDR de diagnóstico**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="30244-175">The local IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                             |
| <span data-ttu-id="30244-176">RemoteAddr</span><span class="sxs-lookup"><span data-stu-id="30244-176">RemoteAddr</span></span>    | <span data-ttu-id="30244-177">EM \_ SOCKADDR</span><span class="sxs-lookup"><span data-stu-id="30244-177">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="30244-178">O endereço IP remoto e a porta, armazenados em uma estrutura de [**\_ SOCKADDR de diagnóstico**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="30244-178">The remote IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                            |
| <span data-ttu-id="30244-179">userId</span><span class="sxs-lookup"><span data-stu-id="30244-179">userId</span></span>        | <span data-ttu-id="30244-180">\_cadeia de \_ caracteres de octeto</span><span class="sxs-lookup"><span data-stu-id="30244-180">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="30244-181">Um buffer do tipo SID que representa o userid.</span><span class="sxs-lookup"><span data-stu-id="30244-181">A buffer of type SID that represents the userid.</span></span> <span data-ttu-id="30244-182">Se userId tiver comprimento 0, o SID não estará disponível.</span><span class="sxs-lookup"><span data-stu-id="30244-182">If userId is of length 0, the SID is unavailable.</span></span>                                        |
| <span data-ttu-id="30244-183">appId</span><span class="sxs-lookup"><span data-stu-id="30244-183">appId</span></span>         | <span data-ttu-id="30244-184">na \_ cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="30244-184">AT\_STRING</span></span>                                      | <span data-ttu-id="30244-185">Um buffer que armazena o identificador do aplicativo recuperado.</span><span class="sxs-lookup"><span data-stu-id="30244-185">A buffer that stores the retrieved application identifier.</span></span> <span data-ttu-id="30244-186">Se appId tiver um valor de L "", o identificador do aplicativo não estará disponível.</span><span class="sxs-lookup"><span data-stu-id="30244-186">If appId has a value of L"", the application identifier is unavailable.</span></span>        |



 

## <a name="handling-fphc-events"></a><span data-ttu-id="30244-187">Manipulando eventos FPHC</span><span class="sxs-lookup"><span data-stu-id="30244-187">Handling FPHC Events</span></span>

<span data-ttu-id="30244-188">Antes de sugerir informações de diagnóstico e reparo para o usuário, uma extensão FPHC deve coletar mais dados do que é fornecido pelas notificações do FPHC.</span><span class="sxs-lookup"><span data-stu-id="30244-188">Before suggesting diagnostic and repair information to the user, a FPHC extension should gather more data than is provided by the FPHC notifications.</span></span> <span data-ttu-id="30244-189">Esses dados podem ser adquiridos das [funções de gerenciamento de eventos de WFP](/windows/desktop/FWP/fwp-mgmt-functions).</span><span class="sxs-lookup"><span data-stu-id="30244-189">This data can be acquired from the [WFP Event Management Functions](/windows/desktop/FWP/fwp-mgmt-functions).</span></span> <span data-ttu-id="30244-190">Essas funções são demonstradas no exemplo de [exibição de eventos de rede](/windows/desktop/FWP/displaying-net-events) .</span><span class="sxs-lookup"><span data-stu-id="30244-190">These functions are demonstrated in the [Displaying Net Events](/windows/desktop/FWP/displaying-net-events) sample.</span></span>

<span data-ttu-id="30244-191">Um exemplo de gerenciamento de eventos mais detalhado está incluído no SDK.</span><span class="sxs-lookup"><span data-stu-id="30244-191">A more detailed event management sample is included in the SDK.</span></span> <span data-ttu-id="30244-192">O código-fonte do exemplo pode ser encontrado no local de instalação do SDK em C: \\ arquivos de programas \\ Microsoft SDKs \\ Windows \\ <version number> \\ Samples \\ NetDs \\ WFP \\ DiagEvents.</span><span class="sxs-lookup"><span data-stu-id="30244-192">The source code for the sample can be found in the SDK installation location under C:\\Program Files\\Microsoft SDKs\\Windows\\<version number>\\Samples\\NetDs\\WFP\\DiagEvents.</span></span> <span data-ttu-id="30244-193">O SDK do Windows Vista está disponível no [centro de download](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span><span class="sxs-lookup"><span data-stu-id="30244-193">The Windows Vista SDK is available from the [Download Center](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span></span>

## <a name="built-in-fphc-diagnostics"></a><span data-ttu-id="30244-194">Diagnóstico de FPHC interno</span><span class="sxs-lookup"><span data-stu-id="30244-194">Built-in FPHC Diagnostics</span></span>

<span data-ttu-id="30244-195">Na ausência de uma extensão FPHC, o FPHC pode diagnosticar os cenários listados abaixo.</span><span class="sxs-lookup"><span data-stu-id="30244-195">In the absence of an FPHC extension, FPHC can diagnose the scenarios listed below.</span></span> <span data-ttu-id="30244-196">A maioria das falhas de conectividade diagnosticadas pelo FPHC ocorre porque os firewalls bloqueiam o tráfego.</span><span class="sxs-lookup"><span data-stu-id="30244-196">Most connectivity failures diagnosed by FPHC occur because firewalls block traffic.</span></span> <span data-ttu-id="30244-197">Os cenários de IPsec são menos comuns.</span><span class="sxs-lookup"><span data-stu-id="30244-197">The IPsec scenarios are less common.</span></span>

<span data-ttu-id="30244-198">A tabela a seguir mostra alguns cenários que causam falhas de conectividade que podem ser diagnosticadas pelo FPHC, juntamente com a descrição e as informações de reparo passadas para o NDF.</span><span class="sxs-lookup"><span data-stu-id="30244-198">The following table shows some scenarios causing connectivity failures that can be diagnosed by FPHC, along with the description and repair information passed to NDF.</span></span>



| <span data-ttu-id="30244-199">Cenário</span><span class="sxs-lookup"><span data-stu-id="30244-199">Scenario</span></span>                   | <span data-ttu-id="30244-200">Descrição de integridade baixa</span><span class="sxs-lookup"><span data-stu-id="30244-200">Low health description</span></span>                                                                                                               | <span data-ttu-id="30244-201">Informações de reparo</span><span class="sxs-lookup"><span data-stu-id="30244-201">Repair information</span></span>                   |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="30244-202">Remoção de firewall</span><span class="sxs-lookup"><span data-stu-id="30244-202">Firewall drop</span></span>              | <span data-ttu-id="30244-203">As configurações de firewall neste computador estão bloqueando a conexão.</span><span class="sxs-lookup"><span data-stu-id="30244-203">The firewall settings on this computer are blocking the connection.</span></span>                                                                  | <span data-ttu-id="30244-204">Verifique as configurações do firewall.</span><span class="sxs-lookup"><span data-stu-id="30244-204">Verify your firewall settings.</span></span>       |
| <span data-ttu-id="30244-205">Falha no modo principal</span><span class="sxs-lookup"><span data-stu-id="30244-205">Main Mode Failure</span></span>          | <span data-ttu-id="30244-206">Não é possível se conectar devido a uma incompatibilidade de diretiva de segurança IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-206">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="30244-207">Contate o proprietário da política IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-207">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="30244-208">Falha no modo rápido</span><span class="sxs-lookup"><span data-stu-id="30244-208">Quick Mode Failure</span></span>         | <span data-ttu-id="30244-209">Não é possível se conectar devido a uma incompatibilidade de diretiva de segurança IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-209">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="30244-210">Contate o proprietário da política IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-210">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="30244-211">Falha no modo de usuário</span><span class="sxs-lookup"><span data-stu-id="30244-211">User Mode Failure</span></span>          | <span data-ttu-id="30244-212">Não é possível se conectar devido a uma incompatibilidade de diretiva de segurança IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-212">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="30244-213">Contate o proprietário da política IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-213">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="30244-214">Falha de credencial</span><span class="sxs-lookup"><span data-stu-id="30244-214">Credential Failure</span></span>         | <span data-ttu-id="30244-215">Você não pode se conectar porque a AC (autoridade de certificação) raiz neste computador não corresponde à AC raiz no computador remoto.</span><span class="sxs-lookup"><span data-stu-id="30244-215">You cannot connect because the root certification authority (CA) on this computer does not match the root CA on the remote computer.</span></span> | <span data-ttu-id="30244-216">Atualize o certificado raiz confiável.</span><span class="sxs-lookup"><span data-stu-id="30244-216">Update the trusted root certificate.</span></span> |
| <span data-ttu-id="30244-217">Certificado expirado</span><span class="sxs-lookup"><span data-stu-id="30244-217">Expired Certificate</span></span>        | <span data-ttu-id="30244-218">O certificado usado para autenticação IPsec expirou.</span><span class="sxs-lookup"><span data-stu-id="30244-218">The certificate used for IPsec authentication has expired.</span></span>                                                                           | <span data-ttu-id="30244-219">Solicitar um certificado.</span><span class="sxs-lookup"><span data-stu-id="30244-219">Request a certificate.</span></span>               |
| <span data-ttu-id="30244-220">Outras falhas de certificado</span><span class="sxs-lookup"><span data-stu-id="30244-220">Other certificate failures</span></span> | <span data-ttu-id="30244-221">Um certificado válido não foi encontrado para autenticação IPsec.</span><span class="sxs-lookup"><span data-stu-id="30244-221">A valid certificate was not found for IPsec authentication.</span></span>                                                                          | <span data-ttu-id="30244-222">Solicitar um certificado.</span><span class="sxs-lookup"><span data-stu-id="30244-222">Request a certificate.</span></span>               |
| <span data-ttu-id="30244-223">Falha de Kerberos</span><span class="sxs-lookup"><span data-stu-id="30244-223">Kerberos failure</span></span>           | <span data-ttu-id="30244-224">O computador não faz parte deste domínio.</span><span class="sxs-lookup"><span data-stu-id="30244-224">The computer is not part of this domain.</span></span>                                                                                             | <span data-ttu-id="30244-225">Ingresse este computador em um domínio.</span><span class="sxs-lookup"><span data-stu-id="30244-225">Join this computer to a domain.</span></span>      |
| <span data-ttu-id="30244-226">Chave pré-compartilhada</span><span class="sxs-lookup"><span data-stu-id="30244-226">Preshared Key</span></span>              | <span data-ttu-id="30244-227">Redefina as chaves pré-compartilhadas.</span><span class="sxs-lookup"><span data-stu-id="30244-227">Reset the preshared keys.</span></span>                                                                                                            | <span data-ttu-id="30244-228">Redefina as chaves pré-compartilhadas.</span><span class="sxs-lookup"><span data-stu-id="30244-228">Reset the preshared keys.</span></span>            |



 

## <a name="related-topics"></a><span data-ttu-id="30244-229">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="30244-229">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="30244-230">Plataforma de filtragem do Windows</span><span class="sxs-lookup"><span data-stu-id="30244-230">Windows Filtering Platform</span></span>](/windows/desktop/FWP/windows-filtering-platform-start-page)
</dt> <dt>

[<span data-ttu-id="30244-231">Criando extensões de classe auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="30244-231">Designing NDF Helper Class Extensions</span></span>](designing-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="30244-232">Registrando extensões de classe auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="30244-232">Registering NDF Helper Class Extensions</span></span>](registering-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="30244-233">Exemplos de classe auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="30244-233">NDF Helper Class Examples</span></span>](ndf-helper-class-examples.md)
</dt> </dl>

 

