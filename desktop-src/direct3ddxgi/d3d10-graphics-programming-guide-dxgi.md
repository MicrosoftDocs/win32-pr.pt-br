---
description: Este tópico inclui as seções a seguir.
ms.assetid: 0522ccbf-e754-470a-8199-004fcbaa927d
title: Visão geral do DXGI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 324a5be26aade17385a6ab0b7d347015497a2a3f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104456466"
---
# <a name="dxgi-overview"></a><span data-ttu-id="b705f-103">Visão geral do DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-103">DXGI overview</span></span>

<span data-ttu-id="b705f-104">A Microsoft DirectX Graphics Infrastructure (DXGI) reconhece que algumas partes de gráficos evoluem mais lentamente do que outras.</span><span class="sxs-lookup"><span data-stu-id="b705f-104">Microsoft DirectX Graphics Infrastructure (DXGI) recognizes that some parts of graphics evolve more slowly than others.</span></span> <span data-ttu-id="b705f-105">O principal objetivo do DXGI é gerenciar tarefas de nível baixo que podem ser independentes do tempo de execução de gráficos do DirectX.</span><span class="sxs-lookup"><span data-stu-id="b705f-105">The primary goal of DXGI is to manage low-level tasks that can be independent of the DirectX graphics runtime.</span></span> <span data-ttu-id="b705f-106">DXGI fornece uma estrutura comum para futuros componentes de gráficos; o primeiro componente que aproveita o DXGI é o Microsoft Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="b705f-106">DXGI provides a common framework for future graphics components; the first component that takes advantage of DXGI is Microsoft Direct3D 10.</span></span>

<span data-ttu-id="b705f-107">Nas versões anteriores do Direct3D, tarefas de nível baixo, como a enumeração de dispositivos de hardware, a apresentação de quadros renderizados a uma saída, o controle de gama e o gerenciamento de uma transição de tela inteira foram incluídas no tempo de execução do Direct3D.</span><span class="sxs-lookup"><span data-stu-id="b705f-107">In previous versions of Direct3D, low-level tasks like enumeration of hardware devices, presenting rendered frames to an output, controlling gamma, and managing a full-screen transition were included in the Direct3D runtime.</span></span> <span data-ttu-id="b705f-108">Essas tarefas agora são implementadas em DXGI.</span><span class="sxs-lookup"><span data-stu-id="b705f-108">These tasks are now implemented in DXGI.</span></span>

<span data-ttu-id="b705f-109">A finalidade de DXGI é comunicar-se com o driver de modo kernel e o hardware do sistema, conforme mostrado no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="b705f-109">DXGI's purpose is to communicate with the kernel mode driver and the system hardware, as shown in the following diagram.</span></span>

![diagrama da comunicação entre aplicativos, DXGI e drivers e hardware](images/dxgi-dll.png)

<span data-ttu-id="b705f-111">Um aplicativo pode acessar o DXGI diretamente ou chamar as APIs do Direct3D em D3D11 \_ 1. h, D3D11. h, d3d10 \_ 1. h ou d3d10. h, que manipula as comunicações com dxgi para você.</span><span class="sxs-lookup"><span data-stu-id="b705f-111">An application can access DXGI directly, or call the Direct3D APIs in D3D11\_1.h, D3D11.h, D3D10\_1.h, or D3D10.h, which handles the communications with DXGI for you.</span></span> <span data-ttu-id="b705f-112">Talvez você queira trabalhar com DXGI diretamente se seu aplicativo precisar enumerar dispositivos ou controlar como os dados são apresentados a uma saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-112">You may want to work with DXGI directly if your application needs to enumerate devices or control how data is presented to an output.</span></span>

<span data-ttu-id="b705f-113">Este tópico inclui as seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="b705f-113">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="b705f-114">Enumerando adaptadores</span><span class="sxs-lookup"><span data-stu-id="b705f-114">Enumerating Adapters</span></span>](#enumerating-adapters)
    -   [<span data-ttu-id="b705f-115">Novas informações sobre como enumerar adaptadores para o Windows 8</span><span class="sxs-lookup"><span data-stu-id="b705f-115">New info about enumerating adapters for Windows 8</span></span>](#new-info-about-enumerating-adapters-for-windows-8)
-   [<span data-ttu-id="b705f-116">Apresentação</span><span class="sxs-lookup"><span data-stu-id="b705f-116">Presentation</span></span>](#presentation)
    -   [<span data-ttu-id="b705f-117">Criar uma cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-117">Create a Swap Chain</span></span>](#create-a-swap-chain)
    -   [<span data-ttu-id="b705f-118">Cuidado e alimentação da cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-118">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
    -   [<span data-ttu-id="b705f-119">Manipulando o redimensionamento da janela</span><span class="sxs-lookup"><span data-stu-id="b705f-119">Handling Window Resizing</span></span>](#handling-window-resizing)
    -   [<span data-ttu-id="b705f-120">Escolhendo a saída e o tamanho de DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-120">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
    -   [<span data-ttu-id="b705f-121">Depuração no modo de Full-Screen</span><span class="sxs-lookup"><span data-stu-id="b705f-121">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
    -   [<span data-ttu-id="b705f-122">Destruindo uma cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-122">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
    -   [<span data-ttu-id="b705f-123">Usando um monitor girado</span><span class="sxs-lookup"><span data-stu-id="b705f-123">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
    -   [<span data-ttu-id="b705f-124">Alternando modos</span><span class="sxs-lookup"><span data-stu-id="b705f-124">Switching Modes</span></span>](#switching-modes)
    -   [<span data-ttu-id="b705f-125">Dica de desempenho de tela inteira</span><span class="sxs-lookup"><span data-stu-id="b705f-125">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
    -   [<span data-ttu-id="b705f-126">Considerações sobre o multithread</span><span class="sxs-lookup"><span data-stu-id="b705f-126">Multithread Considerations</span></span>](#multithread-considerations)
-   [<span data-ttu-id="b705f-127">Respostas de DXGI do DLLMain</span><span class="sxs-lookup"><span data-stu-id="b705f-127">DXGI Responses from DLLMain</span></span>](#dxgi-responses-from-dllmain)
-   [<span data-ttu-id="b705f-128">Alterações de DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="b705f-128">DXGI 1.1 Changes</span></span>](#dxgi-11-changes)
-   [<span data-ttu-id="b705f-129">Alterações de DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="b705f-129">DXGI 1.2 Changes</span></span>](#dxgi-12-changes)
-   [<span data-ttu-id="b705f-130">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b705f-130">Related topics</span></span>](#related-topics)

<span data-ttu-id="b705f-131">Para ver quais formatos têm suporte do hardware do Direct3D 11:</span><span class="sxs-lookup"><span data-stu-id="b705f-131">To see which formats are supported by Direct3D 11 hardware:</span></span>

-   [<span data-ttu-id="b705f-132">Suporte ao formato DXGI para hardware 12,1 de nível de recurso Direct3D</span><span class="sxs-lookup"><span data-stu-id="b705f-132">DXGI Format Support for Direct3D Feature Level 12.1 Hardware</span></span>](hardware-support-for-direct3d-12-1-formats.md)
-   [<span data-ttu-id="b705f-133">Suporte ao formato DXGI para hardware 12,0 de nível de recurso Direct3D</span><span class="sxs-lookup"><span data-stu-id="b705f-133">DXGI Format Support for Direct3D Feature Level 12.0 Hardware</span></span>](hardware-support-for-direct3d-12-0-formats.md)
-   [<span data-ttu-id="b705f-134">Suporte ao formato DXGI para hardware 11,1 de nível de recurso Direct3D</span><span class="sxs-lookup"><span data-stu-id="b705f-134">DXGI Format Support for Direct3D Feature Level 11.1 Hardware</span></span>](format-support-for-direct3d-11-1-feature-level-hardware.md)
-   [<span data-ttu-id="b705f-135">Suporte ao formato DXGI para hardware 11,0 de nível de recurso Direct3D</span><span class="sxs-lookup"><span data-stu-id="b705f-135">DXGI Format Support for Direct3D Feature Level 11.0 Hardware</span></span>](format-support-for-direct3d-11-0-feature-level-hardware.md)
-   <span data-ttu-id="b705f-136">[Suporte de hardware para formatos Direct3D 10Level9](/previous-versions//ff471324(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="b705f-136">[Hardware Support for Direct3D 10Level9 Formats](/previous-versions//ff471324(v=vs.85))</span></span>
-   <span data-ttu-id="b705f-137">[Suporte de hardware para formatos Direct3D 10,1](/previous-versions//cc627091(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="b705f-137">[Hardware Support for Direct3D 10.1 Formats](/previous-versions//cc627091(v=vs.85))</span></span>
-   <span data-ttu-id="b705f-138">[Suporte de hardware para formatos Direct3D 10](/previous-versions//cc627090(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="b705f-138">[Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))</span></span>

## <a name="enumerating-adapters"></a><span data-ttu-id="b705f-139">Enumerando adaptadores</span><span class="sxs-lookup"><span data-stu-id="b705f-139">Enumerating adapters</span></span>

<span data-ttu-id="b705f-140">Um adaptador é uma abstração do hardware e do recurso de software do seu computador.</span><span class="sxs-lookup"><span data-stu-id="b705f-140">An adapter is an abstraction of the hardware and the software capability of your computer.</span></span> <span data-ttu-id="b705f-141">Geralmente, há muitos adaptadores em seu computador.</span><span class="sxs-lookup"><span data-stu-id="b705f-141">There are generally many adapters on your machine.</span></span> <span data-ttu-id="b705f-142">Alguns dispositivos são implementados no hardware (como sua placa de vídeo) e alguns são implementados no software (como o rasterizador de referência do Direct3D).</span><span class="sxs-lookup"><span data-stu-id="b705f-142">Some devices are implemented in hardware (like your video card) and some are implemented in software (like the Direct3D reference rasterizer).</span></span> <span data-ttu-id="b705f-143">Os adaptadores implementam a funcionalidade usada por um aplicativo gráfico.</span><span class="sxs-lookup"><span data-stu-id="b705f-143">Adapters implement functionality used by a graphic application.</span></span> <span data-ttu-id="b705f-144">O diagrama a seguir mostra um sistema com um único computador, dois adaptadores (placas de vídeo) e três monitores de saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-144">The following diagram shows a system with a single computer, two adapters (video cards), and three output monitors.</span></span>

![diagrama de um computador com duas placas de vídeo e três monitores](images/dxgi-terms.png)

<span data-ttu-id="b705f-146">Ao enumerar essas partes de hardware, DXGI cria uma interface [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) para cada saída (ou monitor) e uma interface [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) para cada placa de vídeo (mesmo que seja uma placa de vídeo incorporada a uma placa-mãe).</span><span class="sxs-lookup"><span data-stu-id="b705f-146">When enumerating these pieces of hardware, DXGI creates an [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) interface for each output (or monitor) and an [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) interface for each video card (even if it is a video card built into a motherboard).</span></span> <span data-ttu-id="b705f-147">A enumeração é feita usando uma chamada de interface [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) , [**IDXGIFactory:: EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), para retornar um conjunto de interfaces [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) que representam o hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="b705f-147">Enumeration is done by using an [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) interface call, [**IDXGIFactory::EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), to return a set of [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) interfaces that represent the video hardware.</span></span>

<span data-ttu-id="b705f-148">DXGI 1,1 adicionou a interface [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) .</span><span class="sxs-lookup"><span data-stu-id="b705f-148">DXGI 1.1 added the [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) interface.</span></span> <span data-ttu-id="b705f-149">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) retorna um conjunto de interfaces [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) que representa o hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="b705f-149">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) returns a set of [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) interfaces that represents the video hardware.</span></span>

<span data-ttu-id="b705f-150">Se você quiser selecionar recursos específicos de hardware de vídeo ao usar APIs do Direct3D, recomendamos que você chame iterativamente a função [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) ou [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) com cada identificador de adaptador e um [nível de recurso](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md)de hardware possível.</span><span class="sxs-lookup"><span data-stu-id="b705f-150">If you want to select specific video hardware capabilities when you use Direct3D APIs, we recommend that you iteratively call the [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) function with each adapter handle and possible hardware [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md).</span></span> <span data-ttu-id="b705f-151">Essa função terá sucesso se o nível de recurso tiver suporte do adaptador especificado.</span><span class="sxs-lookup"><span data-stu-id="b705f-151">This function succeeds if the feature level is supported by the specified adapter.</span></span>

### <a name="new-info-about-enumerating-adapters-for-windows-8"></a><span data-ttu-id="b705f-152">Novas informações sobre como enumerar adaptadores para o Windows 8</span><span class="sxs-lookup"><span data-stu-id="b705f-152">New info about enumerating adapters for Windows 8</span></span>

<span data-ttu-id="b705f-153">A partir do Windows 8, um adaptador chamado "Microsoft Basic render Driver" está sempre presente.</span><span class="sxs-lookup"><span data-stu-id="b705f-153">Starting with Windows 8, an adapter called the "Microsoft Basic Render Driver" is always present.</span></span> <span data-ttu-id="b705f-154">Esse adaptador tem um VendorID de **0x1414** e um DeviceID de **0x8c**.</span><span class="sxs-lookup"><span data-stu-id="b705f-154">This adapter has a VendorId of **0x1414** and a DeviceID of **0x8c**.</span></span> <span data-ttu-id="b705f-155">Esse adaptador também tem o valor de [**\_ \_ \_ software Flag do adaptador dxgi**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) definido no membro **flags** de sua estrutura [**\_ \_ DESC2 do adaptador dxgi**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) .</span><span class="sxs-lookup"><span data-stu-id="b705f-155">This adapter also has the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set in the **Flags** member of its [**DXGI\_ADAPTER\_DESC2**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) structure.</span></span> <span data-ttu-id="b705f-156">Esse adaptador é um dispositivo somente de renderização que não tem saídas de exibição.</span><span class="sxs-lookup"><span data-stu-id="b705f-156">This adapter is a render-only device that has no display outputs.</span></span> <span data-ttu-id="b705f-157">DXGI nunca retorna [**o \_ dispositivo de erro dxgi \_ \_ removido**](dxgi-error.md) para esse adaptador.</span><span class="sxs-lookup"><span data-stu-id="b705f-157">DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter.</span></span>

<span data-ttu-id="b705f-158">Se o driver de vídeo de um computador não estiver funcionando ou estiver desabilitado, o adaptador primário (**nulo**) do computador também poderá ser chamado de "driver de renderização básico da Microsoft".</span><span class="sxs-lookup"><span data-stu-id="b705f-158">If a computer's display driver is not functioning or is disabled, the computer's primary (**NULL**) adapter might also be called "Microsoft Basic Render Driver."</span></span> <span data-ttu-id="b705f-159">Mas esse adaptador tem saídas e não tem o valor de [**\_ software do \_ sinalizador \_ do adaptador dxgi**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) definido.</span><span class="sxs-lookup"><span data-stu-id="b705f-159">But this adapter has outputs and doesn't have the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set.</span></span> <span data-ttu-id="b705f-160">O sistema operacional e os aplicativos usam esse adaptador por padrão.</span><span class="sxs-lookup"><span data-stu-id="b705f-160">The operating system and apps use this adapter by default.</span></span> <span data-ttu-id="b705f-161">Se um driver de vídeo estiver instalado ou habilitado, os aplicativos poderão receber o [**\_ dispositivo de erro dxgi \_ \_ removido**](dxgi-error.md) desse adaptador e deverão enumerar novamente os adaptadores novamente.</span><span class="sxs-lookup"><span data-stu-id="b705f-161">If a display driver is installed or enabled, apps can receive [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter and then must re-enumerate adapters again.</span></span>

<span data-ttu-id="b705f-162">Quando o adaptador de vídeo primário de um computador é o "adaptador de vídeo básico da Microsoft" (adaptador de[detorção](../direct3d11/overviews-direct3d-11-devices-create-warp.md) ), esse computador também tem um segundo adaptador.</span><span class="sxs-lookup"><span data-stu-id="b705f-162">When a computer's primary display adapter is the "Microsoft Basic Display Adapter" ([WARP](../direct3d11/overviews-direct3d-11-devices-create-warp.md) adapter), that computer also has a second adapter.</span></span> <span data-ttu-id="b705f-163">Esse segundo adaptador é o dispositivo somente de processamento que não tem saídas de exibição e para os quais DXGI nunca retorna o [**\_ dispositivo de erro dxgi \_ \_ removido**](dxgi-error.md).</span><span class="sxs-lookup"><span data-stu-id="b705f-163">This second adapter is the render-only device that has no display outputs and for which DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md).</span></span>

<span data-ttu-id="b705f-164">Se você quiser usar WARP para renderização, computação ou outras tarefas de execução longa, recomendamos o uso do dispositivo somente de renderização.</span><span class="sxs-lookup"><span data-stu-id="b705f-164">If you want to use WARP for rendering, compute, or other long running tasks, we recommend to use the render-only device.</span></span> <span data-ttu-id="b705f-165">Você pode obter um ponteiro para o dispositivo somente de renderização chamando o método [**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) .</span><span class="sxs-lookup"><span data-stu-id="b705f-165">You can obtain a pointer to the render-only device by calling the [**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) method.</span></span> <span data-ttu-id="b705f-166">Você também cria o dispositivo somente de renderização ao especificar o [**\_ tipo de driver D3D \_ \_ Warp**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) no parâmetro *driverType* de [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) porque o dispositivo Warp também usa o adaptador de detorção somente de renderização.</span><span class="sxs-lookup"><span data-stu-id="b705f-166">You also create the render-only device when you specify [**D3D\_DRIVER\_TYPE\_WARP**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) in the *DriverType* parameter of [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) because the WARP device also uses the render-only WARP adapter.</span></span>

## <a name="presentation"></a><span data-ttu-id="b705f-167">Apresentação</span><span class="sxs-lookup"><span data-stu-id="b705f-167">Presentation</span></span>

<span data-ttu-id="b705f-168">O trabalho do seu aplicativo é renderizar os quadros e pedir DXGI para apresentar esses quadros à saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-168">Your application's job is to render frames and ask DXGI to present those frames to the output.</span></span> <span data-ttu-id="b705f-169">Se o aplicativo tiver dois buffers disponíveis, ele poderá renderizar um buffer durante a apresentação de outro.</span><span class="sxs-lookup"><span data-stu-id="b705f-169">If the application has two buffers available, it can render one buffer while presenting another one.</span></span> <span data-ttu-id="b705f-170">O aplicativo pode exigir mais de dois buffers dependendo do tempo necessário para renderizar um quadro ou a taxa de quadros desejada para apresentação.</span><span class="sxs-lookup"><span data-stu-id="b705f-170">The application might require more than two buffers depending on the time it takes to render a frame or the desired frame rate for presentation.</span></span> <span data-ttu-id="b705f-171">O conjunto de buffers criado é chamado de uma cadeia de permuta, como mostrado aqui.</span><span class="sxs-lookup"><span data-stu-id="b705f-171">The set of buffers created is called a swap chain, as shown here.</span></span>

![ilustração de uma cadeia de permuta](images/dxgi-swap-chain.png)

-   [<span data-ttu-id="b705f-173">Criar uma cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-173">Create a Swap Chain</span></span>](#create-a-swap-chain)
-   [<span data-ttu-id="b705f-174">Cuidado e alimentação da cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-174">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
-   [<span data-ttu-id="b705f-175">Manipulando o redimensionamento da janela</span><span class="sxs-lookup"><span data-stu-id="b705f-175">Handling Window Resizing</span></span>](#handling-window-resizing)
-   [<span data-ttu-id="b705f-176">Escolhendo a saída e o tamanho de DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-176">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
-   [<span data-ttu-id="b705f-177">Depuração no modo de Full-Screen</span><span class="sxs-lookup"><span data-stu-id="b705f-177">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
-   [<span data-ttu-id="b705f-178">Destruindo uma cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-178">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
-   [<span data-ttu-id="b705f-179">Usando um monitor girado</span><span class="sxs-lookup"><span data-stu-id="b705f-179">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
-   [<span data-ttu-id="b705f-180">Alternando modos</span><span class="sxs-lookup"><span data-stu-id="b705f-180">Switching Modes</span></span>](#switching-modes)
-   [<span data-ttu-id="b705f-181">Dica de desempenho de tela inteira</span><span class="sxs-lookup"><span data-stu-id="b705f-181">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
-   [<span data-ttu-id="b705f-182">Considerações sobre o multithread</span><span class="sxs-lookup"><span data-stu-id="b705f-182">Multithread Considerations</span></span>](#multithread-considerations)

<span data-ttu-id="b705f-183">Uma cadeia de permuta tem um buffer frontal e um ou mais buffers de fundo.</span><span class="sxs-lookup"><span data-stu-id="b705f-183">A swap chain has one front buffer and one or more back buffers.</span></span> <span data-ttu-id="b705f-184">Cada aplicativo cria sua própria cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="b705f-184">Each application creates its own swap chain.</span></span> <span data-ttu-id="b705f-185">Para maximizar a velocidade da apresentação dos dados a uma saída, uma cadeia de permuta quase sempre é criada na memória de um subsistema de exibição, que é mostrada na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="b705f-185">To maximize the speed of the presentation of the data to an output, a swap chain is almost always created in the memory of a display sub-system, which is shown in the following illustration.</span></span>

![ilustração de um subsistema de exibição](images/dxgi-adapter.png)

<span data-ttu-id="b705f-187">O subsistema de vídeo (que geralmente é uma placa de vídeo, mas pode ser implementado em uma placa-mãe) contém uma GPU, um conversor digital para analógico (DAC) e memória.</span><span class="sxs-lookup"><span data-stu-id="b705f-187">The display sub-system (which is often a video card but could be implemented on a motherboard) contains a GPU, a digital to analog converter (DAC), and memory.</span></span> <span data-ttu-id="b705f-188">A cadeia de permuta é alocada nessa memória para tornar a apresentação muito rápida.</span><span class="sxs-lookup"><span data-stu-id="b705f-188">The swap chain is allocated within this memory to make presentation very fast.</span></span> <span data-ttu-id="b705f-189">O subsistema de exibição apresenta os dados no buffer frontal para a saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-189">The display sub-system presents the data in the front buffer to the output.</span></span>

<span data-ttu-id="b705f-190">Uma cadeia de permuta é configurada para desenhar no modo de tela inteira ou janelada, isso elimina a necessidade de saber se uma saída é exibida em janela ou em tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-190">A swap chain is set up to draw in full-screen or windowed mode, this eliminates the need to know whether an output is windowed or full screen.</span></span> <span data-ttu-id="b705f-191">Uma cadeia de troca de modo de tela inteira pode otimizar o desempenho alternando a resolução de vídeo.</span><span class="sxs-lookup"><span data-stu-id="b705f-191">A full-screen mode swap chain can optimize performance by switching the display resolution.</span></span>

### <a name="create-a-swap-chain"></a><span data-ttu-id="b705f-192">Criar uma cadeia de troca</span><span class="sxs-lookup"><span data-stu-id="b705f-192">Create a swap chain</span></span>

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="b705f-193">Diferenças entre o Direct3D 9 e o Direct3D 10: o Direct3D 10 é o primeiro componente gráfico a usar DXGI.</span><span class="sxs-lookup"><span data-stu-id="b705f-193">Differences between Direct3D 9 and Direct3D 10: Direct3D 10 is the first graphics component to use DXGI.</span></span> <span data-ttu-id="b705f-194">DXGI tem alguns comportamentos de cadeia de troca diferentes.</span><span class="sxs-lookup"><span data-stu-id="b705f-194">DXGI has some different swap chain behaviors.</span></span><br/>
<ul>
<li><span data-ttu-id="b705f-195">Em DXGI, uma cadeia de permuta é vinculada a uma janela quando a cadeia de permuta é criada.</span><span class="sxs-lookup"><span data-stu-id="b705f-195">In DXGI, a swap chain is tied to a window when the swap chain is created.</span></span> <span data-ttu-id="b705f-196">Essa alteração melhora o desempenho e economiza memória.</span><span class="sxs-lookup"><span data-stu-id="b705f-196">This change improves performance and saves memory.</span></span> <span data-ttu-id="b705f-197">As versões anteriores do Direct3D permitiam que a cadeia de permuta alterasse a janela à qual a cadeia de permuta está vinculada.</span><span class="sxs-lookup"><span data-stu-id="b705f-197">Previous versions of Direct3D allowed the swap chain to change the window that the swap chain is tied to.</span></span></li>
<li><span data-ttu-id="b705f-198">Em DXGI, uma cadeia de permuta está vinculada a um dispositivo de renderização na criação.</span><span class="sxs-lookup"><span data-stu-id="b705f-198">In DXGI, a swap chain is tied to a rendering device on creation.</span></span> <span data-ttu-id="b705f-199">O objeto de dispositivo que as funções de dispositivo de criação de Direct3D retornam implementa a interface <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="b705f-199">The device object that the Direct3D create device functions return implements the <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> interface.</span></span> <span data-ttu-id="b705f-200">Você pode chamar <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> para consultar a interface <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> correspondente do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b705f-200">You can call <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> to query for the device's corresponding <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> interface.</span></span> <span data-ttu-id="b705f-201">Uma alteração no dispositivo de renderização requer que a cadeia de permuta seja recriada.</span><span class="sxs-lookup"><span data-stu-id="b705f-201">A change to the rendering device requires the swap chain to be recreated.</span></span></li>
<li><p><span data-ttu-id="b705f-202">No DXGI, os efeitos de permuta disponíveis são DXGI_SWAP_EFFECT_DISCARD e DXGI_SWAP_EFFECT_SEQUENTIAL.</span><span class="sxs-lookup"><span data-stu-id="b705f-202">In DXGI, the swap effects available are DXGI_SWAP_EFFECT_DISCARD and DXGI_SWAP_EFFECT_SEQUENTIAL.</span></span> <span data-ttu-id="b705f-203">A partir do Windows 8, o efeito de permuta DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL também está disponível.</span><span class="sxs-lookup"><span data-stu-id="b705f-203">Starting with Windows 8 the DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL swap effect is also available.</span></span> <span data-ttu-id="b705f-204">A tabela a seguir mostra um mapeamento do Direct3D 9 para o efeito de permuta de DXGI definido.</span><span class="sxs-lookup"><span data-stu-id="b705f-204">The following table shows a mapping of Direct3D 9 to DXGI swap effect defines.</span></span> </p>
<table>
<thead>
<tr class="header">
<th><span data-ttu-id="b705f-205">Efeito de permuta D3D9</span><span class="sxs-lookup"><span data-stu-id="b705f-205">D3D9 Swap Effect</span></span></th>
<th><span data-ttu-id="b705f-206">Efeito de permuta de DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-206">DXGI Swap Effect</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="b705f-207">D3DSWAPEFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="b705f-207">D3DSWAPEFFECT_DISCARD</span></span></td>
<td><span data-ttu-id="b705f-208">DXGI_SWAP_EFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="b705f-208">DXGI_SWAP_EFFECT_DISCARD</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b705f-209">D3DSWAPEFFECT_COPY</span><span class="sxs-lookup"><span data-stu-id="b705f-209">D3DSWAPEFFECT_COPY</span></span></td>
<td><span data-ttu-id="b705f-210">DXGI_SWAP_EFFECT_SEQUENTIAL com 1 buffer</span><span class="sxs-lookup"><span data-stu-id="b705f-210">DXGI_SWAP_EFFECT_SEQUENTIAL with 1 buffer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="b705f-211">D3DSWAPEFFECT_FLIP</span><span class="sxs-lookup"><span data-stu-id="b705f-211">D3DSWAPEFFECT_FLIP</span></span></td>
<td><span data-ttu-id="b705f-212">DXGI_SWAP_EFFECT_SEQUENTIAL com dois ou mais buffers</span><span class="sxs-lookup"><span data-stu-id="b705f-212">DXGI_SWAP_EFFECT_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b705f-213">D3DSWAPEFFECT_FLIPEX</span><span class="sxs-lookup"><span data-stu-id="b705f-213">D3DSWAPEFFECT_FLIPEX</span></span></td>
<td><span data-ttu-id="b705f-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL com dois ou mais buffers</span><span class="sxs-lookup"><span data-stu-id="b705f-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
</tbody>
</table>
<p></p>
<p> </p></li>
</ul></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="b705f-215">Os buffers de uma cadeia de permuta são criados em um determinado tamanho e em um formato específico.</span><span class="sxs-lookup"><span data-stu-id="b705f-215">A swap chain's buffers are created at a particular size and in a particular format.</span></span> <span data-ttu-id="b705f-216">O aplicativo especifica esses valores (ou você pode herdar o tamanho da janela de destino) na inicialização e, opcionalmente, modificá-los à medida que o tamanho da janela é alterado em resposta a eventos de programa ou entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="b705f-216">The application specifies these values (or you can inherit the size from the target window) at startup, and can then optionally modify them as the window size changes in response to user input or program events.</span></span>

<span data-ttu-id="b705f-217">Depois de criar a cadeia de permuta, você normalmente desejará renderizar imagens nela.</span><span class="sxs-lookup"><span data-stu-id="b705f-217">After you create the swap chain, you will typically want to render images into it.</span></span> <span data-ttu-id="b705f-218">Aqui está um fragmento de código que configura um contexto do Direct3D para renderizar em uma cadeia de troca.</span><span class="sxs-lookup"><span data-stu-id="b705f-218">Here's a code fragment that sets up a Direct3D context to render into a swap chain.</span></span> <span data-ttu-id="b705f-219">Esse código extrai um buffer da cadeia de permuta, cria um modo de exibição de destino de renderização desse buffer e, em seguida, define-o no dispositivo:</span><span class="sxs-lookup"><span data-stu-id="b705f-219">This code extracts a buffer from the swap chain, creates a render-target-view from that buffer, then sets it on the device:</span></span>


```
ID3D11Resource * pBB;
ThrowFailure( pSwapChain->GetBuffer(0, __uuidof(pBB),    
  reinterpret_cast<void**>(&pBB)), "Couldn't get back buffer");
ID3D11RenderTargetView * pView;
ThrowFailure( pD3D11Device->CreateRenderTargetView(pBB, NULL, &pView), 
  "Couldn't create view" );
pD3D11DeviceContext->OMSetRenderTargets(1, &pView, 0);
        
```



<span data-ttu-id="b705f-220">Depois que o aplicativo renderiza um quadro em um buffer da cadeia de permuta, chame [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span><span class="sxs-lookup"><span data-stu-id="b705f-220">After your application renders a frame into a swap-chain buffer, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="b705f-221">Em seguida, o aplicativo pode renderizar a próxima imagem.</span><span class="sxs-lookup"><span data-stu-id="b705f-221">The application can then go render the next image.</span></span>

### <a name="care-and-feeding-of-the-swap-chain"></a><span data-ttu-id="b705f-222">Cuidado e alimentação da cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-222">Care and feeding of the swap chain</span></span>

<span data-ttu-id="b705f-223">Depois de renderizar sua imagem, chame [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) e go renderizar a próxima imagem.</span><span class="sxs-lookup"><span data-stu-id="b705f-223">After you render your image, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) and go render the next image.</span></span> <span data-ttu-id="b705f-224">Essa é a extensão de sua responsabilidade.</span><span class="sxs-lookup"><span data-stu-id="b705f-224">That is the extent of your responsibility.</span></span>

<span data-ttu-id="b705f-225">Se você anteriormente chamou [**IDXGIFactory:: MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), o usuário poderá pressionar a combinação de teclas Alt-Enter e dxgi fará a transição do seu aplicativo entre o modo de tela inteira e janelas.</span><span class="sxs-lookup"><span data-stu-id="b705f-225">If you previously called [**IDXGIFactory::MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), the user can press the Alt-Enter key combination and DXGI will transition your application between windowed and full-screen mode.</span></span> <span data-ttu-id="b705f-226">**IDXGIFactory:: MakeWindowAssociation** é recomendado, pois um mecanismo de controle padrão para o usuário é altamente desejado.</span><span class="sxs-lookup"><span data-stu-id="b705f-226">**IDXGIFactory::MakeWindowAssociation** is recommended, because a standard control mechanism for the user is strongly desired.</span></span>

<span data-ttu-id="b705f-227">Embora você não precise escrever mais código do que o que foi descrito, algumas etapas simples podem tornar seu aplicativo mais responsivo.</span><span class="sxs-lookup"><span data-stu-id="b705f-227">While you don't have to write any more code than has been described, a few simple steps can make your application more responsive.</span></span> <span data-ttu-id="b705f-228">A consideração mais importante é o redimensionamento dos buffers da cadeia de permuta em resposta ao redimensionamento da janela de saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-228">The most important consideration is the resizing of the swap chain's buffers in response to the resizing of the output window.</span></span> <span data-ttu-id="b705f-229">Naturalmente, a melhor rota do aplicativo é responder ao tamanho do WM \_ e chamar [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passando o tamanho contido nos parâmetros da mensagem.</span><span class="sxs-lookup"><span data-stu-id="b705f-229">Naturally, the application's best route is to respond to WM\_SIZE, and call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passing the size contained in the message's parameters.</span></span> <span data-ttu-id="b705f-230">Esse comportamento obviamente faz com que seu aplicativo responda bem ao usuário quando ele arrasta as bordas da janela, mas também é exatamente o que permite uma transição de tela inteira suave.</span><span class="sxs-lookup"><span data-stu-id="b705f-230">This behavior obviously makes your application respond well to the user when he or she drags the window's borders, but it is also exactly what enables a smooth full-screen transition.</span></span> <span data-ttu-id="b705f-231">Sua janela receberá uma mensagem de tamanho do WM \_ sempre que essa transição ocorrer e chamar **IDXGISwapChain:: ResizeBuffers** é a chance da cadeia de troca de realocar o armazenamento de buffers para uma apresentação ideal.</span><span class="sxs-lookup"><span data-stu-id="b705f-231">Your window will receive a WM\_SIZE message whenever such a transition happens, and calling **IDXGISwapChain::ResizeBuffers** is the swap chain's chance to re-allocate the buffers' storage for optimal presentation.</span></span> <span data-ttu-id="b705f-232">É por isso que o aplicativo precisa liberar quaisquer referências que tenha nos buffers existentes antes de chamar **IDXGISwapChain:: ResizeBuffers**.</span><span class="sxs-lookup"><span data-stu-id="b705f-232">This is why the application is required to release any references it has on the existing buffers before it calls **IDXGISwapChain::ResizeBuffers**.</span></span>

<span data-ttu-id="b705f-233">Falha ao chamar [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) em resposta à alternância para o modo de tela inteira (mais naturalmente, em resposta ao \_ tamanho do WM), pode impedir a otimização da inversão, em que dxgi pode simplesmente trocar o buffer que está sendo exibido, em vez de copiar um inteiro de dados em tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-233">Failure to call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response to switching to full-screen mode (most naturally, in response to WM\_SIZE), can preclude the optimization of flipping, wherein DXGI can simply swap which buffer is being displayed, rather than copying a full screen's worth of data around.</span></span>

<span data-ttu-id="b705f-234">[**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) informará se a janela de saída é totalmente obstruído por meio do **status de dxgi \_ \_ obstruído**.</span><span class="sxs-lookup"><span data-stu-id="b705f-234">[**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) will inform you if your output window is entirely occluded via **DXGI\_STATUS\_OCCLUDED**.</span></span> <span data-ttu-id="b705f-235">Quando isso ocorre, recomendamos que o aplicativo vá para o modo de espera (chamando **IDXGISwapChain1::P resent1** com o **teste do dxgi \_ presente \_**), já que os recursos usados para renderizar o quadro são desperdiçados.</span><span class="sxs-lookup"><span data-stu-id="b705f-235">When this occurs, we recommended that your application go into standby mode (by calling **IDXGISwapChain1::Present1** with **DXGI\_PRESENT\_TEST**) since resources used to render the frame are wasted.</span></span> <span data-ttu-id="b705f-236">O uso do **\_ \_ teste presente em dxgi** impedirá que todos os dados sejam apresentados enquanto ainda executam a verificação de oclusão.</span><span class="sxs-lookup"><span data-stu-id="b705f-236">Using **DXGI\_PRESENT\_TEST** will prevent any data from being presented while still performing the occlusion check.</span></span> <span data-ttu-id="b705f-237">Depois de **IDXGISwapChain1::P resent1** retornar S \_ OK, você deverá sair do modo de espera; não use o código de retorno para alternar para o modo de espera, pois isso pode deixar a cadeia de permuta incapaz de abandonar o modo de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-237">Once **IDXGISwapChain1::Present1** returns S\_OK, you should exit standby mode; do not use the return code to switch to standby mode as doing so can leave the swap chain unable to relinquish full-screen mode.</span></span>

<span data-ttu-id="b705f-238">O tempo de execução do Direct3D 11,1, que está disponível a partir do Windows 8, fornece uma cadeia de permuta de flip-Model (ou seja, uma cadeia de permuta que tem o [**efeito de permuta de dxgi \_ \_ \_ inverter valor \_ sequencial**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) definido no membro **SwapEffect** da cadeia de permuta de [**dxgi \_ \_ \_ desc**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) ou [**dxgi \_ \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="b705f-238">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) or [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="b705f-239">Quando você apresenta quadros a uma saída com uma cadeia de permuta de flip-Model, o DXGI desassocia o buffer de fundo de todos os locais de estado do pipeline, como um destino de renderização de fusão de saída, que grava no buffer de fundo 0.</span><span class="sxs-lookup"><span data-stu-id="b705f-239">When you present frames to an output with a flip-model swap chain, DXGI unbinds the back buffer from all pipeline state locations, like an output-merger render target, that write to back buffer 0.</span></span> <span data-ttu-id="b705f-240">Portanto, recomendamos que você chame [**ID3D11DeviceContext:: OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) imediatamente antes de renderizar para o buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="b705f-240">Therefore, we recommend that you call [**ID3D11DeviceContext::OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immediately before you render to the back buffer.</span></span> <span data-ttu-id="b705f-241">Por exemplo, não chame **OMSetRenderTargets** e, em seguida, execute o trabalho do sombreador de cálculo que não termina o processamento para o recurso.</span><span class="sxs-lookup"><span data-stu-id="b705f-241">For example, don't call **OMSetRenderTargets** and then perform compute shader work that doesn't end up rendering to the resource.</span></span> <span data-ttu-id="b705f-242">Para obter mais informações sobre cadeias de troca de modelo invertido e seus benefícios, consulte [modelo de flip-dxgi](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="b705f-242">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="b705f-243">No Direct3D 10 e no Direct3D 11, você não precisa chamar [**IDXGISwapChain:: GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) para recuperar o buffer de fundo 0 depois de chamar [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) porque, para sua conveniência, as identidades dos buffers de fundo são alteradas.</span><span class="sxs-lookup"><span data-stu-id="b705f-243">In Direct3D 10 and Direct3D 11, you don't have to call [**IDXGISwapChain::GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) to retrieve back buffer 0 after you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) because for convenience the identities of back buffers change.</span></span> <span data-ttu-id="b705f-244">Isso não acontece no Direct3D 12 e seu aplicativo deve rastrear manualmente os índices de buffer.</span><span class="sxs-lookup"><span data-stu-id="b705f-244">This doesn't happen in Direct3D 12, and your application must instead manually track back buffer indices.</span></span>

### <a name="handling-window-resizing"></a><span data-ttu-id="b705f-245">Manipulando o redimensionamento da janela</span><span class="sxs-lookup"><span data-stu-id="b705f-245">Handling window resizing</span></span>

<span data-ttu-id="b705f-246">Você pode usar o método [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) para manipular o redimensionamento de janela.</span><span class="sxs-lookup"><span data-stu-id="b705f-246">You can use the [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) method to handle window resizing.</span></span> <span data-ttu-id="b705f-247">Antes de chamar **ResizeBuffers**, você deve liberar todas as referências pendentes para os buffers da cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="b705f-247">Before you call **ResizeBuffers**, you must release all outstanding references to the swap chain's buffers.</span></span> <span data-ttu-id="b705f-248">O objeto que normalmente contém uma referência ao buffer de uma cadeia de permuta é um modo de exibição de destino de renderização.</span><span class="sxs-lookup"><span data-stu-id="b705f-248">The object that typically holds a reference to a swap chain's buffer is a render-target-view.</span></span>

<span data-ttu-id="b705f-249">O código de exemplo a seguir mostra como chamar [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) de dentro do manipulador de WindowProc para mensagens de tamanho do WM \_ :</span><span class="sxs-lookup"><span data-stu-id="b705f-249">The following example code shows how to call [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) from within the WindowProc handler for WM\_SIZE messages:</span></span>


```
    case WM_SIZE:
        if (g_pSwapChain)
        {
            g_pd3dDeviceContext->OMSetRenderTargets(0, 0, 0);

            // Release all outstanding references to the swap chain's buffers.
            g_pRenderTargetView->Release();

            HRESULT hr;
            // Preserve the existing buffer count and format.
            // Automatically choose the width and height to match the client rect for HWNDs.
            hr = g_pSwapChain->ResizeBuffers(0, 0, 0, DXGI_FORMAT_UNKNOWN, 0);
                                            
            // Perform error handling here!

            // Get buffer and create a render-target-view.
            ID3D11Texture2D* pBuffer;
            hr = g_pSwapChain->GetBuffer(0, __uuidof( ID3D11Texture2D),
                                         (void**) &pBuffer );
            // Perform error handling here!

            hr = g_pd3dDevice->CreateRenderTargetView(pBuffer, NULL,
                                                     &g_pRenderTargetView);
            // Perform error handling here!
            pBuffer->Release();

            g_pd3dDeviceContext->OMSetRenderTargets(1, &g_pRenderTargetView, NULL );

            // Set up the viewport.
            D3D11_VIEWPORT vp;
            vp.Width = width;
            vp.Height = height;
            vp.MinDepth = 0.0f;
            vp.MaxDepth = 1.0f;
            vp.TopLeftX = 0;
            vp.TopLeftY = 0;
            g_pd3dDeviceContext->RSSetViewports( 1, &vp );
        }
        return 1;
```



### <a name="choosing-the-dxgi-output-and-size"></a><span data-ttu-id="b705f-250">Escolhendo a saída e o tamanho de DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-250">Choosing the DXGI output and size</span></span>

<span data-ttu-id="b705f-251">Por padrão, DXGI escolhe a saída que contém a maior parte da área do cliente da janela.</span><span class="sxs-lookup"><span data-stu-id="b705f-251">By default, DXGI chooses the output that contains most of the client area of the window.</span></span> <span data-ttu-id="b705f-252">Essa é a única opção disponível para DXGI quando ela é exibida em uma tela inteira em resposta a Alt-Enter.</span><span class="sxs-lookup"><span data-stu-id="b705f-252">This is the only option available to DXGI when it goes full-screen itself in response to alt-enter.</span></span> <span data-ttu-id="b705f-253">Se o aplicativo optar por ir para o modo de tela inteira por si só, ele poderá chamar [**IDXGISwapChain:: Setfullscreenstate**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) e passar um [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) explícito (ou **NULL**, se o aplicativo estiver satisfeito em permitir que dxgi decida).</span><span class="sxs-lookup"><span data-stu-id="b705f-253">If the application chooses to go to full-screen mode by itself, then it can call [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) and pass an explicit [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) (or **NULL**, if the application is happy to let DXGI decide).</span></span>

<span data-ttu-id="b705f-254">Para redimensionar a saída enquanto estiver em tela inteira ou em janela, é recomendável chamar [**IDXGISwapChain:: ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), já que esse método redimensiona a janela de destino também.</span><span class="sxs-lookup"><span data-stu-id="b705f-254">To resize the output while either full screen or windowed, we recommend to call [**IDXGISwapChain::ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), since this method resizes the target window also.</span></span> <span data-ttu-id="b705f-255">Como a janela de destino é redimensionada, o sistema operacional envia o **\_ tamanho do WM**, e seu código naturalmente chamará [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) em resposta.</span><span class="sxs-lookup"><span data-stu-id="b705f-255">Since the target window is resized, the operating system sends **WM\_SIZE**, and your code will naturally call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response.</span></span> <span data-ttu-id="b705f-256">Portanto, é um desperdício de esforço para redimensionar os buffers e, em seguida, redimensionar o destino.</span><span class="sxs-lookup"><span data-stu-id="b705f-256">It's thus a waste of effort to resize your buffers, and then subsequently resize the target.</span></span>

### <a name="debugging-in-full-screen-mode"></a><span data-ttu-id="b705f-257">Depuração no modo de tela inteira</span><span class="sxs-lookup"><span data-stu-id="b705f-257">Debugging in full-screen mode</span></span>

<span data-ttu-id="b705f-258">Uma cadeia de permuta DXGI abandona o modo de tela inteira somente quando absolutamente necessário.</span><span class="sxs-lookup"><span data-stu-id="b705f-258">A DXGI swap chain relinquishes full-screen mode only when absolutely necessary.</span></span> <span data-ttu-id="b705f-259">Isso significa que você pode depurar um aplicativo de tela inteira usando vários monitores, desde que a janela de depuração não se sobreponha à janela de destino da cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="b705f-259">This means that you can debug a full-screen application using multiple monitors, as long as the debug window doesn't overlap the swap chain's target window.</span></span> <span data-ttu-id="b705f-260">Como alternativa, você pode impedir que o modo seja totalmente alternado, não definindo o sinalizador de **\_ \_ \_ \_ \_ \_ comutador de modo de permuta de dxgi** .</span><span class="sxs-lookup"><span data-stu-id="b705f-260">Alternatively, you can prevent mode switching altogether by not setting the **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** flag.</span></span>

<span data-ttu-id="b705f-261">Se a alternância de modo for permitida, uma cadeia de permuta deixará o modo de tela inteira sempre que sua janela de saída for obstruído por outra janela.</span><span class="sxs-lookup"><span data-stu-id="b705f-261">If mode switching is allowed, a swap chain will relinquish full-screen mode whenever its output window is occluded by another window.</span></span> <span data-ttu-id="b705f-262">A verificação de oclusão é realizada durante o [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), ou por um thread separado cuja finalidade é observar para ver se o aplicativo não responde (e não chama mais **IDXGISwapChain1::P resent1**).</span><span class="sxs-lookup"><span data-stu-id="b705f-262">The occlusion check is performed during [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), or by a separate thread whose purpose is to watch to see if the application has becomes unresponsive (and no longer calls **IDXGISwapChain1::Present1**).</span></span> <span data-ttu-id="b705f-263">Para desabilitar a capacidade do thread separado de causar um comutador, defina a seguinte chave do registro para qualquer valor diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="b705f-263">To disable the ability of the separate thread to cause a switch, set the following registry key to any non-zero value.</span></span>

<span data-ttu-id="b705f-264">**HKCU \\ software \\ Microsoft \\ dxgi \\ DisableFullscreenWatchdog**</span><span class="sxs-lookup"><span data-stu-id="b705f-264">**HKCU\\Software\\Microsoft\\DXGI\\DisableFullscreenWatchdog**</span></span>

### <a name="destroying-a-swap-chain"></a><span data-ttu-id="b705f-265">Destruindo uma cadeia de permuta</span><span class="sxs-lookup"><span data-stu-id="b705f-265">Destroying a swap chain</span></span>

<span data-ttu-id="b705f-266">Você não pode liberar uma cadeia de permuta no modo de tela inteira porque isso pode criar contenção de thread (o que fará com que DXGI gere uma exceção não continuável).</span><span class="sxs-lookup"><span data-stu-id="b705f-266">You may not release a swap chain in full-screen mode because doing so may create thread contention (which will cause DXGI to raise a non-continuable exception).</span></span> <span data-ttu-id="b705f-267">Antes de liberar uma cadeia de permuta, alterne primeiro para o modo em janela (usando [**IDXGISwapChain:: Setfullscreenstate**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **false**, **NULL** )) e, em seguida, chame [**IUnknown:: Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span><span class="sxs-lookup"><span data-stu-id="b705f-267">Before releasing a swap chain, first switch to windowed mode (using [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **FALSE**, **NULL** )) and then call [**IUnknown::Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span></span>

### <a name="using-a-rotated-monitor"></a><span data-ttu-id="b705f-268">Usando um monitor girado</span><span class="sxs-lookup"><span data-stu-id="b705f-268">Using a rotated monitor</span></span>

<span data-ttu-id="b705f-269">Um aplicativo não precisa se preocupar com a orientação do monitor. DXGI irá girar um buffer de cadeia de permuta durante a apresentação, se necessário.</span><span class="sxs-lookup"><span data-stu-id="b705f-269">An application does not need to worry about monitor orientation, DXGI will rotate a swap-chain buffer during presentation, if necessary.</span></span> <span data-ttu-id="b705f-270">É claro que essa rotação adicional pode afetar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="b705f-270">Of course, this additional rotation can impact performance.</span></span> <span data-ttu-id="b705f-271">Para obter o melhor desempenho, tome cuidado com a rotação em seu aplicativo fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b705f-271">For best performance, take care of the rotation in your application by doing the following:</span></span>

-   <span data-ttu-id="b705f-272">Use o **\_ sinalizador de cadeia de permuta dxgi \_ \_ \_ NONPREROTATED**.</span><span class="sxs-lookup"><span data-stu-id="b705f-272">Use the **DXGI\_SWAP\_CHAIN\_FLAG\_NONPREROTATED**.</span></span> <span data-ttu-id="b705f-273">Isso notifica o DXGI de que o aplicativo produzirá uma imagem girada (por exemplo, alterando sua matriz de projeção).</span><span class="sxs-lookup"><span data-stu-id="b705f-273">This notifies DXGI that the application will produce a rotated image (for example, by altering its projection matrix).</span></span> <span data-ttu-id="b705f-274">Uma coisa a observar, esse sinalizador só é válido enquanto estiver no modo de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-274">One thing to note, this flag is only valid while in full-screen mode.</span></span>
-   <span data-ttu-id="b705f-275">Aloque cada buffer de cadeia de permuta em seu tamanho girado.</span><span class="sxs-lookup"><span data-stu-id="b705f-275">Allocate each swap-chain buffer in its rotated size.</span></span> <span data-ttu-id="b705f-276">Use [**IDXGIOutput:: GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) para obter esses valores, se necessário.</span><span class="sxs-lookup"><span data-stu-id="b705f-276">Use [**IDXGIOutput::GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) to get these values, if necessary.</span></span>

<span data-ttu-id="b705f-277">Ao executar a rotação em seu aplicativo, DXGI simplesmente fará uma cópia em vez de uma cópia e uma rotação.</span><span class="sxs-lookup"><span data-stu-id="b705f-277">By performing the rotation in your application, DXGI will simply do a copy instead of a copy and a rotate.</span></span>

<span data-ttu-id="b705f-278">O tempo de execução do Direct3D 11,1, que está disponível a partir do Windows 8, fornece uma cadeia de permuta de flip-Model (ou seja, uma cadeia de permuta que tem o [**efeito de permuta de dxgi \_ \_ \_ inverter valor \_ sequencial**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) definido no membro **SwapEffect** da [**\_ \_ \_ DESC1 de troca de dxgi**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)de appmodel).</span><span class="sxs-lookup"><span data-stu-id="b705f-278">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="b705f-279">Para maximizar as otimizações de apresentação disponíveis com uma cadeia de permuta de flip-Model, recomendamos que você faça com que seus aplicativos orientem o conteúdo para corresponder à saída específica na qual o conteúdo reside quando o conteúdo ocupa totalmente a saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-279">To maximize the presentation optimizations available with a flip-model swap chain, we recommend that you make your applications orient content to match the particular output on which the content resides when that content fully occupies the output.</span></span> <span data-ttu-id="b705f-280">Para obter mais informações sobre cadeias de troca de modelo invertido e seus benefícios, consulte [modelo de flip-dxgi](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="b705f-280">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

### <a name="switching-modes"></a><span data-ttu-id="b705f-281">Alternando modos</span><span class="sxs-lookup"><span data-stu-id="b705f-281">Switching modes</span></span>

<span data-ttu-id="b705f-282">A cadeia de permuta DXGI pode alterar o modo de exibição de uma saída ao fazer uma transição de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-282">The DXGI swap chain might change the display mode of an output when making a full-screen transition.</span></span> <span data-ttu-id="b705f-283">Para habilitar a alteração do modo de exibição automático, você deve especificar a **\_ \_ \_ \_ \_ \_ opção modo de permissão do sinalizador de cadeia de permuta dxgi** na descrição da cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="b705f-283">To enable the automatic display mode change, you must specify **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** in the swap-chain description.</span></span> <span data-ttu-id="b705f-284">Se o modo de exibição for alterado automaticamente, DXGI escolherá o modo mais modesto (o tamanho e a resolução não serão alterados, mas a intensidade da cor poderá).</span><span class="sxs-lookup"><span data-stu-id="b705f-284">If the display mode automatically changes, DXGI will choose the most modest mode (size and resolution will not change, but the color depth may).</span></span> <span data-ttu-id="b705f-285">O redimensionamento de buffers da cadeia de permuta não causará uma opção de modo.</span><span class="sxs-lookup"><span data-stu-id="b705f-285">Resizing swap chain buffers will not cause a mode switch.</span></span> <span data-ttu-id="b705f-286">A cadeia de permuta faz uma promessa implícita que, se você escolher um buffer de fundo que corresponda exatamente a um modo de exibição suportado pela saída de destino, ele alternará para esse modo de exibição ao entrar no modo de tela inteira nessa saída.</span><span class="sxs-lookup"><span data-stu-id="b705f-286">The swap chain makes an implicit promise that if you choose a back buffer that exactly matches a display mode supported by the target output, then it will switch to that display mode when entering full-screen mode on that output.</span></span> <span data-ttu-id="b705f-287">Consequentemente, você escolhe um modo de exibição escolhendo o tamanho e o formato do buffer de fundo.</span><span class="sxs-lookup"><span data-stu-id="b705f-287">Consequently, you choose a display mode by choosing your back buffer size and format.</span></span>

### <a name="full-screen-performance-tip"></a><span data-ttu-id="b705f-288">Dica de desempenho de tela inteira</span><span class="sxs-lookup"><span data-stu-id="b705f-288">Full-screen performance tip</span></span>

<span data-ttu-id="b705f-289">Quando você chama [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) em um aplicativo de tela inteira, a cadeia de permuta inverte (em oposição ao blits) o conteúdo do buffer de fundo para o buffer frontal.</span><span class="sxs-lookup"><span data-stu-id="b705f-289">When you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) on a full-screen application, the swap chain flips (as opposed to blits) the contents of the back buffer to the front buffer.</span></span> <span data-ttu-id="b705f-290">Isso requer que a cadeia de permuta tenha sido criada usando um modo de exibição enumerado (especificado em [**\_ DESC1 de \_ cadeia \_ de permuta dxgi**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="b705f-290">This requires that the swap chain was created by using an enumerated display mode (specified in [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="b705f-291">Se você não enumerar modos de exibição ou especificar incorretamente o modo de exibição na descrição, a cadeia de permuta poderá executar uma transferência de bloco de bits (BitBlt) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="b705f-291">If you fail to enumerate display modes, or incorrectly specify the display mode in the description, the swap chain may perform a bit-block transfer (bitblt) instead.</span></span> <span data-ttu-id="b705f-292">O BitBlt causa uma cópia extra de alargamento, bem como alguns aumentos de uso de memória de vídeo e é difícil de detectar.</span><span class="sxs-lookup"><span data-stu-id="b705f-292">The bitblt causes an extra stretching copy as well as some increased video memory usage, and is difficult to detect.</span></span> <span data-ttu-id="b705f-293">Para evitar esse problema, enumere os modos de exibição e inicialize a descrição da cadeia de permuta corretamente antes de criar a cadeia de permuta.</span><span class="sxs-lookup"><span data-stu-id="b705f-293">To avoid this problem, enumerate display modes, and initialize the swap chain description correctly before you create the swap chain.</span></span> <span data-ttu-id="b705f-294">Isso garantirá o desempenho máximo ao inverter no modo de tela inteira e evitará a sobrecarga de memória extra.</span><span class="sxs-lookup"><span data-stu-id="b705f-294">This will ensure maximum performance when flipping in full-screen mode and avoid the extra memory overhead.</span></span>

### <a name="multithread-considerations"></a><span data-ttu-id="b705f-295">Considerações sobre o multithread</span><span class="sxs-lookup"><span data-stu-id="b705f-295">Multithread considerations</span></span>

<span data-ttu-id="b705f-296">Ao usar DXGI em um aplicativo com vários threads, você precisa ter cuidado para evitar a criação de um deadlock, em que dois threads diferentes estão esperando uns aos outros para serem concluídos.</span><span class="sxs-lookup"><span data-stu-id="b705f-296">When you use DXGI in an application with multiple threads, you need to be careful to avoid creating a deadlock, where two different threads are waiting on each other to complete.</span></span> <span data-ttu-id="b705f-297">Há duas situações em que isso pode ocorrer.</span><span class="sxs-lookup"><span data-stu-id="b705f-297">There are two situations where this can occur.</span></span>

-   <span data-ttu-id="b705f-298">O thread de renderização não é o thread de bombeamento de mensagens.</span><span class="sxs-lookup"><span data-stu-id="b705f-298">The rendering thread is not the message-pump thread.</span></span>
-   <span data-ttu-id="b705f-299">O thread que executa uma API DXGI não é o mesmo thread que criou a janela.</span><span class="sxs-lookup"><span data-stu-id="b705f-299">The thread executing a DXGI API is not the same thread that created the window.</span></span>

<span data-ttu-id="b705f-300">Tenha cuidado para que você nunca tenha o thread de bombeamento de mensagem aguardar no thread de renderização ao usar cadeias de troca de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="b705f-300">Be careful that you never have the message-pump thread wait on the render thread when you use full-screen swap chains.</span></span> <span data-ttu-id="b705f-301">Por exemplo, chamar [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (do thread de renderização) pode fazer com que o thread de renderização Espere no thread de bombeamento de mensagem.</span><span class="sxs-lookup"><span data-stu-id="b705f-301">For instance, calling [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (from the render thread) may cause the render thread to wait on the message-pump thread.</span></span> <span data-ttu-id="b705f-302">Quando ocorrer uma alteração no modo, esse cenário será possível se **Present1** chamar:: SetWindowPos () ou:: setwindowstyle () e qualquer um desses métodos chamar:: SendMessage ().</span><span class="sxs-lookup"><span data-stu-id="b705f-302">When a mode change occurs, this scenario is possible if **Present1** calls ::SetWindowPos() or ::SetWindowStyle() and either of these methods call ::SendMessage().</span></span> <span data-ttu-id="b705f-303">Nesse cenário, se o thread de bombeamento de mensagem tiver uma seção crítica para protegê-lo ou se o thread de renderização estiver bloqueado, os dois threads serão deadlocks.</span><span class="sxs-lookup"><span data-stu-id="b705f-303">In this scenario, if the message-pump thread has a critical section guarding it or if the render thread is blocked, then the two threads will deadlock.</span></span>

<span data-ttu-id="b705f-304">Para obter mais informações sobre como usar DXGI com vários threads, consulte [multithreading e dxgi](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span><span class="sxs-lookup"><span data-stu-id="b705f-304">For more info about using DXGI with multiple threads, see [Multithreading and DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span></span>

## <a name="dxgi-responses-from-dllmain"></a><span data-ttu-id="b705f-305">Respostas de DXGI do DLLMain</span><span class="sxs-lookup"><span data-stu-id="b705f-305">DXGI responses from DLLMain</span></span>

<span data-ttu-id="b705f-306">Como uma função [**DllMain**](../dlls/dllmain.md) não pode garantir a ordem na qual ela carrega e descarrega DLLs, recomendamos que a função **DllMain** do seu aplicativo não chame funções ou métodos de Direct3D ou dxgi, incluindo funções ou métodos que criam ou liberam objetos.</span><span class="sxs-lookup"><span data-stu-id="b705f-306">Because a [**DllMain**](../dlls/dllmain.md) function can't guarantee the order in which it loads and unloads DLLs, we recommend that your app's **DllMain** function not call Direct3D or DXGI functions or methods, including functions or methods that create or release objects.</span></span> <span data-ttu-id="b705f-307">Se a função **DllMain** do seu aplicativo chamar um componente específico, esse componente poderá chamar outra DLL que não está presente no sistema operacional, o que faz com que o sistema operacional falhe.</span><span class="sxs-lookup"><span data-stu-id="b705f-307">If your app's **DllMain** function calls into a particular component, that component might call another DLL that isn't present on the operating system, which causes the operating system to crash.</span></span> <span data-ttu-id="b705f-308">Direct3D e DXGI podem carregar um conjunto de DLLs, normalmente um conjunto de drivers, que difere de computador a computador.</span><span class="sxs-lookup"><span data-stu-id="b705f-308">Direct3D and DXGI might load a set of DLLs, typically a set of drivers, that differs from computer to computer.</span></span> <span data-ttu-id="b705f-309">Portanto, mesmo que seu aplicativo não falhe em seus computadores de desenvolvimento e teste quando sua função **DllMain** chamar funções ou métodos de Direct3D ou dxgi, ele poderá falhar quando for executado em outro computador.</span><span class="sxs-lookup"><span data-stu-id="b705f-309">Therefore, even if your app doesn t crash on your development and test computers when its **DllMain** function calls Direct3D or DXGI functions or methods, it might crash when it runs on another computer.</span></span>

<span data-ttu-id="b705f-310">Para impedir que você crie um aplicativo que pode causar falha no sistema operacional, DXGI fornece as seguintes respostas nas situações especificadas:</span><span class="sxs-lookup"><span data-stu-id="b705f-310">To prevent you from creating an app that might cause the operating system to crash, DXGI provides the following responses in the specified situations:</span></span>

-   <span data-ttu-id="b705f-311">Se a função [**DllMain**](../dlls/dllmain.md) do seu aplicativo liberar sua última referência a uma fábrica DXGI, DXGI gerará uma exceção.</span><span class="sxs-lookup"><span data-stu-id="b705f-311">If your app's [**DllMain**](../dlls/dllmain.md) function releases its last reference to a DXGI factory, DXGI raises an exception.</span></span>
-   <span data-ttu-id="b705f-312">Se a função [**DllMain**](../dlls/dllmain.md) do seu aplicativo criar uma fábrica DXGI, DXGI retornará um código de erro.</span><span class="sxs-lookup"><span data-stu-id="b705f-312">If your app's [**DllMain**](../dlls/dllmain.md) function creates a DXGI factory, DXGI returns an error code.</span></span>

## <a name="dxgi-11-changes"></a><span data-ttu-id="b705f-313">Alterações de DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="b705f-313">DXGI 1.1 changes</span></span>

<span data-ttu-id="b705f-314">Adicionamos a funcionalidade a seguir no DXGI 1,1.</span><span class="sxs-lookup"><span data-stu-id="b705f-314">We added the following functionality in DXGI 1.1.</span></span>

-   <span data-ttu-id="b705f-315">Suporte a superfícies compartilhada sincronizadas</span><span class="sxs-lookup"><span data-stu-id="b705f-315">Synchronized Shared Surfaces Support</span></span>

    <span data-ttu-id="b705f-316">As superfícies compartilhadas sincronizadas para o Direct3D 10,1 e o Direct3D 11 permitem o compartilhamento eficiente de superfície de leitura e gravação entre vários dispositivos Direct3D (o compartilhamento entre dispositivos Direct3D 10 e Direct3D 11 é possível).</span><span class="sxs-lookup"><span data-stu-id="b705f-316">Synchronized shared surfaces for Direct3D 10.1 and Direct3D 11 enables efficient read and write surface sharing between multiple Direct3D devices (sharing between Direct3D 10 and Direct3D 11 devices is possible).</span></span> <span data-ttu-id="b705f-317">Consulte [**IDXGIKeyedMutex:: AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) e [**IDXGIKeyedMutex:: ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span><span class="sxs-lookup"><span data-stu-id="b705f-317">See [**IDXGIKeyedMutex::AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) and [**IDXGIKeyedMutex::ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span></span>

-   <span data-ttu-id="b705f-318">Suporte de alta cor</span><span class="sxs-lookup"><span data-stu-id="b705f-318">High Color Support</span></span>

    <span data-ttu-id="b705f-319">Dá suporte ao \_ \_ formato dxgi R10G10B10 \_ XR \_ Bias \_ a2 \_ UNORM.</span><span class="sxs-lookup"><span data-stu-id="b705f-319">Supports the DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM format.</span></span>

-   <span data-ttu-id="b705f-320">[**IDXGIDevice1:: SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) e [ **IDXGIDevice1:: GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span><span class="sxs-lookup"><span data-stu-id="b705f-320">[**IDXGIDevice1::SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) and [**IDXGIDevice1::GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span></span>
-   <span data-ttu-id="b705f-321">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumera adaptadores locais sem monitores ou saídas anexados, bem como adaptadores com saídas anexadas.</span><span class="sxs-lookup"><span data-stu-id="b705f-321">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumerates local adapter(s) without any monitors or outputs attached, as well as adapters(s) with outputs attached.</span></span> <span data-ttu-id="b705f-322">O primeiro adaptador retornado será o adaptador local no qual a área de trabalho principal é exibida.</span><span class="sxs-lookup"><span data-stu-id="b705f-322">The first adapter returned will be the local adapter on which the Desktop primary is displayed.</span></span>
-   <span data-ttu-id="b705f-323">Suporte ao formato BGRA</span><span class="sxs-lookup"><span data-stu-id="b705f-323">BGRA format support</span></span>

    <span data-ttu-id="b705f-324">Formato \_ dxgi \_ B8G8R8A8 \_ UNORM e dxgi \_ \_ B8G8R8A8 \_ UNORM \_ sRGB, consulte [**IDXGISurface1:: GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) e [**IDXGISurface1:: ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span><span class="sxs-lookup"><span data-stu-id="b705f-324">DXGI\_FORMAT\_B8G8R8A8\_UNORM and DXGI\_FORMAT\_B8G8R8A8\_UNORM\_SRGB, see [**IDXGISurface1::GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) and [**IDXGISurface1::ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span></span>

## <a name="dxgi-12-changes"></a><span data-ttu-id="b705f-325">Alterações de DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="b705f-325">DXGI 1.2 changes</span></span>

<span data-ttu-id="b705f-326">Adicionamos a funcionalidade a seguir no DXGI 1,2.</span><span class="sxs-lookup"><span data-stu-id="b705f-326">We added the following functionality in DXGI 1.2.</span></span>

-   <span data-ttu-id="b705f-327">Cadeia de permuta estéreo</span><span class="sxs-lookup"><span data-stu-id="b705f-327">Stereo swap chain</span></span>
-   [<span data-ttu-id="b705f-328">Cadeia de permuta do flip-Model</span><span class="sxs-lookup"><span data-stu-id="b705f-328">Flip-model swap chain</span></span>](dxgi-flip-model.md)
-   <span data-ttu-id="b705f-329">Apresentação otimizada (rolagem, retângulos sujos e rotação)</span><span class="sxs-lookup"><span data-stu-id="b705f-329">Optimized presentation (scrolling, dirty rectangles, and rotation)</span></span>
-   <span data-ttu-id="b705f-330">Recursos compartilhados e sincronização aprimorados</span><span class="sxs-lookup"><span data-stu-id="b705f-330">Improved shared resources and synchronization</span></span>
-   [<span data-ttu-id="b705f-331">Duplicação de área de trabalho</span><span class="sxs-lookup"><span data-stu-id="b705f-331">Desktop Duplication</span></span>](desktop-dup-api.md)
-   <span data-ttu-id="b705f-332">Uso otimizado da memória de vídeo</span><span class="sxs-lookup"><span data-stu-id="b705f-332">Optimized use of video memory</span></span>
-   <span data-ttu-id="b705f-333">Suporte para formatos de 16 bits por pixel (BPP) ( \_ formato dxgi \_ B5G6R5 \_ UNORM, \_ formato dxgi \_ B5G5R5A1 \_ UNORM, \_ formato dxgi \_ B4G4R4A4 \_ UNORM)</span><span class="sxs-lookup"><span data-stu-id="b705f-333">Support for 16 bits per pixel (bpp) formats (DXGI\_FORMAT\_B5G6R5\_UNORM, DXGI\_FORMAT\_B5G5R5A1\_UNORM, DXGI\_FORMAT\_B4G4R4A4\_UNORM)</span></span>
-   <span data-ttu-id="b705f-334">APIs de depuração</span><span class="sxs-lookup"><span data-stu-id="b705f-334">Debugging APIs</span></span>

<span data-ttu-id="b705f-335">Para obter mais informações sobre DXGI 1,2, consulte [melhorias do dxgi 1,2](dxgi-1-2-improvements.md).</span><span class="sxs-lookup"><span data-stu-id="b705f-335">For more info about DXGI 1.2, see [DXGI 1.2 Improvements](dxgi-1-2-improvements.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b705f-336">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b705f-336">Related topics</span></span>

[<span data-ttu-id="b705f-337">Guia de programação para DXGI</span><span class="sxs-lookup"><span data-stu-id="b705f-337">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
