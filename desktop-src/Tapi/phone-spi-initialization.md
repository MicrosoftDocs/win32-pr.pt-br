---
description: Como parte da abstração de dispositivo de telefone definida pelo TSPI, a TAPI e o provedor de serviços devem primeiro passar pela inicialização básica.
ms.assetid: cd8bb328-fbd0-409c-8471-34ad4c2c8d93
title: Inicialização do SPI do telefone
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1d0c54e313c2be3846aeb604217f5324ec0d8a8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105761815"
---
# <a name="phone-spi-initialization"></a><span data-ttu-id="c60bb-103">Inicialização do SPI do telefone</span><span class="sxs-lookup"><span data-stu-id="c60bb-103">Phone SPI Initialization</span></span>

<span data-ttu-id="c60bb-104">Como parte da abstração de dispositivo de telefone definida pelo TSPI, a TAPI e o provedor de serviços devem primeiro passar pela inicialização básica.</span><span class="sxs-lookup"><span data-stu-id="c60bb-104">As part of the phone device abstraction defined by TSPI, TAPI and the service provider must first undergo basic initialization.</span></span> <span data-ttu-id="c60bb-105">Essa inicialização básica é realizada para as metades da linha e do telefone da interface pelo mesmo conjunto de etapas.</span><span class="sxs-lookup"><span data-stu-id="c60bb-105">This basic initialization is accomplished both for the line and phone halves of the interface by the same set of steps.</span></span> <span data-ttu-id="c60bb-106">A primeira dessas etapas é a negociação de versão da interface.</span><span class="sxs-lookup"><span data-stu-id="c60bb-106">The first of these steps is interface version negotiation.</span></span> <span data-ttu-id="c60bb-107">A TAPI executa isso chamando a função [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) .</span><span class="sxs-lookup"><span data-stu-id="c60bb-107">TAPI performs this by calling the [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) function.</span></span> <span data-ttu-id="c60bb-108">Essa função geralmente é usada para negociar em nome de um dispositivo de linha individual; dispositivos de linha diferentes dentro do mesmo provedor de serviços podem operar de acordo com versões de interface diferentes.</span><span class="sxs-lookup"><span data-stu-id="c60bb-108">This function is usually used to negotiate on behalf of an individual line device; different line devices within the same service provider may operate according to different interface versions.</span></span> <span data-ttu-id="c60bb-109">A TAPI passa um valor de identificador de dispositivo reservado especial, [**Inicializa a \_ negociação**](initialize-negotiation.md), para indicar que está negociando uma versão de interface geral para funções de inicialização que afetam o provedor de serviços inteiro, tanto para linhas quanto para telefones.</span><span class="sxs-lookup"><span data-stu-id="c60bb-109">TAPI passes a special reserved device identifier value, [**INITIALIZE\_NEGOTIATION**](initialize-negotiation.md), to indicate that it is negotiating an overall interface version for initialization functions that affect the entire service provider, both for lines and phones.</span></span>

<span data-ttu-id="c60bb-110">O resultado dessa negociação é passado para os procedimentos subsequentes até que um dispositivo de telefone seja aberto.</span><span class="sxs-lookup"><span data-stu-id="c60bb-110">The result of this negotiation is passed to subsequent procedures until a phone device is opened.</span></span> <span data-ttu-id="c60bb-111">Nesse momento, o dispositivo de telefone se torna confirmado em uma versão de interface específica.</span><span class="sxs-lookup"><span data-stu-id="c60bb-111">At that time, the phone device becomes committed to a particular interface version.</span></span> <span data-ttu-id="c60bb-112">Essa versão de interface é implícita até que o telefone seja fechado e não precisa ser passado para funções subsequentes que operam em um telefone aberto.</span><span class="sxs-lookup"><span data-stu-id="c60bb-112">This interface version is implicit until the phone is closed, and does not need to be passed to subsequent functions that operate on an opened phone.</span></span>

<span data-ttu-id="c60bb-113">Seguindo a negociação de versão de interface geral, a TAPI chama a função [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) .</span><span class="sxs-lookup"><span data-stu-id="c60bb-113">Following overall interface version negotiation, TAPI calls the [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) function.</span></span> <span data-ttu-id="c60bb-114">Essa função inicializa o provedor de serviços, fornecendo também os parâmetros necessários para a operação subsequente.</span><span class="sxs-lookup"><span data-stu-id="c60bb-114">This function initializes the service provider, also giving it parameters required for subsequent operation.</span></span> <span data-ttu-id="c60bb-115">Esses parâmetros incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="c60bb-115">These parameters include the following:</span></span>

-   <span data-ttu-id="c60bb-116">*dwPermanentProviderID*: especifica o identificador permanente do provedor de serviços que está sendo inicializado, exclusivo dentro dos provedores de serviço neste sistema.</span><span class="sxs-lookup"><span data-stu-id="c60bb-116">*dwPermanentProviderID*: Specifies the permanent identifier of the service provider being initialized, unique within the service providers on this system.</span></span>
-   <span data-ttu-id="c60bb-117">*dwLineDeviceIDBase*: especifica o menor identificador de dispositivo para os dispositivos de linha com suporte por este provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="c60bb-117">*dwLineDeviceIDBase*: Specifies the lowest device identifier for the line devices supported by this service provider.</span></span>
-   <span data-ttu-id="c60bb-118">*dwPhoneDeviceIDBase*: especifica o menor identificador de dispositivo para os dispositivos de telefone com suporte por este provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="c60bb-118">*dwPhoneDeviceIDBase*: Specifies the lowest device identifier for the phone devices supported by this service provider.</span></span> <span data-ttu-id="c60bb-119">Os dispositivos da classe de dispositivo de telefone de telefonia são identificados por inteiros começando de zero.</span><span class="sxs-lookup"><span data-stu-id="c60bb-119">Devices of the telephony phone device class are identified by integers starting from zero.</span></span> <span data-ttu-id="c60bb-120">Esse intervalo de identificadores é contíguo em todo o intervalo de dispositivos de telefone.</span><span class="sxs-lookup"><span data-stu-id="c60bb-120">This range of identifiers is contiguous across the full range of phone devices.</span></span> <span data-ttu-id="c60bb-121">Como pode haver vários provedores de serviços Gerenciando dispositivos de telefone em um único sistema, cada provedor de serviços Obtém uma parte contígua do intervalo total.</span><span class="sxs-lookup"><span data-stu-id="c60bb-121">Because there may be multiple service providers managing phone devices in a single system, each service provider gets a contiguous portion of the total range.</span></span> <span data-ttu-id="c60bb-122">Esse parâmetro informa ao provedor de serviços o menor valor em sua parte do intervalo.</span><span class="sxs-lookup"><span data-stu-id="c60bb-122">This parameter tells the service provider the lowest value in its portion of the range.</span></span> <span data-ttu-id="c60bb-123">O provedor de serviços, em vez da TAPI, é responsável por mapear esse intervalo de variáveis para seus próprios identificadores de dispositivo internos.</span><span class="sxs-lookup"><span data-stu-id="c60bb-123">The service provider, rather than TAPI, is responsible for mapping this variable range to its own internal device identifiers.</span></span> <span data-ttu-id="c60bb-124">Isso dá ao fornecedor do provedor de serviços flexibilidade suficiente para usar identificadores de dispositivo em extensões específicas do dispositivo, se desejar.</span><span class="sxs-lookup"><span data-stu-id="c60bb-124">This gives the service-provider vendor sufficient flexibility to use device identifiers in device-specific extensions if it wants.</span></span> <span data-ttu-id="c60bb-125">Como o provedor de serviços sabe quais identificadores de dispositivo aparecem em parâmetros e estruturas de dados definidos pela TAPI, ele pode usar identificadores de dispositivo consistentes em parâmetros de extensão específicos do dispositivo e estruturas de dados.</span><span class="sxs-lookup"><span data-stu-id="c60bb-125">Because the service provider knows what device identifiers appear in TAPI-defined parameters and data structures, it can use consistent device identifiers in device-specific extension parameters and data structures.</span></span>
-   <span data-ttu-id="c60bb-126">*dwNumLines*: especifica a quantos dispositivos de linha o provedor de serviços dá suporte.</span><span class="sxs-lookup"><span data-stu-id="c60bb-126">*dwNumLines*: Specifies how many line devices this service provider supports.</span></span>
-   <span data-ttu-id="c60bb-127">*dwNumPhones*: especifica a quantos dispositivos de telefone esse provedor de serviços dá suporte.</span><span class="sxs-lookup"><span data-stu-id="c60bb-127">*dwNumPhones*: Specifies how many phone devices this service provider supports.</span></span>
-   <span data-ttu-id="c60bb-128">*lpfnCompletionProc*: especifica o procedimento que o provedor de serviços chama para relatar a conclusão de todos os procedimentos operacionais assincronamente em dispositivos de linha e telefone.</span><span class="sxs-lookup"><span data-stu-id="c60bb-128">*lpfnCompletionProc*: Specifies the procedure the service provider calls to report completion of all asynchronously operating procedures on line and phone devices.</span></span>

<span data-ttu-id="c60bb-129">[**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit)a seguir, as operações normais, como a abertura de telefones, podem ser executadas.</span><span class="sxs-lookup"><span data-stu-id="c60bb-129">Following [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), normal operations such as opening phones can be carried out.</span></span>

 

 
