---
description: Com a função lineSetTerminal, o aplicativo pode controlar ou suprimir o roteamento de eventos de baixo nível especificados (trocados entre a opção e a estação) em um dispositivo.
ms.assetid: 36658d83-0ea4-4f62-b2e5-c0f6d6569d0d
title: Roteamento de eventos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df6749969faf89ac0212c19049fe02c9dad57a96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105761362"
---
# <a name="event-routing"></a><span data-ttu-id="7448e-103">Roteamento de eventos</span><span class="sxs-lookup"><span data-stu-id="7448e-103">Event Routing</span></span>

<span data-ttu-id="7448e-104">Com a função [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) , o aplicativo pode controlar ou suprimir o roteamento de eventos de baixo nível especificados (trocados entre a opção e a estação) em um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7448e-104">With the [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) function, the application can control or suppress the routing of specified low-level events (exchanged between the switch and the station) to a device.</span></span> <span data-ttu-id="7448e-105">Com o **lineSetTerminal**, o aplicativo especifica o dispositivo de terminal para o qual esses eventos (como linha, endereço ou chamada de eventos de fluxo de mídia) são roteados.</span><span class="sxs-lookup"><span data-stu-id="7448e-105">With **lineSetTerminal**, the application specifies the terminal device to which these events (such as line, address, or call media-stream events) are routed.</span></span>

<span data-ttu-id="7448e-106">O roteamento das diferentes classes de eventos pode ser controlado individualmente, permitindo que terminais separados sejam especificados para cada classe de evento.</span><span class="sxs-lookup"><span data-stu-id="7448e-106">The routing of the different classes of events can be individually controlled, allowing separate terminals to be specified for each event class.</span></span> <span data-ttu-id="7448e-107">As classes de evento incluem lâmpadas, botões, display, anéis, Hookswitch e fluxo de mídia.</span><span class="sxs-lookup"><span data-stu-id="7448e-107">Event classes include lamps, buttons, display, ringer, hookswitch, and media stream.</span></span>

<span data-ttu-id="7448e-108">Por exemplo, o fluxo de mídia de uma chamada (voz, por exemplo) pode ser enviado para qualquer dispositivo transdutor se o provedor de serviços e o hardware forem capazes de fazer isso.</span><span class="sxs-lookup"><span data-stu-id="7448e-108">For example, the media stream of a call (voice, for example) can be sent to any transducer device if the service provider and the hardware is capable of doing so.</span></span> <span data-ttu-id="7448e-109">Em geral, um *transdutor* significa o mesmo que o que é conhecido como um dispositivo *Hookswitch* na TAPI, algo que tem um microfone e um palestrante.</span><span class="sxs-lookup"><span data-stu-id="7448e-109">In general, a *transducer* means the same as what is referred to as a *hookswitch* device in TAPI, something that has a microphone and a speaker.</span></span> <span data-ttu-id="7448e-110">Eventos de anel da mudança para o telefone podem ser mapeados para um alerta visual na tela do computador ou podem ser roteados para um dispositivo de telefone.</span><span class="sxs-lookup"><span data-stu-id="7448e-110">Ring events from the switch to the phone can be mapped into a visual alert on the computer's screen or they can be routed to a phone device.</span></span> <span data-ttu-id="7448e-111">Eventos de lâmpada e eventos de exibição podem ser ignorados ou roteados para um dispositivo de telefone (que parece se comportar como um conjunto de telefone normal).</span><span class="sxs-lookup"><span data-stu-id="7448e-111">Lamp events and display events can be ignored or routed to a phone device (which appears to behave as a normal phone set).</span></span> <span data-ttu-id="7448e-112">Por fim, os pressionamentos de botão em um dispositivo de telefone podem ou não ser passados para a linha.</span><span class="sxs-lookup"><span data-stu-id="7448e-112">Finally, button presses at a phone device may or may not be passed to the line.</span></span> <span data-ttu-id="7448e-113">De qualquer forma, esse roteamento de sinais de baixo nível da linha não afeta a operação da parte da linha da TAPI, que sempre mapeia eventos de nível baixo para seus equivalentes funcionais.</span><span class="sxs-lookup"><span data-stu-id="7448e-113">In any case, this routing of low-level signals from the line does not affect the operation of the line portion of TAPI, which always maps low-level events to their functional equivalent.</span></span> <span data-ttu-id="7448e-114">Para determinar os terminais que um dispositivo de linha tem disponível (e seus recursos), consulte os recursos do dispositivo de linha com [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span><span class="sxs-lookup"><span data-stu-id="7448e-114">To determine the terminals a line device has available (and their capabilities), consult the line device's capabilities with [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span></span>

<span data-ttu-id="7448e-115">Suponha inicialmente que o aplicativo tenha suprimido o roteamento de todos os eventos (com [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)) e o usuário selecione um headset como o dispositivo de e/s atual.</span><span class="sxs-lookup"><span data-stu-id="7448e-115">Assume initially that the application has suppressed the routing of all events (with [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)), and the user selects a headset as the current I/O device.</span></span> <span data-ttu-id="7448e-116">Uma chamada de entrada envia uma mensagem [**\_ callstate de linha**](line-callstate.md) e uma mensagem de [**\_ LINEDEVSTATE de linha**](line-linedevstate.md) com a indicação de *toque* .</span><span class="sxs-lookup"><span data-stu-id="7448e-116">An incoming call sends a [**LINE\_CALLSTATE**](line-callstate.md) message, and a [**LINE\_LINEDEVSTATE**](line-linedevstate.md) message with the *ringing* indication.</span></span> <span data-ttu-id="7448e-117">Como o roteamento de todos os eventos é suprimido, os eventos de anel não são roteados para o telefone, portanto, o toque é suprimido.</span><span class="sxs-lookup"><span data-stu-id="7448e-117">Because routing of all events is suppressed, ring events are not routed to the phone, so ringing is suppressed.</span></span> <span data-ttu-id="7448e-118">Em vez disso, o aplicativo notifica o usuário com uma caixa de diálogo pop-up e um aviso do sistema no headset.</span><span class="sxs-lookup"><span data-stu-id="7448e-118">Instead, the application notifies the user with a pop-up dialog box and a system beep in the headset.</span></span>

<span data-ttu-id="7448e-119">O usuário decide responder à chamada.</span><span class="sxs-lookup"><span data-stu-id="7448e-119">The user decides to answer the call.</span></span> <span data-ttu-id="7448e-120">Como o dispositivo de e/s atual do usuário é o headset, o aplicativo de telefonia invoca [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) na chamada de entrada para rotear a mídia da chamada para o headset e responder à chamada.</span><span class="sxs-lookup"><span data-stu-id="7448e-120">Because the user's current I/O device is the headset, the telephony application invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) on the incoming call to route the call's media to the headset and answer the call.</span></span> <span data-ttu-id="7448e-121">O aplicativo também pode invocar **lineSetTerminal** para rotear a lâmpada e exibir eventos de informações para o conjunto de telefone para que ele se comporte como de costume.</span><span class="sxs-lookup"><span data-stu-id="7448e-121">The application may also invoke **lineSetTerminal** to route lamp and display information events to the phone set so that it will behave as usual.</span></span>

<span data-ttu-id="7448e-122">Como um segundo exemplo, suponha que uma chamada de entrada esteja alertando no computador do usuário.</span><span class="sxs-lookup"><span data-stu-id="7448e-122">As a second example, assume that an incoming call is alerting at the user's computer.</span></span> <span data-ttu-id="7448e-123">Em vez de selecionar a opção de resposta com o mouse, o usuário decide simplesmente pegar o monofone do telefone para responder à chamada.</span><span class="sxs-lookup"><span data-stu-id="7448e-123">Instead of selecting the answer option with the mouse, the user decides to just pick up the phone's handset to answer the call.</span></span> <span data-ttu-id="7448e-124">O status offhook no telefone envia uma mensagem para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7448e-124">The offhook status at the phone sends a message to the application.</span></span> <span data-ttu-id="7448e-125">O aplicativo pode interpretar esse status como uma solicitação pelo usuário para selecionar o aparelho de telefone para realizar a conversa.</span><span class="sxs-lookup"><span data-stu-id="7448e-125">The application can interpret this status as a request by the user to select the phone handset to conduct the conversation.</span></span> <span data-ttu-id="7448e-126">Em seguida, o aplicativo invoca [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) para rotear os dados de voz na chamada para o conjunto de telefone.</span><span class="sxs-lookup"><span data-stu-id="7448e-126">The application then invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) to route the voice data on the call to the phone set.</span></span>

 

 



