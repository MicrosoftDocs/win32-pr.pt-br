---
description: Uma operação que é concluída de forma assíncrona realiza parte de seu processamento na chamada de função feita pelo aplicativo e o restante dele em um thread de execução independente após a TAPI 2. x ter retornado da chamada de função.
ms.assetid: 37b544e4-6413-4741-b8b6-ec676ce4ca97
title: Funções assíncronas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 135e792a4b1d6a25a4f49fbb2abe2c19ce3071ad
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105754202"
---
# <a name="asynchronous-functions"></a><span data-ttu-id="357f1-103">Funções assíncronas</span><span class="sxs-lookup"><span data-stu-id="357f1-103">Asynchronous Functions</span></span>

<span data-ttu-id="357f1-104">Uma operação que é concluída de forma assíncrona realiza parte de seu processamento na chamada de função feita pelo aplicativo e o restante dele em um thread de execução independente após a TAPI 2. x ter retornado da chamada de função.</span><span class="sxs-lookup"><span data-stu-id="357f1-104">An operation that completes asynchronously performs part of its processing in the function call made by the application and the remainder of it in an independent execution thread after TAPI 2.x has returned from the function call.</span></span> <span data-ttu-id="357f1-105">Para garantir a conclusão do processamento da chamada, o provedor de serviços faz o vetor da solicitação para outra entidade ativa no sistema — como um servidor de LAN, um hardware de suplemento, um comutador ou uma rede — e, em seguida, retorna ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="357f1-105">To ensure completion of the call's processing, the service provider vectors the request to another active entity in the system—such as a LAN server, add-in hardware, a switch, or a network—and then returns to the application.</span></span> <span data-ttu-id="357f1-106">Neste momento, um resultado de erro negativo ou um identificador de solicitação positivo é retornado para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="357f1-106">At this time, either a negative error result or a positive request identifier is returned to the application.</span></span>

<span data-ttu-id="357f1-107">No momento da conclusão assíncrona (o provedor de serviços recebeu uma interrupção do hardware, o que significa que uma mensagem deve ser entregue), o provedor de serviços chama TAPISRV e relata que "evento *X* acabou de acontecer.</span><span class="sxs-lookup"><span data-stu-id="357f1-107">At the time of asynchronous completion (the service provider has received an interrupt from the hardware, meaning that a message must be delivered), the service provider calls TAPISRV and reports that "Event *X* has just taken place.</span></span> <span data-ttu-id="357f1-108">Forneça uma mensagem apropriada para todos os aplicativos preocupados. "</span><span class="sxs-lookup"><span data-stu-id="357f1-108">Deliver an appropriate message to all concerned applications."</span></span> <span data-ttu-id="357f1-109">Quando o TAPISRV recebe essa mensagem, ele encaminha a mensagem para a biblioteca de vínculo dinâmico TAPI, no processo do aplicativo, que, por sua vez, posta uma mensagem de janela, sinaliza um identificador de evento ou posta em uma porta de conclusão de e/s, de acordo com o esquema de notificação de mensagem selecionado pelo aplicativo em [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) ou [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span><span class="sxs-lookup"><span data-stu-id="357f1-109">When TAPISRV receives this message, it forwards the message to the TAPI dynamic-link library, in the application's process, which in turn posts a window message, signals an event handle, or posts to an I/O completion port, according to the message notification scheme selected by the application in [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) or [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span></span>

<span data-ttu-id="357f1-110">Quando a parte assíncrona da operação é concluída, uma mensagem de [**\_ resposta de linha**](./line-reply.md) (ou [**\_ resposta telefônica**](./phone-reply.md)) é enviada para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="357f1-110">When the asynchronous portion of the operation completes, a [**LINE\_REPLY**](./line-reply.md) (or [**PHONE\_REPLY**](./phone-reply.md)) message is sent to the application.</span></span> <span data-ttu-id="357f1-111">Essa mensagem contém, como um de seus parâmetros, o identificador da solicitação retornado pela chamada de função.</span><span class="sxs-lookup"><span data-stu-id="357f1-111">This message contains, as one of its parameters, the request identifier returned by the function call.</span></span> <span data-ttu-id="357f1-112">Esse identificador de solicitação permite que o aplicativo determine qual solicitação original foi concluída.</span><span class="sxs-lookup"><span data-stu-id="357f1-112">This request identifier allows the application to determine which original request has completed.</span></span> <span data-ttu-id="357f1-113">(Os aplicativos devem lembrar os identificadores de solicitação de todas as suas solicitações em andamento para que as mensagens de resposta possam ser manipuladas adequadamente.) Um segundo parâmetro para a mensagem de resposta de linha \_ (ou \_ resposta telefônica) é o valor de retorno assíncrono.</span><span class="sxs-lookup"><span data-stu-id="357f1-113">(Applications should remember the request identifiers of all their requests in progress so that reply messages can be properly handled.) A second parameter to the LINE\_REPLY (or PHONE\_REPLY) message is the asynchronous return value.</span></span> <span data-ttu-id="357f1-114">Esse é um valor negativo (para um erro) ou zero se a operação foi concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="357f1-114">This is either a negative value (for an error) or zero if the operation completed successfully.</span></span> <span data-ttu-id="357f1-115">Para operações assíncronas, qualquer um dos valores de retorno pode ser retornado como parte do retorno da função ou como o parâmetro *dwParam2* na \_ mensagem de resposta do telefone ou resposta de linha \_ .</span><span class="sxs-lookup"><span data-stu-id="357f1-115">For asynchronous operations, any of the return values may be returned as part of the function return or as the *dwParam2* parameter in the LINE\_REPLY or PHONE\_REPLY message.</span></span> <span data-ttu-id="357f1-116">O valor 0, que indica êxito, será retornado apenas na mensagem de resposta de linha \_ e nunca como o valor de retorno da função.</span><span class="sxs-lookup"><span data-stu-id="357f1-116">The value 0, which indicates success, will only be returned in the LINE\_REPLY message, and never as the function's return value.</span></span>

<span data-ttu-id="357f1-117">As funções de inicialização ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) e [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) dizem ao TAPI como enviar essas mensagens para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="357f1-117">The initialize functions ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) and [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) tell TAPI how to send these messages to the application.</span></span>

> [!Note]  
> <span data-ttu-id="357f1-118">Em alguns casos, se um aplicativo multi-threaded chamar uma função assíncrona de um thread que não seja o thread do qual o aplicativo inicializou a linha ou o dispositivo de telefone, o aplicativo poderá receber a [**\_ resposta de linha**](./line-reply.md) ou a mensagem de [**\_ resposta do telefone**](./phone-reply.md) antes que a função assíncrona seja retornada.</span><span class="sxs-lookup"><span data-stu-id="357f1-118">In some cases, if a multithreaded application calls an asynchronous function from a thread other than the thread from which the application initialized the line or phone device, the application may receive the [**LINE\_REPLY**](./line-reply.md) or [**PHONE\_REPLY**](./phone-reply.md) message before the asynchronous function has returned.</span></span> <span data-ttu-id="357f1-119">Nesses casos, o aplicativo deve salvar os parâmetros da mensagem e aguardar até que a função assíncrona seja retornada e o identificador da solicitação seja conhecido antes de processar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="357f1-119">In such cases, the application should save the message parameters and wait until the asynchronous function returns and the request identifier is known before processing the message.</span></span>

 

 

 
