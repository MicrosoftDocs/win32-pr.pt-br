---
description: Estado de sessão ou chamada indica o status atual de uma sessão, como &\# 0034; oferta&\# 0034; ou &\# 0034; conectado. &\# 0034; A manipulação adequada de informações de estado é vital para o funcionamento adequado da maioria dos aplicativos TAPI.
ms.assetid: a6a49b77-4e9b-4f23-bfe6-26f26549b18f
title: Estado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88fb9c482fcb9e432b5bfb5d36f77cd09f538086
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105767737"
---
# <a name="state"></a><span data-ttu-id="8eece-103">Estado</span><span class="sxs-lookup"><span data-stu-id="8eece-103">State</span></span>

<span data-ttu-id="8eece-104">Estado de sessão ou chamada indica o status atual de uma sessão, como "oferta" ou "conectado".</span><span class="sxs-lookup"><span data-stu-id="8eece-104">Session or call state indicates the current status of a session, such as "offering" or "connected."</span></span> <span data-ttu-id="8eece-105">A manipulação adequada de informações de estado é vital para o funcionamento adequado da maioria dos aplicativos TAPI.</span><span class="sxs-lookup"><span data-stu-id="8eece-105">Proper handling of state information is vital to the proper functioning of most TAPI applications.</span></span> <span data-ttu-id="8eece-106">Por exemplo, a operação de resposta pode ser executada somente em uma sessão oferecida, mas uma transferência falhará se a sessão estiver nesse estado.</span><span class="sxs-lookup"><span data-stu-id="8eece-106">For example, the answer operation can be performed only on an offered session, but a transfer will fail if the session is in that state.</span></span>

<span data-ttu-id="8eece-107">O estado de uma sessão é alterado como resultado de eventos.</span><span class="sxs-lookup"><span data-stu-id="8eece-107">A session's state changes as a result of events.</span></span> <span data-ttu-id="8eece-108">Os eventos podem ser solicitados ou não solicitados.</span><span class="sxs-lookup"><span data-stu-id="8eece-108">Events can be solicited or unsolicited.</span></span> <span data-ttu-id="8eece-109">Os *eventos solicitados* são causados pelo aplicativo que controla a sessão, como quando ele invoca uma operação de sessão TAPI.</span><span class="sxs-lookup"><span data-stu-id="8eece-109">*Solicited events* are caused by the application controlling the session, such as when it invokes a TAPI session operation.</span></span> <span data-ttu-id="8eece-110">Os *eventos não solicitados* são causados pela opção, pela rede telefônica, pelo usuário que pressiona os botões no telefone local ou pelas ações da parte remota.</span><span class="sxs-lookup"><span data-stu-id="8eece-110">*Unsolicited events* are caused by the switch, the telephone network, the user pressing buttons on the local phone, or the actions of the remote party.</span></span>

<span data-ttu-id="8eece-111">Sempre que um provedor de serviços detecta uma alteração de estado de sessão, ele relata que a alteração para TAPI e TAPI emite uma notificação de eventos para todos os aplicativos de proprietário e monitor.</span><span class="sxs-lookup"><span data-stu-id="8eece-111">Whenever a service provider detects a session state change, it reports the change to TAPI and TAPI issues an event notification to all owner and monitor applications.</span></span> <span data-ttu-id="8eece-112">O aplicativo deve reagir a essas notificações adequadamente.</span><span class="sxs-lookup"><span data-stu-id="8eece-112">The application must react to these notifications appropriately.</span></span> <span data-ttu-id="8eece-113">Consulte a notificação de eventos sob [inicialização TAPI](tapi-initialization.md) para obter informações sobre como controlar quais eventos são relatados para um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8eece-113">Please see Event Notification under [TAPI Initialization](tapi-initialization.md) for information on controlling which events are reported to an application.</span></span>

<span data-ttu-id="8eece-114">Um aplicativo sempre deve processar notificações de eventos de estado.</span><span class="sxs-lookup"><span data-stu-id="8eece-114">An application should always process state event notifications.</span></span> <span data-ttu-id="8eece-115">As transições de estado válidas para uma configuração física podem ser inválidas para outra.</span><span class="sxs-lookup"><span data-stu-id="8eece-115">State transitions valid for one physical configuration may be invalid for another.</span></span> <span data-ttu-id="8eece-116">Por exemplo, considere uma linha que termina fisicamente no computador e em um conjunto de telefone separado, criando uma configuração de linha de terceiros entre o computador e o conjunto de telefone.</span><span class="sxs-lookup"><span data-stu-id="8eece-116">For example, consider a line that physically terminates both at the computer and at a separate phone set, creating a party line configuration between the computer and the phone set.</span></span> <span data-ttu-id="8eece-117">Um aplicativo em execução no computador pode não saber sobre as atividades do conjunto de telefone.</span><span class="sxs-lookup"><span data-stu-id="8eece-117">An application running on the computer may not know about phone set activities.</span></span> <span data-ttu-id="8eece-118">Ou seja, a linha pode estar em uso sem que o provedor de serviços esteja ciente dela.</span><span class="sxs-lookup"><span data-stu-id="8eece-118">That is, the line may be in use without the service provider being aware of it.</span></span> <span data-ttu-id="8eece-119">Um aplicativo que tenta fazer uma chamada de saída terá sucesso em alocar uma aparência de chamada da TAPI, mas isso resulta no compartilhamento da chamada ativa na linha.</span><span class="sxs-lookup"><span data-stu-id="8eece-119">An application that attempts to make an outgoing call will succeed in allocating a call appearance from TAPI, but this results in sharing the active call on the line.</span></span> <span data-ttu-id="8eece-120">O envio cego de uma cadeia de caracteres de discagem DTMF sem primeiro verificar um tom de discagem pode não resultar no comportamento pretendido (ou educado).</span><span class="sxs-lookup"><span data-stu-id="8eece-120">Blindly sending a DTMF dial string without first checking for a dial tone may not result in intended (or polite) behavior.</span></span>

<span data-ttu-id="8eece-121">Um aplicativo não deve assumir uma progressão rígida de um estado para outro.</span><span class="sxs-lookup"><span data-stu-id="8eece-121">An application should not assume a rigid progression from one state to another.</span></span> <span data-ttu-id="8eece-122">Os eventos de estado chegam e são encaminhados de forma assíncrona e as notificações não podem ser recebidas em uma ordem previsível.</span><span class="sxs-lookup"><span data-stu-id="8eece-122">State events arrive and are forwarded asynchronously and notifications may not be received in a predictable order.</span></span> <span data-ttu-id="8eece-123">Portanto, as notificações de estado de chamada devem ser exibidas como informando ao aplicativo o novo estado de chamada em vez de relatar as transições entre dois Estados.</span><span class="sxs-lookup"><span data-stu-id="8eece-123">Therefore, call-state notifications should be viewed as telling the application the call's new state instead of as reporting the transitions between two states.</span></span>

<span data-ttu-id="8eece-124">Todos os provedores de serviços de telefonia devem fornecer essas informações.</span><span class="sxs-lookup"><span data-stu-id="8eece-124">All telephony service providers must supply this information.</span></span>

<span data-ttu-id="8eece-125">\* \* TAPI 2. x: \* \*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**mensagem \_ Callstate de linha**](./line-callstate.md) , [ \_ constantes LINECALLSTATE](./linecallstate--constants.md)</span><span class="sxs-lookup"><span data-stu-id="8eece-125">\*\*TAPI 2.x:  \*\*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**LINE\_CALLSTATE**](./line-callstate.md) message, [LINECALLSTATE\_ Constants](./linecallstate--constants.md)</span></span>

<span data-ttu-id="8eece-126">**TAPI 3. x: **[**ITCallInfo:: get \_ CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** membro \_ callid cil** de [**CALLINFO \_ Long**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), notificação [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) , enumerador de [**\_ estado de chamada**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state)</span><span class="sxs-lookup"><span data-stu-id="8eece-126">**TAPI 3.x:  **[**ITCallInfo::get\_CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** CIL\_CALLID** member of [**CALLINFO\_LONG**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) notification, [**CALL\_STATE**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state) enumerator</span></span>

 

 
