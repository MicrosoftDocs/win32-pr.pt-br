---
description: A natureza interativa de telefonia exige que a TAPI seja um ambiente operacional em tempo real.
ms.assetid: b8512588-ec28-4fbe-b47f-b900e2dba1f2
title: Modelo síncrono/assíncrono
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 02b3d3b58e9704719e502fa3efc11bc4dc216479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105813049"
---
# <a name="synchronousasynchronous-model"></a><span data-ttu-id="61aa3-103">Modelo síncrono/assíncrono</span><span class="sxs-lookup"><span data-stu-id="61aa3-103">Synchronous/Asynchronous Model</span></span>

<span data-ttu-id="61aa3-104">A natureza interativa de telefonia exige que a TAPI seja um ambiente operacional em tempo real.</span><span class="sxs-lookup"><span data-stu-id="61aa3-104">The interactive nature of telephony requires TAPI to be a real-time operating environment.</span></span> <span data-ttu-id="61aa3-105">Muitas das funções TAPI precisam ser concluídas rapidamente e retornar seus resultados para o aplicativo de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="61aa3-105">Many of the TAPI functions are required to complete quickly and return their results to the application synchronously.</span></span> <span data-ttu-id="61aa3-106">Outras funções (como discagem) podem não ser capazes de concluir tão rapidamente e, portanto, operar de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="61aa3-106">Other functions (such as dialing) may not be able to complete as quickly and therefore operate asynchronously.</span></span>

<span data-ttu-id="61aa3-107">As operações de telefonia são concluídas de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="61aa3-107">Telephony operations complete either synchronously or asynchronously.</span></span> <span data-ttu-id="61aa3-108">Esses dois modelos diferem da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="61aa3-108">These two models differ as follows.</span></span> <span data-ttu-id="61aa3-109">As *funções síncronas* executam toda a solicitação antes que o thread do chamador tenha permissão para retornar da chamada de função.</span><span class="sxs-lookup"><span data-stu-id="61aa3-109">*Synchronous functions* execute the entire request before the caller's thread is allowed to return from the function call.</span></span> <span data-ttu-id="61aa3-110">As *funções assíncronas* retornam antes que a solicitação seja executada em sua totalidade.</span><span class="sxs-lookup"><span data-stu-id="61aa3-110">*Asynchronous functions* return before the request has executed in its entirety.</span></span> <span data-ttu-id="61aa3-111">Quando a solicitação assíncrona for concluída mais tarde, o provedor de serviços relatará a conclusão chamando um procedimento de retorno de chamada que a TAPI forneceu originalmente a ela no início da sequência de inicialização.</span><span class="sxs-lookup"><span data-stu-id="61aa3-111">When the asynchronous request later completes, the service provider reports the completion by calling a callback procedure that TAPI originally supplied to it early in the initialization sequence.</span></span>

-   <span data-ttu-id="61aa3-112">Operações assíncronas têm um parâmetro chamado *dwRequestID* do tipo definido [drv \_ REQUESTID](./drv-requestid.md) como seu primeiro parâmetro.</span><span class="sxs-lookup"><span data-stu-id="61aa3-112">Asynchronous operations have a parameter named *dwRequestID* of the defined type [DRV\_REQUESTID](./drv-requestid.md) as their first parameter.</span></span> <span data-ttu-id="61aa3-113">Tal operação executa parte de seu processamento na chamada de função e o restante de seu processamento em um thread de execução independente depois que a chamada de função é retornada.</span><span class="sxs-lookup"><span data-stu-id="61aa3-113">Such an operation performs part of its processing in the function call and the remainder of its processing in an independent execution thread after the function call has returned.</span></span> <span data-ttu-id="61aa3-114">Quando a função retorna, ela retorna um resultado de erro negativo ou o *dwRequestID* (positivo) que foi passado na chamada de função.</span><span class="sxs-lookup"><span data-stu-id="61aa3-114">When the function returns, it returns either a negative error result or the (positive) *dwRequestID* that was passed in the function call.</span></span> <span data-ttu-id="61aa3-115">O resultado de erro negativo indica que a operação está concluída (e falhou).</span><span class="sxs-lookup"><span data-stu-id="61aa3-115">The negative error result indicates that the operation is complete (and failed).</span></span> <span data-ttu-id="61aa3-116">O *dwRequestID* positivo retornado indica que a operação continua no thread independente.</span><span class="sxs-lookup"><span data-stu-id="61aa3-116">The positive *dwRequestID* returned indicates that the operation continues in the independent thread.</span></span> <span data-ttu-id="61aa3-117">Nesse caso, o provedor de serviço eventualmente chama o procedimento [**de \_ conclusão assíncrona**](/windows/win32/api/tspi/nc-tspi-async_completion) , passando o *dwRequestID* e um código de resultado para indicar o resultado da operação.</span><span class="sxs-lookup"><span data-stu-id="61aa3-117">In such a case, the service provider eventually calls the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) procedure, passing the *dwRequestID* and a result code to indicate the outcome of the operation.</span></span> <span data-ttu-id="61aa3-118">O código de resultado é zero para êxito ou um do mesmo conjunto de resultados de erro (negativo).</span><span class="sxs-lookup"><span data-stu-id="61aa3-118">The result code is zero for success or one of the same set of (negative) error results.</span></span> <span data-ttu-id="61aa3-119">De qualquer forma, o provedor de serviços nunca deve retornar zero ou qualquer valor positivo diferente de *dwRequestID* de uma função designada como assíncrona porque fazer isso pode produzir resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="61aa3-119">In any case, the service provider must never return zero or any positive value other than *dwRequestID* from a function designated as asynchronous because doing so can produce unexpected results.</span></span> <span data-ttu-id="61aa3-120">Os provedores de serviço sempre devem copiar dados de entrada da memória do aplicativo para a memória do provedor de serviços antes de retornar de uma função assíncrona.</span><span class="sxs-lookup"><span data-stu-id="61aa3-120">Service providers should always copy input data from application memory into service provider memory before returning from an asynchronous function.</span></span>
-   <span data-ttu-id="61aa3-121">As operações síncronas não têm *dwRequestID* como seu primeiro parâmetro.</span><span class="sxs-lookup"><span data-stu-id="61aa3-121">Synchronous operations do not have *dwRequestID* as their first parameter.</span></span> <span data-ttu-id="61aa3-122">Tal operação executa todo o seu processamento no thread de execução do chamador, retornando o resultado final quando ele retorna.</span><span class="sxs-lookup"><span data-stu-id="61aa3-122">Such an operation performs all of its processing in the caller's execution thread, returning the final result when it returns.</span></span> <span data-ttu-id="61aa3-123">O resultado é zero para êxito ou um código de erro negativo para falha.</span><span class="sxs-lookup"><span data-stu-id="61aa3-123">The result is zero for success or a negative error code for failure.</span></span> <span data-ttu-id="61aa3-124">O provedor de serviços não chama [**a \_ conclusão assíncrona**](/windows/win32/api/tspi/nc-tspi-async_completion) para operações síncronas.</span><span class="sxs-lookup"><span data-stu-id="61aa3-124">The service provider does not call [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) for synchronous operations.</span></span>

<span data-ttu-id="61aa3-125">É interessante considerar o tempo de um retorno de chamada de "conclusão" relativo ao quando a solicitação original retorna.</span><span class="sxs-lookup"><span data-stu-id="61aa3-125">It is interesting to consider the timing of a "completion" callback relative to when the original request returns.</span></span> <span data-ttu-id="61aa3-126">Uma solicitação assíncrona típica seria implementada pelo provedor de serviços como no seguinte pseudocódigo:</span><span class="sxs-lookup"><span data-stu-id="61aa3-126">A typical asynchronous request would be implemented by the service provider as in the following pseudocode:</span></span>

``` syntax
Some_request(Request_ID, ...) {
  check parameters for validity
  check device state for validity
  store Request_ID for Completion Interrupt Handler's use
  manipulate device registers to start physical operation
  return Request_ID  // to indicate asynch operation
}
Operation Completion Interrupt Handler: {
  if operation was successful then
    call "completion" callback passing Request_ID and "success"
  else
    call "completion" callback passing Request_ID and "error num"
  endif
}
```

<span data-ttu-id="61aa3-127">Se a operação for concluída muito rapidamente (ou a solicitação original retornar muito lentamente), é possível que o manipulador de interrupção que é executado quando uma operação física é concluída possa ser disparado antes que a solicitação original retorne ao aplicativo ou mesmo à TAPI.</span><span class="sxs-lookup"><span data-stu-id="61aa3-127">If the operation completes very rapidly (or the original request returns very slowly), it is possible that the interrupt handler that runs when a physical operation completes may be triggered before the original request returns to the application or even to TAPI.</span></span> <span data-ttu-id="61aa3-128">Esse comportamento é permitido.</span><span class="sxs-lookup"><span data-stu-id="61aa3-128">This behavior is allowed.</span></span> <span data-ttu-id="61aa3-129">A TAPI garante que a notificação eventual de conclusão para o aplicativo seja entregue após o retorno da solicitação original.</span><span class="sxs-lookup"><span data-stu-id="61aa3-129">TAPI guarantees that the eventual completion notification to the application is delivered after the original request returns.</span></span>

<span data-ttu-id="61aa3-130">**TAPI 2. x:** Lista o estado em que cada função é concluída de forma síncrona ou assíncrona aparece na [referência de função rápida TAPI](./tapi-quick-function-reference.md).</span><span class="sxs-lookup"><span data-stu-id="61aa3-130">**TAPI 2.x:** Lists which state whether each function completes synchronously or asynchronously appear in [TAPI Quick Function Reference](./tapi-quick-function-reference.md).</span></span>

 

 
