---
description: A operação de transferência permite que um aplicativo envie uma sessão de comunicações conectada no momento a um endereço diferente.
ms.assetid: b1027f09-74e1-4da8-b718-bb55a56dda1d
title: Transferência
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 724b9ade43e41ab95a5baa6dfe7d3269f4e4a174
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104011067"
---
# <a name="transfer"></a><span data-ttu-id="73b8b-103">Transferência</span><span class="sxs-lookup"><span data-stu-id="73b8b-103">Transfer</span></span>

<span data-ttu-id="73b8b-104">A operação de transferência permite que um aplicativo envie uma sessão de comunicações conectada no momento a um endereço diferente.</span><span class="sxs-lookup"><span data-stu-id="73b8b-104">The transfer operation allows an application to send a currently connected communications session to a different address.</span></span>

<span data-ttu-id="73b8b-105">A TAPI fornece dois mecanismos para transferir uma sessão atual para um endereço diferente.</span><span class="sxs-lookup"><span data-stu-id="73b8b-105">TAPI provides two mechanisms for transferring a current session to a different address.</span></span> <span data-ttu-id="73b8b-106">A *transferência oculta* permite que uma sessão existente seja transferida para um endereço de destino especificado em uma única fase.</span><span class="sxs-lookup"><span data-stu-id="73b8b-106">*Blind transfer* allows an existing session to be transferred to a specified destination address in one phase.</span></span> <span data-ttu-id="73b8b-107">A *transferência de consulta* requer a existência de uma sessão de consulta, além da sessão atual, para ser configurada para a transferência e a conclusão da transferência.</span><span class="sxs-lookup"><span data-stu-id="73b8b-107">*Consultation transfer* requires the existence of a consultation session in addition to the current session to set up for the transfer, and then completion of the transfer.</span></span> <span data-ttu-id="73b8b-108">A escolha entre esses dois tipos é frequentemente baseada em recursos do provedor de serviços, pois alguns provedores de serviços não dão suporte à transferência oculta.</span><span class="sxs-lookup"><span data-stu-id="73b8b-108">The choice between these two types is frequently based on service provider capabilities because some service providers do not support blind transfer.</span></span> <span data-ttu-id="73b8b-109">Em alguns casos, as necessidades do aplicativo podem fazer com que a transferência de consultoria seja o método preferencial, mesmo onde a transferência oculta é possível.</span><span class="sxs-lookup"><span data-stu-id="73b8b-109">In some cases, application needs may make the consultative transfer the preferred method even where blind transfer is possible.</span></span>

<span data-ttu-id="73b8b-110">A operação de transferência oculta é basicamente a mesma sob TAPI 2 e TAPI 3, mas a transferência consultiva segue padrões ligeiramente diferentes.</span><span class="sxs-lookup"><span data-stu-id="73b8b-110">The blind transfer operation is basically the same under TAPI 2 and TAPI 3, but consultative transfer follows slightly different patterns.</span></span>

<span data-ttu-id="73b8b-111">**TAPI 2. x:** A transferência consultiva começa com a invocação de [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), que coloca a chamada existente na retenção de consulta e identifica essa chamada como o destino para a próxima solicitação de conclusão da transferência.</span><span class="sxs-lookup"><span data-stu-id="73b8b-111">**TAPI 2.x:** Consultative transfer starts with invoking [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), which places the existing call on consultation hold, and identifies this call as the target for the next transfer-completion request.</span></span> <span data-ttu-id="73b8b-112">A função **lineSetupTransfer** também aloca uma chamada de consulta que pode ser usada para estabelecer a chamada de consulta com a parte para a qual a chamada será transferida.</span><span class="sxs-lookup"><span data-stu-id="73b8b-112">The **lineSetupTransfer** function also allocates a consultation call that can be used to establish the consultation call with the party to which the call will be transferred.</span></span> <span data-ttu-id="73b8b-113">O aplicativo pode discar a extensão da parte de destino na chamada de consulta (usando [**lineDial**](/windows/win32/api/tapi/nf-tapi-linedial)) ou pode remover e desalocar a chamada de consulta e, em vez disso, ativar uma chamada mantida existente (usando [**lineUnhold**](/windows/win32/api/tapi/nf-tapi-lineunhold)), se houver suporte no comutador.</span><span class="sxs-lookup"><span data-stu-id="73b8b-113">The application can dial the extension of the destination party on the consultation call (using [**lineDial**](/windows/win32/api/tapi/nf-tapi-linedial)), or it can drop and deallocate the consultation call and instead activate an existing held call (using [**lineUnhold**](/windows/win32/api/tapi/nf-tapi-lineunhold)), if supported by the switch.</span></span> <span data-ttu-id="73b8b-114">Enquanto a chamada inicial está em um controle de consulta e a chamada de consulta está ativa, o aplicativo pode alternar entre essas chamadas usando [**lineSwapHold**](/windows/win32/api/tapi/nf-tapi-lineswaphold).</span><span class="sxs-lookup"><span data-stu-id="73b8b-114">While the initial call is on consultation hold and the consultation call is active, the application can toggle between these calls using [**lineSwapHold**](/windows/win32/api/tapi/nf-tapi-lineswaphold).</span></span>

<span data-ttu-id="73b8b-115">**TAPI 2. x:** Os aplicativos concluem a transferência consultiva usando o [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span><span class="sxs-lookup"><span data-stu-id="73b8b-115">**TAPI 2.x:** Applications complete the consultative transfer using [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span></span> <span data-ttu-id="73b8b-116">Ambas as chamadas serão revertidas para o estado *ocioso* .</span><span class="sxs-lookup"><span data-stu-id="73b8b-116">Both calls will revert to the *idle* state.</span></span>

<span data-ttu-id="73b8b-117">Os aplicativos podem usar o recurso de "transferência em uma etapa" de vários PBXs (um único pressionamento de botão para estabelecer uma transferência de consulta) definindo o parâmetro *lpCallParams* para o membro **LINECALLPARAMFLAGS \_ ONESTEPTRANSFER** das [ \_ constantes LINECALLPARAMFLAGS](./linecallparamflags--constants.md) ao chamar [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer).</span><span class="sxs-lookup"><span data-stu-id="73b8b-117">Applications can use the "one-step transfer" feature of many PBXs (a single button press to establish a consultation transfer) by setting the *lpCallParams* parameter to the **LINECALLPARAMFLAGS\_ONESTEPTRANSFER** member of the [LINECALLPARAMFLAGS\_ constants](./linecallparamflags--constants.md) when calling [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer).</span></span>

<span data-ttu-id="73b8b-118">**TAPI 3. x:** A transferência consultiva começa com o uso de [**ITAddress:: createcall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) para criar uma chamada de consulta para o novo endereço de destino.</span><span class="sxs-lookup"><span data-stu-id="73b8b-118">**TAPI 3.x:** Consultative transfer starts with using [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) to create a consultation call to the new destination address.</span></span> <span data-ttu-id="73b8b-119">[**ITBasicCallControl:: Transfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer) é chamado no objeto de chamada original usando um ponteiro para o novo objeto de chamada de consulta como um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="73b8b-119">[**ITBasicCallControl::Transfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer) is then called on the original call object using a pointer to the new consultation call object as a parameter.</span></span> <span data-ttu-id="73b8b-120">Chamar [**ITBasicCallControl:: Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish) no objeto de chamada de consulta, em seguida, conclui a transferência.</span><span class="sxs-lookup"><span data-stu-id="73b8b-120">Calling [**ITBasicCallControl::Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish) on the consultation call object then completes the transfer.</span></span>

<span data-ttu-id="73b8b-121">O aplicativo deve liberar recursos de sessão após a conclusão bem-sucedida de uma operação de transferência.</span><span class="sxs-lookup"><span data-stu-id="73b8b-121">The application must release session resources following the successful completion of a transfer operation.</span></span>

<span data-ttu-id="73b8b-122">Nem todos os provedores de serviço dão suporte ao uso desta operação.</span><span class="sxs-lookup"><span data-stu-id="73b8b-122">Not all service providers support use of this operation.</span></span>

<span data-ttu-id="73b8b-123">**TAPI 2. x:** Consulte [**lineBlindTransfer**](/windows/win32/api/tapi/nf-tapi-lineblindtransfer), [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span><span class="sxs-lookup"><span data-stu-id="73b8b-123">**TAPI 2.x:** See [**lineBlindTransfer**](/windows/win32/api/tapi/nf-tapi-lineblindtransfer), [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span></span>

<span data-ttu-id="73b8b-124">**TAPI 3. x:** Consulte [**ITBasicCallControl:: BlindTransfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-blindtransfer), [**ITAddress:: createchama**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall), [**ITBasicCallControl:: transferência**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer), [**ITBasicCallControl:: concluir**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish).</span><span class="sxs-lookup"><span data-stu-id="73b8b-124">**TAPI 3.x:** See [**ITBasicCallControl::BlindTransfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-blindtransfer), [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall), [**ITBasicCallControl::Transfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer), [**ITBasicCallControl::Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish).</span></span>

 

 
