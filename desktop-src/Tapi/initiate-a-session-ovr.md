---
description: As informações primárias que um aplicativo fornece para iniciar uma sessão de comunicações são o tipo de endereço, o tipo de mídia ou os tipos e o endereço de destino.
ms.assetid: 65e53587-0e40-411b-8d6c-d6adfc9d1e6c
title: Iniciar uma sessão
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9e925ba90460b88c85a9aab1624923acdbc4572a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103827758"
---
# <a name="initiate-a-session"></a><span data-ttu-id="9bbe0-103">Iniciar uma sessão</span><span class="sxs-lookup"><span data-stu-id="9bbe0-103">Initiate a Session</span></span>

<span data-ttu-id="9bbe0-104">As informações primárias que um aplicativo fornece para iniciar uma sessão de comunicações são o [tipo de endereço](address-type-ovr.md), o tipo de [mídia](media-type-ovr.md) ou os tipos e o [endereço](address-ovr.md)de destino.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-104">The primary pieces of information an application supplies to initiate a communications session are the [address type](address-type-ovr.md), the [media type](media-type-ovr.md) or types, and the destination [address](address-ovr.md).</span></span>

<span data-ttu-id="9bbe0-105">O endereço de destino pode exigir a [conversão de endereços](#address-translation) para colocar as informações inseridas por um usuário no formato adequado para um determinado tipo de endereço.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-105">The destination address may require [address translation](#address-translation) to put the information entered by a user into the proper format for a given address type.</span></span> <span data-ttu-id="9bbe0-106">Por exemplo, um número de telefone que estava em um catálogo de endereços eletrônicos em formato [canônico](address-ovr.md) exigirá tradução para o formato de [discagem](address-ovr.md) .</span><span class="sxs-lookup"><span data-stu-id="9bbe0-106">For example, a phone number that was in an electronic address book in [canonical](address-ovr.md) format will require translation to [dialable](address-ovr.md) format.</span></span>

<span data-ttu-id="9bbe0-107">Algumas sessões podem exigir parâmetros de configuração especiais, se houver suporte do provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-107">Some sessions may require special setup parameters, if supported by the service provider.</span></span> <span data-ttu-id="9bbe0-108">Por exemplo, um ISDN TSP pode transmitir informações do usuário e algumas MSPs exigem informações sobre a direção do fluxo de mídia.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-108">For example, an ISDN TSP can transmit user-user information, and some MSPs require information about media stream direction.</span></span> <span data-ttu-id="9bbe0-109">Consulte [as informações da sessão](session-information-ovr.md) para obter uma revisão dos dados que podem ser definidos ou obtidos em relação a uma sessão.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-109">Please see [Session Information](session-information-ovr.md) for a review of data that may be set or obtained concerning a session.</span></span>

<span data-ttu-id="9bbe0-110">Depois que uma sessão for iniciada, a TAPI informará o aplicativo de andamento da chamada usando o mecanismo de notificação de eventos configurado durante a inicialização.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-110">Once a session has been initiated, TAPI will inform the application of call progress using the event notification mechanism set up during initialization.</span></span>

<span data-ttu-id="9bbe0-111">**TAPI 2. x:** Os aplicativos iniciam uma sessão usando a função [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) .</span><span class="sxs-lookup"><span data-stu-id="9bbe0-111">**TAPI 2.x:** Applications initiate a session using the [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) function.</span></span> <span data-ttu-id="9bbe0-112">A função [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) é usada para executar a conversão de endereço, se necessário.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-112">The [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) function is used to perform address translation, if required.</span></span>

<span data-ttu-id="9bbe0-113">Parâmetros de configuração de chamada podem ser armazenados na estrutura de dados [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) e um ponteiro para essa estrutura é usado como um parâmetro de [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-113">Call setup parameters can be stored in the [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) data structure, and a pointer to this structure is then used as a parameter of [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span></span> <span data-ttu-id="9bbe0-114">Se nenhuma estrutura **LINECALLPARAMS** for fornecida para **lineMakeCall**, uma chamada de taxa de voz POTS padrão será solicitada com um conjunto de valores padrão.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-114">If no **LINECALLPARAMS** structure is supplied to **lineMakeCall**, a default POTS voice-grade call is requested with a set of default values.</span></span>

<span data-ttu-id="9bbe0-115">Se a sessão for configurada com êxito, um identificador de chamada com [privilégios](privilege-ovr.md) de *proprietário* será retornado ao aplicativo e a TAPI enviará as mensagens [**\_ callstate de linha**](./line-callstate.md) de aplicativo com informações relacionadas ao progresso da chamada.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-115">If the session is set up successfully, a call handle with *owner* [privileges](privilege-ovr.md) is returned to the application and TAPI sends the application [**LINE\_CALLSTATE**](./line-callstate.md) messages with information concerning the call's progress.</span></span> <span data-ttu-id="9bbe0-116">Normalmente, os aplicativos usam essas mensagens para exibir relatórios de status para o usuário.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-116">Applications typically use these messages to display status reports to the user.</span></span>

<span data-ttu-id="9bbe0-117">**TAPI 3. x:** Os aplicativos iniciam uma sessão de comunicações invocando o método [**ITAddress:: createcall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) em um endereço capaz de lidar com o tipo de endereço e o tipo de mídia necessários.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-117">**TAPI 3.x:** Applications initiate a communications session by invoking the [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) method on an address capable of handling the address type and media type required.</span></span> <span data-ttu-id="9bbe0-118">Se o endereço expõe a interface [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) , os terminais são selecionados nos fluxos de mídia do objeto de chamada.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-118">If the address exposes the [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) interface, terminals are selected onto the media streams of the call object.</span></span> <span data-ttu-id="9bbe0-119">Consulte o exemplo [criar um](make-a-call.md) código de chamada para obter uma ilustração desse processo.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-119">See the [Make a Call](make-a-call.md) code example for an illustration of this process.</span></span>

<span data-ttu-id="9bbe0-120">Parâmetros de configuração de chamada podem ser armazenados ou alterados usando métodos expostos pela interface [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) .</span><span class="sxs-lookup"><span data-stu-id="9bbe0-120">Call setup parameters can be stored or changed using methods exposed by the [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface.</span></span>

<span data-ttu-id="9bbe0-121">Se a sessão for configurada com êxito, a TAPI retornará um ponteiro de interface [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) que pode ser usado para operações de sessão adicionais ou para obter um ponteiro de interface [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) que possa ser usado para obter informações de sessão adicional.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-121">If the session is set up successfully, TAPI returns an [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) interface pointer that can be used for further session operations, or to obtain an [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface pointer that can be used to acquire additional session information.</span></span> <span data-ttu-id="9bbe0-122">A interface [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) processa eventos de estado de chamada TAPI.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-122">The [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) interface processes TAPI call state events.</span></span>

> [!Note]  
> <span data-ttu-id="9bbe0-123">A TAPI não deve ser usada para transmissões de fax.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-123">TAPI should not be used for fax transmissions.</span></span> <span data-ttu-id="9bbe0-124">Em vez disso, use as funções disponíveis por MAPI, a API do sistema de mensagens da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-124">Instead, use the functions available through MAPI, the Microsoft Messaging API.</span></span>

 

## <a name="address-translation"></a><span data-ttu-id="9bbe0-125">Conversão de endereço</span><span class="sxs-lookup"><span data-stu-id="9bbe0-125">Address Translation</span></span>

<span data-ttu-id="9bbe0-126">Um aplicativo de usuário final ou de servidor pode armazenar endereços em um formato que não é compatível com as necessidades de um determinado provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-126">An end-user or server application may store addresses in a format that is not compatible with the needs of a given service provider.</span></span> <span data-ttu-id="9bbe0-127">Por exemplo, um número de telefone pode ser armazenado em um catálogo de endereços eletrônicos em [formato canônico](address-ovr.md), mas a maioria dos provedores de serviços que lidam com números de telefone exigem o [formato de discagem](address-ovr.md).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-127">For example, a phone number may be stored in an electronic address book in [canonical format](address-ovr.md), but most service providers that handle phone numbers require the [dialable format](address-ovr.md).</span></span>

<span data-ttu-id="9bbe0-128">A TAPI fornece operações de conversão de endereços que auxiliam um aplicativo na apresentação do tipo de endereço correto para um TSP.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-128">TAPI supplies address translation operations that assist an application in presenting the correct address type to a TSP.</span></span> <span data-ttu-id="9bbe0-129">O provedor de serviços especifica a TAPI a qual tipo de endereço ele dá suporte e não precisa incluir nenhuma forma de conversão de endereço.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-129">The service provider specifies to TAPI which address types it supports, and need not include any form of address translation.</span></span>

<span data-ttu-id="9bbe0-130">**TAPI 2. x:** Consulte [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-130">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span></span>

<span data-ttu-id="9bbe0-131">**TAPI 3:** Consulte [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-131">**TAPI 3:** See [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span></span>

## <a name="toll-lists"></a><span data-ttu-id="9bbe0-132">Listas de chamadas</span><span class="sxs-lookup"><span data-stu-id="9bbe0-132">Toll Lists</span></span>

<span data-ttu-id="9bbe0-133">Em alguns locais no América do Norte, todas as chamadas telefônicas colocadas no código de área local são chamadas locais.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-133">In some locations in North America, all telephone calls placed to the local area code are local calls.</span></span> <span data-ttu-id="9bbe0-134">Em outros locais, algumas chamadas colocadas no código de área local são de longa distância e precisam de um prefixo "1" para serem discados.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-134">In other locations, some calls placed to the local area code are long distance, and need a "1" prefix to be dialed.</span></span> <span data-ttu-id="9bbe0-135">Os três primeiros dígitos do endereço (o prefixo) determinam se uma chamada no código de área local é uma chamada de chamada.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-135">The first three digits of the address (the prefix) determine whether or not a call within the local area code is a toll call.</span></span>

<span data-ttu-id="9bbe0-136">Uma *lista de chamadas* é uma lista de prefixos no código de área local cujos endereços devem ser discados como endereços de longa distância e são avaliados como encargos de longa distância.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-136">A *toll list* is a list of prefixes in the local area code whose addresses must be dialed as long-distance addresses, and are assessed long-distance charges.</span></span>

<span data-ttu-id="9bbe0-137">Listas de chamadas não são relevantes para provedores de serviço ou para aplicativos que não acessam uma rede telefônica.</span><span class="sxs-lookup"><span data-stu-id="9bbe0-137">Toll lists are not relevant to service providers, or to applications that do not access a telephone network.</span></span>

<span data-ttu-id="9bbe0-138">**TAPI 2. x:** Consulte [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT \_ e LINETRANSLATERESULT \_ NOTINTOLLLIST bits na estrutura [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) ), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-138">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT\_INTOLLLIST and LINETRANSLATERESULT\_NOTINTOLLLIST bits in the [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) structure), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span></span>

<span data-ttu-id="9bbe0-139">**TAPI 3:** Consulte [**ITAddressTranslation:: TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo:: get \_ TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span><span class="sxs-lookup"><span data-stu-id="9bbe0-139">**TAPI 3:** See [**ITAddressTranslation::TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo::get\_TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span></span>

 

 
