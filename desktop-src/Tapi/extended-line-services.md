---
description: Serviços de linha estendidos (ou serviços de linha específicos do dispositivo) incluem todas as extensões definidas pelo provedor de serviço para TSPI.
ms.assetid: 23519d23-27bd-422e-b3c4-00e0d0d93f9e
title: Serviços de linha estendida
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dbc1ce08d25633d33fd518d8686271c198ca5034
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105779313"
---
# <a name="extended-line-services"></a><span data-ttu-id="9da05-103">Serviços de linha estendida</span><span class="sxs-lookup"><span data-stu-id="9da05-103">Extended Line Services</span></span>

<span data-ttu-id="9da05-104">Serviços de linha estendidos (ou serviços de linha específicos do dispositivo) incluem todas as extensões definidas pelo provedor de serviço para TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-104">Extended line services (or device-specific line services) include all service-provider defined extensions to TSPI.</span></span> <span data-ttu-id="9da05-105">TSPI define um mecanismo que permite aos fornecedores do provedor de serviços estender o SPI de telefonia usando extensões específicas do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9da05-105">TSPI defines a mechanism that enables service-provider vendors to extend the Telephony SPI using device-specific extensions.</span></span> <span data-ttu-id="9da05-106">TSPI define apenas o mecanismo de extensão e, ao fazer isso, fornece acesso a extensões específicas do dispositivo, mas o TSPI não define seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="9da05-106">TSPI only defines the extension mechanism, and by doing so provides access to device-specific extensions, but TSPI does not define their behavior.</span></span> <span data-ttu-id="9da05-107">O comportamento é completamente definido pelo provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="9da05-107">Behavior is completely defined by the service provider.</span></span>

<span data-ttu-id="9da05-108">O SPI de telefonia consiste em definições de constante escalar e de sinalizador de bits, estruturas de dados, funções e mensagens de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="9da05-108">The Telephony SPI consists of scalar and bit flag constant definitions, data structures, functions, and callback messages.</span></span> <span data-ttu-id="9da05-109">Os procedimentos são definidos para permitir que um fornecedor estenda a maioria deles da seguinte maneira.</span><span class="sxs-lookup"><span data-stu-id="9da05-109">Procedures are defined that enable a vendor to extend most of these as follows.</span></span>

<span data-ttu-id="9da05-110">Para constantes de dados escalares extensíveis, um fornecedor de provedor de serviços pode definir novos valores em um intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="9da05-110">For extensible scalar data constants, a service-provider vendor can define new values in a specified range.</span></span> <span data-ttu-id="9da05-111">Como a maioria das constantes de dados são os s **DWORD**, normalmente, o intervalo 0x00000000 a 0x7FFFFFFF é reservado para extensões futuras comuns, enquanto 0X80000000 a 0xFFFFFFFF está disponível para extensões específicas do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9da05-111">As most data constants are **DWORD** s, typically the range 0x00000000 through 0x7FFFFFFF is reserved for common future extensions, while 0x80000000 through 0xFFFFFFFF are available for vendor-specific extensions.</span></span> <span data-ttu-id="9da05-112">A suposição é que um fornecedor definiria valores que são extensões naturais dos tipos de datatipos definidos por TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-112">The assumption is that a vendor would define values that are natural extensions of the datatypes defined by TSPI.</span></span>

<span data-ttu-id="9da05-113">Para constantes de dados de sinalizador de bit extensível, um fornecedor de provedor de serviço pode definir novos valores para bits especificados.</span><span class="sxs-lookup"><span data-stu-id="9da05-113">For extensible bit flag data constants, a service-provider vendor can define new values for specified bits.</span></span> <span data-ttu-id="9da05-114">Como a maioria das constantes de sinalizador de bit são os s **DWORD**, normalmente um número específico dos bits inferiores é reservado para extensões comuns, enquanto os bits superiores restantes estão disponíveis para extensões específicas do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9da05-114">As most bit flag constants are **DWORD** s, typically a specific number of the lower bits are reserved for common extensions while the remaining upper bits are available for vendor-specific extensions.</span></span> <span data-ttu-id="9da05-115">Os sinalizadores de bits comuns são atribuídos do bit zero para cima; extensões específicas do fornecedor devem ser atribuídas do bit 31 para baixo.</span><span class="sxs-lookup"><span data-stu-id="9da05-115">Common bit flags are assigned from bit zero up; vendor-specific extensions should be assigned from bit 31 down.</span></span> <span data-ttu-id="9da05-116">Isso fornece flexibilidade máxima na atribuição de posições de bits a extensões comuns versus extensões específicas do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9da05-116">This provides maximum flexibility in assigning bit positions to common extensions versus vendor-specific extensions.</span></span> <span data-ttu-id="9da05-117">Um fornecedor deve definir novos valores que são extensões naturais dos sinalizadores de bits definidos por TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-117">A vendor is expected to define new values that are natural extensions of the bit flags defined by TSPI.</span></span>

<span data-ttu-id="9da05-118">Estruturas de dados extensíveis têm um campo de tamanho de variavelmente reservado para uso específico do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9da05-118">Extensible data structures have a variably sized field that is reserved for device-specific use.</span></span> <span data-ttu-id="9da05-119">Sendo de tamanhos variados, o provedor de serviços decide a quantidade de informações e a interpretação.</span><span class="sxs-lookup"><span data-stu-id="9da05-119">Being variably sized, the service provider decides the amount of information and the interpretation.</span></span> <span data-ttu-id="9da05-120">Um fornecedor que define um campo específico do dispositivo deve fazer essas extensões naturais da estrutura de dados original definida por TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-120">A vendor that defines a device-specific field is expected to make these natural extensions of the original data structure defined by TSPI.</span></span>

<span data-ttu-id="9da05-121">Duas funções, [**TSPI \_ LineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) e [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature)e quatro mensagens relacionadas, [**line \_ DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**line \_ CALLDEVSPECIFIC**](line-calldevspecific.md), line [**\_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85))e [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), oferecem um mecanismo de extensão específico do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9da05-121">Two functions, [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) and [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature), and four related messages, [**LINE\_DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**LINE\_CALLDEVSPECIFIC**](line-calldevspecific.md), [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)), and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), offer a vendor-specific extension mechanism.</span></span> <span data-ttu-id="9da05-122">A operação **TSPI \_ lineDevSpecific** e \_ as mensagens DEVSPECIFIC de linha associadas e CALLDEVSPECIFIC de linha \_ permitem que o aplicativo cliente do Tapi32.dll acesse a linha específica do dispositivo, o endereço ou os recursos de chamada que não estão disponíveis nos serviços de telefonia básicos ou complementares.</span><span class="sxs-lookup"><span data-stu-id="9da05-122">The **TSPI\_lineDevSpecific** operation and associated LINE\_DEVSPECIFIC and LINE\_CALLDEVSPECIFIC messages allow the Tapi32.dll client application to access device-specific line, address, or call features that are unavailable in the Basic or Supplementary Telephony services.</span></span> <span data-ttu-id="9da05-123">O perfil de parâmetro da função [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) é genérico, pois a pequena interpretação dos parâmetros é feita pelo TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-123">The parameter profile of the [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) function is generic in that little interpretation of the parameters is made by TSPI.</span></span> <span data-ttu-id="9da05-124">Os parâmetros de identificador de dispositivo têm significados definidos pelo TSPI e são convertidos adequadamente entre o aplicativo e o provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="9da05-124">Device-handle parameters have TSPI-defined meanings and are translated appropriately between the application and the service provider.</span></span> <span data-ttu-id="9da05-125">Os parâmetros genéricos são simplesmente passados por meio de não modificado.</span><span class="sxs-lookup"><span data-stu-id="9da05-125">Generic parameters are simply passed through unmodified.</span></span> <span data-ttu-id="9da05-126">A interpretação dos parâmetros genéricos é definida pelo provedor de serviços e deve ser compreendida por qualquer aplicativo que os utilize.</span><span class="sxs-lookup"><span data-stu-id="9da05-126">The interpretation of the generic parameters is defined by the service provider and must be understood by any applications that use them.</span></span> <span data-ttu-id="9da05-127">Um aplicativo que se baseia em extensões específicas do dispositivo geralmente não funciona com outros provedores de serviço.</span><span class="sxs-lookup"><span data-stu-id="9da05-127">An application that relies on device-specific extensions generally does not work with other service providers.</span></span> <span data-ttu-id="9da05-128">No entanto, os aplicativos escritos inteiramente nos serviços de telefonia básicos e complementares devem funcionar com o provedor de serviços estendido.</span><span class="sxs-lookup"><span data-stu-id="9da05-128">However, applications written entirely to the Basic and Supplementary Telephony services should work with the extended service provider.</span></span>

<span data-ttu-id="9da05-129">A implementação de TAPI das funções e mensagens específicas do dispositivo é "passagem".</span><span class="sxs-lookup"><span data-stu-id="9da05-129">The TAPI implementation of the device-specific functions and messages is "pass-through."</span></span> <span data-ttu-id="9da05-130">A TAPI não examina nem modifica os parâmetros e buffers específicos de dispositivos genéricos, mas mapeia valores de identificador opaco no nível de aplicativo (usados no nível de TAPI) para valores de identificador opaco de nível de provedor de serviço (usados no nível de TSPI).</span><span class="sxs-lookup"><span data-stu-id="9da05-130">TAPI does not examine or modify the generic device-specific parameters and buffers, but it does map application-level opaque handle values (used at the TAPI level) to service-provider-level opaque handle values (used at the TSPI level).</span></span>

<span data-ttu-id="9da05-131">Em relação à conversão de identificadores, a natureza de passagem das partes genéricas das extensões específicas do dispositivo tem uma consequência importante.</span><span class="sxs-lookup"><span data-stu-id="9da05-131">Regarding handle translation, the passthrough nature of the generic parts of device-specific extensions has an important consequence.</span></span> <span data-ttu-id="9da05-132">Um provedor de serviços não tem como relacionar os identificadores usados no nível de TSPI para aqueles no nível de TAPI, exceto passando-os pelos parâmetros e campos de identificador predefinidos.</span><span class="sxs-lookup"><span data-stu-id="9da05-132">A service provider has no way to relate the handles used at the TSPI level to those at the TAPI level except by passing them through the predefined handle parameters and fields.</span></span> <span data-ttu-id="9da05-133">Qualquer identificador colocado na área de extensão genérica é não traduzido pela TAPI conforme é passado entre o aplicativo e o provedor de serviços.</span><span class="sxs-lookup"><span data-stu-id="9da05-133">Any handle put into the generic extension area is untranslated by TAPI as it is passed between application and service provider.</span></span> <span data-ttu-id="9da05-134">O designer de uma extensão de provedor de serviço geralmente não deve definir extensões que passem identificadores dessa maneira.</span><span class="sxs-lookup"><span data-stu-id="9da05-134">The designer of a service-provider extension should generally not define extensions that pass handles in this way.</span></span>

<span data-ttu-id="9da05-135">A abordagem apropriada ao definir uma extensão específica do dispositivo que deve se referir a dispositivos específicos sem usar identificadores é fazer referência a eles usando sua identificação de dispositivo absoluta.</span><span class="sxs-lookup"><span data-stu-id="9da05-135">The appropriate approach when defining a device-specific extension that must refer to specific devices without using handles is to refer to them using their absolute device identification.</span></span> <span data-ttu-id="9da05-136">O identificador de dispositivo usado na abertura de uma linha no nível de TAPI, por exemplo, é estritamente o mesmo valor que é usado no nível de TSPI para abrir a linha.</span><span class="sxs-lookup"><span data-stu-id="9da05-136">The device identifier used in opening a line at the TAPI level, for example, is strictly the same value that is used at the TSPI level to open the line.</span></span> <span data-ttu-id="9da05-137">Da mesma forma, uma tupla (identificador de dispositivo de linha, identificador de endereço) que identifica exclusivamente um endereço no nível de TAPI usa os mesmos valores para identificar a mesma coisa no nível de TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-137">Similarly, a (line device identifier, address identifier) tuple that uniquely identifies an address at the TAPI level uses the same values to identify the same thing at the TSPI level.</span></span>

<span data-ttu-id="9da05-138">Para sua conveniência, uma função de escape mais especializada também é fornecida.</span><span class="sxs-lookup"><span data-stu-id="9da05-138">For convenience, a more specialized escape function is also provided.</span></span> <span data-ttu-id="9da05-139">É semelhante a [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), mas coloca a interpretação em alguns dos parâmetros.</span><span class="sxs-lookup"><span data-stu-id="9da05-139">It is similar to [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), but places interpretation on some of the parameters.</span></span> <span data-ttu-id="9da05-140">A função [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) e as mensagens [**\_ DEVSPECIFICFEATURE de linha**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) associadas e [**\_ CALLDEVSPECIFICFEATURE de linha**](line-calldevspecificfeature.md) permitem que a TAPI eMule os pressionamentos de botão no telefone de recurso da linha.</span><span class="sxs-lookup"><span data-stu-id="9da05-140">The [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function and associated [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) messages allow TAPI to emulate button presses at the line's feature phone.</span></span> <span data-ttu-id="9da05-141">Como os telefones de recursos e os significados de seus botões são específicos do fornecedor, a invocação de recursos usando **TSPI \_ lineDevSpecificFeature** também é específica do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9da05-141">As feature phones and the meanings of their buttons are vendor-specific, feature invocation using **TSPI\_lineDevSpecificFeature** is also vendor specific.</span></span>

<span data-ttu-id="9da05-142">Para resumir, a função [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) é uma função de escape específica do dispositivo para permitir o envio de recursos do comutador para o comutador.</span><span class="sxs-lookup"><span data-stu-id="9da05-142">To summarize, the [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function is a device-specific escape function to allow sending switch features to the switch.</span></span> <span data-ttu-id="9da05-143">A [**linha \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) Message é uma mensagem específica do dispositivo enviada para o retorno de chamada do aplicativo como uma indicação de recursos relacionados à chamada enviados ao comutador.</span><span class="sxs-lookup"><span data-stu-id="9da05-143">The [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) message is a device-specific message sent to the application's callback as an indication of call-related features sent to the switch.</span></span> <span data-ttu-id="9da05-144">[**Linha \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) é uma mensagem específica do dispositivo enviada para o retorno de chamada do aplicativo como uma indicação de recursos relacionados à linha enviados para o comutador.</span><span class="sxs-lookup"><span data-stu-id="9da05-144">[**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) is a device-specific message sent to the application's callback as an indication of line-related features sent to the switch.</span></span>

<span data-ttu-id="9da05-145">Não há registro central para identificadores de fabricantes.</span><span class="sxs-lookup"><span data-stu-id="9da05-145">There is no central registry for manufacturer identifiers.</span></span> <span data-ttu-id="9da05-146">Em vez disso, um gerador de identificador exclusivo chamado Extidgen.exe é disponibilizado como parte do TSPI.</span><span class="sxs-lookup"><span data-stu-id="9da05-146">Instead a unique identifier generator called Extidgen.exe is made available as part of TSPI.</span></span> <span data-ttu-id="9da05-147">O fornecedor que projeta um conjunto de extensões específicas do dispositivo usa esse utilitário para obter um identificador exclusivo para essas extensões.</span><span class="sxs-lookup"><span data-stu-id="9da05-147">The vendor that designs a set of device-specific extensions uses this utility to obtain a unique identifier for those extensions.</span></span>

 

 
