---
description: Para que um aplicativo use qualquer uma das TAPIs 30 funções de telefone suplementares, ele precisa de uma conexão com a TAPI, por meio da qual ele pode receber mensagens.
ms.assetid: c0211f64-4f73-4348-ae49-9a898d3aa093
title: Inicialização e desligamento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6831b8cfda84ac564450caec554191198fd4c21f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105778406"
---
# <a name="initialization-and-shutdown"></a><span data-ttu-id="ea8e2-103">Inicialização e desligamento</span><span class="sxs-lookup"><span data-stu-id="ea8e2-103">Initialization and Shutdown</span></span>

<span data-ttu-id="ea8e2-104">Para que um aplicativo use qualquer uma das 30 funções de telefone complementares da TAPI, ele precisa de uma conexão com a TAPI, por meio da qual ele pode receber mensagens.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-104">For an application to use any of TAPI's 30 supplementary phone functions, it needs a connection to TAPI, through which it can receive messages.</span></span> <span data-ttu-id="ea8e2-105">O aplicativo estabelece essa conexão usando a função [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) .</span><span class="sxs-lookup"><span data-stu-id="ea8e2-105">The application establishes this connection using the [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function.</span></span> <span data-ttu-id="ea8e2-106">Nessa função, o aplicativo especifica o mecanismo de notificação pelo qual a TAPI informa a aplicação das alterações no estado do telefone e da conclusão assíncrona de funções de telefone.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-106">In this function, the application specifies the notification mechanism by which TAPI informs the application of changes in the state of the phone and of asynchronous completion of phone functions.</span></span>

<span data-ttu-id="ea8e2-107">A função [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) retorna duas partes de informações para o aplicativo: um *identificador de aplicativo* e o número de dispositivos de telefone.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-107">The [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function returns two pieces of information to the application: an *application handle*, and the number of phone devices.</span></span> <span data-ttu-id="ea8e2-108">O identificador do aplicativo representa o uso do aplicativo TAPI.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-108">The application handle represents the application's usage of TAPI.</span></span> <span data-ttu-id="ea8e2-109">As funções TAPI que usam identificadores de telefone não exigem o identificador do aplicativo, pois esse identificador é derivado do identificador de telefone especificado.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-109">The TAPI functions that use phone handles do not require the application handle, as this handle is derived from the specified phone handle.</span></span>

<span data-ttu-id="ea8e2-110">A segunda informação retornada por [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) é o número de dispositivos de telefone disponíveis para a TAPI.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-110">The second piece of information returned by [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) is the number of phone devices available to TAPI.</span></span> <span data-ttu-id="ea8e2-111">Os dispositivos de telefone são identificados pelo respectivo identificador de dispositivo (*ID do dispositivo*).</span><span class="sxs-lookup"><span data-stu-id="ea8e2-111">Phone devices are identified by their device identifier (*device ID*).</span></span> <span data-ttu-id="ea8e2-112">Os identificadores de dispositivo válidos variam de zero até o número de dispositivos de telefone menos um.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-112">Valid device identifiers range from zero to the number of phone devices minus one.</span></span> <span data-ttu-id="ea8e2-113">Por exemplo, se **phoneInitializeEx** relata que há dois dispositivos telefônicos em um sistema, os identificadores de dispositivo de telefone válidos são 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-113">For example, if **phoneInitializeEx** reports that there are two phone devices in a system, then valid phone device identifiers are 0 and 1.</span></span> <span data-ttu-id="ea8e2-114">Depois que um aplicativo é concluído usando as funções de telefone da TAPI, ele invoca o [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passando seu identificador de aplicativo para desligar o uso da TAPI.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-114">After an application is finished using the phone functions of TAPI, it invokes [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passing its application handle to shut down its usage of TAPI.</span></span> <span data-ttu-id="ea8e2-115">Isso permite que a TAPI libere todos os recursos atribuídos ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-115">This allows TAPI to free any resources assigned to the application.</span></span>

<span data-ttu-id="ea8e2-116">Os aplicativos não devem invocar [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) sem abrir um telefone subsequentemente (pelo menos para monitoramento).</span><span class="sxs-lookup"><span data-stu-id="ea8e2-116">Applications should not invoke [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) without subsequently opening a phone (at least for monitoring).</span></span> <span data-ttu-id="ea8e2-117">Se o aplicativo não estiver monitorando e não estiver usando nenhum dispositivo, ele deverá chamar [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) para que os recursos de memória alocados pela biblioteca de vínculo dinâmico TAPI possam ser liberados, se desnecessário, e a própria biblioteca possa ser descarregada da memória, embora não seja necessário.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-117">If the application is not monitoring and not using any devices, it should call [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) so that memory resources allocated by the TAPI dynamic-link library can be released if unneeded, and the library itself can be unloaded from memory while not needed.</span></span>

<span data-ttu-id="ea8e2-118">[**PhoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) e [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) operam de forma síncrona.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-118">Both [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) and [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) operate synchronously.</span></span> <span data-ttu-id="ea8e2-119">Ou seja, essas funções retornam uma indicação de êxito ou falha e nunca retornam um identificador de solicitação assíncrono.</span><span class="sxs-lookup"><span data-stu-id="ea8e2-119">That is, these functions either return a success or failure indication, and never return an asynchronous request identifier.</span></span>

 

 



