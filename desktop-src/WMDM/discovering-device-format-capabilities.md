---
title: Descobrindo recursos de formato de dispositivo
description: Descobrindo recursos de formato de dispositivo
ms.assetid: dd139816-dc8c-4e73-9a21-67287bfe6405
keywords:
- Windows Media Gerenciador de Dispositivos, recursos do dispositivo
- Gerenciador de Dispositivos, recursos do dispositivo
- Guia de programação, recursos do dispositivo
- aplicativos de desktop, recursos de dispositivo
- Criando aplicativos de Gerenciador de Dispositivos de mídia do Windows, recursos do dispositivo
- gravando arquivos em dispositivos, recursos do dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c0ee05476f6b84bc85bb81cc7cff5815649f5842
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105763394"
---
# <a name="discovering-device-format-capabilities"></a><span data-ttu-id="782d2-109">Descobrindo recursos de formato de dispositivo</span><span class="sxs-lookup"><span data-stu-id="782d2-109">Discovering Device Format Capabilities</span></span>

<span data-ttu-id="782d2-110">Seu aplicativo pode tentar determinar os recursos de reprodução de um dispositivo antes de enviar um arquivo para ele.</span><span class="sxs-lookup"><span data-stu-id="782d2-110">Your application might try to determine a device's playback capabilities before sending a file to it.</span></span> <span data-ttu-id="782d2-111">Se um dispositivo não puder manipular o formato de um arquivo que você deseja enviar, seu aplicativo poderá tentar transcodificar o arquivo em um formato que o dispositivo possa usar ou notificar o usuário de que o dispositivo não pode dar suporte ao arquivo solicitado.</span><span class="sxs-lookup"><span data-stu-id="782d2-111">If a device cannot handle the format of a file you want to send, your application might attempt to transcode the file into a format that the device can use, or notify the user that the device cannot support the requested file.</span></span>

<span data-ttu-id="782d2-112">Observe que alguns dispositivos, como dispositivos de classe de armazenamento em massa, podem servir apenas como mídia de armazenamento removível sem recursos de reprodução.</span><span class="sxs-lookup"><span data-stu-id="782d2-112">Note that some devices, such as mass storage class devices, might serve only as removable storage media without playback capabilities.</span></span> <span data-ttu-id="782d2-113">Nesse caso, seria inapropriado que seu aplicativo transcodifique um arquivo antes de enviá-lo para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="782d2-113">In this case, it would be inappropriate for your application to transcode a file before sending it to the device.</span></span>

<span data-ttu-id="782d2-114">Embora o método [**IWMDMDevice:: GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) permita que um dispositivo relate seus recursos, alguns dispositivos retornam valores incorretos para esse método.</span><span class="sxs-lookup"><span data-stu-id="782d2-114">Although the [**IWMDMDevice::GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) method enables a device to report its capabilities, some devices return incorrect values for this method.</span></span> <span data-ttu-id="782d2-115">Antes de copiar um arquivo para um dispositivo, talvez você queira perguntar ao usuário se a reprodução é pretendida e, nesse caso, tentar transcodificar o arquivo para um dos formatos relatados do dispositivo (ou um formato razoável, se o dispositivo solicitar suporte para qualquer formato).</span><span class="sxs-lookup"><span data-stu-id="782d2-115">Before copying a file to a device, you might want to ask the user whether playback is intended, and if so, attempt to transcode the file to one of the device's reported formats (or a reasonable format, if the device claims support for any format).</span></span> <span data-ttu-id="782d2-116">Outra abordagem é assumir que todos os formatos listados especificamente como com suporte pelo dispositivo são destinados à reprodução, e todos os outros arquivos devem ser transferidos sem modificações.</span><span class="sxs-lookup"><span data-stu-id="782d2-116">Another approach is to assume that any formats specifically listed as supported by the device are intended for playback, and all other files should be transferred unmodified.</span></span>

<span data-ttu-id="782d2-117">Depois de descobrir o formato do arquivo a ser transferido e os formatos com suporte de um dispositivo, você pode decidir qual é o melhor formato de destino para transcodificação.</span><span class="sxs-lookup"><span data-stu-id="782d2-117">After discovering the format of the file to be transferred, and the formats supported by a device, you can decide which is the best target format for transcoding.</span></span>

<span data-ttu-id="782d2-118">No passado, era comum que um aplicativo retornasse zero para uma propriedade para indicar o suporte para qualquer valor dessa propriedade.</span><span class="sxs-lookup"><span data-stu-id="782d2-118">In the past, it was common for an application to return zero for a property to indicate support for any values of that property.</span></span> <span data-ttu-id="782d2-119">Por exemplo, um valor de zero para [**\_ WAVEFORMATEX**](-waveformatex.md). nSamplesPerSec indicaria suporte para qualquer taxa de bits.</span><span class="sxs-lookup"><span data-stu-id="782d2-119">For example, a value of zero for [**\_WAVEFORMATEX**](-waveformatex.md).nSamplesPerSec would indicate support for any bit rate.</span></span> <span data-ttu-id="782d2-120">Agora, a maneira recomendada para indicar o suporte para qualquer valor é especificar os \_ valores válidos de prop Enumeração SqlEnum \_ \_ \_ \_ any em [**WMDM \_ prop \_ desc**](wmdm-prop-desc.md). ValidValuesForm.</span><span class="sxs-lookup"><span data-stu-id="782d2-120">Now, the recommended way to indicate support for any value is to specify WMDM\_ENUM\_PROP\_VALID\_VALUES\_ANY in [**WMDM\_PROP\_DESC**](wmdm-prop-desc.md).ValidValuesForm.</span></span> <span data-ttu-id="782d2-121">Algumas propriedades, porém, podem retornar legitimamente zero para indicar suporte específico.</span><span class="sxs-lookup"><span data-stu-id="782d2-121">Some properties, though, can legitimately return zero to indicate specific support.</span></span> <span data-ttu-id="782d2-122">Por exemplo, se [**\_ BITMAPINFOHEADER**](-bitmapinfoheader.md). biSizeImage for definido como zero, isso indicará um \_ bitmap RGB de BI.</span><span class="sxs-lookup"><span data-stu-id="782d2-122">For example, if [**\_BITMAPINFOHEADER**](-bitmapinfoheader.md).biSizeImage is set to zero, this indicates a BI\_RGB bitmap.</span></span> <span data-ttu-id="782d2-123">As exceções para valores zero são indicadas na documentação para as estruturas relevantes.</span><span class="sxs-lookup"><span data-stu-id="782d2-123">Exceptions for zero values are noted in the documentation for the relevant structures.</span></span>

<span data-ttu-id="782d2-124">No entanto, é importante observar que os dispositivos geralmente não relatam seus recursos de formato corretamente ou de forma padrão.</span><span class="sxs-lookup"><span data-stu-id="782d2-124">However, it is important to note that devices often do not report their format capabilities properly, or in a standard way.</span></span> <span data-ttu-id="782d2-125">Por exemplo, os dispositivos geralmente relatam que oferecem suporte a qualquer formato, quando, na verdade, eles só podem manipular formatos específicos ou taxas de bits específicas em um tipo de formato.</span><span class="sxs-lookup"><span data-stu-id="782d2-125">For example, devices often report that they support any format, when in fact they can only handle specific formats, or specific bit rates within a format type.</span></span> <span data-ttu-id="782d2-126">Cabe a você decidir se seu aplicativo deve aceitar esses relatórios ou se deve assumir algum tipo de limite superior para as capacidades de reprodução de um dispositivo (por exemplo, 192 kbps).</span><span class="sxs-lookup"><span data-stu-id="782d2-126">It is up to you to decide whether your application should accept such reports, or whether it should assume some kind of upper limit to a device's playback abilities (for example, 192 kbps).</span></span>

<span data-ttu-id="782d2-127">O método recomendado para solicitar o suporte ao formato de um dispositivo é [**IWMDMDevice3:: GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span><span class="sxs-lookup"><span data-stu-id="782d2-127">The recommended method for requesting a device's format support is [**IWMDMDevice3::GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span></span> <span data-ttu-id="782d2-128">Se esse método não tiver suporte, seu aplicativo deverá fazer fallback em [**IWMDMDevice:: GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span><span class="sxs-lookup"><span data-stu-id="782d2-128">If this method is not supported, your application should fall back on [**IWMDMDevice::GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span></span> <span data-ttu-id="782d2-129">**GetFormatSupport**, ao contrário de **GetFormatSupport2**, não retorna informações de vídeo.</span><span class="sxs-lookup"><span data-stu-id="782d2-129">**GetFormatSupport**, unlike **GetFormatSupport2**, does not return video information.</span></span>

<span data-ttu-id="782d2-130">Como um aplicativo solicita os recursos de formato de um dispositivo depende de qual interface o aplicativo dá suporte.</span><span class="sxs-lookup"><span data-stu-id="782d2-130">How an application requests a device's format capabilities depends on which interface the application supports.</span></span> <span data-ttu-id="782d2-131">Para obter mais detalhes, consulte os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="782d2-131">For more details, see the following topics:</span></span>

-   [<span data-ttu-id="782d2-132">Obtendo recursos de formato em dispositivos que dão suporte a IWMDMDevice3</span><span class="sxs-lookup"><span data-stu-id="782d2-132">Getting Format Capabilities on Devices That Support IWMDMDevice3</span></span>](getting-format-capabilities-on-devices-that-support-iwmdmdevice3.md)
-   [<span data-ttu-id="782d2-133">Obtendo recursos de formato em dispositivos que dão suporte apenas a IWMDMDevice</span><span class="sxs-lookup"><span data-stu-id="782d2-133">Getting Format Capabilities on Devices That Support Only IWMDMDevice</span></span>](getting-format-capabilities-on-devices-that-support-only-iwmdmdevice.md)

## <a name="related-topics"></a><span data-ttu-id="782d2-134">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="782d2-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="782d2-135">**Gravando arquivos no dispositivo**</span><span class="sxs-lookup"><span data-stu-id="782d2-135">**Writing Files to the Device**</span></span>](writing-files-to-the-device.md)
</dt> </dl>

 

 




