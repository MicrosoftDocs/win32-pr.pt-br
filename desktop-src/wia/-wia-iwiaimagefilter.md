---
description: A interface IWiaImageFilter é uma interface de extensão implementada por desenvolvedores de filtro de processamento de imagens e chamada pelo WIA (Windows Image Acquisition) 2,0.
ms.assetid: 2abe913b-bb2b-486d-a3f4-d5932433fc82
title: Interface IWiaImageFilter (WIA. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- IWiaImageFilter
api_type:
- COM
api_location:
- Wia.h
ms.openlocfilehash: 8d859b79d15db627bb09cb60f758791a8b5860f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828450"
---
# <a name="iwiaimagefilter-interface"></a><span data-ttu-id="8c9f2-103">Interface IWiaImageFilter</span><span class="sxs-lookup"><span data-stu-id="8c9f2-103">IWiaImageFilter interface</span></span>

<span data-ttu-id="8c9f2-104">A interface **IWiaImageFilter** é uma interface de extensão implementada por desenvolvedores de filtro de processamento de imagens e chamada pelo WIA (Windows Image Acquisition) 2,0.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-104">The **IWiaImageFilter** interface is an extension interface implemented by image processing filter developers and called by Windows Image Acquisition (WIA) 2.0.</span></span>

## <a name="members"></a><span data-ttu-id="8c9f2-105">Membros</span><span class="sxs-lookup"><span data-stu-id="8c9f2-105">Members</span></span>

<span data-ttu-id="8c9f2-106">A interface **IWiaImageFilter** herda da interface [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="8c9f2-106">The **IWiaImageFilter** interface inherits from the [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface.</span></span> <span data-ttu-id="8c9f2-107">**IWiaImageFilter** também tem estes tipos de membros:</span><span class="sxs-lookup"><span data-stu-id="8c9f2-107">**IWiaImageFilter** also has these types of members:</span></span>

-   [<span data-ttu-id="8c9f2-108">Métodos</span><span class="sxs-lookup"><span data-stu-id="8c9f2-108">Methods</span></span>](#methods)

### <a name="methods"></a><span data-ttu-id="8c9f2-109">Métodos</span><span class="sxs-lookup"><span data-stu-id="8c9f2-109">Methods</span></span>

<span data-ttu-id="8c9f2-110">A interface **IWiaImageFilter** tem esses métodos.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-110">The **IWiaImageFilter** interface has these methods.</span></span>



| <span data-ttu-id="8c9f2-111">Método</span><span class="sxs-lookup"><span data-stu-id="8c9f2-111">Method</span></span>                                                                | <span data-ttu-id="8c9f2-112">Descrição</span><span class="sxs-lookup"><span data-stu-id="8c9f2-112">Description</span></span>                                                                                             |
|:----------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8c9f2-113">**Aplicarproperties**</span><span class="sxs-lookup"><span data-stu-id="8c9f2-113">**ApplyProperties**</span></span>](-wia-iwiaimagefilter-applyproperties.md)       | <span data-ttu-id="8c9f2-114">Permite que o filtro de processamento de imagens grave Propriedades de volta para o driver (e dispositivo).</span><span class="sxs-lookup"><span data-stu-id="8c9f2-114">Enables the image processing filter to write properties back to the driver (and device).</span></span><br/>     |
| [<span data-ttu-id="8c9f2-115">**FilterPreviewImage**</span><span class="sxs-lookup"><span data-stu-id="8c9f2-115">**FilterPreviewImage**</span></span>](-wia-iwiaimagefilter-filterpreviewimage.md) | <span data-ttu-id="8c9f2-116">Filtra a imagem de visualização.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-116">Filters the preview image.</span></span><br/>                                                                   |
| [<span data-ttu-id="8c9f2-117">**InitializeFilter**</span><span class="sxs-lookup"><span data-stu-id="8c9f2-117">**InitializeFilter**</span></span>](-wia-iwiaimagefilter-initializefilter.md)     | <span data-ttu-id="8c9f2-118">Inicializa o filtro.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-118">Initializes the filter.</span></span> <span data-ttu-id="8c9f2-119">Chamado pelo WIA 2,0 antes de cada download de imagem.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-119">Called by WIA 2.0 before each image download.</span></span> <br/>                       |
| [<span data-ttu-id="8c9f2-120">**SetNewCallback**</span><span class="sxs-lookup"><span data-stu-id="8c9f2-120">**SetNewCallback**</span></span>](-wia-iwiaimagefilter-setnewcallback.md)         | <span data-ttu-id="8c9f2-121">Define um novo retorno de chamada de aplicativo para o filtro de processamento de imagem a ser usado para chamadas de encaminhamento.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-121">Sets a new application callback for the image processing filter to use for forwarding calls.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="8c9f2-122">Comentários</span><span class="sxs-lookup"><span data-stu-id="8c9f2-122">Remarks</span></span>

<span data-ttu-id="8c9f2-123">Os desenvolvedores de filtro de processamento de imagens devem implementar essa interface e a interface [**IWiaTransferCallback**](-wia-iwiatransfercallback.md) .</span><span class="sxs-lookup"><span data-stu-id="8c9f2-123">Image processing filter developers should implement this interface and the [**IWiaTransferCallback**](-wia-iwiatransfercallback.md) interface.</span></span>

<span data-ttu-id="8c9f2-124">WIA 2,0 chama métodos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-124">WIA 2.0 calls filter methods.</span></span> <span data-ttu-id="8c9f2-125">Eles nunca são chamados diretamente de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-125">They are never called directly from an application.</span></span>

<span data-ttu-id="8c9f2-126">A Microsoft fornece o componente de visualização do WIA 2,0, que armazena em cache a imagem de visualização original e não filtrada que é adquirida do verificador.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-126">Microsoft supplies the WIA 2.0 Preview Component, which caches the original, unfiltered preview image that is acquired from the scanner.</span></span> <span data-ttu-id="8c9f2-127">Um aplicativo usa [CoCreateInstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) para criar uma instância do componente de visualização do WIA 2,0 (CLSID \_ WiaPreview), que carrega o filtro usando [**IWiaItem2:: GetExtension**](-wia-iwiaitem2-getextension.md).</span><span class="sxs-lookup"><span data-stu-id="8c9f2-127">An application uses [CoCreateInstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) to co-create an instance of the WIA 2.0 Preview Component (CLSID\_WiaPreview), which loads the filter using [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md).</span></span> <span data-ttu-id="8c9f2-128">O filtro é chamado automaticamente quando o aplicativo chama [**IWiaTransfer::D aixar**](-wia-iwiatransfer-download.md).</span><span class="sxs-lookup"><span data-stu-id="8c9f2-128">The filter is called automatically when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="8c9f2-129">O filtro de processamento de imagens sempre é executado quando uma imagem é verificada.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-129">The image processing filter is always executed when an image is scanned.</span></span> <span data-ttu-id="8c9f2-130">Um aplicativo não pode adquirir uma imagem do scanner sem ter o filtro de geração de imagens aplicado primeiro.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-130">An application cannot acquire an image from the scanner without having the imaging filter applied first.</span></span>

<span data-ttu-id="8c9f2-131">Um filtro deve implementar o brilho e o contraste no mínimo.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-131">A filter must implement brightness and contrast at a minimum.</span></span> <span data-ttu-id="8c9f2-132">A interface de usuário comum, que fornece controles de brilho e contraste para o usuário, pode exibir visualizações precisas para o usuário.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-132">The common UI, which provides brightness and contrast controls to the user, can display accurate previews to the user.</span></span>

<span data-ttu-id="8c9f2-133">Um filtro de processamento de imagem nunca deve modificar o membro *lMessage* da estrutura [**WiaTransferParams**](-wia-wiatransferparams.md) .</span><span class="sxs-lookup"><span data-stu-id="8c9f2-133">An image processing filter should never modify the *lMessage* member of the [**WiaTransferParams**](-wia-wiatransferparams.md) structure.</span></span>

<span data-ttu-id="8c9f2-134">Para ler as propriedades necessárias, o filtro de processamento de imagem deve chamar [**IWiaPropertyStorage:: GetPropertyStream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) na interface [**IWiaPropertyStorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) obtida do item chamando [IWiaImageFilter:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="8c9f2-134">To read the required properties the image processing filter should call [**IWiaPropertyStorage::GetPropertyStream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) on the [**IWiaPropertyStorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) interface that it gets from the item by calling [IWiaImageFilter::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span> <span data-ttu-id="8c9f2-135">Em seguida, o filtro pode instanciar uma instância de [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) nesse fluxo para ler as propriedades de itens.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-135">The filter can then instantiate an [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) instance on this stream to read the items properties.</span></span> <span data-ttu-id="8c9f2-136">O filtro de processamento de imagem não deve chamar [IWiaPropertyStorage:: ReadMultiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) diretamente porque esse método chama o driver `drvReadItemProperties` , mas o serviço WIA 2,0 já bloqueou o driver na `drvAcquireItemData` chamada para que essa chamada se limite e falhe.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-136">The image processing filter should not call [IWiaPropertyStorage::ReadMultiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) directly because this method calls into the driver's `drvReadItemProperties`, but the WIA 2.0 service has already locked the driver in the `drvAcquireItemData` call so this call will timeout and fail.</span></span>

<span data-ttu-id="8c9f2-137">As propriedades das quais o filtro está interessado podem, por exemplo, ser as configurações de brilho e contraste.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-137">The properties that the filter is interested in could for example be the brightness and contrast settings.</span></span> <span data-ttu-id="8c9f2-138">Normalmente, o filtro também precisa ler o formato da imagem, bem como a propriedade Preview, a [**\_ \_ visualização do DPS do WIA**](-wia-wiaitempropscannerdevice.md), de *pWiaItem2*.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-138">The filter typically also needs to read the image format as well as the preview property, [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md), from *pWiaItem2*.</span></span> <span data-ttu-id="8c9f2-139">Essas propriedades são todas usadas no processo de filtragem.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-139">These properties are all used in the filtering process.</span></span>

<span data-ttu-id="8c9f2-140">Os componentes WIA 2,0 sempre gravam dados não filtrados no filtro de processamento de imagens.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-140">The WIA 2.0 components always writes unfiltered data into the image processing filter.</span></span> <span data-ttu-id="8c9f2-141">O algoritmo de processamento de imagem implementado pelo fluxo do filtro pode filtrar os dados mais de uma vez e não precisa se preocupar em produzir os mesmos resultados que filtrar os dados uma vez.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-141">The image processing algorithm implemented by the filter's stream can filter the data more than once and does not have to be concerned with producing the same results as filtering the data once.</span></span>

<span data-ttu-id="8c9f2-142">O filtro deve prestar atenção à propriedade [**de \_ \_ visualização do DPS do WIA**](-wia-wiaitempropscannerdevice.md) , especialmente se algumas tarefas relacionadas ao filtro forem tratadas no hardware.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-142">The filter must pay attention to the [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md) property, especially if some filter related tasks are handled in hardware.</span></span> <span data-ttu-id="8c9f2-143">Por exemplo, um determinado driver pode alterar o brilho da lâmpada no hardware do scanner, dependendo de como o aplicativo tiver definido o brilho em um item WIA 2,0.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-143">For example, a certain driver can change the brightness of the lamp in the scanner hardware depending on how the application has set the brightness into a WIA 2.0 item.</span></span> <span data-ttu-id="8c9f2-144">Durante a verificação final (quando o aplicativo chama [**IWiaTransfer::D aixar**](-wia-iwiatransfer-download.md)), o driver normalmente modificaria a lâmpada física do scanner.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-144">During the final scan (when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md)) the driver would typically modify the physical lamp of the scanner.</span></span> <span data-ttu-id="8c9f2-145">Nesse caso, o filtro de processamento de imagem pode não ter que executar nenhum processamento de brilho.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-145">In this case the image processing filter may not have to perform any brightness processing at all.</span></span> <span data-ttu-id="8c9f2-146">Durante uma verificação de visualização, no entanto, o driver não deve modificar o brilho da lâmpada — em vez disso, isso deve ser resolvido apenas no filtro de processamento de imagem.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-146">During a preview scan, however, the driver should not modify the brightness of the lamp—instead this should be taken care of solely in the image processing filter.</span></span> <span data-ttu-id="8c9f2-147">É importante que o componente de visualização do WIA 2,0 e o filtro de processamento de imagens retornem imagens precisas com base nas propriedades definidas no item.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-147">It is important that the WIA 2.0 Preview Component and the image processing filter return accurate images based on the properties set into the item.</span></span>

<span data-ttu-id="8c9f2-148">Um filtro de processamento de imagem deve dar suporte a todos os formatos de imagem aos quais o driver dá suporte.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-148">An image processing filter must support all image formats that the driver supports.</span></span>

<span data-ttu-id="8c9f2-149">O filtro de processamento de imagem sempre recebe uma imagem correspondente à área de seleção definida no item para o qual estamos adquirindo a imagem.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-149">The image processing filter is always given an image corresponding to the selection area set into the item for which we are acquiring the image.</span></span> <span data-ttu-id="8c9f2-150">No entanto, observe que a imagem pode ter sido girada pelo driver, caso ele dê suporte à propriedade de [**\_ \_ rotação IPS WIA**](-wia-wiaitempropscanneritem.md) .</span><span class="sxs-lookup"><span data-stu-id="8c9f2-150">Note, however, that the image may have been rotated by the driver in case it supports the [**WIA\_IPS\_ROTATION**](-wia-wiaitempropscanneritem.md) property.</span></span>

<span data-ttu-id="8c9f2-151">O filtro de processamento de imagem é criado por meio de [**IWiaItem2:: GetExtension**](-wia-iwiaitem2-getextension.md), normalmente não pelo aplicativo, mas por componentes WIA 2,0 quando um aplicativo chama [**IWiaPreview:: GetNewPreview**](-wia-iwiapreview-getnewpreview.md) ou [**IWiaTransfer::D aixar**](-wia-iwiatransfer-download.md).</span><span class="sxs-lookup"><span data-stu-id="8c9f2-151">The image processing filter is created through [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md), typically not by the application but by WIA 2.0 components when an application calls [**IWiaPreview::GetNewPreview**](-wia-iwiapreview-getnewpreview.md) or [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="8c9f2-152">A interface **IWiaImageFilter** , como todas as interfaces de Component Object Model (com), herda os métodos de interface [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="8c9f2-152">The **IWiaImageFilter** interface, like all Component Object Model (COM) interfaces, inherits the [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface methods.</span></span>



| <span data-ttu-id="8c9f2-153">Métodos IUnknown</span><span class="sxs-lookup"><span data-stu-id="8c9f2-153">IUnknown Methods</span></span>                                        | <span data-ttu-id="8c9f2-154">Descrição</span><span class="sxs-lookup"><span data-stu-id="8c9f2-154">Description</span></span>                               |
|---------------------------------------------------------|-------------------------------------------|
| <span data-ttu-id="8c9f2-155">[IUnknown:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span><span class="sxs-lookup"><span data-stu-id="8c9f2-155">[IUnknown::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span></span> | <span data-ttu-id="8c9f2-156">Retorna ponteiros para interfaces com suporte.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-156">Returns pointers to supported interfaces.</span></span> |
| [<span data-ttu-id="8c9f2-157">IUnknown:: AddRef</span><span class="sxs-lookup"><span data-stu-id="8c9f2-157">IUnknown::AddRef</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-addref)                 | <span data-ttu-id="8c9f2-158">Incrementa a contagem de referência.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-158">Increments reference count.</span></span>               |
| [<span data-ttu-id="8c9f2-159">IUnknown:: versão</span><span class="sxs-lookup"><span data-stu-id="8c9f2-159">IUnknown::Release</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-release)               | <span data-ttu-id="8c9f2-160">Decrementa a contagem de referência.</span><span class="sxs-lookup"><span data-stu-id="8c9f2-160">Decrements reference count.</span></span>               |



 

## <a name="requirements"></a><span data-ttu-id="8c9f2-161">Requisitos</span><span class="sxs-lookup"><span data-stu-id="8c9f2-161">Requirements</span></span>



| <span data-ttu-id="8c9f2-162">Requisito</span><span class="sxs-lookup"><span data-stu-id="8c9f2-162">Requirement</span></span> | <span data-ttu-id="8c9f2-163">Valor</span><span class="sxs-lookup"><span data-stu-id="8c9f2-163">Value</span></span> |
|-------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="8c9f2-164">Cliente mínimo com suporte</span><span class="sxs-lookup"><span data-stu-id="8c9f2-164">Minimum supported client</span></span><br/> | <span data-ttu-id="8c9f2-165">\[Somente aplicativos da área de trabalho do Windows Vista\]</span><span class="sxs-lookup"><span data-stu-id="8c9f2-165">Windows Vista \[desktop apps only\]</span></span><br/>                                     |
| <span data-ttu-id="8c9f2-166">Servidor mínimo com suporte</span><span class="sxs-lookup"><span data-stu-id="8c9f2-166">Minimum supported server</span></span><br/> | <span data-ttu-id="8c9f2-167">\[Somente aplicativos da área de trabalho do Windows Server 2008\]</span><span class="sxs-lookup"><span data-stu-id="8c9f2-167">Windows Server 2008 \[desktop apps only\]</span></span><br/>                               |
| <span data-ttu-id="8c9f2-168">parâmetro</span><span class="sxs-lookup"><span data-stu-id="8c9f2-168">Header</span></span><br/>                   | <dl> <span data-ttu-id="8c9f2-169"><dt>WIA. h</dt></span><span class="sxs-lookup"><span data-stu-id="8c9f2-169"><dt>Wia.h</dt></span></span> </dl>   |
| <span data-ttu-id="8c9f2-170">INSERI</span><span class="sxs-lookup"><span data-stu-id="8c9f2-170">IDL</span></span><br/>                      | <dl> <span data-ttu-id="8c9f2-171"><dt>WIA. idl</dt></span><span class="sxs-lookup"><span data-stu-id="8c9f2-171"><dt>Wia.idl</dt></span></span> </dl> |



 

 
