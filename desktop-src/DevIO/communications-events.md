---
description: Um processo pode monitorar um conjunto de eventos que ocorrem em um recurso de comunicação. Por exemplo, um aplicativo pode usar o monitoramento de eventos para determinar quando os sinais CTS (Clear-to-send) e DSR (conjunto de dados prontos) mudam de estado.
ms.assetid: 5d2a7bf3-a972-474b-b8ca-da3351f1e59c
title: Eventos de comunicação
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 466bd5076405427c7c348c1df3706cb7b5c3edc4
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104089206"
---
# <a name="communications-events"></a><span data-ttu-id="feac7-104">Eventos de comunicação</span><span class="sxs-lookup"><span data-stu-id="feac7-104">Communications Events</span></span>

<span data-ttu-id="feac7-105">Um processo pode monitorar um conjunto de eventos que ocorrem em um recurso de comunicação.</span><span class="sxs-lookup"><span data-stu-id="feac7-105">A process can monitor a set of events that occur in a communications resource.</span></span> <span data-ttu-id="feac7-106">Por exemplo, um aplicativo pode usar o monitoramento de eventos para determinar quando os sinais CTS (Clear-to-send) e DSR (conjunto de dados prontos) mudam de estado.</span><span class="sxs-lookup"><span data-stu-id="feac7-106">For example, an application can use event monitoring to determine when the CTS (clear-to-send) and DSR (data-set-ready) signals change state.</span></span>

<span data-ttu-id="feac7-107">Um processo pode monitorar eventos em um determinado recurso de comunicação usando a função [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) para criar uma máscara de evento.</span><span class="sxs-lookup"><span data-stu-id="feac7-107">A process can monitor events on a given communications resource by using the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) function to create an event mask.</span></span> <span data-ttu-id="feac7-108">Para determinar a máscara de evento atual para um recurso de comunicação, um processo pode usar a função [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) .</span><span class="sxs-lookup"><span data-stu-id="feac7-108">To determine the current event mask for a communications resource, a process can use the [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) function.</span></span> <span data-ttu-id="feac7-109">Os valores a seguir especificam eventos que podem ser monitorados.</span><span class="sxs-lookup"><span data-stu-id="feac7-109">The following values specify events that can be monitored.</span></span>



| <span data-ttu-id="feac7-110">Valor</span><span class="sxs-lookup"><span data-stu-id="feac7-110">Value</span></span>           | <span data-ttu-id="feac7-111">Significado</span><span class="sxs-lookup"><span data-stu-id="feac7-111">Meaning</span></span>                                                                                                                                                                                                                                           |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="feac7-112">**interrupção de EV \_**</span><span class="sxs-lookup"><span data-stu-id="feac7-112">**EV\_BREAK**</span></span>   | <span data-ttu-id="feac7-113">Uma quebra na entrada foi detectada.</span><span class="sxs-lookup"><span data-stu-id="feac7-113">A break was detected on input.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="feac7-114">**\_CTS EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-114">**EV\_CTS**</span></span>     | <span data-ttu-id="feac7-115">O estado de alteração do sinal CTS (Clear-to-send).</span><span class="sxs-lookup"><span data-stu-id="feac7-115">The CTS (clear-to-send) signal changed state.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="feac7-116">**EV \_ DSR**</span><span class="sxs-lookup"><span data-stu-id="feac7-116">**EV\_DSR**</span></span>     | <span data-ttu-id="feac7-117">O estado do DSR (Data-Set-Ready) foi alterado.</span><span class="sxs-lookup"><span data-stu-id="feac7-117">The DSR (data-set-ready) signal changed state.</span></span>                                                                                                                                                                                                    |
| <span data-ttu-id="feac7-118">**\_erro EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-118">**EV\_ERR**</span></span>     | <span data-ttu-id="feac7-119">Ocorreu um erro de status de linha.</span><span class="sxs-lookup"><span data-stu-id="feac7-119">A line-status error occurred.</span></span> <span data-ttu-id="feac7-120">Os erros de status de linha são **\_ quadros CE**, **\_ saturação de CE** e **CE \_ RXPARITY**.</span><span class="sxs-lookup"><span data-stu-id="feac7-120">Line-status errors are **CE\_FRAME**, **CE\_OVERRUN**, and **CE\_RXPARITY**.</span></span>                                                                                                                                        |
| <span data-ttu-id="feac7-121">**\_anel EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-121">**EV\_RING**</span></span>    | <span data-ttu-id="feac7-122">Um indicador de anel foi detectado.</span><span class="sxs-lookup"><span data-stu-id="feac7-122">A ring indicator was detected.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="feac7-123">**\_RLSD EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-123">**EV\_RLSD**</span></span>    | <span data-ttu-id="feac7-124">O estado do sinal de RLSD (recebimento-linha-sinal-detecção) mudou.</span><span class="sxs-lookup"><span data-stu-id="feac7-124">The RLSD (receive-line-signal-detect) signal changed state.</span></span>                                                                                                                                                                                       |
| <span data-ttu-id="feac7-125">**\_RXCHAR EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-125">**EV\_RXCHAR**</span></span>  | <span data-ttu-id="feac7-126">Um caractere foi recebido e colocado no buffer de entrada.</span><span class="sxs-lookup"><span data-stu-id="feac7-126">A character was received and placed in the input buffer.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="feac7-127">**\_RXFLAG EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-127">**EV\_RXFLAG**</span></span>  | <span data-ttu-id="feac7-128">O caractere do evento foi recebido e colocado no buffer de entrada.</span><span class="sxs-lookup"><span data-stu-id="feac7-128">The event character was received and placed in the input buffer.</span></span> <span data-ttu-id="feac7-129">O caractere do evento é especificado na estrutura [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) do dispositivo, que é aplicada a uma porta serial usando a função [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) .</span><span class="sxs-lookup"><span data-stu-id="feac7-129">The event character is specified in the device's [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure, which is applied to a serial port by using the [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) function.</span></span> |
| <span data-ttu-id="feac7-130">**\_TXEMPTY EV**</span><span class="sxs-lookup"><span data-stu-id="feac7-130">**EV\_TXEMPTY**</span></span> | <span data-ttu-id="feac7-131">O último caractere no buffer de saída foi enviado.</span><span class="sxs-lookup"><span data-stu-id="feac7-131">The last character in the output buffer was sent.</span></span>                                                                                                                                                                                                 |



 

<span data-ttu-id="feac7-132">Depois que um conjunto de eventos é especificado, um processo usa a função [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) para aguardar a ocorrência de um dos eventos.</span><span class="sxs-lookup"><span data-stu-id="feac7-132">After a set of events is specified, a process uses the [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function to wait for one of the events to occur.</span></span> <span data-ttu-id="feac7-133">**WaitCommEvent** pode ser usado de forma síncrona ou como uma operação sobreposta.</span><span class="sxs-lookup"><span data-stu-id="feac7-133">**WaitCommEvent** can be used synchronously or as an overlapped operation.</span></span> <span data-ttu-id="feac7-134">Para obter informações adicionais sobre como executar uma função como uma operação sobreposta, consulte [sincronização](/windows/desktop/Sync/synchronization).</span><span class="sxs-lookup"><span data-stu-id="feac7-134">For additional information about executing a function as an overlapped operation, see [Synchronization](/windows/desktop/Sync/synchronization).</span></span>

<span data-ttu-id="feac7-135">Quando um dos eventos especificados na máscara de evento ocorre, o processo conclui a operação de espera e define uma variável de máscara de evento para indicar o tipo de evento detectado.</span><span class="sxs-lookup"><span data-stu-id="feac7-135">When one of the events specified in the event mask occurs, the process completes the wait operation and sets an event mask variable to indicate the type of event detected.</span></span> <span data-ttu-id="feac7-136">Se o [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) for chamado para um recurso de comunicação enquanto uma espera estiver pendente para esse recurso, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) retornará um erro.</span><span class="sxs-lookup"><span data-stu-id="feac7-136">If the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) is called for a communications resource while a wait is pending for that resource, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) returns an error.</span></span>

<span data-ttu-id="feac7-137">A função [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) detecta eventos que ocorreram desde a última chamada para [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) ou **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="feac7-137">The [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function detects events that have occurred since the last call to [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) or **WaitCommEvent**.</span></span> <span data-ttu-id="feac7-138">Por exemplo, se você especificar o **evento \_ RXCHAR de EV** como um evento de satisfação de espera, uma chamada para **WaitCommEvent** será satisfeita se houver caracteres no buffer de entrada do driver que chegaram desde a última chamada para **WaitCommEvent** ou **SetCommMask**.</span><span class="sxs-lookup"><span data-stu-id="feac7-138">For example, if you specify the **EV\_RXCHAR** event as a wait-satisfying event, a call to **WaitCommEvent** will be satisfied if there are characters in the driver's input buffer that have arrived since the last call to **WaitCommEvent** or **SetCommMask**.</span></span> <span data-ttu-id="feac7-139">Assim, considerando o pseudocódigo a seguir, todos os caracteres recebidos entre T1 e T2 atenderão à próxima chamada para **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="feac7-139">Thus, given the following pseudocode, any characters received between T1 and T2 will satisfy the next call to **WaitCommEvent**.</span></span>


```C++
while (!bFinished) 
{ 
    WaitCommEvent(args)
 
T1: // Read bytes 
    // Process bytes 

T2: 
}
```



<span data-ttu-id="feac7-140">Ao monitorar um evento que ocorre quando um sinal (CTS, DSR e assim por diante) muda de estado, o [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) relata a alteração, mas não o estado atual.</span><span class="sxs-lookup"><span data-stu-id="feac7-140">When monitoring an event that occurs when a signal (CTS, DSR, and so on) changes state, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) reports the change, but not the current state.</span></span> <span data-ttu-id="feac7-141">Para consultar o estado atual dos sinais CTS (Clear-to-send), DSR (conjunto de dados pronto), RLSD (Receive-line-Signal-Detect) e Ring Indicator, um processo pode usar a função [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) .</span><span class="sxs-lookup"><span data-stu-id="feac7-141">To query the current state of the CTS (clear-to-send), DSR (data-set-ready), RLSD (receive-line-signal-detect), and ring indicator signals, a process can use the [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) function.</span></span>

 

 
