---
description: Para determinar o tipo de evento do dispositivo ao processar uma \_ mensagem do WM DEVICECHANGE, examine o parâmetro wParam.
ms.assetid: 17078548-879d-4a11-a268-27d1f30180ab
title: Tipos de evento de dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35ece6b810ba4d1310638bbfbdcdcaa7f67f79d8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104010189"
---
# <a name="device-event-types"></a><span data-ttu-id="e6bed-103">Tipos de evento de dispositivo</span><span class="sxs-lookup"><span data-stu-id="e6bed-103">Device Event Types</span></span>

<span data-ttu-id="e6bed-104">Para determinar o tipo de evento do dispositivo ao processar uma mensagem do [**WM \_ DEVICECHANGE**](wm-devicechange.md) , examine o parâmetro *wParam* .</span><span class="sxs-lookup"><span data-stu-id="e6bed-104">To determine the device event type when processing a [**WM\_DEVICECHANGE**](wm-devicechange.md) message, examine the *wParam* parameter.</span></span> <span data-ttu-id="e6bed-105">O valor de *wParam* determina o significado dos dados específicos do evento no parâmetro *lParam* .</span><span class="sxs-lookup"><span data-stu-id="e6bed-105">The value of *wParam* determines the meaning of the event-specific data in the *lParam* parameter.</span></span> <span data-ttu-id="e6bed-106">Em geral, os dados específicos do evento identificam o dispositivo e fornecem detalhes adicionais sobre o evento.</span><span class="sxs-lookup"><span data-stu-id="e6bed-106">In general, the event-specific data identifies the device and provides additional detail about the event.</span></span> <span data-ttu-id="e6bed-107">O formato desses dados depende do tipo de dispositivo, mas os primeiros bytes sempre têm o mesmo formato que a estrutura [**HDR de \_ difusão \_ de dev**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) .</span><span class="sxs-lookup"><span data-stu-id="e6bed-107">The format of this data depends on the device type, but the first few bytes always have the same format as the [**DEV\_BROADCAST\_HDR**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) structure.</span></span> <span data-ttu-id="e6bed-108">Para determinar o formato dos dados, verifique o membro **\_ DeviceType dbch** .</span><span class="sxs-lookup"><span data-stu-id="e6bed-108">To determine the format of the data, check the **dbch\_devicetype** member.</span></span>

<span data-ttu-id="e6bed-109">O sistema transmite um evento de dispositivo do tipo [DBT \_ DEVICEARRIVAL](dbt-devicearrival.md) (ou seja, uma mensagem do [**WM \_ DEVICECHANGE**](wm-devicechange.md) com *wParam* definido como DBT \_ DEVICEARRIVAL) sempre que um dispositivo tiver sido inserido e estiver disponível para uso.</span><span class="sxs-lookup"><span data-stu-id="e6bed-109">The system broadcasts a device event of type [DBT\_DEVICEARRIVAL](dbt-devicearrival.md) (that is, a [**WM\_DEVICECHANGE**](wm-devicechange.md) message with *wParam* set to DBT\_DEVICEARRIVAL) whenever a device has been inserted and is available for use.</span></span> <span data-ttu-id="e6bed-110">Os aplicativos normalmente verificam o tipo de dispositivo e começam a usar o dispositivo imediatamente, se for apropriado.</span><span class="sxs-lookup"><span data-stu-id="e6bed-110">Applications typically check the device type and begin using the device immediately if it is appropriate.</span></span>

<span data-ttu-id="e6bed-111">O sistema transmite um evento de dispositivo [DBT \_ DEVICEQUERYREMOVE](dbt-devicequeryremove.md) para solicitar permissão para remover um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e6bed-111">The system broadcasts a [DBT\_DEVICEQUERYREMOVE](dbt-devicequeryremove.md) device event to request permission to remove a device.</span></span> <span data-ttu-id="e6bed-112">Para determinar se ele precisa do dispositivo, um aplicativo pode exibir uma caixa de diálogo para solicitar instruções ao usuário.</span><span class="sxs-lookup"><span data-stu-id="e6bed-112">To determine whether it needs the device, an application can display a dialog box to prompt the user for instructions.</span></span> <span data-ttu-id="e6bed-113">Se um aplicativo determinar que ele precisa do dispositivo, ele poderá negar essa solicitação e cancelar a remoção retornando a \_ negação de consulta de difusão \_ .</span><span class="sxs-lookup"><span data-stu-id="e6bed-113">If an application determines that it needs the device, it can deny this request and cancel the removal by returning BROADCAST\_QUERY\_DENY.</span></span> <span data-ttu-id="e6bed-114">Se o aplicativo não precisar do dispositivo, ele deverá retornar **true**.</span><span class="sxs-lookup"><span data-stu-id="e6bed-114">If the application does not need the device, it must return **TRUE**.</span></span> <span data-ttu-id="e6bed-115">O sistema envia imediatamente uma mensagem [DBT \_ DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) se algum aplicativo ou driver cancelou uma solicitação anterior para remover um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e6bed-115">The system immediately sends a [DBT\_DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) message if any application or driver canceled a previous request to remove a device.</span></span>

<span data-ttu-id="e6bed-116">O sistema transmite um evento de dispositivo [DBT \_ DEVICEREMOVEPENDING](dbt-deviceremovepending.md) como um último aviso antes de um dispositivo ser removido.</span><span class="sxs-lookup"><span data-stu-id="e6bed-116">The system broadcasts a [DBT\_DEVICEREMOVEPENDING](dbt-deviceremovepending.md) device event as a last warning before a device is removed.</span></span> <span data-ttu-id="e6bed-117">Neste ponto, o aplicativo não pode cancelar a remoção, portanto, se estiver usando o dispositivo, ele deve se preparar para a remoção a fim de evitar a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="e6bed-117">At this point, the application cannot cancel the removal, so if it is using the device it must prepare for its removal to prevent loss of data.</span></span> <span data-ttu-id="e6bed-118">Isso é especialmente importante quando uma conexão de rede está sendo removida.</span><span class="sxs-lookup"><span data-stu-id="e6bed-118">This is especially important when a network connection is being removed.</span></span> <span data-ttu-id="e6bed-119">O aplicativo deve determinar se algum de seus arquivos abertos ou pipes está nessa conexão.</span><span class="sxs-lookup"><span data-stu-id="e6bed-119">The application must determine whether any of its open files or pipes are on that connection.</span></span> <span data-ttu-id="e6bed-120">Isso pode fazer isso comparando o identificador de recurso de rede nos dados específicos do evento da mensagem com os identificadores de recurso obtidos anteriormente para os arquivos e pipes.</span><span class="sxs-lookup"><span data-stu-id="e6bed-120">It can do this by comparing the network resource identifier in the event-specific data of the message with the resource identifiers previously obtained for the files and pipes.</span></span> <span data-ttu-id="e6bed-121">O sistema transmite um evento de dispositivo [DBT \_ DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) quando um dispositivo é removido e não está mais disponível.</span><span class="sxs-lookup"><span data-stu-id="e6bed-121">The system broadcasts a [DBT\_DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) device event when a device has been removed and is no longer available.</span></span>

<span data-ttu-id="e6bed-122">O sistema transmite um evento de dispositivo [DBT \_ QUERYCHANGECONFIG](dbt-querychangeconfig.md) para solicitar permissão para alterar a configuração atual (Dock ou desencaixar).</span><span class="sxs-lookup"><span data-stu-id="e6bed-122">The system broadcasts a [DBT\_QUERYCHANGECONFIG](dbt-querychangeconfig.md) device event to request permission to change the current configuration (dock or undock).</span></span> <span data-ttu-id="e6bed-123">Qualquer aplicativo pode retornar a \_ consulta \_ de difusão negada para negar a solicitação e cancelar a alteração.</span><span class="sxs-lookup"><span data-stu-id="e6bed-123">Any application can return BROADCAST\_QUERY\_DENY to deny the request and cancel the change.</span></span> <span data-ttu-id="e6bed-124">Se um aplicativo negar a solicitação, o sistema enviará uma mensagem [DBT \_ CONFIGCHANGECANCELED](dbt-configchangecanceled.md) .</span><span class="sxs-lookup"><span data-stu-id="e6bed-124">If an application denies the request, the system sends a [DBT\_CONFIGCHANGECANCELED](dbt-configchangecanceled.md) message.</span></span> <span data-ttu-id="e6bed-125">Se a configuração atual tiver sido alterada, devido a um Dock ou desencaixado, o sistema enviará uma mensagem [DBT \_ ConfigChanged](dbt-configchanged.md) .</span><span class="sxs-lookup"><span data-stu-id="e6bed-125">If the current configuration has changed, due to a dock or undock, the system sends a [DBT\_CONFIGCHANGED](dbt-configchanged.md) message.</span></span>

<span data-ttu-id="e6bed-126">O sistema transmite um evento de dispositivo [DBT \_ DEVICETYPESPECIFIC](dbt-devicetypespecific.md) sempre que ocorre um evento específico do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e6bed-126">The system broadcasts a [DBT\_DEVICETYPESPECIFIC](dbt-devicetypespecific.md) device event whenever a device-specific event occurs.</span></span>

<span data-ttu-id="e6bed-127">Os drivers podem criar seus próprios tipos de evento personalizados.</span><span class="sxs-lookup"><span data-stu-id="e6bed-127">Drivers can create their own custom event types.</span></span> <span data-ttu-id="e6bed-128">Os eventos personalizados são enviados somente para aplicativos que se registraram para notificação de eventos de dispositivo em um dispositivo específico e só podem ser iniciados por drivers de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="e6bed-128">Custom events are sent only to application that have registered for device-event notification on a particular device, and can only be initiated by kernel-mode drivers.</span></span> <span data-ttu-id="e6bed-129">Para obter mais informações, consulte [DBT \_ CUSTOMEVENT](dbt-customevent.md).</span><span class="sxs-lookup"><span data-stu-id="e6bed-129">For more information, see [DBT\_CUSTOMEVENT](dbt-customevent.md).</span></span>

 

 



