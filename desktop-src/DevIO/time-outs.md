---
description: Um identificador para um recurso de comunicação tem um conjunto associado de parâmetros de tempo limite que afetam o comportamento de operações de leitura e gravação.
ms.assetid: 271d4c68-1f6d-4483-a9a1-703220de761f
title: Intervalos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6db31fafc0f4d98832f1fb7fa5d22b32cba33d73
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103646358"
---
# <a name="time-outs"></a><span data-ttu-id="0e84b-103">Intervalos</span><span class="sxs-lookup"><span data-stu-id="0e84b-103">Time-Outs</span></span>

<span data-ttu-id="0e84b-104">Um identificador para um recurso de comunicação tem um conjunto associado de parâmetros de tempo limite que afetam o comportamento de operações de leitura e gravação.</span><span class="sxs-lookup"><span data-stu-id="0e84b-104">A handle to a communications resource has an associated set of time-out parameters that affect the behavior of read and write operations.</span></span> <span data-ttu-id="0e84b-105">Os tempos limite podem fazer com que uma operação [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)ou [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) seja concluída quando um intervalo de tempo limite expirar, embora o número especificado de caracteres não tenha sido lido ou gravado.</span><span class="sxs-lookup"><span data-stu-id="0e84b-105">Time-outs can cause a [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) operation to conclude when a time-out interval elapses, even though the specified number of characters have not been read or written.</span></span> <span data-ttu-id="0e84b-106">Ele não é tratado como um erro quando um tempo limite ocorre durante uma operação de leitura ou gravação (ou seja, o valor de retorno da função de leitura ou gravação indica êxito).</span><span class="sxs-lookup"><span data-stu-id="0e84b-106">It is not treated as an error when a time-out occurs during a read or write operation (that is, the read or write function's return value indicates success).</span></span> <span data-ttu-id="0e84b-107">A contagem de bytes realmente lidos ou gravados é relatada por **ReadFile** ou **WriteFile** (ou pela função [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) ou [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) , se a e/s foi executada como uma operação sobreposta).</span><span class="sxs-lookup"><span data-stu-id="0e84b-107">The count of bytes actually read or written is reported by **ReadFile** or **WriteFile** (or by the [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) or [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) function, if the I/O was performed as an overlapped operation).</span></span>

<span data-ttu-id="0e84b-108">Quando um aplicativo abre um recurso de comunicação, o sistema define os valores de tempo limite do recurso para os valores em vigor quando o recurso foi usado pela última vez.</span><span class="sxs-lookup"><span data-stu-id="0e84b-108">When an application opens a communications resource, the system sets the resource's time-out values to the values in effect when the resource was last used.</span></span> <span data-ttu-id="0e84b-109">Se o recurso de comunicação nunca tiver sido aberto, o sistema definirá os valores de tempo limite como um valor padrão.</span><span class="sxs-lookup"><span data-stu-id="0e84b-109">If the communications resource has never been opened, the system sets the time-out values to some default value.</span></span> <span data-ttu-id="0e84b-110">Em ambos os casos, um aplicativo sempre deve determinar os valores de tempo limite atuais depois de abrir o recurso e, em seguida, defini-los explicitamente para atender aos seus requisitos.</span><span class="sxs-lookup"><span data-stu-id="0e84b-110">In either case, an application should always determine the current time-out values after opening the resource, and then explicitly set them to meet its requirements.</span></span> <span data-ttu-id="0e84b-111">Para determinar os valores de tempo limite atuais de um recurso de comunicação, use a função [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="0e84b-111">To determine the current time-out values of a communications resource, use the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) function.</span></span> <span data-ttu-id="0e84b-112">Para alterar os valores de tempo limite, use a função [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="0e84b-112">To change the time-out values, use the [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span>

<span data-ttu-id="0e84b-113">Dois tipos de tempo limite são habilitados pelos parâmetros de tempo limite.</span><span class="sxs-lookup"><span data-stu-id="0e84b-113">Two types of time-outs are enabled by the time-out parameters.</span></span> <span data-ttu-id="0e84b-114">Um tempo limite de intervalo ocorre quando o tempo entre o recebimento de dois caracteres excede um número especificado de milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0e84b-114">An interval time-out occurs when the time between the receipt of any two characters exceeds a specified number of milliseconds.</span></span> <span data-ttu-id="0e84b-115">O tempo começa quando o primeiro caractere é recebido e é reiniciado quando cada caractere novo é recebido.</span><span class="sxs-lookup"><span data-stu-id="0e84b-115">Timing starts when the first character is received and is restarted when each new character is received.</span></span> <span data-ttu-id="0e84b-116">Um tempo limite total ocorre quando a quantidade total de tempo consumido por uma operação de leitura excede um número calculado de milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0e84b-116">A total time-out occurs when the total amount of time consumed by a read operation exceeds a calculated number of milliseconds.</span></span> <span data-ttu-id="0e84b-117">O tempo começa imediatamente quando a operação de e/s é iniciada.</span><span class="sxs-lookup"><span data-stu-id="0e84b-117">Timing starts immediately when the I/O operation begins.</span></span> <span data-ttu-id="0e84b-118">As operações de gravação dão suporte apenas ao tempo limite total.</span><span class="sxs-lookup"><span data-stu-id="0e84b-118">Write operations support only total time-outs.</span></span> <span data-ttu-id="0e84b-119">As operações de leitura dão suporte a intervalo e tempos limite totais, que podem ser usados separadamente ou combinados.</span><span class="sxs-lookup"><span data-stu-id="0e84b-119">Read operations support both interval and total time-outs, which can be used separately or combined.</span></span>

<span data-ttu-id="0e84b-120">O tempo, em milissegundos, do período de tempo limite total para uma operação de leitura ou gravação é calculado usando os valores de valor de multiplicador e constante da estrutura [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) especificada na função [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) ou [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="0e84b-120">The time, in milliseconds, of the total time-out period for a read or write operation is calculated by using the multiplier and constant values from the [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) structure specified in the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) or [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span> <span data-ttu-id="0e84b-121">A fórmula a seguir é usada:</span><span class="sxs-lookup"><span data-stu-id="0e84b-121">The following formula is used:</span></span>


```C++
Timeout = (MULTIPLIER * number_of_bytes) + CONSTANT
```



<span data-ttu-id="0e84b-122">Usar um multiplicador e uma constante permite que o período de tempo limite total varie, dependendo da quantidade de dados que estão sendo solicitados.</span><span class="sxs-lookup"><span data-stu-id="0e84b-122">Using both a multiplier and a constant enables the total time-out period to vary, depending on the amount of data being requested.</span></span> <span data-ttu-id="0e84b-123">Um aplicativo pode usar apenas a constante definindo o multiplicador como zero ou usar apenas o multiplicador definindo a constante como zero.</span><span class="sxs-lookup"><span data-stu-id="0e84b-123">An application can use only the constant by setting the multiplier to zero, or use only the multiplier by setting the constant to zero.</span></span> <span data-ttu-id="0e84b-124">Se a constante e o multiplicador forem zero, o tempo limite total não será usado.</span><span class="sxs-lookup"><span data-stu-id="0e84b-124">If both the constant and multiplier are zero, total time-out is not used.</span></span>

<span data-ttu-id="0e84b-125">Se todos os parâmetros de tempo limite de leitura forem zero, os tempos limite de leitura não serão usados e uma operação de leitura não será concluída até que o número solicitado de bytes tenha sido lido ou um erro ocorra.</span><span class="sxs-lookup"><span data-stu-id="0e84b-125">If all read time-out parameters are zero, read time-outs are not used, and a read operation is not complete until the requested number of bytes have been read or an error occurs.</span></span> <span data-ttu-id="0e84b-126">Da mesma forma, se todos os parâmetros de tempo limite de gravação forem zero, uma operação de gravação não será concluída até que o número solicitado de bytes tenha sido gravado ou um erro ocorra.</span><span class="sxs-lookup"><span data-stu-id="0e84b-126">Similarly, if all write time-out parameters are zero, a write operation is not completed until the requested number of bytes have been written or an error occurs.</span></span>

<span data-ttu-id="0e84b-127">Se o parâmetro de tempo limite do intervalo de leitura for o valor **MAXDWORD** e os parâmetros de tempo limite total de leitura forem zero, uma operação de leitura será concluída imediatamente após a leitura de quaisquer caracteres disponíveis no buffer de entrada, mesmo se ele estiver vazio.</span><span class="sxs-lookup"><span data-stu-id="0e84b-127">If the read interval time-out parameter is the **MAXDWORD** value and both read total time-out parameters are zero, a read operation is completed immediately after reading whatever characters are available in the input buffer, even if it is empty.</span></span>

<span data-ttu-id="0e84b-128">O tempo de intervalo força uma operação de leitura a retornar quando há um pausa na recepção.</span><span class="sxs-lookup"><span data-stu-id="0e84b-128">Interval timing forces a read operation to return when there is a lull in reception.</span></span> <span data-ttu-id="0e84b-129">Um processo que usa tempos limite de intervalo pode definir um parâmetro de intervalo razoavelmente curto, para que ele possa responder rapidamente a pequenas intermitências isoladas de um ou alguns caracteres, ainda que ainda possa coletar grandes buffers de caracteres com uma única chamada quando os dados forem recebidos em um fluxo constante.</span><span class="sxs-lookup"><span data-stu-id="0e84b-129">A process using interval time-outs can set a fairly short interval parameter, so it can respond quickly to small, isolated bursts of one or a few characters, yet it can still collect large buffers of characters with a single call when data is received in a steady stream.</span></span>

<span data-ttu-id="0e84b-130">Os tempos limite para uma operação de gravação podem ser úteis quando a transmissão é bloqueada por algum tipo de controle de fluxo ou quando a função [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) foi chamada para suspender a transmissão de caracteres.</span><span class="sxs-lookup"><span data-stu-id="0e84b-130">Time-outs for a write operation can be useful when transmission is blocked by some kind of flow control or when the [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) function has been called to suspend character transmission.</span></span>

<span data-ttu-id="0e84b-131">A tabela a seguir resume o comportamento das operações de leitura com base nos valores especificados para tempos limite de totais e intervalos.</span><span class="sxs-lookup"><span data-stu-id="0e84b-131">The following table summarizes the behavior of read operations based on the values specified for total and interval time-outs.</span></span>



| <span data-ttu-id="0e84b-132">Total</span><span class="sxs-lookup"><span data-stu-id="0e84b-132">Total</span></span> | <span data-ttu-id="0e84b-133">Intervalo</span><span class="sxs-lookup"><span data-stu-id="0e84b-133">Interval</span></span> | <span data-ttu-id="0e84b-134">Comportamento</span><span class="sxs-lookup"><span data-stu-id="0e84b-134">Behavior</span></span>                                                                                                                                                                                 |
|-------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0e84b-135">0</span><span class="sxs-lookup"><span data-stu-id="0e84b-135">0</span></span>     | <span data-ttu-id="0e84b-136">0</span><span class="sxs-lookup"><span data-stu-id="0e84b-136">0</span></span>        | <span data-ttu-id="0e84b-137">Retorna quando o buffer é completamente preenchido.</span><span class="sxs-lookup"><span data-stu-id="0e84b-137">Returns when the buffer is completely filled.</span></span> <span data-ttu-id="0e84b-138">Os tempos limite não são usados.</span><span class="sxs-lookup"><span data-stu-id="0e84b-138">Time-outs are not used.</span></span>                                                                                                                    |
| <span data-ttu-id="0e84b-139">T</span><span class="sxs-lookup"><span data-stu-id="0e84b-139">T</span></span>     | <span data-ttu-id="0e84b-140">0</span><span class="sxs-lookup"><span data-stu-id="0e84b-140">0</span></span>        | <span data-ttu-id="0e84b-141">Retorna quando o buffer é completamente preenchido ou quando T milissegundos decorrem desde o início da operação.</span><span class="sxs-lookup"><span data-stu-id="0e84b-141">Returns when the buffer is completely filled or when T milliseconds have elapsed since the beginning of the operation.</span></span>                                                                   |
| <span data-ttu-id="0e84b-142">0</span><span class="sxs-lookup"><span data-stu-id="0e84b-142">0</span></span>     | <span data-ttu-id="0e84b-143">S</span><span class="sxs-lookup"><span data-stu-id="0e84b-143">Y</span></span>        | <span data-ttu-id="0e84b-144">Retorna quando o buffer é completamente preenchido ou quando Y milissegundos decorreu entre o recebimento de dois caracteres.</span><span class="sxs-lookup"><span data-stu-id="0e84b-144">Returns when the buffer is completely filled or when Y milliseconds have elapsed between the receipt of any two characters.</span></span> <span data-ttu-id="0e84b-145">O tempo não começa até que o primeiro caractere seja recebido.</span><span class="sxs-lookup"><span data-stu-id="0e84b-145">Timing does not begin until the first character is received.</span></span> |
| <span data-ttu-id="0e84b-146">T</span><span class="sxs-lookup"><span data-stu-id="0e84b-146">T</span></span>     | <span data-ttu-id="0e84b-147">S</span><span class="sxs-lookup"><span data-stu-id="0e84b-147">Y</span></span>        | <span data-ttu-id="0e84b-148">Retorna quando o buffer é completamente preenchido ou quando um dos tipos de tempo limite ocorre.</span><span class="sxs-lookup"><span data-stu-id="0e84b-148">Returns when the buffer is completely filled or when either type of time-out occurs.</span></span>                                                                                                     |



 

> [!Note]  
> <span data-ttu-id="0e84b-149">No entanto, esse intervalo é relativo ao sistema que controla o dispositivo físico.</span><span class="sxs-lookup"><span data-stu-id="0e84b-149">However, that timing is relative to the system controlling the physical device.</span></span> <span data-ttu-id="0e84b-150">Para um dispositivo remoto, como um modem, o tempo é relativo ao sistema de servidor ao qual o modem está anexado.</span><span class="sxs-lookup"><span data-stu-id="0e84b-150">For a remote device such as a modem, the timing is relative to the server system to which the modem is attached.</span></span> <span data-ttu-id="0e84b-151">Qualquer atraso de propagação de rede não é fatorado no.</span><span class="sxs-lookup"><span data-stu-id="0e84b-151">Any network propagation delay is not factored in.</span></span> <span data-ttu-id="0e84b-152">Por exemplo, um aplicativo cliente pode especificar um tempo limite total que computa para 500 milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0e84b-152">For example, a client application might specify a total time-out that computes to be 500 milliseconds.</span></span> <span data-ttu-id="0e84b-153">Quando 500 milissegundos tiverem decorrido no servidor, um erro de tempo limite será retornado ao cliente.</span><span class="sxs-lookup"><span data-stu-id="0e84b-153">When 500 milliseconds have elapsed at the server, a time-out error is returned to the client.</span></span> <span data-ttu-id="0e84b-154">Se houver um atraso de propagação de rede de 50 milissegundos, o cliente não será notificado sobre o tempo limite até aproximadamente 50 milissegundos depois que o tempo limite realmente ocorrer.</span><span class="sxs-lookup"><span data-stu-id="0e84b-154">If there is a 50 milliseconds network propagation delay, the client will not be notified of the time-out until approximately 50 milliseconds after the time-out actually occurred.</span></span>

 

> [!Note]  
> <span data-ttu-id="0e84b-155">Os parâmetros de tempo limite afetam o comportamento das operações de leitura e gravação sobrepostas em um dispositivo de comunicações.</span><span class="sxs-lookup"><span data-stu-id="0e84b-155">The time-out parameters affect the behavior of overlapped read and write operations on a communications device.</span></span> <span data-ttu-id="0e84b-156">Com e/s sobreposta, a função [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex)ou [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) pode retornar antes que a operação seja concluída.</span><span class="sxs-lookup"><span data-stu-id="0e84b-156">With overlapped I/O, the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) function can return before the operation has been completed.</span></span> <span data-ttu-id="0e84b-157">Os parâmetros de tempo limite podem determinar quando a operação foi concluída.</span><span class="sxs-lookup"><span data-stu-id="0e84b-157">The time-out parameters can determine when the operation has been completed.</span></span>

 

 

 
