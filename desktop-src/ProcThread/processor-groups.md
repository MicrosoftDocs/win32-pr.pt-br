---
description: As versões de 64 bits do Windows 7 e do Windows Server 2008 R2 e versões posteriores do Windows dão suporte a mais de 64 processadores lógicos em um único computador. Essa funcionalidade não está disponível nas versões de 32 bits do Windows.
ms.assetid: c627ac0f-96e8-48b5-9103-4316f487e173
title: Grupos de processadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cebc5b9ab1b386847b6561a9f6322c2fca0e2ae5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104011018"
---
# <a name="processor-groups"></a><span data-ttu-id="83996-104">Grupos de processadores</span><span class="sxs-lookup"><span data-stu-id="83996-104">Processor Groups</span></span>

<span data-ttu-id="83996-105">As versões de 64 bits do Windows 7 e do Windows Server 2008 R2 e versões posteriores do Windows dão suporte a mais de 64 processadores lógicos em um único computador.</span><span class="sxs-lookup"><span data-stu-id="83996-105">The 64-bit versions of Windows 7 and Windows Server 2008 R2 and later versions of Windows support more than 64 logical processors on a single computer.</span></span> <span data-ttu-id="83996-106">Essa funcionalidade não está disponível nas versões de 32 bits do Windows.</span><span class="sxs-lookup"><span data-stu-id="83996-106">This functionality is not available on 32-bit versions of Windows.</span></span>

<span data-ttu-id="83996-107">Sistemas com mais de um processador físico ou sistemas com processadores físicos com vários núcleos fornecem o sistema operacional com vários processadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="83996-107">Systems with more than one physical processor or systems with physical processors that have multiple cores provide the operating system with multiple logical processors.</span></span> <span data-ttu-id="83996-108">Um *processador lógico* é um mecanismo de computação lógico da perspectiva do sistema operacional, aplicativo ou driver.</span><span class="sxs-lookup"><span data-stu-id="83996-108">A *logical processor* is one logical computing engine from the perspective of the operating system, application or driver.</span></span> <span data-ttu-id="83996-109">Um *núcleo* é uma unidade de processador, que pode consistir em um ou mais processadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="83996-109">A *core* is one processor unit, which can consist of one or more logical processors.</span></span> <span data-ttu-id="83996-110">Um *processador físico* pode consistir em um ou mais núcleos.</span><span class="sxs-lookup"><span data-stu-id="83996-110">A *physical processor* can consist of one or more cores.</span></span> <span data-ttu-id="83996-111">Um processador físico é o mesmo que um pacote de processador, um soquete ou uma CPU.</span><span class="sxs-lookup"><span data-stu-id="83996-111">A physical processor is the same as a processor package, a socket, or a CPU.</span></span>

<span data-ttu-id="83996-112">O suporte para sistemas com mais de 64 processadores lógicos é baseado no conceito de um *grupo de processadores*, que é um conjunto estático de até 64 processadores lógicos que são tratados como uma única entidade de agendamento.</span><span class="sxs-lookup"><span data-stu-id="83996-112">Support for systems that have more than 64 logical processors is based on the concept of a *processor group*, which is a static set of up to 64 logical processors that is treated as a single scheduling entity.</span></span> <span data-ttu-id="83996-113">Os grupos de processador são numerados a partir de 0.</span><span class="sxs-lookup"><span data-stu-id="83996-113">Processor groups are numbered starting with 0.</span></span> <span data-ttu-id="83996-114">Sistemas com menos de 64 processadores lógicos sempre têm um único grupo, grupo 0.</span><span class="sxs-lookup"><span data-stu-id="83996-114">Systems with fewer than 64 logical processors always have a single group, Group 0.</span></span>

<span data-ttu-id="83996-115">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Não há suporte para grupos de processador.</span><span class="sxs-lookup"><span data-stu-id="83996-115">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** Processor groups are not supported.</span></span>

<span data-ttu-id="83996-116">Quando o sistema é iniciado, o sistema operacional cria grupos de processadores e atribui processadores lógicos aos grupos.</span><span class="sxs-lookup"><span data-stu-id="83996-116">When the system starts, the operating system creates processor groups and assigns logical processors to the groups.</span></span> <span data-ttu-id="83996-117">Se o sistema for capaz de adicionar processadores de forma automática, o sistema operacional permite o espaço em grupos para processadores que podem chegar enquanto o sistema está em execução.</span><span class="sxs-lookup"><span data-stu-id="83996-117">If the system is capable of hot-adding processors, the operating system allows space in groups for processors that might arrive while the system is running.</span></span> <span data-ttu-id="83996-118">O sistema operacional minimiza o número de grupos em um sistema.</span><span class="sxs-lookup"><span data-stu-id="83996-118">The operating system minimizes the number of groups in a system.</span></span> <span data-ttu-id="83996-119">Por exemplo, um sistema com processadores lógicos 128 teria dois grupos de processadores com processadores 64 em cada grupo, e não quatro grupos com processadores lógicos de 32 em cada grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-119">For example, a system with 128 logical processors would have two processor groups with 64 processors in each group, not four groups with 32 logical processors in each group.</span></span>

<span data-ttu-id="83996-120">Para obter um melhor desempenho, o sistema operacional leva à localidade física em conta ao atribuir processadores lógicos a grupos.</span><span class="sxs-lookup"><span data-stu-id="83996-120">For better performance, the operating system takes physical locality into account when assigning logical processors to groups.</span></span> <span data-ttu-id="83996-121">Todos os processadores lógicos em um núcleo e todos os núcleos em um processador físico são atribuídos ao mesmo grupo, se possível.</span><span class="sxs-lookup"><span data-stu-id="83996-121">All of the logical processors in a core, and all of the cores in a physical processor, are assigned to the same group, if possible.</span></span> <span data-ttu-id="83996-122">Os processadores físicos que estão fisicamente próximos um do outro são atribuídos ao mesmo grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-122">Physical processors that are physically close to one another are assigned to the same group.</span></span> <span data-ttu-id="83996-123">Um nó NUMA é atribuído a um único grupo, a menos que a capacidade do nó exceda o tamanho máximo do grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-123">A NUMA node is assigned to a single group unless the capacity of the node exceeds the maximum group size.</span></span> <span data-ttu-id="83996-124">Para obter mais informações, consulte [suporte a numa](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="83996-124">For more information, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="83996-125">Em sistemas com 64 ou menos processadores, os aplicativos existentes funcionarão corretamente sem modificação.</span><span class="sxs-lookup"><span data-stu-id="83996-125">On systems with 64 or fewer processors, existing applications will operate correctly without modification.</span></span> <span data-ttu-id="83996-126">Os aplicativos que não chamam nenhuma função que use máscaras de afinidade de processador ou números de processador funcionarão corretamente em todos os sistemas, independentemente do número de processadores.</span><span class="sxs-lookup"><span data-stu-id="83996-126">Applications that do not call any functions that use processor affinity masks or processor numbers will operate correctly on all systems, regardless of the number of processors.</span></span> <span data-ttu-id="83996-127">Para operar corretamente em sistemas com mais de 64 processadores lógicos, os seguintes tipos de aplicativos podem exigir modificação:</span><span class="sxs-lookup"><span data-stu-id="83996-127">To operate correctly on systems with more than 64 logical processors, the following kinds of applications might require modification:</span></span>

-   <span data-ttu-id="83996-128">Os aplicativos que gerenciam, mantêm ou exibem informações por processador para todo o sistema devem ser modificados para dar suporte a mais de 64 processadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="83996-128">Applications that manage, maintain, or display per-processor information for the entire system must be modified to support more than 64 logical processors.</span></span> <span data-ttu-id="83996-129">Um exemplo desse tipo de aplicativo é o Gerenciador de tarefas do Windows, que exibe a carga de trabalho de cada processador no sistema.</span><span class="sxs-lookup"><span data-stu-id="83996-129">An example of such an application is Windows Task Manager, which displays the workload of each processor in the system.</span></span>
-   <span data-ttu-id="83996-130">Aplicativos para os quais o desempenho é crítico e que podem ser dimensionados com eficiência além de 64 processadores lógicos devem ser modificados para serem executados em tais sistemas.</span><span class="sxs-lookup"><span data-stu-id="83996-130">Applications for which performance is critical and that can scale efficiently beyond 64 logical processors must be modified to run on such systems.</span></span> <span data-ttu-id="83996-131">Por exemplo, os aplicativos de banco de dados podem se beneficiar de modificações.</span><span class="sxs-lookup"><span data-stu-id="83996-131">For example, database applications might benefit from modifications.</span></span>
-   <span data-ttu-id="83996-132">Se um aplicativo usa uma DLL que tem estruturas de dados por processador e a DLL não foi modificada para dar suporte a mais de 64 processadores lógicos, todos os threads no aplicativo que chamam funções exportadas pela DLL devem ser atribuídos ao mesmo grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-132">If an application uses a DLL that has per-processor data structures, and the DLL has not been modified to support more than 64 logical processors, all threads in the application that call functions exported by the DLL must be assigned to the same group.</span></span>

<span data-ttu-id="83996-133">Por padrão, um aplicativo é restrito a um único grupo, o que deve fornecer um amplo recurso de processamento para o aplicativo típico.</span><span class="sxs-lookup"><span data-stu-id="83996-133">By default, an application is constrained to a single group, which should provide ample processing capability for the typical application.</span></span> <span data-ttu-id="83996-134">Inicialmente, o sistema operacional atribui cada processo a um único grupo de uma maneira Round Robin entre os grupos no sistema.</span><span class="sxs-lookup"><span data-stu-id="83996-134">The operating system initially assigns each process to a single group in a round-robin manner across the groups in the system.</span></span> <span data-ttu-id="83996-135">Um processo começa sua execução atribuída a um grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-135">A process begins its execution assigned to one group.</span></span> <span data-ttu-id="83996-136">Inicialmente, o primeiro thread de um processo é executado no grupo ao qual o processo é atribuído.</span><span class="sxs-lookup"><span data-stu-id="83996-136">The first thread of a process initially runs in the group to which the process is assigned.</span></span> <span data-ttu-id="83996-137">Cada thread recém-criado é atribuído ao mesmo grupo do thread que o criou.</span><span class="sxs-lookup"><span data-stu-id="83996-137">Each newly created thread is assigned to the same group as the thread that created it.</span></span>

<span data-ttu-id="83996-138">Um aplicativo que exige o uso de vários grupos para que ele possa ser executado em mais de 64 processadores deve determinar explicitamente onde executar seus threads e é responsável por definir as afinidades de processador de threads para os grupos desejados.</span><span class="sxs-lookup"><span data-stu-id="83996-138">An application that requires the use of multiple groups so that it can run on more than 64 processors must explicitly determine where to run its threads and is responsible for setting the threads' processor affinities to the desired groups.</span></span> <span data-ttu-id="83996-139">O sinalizador de [ \_ \_ afinidade de pai herdado](process-creation-flags.md) pode ser usado para especificar um processo pai (que pode ser diferente do processo atual) do qual gerar a afinidade para um novo processo.</span><span class="sxs-lookup"><span data-stu-id="83996-139">The [INHERIT\_PARENT\_AFFINITY](process-creation-flags.md) flag can be used to specify a parent process (which can be different than the current process) from which to generate the affinity for a new process.</span></span> <span data-ttu-id="83996-140">Se o processo estiver sendo executado em um único grupo, ele poderá ler e modificar sua afinidade usando [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) e [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) enquanto estiver restante no mesmo grupo; se a afinidade de processo for modificada, a nova afinidade será aplicada a seus threads.</span><span class="sxs-lookup"><span data-stu-id="83996-140">If the process is running in a single group, it can read and modify its affinity using [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) and [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) while remaining in the same group; if the process affinity is modified, the new affinity is applied to its threads.</span></span>

<span data-ttu-id="83996-141">A afinidade de um thread pode ser especificada na criação usando o atributo de afinidade de grupo de atributos de thread do proc com a função [**CreateRemoteThreadEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex) . [**\_ \_ \_ \_**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-updateprocthreadattribute)</span><span class="sxs-lookup"><span data-stu-id="83996-141">A thread's affinity can be specified at creation using the [**PROC\_THREAD\_ATTRIBUTE\_GROUP\_AFFINITY**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-updateprocthreadattribute) extended attribute with the [**CreateRemoteThreadEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex) function.</span></span> <span data-ttu-id="83996-142">Depois que o thread é criado, sua afinidade pode ser alterada chamando [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) ou [**SetThreadGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-setthreadgroupaffinity).</span><span class="sxs-lookup"><span data-stu-id="83996-142">After the thread is created, its affinity can be changed by calling [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) or [**SetThreadGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-setthreadgroupaffinity).</span></span> <span data-ttu-id="83996-143">Se um thread for atribuído a um grupo diferente do processo, a afinidade do processo será atualizada para incluir a afinidade do thread e o processo se tornará um processo de vários grupos.</span><span class="sxs-lookup"><span data-stu-id="83996-143">If a thread is assigned to a different group than the process, the process's affinity is updated to include the thread's affinity and the process becomes a multi-group process.</span></span> <span data-ttu-id="83996-144">Outras alterações de afinidade devem ser feitas para threads individuais; a afinidade de um processo de vários grupos não pode ser modificada usando [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask).</span><span class="sxs-lookup"><span data-stu-id="83996-144">Further affinity changes must be made for individual threads; a multi-group process's affinity cannot be modified using [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask).</span></span> <span data-ttu-id="83996-145">A função [**GetProcessGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-getprocessgroupaffinity) recupera o conjunto de grupos aos quais um processo e seus threads são atribuídos.</span><span class="sxs-lookup"><span data-stu-id="83996-145">The [**GetProcessGroupAffinity**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-getprocessgroupaffinity) function retrieves the set of groups to which a process and its threads are assigned.</span></span>

<span data-ttu-id="83996-146">Para especificar a afinidade de todos os processos associados a um objeto de trabalho, use a função [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) com a classe de informações **JobObjectGroupInformation** ou **JobObjectGroupInformationEx** .</span><span class="sxs-lookup"><span data-stu-id="83996-146">To specify affinity for all processes associated with a job object, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function with the **JobObjectGroupInformation** or **JobObjectGroupInformationEx** information class.</span></span>

<span data-ttu-id="83996-147">Um processador lógico é identificado por seu número de grupo e seu número de processador relativo ao grupo.</span><span class="sxs-lookup"><span data-stu-id="83996-147">A logical processor is identified by its group number and its group-relative processor number.</span></span> <span data-ttu-id="83996-148">Isso é representado por uma estrutura de [**\_ número de processador**](/windows/desktop/api/WinNT/ns-winnt-processor_number) .</span><span class="sxs-lookup"><span data-stu-id="83996-148">This is represented by a [**PROCESSOR\_NUMBER**](/windows/desktop/api/WinNT/ns-winnt-processor_number) structure.</span></span> <span data-ttu-id="83996-149">Números numéricos de processador usados por funções herdadas são relativos a grupos.</span><span class="sxs-lookup"><span data-stu-id="83996-149">Numeric processor numbers used by legacy functions are group-relative.</span></span>

<span data-ttu-id="83996-150">Para uma discussão sobre as alterações da arquitetura do sistema operacional para dar suporte a mais de 64 processadores, consulte a white paper [sistemas de suporte que têm mais de 64 processadores](https://www.microsoft.com/whdc/system/Sysinternals/MoreThan64proc.mspx).</span><span class="sxs-lookup"><span data-stu-id="83996-150">For a discussion of operating system architecture changes to support more than 64 processors, see the white paper [Supporting Systems That Have More Than 64 Processors](https://www.microsoft.com/whdc/system/Sysinternals/MoreThan64proc.mspx).</span></span>

<span data-ttu-id="83996-151">Para obter uma lista de novas funções e estruturas que dão suporte a grupos de processadores, consulte [novidades em processos e threads](what-s-new-in-processes-and-threads.md).</span><span class="sxs-lookup"><span data-stu-id="83996-151">For a list of new functions and structures that support processor groups, see [What's New in Processes and Threads](what-s-new-in-processes-and-threads.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="83996-152">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="83996-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="83996-153">Vários processadores</span><span class="sxs-lookup"><span data-stu-id="83996-153">Multiple Processors</span></span>](multiple-processors.md)
</dt> <dt>

[<span data-ttu-id="83996-154">Suporte a NUMA</span><span class="sxs-lookup"><span data-stu-id="83996-154">NUMA Support</span></span>](numa-support.md)
</dt> </dl>

 

 
