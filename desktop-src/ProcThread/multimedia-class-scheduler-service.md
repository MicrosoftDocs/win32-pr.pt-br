---
description: O serviço do Agendador de classes de multimídia (MMCSS) permite que os aplicativos multimídia garantam que seu processamento de tempo-diferenciado recebe acesso priorizado aos recursos da CPU.
ms.assetid: a7169938-1c72-4c4c-881a-cb08ad6182c7
title: Serviço do Agendador de classes de multimídia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 80656276af30495c084d0964534a04e11896bcd2
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/03/2021
ms.locfileid: "103930126"
---
# <a name="multimedia-class-scheduler-service"></a><span data-ttu-id="3d73a-103">Serviço do Agendador de classes de multimídia</span><span class="sxs-lookup"><span data-stu-id="3d73a-103">Multimedia Class Scheduler Service</span></span>

<span data-ttu-id="3d73a-104">O serviço do Agendador de classes de multimídia (MMCSS) permite que os aplicativos multimídia garantam que seu processamento de tempo-diferenciado recebe acesso priorizado aos recursos da CPU.</span><span class="sxs-lookup"><span data-stu-id="3d73a-104">The Multimedia Class Scheduler service (MMCSS) enables multimedia applications to ensure that their time-sensitive processing receives prioritized access to CPU resources.</span></span> <span data-ttu-id="3d73a-105">Esse serviço permite que aplicativos multimídia utilizem o máximo possível da CPU sem negar recursos de CPU a aplicativos de prioridade mais baixa.</span><span class="sxs-lookup"><span data-stu-id="3d73a-105">This service enables multimedia applications to utilize as much of the CPU as possible without denying CPU resources to lower-priority applications.</span></span>

<span data-ttu-id="3d73a-106">O MMCSS usa as informações armazenadas no registro para identificar as tarefas com suporte e determinar a prioridade relativa dos threads que executam essas tarefas.</span><span class="sxs-lookup"><span data-stu-id="3d73a-106">MMCSS uses information stored in the registry to identify supported tasks and determine the relative priority of threads performing these tasks.</span></span> <span data-ttu-id="3d73a-107">Cada thread que está executando o trabalho relacionado a uma tarefa específica chama a função [**AvSetMmMaxThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmmaxthreadcharacteristicsa) ou [**AvSetMmThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadcharacteristicsa) para informar ao MMCSS que ele está trabalhando nessa tarefa.</span><span class="sxs-lookup"><span data-stu-id="3d73a-107">Each thread that is performing work related to a particular task calls the [**AvSetMmMaxThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmmaxthreadcharacteristicsa) or [**AvSetMmThreadCharacteristics**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadcharacteristicsa) function to inform MMCSS that it is working on that task.</span></span>

<span data-ttu-id="3d73a-108">Para obter um exemplo de um programa que usa o MMCSS, consulte [fluxos de modo exclusivo](/previous-versions//bb614507(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="3d73a-108">For an example of a program that uses MMCSS, see [Exclusive-Mode Streams](/previous-versions//bb614507(v=vs.85)).</span></span>

<span data-ttu-id="3d73a-109">**Windows Server 2003 e Windows XP:** O MMCSS não está disponível.</span><span class="sxs-lookup"><span data-stu-id="3d73a-109">**Windows Server 2003 and Windows XP:** MMCSS is not available.</span></span>

## <a name="registry-settings"></a><span data-ttu-id="3d73a-110">Configurações do Registro</span><span class="sxs-lookup"><span data-stu-id="3d73a-110">Registry Settings</span></span>

<span data-ttu-id="3d73a-111">As configurações do MMCSS são armazenadas na seguinte chave do registro:</span><span class="sxs-lookup"><span data-stu-id="3d73a-111">The MMCSS settings are stored in the following registry key:</span></span>

<span data-ttu-id="3d73a-112">**HKEY \_ local \_ Machine \\ software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ multimídia \\ SystemProfile**</span><span class="sxs-lookup"><span data-stu-id="3d73a-112">**HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Multimedia\\SystemProfile**</span></span>

<span data-ttu-id="3d73a-113">Essa chave contém um valor **reg \_ DWORD** chamado **SystemResponsiveness** que determina a porcentagem de recursos de CPU que devem ser garantidos para tarefas de baixa prioridade.</span><span class="sxs-lookup"><span data-stu-id="3d73a-113">This key contains a **REG\_DWORD** value named **SystemResponsiveness** that determines the percentage of CPU resources that should be guaranteed to low-priority tasks.</span></span> <span data-ttu-id="3d73a-114">Por exemplo, se esse valor for 20, 20% dos recursos da CPU serão reservados para tarefas de baixa prioridade.</span><span class="sxs-lookup"><span data-stu-id="3d73a-114">For example, if this value is 20, then 20% of CPU resources are reserved for low-priority tasks.</span></span> <span data-ttu-id="3d73a-115">Observe que os valores que não são divisíveis igualmente por 10 são arredondados para o múltiplo mais próximo de 10.</span><span class="sxs-lookup"><span data-stu-id="3d73a-115">Note that values that are not evenly divisible by 10 are rounded up to the nearest multiple of 10.</span></span> <span data-ttu-id="3d73a-116">Um valor de 0 também é tratado como 10.</span><span class="sxs-lookup"><span data-stu-id="3d73a-116">A value of 0 is also treated as 10.</span></span>

<span data-ttu-id="3d73a-117">A chave também contém uma subchave chamada **tarefas** que contém a lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="3d73a-117">The key also contains a subkey named **Tasks** that contains the list of tasks.</span></span> <span data-ttu-id="3d73a-118">Por padrão, o Windows oferece suporte às seguintes tarefas:</span><span class="sxs-lookup"><span data-stu-id="3d73a-118">By default, Windows supports the following tasks:</span></span>

-   <span data-ttu-id="3d73a-119">**Sonoro**</span><span class="sxs-lookup"><span data-stu-id="3d73a-119">**Audio**</span></span>
-   <span data-ttu-id="3d73a-120">**Captura**</span><span class="sxs-lookup"><span data-stu-id="3d73a-120">**Capture**</span></span>
-   <span data-ttu-id="3d73a-121">**Distribuição**</span><span class="sxs-lookup"><span data-stu-id="3d73a-121">**Distribution**</span></span>
-   <span data-ttu-id="3d73a-122">**Jogos**</span><span class="sxs-lookup"><span data-stu-id="3d73a-122">**Games**</span></span>
-   <span data-ttu-id="3d73a-123">**Reprodução**</span><span class="sxs-lookup"><span data-stu-id="3d73a-123">**Playback**</span></span>
-   <span data-ttu-id="3d73a-124">**Áudio pro**</span><span class="sxs-lookup"><span data-stu-id="3d73a-124">**Pro Audio**</span></span>
-   <span data-ttu-id="3d73a-125">**Gerenciador de janelas**</span><span class="sxs-lookup"><span data-stu-id="3d73a-125">**Window Manager**</span></span>

<span data-ttu-id="3d73a-126">Os OEMs podem adicionar outras tarefas conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="3d73a-126">OEMs can add additional tasks as required.</span></span>

<span data-ttu-id="3d73a-127">Cada chave de tarefa contém o seguinte conjunto de valores que representam as características a serem aplicadas aos threads associados à tarefa.</span><span class="sxs-lookup"><span data-stu-id="3d73a-127">Each task key contains the following set of values that represent characteristics to be applied to threads that are associated with the task.</span></span>

| <span data-ttu-id="3d73a-128">Valor</span><span class="sxs-lookup"><span data-stu-id="3d73a-128">Value</span></span>                   | <span data-ttu-id="3d73a-129">Formatar</span><span class="sxs-lookup"><span data-stu-id="3d73a-129">Format</span></span>         | <span data-ttu-id="3d73a-130">Valores possíveis</span><span class="sxs-lookup"><span data-stu-id="3d73a-130">Possible values</span></span>                                                                                                                                                                                                                                                                                                                                                         |
|-------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3d73a-131">**Afinidade**</span><span class="sxs-lookup"><span data-stu-id="3d73a-131">**Affinity**</span></span>            | <span data-ttu-id="3d73a-132">**REG \_ DWORD**</span><span class="sxs-lookup"><span data-stu-id="3d73a-132">**REG\_DWORD**</span></span> | <span data-ttu-id="3d73a-133">Um bitmask que indica a afinidade do processador.</span><span class="sxs-lookup"><span data-stu-id="3d73a-133">A bitmask that indicates the processor affinity.</span></span> <span data-ttu-id="3d73a-134">Tanto 0x00 quanto 0xFFFFFFFF indicam que a afinidade do processador não é usada.</span><span class="sxs-lookup"><span data-stu-id="3d73a-134">Both 0x00 and 0xFFFFFFFF indicate that processor affinity is not used.</span></span>                                                                                                                                                                                                                                                 |
| <span data-ttu-id="3d73a-135">**Somente segundo plano**</span><span class="sxs-lookup"><span data-stu-id="3d73a-135">**Background Only**</span></span>     | <span data-ttu-id="3d73a-136">**REG \_ sz**</span><span class="sxs-lookup"><span data-stu-id="3d73a-136">**REG\_SZ**</span></span>    | <span data-ttu-id="3d73a-137">Indica se esta é uma tarefa em segundo plano (sem interface do usuário).</span><span class="sxs-lookup"><span data-stu-id="3d73a-137">Indicates whether this is a background task (no user interface).</span></span> <span data-ttu-id="3d73a-138">Os threads de uma tarefa em segundo plano não são alterados devido a uma alteração no foco da janela.</span><span class="sxs-lookup"><span data-stu-id="3d73a-138">The threads of a background task do not change because of a change in window focus.</span></span> <span data-ttu-id="3d73a-139">Esse valor pode ser definido como true ou false.</span><span class="sxs-lookup"><span data-stu-id="3d73a-139">This value can be set to True or False.</span></span>                                                                                                                                                                            |
| <span data-ttu-id="3d73a-140">**BackgroundPriority**</span><span class="sxs-lookup"><span data-stu-id="3d73a-140">**BackgroundPriority**</span></span>  | <span data-ttu-id="3d73a-141">**REG \_ DWORD**</span><span class="sxs-lookup"><span data-stu-id="3d73a-141">**REG\_DWORD**</span></span> | <span data-ttu-id="3d73a-142">A prioridade do plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="3d73a-142">The background priority.</span></span> <span data-ttu-id="3d73a-143">O intervalo de valores é 1-8.</span><span class="sxs-lookup"><span data-stu-id="3d73a-143">The range of values is 1-8.</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="3d73a-144">**Taxa do relógio**</span><span class="sxs-lookup"><span data-stu-id="3d73a-144">**Clock Rate**</span></span>          | <span data-ttu-id="3d73a-145">**REG \_ DWORD**</span><span class="sxs-lookup"><span data-stu-id="3d73a-145">**REG\_DWORD**</span></span> | <span data-ttu-id="3d73a-146">Uma dica usada pelo MMCSS para determinar a granularidade do agendamento de recursos do processador. **Windows Server 2008 e Windows Vista:** A taxa de relógio máxima garantida que o sistema usará se um thread ingressar nessa tarefa, em intervalos de 100 a nanossegundos.</span><span class="sxs-lookup"><span data-stu-id="3d73a-146">A hint used by MMCSS to determine the granularity of processor resource scheduling.**Windows Server 2008 and Windows Vista:** The maximum guaranteed clock rate the system uses if a thread joins this task, in 100-nanosecond intervals.</span></span> <span data-ttu-id="3d73a-147">A partir do Windows 7 e do Windows Server 2008 R2, essa garantia foi removida para reduzir o consumo de energia do sistema.</span><span class="sxs-lookup"><span data-stu-id="3d73a-147">Starting with Windows 7 and Windows Server 2008 R2, this guarantee was removed to reduce system power consumption.</span></span><br/> |
| <span data-ttu-id="3d73a-148">**Prioridade da GPU**</span><span class="sxs-lookup"><span data-stu-id="3d73a-148">**GPU Priority**</span></span>        | <span data-ttu-id="3d73a-149">**REG \_ DWORD**</span><span class="sxs-lookup"><span data-stu-id="3d73a-149">**REG\_DWORD**</span></span> | <span data-ttu-id="3d73a-150">A prioridade da GPU.</span><span class="sxs-lookup"><span data-stu-id="3d73a-150">The GPU priority.</span></span> <span data-ttu-id="3d73a-151">O intervalo de valores é 0-31.</span><span class="sxs-lookup"><span data-stu-id="3d73a-151">The range of values is 0-31.</span></span> <span data-ttu-id="3d73a-152">Essa prioridade ainda não foi usada.</span><span class="sxs-lookup"><span data-stu-id="3d73a-152">This priority is not yet used.</span></span>                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="3d73a-153">**Prioridade**</span><span class="sxs-lookup"><span data-stu-id="3d73a-153">**Priority**</span></span>            | <span data-ttu-id="3d73a-154">**REG \_ DWORD**</span><span class="sxs-lookup"><span data-stu-id="3d73a-154">**REG\_DWORD**</span></span> | <span data-ttu-id="3d73a-155">A prioridade da tarefa.</span><span class="sxs-lookup"><span data-stu-id="3d73a-155">The task priority.</span></span> <span data-ttu-id="3d73a-156">O intervalo de valores é 1 (baixo) a 8 (alto). Para tarefas com uma **categoria de agendamento** alta, esse valor é sempre tratado como 2.</span><span class="sxs-lookup"><span data-stu-id="3d73a-156">The range of values is 1 (low) to 8 (high).For tasks with a **Scheduling Category** of High, this value is always treated as 2.</span></span><br/>                                                                                                                                                                                                           |
| <span data-ttu-id="3d73a-157">**Categoria de agendamento**</span><span class="sxs-lookup"><span data-stu-id="3d73a-157">**Scheduling Category**</span></span> | <span data-ttu-id="3d73a-158">**REG \_ sz**</span><span class="sxs-lookup"><span data-stu-id="3d73a-158">**REG\_SZ**</span></span>    | <span data-ttu-id="3d73a-159">A categoria de agendamento.</span><span class="sxs-lookup"><span data-stu-id="3d73a-159">The scheduling category.</span></span> <span data-ttu-id="3d73a-160">Esse valor pode ser definido como alto, médio ou baixo.</span><span class="sxs-lookup"><span data-stu-id="3d73a-160">This value can be set to High, Medium, or Low.</span></span>                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="3d73a-161">**Prioridade SFIO**</span><span class="sxs-lookup"><span data-stu-id="3d73a-161">**SFIO Priority**</span></span>       | <span data-ttu-id="3d73a-162">**REG \_ sz**</span><span class="sxs-lookup"><span data-stu-id="3d73a-162">**REG\_SZ**</span></span>    | <span data-ttu-id="3d73a-163">A prioridade de e/s agendada.</span><span class="sxs-lookup"><span data-stu-id="3d73a-163">The scheduled I/O priority.</span></span> <span data-ttu-id="3d73a-164">Esse valor pode ser definido como ocioso, baixo, normal ou alto.</span><span class="sxs-lookup"><span data-stu-id="3d73a-164">This value can be set to Idle, Low, Normal, or High.</span></span> <span data-ttu-id="3d73a-165">Este valor não é usado.</span><span class="sxs-lookup"><span data-stu-id="3d73a-165">This value is not used.</span></span>                                                                                                                                                                                                                                                                |



 

> [!Note]  
> <span data-ttu-id="3d73a-166">Para conservar energia, os aplicativos não devem definir a resolução do temporizador de todo o sistema para um valor pequeno, a menos que seja absolutamente necessário.</span><span class="sxs-lookup"><span data-stu-id="3d73a-166">To conserve power, applications should not set the resolution of the system-wide timer to a small value unless absolutely necessary.</span></span> <span data-ttu-id="3d73a-167">Para obter mais informações, consulte [desempenho](../win7devguide/performance.md) no [Guia de desenvolvedores do Windows 7](../win7devguide/windows-7-developer-guide.md).</span><span class="sxs-lookup"><span data-stu-id="3d73a-167">For more information, see [Performance](../win7devguide/performance.md) in the [Windows 7 Developers Guide](../win7devguide/windows-7-developer-guide.md).</span></span>

 

## <a name="thread-priorities"></a><span data-ttu-id="3d73a-168">Prioridades do thread</span><span class="sxs-lookup"><span data-stu-id="3d73a-168">Thread Priorities</span></span>

<span data-ttu-id="3d73a-169">O MMCSS aumenta a prioridade dos threads que estão trabalhando em tarefas de multimídia de alta prioridade.</span><span class="sxs-lookup"><span data-stu-id="3d73a-169">The MMCSS boosts the priority of threads that are working on high-priority multimedia tasks.</span></span>

<span data-ttu-id="3d73a-170">O MMCSS determina a prioridade de um thread usando os seguintes fatores:</span><span class="sxs-lookup"><span data-stu-id="3d73a-170">MMCSS determines the priority of a thread using the following factors:</span></span>

-   <span data-ttu-id="3d73a-171">A prioridade base da tarefa.</span><span class="sxs-lookup"><span data-stu-id="3d73a-171">The base priority of the task.</span></span>
-   <span data-ttu-id="3d73a-172">O parâmetro *Priority* da função [**AvSetMmThreadPriority**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadpriority) .</span><span class="sxs-lookup"><span data-stu-id="3d73a-172">The *Priority* parameter of the [**AvSetMmThreadPriority**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadpriority) function.</span></span>
-   <span data-ttu-id="3d73a-173">Se o aplicativo está em primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="3d73a-173">Whether the application is in the foreground.</span></span>
-   <span data-ttu-id="3d73a-174">Quanto tempo de CPU está sendo consumido pelos threads em cada categoria.</span><span class="sxs-lookup"><span data-stu-id="3d73a-174">How much CPU time is being consumed by the threads in each category.</span></span>

<span data-ttu-id="3d73a-175">O MMCSS define a prioridade dos threads de cliente, dependendo de sua categoria de agendamento.</span><span class="sxs-lookup"><span data-stu-id="3d73a-175">MMCSS sets the priority of client threads depending on their scheduling category.</span></span>

| <span data-ttu-id="3d73a-176">Categoria</span><span class="sxs-lookup"><span data-stu-id="3d73a-176">Category</span></span> | <span data-ttu-id="3d73a-177">Prioridade</span><span class="sxs-lookup"><span data-stu-id="3d73a-177">Priority</span></span> | <span data-ttu-id="3d73a-178">Descrição</span><span class="sxs-lookup"><span data-stu-id="3d73a-178">Description</span></span>                                                                                                                               |
|----------|----------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3d73a-179">Alto</span><span class="sxs-lookup"><span data-stu-id="3d73a-179">High</span></span>     | <span data-ttu-id="3d73a-180">23-26</span><span class="sxs-lookup"><span data-stu-id="3d73a-180">23-26</span></span>    | <span data-ttu-id="3d73a-181">Esses threads são executados em uma prioridade de thread inferior a apenas determinadas tarefas em nível de sistema.</span><span class="sxs-lookup"><span data-stu-id="3d73a-181">These threads run at a thread priority that is lower than only certain system-level tasks.</span></span> <span data-ttu-id="3d73a-182">Essa categoria foi projetada para tarefas de Pro Audio.</span><span class="sxs-lookup"><span data-stu-id="3d73a-182">This category is designed for Pro Audio tasks.</span></span> |
| <span data-ttu-id="3d73a-183">Médio</span><span class="sxs-lookup"><span data-stu-id="3d73a-183">Medium</span></span>   | <span data-ttu-id="3d73a-184">16-22</span><span class="sxs-lookup"><span data-stu-id="3d73a-184">16-22</span></span>    | <span data-ttu-id="3d73a-185">Esses threads fazem parte do aplicativo que está em primeiro plano.</span><span class="sxs-lookup"><span data-stu-id="3d73a-185">These threads are part of the application that is in the foreground.</span></span>                                                                      |
| <span data-ttu-id="3d73a-186">Baixo</span><span class="sxs-lookup"><span data-stu-id="3d73a-186">Low</span></span>      | <span data-ttu-id="3d73a-187">8-15</span><span class="sxs-lookup"><span data-stu-id="3d73a-187">8-15</span></span>     | <span data-ttu-id="3d73a-188">Essa categoria contém o restante dos threads.</span><span class="sxs-lookup"><span data-stu-id="3d73a-188">This category contains the remainder of the threads.</span></span> <span data-ttu-id="3d73a-189">Eles têm garantia de um percentual mínimo dos recursos da CPU, se necessário.</span><span class="sxs-lookup"><span data-stu-id="3d73a-189">They are guaranteed a minimum percentage of the CPU resources if required.</span></span>           |
|          | <span data-ttu-id="3d73a-190">1-7</span><span class="sxs-lookup"><span data-stu-id="3d73a-190">1-7</span></span>      | <span data-ttu-id="3d73a-191">Esses threads usaram sua cota de recursos de CPU.</span><span class="sxs-lookup"><span data-stu-id="3d73a-191">These threads have used their quota of CPU resource.</span></span> <span data-ttu-id="3d73a-192">Eles poderão continuar sendo executados se nenhum thread de baixa prioridade estiver pronto para execução.</span><span class="sxs-lookup"><span data-stu-id="3d73a-192">They can continue to run if no low-priority threads are ready to run.</span></span>                |



 

 

 
