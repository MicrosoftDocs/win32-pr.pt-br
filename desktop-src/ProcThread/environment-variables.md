---
description: 'Cada processo tem um bloco de ambiente que contém um conjunto de variáveis de ambiente e seus valores. Há dois tipos de variáveis de ambiente: variáveis de ambiente do usuário (definidas para cada usuário) e variáveis de ambiente do sistema (definidas para todos).'
ms.assetid: 6732b12f-ced1-4769-b947-79da8fd2237a
title: Variáveis de ambiente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f50226d12286d01c77025d1cc38e33e2778392a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105759182"
---
# <a name="environment-variables"></a><span data-ttu-id="071e3-104">Variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="071e3-104">Environment Variables</span></span>

<span data-ttu-id="071e3-105">Cada processo tem um bloco de ambiente que contém um conjunto de variáveis de ambiente e seus valores.</span><span class="sxs-lookup"><span data-stu-id="071e3-105">Every process has an environment block that contains a set of environment variables and their values.</span></span> <span data-ttu-id="071e3-106">Há dois tipos de variáveis de ambiente: variáveis de ambiente do usuário (definidas para cada usuário) e variáveis de ambiente do sistema (definidas para todos).</span><span class="sxs-lookup"><span data-stu-id="071e3-106">There are two types of environment variables: user environment variables (set for each user) and system environment variables (set for everyone).</span></span>

<span data-ttu-id="071e3-107">Por padrão, um processo filho herda as variáveis de ambiente de seu processo pai.</span><span class="sxs-lookup"><span data-stu-id="071e3-107">By default, a child process inherits the environment variables of its parent process.</span></span> <span data-ttu-id="071e3-108">Os programas iniciados pelo processador de comando herdam as variáveis de ambiente do processador de comando.</span><span class="sxs-lookup"><span data-stu-id="071e3-108">Programs started by the command processor inherit the command processor's environment variables.</span></span> <span data-ttu-id="071e3-109">Para especificar um ambiente diferente para um processo filho, crie um novo bloco de ambiente e passe um ponteiro para ele como um parâmetro para a função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) .</span><span class="sxs-lookup"><span data-stu-id="071e3-109">To specify a different environment for a child process, create a new environment block and pass a pointer to it as a parameter to the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span>

<span data-ttu-id="071e3-110">O processador de comando fornece o comando **set** para exibir seu bloco de ambiente ou para criar novas variáveis de ambiente.</span><span class="sxs-lookup"><span data-stu-id="071e3-110">The command processor provides the **set** command to display its environment block or to create new environment variables.</span></span> <span data-ttu-id="071e3-111">Você também pode exibir ou modificar as variáveis de ambiente selecionando **sistema** no **painel de controle**, selecionando **Configurações avançadas do sistema** e clicando em **variáveis de ambiente**.</span><span class="sxs-lookup"><span data-stu-id="071e3-111">You can also view or modify the environment variables by selecting **System** from the **Control Panel**, selecting **Advanced system settings**, and clicking **Environment Variables**.</span></span>

<span data-ttu-id="071e3-112">Cada bloco de ambiente contém as variáveis de ambiente no seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="071e3-112">Each environment block contains the environment variables in the following format:</span></span><dl> <span data-ttu-id="071e3-113">*Var1* = *Value1* \\ 0</span><span class="sxs-lookup"><span data-stu-id="071e3-113">*Var1*=*Value1*\\0</span></span>  
<span data-ttu-id="071e3-114">*Var2* = *Value2* \\ 0</span><span class="sxs-lookup"><span data-stu-id="071e3-114">*Var2*=*Value2*\\0</span></span>  
<span data-ttu-id="071e3-115">*Var3* = *Value3* \\ 0</span><span class="sxs-lookup"><span data-stu-id="071e3-115">*Var3*=*Value3*\\0</span></span>  
<span data-ttu-id="071e3-116">...</span><span class="sxs-lookup"><span data-stu-id="071e3-116">...</span></span>  
<span data-ttu-id="071e3-117">*VarN* = *Valor* \\ 0 \\ 0</span><span class="sxs-lookup"><span data-stu-id="071e3-117">*VarN*=*ValueN*\\0\\0</span></span>  
</dl>

<span data-ttu-id="071e3-118">O nome de uma variável de ambiente não pode incluir um sinal de igual (=).</span><span class="sxs-lookup"><span data-stu-id="071e3-118">The name of an environment variable cannot include an equal sign (=).</span></span>

<span data-ttu-id="071e3-119">A função [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) retorna um ponteiro para o bloco de ambiente do processo de chamada.</span><span class="sxs-lookup"><span data-stu-id="071e3-119">The [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) function returns a pointer to the environment block of the calling process.</span></span> <span data-ttu-id="071e3-120">Isso deve ser tratado como um bloco somente leitura; Não o modifique diretamente.</span><span class="sxs-lookup"><span data-stu-id="071e3-120">This should be treated as a read-only block; do not modify it directly.</span></span> <span data-ttu-id="071e3-121">Em vez disso, use a função [**SetEnvironmentVariable não**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) para alterar uma variável de ambiente.</span><span class="sxs-lookup"><span data-stu-id="071e3-121">Instead, use the [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) function to change an environment variable.</span></span> <span data-ttu-id="071e3-122">Quando tiver terminado com o bloco de ambiente obtido do **GetEnvironmentStrings**, chame a função [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) para liberar o bloco.</span><span class="sxs-lookup"><span data-stu-id="071e3-122">When you are finished with the environment block obtained from **GetEnvironmentStrings**, call the [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) function to free the block.</span></span>

<span data-ttu-id="071e3-123">Chamar [**SetEnvironmentVariable não**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) não tem nenhum efeito nas variáveis de ambiente do sistema.</span><span class="sxs-lookup"><span data-stu-id="071e3-123">Calling [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) has no effect on the system environment variables.</span></span> <span data-ttu-id="071e3-124">Para adicionar ou modificar programaticamente variáveis de ambiente do sistema, adicione-as à chave do registro do ambiente do Gerenciador de sessão de controle de grupo de **\_ \_ computadores locais \\ \\ \\ \\ \\ CurrentControlSet** e transmita uma mensagem do [**WM \_ SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) com *lParam* definido como a cadeia de caracteres "Environment".</span><span class="sxs-lookup"><span data-stu-id="071e3-124">To programmatically add or modify system environment variables, add them to the **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Environment** registry key, then broadcast a [**WM\_SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) message with *lParam* set to the string "Environment".</span></span> <span data-ttu-id="071e3-125">Isso permite que os aplicativos, como o Shell, obtenham as atualizações.</span><span class="sxs-lookup"><span data-stu-id="071e3-125">This allows applications, such as the shell, to pick up your updates.</span></span>

<span data-ttu-id="071e3-126">O tamanho máximo de uma variável de ambiente definida pelo usuário é de 32.767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="071e3-126">The maximum size of a user-defined environment variable is 32,767 characters.</span></span> <span data-ttu-id="071e3-127">Não há nenhuma limitação técnica sobre o tamanho do bloco de ambiente.</span><span class="sxs-lookup"><span data-stu-id="071e3-127">There is no technical limitation on the size of the environment block.</span></span> <span data-ttu-id="071e3-128">No entanto, há limites práticos, dependendo do mecanismo usado para acessar o bloco.</span><span class="sxs-lookup"><span data-stu-id="071e3-128">However, there are practical limits depending on the mechanism used to access the block.</span></span> <span data-ttu-id="071e3-129">Por exemplo, um arquivo em lotes não pode definir uma variável que seja maior que o comprimento máximo da linha de comando.</span><span class="sxs-lookup"><span data-stu-id="071e3-129">For example, a batch file cannot set a variable that is longer than the maximum command line length.</span></span>

<span data-ttu-id="071e3-130">**Windows Server 2003 e Windows XP:** O tamanho máximo do bloco de ambiente para o processo é de 32.767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="071e3-130">**Windows Server 2003 and Windows XP:** The maximum size of the environment block for the process is 32,767 characters.</span></span> <span data-ttu-id="071e3-131">A partir do Windows Vista e do Windows Server 2008, não há nenhuma limitação técnica sobre o tamanho do bloco de ambiente.</span><span class="sxs-lookup"><span data-stu-id="071e3-131">Starting with Windows Vista and Windows Server 2008, there is no technical limitation on the size of the environment block.</span></span>

<span data-ttu-id="071e3-132">A função [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) determina se uma variável especificada é definida no ambiente do processo de chamada e, em caso afirmativo, qual é seu valor.</span><span class="sxs-lookup"><span data-stu-id="071e3-132">The [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) function determines whether a specified variable is defined in the environment of the calling process, and, if so, what its value is.</span></span>

<span data-ttu-id="071e3-133">Para recuperar uma cópia do bloco de ambiente para um determinado usuário, use a função [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) .</span><span class="sxs-lookup"><span data-stu-id="071e3-133">To retrieve a copy of the environment block for a given user, use the [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) function.</span></span>

<span data-ttu-id="071e3-134">Para expandir as cadeias de caracteres de variável de ambiente, use a função [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) .</span><span class="sxs-lookup"><span data-stu-id="071e3-134">To expand environment-variable strings, use the [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="071e3-135">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="071e3-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="071e3-136">Alterando variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="071e3-136">Changing Environment Variables</span></span>](changing-environment-variables.md)
</dt> <dt>

[<span data-ttu-id="071e3-137">Variáveis de ambiente do usuário</span><span class="sxs-lookup"><span data-stu-id="071e3-137">User Environment Variables</span></span>](../shell/user-environment-variables.md)
</dt> </dl>

 

 
