---
description: O modelo de Windows microsoft permite controlar o acesso a objetos de processo. Para obter mais informações sobre segurança, consulte Access-Control Modelo.
ms.assetid: 508a17c4-88cd-431a-a102-00180a7f7ab5
title: Processar direitos de acesso e segurança
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7d05e064ac67e118ee31fe0b73eb238d3fbb24545565cf9fe0dfd73d13e5dd68
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/11/2021
ms.locfileid: "119418706"
---
# <a name="process-security-and-access-rights"></a>Processar direitos de acesso e segurança

O modelo de Windows microsoft permite controlar o acesso a objetos de processo. Para obter mais informações sobre segurança, consulte [Modelo de controle de acesso.](../secauthz/access-control-model.md)

Quando um usuário faz login, o sistema coleta um conjunto de dados que identifica exclusivamente o usuário durante o processo de autenticação e o armazena em um [token de acesso](../secauthz/access-tokens.md). Esse token de acesso descreve o contexto de segurança de todos os processos associados ao usuário. O contexto de segurança de um processo é o conjunto de credenciais fornecidas ao processo ou à conta de usuário que criou o processo.

Você pode usar um token para especificar o contexto de segurança atual para um processo usando a [**função CreateProcessWithTokenW.**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) Você pode especificar um [descritor de](../secauthz/security-descriptors.md) segurança para um processo ao chamar a função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera)ou [**CreateProcessWithLogonW.**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) Se você especificar **NULL,** o processo obtém um descritor de segurança padrão. As ACLs no descritor de segurança padrão para um processo vêm do token primário ou de representação do criador.

Para recuperar o descritor de segurança de um processo, chame a [**função GetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) Para alterar o descritor de segurança de um processo, chame a [**função SetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo)

Os direitos de acesso válidos para objetos de processo incluem [os direitos de acesso padrão](../secauthz/standard-access-rights.md) e alguns direitos de acesso específicos do processo. A tabela a seguir lista os direitos de acesso padrão usados por todos os objetos.

| Valor                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **DELETE** (0x00010000L)        | Necessário para excluir o objeto .                                                                                                                                                                                                                                                           |
| **LEITURA \_ CONTROL** (0x00020000L) | Necessário para ler informações no descritor de segurança do objeto, não incluindo as informações na SACL. Para ler ou gravar a SACL, você deve solicitar o **direito de acesso ACCESS SYSTEM \_ \_ SECURITY.** Para obter mais informações, consulte [SACL Access Right](../secauthz/sacl-access-right.md). |
| **SYNCHRONIZE** (0x00100000L)   | O direito de usar o objeto para sincronização. Isso permite que um thread aguarde até que o objeto está no estado sinalizado.                                                                                                                                                                |
| **GRAVAÇÃO \_ DAC** (0x00040000L)    | Necessário para modificar a DACL no descritor de segurança para o objeto .                                                                                                                                                                                                                   |
| **GRAVAÇÃO \_ OWNER** (0x00080000L)  | Necessário para alterar o proprietário no descritor de segurança para o objeto .                                                                                                                                                                                                                  |



 

A tabela a seguir lista os direitos de acesso específicos do processo.



| Valor                                             | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **PROCESSAR \_ TODO O \_ ACESSO**                          | Todos os direitos de acesso possíveis para um objeto de processo. **Windows Server 2003 e Windows XP:** O tamanho do sinalizador **PROCESS \_ ALL \_ ACCESS** aumentou Windows Server 2008 e Windows Vista. Se um aplicativo compilado para o Windows Server 2008 e o Windows Vista for executado no Windows Server 2003 ou no Windows XP, o sinalizador **PROCESS \_ ALL \_ ACCESS** será muito grande e a função que especifica esse sinalizador falhará com ACESSO DE ERRO **\_ \_ NEGADO.** Para evitar esse problema, especifique o conjunto mínimo de direitos de acesso necessários para a operação. Se **PROCESS ALL ACCESS \_ \_ deve** ser usado, deverão ser definidos WIN32 WINNT como o sistema operacional mínimo direcionado pelo seu aplicativo \_ \_ (por exemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obter mais informações, [consulte Using the Windows Headers](../winprog/using-the-windows-headers.md). <br/> |
| **PROCESSO \_ CREATE \_ PROCESS** (0x0080)             | Necessário para criar um processo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **PROCESSO \_ CREATE \_ THREAD** (0x0002)              | Necessário para criar um thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **PROCESSO \_ DUP \_ HANDLE** (0x0040)                 | Necessário para duplicar um handle usando [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **PROCESSO \_ INFORMAÇÕES DE \_ CONSULTA** (0x0400)          | Necessário para recuperar determinadas informações sobre um processo, como seu token, código de saída e classe de prioridade (consulte [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROCESSO \_ CONSULTAR INFORMAÇÕES \_ \_ LIMITADAS** (0x1000) | Necessário para recuperar determinadas informações sobre um processo (consulte [**GetExitCodeProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess), [**GetPriorityClass,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getpriorityclass) [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob), [**QueryFullProcessImageName**](/windows/desktop/api/WinBase/nf-winbase-queryfullprocessimagenamea)). Um handle que tem o direito **de acesso PROCESS \_ QUERY \_ INFORMATION** é **automaticamente concedido PROCESS \_ QUERY LIMITED \_ \_ INFORMATION**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                         |
| **PROCESSO \_ SET \_ INFORMATION** (0x0200)            | Necessário para definir determinadas informações sobre um processo, como sua classe de prioridade (consulte [**SetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setpriorityclass)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROCESSO \_ SET \_ QUOTA** (0x0100)                  | Necessário para definir limites de memória usando [**SetProcessWorkingSetSize**](/windows/desktop/api/memoryapi/nf-memoryapi-setprocessworkingsetsize).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **PROCESSO \_ SUSPEND \_ RESUME** (0x0800)             | Necessário para suspender ou retomar um processo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **PROCESSO \_ TERMINATE** (0x0001)                   | Necessário para encerrar um processo usando [**TerminateProcess.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **PROCESSO \_ OPERAÇÃO \_ DA VM** (0x0008)               | Necessário para executar uma operação no espaço de endereço de um processo (consulte [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) e [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **PROCESSO \_ VM \_ READ** (0x0010)                    | Necessário para ler a memória em um processo usando [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **PROCESSO \_ Gravação \_ de VM** (0x0020)                   | Necessário para gravar na memória em um processo usando [**WriteProcessMemory.**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **SYNCHRONIZE** (0x00100000L)                     | É necessário aguardar até que o processo seja encerrado usando as [funções de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

Para abrir um handle para outro processo e obter direitos de acesso completo, você deve habilitar o privilégio **SeDebugPrivilege.** Para obter mais informações, consulte [Alterando privilégios em um token](../secbp/changing-privileges-in-a-token.md).

O identificador retornado pela [**função CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) tem **acesso PROCESS ALL \_ \_ ACCESS** ao objeto de processo. Quando você chama a [**função OpenProcess,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess) [](../secauthz/access-rights-and-access-masks.md) o sistema verifica os direitos de acesso solicitados em relação à DACL no descritor de segurança do processo. Quando você chama a [**função GetCurrentProcess,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess) o sistema retorna um pseudohandle com o acesso máximo que a DACL permite ao chamador.

Você pode solicitar o **direito de acesso ACCESS SYSTEM \_ \_ SECURITY** a um objeto de processo se quiser ler ou gravar a SACL do objeto. Para obter mais informações, consulte [ACLs (Listas de Controle](../secauthz/access-control-lists.md) de Acesso) e [Direito de Acesso SACL.](../secauthz/sacl-access-right.md)

> [!WARNING]
> Um processo que tem alguns dos direitos de acesso aqui pode usá-los para obter outros direitos de acesso. Por exemplo, se o processo A tiver um handle para processar B com o acesso **PROCESS \_ DUP \_ HANDLE,** ele poderá duplicar o pseudocódigo para o processo B. Isso cria um handle que tem acesso máximo ao processo B. Para obter mais informações sobre pseudocódigos, [**consulte GetCurrentProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess).

 

## <a name="protected-processes"></a>Processos protegidos

Windows O Vista apresenta *processos protegidos para* aprimorar o suporte para o digital Rights Management. O sistema restringe o acesso a processos protegidos e aos threads de processos protegidos.

Os seguintes direitos de acesso padrão não são permitidos de um processo para um processo protegido:

- **DELETE**  
- **CONTROLE \_ DE LEITURA**  
- **ESCREVER \_ DAC**  
- **PROPRIETÁRIO \_ DA GRAVAÇÃO**  

Os seguintes direitos de acesso específicos não são permitidos de um processo para um processo protegido:

- **PROCESSAR \_ TODO O \_ ACESSO**  
- **PROCESSO \_ DE CRIAÇÃO DE \_ PROCESSO**  
- **PROCESSAR \_ CREATE \_ THREAD**  
- **PROCESS \_ DUP \_ HANDLE**  
- **PROCESSAR \_ INFORMAÇÕES DE \_ CONSULTA**  
- **INFORMAÇÕES DO \_ CONJUNTO DE \_ PROCESSOS**  
- **COTA DO \_ CONJUNTO DE \_ PROCESSOS**  
- **PROCESSAR \_ OPERAÇÃO DE VM \_**  
- **PROCESSAR \_ LEITURA DA VM \_**  
- **PROCESSAR \_ GRAVAÇÃO DE VM \_**  

O **direito PROCESS \_ QUERY LIMITED \_ \_ INFORMATION** foi introduzido para fornecer acesso a um subconjunto das informações disponíveis por meio **de PROCESS \_ QUERY \_ INFORMATION**.
