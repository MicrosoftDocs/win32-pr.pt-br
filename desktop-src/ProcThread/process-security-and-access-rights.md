---
description: O modelo de segurança do Microsoft Windows permite que você controle o acesso a objetos de processo. Para obter mais informações sobre segurança, consulte modelo de Access-Control.
ms.assetid: 508a17c4-88cd-431a-a102-00180a7f7ab5
title: Direitos de acesso e segurança do processo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 668520a6f4e0eb8a81b55418033ff583bce8bddf
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105770131"
---
# <a name="process-security-and-access-rights"></a>Direitos de acesso e segurança do processo

O modelo de segurança do Microsoft Windows permite que você controle o acesso a objetos de processo. Para obter mais informações sobre segurança, consulte [modelo de controle de acesso](../secauthz/access-control-model.md).

Quando um usuário faz logon, o sistema coleta um conjunto de dados que identifica exclusivamente o usuário durante o processo de autenticação e o armazena em um token de [acesso](../secauthz/access-tokens.md). Esse token de acesso descreve o contexto de segurança de todos os processos associados ao usuário. O contexto de segurança de um processo é o conjunto de credenciais fornecido ao processo ou à conta de usuário que criou o processo.

Você pode usar um token para especificar o contexto de segurança atual para um processo usando a função [**CreateProcessWithTokenW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) . Você pode especificar um [descritor de segurança](../secauthz/security-descriptors.md) para um processo ao chamar a função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera)ou [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) . Se você especificar **NULL**, o processo obterá um descritor de segurança padrão. As ACLs no descritor de segurança padrão para um processo são provenientes do token de representação ou primário do criador.

Para recuperar o descritor de segurança de um processo, chame a função [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) . Para alterar o descritor de segurança de um processo, chame a função [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .

Os direitos de acesso válidos para objetos de processo incluem os [direitos de acesso padrão](../secauthz/standard-access-rights.md) e alguns direitos de acesso específicos do processo. A tabela a seguir lista os direitos de acesso padrão usados por todos os objetos.

| Valor                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Excluir** (0x00010000L)        | Necessário para excluir o objeto.                                                                                                                                                                                                                                                           |
| **Ler \_ CONTROL** (0x00020000L) | Necessário para ler informações no descritor de segurança do objeto, não incluindo as informações na SACL. Para ler ou gravar a SACL, você deve solicitar o direito de acesso de **\_ \_ segurança do sistema de acesso** . Para obter mais informações, consulte [direitos de acesso à SACL](../secauthz/sacl-access-right.md). |
| **Sincronizar** (0x00100000L)   | O direito de usar o objeto para sincronização. Isso permite que um thread aguarde até que o objeto esteja no estado sinalizado.                                                                                                                                                                |
| **Gravar \_ DAC** (0x00040000L)    | Necessário para modificar a DACL no descritor de segurança do objeto.                                                                                                                                                                                                                   |
| **Gravar \_ PROPRIETÁRIO** (0x00080000L)  | Necessário para alterar o proprietário no descritor de segurança do objeto.                                                                                                                                                                                                                  |



 

A tabela a seguir lista os direitos de acesso específicos do processo.



| Valor                                             | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **PROCESSAR \_ todo o \_ acesso**                          | Todos os direitos de acesso possíveis para um objeto de processo. **Windows Server 2003 e Windows XP:** O tamanho do sinalizador **processar \_ todo o \_ acesso** aumentou no Windows Server 2008 e no Windows Vista. Se um aplicativo compilado para o Windows Server 2008 e o Windows Vista for executado no Windows Server 2003 ou no Windows XP, o sinalizador **processar \_ todo o \_ acesso** será muito grande e a função que especifica esse sinalizador falhará com o **erro \_ acesso \_ negado**. Para evitar esse problema, especifique o conjunto mínimo de direitos de acesso necessário para a operação. Se o **processo \_ todo o \_ acesso** precisar ser usado, defina \_ \_ o Win32 WinNT para o sistema operacional mínimo direcionado por seu aplicativo (por exemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obter mais informações, consulte [usando os cabeçalhos do Windows](../winprog/using-the-windows-headers.md). <br/> |
| **Processo \_ do CRIAR \_ processo** (0x0080)             | Necessário para criar um processo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Processo \_ do CREATE \_ thread** (0x0002)              | Necessário para criar um thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Processo \_ do \_Identificador dup** (0x0040)                 | Necessário para duplicar um identificador usando [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Processo \_ do \_Informações de consulta** (0x0400)          | Necessário para recuperar determinadas informações sobre um processo, como token, código de saída e classe de prioridade (consulte [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Processo \_ do \_ \_ Informações limitadas de consulta** (0x1000) | Necessário para recuperar determinadas informações sobre um processo (consulte [**GetExitCodeProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess), [**GetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getpriorityclass), [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob), [**QueryFullProcessImageName**](/windows/desktop/api/WinBase/nf-winbase-queryfullprocessimagenamea)). Um identificador que tem o direito de acesso de **\_ \_ informações de consulta de processo** recebe automaticamente **\_ \_ \_ as informações limitadas de consulta de processo**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                         |
| **Processo \_ do DEFINIR \_ informações** (0x0200)            | Necessário para definir determinadas informações sobre um processo, como sua classe de prioridade (consulte [**SetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setpriorityclass)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Processo \_ do DEFINIR \_ cota** (0x0100)                  | Necessário para definir limites de memória usando [**SetProcessWorkingSetSize**](/windows/desktop/api/WinBase/nf-winbase-setprocessworkingsetsize).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Processo \_ do SUSPENDEr \_ retomar** (0x0800)             | Necessário para suspender ou retomar um processo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Processo \_ do TERMINAR** (0x0001)                   | Necessário para encerrar um processo usando [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Processo \_ do \_Operação de VM** (0x0008)               | Necessário para executar uma operação no espaço de endereço de um processo (consulte [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) e [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Processo \_ do \_Leitura da VM** (0x0010)                    | Necessário para ler a memória em um processo usando [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Processo \_ do \_Gravação de VM** (0x0020)                   | Necessário para gravar na memória em um processo usando [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Sincronizar** (0x00100000L)                     | Necessário aguardar até que o processo seja encerrado usando as [funções de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

Para abrir um identificador para outro processo e obter direitos de acesso completo, você deve habilitar o privilégio **SeDebugPrivilege** . Para obter mais informações, consulte [alterando privilégios em um token](../secbp/changing-privileges-in-a-token.md).

O identificador retornado pela função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) tem o **processo \_ todo \_** acesso de acesso ao objeto de processo. Quando você chama a função [**OpenProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess) , o sistema verifica os [direitos de acesso](../secauthz/access-rights-and-access-masks.md) solicitados em relação à DACL no descritor de segurança do processo. Quando você chama a função [**GetCurrentProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess) , o sistema retorna um pseudohandle com o acesso máximo que a DACL permite ao chamador.

Você pode solicitar o direito de acesso de **\_ \_ segurança do sistema de acesso** a um objeto de processo se desejar ler ou gravar a SACL do objeto. Para obter mais informações, consulte [listas de controle de acesso (ACLs)](../secauthz/access-control-lists.md) e [direito de acesso SACL](../secauthz/sacl-access-right.md).

> [!WARNING]
> Um processo que tem alguns dos direitos de acesso indicados aqui pode usá-los para obter outros direitos de acesso. Por exemplo, se o processo A tiver um identificador para o processo B com acesso de **\_ \_ identificador Dup de processo** , ele poderá duplicar o pseudodispositivo para o processo B. Isso cria um identificador que tem acesso máximo ao processo B. Para obter mais informações sobre pseudo-identificadores, consulte [**GetCurrentProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess).

 

## <a name="protected-processes"></a>Processos protegidos

O Windows Vista apresenta *processos protegidos* para aprimorar o suporte ao Rights Management digital. O sistema restringe o acesso a processos protegidos e a threads de processos protegidos.

Os direitos de acesso padrão a seguir não são permitidos de um processo para um processo protegido:

- **DELETE**  
- **controle de leitura \_**  
- **GRAVAR \_ DAC**  
- **proprietário da gravação \_**  

Os direitos de acesso específicos a seguir não são permitidos de um processo para um processo protegido:

- **PROCESSAR \_ todo o \_ acesso**  
- **processo de criação de processos \_ \_**  
- **PROCESSAR \_ criação de \_ thread**  
- **\_identificador de Dup de processo \_**  
- **PROCESSAR \_ informações de consulta \_**  
- **\_informações do conjunto de processos \_**  
- **\_cota do conjunto de processos \_**  
- **PROCESSAR \_ operação de VM \_**  
- **PROCESSAR \_ VM \_ lida**  
- **PROCESSAR \_ gravação de VM \_**  

O direito de **consulta de processo \_ limitado de \_ \_ informações** foi introduzido para fornecer acesso a um subconjunto das informações disponíveis por meio de **\_ \_ informações de consulta de processo**.
