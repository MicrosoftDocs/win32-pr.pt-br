---
description: 'Computadores com vários processadores são normalmente projetados para uma das duas arquiteturas: o NUMA (acesso não uniforme à memória) ou SMP (multiprocessamento simétrico).'
ms.assetid: 3c9186c8-a54d-4536-8237-bfff78cc7d11
title: Vários processadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0093404a0df653a153823915f1ac72b5e41d50c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105775665"
---
# <a name="multiple-processors"></a><span data-ttu-id="6563a-103">Vários processadores</span><span class="sxs-lookup"><span data-stu-id="6563a-103">Multiple Processors</span></span>

<span data-ttu-id="6563a-104">Computadores com vários processadores são normalmente projetados para uma das duas arquiteturas: o NUMA (acesso não uniforme à memória) ou SMP (multiprocessamento simétrico).</span><span class="sxs-lookup"><span data-stu-id="6563a-104">Computers with multiple processors are typically designed for one of two architectures: non-uniform memory access (NUMA) or symmetric multiprocessing (SMP).</span></span>

<span data-ttu-id="6563a-105">Em um computador NUMA, cada processador está mais próximo de algumas partes da memória do que outros, tornando o acesso à memória mais rápido para algumas partes da memória do que outras partes.</span><span class="sxs-lookup"><span data-stu-id="6563a-105">In a NUMA computer, each processor is closer to some parts of memory than others, making memory access faster for some parts of memory than other parts.</span></span> <span data-ttu-id="6563a-106">No modelo NUMA, o sistema tenta agendar threads em processadores que estão próximos da memória que está sendo usada.</span><span class="sxs-lookup"><span data-stu-id="6563a-106">Under the NUMA model, the system attempts to schedule threads on processors that are close to the memory being used.</span></span> <span data-ttu-id="6563a-107">Para obter mais informações sobre o NUMA, consulte [suporte a numa](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="6563a-107">For more information about NUMA, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="6563a-108">Em um computador SMP, dois ou mais processadores ou núcleos idênticos se conectam a uma única memória principal compartilhada.</span><span class="sxs-lookup"><span data-stu-id="6563a-108">In an SMP computer, two or more identical processors or cores connect to a single shared main memory.</span></span> <span data-ttu-id="6563a-109">No modelo SMP, qualquer thread pode ser atribuído a qualquer processador.</span><span class="sxs-lookup"><span data-stu-id="6563a-109">Under the SMP model, any thread can be assigned to any processor.</span></span> <span data-ttu-id="6563a-110">Portanto, o agendamento de threads em um computador SMP é semelhante ao agendamento de threads em um computador com um único processador.</span><span class="sxs-lookup"><span data-stu-id="6563a-110">Therefore, scheduling threads on an SMP computer is similar to scheduling threads on a computer with a single processor.</span></span> <span data-ttu-id="6563a-111">No entanto, o Agendador tem um pool de processadores, para que ele possa agendar a execução simultânea de threads.</span><span class="sxs-lookup"><span data-stu-id="6563a-111">However, the scheduler has a pool of processors, so that it can schedule threads to run concurrently.</span></span> <span data-ttu-id="6563a-112">O agendamento ainda é determinado pela prioridade do thread, mas pode ser influenciado pela definição da afinidade de thread e do processador de thread ideal, conforme discutido neste tópico.</span><span class="sxs-lookup"><span data-stu-id="6563a-112">Scheduling is still determined by thread priority, but it can be influenced by setting thread affinity and thread ideal processor, as discussed in this topic.</span></span>

## <a name="thread-affinity"></a><span data-ttu-id="6563a-113">Afinidade de thread</span><span class="sxs-lookup"><span data-stu-id="6563a-113">Thread Affinity</span></span>

<span data-ttu-id="6563a-114">A *afinidade de thread* força um thread a ser executado em um subconjunto específico de processadores.</span><span class="sxs-lookup"><span data-stu-id="6563a-114">*Thread affinity* forces a thread to run on a specific subset of processors.</span></span> <span data-ttu-id="6563a-115">Definir a afinidade de thread geralmente deve ser evitada, pois ela pode interferir na capacidade do Agendador de agendar threads com eficiência nos processadores.</span><span class="sxs-lookup"><span data-stu-id="6563a-115">Setting thread affinity should generally be avoided, because it can interfere with the scheduler's ability to schedule threads effectively across processors.</span></span> <span data-ttu-id="6563a-116">Isso pode diminuir os ganhos de desempenho produzidos pelo processamento paralelo.</span><span class="sxs-lookup"><span data-stu-id="6563a-116">This can decrease the performance gains produced by parallel processing.</span></span> <span data-ttu-id="6563a-117">Um uso apropriado da afinidade de thread está testando cada processador.</span><span class="sxs-lookup"><span data-stu-id="6563a-117">An appropriate use of thread affinity is testing each processor.</span></span>

<span data-ttu-id="6563a-118">O sistema representa a afinidade com uma bitmask chamada de máscara de afinidade de processador.</span><span class="sxs-lookup"><span data-stu-id="6563a-118">The system represents affinity with a bitmask called a processor affinity mask.</span></span> <span data-ttu-id="6563a-119">A máscara de afinidade é o tamanho do número máximo de processadores no sistema, com bits definidos para identificar um subconjunto de processadores.</span><span class="sxs-lookup"><span data-stu-id="6563a-119">The affinity mask is the size of the maximum number of processors in the system, with bits set to identify a subset of processors.</span></span> <span data-ttu-id="6563a-120">Inicialmente, o sistema determina o subconjunto de processadores na máscara.</span><span class="sxs-lookup"><span data-stu-id="6563a-120">Initially, the system determines the subset of processors in the mask.</span></span>

<span data-ttu-id="6563a-121">Você pode obter a afinidade de thread atual para todos os threads do processo chamando a função [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="6563a-121">You can obtain the current thread affinity for all threads of the process by calling the [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) function.</span></span> <span data-ttu-id="6563a-122">Use a função [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) para especificar a afinidade de thread para todos os threads do processo.</span><span class="sxs-lookup"><span data-stu-id="6563a-122">Use the [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) function to specify thread affinity for all threads of the process.</span></span> <span data-ttu-id="6563a-123">Para definir a afinidade de thread para um único thread, use a função [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="6563a-123">To set the thread affinity for a single thread, use the [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) function.</span></span> <span data-ttu-id="6563a-124">A afinidade de thread deve ser um subconjunto da afinidade de processo.</span><span class="sxs-lookup"><span data-stu-id="6563a-124">The thread affinity must be a subset of the process affinity.</span></span>

<span data-ttu-id="6563a-125">Em sistemas com mais de 64 processadores, a máscara de afinidade inicialmente representa os processadores em um único grupo de processador.</span><span class="sxs-lookup"><span data-stu-id="6563a-125">On systems with more than 64 processors, the affinity mask initially represents processors in a single processor group.</span></span> <span data-ttu-id="6563a-126">No entanto, a afinidade de thread pode ser definida como um processador em um grupo diferente, que altera a máscara de afinidade do processo.</span><span class="sxs-lookup"><span data-stu-id="6563a-126">However, thread affinity can be set to a processor in a different group, which alters the affinity mask for the process.</span></span> <span data-ttu-id="6563a-127">Para obter mais informações, consulte [grupos de processadores](processor-groups.md).</span><span class="sxs-lookup"><span data-stu-id="6563a-127">For more information, see [Processor Groups](processor-groups.md).</span></span>

## <a name="thread-ideal-processor"></a><span data-ttu-id="6563a-128">Processador de thread ideal</span><span class="sxs-lookup"><span data-stu-id="6563a-128">Thread Ideal Processor</span></span>

<span data-ttu-id="6563a-129">Quando você especifica um *processador ideal de thread*, o Agendador executa o thread no processador especificado quando possível.</span><span class="sxs-lookup"><span data-stu-id="6563a-129">When you specify a *thread ideal processor*, the scheduler runs the thread on the specified processor when possible.</span></span> <span data-ttu-id="6563a-130">Use a função [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) para especificar um processador preferencial para um thread.</span><span class="sxs-lookup"><span data-stu-id="6563a-130">Use the [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) function to specify a preferred processor for a thread.</span></span> <span data-ttu-id="6563a-131">Isso não garante que o processador ideal será escolhido, mas fornece uma dica útil ao agendador.</span><span class="sxs-lookup"><span data-stu-id="6563a-131">This does not guarantee that the ideal processor will be chosen but provides a useful hint to the scheduler.</span></span> <span data-ttu-id="6563a-132">Em sistemas com mais de 64 processadores, você pode usar a função [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) para especificar um processador preferencial em um grupo de processador específico.</span><span class="sxs-lookup"><span data-stu-id="6563a-132">On systems with more than 64 processors, you can use the [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) function to specify a preferred processor in a specific processor group.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6563a-133">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6563a-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6563a-134">Suporte a NUMA</span><span class="sxs-lookup"><span data-stu-id="6563a-134">NUMA Support</span></span>](numa-support.md)
</dt> <dt>

[<span data-ttu-id="6563a-135">Grupos de processadores</span><span class="sxs-lookup"><span data-stu-id="6563a-135">Processor Groups</span></span>](processor-groups.md)
</dt> </dl>

 

 
