---
description: O Microsoft Windows permite controlar o acesso a objetos de thread. Para obter mais informações sobre segurança, consulte Access-Control Modelo.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Segurança de thread e direitos de acesso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c5e14b634b9e41f592df4911211c3374a67166e36fc4735f4a90009275b5da1b
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/11/2021
ms.locfileid: "119427690"
---
# <a name="thread-security-and-access-rights"></a>Segurança de thread e direitos de acesso

O Microsoft Windows permite controlar o acesso a objetos de thread. Para obter mais informações sobre segurança, consulte [Modelo de controle de acesso.](../secauthz/access-control-model.md)

Você pode especificar um [descritor de](../secauthz/security-descriptors.md) segurança para um thread ao chamar a função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW,**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)ou [**CreateRemoteThread.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) Se você especificar **NULL,** o thread obtém um descritor de segurança padrão. As ACLs no descritor de segurança padrão para um thread vêm do token primário ou de representação do criador.

Para recuperar o descritor de segurança de um thread, chame a [**função GetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) Para alterar o descritor de segurança de um thread, chame a [**função SetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo)

O identificador retornado pela [**função CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) tem **acesso THREAD ALL \_ \_ ACCESS** ao objeto de thread. Quando você chama a [**função GetCurrentThread,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) o sistema retorna um pseudohandle com o acesso máximo que o descritor de segurança do thread permite ao chamador.

Os direitos de acesso válidos para objetos de thread incluem [os direitos de acesso padrão](../secauthz/standard-access-rights.md) e alguns direitos de acesso específicos do thread. A tabela a seguir lista os direitos de acesso padrão usados por todos os objetos.

| Valor                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **DELETE** (0x00010000L)        | Necessário para excluir o objeto .                                                                                                                                                                                                                                                           |
| **LEITURA \_ CONTROL** (0x00020000L) | Necessário para ler informações no descritor de segurança do objeto, não incluindo as informações na SACL. Para ler ou gravar a SACL, você deve solicitar o **direito de acesso ACCESS SYSTEM \_ \_ SECURITY.** Para obter mais informações, consulte [SACL Access Right](../secauthz/sacl-access-right.md). |
| **SYNCHRONIZE** (0x00100000L)   | O direito de usar o objeto para sincronização. Isso permite que um thread aguarde até que o objeto está no estado sinalizado.                                                                                                                                                                |
| **GRAVAÇÃO \_ DAC** (0x00040000L)    | Necessário para modificar a DACL no descritor de segurança para o objeto .                                                                                                                                                                                                                   |
| **GRAVAÇÃO \_ OWNER** (0x00080000L)  | Necessário para alterar o proprietário no descritor de segurança para o objeto .                                                                                                                                                                                                                  |



 

A tabela a seguir lista os direitos de acesso específicos do thread.



| Valor                                            | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **SYNCHRONIZE** (0x00100000L)                    | Habilita o uso do alça de thread em qualquer uma das [funções de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ ALL \_ ACCESS**                          | Todos os direitos de acesso possíveis para um objeto de thread. **Windows Server 2003 e Windows XP:** O valor do **sinalizador THREAD \_ ALL \_ ACCESS** aumentou Windows Server 2008 e Windows Vista. Se um aplicativo compilado para o Windows Server 2008 e o Windows Vista for executado no Windows Server 2003 ou no Windows XP, o **sinalizador THREAD \_ ALL \_ ACCESS** conterá bits de acesso sem suporte e a função que especifica esse sinalizador falhará com ACESSO DE ERRO **\_ \_ NEGADO.** Para evitar esse problema, especifique o conjunto mínimo de direitos de acesso necessários para a operação. Se **THREAD ALL ACCESS \_ \_ tiver** que ser usado, deverão ser definidos **\_ WIN32 \_ WINNT** como o sistema operacional mínimo direcionado pelo seu aplicativo (por exemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obter mais informações, [consulte Using the Windows Headers](../winprog/using-the-windows-headers.md). <br/> |
| **THREAD \_ DIRECT \_ IMPERSONATION** (0x0200)       | Necessário para um thread de servidor que representa um cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ GET \_ CONTEXT** (0x0008)                | Necessário para ler o contexto de um thread usando [**GetThreadContext.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ IMPERSONATE** (0x0100)                 | Necessário para usar as informações de segurança de um thread diretamente sem chamá-lo usando um mecanismo de comunicação que fornece serviços de representação.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **THREAD \_ INFORMAÇÕES DE \_ CONSULTA** (0x0040)          | Necessário para ler determinadas informações do objeto de thread, como o código de saída (consulte [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ CONSULTAR INFORMAÇÕES \_ \_ LIMITADAS** (0x0800) | Necessário para ler determinadas informações dos objetos de thread (consulte [**GetProcessIdOfThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread)). Um handle que tem o **direito de acesso THREAD \_ QUERY \_ INFORMATION** é automaticamente concedido **THREAD \_ QUERY LIMITED \_ \_ INFORMATION**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **THREAD \_ SET \_ CONTEXT** (0x0010)                | Necessário para gravar o contexto de um thread usando [**SetThreadContext.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **THREAD \_ SET \_ INFORMATION** (0x0020)            | Necessário para definir determinadas informações no objeto de thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ SET \_ LIMITED \_ INFORMATION** (0x0400)   | Necessário para definir determinadas informações no objeto de thread. Um handle que tem o **direito de acesso THREAD SET \_ \_ INFORMATION** é automaticamente concedido **THREAD SET LIMITED \_ \_ \_ INFORMATION**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **THREAD \_ SET \_ THREAD \_ TOKEN** (0x0080)          | Necessário para definir o token de representação para um thread usando [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ SUSPEND \_ RESUME** (0x0002)             | Necessário para suspender ou retomar um thread (consulte [**SuspendThread e**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ TERMINATE** (0x0001)                   | Necessário para encerrar um thread usando [**TerminateThread.**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Você pode solicitar o **direito de acesso ACCESS SYSTEM \_ \_ SECURITY** a um objeto de thread se quiser ler ou gravar a SACL do objeto. Para obter mais informações, consulte [ACLs (Listas de Controle](../secauthz/access-control-lists.md) de Acesso) e [Direito de Acesso SACL.](../secauthz/sacl-access-right.md)

## <a name="protected-processes"></a>Processos protegidos

*Os processos protegidos* aprimoram o suporte para Rights Management. O sistema restringe o acesso a processos protegidos e aos threads de processos protegidos.

**Windows Server 2003 e Windows XP:** Processos protegidos foram adicionados a partir do Windows Vista.

Os seguintes direitos de acesso específicos não são permitidos de um processo para os threads de um processo protegido:

**THREAD \_ ALL \_ ACCESS**  
**REPRESENTAÇÃO \_ DIRETA \_ DE THREAD**  
**CONTEXTO \_ GET \_ DO THREAD**  
**REPRESENTAÇÃO \_ DE THREAD**  
**INFORMAÇÕES \_ DE CONSULTA DE \_ THREAD**  
**CONTEXTO DO \_ CONJUNTO DE \_ THREADS**  
**INFORMAÇÕES DO \_ CONJUNTO DE \_ THREADS**  
**THREAD \_ SET \_ TOKEN**  
**THREAD \_ TERMINATE**  


O **direito THREAD \_ QUERY LIMITED \_ \_ INFORMATION** foi introduzido para fornecer acesso a um subconjunto das informações disponíveis por meio de **INFORMAÇÕES DE CONSULTA \_ \_ THREAD**.

 

 
