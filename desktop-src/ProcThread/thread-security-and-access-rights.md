---
description: O Microsoft Windows permite que você controle o acesso a objetos de thread. Para obter mais informações sobre segurança, consulte modelo de Access-Control.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Segurança de thread e direitos de acesso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e16b0ac5b4142f819d59775014a82a79a188bdd3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105760807"
---
# <a name="thread-security-and-access-rights"></a>Segurança de thread e direitos de acesso

O Microsoft Windows permite que você controle o acesso a objetos de thread. Para obter mais informações sobre segurança, consulte [modelo de controle de acesso](../secauthz/access-control-model.md).

Você pode especificar um [descritor de segurança](../secauthz/security-descriptors.md) para um thread ao chamar a função [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)ou [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) . Se você especificar **NULL**, o thread obterá um descritor de segurança padrão. As ACLs no descritor de segurança padrão de um thread são provenientes do token principal ou de representação do criador.

Para recuperar o descritor de segurança de um thread, chame a função [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) . Para alterar o descritor de segurança de um thread, chame a função [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .

O identificador retornado pela função [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) tem acesso ao **thread a \_ todos os \_** acessos ao objeto de thread. Quando você chama a função [**GetCurrentThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) , o sistema retorna um pseudohandle com o acesso máximo que o descritor de segurança do thread permite ao chamador.

Os direitos de acesso válidos para objetos de thread incluem os [direitos de acesso padrão](../secauthz/standard-access-rights.md) e alguns direitos de acesso específicos ao thread. A tabela a seguir lista os direitos de acesso padrão usados por todos os objetos.

| Valor                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Excluir** (0x00010000L)        | Necessário para excluir o objeto.                                                                                                                                                                                                                                                           |
| **Ler \_ CONTROL** (0x00020000L) | Necessário para ler informações no descritor de segurança do objeto, não incluindo as informações na SACL. Para ler ou gravar a SACL, você deve solicitar o direito de acesso de **\_ \_ segurança do sistema de acesso** . Para obter mais informações, consulte [direitos de acesso à SACL](../secauthz/sacl-access-right.md). |
| **Sincronizar** (0x00100000L)   | O direito de usar o objeto para sincronização. Isso permite que um thread aguarde até que o objeto esteja no estado sinalizado.                                                                                                                                                                |
| **Gravar \_ DAC** (0x00040000L)    | Necessário para modificar a DACL no descritor de segurança do objeto.                                                                                                                                                                                                                   |
| **Gravar \_ PROPRIETÁRIO** (0x00080000L)  | Necessário para alterar o proprietário no descritor de segurança do objeto.                                                                                                                                                                                                                  |



 

A tabela a seguir lista os direitos de acesso específicos ao thread.



| Valor                                            | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Sincronizar** (0x00100000L)                    | Habilita o uso do identificador de thread em qualquer uma das [funções de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **\_todos os \_ acessos a thread**                          | Todos os direitos de acesso possíveis para um objeto de thread. **Windows Server 2003 e Windows XP:** O valor do sinalizador **thread \_ All \_ Access** aumentou no Windows Server 2008 e no Windows Vista. Se um aplicativo compilado para o Windows Server 2008 e o Windows Vista for executado no Windows Server 2003 ou no Windows XP, o sinalizador **thread \_ All \_ Access** conterá bits de acesso que não têm suporte e a função que especifica esse sinalizador falhará com o **erro \_ acesso \_ negado**. Para evitar esse problema, especifique o conjunto mínimo de direitos de acesso necessário para a operação. Se **\_ todos os \_ acessos ao thread** tiverem que ser usados, defina o **\_ Win32 \_ WinNT** para o sistema operacional mínimo direcionado ao seu aplicativo (por exemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obter mais informações, consulte [usando os cabeçalhos do Windows](../winprog/using-the-windows-headers.md). <br/> |
| **Thread \_ do \_Representação direta** (0x0200)       | Necessário para um thread de servidor que representa um cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Thread \_ do OBTER \_ contexto** (0x0008)                | Necessário para ler o contexto de um thread usando [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Thread \_ do REPRESENTAR** (0x0100)                 | Necessário para usar as informações de segurança de um thread diretamente sem chamá-lo usando um mecanismo de comunicação que fornece serviços de representação.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Thread \_ do \_Informações de consulta** (0x0040)          | Necessário para ler determinadas informações do objeto de thread, como o código de saída (consulte [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Thread \_ do \_ \_ Informações limitadas de consulta** (0x0800) | Necessário para ler determinadas informações dos objetos de thread (consulte [**GetProcessIdOfThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread)). Um identificador que tem o direito de acesso **\_ \_ às informações de consulta de thread** recebe automaticamente **\_ \_ \_ as informações limitadas de consulta de thread**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Thread \_ do DEFINIR \_ contexto** (0x0010)                | Necessário para gravar o contexto de um thread usando [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Thread \_ do DEFINIR \_ informações** (0x0020)            | Necessário para definir determinadas informações no objeto de thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Thread \_ do DEFINIR \_ \_ informações limitadas** (0x0400)   | Necessário para definir determinadas informações no objeto de thread. Um identificador que tem o direito de acesso **\_ \_ às informações do conjunto de threads** recebe automaticamente **\_ \_ \_ as informações limitadas do conjunto de threads**.**Windows Server 2003 e Windows XP:** não há suporte para esse direito de acesso.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Thread \_ do DEFINIR \_ \_ token de thread** (0x0080)          | Necessário para definir o token de representação para um thread usando [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Thread \_ do SUSPENDEr \_ retomar** (0x0002)             | Necessário para suspender ou retomar um thread (consulte [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) e [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Thread \_ do TERMINAR** (0x0001)                   | Necessário para encerrar um thread usando [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Você pode solicitar o direito de acesso de **\_ \_ segurança do sistema de acesso** a um objeto de thread se desejar ler ou gravar a SACL do objeto. Para obter mais informações, consulte [listas de controle de acesso (ACLs)](../secauthz/access-control-lists.md) e [direito de acesso SACL](../secauthz/sacl-access-right.md).

## <a name="protected-processes"></a>Processos protegidos

*Processos protegidos* aprimoram o suporte para Rights Management digital. O sistema restringe o acesso a processos protegidos e a threads de processos protegidos.

**Windows Server 2003 e Windows XP:** Processos protegidos foram adicionados a partir do Windows Vista.

Os direitos de acesso específicos a seguir não são permitidos de um processo para os threads de um processo protegido:

**\_todos os \_ acessos a thread**  
**representação de THREAD \_ direto \_**  
**\_contexto de obtenção de thread \_**  
**representação de THREAD \_**  
**\_informações de consulta de thread \_**  
**\_contexto do conjunto de threads \_**  
**\_informações do conjunto de threads \_**  
**\_token do conjunto de threads \_**  
**término do THREAD \_**  


O direito de **\_ \_ \_ informações limitadas de consulta de thread** foi introduzido para fornecer acesso a um subconjunto das informações disponíveis por meio de **\_ \_ informações de consulta de thread**.

 

 
