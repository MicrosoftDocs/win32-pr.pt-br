---
description: Uma hora do arquivo é um valor de 64 bits que representa o número de intervalos de 100 nanossegundos decorridos desde as 12:00 A.M. 1º de janeiro de 1601 UTC (tempo Universal Coordenado). O sistema registra os horários dos arquivos quando os aplicativos criam, acessam e gravam em arquivos.
ms.assetid: 52d80b82-9ab0-4631-9e70-85df21da4946
title: Horas de arquivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5919a2378e08798e4cd64d8f8357cb55692bd22e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103837490"
---
# <a name="file-times"></a><span data-ttu-id="a7224-105">Horas de arquivo</span><span class="sxs-lookup"><span data-stu-id="a7224-105">File Times</span></span>

<span data-ttu-id="a7224-106">Uma *hora do arquivo* é um valor de 64 bits que representa o número de intervalos de 100 nanossegundos decorridos desde as 12:00 A.M.</span><span class="sxs-lookup"><span data-stu-id="a7224-106">A *file time* is a 64-bit value that represents the number of 100-nanosecond intervals that have elapsed since 12:00 A.M.</span></span> <span data-ttu-id="a7224-107">1º de janeiro de 1601 UTC (tempo Universal Coordenado).</span><span class="sxs-lookup"><span data-stu-id="a7224-107">January 1, 1601 Coordinated Universal Time (UTC).</span></span> <span data-ttu-id="a7224-108">O sistema registra os horários dos arquivos quando os aplicativos criam, acessam e gravam em arquivos.</span><span class="sxs-lookup"><span data-stu-id="a7224-108">The system records file times when applications create, access, and write to files.</span></span>

<span data-ttu-id="a7224-109">O sistema de arquivos NTFS armazena valores de tempo no formato UTC, portanto, eles não são afetados por alterações no fuso horário ou no horário de verão.</span><span class="sxs-lookup"><span data-stu-id="a7224-109">The NTFS file system stores time values in UTC format, so they are not affected by changes in time zone or daylight saving time.</span></span> <span data-ttu-id="a7224-110">O sistema de arquivos FAT armazena valores de tempo com base na hora local do computador.</span><span class="sxs-lookup"><span data-stu-id="a7224-110">The FAT file system stores time values based on the local time of the computer.</span></span> <span data-ttu-id="a7224-111">Por exemplo, um arquivo que é salvo em 3:13h PST em Washington é visto como 6:13h EST em Nova York em um volume NTFS, mas é visto como 3:13h EST em Nova York em um volume FAT.</span><span class="sxs-lookup"><span data-stu-id="a7224-111">For example, a file that is saved at 3:00pm PST in Washington is seen as 6:00pm EST in New York on an NTFS volume, but it is seen as 3:00pm EST in New York on a FAT volume.</span></span>

<span data-ttu-id="a7224-112">Os carimbos de data/hora são atualizados em vários momentos e por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="a7224-112">Time stamps are updated at various times and for various reasons.</span></span> <span data-ttu-id="a7224-113">A única garantia de um carimbo de data/hora do arquivo é que a hora do arquivo é refletida corretamente quando o identificador que faz a alteração é fechado.</span><span class="sxs-lookup"><span data-stu-id="a7224-113">The only guarantee about a file time stamp is that the file time is correctly reflected when the handle that makes the change is closed.</span></span>

<span data-ttu-id="a7224-114">Nem todos os sistemas de arquivos podem registrar a criação e os últimos tempos de acesso, e nem todos os sistemas de arquivos os registram da mesma maneira.</span><span class="sxs-lookup"><span data-stu-id="a7224-114">Not all file systems can record creation and last access times, and not all file systems record them in the same manner.</span></span> <span data-ttu-id="a7224-115">Por exemplo, a resolução de tempo de criação em FAT é de 10 milissegundos, enquanto o tempo de gravação tem uma resolução de 2 segundos e o tempo de acesso tem uma resolução de 1 dia, portanto, é realmente a data de acesso.</span><span class="sxs-lookup"><span data-stu-id="a7224-115">For example, the resolution of create time on FAT is 10 milliseconds, while write time has a resolution of 2 seconds and access time has a resolution of 1 day, so it is really the access date.</span></span> <span data-ttu-id="a7224-116">O sistema de arquivos NTFS atrasa as atualizações para o último horário de acesso de um arquivo em até 1 hora após o último acesso.</span><span class="sxs-lookup"><span data-stu-id="a7224-116">The NTFS file system delays updates to the last access time for a file by up to 1 hour after the last access.</span></span>

<span data-ttu-id="a7224-117">Para recuperar os tempos de arquivo para um arquivo especificado, use a função [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-117">To retrieve the file times for a specified file, use the [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) function.</span></span> <span data-ttu-id="a7224-118">**GetFileTime** copia a criação, o último acesso e as últimas horas de gravação para estruturas [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) individuais.</span><span class="sxs-lookup"><span data-stu-id="a7224-118">**GetFileTime** copies the creation, last access, and last write times to individual [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structures.</span></span> <span data-ttu-id="a7224-119">Você também pode recuperar os horários de arquivo usando as funções [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) e [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) .</span><span class="sxs-lookup"><span data-stu-id="a7224-119">You can also retrieve file times using the [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) and [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) functions.</span></span> <span data-ttu-id="a7224-120">Essas funções copiam as horas do arquivo para estruturas **FILETIME** em uma estrutura de [**dados de \_ localização \_ do Win32**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) .</span><span class="sxs-lookup"><span data-stu-id="a7224-120">These functions copy the file times to **FILETIME** structures in a [**WIN32\_FIND\_DATA**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) structure.</span></span> <span data-ttu-id="a7224-121">Ao gravar em um arquivo, a hora da última gravação não é totalmente atualizada até que todos os identificadores usados para gravação sejam fechados.</span><span class="sxs-lookup"><span data-stu-id="a7224-121">When writing to a file, the last write time is not fully updated until all handles that are used for writing are closed.</span></span>

<span data-ttu-id="a7224-122">Para definir os tempos de arquivo para um arquivo, use a função [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-122">To set the file times for a file, use the [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) function.</span></span> <span data-ttu-id="a7224-123">Essa função permite que você modifique as horas de criação, último acesso e última gravação sem alterar o conteúdo do arquivo.</span><span class="sxs-lookup"><span data-stu-id="a7224-123">This function lets you modify creation, last access, and last write times without changing the content of the file.</span></span> <span data-ttu-id="a7224-124">Você pode comparar os tempos de arquivos diferentes usando a função [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-124">You can compare the times of different files by using the [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) function.</span></span> <span data-ttu-id="a7224-125">A função compara duas horas de arquivo e retorna um valor que indica qual é a hora posterior ou retorna 0 (zero) se as horas forem iguais.</span><span class="sxs-lookup"><span data-stu-id="a7224-125">The function compares two file times and returns a value that indicates which time is later or returns 0 (zero) if the times are equal.</span></span>

<span data-ttu-id="a7224-126">Se você planeja modificar os horários de arquivo para arquivos especificados, você pode converter uma data e hora do dia em uma hora de arquivo usando a função [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-126">If you plan to modify file times for specified files, you can convert a date and time of day to a file time by using the [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) function.</span></span> <span data-ttu-id="a7224-127">Você também pode obter a hora do sistema em uma estrutura [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) chamando a função [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-127">You can also obtain the system time in a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure by calling the [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) function.</span></span>

<span data-ttu-id="a7224-128">Para facilitar a exibição de uma hora do arquivo para um usuário, use a função [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-128">To make a file time easy to display to a user, use the [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) function.</span></span> <span data-ttu-id="a7224-129">**FileTimeToSystemTime** converte a hora do arquivo e copia o mês, o dia, o ano e a hora do dia a partir da hora do arquivo para uma estrutura [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-129">**FileTimeToSystemTime** converts the file time and copies the month, day, year, and time of day from the file time to a [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) structure.</span></span>

## <a name="file-times-and-daylight-saving-time"></a><span data-ttu-id="a7224-130">Horas de arquivo e horário de verão</span><span class="sxs-lookup"><span data-stu-id="a7224-130">File Times and Daylight Saving Time</span></span>

<span data-ttu-id="a7224-131">Você deve tomar cuidado ao usar os horários de arquivo se o usuário tiver definido o sistema para se ajustar automaticamente para o horário de verão.</span><span class="sxs-lookup"><span data-stu-id="a7224-131">You must take care when using file times if the user has set the system to automatically adjust for daylight saving time.</span></span>

<span data-ttu-id="a7224-132">Para converter uma hora de arquivo em hora local, use a função [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) .</span><span class="sxs-lookup"><span data-stu-id="a7224-132">To convert a file time to local time, use the [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) function.</span></span> <span data-ttu-id="a7224-133">No entanto, o **FileTimeToLocalFileTime** usa as configurações atuais para o fuso horário e o horário de verão.</span><span class="sxs-lookup"><span data-stu-id="a7224-133">However, **FileTimeToLocalFileTime** uses the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="a7224-134">Portanto, se for o horário de verão, ele levará o horário de verão em conta, mesmo se a hora do arquivo que você está convertendo estiver no horário padrão.</span><span class="sxs-lookup"><span data-stu-id="a7224-134">Therefore, if it is daylight saving time, it takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="a7224-135">O sistema de arquivos FAT registra as horas no disco na hora local.</span><span class="sxs-lookup"><span data-stu-id="a7224-135">The FAT file system records times on disk in local time.</span></span> <span data-ttu-id="a7224-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) recupera horas UTC em cache do sistema de arquivos FAT.</span><span class="sxs-lookup"><span data-stu-id="a7224-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) retrieves cached UTC times from the FAT file system.</span></span> <span data-ttu-id="a7224-137">Quando se torna o horário de verão, o tempo recuperado por **GetFileTime** é de uma hora, pois o cache não é atualizado.</span><span class="sxs-lookup"><span data-stu-id="a7224-137">When it becomes daylight saving time, the time retrieved by **GetFileTime** is off an hour, because the cache is not updated.</span></span> <span data-ttu-id="a7224-138">Quando você reinicia o computador, o tempo em cache que o **GetFileTime** recupera está correto.</span><span class="sxs-lookup"><span data-stu-id="a7224-138">When you restart the computer, the cached time that **GetFileTime** retrieves is correct.</span></span> <span data-ttu-id="a7224-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) recupera a hora local do sistema de arquivos FAT e a converte em UTC usando as configurações atuais para o fuso horário e o horário de verão.</span><span class="sxs-lookup"><span data-stu-id="a7224-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) retrieves the local time from the FAT file system and converts it to UTC by using the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="a7224-140">Portanto, se for o horário de verão, o **FindFirstFile** usará o horário de verão, mesmo se a hora do arquivo que você está convertendo estiver no horário padrão.</span><span class="sxs-lookup"><span data-stu-id="a7224-140">Therefore, if it is daylight saving time, **FindFirstFile** takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="a7224-141">O sistema de arquivos NTFS registra os horários em disco em UTC.</span><span class="sxs-lookup"><span data-stu-id="a7224-141">The NTFS file system records times on disk in UTC.</span></span> <span data-ttu-id="a7224-142">Para considerar o horário de verão ao converter uma hora de arquivo em uma hora local, use a seguinte sequência de funções em vez de usar [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span><span class="sxs-lookup"><span data-stu-id="a7224-142">To account for daylight saving time when converting a file time to a local time, use the following sequence of functions instead of using [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span></span>

-   [<span data-ttu-id="a7224-143">**FileTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="a7224-143">**FileTimeToSystemTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime)
-   [<span data-ttu-id="a7224-144">**SystemTimeToTzSpecificLocalTime**</span><span class="sxs-lookup"><span data-stu-id="a7224-144">**SystemTimeToTzSpecificLocalTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime)
-   [<span data-ttu-id="a7224-145">**SystemTimeToFileTime**</span><span class="sxs-lookup"><span data-stu-id="a7224-145">**SystemTimeToFileTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime)

## <a name="file-times-and-cdfs"></a><span data-ttu-id="a7224-146">Horas de arquivo e CDFS</span><span class="sxs-lookup"><span data-stu-id="a7224-146">File Times and CDFS</span></span>

<span data-ttu-id="a7224-147">Os carimbos de data e hora dos arquivos que estão localizados ou originários da mídia usando o sistema de arquivos do CD (CDFS) são ajustados para o fuso horário local.</span><span class="sxs-lookup"><span data-stu-id="a7224-147">The date and time stamps of files that are located on or originate from media using Compact Disc File System (CDFS) are adjusted for the local time zone.</span></span> <span data-ttu-id="a7224-148">O ISO 9660 afirma que o CDFS é exibir as informações de data corretamente para o fuso horário local.</span><span class="sxs-lookup"><span data-stu-id="a7224-148">ISO 9660 states that CDFS is to display the date information correctly for the local time zone.</span></span> <span data-ttu-id="a7224-149">Isso é feito para que as datas de arquivos em CDFS sejam exibidas da mesma forma que no formato de disco universal (UDF).</span><span class="sxs-lookup"><span data-stu-id="a7224-149">This is done so that dates for files on CDFS are displayed the same as those on Universal Disk Format (UDF).</span></span> <span data-ttu-id="a7224-150">UDF é o padrão mais recente para mídia de distribuição.</span><span class="sxs-lookup"><span data-stu-id="a7224-150">UDF is the newer standard for distribution media.</span></span> <span data-ttu-id="a7224-151">Se seu código depende das informações de data não modificadas de um arquivo que reside ou se origina da mídia usando CDFS, ele pode não funcionar corretamente.</span><span class="sxs-lookup"><span data-stu-id="a7224-151">If your code depends on the unmodified date information for a file that resides on or originates from media using CDFS, it may not function correctly.</span></span>

 

 
