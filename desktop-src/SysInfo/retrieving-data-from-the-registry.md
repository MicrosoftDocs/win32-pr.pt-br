---
description: Para recuperar dados do registro, um aplicativo normalmente enumera as subchaves de uma chave até encontrar uma específica e, em seguida, recupera os dados do valor ou valores associados a ela.
ms.assetid: ce4be388-5506-4d01-a73c-33372ef4ccd7
title: Recuperando dados do registro
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45d8dd6f6e4d667cf2760c7cba441200755fb6c3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104011666"
---
# <a name="retrieving-data-from-the-registry"></a><span data-ttu-id="a00c0-103">Recuperando dados do registro</span><span class="sxs-lookup"><span data-stu-id="a00c0-103">Retrieving Data from the Registry</span></span>

<span data-ttu-id="a00c0-104">Para recuperar dados do registro, um aplicativo normalmente enumera as subchaves de uma chave até encontrar uma específica e, em seguida, recupera os dados do valor ou valores associados a ela.</span><span class="sxs-lookup"><span data-stu-id="a00c0-104">To retrieve data from the registry, an application typically enumerates the subkeys of a key until it finds a particular one and then retrieves data from the value or values associated with it.</span></span> <span data-ttu-id="a00c0-105">Um aplicativo pode chamar a função [**RegEnumKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) para enumerar as subchaves de uma determinada chave.</span><span class="sxs-lookup"><span data-stu-id="a00c0-105">An application can call the [**RegEnumKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) function to enumerate the subkeys of a given key.</span></span>

<span data-ttu-id="a00c0-106">Para recuperar dados detalhados sobre uma determinada subchave, um aplicativo pode chamar a função [**RegQueryInfoKey**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) .</span><span class="sxs-lookup"><span data-stu-id="a00c0-106">To retrieve detailed data about a particular subkey, an application can call the [**RegQueryInfoKey**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) function.</span></span> <span data-ttu-id="a00c0-107">A função [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) recupera uma cópia do descritor de segurança protegendo uma chave.</span><span class="sxs-lookup"><span data-stu-id="a00c0-107">The [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) function retrieves a copy of the security descriptor protecting a key.</span></span>

<span data-ttu-id="a00c0-108">Um aplicativo pode usar a função [**RegEnumValue**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) para enumerar os valores de uma determinada chave e a função [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) para recuperar um valor específico para uma chave.</span><span class="sxs-lookup"><span data-stu-id="a00c0-108">An application can use the [**RegEnumValue**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) function to enumerate the values for a given key, and [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) function to retrieve a particular value for a key.</span></span> <span data-ttu-id="a00c0-109">Um aplicativo normalmente chama **RegEnumValue** para determinar os nomes de valor e, em seguida, **RegQueryValueEx** para recuperar os dados para os nomes.</span><span class="sxs-lookup"><span data-stu-id="a00c0-109">An application typically calls **RegEnumValue** to determine the value names and then **RegQueryValueEx** to retrieve the data for the names.</span></span>

<span data-ttu-id="a00c0-110">A função [**RegQueryMultipleValues**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) recupera o tipo e os dados para uma lista de nomes de valores associados a uma chave de registro aberta.</span><span class="sxs-lookup"><span data-stu-id="a00c0-110">The [**RegQueryMultipleValues**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) function retrieves the type and data for a list of value names associated with an open registry key.</span></span> <span data-ttu-id="a00c0-111">Essa função é útil para provedores de chaves dinâmicas porque garante a consistência dos dados recuperando vários valores em uma operação atômica.</span><span class="sxs-lookup"><span data-stu-id="a00c0-111">This function is useful for dynamic key providers because it assures consistency of data by retrieving multiple values in an atomic operation.</span></span>

<span data-ttu-id="a00c0-112">Como outros aplicativos podem alterar os dados em um valor de registro entre o momento em que o aplicativo pode ler um valor e usá-lo, talvez seja necessário garantir que seu aplicativo tenha os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="a00c0-112">Because other applications can change the data in a registry value between the time your application can read a value and use it, you may need to ensure your application has the latest data.</span></span> <span data-ttu-id="a00c0-113">Você pode usar a função [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) para notificar o thread de chamada quando houver alterações nos atributos ou no conteúdo de uma chave do registro ou se a chave for excluída.</span><span class="sxs-lookup"><span data-stu-id="a00c0-113">You can use the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function to notify the calling thread when there are changes to the attributes or contents of a registry key, or if the key is deleted.</span></span> <span data-ttu-id="a00c0-114">A função sinaliza um objeto de evento para notificar o chamador.</span><span class="sxs-lookup"><span data-stu-id="a00c0-114">The function signals an event object to notify the caller.</span></span> <span data-ttu-id="a00c0-115">Se o thread que chama **RegNotifyChangeKeyValue** for encerrado, o evento será sinalizado e o monitoramento da chave do registro será interrompido.</span><span class="sxs-lookup"><span data-stu-id="a00c0-115">If the thread that calls **RegNotifyChangeKeyValue** exits, the event is signaled and the monitoring of the registry key is stopped.</span></span>

<span data-ttu-id="a00c0-116">Você pode controlar ou especificar quais alterações devem ser relatadas por meio do uso de um filtro ou sinalizador de notificação.</span><span class="sxs-lookup"><span data-stu-id="a00c0-116">You can control or specify what changes should be reported through the use of a notify filter or flag.</span></span> <span data-ttu-id="a00c0-117">Normalmente, as alterações são relatadas sinalizando um evento que você especifica para a função.</span><span class="sxs-lookup"><span data-stu-id="a00c0-117">Usually, changes are reported by signaling an event that you specify to the function.</span></span> <span data-ttu-id="a00c0-118">Observe que a função [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) não funciona com identificadores remotos.</span><span class="sxs-lookup"><span data-stu-id="a00c0-118">Note that the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function does not work with remote handles.</span></span>

<span data-ttu-id="a00c0-119">Para monitorar as operações de registro mais detalhadamente, consulte [**registro**](/windows/desktop/ETW/registry).</span><span class="sxs-lookup"><span data-stu-id="a00c0-119">To monitor registry operations in more detail, see [**Registry**](/windows/desktop/ETW/registry).</span></span>

 

 
