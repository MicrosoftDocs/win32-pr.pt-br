---
description: As funções Wait permitem que um thread bloqueie sua própria execução.
ms.assetid: 9c66c71d-fdfd-42ae-895c-2fc842b5bc7a
title: Funções de espera
ms.topic: article
ms.date: 06/25/2020
ms.openlocfilehash: f5a21b0d95a316b926fcaad037004edc8c418246
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105748373"
---
# <a name="wait-functions"></a><span data-ttu-id="7488d-103">Funções de espera</span><span class="sxs-lookup"><span data-stu-id="7488d-103">Wait Functions</span></span>

<span data-ttu-id="7488d-104">As *funções Wait* permitem que um thread bloqueie sua própria execução.</span><span class="sxs-lookup"><span data-stu-id="7488d-104">*Wait functions* allow a thread to block its own execution.</span></span> <span data-ttu-id="7488d-105">As funções Wait não retornam até que os critérios especificados tenham sido atendidos.</span><span class="sxs-lookup"><span data-stu-id="7488d-105">The wait functions do not return until the specified criteria have been met.</span></span> <span data-ttu-id="7488d-106">O tipo de função Wait determina o conjunto de critérios usados.</span><span class="sxs-lookup"><span data-stu-id="7488d-106">The type of wait function determines the set of criteria used.</span></span> <span data-ttu-id="7488d-107">Quando uma função Wait é chamada, ela verifica se os critérios de espera foram atendidos.</span><span class="sxs-lookup"><span data-stu-id="7488d-107">When a wait function is called, it checks whether the wait criteria have been met.</span></span> <span data-ttu-id="7488d-108">Se os critérios não tiverem sido atendidos, o thread de chamada entrará no estado de espera até que as condições dos critérios de espera tenham sido atendidas ou o intervalo de tempo limite especificado decorra.</span><span class="sxs-lookup"><span data-stu-id="7488d-108">If the criteria have not been met, the calling thread enters the wait state until the conditions of the wait criteria have been met or the specified time-out interval elapses.</span></span>

-   [<span data-ttu-id="7488d-109">Funções de espera de objeto único</span><span class="sxs-lookup"><span data-stu-id="7488d-109">Single-object Wait Functions</span></span>](#single-object-wait-functions)
-   [<span data-ttu-id="7488d-110">Funções de espera de vários objetos</span><span class="sxs-lookup"><span data-stu-id="7488d-110">Multiple-object Wait Functions</span></span>](#multiple-object-wait-functions)
-   [<span data-ttu-id="7488d-111">Funções de espera alertáveis</span><span class="sxs-lookup"><span data-stu-id="7488d-111">Alertable Wait Functions</span></span>](#alertable-wait-functions)
-   [<span data-ttu-id="7488d-112">Funções de espera registradas</span><span class="sxs-lookup"><span data-stu-id="7488d-112">Registered Wait Functions</span></span>](#registered-wait-functions)
-   [<span data-ttu-id="7488d-113">Aguardando um endereço</span><span class="sxs-lookup"><span data-stu-id="7488d-113">Waiting on an Address</span></span>](#waiting-on-an-address)
-   [<span data-ttu-id="7488d-114">Funções de espera e intervalos de tempo limite</span><span class="sxs-lookup"><span data-stu-id="7488d-114">Wait Functions and Time-out Intervals</span></span>](#wait-functions-and-time-out-intervals)
-   [<span data-ttu-id="7488d-115">Funções de espera e objetos de sincronização</span><span class="sxs-lookup"><span data-stu-id="7488d-115">Wait Functions and Synchronization Objects</span></span>](#wait-functions-and-synchronization-objects)
-   [<span data-ttu-id="7488d-116">Funções de espera e criação de janelas</span><span class="sxs-lookup"><span data-stu-id="7488d-116">Wait Functions and Creating Windows</span></span>](#wait-functions-and-creating-windows)

## <a name="single-object-wait-functions"></a><span data-ttu-id="7488d-117">Funções de espera de objeto único</span><span class="sxs-lookup"><span data-stu-id="7488d-117">Single-object Wait Functions</span></span>

<span data-ttu-id="7488d-118">As funções [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject)e [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) exigem um identificador para um objeto de sincronização.</span><span class="sxs-lookup"><span data-stu-id="7488d-118">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions require a handle to one synchronization object.</span></span> <span data-ttu-id="7488d-119">Essas funções retornam quando ocorre uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="7488d-119">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="7488d-120">O objeto especificado está no estado sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-120">The specified object is in the signaled state.</span></span>
-   <span data-ttu-id="7488d-121">O intervalo de tempo limite expirou.</span><span class="sxs-lookup"><span data-stu-id="7488d-121">The time-out interval elapses.</span></span> <span data-ttu-id="7488d-122">O intervalo de tempo limite pode ser definido como **infinito** para especificar que a espera não atingirá o tempo limite.</span><span class="sxs-lookup"><span data-stu-id="7488d-122">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="7488d-123">A função [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) permite que o thread de chamada defina atomicamente o estado de um objeto para sinalizado e aguarde até que o estado de outro objeto seja definido para sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-123">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) function enables the calling thread to atomically set the state of an object to signaled and wait for the state of another object to be set to signaled.</span></span>

## <a name="multiple-object-wait-functions"></a><span data-ttu-id="7488d-124">Funções de espera de vários objetos</span><span class="sxs-lookup"><span data-stu-id="7488d-124">Multiple-object Wait Functions</span></span>

<span data-ttu-id="7488d-125">As funções [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects)e [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) permitem que o thread de chamada especifique uma matriz que contenha um ou mais identificadores de objeto de sincronização.</span><span class="sxs-lookup"><span data-stu-id="7488d-125">The [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects), and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) functions enable the calling thread to specify an array containing one or more synchronization object handles.</span></span> <span data-ttu-id="7488d-126">Essas funções retornam quando ocorre uma das seguintes opções:</span><span class="sxs-lookup"><span data-stu-id="7488d-126">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="7488d-127">O estado de qualquer um dos objetos especificados é definido como signaled ou os Estados de todos os objetos foram definidos como signaled.</span><span class="sxs-lookup"><span data-stu-id="7488d-127">The state of any one of the specified objects is set to signaled or the states of all objects have been set to signaled.</span></span> <span data-ttu-id="7488d-128">Você controla se um ou todos os Estados serão usados na chamada de função.</span><span class="sxs-lookup"><span data-stu-id="7488d-128">You control whether one or all of the states will be used in the function call.</span></span>
-   <span data-ttu-id="7488d-129">O intervalo de tempo limite expirou.</span><span class="sxs-lookup"><span data-stu-id="7488d-129">The time-out interval elapses.</span></span> <span data-ttu-id="7488d-130">O intervalo de tempo limite pode ser definido como **infinito** para especificar que a espera não atingirá o tempo limite.</span><span class="sxs-lookup"><span data-stu-id="7488d-130">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="7488d-131">A função [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) e [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) permite especificar objetos de evento de entrada na matriz de identificadores de objeto.</span><span class="sxs-lookup"><span data-stu-id="7488d-131">The [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) function allow you to specify input event objects in the object handle array.</span></span> <span data-ttu-id="7488d-132">Isso é feito quando você especifica o tipo de entrada a ser aguardado na fila de entrada do thread.</span><span class="sxs-lookup"><span data-stu-id="7488d-132">This is done when you specify the type of input to wait for in the thread's input queue.</span></span> <span data-ttu-id="7488d-133">Por exemplo, um thread poderia usar **MsgWaitForMultipleObjects** para bloquear sua execução até que o estado de um objeto especificado tenha sido definido como signaled e haja entrada do mouse disponível na fila de entrada do thread.</span><span class="sxs-lookup"><span data-stu-id="7488d-133">For example, a thread could use **MsgWaitForMultipleObjects** to block its execution until the state of a specified object has been set to signaled and there is mouse input available in the thread's input queue.</span></span> <span data-ttu-id="7488d-134">O thread pode usar a função [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) ou [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ou [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) para recuperar a entrada.</span><span class="sxs-lookup"><span data-stu-id="7488d-134">The thread can use the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) or [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) function to retrieve the input.</span></span>

<span data-ttu-id="7488d-135">Ao aguardar que os Estados de todos os objetos sejam definidos para serem sinalizados, essas funções de vários objetos não modificam os Estados dos objetos especificados até que os Estados de todos os objetos tenham sido definidos sinalizados.</span><span class="sxs-lookup"><span data-stu-id="7488d-135">When waiting for the states of all objects to be set to signaled, these multiple-object functions do not modify the states of the specified objects until the states of all objects have been set signaled.</span></span> <span data-ttu-id="7488d-136">Por exemplo, o estado de um objeto mutex pode ser sinalizado, mas o thread de chamada não obtém a propriedade até que os Estados dos outros objetos especificados na matriz também tenham sido configurados para serem sinalizados.</span><span class="sxs-lookup"><span data-stu-id="7488d-136">For example, the state of a mutex object can be signaled, but the calling thread does not get ownership until the states of the other objects specified in the array have also been set to signaled.</span></span> <span data-ttu-id="7488d-137">Enquanto isso, algum outro thread pode obter a propriedade do objeto mutex, definindo, assim, seu estado como não sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-137">In the meantime, some other thread may get ownership of the mutex object, thereby setting its state to nonsignaled.</span></span>

<span data-ttu-id="7488d-138">Ao aguardar que o estado de um único objeto seja definido para sinalizado, essas funções de vários objetos verificam os identificadores na matriz na ordem iniciando com o índice 0, até que um dos objetos seja sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-138">When waiting for the state of a single object to be set to signaled, these multiple-object functions check the handles in the array in order starting with index 0, until one of the objects is signaled.</span></span> <span data-ttu-id="7488d-139">Se vários objetos ficarem sinalizados, a função retornará o índice do primeiro identificador na matriz cujo objeto foi sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-139">If multiple objects become signaled, the function returns the index of the first handle in the array whose object was signaled.</span></span>

## <a name="alertable-wait-functions"></a><span data-ttu-id="7488d-140">Funções de espera alertáveis</span><span class="sxs-lookup"><span data-stu-id="7488d-140">Alertable Wait Functions</span></span>

<span data-ttu-id="7488d-141">As funções [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex)e [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) diferem das outras funções Wait no que podem, opcionalmente, executar uma *operação de espera alertável*.</span><span class="sxs-lookup"><span data-stu-id="7488d-141">The [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions differ from the other wait functions in that they can optionally perform an *alertable wait operation*.</span></span> <span data-ttu-id="7488d-142">Em uma operação de espera alertável, a função pode retornar quando as condições especificadas são atendidas, mas também pode retornar se o sistema enfileira uma rotina de conclusão de e/s ou uma APC para execução pelo thread em espera.</span><span class="sxs-lookup"><span data-stu-id="7488d-142">In an alertable wait operation, the function can return when the specified conditions are met, but it can also return if the system queues an I/O completion routine or an APC for execution by the waiting thread.</span></span> <span data-ttu-id="7488d-143">Para obter mais informações sobre as operações de espera do alerta e as rotinas de conclusão de e/s, consulte [sincronização e entrada e saída sobrepostas](synchronization-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="7488d-143">For more information about alertable wait operations and I/O completion routines, see [Synchronization and Overlapped Input and Output](synchronization-and-overlapped-input-and-output.md).</span></span> <span data-ttu-id="7488d-144">Para obter mais informações sobre APCs, consulte [chamadas de procedimento assíncrono](asynchronous-procedure-calls.md).</span><span class="sxs-lookup"><span data-stu-id="7488d-144">For more information about APCs, see [Asynchronous Procedure Calls](asynchronous-procedure-calls.md).</span></span>

## <a name="registered-wait-functions"></a><span data-ttu-id="7488d-145">Funções de espera registradas</span><span class="sxs-lookup"><span data-stu-id="7488d-145">Registered Wait Functions</span></span>

<span data-ttu-id="7488d-146">A função [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) difere das outras funções Wait em que a operação Wait é executada por um thread do pool de [threads](../procthread/thread-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="7488d-146">The [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) function differs from the other wait functions in that the wait operation is performed by a thread from the [thread pool](../procthread/thread-pooling.md).</span></span> <span data-ttu-id="7488d-147">Quando as condições especificadas são atendidas, a função de retorno de chamada é executada por um thread de trabalho do pool de threads.</span><span class="sxs-lookup"><span data-stu-id="7488d-147">When the specified conditions are met, the callback function is executed by a worker thread from the thread pool.</span></span>

<span data-ttu-id="7488d-148">Por padrão, uma operação de espera registrada é uma operação de espera múltipla.</span><span class="sxs-lookup"><span data-stu-id="7488d-148">By default, a registered wait operation is a multiple-wait operation.</span></span> <span data-ttu-id="7488d-149">O sistema redefine o timer sempre que o evento é sinalizado (ou o intervalo de tempo limite expira) até que você chame a função [**UnregisterWaitEx**](unregisterwaitex.md) para cancelar a operação.</span><span class="sxs-lookup"><span data-stu-id="7488d-149">The system resets the timer every time the event is signaled (or the time-out interval elapses) until you call the [**UnregisterWaitEx**](unregisterwaitex.md) function to cancel the operation.</span></span> <span data-ttu-id="7488d-150">Para especificar que uma operação de espera deve ser executada apenas uma vez, defina o parâmetro *dwFlags* de [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) como **WT \_ EXECUTEONLYONCE**.</span><span class="sxs-lookup"><span data-stu-id="7488d-150">To specify that a wait operation should be executed only once, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEONLYONCE**.</span></span>

<span data-ttu-id="7488d-151">Se o thread chamar funções que usam APCs, defina o parâmetro *dwFlags* de [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) como **WT \_ EXECUTEINPERSISTENTTHREAD**.</span><span class="sxs-lookup"><span data-stu-id="7488d-151">If the thread calls functions that use APCs, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEINPERSISTENTTHREAD**.</span></span>

## <a name="waiting-on-an-address"></a><span data-ttu-id="7488d-152">Aguardando um endereço</span><span class="sxs-lookup"><span data-stu-id="7488d-152">Waiting on an Address</span></span>

<span data-ttu-id="7488d-153">Um thread pode usar a função [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) para aguardar o valor de um endereço de destino ser alterado de um valor indesejado para qualquer outro valor.</span><span class="sxs-lookup"><span data-stu-id="7488d-153">A thread can use the [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) function to wait for the value of a target address to change from some undesired value to any other value.</span></span> <span data-ttu-id="7488d-154">Isso permite que os threads aguardem que um valor seja alterado sem precisar girar ou lidar com os problemas de sincronização que podem surgir quando o thread captura um valor indesejado, mas o valor é alterado antes que o thread possa aguardar.</span><span class="sxs-lookup"><span data-stu-id="7488d-154">This enables threads to wait for a value to change without having to spin or handle the synchronization problems that can arise when the thread captures an undesired value but the value changes before the thread can wait.</span></span>

<span data-ttu-id="7488d-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) retorna quando o código que modifica o valor de destino sinaliza a alteração chamando [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) para ativar um único thread em espera ou [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) para ativar todos os threads em espera.</span><span class="sxs-lookup"><span data-stu-id="7488d-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) returns when code that modifies the target value signals the change by calling [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) to wake a single waiting thread or [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) to wake all waiting threads.</span></span> <span data-ttu-id="7488d-156">Se um intervalo de tempo limite for especificado com **WaitOnAddress** e nenhum thread chamar uma função Wake, a função retornará quando o intervalo de tempo limite expirar.</span><span class="sxs-lookup"><span data-stu-id="7488d-156">If a time-out interval is specified with **WaitOnAddress** and no thread calls a wake function, the function returns when the time-out interval elapses.</span></span> <span data-ttu-id="7488d-157">Se nenhum intervalo de tempo limite for especificado, o thread aguardará indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="7488d-157">If no time-out interval is specified, the thread waits indefinitely.</span></span>

## <a name="wait-functions-and-time-out-intervals"></a><span data-ttu-id="7488d-158">Funções de espera e intervalos de tempo limite</span><span class="sxs-lookup"><span data-stu-id="7488d-158">Wait Functions and Time-out Intervals</span></span>

<span data-ttu-id="7488d-159">A precisão do intervalo de tempo limite especificado depende da resolução do relógio do sistema.</span><span class="sxs-lookup"><span data-stu-id="7488d-159">The accuracy of the specified time-out interval depends on the resolution of the system clock.</span></span> <span data-ttu-id="7488d-160">O relógio do sistema "tiques" a uma taxa constante.</span><span class="sxs-lookup"><span data-stu-id="7488d-160">The system clock "ticks" at a constant rate.</span></span> <span data-ttu-id="7488d-161">Se o intervalo de tempo limite for menor que a resolução do relógio do sistema, a espera poderá atingir o tempo limite em menos do que o período especificado.</span><span class="sxs-lookup"><span data-stu-id="7488d-161">If the time-out interval is less than the resolution of the system clock, the wait may time out in less than the specified length of time.</span></span> <span data-ttu-id="7488d-162">Se o intervalo de tempo limite for maior que um tique, mas menor que dois, a espera poderá estar em qualquer lugar entre um e dois tiques, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="7488d-162">If the time-out interval is greater than one tick but less than two, the wait can be anywhere between one and two ticks, and so on.</span></span>

<span data-ttu-id="7488d-163">Para aumentar a precisão do intervalo de tempo limite para as funções de espera, chame a função **timeGetDevCaps** para determinar a resolução mínima de timer com suporte e a função **timeBeginPeriod** para definir a resolução do temporizador como seu mínimo.</span><span class="sxs-lookup"><span data-stu-id="7488d-163">To increase the accuracy of the time-out interval for the wait functions, call the **timeGetDevCaps** function to determine the supported minimum timer resolution and the **timeBeginPeriod** function to set the timer resolution to its minimum.</span></span> <span data-ttu-id="7488d-164">Tenha cuidado ao chamar **timeBeginPeriod**, uma vez que as chamadas frequentes podem afetar significativamente o relógio do sistema, o uso de energia do sistema e o Agendador.</span><span class="sxs-lookup"><span data-stu-id="7488d-164">Use caution when calling **timeBeginPeriod**, as frequent calls can significantly affect the system clock, system power usage, and the scheduler.</span></span> <span data-ttu-id="7488d-165">Se você chamar **timeBeginPeriod**, chame-o uma vez no início do aplicativo e certifique-se de chamar a função **timeEndPeriod** no final do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7488d-165">If you call **timeBeginPeriod**, call it one time early in the application and be sure to call the **timeEndPeriod** function at the very end of the application.</span></span>

## <a name="wait-functions-and-synchronization-objects"></a><span data-ttu-id="7488d-166">Funções de espera e objetos de sincronização</span><span class="sxs-lookup"><span data-stu-id="7488d-166">Wait Functions and Synchronization Objects</span></span>

<span data-ttu-id="7488d-167">As funções Wait podem modificar os Estados de alguns tipos de [objetos de sincronização](synchronization-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7488d-167">The wait functions can modify the states of some types of [synchronization objects](synchronization-objects.md).</span></span> <span data-ttu-id="7488d-168">A modificação ocorre apenas para o objeto ou objetos cujo estado sinalizado fez com que a função fosse retornada.</span><span class="sxs-lookup"><span data-stu-id="7488d-168">Modification occurs only for the object or objects whose signaled state caused the function to return.</span></span> <span data-ttu-id="7488d-169">As funções Wait podem modificar os Estados dos objetos de sincronização da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="7488d-169">Wait functions can modify the states of synchronization objects as follows:</span></span>

-   <span data-ttu-id="7488d-170">A contagem de um objeto de semáforo diminui em um, e o estado do semáforo é definido como não sinalizado se sua contagem for zero.</span><span class="sxs-lookup"><span data-stu-id="7488d-170">The count of a semaphore object decreases by one, and the state of the semaphore is set to nonsignaled if its count is zero.</span></span>
-   <span data-ttu-id="7488d-171">Os Estados do mutex, do evento de redefinição automática e dos objetos de notificação de alteração são definidos como sem sinal.</span><span class="sxs-lookup"><span data-stu-id="7488d-171">The states of mutex, auto-reset event, and change-notification objects are set to nonsignaled.</span></span>
-   <span data-ttu-id="7488d-172">O estado de um temporizador de sincronização é definido como não sinalizado.</span><span class="sxs-lookup"><span data-stu-id="7488d-172">The state of a synchronization timer is set to nonsignaled.</span></span>
-   <span data-ttu-id="7488d-173">Os Estados dos objetos de evento de redefinição manual, timer de redefinição manual, processo, thread e entrada do console não são afetados por uma função Wait.</span><span class="sxs-lookup"><span data-stu-id="7488d-173">The states of manual-reset event, manual-reset timer, process, thread, and console input objects are not affected by a wait function.</span></span>

## <a name="wait-functions-and-creating-windows"></a><span data-ttu-id="7488d-174">Funções de espera e criação de janelas</span><span class="sxs-lookup"><span data-stu-id="7488d-174">Wait Functions and Creating Windows</span></span>

<span data-ttu-id="7488d-175">Você precisa ter cuidado ao usar as funções de espera e o código que cria o Windows direta ou indiretamente.</span><span class="sxs-lookup"><span data-stu-id="7488d-175">You have to be careful when using the wait functions and code that directly or indirectly creates windows.</span></span> <span data-ttu-id="7488d-176">Se um thread criar qualquer Windows, ele deverá processar mensagens.</span><span class="sxs-lookup"><span data-stu-id="7488d-176">If a thread creates any windows, it must process messages.</span></span> <span data-ttu-id="7488d-177">Difusões de mensagens são enviadas a todas as janelas no sistema.</span><span class="sxs-lookup"><span data-stu-id="7488d-177">Message broadcasts are sent to all windows in the system.</span></span> <span data-ttu-id="7488d-178">Se você tiver um thread que usa uma função Wait sem intervalo de tempo limite, o sistema irá deadlock.</span><span class="sxs-lookup"><span data-stu-id="7488d-178">If you have a thread that uses a wait function with no time-out interval, the system will deadlock.</span></span> <span data-ttu-id="7488d-179">Dois exemplos de código que cria indiretamente o Windows são DDE e a função **CoInitialize** .</span><span class="sxs-lookup"><span data-stu-id="7488d-179">Two examples of code that indirectly creates windows are DDE and the **CoInitialize** function.</span></span> <span data-ttu-id="7488d-180">Portanto, se você tiver um thread que cria o Windows, use [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) ou [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), em vez de outras funções de espera.</span><span class="sxs-lookup"><span data-stu-id="7488d-180">Therefore, if you have a thread that creates windows, use [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) or [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), rather than the other wait functions.</span></span>

 

 
