---
description: Uma barreira de sincronização permite que vários threads aguardem até que todos os threads tenham atingido um ponto específico de execução antes de qualquer thread continuar.
ms.assetid: 3A76E6F7-C38B-4843-9496-36F3C78B700C
title: Barreiras de sincronização
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4276f0bbc5a10eef391c12cc51ebd475e563bd44
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104171472"
---
# <a name="synchronization-barriers"></a><span data-ttu-id="27103-103">Barreiras de sincronização</span><span class="sxs-lookup"><span data-stu-id="27103-103">Synchronization Barriers</span></span>

<span data-ttu-id="27103-104">Uma barreira de sincronização permite que vários threads aguardem até que todos os threads tenham atingido um ponto específico de execução antes de qualquer thread continuar.</span><span class="sxs-lookup"><span data-stu-id="27103-104">A synchronization barrier enables multiple threads to wait until all threads have all reached a particular point of execution before any thread continues.</span></span> <span data-ttu-id="27103-105">As barreiras de sincronização não podem ser compartilhadas entre processos.</span><span class="sxs-lookup"><span data-stu-id="27103-105">Synchronization barriers cannot be shared across processes.</span></span>

<span data-ttu-id="27103-106">As barreiras de sincronização são úteis para cálculos em fases, em que os threads que executam o mesmo código em paralelo devem todos concluir uma fase antes de passar para o próximo.</span><span class="sxs-lookup"><span data-stu-id="27103-106">Synchronization barriers are useful for phased computations, in which threads executing the same code in parallel must all complete one phase before moving on to the next.</span></span>

<span data-ttu-id="27103-107">Para criar uma barreira de sincronização, chame a função [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) e especifique um número máximo de threads e quantas vezes um thread deve ser girado antes de ser bloqueado.</span><span class="sxs-lookup"><span data-stu-id="27103-107">To create a synchronization barrier, call the [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) function and specify a maximum number of threads and how many times a thread should spin before it blocks.</span></span> <span data-ttu-id="27103-108">Em seguida, inicie os threads que usarão a barreira.</span><span class="sxs-lookup"><span data-stu-id="27103-108">Then launch the threads that will use the barrier.</span></span> <span data-ttu-id="27103-109">Depois que cada thread conclui seu trabalho, ele chama [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) para aguardar na barreira.</span><span class="sxs-lookup"><span data-stu-id="27103-109">After each thread finishes its work, it calls [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) to wait at the barrier.</span></span> <span data-ttu-id="27103-110">A função **EnterSynchronizationBarrier** bloqueia cada thread até que o número de threads bloqueados na barreira atinja a contagem máxima de threads para a barreira, ponto em que o **EnterSynchronizationBarrier** desbloqueia todos os threads.</span><span class="sxs-lookup"><span data-stu-id="27103-110">The **EnterSynchronizationBarrier** function blocks each thread until the number of threads blocked in the barrier reaches the maximum thread count for the barrier, at which point **EnterSynchronizationBarrier** unblocks all the threads.</span></span> <span data-ttu-id="27103-111">A função **EnterSynchronizationBarrier** retorna **true** para exatamente um dos threads que inseriu a barreira e retorna **false** para todos os outros threads.</span><span class="sxs-lookup"><span data-stu-id="27103-111">The **EnterSynchronizationBarrier** function returns **TRUE** for exactly one of the threads that entered the barrier, and returns **FALSE** for all other threads.</span></span>

<span data-ttu-id="27103-112">Para liberar uma barreira de sincronização quando ela não for mais necessária, chame [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span><span class="sxs-lookup"><span data-stu-id="27103-112">To release a synchronization barrier when it is no longer needed, call [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span></span> <span data-ttu-id="27103-113">É seguro chamar essa função imediatamente após chamar [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) porque essa função garante que todos os threads concluíram o uso da barreira antes de serem liberados.</span><span class="sxs-lookup"><span data-stu-id="27103-113">It is safe to call this function immediately after calling [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) because that function ensures that all threads have finished using the barrier before it is released.</span></span>

<span data-ttu-id="27103-114">Se uma barreira de sincronização nunca for excluída, os threads poderão especificar o sinalizador de **\_ \_ \_ não \_ exclusão de sinalizadores de barreira de sincronização** quando inserirem a barreira.</span><span class="sxs-lookup"><span data-stu-id="27103-114">If a synchronization barrier will never be deleted, threads can specify the **SYNCHRONIZATION\_BARRIER\_FLAGS\_NO\_DELETE** flag when they enter the barrier.</span></span> <span data-ttu-id="27103-115">Todos os threads que usam a barreira devem especificar esse sinalizador; Se qualquer thread não tiver, o sinalizador será ignorado.</span><span class="sxs-lookup"><span data-stu-id="27103-115">All threads using the barrier must specify this flag; if any thread does not, the flag is ignored.</span></span> <span data-ttu-id="27103-116">Esse sinalizador faz com que a função ignore o trabalho extra necessário para a segurança de exclusão, o que pode melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="27103-116">This flag causes the function to skip the extra work required for deletion safety, which can improve performance.</span></span> <span data-ttu-id="27103-117">Observe que a exclusão de uma barreira enquanto esse sinalizador está em vigor pode resultar em um acesso de identificador inválido e em um ou mais threads bloqueados permanentemente.</span><span class="sxs-lookup"><span data-stu-id="27103-117">Note that deleting a barrier while this flag is in effect may result in an invalid handle access and one or more permanently blocked threads.</span></span>

 

 



