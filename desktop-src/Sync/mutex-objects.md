---
description: Um objeto mutex é um objeto de sincronização cujo estado é definido como sinalizado quando ele não pertence a nenhum thread e não é sinalizado quando ele é proprietário.
ms.assetid: eca0795a-1fd0-4034-9d61-9416670919cf
title: Objetos mutex
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e84c17ba3e99e888f7d1e9137a7f24a4d78ce2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103829138"
---
# <a name="mutex-objects"></a><span data-ttu-id="f5f64-103">Objetos mutex</span><span class="sxs-lookup"><span data-stu-id="f5f64-103">Mutex Objects</span></span>

<span data-ttu-id="f5f64-104">Um *objeto mutex* é um objeto de sincronização cujo estado é definido como sinalizado quando ele não pertence a nenhum thread e não é sinalizado quando ele é proprietário.</span><span class="sxs-lookup"><span data-stu-id="f5f64-104">A *mutex object* is a synchronization object whose state is set to signaled when it is not owned by any thread, and nonsignaled when it is owned.</span></span> <span data-ttu-id="f5f64-105">Somente um thread por vez pode ter um objeto mutex, cujo nome vem do fato de ser útil para coordenar o acesso mutuamente exclusivo a um recurso compartilhado.</span><span class="sxs-lookup"><span data-stu-id="f5f64-105">Only one thread at a time can own a mutex object, whose name comes from the fact that it is useful in coordinating mutually exclusive access to a shared resource.</span></span> <span data-ttu-id="f5f64-106">Por exemplo, para impedir que dois threads gravem na memória compartilhada ao mesmo tempo, cada thread aguarda a propriedade de um objeto mutex antes de executar o código que acessa a memória.</span><span class="sxs-lookup"><span data-stu-id="f5f64-106">For example, to prevent two threads from writing to shared memory at the same time, each thread waits for ownership of a mutex object before executing the code that accesses the memory.</span></span> <span data-ttu-id="f5f64-107">Depois de gravar na memória compartilhada, o thread libera o objeto mutex.</span><span class="sxs-lookup"><span data-stu-id="f5f64-107">After writing to the shared memory, the thread releases the mutex object.</span></span>

<span data-ttu-id="f5f64-108">Um thread usa a função [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) ou [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) para criar um objeto mutex.</span><span class="sxs-lookup"><span data-stu-id="f5f64-108">A thread uses the [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) or [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) function to create a mutex object.</span></span> <span data-ttu-id="f5f64-109">O thread de criação pode solicitar a propriedade imediata do objeto mutex e também pode especificar um nome para o objeto mutex.</span><span class="sxs-lookup"><span data-stu-id="f5f64-109">The creating thread can request immediate ownership of the mutex object and can also specify a name for the mutex object.</span></span> <span data-ttu-id="f5f64-110">Ele também pode criar um mutex sem nome.</span><span class="sxs-lookup"><span data-stu-id="f5f64-110">It can also create an unnamed mutex.</span></span> <span data-ttu-id="f5f64-111">Para obter informações adicionais sobre nomes de mutex, evento, semáforo e objetos de temporizador, consulte [sincronização entre processos](interprocess-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="f5f64-111">For additional information about names for mutex, event, semaphore, and timer objects, see [Interprocess Synchronization](interprocess-synchronization.md).</span></span>

<span data-ttu-id="f5f64-112">Threads em outros processos podem abrir um identificador para um objeto de mutex nomeado existente especificando seu nome em uma chamada para a função [**OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) .</span><span class="sxs-lookup"><span data-stu-id="f5f64-112">Threads in other processes can open a handle to an existing named mutex object by specifying its name in a call to the [**OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) function.</span></span> <span data-ttu-id="f5f64-113">Para passar um identificador para um mutex sem nome para outro processo, use a função [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) ou a herança de identificador pai-filho.</span><span class="sxs-lookup"><span data-stu-id="f5f64-113">To pass a handle to an unnamed mutex to another process, use the [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) function or parent-child handle inheritance.</span></span>

<span data-ttu-id="f5f64-114">Qualquer thread com um identificador para um objeto mutex pode usar uma das [funções Wait](wait-functions.md) para solicitar a propriedade do objeto mutex.</span><span class="sxs-lookup"><span data-stu-id="f5f64-114">Any thread with a handle to a mutex object can use one of the [wait functions](wait-functions.md) to request ownership of the mutex object.</span></span> <span data-ttu-id="f5f64-115">Se o objeto mutex pertencer a outro thread, a função Wait bloqueará o thread solicitante até que o thread proprietário libere o objeto mutex usando a função [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) .</span><span class="sxs-lookup"><span data-stu-id="f5f64-115">If the mutex object is owned by another thread, the wait function blocks the requesting thread until the owning thread releases the mutex object using the [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) function.</span></span> <span data-ttu-id="f5f64-116">O valor de retorno da função Wait indica se a função retornou por algum motivo que não seja o estado do mutex que está sendo definido para sinalizado.</span><span class="sxs-lookup"><span data-stu-id="f5f64-116">The return value of the wait function indicates whether the function returned for some reason other than the state of the mutex being set to signaled.</span></span>

<span data-ttu-id="f5f64-117">Se mais de um thread estiver aguardando um mutex, um thread em espera será selecionado.</span><span class="sxs-lookup"><span data-stu-id="f5f64-117">If more than one thread is waiting on a mutex, a waiting thread is selected.</span></span> <span data-ttu-id="f5f64-118">Não assuma uma ordem FIFO (primeiro a entrar, primeiro a sair).</span><span class="sxs-lookup"><span data-stu-id="f5f64-118">Do not assume a first-in, first-out (FIFO) order.</span></span> <span data-ttu-id="f5f64-119">Eventos externos, como APCs de modo kernel, podem alterar a ordem de espera.</span><span class="sxs-lookup"><span data-stu-id="f5f64-119">External events such as kernel-mode APCs can change the wait order.</span></span>

<span data-ttu-id="f5f64-120">Depois que um thread obtém a propriedade de um mutex, ele pode especificar o mesmo mutex em chamadas repetidas para as [funções de espera](wait-functions.md) sem bloquear sua execução.</span><span class="sxs-lookup"><span data-stu-id="f5f64-120">After a thread obtains ownership of a mutex, it can specify the same mutex in repeated calls to the [wait-functions](wait-functions.md) without blocking its execution.</span></span> <span data-ttu-id="f5f64-121">Isso impede que um thread seja bloqueado enquanto aguarda um mutex que ele já possui.</span><span class="sxs-lookup"><span data-stu-id="f5f64-121">This prevents a thread from deadlocking itself while waiting for a mutex that it already owns.</span></span> <span data-ttu-id="f5f64-122">Para liberar sua propriedade em tais circunstâncias, o thread deve chamar [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) uma vez para cada vez que o mutex satisfez as condições de uma função de espera.</span><span class="sxs-lookup"><span data-stu-id="f5f64-122">To release its ownership under such circumstances, the thread must call [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) once for each time that the mutex satisfied the conditions of a wait function.</span></span>

<span data-ttu-id="f5f64-123">Se um thread for encerrado sem liberar sua propriedade de um objeto mutex, o objeto mutex será considerado abandonado.</span><span class="sxs-lookup"><span data-stu-id="f5f64-123">If a thread terminates without releasing its ownership of a mutex object, the mutex object is considered to be abandoned.</span></span> <span data-ttu-id="f5f64-124">Um thread em espera pode adquirir a propriedade de um objeto mutex abandonado, mas a função Wait retornará **Wait \_ abandonado** para indicar que o objeto mutex é abandonado.</span><span class="sxs-lookup"><span data-stu-id="f5f64-124">A waiting thread can acquire ownership of an abandoned mutex object, but the wait function will return **WAIT\_ABANDONED** to indicate that the mutex object is abandoned.</span></span> <span data-ttu-id="f5f64-125">Um objeto mutex abandonado indica que ocorreu um erro e que qualquer recurso compartilhado protegido pelo objeto mutex está em um estado indefinido.</span><span class="sxs-lookup"><span data-stu-id="f5f64-125">An abandoned mutex object indicates that an error has occurred and that any shared resource being protected by the mutex object is in an undefined state.</span></span> <span data-ttu-id="f5f64-126">Se o thread continuar como se o objeto mutex não tivesse sido abandonado, ele não será mais considerado abandonado depois que o thread liberar sua propriedade.</span><span class="sxs-lookup"><span data-stu-id="f5f64-126">If the thread proceeds as though the mutex object had not been abandoned, it is no longer considered abandoned after the thread releases its ownership.</span></span> <span data-ttu-id="f5f64-127">Isso restaura o comportamento normal se um identificador para o objeto mutex for especificado em seguida em uma função Wait.</span><span class="sxs-lookup"><span data-stu-id="f5f64-127">This restores normal behavior if a handle to the mutex object is subsequently specified in a wait function.</span></span>

<span data-ttu-id="f5f64-128">Observe que os [objetos de seção crítica](critical-section-objects.md) fornecem sincronização semelhante à fornecida por objetos mutex, exceto que os objetos de seção críticos podem ser usados somente pelos threads de um único processo.</span><span class="sxs-lookup"><span data-stu-id="f5f64-128">Note that [critical section objects](critical-section-objects.md) provide synchronization similar to that provided by mutex objects, except that critical section objects can be used only by the threads of a single process.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f5f64-129">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="f5f64-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f5f64-130">Usando objetos mutex</span><span class="sxs-lookup"><span data-stu-id="f5f64-130">Using Mutex Objects</span></span>](using-mutex-objects.md)
</dt> </dl>

 

 
