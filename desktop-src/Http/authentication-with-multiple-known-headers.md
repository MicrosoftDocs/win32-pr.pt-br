---
title: Autenticação com vários cabeçalhos conhecidos
description: A \_ estrutura http \_ vários \_ cabeçalhos conhecidos permite que os aplicativos de servidor enviem vários desafios de autenticação para o cliente.
ms.assetid: d517fd61-9547-4e1c-b0fd-1eb3d0098db2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8afbce3c2a41ea143003723acebc7eb83dc463d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105758812"
---
# <a name="authentication-with-multiple-known-headers"></a><span data-ttu-id="3876e-103">Autenticação com vários cabeçalhos conhecidos</span><span class="sxs-lookup"><span data-stu-id="3876e-103">Authentication with Multiple Known Headers</span></span>

<span data-ttu-id="3876e-104">A [**estrutura \_ http \_ vários \_ cabeçalhos conhecidos**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) permite que os aplicativos de servidor enviem vários desafios de autenticação para o cliente.</span><span class="sxs-lookup"><span data-stu-id="3876e-104">The [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure enables server applications to send multiple authentication challenges to the client.</span></span> <span data-ttu-id="3876e-105">Os aplicativos podem desafiar o cliente com um único esquema de autenticação fornecendo o tipo de enumeração **HttpHeaderWwwAuthenticate** no membro **KnownHeaders** da estrutura [**de \_ \_ cabeçalhos de resposta http**](/windows/desktop/api/Http/ns-http-http_response_headers) contida [**na \_ resposta http**](http-response.md).</span><span class="sxs-lookup"><span data-stu-id="3876e-105">Applications can challenge the client with a single authentication scheme by supplying the **HttpHeaderWwwAuthenticate** enumeration type in the **KnownHeaders** member of the [**HTTP\_RESPONSE\_HEADERS**](/windows/desktop/api/Http/ns-http-http_response_headers) structure contained in [**HTTP\_RESPONSE**](http-response.md).</span></span> <span data-ttu-id="3876e-106">No entanto, quando o servidor desafia com vários esquemas de autenticação, o aplicativo usa a estrutura [**http \_ vários \_ \_ cabeçalhos conhecidos**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) para fornecer os tipos de autenticação.</span><span class="sxs-lookup"><span data-stu-id="3876e-106">However, when the server challenges with multiple authentication schemes, the application uses the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to provide the authentication types.</span></span>

<span data-ttu-id="3876e-107">Quando os **\_ sinalizadores de informação de resposta http \_ \_ \_ preservam \_** o sinalizador de ordem, o http envia os cabeçalhos de autenticação na ordem especificada.</span><span class="sxs-lookup"><span data-stu-id="3876e-107">When the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag is present, HTTP sends the authentication headers in the specified order.</span></span> <span data-ttu-id="3876e-108">Se o sinalizador não estiver presente, o HTTP ordenará os esquemas de autenticação do mais forte para o mais fraco da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="3876e-108">If the flag is not present, HTTP orders the authentication schemes from strongest to weakest as follows:</span></span>

1.  <span data-ttu-id="3876e-109">Negotiate</span><span class="sxs-lookup"><span data-stu-id="3876e-109">Negotiate</span></span>
2.  <span data-ttu-id="3876e-110">NTLM</span><span class="sxs-lookup"><span data-stu-id="3876e-110">NTLM</span></span>
3.  <span data-ttu-id="3876e-111">Digest</span><span class="sxs-lookup"><span data-stu-id="3876e-111">Digest</span></span>
4.  <span data-ttu-id="3876e-112">Básico</span><span class="sxs-lookup"><span data-stu-id="3876e-112">Basic</span></span>

<span data-ttu-id="3876e-113">Se o esquema de autenticação não for um desses esquemas, o aplicativo deverá especificar o sinalizador de **\_ \_ \_ \_ \_ preservar sinalizadores de informações de resposta http** .</span><span class="sxs-lookup"><span data-stu-id="3876e-113">If the authentication scheme is not one of these schemes, the application must specify the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag.</span></span>

<span data-ttu-id="3876e-114">O membro **KnownHeader** de [**http \_ vários \_ \_ cabeçalhos conhecidos**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) aponta para uma matriz de estruturas de [**\_ \_ cabeçalho conhecidas http**](/windows/desktop/api/Http/ns-http-http_known_header) .</span><span class="sxs-lookup"><span data-stu-id="3876e-114">The **KnownHeader** member of [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) points to an array of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) structures.</span></span> <span data-ttu-id="3876e-115">O membro **pRawValue** da estrutura **de \_ \_ cabeçalho http conhecida** deve apontar para uma cadeia de caracteres que especifica o nome do esquema.</span><span class="sxs-lookup"><span data-stu-id="3876e-115">The **pRawValue** member of the **HTTP\_KNOWN\_HEADER** structure must point to a string that specifies the scheme name.</span></span> <span data-ttu-id="3876e-116">O HTTP analisa a cadeia de caracteres para determinar o esquema e executa uma das seguintes ações:</span><span class="sxs-lookup"><span data-stu-id="3876e-116">HTTP parses the string to determine the scheme and performs one of the following actions:</span></span>

-   <span data-ttu-id="3876e-117">Se a cadeia de caracteres contiver um tipo de autenticação desconhecido ou se o tipo de autenticação não estiver habilitado no grupo de configuração (o grupo de URLs ou a sessão de servidor) associada à solicitação, a API do servidor HTTP acrescentará a cadeia de caracteres em **pRawValue** ao cabeçalho WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="3876e-117">If the string contains an unknown authentication type, or if the authentication type is not enabled on the configuration group (either the URL group or server session) associated with the request, the HTTP Server API appends the string in **pRawValue** to the WWW-Authenticate header.</span></span> <span data-ttu-id="3876e-118">Por exemplo, se o aplicativo especificar um esquema de autenticação sem suporte e **pRawValue** contiver a cadeia de caracteres "CustomAuthString", o texto a seguir será anexado ao cabeçalho de autenticação:</span><span class="sxs-lookup"><span data-stu-id="3876e-118">For example, if the application specifies an unsupported authentication scheme, and **pRawValue** contains the string "CustomAuthString", the following text is appended to the authentication header:</span></span>

    <span data-ttu-id="3876e-119">WWW-Authenticate: CustomAuthSchemeCRLF</span><span class="sxs-lookup"><span data-stu-id="3876e-119">WWW-Authenticate: CustomAuthSchemeCRLF</span></span>

    <span data-ttu-id="3876e-120">Se o aplicativo não tiver a autenticação básica habilitada e **pRawValue** contiver a cadeia de caracteres "Basic realment =" BasicRealm "", o cabeçalho de autenticação conterá o seguinte texto:</span><span class="sxs-lookup"><span data-stu-id="3876e-120">If the application does not have Basic authentication enabled, and **pRawValue** contains the string "Basic realm="BasicRealm"", the authentication header contains the following text:</span></span>

    <span data-ttu-id="3876e-121">WWW-Authenticate: Realm básico = "BasicRealm"</span><span class="sxs-lookup"><span data-stu-id="3876e-121">WWW-Authenticate: Basic realm="BasicRealm"</span></span>

-   <span data-ttu-id="3876e-122">Se a cadeia de caracteres contiver um tipo de autenticação conhecido e estiver presente no grupo de configuração (o grupo de URLs ou a sessão de servidor) associada à solicitação, a API do servidor HTTP gerará o cabeçalho WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="3876e-122">If the string contains a known authentication type and is present on the configuration group (either the URL group or the server session) associated with the request, the HTTP Server API generates the WWW-Authenticate header.</span></span> <span data-ttu-id="3876e-123">Por exemplo, se a cadeia de caracteres especificada em **pRawValue** for "Digest" e o resumo estiver habilitado na sessão do servidor, a API do servidor http acrescentará o seguinte texto ao cabeçalho de autenticação:</span><span class="sxs-lookup"><span data-stu-id="3876e-123">For example if the string specified in **pRawValue** is "Digest", and Digest is enabled on the server session, the HTTP Server API appends the following text to the authentication header:</span></span>

    <span data-ttu-id="3876e-124">WWW-Authenticate: Digest Realm = " testrealm@host.com "</span><span class="sxs-lookup"><span data-stu-id="3876e-124">WWW-Authenticate: Digest realm="testrealm@host.com"</span></span>

<span data-ttu-id="3876e-125">Se o esquema no membro **pRawValue** do [**cabeçalho http \_ conhecido \_**](/windows/desktop/api/Http/ns-http-http_known_header) for Negotiate ou NTLM, o nome do esquema de autenticação será suficiente.</span><span class="sxs-lookup"><span data-stu-id="3876e-125">If the scheme in the **pRawValue** member of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) is Negotiate or NTLM, the authentication scheme name is sufficient.</span></span> <span data-ttu-id="3876e-126">Se o esquema especificado for básico, o nome do Realm será anexado ao nome do esquema; o aplicativo não precisa fornecer o nome do realm em **pRawValue**.</span><span class="sxs-lookup"><span data-stu-id="3876e-126">If the specified scheme is Basic, the realm name is appended to the scheme name; the application doesn't need to supply the realm name in **pRawValue**.</span></span> <span data-ttu-id="3876e-127">Se o esquema especificado for Digest, HTTP chamará [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) para gerar o desafio que é anexado ao nome do esquema.</span><span class="sxs-lookup"><span data-stu-id="3876e-127">If the specified scheme is Digest, HTTP calls [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) to generate the challenge that is appended to the scheme name.</span></span> <span data-ttu-id="3876e-128">Os parâmetros de esquema básico (Realm) e Digest (Realm e nome de domínio) são obtidos das informações de autenticação do grupo de configuração correspondente.</span><span class="sxs-lookup"><span data-stu-id="3876e-128">The parameters for Basic (realm) and Digest (realm and domain name) scheme are obtained from the corresponding configuration group authentication information.</span></span>

<span data-ttu-id="3876e-129">Quando o aplicativo envia vários desafios de autenticação para o cliente em cabeçalhos de solicitação desconhecidos, a API do servidor HTTP envia-os para o cliente sem intervenção.</span><span class="sxs-lookup"><span data-stu-id="3876e-129">When the application sends multiple authentication challenges to the client in Unknown request headers, the HTTP Server API sends these to the client without intervention.</span></span> <span data-ttu-id="3876e-130">No entanto, esse uso não é recomendado.</span><span class="sxs-lookup"><span data-stu-id="3876e-130">However this usage is not recommended.</span></span>

 

 




