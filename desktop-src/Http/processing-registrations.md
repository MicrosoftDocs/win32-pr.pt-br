---
title: Processando registros
description: As APIs do servidor HTTP usam o banco de dados de roteamento para aplicar verificações de acesso durante os registros.
ms.assetid: d72aa213-b8e8-4fe9-b98c-41114d2cea56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c1e02d2511d9967454d5cbddd93b2c0380d1172
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/20/2020
ms.locfileid: "104454443"
---
# <a name="processing-registrations"></a><span data-ttu-id="795e3-103">Processando registros</span><span class="sxs-lookup"><span data-stu-id="795e3-103">Processing Registrations</span></span>

<span data-ttu-id="795e3-104">As APIs do servidor HTTP usam o banco de dados de roteamento para aplicar verificações de acesso durante os registros.</span><span class="sxs-lookup"><span data-stu-id="795e3-104">The HTTP Server APIs use the routing database to apply access checks during registrations.</span></span> <span data-ttu-id="795e3-105">Um registro para um [URLPrefix](urlprefix-strings.md) deve passar uma série de verificações de acesso para garantir que o registro do usuário para o namespace tenha direitos de acesso.</span><span class="sxs-lookup"><span data-stu-id="795e3-105">A registration for a [UrlPrefix](urlprefix-strings.md) must pass a series of access checks to ensure that the user registering for the namespace has access rights.</span></span> <span data-ttu-id="795e3-106">Use a função [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) para adicionar um novo registro.</span><span class="sxs-lookup"><span data-stu-id="795e3-106">Use the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a new registration.</span></span>

<span data-ttu-id="795e3-107">**Para adicionar um novo registro com HttpAddUrl**</span><span class="sxs-lookup"><span data-stu-id="795e3-107">**To add a new registration with HttpAddUrl**</span></span>

1.  <span data-ttu-id="795e3-108">Se o número da porta no UrlPrefix tiver reservas ou registros para um esquema diferente do esquema no UrlPrefix, o registro falhará.</span><span class="sxs-lookup"><span data-stu-id="795e3-108">If the port number in the UrlPrefix has reservations or registrations for a scheme different from the scheme in the UrlPrefix, the registration fails.</span></span> <span data-ttu-id="795e3-109">Não há suporte para HTTP e HTTPS na mesma porta.</span><span class="sxs-lookup"><span data-stu-id="795e3-109">HTTP and HTTPS cannot be supported on the same port.</span></span>
2.  <span data-ttu-id="795e3-110">O registro é integrado ao Bucket apropriado para o registro.</span><span class="sxs-lookup"><span data-stu-id="795e3-110">The registration is slotted into the appropriate bucket for the registration.</span></span> <span data-ttu-id="795e3-111">Os buckets se baseiam no tipo de host da URL, conforme descrito na seção [Roteamento de solicitações de entrada](routing-incoming-requests.md) .</span><span class="sxs-lookup"><span data-stu-id="795e3-111">The buckets are based on the host type of the URL as outlined in the [Routing Incoming Requests](routing-incoming-requests.md) section.</span></span> <span data-ttu-id="795e3-112">As etapas a seguir são relativas a esse Bucket específico.</span><span class="sxs-lookup"><span data-stu-id="795e3-112">The following steps are relative to this particular bucket.</span></span>
3.  <span data-ttu-id="795e3-113">Se existir uma entrada de registro duplicada, retorne um código de erro.</span><span class="sxs-lookup"><span data-stu-id="795e3-113">If a duplicate registration entry exists, return an error code.</span></span>
4.  <span data-ttu-id="795e3-114">Selecione entradas de reserva com componentes de esquema, host e porta que são iguais aos do UrlPrefix.</span><span class="sxs-lookup"><span data-stu-id="795e3-114">Select reservation entries with scheme, host and port components that are equal to those of the UrlPrefix.</span></span> <span data-ttu-id="795e3-115">A partir deles, localize a entrada com a correspondência de **relativeUri** mais longa.</span><span class="sxs-lookup"><span data-stu-id="795e3-115">From these, locate the entry with the longest **relativeUri** match.</span></span> <span data-ttu-id="795e3-116">Se a entrada existir, verifique as permissões com base na ACL associada a essa entrada e retorne êxito.</span><span class="sxs-lookup"><span data-stu-id="795e3-116">If the entry exists, check permissions based on the ACL associated with that entry and return success.</span></span> <span data-ttu-id="795e3-117">Se a entrada não existir, retornará um código de erro \_ já \_ existente.</span><span class="sxs-lookup"><span data-stu-id="795e3-117">If the entry does not exist, return an ERROR\_ALREADY\_EXISTS code.</span></span>

<span data-ttu-id="795e3-118">Os exemplos a seguir ilustram o processo para instalar um registro no banco de dados de roteamento.</span><span class="sxs-lookup"><span data-stu-id="795e3-118">The following examples illustrate the process to install a registration in the routing database.</span></span> <span data-ttu-id="795e3-119">As reservas 1 e 2 existem no banco de dados de roteamento.</span><span class="sxs-lookup"><span data-stu-id="795e3-119">Reservations 1 and 2 exist in the routing database.</span></span>

-   <span data-ttu-id="795e3-120">Reserva 1: `https://+:80/vroot/subdir/` para usuário A e usuário C. Essa reserva é colocada no Bucket "+".</span><span class="sxs-lookup"><span data-stu-id="795e3-120">Reservation 1: `https://+:80/vroot/subdir/` for User A and User C. This reservation is placed in the "+" bucket.</span></span>
-   <span data-ttu-id="795e3-121">Reserva 2: `https://adatum.com:80/vroot/` para o usuário B. Essa reserva é colocada no Bucket "host explícito".</span><span class="sxs-lookup"><span data-stu-id="795e3-121">Reservation 2: `https://adatum.com:80/vroot/` for User B. This reservation is placed in the "Explicit Host" bucket.</span></span>
-   <span data-ttu-id="795e3-122">Registro: o `https://+:80/vroot/subdir/` usuário B falhará devido à reserva 1.</span><span class="sxs-lookup"><span data-stu-id="795e3-122">Registration: `https://+:80/vroot/subdir/` by User B fails due to reservation 1.</span></span>
-   <span data-ttu-id="795e3-123">Registro: o `https://adatum.com:80/vroot/subdir/` usuário B tem sucesso devido à reserva 2.</span><span class="sxs-lookup"><span data-stu-id="795e3-123">Registration: `https://adatum.com:80/vroot/subdir/` by User B succeeds due to reservation 2.</span></span>
-   <span data-ttu-id="795e3-124">Registro: `https://adatum.com:80/vroot/subdir/` por usuário C falha devido à reserva mais explícita 2.</span><span class="sxs-lookup"><span data-stu-id="795e3-124">Registration: `https://adatum.com:80/vroot/subdir/` by User C fails due to the more explicit reservation 2.</span></span> <span data-ttu-id="795e3-125">A reserva de curinga forte não tem significado no contexto da reserva ou do registro explícito.</span><span class="sxs-lookup"><span data-stu-id="795e3-125">The strong wildcard reservation does not have meaning within the context of the explicit reservation or registration.</span></span>
-   <span data-ttu-id="795e3-126">Registro: `https://+:80/vroot/subdir/` por usuário A é executado com sucesso devido à reserva 1.</span><span class="sxs-lookup"><span data-stu-id="795e3-126">Registration: `https://+:80/vroot/subdir/` by User A succeeds due to reservation 1.</span></span>
-   <span data-ttu-id="795e3-127">Registro: o `https://adatum.com:80/vroot/anotherdir/` usuário B tem sucesso devido à reserva 2.</span><span class="sxs-lookup"><span data-stu-id="795e3-127">Registration: `https://adatum.com:80/vroot/anotherdir/` by User B succeeds due to reservation 2.</span></span>

<span data-ttu-id="795e3-128">A verificação de acesso para o registro não inclui verificações de privilégios de delegação.</span><span class="sxs-lookup"><span data-stu-id="795e3-128">The access check for registration does not include checks for delegation privileges.</span></span> <span data-ttu-id="795e3-129">Não há verificações de acesso com base em reservas (consulte [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span><span class="sxs-lookup"><span data-stu-id="795e3-129">There are no access checks based on reservations (see [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span></span> <span data-ttu-id="795e3-130">O único requisito para excluir um registro dos EUA que o processo de chamada deve ter criado o registro.</span><span class="sxs-lookup"><span data-stu-id="795e3-130">The only requirement for deleting a registration us that the calling process must have created the registration.</span></span>

 

 




