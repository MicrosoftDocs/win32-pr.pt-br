---
title: Cenário 1 exemplo de tempo limite HTTP usando o rastreamento ETW e comandos netsh
description: Por meio do rastreamento ETW, o fluxo de dados por meio do componente API do servidor HTTP pode ser inspecionado para diagnosticar problemas.
ms.assetid: b6b24161-c3da-4972-b49f-c545da2fc81e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa50f438aca664651b24db822f2b9e3a30da4682
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/04/2021
ms.locfileid: "104571048"
---
# <a name="scenario-1-http-timeout-example-using-etw-tracing-and-netsh-commands"></a><span data-ttu-id="49262-103">Cenário 1: exemplo de tempo limite HTTP usando o rastreamento ETW e comandos netsh</span><span class="sxs-lookup"><span data-stu-id="49262-103">Scenario 1: HTTP Timeout Example Using ETW Tracing and Netsh Commands</span></span>

<span data-ttu-id="49262-104">Por meio do rastreamento ETW, o fluxo de dados por meio do componente API do servidor HTTP pode ser inspecionado para diagnosticar problemas.</span><span class="sxs-lookup"><span data-stu-id="49262-104">Through ETW tracing, the flow of data through the HTTP Server API component can be inspected to diagnose problems.</span></span> <span data-ttu-id="49262-105">Por exemplo, os usuários de um aplicativo Web podem ver mensagens de erro no navegador que uma página da Web não pode exibir.</span><span class="sxs-lookup"><span data-stu-id="49262-105">For example, users of a web application may see error messages in their browser that a web page cannot display.</span></span> <span data-ttu-id="49262-106">No servidor que hospeda o aplicativo Web, o profissional de ti também vê uma entrada de tempo limite de conexão dentro do log de erros HTTP, como mostra a Figura 1 abaixo.</span><span class="sxs-lookup"><span data-stu-id="49262-106">On the server hosting the web application, the IT professional also sees a connection timeout entry within the HTTP Error Log, as shown in Figure 1 below.</span></span> <span data-ttu-id="49262-107">O log de erros HTTP pode ser encontrado no seguinte diretório:% WINDIR% \\ System32 \\ LogFiles \\ Httperr \\ .</span><span class="sxs-lookup"><span data-stu-id="49262-107">The HTTP Error Log can be found in the following directory: %windir%\\System32\\LogFiles\\HTTPERR\\.</span></span>

![Captura de tela que mostra a janela de comando netsh H T T que exibe um log de erros H T T P para tempo limite.](images/httperrorlog.png)

<span data-ttu-id="49262-109">Figura 1: log de erros HTTP para tempo limite</span><span class="sxs-lookup"><span data-stu-id="49262-109">Figure 1: HTTP Error Log for Timeout</span></span>

## <a name="generating-an-etw-trace-report"></a><span data-ttu-id="49262-110">Gerando um relatório de rastreamento ETW</span><span class="sxs-lookup"><span data-stu-id="49262-110">Generating an ETW Trace Report</span></span>

<span data-ttu-id="49262-111">Para gerar um relatório de rastreamento ETW para o componente de API do servidor HTTP, execute as etapas abaixo no prompt de comando.</span><span class="sxs-lookup"><span data-stu-id="49262-111">To generate an ETW trace report for the HTTP Server API component, run the steps below from the command prompt.</span></span> <span data-ttu-id="49262-112">Neste exemplo, o rastreamento é executado no servidor, já que está hospedando o aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="49262-112">In this example, the trace is run on the server since it is hosting the web application.</span></span>

<span data-ttu-id="49262-113">As etapas a seguir geram um rastreamento chamado Httptrace. ETL e, em seguida, convertem o rastreamento em um arquivo CSV chamado httptrace.csv.</span><span class="sxs-lookup"><span data-stu-id="49262-113">The steps below generate a trace called httptrace.etl and then convert the trace into a CSV file called httptrace.csv.</span></span> <span data-ttu-id="49262-114">Como mostrado abaixo, o provedor de ETW para a API do servidor HTTP é chamado Microsoft-Windows-HttpService.</span><span class="sxs-lookup"><span data-stu-id="49262-114">As shown below, the ETW provider for the HTTP Server API is called Microsoft-Windows-HttpService.</span></span> <span data-ttu-id="49262-115">A opção de linha de comando 0xFFF indica que todos os eventos ETW para esse provedor devem ser capturados.</span><span class="sxs-lookup"><span data-stu-id="49262-115">The 0xFFF command-line option indicates that all ETW events for this provider should be captured.</span></span>

<span data-ttu-id="49262-116">**Gerar um relatório de rastreamento do ETW**</span><span class="sxs-lookup"><span data-stu-id="49262-116">**Generate an ETW Trace Report**</span></span>

1.  <span data-ttu-id="49262-117">Iniciar rastreamento ETW para componente de API do servidor HTTP: l **ogman.exe iniciar Httptrace-p Microsoft-Windows-HttpService 0xFFFF-o Httptrace. etl – ETS**</span><span class="sxs-lookup"><span data-stu-id="49262-117">Start ETW trace for HTTP Server API component: l **ogman.exe start httptrace -p Microsoft-Windows-HttpService 0xFFFF -o httptrace.etl –ets**</span></span>
2.  <span data-ttu-id="49262-118">Reproduza o problema para que ele possa ser capturado no rastreamento.</span><span class="sxs-lookup"><span data-stu-id="49262-118">Reproduce the issue so that it can be captured in the trace.</span></span> <span data-ttu-id="49262-119">Neste exemplo, acesse o aplicativo Web de um computador cliente, resultando na mensagem "a **página não pode ser exibida**" mostrada no cliente.</span><span class="sxs-lookup"><span data-stu-id="49262-119">In this example, access the web application from a client machine, resulting in the "**page cannot be displayed**" message being shown on the client.</span></span>
3.  <span data-ttu-id="49262-120">Agora que o problema foi reproduzido, pare o rastreamento: **logman.exe parar Httptrace – ETS**</span><span class="sxs-lookup"><span data-stu-id="49262-120">Now that the issue has been reproduced, stop the trace: **logman.exe stop httptrace –ets**</span></span>
4.  <span data-ttu-id="49262-121">Converter o relatório em formato CSV: **tracerpt.exe Httptrace. etl-de CSV-o httptrace.csv**</span><span class="sxs-lookup"><span data-stu-id="49262-121">Convert the report into CSV format: **tracerpt.exe httptrace.etl -of CSV -o httptrace.csv**</span></span>
5.  <span data-ttu-id="49262-122">Exiba o relatório de rastreamento.</span><span class="sxs-lookup"><span data-stu-id="49262-122">View the trace report.</span></span> <span data-ttu-id="49262-123">Um trecho de um rastreamento CSV é mostrado abaixo na tabela 1.</span><span class="sxs-lookup"><span data-stu-id="49262-123">An excerpt from a CSV trace is shown below in Table 1.</span></span>

## <a name="viewing-the-trace-and-diagnosing"></a><span data-ttu-id="49262-124">Exibindo o rastreamento e diagnosticando</span><span class="sxs-lookup"><span data-stu-id="49262-124">Viewing the Trace and Diagnosing</span></span>

<span data-ttu-id="49262-125">O arquivo CSV resultante para rastreamentos pode ser exibido no Excel ou em qualquer ferramenta que dê suporte ao formato CSV.</span><span class="sxs-lookup"><span data-stu-id="49262-125">The resulting CSV file for traces can be viewed in Excel or any tool that supports the CSV format.</span></span> <span data-ttu-id="49262-126">A tabela 1 abaixo mostra os trechos de um arquivo de rastreamento de exemplo (httptrace.csv).</span><span class="sxs-lookup"><span data-stu-id="49262-126">Table 1 below shows excerpts from a sample trace file (httptrace.csv).</span></span> <span data-ttu-id="49262-127">No relatório de rastreamento, a coluna "nível" mostra uma entrada com um valor de "3", que corresponde a um aviso no ETW.</span><span class="sxs-lookup"><span data-stu-id="49262-127">In the trace report, the "Level" column shows an entry with a value of "3", which corresponds to a warning in ETW.</span></span> <span data-ttu-id="49262-128">O componente de API do servidor HTTP segue os níveis de ETW definidos no seguinte artigo: ( https://msdn2.microsoft.com/library/aa382793.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49262-128">The HTTP Server API component follows the ETW Levels defined in the following article: (https://msdn2.microsoft.com/library/aa382793.aspx).</span></span> <span data-ttu-id="49262-129">Os níveis de ETW incluem:</span><span class="sxs-lookup"><span data-stu-id="49262-129">The ETW levels include:</span></span>



| <span data-ttu-id="49262-130">Nível</span><span class="sxs-lookup"><span data-stu-id="49262-130">Level</span></span> | <span data-ttu-id="49262-131">Significado</span><span class="sxs-lookup"><span data-stu-id="49262-131">Meaning</span></span>      |
|-------|--------------|
| <span data-ttu-id="49262-132">1</span><span class="sxs-lookup"><span data-stu-id="49262-132">1</span></span>     | <span data-ttu-id="49262-133">Crítico</span><span class="sxs-lookup"><span data-stu-id="49262-133">Critical</span></span>     |
| <span data-ttu-id="49262-134">2</span><span class="sxs-lookup"><span data-stu-id="49262-134">2</span></span>     | <span data-ttu-id="49262-135">Erro</span><span class="sxs-lookup"><span data-stu-id="49262-135">Error</span></span>        |
| <span data-ttu-id="49262-136">3</span><span class="sxs-lookup"><span data-stu-id="49262-136">3</span></span>     | <span data-ttu-id="49262-137">Aviso</span><span class="sxs-lookup"><span data-stu-id="49262-137">Warning</span></span>      |
| <span data-ttu-id="49262-138">4</span><span class="sxs-lookup"><span data-stu-id="49262-138">4</span></span>     | <span data-ttu-id="49262-139">Infomational</span><span class="sxs-lookup"><span data-stu-id="49262-139">Infomational</span></span> |
| <span data-ttu-id="49262-140">5</span><span class="sxs-lookup"><span data-stu-id="49262-140">5</span></span>     | <span data-ttu-id="49262-141">Detalhado</span><span class="sxs-lookup"><span data-stu-id="49262-141">Verbose</span></span>      |



 

<span data-ttu-id="49262-142">Com esse aviso, o tipo de evento (coluna de tipo) relata "ConnTimedOut".</span><span class="sxs-lookup"><span data-stu-id="49262-142">With this warning, the event type (Type column) reports "ConnTimedOut".</span></span> <span data-ttu-id="49262-143">Nas colunas subsequentes para o evento ConnTimeOut, o temporizador específico que expirou é relatado como "timer \_ ConnectionIdle".</span><span class="sxs-lookup"><span data-stu-id="49262-143">In the subsequent columns for the ConnTimeOut event, the specific timer that expired is reported as "Timer\_ConnectionIdle".</span></span> <span data-ttu-id="49262-144">Observe que a coluna com a entrada "timer \_ ConnectionIdle" não está incluída na tabela para fins de brevidade e evite o trecho de colunas não contíguas.</span><span class="sxs-lookup"><span data-stu-id="49262-144">Note the column with the "Timer\_ConnectionIdle" entry is not included in the table for the sake brevity and to avoid excerpting noncontiguous columns.</span></span>



| <span data-ttu-id="49262-145">Nome do evento</span><span class="sxs-lookup"><span data-stu-id="49262-145">Event name</span></span>                    | <span data-ttu-id="49262-146">Tipo</span><span class="sxs-lookup"><span data-stu-id="49262-146">Type</span></span>            | <span data-ttu-id="49262-147">ID do evento</span><span class="sxs-lookup"><span data-stu-id="49262-147">Event ID</span></span> | <span data-ttu-id="49262-148">Versão</span><span class="sxs-lookup"><span data-stu-id="49262-148">Version</span></span> | <span data-ttu-id="49262-149">Canal</span><span class="sxs-lookup"><span data-stu-id="49262-149">Channel</span></span> | <span data-ttu-id="49262-150">Nível</span><span class="sxs-lookup"><span data-stu-id="49262-150">Level</span></span> |
|-------------------------------|-----------------|----------|---------|---------|-------|
| <span data-ttu-id="49262-151">EventTrace</span><span class="sxs-lookup"><span data-stu-id="49262-151">EventTrace</span></span>                    | <span data-ttu-id="49262-152">parâmetro</span><span class="sxs-lookup"><span data-stu-id="49262-152">Header</span></span>          | <span data-ttu-id="49262-153">0</span><span class="sxs-lookup"><span data-stu-id="49262-153">0</span></span>        | <span data-ttu-id="49262-154">2</span><span class="sxs-lookup"><span data-stu-id="49262-154">2</span></span>       | <span data-ttu-id="49262-155">0</span><span class="sxs-lookup"><span data-stu-id="49262-155">0</span></span>       | <span data-ttu-id="49262-156">0</span><span class="sxs-lookup"><span data-stu-id="49262-156">0</span></span>     |
| <span data-ttu-id="49262-157">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-157">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-158">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="49262-158">ChgUrlGrpProp</span></span>   | <span data-ttu-id="49262-159">28</span><span class="sxs-lookup"><span data-stu-id="49262-159">28</span></span>       | <span data-ttu-id="49262-160">0</span><span class="sxs-lookup"><span data-stu-id="49262-160">0</span></span>       | <span data-ttu-id="49262-161">16</span><span class="sxs-lookup"><span data-stu-id="49262-161">16</span></span>      | <span data-ttu-id="49262-162">4</span><span class="sxs-lookup"><span data-stu-id="49262-162">4</span></span>     |
| <span data-ttu-id="49262-163">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-163">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-164">AddUrl</span><span class="sxs-lookup"><span data-stu-id="49262-164">AddUrl</span></span>          | <span data-ttu-id="49262-165">31</span><span class="sxs-lookup"><span data-stu-id="49262-165">31</span></span>       | <span data-ttu-id="49262-166">0</span><span class="sxs-lookup"><span data-stu-id="49262-166">0</span></span>       | <span data-ttu-id="49262-167">16</span><span class="sxs-lookup"><span data-stu-id="49262-167">16</span></span>      | <span data-ttu-id="49262-168">4</span><span class="sxs-lookup"><span data-stu-id="49262-168">4</span></span>     |
| <span data-ttu-id="49262-169">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-169">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-170">ChgReqQueueProp</span><span class="sxs-lookup"><span data-stu-id="49262-170">ChgReqQueueProp</span></span> | <span data-ttu-id="49262-171">30</span><span class="sxs-lookup"><span data-stu-id="49262-171">30</span></span>       | <span data-ttu-id="49262-172">0</span><span class="sxs-lookup"><span data-stu-id="49262-172">0</span></span>       | <span data-ttu-id="49262-173">16</span><span class="sxs-lookup"><span data-stu-id="49262-173">16</span></span>      | <span data-ttu-id="49262-174">4</span><span class="sxs-lookup"><span data-stu-id="49262-174">4</span></span>     |
| <span data-ttu-id="49262-175">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-175">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-176">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="49262-176">ChgUrlGrpProp</span></span>   | <span data-ttu-id="49262-177">28</span><span class="sxs-lookup"><span data-stu-id="49262-177">28</span></span>       | <span data-ttu-id="49262-178">0</span><span class="sxs-lookup"><span data-stu-id="49262-178">0</span></span>       | <span data-ttu-id="49262-179">16</span><span class="sxs-lookup"><span data-stu-id="49262-179">16</span></span>      | <span data-ttu-id="49262-180">4</span><span class="sxs-lookup"><span data-stu-id="49262-180">4</span></span>     |
| <span data-ttu-id="49262-181">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-181">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-182">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="49262-182">ChgSrvSesProp</span></span>   | <span data-ttu-id="49262-183">29</span><span class="sxs-lookup"><span data-stu-id="49262-183">29</span></span>       | <span data-ttu-id="49262-184">0</span><span class="sxs-lookup"><span data-stu-id="49262-184">0</span></span>       | <span data-ttu-id="49262-185">16</span><span class="sxs-lookup"><span data-stu-id="49262-185">16</span></span>      | <span data-ttu-id="49262-186">4</span><span class="sxs-lookup"><span data-stu-id="49262-186">4</span></span>     |
| <span data-ttu-id="49262-187">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-187">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-188">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="49262-188">ChgSrvSesProp</span></span>   | <span data-ttu-id="49262-189">29</span><span class="sxs-lookup"><span data-stu-id="49262-189">29</span></span>       | <span data-ttu-id="49262-190">0</span><span class="sxs-lookup"><span data-stu-id="49262-190">0</span></span>       | <span data-ttu-id="49262-191">16</span><span class="sxs-lookup"><span data-stu-id="49262-191">16</span></span>      | <span data-ttu-id="49262-192">4</span><span class="sxs-lookup"><span data-stu-id="49262-192">4</span></span>     |
| <span data-ttu-id="49262-193">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-193">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-194">ConnConnect</span><span class="sxs-lookup"><span data-stu-id="49262-194">ConnConnect</span></span>     | <span data-ttu-id="49262-195">21</span><span class="sxs-lookup"><span data-stu-id="49262-195">21</span></span>       | <span data-ttu-id="49262-196">0</span><span class="sxs-lookup"><span data-stu-id="49262-196">0</span></span>       | <span data-ttu-id="49262-197">16</span><span class="sxs-lookup"><span data-stu-id="49262-197">16</span></span>      | <span data-ttu-id="49262-198">4</span><span class="sxs-lookup"><span data-stu-id="49262-198">4</span></span>     |
| <span data-ttu-id="49262-199">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-199">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-200">ConnIdAssgn</span><span class="sxs-lookup"><span data-stu-id="49262-200">ConnIdAssgn</span></span>     | <span data-ttu-id="49262-201">22</span><span class="sxs-lookup"><span data-stu-id="49262-201">22</span></span>       | <span data-ttu-id="49262-202">0</span><span class="sxs-lookup"><span data-stu-id="49262-202">0</span></span>       | <span data-ttu-id="49262-203">16</span><span class="sxs-lookup"><span data-stu-id="49262-203">16</span></span>      | <span data-ttu-id="49262-204">4</span><span class="sxs-lookup"><span data-stu-id="49262-204">4</span></span>     |
| <span data-ttu-id="49262-205">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-205">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-206">RecvReq</span><span class="sxs-lookup"><span data-stu-id="49262-206">RecvReq</span></span>         | <span data-ttu-id="49262-207">1</span><span class="sxs-lookup"><span data-stu-id="49262-207">1</span></span>        | <span data-ttu-id="49262-208">0</span><span class="sxs-lookup"><span data-stu-id="49262-208">0</span></span>       | <span data-ttu-id="49262-209">16</span><span class="sxs-lookup"><span data-stu-id="49262-209">16</span></span>      | <span data-ttu-id="49262-210">4</span><span class="sxs-lookup"><span data-stu-id="49262-210">4</span></span>     |
| <span data-ttu-id="49262-211">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-211">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-212">Analisar</span><span class="sxs-lookup"><span data-stu-id="49262-212">Parse</span></span>           | <span data-ttu-id="49262-213">2</span><span class="sxs-lookup"><span data-stu-id="49262-213">2</span></span>        | <span data-ttu-id="49262-214">0</span><span class="sxs-lookup"><span data-stu-id="49262-214">0</span></span>       | <span data-ttu-id="49262-215">16</span><span class="sxs-lookup"><span data-stu-id="49262-215">16</span></span>      | <span data-ttu-id="49262-216">4</span><span class="sxs-lookup"><span data-stu-id="49262-216">4</span></span>     |
| <span data-ttu-id="49262-217">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-217">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-218">LogFileWrite</span><span class="sxs-lookup"><span data-stu-id="49262-218">LogFileWrite</span></span>    | <span data-ttu-id="49262-219">51</span><span class="sxs-lookup"><span data-stu-id="49262-219">51</span></span>       | <span data-ttu-id="49262-220">0</span><span class="sxs-lookup"><span data-stu-id="49262-220">0</span></span>       | <span data-ttu-id="49262-221">16</span><span class="sxs-lookup"><span data-stu-id="49262-221">16</span></span>      | <span data-ttu-id="49262-222">4</span><span class="sxs-lookup"><span data-stu-id="49262-222">4</span></span>     |
| <span data-ttu-id="49262-223">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-223">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-224">ConnCleanup</span><span class="sxs-lookup"><span data-stu-id="49262-224">ConnCleanup</span></span>     | <span data-ttu-id="49262-225">24</span><span class="sxs-lookup"><span data-stu-id="49262-225">24</span></span>       | <span data-ttu-id="49262-226">0</span><span class="sxs-lookup"><span data-stu-id="49262-226">0</span></span>       | <span data-ttu-id="49262-227">16</span><span class="sxs-lookup"><span data-stu-id="49262-227">16</span></span>      | <span data-ttu-id="49262-228">4</span><span class="sxs-lookup"><span data-stu-id="49262-228">4</span></span>     |
| <span data-ttu-id="49262-229">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="49262-229">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="49262-230">ConnTimedOut</span><span class="sxs-lookup"><span data-stu-id="49262-230">ConnTimedOut</span></span>    | <span data-ttu-id="49262-231">53</span><span class="sxs-lookup"><span data-stu-id="49262-231">53</span></span>       | <span data-ttu-id="49262-232">0</span><span class="sxs-lookup"><span data-stu-id="49262-232">0</span></span>       | <span data-ttu-id="49262-233">16</span><span class="sxs-lookup"><span data-stu-id="49262-233">16</span></span>      | <span data-ttu-id="49262-234">3</span><span class="sxs-lookup"><span data-stu-id="49262-234">3</span></span>     |



 

<span data-ttu-id="49262-235">Tabela 1: trechos de um relatório de rastreamento de exemplo para um problema de temporizador</span><span class="sxs-lookup"><span data-stu-id="49262-235">Table 1: Excerpts from a Sample Trace Report for a Timer Issue</span></span>

<span data-ttu-id="49262-236">Neste exemplo, a expiração (evento ConnTimeOut) do temporizador de cabeçalho (temporizador \_ ConnectionIdle) é o motivo pelo qual os usuários finais veem a mensagem "a página não pode ser exibida" em seus clientes Web.</span><span class="sxs-lookup"><span data-stu-id="49262-236">In this example, the expiration (ConnTimeOut event) of the header timer (Timer\_ConnectionIdle) is the reason end-users see the "page cannot be displayed" message in their web clients.</span></span> <span data-ttu-id="49262-237">Um motivo em potencial para o tempo limite pode ser que os clientes da Web estão enviando lentamente devido a conexões lentas.</span><span class="sxs-lookup"><span data-stu-id="49262-237">A potential reason for the timeout may be that Web clients are sending slowly due to slow connections.</span></span> <span data-ttu-id="49262-238">Para resolver esse problema, o valor de tempo limite pode ser ajustado por meio de comandos netsh.</span><span class="sxs-lookup"><span data-stu-id="49262-238">To address this issue, the timeout value can be adjusted through Netsh commands.</span></span>

## <a name="adjusting-timeout-through-netsh-and-verifying-the-solution"></a><span data-ttu-id="49262-239">Ajustando o tempo limite por meio do netsh e verificando a solução</span><span class="sxs-lookup"><span data-stu-id="49262-239">Adjusting Timeout through Netsh and Verifying the Solution</span></span>

<span data-ttu-id="49262-240">Os comandos netsh para HTTP listados abaixo permitem que um profissional de ti exiba e defina valores de configuração no componente de API do servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="49262-240">The Netsh commands for HTTP listed below allow an IT professional to view and configure setting values on the HTTP Server API component.</span></span> <span data-ttu-id="49262-241">As alterações por meio de comandos netsh HTTP afetam todos os aplicativos de servidor hospedados pelo componente de API do servidor HTTP para esse computador.</span><span class="sxs-lookup"><span data-stu-id="49262-241">Changes through Netsh HTTP commands affect all server applications hosted by the HTTP Server API component for that machine.</span></span> <span data-ttu-id="49262-242">Essas alterações persistem entre as reinicializações do componente e reinicializações do computador.</span><span class="sxs-lookup"><span data-stu-id="49262-242">These changes persist across restarts of the component and reboots of the machine.</span></span> <span data-ttu-id="49262-243">Os comandos netsh HTTP estão disponíveis no Windows Vista e no Windows Server 2008 e substituem a ferramenta de HttpCfg.exe do Windows Server 2003 Resource Kit durante a execução no Windows Vista e no Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="49262-243">The Netsh HTTP commands are available in Windows Vista and Windows Server 2008 and replace the Windows Server 2003 Resource Kit's HttpCfg.exe tool when running on Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="49262-244">Nesse cenário, ajustaremos um valor de tempo limite e, em seguida, verificaremos a solução.</span><span class="sxs-lookup"><span data-stu-id="49262-244">In this scenario, we will adjust a timeout value and then verify the solution.</span></span> <span data-ttu-id="49262-245">Existem temporizadores no componente de API do servidor HTTP para garantir a disponibilidade e proteger contra o excesso de consumo por um usuário mal configurado ou mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="49262-245">Timers exist in the HTTP Server API component to ensure availability and protect against overconsumption by a misconfigured or malicious user.</span></span> <span data-ttu-id="49262-246">O ajuste de temporizadores de valores padrão deve ser avaliado cuidadosamente em relação a um ataque de DoS potencial.</span><span class="sxs-lookup"><span data-stu-id="49262-246">Adjusting timers from default values should be carefully evaluated against a potential DoS attack.</span></span>

<span data-ttu-id="49262-247">Neste exemplo, os clientes Web estão atrás de uma conexão de rede lenta, resultando no \_ evento ETW ConnectionIdle do temporizador.</span><span class="sxs-lookup"><span data-stu-id="49262-247">In this example, the web clients are behind a slow network connection, resulting in the Timer\_ConnectionIdle ETW event.</span></span> <span data-ttu-id="49262-248">Depois de considerar a causa dos tempos limite e do balanceamento com o impacto na carga do servidor, a decisão será feita para aumentar os valores de tempo limite para um valor de 240 segundos.</span><span class="sxs-lookup"><span data-stu-id="49262-248">After consideration of the cause of the timeouts and balancing with the impact on the server's load, the decision is made to increase the timeout values to a value of 240 seconds.</span></span> <span data-ttu-id="49262-249">Você pode exibir e, em seguida, configurar o temporizador com o procedimento a seguir.</span><span class="sxs-lookup"><span data-stu-id="49262-249">You can view and then configure the timer with the following procedure.</span></span>

<span data-ttu-id="49262-250">**Configurar o temporizador de conexão ociosa (temporizador \_ ConnectionIdle) com netsh**</span><span class="sxs-lookup"><span data-stu-id="49262-250">**Configure the idle connection timer (Timer\_ConnectionIdle) with Netsh**</span></span>

1.  <span data-ttu-id="49262-251">No servidor, abra uma janela de comandos com privilégios elevados e execute as etapas abaixo para exibir e configurar o valor de tempo limite.</span><span class="sxs-lookup"><span data-stu-id="49262-251">On the server, open an elevated command window and run the steps below to view and configure the timeout value.</span></span> <span data-ttu-id="49262-252">Uma captura de tela do comando netsh HTTP é mostrada na Figura 2 abaixo.</span><span class="sxs-lookup"><span data-stu-id="49262-252">A screenshot of the Netsh HTTP command is shown in Figure 2 below.</span></span>
2.  <span data-ttu-id="49262-253">Mostrar os valores de tempo limite atuais: **netsh http show Timeout**</span><span class="sxs-lookup"><span data-stu-id="49262-253">Show the current timeout values: **Netsh http show timeout**</span></span>
3.  <span data-ttu-id="49262-254">Configure o valor de tempo limite de ConnectionIdle do temporizador \_ .</span><span class="sxs-lookup"><span data-stu-id="49262-254">Configure the Timer\_ConnectionIdle timeout value.</span></span> <span data-ttu-id="49262-255">Neste exemplo, o valor é alterado para 240 segundos: **netsh http add tempo_limite Timeout = idleConnectionTimeout valor = 240**</span><span class="sxs-lookup"><span data-stu-id="49262-255">In this example, the value is changed to 240 seconds: **Netsh http add timeout timeouttype=idleconnectiontimeout value=240**</span></span>

![janela de comando netsh http](images/netshhttpcommand.png)

<span data-ttu-id="49262-257">Figura 2: janela de comando netsh HTTP</span><span class="sxs-lookup"><span data-stu-id="49262-257">Figure 2: Netsh HTTP command window</span></span>

<span data-ttu-id="49262-258">Depois de configurar o valor de tempo limite, execute novamente as etapas de diagnóstico ETW.</span><span class="sxs-lookup"><span data-stu-id="49262-258">After configuring the timeout value, rerun the ETW diagnosis steps.</span></span> <span data-ttu-id="49262-259">Se a condição de erro for corrigida, o rastreamento ETW não deverá mais mostrar um tempo limite com um nível de ETW de "3" para o temporizador ocioso de conexão.</span><span class="sxs-lookup"><span data-stu-id="49262-259">If the error condition is corrected, the ETW trace should no longer show a timeout with an ETW level of "3" for the connection idle timer.</span></span>

 

 




