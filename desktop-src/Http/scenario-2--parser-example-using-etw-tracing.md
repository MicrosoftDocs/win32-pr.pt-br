---
title: Exemplo de analisador de cenário 2 usando o rastreamento ETW
description: Para gerar um relatório de rastreamento ETW para o componente de API do servidor HTTP, execute as etapas conforme mostrado na pasta \ 0034; Gerando um relatório de rastreamento ETW \ 0034; seção do exemplo de tempo limite HTTP de cenário 1 usando o rastreamento ETW e comandos netsh, mas reproduza o erro específico para esse cenário.
ms.assetid: 2ccd2927-8a64-40a8-a29b-4b680a942f7f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 866c566973b660e4e665226fbf9b4a266b086b6b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "104007560"
---
# <a name="scenario-2-parser-example-using-etw-tracing"></a><span data-ttu-id="6af0f-103">Cenário 2: exemplo do analisador usando o rastreamento ETW</span><span class="sxs-lookup"><span data-stu-id="6af0f-103">Scenario 2: Parser Example Using ETW Tracing</span></span>

<span data-ttu-id="6af0f-104">Para gerar um relatório de rastreamento ETW para o componente de API do servidor HTTP, execute as etapas conforme mostrado na seção "gerando um relatório de rastreamento ETW" do [cenário 1: exemplo de tempo limite http usando o rastreamento ETW e comandos netsh](scenario-1--http-timeout-example-using-etw-tracing-and-netsh-commands.md), mas reproduza o erro específico para esse cenário.</span><span class="sxs-lookup"><span data-stu-id="6af0f-104">To generate an ETW trace report for the HTTP Server API component, run the steps as shown in the "Generating an ETW Trace Report" section of [Scenario 1: HTTP Timeout Example Using ETW Tracing and Netsh Commands](scenario-1--http-timeout-example-using-etw-tracing-and-netsh-commands.md), but reproduce the error specific to this scenario.</span></span> <span data-ttu-id="6af0f-105">Neste exemplo, acesse o aplicativo Web de um computador cliente, resultando na mensagem "400 solicitação inadequada" que está sendo mostrada no cliente.</span><span class="sxs-lookup"><span data-stu-id="6af0f-105">In this example, access the web application from a client machine, resulting in the "400 bad request" message being shown on the client.</span></span> <span data-ttu-id="6af0f-106">Essas etapas são executadas no servidor, já que ele está hospedando o aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="6af0f-106">These steps are run on the server since it is hosting the web application.</span></span>

## <a name="viewing-the-trace-and-diagnosing"></a><span data-ttu-id="6af0f-107">Exibindo o rastreamento e diagnosticando</span><span class="sxs-lookup"><span data-stu-id="6af0f-107">Viewing the Trace and Diagnosing</span></span>

<span data-ttu-id="6af0f-108">O arquivo CSV resultante para rastreamentos pode ser exibido no Excel ou em qualquer ferramenta que dê suporte ao formato CSV.</span><span class="sxs-lookup"><span data-stu-id="6af0f-108">The resulting CSV file for traces can be viewed in Excel or any tool that supports the CSV format.</span></span> <span data-ttu-id="6af0f-109">A tabela 2 abaixo mostra trechos de um arquivo de rastreamento de exemplo (httptrace.csv).</span><span class="sxs-lookup"><span data-stu-id="6af0f-109">Table 2 below shows excerpts from a sample trace file (httptrace.csv).</span></span> <span data-ttu-id="6af0f-110">No relatório de rastreamento, a coluna "nível" mostra uma entrada com um valor de "2", que representa um erro.</span><span class="sxs-lookup"><span data-stu-id="6af0f-110">In the trace report, the "Level" column shows an entry with a value of "2", which represents an error.</span></span> <span data-ttu-id="6af0f-111">Conforme observado acima, o componente de API do servidor HTTP segue os níveis de ETW definidos no artigo [tipo complexo tipo](../wes/eventmanifestschema-leveltype-complextype.md)complexo de nível.</span><span class="sxs-lookup"><span data-stu-id="6af0f-111">As noted above, the HTTP Server API component follows the ETW Levels defined in the article [LevelType Complex Type Complex Type](../wes/eventmanifestschema-leveltype-complextype.md).</span></span>

<span data-ttu-id="6af0f-112">Os níveis de ETW incluem: 1 crítico; 2 erro; 3 aviso; 4 informações; 5 detalhados.</span><span class="sxs-lookup"><span data-stu-id="6af0f-112">The ETW levels include: 1 Critical; 2 Error; 3 Warning; 4 Informational; 5 Verbose.</span></span>

<span data-ttu-id="6af0f-113">Com esse erro, o tipo de evento (coluna de tipo) relata "ParseRequestFailed".</span><span class="sxs-lookup"><span data-stu-id="6af0f-113">With this error, the event type (Type column) reports "ParseRequestFailed".</span></span> <span data-ttu-id="6af0f-114">Nas colunas subsequentes para o evento ParseRequestFailed, vemos uma entrada "InvalidHost".</span><span class="sxs-lookup"><span data-stu-id="6af0f-114">In the subsequent columns for the ParseRequestFailed event, we see an "InvalidHost" entry.</span></span> <span data-ttu-id="6af0f-115">Essa entrada significa que o host identificado na solicitação HTTP está incorreto, de acordo com o protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="6af0f-115">This entry means that the identified host in the HTTP Request is incorrect, according the HTTP protocol.</span></span> <span data-ttu-id="6af0f-116">Observe que a coluna com a entrada "InvalidHost" não está incluída na tabela para fins de brevidade e para evitar a de colunas não contíguas.</span><span class="sxs-lookup"><span data-stu-id="6af0f-116">Note the column with the "InvalidHost" entry is not included in the table for the sake of brevity and to avoid excerpting noncontiguous columns.</span></span>

<span data-ttu-id="6af0f-117">Para corrigir esse problema de análise, o cliente Web deve ser corrigido para estar em conformidade com o RFC HTTP.</span><span class="sxs-lookup"><span data-stu-id="6af0f-117">To fix this parsing issue, the web client should be corrected to be compliant with the HTTP RFC.</span></span> 

| <span data-ttu-id="6af0f-118">Nome do evento</span><span class="sxs-lookup"><span data-stu-id="6af0f-118">Event name</span></span>                    | <span data-ttu-id="6af0f-119">Tipo</span><span class="sxs-lookup"><span data-stu-id="6af0f-119">Type</span></span>               | <span data-ttu-id="6af0f-120">ID do evento</span><span class="sxs-lookup"><span data-stu-id="6af0f-120">Event ID</span></span> | <span data-ttu-id="6af0f-121">Versão</span><span class="sxs-lookup"><span data-stu-id="6af0f-121">Version</span></span> | <span data-ttu-id="6af0f-122">Canal</span><span class="sxs-lookup"><span data-stu-id="6af0f-122">Channel</span></span> | <span data-ttu-id="6af0f-123">Nível</span><span class="sxs-lookup"><span data-stu-id="6af0f-123">Level</span></span> |
|-------------------------------|--------------------|----------|---------|---------|-------|
| <span data-ttu-id="6af0f-124">EventTrace</span><span class="sxs-lookup"><span data-stu-id="6af0f-124">EventTrace</span></span>                    | <span data-ttu-id="6af0f-125">parâmetro</span><span class="sxs-lookup"><span data-stu-id="6af0f-125">Header</span></span>             | <span data-ttu-id="6af0f-126">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-126">0</span></span>        | <span data-ttu-id="6af0f-127">2</span><span class="sxs-lookup"><span data-stu-id="6af0f-127">2</span></span>       | <span data-ttu-id="6af0f-128">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-128">0</span></span>       | <span data-ttu-id="6af0f-129">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-129">0</span></span>     |
| <span data-ttu-id="6af0f-130">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-130">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-131">AddUrl</span><span class="sxs-lookup"><span data-stu-id="6af0f-131">AddUrl</span></span>             | <span data-ttu-id="6af0f-132">31</span><span class="sxs-lookup"><span data-stu-id="6af0f-132">31</span></span>       | <span data-ttu-id="6af0f-133">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-133">0</span></span>       | <span data-ttu-id="6af0f-134">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-134">16</span></span>      | <span data-ttu-id="6af0f-135">4</span><span class="sxs-lookup"><span data-stu-id="6af0f-135">4</span></span>     |
| <span data-ttu-id="6af0f-136">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-136">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-137">ConnConnect</span><span class="sxs-lookup"><span data-stu-id="6af0f-137">ConnConnect</span></span>        | <span data-ttu-id="6af0f-138">21</span><span class="sxs-lookup"><span data-stu-id="6af0f-138">21</span></span>       | <span data-ttu-id="6af0f-139">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-139">0</span></span>       | <span data-ttu-id="6af0f-140">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-140">16</span></span>      | <span data-ttu-id="6af0f-141">4</span><span class="sxs-lookup"><span data-stu-id="6af0f-141">4</span></span>     |
| <span data-ttu-id="6af0f-142">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-142">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-143">ConnIdAssgn</span><span class="sxs-lookup"><span data-stu-id="6af0f-143">ConnIdAssgn</span></span>        | <span data-ttu-id="6af0f-144">22</span><span class="sxs-lookup"><span data-stu-id="6af0f-144">22</span></span>       | <span data-ttu-id="6af0f-145">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-145">0</span></span>       | <span data-ttu-id="6af0f-146">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-146">16</span></span>      | <span data-ttu-id="6af0f-147">4</span><span class="sxs-lookup"><span data-stu-id="6af0f-147">4</span></span>     |
| <span data-ttu-id="6af0f-148">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-148">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-149">RecvReq</span><span class="sxs-lookup"><span data-stu-id="6af0f-149">RecvReq</span></span>            | <span data-ttu-id="6af0f-150">1</span><span class="sxs-lookup"><span data-stu-id="6af0f-150">1</span></span>        | <span data-ttu-id="6af0f-151">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-151">0</span></span>       | <span data-ttu-id="6af0f-152">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-152">16</span></span>      | <span data-ttu-id="6af0f-153">4</span><span class="sxs-lookup"><span data-stu-id="6af0f-153">4</span></span>     |
| <span data-ttu-id="6af0f-154">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-154">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-155">ParseRequestFailed</span><span class="sxs-lookup"><span data-stu-id="6af0f-155">ParseRequestFailed</span></span> | <span data-ttu-id="6af0f-156">52</span><span class="sxs-lookup"><span data-stu-id="6af0f-156">52</span></span>       | <span data-ttu-id="6af0f-157">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-157">0</span></span>       | <span data-ttu-id="6af0f-158">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-158">16</span></span>      | <span data-ttu-id="6af0f-159">2</span><span class="sxs-lookup"><span data-stu-id="6af0f-159">2</span></span>     |
| <span data-ttu-id="6af0f-160">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="6af0f-160">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="6af0f-161">LogFileWrite</span><span class="sxs-lookup"><span data-stu-id="6af0f-161">LogFileWrite</span></span>       | <span data-ttu-id="6af0f-162">51</span><span class="sxs-lookup"><span data-stu-id="6af0f-162">51</span></span>       | <span data-ttu-id="6af0f-163">0</span><span class="sxs-lookup"><span data-stu-id="6af0f-163">0</span></span>       | <span data-ttu-id="6af0f-164">16</span><span class="sxs-lookup"><span data-stu-id="6af0f-164">16</span></span>      | <span data-ttu-id="6af0f-165">4</span><span class="sxs-lookup"><span data-stu-id="6af0f-165">4</span></span>     |



 

<span data-ttu-id="6af0f-166">Tabela 2: trechos de um exemplo de relatório de rastreamento para um problema de análise</span><span class="sxs-lookup"><span data-stu-id="6af0f-166">Table 2: Excerpts from a Sample Trace Report for a Parsing Issue</span></span>

 

 