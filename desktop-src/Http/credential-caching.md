---
title: Cache de credenciais
description: Cache de credenciais
ms.assetid: 6e411333-56fa-455b-a90a-f2b54f3c9545
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34a139d0cd90495de87f42de08687fd3157acaf6
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "103916461"
---
# <a name="credential-caching"></a><span data-ttu-id="67cd1-103">Cache de credenciais</span><span class="sxs-lookup"><span data-stu-id="67cd1-103">Credential Caching</span></span>

## <a name="credential-caching-on-ntlm-ka-connections"></a><span data-ttu-id="67cd1-104">Cache de credenciais em conexões NTLM KA</span><span class="sxs-lookup"><span data-stu-id="67cd1-104">Credential Caching on NTLM KA Connections</span></span>

<span data-ttu-id="67cd1-105">A API do servidor HTTP armazena em cache as credenciais somente em conexões Keep-Alive (KA) para autenticação NTLM.</span><span class="sxs-lookup"><span data-stu-id="67cd1-105">The HTTP Server API caches credentials only on Keep-Alive (KA) connections for NTLM authentication.</span></span> <span data-ttu-id="67cd1-106">Por padrão, a API do servidor HTTP armazena em cache as credenciais obtidas na primeira solicitação enviada em uma conexão KA.</span><span class="sxs-lookup"><span data-stu-id="67cd1-106">By default, the HTTP Server API caches the credentials obtained on the first request sent on a KA connection.</span></span> <span data-ttu-id="67cd1-107">O cliente pode enviar solicitações subsequentes em conexões do KA sem um cabeçalho de autorização e obter a autenticação com base no contexto estabelecido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="67cd1-107">The client can send subsequent requests on KA connections without an authorization header and obtain authentication based on the previously established context.</span></span> <span data-ttu-id="67cd1-108">Nesse caso, a API do servidor HTTP envia o token com base na credencial armazenada em cache para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="67cd1-108">In this case, the HTTP Server API sends the token based on the cached credential to the application.</span></span> <span data-ttu-id="67cd1-109">As credenciais para uma solicitação enviada por um proxy não são armazenadas em cache.</span><span class="sxs-lookup"><span data-stu-id="67cd1-109">Credentials for a request sent by a proxy are not cached.</span></span> <span data-ttu-id="67cd1-110">O aplicativo desabilita o cache de credenciais NTLM definindo o sinalizador **DisableNTLMCredentialCaching** na estrutura de [**\_ informações de \_ autenticação \_ do servidor http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) que é fornecida em chamadas para HttpSetServerSessionProperty ou HttpSetUrlGroupProperty.</span><span class="sxs-lookup"><span data-stu-id="67cd1-110">The application disables NTLM credential caching by setting the **DisableNTLMCredentialCaching** flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure that is supplied in calls to HttpSetServerSessionProperty or HttpSetUrlGroupProperty.</span></span> <span data-ttu-id="67cd1-111">Quando o Caching de credenciais está desabilitado, a API do servidor HTTP descarta as credenciais armazenadas em cache e executa a autenticação para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="67cd1-111">When credential caching is disabled, the HTTP Server API discards the cached credentials and performs authentication for each request</span></span>

## <a name="ntlm-credential-caching-for-specific-urls"></a><span data-ttu-id="67cd1-112">Cache de credenciais NTLM para URLs específicas</span><span class="sxs-lookup"><span data-stu-id="67cd1-112">NTLM Credential Caching for Specific URLs</span></span>

<span data-ttu-id="67cd1-113">O aplicativo determina se as credenciais de solicitação retornadas pela API do servidor HTTP são armazenadas em cache inspecionando o parâmetro flags da \_ estrutura de informações de autenticação de solicitação HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="67cd1-113">The application determines if the request credentials returned by the HTTP Server API are cached by inspecting the Flags parameter of the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="67cd1-114">Esse parâmetro indica o \_ \_ \_ \_ token de sinalizador de autenticação de solicitação HTTP \_ para \_ credenciais em cache \_ quando o token NTLM retornado foi recuperado do cache.</span><span class="sxs-lookup"><span data-stu-id="67cd1-114">This parameter indicates HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED when the returned NTLM token was retrieved from the cache.</span></span> <span data-ttu-id="67cd1-115">O cache de credenciais é especificado em um grupo de URLs para todas as URLs no grupo.</span><span class="sxs-lookup"><span data-stu-id="67cd1-115">Credential caching is specified on a URL group for all the URLs in the group.</span></span> <span data-ttu-id="67cd1-116">Não há suporte para o Caching de credencial por URL, no entanto, os aplicativos podem determinar se aceitam ou rejeitam credenciais em cache por URL, verificando o \_ \_ token de \_ sinalizador de autenticação de solicitação HTTP \_ \_ para \_ o sinalizador de credenciais em cache \_ na estrutura de informações de autenticação de \_ solicitação HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="67cd1-116">Credential caching on a per URL basis is not supported, however, applications can determine whether to accept or reject cached credentials on a per URL basis by checking the HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED flag in the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="67cd1-117">O aplicativo rejeita as credenciais armazenadas em cache enviando um desafio de autenticação 401 para o cliente.</span><span class="sxs-lookup"><span data-stu-id="67cd1-117">The application rejects the cached credentials by sending a 401 authentication challenge to the client.</span></span> <span data-ttu-id="67cd1-118">Em seguida, o cliente reenvia a solicitação com os cabeçalhos de autorização, disparando um novo handshake de autenticação com a API do servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="67cd1-118">The client then resends the request with the authorization headers, triggering a new authentication handshake with the HTTP Server API.</span></span>

## <a name="basic-authentication"></a><span data-ttu-id="67cd1-119">Autenticação Básica</span><span class="sxs-lookup"><span data-stu-id="67cd1-119">Basic Authentication</span></span>

<span data-ttu-id="67cd1-120">Quando um cabeçalho de autenticação básica é incluído na solicitação, a API do servidor HTTP analisa o cabeçalho para obter o nome de usuário e a senha.</span><span class="sxs-lookup"><span data-stu-id="67cd1-120">When a Basic authentication header is included in the request, the HTTP Server API parses the header to obtain the user name and password.</span></span> <span data-ttu-id="67cd1-121">O nome de usuário é então analisado nas partes do usuário e do domínio.</span><span class="sxs-lookup"><span data-stu-id="67cd1-121">The user name is then parsed into the user and domain portions.</span></span> <span data-ttu-id="67cd1-122">A API do servidor HTTP armazena em cache o token de acesso, obtido para a autenticação básica, com base no nome de usuário e na chave de domínio.</span><span class="sxs-lookup"><span data-stu-id="67cd1-122">The HTTP Server API caches the access token, obtained for Basic authentication, based on the user name and domain key.</span></span> <span data-ttu-id="67cd1-123">Quando uma nova solicitação é recebida, a API do servidor HTTP recupera o token de acesso com base no nome de usuário e no domínio.</span><span class="sxs-lookup"><span data-stu-id="67cd1-123">When a new request is received, the HTTP Server API retrieves the access token based on the user name and domain.</span></span> <span data-ttu-id="67cd1-124">A senha na solicitação é verificada em relação à senha armazenada em cache.</span><span class="sxs-lookup"><span data-stu-id="67cd1-124">The password in the request is then checked against the cached password.</span></span> <span data-ttu-id="67cd1-125">O token de acesso em cache é excluído quando o limite de tempo de vida (TTL) é atingido.</span><span class="sxs-lookup"><span data-stu-id="67cd1-125">The cached access token is deleted when the time-to-live (TTL) limit is reached.</span></span>

 

 




