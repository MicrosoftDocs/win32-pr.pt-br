---
title: Autenticação (API do servidor HTTP)
description: A partir da versão 2,0, a API do servidor HTTP executa a autenticação do lado do servidor para o aplicativo.
ms.assetid: e8e41e8e-1b10-4747-b18e-763e0752ade4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16d523df90861c83a45f67811edad243ceee5165
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104369108"
---
# <a name="authentication-http-server-api"></a><span data-ttu-id="d9def-103">Autenticação (API do servidor HTTP)</span><span class="sxs-lookup"><span data-stu-id="d9def-103">Authentication (HTTP Server API)</span></span>

<span data-ttu-id="d9def-104">Alguns aplicativos de servidor exigem autenticação de cliente para acessar recursos e solicitações HTTP de serviço.</span><span class="sxs-lookup"><span data-stu-id="d9def-104">Some server applications require client authentication to access resources and service HTTP requests.</span></span> <span data-ttu-id="d9def-105">A partir da versão 2,0, a API do servidor HTTP executa a autenticação do lado do servidor para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d9def-105">Starting with version 2.0, the HTTP Server API performs server side authentication for the application.</span></span> <span data-ttu-id="d9def-106">Na API do servidor HTTP versão 1,0, o aplicativo de servidor tinha que implementar sua própria autenticação.</span><span class="sxs-lookup"><span data-stu-id="d9def-106">In the HTTP Server API version 1.0, the server application had to implement its own authentication.</span></span> <span data-ttu-id="d9def-107">Algumas vantagens da autenticação executada pela API do servidor HTTP incluem:</span><span class="sxs-lookup"><span data-stu-id="d9def-107">Some advantages of authentication performed by the HTTP Server API include:</span></span>

-   <span data-ttu-id="d9def-108">Os aplicativos podem ser executados sob privilégios baixos, reduzindo assim os riscos de segurança.</span><span class="sxs-lookup"><span data-stu-id="d9def-108">Applications can run under low privileges, thus reducing security risks.</span></span>
-   <span data-ttu-id="d9def-109">A autenticação é executada no modo kernel, reduzindo assim as transições do modo de usuário para o modo kernel durante a autenticação.</span><span class="sxs-lookup"><span data-stu-id="d9def-109">Authentication is performed in kernel mode, thus reducing transitions from user mode to kernel mode during authentication.</span></span>
-   <span data-ttu-id="d9def-110">A autenticação executada no modo kernel permite que os aplicativos de servidor sejam executados em diferentes contas de usuário.</span><span class="sxs-lookup"><span data-stu-id="d9def-110">Authentication performed in kernel mode allows server applications to run on different user accounts.</span></span> <span data-ttu-id="d9def-111">Na versão 1,0, todos os aplicativos no computador devem ser executados na mesma conta de usuário para autenticar o SPN (nome da entidade de serviço).</span><span class="sxs-lookup"><span data-stu-id="d9def-111">In version 1.0, all applications on the machine must run under the same user account to authenticate on the Service Principle Name (SPN).</span></span>
-   <span data-ttu-id="d9def-112">O handshake de autenticação NTLM não será redefinido se um processo de trabalho for reciclado enquanto o handshake estiver em andamento.</span><span class="sxs-lookup"><span data-stu-id="d9def-112">The NTLM authentication handshake is not reset if a worker process is recycled while the handshake is in process.</span></span>

<span data-ttu-id="d9def-113">Para aproveitar a autenticação da versão 2,0, o aplicativo habilita os esquemas de autenticação que a API do servidor HTTP aplica às URLs para as quais o aplicativo foi registrado.</span><span class="sxs-lookup"><span data-stu-id="d9def-113">To take advantage of the version 2.0 authentication, the application enables the authentication schemes that the HTTP Server API applies to the URLs for which the application has registered.</span></span> <span data-ttu-id="d9def-114">A autenticação pode ser habilitada na sessão do servidor ou no grupo de URLs.</span><span class="sxs-lookup"><span data-stu-id="d9def-114">Authentication can be enabled on the server session or URL group.</span></span> <span data-ttu-id="d9def-115">O grupo de URLs herdará os esquemas de autenticação habilitados pela sessão de servidor se nenhum estiver definido no grupo de URLs.</span><span class="sxs-lookup"><span data-stu-id="d9def-115">The URL group inherits the authentication schemes enabled by the server session if none are set on the URL group.</span></span> <span data-ttu-id="d9def-116">A API do servidor HTTP dá suporte aos seguintes esquemas:</span><span class="sxs-lookup"><span data-stu-id="d9def-116">The HTTP Server API supports the following schemes:</span></span>

-   <span data-ttu-id="d9def-117">Negotiate</span><span class="sxs-lookup"><span data-stu-id="d9def-117">Negotiate</span></span>
-   <span data-ttu-id="d9def-118">NTLM</span><span class="sxs-lookup"><span data-stu-id="d9def-118">NTLM</span></span>
-   <span data-ttu-id="d9def-119">Digest</span><span class="sxs-lookup"><span data-stu-id="d9def-119">Digest</span></span>
-   <span data-ttu-id="d9def-120">Básico</span><span class="sxs-lookup"><span data-stu-id="d9def-120">Basic</span></span>

<span data-ttu-id="d9def-121">O aplicativo de servidor também pode implementar esquemas de autenticação não suportados pela API do servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="d9def-121">The server application can also implement authentication schemes not supported by the HTTP Server API.</span></span> <span data-ttu-id="d9def-122">A API do servidor HTTP envia solicitações ao aplicativo para esquemas de autenticação que não têm suporte ou para esquemas que não foram habilitados pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d9def-122">The HTTP Server API sends requests to the application for authentication schemes that are not supported, or for schemes that have not been enabled by the application.</span></span>

### <a name="enabling-authentication"></a><span data-ttu-id="d9def-123">Habilitando autenticação</span><span class="sxs-lookup"><span data-stu-id="d9def-123">Enabling Authentication</span></span>

<span data-ttu-id="d9def-124">O aplicativo de servidor habilita e configura a autenticação na sessão do servidor ou no grupo de URLs com as funções [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="d9def-124">The server application enables and configures authentication on the server session or URL group with the [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) functions as follows:</span></span>

1.  <span data-ttu-id="d9def-125">O aplicativo habilita a autenticação especificando **HttpServerAuthenticationProperty** no parâmetro *Property* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="d9def-125">The application enables authentication by specifying **HttpServerAuthenticationProperty** in the *Property* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span>
2.  <span data-ttu-id="d9def-126">O aplicativo especifica os parâmetros de configuração na estrutura de [**informações de \_ autenticação do servidor \_ \_ http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) no parâmetro *pPropertyInformation* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) ou [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="d9def-126">The application specifies the configuration parameters in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in the *pPropertyInformation* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span> <span data-ttu-id="d9def-127">O aplicativo especifica os esquemas de autenticação habilitados, se o cache de credenciais NTLM está desabilitado e fornece os parâmetros básico e resumo na estrutura de **\_ informações de \_ autenticação \_ do servidor http** .</span><span class="sxs-lookup"><span data-stu-id="d9def-127">The application specifies the authentication schemes enabled, whether NTLM credential caching is disabled, and supplies the Basic and Digest parameters in the **HTTP\_SERVER\_AUTHENTICATION\_INFO** structure.</span></span>

### <a name="authentication-procedure"></a><span data-ttu-id="d9def-128">Procedimento de autenticação</span><span class="sxs-lookup"><span data-stu-id="d9def-128">Authentication Procedure</span></span>

<span data-ttu-id="d9def-129">Para iniciar a autenticação do servidor HTTP, o aplicativo habilita a propriedade de autenticação antes que a primeira solicitação chegue à fila de solicitações.</span><span class="sxs-lookup"><span data-stu-id="d9def-129">To initiate HTTP Server authentication, the application enables the authentication property before the first request arrives on the request queue.</span></span> <span data-ttu-id="d9def-130">As etapas a seguir são o fluxo de processamento comum para autenticar uma solicitação.</span><span class="sxs-lookup"><span data-stu-id="d9def-130">The following steps are the common processing flow for authenticating a request.</span></span>

1.  <span data-ttu-id="d9def-131">O aplicativo habilita a autenticação.</span><span class="sxs-lookup"><span data-stu-id="d9def-131">The application enables authentication.</span></span> <span data-ttu-id="d9def-132">Consulte a seção "Habilitando a autenticação" anterior.</span><span class="sxs-lookup"><span data-stu-id="d9def-132">See the preceding "Enabling Authentication" section.</span></span>
    > [!Note]  
    > <span data-ttu-id="d9def-133">O cliente envia uma solicitação não autenticada.</span><span class="sxs-lookup"><span data-stu-id="d9def-133">The client sends an unauthenticated request.</span></span> <span data-ttu-id="d9def-134">A API do servidor HTTP passa a solicitação para o aplicativo de servidor e permite que ele gere o desafio 401 inicial.</span><span class="sxs-lookup"><span data-stu-id="d9def-134">The HTTP Server API passes the request to the server application and allows it to generate the initial 401 challenge.</span></span> <span data-ttu-id="d9def-135">A API do servidor HTTP inclui a estrutura de [**\_ informações de \_ autenticação \_ de solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) inserida com a estrutura de [**\_ solicitação HTTP**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="d9def-135">The HTTP Server API includes the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) structure.</span></span> <span data-ttu-id="d9def-136">O membro **AuthStatus** indica **HttpAuthStatusNotAuthenticated**</span><span class="sxs-lookup"><span data-stu-id="d9def-136">The **AuthStatus** member indicates **HttpAuthStatusNotAuthenticated**</span></span>

     

2.  <span data-ttu-id="d9def-137">O aplicativo examina o membro **AuthStatus** da estrutura de [**\_ informações de \_ autenticação \_ de solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para determinar se a solicitação foi autenticada.</span><span class="sxs-lookup"><span data-stu-id="d9def-137">The application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if the request has been authenticated.</span></span> <span data-ttu-id="d9def-138">Se a solicitação não tiver sido autenticada, o aplicativo poderá atender à solicitação como anônima ou enviar um desafio de autenticação inicial 401.</span><span class="sxs-lookup"><span data-stu-id="d9def-138">If the request has not been authenticated, the application can service the request as anonymous or send an initial 401 authentication challenge.</span></span>
3.  <span data-ttu-id="d9def-139">Se o aplicativo serviços de solicitação como anônimo, ele manipulará a solicitação e enviará a resposta final para o aplicativo cliente, como se a autenticação não estivesse envolvida.</span><span class="sxs-lookup"><span data-stu-id="d9def-139">If the application services the request as anonymous, it handles the request and sends the final response to the client application, just as if the authentication was not involved.</span></span>
4.  <span data-ttu-id="d9def-140">Se, em vez disso, o aplicativo exigir autenticação, ele enviará o desafio 401 inicial com um ou mais cabeçalhos de WWW-Authenticate indicando os esquemas disponíveis para o cliente.</span><span class="sxs-lookup"><span data-stu-id="d9def-140">If instead the application requires authentication, it sends the initial 401 challenge with one or more WWW-Authenticate headers indicating the available schemes to the client.</span></span> <span data-ttu-id="d9def-141">O aplicativo deve usar a [**estrutura \_ http \_ vários \_ cabeçalhos conhecidos**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) para criar o conjunto de cabeçalhos necessário quando mais de um cabeçalho de autenticação é enviado na resposta.</span><span class="sxs-lookup"><span data-stu-id="d9def-141">The application should use the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to build the required set of headers when more than one authentication header is sent in the response.</span></span>
    > [!Note]
    >
    > <span data-ttu-id="d9def-142">O cliente reenvia a solicitação com o cabeçalho de autorização para um esquema selecionado do conjunto de esquemas disponíveis indicado pelo aplicativo de servidor na resposta inicial 401.</span><span class="sxs-lookup"><span data-stu-id="d9def-142">The client resends the request with the authorization header for a scheme selected from the set of available schemes indicated by the server application in initial 401 response.</span></span>
    >
    > <span data-ttu-id="d9def-143">A API do servidor HTTP examina o cabeçalho autorização da solicitação de autorização para determinar se o esquema está habilitado.</span><span class="sxs-lookup"><span data-stu-id="d9def-143">The HTTP Server API examines the authorization request authorization header to determine if the scheme is enabled.</span></span> <span data-ttu-id="d9def-144">Se for, a API do servidor HTTP executará a autenticação e tratará todas as trocas de solicitação/401-resposta provisórias até que o handshake de autenticação seja finalizado.</span><span class="sxs-lookup"><span data-stu-id="d9def-144">If it is, then the HTTP Server API performs authentication and handles all interim request/401-response exchanges, until the authentication handshake is finalized.</span></span>
    >
    > <span data-ttu-id="d9def-145">Quando a API do servidor HTTP conclui a tentativa de autenticação, ela envia a solicitação para o aplicativo com os resultados da tentativa de autenticação na estrutura de [**\_ informações de \_ autenticação \_ de solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) que é retornada com a solicitação.</span><span class="sxs-lookup"><span data-stu-id="d9def-145">When The HTTP Server API completes the authentication attempt, it sends the request to the application with the results of the authentication attempt in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure that is returned with the request.</span></span> <span data-ttu-id="d9def-146">Se a tentativa de autenticação falhar por um dos motivos a seguir, a API do servidor HTTP não passará a solicitação para o aplicativo:</span><span class="sxs-lookup"><span data-stu-id="d9def-146">If the authentication attempt fails for one of the following reasons, the HTTP Server API does not pass the request to the application:</span></span>
    >
    > -   <span data-ttu-id="d9def-147">Se o handshake de autenticação falhar devido a um erro interno da API do servidor HTTP, como uma falha de alocação de memória, a API do servidor HTTP gerará uma resposta 503 (Serviço indisponível) e enviará de volta para o cliente.</span><span class="sxs-lookup"><span data-stu-id="d9def-147">If the authentication handshake fails due to an internal HTTP Server API error such as a memory allocation failure, the HTTP Server API generates a 503 (service unavailable) response and sends back to client.</span></span>
    > -   <span data-ttu-id="d9def-148">Se um cabeçalho de autorização malformado, como um cabeçalho sem um nome de esquema, ou uma codificação Base64 malformada de credenciais de cliente for encontrada, a API do servidor HTTP gerará uma resposta 400 (solicitação incorreta) e enviará de volta para o cliente.</span><span class="sxs-lookup"><span data-stu-id="d9def-148">If a malformed authorization header such as a header without a scheme name, or malformed Base64 encoding of client credentials encountered, the HTTP Server API generates a 400 (bad request) response and sends back to client.</span></span>

     

5.  <span data-ttu-id="d9def-149">O aplicativo de servidor examina o membro **AuthStatus** da estrutura [**de \_ \_ \_ informações de autenticação de solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para determinar se a autenticação foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="d9def-149">The server application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if authentication was successful.</span></span> <span data-ttu-id="d9def-150">Quando a autenticação falha, a API do servidor HTTP inclui o erro retornado de [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) no membro **SecStatus** da estrutura de **informações de \_ \_ autenticação \_ de solicitação HTTP** .</span><span class="sxs-lookup"><span data-stu-id="d9def-150">When authentication fails, the HTTP Server API includes the error returned from [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) in the **SecStatus** member of the **HTTP\_REQUEST\_AUTH\_INFO** structure.</span></span> <span data-ttu-id="d9def-151">Se a tentativa de autenticação falhar devido a credenciais inadequadas, o aplicativo poderá gerar outro desafio de 401 com o cabeçalho de WWW-Authenticate desejado ou poderá decidir atender a solicitação como anônima.</span><span class="sxs-lookup"><span data-stu-id="d9def-151">If the authentication attempt fails due to bad credentials, the application can generate another 401 challenge with the desired WWW-Authenticate header, or may decided to service the request as anonymous.</span></span>
6.  <span data-ttu-id="d9def-152">Se a autenticação tiver sido bem-sucedida, o aplicativo usará o token fornecido na estrutura de [**\_ informações de \_ autenticação \_ de solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para representar o cliente e acessar os recursos.</span><span class="sxs-lookup"><span data-stu-id="d9def-152">If authentication was successful, the application uses the token provided in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to impersonate the client and to access resources.</span></span> <span data-ttu-id="d9def-153">O identificador de token de acesso retornado ao aplicativo é válido, desde que a ID da solicitação seja válida, o que normalmente ocorre até que o aplicativo conclua a resposta à solicitação.</span><span class="sxs-lookup"><span data-stu-id="d9def-153">The access token handle returned to the application is valid as long as the request ID is valid, which is typically until the application completes the response to the request.</span></span> <span data-ttu-id="d9def-154">O token pode, no entanto, expirar durante esse período e o aplicativo pode precisar enviar outro desafio de 401 para o cliente.</span><span class="sxs-lookup"><span data-stu-id="d9def-154">The token may, however, expire during this period and the application may need to send another 401 challenge to the client.</span></span>
7.  <span data-ttu-id="d9def-155">O aplicativo envia a resposta final de 200 OK e deve fechar o identificador para o token de acesso.</span><span class="sxs-lookup"><span data-stu-id="d9def-155">The application sends the final 200 OK response, and it must close the handle to the access token.</span></span>
    > [!Note]  
    > <span data-ttu-id="d9def-156">A API do servidor HTTP acrescenta os dados de autenticação mútua à resposta final 200 OK, se um tiver sido gerado durante o handshake de autenticação.</span><span class="sxs-lookup"><span data-stu-id="d9def-156">The HTTP Server API appends the mutual authentication data to the final 200 OK response, if one was generated during the authentication handshake.</span></span>

     

### <a name="ntlm-null-sessions"></a><span data-ttu-id="d9def-157">Sessões nulas do NTLM</span><span class="sxs-lookup"><span data-stu-id="d9def-157">NTLM NULL Sessions</span></span>

<span data-ttu-id="d9def-158">Observe que uma sessão nula do NTLM indicada no contexto de segurança final não é tratada como autenticada.</span><span class="sxs-lookup"><span data-stu-id="d9def-158">Note that an NTLM NULL session indicated in the final security context, is not treated as authenticated.</span></span> <span data-ttu-id="d9def-159">Nesse caso, a solicitação é enviada ao aplicativo com um erro HttpAuthStatusFailure na estrutura de [**informações de \_ \_ autenticação de \_ solicitação HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) e o aplicativo pode enviar outro desafio 401.</span><span class="sxs-lookup"><span data-stu-id="d9def-159">In this case, the request is sent to the application with an HttpAuthStatusFailure error in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure and the application can send another 401 challenge.</span></span>

### <a name="preemptive-authentication"></a><span data-ttu-id="d9def-160">Autenticação preemptiva</span><span class="sxs-lookup"><span data-stu-id="d9def-160">Preemptive Authentication</span></span>

<span data-ttu-id="d9def-161">De acordo com o protocolo HTTP, depois que o cliente tiver estabelecido a autenticação para um recurso, ele poderá enviar preventivamente o cabeçalho de autorização correspondente com solicitações consecutivas subsequentes para o recurso sem esperar por um desafio de 401 do servidor.</span><span class="sxs-lookup"><span data-stu-id="d9def-161">According to the HTTP protocol, after the client has established authentication for a resource, it can preemptively send the corresponding authorization header with subsequent consecutive requests for the resource without waiting for a 401 challenge from the server.</span></span> <span data-ttu-id="d9def-162">Se o esquema indicado no cabeçalho Authorization ainda estiver habilitado pelo aplicativo e suportado pela API do servidor HTTP, o servidor HTTP tentará autenticar sem enviar a solicitação ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d9def-162">If the scheme indicated in the Authorization header is still enabled by the application and supported by the HTTP Server API, the HTTP Server attempts authentication without sending the request to the application.</span></span> <span data-ttu-id="d9def-163">Quando esse tipo de solicitação autenticada é recebido pelo aplicativo, ele pode optar por descartar a solicitação e gerar novamente o desafio 401 inicial ou atender a solicitação como autenticada.</span><span class="sxs-lookup"><span data-stu-id="d9def-163">When this type of authenticated request is received by the application, it can choose to discard the request and regenerate the initial 401 challenge or service the request as authenticated.</span></span>

### <a name="mutual-authentication"></a><span data-ttu-id="d9def-164">Autenticação Mútua</span><span class="sxs-lookup"><span data-stu-id="d9def-164">Mutual Authentication</span></span>

<span data-ttu-id="d9def-165">Os dados de autenticação mútua são gerados quando o esquema de negociação é usado durante o handshake e é resolvido para Kerberos, e o cliente solicitou autenticação mútua.</span><span class="sxs-lookup"><span data-stu-id="d9def-165">Mutual authentication data is generated when the negotiate scheme is used during handshake and it is resolved to Kerberos, and client has asked for mutual authentication.</span></span> <span data-ttu-id="d9def-166">Os dados de autenticação mútua são inseridos automaticamente pela API do servidor HTTP na resposta final 200 OK enviada pelo aplicativo do servidor.</span><span class="sxs-lookup"><span data-stu-id="d9def-166">The mutual authentication data is automatically inserted by HTTP Server API in the final 200 OK response sent by the server application.</span></span> <span data-ttu-id="d9def-167">Por padrão, a API do servidor HTTP não passa os dados de autenticação mútua para o aplicativo de servidor, pois ele manipula automaticamente o envio dele.</span><span class="sxs-lookup"><span data-stu-id="d9def-167">By default HTTP Server API does not pass the Mutual authentication data to the server application, since it automatically handles the sending of it.</span></span> <span data-ttu-id="d9def-168">No entanto, se o aplicativo de servidor habilitar o sinalizador ReceiveMutualAuth na estrutura de [**\_ informações de \_ autenticação \_ do servidor http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) na configuração, os dados de autenticação mútua serão passados para o aplicativo na estrutura de informações de autenticação de [**\_ solicitação \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) inserida com a [**\_ solicitação HTTP**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85))autenticada.</span><span class="sxs-lookup"><span data-stu-id="d9def-168">However, if server application enables the ReceiveMutualAuth flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in configuration, the mutual authentication data is passed to the application in [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the authenticated [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)).</span></span> <span data-ttu-id="d9def-169">Nesse caso, o aplicativo deve enviar os dados de autenticação mútua com a resposta final de 200 OK.</span><span class="sxs-lookup"><span data-stu-id="d9def-169">In this case application should send the mutual authentication data with the final 200 OK response.</span></span> <span data-ttu-id="d9def-170">No caso em que vários sites são atendidos por um único computador, todos os sites no computador usam as credenciais da conta do computador local no domínio para autenticação mútua.</span><span class="sxs-lookup"><span data-stu-id="d9def-170">In the case where multiple sites are served by a single computer, all sites on the computer use the credentials for the Local Machine Account in the domain for mutual authentication.</span></span>

 

 
