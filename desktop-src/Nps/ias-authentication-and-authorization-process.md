---
title: Invocando as DLLs de extensão
description: Chama essa função para cada pacote de autenticação ou contabilização válido que ele recebe do NAS (servidor de acesso à rede).
ms.assetid: 6d738ad7-cce5-4835-97d6-c57173c79a16
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8bc96fab078a982f23f5f5dd86d51dbed46d5541
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103917533"
---
# <a name="invoking-the-extension-dlls"></a><span data-ttu-id="b8af6-103">Invocando as DLLs de extensão</span><span class="sxs-lookup"><span data-stu-id="b8af6-103">Invoking the Extension DLLs</span></span>

> [!Note]  
> <span data-ttu-id="b8af6-104">O IAS (serviço de autenticação da Internet) foi renomeado como NPS (servidor de políticas de rede) a partir do Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="b8af6-104">Internet Authentication Service (IAS) was renamed Network Policy Server (NPS) starting with Windows Server 2008.</span></span> <span data-ttu-id="b8af6-105">O conteúdo deste tópico aplica-se ao IAS e ao NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-105">The content of this topic applies to both IAS and NPS.</span></span> <span data-ttu-id="b8af6-106">Em todo o texto, o NPS é usado para fazer referência a todas as versões do serviço, incluindo as versões originalmente chamadas de IAS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-106">Throughout the text, NPS is used to refer to all versions of the service, including the versions originally referred to as IAS.</span></span>

 

<span data-ttu-id="b8af6-107">As DLLs de extensão do NPS devem exportar pelo menos uma das seguintes funções de retorno de chamada: [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process), [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex)ou [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span><span class="sxs-lookup"><span data-stu-id="b8af6-107">NPS Extension DLLs must export at least one of the following callback functions: [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process), [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), or [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span></span> <span data-ttu-id="b8af6-108">O NPS chama essas funções para cada pacote de autenticação ou contabilização válido que recebe do NAS (servidor de acesso à rede).</span><span class="sxs-lookup"><span data-stu-id="b8af6-108">NPS calls these function for each valid authentication or accounting packet that it receives from the Network Access Server (NAS).</span></span> <span data-ttu-id="b8af6-109">O NPS chama essas funções em cada uma das DLLs listadas abaixo da [chave do registro de parâmetros](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls)do NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-109">NPS calls these functions in each of the DLLs listed below the NPS' [Parameters registry key](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls).</span></span> <span data-ttu-id="b8af6-110">As DLLs são chamadas na ordem em que são listadas.</span><span class="sxs-lookup"><span data-stu-id="b8af6-110">The DLLs are called in the order in which they are listed.</span></span>

<span data-ttu-id="b8af6-111">Se uma DLL de extensão do NPS exportar mais de uma das funções acima, o NPS invocará apenas uma delas: a função mais recente com suporte do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="b8af6-111">If an NPS Extension DLL exports more than one of the above functions, NPS invokes just one of them: the newest function that is supported by the operating system.</span></span>

> [!Note]  
> <span data-ttu-id="b8af6-112">Originalmente, o IAS suportava apenas [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span><span class="sxs-lookup"><span data-stu-id="b8af6-112">IAS originally supported only [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span></span> <span data-ttu-id="b8af6-113">O IAS dá suporte também a [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex).</span><span class="sxs-lookup"><span data-stu-id="b8af6-113">IAS supports also [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex).</span></span> <span data-ttu-id="b8af6-114">O IAS (e o NPS posterior) também oferece suporte a [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span><span class="sxs-lookup"><span data-stu-id="b8af6-114">IAS (and later NPS) supports also [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span></span>

 

<span data-ttu-id="b8af6-115">As DLLs de extensão do NPS também podem exportar as funções [**RadiusExtensionInit**](/windows/desktop/api/authif/nc-authif-pradius_extension_init) e [**RadiusExtensionTerm**](/windows/desktop/api/authif/nc-authif-pradius_extension_term) .</span><span class="sxs-lookup"><span data-stu-id="b8af6-115">NPS Extension DLLs may also export [**RadiusExtensionInit**](/windows/desktop/api/authif/nc-authif-pradius_extension_init) and [**RadiusExtensionTerm**](/windows/desktop/api/authif/nc-authif-pradius_extension_term) functions.</span></span> <span data-ttu-id="b8af6-116">Se estiverem presentes, o NPS chamará essas funções quando o serviço for iniciado e interrompido, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="b8af6-116">If they are present, NPS calls these functions when the service starts and stops, respectively.</span></span>

## <a name="radiusextensionprocess-callback-function"></a><span data-ttu-id="b8af6-117">Função de retorno de chamada RadiusExtensionProcess</span><span class="sxs-lookup"><span data-stu-id="b8af6-117">RadiusExtensionProcess Callback Function</span></span>

<span data-ttu-id="b8af6-118">Em uma DLL de extensão de autenticação, o [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process) recebe todos os atributos que são recebidos pelo NPS na solicitação de autenticação ou de contabilização.</span><span class="sxs-lookup"><span data-stu-id="b8af6-118">In an Authentication Extension DLL, [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process) receives all the attributes that are received by NPS in the authentication or accounting request.</span></span> <span data-ttu-id="b8af6-119">Usando esses atributos, a função pode executar validações adicionais, verificar as autorizações do usuário ou enviar registros de contabilidade para um servidor de Estado central.</span><span class="sxs-lookup"><span data-stu-id="b8af6-119">Using these attributes, the function can perform additional validations, verify the user's authorizations, or send accounting records to a central state server.</span></span>

<span data-ttu-id="b8af6-120">Em uma DLL de extensão de autorização, o **RadiusExtensionProcess** recebe todos os atributos gerados pelo serviço de autorização do NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-120">In an Authorization Extension DLL, **RadiusExtensionProcess** receives all the attributes generated by the NPS authorization service.</span></span> <span data-ttu-id="b8af6-121">Esses são os atributos que são retornados no pacote Access-Accept.</span><span class="sxs-lookup"><span data-stu-id="b8af6-121">These are the attributes that are returned in the Access-Accept packet.</span></span>

<span data-ttu-id="b8af6-122">Depois de chamar **RadiusExtensionProcess**, a ação executada pelo NPS depende do valor de retorno de **RadiusExtensionProcess** e do valor retornado no parâmetro *pfAction* .</span><span class="sxs-lookup"><span data-stu-id="b8af6-122">After calling **RadiusExtensionProcess**, the action performed by NPS depends on the return value of **RadiusExtensionProcess**, and the value returned in the *pfAction* parameter.</span></span> <span data-ttu-id="b8af6-123">Esses valores são listados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="b8af6-123">These values are listed in the following table.</span></span>



| <span data-ttu-id="b8af6-124">*pfAction*</span><span class="sxs-lookup"><span data-stu-id="b8af6-124">*pfAction*</span></span> | <span data-ttu-id="b8af6-125">DLL de extensão de autenticação</span><span class="sxs-lookup"><span data-stu-id="b8af6-125">Authentication Extension DLL</span></span>                                                                                                                                            | <span data-ttu-id="b8af6-126">DLL de extensão de autorização</span><span class="sxs-lookup"><span data-stu-id="b8af6-126">Authorization Extension DLL</span></span>                                                                                                                                 |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b8af6-127">Aceitar</span><span class="sxs-lookup"><span data-stu-id="b8af6-127">Accept</span></span>     | <span data-ttu-id="b8af6-128">Ignora qualquer DLL de extensão de autenticação adicional e também ignora o mecanismo de autenticação NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-128">Bypasses any further Authentication Extension DLLs and also bypasses the NPS authentication mechanism.</span></span>                                                                  | <span data-ttu-id="b8af6-129">Aceitar não permitido.</span><span class="sxs-lookup"><span data-stu-id="b8af6-129">Accept not allowed.</span></span>                                                                                                                                         |
| <span data-ttu-id="b8af6-130">Rejeitar</span><span class="sxs-lookup"><span data-stu-id="b8af6-130">Reject</span></span>     | <span data-ttu-id="b8af6-131">Ignora qualquer DLL de extensão de autenticação adicional e também ignora o mecanismo de autenticação NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-131">Bypasses any further Authentication Extension DLLs and also bypasses the NPS authentication mechanism.</span></span> <span data-ttu-id="b8af6-132">Access-Reject pacote é enviado.</span><span class="sxs-lookup"><span data-stu-id="b8af6-132">Access-Reject packet is sent.</span></span>                                    | <span data-ttu-id="b8af6-133">Ignora qualquer DLL de extensão de autorização adicional.</span><span class="sxs-lookup"><span data-stu-id="b8af6-133">Bypasses any further Authorization Extension DLLs.</span></span>                                                                                                          |
| <span data-ttu-id="b8af6-134">Continuar</span><span class="sxs-lookup"><span data-stu-id="b8af6-134">Continue</span></span>   | <span data-ttu-id="b8af6-135">O pacote será enviado para a próxima DLL de extensão de autenticação ou para o mecanismo de autenticação do NPS se não houver mais DLLs de extensão de autenticação listadas no registro.</span><span class="sxs-lookup"><span data-stu-id="b8af6-135">The packet is sent to the next Authentication Extension DLL or to the NPS authentication mechanism if no more Authentication Extension DLLs are listed in the registry.</span></span> | <span data-ttu-id="b8af6-136">O pacote será enviado para a próxima DLL de extensão de autorização ou para o log de contabilidade do NPS se não houver mais DLLs de extensão de autorização listadas no registro.</span><span class="sxs-lookup"><span data-stu-id="b8af6-136">The packet is sent to the next Authorization Extension DLL or to the NPS accounting log if no more Authorization Extension DLLs are listed in the registry.</span></span> |



 

<span data-ttu-id="b8af6-137">Para todas as DLLs de extensão, se **RadiusExtensionProcess** retornar um erro, o pacote será Descartado.</span><span class="sxs-lookup"><span data-stu-id="b8af6-137">For all Extension DLLs, if **RadiusExtensionProcess** returns an error, the packet is discarded.</span></span> <span data-ttu-id="b8af6-138">Os pacotes descartados devido a um erro não são processados pelo log de contabilidade do NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-138">Packets that are discarded because of an error are not processed by the NPS accounting log.</span></span>

<span data-ttu-id="b8af6-139">Se ocorrer um erro, o NPS posta um evento de erro genérico no log de eventos.</span><span class="sxs-lookup"><span data-stu-id="b8af6-139">If an error occurs, NPS posts a generic error event to the Event Log.</span></span> <span data-ttu-id="b8af6-140">É recomendável que a DLL de extensão forneça log de erros adicional.</span><span class="sxs-lookup"><span data-stu-id="b8af6-140">It is recommended that the Extension DLL provide additional error logging.</span></span>

<span data-ttu-id="b8af6-141">Para obter mais informações e um diagrama que representa o processo anterior, consulte [sobre as extensões do NPS](/windows/desktop/Nps/ias-about-internet-authentication-service).</span><span class="sxs-lookup"><span data-stu-id="b8af6-141">For more information and a diagram that represents the preceding process, see [About NPS Extensions](/windows/desktop/Nps/ias-about-internet-authentication-service).</span></span>

<span data-ttu-id="b8af6-142">**RadiusExtensionProcess** deverá retornar um erro se não for possível verificar a aceitação ou rejeição do pacote.</span><span class="sxs-lookup"><span data-stu-id="b8af6-142">**RadiusExtensionProcess** should return an error if it cannot verify the acceptance or rejection of the packet.</span></span> <span data-ttu-id="b8af6-143">Essa situação pode surgir se um problema de rede impedir que o **RadiusExtensionProcess** se comunique com seu banco de dados de autenticação de usuário.</span><span class="sxs-lookup"><span data-stu-id="b8af6-143">This situation might arise if a network problem prevents **RadiusExtensionProcess** from communicating with its user authentication database.</span></span>

<span data-ttu-id="b8af6-144">Ao processar um pacote de estatísticas, o parâmetro *pfAction* é **nulo**, portanto *pfAction* não pode ser definido.</span><span class="sxs-lookup"><span data-stu-id="b8af6-144">When processing an accounting packet, the *pfAction* parameter is **NULL**, so *pfAction* cannot be set.</span></span> <span data-ttu-id="b8af6-145">Retornar um erro da função **RadiusExtensionProcess** durante o processamento de uma solicitação de contabilidade faz com que a solicitação seja descartada pelo NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-145">Returning an error from the **RadiusExtensionProcess** function while processing an accounting request causes the request to be discarded by NPS.</span></span>

> [!Note]  
> <span data-ttu-id="b8af6-146">Depois de receber uma aceitação, o NPS não chama **RadiusExtensionProcess** nas DLLs restantes na sequência.</span><span class="sxs-lookup"><span data-stu-id="b8af6-146">After receiving an accept, NPS does not call **RadiusExtensionProcess** in the remaining DLLs in the sequence.</span></span> <span data-ttu-id="b8af6-147">Como algumas funções de autenticação também podem implementar autorizações, ignorar essas funções de autenticação pode fazer com que as autorizações sejam omitidas.</span><span class="sxs-lookup"><span data-stu-id="b8af6-147">Because some authentication functions may also implement authorizations, skipping such authentication functions may cause authorizations to be omitted.</span></span> <span data-ttu-id="b8af6-148">Se uma instância de [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) retornar Accept, é importante não fazer nenhuma suposição sobre as autorizações recuperadas.</span><span class="sxs-lookup"><span data-stu-id="b8af6-148">If an instance of [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) returns Accept, it is important not to make any assumptions about the authorizations retrieved.</span></span>

 

<span data-ttu-id="b8af6-149">Se continuar ou aceitar for retornado, o perfil correspondente ao Realm será enviado de volta no pacote de Access-Accept.</span><span class="sxs-lookup"><span data-stu-id="b8af6-149">If Continue or Accept is returned, the profile corresponding to the realm is sent back in the Access-Accept packet.</span></span>

<span data-ttu-id="b8af6-150">As DLLs de extensão de autenticação devem ser projetadas para coexistir com os provedores internos de autenticação do NPS e com outras DLLs de extensão.</span><span class="sxs-lookup"><span data-stu-id="b8af6-150">Authentication Extension DLLs should be designed to coexist with the built-in NPS authentication providers and with other Extension DLLs.</span></span> <span data-ttu-id="b8af6-151">Se uma extensão for aplicável somente a um determinado banco de dados de usuário (por exemplo, Windows Active Directory), ela deverá verificar o atributo [**ratProvider**](/windows/desktop/api/authif/ne-authif-radius_authentication_provider) passado no parâmetro *pAttrs* , antes de processar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="b8af6-151">If an extension is only applicable to a certain user database (for example Windows Active Directory), then it should verify the [**ratProvider**](/windows/desktop/api/authif/ne-authif-radius_authentication_provider) attribute passed in the *pAttrs* parameter, before processing the request.</span></span> <span data-ttu-id="b8af6-152">O atributo ratProvider seria uma lista de atributos apontados pelo parâmetro *pAttrs* .</span><span class="sxs-lookup"><span data-stu-id="b8af6-152">The ratProvider attribute would be one of a list of attributes pointed to by the *pAttrs* parameter.</span></span>

<span data-ttu-id="b8af6-153">DLLs de extensão não devem rejeitar solicitações porque os atributos necessários estão ausentes.</span><span class="sxs-lookup"><span data-stu-id="b8af6-153">Extension DLLs should not reject requests because required attributes are missing.</span></span> <span data-ttu-id="b8af6-154">Por exemplo, se uma extensão de autenticação exigir o atributo User-Password, ratUserPassword e o atributo não estiver presente, a extensão deverá retornar uma ação de raContinue para fornecer a outras extensões e provedores a oportunidade de processar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="b8af6-154">For example, if an authentication extension requires the User-Password attribute, ratUserPassword, and the attribute is not present, the extension should return an action of raContinue to give other extensions and providers a chance to process the request.</span></span>

<span data-ttu-id="b8af6-155">O NPS chama a função [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) depois que a decisão de usar um determinado banco de dados de autenticação é feita, mas antes de o usuário ser autenticado.</span><span class="sxs-lookup"><span data-stu-id="b8af6-155">NPS calls the [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) function after the decision to use a particular authentication database is made, but before the user is authenticated.</span></span> <span data-ttu-id="b8af6-156">Portanto, as informações sobre qual banco de dados de autenticação usar está disponível para a função, para que a função possa verificar as autorizações do usuário no banco de dados de autenticação apropriado.</span><span class="sxs-lookup"><span data-stu-id="b8af6-156">Therefore, information about which authentication database to use is available to the function, so that the function can check for the user's authorizations in the appropriate authentication database.</span></span> <span data-ttu-id="b8af6-157">O NPS dá suporte a vários bancos de dados de autenticação, incluindo o Active Directory do Windows.</span><span class="sxs-lookup"><span data-stu-id="b8af6-157">NPS supports various authentication databases including the Windows Active Directory.</span></span>

## <a name="radiusextensionprocessex-callback-function"></a><span data-ttu-id="b8af6-158">Função de retorno de chamada RadiusExtensionProcessEx</span><span class="sxs-lookup"><span data-stu-id="b8af6-158">RadiusExtensionProcessEx Callback Function</span></span>

<span data-ttu-id="b8af6-159">As DLLs de extensão do NPS podem exportar [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) em vez de, ou além de, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span><span class="sxs-lookup"><span data-stu-id="b8af6-159">NPS Extension DLLs may export [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) instead of, or in addition to, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span></span> <span data-ttu-id="b8af6-160">Essa função permite que a DLL acrescente atributos de autorização adicionais à resposta de autenticação.</span><span class="sxs-lookup"><span data-stu-id="b8af6-160">This function enables the DLL to append additional authorization attributes to the authentication response.</span></span>

<span data-ttu-id="b8af6-161">As mesmas informações descritas na seção *função de retorno de chamada RadiusExtensionProcess* aplicam-se à função [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) .</span><span class="sxs-lookup"><span data-stu-id="b8af6-161">The same information described in the *RadiusExtensionProcess Callback Function* section applies to the [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) function.</span></span>

<span data-ttu-id="b8af6-162">[**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) não pode modificar ou remover nenhum dos atributos presentes.</span><span class="sxs-lookup"><span data-stu-id="b8af6-162">[**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) cannot modify or remove any of the attributes that are present.</span></span> <span data-ttu-id="b8af6-163">Se ocorrer um cenário no qual a DLL deve modificar ou remover atributos, a única opção é usar a interface do usuário do NPS para garantir que os atributos não estejam presentes.</span><span class="sxs-lookup"><span data-stu-id="b8af6-163">If a scenario arises in which the DLL must modify or remove attributes, the only option is to use the NPS user interface to ensure that the attributes are not present.</span></span> <span data-ttu-id="b8af6-164">Por padrão, nenhum atributo de autorização está presente.</span><span class="sxs-lookup"><span data-stu-id="b8af6-164">By default, no authorization attributes are present.</span></span> <span data-ttu-id="b8af6-165">Qualquer um que esteja presente deve ter sido adicionado por meio da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="b8af6-165">Any that are present must have been added through the user interface.</span></span>

<span data-ttu-id="b8af6-166">Se várias DLLs de autorização estiverem configuradas e algumas dessas DLLs implementarem [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), a função **RadiusExtensionProcess/ex** em uma determinada dll não receberá os atributos das DLLs de autorização anteriormente chamadas.</span><span class="sxs-lookup"><span data-stu-id="b8af6-166">If multiple Authorization DLLs are configured and some of these DLLs implement [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), the **RadiusExtensionProcess/Ex** function in a given DLL does not receive the attributes from the previously called Authorization DLLs.</span></span> <span data-ttu-id="b8af6-167">Ele recebe apenas os atributos gerados pelo serviço de autorização do NPS.</span><span class="sxs-lookup"><span data-stu-id="b8af6-167">It receives only those attributes generated by the NPS authorization service.</span></span>

## <a name="radiusextensionprocess2-callback-function"></a><span data-ttu-id="b8af6-168">Função de retorno de chamada RadiusExtensionProcess2</span><span class="sxs-lookup"><span data-stu-id="b8af6-168">RadiusExtensionProcess2 Callback Function</span></span>

<span data-ttu-id="b8af6-169">As DLLs de extensão do NPS também podem exportar [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) em vez de, ou além de, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) e **RadiusExtensionProcessEx**.</span><span class="sxs-lookup"><span data-stu-id="b8af6-169">NPS Extension DLLs may also export [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) instead of, or in addition to, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) and **RadiusExtensionProcessEx**.</span></span> <span data-ttu-id="b8af6-170">Essa função permite que a DLL adicione, modifique e remova atributos de e para a solicitação ou resposta de autenticação.</span><span class="sxs-lookup"><span data-stu-id="b8af6-170">This function enables the DLL to add, modify, and remove attributes to and from the authentication request or response.</span></span>

<span data-ttu-id="b8af6-171">As mesmas informações descritas na seção *função de retorno de chamada RadiusExtensionProcessEx* aplicam-se à função [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) , com as seguintes exceções:</span><span class="sxs-lookup"><span data-stu-id="b8af6-171">The same information described in the *RadiusExtensionProcessEx Callback Function* section applies to the [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) function, with the following exceptions:</span></span>

-   <span data-ttu-id="b8af6-172">Em uma DLL de autorização, o **RadiusExtensionProcess2** recebe os atributos gerados pelo serviço de autorização do NPS e os atributos gerados a partir de DLLs de autorização anteriormente chamadas.</span><span class="sxs-lookup"><span data-stu-id="b8af6-172">In an Authorization DLL, **RadiusExtensionProcess2** receives both the attributes generated by the NPS authorization service and the attributes generated from previously called Authorization DLLs.</span></span>
-   <span data-ttu-id="b8af6-173">[**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) não tem um parâmetro *pfAction* .</span><span class="sxs-lookup"><span data-stu-id="b8af6-173">[**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) does not have a *pfAction* parameter.</span></span> <span data-ttu-id="b8af6-174">**RadiusExtensionProcess2** define a disposição final da solicitação usando a função [**setresponsetype**](/previous-versions/ms688462(v=vs.85)) fornecida na estrutura do [**\_ bloco de \_ controle \_ de extensão RADIUS**](/windows/desktop/api/authif/ns-authif-radius_extension_control_block) .</span><span class="sxs-lookup"><span data-stu-id="b8af6-174">**RadiusExtensionProcess2** sets the final disposition of the request using the [**SetResponseType**](/previous-versions/ms688462(v=vs.85)) function provided in the [**RADIUS\_EXTENSION\_CONTROL\_BLOCK**](/windows/desktop/api/authif/ns-authif-radius_extension_control_block) structure.</span></span>
-   <span data-ttu-id="b8af6-175">O NPS sempre chama a função [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) em qualquer DLL restante, independentemente de as funções nas DLLs anteriores retornarem Accept.</span><span class="sxs-lookup"><span data-stu-id="b8af6-175">NPS always calls the [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) function in any remaining DLLs regardless of whether functions in previous DLLs returned Accept.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b8af6-176">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b8af6-176">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b8af6-177">Configurando as DLLs de extensão</span><span class="sxs-lookup"><span data-stu-id="b8af6-177">Setting Up the Extension DLLs</span></span>](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls)
</dt> <dt>

[<span data-ttu-id="b8af6-178">Atributos de identificação de usuário</span><span class="sxs-lookup"><span data-stu-id="b8af6-178">User Identification Attributes</span></span>](/windows/desktop/Nps/ias-user-identification-attributes)
</dt> </dl>

 

 