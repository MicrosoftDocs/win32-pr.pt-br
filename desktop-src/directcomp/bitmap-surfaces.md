---
title: Objetos de bitmap
description: Este tópico descreve os tipos de conteúdo de bitmap aos quais o DirectComposition dá suporte.
ms.assetid: BC32CF76-D5E4-4B25-AFD5-42E8DABFA0D0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c390778fef1ee7ad96c90a8b7706fa635f3615ff
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104366643"
---
# <a name="bitmap-objects"></a><span data-ttu-id="2f74c-103">Objetos de bitmap</span><span class="sxs-lookup"><span data-stu-id="2f74c-103">Bitmap objects</span></span>

> [!NOTE]
> <span data-ttu-id="2f74c-104">Para aplicativos no Windows 10, é recomendável usar APIs do Windows. UI. composição em vez de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="2f74c-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="2f74c-105">Para obter mais informações, consulte [modernizar seu aplicativo de área de trabalho usando a camada Visual](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="2f74c-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="2f74c-106">O Microsoft DirectComposition é um mecanismo de composição de bitmap.</span><span class="sxs-lookup"><span data-stu-id="2f74c-106">Microsoft DirectComposition is a bitmap compositing engine.</span></span> <span data-ttu-id="2f74c-107">Ele permite que os desenvolvedores de aplicativos combinem vários bitmaps e os manipulem de várias maneiras para obter animações e efeitos visuais interessantes em uma interface do usuário do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-107">It enables application developers to combine multiple bitmaps and manipulate them in various ways to achieve interesting visual effects and animations in an application UI.</span></span> <span data-ttu-id="2f74c-108">Este tópico descreve os tipos de conteúdo de bitmap aos quais o DirectComposition dá suporte.</span><span class="sxs-lookup"><span data-stu-id="2f74c-108">This topic describes the types of bitmap content that DirectComposition supports.</span></span>

-   [<span data-ttu-id="2f74c-109">Conteúdo de bitmap</span><span class="sxs-lookup"><span data-stu-id="2f74c-109">Bitmap content</span></span>](#bitmap-content)
    -   [<span data-ttu-id="2f74c-110">Bitmaps de memória de vídeo</span><span class="sxs-lookup"><span data-stu-id="2f74c-110">Video memory bitmaps</span></span>](#video-memory-bitmaps)
    -   [<span data-ttu-id="2f74c-111">Bitmaps de janela</span><span class="sxs-lookup"><span data-stu-id="2f74c-111">Window bitmaps</span></span>](#window-bitmaps)
    -   [<span data-ttu-id="2f74c-112">Associando conteúdo de bitmap a um Visual</span><span class="sxs-lookup"><span data-stu-id="2f74c-112">Associating bitmap content with a visual</span></span>](#associating-bitmap-content-with-a-visual)
    -   [<span data-ttu-id="2f74c-113">Canal alfa</span><span class="sxs-lookup"><span data-stu-id="2f74c-113">Alpha channel</span></span>](#alpha-channel)
-   [<span data-ttu-id="2f74c-114">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2f74c-114">Related topics</span></span>](#related-topics)

## <a name="bitmap-content"></a><span data-ttu-id="2f74c-115">Conteúdo de bitmap</span><span class="sxs-lookup"><span data-stu-id="2f74c-115">Bitmap content</span></span>

<span data-ttu-id="2f74c-116">Os aplicativos fornecem DirectComposition com o conteúdo do bitmap para compor e animar criando objetos visuais e, em seguida, definindo a [Propriedade Content](basic-concepts.md) desses objetos.</span><span class="sxs-lookup"><span data-stu-id="2f74c-116">Applications provide DirectComposition with the bitmap content to compose and animate by creating visual objects and then setting the [Content property](basic-concepts.md) of those objects.</span></span> <span data-ttu-id="2f74c-117">O DirectComposition não oferece nenhum serviço de rasterização.</span><span class="sxs-lookup"><span data-stu-id="2f74c-117">DirectComposition does not offer any rasterization services.</span></span> <span data-ttu-id="2f74c-118">Um aplicativo deve usar outra biblioteca de rasterização baseada em software ou hardware, como [Direct2D](../direct2d/direct2d-portal.md) ou [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) , para preencher os bitmaps que devem ser compostos.</span><span class="sxs-lookup"><span data-stu-id="2f74c-118">An application must use some other software-based or hardware-accelerated rasterization library such as [Direct2D](../direct2d/direct2d-portal.md) or [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) to populate the bitmaps that are to be composed.</span></span> <span data-ttu-id="2f74c-119">Após a composição, o DirectComposition passa o conteúdo de bitmap composto para [Gerenciador de janelas da área de trabalho (DWM)](/windows/desktop/dwm/dwm-overview) para renderização na tela.</span><span class="sxs-lookup"><span data-stu-id="2f74c-119">After composing, DirectComposition passes composed bitmap content to [Desktop Window Manager (DWM)](/windows/desktop/dwm/dwm-overview) for rendering to the screen.</span></span>

<span data-ttu-id="2f74c-120">**Tipos de conteúdo**   de bitmap com suporte O Microsoft DirectComposition dá suporte aos seguintes tipos de bitmaps:</span><span class="sxs-lookup"><span data-stu-id="2f74c-120">**Supported types of bitmap content** Microsoft DirectComposition supports the following kinds of bitmaps:</span></span>

-   [<span data-ttu-id="2f74c-121">Bitmaps de memória de vídeo</span><span class="sxs-lookup"><span data-stu-id="2f74c-121">Video memory bitmaps</span></span>](#video-memory-bitmaps)
-   [<span data-ttu-id="2f74c-122">Bitmaps de janela</span><span class="sxs-lookup"><span data-stu-id="2f74c-122">Window bitmaps</span></span>](#window-bitmaps)

### <a name="video-memory-bitmaps"></a><span data-ttu-id="2f74c-123">Bitmaps de memória de vídeo</span><span class="sxs-lookup"><span data-stu-id="2f74c-123">Video memory bitmaps</span></span>

<span data-ttu-id="2f74c-124">Um bitmap de memória de vídeo é rasterizado no hardware usando métodos do Microsoft DirectX (incluindo o modelo de interoperabilidade DX para GDI).</span><span class="sxs-lookup"><span data-stu-id="2f74c-124">A video memory bitmap is rasterized in hardware by using Microsoft DirectX methods (including the DX-to-GDI interop model).</span></span> <span data-ttu-id="2f74c-125">Ele é apoiado por superfícies compartilhadas entre processos que são visíveis para o aplicativo de chamada e para o DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="2f74c-125">It is backed by cross-process shared surfaces that are visible to the calling application and to DirectComposition.</span></span> <span data-ttu-id="2f74c-126">Um bitmap de memória de vídeo não está sujeito à divisão porque o aplicativo só pode ler das superfícies das quais DirectComposition texturas.</span><span class="sxs-lookup"><span data-stu-id="2f74c-126">A video memory bitmap is not subject to tearing because the application can only read from the surfaces that DirectComposition textures from.</span></span>

### <a name="video-content"></a><span data-ttu-id="2f74c-127">Conteúdo de vídeo</span><span class="sxs-lookup"><span data-stu-id="2f74c-127">Video content</span></span>

<span data-ttu-id="2f74c-128">Os aplicativos podem usar DirectComposition para compor quadros de vídeo que usam cadeias de permuta sem janela do DirectX associadas a uma superfície DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="2f74c-128">Applications can use DirectComposition to compose video frames that use DirectX windowless swap chains that are bound to a DirectComposition surface.</span></span> <span data-ttu-id="2f74c-129">Conceitualmente, o DirectComposition trata o conteúdo de vídeo como uma sequência de bitmaps.</span><span class="sxs-lookup"><span data-stu-id="2f74c-129">Conceptually, DirectComposition treats video content as a sequence of bitmaps.</span></span> <span data-ttu-id="2f74c-130">O DirectComposition não fornece um meio de apresentar quadros de vídeo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-130">DirectComposition does not provide a means of presenting video frames.</span></span>

<span data-ttu-id="2f74c-131">O DirectComposition dá suporte a cadeias de permuta sem janela do DirectX, ou seja, cadeias de permuta que não estão associadas a uma janela específica, e permite que dois aplicativos diferentes compartilhem cadeias de troca sem janelas entre limites de processo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-131">DirectComposition supports DirectX windowless swap chains—that is, swap chains that are not bound to a particular window—and enables two different applications to share windowless swap chains across process boundaries.</span></span> <span data-ttu-id="2f74c-132">O compartilhamento de cadeias de troca sem janela permite cenários de vídeo em que a cadeia de permuta é criada em um processo e é usada com DirectComposition em um segundo processo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-132">Sharing windowless swap chains enables video scenarios where the swap chain is created in one process and is used with DirectComposition in a second process.</span></span> <span data-ttu-id="2f74c-133">As cadeias de permuta sem janela são criadas usando o método [**IDXGIFactory2:: CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) .</span><span class="sxs-lookup"><span data-stu-id="2f74c-133">Windowless swap chains are created using the [**IDXGIFactory2::CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) method.</span></span>

<span data-ttu-id="2f74c-134">Para obter mais informações sobre cadeias de permuta do DirectX, consulte [visão geral do dxgi](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="2f74c-134">For more information about DirectX swap chains, see [DXGI Overview](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

### <a name="stereo-content"></a><span data-ttu-id="2f74c-135">Conteúdo estéreo</span><span class="sxs-lookup"><span data-stu-id="2f74c-135">Stereo content</span></span>

<span data-ttu-id="2f74c-136">Conceitualmente, uma cadeia de permuta estéreo consiste em superfícies de DXGI (infraestrutura gráfica do DirectX) da Microsoft que representam os canais esquerdo e direito para o conteúdo 3D estéreo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-136">Conceptually, a stereo swap chain consists of Microsoft DirectX Graphics Infrastructure (DXGI) surfaces that represent the left and right channels for stereo 3D content.</span></span> <span data-ttu-id="2f74c-137">Quando uma cadeia de permuta estéreo é usada como o recurso de bitmap para um Visual, DirectComposition compõe em estéreo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-137">When a stereo swap chain is used as the bitmap resource for a visual, DirectComposition composes in stereo.</span></span> <span data-ttu-id="2f74c-138">Todo o conteúdo não estéreo (conteúdo mono) é considerado como conteúdo de canal esquerdo e direito idêntico; ou seja, o mesmo conteúdo de bitmap é usado para ambos os canais.</span><span class="sxs-lookup"><span data-stu-id="2f74c-138">All non-stereo content (mono content) is considered to have identical left and right channel content; that is, the same bitmap content is used for both channels.</span></span> <span data-ttu-id="2f74c-139">DirectComposition compõe todo o conteúdo à esquerda e todo o conteúdo correto separadamente.</span><span class="sxs-lookup"><span data-stu-id="2f74c-139">DirectComposition composes all left content and all right content separately.</span></span> <span data-ttu-id="2f74c-140">Se o dispositivo de vídeo não for compatível com estéreo, o DirectComposition tratará o canal estéreo esquerdo ou direito (dependendo do aplicativo) como conteúdo mono e comporá usando apenas os dados para o recurso de bitmap.</span><span class="sxs-lookup"><span data-stu-id="2f74c-140">If the display device is not stereo capable, DirectComposition treats the left or right stereo channel (depending on the application) as mono content and composes using only that data for the bitmap resource.</span></span>

<span data-ttu-id="2f74c-141">DirectComposition não dá suporte à criação ou manipulação de conteúdo estéreo e não pode promover uma cadeia de permuta mono para um par estéreo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-141">DirectComposition does not support creating or manipulating stereo content, and cannot promote a mono swap chain to a stereo pair.</span></span> <span data-ttu-id="2f74c-142">Um aplicativo deve executar essas tarefas antes de apresentar o conteúdo do DirectX estéreo ao DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="2f74c-142">An application must perform these tasks before presenting DirectX stereo content to DirectComposition.</span></span> <span data-ttu-id="2f74c-143">Além disso, um aplicativo deve fornecer os deslocamentos de canal à esquerda e à direita para percepção de profundidade; DirectComposition não pode ajustar os deslocamentos de canal à esquerda e à direita para modificar a profundidade percebida do conteúdo de estéreo do DirectX.</span><span class="sxs-lookup"><span data-stu-id="2f74c-143">Also, an application must provide the left and right channel offsets for depth perception; DirectComposition cannot adjust the left and right channel offsets to modify the perceived depth of DirectX stereo content.</span></span>

<span data-ttu-id="2f74c-144">O conteúdo de estéreo do DirectX é composto e persistido no DWM quando o hardware com capacidade para estéreo está disponível.</span><span class="sxs-lookup"><span data-stu-id="2f74c-144">DirectX stereo content is composed and persisted to DWM when stereo-capable hardware is available.</span></span>

### <a name="window-bitmaps"></a><span data-ttu-id="2f74c-145">Bitmaps de janela</span><span class="sxs-lookup"><span data-stu-id="2f74c-145">Window bitmaps</span></span>

<span data-ttu-id="2f74c-146">Um "bitmap de janela" não é um bitmap real, mas é um espaço reservado que o DirectComposition substitui em tempo real com rasterizações de janelas de nível superior ou filho em camadas.</span><span class="sxs-lookup"><span data-stu-id="2f74c-146">A "window bitmap" is not a real bitmap, but is a placeholder that DirectComposition replaces in real time with rasterizations of layered top-level or child windows.</span></span> <span data-ttu-id="2f74c-147">Um bitmap de janela é semelhante a uma miniatura do DWM, exceto que uma miniatura pode conter contribuições de muitas janelas, como janelas não-filhas de propriedade, enquanto um bitmap de janela DirectComposition sempre é uma representação de apenas uma janela e seus filhos.</span><span class="sxs-lookup"><span data-stu-id="2f74c-147">A window bitmap is similar to a DWM thumbnail, except that a thumbnail can contain contributions from many windows, such as owned non-child windows, whereas a DirectComposition window bitmap is always a representation of just one window and its children.</span></span>

<span data-ttu-id="2f74c-148">Como DirectComposition tem acesso às superfícies de redirecionamento de todas as janelas e todas as árvores visuais, ele pode reutilizar o conteúdo de uma janela em várias árvores visuais.</span><span class="sxs-lookup"><span data-stu-id="2f74c-148">Because DirectComposition has access to the redirection surfaces of all windows and all visual trees, it can reuse the content from one window in multiple visual trees.</span></span> <span data-ttu-id="2f74c-149">A janela deve ser inserida em camadas porque uma janela não em camadas não tem uma superfície de redirecionamento dedicada e, portanto, sua rasterização não está sempre disponível para DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="2f74c-149">The window must be layered because a non-layered window does not have a dedicated redirection surface and, therefore, its rasterization is not always available to DirectComposition.</span></span>

<span data-ttu-id="2f74c-150">Para usar um bitmap de janela, um aplicativo associa um Visual a um identificador de janela (HWND).</span><span class="sxs-lookup"><span data-stu-id="2f74c-150">To use a window bitmap, an application associates a visual with a window handle (HWND).</span></span> <span data-ttu-id="2f74c-151">Depois disso, DirectComposition recriará o Visual sempre que o conteúdo da janela for alterado, incluindo quando o conteúdo é alterado como resultado das alterações nas árvores visuais associadas à janela.</span><span class="sxs-lookup"><span data-stu-id="2f74c-151">Afterward, DirectComposition re-composes the visual whenever the contents of the window change, including when the contents change as a result of changes to the visual trees associated with the window.</span></span> <span data-ttu-id="2f74c-152">Em outras palavras, como as miniaturas do DWM, os bitmaps da janela DirectComposition são "dinâmicos".</span><span class="sxs-lookup"><span data-stu-id="2f74c-152">In other words, like DWM thumbnails, DirectComposition window bitmaps are "live".</span></span>

### <a name="associating-bitmap-content-with-a-visual"></a><span data-ttu-id="2f74c-153">Associando conteúdo de bitmap a um Visual</span><span class="sxs-lookup"><span data-stu-id="2f74c-153">Associating bitmap content with a visual</span></span>

<span data-ttu-id="2f74c-154">Para todos os três tipos de bitmaps, um aplicativo pode associar o mesmo bitmap com vários visuais, o que significa que uma única alocação de memória pode ser usada para exibir o mesmo conteúdo várias vezes.</span><span class="sxs-lookup"><span data-stu-id="2f74c-154">For all three kinds of bitmaps, an application can associate the same bitmap with multiple visuals, which means that a single memory allocation can be used to display the same content several times.</span></span>

### <a name="alpha-channel"></a><span data-ttu-id="2f74c-155">Canal alfa</span><span class="sxs-lookup"><span data-stu-id="2f74c-155">Alpha channel</span></span>

<span data-ttu-id="2f74c-156">Todos os bitmaps têm um formato de 32 bits por pixel (BPP), que inclui oito bits para a transparência por pixel.</span><span class="sxs-lookup"><span data-stu-id="2f74c-156">All bitmaps have a 32 bits per pixel (BPP) format, which includes eight bits for per-pixel transparency.</span></span> <span data-ttu-id="2f74c-157">No entanto, um aplicativo pode especificar como o DirectComposition deve consumir o canal alfa.</span><span class="sxs-lookup"><span data-stu-id="2f74c-157">However, an application can specify how DirectComposition should consume the alpha channel.</span></span> <span data-ttu-id="2f74c-158">Em particular, o DirectComposition pode respeitar o canal alfa, ou pode ignorar alfa totalmente; nesse caso, o bitmap é considerado totalmente opaco.</span><span class="sxs-lookup"><span data-stu-id="2f74c-158">In particular, DirectComposition can respect the alpha channel, or it can ignore alpha altogether, in which case the bitmap is considered to be fully opaque.</span></span>

<span data-ttu-id="2f74c-159">Um modo alfa adicional ignora o canal alfa, mas trata os valores vermelho, verde e azul como valores Alfa por canal em vez da interpretação normal desses canais como intensidades de cor.</span><span class="sxs-lookup"><span data-stu-id="2f74c-159">An additional alpha mode ignores the alpha channel, but treats the red, green, and blue values as per-channel alpha values instead of the normal interpretation of those channels as color intensities.</span></span> <span data-ttu-id="2f74c-160">Esse modo é útil para renderização de ClearType, que requer informações de cobertura de sub-pixel.</span><span class="sxs-lookup"><span data-stu-id="2f74c-160">This mode is useful for ClearType rendering, which requires sub-pixel coverage information.</span></span> <span data-ttu-id="2f74c-161">Para usar o modo alfa por canal, um aplicativo deve primeiro usar [Direct2D](../direct2d/direct2d-portal.md) e [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) para gravar dados de cobertura de sub-pixel em um bitmap.</span><span class="sxs-lookup"><span data-stu-id="2f74c-161">To use the per-channel alpha mode, an application must first use [Direct2D](../direct2d/direct2d-portal.md) and [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) to write sub-pixel coverage data to a bitmap.</span></span> <span data-ttu-id="2f74c-162">Em seguida, o aplicativo deve definir o modo alfa correto e especificar uma cor de texto ao associar o bitmap a um Visual.</span><span class="sxs-lookup"><span data-stu-id="2f74c-162">Next the application must set the correct alpha mode and specify a text color when it associates the bitmap with a visual.</span></span> <span data-ttu-id="2f74c-163">O DirectComposition mistura a cor do texto com os dados de cobertura, que produzem a mesclagem de ClearType em relação ao plano de fundo.</span><span class="sxs-lookup"><span data-stu-id="2f74c-163">DirectComposition blends the text color with the coverage data, which produces ClearType blending against the background.</span></span>

<span data-ttu-id="2f74c-164">Em situações em que o algoritmo ClearType não é aplicável, como se o bitmap não estiver alinhado em pixel e alinhado com eixo, ou se precisar ser desenhado em uma superfície intermediária, o DirectComposition poderá usar os dados de cobertura de subpixel no bitmap para produzir uma rasterização em escala de cinza, automaticamente e sem custo adicional.</span><span class="sxs-lookup"><span data-stu-id="2f74c-164">In situations where the ClearType algorithm is not applicable, such as if the bitmap is not pixel-aligned and axis-aligned, or if it needs to be drawn to an intermediate surface, DirectComposition can use the subpixel coverage data in the bitmap to produce a grayscale rasterization instead, automatically and at no additional cost.</span></span>

<span data-ttu-id="2f74c-165">Para obter mais informações, consulte a descrição do parâmetro *alphamode* da função [**IDCompositionDevice:: CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) ou [**IDCompositionDevice:: CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) .</span><span class="sxs-lookup"><span data-stu-id="2f74c-165">For more information, see the description of the *alphaMode* parameter of the [**IDCompositionDevice::CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) or [**IDCompositionDevice::CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2f74c-166">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2f74c-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2f74c-167">Conceitos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="2f74c-167">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 