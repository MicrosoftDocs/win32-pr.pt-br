---
title: Superfície de composição
description: Este tópico descreve os tipos de tipos de superfícies aos quais o Microsoft DirectComposition dá suporte.
ms.assetid: E19B4F0E-1CFA-4E93-BB6A-BFB701BC72CA
keywords:
- superfície de composição
- Superfície lógica DirectComposition
- Superfície virtual DirectComposition
- Atualizando uma superfície lógica
- superfície lógica, atualizando
- aparando uma superfície virtual
- superfície virtual, corte
- cortar superfície virtual
- Redimensionando uma superfície virtual
- Surace virtual, redimensionamento
- redimensionar superfície virtual
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f4bd30bfbd1de91444b7076184db597cd7a8c82
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104007725"
---
# <a name="composition-surface"></a><span data-ttu-id="fd389-114">Superfície de composição</span><span class="sxs-lookup"><span data-stu-id="fd389-114">Composition surface</span></span>

> [!NOTE]
> <span data-ttu-id="fd389-115">Para aplicativos no Windows 10, é recomendável usar APIs do Windows. UI. composição em vez de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-115">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="fd389-116">Para obter mais informações, consulte [modernizar seu aplicativo de área de trabalho usando a camada Visual](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="fd389-116">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="fd389-117">Este tópico descreve os tipos de tipos de superfícies aos quais o Microsoft DirectComposition dá suporte.</span><span class="sxs-lookup"><span data-stu-id="fd389-117">This topic describes the types of types of surfaces that Microsoft DirectComposition supports.</span></span>

-   [<span data-ttu-id="fd389-118">Superfície lógica DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fd389-118">DirectComposition logical surface</span></span>](#directcomposition-logical-surface)
    -   [<span data-ttu-id="fd389-119">Atualizando uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-119">Updating a logical surface</span></span>](#updating-a-logical-surface)
    -   [<span data-ttu-id="fd389-120">Suspendendo atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-120">Suspending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="fd389-121">Retomando atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-121">Resuming updates to a logical surface</span></span>](#resuming-updates-to-a-logical-surface)
    -   [<span data-ttu-id="fd389-122">Finalizando atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-122">Ending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="fd389-123">Exemplo de uso de uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-123">Example of using a logical surface</span></span>](#example-of-using-a-logical-surface)
-   [<span data-ttu-id="fd389-124">Superfície virtual DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fd389-124">DirectComposition virtual surface</span></span>](#directcomposition-virtual-surface)
    -   [<span data-ttu-id="fd389-125">Redimensionando uma superfície virtual</span><span class="sxs-lookup"><span data-stu-id="fd389-125">Resizing a virtual surface</span></span>](#resizing-a-virtual-surface)
    -   [<span data-ttu-id="fd389-126">Aparando uma superfície virtual</span><span class="sxs-lookup"><span data-stu-id="fd389-126">Trimming a virtual surface</span></span>](#trimming-a-virtual-surface)
-   [<span data-ttu-id="fd389-127">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="fd389-127">Related topics</span></span>](#related-topics)

## <a name="directcomposition-logical-surface"></a><span data-ttu-id="fd389-128">Superfície lógica DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fd389-128">DirectComposition logical surface</span></span>

<span data-ttu-id="fd389-129">DirectComposition expõe o objeto [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) para representar uma superfície de composição lógica.</span><span class="sxs-lookup"><span data-stu-id="fd389-129">DirectComposition exposes the [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) object to represent a logical composition surface.</span></span> <span data-ttu-id="fd389-130">O DirectComposition expõe APIs que você pode usar para criar, atualizar e excluir essas superfícies lógicas.</span><span class="sxs-lookup"><span data-stu-id="fd389-130">DirectComposition exposes APIs that you can use to create, update, and delete these logical surfaces.</span></span> <span data-ttu-id="fd389-131">Cada superfície pode ser associada a um ou mais visuais.</span><span class="sxs-lookup"><span data-stu-id="fd389-131">Each surface can be associated with one or more visuals.</span></span> <span data-ttu-id="fd389-132">Um aplicativo é responsável por gerenciar o tempo de vida de superfícies lógicas.</span><span class="sxs-lookup"><span data-stu-id="fd389-132">An application is responsible for managing the lifetime of logical surfaces.</span></span>

### <a name="updating-a-logical-surface"></a><span data-ttu-id="fd389-133">Atualizando uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-133">Updating a logical surface</span></span>

<span data-ttu-id="fd389-134">Um aplicativo pode atualizar uma superfície lógica chamando [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) e especificando o tamanho e o deslocamento do retângulo na superfície lógica que o aplicativo deseja atualizar.</span><span class="sxs-lookup"><span data-stu-id="fd389-134">An application can update a logical surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the size and offset of the rectangle on the logical surface that the app wants to update.</span></span> <span data-ttu-id="fd389-135">DirectComposition aloca um retângulo do tamanho especificado e, em seguida, retorna a superfície e o deslocamento correspondente que o aplicativo precisa para desenhar ou atualizar.</span><span class="sxs-lookup"><span data-stu-id="fd389-135">DirectComposition allocates a rectangle of the specified size, and then returns the surface and the corresponding offset that the application needs to draw or update.</span></span> <span data-ttu-id="fd389-136">Os limites do retângulo de atualização são limitados pelo tamanho da superfície.</span><span class="sxs-lookup"><span data-stu-id="fd389-136">The update rectangle’s limits are bound by the surface size.</span></span> <span data-ttu-id="fd389-137">Por exemplo, o retângulo de atualização para uma superfície de pixel de 40 por 100 pode ser até (0, 0, 40100).</span><span class="sxs-lookup"><span data-stu-id="fd389-137">For example, the update rectangle for a 40-by-100 pixel surface can be up to (0,0,40,100).</span></span> <span data-ttu-id="fd389-138">Além disso, a região atualizável é imposta por um retângulo de proteção.</span><span class="sxs-lookup"><span data-stu-id="fd389-138">Also, the updatable region is enforced by a guard rectangle.</span></span> <span data-ttu-id="fd389-139">Como pode haver apenas um retângulo de proteção por vez, apenas uma superfície lógica pode ser atualizada de cada vez.</span><span class="sxs-lookup"><span data-stu-id="fd389-139">Because there can be only one guard rectangle at a time, only one logical surface can be updated at a time.</span></span> <span data-ttu-id="fd389-140">**BeginDraw** retornará um código de erro se [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) ou [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) não tiver sido chamado após uma chamada anterior para **BeginDraw**.</span><span class="sxs-lookup"><span data-stu-id="fd389-140">**BeginDraw** returns an error code if [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) or [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) has not been called after a previous call to **BeginDraw**.</span></span> <span data-ttu-id="fd389-141">Um aplicativo pode adicionar uma chamada confirmada para **BeginDraw** a um lote, mas ele não tem efeito até que **EndDraw** seja chamado e confirmado.</span><span class="sxs-lookup"><span data-stu-id="fd389-141">An application can add a committed call to **BeginDraw** to a batch, but it does not take effect until **EndDraw** is called and committed.</span></span>

### <a name="suspending-updates-to-a-logical-surface"></a><span data-ttu-id="fd389-142">Suspendendo atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-142">Suspending updates to a logical surface</span></span>

<span data-ttu-id="fd389-143">Um aplicativo que precisa atualizar superfícies diferentes pode chamar [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) na atualização atual e, em seguida, chamar [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) para iniciar uma nova atualização.</span><span class="sxs-lookup"><span data-stu-id="fd389-143">An application that needs to update different surfaces can call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on the current update, and then call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to begin a new update.</span></span> <span data-ttu-id="fd389-144">O Microsoft DirectComposition permite várias atualizações, mas apenas uma pode estar ativa por vez.</span><span class="sxs-lookup"><span data-stu-id="fd389-144">Microsoft DirectComposition allows multiple updates, but only one can be active at a time.</span></span> <span data-ttu-id="fd389-145">Isso significa que você precisa chamar **SuspendDraw** ou [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) em uma superfície antes de chamar **BeginDraw** no próximo.</span><span class="sxs-lookup"><span data-stu-id="fd389-145">This means that you need to call **SuspendDraw** or [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on one surface before calling **BeginDraw** on the next one.</span></span> <span data-ttu-id="fd389-146">Ao contrário de **EndDraw**, um lote confirmado pode conter uma superfície que está em um estado **SuspendDraw** , mas essas atualizações não serão mostradas na tela até que **EndDraw** seja chamado.</span><span class="sxs-lookup"><span data-stu-id="fd389-146">Unlike **EndDraw**, a committed batch can contain a surface that is in a **SuspendDraw** state, but such updates won’t be shown on the screen until **EndDraw** is called.</span></span>

### <a name="resuming-updates-to-a-logical-surface"></a><span data-ttu-id="fd389-147">Retomando atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-147">Resuming updates to a logical surface</span></span>

<span data-ttu-id="fd389-148">Um aplicativo pode retomar uma atualização para uma superfície que está em um estado [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) chamando [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span><span class="sxs-lookup"><span data-stu-id="fd389-148">An application can resume an update to a surface that is in a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state by calling [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span></span> <span data-ttu-id="fd389-149">Esse método pode ser chamado somente em uma superfície suspensa.</span><span class="sxs-lookup"><span data-stu-id="fd389-149">This method can be called only on a suspended surface.</span></span>

### <a name="ending-updates-to-a-logical-surface"></a><span data-ttu-id="fd389-150">Finalizando atualizações para uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-150">Ending updates to a logical surface</span></span>

<span data-ttu-id="fd389-151">Chamar [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) e [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) é a única maneira de ver as alterações de atualização de bitmap na tela.</span><span class="sxs-lookup"><span data-stu-id="fd389-151">Calling [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) and [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) is the only way to see bitmap update changes on the screen.</span></span> <span data-ttu-id="fd389-152">Cada chamada para **EndDraw** deve ter uma chamada correspondente para [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) para remover o retângulo de proteção.</span><span class="sxs-lookup"><span data-stu-id="fd389-152">Each call to **EndDraw** must have a corresponding call to [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to remove the guard rectangle.</span></span> <span data-ttu-id="fd389-153">A superfície lógica retém todas as atualizações até que a **confirmação** seja chamada.</span><span class="sxs-lookup"><span data-stu-id="fd389-153">The logical surface retains all the updates until **Commit** is called.</span></span> <span data-ttu-id="fd389-154">Você também pode chamar **EndDraw** em uma superfície que está no estado [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) porque **EndDraw** é um currículo/final implícito.</span><span class="sxs-lookup"><span data-stu-id="fd389-154">You can also call **EndDraw** on a surface that is in the [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state because **EndDraw** is an implied resume/end.</span></span> <span data-ttu-id="fd389-155">Depois de chamar **EndDraw**, o conteúdo atualizado é apresentado à tela e descartado para que a memória da atualização possa ser reutilizada para uma atualização posterior.</span><span class="sxs-lookup"><span data-stu-id="fd389-155">After you call **EndDraw**, the updated content is presented to the screen and discarded so that the memory for the update can be reused for a later update.</span></span>

### <a name="example-of-using-a-logical-surface"></a><span data-ttu-id="fd389-156">Exemplo de uso de uma superfície lógica</span><span class="sxs-lookup"><span data-stu-id="fd389-156">Example of using a logical surface</span></span>

<span data-ttu-id="fd389-157">O exemplo a seguir descreve as etapas que um aplicativo tomaria se ele criasse uma árvore visual que consiste em dois visuais e, em seguida, precisava atualizar regiões específicas das duas superfícies lógicas associadas aos visuais:</span><span class="sxs-lookup"><span data-stu-id="fd389-157">The following example describes the steps that an application would take if it created a visual tree consisting of two visuals, and then needed to update specific regions of the two logical surfaces associated with the visuals:</span></span>

1.  <span data-ttu-id="fd389-158">Crie um dispositivo DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-158">Create a DirectComposition device.</span></span>
2.  <span data-ttu-id="fd389-159">Crie a árvore visual que consiste em um nó raiz e os visuais 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="fd389-159">Create the visual tree consisting of a root node and visuals 1 and 2.</span></span>
3.  <span data-ttu-id="fd389-160">Crie superfícies lógicas 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="fd389-160">Create logical surfaces 1 and 2.</span></span>
4.  <span data-ttu-id="fd389-161">Chame [**setContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) para associar uma superfície lógica com visuais 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="fd389-161">Call [**SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) to associate a logical surface with visuals 1 and 2.</span></span>
5.  <span data-ttu-id="fd389-162">Chame [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) em um subretângulo da superfície lógica 1.</span><span class="sxs-lookup"><span data-stu-id="fd389-162">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on a sub-rectangle of logical surface 1.</span></span>
6.  <span data-ttu-id="fd389-163">Atualize a superfície no deslocamento retornado por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-163">Update the surface at the offset returned by DirectComposition.</span></span>
7.  <span data-ttu-id="fd389-164">Etapas opcionais:</span><span class="sxs-lookup"><span data-stu-id="fd389-164">Optional steps:</span></span>
    1.  <span data-ttu-id="fd389-165">Chame [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) na superfície lógica 1.</span><span class="sxs-lookup"><span data-stu-id="fd389-165">Call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on logical surface 1.</span></span>
    2.  <span data-ttu-id="fd389-166">Chame [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) no subrect da superfície lógica 2.</span><span class="sxs-lookup"><span data-stu-id="fd389-166">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on sub-rect of logical surface 2.</span></span>
    3.  <span data-ttu-id="fd389-167">Atualize a superfície no deslocamento retornado por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-167">Update the surface at the offset returned by DirectComposition.</span></span>
    4.  <span data-ttu-id="fd389-168">Chame [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) na superfície lógica 2.</span><span class="sxs-lookup"><span data-stu-id="fd389-168">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 2.</span></span>
    5.  <span data-ttu-id="fd389-169">Chame [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) na superfície lógica 1.</span><span class="sxs-lookup"><span data-stu-id="fd389-169">Call [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) on logical surface 1.</span></span>
8.  <span data-ttu-id="fd389-170">Atualize a superfície no deslocamento retornado por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-170">Update the surface at the offset returned by DirectComposition.</span></span>
9.  <span data-ttu-id="fd389-171">Chame [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) na superfície lógica 1.</span><span class="sxs-lookup"><span data-stu-id="fd389-171">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 1.</span></span>
10. <span data-ttu-id="fd389-172">Chame [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="fd389-172">Call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span>

## <a name="directcomposition-virtual-surface"></a><span data-ttu-id="fd389-173">Superfície virtual DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fd389-173">DirectComposition virtual surface</span></span>

<span data-ttu-id="fd389-174">DirectComposition expõe a interface [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) para representar uma superfície virtual, que é uma coleção de superfícies lógicas (blocos) organizados em uma grade fixa com blocos de um tamanho fixo.</span><span class="sxs-lookup"><span data-stu-id="fd389-174">DirectComposition exposes the [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) interface to represent a virtual surface, which is a collection of logical surfaces (tiles) arranged in a fixed grid with tiles of a fixed size.</span></span> <span data-ttu-id="fd389-175">O aplicativo especifica o tamanho da textura virtual no momento da criação.</span><span class="sxs-lookup"><span data-stu-id="fd389-175">The application specifies the size of the virtual texture at creation time.</span></span> <span data-ttu-id="fd389-176">O tamanho estabelece os limites para a superfície virtual.</span><span class="sxs-lookup"><span data-stu-id="fd389-176">The size establishes the boundaries for the virtual surface.</span></span> <span data-ttu-id="fd389-177">A superfície pode ser associada a um ou mais visuais.</span><span class="sxs-lookup"><span data-stu-id="fd389-177">The surface can be associated with one or more visuals.</span></span>

<span data-ttu-id="fd389-178">Quando uma superfície virtual é inicializada, ela não é apoiada por alocações reais.</span><span class="sxs-lookup"><span data-stu-id="fd389-178">When a virtual surface is initialized, it is not backed by actual allocations.</span></span> <span data-ttu-id="fd389-179">Em outras palavras, ele não contém nenhum bit.</span><span class="sxs-lookup"><span data-stu-id="fd389-179">In other words, it doesn’t hold any bits.</span></span> <span data-ttu-id="fd389-180">DirectComposition aloca blocos (ou seja, objetos superfície de composição) depois que o aplicativo inicia a atualização da superfície.</span><span class="sxs-lookup"><span data-stu-id="fd389-180">DirectComposition allocates tiles (that is, composition surface objects) after the application starts updating the surface.</span></span> <span data-ttu-id="fd389-181">O aplicativo atualiza a superfície virtual chamando [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) e especificando a região de interesse em relação às coordenadas da superfície virtual.</span><span class="sxs-lookup"><span data-stu-id="fd389-181">The application updates the virtual surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the region of interest with respect to the coordinates of the virtual surface.</span></span> <span data-ttu-id="fd389-182">Em seguida, DirectComposition aloca os blocos necessários para manter a atualização e retorna a superfície de composição e o deslocamento para atualização.</span><span class="sxs-lookup"><span data-stu-id="fd389-182">Then, DirectComposition allocates the necessary tiles to hold the update, and returns the composition surface and offset to update.</span></span>

<span data-ttu-id="fd389-183">Assim como ocorre com superfícies lógicas, você pode chamar [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) e [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) em uma superfície virtual.</span><span class="sxs-lookup"><span data-stu-id="fd389-183">As with logical surfaces, you can call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) and [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on a virtual surface.</span></span> <span data-ttu-id="fd389-184">Além disso, o DirectComposition expõe métodos que você pode usar para redimensionar e aparar uma superfície virtual existente.</span><span class="sxs-lookup"><span data-stu-id="fd389-184">In addition, DirectComposition exposes methods that you can use to resize and trim an existing virtual surface.</span></span>

### <a name="resizing-a-virtual-surface"></a><span data-ttu-id="fd389-185">Redimensionando uma superfície virtual</span><span class="sxs-lookup"><span data-stu-id="fd389-185">Resizing a virtual surface</span></span>

<span data-ttu-id="fd389-186">O método [**redimensionar**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) altera os limites da superfície virtual, o que significa que quaisquer novas atualizações ou alocações devem estar nos limites definidos pelo novo tamanho.</span><span class="sxs-lookup"><span data-stu-id="fd389-186">The [**Resize**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) method changes the boundaries of the virtual surface, meaning that any new updates or allocations must fall in the boundaries set by the new size.</span></span> <span data-ttu-id="fd389-187">Um aplicativo usa **redimensionamento** para informar ao DirectComposition que uma determinada região da superfície virtual não é mais necessária e pode ser recuperada.</span><span class="sxs-lookup"><span data-stu-id="fd389-187">An application uses **Resize** to tell DirectComposition that a particular region of the virtual surface is no longer needed and can be reclaimed.</span></span> <span data-ttu-id="fd389-188">Se **redimensionar** reduzir a superfície virtual, o aplicativo não poderá mais atualizar as regiões fora dos novos limites.</span><span class="sxs-lookup"><span data-stu-id="fd389-188">If **Resize** shrinks the virtual surface, the application can no longer update the regions outside the new boundaries.</span></span>

<span data-ttu-id="fd389-189">A ilustração a seguir mostra uma superfície virtual 3-por-3 redimensionada para 2-by-2.</span><span class="sxs-lookup"><span data-stu-id="fd389-189">The following illustration shows a 3-by-3 virtual surface resized to 2-by-2.</span></span> <span data-ttu-id="fd389-190">A região vermelha representa os blocos que são descartados como parte da operação de redimensionamento e a memória é recuperada pelo DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fd389-190">The red region represents tiles that are discarded as part of the resize operation, and the memory is reclaimed by DirectComposition.</span></span> <span data-ttu-id="fd389-191">Após o redimensionamento, o aplicativo não poderá fazer atualizações na região vermelha sem redimensionar a superfície virtual novamente.</span><span class="sxs-lookup"><span data-stu-id="fd389-191">After the resize, the application can't make updates to the red region without resizing the virtual surface again.</span></span>

![<span data-ttu-id="fd389-192">Redimensionando uma superfície virtual</span><span class="sxs-lookup"><span data-stu-id="fd389-192">resizing a virtual surface</span></span> ](images/resize-virtual-surface.png)

<span data-ttu-id="fd389-193">A operação de redimensionamento entra em vigor imediatamente.</span><span class="sxs-lookup"><span data-stu-id="fd389-193">The resize operation takes effect immediately.</span></span> <span data-ttu-id="fd389-194">DirectComposition não aguarda o aplicativo chamar [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) para fazer as atualizações de redimensionamento.</span><span class="sxs-lookup"><span data-stu-id="fd389-194">DirectComposition doesn't wait for the application to call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) to make the resize updates.</span></span> <span data-ttu-id="fd389-195">Por exemplo, suponha que um aplicativo faça a seguinte sequência de chamadas.</span><span class="sxs-lookup"><span data-stu-id="fd389-195">For example, suppose an application makes the following sequence of calls.</span></span>


```
pVirtualSurface->Resize(0, 0);
pVirtualSurface->Resize(INT_MAX, INT_MAX);
pDevice->Commit();
```



<span data-ttu-id="fd389-196">Neste exemplo, o aplicativo perde todo o conteúdo no primeiro redimensionamento.</span><span class="sxs-lookup"><span data-stu-id="fd389-196">In this example, the application loses all content on the first resize.</span></span> <span data-ttu-id="fd389-197">O segundo redimensionamento não tem nenhum efeito, embora ele tenha sido chamado antes da [**confirmação**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="fd389-197">The second resize has no effect even though it was called before [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="fd389-198">Nesse caso, nada aparece na tela.</span><span class="sxs-lookup"><span data-stu-id="fd389-198">In this case nothing shows on the screen.</span></span>

### <a name="trimming-a-virtual-surface"></a><span data-ttu-id="fd389-199">Aparando uma superfície virtual</span><span class="sxs-lookup"><span data-stu-id="fd389-199">Trimming a virtual surface</span></span>

<span data-ttu-id="fd389-200">O método [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) identifica a região da superfície virtual que o aplicativo precisa.</span><span class="sxs-lookup"><span data-stu-id="fd389-200">The [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) method identifies the region of the virtual surface that the application needs.</span></span> <span data-ttu-id="fd389-201">Ele não redimensiona os limites da superfície virtual, mas informa DirectComposition quais superfícies lógicas precisam ser alocadas no momento.</span><span class="sxs-lookup"><span data-stu-id="fd389-201">It doesn't resize the boundaries of the virtual surface, but it does tell DirectComposition which logical surfaces currently need to be allocated.</span></span>

<span data-ttu-id="fd389-202">Na ilustração a seguir, o quadrado verde é o visor do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fd389-202">In the following illustration, the green square is the application’s viewport.</span></span> <span data-ttu-id="fd389-203">Inicialmente, o aplicativo é renderizado para os seis primeiros blocos (azul) da superfície virtual (cinza claro) que estão no visor.</span><span class="sxs-lookup"><span data-stu-id="fd389-203">The application initially renders to the first six tiles (blue) of the virtual surface (light gray) that are in the viewport.</span></span> <span data-ttu-id="fd389-204">Como a página representada pela superfície virtual rola, o aplicativo precisa renderizar os últimos seis blocos.</span><span class="sxs-lookup"><span data-stu-id="fd389-204">As the page that is represented by the virtual surface scrolls, the application needs to render the last six tiles.</span></span> <span data-ttu-id="fd389-205">O aplicativo chama [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) para indicar que a região definida pelos últimos seis blocos é onde o conteúdo é, e o resto não é necessário no momento.</span><span class="sxs-lookup"><span data-stu-id="fd389-205">The application calls [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) to indicate that the region defined by the last six tiles is where the content is, and the rest is not needed at the moment.</span></span> <span data-ttu-id="fd389-206">DirectComposition pode optar por reciclar as superfícies lógicas que originalmente representaram os seis primeiros blocos (cinza escuro).</span><span class="sxs-lookup"><span data-stu-id="fd389-206">DirectComposition can then choose to recycle the logical surfaces that originally represented the first six tiles (dark gray).</span></span>

![aparando uma superfície virtual](images/trim-virtual-surface.png)

## <a name="related-topics"></a><span data-ttu-id="fd389-208">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="fd389-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fd389-209">Conceitos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fd389-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 