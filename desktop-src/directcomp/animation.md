---
title: Animação (DirectComposition)
description: Este tópico discute os conceitos básicos da animação do Microsoft DirectComposition.
ms.assetid: 65DA3971-97C0-4B59-BC67-287AAEAAE340
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f7462a10fd83b45c1b90450fdde806ef306a2f6
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "105762059"
---
# <a name="animation-directcomposition"></a><span data-ttu-id="fb729-103">Animação (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="fb729-103">Animation (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="fb729-104">Para aplicativos no Windows 10, é recomendável usar APIs do Windows. UI. composição em vez de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fb729-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="fb729-105">Para obter mais informações, consulte [modernizar seu aplicativo de área de trabalho usando a camada Visual](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="fb729-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="fb729-106">Este tópico discute os conceitos básicos da animação do Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fb729-106">This topic discusses the basics of Microsoft DirectComposition animation.</span></span> <span data-ttu-id="fb729-107">Ela contém os seguintes tópicos:</span><span class="sxs-lookup"><span data-stu-id="fb729-107">It contains the following topics:</span></span>

-   [<span data-ttu-id="fb729-108">O que é uma animação?</span><span class="sxs-lookup"><span data-stu-id="fb729-108">What is an animation?</span></span>](#what-is-an-animation)
-   [<span data-ttu-id="fb729-109">Propriedades que podem ser animadas</span><span class="sxs-lookup"><span data-stu-id="fb729-109">Properties that can be animated</span></span>](#properties-that-can-be-animated)
-   [<span data-ttu-id="fb729-110">Funções de animação</span><span class="sxs-lookup"><span data-stu-id="fb729-110">Animation functions</span></span>](#animation-functions)
-   [<span data-ttu-id="fb729-111">Segmentos de animação</span><span class="sxs-lookup"><span data-stu-id="fb729-111">Animation segments</span></span>](#animation-segments)
    -   [<span data-ttu-id="fb729-112">Segmento cúbico</span><span class="sxs-lookup"><span data-stu-id="fb729-112">Cubic segment</span></span>](#cubic-segment)
    -   [<span data-ttu-id="fb729-113">Segmento sinusoidal</span><span class="sxs-lookup"><span data-stu-id="fb729-113">Sinusoidal segment</span></span>](#sinusoidal-segment)
    -   [<span data-ttu-id="fb729-114">Repetir segmento</span><span class="sxs-lookup"><span data-stu-id="fb729-114">Repeat segment</span></span>](#repeat-segment)
    -   [<span data-ttu-id="fb729-115">Segmento final</span><span class="sxs-lookup"><span data-stu-id="fb729-115">End segment</span></span>](#end-segment)
-   [<span data-ttu-id="fb729-116">Compatibilidade com o Gerenciador de animação do Windows</span><span class="sxs-lookup"><span data-stu-id="fb729-116">Compatibility with Windows Animation Manager</span></span>](#compatibility-with-windows-animation-manager)
-   [<span data-ttu-id="fb729-117">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="fb729-117">Related topics</span></span>](#related-topics)

## <a name="what-is-an-animation"></a><span data-ttu-id="fb729-118">O que é uma animação?</span><span class="sxs-lookup"><span data-stu-id="fb729-118">What is an animation?</span></span>

<span data-ttu-id="fb729-119">A *animação* é uma ilusão óptica criada com a criação rápida de alterações incrementais em um visual durante um período de tempo ao redesenhar o Visual após a realização de cada alteração.</span><span class="sxs-lookup"><span data-stu-id="fb729-119">*Animation* is an optical illusion created by quickly making incremental changes to a visual over a period of time while redrawing the visual after each change is made.</span></span> <span data-ttu-id="fb729-120">Como os reempates ocorrem rapidamente, o cérebro percebe as alterações incrementais como uma única cena de alteração, assim como em um filme ou vídeo de ação ao vivo.</span><span class="sxs-lookup"><span data-stu-id="fb729-120">Because the redraws occur quickly, the brain perceives the incremental changes as a single changing scene, just as in a movie or video of live action.</span></span>

<span data-ttu-id="fb729-121">A tabela a seguir descreve algumas das maneiras típicas de usar a animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-121">The following table describes some of the typical ways of using animation.</span></span>

| <span data-ttu-id="fb729-122">Animação</span><span class="sxs-lookup"><span data-stu-id="fb729-122">Animation</span></span>                 | <span data-ttu-id="fb729-123">Descrição</span><span class="sxs-lookup"><span data-stu-id="fb729-123">Description</span></span>                                                                                                                                                                                                                                          |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="fb729-124">Rolagem</span><span class="sxs-lookup"><span data-stu-id="fb729-124">Scrolling</span></span>                 | <span data-ttu-id="fb729-125">Use a animação para adicionar recursos como a dinâmica de emulação de física a um controle de lista de rolagem.</span><span class="sxs-lookup"><span data-stu-id="fb729-125">Use animation to add features like physics-emulating momentum to a scrolling list control.</span></span>                                                                                                                                                           |
| <span data-ttu-id="fb729-126">Transições de cena</span><span class="sxs-lookup"><span data-stu-id="fb729-126">Scene transitions</span></span>         | <span data-ttu-id="fb729-127">Use a animação para criar transições de cena de navegação que fornecem continuidade entre tarefas em um fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="fb729-127">Use animation to create navigational scene transitions that provide continuity between tasks in a workflow.</span></span> <span data-ttu-id="fb729-128">As transições de cena de navegação fornecem contexto que mostra o usuário onde eles foram, onde eles estão e onde eles precisam ir em seguida.</span><span class="sxs-lookup"><span data-stu-id="fb729-128">Navigational scene transitions provide context that shows the user where they have been, where they are, and where they need to go next.</span></span> |
| <span data-ttu-id="fb729-129">Interações entre janelas</span><span class="sxs-lookup"><span data-stu-id="fb729-129">Cross-window interactions</span></span> | <span data-ttu-id="fb729-130">Anime os elementos da interface do usuário de diferentes aplicativos de forma a fornecer a percepção de continuidade direta entre eles para ajudar o usuário a concluir as tarefas que envolvem a troca de um aplicativo para outro.</span><span class="sxs-lookup"><span data-stu-id="fb729-130">Animate UI elements of different applications in a way that gives the perception of seamless continuity between them to help the user complete tasks that involve switching from one application to another.</span></span>                                         |



 

## <a name="properties-that-can-be-animated"></a><span data-ttu-id="fb729-131">Propriedades que podem ser animadas</span><span class="sxs-lookup"><span data-stu-id="fb729-131">Properties that can be animated</span></span>

<span data-ttu-id="fb729-132">No DirectComposition, você anima um Visual aplicando animação a propriedades individuais dos objetos que definem o Visual.</span><span class="sxs-lookup"><span data-stu-id="fb729-132">In DirectComposition, you animate a visual by applying animation to individual properties of the objects that define the visual.</span></span> <span data-ttu-id="fb729-133">Por exemplo, se você quiser mover um Visual horizontalmente pela tela, aplique a animação à propriedade OffsetX do Visual.</span><span class="sxs-lookup"><span data-stu-id="fb729-133">For example, if you want to move a visual horizontally across the screen, you would apply animation to the OffsetX property of the visual.</span></span> <span data-ttu-id="fb729-134">Da mesma forma, se você quisesse fazer uma rotação 2D animada simples de um Visual, aplicaria a animação à propriedade Angle de um objeto de transformação 2D e, em seguida, aplicaria o objeto de transformação 2D à propriedade Transform do Visual.</span><span class="sxs-lookup"><span data-stu-id="fb729-134">Similarly, if you wanted to do a simple animated 2D rotation of a visual, you would apply animation to the Angle property of a 2D transform object, and then apply the 2D transform object to the Transform property of the visual.</span></span>

<span data-ttu-id="fb729-135">DirectComposition permite aplicar animação a qualquer propriedade de objeto que usa um valor escalar.</span><span class="sxs-lookup"><span data-stu-id="fb729-135">DirectComposition enables you to apply animation to any object property that takes a scalar value.</span></span> <span data-ttu-id="fb729-136">Você pode aplicar animações simultâneas a várias propriedades e a vários objetos.</span><span class="sxs-lookup"><span data-stu-id="fb729-136">You can apply simultaneous animations to multiple properties and multiple objects.</span></span>

<span data-ttu-id="fb729-137">DirectComposition executa animações em um thread separado.</span><span class="sxs-lookup"><span data-stu-id="fb729-137">DirectComposition runs animations on a separate thread.</span></span> <span data-ttu-id="fb729-138">Você pode iniciar uma animação ou conjunto de animações e, em seguida, fazer outras tarefas em seus threads de aplicativo ou até mesmo colocar threads em suspensão, enquanto o mecanismo de composição executa as animações na taxa de quadros apropriada.</span><span class="sxs-lookup"><span data-stu-id="fb729-138">You can start an animation or set of animations and then do other work on your application threads, or even put threads to sleep, while the composition engine runs the animations at the appropriate frame rate.</span></span>

## <a name="animation-functions"></a><span data-ttu-id="fb729-139">Funções de animação</span><span class="sxs-lookup"><span data-stu-id="fb729-139">Animation functions</span></span>

<span data-ttu-id="fb729-140">O DirectComposition anima uma propriedade de objeto com base em uma função de animação que você define.</span><span class="sxs-lookup"><span data-stu-id="fb729-140">DirectComposition animates an object property based on an animation function that you define.</span></span> <span data-ttu-id="fb729-141">Uma *função de animação* é uma construção que especifica como o valor de uma propriedade de objeto é alterado ao longo de um período de tempo.</span><span class="sxs-lookup"><span data-stu-id="fb729-141">An *animation function* is a construct that specifies how the value of an object property changes over a period of time.</span></span> <span data-ttu-id="fb729-142">Por exemplo, você pode definir uma função de animação que altera o valor de uma propriedade de 1 para 360 ao longo de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="fb729-142">For example, you could define an animation function that changes the value of a property from 1 to 360 over the course of 4 seconds.</span></span> <span data-ttu-id="fb729-143">Em seguida, se você aplicar a função de animação à propriedade Angle de um objeto de transformação de giro 2D e, em seguida, aplicar o objeto Transform à propriedade Transform de um Visual, a função de animação giraria o Visual em um círculo inteiro ao longo de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="fb729-143">Then, if you apply the animation function to the Angle property of a 2D rotate transform object, and then apply the transform object to the Transform property of a visual, the animation function would rotate the visual in a full circle over the course of 4 seconds.</span></span>

<span data-ttu-id="fb729-144">Uma função de animação é representada por um *objeto de animação* criado por uma chamada para o método [**IDCompositionDevice:: createAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) .</span><span class="sxs-lookup"><span data-stu-id="fb729-144">An animation function is represented by an *animation object* created by a call to the [**IDCompositionDevice::CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) method.</span></span> <span data-ttu-id="fb729-145">Você cria uma função de animação usando os métodos da interface [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) de um objeto de animação para acrescentar *segmentos de animação*, um de cada vez, à matriz que define a função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-145">You create an animation function by using the methods of an animation object's [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) interface to append *animation segments*, one at a time, to the array that defines the animation function.</span></span> <span data-ttu-id="fb729-146">Ao acrescentar um segmento, você especifica um deslocamento de base zero que marca a hora de início do segmento, em relação ao início da função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-146">When appending a segment, you specify a zero-based offset that marks the begin time of the segment, relative to the beginning of the animation function.</span></span> <span data-ttu-id="fb729-147">Os segmentos de animação devem ser anexados em ordem crescente de tempos de início.</span><span class="sxs-lookup"><span data-stu-id="fb729-147">Animation segments must be appended in increasing order of begin times.</span></span> <span data-ttu-id="fb729-148">A tentativa de acrescentar um segmento de animação cuja hora de início é anterior ou igual a um segmento anterior falhará.</span><span class="sxs-lookup"><span data-stu-id="fb729-148">Attempting to append an animation segment whose begin time is before or equal to a preceding segment will fail.</span></span> <span data-ttu-id="fb729-149">Uma função de animação pode ter uma hora de término especificada, indicando quando a função deve terminar.</span><span class="sxs-lookup"><span data-stu-id="fb729-149">An animation function can have a specified end time, indicating when the function should conclude.</span></span>

<span data-ttu-id="fb729-150">A menos que especificado de outra forma, uma função de animação é iniciada quando o Gerenciador de Janelas da Área de Trabalho (DWM) recebe o comando para executar a animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-150">Unless otherwise specified, an animation function starts when the Desktop Window Manager (DWM) receives the command to execute the animation.</span></span> <span data-ttu-id="fb729-151">Cada segmento é executado até que a hora de início do próximo segmento seja atingida.</span><span class="sxs-lookup"><span data-stu-id="fb729-151">Each segment runs until the begin time of the next segment is reached.</span></span> <span data-ttu-id="fb729-152">Todas as alterações descontínuas que ocorrem no valor da propriedade animada entre os segmentos são consideradas alterações discretas.</span><span class="sxs-lookup"><span data-stu-id="fb729-152">Any discontinuous changes that occur in the animated property value between segments are considered to be discrete changes.</span></span>

<span data-ttu-id="fb729-153">Você aplica uma função de animação a uma propriedade definindo o valor da propriedade como o ponteiro [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) do objeto de animação que representa a função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-153">You apply an animation function to a property by setting the property value to the [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) pointer of the animation object that represents the animation function.</span></span> <span data-ttu-id="fb729-154">O mesmo objeto de animação pode ser aplicado a várias propriedades do mesmo objeto, bem como às propriedades de outros objetos criados pelo mesmo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fb729-154">The same animation object can be applied to multiple properties of the same object, as well as to the properties of other objects created by the same device.</span></span>

## <a name="animation-segments"></a><span data-ttu-id="fb729-155">Segmentos de animação</span><span class="sxs-lookup"><span data-stu-id="fb729-155">Animation segments</span></span>

<span data-ttu-id="fb729-156">Os segmentos de animação são as definições de tempo fundamentais de uma função de animação; Eles são os primitivos dos quais funções de animação mais complexas e de nível mais alto são criadas.</span><span class="sxs-lookup"><span data-stu-id="fb729-156">Animation segments are the fundamental timing definitions of an animation function; they are the primitives from which more complex and higher level animation functions are built.</span></span> <span data-ttu-id="fb729-157">Um segmento de animação é construído a partir de uma série de parâmetros que descrevem a função e a hora em que o segmento começa, em relação ao início da função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-157">An animation segment is constructed from a series of parameters that describe the function and the time when the segment begins, relative to the beginning of the animation function.</span></span> <span data-ttu-id="fb729-158">Para cada segmento, time (*t*) progride ao longo do eixo horizontal e começa em *t* = 0.</span><span class="sxs-lookup"><span data-stu-id="fb729-158">For every segment, time (*t*) progresses along the horizontal axis and begins at *t* = 0.</span></span>

### <a name="cubic-segment"></a><span data-ttu-id="fb729-159">Segmento cúbico</span><span class="sxs-lookup"><span data-stu-id="fb729-159">Cubic segment</span></span>

<span data-ttu-id="fb729-160">O tempo de um segmento cúbico é definido por um polinomial cúbico.</span><span class="sxs-lookup"><span data-stu-id="fb729-160">The timing of a cubic segment is defined by a cubic polynomial.</span></span> <span data-ttu-id="fb729-161">Para uma determinada entrada de tempo (*t*), o valor de saída é fornecido pela seguinte equação:</span><span class="sxs-lookup"><span data-stu-id="fb729-161">For a given time input (*t*), the output value is given by the following equation:</span></span>

<span data-ttu-id="fb729-162">*x*(*t*) = *às*³ + *BT*² + *CT*  +  *d*</span><span class="sxs-lookup"><span data-stu-id="fb729-162">*x*(*t*) = *at*³ + *bt*² + *ct* + *d*</span></span>

<span data-ttu-id="fb729-163">O diagrama a seguir mostra uma função de animação que contém dois segmentos cúbicos.</span><span class="sxs-lookup"><span data-stu-id="fb729-163">The following diagram shows an animation function that contains of two cubic segments.</span></span> <span data-ttu-id="fb729-164">O primeiro segmento faz a transição de um valor de 0 para 16 em 4 segundos e o segundo altera o valor linearmente de 16 para 0 nos próximos 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="fb729-164">The first segment transitions a value from 0 to 16 over 4 seconds, and the second changes the value linearly from 16 to 0 over the next 4 seconds.</span></span> <span data-ttu-id="fb729-165">A primeira transição ocorre ao longo deste polinomial cúbico:</span><span class="sxs-lookup"><span data-stu-id="fb729-165">The first transition occurs along this cubic polynomial:</span></span>

<span data-ttu-id="fb729-166">*x*(*t*) = *t*³-6 *t*² + 12 *t*</span><span class="sxs-lookup"><span data-stu-id="fb729-166">*x*(*t*) = *t*³ - 6 *t*² + 12 *t*</span></span>

<span data-ttu-id="fb729-167">e a segunda transição ocorre ao longo deste:</span><span class="sxs-lookup"><span data-stu-id="fb729-167">and the second transition occurs along this one:</span></span>

<span data-ttu-id="fb729-168">*x*(*t*) =-4 *t* + 16</span><span class="sxs-lookup"><span data-stu-id="fb729-168">*x*(*t*) = - 4 *t* + 16</span></span>

![diagrama de uma função de animação com dois segmentos cúbicos](images/cubicsegment.png)

<span data-ttu-id="fb729-170">Você adiciona um segmento cúbico a uma função de animação usando o método [**IDCompositionAnimation:: addcúbico**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) .</span><span class="sxs-lookup"><span data-stu-id="fb729-170">You add a cubic segment to an animation function by using the [**IDCompositionAnimation::AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) method.</span></span>

### <a name="sinusoidal-segment"></a><span data-ttu-id="fb729-171">Segmento sinusoidal</span><span class="sxs-lookup"><span data-stu-id="fb729-171">Sinusoidal segment</span></span>

<span data-ttu-id="fb729-172">O tempo de um segmento sinusoidal é definido pela seguinte equação:</span><span class="sxs-lookup"><span data-stu-id="fb729-172">The timing of a sinusoidal segment is defined by the following equation:</span></span>

<span data-ttu-id="fb729-173">*x*(*t*) = meio de  +  *amplitude* \* de tendência (*t* \* *frequência* \* 2 \* PI + *fase* \* PI/180,0)</span><span class="sxs-lookup"><span data-stu-id="fb729-173">*x*(*t*) = *Bias* + *Amplitude* \* sin(*t*\**Frequency*\*2\*PI + *Phase*\*PI/180.0)</span></span>

<span data-ttu-id="fb729-174">Você adiciona um segmento sinusoidal a uma função de animação usando o método [**IDCompositionAnimation:: AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) .</span><span class="sxs-lookup"><span data-stu-id="fb729-174">You add a sinusoidal segment to an animation function by using the [**IDCompositionAnimation::AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) method.</span></span>

### <a name="repeat-segment"></a><span data-ttu-id="fb729-175">Repetir segmento</span><span class="sxs-lookup"><span data-stu-id="fb729-175">Repeat segment</span></span>

<span data-ttu-id="fb729-176">Um segmento de repetição repete uma parte anterior especificada de uma função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-176">A repeat segment repeats a specified preceding portion of an animation function.</span></span> <span data-ttu-id="fb729-177">Um segmento de repetição faz com que a parte especificada da função de animação seja repetida indefinidamente até que o próximo segmento seja encontrado ou a extremidade especificada da animação seja atingida.</span><span class="sxs-lookup"><span data-stu-id="fb729-177">A repeat segment causes the specified portion of the animation function to loop indefinitely until the next segment is encountered or the specified end of the animation is reached.</span></span> <span data-ttu-id="fb729-178">A parte anterior de uma animação é feita de outros segmentos, incluindo outros segmentos de repetição.</span><span class="sxs-lookup"><span data-stu-id="fb729-178">The preceding portion of an animation is made of other segments, including other repeat segments.</span></span> <span data-ttu-id="fb729-179">Um segmento de repetição não pode ser usado como o primeiro segmento em uma função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-179">A repeat segment cannot be used as the first segment in an animation function.</span></span>

<span data-ttu-id="fb729-180">O diagrama a seguir mostra uma função de animação que consiste em dois segmentos cúbicos de duração de 4 segundos, seguidos por um segmento de repetição que dura 12 segundos.</span><span class="sxs-lookup"><span data-stu-id="fb729-180">The following diagram shows an animation function that consists two cubic segments of 4 seconds duration each, followed by a repeat segment that lasts 12 seconds.</span></span> <span data-ttu-id="fb729-181">O segmento de repetição começa com 8 segundos na animação e repete os 6 segundos anteriores da animação duas vezes até que o segmento final seja atingido em 20 segundos.</span><span class="sxs-lookup"><span data-stu-id="fb729-181">The repeat segment begins 8 seconds into the animation and repeats the previous 6 seconds of the animation two times until the end segment is reached at 20 seconds.</span></span>

![diagrama de uma função de animação que contém dois segmentos cúbicos e um segmento de repetição](images/repeatsegment.png)

<span data-ttu-id="fb729-183">Para adicionar um segmento de repetição a uma função de animação, use o método [**IDCompositionAnimation:: addrepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) .</span><span class="sxs-lookup"><span data-stu-id="fb729-183">To add a repeat segment to an animation function, use the [**IDCompositionAnimation::AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) method.</span></span>

### <a name="end-segment"></a><span data-ttu-id="fb729-184">Segmento final</span><span class="sxs-lookup"><span data-stu-id="fb729-184">End segment</span></span>

<span data-ttu-id="fb729-185">Depois de construir uma função de animação de segmentos, você pode acrescentar um segmento final para fazer com que a função de animação termine em um momento específico.</span><span class="sxs-lookup"><span data-stu-id="fb729-185">After constructing an animation function from segments, you can append an end segment to cause the animation function to end at a particular time.</span></span> <span data-ttu-id="fb729-186">Se você não acrescentar um segmento final, o segmento final da função de animação será executado indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="fb729-186">If you do not append an end segment, the final segment of the animation function runs indefinitely.</span></span>

<span data-ttu-id="fb729-187">Você acrescenta um segmento final chamando o método [**IDCompositionAnimation:: End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) , especificando um deslocamento do início da função de animação que indica o ponto de extremidade da função.</span><span class="sxs-lookup"><span data-stu-id="fb729-187">You append an end segment by calling the [**IDCompositionAnimation::End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) method, specifying an offset from the beginning of the animation function which indicates the function's end point.</span></span> <span data-ttu-id="fb729-188">O deslocamento deve ser maior que o deslocamento inicial do segmento anterior.</span><span class="sxs-lookup"><span data-stu-id="fb729-188">The offset must be greater than the beginning offset of the preceding segment.</span></span> <span data-ttu-id="fb729-189">Além disso, um segmento final não pode ser usado como o primeiro primitivo em uma função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-189">Also, an end segment cannot be used as the first primitive in an animation function.</span></span>

<span data-ttu-id="fb729-190">Ao chamar [**end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), você também especifica um valor final para a propriedade que está sendo animada.</span><span class="sxs-lookup"><span data-stu-id="fb729-190">When you call [**End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), you also specify a final value for the property being animated.</span></span> <span data-ttu-id="fb729-191">A propriedade é definida para o valor final especificado no momento em que o ponto final da função de animação é atingido.</span><span class="sxs-lookup"><span data-stu-id="fb729-191">The property is set to the specified final value at the moment when the end point of the animation function is reached.</span></span>

<span data-ttu-id="fb729-192">Depois de acrescentar um segmento final, você não pode acrescentar outros segmentos à função de animação.</span><span class="sxs-lookup"><span data-stu-id="fb729-192">After appending an end segment, you cannot append any other segments to the animation function.</span></span> <span data-ttu-id="fb729-193">Ou seja, todas as chamadas de método no objeto de animação falham, exceto [**IDCompositionAnimation:: Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span><span class="sxs-lookup"><span data-stu-id="fb729-193">That is, all method calls on the animation object fail except [**IDCompositionAnimation::Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span></span> <span data-ttu-id="fb729-194">Chamar **redefinição** retorna o objeto de animação para o estado de limpeza no qual a função de animação não contém nenhum segmento. nesse ponto, você pode adicionar novamente os segmentos.</span><span class="sxs-lookup"><span data-stu-id="fb729-194">Calling **Reset** returns the animation object to clean state in which the animation function contains no segments, at which point you can once again add segments.</span></span>

## <a name="compatibility-with-windows-animation-manager"></a><span data-ttu-id="fb729-195">Compatibilidade com o Gerenciador de animação do Windows</span><span class="sxs-lookup"><span data-stu-id="fb729-195">Compatibility with Windows Animation Manager</span></span>

<span data-ttu-id="fb729-196">O Gerenciador de animação do Windows (animação do Windows) gera primitivos de animação em um formato compatível com a API DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="fb729-196">Windows Animation Manager (Windows Animation) outputs animation primitives in a format that is compatible with the DirectComposition API.</span></span> <span data-ttu-id="fb729-197">Isso significa que o DirectComposition pode criar animações com base em primitivos de animação criados pela animação do Windows.</span><span class="sxs-lookup"><span data-stu-id="fb729-197">This means that DirectComposition can create animations based on animation primitives created by Windows Animation.</span></span>

<span data-ttu-id="fb729-198">Para obter mais informações, consulte [Gerenciador de animação do Windows](/windows/desktop/UIAnimation/-main-portal), o método [**IUIAnimationVariable2:: Getcurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) e [Gerenciando a animação DirectComposition com o Gerenciador de animação do Windows v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span><span class="sxs-lookup"><span data-stu-id="fb729-198">For more information, see [Windows Animation Manager](/windows/desktop/UIAnimation/-main-portal), the [**IUIAnimationVariable2::GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) method, and [Managing DirectComposition Animation with Windows Animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fb729-199">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="fb729-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fb729-200">Conceitos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="fb729-200">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 
