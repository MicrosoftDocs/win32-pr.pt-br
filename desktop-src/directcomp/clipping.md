---
title: Recorte (DirectComposition)
description: Este tópico descreve o suporte do Microsoft DirectComposition para elementos visuais de recorte.
ms.assetid: B6E0D8F5-B6B9-40CC-B079-850AC8F2D538
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4feb537dfb41053dd1099eca7f122b3284dce95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104369184"
---
# <a name="clipping-directcomposition"></a><span data-ttu-id="9a555-103">Recorte (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="9a555-103">Clipping (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="9a555-104">Para aplicativos no Windows 10, é recomendável usar APIs do Windows. UI. composição em vez de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="9a555-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="9a555-105">Para obter mais informações, consulte [modernizar seu aplicativo de área de trabalho usando a camada Visual](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="9a555-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="9a555-106">O recorte fornece uma maneira de revelar apenas uma parte de uma árvore visual ou Visual limitando a renderização do Visual ou da árvore a uma área retangular específica.</span><span class="sxs-lookup"><span data-stu-id="9a555-106">Clipping provides a way to reveal only a portion of a visual or visual tree by limiting the rendering of the visual or tree to a particular rectangular area.</span></span> <span data-ttu-id="9a555-107">Este tópico descreve o suporte do Microsoft DirectComposition para elementos visuais de recorte.</span><span class="sxs-lookup"><span data-stu-id="9a555-107">This topic describes Microsoft DirectComposition support for clipping visuals.</span></span> <span data-ttu-id="9a555-108">Ele inclui as seguintes seções:</span><span class="sxs-lookup"><span data-stu-id="9a555-108">It includes the following sections:</span></span>

-   [<span data-ttu-id="9a555-109">Retângulo do clipe</span><span class="sxs-lookup"><span data-stu-id="9a555-109">Clip rectangle</span></span>](#clip-rectangle)
-   [<span data-ttu-id="9a555-110">Objeto de clipe</span><span class="sxs-lookup"><span data-stu-id="9a555-110">Clip object</span></span>](#clip-object)
-   [<span data-ttu-id="9a555-111">Retângulo de clipe animado</span><span class="sxs-lookup"><span data-stu-id="9a555-111">Animated clip rectangle</span></span>](#animated-clip-rectangle)
-   [<span data-ttu-id="9a555-112">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9a555-112">Related topics</span></span>](#related-topics)

## <a name="clip-rectangle"></a><span data-ttu-id="9a555-113">Retângulo do clipe</span><span class="sxs-lookup"><span data-stu-id="9a555-113">Clip rectangle</span></span>

<span data-ttu-id="9a555-114">Um objeto visual tem uma propriedade clip que define uma região retangular, ou um *retângulo*, dentro do conteúdo de bitmap do Visual.</span><span class="sxs-lookup"><span data-stu-id="9a555-114">A visual object has a Clip property that defines a rectangular region, or *clip rectangle*, within the visual's bitmap content.</span></span> <span data-ttu-id="9a555-115">Quando o Visual é renderizado para a tela, somente a parte do conteúdo do bitmap que está dentro do retângulo é desenhada na tela, enquanto o conteúdo que se estende para fora do retângulo é recortado (não desenhado).</span><span class="sxs-lookup"><span data-stu-id="9a555-115">When the visual is rendered to the screen, only the portion of the bitmap content that is inside the clip rectangle is drawn on the screen, while the content that extends outside the clip rectangle is clipped (not drawn).</span></span> <span data-ttu-id="9a555-116">Por padrão, a propriedade Clip inclui todo o conteúdo do bitmap.</span><span class="sxs-lookup"><span data-stu-id="9a555-116">By default, the Clip property includes all bitmap content.</span></span>

<span data-ttu-id="9a555-117">A propriedade de clipe do Visual aplica-se a todos os visuais filho e descendentes.</span><span class="sxs-lookup"><span data-stu-id="9a555-117">A visual's Clip property applies to all child and descendent visuals.</span></span> <span data-ttu-id="9a555-118">Em outras palavras, qualquer conteúdo filho ou descendente que esteja fora dos limites do retângulo do clipe pai também será recortado.</span><span class="sxs-lookup"><span data-stu-id="9a555-118">In other words, any child or descendent content that falls outside the bounds of the parent's clip rectangle is also clipped.</span></span>

<span data-ttu-id="9a555-119">DirectComposition aplica a propriedade Clip antes de aplicar as propriedades de transformação OffsetX, OffsetY e 2D, mas depois de aplicar as propriedades Effect e Transform 3D.</span><span class="sxs-lookup"><span data-stu-id="9a555-119">DirectComposition applies the Clip property before applying the OffsetX, OffsetY, and 2D Transform properties, but after applying the Effect and 3D Transform properties.</span></span> <span data-ttu-id="9a555-120">Isso significa que as transformações 2D, OffsetX e OffsetY, afetarão o conteúdo visual e o retângulo.</span><span class="sxs-lookup"><span data-stu-id="9a555-120">This means that 2D Transforms, OffsetX, and OffsetY, will affect both the visual content, and the clip rectangle.</span></span> <span data-ttu-id="9a555-121">Enquanto as transformações e os efeitos 3D não se aplicarão ao retângulo do clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-121">Whereas 3D transforms and effects will not apply to the clip rectangle.</span></span>

<span data-ttu-id="9a555-122">Por exemplo, ao aplicar uma transformação offset ou 2D, o clipe retângulo é afetado pela matriz de transformação.</span><span class="sxs-lookup"><span data-stu-id="9a555-122">For example, when applying an offset or 2D transform, the clip rectangle is affected by the transformation matrix.</span></span> <span data-ttu-id="9a555-123">Portanto, adicionar um deslocamento e uma rotação 2D (45 graus), juntamente com um retângulo de canto arredondado, resultará em:</span><span class="sxs-lookup"><span data-stu-id="9a555-123">So adding an offset and a 2D rotate (45 degrees) along with a rounded corner clip rectangle will result in this:</span></span>

![diagrama de mostrar o efeito de uma transformação 2D em um retângulo.](images/clipping2dtransform.png)

<span data-ttu-id="9a555-125">Ao aplicar uma transformação 3D "no" retângulo do clipe, o retângulo do clipe não é afetado pela matriz de transformação.</span><span class="sxs-lookup"><span data-stu-id="9a555-125">When applying a 3D transformation “within” the clip rectangle, the clip rectangle is not affected by the transformation matrix.</span></span> <span data-ttu-id="9a555-126">Mesmo ao aplicar uma rotação em todo o eixo Z (efetivamente igual ao exemplo anterior), o seguinte diagrama é o resultado:</span><span class="sxs-lookup"><span data-stu-id="9a555-126">Even when applying a rotation around the Z axis (effectively the same as the previous example), the following diagram is the result:</span></span>

![diagrama mostrando que uma transformação 3D não afeta o clipe de retângulo (gira o Visual no clipe).](images/clipping3dtransform.png)

<span data-ttu-id="9a555-128">Observe que o Visual girado no clipe porque a matriz 3D não é aplicada ao próprio clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-128">Note that the visual rotated within the clip because the 3D matrix is not applied to the clip itself.</span></span>

<span data-ttu-id="9a555-129">Se a propriedade Clip for definida como um retângulo vazio, o Visual será completamente recortado; ou seja, o Visual é incluído na árvore visual, mas não processa nada.</span><span class="sxs-lookup"><span data-stu-id="9a555-129">If the Clip property is set to an empty rectangle, the visual is fully clipped; that is, the visual is included in the visual tree, but it does not render anything.</span></span> <span data-ttu-id="9a555-130">Se você não quiser incluir um Visual específico em uma composição, remova o Visual da árvore visual em vez de definir um retângulo de clipe vazio.</span><span class="sxs-lookup"><span data-stu-id="9a555-130">If you do not want to include a particular visual in a composition, remove the visual from the visual tree instead of setting an empty clip rectangle.</span></span> <span data-ttu-id="9a555-131">Remover os resultados visuais em melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="9a555-131">Removing the visual results in better performance.</span></span>

<span data-ttu-id="9a555-132">Você define a propriedade Clip de um Visual usando o método [**IDCompositionVisual:: SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="9a555-132">You set the Clip property of a visual by using the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span> <span data-ttu-id="9a555-133">Esse método inclui sobrecargas que permitem que você defina o valor da propriedade Clip para um retângulo estático ou para um objeto de clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-133">This method includes overloads that enable you to set the value of the Clip property to a static rectangle or to a clip object.</span></span> <span data-ttu-id="9a555-134">Use um retângulo estático se você não precisar alterar as dimensões do retângulo do clipe durante o tempo de vida do Visual.</span><span class="sxs-lookup"><span data-stu-id="9a555-134">Use a static rectangle if you do not need to change the dimensions of the clip rectangle during the lifetime of the visual.</span></span> <span data-ttu-id="9a555-135">Se você precisar alterar as dimensões ou animar o retângulo, use um objeto de clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-135">If you do need to change the dimensions or animate the clip rectangle, use a clip object.</span></span>

## <a name="clip-object"></a><span data-ttu-id="9a555-136">Objeto de clipe</span><span class="sxs-lookup"><span data-stu-id="9a555-136">Clip object</span></span>

<span data-ttu-id="9a555-137">Um objeto de clipe é um objeto de Component Object Model (COM) que representa um retângulo de clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-137">A clip object is a Component Object Model (COM) object that represents a clip rectangle.</span></span> <span data-ttu-id="9a555-138">Você cria um objeto de clipe usando o método [**IDCompositionDevice:: CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) e, em seguida, usa a interface [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) do objeto para definir as propriedades do objeto.</span><span class="sxs-lookup"><span data-stu-id="9a555-138">You create a clip object by using the [**IDCompositionDevice::CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) method, and then use the object's [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) interface to set the properties of the object.</span></span> <span data-ttu-id="9a555-139">Um objeto de clipe recém-criado tem os valores mínimos possíveis para as propriedades Left e Top, e os valores máximos possíveis para as propriedades Right e Bottom, tornando-o efetivamente um objeto de clipe não op.</span><span class="sxs-lookup"><span data-stu-id="9a555-139">A newly created clip object has the minimum possible values for the Left and Top properties, and the maximum possible values for the Right and Bottom properties, effectively making it a no-op clip object.</span></span> <span data-ttu-id="9a555-140">Em outras palavras, o objeto representa um retângulo de clipe que inclui todo o conteúdo de bitmap de um Visual.</span><span class="sxs-lookup"><span data-stu-id="9a555-140">In other words, the object represents a clip rectangle that would include the entire bitmap content of a visual.</span></span>

<span data-ttu-id="9a555-141">Um objeto de clipe inclui um conjunto de propriedades que permitem que você especifique os cantos arredondados para o objeto de clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-141">A clip object includes a set of properties that enable you to specify rounded corners for the clip object.</span></span> <span data-ttu-id="9a555-142">As propriedades permitem que você defina o raio x e y de cada canto do objeto de recorte.</span><span class="sxs-lookup"><span data-stu-id="9a555-142">The properties enable you to set the x radius and y radius of each corner of the clipping object.</span></span>

## <a name="animated-clip-rectangle"></a><span data-ttu-id="9a555-143">Retângulo de clipe animado</span><span class="sxs-lookup"><span data-stu-id="9a555-143">Animated clip rectangle</span></span>

<span data-ttu-id="9a555-144">Você pode animar um clip-retângulo aplicando objetos de animação às propriedades esquerda, superior, direita e inferior de um objeto de clipe.</span><span class="sxs-lookup"><span data-stu-id="9a555-144">You can animate a clip rectangle by applying animation objects to the Left, Top, Right, and Bottom properties of a clip object.</span></span> <span data-ttu-id="9a555-145">Use o método sobrecarregado [**IDCompositionVisual:: SetClip (IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) para aplicar o retângulo de clipe animado à propriedade Clip de um Visual.</span><span class="sxs-lookup"><span data-stu-id="9a555-145">Use the [**IDCompositionVisual::SetClip(IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) overloaded method to apply the animated clip rectangle to the Clip property of a visual.</span></span>

<span data-ttu-id="9a555-146">Para obter mais informações sobre objetos de animação, consulte [animação](animation.md).</span><span class="sxs-lookup"><span data-stu-id="9a555-146">For more information about animation objects, see [Animation](animation.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="9a555-147">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="9a555-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9a555-148">Conceitos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="9a555-148">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> <dt>

[<span data-ttu-id="9a555-149">Como recortar com um objeto de clipe de retângulo</span><span class="sxs-lookup"><span data-stu-id="9a555-149">How to Clip with a Rectangle Clip Object</span></span>](how-to--set-the-clip-rectangle-for-a-visual.md)
</dt> </dl>

 

 
