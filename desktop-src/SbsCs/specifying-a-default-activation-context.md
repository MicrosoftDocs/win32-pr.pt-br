---
description: Especificando um contexto de ativação padrão
ms.assetid: 4d9a8552-7098-458d-a592-45524871cce5
title: Especificando um contexto de ativação padrão
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32cf0225a8e4290a09f7e6524a4b3ef47f9c4c4e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103922531"
---
# <a name="specifying-a-default-activation-context"></a><span data-ttu-id="a68de-103">Especificando um contexto de ativação padrão</span><span class="sxs-lookup"><span data-stu-id="a68de-103">Specifying a Default Activation Context</span></span>

<span data-ttu-id="a68de-104">Quando seu aplicativo ou componente cria um novo processo, o Windows procura um manifesto de aplicativo padrão.</span><span class="sxs-lookup"><span data-stu-id="a68de-104">When your application or component creates a new process, Windows searches for a default application manifest.</span></span> <span data-ttu-id="a68de-105">Observe que um manifesto incluído como um recurso no aplicativo tem precedência sobre um manifesto externo.</span><span class="sxs-lookup"><span data-stu-id="a68de-105">Note that a manifest included as a resource in the application takes precedence over an external manifest.</span></span> <span data-ttu-id="a68de-106">O contexto de ativação padrão é o primeiro contexto de ativação que está ativo antes de qualquer outro contexto de ativação ter sido ativado.</span><span class="sxs-lookup"><span data-stu-id="a68de-106">The default activation context is the first activation context that is active before any other activation context has been activated.</span></span> <span data-ttu-id="a68de-107">Esse contexto de ativação sempre estará ativo, a menos que você ative outros contextos.</span><span class="sxs-lookup"><span data-stu-id="a68de-107">This activation context is always active unless you activate other contexts.</span></span> <span data-ttu-id="a68de-108">Se você definir \_ o reconhecimento \_ de isolamento habilitado quando compilar seu aplicativo ou componente, chamadas como [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)e [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) podem executar o gerenciamento automático de contexto.</span><span class="sxs-lookup"><span data-stu-id="a68de-108">If you define ISOLATION\_AWARE\_ENABLED when you compile your application or component, calls like [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya), and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) can perform automatic context management.</span></span>

<span data-ttu-id="a68de-109">O carregador permite que um aplicativo especifique seu contexto de ativação padrão por dois métodos.</span><span class="sxs-lookup"><span data-stu-id="a68de-109">The loader allows an application to specify its default activation context by two methods.</span></span> <span data-ttu-id="a68de-110">Você pode colocar o arquivo de manifesto nos recursos do executável e o carregador irá encontrá-lo.</span><span class="sxs-lookup"><span data-stu-id="a68de-110">You can put the manifest file in the resources of the executable and the loader will find it.</span></span> <span data-ttu-id="a68de-111">Isso é o mesmo que colocar o arquivo de manifesto na tabela de recursos do executável.</span><span class="sxs-lookup"><span data-stu-id="a68de-111">This is the same as putting the manifest file in the executable's resource table.</span></span> <span data-ttu-id="a68de-112">Você pode inserir o manifesto em um arquivo chamado *MyApp*. exe. O manifesto no mesmo diretório que o *MyApp*. exe e o carregador o encontra enquanto procura *MyApp*. exe.</span><span class="sxs-lookup"><span data-stu-id="a68de-112">You can place the manifest in a file named *Myapp*.exe.Manifest in the same directory as *Myapp*.exe, and the loader finds it while looking for *Myapp*.exe.</span></span>

<span data-ttu-id="a68de-113">Se você usar nenhum desses métodos, o aplicativo começará com o contexto de ativação padrão do sistema, que contém um conjunto mínimo de assemblies.</span><span class="sxs-lookup"><span data-stu-id="a68de-113">If you use none of these methods, the application starts with the system default activation context, which contains a minimal set of assemblies.</span></span>

<span data-ttu-id="a68de-114">Uma maneira melhor de usar o gerenciamento automático de contexto é compilar seu aplicativo com \_ reconhecimento \_ habilitado para isolamento definido.</span><span class="sxs-lookup"><span data-stu-id="a68de-114">A better way of using automatic context management is by compiling your application with ISOLATION\_AWARE\_ENABLED defined.</span></span> <span data-ttu-id="a68de-115">O método recomendado é definir isso na linha de comando do compilador para todo o projeto que está sendo compilado, em vez de ser definido em arquivos ou cabeçalhos de origem individuais.</span><span class="sxs-lookup"><span data-stu-id="a68de-115">The recommended method is to set this on the compiler's command line for the entire project being built rather than being set in individual source files or headers.</span></span> <span data-ttu-id="a68de-116">Isso faz com que a maioria das APIs do Win32 reconheça os contextos de ativação e como gerenciá-los.</span><span class="sxs-lookup"><span data-stu-id="a68de-116">This makes most Win32 APIs aware of activation contexts and how to manage them.</span></span> <span data-ttu-id="a68de-117">Em vez de precisar fazer seu próprio gerenciamento de contexto de ativação, basta colocar um manifesto em sua tabela de recursos na ID do recurso \_ ISOLATIONAWARE \_ \_ ID do recurso de manifesto (valor numérico 2), do manifesto do tipo RT \_ (valor numérico 24.) Funções como [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance)e [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) ativam automaticamente esse contexto antes de fazer a chamada real.</span><span class="sxs-lookup"><span data-stu-id="a68de-117">Instead of having to do your own activation context management, you simply need to place a manifest in your resource table at resource ID ISOLATIONAWARE\_MANIFEST\_RESOURCE\_ID (numeric value 2), of type RT\_MANIFEST (numeric value 24.) Functions such as [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), and [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) then automatically activate this context before making the actual call.</span></span>

<span data-ttu-id="a68de-118">Observe que, se você compilar com \_ reconhecimento de isolamento \_ habilitado definido, também não poderá fazer seu próprio gerenciamento de contexto de ativação.</span><span class="sxs-lookup"><span data-stu-id="a68de-118">Note that if you compile with ISOLATION\_AWARE\_ENABLED defined, you cannot also do your own activation context management.</span></span> <span data-ttu-id="a68de-119">Com o \_ reconhecimento de isolamento \_ habilitado definido, o Windows ignora qualquer criação de contexto de ativação dinâmica que seu aplicativo pode tentar fazer entre chamadas [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) e [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) .</span><span class="sxs-lookup"><span data-stu-id="a68de-119">With ISOLATION\_AWARE\_ENABLED defined, Windows ignores any dynamic activation context creation your application may attempt to do between [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) calls.</span></span> <span data-ttu-id="a68de-120">Isso significa que, quando seu aplicativo usa o \_ reconhecimento \_ de isolamento habilitado, você deve certificar-se de que o manifesto contém uma lista completa de todos os assemblies que seu componente requer.</span><span class="sxs-lookup"><span data-stu-id="a68de-120">This means that when your application uses ISOLATION\_AWARE\_ENABLED you must make sure that the manifest contains a complete list of all assemblies that your component requires.</span></span>

 

 
