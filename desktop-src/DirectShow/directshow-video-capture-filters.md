---
description: Filtros de captura de vídeo do DirectShow
ms.assetid: e4d1452d-ceac-4b5c-b9ba-ad4722ecff76
title: Filtros de captura de vídeo do DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 238f18dd77bc40011fa9fc0dbab3192ea81a223f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104456413"
---
# <a name="directshow-video-capture-filters"></a><span data-ttu-id="f2913-103">Filtros de captura de vídeo do DirectShow</span><span class="sxs-lookup"><span data-stu-id="f2913-103">DirectShow Video Capture Filters</span></span>

<span data-ttu-id="f2913-104">Os filtros de captura no DirectShow têm alguns recursos que os distinguem de outros tipos de filtros.</span><span class="sxs-lookup"><span data-stu-id="f2913-104">Capture filters in DirectShow have some features that distinguish them from other kinds of filters.</span></span> <span data-ttu-id="f2913-105">Embora o [Construtor de gráficos de captura](capture-graph-builder.md) oculte muitos dos detalhes, é uma boa ideia ler esta seção para ter uma compreensão geral dos gráficos de captura do DirectShow.</span><span class="sxs-lookup"><span data-stu-id="f2913-105">Although the [Capture Graph Builder](capture-graph-builder.md) hides many of the details, it is a good idea to read this section, in order to have a general understanding of DirectShow capture graphs.</span></span>

<span data-ttu-id="f2913-106">**Fixar categorias**</span><span class="sxs-lookup"><span data-stu-id="f2913-106">**Pin Categories**</span></span>

<span data-ttu-id="f2913-107">Um filtro de captura geralmente tem dois ou mais Pins de saída que fornecem o mesmo tipo de dados — por exemplo, um PIN de visualização e um PIN de captura.</span><span class="sxs-lookup"><span data-stu-id="f2913-107">A capture filter often has two or more output pins that deliver the same kind of data—for example, a preview pin and a capture pin.</span></span> <span data-ttu-id="f2913-108">Portanto, os tipos de mídia não são uma boa maneira de distinguir os Pins.</span><span class="sxs-lookup"><span data-stu-id="f2913-108">Therefore, media types are not a good way to distinguish the pins.</span></span> <span data-ttu-id="f2913-109">Em vez disso, os Pins são diferenciados por sua funcionalidade, que é identificada usando um GUID, chamado de *categoria de PIN*.</span><span class="sxs-lookup"><span data-stu-id="f2913-109">Instead, the pins are distinguished by their functionality, which is identified using a GUID, called the *pin category*.</span></span>

<span data-ttu-id="f2913-110">Para obter uma discussão sobre como consultar Pins para sua categoria, consulte [trabalhando com categorias de PIN](working-with-pin-categories.md).</span><span class="sxs-lookup"><span data-stu-id="f2913-110">For a discussion of how to query pins for their category, see [Working with Pin Categories](working-with-pin-categories.md).</span></span> <span data-ttu-id="f2913-111">No entanto, para a maioria dos aplicativos, você não precisará consultar Pins diretamente.</span><span class="sxs-lookup"><span data-stu-id="f2913-111">For most applications, however, you will not have to query pins directly.</span></span> <span data-ttu-id="f2913-112">Em vez disso, vários métodos [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) usam parâmetros que especificam a categoria de PIN na qual operar.</span><span class="sxs-lookup"><span data-stu-id="f2913-112">Instead, various [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) methods take parameters that specify the pin category on which to operate.</span></span> <span data-ttu-id="f2913-113">O construtor do grafo de captura localiza automaticamente o PIN correto.</span><span class="sxs-lookup"><span data-stu-id="f2913-113">The Capture Graph Builder automatically locates the correct pin.</span></span>

<span data-ttu-id="f2913-114">**Pins de visualização e Pins de captura**</span><span class="sxs-lookup"><span data-stu-id="f2913-114">**Preview Pins and Capture Pins**</span></span>

<span data-ttu-id="f2913-115">Alguns dispositivos de captura de vídeo têm pins de saída separados para visualização e captura.</span><span class="sxs-lookup"><span data-stu-id="f2913-115">Some video capture devices have separate output pins for preview and capture.</span></span> <span data-ttu-id="f2913-116">O pino de visualização é usado para renderizar o vídeo na tela, enquanto o pino de captura é usado para gravar vídeo em um arquivo.</span><span class="sxs-lookup"><span data-stu-id="f2913-116">The preview pin is used to render video to the screen, while the capture pin is used to write video to a file.</span></span>

<span data-ttu-id="f2913-117">Um PIN de visualização e um PIN de captura têm as seguintes diferenças:</span><span class="sxs-lookup"><span data-stu-id="f2913-117">A preview pin and a capture pin have the following differences:</span></span>

-   <span data-ttu-id="f2913-118">Um PIN de visualização descarta os quadros conforme necessário para manter a taxa de transferência no pino de captura.</span><span class="sxs-lookup"><span data-stu-id="f2913-118">A preview pin drops frames as needed to maintain throughput on the capture pin.</span></span>
-   <span data-ttu-id="f2913-119">Cada quadro de um PIN de captura é carimbado com o tempo do fluxo quando o quadro foi capturado.</span><span class="sxs-lookup"><span data-stu-id="f2913-119">Each frame from a capture pin is time-stamped with the stream time when the frame was captured.</span></span> <span data-ttu-id="f2913-120">Um PIN de visualização não faz o carimbo de data/hora dos exemplos que ele fornece.</span><span class="sxs-lookup"><span data-stu-id="f2913-120">A preview pin does not time stamp the samples it delivers.</span></span>

<span data-ttu-id="f2913-121">O motivo pelo qual os quadros de visualização não têm carimbos de data/hora é que o grafo de filtro apresenta uma pequena quantidade de latência no fluxo.</span><span class="sxs-lookup"><span data-stu-id="f2913-121">The reason that preview frames do not have time stamps is that the filter graph introduces a small amount of latency into the stream.</span></span> <span data-ttu-id="f2913-122">Se o tempo de captura for usado como o tempo de apresentação, o renderizador de vídeo tratará cada exemplo como sendo um pouco tarde.</span><span class="sxs-lookup"><span data-stu-id="f2913-122">If the capture time is used as the presentation time, the video renderer treats every sample as being slightly late.</span></span> <span data-ttu-id="f2913-123">Isso pode fazer com que o renderizador de vídeo descarte os quadros enquanto tenta acompanhar.</span><span class="sxs-lookup"><span data-stu-id="f2913-123">This can cause the video renderer to drop frames while it tries to catch up.</span></span> <span data-ttu-id="f2913-124">Remover os carimbos de data/hora garante que o renderizador apresente cada exemplo quando ele chega, sem descartar os quadros.</span><span class="sxs-lookup"><span data-stu-id="f2913-124">Removing the time stamps ensures that the renderer presents each sample when it arrives, without dropping frames.</span></span>

<span data-ttu-id="f2913-125">A categoria de PIN para os Pins de visualização é a versão prévia da categoria de fixação \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="f2913-125">The pin category for preview pins is PIN\_CATEGORY\_PREVIEW.</span></span> <span data-ttu-id="f2913-126">A categoria para Pins de captura é fixar a \_ captura de categoria \_ .</span><span class="sxs-lookup"><span data-stu-id="f2913-126">The category for capture pins is PIN\_CATEGORY\_CAPTURE.</span></span>

<span data-ttu-id="f2913-127">**Pins de porta de vídeo**</span><span class="sxs-lookup"><span data-stu-id="f2913-127">**Video Port Pins**</span></span>

<span data-ttu-id="f2913-128">Uma porta de vídeo é uma conexão de hardware entre um dispositivo de vídeo (como um sintonizador de TV analógico) e a placa de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f2913-128">A video port is a hardware connection between a video device (such as an analog TV tuner) and the video card.</span></span> <span data-ttu-id="f2913-129">Uma porta de vídeo permite que o dispositivo envie dados de vídeo diretamente para a placa gráfica.</span><span class="sxs-lookup"><span data-stu-id="f2913-129">A video port enables the device to send video data directly to the graphics card.</span></span> <span data-ttu-id="f2913-130">O vídeo é exibido na tela usando uma sobreposição de hardware.</span><span class="sxs-lookup"><span data-stu-id="f2913-130">The video is displayed on the screen using a hardware overlay.</span></span> <span data-ttu-id="f2913-131">Uma porta de vídeo pode ser um cabo real que conecta dois dispositivos em cartões separados; ou pode ser uma conexão com fio no mesmo cartão.</span><span class="sxs-lookup"><span data-stu-id="f2913-131">A video port might be an actual cable that connects two devices on separate cards; or it might be a hard-wired connection on the same card.</span></span>

<span data-ttu-id="f2913-132">A vantagem de uma porta de vídeo é que o vídeo vai diretamente para a memória de vídeo, sem qualquer trabalho da CPU.</span><span class="sxs-lookup"><span data-stu-id="f2913-132">The advantage of a video port is that the video goes directly into video memory, without any work by the CPU.</span></span> <span data-ttu-id="f2913-133">No entanto, as portas de vídeo têm algumas desvantagens:</span><span class="sxs-lookup"><span data-stu-id="f2913-133">However, video ports have some drawbacks:</span></span>

-   <span data-ttu-id="f2913-134">Uma porta de vídeo sempre usa a superfície de sobreposição durante a captura, independentemente se você deseja visualizar o vídeo.</span><span class="sxs-lookup"><span data-stu-id="f2913-134">A video port always uses the overlay surface during capture, regardless of whether you want to preview the video.</span></span>
-   <span data-ttu-id="f2913-135">A inversão entre quadros ocorre automaticamente, o que dificulta a sincronização da inversão com outras operações de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f2913-135">Flipping between frames occurs automatically, which makes it difficult to synchronize the flip with other video operations.</span></span>

<span data-ttu-id="f2913-136">Se um dispositivo de captura usar uma porta de vídeo, o filtro de captura terá um PIN de porta de vídeo em vez de um PIN de visualização.</span><span class="sxs-lookup"><span data-stu-id="f2913-136">If a capture device uses a video port, the capture filter has a video port pin instead of a preview pin.</span></span> <span data-ttu-id="f2913-137">A categoria de PIN para Pins de porta de vídeo é fixar \_ categoria \_ VIDEOPORT.</span><span class="sxs-lookup"><span data-stu-id="f2913-137">The pin category for video port pins is PIN\_CATEGORY\_VIDEOPORT.</span></span>

<span data-ttu-id="f2913-138">Cada filtro de captura tem pelo menos um PIN de captura.</span><span class="sxs-lookup"><span data-stu-id="f2913-138">Every capture filter has at least one capture pin.</span></span> <span data-ttu-id="f2913-139">Além disso, ele pode ter um PIN de visualização ou um PIN de porta de vídeo, mas nunca ambos.</span><span class="sxs-lookup"><span data-stu-id="f2913-139">In addition it might have a preview pin or a video port pin, but never both.</span></span> <span data-ttu-id="f2913-140">Os filtros podem ter vários Pins de captura e Pins de visualização, cada um fornecendo um tipo de mídia separado.</span><span class="sxs-lookup"><span data-stu-id="f2913-140">Filters can have multiple capture pins and preview pins, each delivering a separate media type.</span></span> <span data-ttu-id="f2913-141">Assim, um único filtro pode ter um pino de captura de vídeo, um pino de visualização de vídeo, um PIN de captura de áudio e um pino de visualização de áudio.</span><span class="sxs-lookup"><span data-stu-id="f2913-141">Thus, a single filter could have a video capture pin, a video preview pin, an audio capture pin, and an audio preview pin.</span></span> <span data-ttu-id="f2913-142">(No entanto, não há nada equivalente a uma porta de vídeo para áudio.)</span><span class="sxs-lookup"><span data-stu-id="f2913-142">(There is nothing equivalent to a video port for audio, however.)</span></span>

<span data-ttu-id="f2913-143">**Filtros WDM de upstream**</span><span class="sxs-lookup"><span data-stu-id="f2913-143">**Upstream WDM Filters**</span></span>

<span data-ttu-id="f2913-144">Os dispositivos Windows Driver Model (WDM) podem exigir alguns filtros adicionais upstream do filtro de captura.</span><span class="sxs-lookup"><span data-stu-id="f2913-144">Windows Driver Model (WDM) devices may require some additional filters upstream from the capture filter.</span></span> <span data-ttu-id="f2913-145">Esses filtros incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="f2913-145">These filters include the following:</span></span>

-   <span data-ttu-id="f2913-146">[Filtro de sintonizador de TV](tv-tuner-filter.md).</span><span class="sxs-lookup"><span data-stu-id="f2913-146">[TV Tuner Filter](tv-tuner-filter.md).</span></span> <span data-ttu-id="f2913-147">Controles de ajuste para sintonizadores de TV analógicos.</span><span class="sxs-lookup"><span data-stu-id="f2913-147">Controls tuning for analog TV tuners.</span></span>
-   <span data-ttu-id="f2913-148">[Filtro de áudio de TV](tv-audio-filter.md).</span><span class="sxs-lookup"><span data-stu-id="f2913-148">[TV Audio Filter](tv-audio-filter.md).</span></span> <span data-ttu-id="f2913-149">Controla as configurações de áudio para sintonizadores de TV analógicos.</span><span class="sxs-lookup"><span data-stu-id="f2913-149">Controls audio settings for analog TV tuners.</span></span>
-   <span data-ttu-id="f2913-150">[Filtro Crossbar de vídeo analógico](analog-video-crossbar-filter.md).</span><span class="sxs-lookup"><span data-stu-id="f2913-150">[Analog Video Crossbar Filter](analog-video-crossbar-filter.md).</span></span> <span data-ttu-id="f2913-151">Roteia sinais de vídeo e áudio por meio do dispositivo de hardware.</span><span class="sxs-lookup"><span data-stu-id="f2913-151">Routes video and audio signals through the hardware device.</span></span> <span data-ttu-id="f2913-152">Por exemplo, um dispositivo pode ter várias entradas, como S-Video e vídeo composto.</span><span class="sxs-lookup"><span data-stu-id="f2913-152">For example, a device might have multiple inputs, such as S-Video and composite video.</span></span> <span data-ttu-id="f2913-153">O filtro Crossbar permite que o aplicativo selecione a entrada.</span><span class="sxs-lookup"><span data-stu-id="f2913-153">The crossbar filter enables the application to select the input.</span></span>

<span data-ttu-id="f2913-154">Embora esses sejam filtros separados no DirectShow, normalmente representam o mesmo dispositivo de hardware.</span><span class="sxs-lookup"><span data-stu-id="f2913-154">Although these are separate filters in DirectShow, they typically represent the same hardware device.</span></span> <span data-ttu-id="f2913-155">Cada filtro controla uma função diferente do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f2913-155">Each filter controls a different function of the device.</span></span> <span data-ttu-id="f2913-156">Os filtros são conectados por Pins, mas nenhum dado de mídia é movido entre as conexões de PIN.</span><span class="sxs-lookup"><span data-stu-id="f2913-156">The filters are connected by pins, but no media data moves across the pin connections.</span></span> <span data-ttu-id="f2913-157">Portanto, os Pins nesses filtros não se conectam estabelecendo um tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="f2913-157">Therefore, the pins on these filters do not connect by establishing a media type.</span></span> <span data-ttu-id="f2913-158">Em vez disso, eles usam valores GUID chamados *médias*.</span><span class="sxs-lookup"><span data-stu-id="f2913-158">Instead, they use GUID values called *mediums*.</span></span> <span data-ttu-id="f2913-159">Os GUIDs médios são definidos exclusivamente para um determinado dispositivo minidriver.</span><span class="sxs-lookup"><span data-stu-id="f2913-159">Medium GUIDs are uniquely defined for a given device minidriver.</span></span> <span data-ttu-id="f2913-160">Por exemplo, o filtro de sintonizador de TV e o filtro de captura de vídeo para a mesma placa de TV terão suporte para a mesma mídia, o que permite que o aplicativo crie o grafo corretamente.</span><span class="sxs-lookup"><span data-stu-id="f2913-160">For example, the TV Tuner filter and the Video Capture filter for the same TV card will both support the same medium, which enables the application to build the graph correctly.</span></span>

<span data-ttu-id="f2913-161">Na prática, contanto que você esteja usando **ICaptureGraphBuilder2** para criar gráficos de captura, esses filtros são adicionados ao grafo automaticamente.</span><span class="sxs-lookup"><span data-stu-id="f2913-161">In practice, as long as you are using **ICaptureGraphBuilder2** to build your capture graphs, these filters are added to the graph automatically.</span></span> <span data-ttu-id="f2913-162">Para obter uma discussão mais detalhada, consulte [filtros de driver de classe WDM](wdm-class-driver-filters.md).</span><span class="sxs-lookup"><span data-stu-id="f2913-162">For a more detailed discussion, see [WDM Class Driver Filters](wdm-class-driver-filters.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="f2913-163">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="f2913-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f2913-164">Sobre a captura de vídeo no DirectShow</span><span class="sxs-lookup"><span data-stu-id="f2913-164">About Video Capture in DirectShow</span></span>](about-video-capture-in-directshow.md)
</dt> </dl>

 

 



