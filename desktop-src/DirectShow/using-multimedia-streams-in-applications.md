---
description: Usando fluxos de multimídia em aplicativos
ms.assetid: 73cfe89b-df46-445a-92c7-2f7323672441
title: Usando fluxos de multimídia em aplicativos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f30dab204bc7b0bddbdc293708daecbe0558e8f9
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/03/2021
ms.locfileid: "103930155"
---
# <a name="using-multimedia-streams-in-applications"></a><span data-ttu-id="9e879-103">Usando fluxos de multimídia em aplicativos</span><span class="sxs-lookup"><span data-stu-id="9e879-103">Using Multimedia Streams in Applications</span></span>

> [!Note]  
> <span data-ttu-id="9e879-104">Essas APIs são preteridas.</span><span class="sxs-lookup"><span data-stu-id="9e879-104">These APIs are deprecated.</span></span> <span data-ttu-id="9e879-105">Os aplicativos devem usar o filtro de [**apoio de exemplo**](sample-grabber-filter.md) ou implementar um filtro personalizado para obter dados de um grafo de filtro do DirectShow.</span><span class="sxs-lookup"><span data-stu-id="9e879-105">Applications should use the [**Sample Grabber**](sample-grabber-filter.md) filter or implement a custom filter to get data from a DirectShow filter graph.</span></span>

 

<span data-ttu-id="9e879-106">As interfaces de streaming de multimídia simplificam bastante o processo de manipulação de dados de multimídia removendo a dependência de características específicas da fonte de hardware ou software e fornecendo suporte para todos os formatos de mídia do Microsoft DirectX®.</span><span class="sxs-lookup"><span data-stu-id="9e879-106">The multimedia streaming interfaces greatly simplify the process of manipulating multimedia data by removing the dependency on specific characteristics of the hardware or software source and providing support for all Microsoft DirectX® media formats.</span></span> <span data-ttu-id="9e879-107">Os fluxos abstraim os dados para um nível muito alto; os aplicativos podem até mesmo mover dados de um fluxo para outro sem saber nada sobre o formato dos dados.</span><span class="sxs-lookup"><span data-stu-id="9e879-107">Streams abstract the data to a very high level; applications can even move data from one stream to another without knowing anything about the data's format.</span></span>

<span data-ttu-id="9e879-108">Execute as etapas a seguir para criar um fluxo de multimídia.</span><span class="sxs-lookup"><span data-stu-id="9e879-108">Perform the following steps to create a multimedia stream.</span></span>

1.  <span data-ttu-id="9e879-109">Crie o fluxo de multimídia.</span><span class="sxs-lookup"><span data-stu-id="9e879-109">Create the multimedia stream.</span></span> <span data-ttu-id="9e879-110">O método de criação e inicialização do fluxo é específico da arquitetura.</span><span class="sxs-lookup"><span data-stu-id="9e879-110">The method of creation and initialization of the stream is architecture specific.</span></span> <span data-ttu-id="9e879-111">O DirectShow dá suporte à interface [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) , que é usada para inicializar o fluxo.</span><span class="sxs-lookup"><span data-stu-id="9e879-111">DirectShow supports the [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) interface, which is used to initialize the stream.</span></span> <span data-ttu-id="9e879-112">Outras implementações de servidor em processo de [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) serão criadas e inicializadas usando mecanismos diferentes.</span><span class="sxs-lookup"><span data-stu-id="9e879-112">Other in-process server implementations of [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) will be created and initialized using different mechanisms.</span></span>
2.  <span data-ttu-id="9e879-113">Depois que o objeto de fluxo de multimídia for inicializado, o aplicativo usará **QueryInterface** para recuperar a interface **IMultiMediaStream** do objeto.</span><span class="sxs-lookup"><span data-stu-id="9e879-113">After the multimedia stream object is initialized, the application will use **QueryInterface** to retrieve the **IMultiMediaStream** interface for the object.</span></span> <span data-ttu-id="9e879-114">Use essa interface para determinar as propriedades do fluxo e enumerar os fluxos em si.</span><span class="sxs-lookup"><span data-stu-id="9e879-114">Use this interface to determine the stream's properties and enumerate the streams themselves.</span></span> <span data-ttu-id="9e879-115">Você pode recuperar um fluxo específico chamando o método [**IMultiMediaStream:: GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) com uma ID de finalidade específica.</span><span class="sxs-lookup"><span data-stu-id="9e879-115">You can retrieve a specific stream by calling the [**IMultiMediaStream::GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) method with a specific purpose ID.</span></span> <span data-ttu-id="9e879-116">MSPID \_ PrimaryVideo e MSPID \_ PrimaryAudio, que representam os fluxos de áudio e vídeo primários, são as IDs de finalidade usadas com mais frequência.</span><span class="sxs-lookup"><span data-stu-id="9e879-116">MSPID\_PrimaryVideo and MSPID\_PrimaryAudio, which represent the primary video and audio streams, are the most commonly used purpose IDs.</span></span>
3.  <span data-ttu-id="9e879-117">Chame **IUnknown:: QueryInterface** para uma interface específica para o tipo de mídia do fluxo.</span><span class="sxs-lookup"><span data-stu-id="9e879-117">Call **IUnknown::QueryInterface** for an interface specific to the stream's media type.</span></span> <span data-ttu-id="9e879-118">Se você quiser renderizar um fluxo de vídeo, por exemplo, recupere sua interface [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) .</span><span class="sxs-lookup"><span data-stu-id="9e879-118">If you want to render a video stream, for example, retrieve its [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) interface.</span></span> <span data-ttu-id="9e879-119">As interfaces específicas de mídia definem métodos adicionais necessários para aproveitar ao máximo os recursos de um formato.</span><span class="sxs-lookup"><span data-stu-id="9e879-119">Media-specific interfaces define additional methods necessary for taking full advantage of a format's capabilities.</span></span>
4.  <span data-ttu-id="9e879-120">Crie um ou mais exemplos dos dados de fluxo.</span><span class="sxs-lookup"><span data-stu-id="9e879-120">Create one or more samples from the stream data.</span></span> <span data-ttu-id="9e879-121">Cada fluxo de mídia dá suporte ao método [**IMediaStream:: CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) para a criação de exemplo.</span><span class="sxs-lookup"><span data-stu-id="9e879-121">Every media stream supports the [**IMediaStream::CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) method for sample creation.</span></span> <span data-ttu-id="9e879-122">O exemplo resultante dá suporte à interface [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) , que fornece controle sobre a amostra e suas características.</span><span class="sxs-lookup"><span data-stu-id="9e879-122">The resulting sample supports the [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) interface, which provides control over the sample and its characteristics.</span></span> <span data-ttu-id="9e879-123">Normalmente, o fluxo de mídia dá suporte a um método específico de formato de criação de exemplo que é mais potente do que os métodos **IStreamSample** mencionados anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9e879-123">Typically, the media stream supports a format-specific method of sample creation that is more powerful than the aforementioned **IStreamSample** methods.</span></span> <span data-ttu-id="9e879-124">**IDirectDrawMediaStream**, por exemplo, pode criar amostras anexadas a uma superfície do DirectDraw e ao retângulo de recorte desejados.</span><span class="sxs-lookup"><span data-stu-id="9e879-124">**IDirectDrawMediaStream**, for example, can create samples attached to a desired DirectDraw surface and clipping rectangle.</span></span> <span data-ttu-id="9e879-125">Em algumas situações, no entanto, você deve lidar com os dados sem saber mais sobre seu formato de dados.</span><span class="sxs-lookup"><span data-stu-id="9e879-125">In some situations, however, you must handle data without knowing about its data format.</span></span> <span data-ttu-id="9e879-126">Se você quiser transmitir dados independentemente de seu formato, use o método **IMediaStream:: CreateSharedSample** para criar os exemplos de dados.</span><span class="sxs-lookup"><span data-stu-id="9e879-126">If you want to stream data independent of its format, use the **IMediaStream::CreateSharedSample** method to create the data samples.</span></span>
5.  <span data-ttu-id="9e879-127">Depois de criar todos os exemplos de fluxo desejados, inicie o fluxo chamando o método [**IMultiMediaStream:: SetState**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) e passe o sinalizador de execução streamstate \_ como seu parâmetro.</span><span class="sxs-lookup"><span data-stu-id="9e879-127">After creating all desired stream samples, start the stream by calling the [**IMultiMediaStream::SetState**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) method and pass in the STREAMSTATE\_RUN flag as its parameter.</span></span>
6.  <span data-ttu-id="9e879-128">Chame [**IStreamSample:: Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) para atualizar o exemplo de fluxo.</span><span class="sxs-lookup"><span data-stu-id="9e879-128">Call [**IStreamSample::Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) to update the stream sample.</span></span> <span data-ttu-id="9e879-129">Quando o método **IStreamSample:: Update** é encerrado, você pode acessar os dados do exemplo.</span><span class="sxs-lookup"><span data-stu-id="9e879-129">When the **IStreamSample::Update** method exits, you can access the sample's data.</span></span> <span data-ttu-id="9e879-130">Se você quiser que um gatilho seja um evento ou uma chamada de função específica quando a atualização retornar, passe os ponteiros apropriados para o método **IStreamSample:: Update** .</span><span class="sxs-lookup"><span data-stu-id="9e879-130">If you want a trigger a specific event or function call when the update returns, pass the appropriate pointers to the **IStreamSample::Update** method.</span></span>

<span data-ttu-id="9e879-131">Para obter mais informações sobre as interfaces de streaming de multimídia, consulte [Multimedia streaming](multimedia-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="9e879-131">For more information on the multimedia streaming interfaces, see [Multimedia Streaming](multimedia-streaming.md).</span></span>

 

 



