---
description: Reprodução de fluxo da Web ASF no DirectShow
ms.assetid: c7818c62-24af-4eac-84b8-f76be4ca6c09
title: Reprodução de fluxo da Web ASF no DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d14a83d2baf9c11aa824f5d6358f62790c16b30
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104296036"
---
# <a name="asf-web-stream-playback-in-directshow"></a><span data-ttu-id="22451-103">Reprodução de fluxo da Web ASF no DirectShow</span><span class="sxs-lookup"><span data-stu-id="22451-103">ASF Web Stream Playback in DirectShow</span></span>

<span data-ttu-id="22451-104">O Microsoft DirectShow dá suporte a fluxos da Web em cenários de reprodução de arquivos por meio do filtro de [leitor ASF do WM](wm-asf-reader-filter.md) , mas você deve escrever seu próprio filtro do DirectShow para capturar e manter o fluxo.</span><span class="sxs-lookup"><span data-stu-id="22451-104">Microsoft DirectShow supports web streams in file playback scenarios through the [WM ASF Reader](wm-asf-reader-filter.md) filter, but you must write your own DirectShow filter to capture and persist the stream.</span></span>

> [!Note]  
> <span data-ttu-id="22451-105">Para reproduzir fluxos da Web no conteúdo que está sendo transmitido de um servidor que executa os serviços de mídia do Windows, use o controle de® do ActiveX do Windows Media Player 9 Series inserido em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="22451-105">To play back web streams in content that is being streamed from a server running Windows Media Services, use the Windows Media Player 9 Series ActiveX® control embedded in a web page.</span></span>

 

<span data-ttu-id="22451-106">Ao receber um arquivo contendo fluxos do tipo WMMEDIATYPE \_ FileTransfer, o leitor ASF do WM criará um PIN de saída para ele.</span><span class="sxs-lookup"><span data-stu-id="22451-106">When given a file containing streams of type WMMEDIATYPE\_FileTransfer, the WM ASF Reader will create an output pin for it.</span></span> <span data-ttu-id="22451-107">O bloco de formato será uma estrutura de [**\_ \_ formato webstream WMT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) .</span><span class="sxs-lookup"><span data-stu-id="22451-107">The format block will be a [**WMT\_WEBSTREAM\_FORMAT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) structure.</span></span> <span data-ttu-id="22451-108">(Essa estrutura está documentada na documentação do SDK do Windows Media Format.) Se não houver um filtro downstream disponível que possa lidar com esse tipo de mídia, o PIN permanecerá desconectado, mas o arquivo ainda reproduzirá os fluxos de áudio e/ou vídeo.</span><span class="sxs-lookup"><span data-stu-id="22451-108">(This structure is documented in the Windows Media Format SDK documentation.) If no downstream filter is available that can handle that media type, then the pin will remain unconnected, but the file will still play the audio and/or video streams.</span></span>

<span data-ttu-id="22451-109">Cada amostra de mídia em um fluxo da Web contém uma estrutura de [**\_ cabeçalho de \_ exemplo \_ do webstream WMT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) , documentada na documentação do Windows Media Format SDK.</span><span class="sxs-lookup"><span data-stu-id="22451-109">Each media sample in a web stream contains a [**WMT\_WEBSTREAM\_SAMPLE\_HEADER**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) structure, which is documented in the Windows Media Format SDK documentation.</span></span> <span data-ttu-id="22451-110">A estrutura tem um comprimento variável, dependendo do comprimento de seu membro **wszURL** .</span><span class="sxs-lookup"><span data-stu-id="22451-110">The structure has a variable length depending on the length of its **wszURL** member.</span></span> <span data-ttu-id="22451-111">O ponteiro para os dados de exemplo aponta inicialmente para essa estrutura, e você deve avançar o ponteiro após a estrutura para acessar os dados reais no fluxo.</span><span class="sxs-lookup"><span data-stu-id="22451-111">The pointer to the sample data initially points to this structure, and you must advance the pointer past the structure in order to access the actual data in the stream.</span></span>

<span data-ttu-id="22451-112">O filtro do manipulador de fluxo da Web deve ser baseado na classe [**CBaseRenderer**](cbaserenderer.md) .</span><span class="sxs-lookup"><span data-stu-id="22451-112">Your web stream handler filter should be based on the [**CBaseRenderer**](cbaserenderer.md) class.</span></span> <span data-ttu-id="22451-113">No método [**CBaseRenderer::D orendersample**](cbaserenderer-dorendersample.md) , o filtro precisará analisar a estrutura para obter informações sobre o fluxo da Web e, em seguida, executar a ação apropriada.</span><span class="sxs-lookup"><span data-stu-id="22451-113">In the [**CBaseRenderer::DoRenderSample**](cbaserenderer-dorendersample.md) method, the filter will need to parse the structure for information about the web stream, and then perform the appropriate action.</span></span> <span data-ttu-id="22451-114">Normalmente, isso envolverá salvar o arquivo em disco e, em seguida, chamar as funções [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) e [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) ou [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) para colocar os arquivos no cache do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="22451-114">Typically, this will involve saving the file to disk, and then calling the [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) and [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) or [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) functions to place the files into the Internet Explorer cache.</span></span> <span data-ttu-id="22451-115">O filtro deve tratar arquivos com várias partes, ou seja, arquivos que são maiores que um exemplo, e também deve manipular comandos de renderização, que são especificados pelo membro **\_ \_ \_ header. WSAMPLETYPE de exemplo webstream WMT** .</span><span class="sxs-lookup"><span data-stu-id="22451-115">The filter must handle multipart files, that is, files that are larger than one sample, and also must handle render commands, which are specified by the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wSampleType** member.</span></span> <span data-ttu-id="22451-116">O filtro envia um evento de [**\_ \_ evento OLE do EC**](ec-ole-event.md) para o aplicativo, junto com o texto do **cabeçalho de \_ exemplo webstream do WMT \_ \_ .** cadeia de caracteres wszURL que contém o nome do arquivo a ser renderizado.</span><span class="sxs-lookup"><span data-stu-id="22451-116">The filter sends an [**EC\_OLE\_EVENT**](ec-ole-event.md) event to the application, along with the text of the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wszURL** string which contains the name of the file to be rendered.</span></span> <span data-ttu-id="22451-117">O aplicativo faz com que o navegador exiba a página especificada.</span><span class="sxs-lookup"><span data-stu-id="22451-117">The application then causes the browser to display the specified page.</span></span> <span data-ttu-id="22451-118">Se o fluxo da Web tiver sido criado corretamente, o arquivo já deverá estar no cache.</span><span class="sxs-lookup"><span data-stu-id="22451-118">If the web stream has been authored correctly, the file should already be in the cache.</span></span>

<span data-ttu-id="22451-119">Para obter mais informações sobre \_ o formato WEBstream do WMT \_ e \_ \_ \_ o cabeçalho de exemplo webstream do WMT, consulte a documentação do SDK do Windows Media Format.</span><span class="sxs-lookup"><span data-stu-id="22451-119">For more information on WMT\_WEBSTREAM\_FORMAT and WMT\_WEBSTREAM\_SAMPLE\_HEADER, see the Windows Media Format SDK documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="22451-120">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="22451-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="22451-121">Lendo arquivos ASF no DirectShow</span><span class="sxs-lookup"><span data-stu-id="22451-121">Reading ASF Files in DirectShow</span></span>](reading-asf-files-in-directshow.md)
</dt> </dl>

 

 
