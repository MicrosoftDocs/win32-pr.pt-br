---
description: Fluxo de dados no navegador de DVD
ms.assetid: 14f9cfa3-5ef6-419c-9196-2e4060549c03
title: Fluxo de dados no navegador de DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29a981d2d7b528163abb53478e9e8f2ab88d46c0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103646131"
---
# <a name="data-flow-in-the-dvd-navigator"></a><span data-ttu-id="7794a-103">Fluxo de dados no navegador de DVD</span><span class="sxs-lookup"><span data-stu-id="7794a-103">Data Flow in the DVD Navigator</span></span>

<span data-ttu-id="7794a-104">O navegador de DVD tem métodos para parar e pausar a reprodução.</span><span class="sxs-lookup"><span data-stu-id="7794a-104">The DVD Navigator has methods to stop and pause playback.</span></span> <span data-ttu-id="7794a-105">Esses métodos são semelhantes, mas não idênticos, aos métodos **Stop** e **Pause** em [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span><span class="sxs-lookup"><span data-stu-id="7794a-105">These methods are similar — but not identical — to the **Stop** and **Pause** methods in [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span></span> <span data-ttu-id="7794a-106">Aqui está a diferença entre eles:</span><span class="sxs-lookup"><span data-stu-id="7794a-106">Here is the difference between them:</span></span>

-   <span data-ttu-id="7794a-107">Os métodos **IDvdControl2** alteram o que o navegador de DVD lê do disco.</span><span class="sxs-lookup"><span data-stu-id="7794a-107">The **IDvdControl2** methods change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="7794a-108">Eles não alteram o estado do grafo.</span><span class="sxs-lookup"><span data-stu-id="7794a-108">They do not change the state of the graph.</span></span>
-   <span data-ttu-id="7794a-109">Os métodos **IMediaControl** alteram o estado do grafo.</span><span class="sxs-lookup"><span data-stu-id="7794a-109">The **IMediaControl** methods change the state of the graph.</span></span> <span data-ttu-id="7794a-110">Eles não alteram o que o navegador de DVD lê do disco.</span><span class="sxs-lookup"><span data-stu-id="7794a-110">They do not change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="7794a-111">(Há uma exceção importante, explicada na próxima seção, relacionada ao método **Stop** ).</span><span class="sxs-lookup"><span data-stu-id="7794a-111">(There is one important exception, explained in the next section, related to the **Stop** method.)</span></span>

<span data-ttu-id="7794a-112">Por exemplo, [**IDvdControl2::P método ause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) emite o comando anexo J "Pausar \_ ", mas não pausa o gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="7794a-112">For example, [**IDvdControl2::Pause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) method issues the Annex J "Pause\_On" command, but does not pause the filter graph.</span></span> <span data-ttu-id="7794a-113">O método [**IMediaControl::P ause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) , por outro lado, pausa o grafo, mas não emite nenhum comando de DVD.</span><span class="sxs-lookup"><span data-stu-id="7794a-113">The [**IMediaControl::Pause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) method, on the other hand, pauses the graph but does not issue any DVD command.</span></span>

<span data-ttu-id="7794a-114">Em geral, use os métodos **IMediaControl::P ause** e **Stop** em vez dos métodos **IDvdControl2** correspondentes.</span><span class="sxs-lookup"><span data-stu-id="7794a-114">In general, use the **IMediaControl::Pause** and **Stop** methods instead of the corresponding **IDvdControl2** methods.</span></span> <span data-ttu-id="7794a-115">Os métodos **IMediaControl** têm latências muito pequenas, enquanto os métodos **IDvdControl2** podem ter até dois segundos de latência.</span><span class="sxs-lookup"><span data-stu-id="7794a-115">The **IMediaControl** methods have very small latencies, whereas the **IDvdControl2** methods can have up to two seconds of latency.</span></span>

<span data-ttu-id="7794a-116">Parando a reprodução</span><span class="sxs-lookup"><span data-stu-id="7794a-116">Stopping Playback</span></span>

<span data-ttu-id="7794a-117">O comportamento de [**IMediaControl:: Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) depende de um sinalizador que você pode definir com o método [**IDvdControl2:: SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) .</span><span class="sxs-lookup"><span data-stu-id="7794a-117">The behavior of [**IMediaControl::Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) depends on a flag that you can set with the [**IDvdControl2::SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) method.</span></span>

-   <span data-ttu-id="7794a-118">Se o \_ sinalizador ResetOnStop de DVD for **false**, **IMediaControl:: Stop** interromperá o grafo, mas não alterará o domínio do navegador de DVD.</span><span class="sxs-lookup"><span data-stu-id="7794a-118">If the DVD\_ResetOnStop flag is **FALSE**, **IMediaControl::Stop** stops the graph, but does not change the DVD Navigator's domain.</span></span> <span data-ttu-id="7794a-119">Quando você chamar executar novamente, a reprodução será retomada da posição atual.</span><span class="sxs-lookup"><span data-stu-id="7794a-119">When you call run again, playback resumes from the current position.</span></span>
-   <span data-ttu-id="7794a-120">Se \_ o DVD ResetOnStop for **true**, **IMediaControl:: Stop** fará com que o navegador de DVD seja redefinido.</span><span class="sxs-lookup"><span data-stu-id="7794a-120">If DVD\_ResetOnStop is **TRUE**, **IMediaControl::Stop** causes the DVD Navigator to reset.</span></span> <span data-ttu-id="7794a-121">Quando você chama [**IMediaControl:: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) novamente, o navegador de DVD é reproduzido do primeiro domínio de reprodução, como se você estivesse inserindo o DVD pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="7794a-121">When you call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) again, the DVD Navigator plays from the First Play domain, as if you were inserting the DVD for the first time.</span></span>

<span data-ttu-id="7794a-122">O \_ sinalizador DVD ResetOnStop é **true** por padrão, para compatibilidade com aplicativos mais antigos.</span><span class="sxs-lookup"><span data-stu-id="7794a-122">The DVD\_ResetOnStop flag is **TRUE** by default, for compatibility with older applications.</span></span> <span data-ttu-id="7794a-123">No entanto, em geral, você deve substituir o padrão e definir o sinalizador como **false**.</span><span class="sxs-lookup"><span data-stu-id="7794a-123">Generally, however, you should override the default and set the flag to **FALSE**.</span></span> <span data-ttu-id="7794a-124">O motivo é que determinados eventos podem fazer com que o grafo pare durante a reprodução.</span><span class="sxs-lookup"><span data-stu-id="7794a-124">The reason is that certain events can cause the graph to stop during playback.</span></span> <span data-ttu-id="7794a-125">Por exemplo, se a resolução de vídeo for alterada, o gráfico de filtro será interrompido, reconectará o processador de vídeo e reiniciará.</span><span class="sxs-lookup"><span data-stu-id="7794a-125">For example, if the display resolution changes, the filter graph stops, reconnects the video renderer, and restarts.</span></span> <span data-ttu-id="7794a-126">Se o DVD \_ ResetOnStop for **true**, a reprodução será reiniciada a partir do início do disco. Isso provavelmente não é o que o usuário espera.</span><span class="sxs-lookup"><span data-stu-id="7794a-126">If DVD\_ResetOnStop is **TRUE**, playback will restart from the beginning of the disc. That is probably not what the user expects.</span></span>

<span data-ttu-id="7794a-127">No início do seu aplicativo, portanto, chame **SetOption** com o DVD \_ ResetOnStop definido como **false**.</span><span class="sxs-lookup"><span data-stu-id="7794a-127">At the beginning of your application, therefore, call **SetOption** with DVD\_ResetOnStop set to **FALSE**.</span></span> <span data-ttu-id="7794a-128">Se você quiser parar a reprodução e retomá-la do mesmo local, chame **IMediaControl:: Stop** ou **IMediaControl::P ause**.</span><span class="sxs-lookup"><span data-stu-id="7794a-128">If you want to stop playback and have it resume from the same location, call **IMediaControl::Stop** or **IMediaControl::Pause**.</span></span> <span data-ttu-id="7794a-129">Se você quiser parar a reprodução e redefinir o disco, chame **SetOption** com DVD \_ ResetOnStop igual a **true**; em seguida, chame **IMediaControl:: Stop**; finalmente, chame **SetOption** novamente e redefina o DVD \_ ResetOnStop como **false**.</span><span class="sxs-lookup"><span data-stu-id="7794a-129">If you want to stop playback and reset the disk, call **SetOption** with DVD\_ResetOnStop equal to **TRUE**; then call **IMediaControl::Stop**; finally, call **SetOption** again and reset DVD\_ResetOnStop to **FALSE**.</span></span>

<span data-ttu-id="7794a-130">Pausando reprodução</span><span class="sxs-lookup"><span data-stu-id="7794a-130">Pausing Playback</span></span>

<span data-ttu-id="7794a-131">Se você der ao navegador de DVD um comando enquanto o grafo estiver em pausa, o comando poderá não ser concluído até que o grafo seja executado novamente.</span><span class="sxs-lookup"><span data-stu-id="7794a-131">If you give the DVD Navigator a command while the graph is paused, the command may not complete until the graph runs again.</span></span> <span data-ttu-id="7794a-132">Em algumas situações, isso pode causar um deadlock em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7794a-132">In some situations, this can cause a deadlock in your application.</span></span> <span data-ttu-id="7794a-133">Há duas regras que você deve seguir para evitar deadlocks:</span><span class="sxs-lookup"><span data-stu-id="7794a-133">There are two rules you should follow to avoid deadlocks:</span></span>

-   <span data-ttu-id="7794a-134">Enquanto estiver em pausa, não emita mais de um comando de DVD assíncrono.</span><span class="sxs-lookup"><span data-stu-id="7794a-134">While paused, do not issue more than one asynchronous DVD command.</span></span>
-   <span data-ttu-id="7794a-135">Enquanto estiver em pausa, não bloqueie o thread da interface do usuário do aplicativo ou o thread que altera o estado do grafo.</span><span class="sxs-lookup"><span data-stu-id="7794a-135">While paused, do not block the application's UI thread or the thread that changes the state of the graph.</span></span>

<span data-ttu-id="7794a-136">A segunda regra vale a pena examinar mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="7794a-136">The second rule is worth examining in more detail.</span></span> <span data-ttu-id="7794a-137">Aqui estão alguns cenários específicos que podem causar um deadlock:</span><span class="sxs-lookup"><span data-stu-id="7794a-137">Here are some specific scenarios that may cause a deadlock:</span></span>

-   <span data-ttu-id="7794a-138">**Cenário**: enquanto está em pausa, o aplicativo emite um comando de DVD com o sinalizador de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="7794a-138">**Scenario**: While paused, the application issues a DVD command with the blocking flag.</span></span> <span data-ttu-id="7794a-139">Isso pode causar um deadlock se o thread que emite o comando de DVD for o mesmo thread que emite o comando de execução.</span><span class="sxs-lookup"><span data-stu-id="7794a-139">This can cause a deadlock if the thread that issues the DVD command is the same thread that issues the run command.</span></span> <span data-ttu-id="7794a-140">O comando de DVD é bloqueado até que o grafo seja executado, mas o grafo não pode ser executado até que o comando seja concluído.</span><span class="sxs-lookup"><span data-stu-id="7794a-140">The DVD command blocks until the graph runs, but the graph cannot run until the command completes.</span></span>

    <span data-ttu-id="7794a-141">**Recomendação**: emita o comando DVD em um thread de trabalho separado ou não use o sinalizador de bloqueio.</span><span class="sxs-lookup"><span data-stu-id="7794a-141">**Recommendation**: Issue the DVD command on a separate worker thread, or don't use the blocking flag.</span></span>

-   <span data-ttu-id="7794a-142">**Cenário**: enquanto está em pausa, o aplicativo emite um comando de DVD e, em seguida, chama [**IDvdCmd:: WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) no objeto Command.</span><span class="sxs-lookup"><span data-stu-id="7794a-142">**Scenario**: While paused, the application issues a DVD command, then calls [**IDvdCmd::WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) on the command object.</span></span> <span data-ttu-id="7794a-143">Essa situação é equivalente ao exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="7794a-143">This situation is equivalent to the previous example.</span></span> <span data-ttu-id="7794a-144">Se você chamar **Wait** no thread da interface do usuário, o thread da interface do usuário não poderá executar o grafo até que o método **Wait** desbloqueie, mas o método **Wait** não será desbloqueado até que o grafo seja executado.</span><span class="sxs-lookup"><span data-stu-id="7794a-144">If you call **Wait** from the UI thread, the UI thread cannot run the graph until the **Wait** method unblocks, but the **Wait** method will not unblock until the graph runs.</span></span>

    <span data-ttu-id="7794a-145">**Recomendação**: chamada **Wait** em um thread de trabalho.</span><span class="sxs-lookup"><span data-stu-id="7794a-145">**Recommendation**: Call **Wait** on a worker thread.</span></span>

-   <span data-ttu-id="7794a-146">**Cenário**: enquanto o grafo está em execução, o aplicativo emite um comando de DVD com o sinalizador de bloqueio e, em seguida, chama a pausa de outro thread.</span><span class="sxs-lookup"><span data-stu-id="7794a-146">**Scenario**: While the graph is running, the application issues a DVD command with the blocking flag, and then calls pause from another thread.</span></span> <span data-ttu-id="7794a-147">Essa é uma possível condição de corrida porque o grafo pode pausar antes de o comando ser emitido.</span><span class="sxs-lookup"><span data-stu-id="7794a-147">This is a possible race condition because the graph may pause before the command is issued.</span></span> <span data-ttu-id="7794a-148">Se um dos dois threads for o thread da interface do usuário, você poderá causar um deadlock semelhante aos dois exemplos anteriores.</span><span class="sxs-lookup"><span data-stu-id="7794a-148">If one of the two threads is the UI thread, you may cause a deadlock similar to the previous two examples.</span></span> <span data-ttu-id="7794a-149">Este exemplo ilustra a importância de escrever código de thread-safe se seu aplicativo usar vários threads.</span><span class="sxs-lookup"><span data-stu-id="7794a-149">This example illustrates the importance of writing thread-safe code if your application uses multiple threads.</span></span>

    <span data-ttu-id="7794a-150">**Recomendação**: se você usar threads de trabalho, verifique se seu código é thread-safe.</span><span class="sxs-lookup"><span data-stu-id="7794a-150">**Recommendation**: If you use worker threads, make sure your code is thread-safe.</span></span>

-   <span data-ttu-id="7794a-151">**Cenário**: enquanto estiver em pausa, o aplicativo desabilitará o comando executar da interface do usuário e emitirá um comando DVD assíncrono.</span><span class="sxs-lookup"><span data-stu-id="7794a-151">**Scenario**: While paused, the application disables the run command from the UI, and then issues an asynchronous DVD command.</span></span> <span data-ttu-id="7794a-152">Esse caso não é estritamente um deadlock, porque o thread do aplicativo ainda está em execução.</span><span class="sxs-lookup"><span data-stu-id="7794a-152">This case is not strictly a deadlock, because the application thread is still running.</span></span> <span data-ttu-id="7794a-153">No entanto, o usuário agora é impedido de executar o grafo e, portanto, o comando nunca será concluído.</span><span class="sxs-lookup"><span data-stu-id="7794a-153">However, the user is now prevented from running the graph, and therefore the command will never complete.</span></span>

    <span data-ttu-id="7794a-154">**Recomendação**: ao pausar, sempre deixe o comando executar habilitado.</span><span class="sxs-lookup"><span data-stu-id="7794a-154">**Recommendation**: When pausing, always leave the run command enabled.</span></span>

<span data-ttu-id="7794a-155">Procurando um DVD em um horário especificado</span><span class="sxs-lookup"><span data-stu-id="7794a-155">Seeking a DVD to a Specified Time</span></span>

<span data-ttu-id="7794a-156">Para buscar com precisão um horário especificado em um disco, chame [**IMediaControl:: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span><span class="sxs-lookup"><span data-stu-id="7794a-156">To accurately seek to a specified time on a disc, call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span></span> <span data-ttu-id="7794a-157">Em seguida, chame [**IDvdControl2::P layattime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), especificando a hora e a configuração de *dwFlags* para o sinalizador de cmd de DVD \_ \_ \_ flush.</span><span class="sxs-lookup"><span data-stu-id="7794a-157">Then call [**IDvdControl2::PlayAtTime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), specifying the time and setting *dwFlags* to DVD\_CMD\_FLAG\_Flush.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7794a-158">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7794a-158">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7794a-159">Aplicativos de DVD</span><span class="sxs-lookup"><span data-stu-id="7794a-159">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 



