---
description: Fixar conexões
ms.assetid: 1406ade4-77d8-49a7-8f36-cc49ff007a26
title: Fixar conexões
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b509abddf4a915b65dfd322f76b4afb132a7f835
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104370144"
---
# <a name="pin-connections"></a><span data-ttu-id="6c6d8-103">Fixar conexões</span><span class="sxs-lookup"><span data-stu-id="6c6d8-103">Pin Connections</span></span>

<span data-ttu-id="6c6d8-104">Os filtros se conectam a seus Pins, por meio da interface [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) .</span><span class="sxs-lookup"><span data-stu-id="6c6d8-104">Filters connect at their pins, through the [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) interface.</span></span> <span data-ttu-id="6c6d8-105">Os Pins de saída se conectam aos pins de entrada.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-105">Output pins connect to input pins.</span></span> <span data-ttu-id="6c6d8-106">Cada conexão de PIN tem um tipo de mídia, descrito pela estrutura do [**\_ \_ tipo de mídia am**](/windows/win32/api/strmif/ns-strmif-am_media_type) .</span><span class="sxs-lookup"><span data-stu-id="6c6d8-106">Each pin connection has a media type, described by the [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structure.</span></span>

<span data-ttu-id="6c6d8-107">Um aplicativo conecta filtros chamando métodos no Gerenciador do grafo de filtro, nunca chamando métodos nos filtros ou Pins.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-107">An application connects filters by calling methods on the Filter Graph Manager, never by calling methods on the filters or pins themselves.</span></span> <span data-ttu-id="6c6d8-108">O aplicativo pode especificar diretamente quais filtros se conectar, chamando o método [**IFilterGraph:: ConnectDirect**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-connectdirect) ou [**IGraphBuilder:: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) ; ou pode conectar filtros indiretamente, usando um método de criação de grafo, como [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span><span class="sxs-lookup"><span data-stu-id="6c6d8-108">The application can directly specify which filters to connect, by calling the [**IFilterGraph::ConnectDirect**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-connectdirect) or [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) method; or it can connect filters indirectly, using a graph-building method such as [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile).</span></span>

<span data-ttu-id="6c6d8-109">Para que a conexão seja realizada com sucesso, ambos os filtros devem estar no grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-109">For the connection to succeed, both filters must be in the filter graph.</span></span> <span data-ttu-id="6c6d8-110">O aplicativo pode adicionar um filtro ao grafo chamando o método [**IFilterGraph:: AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) .</span><span class="sxs-lookup"><span data-stu-id="6c6d8-110">The application can add a filter to the graph by calling the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="6c6d8-111">O Gerenciador de gráfico de filtro também pode adicionar filtros ao grafo.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-111">The Filter Graph Manager may add filters to the graph, as well.</span></span> <span data-ttu-id="6c6d8-112">Quando um filtro é adicionado, o Gerenciador de gráfico de filtro chama o método [**IBaseFilter:: JoinFilterGraph**](/windows/desktop/api/Strmif/nf-strmif-ibasefilter-joinfiltergraph) do filtro para notificar o filtro.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-112">When a filter is added, the Filter Graph Manager calls the filter's [**IBaseFilter::JoinFilterGraph**](/windows/desktop/api/Strmif/nf-strmif-ibasefilter-joinfiltergraph) method to notify the filter.</span></span>

<span data-ttu-id="6c6d8-113">O contorno geral do processo de conexão é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="6c6d8-113">The general outline of the connection process is the following:</span></span>

1.  <span data-ttu-id="6c6d8-114">O Gerenciador do grafo de filtro chama [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) no pino de saída, passando um ponteiro para o pino de entrada.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-114">The Filter Graph Manager calls [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) on the output pin, passing a pointer to the input pin.</span></span>
2.  <span data-ttu-id="6c6d8-115">Se o pino de saída aceitar a conexão, ele chamará [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) no pino de entrada.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-115">If the output pin accepts the connection, it calls [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) on the input pin.</span></span>
3.  <span data-ttu-id="6c6d8-116">Se o PIN de entrada também aceitar a conexão, a tentativa de conexão será realizada com sucesso e os Pins serão conectados.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-116">If the input pin also accepts the connection, the connection attempt succeeds and the pins are connected.</span></span>

<span data-ttu-id="6c6d8-117">Alguns Pins podem ser desconectados e reconectados enquanto o filtro está ativo.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-117">Some pins can be disconnected and reconnected while the filter is active.</span></span> <span data-ttu-id="6c6d8-118">Esse tipo de reconexão é chamado de reconexão *dinâmica* .</span><span class="sxs-lookup"><span data-stu-id="6c6d8-118">This type of reconnection is called a *dynamic* reconnection.</span></span> <span data-ttu-id="6c6d8-119">Para obter mais informações, consulte [criação de grafo dinâmico](dynamic-graph-building.md).</span><span class="sxs-lookup"><span data-stu-id="6c6d8-119">For more information, see [Dynamic Graph Building](dynamic-graph-building.md).</span></span> <span data-ttu-id="6c6d8-120">No entanto, a maioria dos filtros não oferece suporte à reconexão dinâmica.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-120">However, most filters do not support dynamic reconnection.</span></span>

<span data-ttu-id="6c6d8-121">Os filtros geralmente são conectados em ordem downstream — em outras palavras, os Pins de entrada do filtro são conectados antes de seus PINs de saída.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-121">Filters are usually connected in downstream order—in other words, the filter's input pins are connected before its output pins.</span></span> <span data-ttu-id="6c6d8-122">Um filtro sempre deve dar suporte a essa ordem de conexão.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-122">A filter should always support this order of connection.</span></span> <span data-ttu-id="6c6d8-123">Alguns filtros também dão suporte a conexões na ordem oposta — Pins de saída primeiro, seguidos por Pins de entrada.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-123">Some filters also support connections in the opposite order—output pins first, followed by input pins.</span></span> <span data-ttu-id="6c6d8-124">Por exemplo, pode ser possível conectar o pino de saída de um filtro MUX ao filtro de gravador de arquivo, antes de conectar os Pins de entrada do filtro MUX.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-124">For example, it might be possible to connect a MUX filter's output pin to the file-writer filter, before connecting the MUX filter's input pins.</span></span>

<span data-ttu-id="6c6d8-125">Quando o método **Connect** ou **ReceiveConnection** de um PIN é chamado, o PIN deve verificar se ele pode dar suporte à conexão.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-125">When a pin's **Connect** or **ReceiveConnection** method is called, the pin must verify that it can support the connection.</span></span> <span data-ttu-id="6c6d8-126">Os detalhes dependem do filtro específico.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-126">The details depend on the particular filter.</span></span> <span data-ttu-id="6c6d8-127">As tarefas mais comuns incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="6c6d8-127">The most common tasks include the following:</span></span>

-   <span data-ttu-id="6c6d8-128">Verifique se o tipo de mídia é aceitável</span><span class="sxs-lookup"><span data-stu-id="6c6d8-128">Check that the media type is acceptable</span></span>
-   <span data-ttu-id="6c6d8-129">Negociar um alocador</span><span class="sxs-lookup"><span data-stu-id="6c6d8-129">Negotiate an allocator</span></span>
-   <span data-ttu-id="6c6d8-130">Consulte o outro PIN para obter as interfaces necessárias.</span><span class="sxs-lookup"><span data-stu-id="6c6d8-130">Query the other pin for required interfaces.</span></span>

 

 



