---
description: Reconectando Pins
ms.assetid: 34b3e4de-e4eb-48c5-aaef-fc99b63e8691
title: Reconectando Pins
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9fc71b4d5a62ee066edaa5f97b4cc3332b2231d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104500367"
---
# <a name="reconnecting-pins"></a><span data-ttu-id="f2d9d-103">Reconectando Pins</span><span class="sxs-lookup"><span data-stu-id="f2d9d-103">Reconnecting Pins</span></span>

<span data-ttu-id="f2d9d-104">Durante uma conexão de PIN, um filtro pode desconectar e reconectar um de seus outros Pins, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="f2d9d-104">During a pin connection, a filter can disconnect and reconnect one of its other pins, as follows:</span></span>

1.  <span data-ttu-id="f2d9d-105">O filtro chama [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) no PIN do outro filtro e especifica o novo tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-105">The filter calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) on the other filter's pin, and specifies the new media type.</span></span>
2.  <span data-ttu-id="f2d9d-106">Se **QueryAccept** retornar S \_ OK, o filtro chamará [**IFilterGraph2:: ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) para reconectar os Pins.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-106">If **QueryAccept** returns S\_OK, the filter calls [**IFilterGraph2::ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) to reconnect the pins.</span></span>

<span data-ttu-id="f2d9d-107">Veja a seguir alguns exemplos de quando um filtro pode precisar reconectar Pins:</span><span class="sxs-lookup"><span data-stu-id="f2d9d-107">The following are some examples of when a filter might need to reconnect pins:</span></span>

-   <span data-ttu-id="f2d9d-108">**Filtros de t.**</span><span class="sxs-lookup"><span data-stu-id="f2d9d-108">**Tee filters.**</span></span> <span data-ttu-id="f2d9d-109">Um *filtro de t* divide um fluxo de entrada em várias saídas sem alterar os dados no fluxo.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-109">A *tee filter* splits an input stream into multiple outputs without changing the data in the stream.</span></span> <span data-ttu-id="f2d9d-110">Um filtro de "t" pode aceitar um intervalo de tipos de mídia, mas os tipos devem corresponder em todas as conexões de PIN.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-110">A tee filter can accept a range of media types, but the types must match across all pin connections.</span></span> <span data-ttu-id="f2d9d-111">Portanto, quando o PIN de entrada se conecta, o filtro pode precisar renegociar todas as conexões existentes nos Pins de saída e vice-versa.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-111">Therefore, when the input pin connects, the filter might need to renegotiate any existing connections on the output pins, and vice versa.</span></span> <span data-ttu-id="f2d9d-112">Para obter um exemplo, consulte o [exemplo de filtro InfTee](inftee-filter-sample.md).</span><span class="sxs-lookup"><span data-stu-id="f2d9d-112">For an example, see the [InfTee Filter Sample](inftee-filter-sample.md).</span></span>
-   <span data-ttu-id="f2d9d-113">**Filtros de trans-in-Place.**</span><span class="sxs-lookup"><span data-stu-id="f2d9d-113">**Trans-in-place filters.**</span></span> <span data-ttu-id="f2d9d-114">Um filtro de *Trans-in-Place* modifica os dados de entrada no buffer original em vez de copiar os dados para um buffer de saída separado.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-114">A *trans-in-place* filter modifies the input data in the original buffer instead of copying the data to a separate output buffer.</span></span> <span data-ttu-id="f2d9d-115">Um filtro de trans-in-Place deve usar o mesmo alocador para as conexões upstream e downstream.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-115">A trans-in-place filter must use the same allocator for both the upstream and the downstream connections.</span></span> <span data-ttu-id="f2d9d-116">O primeiro PIN a ser conectado (entrada ou saída) negocia um alocador da maneira usual.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-116">The first pin to connect (input or output) negotiates an allocator in the usual way.</span></span> <span data-ttu-id="f2d9d-117">No entanto, quando o outro PIN se conecta, o primeiro alocador pode não ser aceitável.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-117">When the other pin connects, however, the first allocator might not be acceptable.</span></span> <span data-ttu-id="f2d9d-118">Nesse caso, o segundo PIN escolhe um alocador diferente e o primeiro PIN se reconecta usando o novo alocador.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-118">In that case, the second pin chooses a different allocator, and the first pin reconnects using the new allocator.</span></span> <span data-ttu-id="f2d9d-119">Para obter um exemplo de implementação, consulte a classe [**CTransInPlaceFilter**](ctransinplacefilter.md) .</span><span class="sxs-lookup"><span data-stu-id="f2d9d-119">For an example implementation, see the [**CTransInPlaceFilter**](ctransinplacefilter.md) class.</span></span>

<span data-ttu-id="f2d9d-120">No método **ReconnectEx** , o Gerenciador de gráfico de filtro desconecta-se de forma assíncrona e reconecta os Pins.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-120">In the **ReconnectEx** method, the Filter Graph Manager asynchronously disconnects and reconnects the pins.</span></span> <span data-ttu-id="f2d9d-121">O filtro não deve tentar a reconexão, a menos que **QueryAccept** retorne S \_ OK.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-121">The filter must not attempt the reconnection unless **QueryAccept** returns S\_OK.</span></span> <span data-ttu-id="f2d9d-122">Caso contrário, o PIN será deixado desconectado, causando erros de grafo.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-122">Otherwise, the pin will be left disconnected, causing graph errors.</span></span> <span data-ttu-id="f2d9d-123">Além disso, o filtro deve solicitar a reconexão de dentro do método [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) , no mesmo thread.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-123">Also, the filter should request the reconnection from inside the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) method, on the same thread.</span></span> <span data-ttu-id="f2d9d-124">Se o método **Connect** retornar em um thread, enquanto outro thread fizer a solicitação de reconexão, o Gerenciador do grafo de filtro poderá executar o grafo antes que ele faça a reconexão, causando erros de grafo.</span><span class="sxs-lookup"><span data-stu-id="f2d9d-124">If the **Connect** method returns on one thread, while another thread makes the reconnection request, the Filter Graph Manager might run the graph before it makes the reconnection, causing graph errors.</span></span>

 

 



