---
description: Trabalhando com destinos de renderização do Direct3D
ms.assetid: 271b919c-421b-4484-8e60-afbf3cbdca44
title: Trabalhando com destinos de renderização do Direct3D
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8aca19082c5db9521cfc1c7341fd74c98270cbc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105783315"
---
# <a name="working-with-direct3d-render-targets"></a><span data-ttu-id="2c84e-103">Trabalhando com destinos de renderização do Direct3D</span><span class="sxs-lookup"><span data-stu-id="2c84e-103">Working with Direct3D Render Targets</span></span>

<span data-ttu-id="2c84e-104">Vários subtipos de mídia para destinos de renderização do Direct3D são definidos para uso com o VMR-7 e o VMR-9.</span><span class="sxs-lookup"><span data-stu-id="2c84e-104">Several media subtypes for Direct3D render targets are defined for use with the VMR-7 and the VMR-9.</span></span> <span data-ttu-id="2c84e-105">Quando um filtro upstream propõe uma conexão com um desses subtipos, ele indica ao VMR que a renderização deve ser executada em um destino de renderização do Direct3D.</span><span class="sxs-lookup"><span data-stu-id="2c84e-105">When an upstream filter proposes a connection with one of these subtypes, it indicates to the VMR that the rendering is to be performed on a Direct3D render target.</span></span> <span data-ttu-id="2c84e-106">Para o VMR-7, esse será um destino de renderização do Direct3D do DirectX 7 e para o VMR-9, este será um destino de renderização do Direct3D do DirectX 9.</span><span class="sxs-lookup"><span data-stu-id="2c84e-106">For VMR-7, this will be a DirectX 7 Direct3D render target, and for VMR-9 this will be a DirectX 9 Direct3D render target.</span></span> <span data-ttu-id="2c84e-107">Se o VMR estiver no modo de mistura, a superfície também será uma superfície de textura de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="2c84e-107">If the VMR is in mixing mode, the surface will also be a Direct3D texture surface.</span></span> <span data-ttu-id="2c84e-108">Se o VMR não estiver no modo de mistura, a superfície será uma superfície do Direct3D normal.</span><span class="sxs-lookup"><span data-stu-id="2c84e-108">If the VMR is not in mixing mode, the surface will be a regular Direct3D surface.</span></span> <span data-ttu-id="2c84e-109">Os formatos de pixel ARGB só têm suporte quando o VMR está no modo de mistura.</span><span class="sxs-lookup"><span data-stu-id="2c84e-109">The ARGB pixel formats are only supported when the VMR is in mixing mode.</span></span> <span data-ttu-id="2c84e-110">Os subtipos de destino de renderização são:</span><span class="sxs-lookup"><span data-stu-id="2c84e-110">The render target subtypes are:</span></span>



| <span data-ttu-id="2c84e-111">VMR-7</span><span class="sxs-lookup"><span data-stu-id="2c84e-111">VMR-7</span></span>                                | <span data-ttu-id="2c84e-112">VMR-9</span><span class="sxs-lookup"><span data-stu-id="2c84e-112">VMR-9</span></span>                                |
|--------------------------------------|--------------------------------------|
| <span data-ttu-id="2c84e-113">MEDIASUBTYPE \_ RGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-113">MEDIASUBTYPE\_RGB32\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="2c84e-114">MEDIASUBTYPE \_ RGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-114">MEDIASUBTYPE\_RGB32\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="2c84e-115">MEDIASUBTYPE \_ RGB16 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-115">MEDIASUBTYPE\_RGB16\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="2c84e-116">MEDIASUBTYPE \_ RGB16 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-116">MEDIASUBTYPE\_RGB16\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="2c84e-117">MEDIASUBTYPE \_ ARGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-117">MEDIASUBTYPE\_ARGB32\_D3D\_DX7\_RT</span></span>   | <span data-ttu-id="2c84e-118">MEDIASUBTYPE \_ ARGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-118">MEDIASUBTYPE\_ARGB32\_D3D\_DX9\_RT</span></span>   |
| <span data-ttu-id="2c84e-119">MEDIASUBTYPE \_ ARGB4444 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-119">MEDIASUBTYPE\_ARGB4444\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="2c84e-120">MEDIASUBTYPE \_ ARGB4444 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-120">MEDIASUBTYPE\_ARGB4444\_D3D\_DX9\_RT</span></span> |
| <span data-ttu-id="2c84e-121">MEDIASUBTYPE \_ ARGB1555 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-121">MEDIASUBTYPE\_ARGB1555\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="2c84e-122">MEDIASUBTYPE \_ ARGB1555 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="2c84e-122">MEDIASUBTYPE\_ARGB1555\_D3D\_DX9\_RT</span></span> |



 

<span data-ttu-id="2c84e-123">Esses tipos são definidos no arquivo de cabeçalho UUIDs. h.</span><span class="sxs-lookup"><span data-stu-id="2c84e-123">These types are defined in the header file uuids.h.</span></span> <span data-ttu-id="2c84e-124">Os \_ tipos de mídia MEDIASUBTYPE RGB32 são um formato RGBx888 e os \_ tipos de mídia MEDIASUBTYPE RGB16 são um formato RGB565.</span><span class="sxs-lookup"><span data-stu-id="2c84e-124">The MEDIASUBTYPE\_RGB32 media types are an RGBx888 format and MEDIASUBTYPE\_RGB16 media types are an RGB565 format.</span></span> <span data-ttu-id="2c84e-125">Para obter mais informações sobre esses formatos de pixel, consulte a documentação de gráficos do DirectX.</span><span class="sxs-lookup"><span data-stu-id="2c84e-125">For more information on these pixel formats, see the DirectX Graphics documentation.</span></span>

<span data-ttu-id="2c84e-126">**Solicitando uma superfície desbloqueada**</span><span class="sxs-lookup"><span data-stu-id="2c84e-126">**Requesting an Unlocked Surface**</span></span>

<span data-ttu-id="2c84e-127">O bloqueio e o desbloqueio das superfícies do DirectDraw são operações de custo computacional.</span><span class="sxs-lookup"><span data-stu-id="2c84e-127">Locking and unlocking DirectDraw surfaces are computationally expensive operations.</span></span> <span data-ttu-id="2c84e-128">Ao usar os subtipos de mídia de destino do Direct3D render, o filtro upstream precisa que as superfícies sejam desbloqueadas para que possam operar com o hardware de gráficos.</span><span class="sxs-lookup"><span data-stu-id="2c84e-128">When using the Direct3D render target media subtypes, the upstream filter needs the surfaces to be unlocked so that it can operate on them with the graphics hardware.</span></span> <span data-ttu-id="2c84e-129">Para evitar uma operação desbloqueada de bloqueio desnecessário, o VMR dá suporte a um novo sinalizador no método [**IMemAllocator:: GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) , \_ gbf \_ NODDSURFACELOCK, que instrui o VMR a não bloquear a superfície do DirectDraw antes de passar um exemplo para o filtro upstream.</span><span class="sxs-lookup"><span data-stu-id="2c84e-129">To avoid an unnecessary locking-unlocking operation, the VMR supports a new flag on the [**IMemAllocator::GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) method, AM\_GBF\_NODDSURFACELOCK, that instructs the VMR not to lock the DirectDraw surface before passing a sample to the upstream filter.</span></span> <span data-ttu-id="2c84e-130">Quando esse sinalizador é usado, as chamadas para [**IMediaSample:: Getpointr**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) falharão porque não há nenhum ponteiro bloqueado.</span><span class="sxs-lookup"><span data-stu-id="2c84e-130">When this flag is used, calls to [**IMediaSample::GetPointer**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) will fail because there is no locked pointer.</span></span> <span data-ttu-id="2c84e-131">Para obter acesso à superfície do DirectDraw, o filtro deve chamar **QueryInterface** no objeto [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) retornado e solicitar a interface [**IVMRSurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) .</span><span class="sxs-lookup"><span data-stu-id="2c84e-131">To obtain access to the DirectDraw surface, the filter must call **QueryInterface** on the returned [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) object and request the [**IVMRSurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) interface.</span></span> <span data-ttu-id="2c84e-132">Obviamente, o filtro upstream deve garantir que a superfície não esteja bloqueada quando libera o exemplo de volta para a lista gratuita.</span><span class="sxs-lookup"><span data-stu-id="2c84e-132">Obviously, the upstream filter must ensure that the surface is not locked when it releases the sample back to the free list.</span></span>

 

 



