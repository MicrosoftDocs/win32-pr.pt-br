---
description: Filtro de mixer de sobreposição
ms.assetid: e80938b7-31f0-467b-a3fa-c4511d14758d
title: Filtro de mixer de sobreposição
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d26ad8ba8a41a1cdb94eec0f4406c4845f25cda5
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "103825494"
---
# <a name="overlay-mixer-filter"></a><span data-ttu-id="02cb1-103">Filtro de mixer de sobreposição</span><span class="sxs-lookup"><span data-stu-id="02cb1-103">Overlay Mixer Filter</span></span>

<span data-ttu-id="02cb1-104">O filtro de mixer de sobreposição é um processador de vídeo projetado especificamente para reprodução de DVD e transmissão de fluxos de vídeo com legenda oculta de linha 21.</span><span class="sxs-lookup"><span data-stu-id="02cb1-104">The Overlay Mixer filter is a video renderer designed specifically for DVD playback and broadcast video streams with line-21 closed captioning.</span></span> <span data-ttu-id="02cb1-105">O mixer de sobreposição também dá suporte a VPEs (extensões de porta de vídeo), permitindo que ele funcione com decodificadores de hardware MPEG-2 ou sintonizadores de TV analógicos que enviam vídeo diretamente para a placa gráfica, em vez do barramento PCI.</span><span class="sxs-lookup"><span data-stu-id="02cb1-105">The Overlay Mixer also supports Video Port Extensions (VPEs), enabling it to work with hardware MPEG-2 decoders or analog TV tuners that send video directly to the graphics card, rather than over the PCI bus.</span></span>

> [!Note]  
> <span data-ttu-id="02cb1-106">O [processador de mixagem de vídeo 9](video-mixing-renderer-filter-9.md) agora é preferido sobre o filtro de mixer de sobreposição, exceto em cenários de VPE.</span><span class="sxs-lookup"><span data-stu-id="02cb1-106">The [Video Mixing Renderer 9](video-mixing-renderer-filter-9.md) is now preferred over the Overlay Mixer filter, except in VPE scenarios.</span></span>

 

<span data-ttu-id="02cb1-107">O mixer de sobreposição usa o DirectDraw para renderização.</span><span class="sxs-lookup"><span data-stu-id="02cb1-107">The Overlay Mixer uses DirectDraw for rendering.</span></span> <span data-ttu-id="02cb1-108">Ele requer uma superfície de sobreposição na placa gráfica.</span><span class="sxs-lookup"><span data-stu-id="02cb1-108">It requires an overlay surface on the graphics card.</span></span> <span data-ttu-id="02cb1-109">O fluxo de vídeo primário deve estar conectado ao PIN 0.</span><span class="sxs-lookup"><span data-stu-id="02cb1-109">The primary video stream should be connected to pin 0.</span></span> <span data-ttu-id="02cb1-110">Os fluxos secundários (imagens ocultas ou subfiguras de DVD) estão conectados aos pins 1 e superior.</span><span class="sxs-lookup"><span data-stu-id="02cb1-110">Secondary streams (closed caption graphics or DVD subpictures) are connected to pins 1 and higher.</span></span> <span data-ttu-id="02cb1-111">O mixer de sobreposição blits os fluxos secundários diretamente no suface primário; Ele não mistura ou mistura alfa.</span><span class="sxs-lookup"><span data-stu-id="02cb1-111">The Overlay Mixer blits the secondary streams directly onto the primary suface; it does not mix or alpha blend them.</span></span>

<span data-ttu-id="02cb1-112">O mixer de sobreposição usa o processador de vídeo para o gerenciamento de janelas.</span><span class="sxs-lookup"><span data-stu-id="02cb1-112">The Overlay Mixer uses the Video Renderer for window management.</span></span> <span data-ttu-id="02cb1-113">O renderizador de vídeo se conecta ao pino de saída do mixer de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="02cb1-113">The Video Renderer connects to the Overlay Mixer's output pin.</span></span>

<span data-ttu-id="02cb1-114">Esse filtro é adicionado ao gráfico de filtro automaticamente quando os aplicativos usam as interfaces [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) e [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) para criar o grafo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-114">This filter is added to the filter graph automatically when applications use the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) and [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) interfaces to create the graph.</span></span> <span data-ttu-id="02cb1-115">O Gerenciador do grafo de filtro não adicionará automaticamente o mixer de sobreposição ao grafo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-115">The Filter Graph Manager will not automatically add the Overlay Mixer to the graph.</span></span>

> [!Note]  
> <span data-ttu-id="02cb1-116">Na tabela a seguir, os subtipos de mídia aceitos no pino de entrada 0 são dependentes de hardware.</span><span class="sxs-lookup"><span data-stu-id="02cb1-116">In the following table, the media subtypes accepted on input pin 0 are hardware dependent.</span></span> <span data-ttu-id="02cb1-117">O mixer de sobreposição não pode determinar se um subtipo específico tem suporte até que ele crie a superfície do DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="02cb1-117">The Overlay Mixer cannot determine whether a particular subtype is supported until it creates the DirectDraw surface.</span></span> <span data-ttu-id="02cb1-118">Portanto, a única maneira de um filtro upstream determinar se um subtipo tem suporte é tentar uma conexão com esse subtipo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-118">Therefore, the only way for an upstream filter to determine whether a subtype is supported is to attempt a connection with that subtype.</span></span>

 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="02cb1-119">Filtrar interfaces</span><span class="sxs-lookup"><span data-stu-id="02cb1-119">Filter Interfaces</span></span></td>
<td><span data-ttu-id="02cb1-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="02cb1-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="02cb1-121">Tipos de mídia de pino de entrada</span><span class="sxs-lookup"><span data-stu-id="02cb1-121">Input Pin Media Types</span></span></td>
<td><span data-ttu-id="02cb1-122">Tipo principal: MEDIATYPE_Video</span><span class="sxs-lookup"><span data-stu-id="02cb1-122">Major Type: MEDIATYPE_Video</span></span><br/> <span data-ttu-id="02cb1-123">Subtipos</span><span class="sxs-lookup"><span data-stu-id="02cb1-123">Subtypes:</span></span><br/>
<ul>
<li><span data-ttu-id="02cb1-124">MEDIASUBTYPE_Overlay (somente PIN 0)</span><span class="sxs-lookup"><span data-stu-id="02cb1-124">MEDIASUBTYPE_Overlay (pin 0 only)</span></span></li>
<li><span data-ttu-id="02cb1-125">Formatos YUV do DirectDraw (somente PIN 0)</span><span class="sxs-lookup"><span data-stu-id="02cb1-125">DirectDraw YUV formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="02cb1-126">Formatos de aceleração de vídeo do DirectDraw (somente PIN 0)</span><span class="sxs-lookup"><span data-stu-id="02cb1-126">DirectDraw Video Acceleration formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="02cb1-127">Formatos RGB do DirectDraw (todos os Pins de entrada)</span><span class="sxs-lookup"><span data-stu-id="02cb1-127">DirectDraw RGB formats (all input pins)</span></span></li>
</ul>
<span data-ttu-id="02cb1-128">Tipos de formato:</span><span class="sxs-lookup"><span data-stu-id="02cb1-128">Format Types:</span></span><br/>
<ul>
<li><span data-ttu-id="02cb1-129">Format_VIDEOINFO</span><span class="sxs-lookup"><span data-stu-id="02cb1-129">Format_VIDEOINFO</span></span></li>
<li><span data-ttu-id="02cb1-130">Format_VIDEOINFO2</span><span class="sxs-lookup"><span data-stu-id="02cb1-130">Format_VIDEOINFO2</span></span></li>
</ul></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="02cb1-131">Interfaces de pino de entrada</span><span class="sxs-lookup"><span data-stu-id="02cb1-131">Input Pin Interfaces</span></span></td>
<td><span data-ttu-id="02cb1-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>IOverlay</strong></a> (somente PIN 0), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="02cb1-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>IOverlay</strong></a> (pin 0 only), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="02cb1-133">Tipos de mídia do pino de saída</span><span class="sxs-lookup"><span data-stu-id="02cb1-133">Output Pin Media Types</span></span></td>
<td><span data-ttu-id="02cb1-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span><span class="sxs-lookup"><span data-stu-id="02cb1-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="02cb1-135">Interfaces de pino de saída</span><span class="sxs-lookup"><span data-stu-id="02cb1-135">Output Pin Interfaces</span></span></td>
<td><span data-ttu-id="02cb1-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span><span class="sxs-lookup"><span data-stu-id="02cb1-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="02cb1-137">CLSID do filtro</span><span class="sxs-lookup"><span data-stu-id="02cb1-137">Filter CLSID</span></span></td>
<td><span data-ttu-id="02cb1-138">CLSID_OverlayMixer</span><span class="sxs-lookup"><span data-stu-id="02cb1-138">CLSID_OverlayMixer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="02cb1-139">CLSID de página de propriedades</span><span class="sxs-lookup"><span data-stu-id="02cb1-139">Property Page CLSID</span></span></td>
<td><span data-ttu-id="02cb1-140">Nenhuma página de propriedades.</span><span class="sxs-lookup"><span data-stu-id="02cb1-140">No property page.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="02cb1-141">Executável</span><span class="sxs-lookup"><span data-stu-id="02cb1-141">Executable</span></span></td>
<td><span data-ttu-id="02cb1-142">qdvd.dll</span><span class="sxs-lookup"><span data-stu-id="02cb1-142">qdvd.dll</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="02cb1-143"><a href="merit.md">Núcleo</a></span><span class="sxs-lookup"><span data-stu-id="02cb1-143"><a href="merit.md">Merit</a></span></span></td>
<td><span data-ttu-id="02cb1-144">MERIT_DO_NOT_USE</span><span class="sxs-lookup"><span data-stu-id="02cb1-144">MERIT_DO_NOT_USE</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="02cb1-145"><a href="filter-categories.md">Categoria do filtro</a></span><span class="sxs-lookup"><span data-stu-id="02cb1-145"><a href="filter-categories.md">Filter Category</a></span></span></td>
<td><span data-ttu-id="02cb1-146">CLSID_LegacyAmFilterCategory</span><span class="sxs-lookup"><span data-stu-id="02cb1-146">CLSID_LegacyAmFilterCategory</span></span></td>
</tr>
</tbody>
</table>



 

### <a name="remarks"></a><span data-ttu-id="02cb1-147">Comentários</span><span class="sxs-lookup"><span data-stu-id="02cb1-147">Remarks</span></span>

<span data-ttu-id="02cb1-148">O mixer de sobreposição usa o chaveamento de cor de destino para misturar superfícies de vídeo com sobreposições.</span><span class="sxs-lookup"><span data-stu-id="02cb1-148">The Overlay Mixer uses destination color keying to mix video surfaces with overlays.</span></span> <span data-ttu-id="02cb1-149">Ele blits a chave de cor e o vídeo secundário para a superfície primária e envia o vídeo primário para a superfície de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="02cb1-149">It blits the color key and the secondary video to the primary surface, and sends the primary video to the overlay surface.</span></span> <span data-ttu-id="02cb1-150">Em seguida, a placa gráfica compõe as duas superfícies em seu buffer de quadro.</span><span class="sxs-lookup"><span data-stu-id="02cb1-150">The graphics card then composites the two surfaces into its frame buffer.</span></span>

<span data-ttu-id="02cb1-151">Para testar se o driver de gráficos dá suporte à sobreposição de hardware, chame **IDirectDraw7:: GetCaps**.</span><span class="sxs-lookup"><span data-stu-id="02cb1-151">To test whether the graphics driver supports hardware overlay, call **IDirectDraw7::GetCaps**.</span></span> <span data-ttu-id="02cb1-152">Se o campo **dwMaxVisibleOverlays** na estrutura **DDCAPS** for maior que zero, o driver dará suporte à sobreposição de hardware.</span><span class="sxs-lookup"><span data-stu-id="02cb1-152">If the **dwMaxVisibleOverlays** field in the **DDCAPS** structure is greater than zero, the driver supports hardware overlay.</span></span>

<span data-ttu-id="02cb1-153">Os aplicativos podem controlar alguns comportamentos no mixer de sobreposição por meio da interface [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-153">Applications can control some behaviors on the Overlay Mixer through the [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) interface.</span></span> <span data-ttu-id="02cb1-154">Os desenvolvedores de jogos podem usar o mixer de sobreposição para exibir vídeo no modo exclusivo do DirectDraw, conforme descrito posteriormente nesta seção.</span><span class="sxs-lookup"><span data-stu-id="02cb1-154">Game developers can use the Overlay Mixer to display video in DirectDraw Exclusive Mode, as described later in this section.</span></span> <span data-ttu-id="02cb1-155">No entanto, o [filtro de mixagem de vídeo 9](video-mixing-renderer-filter-9.md) (VMR-9) agora fornece um melhor suporte ao vídeo em jogos.</span><span class="sxs-lookup"><span data-stu-id="02cb1-155">The [Video Mixing Renderer Filter 9](video-mixing-renderer-filter-9.md) (VMR-9) now provides better support for video in games, however.</span></span> <span data-ttu-id="02cb1-156">Para obter mais informações, consulte [usando o processador de mixagem de vídeo](using-the-video-mixing-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="02cb1-156">For more information, see [Using the Video Mixing Renderer](using-the-video-mixing-renderer.md).</span></span>

<span data-ttu-id="02cb1-157">As informações a seguir são fornecidas para o benefício dos desenvolvedores de filtro e dos desenvolvedores de jogos que desejam usar o mixer de sobreposição no modo exclusivo do DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="02cb1-157">The following information is provided for the benefit of filter developers, and game developers who want to use the Overlay Mixer in DirectDraw Exclusive Mode.</span></span>

<span data-ttu-id="02cb1-158">**Operações internas do mixer de sobreposição**</span><span class="sxs-lookup"><span data-stu-id="02cb1-158">**Overlay Mixer Internal Operations**</span></span>

<span data-ttu-id="02cb1-159">O mixer de sobreposição expõe um pino de entrada para cada fluxo de entrada.</span><span class="sxs-lookup"><span data-stu-id="02cb1-159">The Overlay Mixer exposes an input pin for each incoming stream.</span></span> <span data-ttu-id="02cb1-160">Normalmente, há três pinos de entrada: pino 0 para dados de vídeo e pinos 1 e 2 para dados de subimagem de linha 21 e DVD.</span><span class="sxs-lookup"><span data-stu-id="02cb1-160">Typically, there are three input pins: pin 0 for video data, and pins 1 and 2 for line 21 and DVD subpicture data.</span></span> <span data-ttu-id="02cb1-161">Internamente, o mixer de sobreposição cria um objeto DirectDraw com uma superfície primária que abrange toda a área de trabalho, além de uma superfície de sobreposição cujo retângulo é definido pelo tamanho do fluxo de vídeo no pino 0.</span><span class="sxs-lookup"><span data-stu-id="02cb1-161">Internally, the Overlay Mixer creates a DirectDraw object with a primary surface comprising the entire desktop, plus an overlay surface whose rectangle is defined by the size of the video stream on Pin 0.</span></span> <span data-ttu-id="02cb1-162">Se o decodificador não especificar uma chave de cor, o mixer de sobreposição usará as chaves de cores padrão: cinza escuro para placas gráficas mais recentes e magenta para cartões de cor 256 mais antigos.</span><span class="sxs-lookup"><span data-stu-id="02cb1-162">If the decoder does not specify a color key, the Overlay Mixer uses default color keys: dark gray for more recent graphics cards and magenta for older 256-color cards.</span></span>

> [!Note]  
> <span data-ttu-id="02cb1-163">Os resultados serão indefinidos se o decodificador entregar dois fluxos de vídeo secundários simultaneamente no mesmo lugar na superfície de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="02cb1-163">The results are undefined if the decoder delivers two secondary video streams simultaneously in the same place on the overlay surface.</span></span> <span data-ttu-id="02cb1-164">(Isso às vezes ocorre com DVDs que contêm fluxos de subimagem e de linha 21.) O vídeo pode piscar ou exibir apenas um dos fluxos.</span><span class="sxs-lookup"><span data-stu-id="02cb1-164">(This sometimes occurs with DVDs that contain subpicture and line 21 streams.) The video might flicker, or display only one of the streams.</span></span>

 

<span data-ttu-id="02cb1-165">No Windows Vista ou posterior, o mixer de sobreposição desabilita a composição de Gerenciador de Janelas da Área de Trabalho (DWM) se o driver de vídeo oferecer suporte à sobreposição de hardware.</span><span class="sxs-lookup"><span data-stu-id="02cb1-165">On Windows Vista or later, the Overlay Mixer disables Desktop Window Manager (DWM) composition if the display driver supports hardware overlay.</span></span> <span data-ttu-id="02cb1-166">Os aplicativos devem evitar o uso do filtro de mixer de sobreposição; Use o VMR-9 ou o EVR (processador de vídeo avançado) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="02cb1-166">Applications should avoid using the Overlay Mixer filter; use the VMR-9 or the Enhanced Video Renderer (EVR) instead.</span></span>

<span data-ttu-id="02cb1-167">**Conexão upstream com o decodificador de vídeo**</span><span class="sxs-lookup"><span data-stu-id="02cb1-167">**Upstream Connection with the Video Decoder**</span></span>

<span data-ttu-id="02cb1-168">Normalmente, os pinos de entrada do mixer de sobreposição se conectam a um decodificador de vídeo upstream.</span><span class="sxs-lookup"><span data-stu-id="02cb1-168">Typically the Overlay Mixer's input pins connect to an upstream video decoder.</span></span> <span data-ttu-id="02cb1-169">O fluxo de vídeo primário deve se conectar ao PIN 0.</span><span class="sxs-lookup"><span data-stu-id="02cb1-169">The primary video stream must connect to the pin 0.</span></span> <span data-ttu-id="02cb1-170">Os fluxos de linha 21 ou subimagem se conectam ao pino 1 ou superior.</span><span class="sxs-lookup"><span data-stu-id="02cb1-170">The line 21 or subpicture streams connect to pin 1 or greater.</span></span> <span data-ttu-id="02cb1-171">Se o decodificador for um decodificador de software que usa a CPU do host exclusivamente, a conexão entre o decodificador e o PIN 0 será uma conexão [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-171">If the decoder is a software decoder that uses the host CPU exclusively, the connection between the decoder and the Pin 0 is an [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) connection.</span></span> <span data-ttu-id="02cb1-172">Se o decodificador usar aceleração de hardware, a conexão com o PIN 0 deverá usar o [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) inferface.</span><span class="sxs-lookup"><span data-stu-id="02cb1-172">If the decoder uses hardware acceleration, the connection to Pin 0 must use the [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) inferface.</span></span> <span data-ttu-id="02cb1-173">Esses dois tipos de conexões são mutuamente exclusivos.</span><span class="sxs-lookup"><span data-stu-id="02cb1-173">These two types of connections are mutually exclusive.</span></span>

<span data-ttu-id="02cb1-174">Se o decodificador desenhar diretamente na superfície de sobreposição, ele deverá usar a interface [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) no pino 0 e implementar a interface [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-174">If the decoder draws directly onto the overlay surface, it should use the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface on pin 0 and implement the [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) interface.</span></span>

<span data-ttu-id="02cb1-175">Os filtros que encapsulam um decodificador de hardware e se conectam ao mixer de sobreposição por meio de uma porta de vídeo devem implementar a interface [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-175">Filters that wrap a hardware decoder and connect to the Overlay Mixer through a video port must implement the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) interface.</span></span> <span data-ttu-id="02cb1-176">O mixer de sobreposição implementa a interface [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-176">The Overlay Mixer implements the [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) interface.</span></span> <span data-ttu-id="02cb1-177">Essas duas interfaces permitem que o decodificador especifique as superfícies de sobreposição necessárias e habilita o mixer de sobreposição para informar o decodificador do local dessas superfícies na memória de vídeo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-177">These two interfaces enable the decoder to specify the overlay surfaces it requires, and they enable the Overlay Mixer to inform the decoder of the location of those surfaces in video memory.</span></span>

<span data-ttu-id="02cb1-178">O mixer de sobreposição também garante que o retângulo de vídeo seja dimensionado corretamente.</span><span class="sxs-lookup"><span data-stu-id="02cb1-178">The Overlay Mixer also ensures that the video rectangle is scaled correctly.</span></span> <span data-ttu-id="02cb1-179">A captura de vídeo envolve certos problemas em relação ao dimensionamento da imagem de visualização e à captura de quadros de vídeo intercalados.</span><span class="sxs-lookup"><span data-stu-id="02cb1-179">Video capture involves certain issues with respect to scaling the preview image and capturing interleaved video frames.</span></span> <span data-ttu-id="02cb1-180">Se você estiver desenvolvendo um driver de filtro ou WDM para um dispositivo de captura de vídeo de hardware, consulte as páginas de referência [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) e [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) para obter mais informações sobre esses tópicos.</span><span class="sxs-lookup"><span data-stu-id="02cb1-180">If you are developing a filter or WDM driver for a hardware video capture device, refer to the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) and [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) reference pages for more information on these topics.</span></span>

<span data-ttu-id="02cb1-181">O mixer de sobreposição não é usado em cenários de captura 1394 ou USB.</span><span class="sxs-lookup"><span data-stu-id="02cb1-181">The Overlay Mixer is not used in 1394 or USB capture scenarios.</span></span> <span data-ttu-id="02cb1-182">Ele é usado na captura de vídeo no barramento PCI.</span><span class="sxs-lookup"><span data-stu-id="02cb1-182">It is used in video capture over the PCI bus.</span></span>

<span data-ttu-id="02cb1-183">**Conexão downstream com o processador de vídeo**</span><span class="sxs-lookup"><span data-stu-id="02cb1-183">**Downstream Connection with the Video Renderer**</span></span>

<span data-ttu-id="02cb1-184">O mixer de sobreposição tem um pino de saída que se conecta ao filtro de [processador de vídeo](video-renderer-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-184">The Overlay Mixer has an output pin that connects to the [Video Renderer](video-renderer-filter.md) filter.</span></span> <span data-ttu-id="02cb1-185">O processador de vídeo, nesse caso, não renderiza o vídeo; Ele simplesmente gerencia a janela de vídeo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-185">The Video Renderer in this case does not render the video; it simply manages the video window.</span></span>

<span data-ttu-id="02cb1-186">A conexão de PIN usa a interface [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) em vez da interface [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="02cb1-186">The pin connection uses the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface rather than the [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) interface.</span></span> <span data-ttu-id="02cb1-187">O processador de vídeo passa sua alça de janela por meio do mixer de sobreposição para o DirectDraw, que gerencia a recorte de retângulo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-187">The Video Renderer passes its window handle through the Overlay Mixer to DirectDraw, which manages the rectangle clipping.</span></span> <span data-ttu-id="02cb1-188">Os aplicativos podem controlar o processador de vídeo por meio das interfaces [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) e [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) no Gerenciador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="02cb1-188">Applications can control the Video Renderer through the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) and [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) interfaces on the Filter Graph Manager.</span></span>

<span data-ttu-id="02cb1-189">**Modo exclusivo do DirectDraw**</span><span class="sxs-lookup"><span data-stu-id="02cb1-189">**DirectDraw Exclusive Mode**</span></span>

<span data-ttu-id="02cb1-190">O modo exclusivo do DirectDraw do mixer de sobreposição permite que os jogos exibam vídeo em alguma parte da tela.</span><span class="sxs-lookup"><span data-stu-id="02cb1-190">The Overlay Mixer's DirectDraw exclusive mode enables games to display video on some part of the screen.</span></span> <span data-ttu-id="02cb1-191">Nesse modo, o mixer de sobreposição renderiza o vídeo diretamente em uma superfície do DirectDraw criada pelo aplicativo de jogo, em vez de uma janela fornecida pelo processador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-191">In this mode, the Overlay Mixer renders the video directly to a DirectDraw surface created by the game application, rather than to a window provided by the Video Renderer.</span></span> <span data-ttu-id="02cb1-192">Isso permite que os jogos controlem a chave de cor.</span><span class="sxs-lookup"><span data-stu-id="02cb1-192">This enables games to control the color key.</span></span> <span data-ttu-id="02cb1-193">O mixer de sobreposição expõe apenas um pino de entrada no modo exclusivo do DirectDraw, o que significa que nenhuma combinação da linha 21 ou da subimagem de DVD pode ser executada nesse modo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-193">The Overlay Mixer exposes only one input pin in DirectDraw exclusive mode, which means that no mixing of Line 21 or DVD subpicture can be performed in this mode.</span></span>

<span data-ttu-id="02cb1-194">Para usar o mixer de sobreposição no modo exclusivo do DirectDraw, crie uma instância do mixer de sobreposição e consulte-a para a interface [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) antes de criar o grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="02cb1-194">To use the Overlay Mixer in DirectDraw exclusive mode, create an instance of the Overlay Mixer and query it for the [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) interface before building the filter graph.</span></span> <span data-ttu-id="02cb1-195">Em seguida, chame [**IDDrawExclModeVideo:: SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) para especificar a superfície do DirectDraw para renderização.</span><span class="sxs-lookup"><span data-stu-id="02cb1-195">Then call [**IDDrawExclModeVideo::SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) to specify the DirectDraw surface for rendering.</span></span> <span data-ttu-id="02cb1-196">Uma limitação significativa desse modo é que o jogo não obtém acesso aos bits de vídeo reais.</span><span class="sxs-lookup"><span data-stu-id="02cb1-196">One significant limitation of this mode is that the game does not get access to the actual video bits.</span></span> <span data-ttu-id="02cb1-197">Se você usar **IDDrawExclModeVideo**, seu aplicativo criará a superfície primária e o mixer de sobreposição criará a superfície de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="02cb1-197">If you use **IDDrawExclModeVideo**, your application creates the primary surface, and the Overlay Mixer creates the overlay surface.</span></span>

<span data-ttu-id="02cb1-198">Você também pode usar o modo exclusivo do DirectDraw para executar a renderização sem janela — por exemplo, em uma página da Web — mas isso não é recomendado, pois o mixer de sobreposição não executa nenhuma combinação nesse modo.</span><span class="sxs-lookup"><span data-stu-id="02cb1-198">You can also use DirectDraw exclusive mode to perform windowless rendering—for example, in a Web page—but this is not recommended, because the Overlay Mixer does not perform any mixing in this mode.</span></span> <span data-ttu-id="02cb1-199">Isso significa que nenhum dado de linha 21 ou subimagem pode ser exibido.</span><span class="sxs-lookup"><span data-stu-id="02cb1-199">This means that no line 21 or subpicture data can be displayed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="02cb1-200">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="02cb1-200">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="02cb1-201">Filtros do DirectShow</span><span class="sxs-lookup"><span data-stu-id="02cb1-201">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 




