---
description: Fluxos opcionais
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: Fluxos opcionais
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 940be49196396aa2d1fa71502213b0d4fbacb5ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "105767791"
---
# <a name="optional-streams"></a><span data-ttu-id="ac9ea-103">Fluxos opcionais</span><span class="sxs-lookup"><span data-stu-id="ac9ea-103">Optional Streams</span></span>

<span data-ttu-id="ac9ea-104">Um DMO pode designar alguns de seus fluxos de saída como opcionais.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-104">A DMO can designate some of its output streams as optional.</span></span> <span data-ttu-id="ac9ea-105">Um fluxo opcional produz dados que o aplicativo pode descartar, seja completamente ou em exemplos ocasionais.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-105">An optional stream produces data that the application can discard, either completely or on occasional samples.</span></span> <span data-ttu-id="ac9ea-106">Por exemplo, um fluxo opcional pode conter informações adicionais sobre um fluxo primário.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-106">For example, an optional stream might contain additional information about a primary stream.</span></span>

<span data-ttu-id="ac9ea-107">Para consultar se um fluxo é opcional, chame o método [**IMediaObject:: GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) e verifique o parâmetro *pdwFlags* .</span><span class="sxs-lookup"><span data-stu-id="ac9ea-107">To query whether a stream is optional, call the [**IMediaObject::GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) method and check the *pdwFlags* parameter.</span></span> <span data-ttu-id="ac9ea-108">Os fluxos opcionais retornam \_ o \_ sinalizador de STREAMF de saída de DMO \_ ou \_ o \_ sinalizador opcional STREAMF de saída DMO \_ .</span><span class="sxs-lookup"><span data-stu-id="ac9ea-108">Optional streams return either the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag or the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag.</span></span> <span data-ttu-id="ac9ea-109">Esses sinalizadores significam quase a mesma coisa; uma pequena diferença entre elas será explicada em breve.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-109">These flags mean almost the same thing; one minor difference between them will be explained shortly.</span></span>

<span data-ttu-id="ac9ea-110">Se um fluxo for opcional, o cliente poderá instruir o DMO a descartar dados desse fluxo quando ele processar a saída.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-110">If a stream is optional, the client can instruct the DMO to discard data from that stream when it processes the output.</span></span> <span data-ttu-id="ac9ea-111">Para fazer isso, chame o método [**IMediaObject::P rocessoutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) e defina o buffer de saída como **nulo** para cada fluxo que você deseja descartar.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-111">To do so, call the [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) method and set the output buffer to **NULL** for each stream that you wish to discard.</span></span> <span data-ttu-id="ac9ea-112">(O buffer de saída é especificado no membro **pBuffer** do buffer de dados de saída do [**DMO \_ \_ \_**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Além disso, defina o \_ descarte de saída do processo DMO \_ \_ \_ quando \_ não houver nenhum \_ sinalizador de buffer no parâmetro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="ac9ea-112">(The output buffer is specified in the **pBuffer** member of the [**DMO\_OUTPUT\_DATA\_BUFFER**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Also set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag in the *dwFlags* parameter.</span></span>

<span data-ttu-id="ac9ea-113">Para cada fluxo em que o ponteiro *pBuffer* é **nulo**, o DMO tentará descartar os dados.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-113">For each stream where the *pBuffer* pointer is **NULL**, the DMO will attempt to discard the data.</span></span> <span data-ttu-id="ac9ea-114">Se o fluxo for opcional, o DMO será garantido para descartar os dados.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-114">If the stream is optional, the DMO is guaranteed to discard the data.</span></span> <span data-ttu-id="ac9ea-115">Se o fluxo não for opcional, o DMO descartará os dados quando possível, mas não será garantido.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-115">If the stream is not optional, the DMO discards the data when possible, but is not guaranteed to do so.</span></span> <span data-ttu-id="ac9ea-116">Se não for possível descartar os dados, ele definirá o \_ \_ \_ sinalizador incompleto de dados de saída do DMO BUFFERF \_ .</span><span class="sxs-lookup"><span data-stu-id="ac9ea-116">If it cannot discard the data, it sets the DMO\_OUTPUT\_DATA\_BUFFERF\_INCOMPLETE flag.</span></span> <span data-ttu-id="ac9ea-117">Se você definir um ponteiro *pBuffer* como **nulo** , mas não definir a \_ saída do processo DMO \_ \_ descartar \_ quando \_ nenhum sinalizador de \_ buffer, o DMO não descartará os dados.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-117">If you set a *pBuffer* pointer to **NULL** but do not set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag, the DMO does not discard the data.</span></span> <span data-ttu-id="ac9ea-118">Nesse caso, o DMO armazena em buffer a saída internamente ou simplesmente falha na chamada **ProcessOutput** .</span><span class="sxs-lookup"><span data-stu-id="ac9ea-118">In that case, the DMO either buffers the output internally, or simply fails the **ProcessOutput** call.</span></span>

<span data-ttu-id="ac9ea-119">A única diferença funcional entre o \_ sinalizador opcional de saída de DMO \_ STREAMF \_ e o sinalizador de saída de STREAMF do DMO \_ \_ \_ é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="ac9ea-119">The only functional difference between the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag and the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag is the following:</span></span>

-   <span data-ttu-id="ac9ea-120">O \_ sinalizador opcional STREAMF de saída de DMO \_ \_ indica que o cliente não precisa definir um tipo de mídia nesse fluxo.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-120">The DMO\_OUTPUT\_STREAMF\_OPTIONAL flag indicates that the client does not have to set a media type on that stream.</span></span> <span data-ttu-id="ac9ea-121">No entanto, se o cliente começar a processar dados sem definir o tipo de mídia para esse fluxo, ele deverá descartar os dados desse fluxo para toda a duração do streaming.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-121">However, if the client begins processing data without setting the media type for that stream, then it must discard the data from that stream for the entire duration of streaming.</span></span> <span data-ttu-id="ac9ea-122">Se você quiser descartar amostras seletivamente, deverá definir o tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-122">If you want to discard samples selectively, then you must set the media type.</span></span>
-   <span data-ttu-id="ac9ea-123">O \_ \_ sinalizador incarded output STREAMF de saída de DMO \_ indica que, embora o fluxo seja opcional, ele sempre requer um tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="ac9ea-123">The DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag indicates that, although the stream is optional, it always requires a media type.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ac9ea-124">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ac9ea-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ac9ea-125">Hospedando diretamente um DMO</span><span class="sxs-lookup"><span data-stu-id="ac9ea-125">Directly Hosting a DMO</span></span>](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



