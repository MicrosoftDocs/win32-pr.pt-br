---
description: VMR com vários fluxos (modo de combinação)
ms.assetid: 053edb70-8631-4fe4-a137-2fe54e02ab9e
title: VMR com vários fluxos (modo de combinação)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a21a954b0ad78afbceabf0fde493f920961b90dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105757280"
---
# <a name="vmr-with-multiple-streams-mixing-mode"></a><span data-ttu-id="7190f-103">VMR com vários fluxos (modo de combinação)</span><span class="sxs-lookup"><span data-stu-id="7190f-103">VMR with Multiple Streams (Mixing Mode)</span></span>

<span data-ttu-id="7190f-104">O VMR pode renderizar vários fluxos de entrada.</span><span class="sxs-lookup"><span data-stu-id="7190f-104">The VMR can render multiple input streams.</span></span> <span data-ttu-id="7190f-105">Nessa configuração, chamada de modo de combinação, o VMR carrega o mixer e o compositor para executar a mistura e a mesclagem antes da renderização.</span><span class="sxs-lookup"><span data-stu-id="7190f-105">In this configuration, called mixing mode, the VMR loads its mixer and compositor to perform the mixing and blending prior to rendering.</span></span> <span data-ttu-id="7190f-106">O modo de combinação pode ser usado enquanto o VMR está no modo de janela ou sem janela.</span><span class="sxs-lookup"><span data-stu-id="7190f-106">Mixing mode can be used either while the VMR is in windowed mode or windowless mode.</span></span>

<span data-ttu-id="7190f-107">O modo de combinação requer que o driver de gráficos dê suporte aos \_ sinalizadores de recurso DDCAPS BLTFOURCC e DDCAPS \_ BLTSTRETCH (conversão de espaço de cor e transferência de disco de ampliação, respectivamente).</span><span class="sxs-lookup"><span data-stu-id="7190f-107">Mixing mode requires that the graphics driver supports the DDCAPS\_BLTFOURCC and DDCAPS\_BLTSTRETCH capability flags (color space conversion and stretch blitting, respectively).</span></span> <span data-ttu-id="7190f-108">Quase todos os novos drivers gráficos têm esses recursos.</span><span class="sxs-lookup"><span data-stu-id="7190f-108">Almost all new graphics drivers have those capabilities.</span></span> <span data-ttu-id="7190f-109">Além disso, o driver deve dar suporte à criação de destinos de renderização do Direct3D para a profundidade de pixels de exibição atual.</span><span class="sxs-lookup"><span data-stu-id="7190f-109">In addition, the driver must support the creation of Direct3D render targets for the current display pixel depth.</span></span> <span data-ttu-id="7190f-110">Alguns dispositivos não dão suporte a operações de Direct3D quando a exibição é definida como 24 bits por pixel.</span><span class="sxs-lookup"><span data-stu-id="7190f-110">Some devices do not support Direct3D operations when the display is set to 24 bits per pixel.</span></span> <span data-ttu-id="7190f-111">Para obter mais informações, consulte a documentação do SDK de gráficos do DirectX.</span><span class="sxs-lookup"><span data-stu-id="7190f-111">For more information, see the DirectX Graphics SDK documentation.</span></span>

> [!Note]  
> <span data-ttu-id="7190f-112">Quando o VMR combina vários fluxos de vídeo, o grafo de filtro não busca corretamente.</span><span class="sxs-lookup"><span data-stu-id="7190f-112">When the VMR mixes multiple video streams, the filter graph does not seek correctly.</span></span> <span data-ttu-id="7190f-113">Se você precisar buscar vários fluxos de vídeo, deverá criar gráficos de filtro separados que compartilhem o mesmo objeto de apresentador de alocador personalizado.</span><span class="sxs-lookup"><span data-stu-id="7190f-113">If you need to seek multiple video streams, you must create separate filter graphs that share the same custom allocator-presenter object.</span></span>

 

<span data-ttu-id="7190f-114">**Configurando o VMR-7 para vários fluxos**</span><span class="sxs-lookup"><span data-stu-id="7190f-114">**Configuring the VMR-7 for Multiple Streams**</span></span>

<span data-ttu-id="7190f-115">Para renderizar vários fluxos de entrada com o VMR-7, faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="7190f-115">To render multiple input streams with the VMR-7, do the following:</span></span>

1.  <span data-ttu-id="7190f-116">Antes de conectar qualquer um dos Pins de entrada do VMR, chame o método [**IVMRFilterConfig:: SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) com o número de fluxos.</span><span class="sxs-lookup"><span data-stu-id="7190f-116">Before connecting any of the VMR's input pins, call the [**IVMRFilterConfig::SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) method with the number of streams.</span></span> <span data-ttu-id="7190f-117">Isso faz com que o VMR carregue o mixer e o compositor e crie o número especificado de Pins de entrada.</span><span class="sxs-lookup"><span data-stu-id="7190f-117">This causes the VMR to load the mixer and compositor and to create the specified number of input pins.</span></span>
2.  <span data-ttu-id="7190f-118">Chame [**IVMRFilterConfig:: SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) para especificar várias preferências de renderização.</span><span class="sxs-lookup"><span data-stu-id="7190f-118">Call [**IVMRFilterConfig::SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) to specify various rendering preferences.</span></span>
3.  <span data-ttu-id="7190f-119">Conecte os Pins aos filtros upstream.</span><span class="sxs-lookup"><span data-stu-id="7190f-119">Connect the pins to the upstream filters.</span></span> <span data-ttu-id="7190f-120">A maneira mais fácil de fazer isso é chamar [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) para cada fluxo de entrada.</span><span class="sxs-lookup"><span data-stu-id="7190f-120">The easiest way to do this is to call [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) for each input stream.</span></span> <span data-ttu-id="7190f-121">Se o pino de saída no filtro upstream (geralmente um decodificador) e o pino de entrada no VMR não puderem concordar em uma conexão, uma nova instância do VMR com as configurações padrão será criada.</span><span class="sxs-lookup"><span data-stu-id="7190f-121">If the output pin on the upstream filter (usually a decoder) and the input pin on the VMR cannot agree on a connection, then a new instance of the VMR with default settings will be created.</span></span> <span data-ttu-id="7190f-122">Isso resultará em uma nova janela com "ActiveMovie" na barra de título.</span><span class="sxs-lookup"><span data-stu-id="7190f-122">This will result in a new window with "ActiveMovie" in the title bar.</span></span> <span data-ttu-id="7190f-123">Para evitar que isso aconteça, o aplicativo sempre deve verificar se a instância correta do VMR está sendo usada chamando um método como [**IPin:: ConnectedTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span><span class="sxs-lookup"><span data-stu-id="7190f-123">To prevent this from happening, the application should always verify that the correct instance of the VMR is being used by calling a method such as [**IPin::ConnectedTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span></span> <span data-ttu-id="7190f-124">Outra opção é adicionar o filtro de origem e, em seguida, conectar os Pins usando **IGraphBuilder:: Connect**.</span><span class="sxs-lookup"><span data-stu-id="7190f-124">Another option is to add the source filter and then connect the pins using **IGraphBuilder::Connect**.</span></span>
4.  <span data-ttu-id="7190f-125">Use a interface [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) no VMR para controlar os parâmetros de cada fluxo, como o valor alfa, a ordenação Z e o retângulo de saída.</span><span class="sxs-lookup"><span data-stu-id="7190f-125">Use the [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) interface on the VMR to control parameters for each stream, such as the alpha value, the Z-ordering, and the output rectangle.</span></span>
5.  <span data-ttu-id="7190f-126">Execute o gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="7190f-126">Run the filter graph.</span></span>

<span data-ttu-id="7190f-127">**Configurando o VMR-9 para vários fluxos**</span><span class="sxs-lookup"><span data-stu-id="7190f-127">**Configuring the VMR-9 for Multiple Streams**</span></span>

<span data-ttu-id="7190f-128">Por padrão, o VMR-9 cria quatro pinos de entrada.</span><span class="sxs-lookup"><span data-stu-id="7190f-128">By default, the VMR-9 creates four input pins.</span></span> <span data-ttu-id="7190f-129">Se você quiser misturar mais de quatro fluxos de vídeo, chame [**IVMRFilterConfig9:: SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) antes de conectar qualquer pino de entrada.</span><span class="sxs-lookup"><span data-stu-id="7190f-129">If you want to mix more than four video streams, call [**IVMRFilterConfig9::SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) before connecting any input pins.</span></span> <span data-ttu-id="7190f-130">Use a interface [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) para definir os parâmetros de fluxo, como alfa, ordem Z e posição.</span><span class="sxs-lookup"><span data-stu-id="7190f-130">Use the [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) interface to set the stream parameters, such as alpha, Z-order, and position.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7190f-131">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7190f-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7190f-132">Usando o modo de mixagem do VMR</span><span class="sxs-lookup"><span data-stu-id="7190f-132">Using VMR Mixing Mode</span></span>](using-vmr-mixing-mode.md)
</dt> </dl>

 

 



