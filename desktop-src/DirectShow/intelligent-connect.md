---
description: Conexão inteligente
ms.assetid: 938ba1b0-822e-4871-8786-b7eeee243867
title: Conexão inteligente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12aead305867ccec1f1f1f0cbd76c652ba3ec412
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104456770"
---
# <a name="intelligent-connect"></a><span data-ttu-id="b30f0-103">Conexão inteligente</span><span class="sxs-lookup"><span data-stu-id="b30f0-103">Intelligent Connect</span></span>

<span data-ttu-id="b30f0-104">O Intelligent Connect é o mecanismo que o Gerenciador de gráficos de filtros usa para criar grafos de filtro.</span><span class="sxs-lookup"><span data-stu-id="b30f0-104">Intelligent Connect is the mechanism the Filter Graph Manager uses to build filter graphs.</span></span> <span data-ttu-id="b30f0-105">Ele consiste em vários algoritmos relacionados que selecionam filtros e os adiciona ao gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="b30f0-105">It consists of several related algorithms that select filters and add them to the filter graph.</span></span>

<span data-ttu-id="b30f0-106">Leia este tópico se você estiver tendo problemas para criar um determinado grafo de filtro e desejar solucionar o problema, ou se estiver escrevendo seu próprio filtro e desejar disponibilizá-lo para a criação automática de gráficos.</span><span class="sxs-lookup"><span data-stu-id="b30f0-106">Read this topic if you are having trouble building a certain filter graph and want to troubleshoot the problem, or if you are writing your own filter and want to make it available for automatic graph building.</span></span>

<span data-ttu-id="b30f0-107">O Intelligent Connect envolve os seguintes métodos [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) :</span><span class="sxs-lookup"><span data-stu-id="b30f0-107">Intelligent Connect involves the following [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) methods:</span></span>

-   [<span data-ttu-id="b30f0-108">**IGraphBuilder::AddSourceFilter**</span><span class="sxs-lookup"><span data-stu-id="b30f0-108">**IGraphBuilder::AddSourceFilter**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter)
-   [<span data-ttu-id="b30f0-109">**IGraphBuilder:: render**</span><span class="sxs-lookup"><span data-stu-id="b30f0-109">**IGraphBuilder::Render**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)
-   [<span data-ttu-id="b30f0-110">**IGraphBuilder:: RenderFile**</span><span class="sxs-lookup"><span data-stu-id="b30f0-110">**IGraphBuilder::RenderFile**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile)
-   [<span data-ttu-id="b30f0-111">**IGraphBuilder:: conectar**</span><span class="sxs-lookup"><span data-stu-id="b30f0-111">**IGraphBuilder::Connect**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect)

### <a name="igraphbuilderaddsourcefilter"></a><span data-ttu-id="b30f0-112">IGraphBuilder::AddSourceFilter</span><span class="sxs-lookup"><span data-stu-id="b30f0-112">IGraphBuilder::AddSourceFilter</span></span>

<span data-ttu-id="b30f0-113">O método [**IGraphBuilder:: AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) adiciona um filtro de origem que pode renderizar um arquivo especificado.</span><span class="sxs-lookup"><span data-stu-id="b30f0-113">The [**IGraphBuilder::AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) method adds a source filter that can render a specified file.</span></span> <span data-ttu-id="b30f0-114">Em primeiro lugar, ele procura no registro e faz a correspondência com o protocolo (como `https://` ), a extensão de nome de arquivo ou um conjunto de *bytes de cheque* predeterminados, que são bytes em determinados deslocamentos no arquivo que correspondem a determinados padrões.</span><span class="sxs-lookup"><span data-stu-id="b30f0-114">First it looks in the registry and matches against the protocol (such as `https://`), the file name extension, or a set of predetermined *check bytes*, which are bytes at particular offsets in the file that match certain patterns.</span></span> <span data-ttu-id="b30f0-115">Para obter detalhes, consulte [registrando um tipo de arquivo personalizado](registering-a-custom-file-type.md).</span><span class="sxs-lookup"><span data-stu-id="b30f0-115">For details, see [Registering a Custom File Type](registering-a-custom-file-type.md).</span></span> <span data-ttu-id="b30f0-116">Supondo que o método Localize um filtro de origem apropriado, ele cria uma instância desse filtro, adiciona-o ao grafo e chama o método [**IFileSourceFilter:: Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) do filtro com o nome do arquivo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-116">Assuming that the method locates an appropriate source filter, it then creates an instance of that filter, adds it to the graph, and calls the filter's [**IFileSourceFilter::Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) method with the file name.</span></span>

### <a name="igraphbuilderrender"></a><span data-ttu-id="b30f0-117">IGraphBuilder:: render</span><span class="sxs-lookup"><span data-stu-id="b30f0-117">IGraphBuilder::Render</span></span>

<span data-ttu-id="b30f0-118">O método [**IGraphBuilder:: render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) cria uma subseção de um grafo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-118">The [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method builds a subsection of a graph.</span></span> <span data-ttu-id="b30f0-119">Ele inicia de um PIN de saída não conectado e funciona downstream, adicionando novos filtros, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="b30f0-119">It starts from an unconnected output pin and works downstream, adding new filters as needed.</span></span> <span data-ttu-id="b30f0-120">O filtro inicial já deve estar no grafo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-120">The starting filter must already be in the graph.</span></span> <span data-ttu-id="b30f0-121">Em cada etapa, o método **render** procura um filtro que possa se conectar ao filtro anterior.</span><span class="sxs-lookup"><span data-stu-id="b30f0-121">At each step, the **Render** method searches for a filter that can connect to the previous filter.</span></span> <span data-ttu-id="b30f0-122">O fluxo pode ramificar se um filtro de conexão tiver vários Pins de saída.</span><span class="sxs-lookup"><span data-stu-id="b30f0-122">The stream can branch if a connecting filter has multiple output pins.</span></span> <span data-ttu-id="b30f0-123">A pesquisa para quando cada fluxo tem um processador.</span><span class="sxs-lookup"><span data-stu-id="b30f0-123">The search stops when every stream has a renderer.</span></span> <span data-ttu-id="b30f0-124">Se o método **render** ficar preso, ele poderá fazer backup e tentar novamente usando um conjunto diferente de filtros.</span><span class="sxs-lookup"><span data-stu-id="b30f0-124">If the **Render** method gets stuck, it might back up and try again, using a different set of filters.</span></span>

<span data-ttu-id="b30f0-125">Para conectar cada pino de saída, o método [**render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) faz o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b30f0-125">To connect each output pin, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method does the following:</span></span>

1.  <span data-ttu-id="b30f0-126">Se o PIN der suporte à interface [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) , o Gerenciador de gráfico de filtro delegará todo o processo ao método [**IStreamBuilder:: render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) do PIN.</span><span class="sxs-lookup"><span data-stu-id="b30f0-126">If the pin supports the [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) interface, the Filter Graph Manager delegates the entire process to the pin's [**IStreamBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) method.</span></span> <span data-ttu-id="b30f0-127">Ao expor essa interface, o PIN assume a responsabilidade de criar o restante do grafo, até o renderizador.</span><span class="sxs-lookup"><span data-stu-id="b30f0-127">By exposing this interface, the pin assumes responsibility for building the remainder of the graph, down to the renderer.</span></span> <span data-ttu-id="b30f0-128">No entanto, poucos Pins dão suporte a essa interface.</span><span class="sxs-lookup"><span data-stu-id="b30f0-128">However, very few pins support this interface.</span></span>
2.  <span data-ttu-id="b30f0-129">O Gerenciador do grafo de filtro tenta usar filtros que são armazenados em cache na memória, se houver.</span><span class="sxs-lookup"><span data-stu-id="b30f0-129">The Filter Graph Manager tries to use filters that are cached in memory, if any.</span></span> <span data-ttu-id="b30f0-130">Em todo o processo de conexão inteligente, o Gerenciador do grafo de filtro pode armazenar em cache filtros de etapas anteriores no processo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-130">Throughout the Intelligent Connect process, the Filter Graph Manager may cache filters from earlier steps in the process.</span></span> <span data-ttu-id="b30f0-131">(Além disso, consulte [criação de grafo dinâmico](dynamic-graph-building.md).)</span><span class="sxs-lookup"><span data-stu-id="b30f0-131">(Also, see [Dynamic Graph Building](dynamic-graph-building.md).)</span></span>
3.  <span data-ttu-id="b30f0-132">Se o gráfico de filtro contiver qualquer filtro com Pins de entrada desconectados, o Gerenciador do grafo de filtro tentará avançar.</span><span class="sxs-lookup"><span data-stu-id="b30f0-132">If the filter graph contains any filters with unconnected input pins, the Filter Graph Manager tries them next.</span></span> <span data-ttu-id="b30f0-133">Você pode forçar o método [**render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) a tentar um filtro específico adicionando esse filtro ao grafo antes de chamar **render**.</span><span class="sxs-lookup"><span data-stu-id="b30f0-133">You can force the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method to try a particular filter by adding that filter to the graph before calling **Render**.</span></span>
4.  <span data-ttu-id="b30f0-134">A partir do Windows 7, o DirectShow tem uma lista de filtros preferenciais para determinados subtipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="b30f0-134">Starting in Windows 7, DirectShow has a list of preferred filters for certain media subtypes.</span></span> <span data-ttu-id="b30f0-135">Se houver um filtro preferencial para o tipo de mídia que está sendo renderizado, o Gerenciador de gráfico de filtro tentará esse filtro em seguida.</span><span class="sxs-lookup"><span data-stu-id="b30f0-135">If there is a preferred filter for the media type that is being rendered, the Filter Graph Manager tries that filter next.</span></span> <span data-ttu-id="b30f0-136">Um aplicativo pode modificar a lista de filtros preferenciais usando a interface [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="b30f0-136">An application can modify the list of preferred filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="b30f0-137">As alterações na lista afetam o processo atual do aplicativo e são descartadas após o término do processo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-137">Changes to the list affect the application's current process, and are discarded after the process ends.</span></span>
5.  <span data-ttu-id="b30f0-138">Por fim, se nenhum filtro adequado for encontrado, o Gerenciador de gráfico de filtro pesquisará o registro, usando o método [**IFilterMapper2:: EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) .</span><span class="sxs-lookup"><span data-stu-id="b30f0-138">Finally, if no suitable filter has been found, the Filter Graph Manager searches the registry, using the [**IFilterMapper2::EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method.</span></span> <span data-ttu-id="b30f0-139">Ele tenta corresponder os tipos de mídia preferenciais do pino de saída em relação aos tipos de mídia listados no registro.</span><span class="sxs-lookup"><span data-stu-id="b30f0-139">It tries to match the output pin's preferred media types against media types listed in the registry.</span></span>

    <span data-ttu-id="b30f0-140">Cada filtro é registrado com um *mérito*, um valor numérico que indica como é preferível o filtro, em relação a outros filtros.</span><span class="sxs-lookup"><span data-stu-id="b30f0-140">Each filter is registered with a *merit*, a numerical value that indicates how preferable the filter is, relative to other filters.</span></span> <span data-ttu-id="b30f0-141">O método [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) retorna filtros em ordem de mérito, com um mérito mínimo de **mérito \_ \_ não \_ use** + 1.</span><span class="sxs-lookup"><span data-stu-id="b30f0-141">The [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method returns filters in order of merit, with a minimum merit of **MERIT\_DO\_NOT\_USE** + 1.</span></span> <span data-ttu-id="b30f0-142">Ele ignora filtros com um mérito de **mérito não \_ \_ \_ usa** ou menos.</span><span class="sxs-lookup"><span data-stu-id="b30f0-142">It ignores filters with a merit of **MERIT\_DO\_NOT\_USE** or less.</span></span> <span data-ttu-id="b30f0-143">Os filtros também são agrupados em categorias, definidos pelo GUID.</span><span class="sxs-lookup"><span data-stu-id="b30f0-143">Filters are also grouped into categories, defined by GUID.</span></span> <span data-ttu-id="b30f0-144">As categorias em si têm mérito, e o método **EnumMatchingFilters** ignora qualquer categoria com um mérito **de \_ mérito \_ não \_ usa** ou menos, mesmo que os filtros nessa categoria tenham valores de mérito mais altos.</span><span class="sxs-lookup"><span data-stu-id="b30f0-144">Categories themselves have merit, and the **EnumMatchingFilters** method ignores any category with a merit of **MERIT\_DO\_NOT\_USE** or less, even if the filters in that category have higher merit values.</span></span>

    <span data-ttu-id="b30f0-145">A partir do Windows 7, o DirectShow tem uma lista de filtros bloqueados para determinados subtipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="b30f0-145">Starting in Windows 7, DirectShow has a list of blocked filters for certain media subtypes.</span></span> <span data-ttu-id="b30f0-146">O Gerenciador de gráfico de filtro ignora os filtros nesta lista.</span><span class="sxs-lookup"><span data-stu-id="b30f0-146">The Filter Graph Manager skips filters on this list.</span></span> <span data-ttu-id="b30f0-147">Um aplicativo pode modificar a lista de filtros bloqueados usando a interface [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="b30f0-147">An application can modify the list of blocked filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="b30f0-148">As alterações feitas nessa lista afetam o processo atual do aplicativo e são descartadas após o término do processo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-148">Changes to this list affect the application's current process, and are discarded after the process ends.</span></span>

<span data-ttu-id="b30f0-149">Para resumir, o método [**render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) tenta filtros na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="b30f0-149">To summarize, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method tries filters in the following order:</span></span>

1.  <span data-ttu-id="b30f0-150">Use [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span><span class="sxs-lookup"><span data-stu-id="b30f0-150">Use [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span></span>
2.  <span data-ttu-id="b30f0-151">Experimente os filtros em cache.</span><span class="sxs-lookup"><span data-stu-id="b30f0-151">Try cached filters.</span></span>
3.  <span data-ttu-id="b30f0-152">Tente filtros no grafo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-152">Try filters in the graph.</span></span>
4.  <span data-ttu-id="b30f0-153">Windows 7 ou posterior: Tente o filtro preferencial para o tipo de mídia, se houver.</span><span class="sxs-lookup"><span data-stu-id="b30f0-153">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="b30f0-154">Pesquisar filtros no registro.</span><span class="sxs-lookup"><span data-stu-id="b30f0-154">Look up filters in the registry.</span></span>

### <a name="igraphbuilderrenderfile"></a><span data-ttu-id="b30f0-155">IGraphBuilder:: RenderFile</span><span class="sxs-lookup"><span data-stu-id="b30f0-155">IGraphBuilder::RenderFile</span></span>

<span data-ttu-id="b30f0-156">O método [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) cria um grafo de reprodução padrão a partir de um nome de arquivo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-156">The [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) method builds a default playback graph from a file name.</span></span> <span data-ttu-id="b30f0-157">Internamente, esse método usa [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) para localizar o filtro de origem correto e [**renderizar**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) para compilar o restante do grafo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-157">Internally, this method uses [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) to locate the correct source filter, and [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) to build the rest of the graph.</span></span>

### <a name="igraphbuilderconnect"></a><span data-ttu-id="b30f0-158">IGraphBuilder:: conectar</span><span class="sxs-lookup"><span data-stu-id="b30f0-158">IGraphBuilder::Connect</span></span>

<span data-ttu-id="b30f0-159">O método [**IGraphBuilder:: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) conecta um pino de saída a um PIN de entrada.</span><span class="sxs-lookup"><span data-stu-id="b30f0-159">The [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) method connects an output pin to an input pin.</span></span> <span data-ttu-id="b30f0-160">Esse método adiciona filtros intermediários, se necessário, usando uma variação do algoritmo descrito para o método [**render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) :</span><span class="sxs-lookup"><span data-stu-id="b30f0-160">This method adds intermediate filters if needed, using a variation of the algorithm described for the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method:</span></span>

1.  <span data-ttu-id="b30f0-161">Tente uma conexão direta entre os filtros, sem filtros intermediários.</span><span class="sxs-lookup"><span data-stu-id="b30f0-161">Try a direct connection between the filters, with no intermediate filters.</span></span>
2.  <span data-ttu-id="b30f0-162">Experimente os filtros em cache.</span><span class="sxs-lookup"><span data-stu-id="b30f0-162">Try cached filters.</span></span>
3.  <span data-ttu-id="b30f0-163">Tente filtros no grafo.</span><span class="sxs-lookup"><span data-stu-id="b30f0-163">Try filters in the graph.</span></span>
4.  <span data-ttu-id="b30f0-164">Windows 7 ou posterior: Tente o filtro preferencial para o tipo de mídia, se houver.</span><span class="sxs-lookup"><span data-stu-id="b30f0-164">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="b30f0-165">Pesquisar filtros no registro.</span><span class="sxs-lookup"><span data-stu-id="b30f0-165">Look up filters in the registry.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b30f0-166">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b30f0-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b30f0-167">Filtrar categorias</span><span class="sxs-lookup"><span data-stu-id="b30f0-167">Filter Categories</span></span>](filter-categories.md)
</dt> <dt>

[<span data-ttu-id="b30f0-168">Núcleo</span><span class="sxs-lookup"><span data-stu-id="b30f0-168">Merit</span></span>](merit.md)
</dt> <dt>

[<span data-ttu-id="b30f0-169">Simulando a criação de gráficos com o GraphEdit</span><span class="sxs-lookup"><span data-stu-id="b30f0-169">Simulating Graph Building with GraphEdit</span></span>](simulating-graph-building-with-graphedit.md)
</dt> <dt>

[<span data-ttu-id="b30f0-170">Criando o grafo de filtro</span><span class="sxs-lookup"><span data-stu-id="b30f0-170">Building the Filter Graph</span></span>](building-the-filter-graph.md)
</dt> </dl>

 

 



