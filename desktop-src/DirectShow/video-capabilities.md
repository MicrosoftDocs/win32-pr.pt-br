---
description: Recursos de vídeo
ms.assetid: 305bd009-f58e-4dcc-9b70-252de87dc86d
title: Recursos de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6287839b75bd5044644480c3abcc8248cc46dc0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104560921"
---
# <a name="video-capabilities"></a><span data-ttu-id="15846-103">Recursos de vídeo</span><span class="sxs-lookup"><span data-stu-id="15846-103">Video Capabilities</span></span>

<span data-ttu-id="15846-104">O método [**IAMStreamConfig:: GetStreamCaps**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getstreamcaps) apresenta recursos de vídeo em uma matriz de pares [**do \_ \_ tipo de mídia am**](/windows/win32/api/strmif/ns-strmif-am_media_type) e das estruturas de [**\_ \_ configuração \_ de fluxo de vídeo**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) .</span><span class="sxs-lookup"><span data-stu-id="15846-104">The [**IAMStreamConfig::GetStreamCaps**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getstreamcaps) method presents video capabilities in an array of pairs of [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) and [**VIDEO\_STREAM\_CONFIG\_CAPS**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) structures.</span></span> <span data-ttu-id="15846-105">Você pode usar isso para expor todos os formatos e resoluções com suporte em um PIN, conforme discutido abaixo.</span><span class="sxs-lookup"><span data-stu-id="15846-105">You can use this to expose all the formats and resolutions supported on a pin as discussed below.</span></span>

<span data-ttu-id="15846-106">Para obter exemplos relacionados a áudio de **GetStreamCaps**, consulte [recursos de áudio](audio-capabilities.md).</span><span class="sxs-lookup"><span data-stu-id="15846-106">For audio-related examples of **GetStreamCaps**, see [Audio Capabilities](audio-capabilities.md).</span></span>

<span data-ttu-id="15846-107">Suponha que sua placa de captura dê suporte ao formato JPEG em todas as resoluções entre 160 x 120 pixels e 320 x 240 pixels, inclusive.</span><span class="sxs-lookup"><span data-stu-id="15846-107">Suppose your capture card supports JPEG format at all resolutions between 160 x 120 pixels and 320 x 240 pixels, inclusive.</span></span> <span data-ttu-id="15846-108">A diferença entre as resoluções com suporte é uma nesse caso, pois você adiciona ou subtrai um pixel de cada resolução com suporte para obter a próxima resolução com suporte.</span><span class="sxs-lookup"><span data-stu-id="15846-108">The difference between supported resolutions is one in this case because you add or subtract one pixel from each supported resolution to get the next supported resolution.</span></span> <span data-ttu-id="15846-109">Essa diferença nas resoluções com suporte é chamada de granularidade.</span><span class="sxs-lookup"><span data-stu-id="15846-109">This difference in supported resolutions is called granularity.</span></span>

<span data-ttu-id="15846-110">Suponha que o cartão também ofereça suporte ao tamanho 640 x 480.</span><span class="sxs-lookup"><span data-stu-id="15846-110">Suppose your card also supports the size 640 x 480.</span></span> <span data-ttu-id="15846-111">O seguinte ilustra essa resolução única e o intervalo acima de resoluções (todos os tamanhos entre 160 x 120 pixels e 320 x 240 pixels).</span><span class="sxs-lookup"><span data-stu-id="15846-111">The following illustrates this single resolution and the above range of resolutions (all sizes between 160 x 120 pixels and 320 x 240 pixels).</span></span>

![resolução de 160 x 120 a 320 x 240 pixels, além de 640 x 480](images/strmcap1.png)

<span data-ttu-id="15846-113">Além disso, suponha que ele dá suporte ao formato RGB de cor de 24 bits em resoluções entre 160 x 120 e 320 x 240, mas com uma granularidade de 8.</span><span class="sxs-lookup"><span data-stu-id="15846-113">Also, suppose it supports 24-bit color RGB format at resolutions between 160 x 120 and 320 x 240, but with a granularity of 8.</span></span> <span data-ttu-id="15846-114">A ilustração a seguir mostra alguns dos tamanhos válidos nesse caso.</span><span class="sxs-lookup"><span data-stu-id="15846-114">The following illustration shows some of the valid sizes in this case.</span></span>

![resolução de 160 x 120 a 320 a 240, com granularidade = 8](images/strmcap3.png)

<span data-ttu-id="15846-116">Para colocá-lo de outra maneira e listar mais resoluções, os itens a seguir estão todos na lista de resoluções válidas.</span><span class="sxs-lookup"><span data-stu-id="15846-116">To put it another way, and listing more resolutions, the following are all among the list of valid resolutions.</span></span>

-   <span data-ttu-id="15846-117">160 x 120</span><span class="sxs-lookup"><span data-stu-id="15846-117">160 x 120</span></span>
-   <span data-ttu-id="15846-118">168 x 120</span><span class="sxs-lookup"><span data-stu-id="15846-118">168 x 120</span></span>
-   <span data-ttu-id="15846-119">168 x 128</span><span class="sxs-lookup"><span data-stu-id="15846-119">168 x 128</span></span>
-   <span data-ttu-id="15846-120">176 x 128</span><span class="sxs-lookup"><span data-stu-id="15846-120">176 x 128</span></span>
-   <span data-ttu-id="15846-121">176 x 136</span><span class="sxs-lookup"><span data-stu-id="15846-121">176 x 136</span></span>
-   <span data-ttu-id="15846-122">... resoluções adicionais...</span><span class="sxs-lookup"><span data-stu-id="15846-122">... additional resolutions ...</span></span>
-   <span data-ttu-id="15846-123">312 x 232</span><span class="sxs-lookup"><span data-stu-id="15846-123">312 x 232</span></span>
-   <span data-ttu-id="15846-124">320 x 240</span><span class="sxs-lookup"><span data-stu-id="15846-124">320 x 240</span></span>

<span data-ttu-id="15846-125">Use **GetStreamCaps** para expor esses recursos de formato e dimensão de cores oferecendo um tipo de mídia de 320 x 240 JPEG (se esse for o seu tamanho padrão ou preferencial) juntamente com os recursos mínimos de 160 x 120, os recursos máximos de 320 x 240 e uma granularidade de 1.</span><span class="sxs-lookup"><span data-stu-id="15846-125">Use **GetStreamCaps** to expose these color format and dimension capabilities by offering a media type of 320 x 240 JPEG (if that is your default or preferred size) coupled with minimum capabilities of 160 x 120, maximum capabilities of 320 x 240, and a granularity of 1.</span></span> <span data-ttu-id="15846-126">O próximo par que você expõe usando **GetStreamCaps** é um tipo de mídia de 640 x 480 JPEG acoplado com um mínimo de 640 x 480 e um máximo de 640 x 480 e uma granularidade de 0.</span><span class="sxs-lookup"><span data-stu-id="15846-126">The next pair you expose by using **GetStreamCaps** is a media type of 640 x 480 JPEG coupled with a minimum of 640 x 480 and a maximum of 640 x 480 and a granularity of 0.</span></span> <span data-ttu-id="15846-127">O terceiro par inclui um tipo de mídia de 320 x 240, RGB de 24 bits com recursos mínimos de 160 x 120, recursos máximos de 320 x 240 e uma granularidade de 8.</span><span class="sxs-lookup"><span data-stu-id="15846-127">The third pair includes a media type of 320 x 240, 24-bit RGB with minimum capabilities of 160 x 120, maximum capabilities of 320 x 240, and a granularity of 8.</span></span> <span data-ttu-id="15846-128">Dessa forma, você pode publicar quase todos os formatos e funcionalidades às quais seu cartão pode dar suporte.</span><span class="sxs-lookup"><span data-stu-id="15846-128">In this way you can publish almost every format and capability your card might support.</span></span> <span data-ttu-id="15846-129">Um aplicativo que deve saber quais formatos de compactação você fornece pode obter todos os pares e fazer uma lista de todos os subtipos exclusivos dos tipos de mídia.</span><span class="sxs-lookup"><span data-stu-id="15846-129">An application that must know what compression formats you provide can get all the pairs and make a list of all the unique subtypes of the media types.</span></span>

<span data-ttu-id="15846-130">Um filtro obtém seus retângulos de origem e destino do tipo de mídia dos membros **rcSource** e **RcTarget** da estrutura [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="15846-130">A filter obtains its media type source and target rectangles from the [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) structure's **rcSource** and **rcTarget** members, respectively.</span></span> <span data-ttu-id="15846-131">Os filtros não precisam dar suporte a retângulos de origem e de destino.</span><span class="sxs-lookup"><span data-stu-id="15846-131">Filters do not have to support source and target rectangles.</span></span>

<span data-ttu-id="15846-132">O retângulo de corte descrito em toda a documentação do [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) é o mesmo que o retângulo de **RcSource** da estrutura **VIDEOINFOHEADER** para o pino de saída.</span><span class="sxs-lookup"><span data-stu-id="15846-132">The cropping rectangle described throughout the [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) documentation is the same as the **VIDEOINFOHEADER** structure's **rcSource** rectangle for the output pin.</span></span>

<span data-ttu-id="15846-133">O retângulo de saída descrito em toda a documentação do **IAMStreamConfig** é o mesmo que os membros de **bilargura** e de **altura** da estrutura **BITMAPINFOHEADER** do pino de saída (consulte [dados de DV no formato de arquivo AVI](dv-data-in-the-avi-file-format.md)).</span><span class="sxs-lookup"><span data-stu-id="15846-133">The output rectangle described throughout the **IAMStreamConfig** documentation is the same as the **biWidth** and **biHeight** members of the output pin's **BITMAPINFOHEADER** structure (see [DV Data in the AVI File Format](dv-data-in-the-avi-file-format.md).).</span></span>

<span data-ttu-id="15846-134">Se o pino de saída de um filtro estiver conectado a um tipo de mídia com retângulos de origem e destino não vazios, o filtro será necessário para ampliar o subretângulo de origem do formato de entrada para o subretângulo de destino do formato de saída.</span><span class="sxs-lookup"><span data-stu-id="15846-134">If a filter's output pin is connected to a media type with nonempty source and target rectangles, then your filter is required to stretch the input format's source subrectangle into the output format's target subrectangle.</span></span> <span data-ttu-id="15846-135">O subretângulo de origem é armazenado no membro **Incolocate** da estrutura [**Caps de configuração do fluxo de vídeo \_ \_ \_**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) .</span><span class="sxs-lookup"><span data-stu-id="15846-135">The source subrectangle is stored in the [**VIDEO\_STREAM\_CONFIG\_CAPS**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) structure's **InputSize** member.</span></span>

<span data-ttu-id="15846-136">Por exemplo, considere o seguinte cenário de compactador de vídeo: a imagem de entrada está no formato RGB e tem um tamanho de 160 x 120 pixels.</span><span class="sxs-lookup"><span data-stu-id="15846-136">For example, consider the following video compressor scenario: The input image is in RGB format and has a size of 160 x 120 pixels.</span></span> <span data-ttu-id="15846-137">O canto superior esquerdo do retângulo de origem está na coordenada (20, 20) e seu canto inferior direito está em (30, 30).</span><span class="sxs-lookup"><span data-stu-id="15846-137">The source rectangle's upper-left corner is at coordinate (20,20), and its lower-right corner is at (30,30).</span></span> <span data-ttu-id="15846-138">A imagem de saída está em formato MPEG com um tamanho de 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="15846-138">The output image is in MPEG format with a size of 320 x 240.</span></span> <span data-ttu-id="15846-139">O canto superior esquerdo do retângulo de destino está em (0, 0) e seu canto inferior direito está em (100.100).</span><span class="sxs-lookup"><span data-stu-id="15846-139">The target rectangle's upper-left corner is at (0,0) and its lower-right corner is at (100,100).</span></span> <span data-ttu-id="15846-140">Nesse caso, o filtro deve usar 10 x 10 partes do bitmap de origem 160 x 120 RGB e fazer com que ele preencha a área 100 x 100 superior de um bitmap 320 x 240, deixando o restante do bitmap 320 x 240 inalterado.</span><span class="sxs-lookup"><span data-stu-id="15846-140">In this case, the filter should take a 10 x 10 piece of the 160 x 120 RGB source bitmap, and make it fill the top 100 x 100 area of a 320 x 240 bitmap, leaving the rest of the 320 x 240 bitmap untouched.</span></span> <span data-ttu-id="15846-141">A ilustração a seguir mostra esse cenário.</span><span class="sxs-lookup"><span data-stu-id="15846-141">The following illustration shows this scenario.</span></span>

![alongamento do subretângulo](images/strmcap4.png)

<span data-ttu-id="15846-143">Um filtro pode não dar suporte a isso e pode falhar ao se conectar com um tipo de mídia em que **rcSource** e **rcTarget** não estão vazios.</span><span class="sxs-lookup"><span data-stu-id="15846-143">A filter might not support this and can fail to connect with a media type where **rcSource** and **rcTarget** are not empty.</span></span>

<span data-ttu-id="15846-144">A estrutura **VIDEOINFOHEADER** expõe informações sobre os recursos de taxa de dados de um filtro.</span><span class="sxs-lookup"><span data-stu-id="15846-144">The **VIDEOINFOHEADER** structure exposes information about a filter's data rate capabilities.</span></span> <span data-ttu-id="15846-145">Por exemplo, suponha que você conectou o PIN de saída ao próximo filtro com um determinado tipo de mídia (diretamente ou usando o tipo de mídia passado pela função [**CMediaType:: SetFormat**](cmediatype-setformat.md) ).</span><span class="sxs-lookup"><span data-stu-id="15846-145">For example, suppose you connected your output pin to the next filter with a certain media type (either directly or by using the media type passed by the [**CMediaType::SetFormat**](cmediatype-setformat.md) function).</span></span> <span data-ttu-id="15846-146">Examine o membro **dwBitRate** da estrutura de formato **VIDEOINFOHEADER** do tipo de mídia para ver em qual taxa de dados você deve compactar o vídeo.</span><span class="sxs-lookup"><span data-stu-id="15846-146">Look at the **dwBitRate** member of that media type's **VIDEOINFOHEADER** format structure to see what data rate you should compress the video to.</span></span> <span data-ttu-id="15846-147">Se você multiplicar o número de unidades de tempo por quadro no membro **AvgTimePerFrame** da estrutura **VIDEOINFOHEADER** pela taxa de dados no membro **dwBitRate** e dividir por 10 milhões (o número de unidades por segundo), poderá descobrir quantos bytes cada quadro deve ser.</span><span class="sxs-lookup"><span data-stu-id="15846-147">If you multiply the number of units of time per frame in the **VIDEOINFOHEADER** structure's **AvgTimePerFrame** member by the data rate in the **dwBitRate** member and divide by 10,000,000 (the number of units per second), you can figure out how many bytes each frame should be.</span></span> <span data-ttu-id="15846-148">Você pode produzir um quadro de tamanho menor, mas nunca mais um.</span><span class="sxs-lookup"><span data-stu-id="15846-148">You can produce a smaller sized frame, but never a larger one.</span></span> <span data-ttu-id="15846-149">Para determinar a taxa de quadros para um compressor de vídeo ou para um filtro de captura, use **AvgTimePerFrame** do tipo de mídia do seu pino de saída.</span><span class="sxs-lookup"><span data-stu-id="15846-149">To determine the frame rate for a video compressor or for a capture filter, use **AvgTimePerFrame** from your output pin's media type.</span></span>

 

 



