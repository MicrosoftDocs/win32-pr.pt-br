---
description: Filtro de renderização de vídeo
ms.assetid: 7719ed9d-e3b9-4c84-b587-4e120b5cabf8
title: Filtro de renderização de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ca3becb4fbdbb52a9968481aade07d14d963828
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/22/2021
ms.locfileid: "107908414"
---
# <a name="video-renderer-filter"></a><span data-ttu-id="ea6a2-103">Filtro de renderização de vídeo</span><span class="sxs-lookup"><span data-stu-id="ea6a2-103">Video Renderer Filter</span></span>

<span data-ttu-id="ea6a2-104">O filtro de renderização de vídeo é um renderizador de vídeo robusto e com todos os propósitos.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-104">The Video Renderer filter is a robust, all-purpose video renderer.</span></span>

> [!Note]  
> <span data-ttu-id="ea6a2-105">No Windows XP e versões posteriores, o processador de vídeo padrão é o [filtro de mixagem de vídeo 7](video-mixing-renderer-filter-7.md) (VMR-7).</span><span class="sxs-lookup"><span data-stu-id="ea6a2-105">On Windows XP and later, the default video renderer is the [Video Mixing Renderer Filter 7](video-mixing-renderer-filter-7.md) (VMR-7).</span></span> <span data-ttu-id="ea6a2-106">O VMR-7 e o processador de vídeo têm o nome amigável "processador de vídeo".</span><span class="sxs-lookup"><span data-stu-id="ea6a2-106">The VMR-7 and the Video Renderer both have the friendly name "Video Renderer."</span></span> <span data-ttu-id="ea6a2-107">Em plataformas anteriores, o renderizador de vídeo é o renderizador padrão.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-107">On earlier platforms, the Video Renderer is the default renderer.</span></span> <span data-ttu-id="ea6a2-108">Consulte [escolhendo o processador correto](choosing-the-right-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="ea6a2-108">See [Choosing the Right Renderer](choosing-the-right-renderer.md).</span></span>

 

<span data-ttu-id="ea6a2-109">O processador de vídeo usa superfícies do DirectDraw e de sobreposição, se a placa de vídeo der suporte a eles.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-109">The Video Renderer uses DirectDraw and overlay surfaces, if the video card supports them.</span></span> <span data-ttu-id="ea6a2-110">O Gerenciador de gráficos de filtro expõe a interface [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) , que permite que os aplicativos definam e recuperem Propriedades no processador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-110">The Filter Graph Manager exposes the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) interface, which enables applications to set and retrieve properties on the Video Renderer.</span></span> <span data-ttu-id="ea6a2-111">Com placas de vídeo mais recentes, o renderizador de vídeo dá suporte à renderização de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-111">With newer video cards, the Video Renderer supports full-screen rendering.</span></span> <span data-ttu-id="ea6a2-112">Caso contrário, o Gerenciador de gráfico de filtro alternará automaticamente para o filtro de [processador de tela inteira](full-screen-renderer-filter.md) para o modo de tela inteira.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-112">Otherwise, the Filter Graph Manager automatically switches to the [Full Screen Renderer](full-screen-renderer-filter.md) filter for full-screen mode.</span></span> <span data-ttu-id="ea6a2-113">Consulte [**IVideoWindow::p UT \_ fullscreenmode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-113">See [**IVideoWindow::put\_FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) for more information.</span></span>

-   <span data-ttu-id="ea6a2-114">\[! Fundamental\]</span><span class="sxs-lookup"><span data-stu-id="ea6a2-114">\[!Important\]</span></span>  
    > <span data-ttu-id="ea6a2-115">Normalmente, a janela de vídeo desse filtro processa mensagens em um thread de trabalho criado pelo Gerenciador do grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-115">Normally, this filter's video window processes messages on a worker thread created by the Filter Graph Manager.</span></span> <span data-ttu-id="ea6a2-116">Entretanto, se um aplicativo criar diretamente o filtro usando **CoCreateInstance**, a janela de vídeo processará mensagens no thread do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-116">Howerver, if an application directly creates the filter using **CoCreateInstance**, the video window processes messages on the application thread.</span></span> <span data-ttu-id="ea6a2-117">Nesse caso, o thread do aplicativo deve ter um loop de mensagem para enviar mensagens para a janela de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-117">In that case, the application thread must have a message loop, to dispatch messages to the video window.</span></span> <span data-ttu-id="ea6a2-118">Além disso, o thread não deve sair até a chamada de **versão** final para o processador de vídeo, que ocorre quando o Gerenciador do grafo de filtro é desligado.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-118">Also, the thread must not exit until the final **Release** call to the Video Renderer, which occurs when the Filter Graph Manager shuts down.</span></span> <span data-ttu-id="ea6a2-119">Caso contrário, o aplicativo poderá ser bloqueado.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-119">Otherwise, the application might deadlock.</span></span>

     



| <span data-ttu-id="ea6a2-120">Label</span><span class="sxs-lookup"><span data-stu-id="ea6a2-120">Label</span></span> | <span data-ttu-id="ea6a2-121">Valor</span><span class="sxs-lookup"><span data-stu-id="ea6a2-121">Value</span></span> |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ea6a2-122">Filtrar interfaces</span><span class="sxs-lookup"><span data-stu-id="ea6a2-122">Filter Interfaces</span></span>                        | <span data-ttu-id="ea6a2-123">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span><span class="sxs-lookup"><span data-stu-id="ea6a2-123">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span></span> |
| <span data-ttu-id="ea6a2-124">Tipos de mídia de pino de entrada</span><span class="sxs-lookup"><span data-stu-id="ea6a2-124">Input Pin Media Types</span></span>                    | <span data-ttu-id="ea6a2-125">Formatos de vídeo descompactados.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-125">Uncompressed video formats.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="ea6a2-126">Interfaces de pino de entrada</span><span class="sxs-lookup"><span data-stu-id="ea6a2-126">Input Pin Interfaces</span></span>                     | <span data-ttu-id="ea6a2-127">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="ea6a2-127">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="ea6a2-128">Tipos de mídia do pino de saída</span><span class="sxs-lookup"><span data-stu-id="ea6a2-128">Output Pin Media Types</span></span>                   | <span data-ttu-id="ea6a2-129">Não aplicável.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-129">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="ea6a2-130">Interfaces de pino de saída</span><span class="sxs-lookup"><span data-stu-id="ea6a2-130">Output Pin Interfaces</span></span>                    | <span data-ttu-id="ea6a2-131">Não aplicável.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-131">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="ea6a2-132">CLSID do filtro</span><span class="sxs-lookup"><span data-stu-id="ea6a2-132">Filter CLSID</span></span>                             | <span data-ttu-id="ea6a2-133">\_VIDEORENDERER CLSID</span><span class="sxs-lookup"><span data-stu-id="ea6a2-133">CLSID\_VideoRenderer</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="ea6a2-134">CLSID de página de propriedades</span><span class="sxs-lookup"><span data-stu-id="ea6a2-134">Property Page CLSID</span></span>                      | <span data-ttu-id="ea6a2-135">Nenhuma página de propriedades.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-135">No property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="ea6a2-136">Executável</span><span class="sxs-lookup"><span data-stu-id="ea6a2-136">Executable</span></span>                               | <span data-ttu-id="ea6a2-137">quartz.dll</span><span class="sxs-lookup"><span data-stu-id="ea6a2-137">quartz.dll</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="ea6a2-138">Núcleo</span><span class="sxs-lookup"><span data-stu-id="ea6a2-138">Merit</span></span>](merit.md)                       | <span data-ttu-id="ea6a2-139">Windows XP e posterior: **mérito \_ improvável**</span><span class="sxs-lookup"><span data-stu-id="ea6a2-139">Windows XP and later: **MERIT\_UNLIKELY**</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="ea6a2-140">Categoria do filtro</span><span class="sxs-lookup"><span data-stu-id="ea6a2-140">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="ea6a2-141">**\_LEGACYAMFILTERCATEGORY CLSID**</span><span class="sxs-lookup"><span data-stu-id="ea6a2-141">**CLSID\_LegacyAmFilterCategory**</span></span>                                                                                                                                                                                                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="ea6a2-142">Comentários</span><span class="sxs-lookup"><span data-stu-id="ea6a2-142">Remarks</span></span>

<span data-ttu-id="ea6a2-143">Na versão de depuração do Quartz.dll, se o nível de depuração do rastreamento de LOG \_ estiver definido como 5 ou superior, o renderizador de vídeo exibirá os carimbos de data/hora de cada quadro na janela de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-143">In the debug version of Quartz.dll, if the LOG\_TRACE debug level is set to 5 or higher, the Video Renderer displays each frame's time stamps on the video window.</span></span> <span data-ttu-id="ea6a2-144">Esses números não aparecem na versão de varejo da DLL.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-144">These numbers do not appear in the retail version of the DLL.</span></span> <span data-ttu-id="ea6a2-145">Para obter mais informações, consulte [depurar funções de saída](debug-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="ea6a2-145">For more information, see [Debug Output Functions](debug-output-functions.md).</span></span>

<span data-ttu-id="ea6a2-146">Os comentários a seguir destinam-se a desenvolvedores de filtro:</span><span class="sxs-lookup"><span data-stu-id="ea6a2-146">The following remarks are intended for filter developers:</span></span>

<span data-ttu-id="ea6a2-147">O processador de vídeo aceita formatos YUV se a placa gráfica de vídeo der suporte a superfícies de sobreposição YUV.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-147">The Video Renderer accepts YUV formats if the video graphics card supports YUV overlay surfaces.</span></span> <span data-ttu-id="ea6a2-148">No entanto, quando ele se conecta pela primeira vez ao filtro upstream, o processador de vídeo requer um formato RGB que corresponda à intensidade de cor das configurações atuais do monitor.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-148">When it first connects to the upstream filter, however, the Video Renderer requires an RGB format that matches the color depth of the current monitor settings.</span></span> <span data-ttu-id="ea6a2-149">Por exemplo, se a configuração de exibição atual for de 24 bits, o filtro upstream deverá ser capaz de fornecer vídeo RGB de 24 bits.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-149">For example, if the current display setting is 24-bit color, the upstream filter must be able to provide 24-bit RGB video.</span></span> <span data-ttu-id="ea6a2-150">Quando o gráfico de filtro muda para um estado executando, o renderizador de vídeo negocia uma alteração de formato dinâmico para o espaço de cores YUV apropriado.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-150">When the filter graph switches to a runing state, the Video Renderer negotiates a dynamic format change to the appropriate YUV color space.</span></span>

<span data-ttu-id="ea6a2-151">Conectando-se a um tipo RGB, o renderizador de vídeo garante que ele possa usar GDI caso o DirectDraw não esteja disponível.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-151">By connecting with an RGB type, the Video Renderer ensures that it can use GDI in case DirectDraw is not available.</span></span> <span data-ttu-id="ea6a2-152">Ele mudará para GDI se outro aplicativo estiver usando a memória de vídeo, se o retângulo de vídeo abranger dois monitores em um sistema de vários monitores ou se o retângulo de vídeo estiver completamente obscurecido por outra janela.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-152">It will switch to GDI if another application is using the video memory, if the video rectangle straddles two monitors on a multi-monitor system, or if the video rectangle is completely obscured by another window.</span></span>

> [!Note]  
> <span data-ttu-id="ea6a2-153">O processador de mixagem de vídeo não executa esse tipo de alteração de formato dinâmico e não requer um tipo de mídia RGB, porque ele nunca usa GDI para renderização.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-153">The Video Mixing Renderer does not perform this type of dynamic format change, and does not require an RGB media type, because it never uses GDI for rendering.</span></span>

 

<span data-ttu-id="ea6a2-154">Para negociar uma alteração de formato, o processador de vídeo chama [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) com o novo tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-154">To negotiate a format change, the Video Renderer calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) with the new media type.</span></span> <span data-ttu-id="ea6a2-155">Se o filtro upstream retornar S \_ OK, o renderizador de vídeo anexará a nova mídia à próxima amostra.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-155">If the upstream filter returns S\_OK, the Video Renderer attaches the new media to the next sample.</span></span> <span data-ttu-id="ea6a2-156">O filtro upstream deve chamar [**IMediaSample:: GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) em cada exemplo.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-156">The upstream filter should call [**IMediaSample::GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) on each sample.</span></span> <span data-ttu-id="ea6a2-157">Se **GetMediaType** retornar um valor não **nulo** , ele indicará uma alteração de formato e o filtro upstream deverá responder alternando os tipos de saída.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-157">If **GetMediaType** returns a non-**NULL** value, it indicates a format change, and the upstream filter should respond by switching output types.</span></span> <span data-ttu-id="ea6a2-158">(Não alterne os tipos no método **QueryAccept** .) O filtro upstream deve aceitar pelo menos os principais tipos RGB e, idealmente, deve dar suporte aos tipos YUV comuns.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-158">(Do not switch types in the **QueryAccept** method.) The upstream filter should accept at least the major RGB types, and ideally should support the common YUV types.</span></span> <span data-ttu-id="ea6a2-159">Durante o streaming, o processador de vídeo pode alternar entre os tipos YUV e RGB várias vezes.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-159">During streaming, the Video Renderer might switch back and forth between YUV and RGB types any number of times.</span></span> <span data-ttu-id="ea6a2-160">O processador de vídeo não aceita alterações de formato dinâmico iniciadas pelo filtro upstream.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-160">The Video Renderer does not accept dynamic format changes initiated by the upstream filter.</span></span>

<span data-ttu-id="ea6a2-161">Quando o processador de vídeo se desenha em uma superfície de sobreposição do DirectDraw, ele aloca um único buffer para seu PIN de entrada.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-161">When the Video Renderer draws to a DirectDraw overlay surface, it allocates a single buffer for its input pin.</span></span> <span data-ttu-id="ea6a2-162">Se o filtro upstream tentar forçar uma conexão usando vários buffers, o processador de vídeo não poderá usar a superfície de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="ea6a2-162">If the upstream filter attempts to force a connection using multiple buffers, the Video Renderer will be unable to use the overlay surface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ea6a2-163">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ea6a2-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ea6a2-164">Filtros do DirectShow</span><span class="sxs-lookup"><span data-stu-id="ea6a2-164">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 



