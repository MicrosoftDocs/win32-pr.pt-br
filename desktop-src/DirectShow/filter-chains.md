---
description: Cadeias de filtro
ms.assetid: c17b3b58-65ab-4e83-91f2-54a995f22ddf
title: Cadeias de filtro
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d22ee33f7bc24495bc5099d0abeca7b8c70bc6d4
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909054"
---
# <a name="filter-chains"></a><span data-ttu-id="ea11a-103">Cadeias de filtro</span><span class="sxs-lookup"><span data-stu-id="ea11a-103">Filter Chains</span></span>

<span data-ttu-id="ea11a-104">Uma *cadeia de filtro* é uma sequência de filtros que atende às seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="ea11a-104">A *filter chain* is a sequence of filters that meets the following conditions:</span></span>

-   <span data-ttu-id="ea11a-105">Cada filtro na cadeia tem, no máximo, um PIN de entrada conectado e um PIN de saída conectado.</span><span class="sxs-lookup"><span data-stu-id="ea11a-105">Each filter in the chain has at most one connected input pin and one connected output pin.</span></span>
-   <span data-ttu-id="ea11a-106">É possível percorrer cada filtro na cadeia sem atravessar filtros fora da cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-106">It is possible to traverse every filter in the chain without traversing filters outside the chain.</span></span>

<span data-ttu-id="ea11a-107">Por exemplo, no diagrama a seguir, os filtros A – B, C – D e F – G – H são cadeias de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-107">For example, in the following diagram, filters A–B, C–D, and F–G–H are filter chains.</span></span> <span data-ttu-id="ea11a-108">Cada Subcadeia em F – G – H (F – G e G – H) também é uma cadeia de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-108">Each subchain in F–G–H (F–G and G–H) is also a filter chain.</span></span> <span data-ttu-id="ea11a-109">Uma cadeia de filtros pode consistir em um único filtro, de modo que os filtros A, B, C, D, F, G e H também são cadeias de filtro distintas.</span><span class="sxs-lookup"><span data-stu-id="ea11a-109">A filter chain can consist of a single filter, so filters A, B, C, D, F, G, and H are also distinct filter chains.</span></span> <span data-ttu-id="ea11a-110">O filtro E tem duas conexões de entrada, portanto, qualquer sequência de filtros que inclua filtro E não é uma cadeia de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-110">Filter E has two input connections, so any sequence of filters that includes filter E is not a filter chain.</span></span>

![Cadeia de filtro (exemplo 1)](images/filter-chain1.png)

<span data-ttu-id="ea11a-112">A interface [**IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) fornece os seguintes métodos para controlar cadeias de filtro:</span><span class="sxs-lookup"><span data-stu-id="ea11a-112">The [**IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) interface provides the following methods for controlling filter chains:</span></span>



| <span data-ttu-id="ea11a-113">Label</span><span class="sxs-lookup"><span data-stu-id="ea11a-113">Label</span></span> | <span data-ttu-id="ea11a-114">Valor</span><span class="sxs-lookup"><span data-stu-id="ea11a-114">Value</span></span> |
|---------------------------------------------------------------|---------------------------------|
| [<span data-ttu-id="ea11a-115">**IFilterChain:: StartChain**</span><span class="sxs-lookup"><span data-stu-id="ea11a-115">**IFilterChain::StartChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-startchain)   | <span data-ttu-id="ea11a-116">Inicia uma cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-116">Starts a chain.</span></span>                 |
| [<span data-ttu-id="ea11a-117">**IFilterChain::StopChain**</span><span class="sxs-lookup"><span data-stu-id="ea11a-117">**IFilterChain::StopChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-stopchain)     | <span data-ttu-id="ea11a-118">Para uma cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-118">Stops a chain.</span></span>                  |
| [<span data-ttu-id="ea11a-119">**IFilterChain::P auseChain**</span><span class="sxs-lookup"><span data-stu-id="ea11a-119">**IFilterChain::PauseChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-pausechain)   | <span data-ttu-id="ea11a-120">Pausa uma cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-120">Pauses a chain.</span></span>                 |
| [<span data-ttu-id="ea11a-121">**IFilterChain::RemoveChain**</span><span class="sxs-lookup"><span data-stu-id="ea11a-121">**IFilterChain::RemoveChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-removechain) | <span data-ttu-id="ea11a-122">Remove uma cadeia do grafo.</span><span class="sxs-lookup"><span data-stu-id="ea11a-122">Removes a chain from the graph.</span></span> |



 

<span data-ttu-id="ea11a-123">Não há um método específico para adicionar uma cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-123">There is no specific method for adding a chain.</span></span> <span data-ttu-id="ea11a-124">Para adicionar uma cadeia, insira os novos filtros usando o método [**IFilterGraph:: addfiltro**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) .</span><span class="sxs-lookup"><span data-stu-id="ea11a-124">To add a chain, insert the new filters using the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="ea11a-125">Em seguida, conecte os filtros chamando [**IGraphBuilder:: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder:: render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)ou métodos semelhantes.</span><span class="sxs-lookup"><span data-stu-id="ea11a-125">Then connect the filters by calling [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render), or similar methods.</span></span>

<span data-ttu-id="ea11a-126">Quando o grafo estiver em execução, uma cadeia de filtro poderá alternar entre running e Stopped.</span><span class="sxs-lookup"><span data-stu-id="ea11a-126">When the graph is running, a filter chain can switch between running and stopped.</span></span> <span data-ttu-id="ea11a-127">Quando o grafo é pausado, ele pode alternar entre pausado e parado.</span><span class="sxs-lookup"><span data-stu-id="ea11a-127">When the graph is paused, it can switch between paused and stopped.</span></span> <span data-ttu-id="ea11a-128">Essas são as únicas transições de estado possíveis com cadeias de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-128">These are the only state transitions possible with filter chains.</span></span>

## <a name="filter-chain-guidelines"></a><span data-ttu-id="ea11a-129">Diretrizes de cadeia de filtro</span><span class="sxs-lookup"><span data-stu-id="ea11a-129">Filter Chain Guidelines</span></span>

<span data-ttu-id="ea11a-130">Quando você usa métodos **IFilterChain** , é importante certificar-se de que os filtros no grafo possam dar suporte a operações de encadeamento de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-130">When you use **IFilterChain** methods, it is important to make sure that the filters in the graph can support filter chaining operations.</span></span> <span data-ttu-id="ea11a-131">Caso contrário, você pode causar deadlocks ou erros de grafo.</span><span class="sxs-lookup"><span data-stu-id="ea11a-131">Otherwise, you might cause deadlocks or graph errors.</span></span> <span data-ttu-id="ea11a-132">Os filtros conectados à cadeia devem funcionar corretamente após o estado de alteração da cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-132">Filters connected to the chain must function correctly after the chain changes state.</span></span>

<span data-ttu-id="ea11a-133">A melhor maneira de usar o **IFilterChain** é com um conjunto de filtros que você criou especificamente para encadeamento.</span><span class="sxs-lookup"><span data-stu-id="ea11a-133">The best way to use **IFilterChain** is with a set of filters that you have designed specifically for chaining.</span></span> <span data-ttu-id="ea11a-134">Use as diretrizes a seguir para garantir que seus filtros sejam seguros para operações de cadeia de filtro.</span><span class="sxs-lookup"><span data-stu-id="ea11a-134">Use the following guidelines to ensure that your filters are safe for filter chain operations.</span></span> <span data-ttu-id="ea11a-135">Esses pontos se referem ao diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="ea11a-135">These points refer to the following diagram.</span></span>

![Cadeia de filtro (exemplo 2)](images/filter-chain2.png)

-   <span data-ttu-id="ea11a-137">Antes que o estado da cadeia de filtro seja alterado, todas as chamadas de processamento de dados no limite da cadeia de filtro devem ser concluídas.</span><span class="sxs-lookup"><span data-stu-id="ea11a-137">Before the filter chain's state changes, all data processing calls at the boundary of the filter chain must be completed.</span></span> <span data-ttu-id="ea11a-138">Essa regra se aplica aos métodos [**IMemInputPin:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin:: NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment)e [**IPin:: EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span><span class="sxs-lookup"><span data-stu-id="ea11a-138">This rule applies to the methods [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment), and [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span></span> <span data-ttu-id="ea11a-139">Os filtros na cadeia devem retornar de chamadas para esses métodos feitos por filtros fora da cadeia; e os filtros fora da cadeia devem retornar de chamadas feitas por filtros dentro da cadeia.</span><span class="sxs-lookup"><span data-stu-id="ea11a-139">Filters in the chain must return from calls to these methods made by filters outside the chain; and filters outside the chain must return from calls made by filters within the chain.</span></span>

<span data-ttu-id="ea11a-140">Por exemplo, no diagrama anterior, o filtro B deve concluir todas as chamadas de processamento de dados do filtro A e o filtro E deve concluir todas as chamadas do filtro D. Se os Pins expõem as interfaces [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) e [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) , você pode enviar os dados por Push por meio do grafo chamando os métodos [**IPinFlowControl:: Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) e [**IGraphConfig::P Ushthroughdata**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) , conforme descrito em [reconexão dinâmica](dynamic-reconnection.md).</span><span class="sxs-lookup"><span data-stu-id="ea11a-140">For example, in the previous diagram, filter B must complete any data processing calls from filter A, and filter E must finish any calls from filter D. If the pins expose the [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) and [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) interfaces, you can push the data through the graph by calling the [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) and [**IGraphConfig::PushThroughData**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) methods, as described in [Dynamic Reconnection](dynamic-reconnection.md).</span></span> <span data-ttu-id="ea11a-141">Os filtros também podem oferecer suporte a métodos privados para enviar os dados por push.</span><span class="sxs-lookup"><span data-stu-id="ea11a-141">Filters might also support private methods for pushing the data.</span></span>

-   <span data-ttu-id="ea11a-142">Os filtros upstream devem esperar que o estado da cadeia seja alterado.</span><span class="sxs-lookup"><span data-stu-id="ea11a-142">Upstream filters must expect the chain's state to change.</span></span> <span data-ttu-id="ea11a-143">Por exemplo, no diagrama anterior, suponha que a cadeia seja interrompida, mas filtre uma chamada **IMemInputPin:: Receive**.</span><span class="sxs-lookup"><span data-stu-id="ea11a-143">For example, in the previous diagram, suppose the chain is stopped but filter A calls **IMemInputPin::Receive**.</span></span> <span data-ttu-id="ea11a-144">A chamada falha e a resposta do filtro A é parar o streaming.</span><span class="sxs-lookup"><span data-stu-id="ea11a-144">The call fails and the response of filter A is to stop streaming.</span></span> <span data-ttu-id="ea11a-145">Quando o aplicativo reinicia a cadeia, ele não tem nenhum efeito porque o filtro A não está mais transmitindo dados.</span><span class="sxs-lookup"><span data-stu-id="ea11a-145">When the application restarts the chain, it has no effect because filter A is no longer streaming data.</span></span>
-   <span data-ttu-id="ea11a-146">Os filtros downstream também devem esperar que o estado da cadeia seja alterado.</span><span class="sxs-lookup"><span data-stu-id="ea11a-146">Downstream filters must also expect the chain's state to change.</span></span> <span data-ttu-id="ea11a-147">Caso contrário, o filtro downstream pode ser bloqueado enquanto aguarda amostras que nunca chegam.</span><span class="sxs-lookup"><span data-stu-id="ea11a-147">If not, the downstream filter might block while it waits for samples that never arrive.</span></span> <span data-ttu-id="ea11a-148">Por exemplo, os filtros multiplexadores (MUX) geralmente exigem dados de todos os seus PINs de entrada.</span><span class="sxs-lookup"><span data-stu-id="ea11a-148">For example, multiplexer (MUX) filters often require data from all of their input pins.</span></span> <span data-ttu-id="ea11a-149">A interrupção do fluxo de dados de um PIN de entrada pode impedir que os outros fluxos sejam processados.</span><span class="sxs-lookup"><span data-stu-id="ea11a-149">Halting the flow of data from one input pin might block the other streams from processing.</span></span> <span data-ttu-id="ea11a-150">Isso pode fazer com que o grafo seja bloqueado.</span><span class="sxs-lookup"><span data-stu-id="ea11a-150">This can cause the graph to deadlock.</span></span>
-   <span data-ttu-id="ea11a-151">Cada conexão de PIN de um filtro fora da cadeia para um filtro dentro da cadeia deve ter seu próprio alocador, que não é compartilhado por outras conexões.</span><span class="sxs-lookup"><span data-stu-id="ea11a-151">Each pin connection from a filter outside the chain to a filter within the chain should have its own allocator, which is not shared by other connections.</span></span> <span data-ttu-id="ea11a-152">Quando a cadeia muda de estado ou é removida do grafo, o alocador pode ser decomprometido.</span><span class="sxs-lookup"><span data-stu-id="ea11a-152">When the chain changes state or is removed from the graph, the allocator might be decommitted.</span></span> <span data-ttu-id="ea11a-153">Se outras conexões estiverem usando o mesmo alocador, elas não poderão mais processar amostras.</span><span class="sxs-lookup"><span data-stu-id="ea11a-153">If other connections were using the same allocator, they can no longer process samples.</span></span>
-   <span data-ttu-id="ea11a-154">Não remova uma cadeia, a menos que os filtros conectados à cadeia tenham suporte para desconexão dinâmica.</span><span class="sxs-lookup"><span data-stu-id="ea11a-154">Do not remove a chain unless the filters connected to the chain support dynamic disconnection.</span></span> <span data-ttu-id="ea11a-155">Em geral, os filtros conectados oferecerão suporte à interface **IPinConnection** ou **IPinFlowControl** , mas podem dar suporte a interfaces privadas.</span><span class="sxs-lookup"><span data-stu-id="ea11a-155">Typically, the connected filters will support the **IPinConnection** or **IPinFlowControl** interface, but might support private interfaces instead.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ea11a-156">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="ea11a-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ea11a-157">Criação de grafo dinâmico</span><span class="sxs-lookup"><span data-stu-id="ea11a-157">Dynamic Graph Building</span></span>](dynamic-graph-building.md)
</dt> </dl>

 

 



