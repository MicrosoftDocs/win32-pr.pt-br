---
description: Distribuidores de plug-in
ms.assetid: 80ff713d-f704-40d3-9317-cbf33d932207
title: Distribuidores de plug-in
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7817e5e31b29444cc596b0be583be2198adc018
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "105800051"
---
# <a name="plug-in-distributors"></a><span data-ttu-id="1a0d9-103">Distribuidores de plug-in</span><span class="sxs-lookup"><span data-stu-id="1a0d9-103">Plug-in Distributors</span></span>

<span data-ttu-id="1a0d9-104">Os distribuidores de plug-in (PIDs) são uma maneira de estender a funcionalidade do Gerenciador de gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-104">Plug-in distributors (PIDs) are a way to extend the functionality of the filter graph manager.</span></span> <span data-ttu-id="1a0d9-105">Um distribuidor de plug-in é um objeto COM que o Gerenciador do grafo de filtro agrega em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-105">A plug-in distributor is a COM object that the filter graph manager aggregates at run time.</span></span> <span data-ttu-id="1a0d9-106">Os aplicativos obtêm acesso ao PID por meio do Gerenciador do grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-106">Applications obtain access to the PID through the filter graph manager.</span></span>

<span data-ttu-id="1a0d9-107">Quando o Gerenciador de grafo de filtro é consultado em busca de uma interface para a qual não oferece suporte, ele pesquisa o registro em busca de uma chave com o seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="1a0d9-107">When the filter graph manager is queried for an interface that it does not support, it searches the registry for a key with the following form:</span></span>


```C++
HKEY_CLASSES_ROOT\Interface\IID\Distributor
```



<span data-ttu-id="1a0d9-108">`IID` é uma cadeia de caracteres que contém o identificador de interface.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-108">`IID` is a string containing the interface identifier.</span></span> <span data-ttu-id="1a0d9-109">Se a entrada do registro existir, o valor da entrada definirá o identificador de classe (CLSID) de um PID que dá suporte à interface.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-109">If the registry entry exists, the value of the entry defines the class identifier (CLSID) of a PID that supports the interface.</span></span> <span data-ttu-id="1a0d9-110">O Gerenciador de gráfico de filtro agrega a PID e retorna um ponteiro de interface, agindo assim como o **IUnknown** externo para o PID.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-110">The filter graph manager aggregates the PID and returns an interface pointer, thereby acting as the outer **IUnknown** for the PID.</span></span> <span data-ttu-id="1a0d9-111">Quando o aplicativo chama métodos na interface, ele está, na verdade, chamando-os na PID.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-111">When the application calls methods on the interface, it is actually calling them on the PID.</span></span> <span data-ttu-id="1a0d9-112">No entanto, a existência do PID é transparente para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-112">However, the existence of the PID is transparent to the application.</span></span>

<span data-ttu-id="1a0d9-113">O termo *distribuidor* origina-se do fato de que um PID pode consultar seu ponteiro de **IUnknown** externo para interfaces no Gerenciador do grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-113">The term *distributor* stems from the fact that a PID can query its outer **IUnknown** pointer for interfaces on the filter graph manager.</span></span> <span data-ttu-id="1a0d9-114">Chamando o método [**IFilterGraph:: EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) , o PID pode enumerar os filtros no grafo e distribuir chamadas de método para esses filtros.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-114">By calling the [**IFilterGraph::EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) method, the PID can enumerate the filters in the graph and distribute method calls to those filters.</span></span> <span data-ttu-id="1a0d9-115">Dessa forma, um PID pode servir como um único ponto de controle para que o aplicativo chame métodos em filtros.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-115">In this way, a PID can serve as a single control point for the application to call methods on filters.</span></span>

<span data-ttu-id="1a0d9-116">Quando o Gerenciador de gráfico de filtro agrega um PID, ele consulta o PID para a interface [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) .</span><span class="sxs-lookup"><span data-stu-id="1a0d9-116">When the filter graph manager aggregates a PID, it queries the PID for the [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) interface.</span></span> <span data-ttu-id="1a0d9-117">Se o PID der suporte a essa interface, o Gerenciador de gráfico de filtro o usará para notificar o PID sobre as alterações no grafo:</span><span class="sxs-lookup"><span data-stu-id="1a0d9-117">If the PID supports this interface, the filter graph manager uses it to notify the PID about changes in the graph:</span></span>

-   <span data-ttu-id="1a0d9-118">Quando o gráfico de filtro alterna entre os Estados de execução, pausa e parada, ele chama [**IDistributorNotify:: Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::P ause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause)ou [**IDistributorNotify:: Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span><span class="sxs-lookup"><span data-stu-id="1a0d9-118">When the filter graph switches between run, paused, and stopped states, it calls [**IDistributorNotify::Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::Pause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause), or [**IDistributorNotify::Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span></span>
-   <span data-ttu-id="1a0d9-119">Quando um relógio de referência é definido, o Gerenciador do grafo de filtro chama [**IDistributorNotify:: Setsyncname**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span><span class="sxs-lookup"><span data-stu-id="1a0d9-119">When a reference clock is set, the filter graph manager calls [**IDistributorNotify::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span></span>
-   <span data-ttu-id="1a0d9-120">Quando os filtros são adicionados ou removidos, ou as conexões de fixação são alteradas, o Gerenciador de grafo de filtro chama [**IDistributorNotify:: NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span><span class="sxs-lookup"><span data-stu-id="1a0d9-120">When filters are added or removed, or pin connections are changed, the filter graph manager calls [**IDistributorNotify::NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span></span>

<span data-ttu-id="1a0d9-121">Para implementar um PID personalizado, crie um objeto COM que ofereça suporte à agregação.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-121">To implement a custom PID, create a COM object that supports aggregation.</span></span> <span data-ttu-id="1a0d9-122">Ele deve dar suporte a uma interface que o Gerenciador de gráfico de filtro ainda não suporta.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-122">It must support an interface that the filter graph manager does not already support.</span></span> <span data-ttu-id="1a0d9-123">Opcionalmente, ele pode dar suporte à interface **IDistributorNotify** .</span><span class="sxs-lookup"><span data-stu-id="1a0d9-123">Optionally, it can support the **IDistributorNotify** interface.</span></span>

<span data-ttu-id="1a0d9-124">Se o PID obtiver qualquer ponteiro de interface do Gerenciador de gráfico de filtro, ele deverá liberá-los imediatamente.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-124">If the PID obtains any interface pointers from the filter graph manager, it should release them immediately.</span></span> <span data-ttu-id="1a0d9-125">Caso contrário, ele pode criar uma contagem de referência circular, o que pode impedir que o Gerenciador do grafo de filtro seja destruído.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-125">Otherwise, it might create a circular reference count, which could prevent the filter graph manager from being destroyed.</span></span> <span data-ttu-id="1a0d9-126">Manter uma contagem de referência no Gerenciador do grafo de filtro é desnecessário em qualquer caso, porque o Gerenciador do grafo de filtro controla o tempo de vida do PID.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-126">Holding a reference count on the filter graph manager is unnecessary in any case, because the filter graph manager controls the PID's lifetime.</span></span>

<span data-ttu-id="1a0d9-127">Como um PID é projetado especificamente para agregação pelo Gerenciador do grafo de filtro, talvez você queira impor isso no método de construtor da PID.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-127">Because a PID is designed specifically for aggregation by the filter graph manager, you might want to enforce this in the PID's constructor method.</span></span> <span data-ttu-id="1a0d9-128">Verifique se o ponteiro de **IUnknown** externo é **nulo** e, nesse caso, retorne o código de erro VFW \_ E precisa de \_ \_ proprietário.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-128">Check whether the outer **IUnknown** pointer is **NULL**, and if so, return the error code VFW\_E\_NEED\_OWNER.</span></span> <span data-ttu-id="1a0d9-129">(Consulte [códigos de erro e êxito](error-and-success-codes.md).) Além disso, para impedir que outros objetos agregam o PID, você pode consultar o ponteiro de **IUnknown** externo para a interface [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="1a0d9-129">(See [Error and Success Codes](error-and-success-codes.md).) Also, to prevent other objects from aggregating the PID, you can query the outer **IUnknown** pointer for the [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span> <span data-ttu-id="1a0d9-130">Retorna um código de erro se o objeto não expõe **IGraphBuilder**.</span><span class="sxs-lookup"><span data-stu-id="1a0d9-130">Return an error code if the object does not expose **IGraphBuilder**.</span></span>

 

 



