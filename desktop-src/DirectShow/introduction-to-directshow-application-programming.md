---
description: Introdução à programação de aplicativo do DirectShow
ms.assetid: 21a72efa-95df-4754-8304-ad56965a914d
title: Introdução à programação de aplicativo do DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f6218a346a7eb9711259c025aef09133ef2e58f6
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104370169"
---
# <a name="introduction-to-directshow-application-programming"></a><span data-ttu-id="f6101-103">Introdução à programação de aplicativo do DirectShow</span><span class="sxs-lookup"><span data-stu-id="f6101-103">Introduction to DirectShow Application Programming</span></span>

<span data-ttu-id="f6101-104">Este artigo apresenta a terminologia básica e os conceitos que são usados no DirectShow.</span><span class="sxs-lookup"><span data-stu-id="f6101-104">This article introduces the basic terminology and concepts that are used in DirectShow.</span></span> <span data-ttu-id="f6101-105">Depois de ler esta seção, você estará pronto para escrever seu primeiro aplicativo DirectShow.</span><span class="sxs-lookup"><span data-stu-id="f6101-105">After reading this section, you will be ready to write your first DirectShow application.</span></span>

<span data-ttu-id="f6101-106">**Filtros e gráficos de filtro**</span><span class="sxs-lookup"><span data-stu-id="f6101-106">**Filters and Filter Graphs**</span></span>

<span data-ttu-id="f6101-107">O bloco de construção do DirectShow é um componente de software chamado de *filtro*.</span><span class="sxs-lookup"><span data-stu-id="f6101-107">The building block of DirectShow is a software component called a *filter*.</span></span> <span data-ttu-id="f6101-108">Um filtro é um componente de software que executa alguma operação em um fluxo de multimídia.</span><span class="sxs-lookup"><span data-stu-id="f6101-108">A filter is a software component that performs some operation on a multimedia stream.</span></span> <span data-ttu-id="f6101-109">Por exemplo, os filtros do DirectShow podem</span><span class="sxs-lookup"><span data-stu-id="f6101-109">For example, DirectShow filters can</span></span>

-   <span data-ttu-id="f6101-110">ler arquivos</span><span class="sxs-lookup"><span data-stu-id="f6101-110">read files</span></span>
-   <span data-ttu-id="f6101-111">obter vídeo de um dispositivo de captura de vídeo</span><span class="sxs-lookup"><span data-stu-id="f6101-111">get video from a video capture device</span></span>
-   <span data-ttu-id="f6101-112">decodificar vários formatos de fluxo, como vídeo MPEG-1</span><span class="sxs-lookup"><span data-stu-id="f6101-112">decode various stream formats, such as MPEG-1 video</span></span>
-   <span data-ttu-id="f6101-113">passar dados para a placa gráfica ou de som</span><span class="sxs-lookup"><span data-stu-id="f6101-113">pass data to the graphics or sound card</span></span>

<span data-ttu-id="f6101-114">Os filtros recebem a entrada e produzem a saída.</span><span class="sxs-lookup"><span data-stu-id="f6101-114">Filters receive input and produce output.</span></span> <span data-ttu-id="f6101-115">Por exemplo, se um filtro decodifica o vídeo MPEG-1, a entrada é o fluxo codificado em MPEG e a saída é uma série de quadros de vídeo descompactados.</span><span class="sxs-lookup"><span data-stu-id="f6101-115">For example, if a filter decodes MPEG-1 video, the input is the MPEG-encoded stream and the output is a series of uncompressed video frames.</span></span>

<span data-ttu-id="f6101-116">No DirectShow, um aplicativo executa qualquer tarefa conectando cadeias de filtros em conjunto, para que a saída de um filtro se torne a entrada para outra.</span><span class="sxs-lookup"><span data-stu-id="f6101-116">In DirectShow, an application performs any task by connecting chains of filters together, so that the output from one filter becomes the input for another.</span></span> <span data-ttu-id="f6101-117">Um conjunto de filtros conectados é chamado de *grafo de filtro*.</span><span class="sxs-lookup"><span data-stu-id="f6101-117">A set of connected filters is called a *filter graph*.</span></span> <span data-ttu-id="f6101-118">Por exemplo, o diagrama a seguir mostra um gráfico de filtro para reproduzir um arquivo AVI.</span><span class="sxs-lookup"><span data-stu-id="f6101-118">For example, the following diagram shows a filter graph for playing an AVI file.</span></span>

![gráfico de filtro para reproduzir um arquivo AVI](images/avi-filter-graph.png)

<span data-ttu-id="f6101-120">O filtro de origem de arquivo lê o arquivo AVI do disco rígido.</span><span class="sxs-lookup"><span data-stu-id="f6101-120">The File Source filter reads the AVI file from the hard disk.</span></span> <span data-ttu-id="f6101-121">O filtro de Splitter AVI analisa o arquivo em dois fluxos, um fluxo de vídeo compactado e um fluxo de áudio.</span><span class="sxs-lookup"><span data-stu-id="f6101-121">The AVI Splitter filter parses the file into two streams, a compressed video stream and an audio stream.</span></span> <span data-ttu-id="f6101-122">O filtro de descompactação AVI decodifica os quadros de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f6101-122">The AVI Decompressor filter decodes the video frames.</span></span> <span data-ttu-id="f6101-123">O filtro de processador de vídeo desenha os quadros para a exibição, usando o DirectDraw ou GDI.</span><span class="sxs-lookup"><span data-stu-id="f6101-123">The Video Renderer filter draws the frames to the display, using DirectDraw or GDI.</span></span> <span data-ttu-id="f6101-124">O filtro de dispositivo DirectSound padrão desempenha o fluxo de áudio, usando o DirectSound.</span><span class="sxs-lookup"><span data-stu-id="f6101-124">The Default DirectSound Device filter plays the audio stream, using DirectSound.</span></span>

<span data-ttu-id="f6101-125">O aplicativo não precisa gerenciar todo esse fluxo de dados.</span><span class="sxs-lookup"><span data-stu-id="f6101-125">The application does not have to manage all of this data flow.</span></span> <span data-ttu-id="f6101-126">Em vez disso, os filtros são controlados por um componente de alto nível chamado Gerenciador de gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="f6101-126">Instead, the filters are controlled by a high-level component called the Filter Graph Manager.</span></span> <span data-ttu-id="f6101-127">O aplicativo faz chamadas de API de alto nível, como "Run" (para mover dados através do grafo) ou "Stop" (para interromper o fluxo de dados).</span><span class="sxs-lookup"><span data-stu-id="f6101-127">The application makes high-level API calls such as "Run" (to move data through the graph) or "Stop" (to stop the flow of data).</span></span> <span data-ttu-id="f6101-128">Se você precisar de mais controle sobre as operações de fluxo, poderá acessar os filtros diretamente por meio de interfaces COM.</span><span class="sxs-lookup"><span data-stu-id="f6101-128">If you require more control over the stream operations, you can access the filters directly through COM interfaces.</span></span> <span data-ttu-id="f6101-129">O Gerenciador de gráficos de filtro também passa notificações de eventos para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f6101-129">The Filter Graph Manager also passes event notifications to the application.</span></span>

<span data-ttu-id="f6101-130">O Gerenciador de gráfico de filtro também serve para outra finalidade: ele fornece métodos para que o aplicativo crie o gráfico de filtro, conectando os filtros juntos.</span><span class="sxs-lookup"><span data-stu-id="f6101-130">The Filter Graph Manager serves another purpose as well: It provides methods for the application to build the filter graph, by connecting the filters together.</span></span> <span data-ttu-id="f6101-131">(O DirectShow também fornece vários objetos auxiliares que simplificam esse processo.</span><span class="sxs-lookup"><span data-stu-id="f6101-131">(DirectShow also provides various helper objects that simplify this process.</span></span> <span data-ttu-id="f6101-132">Eles são descritos detalhadamente na documentação.)</span><span class="sxs-lookup"><span data-stu-id="f6101-132">These are thoroughly described in the documentation.)</span></span>

<span data-ttu-id="f6101-133">**Escrevendo um aplicativo do DirectShow**</span><span class="sxs-lookup"><span data-stu-id="f6101-133">**Writing a DirectShow Application**</span></span>

<span data-ttu-id="f6101-134">Em termos gerais, há três tarefas que qualquer aplicativo DirectShow deve executar.</span><span class="sxs-lookup"><span data-stu-id="f6101-134">In broad terms, there are three tasks that any DirectShow application must perform.</span></span> <span data-ttu-id="f6101-135">Eles são ilustrados no diagrama a seguir.</span><span class="sxs-lookup"><span data-stu-id="f6101-135">These are illustrated in the following diagram.</span></span>

![aplicativo DirectShow típico](images/fgm.png)

1.  <span data-ttu-id="f6101-137">O aplicativo cria uma instância do Gerenciador de gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="f6101-137">The application creates an instance of the Filter Graph Manager.</span></span>
2.  <span data-ttu-id="f6101-138">O aplicativo usa o Gerenciador de gráfico de filtro para criar um grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="f6101-138">The application uses the Filter Graph Manager to build a filter graph.</span></span> <span data-ttu-id="f6101-139">O conjunto exato de filtros no grafo dependerá do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f6101-139">The exact set of filters in the graph will depend on the application.</span></span>
3.  <span data-ttu-id="f6101-140">O aplicativo usa o Gerenciador de gráfico de filtro para controlar o grafo de filtro e transmitir dados por meio dos filtros.</span><span class="sxs-lookup"><span data-stu-id="f6101-140">The application uses the Filter Graph Manager to control the filter graph and stream data through the filters.</span></span> <span data-ttu-id="f6101-141">Durante todo esse processo, o aplicativo também responderá a eventos do Gerenciador do grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="f6101-141">Throughout this process, the application will also respond to events from the Filter Graph Manager.</span></span>

<span data-ttu-id="f6101-142">Quando o processamento é concluído, o aplicativo libera o Gerenciador do gráfico de filtro e todos os filtros.</span><span class="sxs-lookup"><span data-stu-id="f6101-142">When processing is completed, the application releases the Filter Graph Manager and all of the filters.</span></span>

<span data-ttu-id="f6101-143">O DirectShow é baseado em COM; o Gerenciador de gráficos de filtro e os filtros são todos os objetos COM.</span><span class="sxs-lookup"><span data-stu-id="f6101-143">DirectShow is based on COM; the Filter Graph Manager and the filters are all COM objects.</span></span> <span data-ttu-id="f6101-144">Você deve ter uma compreensão geral da programação de cliente COM antes de começar a programar o DirectShow.</span><span class="sxs-lookup"><span data-stu-id="f6101-144">You should have a general understanding of COM client programming before you begin programming DirectShow.</span></span> <span data-ttu-id="f6101-145">Muitos livros sobre a programação COM estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="f6101-145">Many books about COM programming are available.</span></span>

<span data-ttu-id="f6101-146">Para começar a usar o DirectShow, leia o artigo [como reproduzir um arquivo](how-to-play-a-file.md), que apresenta um aplicativo de console simples para reproduzir um arquivo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="f6101-146">To get started with DirectShow, read the article [How To Play a File](how-to-play-a-file.md), which presents a simple console application to play a video file.</span></span> <span data-ttu-id="f6101-147">A seção [sobre o DirectShow](about-directshow.md) explica a arquitetura do DirectShow mais detalhadamente, enquanto a seção [usando o DirectShow](using-directshow.md) examina os principais cenários com suporte do DirectShow, como captura, edição de vídeo, reprodução de DVD e televisão.</span><span class="sxs-lookup"><span data-stu-id="f6101-147">The section [About DirectShow](about-directshow.md) explains the DirectShow architecture in more detail, while the section [Using DirectShow](using-directshow.md) examines the major scenarios that are supported by DirectShow, such as capture, video editing, DVD playback, and television.</span></span>

 

 



