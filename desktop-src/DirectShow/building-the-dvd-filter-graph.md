---
description: Criando o grafo de filtro de DVD
ms.assetid: 1d2f8284-2deb-4207-b067-24a54d6b286c
title: Criando o grafo de filtro de DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 96d15c7d84ec138771e1f5da8be4270faae049cc
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104087870"
---
# <a name="building-the-dvd-filter-graph"></a><span data-ttu-id="e0d7b-103">Criando o grafo de filtro de DVD</span><span class="sxs-lookup"><span data-stu-id="e0d7b-103">Building the DVD Filter Graph</span></span>

<span data-ttu-id="e0d7b-104">Assim como ocorre com qualquer aplicativo do DirectShow, um aplicativo de reprodução de DVD começa criando um grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-104">As with any DirectShow application, a DVD playback application starts by building a filter graph.</span></span> <span data-ttu-id="e0d7b-105">O DirectShow fornece os seguintes componentes para reprodução de DVD:</span><span class="sxs-lookup"><span data-stu-id="e0d7b-105">DirectShow provides the following components for DVD playback:</span></span>

-   <span data-ttu-id="e0d7b-106">[Construtor de gráficos de DVD](dvd-graph-builder.md).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-106">[DVD Graph Builder](dvd-graph-builder.md).</span></span> <span data-ttu-id="e0d7b-107">Um objeto auxiliar que constrói o grafo de filtro.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-107">A helper object that constructs the filter graph.</span></span> <span data-ttu-id="e0d7b-108">Ele expõe a interface [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="e0d7b-108">It exposes the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) interface.</span></span>
-   <span data-ttu-id="e0d7b-109">Filtro de [navegador de DVD](dvd-navigator-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="e0d7b-109">[DVD Navigator](dvd-navigator-filter.md) filter.</span></span> <span data-ttu-id="e0d7b-110">Um filtro do DirectShow que manipula reprodução de DVD, navegação e outros comandos.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-110">A DirectShow filter that handles DVD playback, navigation, and other commands.</span></span>

<span data-ttu-id="e0d7b-111">A reprodução de DVD também requer um decodificador MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-111">DVD playback also requires an MPEG-2 decoder.</span></span> <span data-ttu-id="e0d7b-112">Os decodificadores de hardware e software MPEG-2 estão disponíveis de terceiros.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-112">Hardware and software MPEG-2 decoders are available from third parties.</span></span> <span data-ttu-id="e0d7b-113">Primeiro, crie uma instância do objeto Construtor de gráficos de DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-113">First, create an instance of the DVD Graph Builder object.</span></span>


```C++
IDvdGraphBuilder *pBuild = NULL;
hr = CoCreateInstance(CLSID_DvdGraphBuilder, NULL, 
    CLSCTX_INPROC_SERVER, IID_IDvdGraphBuilder, (void **)&pBuild);
```



<span data-ttu-id="e0d7b-114">Neste ponto, você pode selecionar e configurar o renderizador de vídeo antes de criar o restante do grafo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-114">At this point, you can select and configure the video renderer before you build the rest of the graph.</span></span> <span data-ttu-id="e0d7b-115">Essa etapa, que é opcional, é descrita mais detalhadamente na próxima seção.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-115">This step, which is optional, is described in more detail in the next section.</span></span> <span data-ttu-id="e0d7b-116">Se você omitir essa etapa, o construtor de gráficos de DVD selecionará um renderizador padrão.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-116">If you omit this step, the DVD Graph Builder selects a default renderer.</span></span> <span data-ttu-id="e0d7b-117">Em seguida, compile o grafo chamando o método [**IDvdGraphBuilder:: RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) .</span><span class="sxs-lookup"><span data-stu-id="e0d7b-117">Next, build the graph by calling the [**IDvdGraphBuilder::RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method.</span></span>


```C++
AM_DVD_RENDERSTATUS buildStatus;
hr = pBuild->RenderDvdVideoVolume(L"Z:\\video_ts", 0, &buildStatus);
```



<span data-ttu-id="e0d7b-118">O primeiro parâmetro é o nome de um diretório que contém os arquivos de DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-118">The first parameter is the name of a directory that contains the DVD files.</span></span> <span data-ttu-id="e0d7b-119">Em um disco DVD, esses arquivos residem em um diretório chamado vídeo \_ TS.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-119">On a DVD disc, these files reside in a directory named VIDEO\_TS.</span></span> <span data-ttu-id="e0d7b-120">Se o primeiro parâmetro for **nulo**, o construtor de gráficos de DVD usará a primeira unidade que contém um volume de DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-120">If the first parameter is **NULL**, the DVD Graph Builder uses the first drive that contains a DVD volume.</span></span>

<span data-ttu-id="e0d7b-121">O segundo parâmetro contém vários sinalizadores opcionais para escolher o tipo de decodificador (hardware ou software) e outras opções.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-121">The second parameter contains various optional flags for choosing the type of decoder (hardware or software) and other options.</span></span>

<span data-ttu-id="e0d7b-122">O terceiro parâmetro é uma [**estrutura \_ \_ RENDERSTATUS de DVD am**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) que recebe informações de status.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-122">The third parameter is an [**AM\_DVD\_RENDERSTATUS**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) structure that receives status information.</span></span> <span data-ttu-id="e0d7b-123">Se o método [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) retornar S \_ false, isso significa que a chamada foi parcialmente bem-sucedida (ou com falha parcial, se você for um pessimista).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-123">If the [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method returns S\_FALSE, it means the call partially succeeded (or partially failed, if you're a pessimist).</span></span> <span data-ttu-id="e0d7b-124">Por exemplo, o método pode falhar ao renderizar o fluxo de subimagem, embora os outros fluxos sejam renderizados com êxito.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-124">For example, the method might fail to render the subpicture stream, even though the other streams rendered successfully.</span></span> <span data-ttu-id="e0d7b-125">Se o método **RenderDvdVideoVolume** retornar um código de erro ou o valor S \_ false, você poderá examinar a estrutura **am \_ DVD \_ RENDERSTATUS** para obter detalhes sobre o erro.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-125">If the **RenderDvdVideoVolume** method returns an error code or the value S\_FALSE, you can examine the **AM\_DVD\_RENDERSTATUS** structure for details about the error.</span></span>

<span data-ttu-id="e0d7b-126">Em seguida, obtenha um ponteiro para o Gerenciador do grafo de filtro chamando [**IDvdGraphBuilder:: GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-126">Next, get a pointer to the Filter Graph Manager by calling [**IDvdGraphBuilder::GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span></span> <span data-ttu-id="e0d7b-127">Esse método retorna um ponteiro para a interface [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) do Gerenciador de gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-127">This method returns a pointer to the Filter Graph Manager's [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span>


```C++
IGraphBuilder *pGraph = NULL;
hr =  pBuild->GetFiltergraph(&m_pGraph);
```



<span data-ttu-id="e0d7b-128">Use o método [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) para recuperar interfaces relacionadas a DVD, incluindo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e0d7b-128">Use the [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) method to retrieve DVD-related interfaces, including the following:</span></span>

-   <span data-ttu-id="e0d7b-129">[**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-129">[**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span></span> <span data-ttu-id="e0d7b-130">Controla reprodução e comandos de DVD</span><span class="sxs-lookup"><span data-stu-id="e0d7b-130">Controls playback and DVD commands</span></span>
-   <span data-ttu-id="e0d7b-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span></span> <span data-ttu-id="e0d7b-132">Retorna informações sobre o estado atual do navegador de DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-132">Returns information about the DVD Navigator's current state.</span></span>
-   <span data-ttu-id="e0d7b-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span></span> <span data-ttu-id="e0d7b-134">Controla a exibição da legenda oculta.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-134">Controls closed caption display.</span></span> <span data-ttu-id="e0d7b-135">A exibição de legenda oculta está habilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-135">Closed caption display is enabled by default.</span></span> <span data-ttu-id="e0d7b-136">Para desabilitá-lo, chame [**IAMLine21Decoder:: Setservicestate**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) com o \_ sinalizador am L21 \_ CCSTATE \_ off.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-136">To disable it, call [**IAMLine21Decoder::SetServiceState**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) with the AM\_L21\_CCSTATE\_Off flag.</span></span>
-   <span data-ttu-id="e0d7b-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span></span> <span data-ttu-id="e0d7b-138">Controla o volume e o equilíbrio de áudio.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-138">Controls audio volume and balance.</span></span>

<span data-ttu-id="e0d7b-139">Por exemplo, o código a seguir retorna a interface [**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) .</span><span class="sxs-lookup"><span data-stu-id="e0d7b-139">For example, the following code returns the [**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) interface.</span></span>


```C++
IDvdControl2 *pDvdControl = NULL;
hr = pBuild->GetDvdInterface(IID_IDvdControl2, (void**)&pDvdControl);
```



<span data-ttu-id="e0d7b-140">A maneira recomendada para criar o grafo de filtro de reprodução de DVD é ter um objeto do [Construtor de gráficos de DVD](dvd-graph-builder.md) para fazer isso automaticamente.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-140">The recommended way to build the DVD playback filter graph is to have a [DVD Graph Builder](dvd-graph-builder.md) object do it for you automatically.</span></span> <span data-ttu-id="e0d7b-141">Essa abordagem é demonstrada abaixo e no aplicativo de exemplo de DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-141">This approach is demonstrated below and in the DVD sample application.</span></span> <span data-ttu-id="e0d7b-142">Se você precisar criar o grafo de filtro de DVD manualmente, poderá fazer isso seguindo as regras básicas de criação de grafo discutidas em outro lugar na documentação do DirectShow.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-142">If you need to build your DVD filter graph manually, you can do so by following the basic rules of graph building discussed elsewhere in the DirectShow documentation.</span></span> <span data-ttu-id="e0d7b-143">Em geral, você não deve adicionar, remover, conectar ou desconectar manualmente filtros individuais no grafo criado pelo construtor de gráficos de DVD, pois isso pode confundir o código de limpeza.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-143">Generally, you should not manually add, remove, connect, or disconnect individual filters in the graph created by the DVD Graph Builder, because doing so might confuse the cleanup code.</span></span>

<span data-ttu-id="e0d7b-144">Configurando o processador de vídeo</span><span class="sxs-lookup"><span data-stu-id="e0d7b-144">Configuring the Video Renderer</span></span>

<span data-ttu-id="e0d7b-145">O DirectShow fornece vários filtros de processador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-145">DirectShow provides several video renderer filters.</span></span> <span data-ttu-id="e0d7b-146">Antes de criar o grafo, você pode escolher o processador de vídeo que preferir.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-146">Before you build the graph, you can chose which video renderer you prefer.</span></span> <span data-ttu-id="e0d7b-147">Selecione o renderizador chamando [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) e solicitando uma interface que seja específica para esse renderizador:</span><span class="sxs-lookup"><span data-stu-id="e0d7b-147">Select the renderer by calling [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) and requesting an interface that is specific to that renderer:</span></span>

-   <span data-ttu-id="e0d7b-148">Filtro de mixer de sobreposição: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-148">Overlay Mixer Filter: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span></span>
-   <span data-ttu-id="e0d7b-149">Processador de mixagem de vídeo 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-149">Video Mixing Renderer 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span></span>
-   <span data-ttu-id="e0d7b-150">Processador de mixagem de vídeo 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-150">Video Mixing Renderer 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span></span>
-   <span data-ttu-id="e0d7b-151">Processador de vídeo avançado (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-151">Enhanced Video Renderer (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span></span>

<span data-ttu-id="e0d7b-152">Se você solicitar qualquer uma dessas interfaces antes de criar o grafo de filtro, o construtor de gráficos de DVD criará o renderizador de vídeo correspondente.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-152">If you request any of these interfaces before building the filter graph, the DVD Graph Builder creates the corresponding video renderer.</span></span> <span data-ttu-id="e0d7b-153">Posteriormente, quando você criar o grafo, o construtor de gráficos de DVD tentará usar esse processador.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-153">Later, when you build the graph, the DVD Graph Builder will try to use that renderer.</span></span> <span data-ttu-id="e0d7b-154">Mas se não for possível criar o grafo usando o renderizador selecionado, ele poderá mudar para outro processador.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-154">But if it cannot build the graph using the renderer you selected, it may switch to another renderer.</span></span> <span data-ttu-id="e0d7b-155">Por exemplo, o decodificador MPEG-2 pode não ser compatível com o filtro VMR; nesse caso, o construtor de gráficos de DVD usará como padrão o mixer de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-155">For example, your MPEG-2 decoder might not be compatible with the VMR filter, in which case the DVD Graph Builder would default to the Overlay Mixer.</span></span>

<span data-ttu-id="e0d7b-156">Essas interfaces também lhe dão a oportunidade de configurar o renderizador antes que ele seja conectado ao decodificador.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-156">These interfaces also give you a chance to configure the renderer before it is connected to the decoder.</span></span> <span data-ttu-id="e0d7b-157">Por exemplo, você pode definir o VMR para usar o modo sem janela em vez do modo de janela padrão.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-157">For example, you can set the VMR to use windowless mode instead of the default windowed mode.</span></span> <span data-ttu-id="e0d7b-158">Para obter mais informações sobre renderizadores de vídeo, consulte o tópico [sobre a renderização de vídeo no DirectShow](about-video-rendering-in-directshow.md).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-158">For more information about video renderers, see the topic [About Video Rendering in DirectShow](about-video-rendering-in-directshow.md).</span></span>

<span data-ttu-id="e0d7b-159">No Windows XP e posterior, o construtor de gráficos de DVD sempre usa o [processador de mixagem de vídeo 7](video-mixing-renderer-filter-7.md) (VMR-7), a menos que:</span><span class="sxs-lookup"><span data-stu-id="e0d7b-159">On Windows XP and later, the DVD Graph Builder always uses the [Video Mixing Renderer 7](video-mixing-renderer-filter-7.md) (VMR-7), unless:</span></span>

-   <span data-ttu-id="e0d7b-160">O chamador consulta as interfaces que encontraram apenas o [mixer de sobreposição](overlay-mixer-filter.md), como [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-160">The caller queries interfaces found only the [Overlay Mixer](overlay-mixer-filter.md), such as [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span></span> <span data-ttu-id="e0d7b-161">Isso envia uma dica ao construtor de gráficos de DVD que o aplicativo deseja usar o mixer de sobreposição e não o VMR.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-161">This sends a hint to the DVD Graph Builder that the application wants to use the Overlay Mixer and not the VMR.</span></span> <span data-ttu-id="e0d7b-162">O Windows Media Player também tem uma opção de caixa de diálogo para forçar o uso do mixer de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-162">Windows Media Player also has a dialog box option to force the use of the Overlay Mixer.</span></span>
-   <span data-ttu-id="e0d7b-163">O decodificador instalado não é compatível com o VMR.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-163">The installed decoder is not VMR-compatible.</span></span> <span data-ttu-id="e0d7b-164">Durante a criação do grafo, a nova interface [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) é usada para verificar o suporte do VMR do decodificador.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-164">During graph building, the new [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) interface is used to check for the decoder's VMR support.</span></span> <span data-ttu-id="e0d7b-165">Se isso não estiver presente, o construtor de gráficos de DVD usará o mixer de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-165">If that is not present, the DVD Graph Builder will use the Overlay Mixer.</span></span>
-   <span data-ttu-id="e0d7b-166">Ao usar um decodificador de hardware, o decodificador não pode se conectar ao VPM ( [Video Port Manager](video-port-manager.md) ).</span><span class="sxs-lookup"><span data-stu-id="e0d7b-166">While using a hardware decoder, the decoder cannot connect to the [Video Port Manager](video-port-manager.md) (VPM).</span></span> <span data-ttu-id="e0d7b-167">Se um decodificador de hardware não puder usar o VPM, ele não poderá usar o VMR e, portanto, o construtor de gráficos de DVD tentará criar um grafo usando o mixer de sobreposição.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-167">If a hardware decoder cannot use the VPM, then it cannot use the VMR, and so the DVD Graph Builder then tries to build a graph using the Overlay Mixer.</span></span>
-   <span data-ttu-id="e0d7b-168">O cartão de vídeo é conhecido por ter recursos e/ou recursos insuficientes para dar suporte ao VMR, mas não relata corretamente isso no driver.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-168">The display card is known to have insufficient resources and/or capabilities to support the VMR but does not correctly report this in the driver.</span></span> <span data-ttu-id="e0d7b-169">(Alguns casos conhecidos são especificamente excluídos pelo construtor de gráficos de DVD.)</span><span class="sxs-lookup"><span data-stu-id="e0d7b-169">(Some known cases are specifically excluded by the DVD Graph Builder.)</span></span>
-   <span data-ttu-id="e0d7b-170">A conexão entre o decodificador e o VMR falha por qualquer motivo, geralmente devido à falta de VRAM para criar as superfícies necessárias.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-170">The connection between the decoder and the VMR fails for any reason, usually due to a lack of VRAM to create the necessary surfaces.</span></span> <span data-ttu-id="e0d7b-171">Nesses casos, o construtor de gráficos de DVD alterna o uso do VMR e tenta usar o mixer de sobreposição para criar um grafo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-171">In these cases, the DVD Graph Builder switches off VMR use and tries to use the Overlay Mixer to build a graph.</span></span>

<span data-ttu-id="e0d7b-172">Modo em janela</span><span class="sxs-lookup"><span data-stu-id="e0d7b-172">Windowed Mode</span></span>

<span data-ttu-id="e0d7b-173">No modo de janela (mixer de sobreposição ou VMR), o renderizador cria sua própria janela de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-173">In windowed mode (Overlay Mixer or VMR), the renderer creates its own video window.</span></span> <span data-ttu-id="e0d7b-174">Para tornar essa janela um filho da janela do aplicativo, chame [**IVideoWindow::p o \_ proprietário de UT**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) com um identificador para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-174">To make this window a child of the application window, call [**IVideoWindow::put\_Owner**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) with a handle to the application.</span></span> <span data-ttu-id="e0d7b-175">Além disso, chame [**IVideoWindow::p UT \_ WindowStyle**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) para definir os estilos WS- \_ Child e WS \_ CLIPSIBLINGS na janela de vídeo do processador.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-175">Also call [**IVideoWindow::put\_WindowStyle**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) to set the WS\_CHILD and WS\_CLIPSIBLINGS styles on the renderer's video window.</span></span> <span data-ttu-id="e0d7b-176">Para obter mensagens do mouse na janela de vídeo do renderizador, chame [**IVideoWindow::p UT \_ MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) com um identificador para a janela do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-176">To get mouse messages from the renderer's video window, call [**IVideoWindow::put\_MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) with a handle to the application window.</span></span> <span data-ttu-id="e0d7b-177">Esse método configura uma "drenagem de mensagem" – a janela de vídeo encaminha todas as mensagens do mouse que ele recebe para a janela de drenagem de mensagem.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-177">This method sets up a "message drain" — the video window forwards any mouse messages it receives to the message drain window.</span></span>


```C++
pVideoWindow->put_Owner((OAHWND)hwnd);
pVideoWindow->put_WindowStyle(WS_CHILD | WS_CLIPSIBLINGS);
pVideoWindow->put_MessageDrain((OAHWND)hwnd) ;
```



<span data-ttu-id="e0d7b-178">A mensagem drena torna a seleção de botões de menu de DVD um pouco complicada.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-178">The message drain makes selecting DVD menu buttons somewhat complicated.</span></span> <span data-ttu-id="e0d7b-179">Supondo que a janela de vídeo não preencha a área de cliente inteira do aplicativo, alguns eventos do mouse ficarão fora da janela de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-179">Assuming the video window does not fill the application's entire client area, some mouse events will fall outside the video window.</span></span> <span data-ttu-id="e0d7b-180">Quando você recebe um evento de mouse de *dentro* da janela de vídeo, você deve processá-lo para navegação de menu do DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-180">When you get a mouse event from *inside* the video window, you should process it for DVD menu navigation.</span></span> <span data-ttu-id="e0d7b-181">Eventos de mouse de *fora* da janela de vídeo não devem ser processados.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-181">Mouse events from *outside* the video window should not be processed.</span></span> <span data-ttu-id="e0d7b-182">Com o dreno da mensagem, não há como distinguir entre os dois.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-182">With the message drain, there is no way to distinguish between the two.</span></span> <span data-ttu-id="e0d7b-183">Além disso, as coordenadas para eventos de mouse da janela de vídeo são relativas à área de cliente da janela de vídeo; Mas eventos de mouse de fora da janela de vídeo são relativos à área do cliente do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-183">Furthermore, the coordinates for mouse events from the video window are relative to the video window's client area; but mouse events from outside the video window are relative to the application's client area.</span></span>

<span data-ttu-id="e0d7b-184">Modo sem janela</span><span class="sxs-lookup"><span data-stu-id="e0d7b-184">Windowless Mode</span></span>

<span data-ttu-id="e0d7b-185">O modo sem janela evita os problemas com as mensagens do mouse completamente.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-185">Windowless mode avoids the problems with mouse messages altogether.</span></span> <span data-ttu-id="e0d7b-186">Você não precisa de uma drenagem de mensagem porque o VMR (ou EVR) não cria sua própria janela no modo sem janela.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-186">You do not need a message drain, because the VMR (or EVR) does not create its own window in windowless mode.</span></span> <span data-ttu-id="e0d7b-187">Em vez disso, ele é desenhado diretamente na janela do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-187">Instead, it draws directly onto your application window.</span></span> <span data-ttu-id="e0d7b-188">Se o retângulo de destino for menor do que a área do cliente do aplicativo, o navegador de DVD levará isso em conta quando calcular as posições do botão DVD.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-188">If the destination rectangle is smaller than the application client area, the DVD Navigator takes this into account when it calculates the DVD button positions.</span></span> <span data-ttu-id="e0d7b-189">Portanto, quando você recebe uma mensagem de mouse, pode passar as coordenadas diretamente para o navegador de DVD, conforme descrito na seção navegação de menu.</span><span class="sxs-lookup"><span data-stu-id="e0d7b-189">Therefore, when you get a mouse message, you can pass the coordinates directly to the DVD Navigator, as described in the section Menu Navigation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e0d7b-190">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="e0d7b-190">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e0d7b-191">Aplicativos de DVD</span><span class="sxs-lookup"><span data-stu-id="e0d7b-191">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 
