---
description: Retângulos de origem e de destino em renderizadores de vídeo
ms.assetid: fdddbffb-c44f-4364-9e2e-b721ba39c74f
title: Retângulos de origem e de destino em renderizadores de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 556aea6aad22e5ea6df61c74ed0a46d2e3984d67
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/06/2021
ms.locfileid: "104500505"
---
# <a name="source-and-target-rectangles-in-video-renderers"></a><span data-ttu-id="2c57d-103">Retângulos de origem e de destino em renderizadores de vídeo</span><span class="sxs-lookup"><span data-stu-id="2c57d-103">Source and Target Rectangles in Video Renderers</span></span>

<span data-ttu-id="2c57d-104">Há três tamanhos encontrados nas estruturas de formato [**VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader)e [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) dos tipos de mídia de vídeo.</span><span class="sxs-lookup"><span data-stu-id="2c57d-104">There are three sizes found in the [**VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), and [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) format structures of video media types.</span></span> <span data-ttu-id="2c57d-105">Este artigo explica o que eles são e como eles funcionam.</span><span class="sxs-lookup"><span data-stu-id="2c57d-105">This article explains what they are and how they work.</span></span>

<span data-ttu-id="2c57d-106">Primeiro, há um tamanho no membro **bmiHeader** dessas estruturas.</span><span class="sxs-lookup"><span data-stu-id="2c57d-106">First, there is a size in the **bmiHeader** member of these structures.</span></span> <span data-ttu-id="2c57d-107">O membro **bmiHeader** é uma estrutura [**BITMAPINFOHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader) com seus próprios membros de largura e altura, **BmiHeader. biWidth** e **bmiHeader. biHeight**.</span><span class="sxs-lookup"><span data-stu-id="2c57d-107">The **bmiHeader** member is a [**BITMAPINFOHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfoheader) structure with its own width and height members, **bmiHeader.biWidth** and **bmiHeader.biHeight**.</span></span>

<span data-ttu-id="2c57d-108">Em segundo lugar, há um retângulo no membro **rcSource** dessas estruturas; e, por fim, há um retângulo no membro **rcTarget** dessas estruturas.</span><span class="sxs-lookup"><span data-stu-id="2c57d-108">Second, there is a rectangle in the **rcSource** member of these structures; and last, there is a rectangle in the **rcTarget** member of these structures.</span></span>

<span data-ttu-id="2c57d-109">Suponha que você tenha dois filtros, A e B, e que esses filtros estejam conectados entre si (um à esquerda, ou upstream, e B à direita ou downstream) com um determinado tipo de mídia de vídeo.</span><span class="sxs-lookup"><span data-stu-id="2c57d-109">Assume you have two filters, A and B, and that these filters are connected to each other (A on the left, or upstream, and B on the right, or downstream) with a certain video media type.</span></span>

<span data-ttu-id="2c57d-110">Os buffers que passam entre os filtros A e B têm o tamanho (**bmiHeader. bilargura**, **BmiHeader. biHeight**).</span><span class="sxs-lookup"><span data-stu-id="2c57d-110">The buffers that pass between filters A and B have the size (**bmiHeader.biWidth**, **bmiHeader.biHeight**).</span></span> <span data-ttu-id="2c57d-111">Filtrar um deve usar uma parte de seu vídeo de entrada determinado por **rcSource** e alongar esse vídeo para preencher a parte **rcTarget** do buffer.</span><span class="sxs-lookup"><span data-stu-id="2c57d-111">Filter A should take a portion of its input video determined by **rcSource** and stretch that video to fill the **rcTarget** portion of the buffer.</span></span> <span data-ttu-id="2c57d-112">A parte do vídeo de entrada a ser usada baseia-se em como o **rcSource** se compara com o tamanho (**bilargura**, **bialtura**) do tipo de mídia que filtra a e B conectado originalmente com.</span><span class="sxs-lookup"><span data-stu-id="2c57d-112">The portion of the input video to use is based on how **rcSource** compares to the (**biWidth**, **biHeight**) size of the media type that filters A and B originally connected with.</span></span> <span data-ttu-id="2c57d-113">Se **rcSource** estiver vazio, o filtro A usará todo o vídeo de entrada.</span><span class="sxs-lookup"><span data-stu-id="2c57d-113">If **rcSource** is empty, filter A uses its entire input video.</span></span> <span data-ttu-id="2c57d-114">Se **rcTarget** estiver vazio, filtrar um preencherá todo o buffer de saída.</span><span class="sxs-lookup"><span data-stu-id="2c57d-114">If **rcTarget** is empty, filter A fills the entire output buffer.</span></span>

<span data-ttu-id="2c57d-115">Por exemplo, suponha que o filtro A esteja recebendo dados de vídeo com 160 x 120 pixels.</span><span class="sxs-lookup"><span data-stu-id="2c57d-115">For example, assume filter A is receiving video data that is 160 x 120 pixels.</span></span> <span data-ttu-id="2c57d-116">Suponha também que o filtro A está conectado ao filtro B com o tipo de mídia a seguir.</span><span class="sxs-lookup"><span data-stu-id="2c57d-116">Assume also that filter A is connected to filter B with the following media type.</span></span>

-   <span data-ttu-id="2c57d-117">(**bilargura**, **biHeight**): 320, 240</span><span class="sxs-lookup"><span data-stu-id="2c57d-117">(**biWidth**, **biHeight**): 320, 240</span></span>
-   <span data-ttu-id="2c57d-118">**rcSource**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="2c57d-118">**rcSource**: (0, 0, 0, 0)</span></span>
-   <span data-ttu-id="2c57d-119">**rcTarget**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="2c57d-119">**rcTarget**: (0, 0, 0, 0)</span></span>

<span data-ttu-id="2c57d-120">Isso significa que o filtro a vai alongar o vídeo recebido por 2 nas direções x e y e preencher um buffer de saída 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="2c57d-120">This means that filter A will stretch the video it receives by 2 in both the x and y directions, and fill a 320 x 240 output buffer.</span></span>

<span data-ttu-id="2c57d-121">Como outro exemplo, suponha que o filtro A esteja recebendo dados de vídeo 160 x 120 e que esteja conectado ao filtro B com o seguinte tipo de mídia.</span><span class="sxs-lookup"><span data-stu-id="2c57d-121">As another example, assume filter A is receiving 160 x 120 video data, and that it is connected to filter B with the following media type.</span></span>

-   <span data-ttu-id="2c57d-122">(**bilargura**, **biHeight**): 320, 240</span><span class="sxs-lookup"><span data-stu-id="2c57d-122">(**biWidth**, **biHeight**): 320, 240</span></span>
-   <span data-ttu-id="2c57d-123">**rcSource**: (0, 0, 160, 240)</span><span class="sxs-lookup"><span data-stu-id="2c57d-123">**rcSource**: (0, 0, 160, 240)</span></span>
-   <span data-ttu-id="2c57d-124">**rcTarget**: (0, 0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="2c57d-124">**rcTarget**: (0, 0, 0, 0)</span></span>

<span data-ttu-id="2c57d-125">O membro **rcSource** é relativo ao tamanho do buffer conectado de 320, 240.</span><span class="sxs-lookup"><span data-stu-id="2c57d-125">The **rcSource** member is relative to the connected buffer size of 320, 240.</span></span> <span data-ttu-id="2c57d-126">Porque o **rcSource** especificado (0, 0, 160, 240) é a metade esquerda do buffer, o filtro a terá a metade esquerda de seu vídeo de entrada ou a parte (0, 0, 80, 120) e alongará o vídeo para um tamanho de (320, 240) (por 4 na direção x e por 2 na direção y) e preenchendo o buffer de saída 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="2c57d-126">Because the specified **rcSource** (0, 0, 160, 240) is the left half of the buffer, filter A will take the left half of its input video, or the (0, 0, 80, 120) portion, and stretch the video to a size of (320, 240) (by 4 in the x direction, and by 2 in the y direction) and filling the 320 x 240 output buffer.</span></span>

<span data-ttu-id="2c57d-127">Agora suponha que o filtro A chama [**CBaseAllocator:: GetBuffer**](cbaseallocator-getbuffer.md)e o exemplo de mídia retornado tenha um tipo de mídia anexado a ele, o que significa que o filtro B deseja filtrar um para fornecer um tamanho ou tipo de vídeo diferente do que o fornecido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="2c57d-127">Now assume that filter A calls [**CBaseAllocator::GetBuffer**](cbaseallocator-getbuffer.md), and the media sample returned has a media type attached to it, signifying that filter B wants filter A to provide a different size or kind of video than it has previously been providing.</span></span> <span data-ttu-id="2c57d-128">Suponha que o novo tipo de mídia seja:</span><span class="sxs-lookup"><span data-stu-id="2c57d-128">Assume the new media type is:</span></span>

-   <span data-ttu-id="2c57d-129">(**bilargura**, **biHeight**): 640, 480</span><span class="sxs-lookup"><span data-stu-id="2c57d-129">(**biWidth**, **biHeight**): 640, 480</span></span>
-   <span data-ttu-id="2c57d-130">**rcSource**: (0, 0, 160, 120)</span><span class="sxs-lookup"><span data-stu-id="2c57d-130">**rcSource**: (0, 0, 160, 120)</span></span>
-   <span data-ttu-id="2c57d-131">**rcTarget**: (0, 0, 80, 60)</span><span class="sxs-lookup"><span data-stu-id="2c57d-131">**rcTarget**: (0, 0, 80, 60)</span></span>

<span data-ttu-id="2c57d-132">Isso significa que o exemplo de mídia tem um buffer que tem 640 x 480 de tamanho.</span><span class="sxs-lookup"><span data-stu-id="2c57d-132">This means that the media sample has a buffer that is 640 x 480 in size.</span></span> <span data-ttu-id="2c57d-133">O membro **rcSource** é relativo ao tipo de mídia original conectada (320, 240) para o novo tipo de mídia de (640, 480); portanto, **rcSource** especifica que o canto superior esquerdo (25%) do vídeo de entrada deve ser usado.</span><span class="sxs-lookup"><span data-stu-id="2c57d-133">The **rcSource** member is relative to the original connected media type (320, 240) not to the new media type of (640, 480), so **rcSource** specifies that the top-left corner (25%) of the input video is to be used.</span></span> <span data-ttu-id="2c57d-134">Essa parte do vídeo de entrada é colocada nos pixels superior esquerdo (80, 60) do buffer de saída 640 x 480, conforme especificado por **rcTarget** de (0, 0, 80, 60).</span><span class="sxs-lookup"><span data-stu-id="2c57d-134">This portion of the input video is placed in the top-left (80, 60) pixels of the 640 x 480 output buffer, as specified by **rcTarget** of (0, 0, 80, 60).</span></span> <span data-ttu-id="2c57d-135">Como o filtro A está recebendo 160 x 120 vídeo, o canto superior esquerdo do vídeo de entrada é uma parte (80, 60), o mesmo tamanho do bitmap de saída e nenhum alargamento é necessário.</span><span class="sxs-lookup"><span data-stu-id="2c57d-135">Because filter A is receiving 160 x 120 video, the top-left corner of the input video is an (80, 60) piece, the same size of the output bitmap, and no stretching is required.</span></span>

<span data-ttu-id="2c57d-136">Filtrar um não colocará nenhum dado nos outros pixels do buffer de saída e deixará esses bits inalterados.</span><span class="sxs-lookup"><span data-stu-id="2c57d-136">Filter A will place no data in the other pixels of the output buffer, and will leave those bits untouched.</span></span> <span data-ttu-id="2c57d-137">O membro **rcSource** é limitado pela **bilargura** e pela **altura** do tipo de mídia original conectada entre os filtros A e B, e **rcTarget** é limitado pela nova **bilargura** e pela mesma **altura** do exemplo de mídia.</span><span class="sxs-lookup"><span data-stu-id="2c57d-137">The **rcSource** member is bounded by the **biWidth** and **biHeight** of the original connected media type between filters A and B, and **rcTarget** is bounded by the new **biWidth** and **biHeight** of the media sample.</span></span> <span data-ttu-id="2c57d-138">No exemplo anterior, **rcSource** não pôde ficar fora dos limites de (0, 0, 320, 240) e **rcTarget** não pôde ficar fora dos limites de (0, 0, 640, 480).</span><span class="sxs-lookup"><span data-stu-id="2c57d-138">In the preceding example, **rcSource** could not go outside the boundaries of (0, 0, 320, 240) and **rcTarget** could not go outside the boundaries of (0, 0, 640, 480).</span></span>

 

 



