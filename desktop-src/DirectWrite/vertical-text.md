---
title: Texto vertical
description: A partir do Windows 8, o DirectWrite tem uma série de novas APIs que permitem usar texto vertical em seus aplicativos.
ms.assetid: F40A79AE-F7BF-4CAC-9480-1489CD212DA8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0db8788a6be97a55911694942a930e17dc69976a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103917348"
---
# <a name="vertical-text"></a><span data-ttu-id="3cc01-103">Texto vertical</span><span class="sxs-lookup"><span data-stu-id="3cc01-103">Vertical Text</span></span>

<span data-ttu-id="3cc01-104">A partir do Windows 8, o [DirectWrite](direct-write-portal.md) tem uma série de novas APIs que permitem usar texto vertical em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3cc01-104">Starting with the Windows 8, [DirectWrite](direct-write-portal.md) has a number of new APIs that allow you to use vertical text in your apps.</span></span>

## <a name="drawing-vertical-text"></a><span data-ttu-id="3cc01-105">Desenho de texto vertical</span><span class="sxs-lookup"><span data-stu-id="3cc01-105">Drawing vertical text</span></span>

<span data-ttu-id="3cc01-106">Você pode desenhar texto vertical com Direct2D usando os métodos [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) .</span><span class="sxs-lookup"><span data-stu-id="3cc01-106">You can draw vertical text with Direct2D by using the [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) methods.</span></span> <span data-ttu-id="3cc01-107">Para desenhar o texto verticalmente, passe [**a \_ direção de leitura DWRITE de \_ \_ cima \_ para \_ baixo**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) até o método [**IDWriteTextFormat:: SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) e a [**direção do fluxo de DWRITE da \_ \_ \_ direita para a \_ \_ esquerda**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) para o método [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) .</span><span class="sxs-lookup"><span data-stu-id="3cc01-107">To draw the text vertically, pass [**DWRITE\_READING\_DIRECTION\_TOP\_TO\_BOTTOM**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) to the [**IDWriteTextFormat::SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) method and [**DWRITE\_FLOW\_DIRECTION\_RIGHT\_TO\_LEFT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) to the [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) method.</span></span> <span data-ttu-id="3cc01-108">Em seguida, você pode criar e desenhar um objeto [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) vertical.</span><span class="sxs-lookup"><span data-stu-id="3cc01-108">Then you can create and draw a vertical [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object.</span></span>

## <a name="analyzing-character-orientation"></a><span data-ttu-id="3cc01-109">Analisando a orientação do caractere</span><span class="sxs-lookup"><span data-stu-id="3cc01-109">Analyzing character orientation</span></span>

<span data-ttu-id="3cc01-110">Cada caractere tem uma orientação de caractere preferencial ou a direção em que o caractere deve ser orientado em qualquer layout direcional.</span><span class="sxs-lookup"><span data-stu-id="3cc01-110">Every character has a preferred character orientation, or the direction that the character should be oriented in any directional layout.</span></span> <span data-ttu-id="3cc01-111">Por exemplo, no layout horizontal tradicional, o texto latino e o texto chinês são orientados verticalmente.</span><span class="sxs-lookup"><span data-stu-id="3cc01-111">For example, in traditional horizontal layout, both the Latin text and the Chinese text are oriented vertically.</span></span> <span data-ttu-id="3cc01-112">Por outro lado, em um layout vertical, o texto em chinês permanece vertical e o texto latino é girado 90 graus.</span><span class="sxs-lookup"><span data-stu-id="3cc01-112">On the other hand, in a vertical layout, the Chinese text remains upright, and the Latin text is rotated 90 degrees.</span></span> <span data-ttu-id="3cc01-113">Essa diferença na orientação é vista no exemplo aqui.</span><span class="sxs-lookup"><span data-stu-id="3cc01-113">This difference in orientation is seen in the example here.</span></span>

![uma imagem de texto em inglês e chinês em layouts horizontais e verticais.](images/vertical-text.png)

<span data-ttu-id="3cc01-115">Para determinar a orientação do texto que você tem, você precisa implementar as interfaces [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) e [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="3cc01-115">To determine the orientation of the text you have, you need to implement the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) interfaces.</span></span> <span data-ttu-id="3cc01-116">A origem e o coletor assumem as execuções de glifo e permitem que você verifique se elas são orientadas verticalmente ou não.</span><span class="sxs-lookup"><span data-stu-id="3cc01-116">The source and sink take in the glyph runs and let you check if they are oriented vertically or not.</span></span>

<span data-ttu-id="3cc01-117">Depois de implementar a origem e o coletor, chame o método [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) .</span><span class="sxs-lookup"><span data-stu-id="3cc01-117">After you implement your source and sink, you call the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method.</span></span> <span data-ttu-id="3cc01-118">Na imagem de exemplo, essa função retorna 3 execuções: "English", "中国" e "English".</span><span class="sxs-lookup"><span data-stu-id="3cc01-118">In the example image, this function returns 3 runs: "English", "中国", and "English."</span></span>

## <a name="going-from-characters-to-glyphs"></a><span data-ttu-id="3cc01-119">Indo de caracteres para glifos</span><span class="sxs-lookup"><span data-stu-id="3cc01-119">Going from characters to glyphs</span></span>

<span data-ttu-id="3cc01-120">Agora que você sabe que a execução contém glifos verticais, você precisa obter acesso a esses glifos.</span><span class="sxs-lookup"><span data-stu-id="3cc01-120">Now that you know the run contains vertical glyphs, you need to get access to those glyphs.</span></span> <span data-ttu-id="3cc01-121">No exemplo até agora, há 3 execuções: uma com glifos verticais e duas sem.</span><span class="sxs-lookup"><span data-stu-id="3cc01-121">In the example so far, there are 3 runs: one with vertical glyphs and two without.</span></span> <span data-ttu-id="3cc01-122">Para fazer a transição de caracteres para glifos, você chama [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span><span class="sxs-lookup"><span data-stu-id="3cc01-122">To transition from characters to glyphs, you call [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span></span> <span data-ttu-id="3cc01-123">Esse método retorna os índices de glifos correspondentes para os caracteres no exemplo.</span><span class="sxs-lookup"><span data-stu-id="3cc01-123">This method returns the corresponding glyph indices for the characters in the example.</span></span> <span data-ttu-id="3cc01-124">Como o método [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) retorna uma execução com glifos verticais, você precisa chamar [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), que retorna as IDs de glifos verticalmente orientadas no lugar das IDs de glifo atuais.</span><span class="sxs-lookup"><span data-stu-id="3cc01-124">Because the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method returns a run with vertical glyphs, you need to call [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), which returns the vertically oriented glyph IDs in place of the current glyph IDs.</span></span>

## <a name="drawing-text-vertically"></a><span data-ttu-id="3cc01-125">Desenhar texto verticalmente</span><span class="sxs-lookup"><span data-stu-id="3cc01-125">Drawing text vertically</span></span>

<span data-ttu-id="3cc01-126">Por fim, você precisa dispor e desenhar o texto.</span><span class="sxs-lookup"><span data-stu-id="3cc01-126">Finally, you need to lay out and draw the text.</span></span> <span data-ttu-id="3cc01-127">Como você está desenhando o texto verticalmente, precisa obter mais informações para que o texto latino seja desenhado corretamente.</span><span class="sxs-lookup"><span data-stu-id="3cc01-127">Because you're drawing the text vertically, you need to get some more info so that the Latin text is drawn correctly.</span></span> <span data-ttu-id="3cc01-128">Se você desenhar todo o texto ao longo da linha de base central, o texto latino aparecerá flutuando no meio da linha.</span><span class="sxs-lookup"><span data-stu-id="3cc01-128">If you draw all of the text along the central baseline, the Latin text appears to float in the middle of the line.</span></span> <span data-ttu-id="3cc01-129">Você precisa ter acesso à linha de base central e romano para alinhar o texto corretamente.</span><span class="sxs-lookup"><span data-stu-id="3cc01-129">You need access to both the central and Roman baseline to align the text correctly.</span></span> <span data-ttu-id="3cc01-130">Use o método [**IDWriteTextAnalyzer1:: Getbaseize**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) para obter os valores numéricos das linhas de base que você especificar.</span><span class="sxs-lookup"><span data-stu-id="3cc01-130">Use the [**IDWriteTextAnalyzer1::GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) method to get the numerical values of the baselines you specify.</span></span> <span data-ttu-id="3cc01-131">Você pode subtrair a linha de base Roman da linha de base central para obter o deslocamento entre os dois.</span><span class="sxs-lookup"><span data-stu-id="3cc01-131">You can subtract the Roman baseline from the central baseline to get the offset between the two.</span></span>

<span data-ttu-id="3cc01-132">Com todas essas informações, você pode desenhar o texto na tela.</span><span class="sxs-lookup"><span data-stu-id="3cc01-132">With all this info, you can draw the text on the screen.</span></span> <span data-ttu-id="3cc01-133">Primeiro, chame o método [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) com os resultados dos objetos [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) e [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="3cc01-133">First, call the [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) method with the results from the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) objects.</span></span>

<span data-ttu-id="3cc01-134">Se você estiver usando o [Direct2D](rendering-by-using-direct2d.md) , também precisará definir a transformação mundial no destino de renderização Direct2D para a renderização vertical.</span><span class="sxs-lookup"><span data-stu-id="3cc01-134">If you’re using [Direct2D](rendering-by-using-direct2d.md) you also need to set the world transform on the Direct2D render target for vertical rendering.</span></span>

<span data-ttu-id="3cc01-135">Por fim, chame [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) três vezes, uma vez em cada bloco de texto.</span><span class="sxs-lookup"><span data-stu-id="3cc01-135">Finally, call [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) three times, once on each block of text.</span></span> <span data-ttu-id="3cc01-136">Nos dois blocos de texto que estão em inglês, você precisa aplicar o deslocamento que calculamos entre as linhas de base Roman e central.</span><span class="sxs-lookup"><span data-stu-id="3cc01-136">On the two blocks of text that are in English, you need to apply the offset that we calculated between the Roman and central baselines.</span></span>

<span data-ttu-id="3cc01-137">Agora, o texto em seu aplicativo será desenhado verticalmente, com a orientação de glifo correta.</span><span class="sxs-lookup"><span data-stu-id="3cc01-137">Now, the text in your app will be drawn vertically, with the correct glyph orientation.</span></span>

 

 