---
title: Mixed-Mode o dimensionamento de DPI e APIs com reconhecimento de DPI
description: .
ms.assetid: 44AC0B29-3283-4801-90F5-3E78CCD87B9F
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb9f8a8f72b199aaba195002134855155925b30d
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103917171"
---
# <a name="mixed-mode-dpi-scaling-and-dpi-aware-apis"></a><span data-ttu-id="ed9e9-103">Mixed-Mode o dimensionamento de DPI e APIs com reconhecimento de DPI</span><span class="sxs-lookup"><span data-stu-id="ed9e9-103">Mixed-Mode DPI Scaling and DPI-aware APIs</span></span>

## <a name="sub-process-dpi-awareness-support"></a><span data-ttu-id="ed9e9-104">Suporte ao reconhecimento de DPI de Sub-Process</span><span class="sxs-lookup"><span data-stu-id="ed9e9-104">Sub-Process DPI Awareness Support</span></span>

<span data-ttu-id="ed9e9-105">O [**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) permite o uso de diferentes modos de dimensionamento de DPI em um único processo.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-105">[**SetThreadDpiAwarenessContext**](/windows/desktop/api/Winuser/nf-winuser-setthreaddpiawarenesscontext) enables the use of different DPI scaling modes within a single process.</span></span> <span data-ttu-id="ed9e9-106">Antes da atualização de aniversário do Windows 10, um reconhecimento da janela s DPI era associado ao modo de reconhecimento de DPI de todo o processo (sem reconhecimento de DPI, reconhecimento de DPI de sistema ou reconheceção de Per-Monitor DPI).</span><span class="sxs-lookup"><span data-stu-id="ed9e9-106">Prior to the Windows 10 Anniversary Update, a window s DPI awareness was bound to the process-wide DPI awareness mode (DPI unaware, System DPI aware, or Per-Monitor DPI aware).</span></span> <span data-ttu-id="ed9e9-107">Mas agora, com o **SetThreadDpiAwarenessContext**, as janelas de nível superior podem ter um modo de reconhecimento de DPI diferente daquele do modo de reconhecimento de dpi de todo o processo.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-107">But now, with **SetThreadDpiAwarenessContext**, top-level windows can have a DPI awareness mode that is different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="ed9e9-108">Isso também afeta as janelas filhas, pois elas sempre terão o mesmo modo de reconhecimento de DPI que sua janela pai.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-108">This also effects child windows, as they will always have the same DPI awareness mode as their parent window.</span></span>

<span data-ttu-id="ed9e9-109">O uso de **SetThreadDpiAwarenessContext** permite que os desenvolvedores decidam onde desejam concentrar seus esforços de desenvolvimento ao definir o comportamento específico de dpi para aplicativos de desktop.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-109">The use of **SetThreadDpiAwarenessContext** enables developers to decide where they want to focus their development efforts when defining DPI-specific behavior for desktop applications.</span></span> <span data-ttu-id="ed9e9-110">Por exemplo, uma janela de nível superior primária de um aplicativo pode ser dimensionada de acordo com o monitor, enquanto janelas de nível superior secundárias podem ser dimensionadas por meio do dimensionamento de bitmap pelo sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-110">For example, an application's primary top-level window could be scaled on a per-monitor basis while secondary top-level windows could be scaled via bitmap-scaling by the operating system.</span></span>

## <a name="the-dpi-awareness-context"></a><span data-ttu-id="ed9e9-111">O contexto de reconhecimento de DPI</span><span class="sxs-lookup"><span data-stu-id="ed9e9-111">The DPI Awareness Context</span></span>

<span data-ttu-id="ed9e9-112">Antes da disponibilidade de **SetThreadDpiAwarenessContext** , o reconhecimento de dpi de um processo foi definido no manifesto do binário do aplicativo ou por meio de uma chamada para [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) durante a inicialização do processo.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-112">Prior to the availability of **SetThreadDpiAwarenessContext** the DPI awareness of a process was defined either in the manifest of the application binary or via a call to [**SetProcessDpiAwareness**](/windows/desktop/api/ShellScalingAPI/nf-shellscalingapi-setprocessdpiawareness) during process initialization.</span></span> <span data-ttu-id="ed9e9-113">Com o **SetThreadDpiAwarenessContext**, cada thread pode ter um contexto de reconhecimento de DPI individual que pode ser diferente daquele do modo de reconhecimento de dpi de todo o processo.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-113">With **SetThreadDpiAwarenessContext**, each thread can have an individual DPI awareness context that may be different than that of the process-wide DPI awareness mode.</span></span> <span data-ttu-id="ed9e9-114">O contexto de reconhecimento de DPI de um thread é representado com o \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \* \*. [ \_ \_ ](dpi-awareness-context.md)</span><span class="sxs-lookup"><span data-stu-id="ed9e9-114">The DPI awareness context of a thread is represented with the [\*\*\*\*DPI\_AWARENESS\_CONTEXT\*\*\*\*](dpi-awareness-context.md) type, and behaves in the following ways:</span></span>

-   <span data-ttu-id="ed9e9-115">Um thread pode ter seu contexto de reconhecimento de DPI alterado a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-115">A thread can have its DPI awareness context changed at any time.</span></span>
-   <span data-ttu-id="ed9e9-116">Todas as chamadas à API feitas após o contexto ser alterada serão executadas no contexto de DPI correspondente (e podem ser virtualizadas).</span><span class="sxs-lookup"><span data-stu-id="ed9e9-116">Any API calls that are made after the context is changed will run in the corresponding DPI context (and may be virtualized).</span></span>
-   <span data-ttu-id="ed9e9-117">Quando uma janela é criada, seu reconhecimento de DPI é definido como o reconhecimento de DPI do thread de chamada nesse momento.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-117">When a window is created, its DPI awareness is defined as the DPI awareness of the calling thread at that time.</span></span>
-   <span data-ttu-id="ed9e9-118">Quando o procedimento de janela para uma janela é chamado, o thread é alternado automaticamente para o contexto de reconhecimento de DPI que estava em uso quando a janela foi criada.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-118">When the window procedure for a window is called, the thread is automatically switched to the DPI awareness context that was in use when the window was created.</span></span>

<span data-ttu-id="ed9e9-119">Um cenário comum para o uso de **SetThreadDpiAwarenessContext** é o seguinte: comece com um thread que está sendo executado com um contexto (como o **contexto de reconhecimento de DPI \_ \_ \_ por \_ \_ reconhecimento de monitor**) alterne temporariamente para um contexto diferente (o contexto de reconhecimento de DPI não **\_ \_ \_ reconhece**), crie uma janela e, em seguida, alterne imediatamente o contexto de thread para seu estado anterior.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-119">A common scenario for the use of **SetThreadDpiAwarenessContext** is as follows: Begin with a thread that is running with one context (such as **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE**) temporarily switch to a different context (**DPI\_AWARENESS\_CONTEXT\_UNAWARE**), create a window, and then immediately switch the thread context back to its previous state.</span></span> <span data-ttu-id="ed9e9-120">A janela criada terá um contexto de DPI de contexto de **reconhecimento de DPI sem \_ \_ \_ reconhecimento**, enquanto o contexto de thread s de chamada será restaurado para o **contexto de reconhecimento de DPI \_ \_ \_ por \_ Monitor \_ ciente** de uma chamada subsequente para **SetThreadDpiAwarenessContext**.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-120">The created window will have a DPI context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, while the calling thread s context will be restored to **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR\_AWARE** with a subsequent call to **SetThreadDpiAwarenessContext**.</span></span> <span data-ttu-id="ed9e9-121">Nesse cenário, a janela associada ao thread de chamada seria executada com um contexto por monitor (e, portanto, não deve ser ampliada por bitmap pelo sistema operacional), enquanto a janela recém-criada não seria um reconhecimento de DPI (e, portanto, seria bitmap automaticamente ampliado em um conjunto de exibição para >100% de dimensionamento).</span><span class="sxs-lookup"><span data-stu-id="ed9e9-121">In this scenario, the window associated with the calling thread would run with a per-monitor context (and therefore not be bitmap-stretched by the operating system) while the newly-created window would not be DPI aware (and therefore would be automatically bitmap stretched on a display set to >100% scaling).</span></span>

<span data-ttu-id="ed9e9-122">A Figura 1 ilustra como o thread do processo principal é executado com o **contexto de reconhecimento de DPI \_ \_ \_ por \_ Monitor**, alterna seu contexto para o **contexto de reconhecimento de DPI sem \_ \_ \_ reconhecimento** e cria uma nova janela.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-122">Figure 1 illustrates how the main process thread executes with **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**, switches its context to **DPI\_AWARENESS\_CONTEXT\_UNAWARE**, and creates a new window.</span></span> <span data-ttu-id="ed9e9-123">Em seguida, a janela recém-criada é executada com um contexto de reconhecimento de DPI de contexto de reconhecimento de DPI, sempre que uma mensagem é expedida para a ti ou chamadas de API são feitas a partir dela. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="ed9e9-123">The newly created window then executes with a DPI awareness context of **DPI\_AWARENESS\_CONTEXT\_UNAWARE** whenever a message is dispatched to it or API calls are made from it.</span></span> <span data-ttu-id="ed9e9-124">Imediatamente após a criação da nova janela, o thread principal é restaurado para seu contexto anterior de **contexto de reconhecimento de DPI \_ \_ \_ por \_ Monitor**.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-124">Immediately after creating the new window the main thread is restored to its previous context of **DPI\_AWARENESS\_CONTEXT\_PER\_MONITOR**.</span></span>

![diagrama mostrando reconhecimento de DPI por monitor em ação](images/dpi-awareness-context.png)

## <a name="new-dpi-related-apis"></a><span data-ttu-id="ed9e9-126">Novas APIs relacionadas a DPI</span><span class="sxs-lookup"><span data-stu-id="ed9e9-126">New DPI-related APIs</span></span>

<span data-ttu-id="ed9e9-127">Além do suporte para modos de reconhecimento de DPI diferentes em um único processo que o **SetThreadDpiAwarenessContext** oferece, a seguinte funcionalidade específica de DPI foi adicionada para aplicativos de área de trabalho:</span><span class="sxs-lookup"><span data-stu-id="ed9e9-127">In addition to the support for different DPI awareness modes within a single process that **SetThreadDpiAwarenessContext** offers, the following DPI-specific functionality has been added for desktop applications:</span></span><dl> <dd>[<span data-ttu-id="ed9e9-128">EnableNonClientDpiScaling\*\*\*\*</span><span class="sxs-lookup"><span data-stu-id="ed9e9-128">\*\*\*\*EnableNonClientDpiScaling\*\*\*\*</span></span>](/windows/desktop/api/Winuser/nf-winuser-enablenonclientdpiscaling)<dl> <dt>



> [!Note]  
> <span data-ttu-id="ed9e9-129">O modo de reconhecimento de DPI **por monitor v2** habilita automaticamente essa funcionalidade, e chamar **EnableNonClientDpiScaling** é, portanto, desnecessário em aplicativos que o utilizam.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-129">The **Per Monitor V2** DPI awareness mode automatically enables this functionality, and calling **EnableNonClientDpiScaling** is therefore unnecessary in applications using it.</span></span>

 

<span data-ttu-id="ed9e9-130">Chamar **EnableNonClientDpiScaling** de dentro de um manipulador **de \_ NCCREATE do WM** da janela fará com que a área não cliente de uma janela de nível superior seja automaticamente dimensionada para DPI.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-130">Calling **EnableNonClientDpiScaling** from within a window s **WM\_NCCREATE** handler will result in the non-client area of a top-level window automatically scaling for DPI.</span></span> <span data-ttu-id="ed9e9-131">Se a janela de nível superior tiver reconhecimento de DPI por monitor (independentemente de o próprio processo ter reconhecimento de DPI por monitor ou porque a janela foi criada dentro de um thread com reconhecimento de DPI por monitor), a barra de legendas, as barras de rolagem, os menus e as barras de menus dessas janelas terão escala de DPI sempre que o DPI de s da janela for alterado.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-131">If the top-level window is per-monitor DPI-aware (whether because the process itself is per-monitor DPI-aware or because the window was created within a per-monitor DPI-aware thread), the caption bar, scroll bars, menus, and menu bars of these windows will DPI-scale whenever the window s DPI changes.</span></span>
</dt> <dt>

<span data-ttu-id="ed9e9-132">Observe que as áreas que não são do cliente de uma janela filho, como barras de rolagem de não-cliente de um controle de edição filho, não serão dimensionadas automaticamente quando essa API for usada.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-132">Note that non-client areas of a child window, such as non-client scroll bars of a child edit control, will not DPI scale automatically when this API is used.</span></span>
</dt> <dt>

> [!Note]  
> <span data-ttu-id="ed9e9-133">**EnableNonClientDpiScaling** deve ser chamado a partir do manipulador de **\_ NCCREATE do WM** .</span><span class="sxs-lookup"><span data-stu-id="ed9e9-133">**EnableNonClientDpiScaling** must be called from the **WM\_NCCREATE** handler.</span></span>

</dt> </dl> </dd> <dd> <span data-ttu-id="ed9e9-134"><b> As APIs \* ForDpi </b></span><span class="sxs-lookup"><span data-stu-id="ed9e9-134"><b> The \*ForDpi APIs </b></span></span>

-   <span data-ttu-id="ed9e9-135">Várias APIs usadas com frequência, como [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) , não têm nenhum contexto de um HWND e, portanto, não têm como deduzindo o reconhecimento de DPI apropriado para seus valores de retorno.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-135">Several frequently-used APIs such as [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) do not have any context of an HWND and therefore have no way of deducing the proper DPI awareness for their return values.</span></span> <span data-ttu-id="ed9e9-136">Chamar essas APIs de um thread que está sendo executado em um modo de reconhecimento de DPI ou contexto diferente pode retornar valores que não são dimensionados para o contexto do thread de chamada.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-136">Calling these APIs from a thread that is running in a different DPI awareness mode or context may return values that are not scaled for the context of the calling thread.</span></span> <span data-ttu-id="ed9e9-137">\* \* \* \* [GetSystemMetricForDpi \* \*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi)\* *, \* \* \* \* [SystemParametersInfoForDpi \* \*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi)* \*, e \* \* \* \* [AdjustWindowRectExForDpi \* \* \* \*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) executará a mesma funcionalidade que suas contrapartes sem reconhecimento de DPI, mas pegará um dpi como um argumento e inferirá o reconhecimento de DPI do contexto do thread atual.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-137">[\*\*\*\*GetSystemMetricForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-getsystemmetricsfordpi), [\*\*\*\*SystemParametersInfoForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-systemparametersinfofordpi), and [\*\*\*\*AdjustWindowRectExForDpi\*\*\*\*](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) will perform the same functionality as their DPI unaware counterparts, but take a DPI as an argument and infer the dpi awareness from the current thread's context.</span></span>
-   <span data-ttu-id="ed9e9-138">**GetSystemMetricForDpi** e **SystemParametersInfoForDpi** retornarão valores de métrica do sistema com escala de dpi e valores de parâmetro do sistema de acordo com esta equação:</span><span class="sxs-lookup"><span data-stu-id="ed9e9-138">**GetSystemMetricForDpi** and **SystemParametersInfoForDpi** will return DPI-scaled system metric values and system parameter values in accordance to this equation:</span></span>

    |                                                                 |
    |-----------------------------------------------------------------|
    | <span data-ttu-id="ed9e9-139">GetSystemMetrics (...) @ dpi = = GetSystemMetricsForDpi (..., DPI)</span><span class="sxs-lookup"><span data-stu-id="ed9e9-139">GetSystemMetrics(...) @ dpi == GetSystemMetricsForDpi(..., dpi)</span></span> |

    

     

    <span data-ttu-id="ed9e9-140">Portanto, chamar **GetSystemMetrics** (ou **SystemParametersInfoForDpi**), enquanto em execução em um dispositivo com um determinado valor de DPI do sistema, retornará o mesmo valor que suas variantes de reconhecimento de DPI (**GetSystemMetricsForDpi** e **SystemParametersInfoForDpi**), considerando o mesmo valor de dpi que a entrada.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-140">Therefore, calling **GetSystemMetrics** (or **SystemParametersInfoForDpi**), while running on a device with a certain system DPI value will return the same value that their DPI aware variants (**GetSystemMetricsForDpi** and **SystemParametersInfoForDpi**) will, given the same DPI value as input.</span></span>

-   <span data-ttu-id="ed9e9-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) usa um HWND e calculará o tamanho necessário de um retângulo de janela de forma sensível a dpi.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-141">[**AdjustWindowRectExForDpi**](/windows/desktop/api/Winuser/nf-winuser-adjustwindowrectexfordpi) takes an HWND and will calculate the required size of a window rectangle in a DPI-sensitive way.</span></span>

</dd> <dd>

</dd> <dd><span data-ttu-id="ed9e9-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span><span class="sxs-lookup"><span data-stu-id="ed9e9-142"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforwindow">GetDpiForWindow</a></b></span></span><dl> <span data-ttu-id="ed9e9-143"><dt><b>GetDpiForWindow</b> retornará o dpi associado ao HWND fornecido.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-143"><dt> <b>GetDpiForWindow</b> will return the DPI associated with the HWND provided.</span></span> <span data-ttu-id="ed9e9-144">A resposta dependerá do modo de reconhecimento de DPI do HWND:</span><span class="sxs-lookup"><span data-stu-id="ed9e9-144">The answer will depend on the DPI awareness mode of the HWND:</span></span>

| <span data-ttu-id="ed9e9-145">Modo de reconhecimento de DPI de HWND</span><span class="sxs-lookup"><span data-stu-id="ed9e9-145">DPI Awareness mode of HWND</span></span> | <span data-ttu-id="ed9e9-146">Retornar valor</span><span class="sxs-lookup"><span data-stu-id="ed9e9-146">Return value</span></span>                                                                                                                                                                                                  |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ed9e9-147">Conhecida</span><span class="sxs-lookup"><span data-stu-id="ed9e9-147">Unaware</span></span>                    | <span data-ttu-id="ed9e9-148">96</span><span class="sxs-lookup"><span data-stu-id="ed9e9-148">96</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="ed9e9-149">Sistema</span><span class="sxs-lookup"><span data-stu-id="ed9e9-149">System</span></span>                     | <span data-ttu-id="ed9e9-150">O DPI do sistema</span><span class="sxs-lookup"><span data-stu-id="ed9e9-150">The system DPI</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="ed9e9-151">Per-Monitor</span><span class="sxs-lookup"><span data-stu-id="ed9e9-151">Per-Monitor</span></span>                | <span data-ttu-id="ed9e9-152">O DPI de exibição que a janela de nível superior associada está localizada principalmente em</span><span class="sxs-lookup"><span data-stu-id="ed9e9-152">The DPI of display that the associated top-level window is primarily located on</span></span> <br/> <span data-ttu-id="ed9e9-153">(Se uma janela filho for fornecida, o DPI da janela pai de nível superior correspondente será retornada)</span><span class="sxs-lookup"><span data-stu-id="ed9e9-153">(If a child window is provided, the DPI of the corresponding top-level parent window will be returned)</span></span><br/> |

</dt> </dl> </dd> <dd><span data-ttu-id="ed9e9-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span><span class="sxs-lookup"><span data-stu-id="ed9e9-154"><b><a href="/windows/desktop/api/Winuser/nf-winuser-getdpiforsystem">GetDpiForSystem</a></b></span></span><dl> <dt>

<span data-ttu-id="ed9e9-155">Chamar **GetDpiForSystem** é mais eficiente do que chamar [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) e [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) para obter o DPI do sistema.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-155">Calling **GetDpiForSystem** is more efficient than calling [**GetDC**](/windows/desktop/api/winuser/nf-winuser-getdc) and [**GetDeviceCaps**](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) to obtain the system DPI.</span></span>
</dt> <dt>

<span data-ttu-id="ed9e9-156">Qualquer componente que pudesse ser executado em um aplicativo que usa reconhecimento de DPI de subprocesso não deve assumir que o DPI do sistema é estático durante o ciclo de vida do processo.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-156">Any component that could be running in an application that uses sub-process DPI awareness should not assume that the system DPI is static during the lifecycle of the process.</span></span> <span data-ttu-id="ed9e9-157">Por exemplo, se um thread que está sendo executado sob o contexto de reconhecimento de DPI não tiver reconhecimento de alerta no DPI do sistema, a resposta será 96. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="ed9e9-157">For example, if a thread that is running under **DPI\_AWARENESS\_CONTEXT\_UNAWARE** awareness context queries the system DPI, the answer will be 96.</span></span> <span data-ttu-id="ed9e9-158">No entanto, se o mesmo thread tiver mudado para o contexto de reconhecimento do **sistema de contexto de reconhecimento de DPI \_ \_ \_** e consultasse novamente o DPI do sistema, a resposta poderá ser diferente.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-158">However, if that same thread switched to **DPI\_AWARENESS\_CONTEXT\_SYSTEM** awareness context and queried the system DPI again, the answer could be different.</span></span> <span data-ttu-id="ed9e9-159">Para evitar o uso de um valor do sistema-DPI em cache (e possivelmente obsoleto), use **GetDpiForSystem** para recuperar o DPI do sistema em relação ao modo de reconhecimento de DPI do thread de chamada.</span><span class="sxs-lookup"><span data-stu-id="ed9e9-159">To avoid the use of a cached (and possibly stale) system-DPI value, use **GetDpiForSystem** to retrieve the system DPI relative to the DPI awareness mode of the calling thread.</span></span> 
</dt> </dl> </dd> </dl>