---
title: Sobre o TraceLogging
description: TraceLogging é o novo rastreamento de eventos do Windows 10 para aplicativos de modo de usuário e drivers de modo kernel.
ms.assetid: 8C6A9E91-98F9-4D6B-A937-A22BA7CEB1E4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6c2b1ca72385a51df1e0cd82f3e91c198f15b5d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103823827"
---
# <a name="about-tracelogging"></a><span data-ttu-id="cd40d-103">Sobre o TraceLogging</span><span class="sxs-lookup"><span data-stu-id="cd40d-103">About TraceLogging</span></span>

<span data-ttu-id="cd40d-104">TraceLogging é o novo rastreamento de eventos do Windows 10 para aplicativos de modo de usuário e drivers de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="cd40d-104">TraceLogging is the new Windows 10 event tracing for user-mode applications and kernel-mode drivers.</span></span> <span data-ttu-id="cd40d-105">TraceLogging é um formato para o ETW (rastreamento de eventos autodescritivo para Windows).</span><span class="sxs-lookup"><span data-stu-id="cd40d-105">TraceLogging is a format for self-describing Event Tracing for Windows (ETW).</span></span> <span data-ttu-id="cd40d-106">O TraceLogging se baseia no ETW (rastreamento de eventos para Windows) e fornece uma maneira simplificada de instrumentar o código.</span><span class="sxs-lookup"><span data-stu-id="cd40d-106">TraceLogging builds on Event Tracing for Windows (ETW) and provides a simplified way to instrument code.</span></span>

<span data-ttu-id="cd40d-107">O TraceLogging oferece a simplicidade do WPP (pré-processador de rastreamento de software) do Windows com o benefício adicional de ser capaz de incluir dados estruturados com eventos, a capacidade de correlacionar eventos e todos sem a necessidade de um arquivo XML de manifesto de instrumentação separado.</span><span class="sxs-lookup"><span data-stu-id="cd40d-107">TraceLogging offers the simplicity of Windows software trace preprocessor (WPP) with the added benefit of being able to include structured data with events, the capability of correlating events, and all without requiring a separate instrumentation manifest XML file.</span></span> <span data-ttu-id="cd40d-108">Os eventos são autodescritivos, o que significa que um binário contendo o manifesto de instrumentação não precisa ser registrado no sistema para usar as APIs do auxiliar de dados de rastreamento (TDH) para decodificar e mostrar eventos.</span><span class="sxs-lookup"><span data-stu-id="cd40d-108">Events are self-describing which means that a binary containing the instrumentation manifest does not need to be registered on the system in order to use the Trace Data Helper (TDH) APIs to decode and show events.</span></span>

<span data-ttu-id="cd40d-109">O ETW (rastreamento de eventos para Windows) foi introduzido com o Windows 2000 e atualizado no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="cd40d-109">Event Tracing for Windows (ETW) was introduced with Windows 2000 and updated in Windows Vista.</span></span> <span data-ttu-id="cd40d-110">O Tracelogging se baseia nas APIs do ETW do Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="cd40d-110">Tracelogging builds on top of the Windows Vista ETW APIs.</span></span> <span data-ttu-id="cd40d-111">Os provedores podem usar a tecnologia TraceLogging e ainda funcionar no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="cd40d-111">Providers can use the TraceLogging technology and still work on Windows Vista.</span></span> <span data-ttu-id="cd40d-112">Os controladores existentes (usando o Windows VistaAPIs) podem ser usados para controlar provedores de TraceLogging.</span><span class="sxs-lookup"><span data-stu-id="cd40d-112">Existing controllers (using Windows VistaAPIs) can be used to control TraceLogging providers.</span></span>

<span data-ttu-id="cd40d-113">O TraceLogging também é compatível com as ferramentas existentes.</span><span class="sxs-lookup"><span data-stu-id="cd40d-113">TraceLogging is also compatible with existing tools.</span></span> <span data-ttu-id="cd40d-114">Ainda há suporte para provedores que usam o ETW baseado em manifesto.</span><span class="sxs-lookup"><span data-stu-id="cd40d-114">Providers that use manifest-based ETW are still supported.</span></span> <span data-ttu-id="cd40d-115">Você não precisa converter provedores ETW baseados em manifesto para provedores TraceLogging, a menos que queira aproveitar a simplicidade que o TraceLogging fornece.</span><span class="sxs-lookup"><span data-stu-id="cd40d-115">You do not need to convert manifest based ETW providers to TraceLogging providers unless you wish to take advantage of the simplicity that TraceLogging provides.</span></span> <span data-ttu-id="cd40d-116">O rastreamento de WPP ainda tem suporte.</span><span class="sxs-lookup"><span data-stu-id="cd40d-116">WPP tracing is also still supported.</span></span>

<span data-ttu-id="cd40d-117">O TraceLogging baseia-se no ETW, mas apresenta várias melhorias importantes:</span><span class="sxs-lookup"><span data-stu-id="cd40d-117">TraceLogging builds upon ETW but introduces several important improvements:</span></span>

-   <span data-ttu-id="cd40d-118">O rastreamento de um evento é tão simples quanto uma chamada à API.</span><span class="sxs-lookup"><span data-stu-id="cd40d-118">Tracing an event is as simple as an API call.</span></span>
-   <span data-ttu-id="cd40d-119">Os eventos são autodescritivos e não exigem binários adicionais que contenham o manifesto de evento compilado para interpretar o evento.</span><span class="sxs-lookup"><span data-stu-id="cd40d-119">Events are self-describing and do not require any additional binaries containing the compiled event manifest to interpret the event.</span></span> <span data-ttu-id="cd40d-120">Todos os metadados sobre o evento são registrados no evento.</span><span class="sxs-lookup"><span data-stu-id="cd40d-120">All the metadata about the event is recorded in the event.</span></span>
-   <span data-ttu-id="cd40d-121">As atividades dentro de um único processo podem ser facilmente expressas por meio de eventos de iniciar e parar.</span><span class="sxs-lookup"><span data-stu-id="cd40d-121">Activities inside a single process can be easily expressed through start and stop events.</span></span>
-   <span data-ttu-id="cd40d-122">TraceLogging é compatível com o suporte de instrumentação existente.</span><span class="sxs-lookup"><span data-stu-id="cd40d-122">TraceLogging is compatible with existing instrumentation support.</span></span> <span data-ttu-id="cd40d-123">As novas APIs de ETW continuam a dar suporte aos provedores antigos.</span><span class="sxs-lookup"><span data-stu-id="cd40d-123">The new ETW APIs continue to support the old providers.</span></span> <span data-ttu-id="cd40d-124">Você pode investir nas novas APIs de ETW para cenários estratégicos, deixando os pontos de instrumentação antigos como estão.</span><span class="sxs-lookup"><span data-stu-id="cd40d-124">You can invest in the new ETW APIs for strategic scenarios while leaving your old instrumentation points as they are.</span></span>
-   <span data-ttu-id="cd40d-125">O TraceLogging oferece a mesma API de rastreamento de eventos para Windows 10, Xbox One e Windows 10 Mobile.</span><span class="sxs-lookup"><span data-stu-id="cd40d-125">TraceLogging offers the same event tracing API for Windows 10, Xbox One, and Windows 10 Mobile.</span></span>
-   <span data-ttu-id="cd40d-126">As APIs TraceLogging podem ser acessadas em C, C++, .NET e Windows Runtime.</span><span class="sxs-lookup"><span data-stu-id="cd40d-126">TraceLogging APIs are accessible from C, C++, .NET, and Windows Runtime.</span></span>

## <a name="api-high-level-overview"></a><span data-ttu-id="cd40d-127">Visão geral de alto nível da API</span><span class="sxs-lookup"><span data-stu-id="cd40d-127">API high-level overview</span></span>

<span data-ttu-id="cd40d-128">Há três APIs TraceLogging separadas que visam públicos diferentes do desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="cd40d-128">There are three separate TraceLogging APIs that target different developer audiences.</span></span> <span data-ttu-id="cd40d-129">Cada API foi projetada para atender a diferentes conjuntos de requisitos, conforme apropriado para o público-alvo dessa API.</span><span class="sxs-lookup"><span data-stu-id="cd40d-129">Each API was designed to meet different sets of requirements as appropriate for the target audience of that API.</span></span>

<span data-ttu-id="cd40d-130">Para desenvolvedores do WinRT:</span><span class="sxs-lookup"><span data-stu-id="cd40d-130">For WinRT developers:</span></span>

-   <span data-ttu-id="cd40d-131">O [**LoggingChannel**](/uwp/api/Windows.Foundation.Diagnostics.LoggingChannel) foi estendido no Windows 10 para registrar eventos de ETW (rastreamento de eventos do Windows) autodescritivos sem a necessidade de um manifesto.</span><span class="sxs-lookup"><span data-stu-id="cd40d-131">[**LoggingChannel**](/uwp/api/Windows.Foundation.Diagnostics.LoggingChannel) has been extended in Windows 10 to log self-describing Event Tracing for Windows (ETW) events without the need for a manifest.</span></span>
-   <span data-ttu-id="cd40d-132">O [**LoggingActivity**](/windows/win32/api/traceloggingactivity/nl-traceloggingactivity-traceloggingactivity) foi estendido no Windows 10 para fornecer métodos de início e parada de atividade que fornecem controle sobre o formato e o conteúdo dos eventos de iniciar e parar.</span><span class="sxs-lookup"><span data-stu-id="cd40d-132">[**LoggingActivity**](/windows/win32/api/traceloggingactivity/nl-traceloggingactivity-traceloggingactivity) has been extended in Windows 10 to provide activity start and stop methods that provide control over the format and contents of the Start and Stop events.</span></span> <span data-ttu-id="cd40d-133">Além disso, as atividades podem ser aninhadas.</span><span class="sxs-lookup"><span data-stu-id="cd40d-133">Additionally, activities can be nested.</span></span>

<span data-ttu-id="cd40d-134">Para desenvolvedores de C/C++:</span><span class="sxs-lookup"><span data-stu-id="cd40d-134">For C/C++ developers:</span></span>

-   <span data-ttu-id="cd40d-135">O TraceLoggingProvider. h contém a API mais eficiente, no entanto, essa API não é adequada para uso em cenários dinâmicos (com script), como JavaScript.</span><span class="sxs-lookup"><span data-stu-id="cd40d-135">TraceLoggingProvider.h contains the most efficient API, however this API is not well suited for use in dynamic (scripted) scenarios such as Javascript.</span></span> <span data-ttu-id="cd40d-136">Essa API pode ser usada no modo de usuário e no código de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="cd40d-136">This API can be used in user-mode and kernel-mode code.</span></span>

<span data-ttu-id="cd40d-137">Para desenvolvedores de código gerenciado (Microsoft .NET Framework):</span><span class="sxs-lookup"><span data-stu-id="cd40d-137">For managed code (Microsoft .NET Framework) developers:</span></span>

-   <span data-ttu-id="cd40d-138">A classe [EventSource](/dotnet/api/system.diagnostics.tracing.eventsource) fornecida com versões anteriores do .NET Framework já tem suporte para gravar eventos ETW, gerando automaticamente o manifesto e inserindo o manifesto no fluxo de eventos.</span><span class="sxs-lookup"><span data-stu-id="cd40d-138">The [EventSource](/dotnet/api/system.diagnostics.tracing.eventsource) class that shipped with previous versions of the .NET Framework already supported writing ETW events - automatically generating the manifest and embedding the manifest into the event stream.</span></span> <span data-ttu-id="cd40d-139">No entanto, o desenvolvedor ainda tinha de controlar o manifesto para decodificar os eventos (a menos que funcione em um cenário em que o manifesto incorporado tenha sido suportado).</span><span class="sxs-lookup"><span data-stu-id="cd40d-139">However, the developer still had to keep track of the manifest to decode the events (unless working in a scenario where the embedded manifest was supported).</span></span> <span data-ttu-id="cd40d-140">TraceLogging permite que o manifesto seja completamente eliminado.</span><span class="sxs-lookup"><span data-stu-id="cd40d-140">TraceLogging allows the manifest to be eliminated completely.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cd40d-141">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="cd40d-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cd40d-142">Sobre o rastreamento de eventos</span><span class="sxs-lookup"><span data-stu-id="cd40d-142">About Event Tracing</span></span>](/windows/desktop/ETW/about-event-tracing)
</dt> </dl>

 

 