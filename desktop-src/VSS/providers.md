---
description: Os provedores gerenciam volumes em execução e criam cópias de sombra deles sob demanda.
ms.assetid: 4e6b46b0-df9e-4458-b0ac-e237d7656337
title: Provedores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bb336dbb51fcbd715ea236ecdc0c62d81daf29d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105811384"
---
# <a name="providers"></a><span data-ttu-id="9bb42-103">Provedores</span><span class="sxs-lookup"><span data-stu-id="9bb42-103">Providers</span></span>

<span data-ttu-id="9bb42-104">Os [*provedores*](vssgloss-p.md) gerenciam volumes em execução e criam cópias de sombra deles sob demanda.</span><span class="sxs-lookup"><span data-stu-id="9bb42-104">[*Providers*](vssgloss-p.md) manage running volumes and create the shadow copies of them on demand.</span></span>

<span data-ttu-id="9bb42-105">Em resposta a uma solicitação de um solicitante, um provedor gera eventos COM para sinalizar aplicativos de uma cópia de sombra em vigor e, em seguida, cria e mantém essa cópia até que ela não seja mais necessária.</span><span class="sxs-lookup"><span data-stu-id="9bb42-105">In response to a request from a requester, a provider generates COM events to signal applications of a coming shadow copy, then creates and maintains that copy until it is no longer needed.</span></span>

<span data-ttu-id="9bb42-106">Enquanto uma cópia de sombra está em existência, o provedor cria um ambiente onde há efetivamente duas cópias independentes de qualquer volume que tenha sido copiado por sombra: um disco em execução que está sendo usado e atualizado normalmente, a outra cópia que é fixa e estável para backup.</span><span class="sxs-lookup"><span data-stu-id="9bb42-106">While a shadow copy is in existence, the provider creates an environment where there are effectively two independent copies of any volume that has been shadow copied: one the running disk being used and updated as normal, the other a copy that is disk fixed and stable for backup.</span></span>

<span data-ttu-id="9bb42-107">Embora um provedor padrão seja fornecido como parte do Windows, outros fornecedores são livres para fornecer suas próprias implementações otimizadas para suas próprias ofertas de hardware e software de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9bb42-107">While a default provider is supplied as part of Windows, other vendors are free to supply their own implementations that are optimized for their own storage hardware and software offerings.</span></span>

<span data-ttu-id="9bb42-108">Do ponto de vista de um desenvolvedor de aplicativos de usuário final ou backup/restauração, todos os provedores terão a mesma interface (consulte [selecionando provedores](selecting-providers.md)).</span><span class="sxs-lookup"><span data-stu-id="9bb42-108">From the point of view of an end-user or backup/restore application developer, all providers will have the same interface (see [Selecting Providers](selecting-providers.md)).</span></span>

<span data-ttu-id="9bb42-109">Todos os provedores devem ser capazes de fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="9bb42-109">All providers must be able to do the following:</span></span>

-   <span data-ttu-id="9bb42-110">Interceptar solicitações de e/s entre o sistema de arquivos e o sistema de armazenamento em massa subjacente.</span><span class="sxs-lookup"><span data-stu-id="9bb42-110">Intercept I/O requests between the file system and the underlying mass storage system.</span></span>
-   <span data-ttu-id="9bb42-111">Capture e recupere o status de um volume no momento da cópia de sombra, mantendo uma exibição "pontual" dos arquivos no disco sem operações parciais de e/s refletidas em seu estado.</span><span class="sxs-lookup"><span data-stu-id="9bb42-111">Capture and retrieve the status of a volume at the time of shadow copy, maintaining a "point in time" view of the files on the disk with no partial I/O operations reflected in its state.</span></span>
-   <span data-ttu-id="9bb42-112">Use essa exibição "pontual" para expor (minimamente para aplicativos habilitados para VSS) um volume virtual que contém os dados copiados de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-112">Use this "point in time" view to expose (minimally to VSS-enabled applications) a virtual volume containing the shadow copied data.</span></span>

<span data-ttu-id="9bb42-113">Dependendo de como isso é feito, um provedor pode ser de um dos três tipos:</span><span class="sxs-lookup"><span data-stu-id="9bb42-113">Depending on how this is done, a provider can be one of three types:</span></span>

-   [<span data-ttu-id="9bb42-114">Provedor do sistema</span><span class="sxs-lookup"><span data-stu-id="9bb42-114">System Provider</span></span>](#system-provider)
-   [<span data-ttu-id="9bb42-115">Provedores de software</span><span class="sxs-lookup"><span data-stu-id="9bb42-115">Software Providers</span></span>](#software-providers)
-   [<span data-ttu-id="9bb42-116">Provedores de hardware</span><span class="sxs-lookup"><span data-stu-id="9bb42-116">Hardware Providers</span></span>](#hardware-providers)

## <a name="system-provider"></a><span data-ttu-id="9bb42-117">Provedor do sistema</span><span class="sxs-lookup"><span data-stu-id="9bb42-117">System Provider</span></span>

<span data-ttu-id="9bb42-118">Um provedor de cópia de sombra, o [*provedor do sistema*](vssgloss-s.md), é fornecido como parte padrão de uma instalação do sistema operacional Windows.</span><span class="sxs-lookup"><span data-stu-id="9bb42-118">One shadow copy provider, the [*system provider*](vssgloss-s.md), is supplied as a default part of a Windows operating system installation.</span></span> <span data-ttu-id="9bb42-119">Atualmente, o provedor do sistema é uma instância específica de um provedor de software.</span><span class="sxs-lookup"><span data-stu-id="9bb42-119">Currently, the system provider is a particular instance of a software provider.</span></span> <span data-ttu-id="9bb42-120">No entanto, isso pode ser alterado no futuro.</span><span class="sxs-lookup"><span data-stu-id="9bb42-120">However, this may change in the future.</span></span>

<span data-ttu-id="9bb42-121">Para manter uma exibição "pontual" de um volume contido na cópia de sombra, o provedor do sistema usa uma técnica de copiar na gravação.</span><span class="sxs-lookup"><span data-stu-id="9bb42-121">To maintain a "point in time" view of a volume contained in the shadow copy, the system provider uses a copy-on-write technique.</span></span> <span data-ttu-id="9bb42-122">Cópias dos setores em disco que foram modificados (chamadas de "diffs") desde o início da criação da cópia de sombra são armazenadas em uma área de armazenamento de cópia de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-122">Copies of the sectors on disk that have been modified (called "diffs") since the beginning of the shadow copy creation are stored in a shadow copy storage area.</span></span>

<span data-ttu-id="9bb42-123">Portanto, o provedor do sistema pode expor o volume ativo, que pode ser gravado e lido normalmente, e aplicar as "diferenças" aos dados do volume ativo para expor efetivamente os dados congelados da cópia de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-123">Therefore, the system provider can expose the live volume, which can be written to and read from normally, and apply the "diffs" to the live volume's data to effectively expose the frozen data of the shadow copy.</span></span>

<span data-ttu-id="9bb42-124">Para o provedor do sistema, a área de armazenamento de cópia de sombra deve estar em um volume NTFS.</span><span class="sxs-lookup"><span data-stu-id="9bb42-124">For the system provider, the shadow copy storage area must be on an NTFS volume.</span></span> <span data-ttu-id="9bb42-125">O volume a ser copiado em sombra não precisa ser um volume NTFS, mas pelo menos um volume montado no sistema deve ser um volume NTFS.</span><span class="sxs-lookup"><span data-stu-id="9bb42-125">The volume to be shadow copied does not need to be an NTFS volume, but at least one volume mounted on the system must be an NTFS volume.</span></span>

## <a name="software-providers"></a><span data-ttu-id="9bb42-126">Provedores de software</span><span class="sxs-lookup"><span data-stu-id="9bb42-126">Software Providers</span></span>

<span data-ttu-id="9bb42-127">Os provedores de cópia de sombra de software interceptam e processam solicitações de e/s em uma camada de software entre o sistema de arquivos e o software do Gerenciador de volumes.</span><span class="sxs-lookup"><span data-stu-id="9bb42-127">Software shadow copy providers intercept and process I/O requests in a software layer between the file system and the volume manager software.</span></span> <span data-ttu-id="9bb42-128">Esses provedores são implementados como um componente DLL do modo de usuário e pelo menos um driver de dispositivo em modo kernel, normalmente (mas não necessariamente) um driver de filtro de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="9bb42-128">These providers are implemented as a user-mode DLL component and at least one kernel-mode device driver, typically (but not necessarily) a storage filter driver.</span></span> <span data-ttu-id="9bb42-129">O trabalho de criar essas cópias de sombra é feito no software.</span><span class="sxs-lookup"><span data-stu-id="9bb42-129">The work of creating these shadow copies is done in software.</span></span>

<span data-ttu-id="9bb42-130">Um provedor de cópia de sombra de software deve manter uma exibição "pontual" de um volume, tendo acesso a um conjunto de arquivos que podem ser usados para recriar com precisão o status do volume antes da cópia de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-130">A software shadow copy provider must maintain a "point-in-time" view of a volume by having access to a set of files that can be used to accurately re-create volume status prior to the shadow copy.</span></span> <span data-ttu-id="9bb42-131">Um exemplo disso é a técnica de copiar em gravação do provedor do sistema.</span><span class="sxs-lookup"><span data-stu-id="9bb42-131">An example of this is the copy-on-write technique of the system provider.</span></span>

<span data-ttu-id="9bb42-132">No entanto, o VSS não faz nenhuma restrição sobre a técnica que os provedores de software usam para criar e manter cópias de sombra, e fornecedores de terceiros são livres para implementar seus provedores de software como eles veem.</span><span class="sxs-lookup"><span data-stu-id="9bb42-132">However, VSS places no restrictions on what technique that software providers use to create and maintain shadow copies, and third-party vendors are free to implement their software providers as they see fit.</span></span>

<span data-ttu-id="9bb42-133">Além disso, o VSS oferece suporte para grande parte da funcionalidade dos provedores de cópia de sombra de software, como a definição do ponto no tempo, a sincronização de dados e a liberação, fornecendo uma interface comum para aplicativos de backup e o gerenciamento da cópia de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-133">In addition, VSS provides support for much of the functionality of software shadow copy providers, such as defining the point-in-time, data synchronization and flushing, providing a common interface for backup applications, and management of the shadow copy.</span></span>

<span data-ttu-id="9bb42-134">Um provedor de software, por definição, será aplicável a uma variedade maior de plataformas de armazenamento que um provedor de hardware, e deve ser capaz de trabalhar com discos básicos ou volumes lógicos igualmente bem.</span><span class="sxs-lookup"><span data-stu-id="9bb42-134">A software provider will, by definition, be applicable to a wider range of storage platforms than a hardware provider, and should be able to work with basic disks or logical volumes equally well.</span></span> <span data-ttu-id="9bb42-135">Essa generalidade sacrifica o desempenho que pode estar disponível implementando cópias de sombra em hardware e não usa nenhum recurso de captura de volume ou de espelhamento de arquivo específico do fornecedor.</span><span class="sxs-lookup"><span data-stu-id="9bb42-135">This generality sacrifices the performance that may be available by implementing shadow copies in hardware and does not make use of any vendor-specific volume capture or file mirroring features.</span></span>

## <a name="hardware-providers"></a><span data-ttu-id="9bb42-136">Provedores de hardware</span><span class="sxs-lookup"><span data-stu-id="9bb42-136">Hardware Providers</span></span>

<span data-ttu-id="9bb42-137">Os provedores de cópia de sombra de hardware interceptam solicitações de e/s do sistema de arquivos no nível de hardware, trabalhando em conjunto com um adaptador ou controlador de armazenamento de hardware.</span><span class="sxs-lookup"><span data-stu-id="9bb42-137">Hardware shadow copy providers intercept I/O requests from the file system at the hardware level by working in conjunction with a hardware storage adapter or controller.</span></span> <span data-ttu-id="9bb42-138">O trabalho de criar a cópia de sombra é executado por um adaptador de host, dispositivo de armazenamento ou controlador RAID fora do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="9bb42-138">The work of creating the shadow copy is performed by a host adapter, storage appliance, or RAID controller outside of the operating system.</span></span>

<span data-ttu-id="9bb42-139">Esses provedores são implementados como um componente DLL do modo de usuário que se comunica com o hardware que vai expor os dados de cópia de sombra: portanto, os provedores de cópia de sombra de hardware podem precisar chamar ou criar outros componentes do modo kernel.</span><span class="sxs-lookup"><span data-stu-id="9bb42-139">These providers are implemented as a user-mode DLL component communicating with the hardware that will expose the shadow copy data: therefore, hardware shadow copy providers may need to call or create other kernel-mode components.</span></span>

<span data-ttu-id="9bb42-140">Os provedores de hardware expõem para cópias de sombra do VSS de discos inteiros ou LUNs (unidades lógicas).</span><span class="sxs-lookup"><span data-stu-id="9bb42-140">Hardware providers expose to VSS shadow copies of entire disks or logical units (LUNs).</span></span> <span data-ttu-id="9bb42-141">Os solicitantes ainda lidam com cópias de sombra de volumes; todo o mapeamento de volume para disco é manipulado internamente pelo VSS.</span><span class="sxs-lookup"><span data-stu-id="9bb42-141">Requesters still deal with shadow copies of volumes; all the volume-to-disk mapping is handled internally by VSS.</span></span> <span data-ttu-id="9bb42-142">As cópias de sombra criadas por provedores de hardware de volumes que residem em discos dinâmicos têm um requisito específico: elas não podem ser importadas no mesmo sistema.</span><span class="sxs-lookup"><span data-stu-id="9bb42-142">Shadow copies created by hardware providers of volumes that reside on dynamic disks have a specific requirement:  They cannot be imported onto the same system.</span></span> <span data-ttu-id="9bb42-143">Eles devem ser criados como transportáveis e importados em um segundo sistema.</span><span class="sxs-lookup"><span data-stu-id="9bb42-143">They must be created transportable and imported on a second system.</span></span>

<span data-ttu-id="9bb42-144">Embora um provedor de cópia de sombra de hardware use a funcionalidade do VSS que define o ponto no tempo, permite a sincronização de dados, gerencia a cópia de sombra e fornece uma interface comum com aplicativos de backup, o VSS não especifica o mecanismo subjacente pelo qual o provedor de hardware produz e mantém cópias de sombra.</span><span class="sxs-lookup"><span data-stu-id="9bb42-144">While a hardware shadow copy provider makes use of VSS functionality that defines the point in time, allows data synchronization, manages the shadow copy, and provides a common interface with backup applications, VSS does not specify the underlying mechanism by which the hardware provider produces and maintains shadow copies.</span></span>

 

 



