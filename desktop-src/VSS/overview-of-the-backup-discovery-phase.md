---
description: 'Depois de chamar IVssBackupComponents:: GatherWriterMetadata, um solicitante usa a instância da interface IVssAsync retornada dessa chamada para determinar quando todos os gravadores no sistema acabaram de construir seus documentos de metadados do gravador.'
ms.assetid: 04658d50-04f0-4189-8b88-ff152f1bf482
title: Visão geral da fase de descoberta de backup
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d2d2a2d05220ecf3e25c77c18cc62b07726964f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105759773"
---
# <a name="overview-of-the-backup-discovery-phase"></a><span data-ttu-id="cca1b-103">Visão geral da fase de descoberta de backup</span><span class="sxs-lookup"><span data-stu-id="cca1b-103">Overview of the Backup Discovery Phase</span></span>

<span data-ttu-id="cca1b-104">Depois de chamar [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), um solicitante usa a instância da interface [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) retornada dessa chamada para determinar quando todos os gravadores no sistema acabaram de construir seus documentos de metadados do gravador.</span><span class="sxs-lookup"><span data-stu-id="cca1b-104">After calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), a requester uses the instance of the [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) interface returned from this call to determine when all writers on the system have finished constructing their Writer Metadata Documents.</span></span> <span data-ttu-id="cca1b-105">Para obter mais informações, consulte [visão geral do processamento de um backup em VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="cca1b-105">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="cca1b-106">Neste ponto, o solicitante pode iniciar uma fase de descoberta, examinando os metadados para determinar quais aplicativos estão em execução e quais volumes devem ser copiados em sombra para obter um backup completo.</span><span class="sxs-lookup"><span data-stu-id="cca1b-106">At this point, the requester can begin a discovery phase, examining metadata to determine what applications are running and which volumes must be shadow copied to get a complete backup.</span></span> <span data-ttu-id="cca1b-107">A tabela a seguir mostra a sequência de ações e eventos que são necessários para a fase de descoberta de backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-107">The following table shows the sequence of actions and events that are required for the backup discovery phase.</span></span>



| <span data-ttu-id="cca1b-108">Ação do solicitante</span><span class="sxs-lookup"><span data-stu-id="cca1b-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="cca1b-109">Evento</span><span class="sxs-lookup"><span data-stu-id="cca1b-109">Event</span></span> | <span data-ttu-id="cca1b-110">Ação do gravador</span><span class="sxs-lookup"><span data-stu-id="cca1b-110">Writer action</span></span>                                                                     |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="cca1b-111">Recuperar documentos de metadados do gravador (consulte [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata), [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)).</span><span class="sxs-lookup"><span data-stu-id="cca1b-111">Retrieve Writer Metadata Documents (see [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata), [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)).</span></span>                                                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="cca1b-112">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-112">None</span></span>  | <span data-ttu-id="cca1b-113">Durante esse período, os gravadores podem continuar com suas operações normais.</span><span class="sxs-lookup"><span data-stu-id="cca1b-113">During this period, writers may be able to continue with their normal operations.</span></span> |
| <span data-ttu-id="cca1b-114">Use a lista de componentes e seus [*conjuntos de arquivos*](vssgloss-f.md), bem como arquivos excluídos, para obter uma lista de volumes e arquivos envolvidos no backup (consulte [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)).</span><span class="sxs-lookup"><span data-stu-id="cca1b-114">Use the list of components and their [*file sets*](vssgloss-f.md), as well as excluded files, to obtain a list of volumes and files involved in the backup (see [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)).</span></span>                                                                                                                                                                                                                                                                      | <span data-ttu-id="cca1b-115">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-115">None</span></span>  | <span data-ttu-id="cca1b-116">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-116">None</span></span>                                                                              |
| <span data-ttu-id="cca1b-117">Escolha os componentes no documento de metadados do gravador do gravador para fazer backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-117">Choose which components in the writer's Writer Metadata Document to back up.</span></span> <span data-ttu-id="cca1b-118">Chame o [**componente IVssBackupComponents::**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) Addpara cada componente para adicioná-lo ao documento de componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-118">Call [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) for each component to add it to the Backup Components Document.</span></span> <span data-ttu-id="cca1b-119">(Consulte [trabalhando com a seleção para fazer backup](working-with-selectability-for-backup.md) e [trabalhar com o documento de componentes de backup](working-with-the-backup-components-document.md).)</span><span class="sxs-lookup"><span data-stu-id="cca1b-119">(See [Working with Selectability for Backup](working-with-selectability-for-backup.md) and [Working with the Backup Components Document](working-with-the-backup-components-document.md).)</span></span>                                                                                                                      | <span data-ttu-id="cca1b-120">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-120">None</span></span>  | <span data-ttu-id="cca1b-121">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-121">None</span></span>                                                                              |
| <span data-ttu-id="cca1b-122">Inicialize o conjunto de cópias de sombra, o contexto e a verificação de volumes com suporte (consulte [**IVssBackupComponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset), [**IVssBackupComponents:: IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)).</span><span class="sxs-lookup"><span data-stu-id="cca1b-122">Initialize the shadow copy set, context and check for supported volumes (see [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset), [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)).</span></span>                                                                                                                                                                                                                                                                                   | <span data-ttu-id="cca1b-123">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-123">None</span></span>  | <span data-ttu-id="cca1b-124">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-124">None</span></span>                                                                              |
| <span data-ttu-id="cca1b-125">Se estiver executando um backup que não seja de componente, adicione os volumes de destino desejados do documento de metadados do gravador ao conjunto de cópias de sombra chamando [**IVssBackupComponents:: AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) para cada volume.</span><span class="sxs-lookup"><span data-stu-id="cca1b-125">If performing a non-component backup, add the desired target volumes from the Writer Metadata Document to the shadow copy set by calling [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) for each volume.</span></span> <span data-ttu-id="cca1b-126">Caso contrário, para os componentes no documento de metadados do gravador que já foram adicionados ao documento de componentes de backup (chamando [**addComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), o solicitante também deve chamar **IVssBackupComponents:: AddToSnapshotSet** para cada volume afetado.</span><span class="sxs-lookup"><span data-stu-id="cca1b-126">Otherwise, for the components in the Writer Metadata Document that were already added to the Backup Components Document (by calling [**AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), the requester must also call **IVssBackupComponents::AddToSnapshotSet** for each affected volume.</span></span> | <span data-ttu-id="cca1b-127">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-127">None</span></span>  | <span data-ttu-id="cca1b-128">Nenhum</span><span class="sxs-lookup"><span data-stu-id="cca1b-128">None</span></span>                                                                              |



 

## <a name="writer-actions-during-the-discovery-phase"></a><span data-ttu-id="cca1b-129">Ações do gravador durante a fase de descoberta</span><span class="sxs-lookup"><span data-stu-id="cca1b-129">Writer Actions during the Discovery Phase</span></span>

<span data-ttu-id="cca1b-130">Como a fase de descoberta de um backup consiste principalmente em um solicitante processando as informações que ele recuperou dos documentos de metadados do gravador, há alguns requisitos em um gravador.</span><span class="sxs-lookup"><span data-stu-id="cca1b-130">Because the discovery phase of a backup consists primarily of a requester processing the information it has retrieved from Writer Metadata Documents, there are few if any requirements on a writer.</span></span>

<span data-ttu-id="cca1b-131">Teoricamente, um escritor pode continuar a ser executado normalmente neste ponto.</span><span class="sxs-lookup"><span data-stu-id="cca1b-131">In theory, a writer could continue to run normally at this point.</span></span> <span data-ttu-id="cca1b-132">No entanto, pode ser desejável que os autores comecem a preparações para as operações de cópia de sombra e backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-132">However, it may be desirable for writers to begin preparations for the coming shadow copy and backup operations.</span></span>

## <a name="requester-actions-during-the-discovery-phase"></a><span data-ttu-id="cca1b-133">Ações do solicitante durante a fase de descoberta</span><span class="sxs-lookup"><span data-stu-id="cca1b-133">Requester Actions during the Discovery Phase</span></span>

<span data-ttu-id="cca1b-134">Um solicitante usa os objetos [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) obtidos por meio de [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) para iterar em todos os metadados dos gravadores e selecionar os gravadores cujos dados pretendem fazer backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-134">A requester uses the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) objects obtained through [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to iterate over all the writers' metadata and selecting those writers whose data it intends to back up.</span></span>

<span data-ttu-id="cca1b-135">Neste ponto, o solicitante precisará gerar uma lista inicial de candidatos de backup de cada gravador Iterando os componentes do gravador usando [**IVssExamineWriterMetadata:: GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span><span class="sxs-lookup"><span data-stu-id="cca1b-135">At this point, the requester will need to generate an initial list of each writer's backup candidates by iterating over the writer's components using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span></span> <span data-ttu-id="cca1b-136">Isso fornece o solicitante com objetos [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) , do qual você pode obter as especificações para os arquivos cujo backup será feito usando [**IVssWMComponent:: GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent:: getdatabasefile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile)e [**IVssWMComponent:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span><span class="sxs-lookup"><span data-stu-id="cca1b-136">This provides the requester with [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) objects, from which you can get the specifications for the files to be backed up using [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent::GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile), and [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span></span>

<span data-ttu-id="cca1b-137">Como o objeto [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) pode usar caracteres curinga para armazenar informações de local de arquivo, pode ser necessário usar funções como [**findfirstfilefile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa)e [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea).</span><span class="sxs-lookup"><span data-stu-id="cca1b-137">Because the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) object can use wildcard characters to hold file location information, it may be necessary to use functions such as [**FindFirstFile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa), and [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea).</span></span>

<span data-ttu-id="cca1b-138">Até que a cópia de sombra tenha sido concluída, ainda é possível que os gravadores adicionem ou removam arquivos do disco no curso normal de seu trabalho, de modo que você não deve gerar a lista real de arquivos cujo backup será feito neste momento.</span><span class="sxs-lookup"><span data-stu-id="cca1b-138">Until the shadow copy has been completed, it is still possible for writers to add or remove files from disk in the normal course of their work, so you should not generate the actual list of files to be backed up at this time.</span></span>

<span data-ttu-id="cca1b-139">Em vez disso, a lista inicial de arquivos e volumes dos quais será feito backup é encontrada neste ponto, fazendo o seguinte:</span><span class="sxs-lookup"><span data-stu-id="cca1b-139">Instead, the initial list of files and volumes to be backed up is found at this point by doing the following:</span></span>

1.  <span data-ttu-id="cca1b-140">Examinando tudo selecionável para backup e componentes não selecionáveis no documento de metadados do gravador de cada gravador (usando [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) e organizá-los em [*conjuntos de componentes*](vssgloss-c.md) usar [*caminho lógico*](vssgloss-l.md) (consulte [trabalhando com a seleção e caminhos lógicos](working-with-selectability-and-logical-paths.md))</span><span class="sxs-lookup"><span data-stu-id="cca1b-140">Examining all selectable for backup and nonselectable components in each writer's Writer Metadata Document (using [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) and organizing them into [*component sets*](vssgloss-c.md) use [*logical path*](vssgloss-l.md) (see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md))</span></span>
2.  <span data-ttu-id="cca1b-141">[*Incluindo explicitamente*](vssgloss-e.md) todos os componentes necessários (não selecionáveis para componentes de backup sem selecionáveis para os ancestrais de backup) no documento de componentes de backup usando [ **IVssBackupComponents:: addComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span><span class="sxs-lookup"><span data-stu-id="cca1b-141">[*Including explicitly*](vssgloss-e.md) all required components (nonselectable for backup components without selectable for backup ancestors) in the Backup Components Document using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span></span>
3.  <span data-ttu-id="cca1b-142">Optando por incluir explicitamente opcional selecionável para componentes de backup que não definem um conjunto de componentes (usando [**IVssBackupComponents:: addComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent))</span><span class="sxs-lookup"><span data-stu-id="cca1b-142">Choosing to explicitly include optional selectable for backup components that do not define a component set (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent))</span></span>
4.  <span data-ttu-id="cca1b-143">Seleção [*de conjuntos de componentes*](vssgloss-c.md) para participação em um backup adicionando explicitamente seus definindo selecionáveis para o componente de backup (usando [**IVssBackupComponents:: addComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), que [*implicitamente inclui*](vssgloss-i.md) os [*Subcomponentes*](vssgloss-s.md)do conjunto de componentes.</span><span class="sxs-lookup"><span data-stu-id="cca1b-143">Selecting [*component sets*](vssgloss-c.md) for participation in a backup by explicitly adding their defining selectable for backup component (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), which [*implicitly includes*](vssgloss-i.md) the component set's [*subcomponents*](vssgloss-s.md).</span></span>
5.  <span data-ttu-id="cca1b-144">Usando as informações do [*conjunto de arquivos*](vssgloss-f.md) no documento de metadados do gravador selecionado e nas funções de gerenciamento de volume, um solicitante determina os caminhos dos arquivos dos quais será feito backup e os volumes que precisarão ser copiados em sombra</span><span class="sxs-lookup"><span data-stu-id="cca1b-144">Using [*file set*](vssgloss-f.md) information in the selected writers' Writer Metadata Document and volume management functions, a requester determines the paths of files to be backed up and the volumes that will need to be shadow copied</span></span>

<span data-ttu-id="cca1b-145">Observe que apenas os componentes explicitamente incluídos (usando [**IVssBackupComponents:: addComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) no backup e no documento de componentes de backup terão instâncias da interface [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) adicionadas a esse documento.</span><span class="sxs-lookup"><span data-stu-id="cca1b-145">Note that only the components explicitly included (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) in the backup and in the Backup Components Document will have instances of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface added to that document.</span></span> <span data-ttu-id="cca1b-146">Essas instâncias serão usadas para examinar e modificar as configurações de componente para os componentes explicitamente incluídos e qualquer um de seus subcomponentes incluídos implicitamente (consulte [a seleção e trabalhando com propriedades de componente](selectability-and-working-with-component-properties.md)).</span><span class="sxs-lookup"><span data-stu-id="cca1b-146">These instances will be used to examine and modify component settings for both explicitly included components and any of their implicitly included subcomponents (see [Selectability and Working with Component Properties](selectability-and-working-with-component-properties.md)).</span></span>

<span data-ttu-id="cca1b-147">Se um gravador incluir um dos componentes do gravador, ele deverá adicionar todos os seus componentes necessários.</span><span class="sxs-lookup"><span data-stu-id="cca1b-147">If a writer includes any of a writer's components, it must add all of its required components.</span></span> <span data-ttu-id="cca1b-148">No entanto, um solicitante também é gratuito para ignorar completamente todos os conjuntos de componentes de um gravador.</span><span class="sxs-lookup"><span data-stu-id="cca1b-148">However, a requester is also free to entirely skip all of a writer's component sets.</span></span> <span data-ttu-id="cca1b-149">Se nenhum dos componentes do gravador estiver explicitamente selecionado, o gravador não será selecionado e o VSS inibirá o gravador de participar do restante da operação de backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-149">If none of a writer's components are explicitly selected, the writer is not selected, and VSS inhibits that writer from participating in the rest of the backup operation.</span></span>

<span data-ttu-id="cca1b-150">O solicitante inicia o conjunto de cópias de sombra que conterá os volumes selecionados chamando [**IVssBackupComponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset).</span><span class="sxs-lookup"><span data-stu-id="cca1b-150">The requester initiates the shadow copy set that will contain the selected volumes by calling [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset).</span></span>

<span data-ttu-id="cca1b-151">Se o volume puder participar de uma cópia de sombra (que pode ser verificada com [**IVssBackupComponents:: IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)), o solicitante poderá adicionar esse volume ao conjunto de cópias de sombra usando [**IVssBackupComponents:: AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="cca1b-151">If the volume can participate in a shadow copy (which can be checked with [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)), the requester can add that volume to the shadow copy set using [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span></span>

<span data-ttu-id="cca1b-152">Embora não seja geralmente útil, um solicitante às vezes também pode escolher qual [*provedor*](vssgloss-p.md) manterá a cópia de sombra para um determinado volume (consulte [selecionando provedores](selecting-providers.md) para obter detalhes).</span><span class="sxs-lookup"><span data-stu-id="cca1b-152">Although it is not generally useful, a requester can sometimes also choose which [*provider*](vssgloss-p.md) will maintain the shadow copy for a given volume (see [Selecting Providers](selecting-providers.md) for details).</span></span>

<span data-ttu-id="cca1b-153">Deve-se ter cuidado ao lidar com um volume que contenha pastas montadas ou pontos de nova análise.</span><span class="sxs-lookup"><span data-stu-id="cca1b-153">Care should be given to the handling of a volume containing mounted folders or reparse points.</span></span> <span data-ttu-id="cca1b-154">Uma pasta montada ou um ponto de nova análise pode aparecer em uma cópia de sombra e pode ser feito backup.</span><span class="sxs-lookup"><span data-stu-id="cca1b-154">A mounted folder or reparse point can appear in a shadow copy and can be backed up.</span></span> <span data-ttu-id="cca1b-155">No entanto, uma pasta montada ou um ponto de nova análise não pode ser atravessado no volume de sombra copiado (consulte [trabalhando com pastas montadas e pontos de nova análise](working-with-reparse-and-mount-points.md)).</span><span class="sxs-lookup"><span data-stu-id="cca1b-155">However, a mounted folder or reparse point cannot be traversed on the shadow copied volume (see [Working with Mounted Folders and Reparse Points](working-with-reparse-and-mount-points.md)).</span></span>

<span data-ttu-id="cca1b-156">Neste ponto do backup, o documento de componentes de backup é inicializado e preenchido.</span><span class="sxs-lookup"><span data-stu-id="cca1b-156">At this point in the backup, the Backup Components Document is initialized and filled.</span></span> <span data-ttu-id="cca1b-157">Em operações futuras, os escritores e solicitantes podem usar a interface [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) para se comunicar entre si.</span><span class="sxs-lookup"><span data-stu-id="cca1b-157">In future operations, writers and requesters can use the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface to communicate with each other.</span></span>

<span data-ttu-id="cca1b-158">Os gravadores recebem acesso à interface [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) ao manipular os eventos [*PrepareForBackup*](vssgloss-p.md), [*pós-instantâneo*](vssgloss-p.md)e [*BackupComplete*](vssgloss-b.md) .</span><span class="sxs-lookup"><span data-stu-id="cca1b-158">Writers are given access to the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface when handling the [*PrepareForBackup*](vssgloss-p.md), [*PostSnapshot*](vssgloss-p.md), and [*BackupComplete*](vssgloss-b.md) events.</span></span>

 

 
