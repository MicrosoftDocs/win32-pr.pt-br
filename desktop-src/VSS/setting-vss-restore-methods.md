---
description: A configuração das operações de restauração é realmente iniciada durante o backup de dados, quando os gravadores especificam, em seus documentos de metadados do gravador, como seus dados devem ser restaurados.
ms.assetid: b1f948cd-d3b0-4637-b76d-b54a74bb5948
title: Definição de métodos de restauração do VSS
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 412cb699fb791a973e280f63fec03bd2854ccd1d
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/04/2021
ms.locfileid: "104172399"
---
# <a name="setting-vss-restore-methods"></a><span data-ttu-id="50c1f-103">Definição de métodos de restauração do VSS</span><span class="sxs-lookup"><span data-stu-id="50c1f-103">Setting VSS Restore Methods</span></span>

<span data-ttu-id="50c1f-104">A configuração das operações de restauração é realmente iniciada durante o backup de dados, quando os gravadores especificam, em seus documentos de metadados do gravador, como seus dados devem ser restaurados.</span><span class="sxs-lookup"><span data-stu-id="50c1f-104">The configuration of restore operations actually begins during data backup, when writers specify, in their Writer Metadata Documents, how their data should be restored.</span></span>

<span data-ttu-id="50c1f-105">Essas especificações, conhecidas como métodos de [*restauração*](vssgloss-r.md) ou destinos de [*restauração*](vssgloss-r.md)originais, podem ser modificadas durante a restauração por gravadores definindo novos destinos de restauração ou por solicitantes restaurando para novos locais (consulte [locais de backup e restauração não padrão](non-default-backup-and-restore-locations.md)).</span><span class="sxs-lookup"><span data-stu-id="50c1f-105">These specifications, referred to either as [*restore methods*](vssgloss-r.md) or original [*restore targets*](vssgloss-r.md), can be modified during restore by writers setting new restore targets or by requesters restoring to new locations (see [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md)).</span></span>

<span data-ttu-id="50c1f-106">Chamando [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), um gravador indica qual método de restauração deve ser usado em seu documento de metadados do gravador.</span><span class="sxs-lookup"><span data-stu-id="50c1f-106">By calling [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), a writer indicates which restore method should be used in its Writer Metadata Document.</span></span> <span data-ttu-id="50c1f-107">O método Restore é definido para todo o gravador e aplicado a todos os arquivos em todos os componentes gerenciados por um gravador.</span><span class="sxs-lookup"><span data-stu-id="50c1f-107">The restore method is set writer wide and applied to all files in all components that a writer manages.</span></span>

<span data-ttu-id="50c1f-108">Um solicitante Obtém (e deve respeitar) essas informações chamando [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="50c1f-108">A requester obtains (and must respect) this information by calling [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="50c1f-109">O método Restore é definido por uma enumeração de [**\_ \_ Enumeração RESTOREMETHOD do VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) , que é passada para [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) e retornada de [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="50c1f-109">The restore method is defined by a [**VSS\_RESTOREMETHOD\_ENUM**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) enumeration, which is passed to [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) and returned from [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="50c1f-110">O documento de metadados do gravador dá suporte aos seguintes métodos de restauração válidos (um método Restore do VSS \_ RME \_ indefinido indica um erro do gravador).</span><span class="sxs-lookup"><span data-stu-id="50c1f-110">The Writer Metadata Document supports the following valid restore methods (a restore method of VSS\_RME\_UNDEFINED indicates a writer error).</span></span> <span data-ttu-id="50c1f-111">As figuras resumem como os vários métodos de restauração com suporte e definidos devem ser implementados (VSS \_ RME \_ Custom não tem nenhuma figura associada a ele, porque por definição ele é específico para o gravador e deve seguir as APIs e a documentação do gravador específicas):</span><span class="sxs-lookup"><span data-stu-id="50c1f-111">The figures summarize how the various supported and defined restore methods should be implemented (VSS\_RME\_CUSTOM has no figure associated with it, because by definition it is specific to the writer and must follow the specific writer APIs and documentation):</span></span>

-   <span data-ttu-id="50c1f-112">restauração do VSS \_ RME \_ \_ se \_ não \_ existir.</span><span class="sxs-lookup"><span data-stu-id="50c1f-112">VSS\_RME\_RESTORE\_IF\_NOT\_THERE.</span></span> <span data-ttu-id="50c1f-113">Restaure os arquivos de componente para o disco se nenhum dos arquivos já estiver no disco.</span><span class="sxs-lookup"><span data-stu-id="50c1f-113">Restore component files to disk if none of the files are on the disk already.</span></span> <span data-ttu-id="50c1f-114">O status do arquivo de destino deve ser verificado após um evento de [**Prerestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="50c1f-114">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="50c1f-115">![Diagrama que mostra uma árvore de solução de problemas para VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span><span class="sxs-lookup"><span data-stu-id="50c1f-115">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span></span>
-   <span data-ttu-id="50c1f-116">a \_ restauração do VSS RME \_ se o \_ \_ puder ser \_ substituído.</span><span class="sxs-lookup"><span data-stu-id="50c1f-116">VSS\_RME\_RESTORE\_IF\_CAN\_REPLACE.</span></span> <span data-ttu-id="50c1f-117">Restaure os arquivos no disco se todos os arquivos puderem ser substituídos.</span><span class="sxs-lookup"><span data-stu-id="50c1f-117">Restore files to disk if all the files can be replaced.</span></span> <span data-ttu-id="50c1f-118">O status do arquivo de destino deve ser verificado após um evento de [**Prerestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="50c1f-118">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="50c1f-119">![Diagrama que mostra uma árvore de solução de problemas para VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span><span class="sxs-lookup"><span data-stu-id="50c1f-119">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span></span>
-   <span data-ttu-id="50c1f-120">início da restauração de interrupção do VSS \_ RME \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="50c1f-120">VSS\_RME\_STOP\_RESTORE\_START.</span></span> <span data-ttu-id="50c1f-121">Um serviço será interrompido antes da restauração dos arquivos.</span><span class="sxs-lookup"><span data-stu-id="50c1f-121">A service will be stopped prior to restoring the files.</span></span>
    <span data-ttu-id="50c1f-122">![Diagrama que mostra uma árvore de solução de problemas para VSS_RME_STOP_RESTORE_START.](images/srr.png)</span><span class="sxs-lookup"><span data-stu-id="50c1f-122">![Diagram that shows a troubleshooting tree for VSS_RME_STOP_RESTORE_START.](images/srr.png)</span></span>
-   <span data-ttu-id="50c1f-123">restauração do VSS \_ RME \_ para o \_ \_ \_ local alternativo.</span><span class="sxs-lookup"><span data-stu-id="50c1f-123">VSS\_RME\_RESTORE\_TO\_ALTERNATE\_LOCATION.</span></span> <span data-ttu-id="50c1f-124">Restaurar arquivos em disco em um local alternativo.</span><span class="sxs-lookup"><span data-stu-id="50c1f-124">Restore files to disk in an alternate location.</span></span> <span data-ttu-id="50c1f-125">Os mapeamentos de local alternativos são especificados no documento de metadados do gravador.</span><span class="sxs-lookup"><span data-stu-id="50c1f-125">The alternate location mappings are specified in the Writer Metadata Document.</span></span>
    <span data-ttu-id="50c1f-126">![Diagrama que mostra uma árvore de solução de problemas para VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span><span class="sxs-lookup"><span data-stu-id="50c1f-126">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span></span>
-   <span data-ttu-id="50c1f-127">restauração do VSS \_ RME \_ \_ na \_ reinicialização.</span><span class="sxs-lookup"><span data-stu-id="50c1f-127">VSS\_RME\_RESTORE\_AT\_REBOOT.</span></span> <span data-ttu-id="50c1f-128">Faz com que os arquivos sejam restaurados (substituídos) quando o computador é reinicializado.</span><span class="sxs-lookup"><span data-stu-id="50c1f-128">Cause files to be restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="50c1f-129">![Diagrama que mostra uma árvore de solução de problemas para VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span><span class="sxs-lookup"><span data-stu-id="50c1f-129">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span></span>
-   <span data-ttu-id="50c1f-130">restauração do VSS \_ RME \_ \_ na \_ reinicialização \_ se \_ não puder \_ substituir.</span><span class="sxs-lookup"><span data-stu-id="50c1f-130">VSS\_RME\_RESTORE\_AT\_REBOOT\_IF\_CANNOT\_REPLACE.</span></span> <span data-ttu-id="50c1f-131">Se um arquivo não puder ser restaurado no disco em um sistema em execução, ele será restaurado (substituído) quando o computador for reinicializado.</span><span class="sxs-lookup"><span data-stu-id="50c1f-131">If a file could not be restored to disk on a running system, then it is restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="50c1f-132">![Diagrama que mostra uma forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE de árvore de solução de problemas.</span><span class="sxs-lookup"><span data-stu-id="50c1f-132">![Diagram that shows a troubleshooting tree forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE.</span></span> ](images/raricr.png)
-   <span data-ttu-id="50c1f-133">VSS \_ RME \_ personalizado.</span><span class="sxs-lookup"><span data-stu-id="50c1f-133">VSS\_RME\_CUSTOM.</span></span> <span data-ttu-id="50c1f-134">Nenhum dos métodos predefinidos funcionará; o aplicativo de backup deve usar APIs especializadas para executar a operação de restauração.</span><span class="sxs-lookup"><span data-stu-id="50c1f-134">None of the predefined methods will work; the backup application must use specialized APIs to perform the restore operation.</span></span> <span data-ttu-id="50c1f-135">Para esse método de backup, o solicitante deve entender completamente o gravador em questão.</span><span class="sxs-lookup"><span data-stu-id="50c1f-135">For this backup method, the requester must completely understand the writer in question.</span></span> <span data-ttu-id="50c1f-136">Consulte [casos de uso do VSS especiais](special-vss-usage-cases.md) para instâncias com suporte no momento.</span><span class="sxs-lookup"><span data-stu-id="50c1f-136">See [Special VSS Usage Cases](special-vss-usage-cases.md) for currently supported instances.</span></span>

 

 



