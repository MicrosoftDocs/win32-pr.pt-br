---
description: Um solicitante é qualquer aplicativo que use a API do VSS (especificamente a interface IVssBackupComponents) para solicitar os serviços do Serviço de Cópias de Sombra de Volume para criar e gerenciar cópias de sombra e conjuntos de cópias de sombra de um ou mais volumes.
ms.assetid: e49920d0-5b66-4aa1-b3ca-641629df5f8a
title: Solicitantes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b676b8cd287365b257e3b6ee85a7e47a70f88ef3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104165421"
---
# <a name="requesters"></a><span data-ttu-id="04dc4-103">Solicitantes</span><span class="sxs-lookup"><span data-stu-id="04dc4-103">Requesters</span></span>

<span data-ttu-id="04dc4-104">Um [*solicitante*](vssgloss-r.md) é qualquer aplicativo que use a API do VSS (especificamente a interface [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) ) para solicitar os serviços do serviço de cópias de sombra de volume para criar e gerenciar cópias de sombra e conjuntos de cópias de sombra de um ou mais volumes.</span><span class="sxs-lookup"><span data-stu-id="04dc4-104">A [*requester*](vssgloss-r.md) is any application that uses the VSS API (specifically the [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface) to request the services of the Volume Shadow Copy Service to create and manage shadow copies and shadow copy sets of one or more volumes.</span></span>

<span data-ttu-id="04dc4-105">O exemplo mais comum de um solicitante (e o único abordado nesta documentação) é um aplicativo de backup/restauração com reconhecimento de VSS, que usa dados copiados por sombra como uma fonte estável para suas operações de backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-105">The most typical example of a requester (and the only one addressed in this documentation) is a VSS-aware backup/restore application, which uses shadow-copied data as a stable source for its backup operations.</span></span>

<span data-ttu-id="04dc4-106">Além de iniciar cópias de sombra, os aplicativos de solicitação de backup/recuperação se comunicam com produtores de dados (gravadores) para coletar informações sobre o sistema e para sinalizar gravadores para preparar seus dados para backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-106">In addition to initiating shadow copies, backup/recover requester applications communicate with data producers (writers) to gather information on the system and to signal writers to prepare their data for backup.</span></span>

## <a name="requester-state"></a><span data-ttu-id="04dc4-107">Estado do solicitante</span><span class="sxs-lookup"><span data-stu-id="04dc4-107">Requester State</span></span>

<span data-ttu-id="04dc4-108">Um solicitante mantém suas informações de estado em um objeto de metadados baseado em XML chamado documento de componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-108">A requester maintains its state information in an XML-based metadata object called the Backup Components Document.</span></span> <span data-ttu-id="04dc4-109">Os metadados do solicitante são necessários, mas não é suficiente para permitir que um solicitante faça backup e, em seguida, restaure um sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="04dc4-109">The requester metadata is necessary, but not sufficient to allow a requester to back up and then restore a file system.</span></span> <span data-ttu-id="04dc4-110">Os motivos para isso são os seguintes:</span><span class="sxs-lookup"><span data-stu-id="04dc4-110">The reasons for this are the following:</span></span>

-   <span data-ttu-id="04dc4-111">Durante uma operação de backup, apenas um subconjunto de todos os componentes envolvidos no backup — não [*selecionável para*](vssgloss-s.md) componentes de backup sem selecionáveis para os ancestrais de backup e selecionáveis para os componentes de backup que foram [*incluídos explicitamente*](vssgloss-e.md) no backup — tiveram suas informações adicionadas ao documento de componentes de backup do solicitante.</span><span class="sxs-lookup"><span data-stu-id="04dc4-111">During a backup operation, only a subset of all the components involved in the backup—[*nonselectable for backup*](vssgloss-s.md) components without selectable for backup ancestors and selectable for backup components that have been [*included explicitly*](vssgloss-e.md) in the backup—have had their information added to the requester's Backup Components Document.</span></span>
-   <span data-ttu-id="04dc4-112">As informações até mesmo para os componentes adicionados ao documento de componentes de backup estão incompletas: as especificações de arquivo e caminho não estão incluídas.</span><span class="sxs-lookup"><span data-stu-id="04dc4-112">The information even for those components added to the Backup Components Document is incomplete—file and path specifications are not included.</span></span>
-   <span data-ttu-id="04dc4-113">Durante as operações de restauração, um componente [*incluído implicitamente*](vssgloss-i.md) no backup pode ser [*selecionável para restauração*](vssgloss-s.md) e, portanto, pode ser incluído explicitamente na restauração.</span><span class="sxs-lookup"><span data-stu-id="04dc4-113">During restore operations, a component [*implicitly included*](vssgloss-i.md) in the backup may be [*selectable for restore*](vssgloss-s.md) and therefore can be explicitly included in the restore.</span></span> <span data-ttu-id="04dc4-114">Isso exigirá a atualização do documento de componentes de backup do solicitante com informações de cópias armazenadas do documento de metadados do gravador de um gravador.</span><span class="sxs-lookup"><span data-stu-id="04dc4-114">This will require the updating of the requester's Backup Components Document with information from stored copies of a writer's Writer Metadata Document.</span></span>

<span data-ttu-id="04dc4-115">Para permitir a especificação completa de uma operação de backup ou restauração, a API do VSS permite que o solicitante consulte os metadados da execução dos gravadores (durante os backups) ou examine os metadados do gravador armazenado (durante as restaurações).</span><span class="sxs-lookup"><span data-stu-id="04dc4-115">To allow for full specification of a backup or restore operation, the VSS API allows the requester to query running writers' metadata (during backups) or examine stored writer metadata (during restores).</span></span> <span data-ttu-id="04dc4-116">Além disso, um gravador pode modificar as informações do componente no documento de componentes de backup no decorrer de uma operação de backup ou restauração.</span><span class="sxs-lookup"><span data-stu-id="04dc4-116">In addition, a writer can modify component information in the Backup Components Document in the course of a backup or restore operation.</span></span>

<span data-ttu-id="04dc4-117">Usando as informações sobre quais componentes foram selecionados para backup e restauração e as regras sobre a seleção de componentes (para obter mais informações, consulte [Configurando a organização do componente](definition-of-components-by-writers.md) e [trabalhando com a escolha e os caminhos lógicos](working-with-selectability-and-logical-paths.md)), um solicitante pode determinar quais arquivos de qual gravador precisa fazer backup ou restaurar e onde ele pode encontrar esses arquivos.</span><span class="sxs-lookup"><span data-stu-id="04dc4-117">Using the information about which components have been selected for backup and restore and the rules regarding component selection (for more information, see [Setting up Component Organization](definition-of-components-by-writers.md) and [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md)), a requester can determine which files of which writer it needs to back up or restore, and where it can find those files.</span></span>

<span data-ttu-id="04dc4-118">Como parte de um backup, os metadados do solicitante e do gravador devem ser armazenados para que possam ser usados na restauração.</span><span class="sxs-lookup"><span data-stu-id="04dc4-118">As part of a backup, both requester and writer metadata must be stored so that it can be used in the restore.</span></span> <span data-ttu-id="04dc4-119">Por outro lado, as operações de restauração exigem a recuperação dos documentos de metadados do gravador e dos componentes de backup antigos para obter instruções completas sobre a restauração de arquivos.</span><span class="sxs-lookup"><span data-stu-id="04dc4-119">Conversely, restore operations require the retrieval of the old Backup Components and Writer Metadata Documents to obtain full instructions on restoring files.</span></span>

## <a name="requester-interprocess-communication"></a><span data-ttu-id="04dc4-120">Comunicação entre processos do solicitante</span><span class="sxs-lookup"><span data-stu-id="04dc4-120">Requester Interprocess Communication</span></span>

<span data-ttu-id="04dc4-121">O solicitante mantém o controle sobre as operações de backup e restauração do VSS, gerando eventos COM por meio de várias chamadas na API do solicitante.</span><span class="sxs-lookup"><span data-stu-id="04dc4-121">The requester maintains control over VSS backup and restore operations by generating COM events through various calls in the requester API.</span></span> <span data-ttu-id="04dc4-122">Essas chamadas podem fazer o seguinte:</span><span class="sxs-lookup"><span data-stu-id="04dc4-122">These calls can do the following:</span></span>

-   <span data-ttu-id="04dc4-123">Faça solicitações dos provedores, por exemplo, [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) faz com que o provedor crie uma cópia de sombra do volume selecionado.</span><span class="sxs-lookup"><span data-stu-id="04dc4-123">Make requests of the providers, for example, [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) causes the provider to create a shadow copy of the selected volume.</span></span>
-   <span data-ttu-id="04dc4-124">Disparar os gravadores para retornar informações, por exemplo, [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) permite que o solicitante obtenha o documento de metadados do gravador de cada gravador.</span><span class="sxs-lookup"><span data-stu-id="04dc4-124">Trigger the writers to return information, for example, [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) enables the requester to obtain each writer's Writer Metadata Document.</span></span>
-   <span data-ttu-id="04dc4-125">Exigir que os gravadores se preparem ou manipulem várias fases das operações de cópia de sombra e backup, por exemplo, [**IVssBackupComponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) Signal Writers para configurar o congelamento de e/s.</span><span class="sxs-lookup"><span data-stu-id="04dc4-125">Require writers to prepare for or handle various phases of the shadow copy and backup operations, for example, [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) signals writers to set up for the I/O freeze.</span></span>

<span data-ttu-id="04dc4-126">Um solicitante recebe informações dos gravadores por meio de documentos de metadados do gravador em tempo real ou armazenados e com o uso da interface [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , que o gravador pode atualizar.</span><span class="sxs-lookup"><span data-stu-id="04dc4-126">A requester receives information from the writers through live or stored Writer Metadata Documents and through the use of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface, which the writer can update.</span></span>

## <a name="life-cycle-of-a-requester-during-backup"></a><span data-ttu-id="04dc4-127">Ciclo de vida de um solicitante durante o backup</span><span class="sxs-lookup"><span data-stu-id="04dc4-127">Life Cycle of a Requester during Backup</span></span>

<span data-ttu-id="04dc4-128">Veja a seguir um resumo do ciclo de vida do solicitante para backup:</span><span class="sxs-lookup"><span data-stu-id="04dc4-128">The following is a summary of the requester life cycle for backup:</span></span>

1.  <span data-ttu-id="04dc4-129">Instanciar e inicializar interfaces de API do VSS.</span><span class="sxs-lookup"><span data-stu-id="04dc4-129">Instantiate and initialize VSS API interfaces.</span></span>
2.  <span data-ttu-id="04dc4-130">Contate os gravadores e recupere suas informações.</span><span class="sxs-lookup"><span data-stu-id="04dc4-130">Contact writers and retrieve their information.</span></span>
3.  <span data-ttu-id="04dc4-131">Escolha os dados para fazer backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-131">Choose data to back up.</span></span>
4.  <span data-ttu-id="04dc4-132">Solicite uma cópia de sombra do provedor.</span><span class="sxs-lookup"><span data-stu-id="04dc4-132">Request a shadow copy of the provider.</span></span>
5.  <span data-ttu-id="04dc4-133">Faça backup dos dados.</span><span class="sxs-lookup"><span data-stu-id="04dc4-133">Back up the data.</span></span>
6.  <span data-ttu-id="04dc4-134">Libere a interface e a cópia de sombra.</span><span class="sxs-lookup"><span data-stu-id="04dc4-134">Release the interface and the shadow copy.</span></span>

## <a name="life-cycle-of-a-requester-during-restore"></a><span data-ttu-id="04dc4-135">Ciclo de vida de um solicitante durante a restauração</span><span class="sxs-lookup"><span data-stu-id="04dc4-135">Life Cycle of a Requester during Restore</span></span>

<span data-ttu-id="04dc4-136">O ciclo de vida da restauração não requer uma cópia de sombra, mas ainda requer a cooperação do gravador:</span><span class="sxs-lookup"><span data-stu-id="04dc4-136">The restore life cycle does not require a shadow copy, but still requires writer cooperation:</span></span>

1.  <span data-ttu-id="04dc4-137">Instanciar interfaces de API do VSS.</span><span class="sxs-lookup"><span data-stu-id="04dc4-137">Instantiate VSS API interfaces.</span></span>
2.  <span data-ttu-id="04dc4-138">Inicialize o solicitante para a operação de restauração carregando um documento de componentes de backup armazenados.</span><span class="sxs-lookup"><span data-stu-id="04dc4-138">Initialize the requester for the restore operation by loading a stored Backup Components Document.</span></span>
3.  <span data-ttu-id="04dc4-139">Recuperar documentos de metadados do gravador armazenado e componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-139">Retrieve stored Writer Metadata and Backup Components Documents.</span></span>
4.  <span data-ttu-id="04dc4-140">Entre em contato com os gravadores para inicializar a cooperação.</span><span class="sxs-lookup"><span data-stu-id="04dc4-140">Contact the writers to initialize cooperation.</span></span>
5.  <span data-ttu-id="04dc4-141">Verifique se há atualizações do gravador no documento de componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="04dc4-141">Check for writer updates to the Backup Components Document.</span></span>
6.  <span data-ttu-id="04dc4-142">Restaurar os dados.</span><span class="sxs-lookup"><span data-stu-id="04dc4-142">Restore the data.</span></span>

 

 



