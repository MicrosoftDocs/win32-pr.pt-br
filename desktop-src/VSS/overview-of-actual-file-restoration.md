---
description: Depois de executar as ações descritas em visão geral da inicialização da restauração e da visão geral da preparação para a restauração, o solicitante tem informações suficientes para começar a restaurar arquivos.
ms.assetid: 15df39fa-1eb1-4e96-9e26-14470f391de4
title: Visão geral da restauração de arquivo real
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6527a10d0880b1e599377abb797449816019ab89
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105759775"
---
# <a name="overview-of-actual-file-restoration"></a><span data-ttu-id="c2159-103">Visão geral da restauração de arquivo real</span><span class="sxs-lookup"><span data-stu-id="c2159-103">Overview of Actual File Restoration</span></span>

<span data-ttu-id="c2159-104">Depois de executar as ações descritas em [visão geral da inicialização da restauração](overview-of-restore-initialization.md) e [da visão geral da preparação para a restauração](overview-of-preparing-for-restore.md), o solicitante tem informações suficientes para começar a restaurar arquivos.</span><span class="sxs-lookup"><span data-stu-id="c2159-104">After performing the actions described in [Overview of Restore Initialization](overview-of-restore-initialization.md) and [Overview of Preparing for Restore](overview-of-preparing-for-restore.md), the requester has sufficient information to begin restoring files.</span></span> <span data-ttu-id="c2159-105">A restauração de arquivos não envolve interações de gravador ou a geração de eventos.</span><span class="sxs-lookup"><span data-stu-id="c2159-105">File restoration does not involve writer interactions or the generation of events.</span></span> <span data-ttu-id="c2159-106">Para obter mais informações, consulte [visão geral do processamento de uma restauração no VSS](overview-of-processing-a-restore-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="c2159-106">For more information, see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md).</span></span>

<span data-ttu-id="c2159-107">A tabela a seguir mostra a sequência de ações e eventos necessários para restaurar arquivos.</span><span class="sxs-lookup"><span data-stu-id="c2159-107">The following table shows the sequence of actions and events that are required to restore files.</span></span>



| <span data-ttu-id="c2159-108">Ação do solicitante</span><span class="sxs-lookup"><span data-stu-id="c2159-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                          | <span data-ttu-id="c2159-109">Evento</span><span class="sxs-lookup"><span data-stu-id="c2159-109">Event</span></span> | <span data-ttu-id="c2159-110">Ação do gravador</span><span class="sxs-lookup"><span data-stu-id="c2159-110">Writer action</span></span> |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|---------------|
| <span data-ttu-id="c2159-111">Gere uma listagem de conjunto de restauração para arquivos na mídia de backup.</span><span class="sxs-lookup"><span data-stu-id="c2159-111">Generate a restore set listing for files on backup media.</span></span>                                                                                                                                                                                                                                                                 | <span data-ttu-id="c2159-112">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-112">None</span></span>  | <span data-ttu-id="c2159-113">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-113">None</span></span>          |
| <span data-ttu-id="c2159-114">Manipule [*destinos direcionados*](vssgloss-d.md) ou restauração de [*arquivo parcial*](vssgloss-p.md) (Confira [**IVssComponent:: GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent:: getparcialfile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span><span class="sxs-lookup"><span data-stu-id="c2159-114">Handle [*directed targets*](vssgloss-d.md) or [*partial file*](vssgloss-p.md) restoration (see [**IVssComponent::GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span></span> | <span data-ttu-id="c2159-115">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-115">None</span></span>  | <span data-ttu-id="c2159-116">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-116">None</span></span>          |
| <span data-ttu-id="c2159-117">Se necessário, ignore todos os locais de restauração especificados e restaure para um novo local especificado em uma chamada anterior para [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span><span class="sxs-lookup"><span data-stu-id="c2159-117">If necessary, ignore all specified restore locations and restore to a new location specified in an earlier call to [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span></span>                                                                                                                       | <span data-ttu-id="c2159-118">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-118">None</span></span>  | <span data-ttu-id="c2159-119">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-119">None</span></span>          |
| <span data-ttu-id="c2159-120">Se a restauração for incremental e outras restaurações forem necessárias, indique (consulte [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) e [backups incrementais e diferenciais](incremental-and-differential-backups.md)).</span><span class="sxs-lookup"><span data-stu-id="c2159-120">If the restore is incremental and further restores are needed, indicate (see [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) and [Incremental and Differential Backups](incremental-and-differential-backups.md)).</span></span>                                                     | <span data-ttu-id="c2159-121">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-121">None</span></span>  | <span data-ttu-id="c2159-122">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-122">None</span></span>          |
| <span data-ttu-id="c2159-123">Para saber se um gravador modificou o conteúdo do documento de componentes de backup, chame [**IVssBackupComponents:: GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span><span class="sxs-lookup"><span data-stu-id="c2159-123">To learn whether a writer has modified the contents of the Backup Components Document, call [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span></span> <span data-ttu-id="c2159-124">Por exemplo, o gravador pode ter alterado o destino de restauração.</span><span class="sxs-lookup"><span data-stu-id="c2159-124">For example, the writer might have changed the restore target.</span></span>                                                                 | <span data-ttu-id="c2159-125">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-125">None</span></span>  | <span data-ttu-id="c2159-126">Nenhum</span><span class="sxs-lookup"><span data-stu-id="c2159-126">None</span></span>          |



 

## <a name="requester-actions-during-restoring-files"></a><span data-ttu-id="c2159-127">Ações do solicitante durante a restauração de arquivos</span><span class="sxs-lookup"><span data-stu-id="c2159-127">Requester Actions during Restoring Files</span></span>

<span data-ttu-id="c2159-128">Para a maioria dos arquivos na mídia de backup, o solicitante precisa determinar seus locais originais e quaisquer novos locais ou mapeamentos de locais alternativos que se aplicam a eles.</span><span class="sxs-lookup"><span data-stu-id="c2159-128">For most files on the backup media, the requester needs to determine their original locations and any new locations or alternate location mappings that apply to them.</span></span> <span data-ttu-id="c2159-129">(Consulte [gerando um conjunto de restauração](generating-a-restore-set.md) para uma discussão sobre práticas recomendadas para determinar quais arquivos restaurar e onde restaurá-los.)</span><span class="sxs-lookup"><span data-stu-id="c2159-129">(See [Generating a Restore Set](generating-a-restore-set.md) for a discussion of best practices in determining which files to restore and where to restore them.)</span></span>

<span data-ttu-id="c2159-130">Além disso, alguns arquivos podem ter [*destinos direcionados*](vssgloss-d.md) ou dar suporte à restauração [*parcial de arquivos*](vssgloss-p.md) .</span><span class="sxs-lookup"><span data-stu-id="c2159-130">In addition, some files may have [*directed targets*](vssgloss-d.md) or support [*partial file*](vssgloss-p.md) restoration.</span></span> <span data-ttu-id="c2159-131">O número de tais arquivos pode ser encontrado chamando [**IVssComponent:: GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) e [**IVssComponent:: GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount)e informações sobre instruções de restauração detalhadas podem ser encontradas chamando [**IVssComponent:: AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) e [**IVssComponent:: getparcialfile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="c2159-131">The number of such files can be found by calling [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) and [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount), and information on detailed restoration instructions can be found by calling [**IVssComponent::AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="c2159-132">(Arquivos parciais e direcionados podem fazer parte dos componentes adicionados implicitamente ou explicitamente ao backup original, consulte [trabalhando com a seleção de restauração e subcomponentes](working-with-selectability-for-restore-and-subcomponents.md) para obter mais informações.)</span><span class="sxs-lookup"><span data-stu-id="c2159-132">(Partial and directed files can be part of components added implicitly or explicitly to the original backup, see [Working with Selectability For Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md) for more information.)</span></span>

<span data-ttu-id="c2159-133">O êxito ou a falha de uma restauração é indicado em uma base de componente por componente usando [**IVssBackupComponents:: SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span><span class="sxs-lookup"><span data-stu-id="c2159-133">Success or failure of a restore is indicated on a component-by-component basis using [**IVssBackupComponents::SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span></span> <span data-ttu-id="c2159-134">A necessidade de operações de restauração adicionais (no caso de restaurações incrementais ou diferenciais) também é indicada em uma base de componente por componente usando [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="c2159-134">The need for further restore operations (in the case of incremental or differential restores) is also indicated on a component-by-component basis using [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="c2159-135">Em geral, o VSS não especifica um mecanismo para recuperar dados de uma mídia de armazenamento, uma opção de meio de armazenamento ou como determinar quais arquivos devem ser restaurados onde.</span><span class="sxs-lookup"><span data-stu-id="c2159-135">In general, VSS does not specify a mechanism for retrieving data from a storage media, a choice of storage medium, or how to determine which files should be restored where.</span></span>

<span data-ttu-id="c2159-136">No entanto, para determinados gravadores, a restauração de arquivos pode envolver o uso de uma interface personalizada documentada e um procedimento.</span><span class="sxs-lookup"><span data-stu-id="c2159-136">However, for certain writers, restoring files may involve the use of a documented custom interface and procedure.</span></span> <span data-ttu-id="c2159-137">Os gravadores de sistema do Windows, que atualmente exigem esse suporte, são documentados em [casos de uso do VSS especiais](special-vss-usage-cases.md).</span><span class="sxs-lookup"><span data-stu-id="c2159-137">Windows system writers, which currently require such support, are documented in [Special VSS Usage Cases](special-vss-usage-cases.md).</span></span>

<span data-ttu-id="c2159-138">Em geral, é recomendável que os arquivos de cada componente de cada [*instância do gravador*](vssgloss-w.md) sejam processados como uma unidade.</span><span class="sxs-lookup"><span data-stu-id="c2159-138">In general, it is recommended that the files of each component of each [*writer instance*](vssgloss-w.md) be processed as a unit.</span></span> <span data-ttu-id="c2159-139">Isso exige o seguinte:</span><span class="sxs-lookup"><span data-stu-id="c2159-139">This requires the following:</span></span>

-   <span data-ttu-id="c2159-140">Associar cada arquivo a ser restaurado com o componente que o gerenciau.</span><span class="sxs-lookup"><span data-stu-id="c2159-140">Associating each file to be restored with the component that managed it.</span></span> <span data-ttu-id="c2159-141">Isso requer o uso de documentos de metadados do gravador.</span><span class="sxs-lookup"><span data-stu-id="c2159-141">This requires the use of Writer Metadata Documents.</span></span>
-   <span data-ttu-id="c2159-142">Obtendo informações corretas de destino de restauração.</span><span class="sxs-lookup"><span data-stu-id="c2159-142">Obtaining correct restoration target information.</span></span> <span data-ttu-id="c2159-143">Isso requer informações do documento de componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="c2159-143">This requires information from the Backup Components Document.</span></span>

 

 



