---
description: 'Em resposta a um evento de identificação, cada gravador presente no sistema constrói seu próprio documento de metadados do gravador usando o IVssCreateWriterMetadata. Um evento de identificação normalmente é gerado por um solicitante chamando IVssBackupComponents:: GatherWriterMetadata.'
ms.assetid: bae9bbe7-ca55-47cb-b253-8092007cb181
title: Ciclo de vida do documento de metadados do gravador
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45be5748625d21f99abe3e77e0d6474a62210904
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105760915"
---
# <a name="writer-metadata-document-life-cycle"></a><span data-ttu-id="674c8-104">Ciclo de vida do documento de metadados do gravador</span><span class="sxs-lookup"><span data-stu-id="674c8-104">Writer Metadata Document Life Cycle</span></span>

<span data-ttu-id="674c8-105">Em resposta a um [*evento de identificação*](vssgloss-i.md), cada gravador presente no sistema constrói seu próprio documento de metadados do gravador usando o [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span><span class="sxs-lookup"><span data-stu-id="674c8-105">In response to an [*Identify event*](vssgloss-i.md), each writer present on the system constructs its own Writer Metadata Document using [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span></span> <span data-ttu-id="674c8-106">Um *evento de identificação* normalmente é gerado por um solicitante chamando [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span><span class="sxs-lookup"><span data-stu-id="674c8-106">An *Identify event* is typically generated by a requester calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span>

<span data-ttu-id="674c8-107">Ao criar um documento de metadados do gravador, seja por meio da interface [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) ou por meio da inicialização do gravador ([**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), um gravador deve especificar explicitamente o seguinte:</span><span class="sxs-lookup"><span data-stu-id="674c8-107">When creating a Writer Metadata Document, either through the [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) interface or through writer initialization ([**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), a writer must explicitly specify the following:</span></span>

-   [<span data-ttu-id="674c8-108">*Método Restore*</span><span class="sxs-lookup"><span data-stu-id="674c8-108">*Restore method*</span></span>](vssgloss-r.md)
-   <span data-ttu-id="674c8-109">Nome do gravador</span><span class="sxs-lookup"><span data-stu-id="674c8-109">Writer name</span></span>
-   [<span data-ttu-id="674c8-110">*ID da classe do gravador*</span><span class="sxs-lookup"><span data-stu-id="674c8-110">*Writer class ID*</span></span>](vssgloss-w.md)
-   <span data-ttu-id="674c8-111">Uso de dados ( [**consulte \_ \_ tipo de uso do VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span><span class="sxs-lookup"><span data-stu-id="674c8-111">Data usage (see [**VSS\_USAGE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span></span>
-   <span data-ttu-id="674c8-112">Tipo de fonte de dados (consulte [**\_ \_ tipo de origem VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span><span class="sxs-lookup"><span data-stu-id="674c8-112">Date source type (see [**VSS\_SOURCE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span></span>

<span data-ttu-id="674c8-113">Além disso, ele também pode especificar o seguinte:</span><span class="sxs-lookup"><span data-stu-id="674c8-113">In addition, it may also specify the following:</span></span>

-   <span data-ttu-id="674c8-114">Componentes (que podem ou não conter conjuntos de arquivos)</span><span class="sxs-lookup"><span data-stu-id="674c8-114">Components (which may or may not contain file sets)</span></span>
-   <span data-ttu-id="674c8-115">Adicionar mapeamentos alternativos</span><span class="sxs-lookup"><span data-stu-id="674c8-115">Add alternate mappings</span></span>
-   <span data-ttu-id="674c8-116">Excluir listas de arquivos</span><span class="sxs-lookup"><span data-stu-id="674c8-116">Exclude file lists</span></span>

<span data-ttu-id="674c8-117">Uma visão geral da criação do documento de metadados do gravador é encontrada em [ações do gravador durante a inicialização do backup](overview-of-backup-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="674c8-117">An overview of Writer Metadata Document creation is found in [Writer Actions during Backup Initialization](overview-of-backup-initialization.md).</span></span>

<span data-ttu-id="674c8-118">Os solicitantes normalmente fazem uso de um dos dois métodos para obter acesso aos metadados do gravador:</span><span class="sxs-lookup"><span data-stu-id="674c8-118">Requesters typically make use of one of two methods to obtain access to writer metadata:</span></span>

-   <span data-ttu-id="674c8-119">Durante a maioria das operações de backup, um solicitante usa [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) para obter uma instância da interface [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) para permitir o acesso aos metadados de um gravador em execução no momento.</span><span class="sxs-lookup"><span data-stu-id="674c8-119">During most backup operations, a requester uses [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to obtain an instance of the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface to allow access to the metadata of a currently executing writer.</span></span>
-   <span data-ttu-id="674c8-120">Para operações de restauração ou backups usando cópias de sombra importadas (consulte [importação de volumes copiados de sombra transportável](importing-transportable-shadow-copied-volumes.md) para obter mais informações sobre como importar cópias de sombra), um solicitante recupera um documento XML que contém os metadados e usa [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) para obter uma interface [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) , que é usada para ler os metadados de restauração.</span><span class="sxs-lookup"><span data-stu-id="674c8-120">For restore operations, or backups using imported shadow copies (see [Importing Transportable Shadow Copied Volumes](importing-transportable-shadow-copied-volumes.md) for more information on importing shadow copies), a requester retrieves an XML document containing the metadata and uses [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) to obtain an [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface, which it uses to read the restore metadata.</span></span>

<span data-ttu-id="674c8-121">Os documentos de metadados do gravador permitem que o solicitante execute um backup para saber mais sobre os gravadores em execução no momento durante a fase de descoberta de um backup.</span><span class="sxs-lookup"><span data-stu-id="674c8-121">Writer Metadata Documents enable the requester performing a backup to learn about currently executing writers during the discovery phase of a backup.</span></span>

<span data-ttu-id="674c8-122">Para que os gravadores escolhidos participem de um backup, um solicitante importa muito, mas não todas, as informações no documento de metadados do gravador em seu próprio documento de componentes de backup durante a fase de descoberta de um backup.</span><span class="sxs-lookup"><span data-stu-id="674c8-122">For those writers chosen to participate in a backup, a requester imports much, but not all, of the information in the Writer Metadata Document into its own Backup Components Document during the discovery phase of a backup.</span></span>

<span data-ttu-id="674c8-123">No entanto, somente documentos de metadados do gravador e não o documento de componentes de backup contêm as especificações de arquivo e caminho.</span><span class="sxs-lookup"><span data-stu-id="674c8-123">However, only Writer Metadata Documents and not the Backup Components Document contain the file and path specifications.</span></span>

<span data-ttu-id="674c8-124">Para obter mais informações sobre como a fase de descoberta de uma operação de backup é realizada, consulte [visão geral da fase de descoberta de backup](overview-of-the-backup-discovery-phase.md).</span><span class="sxs-lookup"><span data-stu-id="674c8-124">For more information on how the discovery phase of a backup operation is conducted, see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md).</span></span>

<span data-ttu-id="674c8-125">Além disso, somente os componentes [*explicitamente incluídos*](vssgloss-e.md) têm suas informações armazenadas no documento de componentes de backup durante uma operação de backup.</span><span class="sxs-lookup"><span data-stu-id="674c8-125">In addition, only [*explicitly included*](vssgloss-e.md) components have their information stored in the Backup Components Document during a backup operation.</span></span> <span data-ttu-id="674c8-126">As informações sobre componentes [*incluídos implicitamente*](vssgloss-i.md) não estão incluídas no documento de componentes de backup durante uma operação de backup e devem ser interpoladas usando informações sobre os componentes explicitamente incluídos e os documentos de metadados do gravador disponíveis.</span><span class="sxs-lookup"><span data-stu-id="674c8-126">Information on [*implicitly included*](vssgloss-i.md) components is not included in the Backup Components Document during a backup operation, and must be interpolated using information about the explicitly included components and the available Writer Metadata Documents.</span></span>

<span data-ttu-id="674c8-127">Os componentes incluídos implicitamente ainda podem ser [*selecionáveis para restauração*](vssgloss-s.md) e talvez precisem ser incluídos explicitamente no documento componentes de backup no momento da restauração.</span><span class="sxs-lookup"><span data-stu-id="674c8-127">Implicitly included components may still be [*selectable for restore*](vssgloss-s.md) and may need to be explicitly included in the Backup Components Document at restore time.</span></span> <span data-ttu-id="674c8-128">Nesse caso, assim como a adição de um componente durante uma operação de backup exigia acesso ao documento de metadados do gravador writer's do componente (então recuperado do gravador), um solicitante exigirá acesso a uma cópia dos documentos de metadados do gravador do gravador armazenados no momento do backup.</span><span class="sxs-lookup"><span data-stu-id="674c8-128">In this case, just as adding a component during a backup operation required access to the component's writer's Writer Metadata Document (then retrieved from the writer), a requester will require access to a copy of that writer's Writer Metadata Documents stored at backup time.</span></span>

<span data-ttu-id="674c8-129">Portanto, a única maneira de obter todas as informações sobre todos os arquivos e componentes envolvidos em um backup ou restauração é ter cada documento de metadados do gravador para cada gravador que participa de um backup armazenado junto com o documento de componentes de backup.</span><span class="sxs-lookup"><span data-stu-id="674c8-129">Therefore, the only way to obtain all the information about all the files and components involved in a backup or restore is to have each Writer Metadata Document for each writer participating in a backup stored along with the Backup Components Document.</span></span> <span data-ttu-id="674c8-130">(Para obter mais informações, consulte [visão geral da restauração de arquivo real](overview-of-actual-file-restoration.md).)</span><span class="sxs-lookup"><span data-stu-id="674c8-130">(For more information, see [Overview of Actual File Restoration](overview-of-actual-file-restoration.md).)</span></span>

 

 



