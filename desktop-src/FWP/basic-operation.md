---
title: Operação WFP
description: A WFP (Windows Filtering Platform) executa suas tarefas integrando as seguintes camadas, filtros, shims e textos explicativos básicos de entidades.
ms.assetid: bf88ace7-1160-434b-9be0-3f9db6aa2e87
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44e7a7d38bd0de5b1f549e2187c414644bf68442
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "105778775"
---
# <a name="wfp-operation"></a><span data-ttu-id="2cdfa-103">Operação WFP</span><span class="sxs-lookup"><span data-stu-id="2cdfa-103">WFP Operation</span></span>

<span data-ttu-id="2cdfa-104">A WFP (Windows Filtering Platform) executa suas tarefas integrando as seguintes entidades básicas: *camadas*, *filtros*, *shims* e *textos explicativos*.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-104">Windows Filtering Platform (WFP) performs its tasks by integrating the following basic entities: *Layers*, *Filters*, *Shims*, and *Callouts*.</span></span>

## <a name="layers"></a><span data-ttu-id="2cdfa-105">Camadas</span><span class="sxs-lookup"><span data-stu-id="2cdfa-105">Layers</span></span>

<span data-ttu-id="2cdfa-106">Uma *camada* é um contêiner gerenciado pelo mecanismo de filtro cuja função é para organizar os filtros em conjuntos.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-106">A *layer* is a container managed by the filter engine whose function is to organize filters into sets.</span></span> <span data-ttu-id="2cdfa-107">Uma camada não é um módulo na pilha de rede.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-107">A layer is not a module in the network stack.</span></span> <span data-ttu-id="2cdfa-108">Cada camada tem um esquema que define o tipo de filtros que podem ser adicionados a ele.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-108">Each layer has a schema that defines the type of filters that can be added to it.</span></span> <span data-ttu-id="2cdfa-109">Consulte [condições de filtragem disponíveis em cada camada de filtragem](filtering-conditions-available-at-each-filtering-layer.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-109">See [Filtering Conditions Available at Each Filtering Layer](filtering-conditions-available-at-each-filtering-layer.md) for more information.</span></span>

<span data-ttu-id="2cdfa-110">As camadas podem conter subcamadas para gerenciar requisitos de filtro conflitantes, como "bloquear portas TCP acima de 1024" e "abrir porta 1080".</span><span class="sxs-lookup"><span data-stu-id="2cdfa-110">Layers may contain sub-layers to manage conflicting filter requirements such as "Block TCP ports above 1024" and "Open port 1080".</span></span> <span data-ttu-id="2cdfa-111">As regras para gerenciar conflitos de filtragem são determinadas pela [arbitragem de filtro](filter-arbitration.md).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-111">The rules for managing filtering conflicts are determined by [Filter Arbitration](filter-arbitration.md).</span></span>

<span data-ttu-id="2cdfa-112">A WFP contém um conjunto de [subcamadas internas](management-filtering-sublayer-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-112">WFP contains a set of [built-in sub-layers](management-filtering-sublayer-identifiers.md).</span></span> <span data-ttu-id="2cdfa-113">Cada camada herda todas as subcamadas internas.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-113">Every layer inherits all the built-in sub-layers.</span></span> <span data-ttu-id="2cdfa-114">Os usuários também podem adicionar suas próprias subcamadas.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-114">Users can also add their own sub-layers.</span></span>

<span data-ttu-id="2cdfa-115">A lista de camadas do mecanismo de filtro é fornecida no tópico seção de referência [**identificadores de camada de filtragem**](management-filtering-layer-identifiers-.md).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-115">The list of filter engine layers is provided in the reference section topic [**Filtering Layer Identifiers**](management-filtering-layer-identifiers-.md).</span></span>

## <a name="filters"></a><span data-ttu-id="2cdfa-116">Filtros</span><span class="sxs-lookup"><span data-stu-id="2cdfa-116">Filters</span></span>

<span data-ttu-id="2cdfa-117">Um *filtro* é uma regra que é correspondida com os pacotes de entrada ou de saída.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-117">A *filter* is a rule that is matched against incoming or outgoing packets.</span></span> <span data-ttu-id="2cdfa-118">A regra diz ao mecanismo de filtragem o que fazer com o pacote, incluindo para chamar um módulo de texto explicativo para inspeção profunda de pacotes ou fluxos.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-118">The rule tells the filtering engine what to do with the packet, including to call a callout module for deep packet or stream inspection.</span></span> <span data-ttu-id="2cdfa-119">Por exemplo, um filtro pode especificar "bloquear o tráfego com uma porta TCP maior que 1024" ou "chamar para IDS para todo o tráfego não protegido".</span><span class="sxs-lookup"><span data-stu-id="2cdfa-119">For example, a filter may specify "Block traffic with a TCP port greater than 1024" or "Call out to IDS for all traffic that is not secured."</span></span>

<span data-ttu-id="2cdfa-120">Um filtro de tempo de inicialização é um filtro que é imposto no momento da inicialização assim que o driver de pilha TCP/IP (tcpip.sys) é iniciado.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-120">A boot-time filter is a filter that is enforced at boot-time as soon as the TCP/IP stack driver (tcpip.sys) starts.</span></span> <span data-ttu-id="2cdfa-121">Um filtro de tempo de inicialização é desabilitado quando o BFE é iniciado.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-121">A boot-time filter is disabled when BFE starts.</span></span> <span data-ttu-id="2cdfa-122">Um filtro é marcado como tempo de inicialização, definindo o sinalizador [**FWPM do sinalizador de filtro de \_ \_ \_ inicialização**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) quando [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) é invocado.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-122">A filter is marked as boot-time by setting the [**FWPM\_FILTER\_FLAG\_BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) flag when [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) is invoked.</span></span>

<span data-ttu-id="2cdfa-123">Um filtro de tempo de execução é um filtro que é imposto após a inicialização do BFE.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-123">A run-time filter is a filter that is enforced after BFE starts.</span></span> <span data-ttu-id="2cdfa-124">Um filtro de tempo de execução pode ser estático, dinâmico ou persistente, dependendo da maneira como ele foi criado.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-124">A run-time filter can be static, dynamic, or persistent depending on the way it was created.</span></span> <span data-ttu-id="2cdfa-125">Consulte [Gerenciamento de objetos](object-management.md) para obter mais informações sobre os diferentes tipos de filtros de tempo de execução e seu tempo de vida.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-125">See [Object Management](object-management.md) for more information on the different types of run-time filters and their lifetime.</span></span>

## <a name="shims"></a><span data-ttu-id="2cdfa-126">Shims</span><span class="sxs-lookup"><span data-stu-id="2cdfa-126">Shims</span></span>

<span data-ttu-id="2cdfa-127">Um *Shim* é um componente do modo kernel que toma decisões de filtragem classificando em relação às camadas do mecanismo de filtro.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-127">A *shim* is a kernel-mode component that makes filtering decisions by classifying against the filter engine layers.</span></span> <span data-ttu-id="2cdfa-128">Cada Shim é classificado em uma ou mais camadas.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-128">Each shim classifies against one or more layers.</span></span> <span data-ttu-id="2cdfa-129">Por exemplo, o Shim do módulo da camada de transporte é classificada em relação à camada de transporte de entrada, à camada de transporte de saída e às camadas de Receive-Accept e conexão ALE para o primeiro pacote de um fluxo.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-129">For example, the Transport Layer Module shim classifies against the Inbound Transport layer, the Outbound Transport layer, and the ALE Connect and Receive-Accept layers for the first packet of a flow.</span></span>

<span data-ttu-id="2cdfa-130">Como os pacotes, fluxos e eventos atravessam a pilha de rede, os shims os analisam para extrair as condições e os valores de classificáveis e, em seguida, chamar o mecanismo de filtro para avaliá-los em relação aos filtros em uma determinada camada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-130">As packets, streams, and events traverse the network stack, the shims parse them to extract the classifiable conditions and values, and then call into the filter engine to evaluate them against the filters in a given layer.</span></span> <span data-ttu-id="2cdfa-131">O mecanismo de filtro pode invocar um ou mais textos explicativos como parte da classificação.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-131">The filter engine may invoke one or more callouts as part of the classification.</span></span> <span data-ttu-id="2cdfa-132">Os shims fazem o descarte real de pacotes, fluxos e eventos com base no resultado da classificação executada pelo mecanismo de filtro.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-132">The shims do the actual dropping of packets, streams, and events based on the result of the classification performed by the filter engine.</span></span>

## <a name="callouts"></a><span data-ttu-id="2cdfa-133">Textos explicativos</span><span class="sxs-lookup"><span data-stu-id="2cdfa-133">Callouts</span></span>

<span data-ttu-id="2cdfa-134">Um *texto explicativo* é um conjunto de funções expostas por um driver e usadas para filtragem especializada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-134">A *callout* is a set of functions exposed by a driver and used for specialized filtering.</span></span> <span data-ttu-id="2cdfa-135">Eles são usados para executar a análise e a manipulação dos pacotes, como a verificação de vírus, os controles dos pais verificam a existência de conteúdo impróprio, análise de dados de pacotes para ferramentas de monitoramento.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-135">They are used to perform analysis and manipulation of the packets, such as virus scan, parental controls scan for inappropriate content, packet data parsing for monitoring tools.</span></span> <span data-ttu-id="2cdfa-136">Alguns textos explicativos, como o driver NAT (conversão de endereços de rede), são incorporados ao sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-136">Some callouts, such as the Network Address Translation (NAT) driver, are built into the operating system.</span></span> <span data-ttu-id="2cdfa-137">Outros, como um texto explicativo de controle de pais HTTP ou o balão IDS (sistema de detecção de intrusão), podem ser fornecidos por ISVs (fornecedores independentes de software).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-137">Others, such as an HTTP Parental Control callout or the Intrusion Detection System (IDS) callout, can be provided by independent software vendors (ISVs).</span></span> <span data-ttu-id="2cdfa-138">As funções de texto explicativo são invocadas pelo mecanismo de filtro quando um filtro de texto explicativo correspondente é correspondido em uma determinada camada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-138">The callout functions are invoked by the filter engine when a corresponding callout filter is matched at a given layer.</span></span>

<span data-ttu-id="2cdfa-139">Os textos explicativos podem ser registrados em qualquer uma das camadas WFP do modo kernel.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-139">Callouts can be registered at any of the kernel-mode WFP layers.</span></span> <span data-ttu-id="2cdfa-140">Os textos explicativos podem retornar uma ação ("bloquear", "permitir" e, ao executar a inspeção de fluxo, "adiar", "precisa de mais dados", "remover conexão") e podem modificar e proteger o tráfego de rede de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-140">Callouts can return an action ("Block", "Permit", and, when performing stream inspection, "Defer", "Need more data", "Drop connection") and can modify and secure inbound and outbound network traffic.</span></span>

<span data-ttu-id="2cdfa-141">Depois que um texto explicativo é registrado com o mecanismo de filtro, ele pode receber o tráfego de rede para processar.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-141">Once a callout is registered with the filter engine, it can receive network traffic to process.</span></span> <span data-ttu-id="2cdfa-142">O tráfego pode ser pacotes, fluxos ou eventos, dependendo da camada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-142">The traffic may be packets, streams, or events depending on the layer.</span></span> <span data-ttu-id="2cdfa-143">Um agente de aplicativo ou firewall faz com que o tráfego seja passado para um texto explicativo, adicionando um filtro cuja ação é "texto explicativo" e cuja ID do texto explicativo é o identificador do texto explicativo.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-143">An application or firewall agent causes traffic to be passed to a callout by adding a filter whose action is "Callout" and whose callout ID is that callout's identifier.</span></span> <span data-ttu-id="2cdfa-144">Os textos explicativos podem instruir o mecanismo de filtro para retornar "bloquear" ou "permitir" para o Shim.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-144">Callouts can instruct the filter engine to return "Block" or "Permit" to the shim.</span></span> <span data-ttu-id="2cdfa-145">Os textos explicativos também podem retornar "continuar" para permitir que outros filtros processem o pacote.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-145">Callouts can also return "Continue" to allow other filters to process the packet.</span></span>

<span data-ttu-id="2cdfa-146">Vários textos explicativos podem ser expostos por um driver de texto explicativo.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-146">Multiple callouts may be exposed by one callout driver.</span></span>

<span data-ttu-id="2cdfa-147">Um texto explicativo precisa ser adicionado (com [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) e registrado (com [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) antes de poder ser usado.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-147">A callout needs to be added (with [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) and registered (with [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) before it can be used.</span></span> <span data-ttu-id="2cdfa-148">Uma chamada para **FwpmCalloutAdd0** é necessária antes da criação de filtros que fazem referência ao texto explicativo.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-148">A call to **FwpmCalloutAdd0** is required before the creation of filters that reference the callout.</span></span> <span data-ttu-id="2cdfa-149">Uma chamada para FwpsCalloutRegister é necessária antes que a WFP possa invocar o texto explicativo quando os filtros de texto explicativo forem correspondidos.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-149">A call to FwpsCalloutRegister is required before WFP can invoke the callout when the callout filters are matched.</span></span> <span data-ttu-id="2cdfa-150">Por padrão, os filtros que fazem referência a textos explicativos que foram adicionados, mas que ainda não foram registrados com o mecanismo de filtro, são tratados como filtros de "bloqueio".</span><span class="sxs-lookup"><span data-stu-id="2cdfa-150">By default filters that reference callouts that have been added but have not yet registered with the filter engine are treated as "Block" filters.</span></span> <span data-ttu-id="2cdfa-151">A ordem de chamar **FwpmCalloutAdd0** e FwpsCalloutRegister não importa.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-151">The order of calling **FwpmCalloutAdd0** and FwpsCalloutRegister does not matter.</span></span> <span data-ttu-id="2cdfa-152">Um texto explicativo persistente precisa ser adicionado apenas uma vez e precisa ser registrado toda vez que o driver que implementa o texto explicativo é iniciado (por exemplo, após uma reinicialização).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-152">A persistent callout needs to be added just once and needs to be registered every time the driver that implements the callout starts (for example, after a reboot).</span></span>

## <a name="classification"></a><span data-ttu-id="2cdfa-153">Classificação</span><span class="sxs-lookup"><span data-stu-id="2cdfa-153">Classification</span></span>

<span data-ttu-id="2cdfa-154">Classificação é o processo de aplicação de filtros ao tráfego de rede (pacote, fluxo ou evento) para determinar um resultado de "permitir" ou "bloquear" para esse tráfego.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-154">Classification is the process of applying filters to network traffic (packet, stream, or event) in order to determine a result of "Permit" or "Block" for that traffic.</span></span> <span data-ttu-id="2cdfa-155">Para um pacote, fluxo ou evento, há uma chamada de classificação por camada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-155">For one packet, stream, or event there is one classification call per layer.</span></span>

<span data-ttu-id="2cdfa-156">Durante a classificação, as propriedades (por exemplo, endereço de origem) do pacote, fluxo ou evento são comparadas com condições de filtro definidas em filtros na camada em que a classificação é invocada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-156">During classification, the properties (for example, source address) of the packet, stream, or event are compared with filter conditions set on filters at the layer where the classification is invoked.</span></span> <span data-ttu-id="2cdfa-157">Quando as correspondências são encontradas, o algoritmo de [arbitragem de filtro](filter-arbitration.md) é usado para determinar o resultado do processo de classificação.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-157">When matches are found, the [Filter Arbitration](filter-arbitration.md) algorithm is used to determines the result of the classification process.</span></span>

<span data-ttu-id="2cdfa-158">Uma solicitação de classificação é disparada por um Shim.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-158">A classification request is triggered by a shim.</span></span>

<span data-ttu-id="2cdfa-159">As ações de classificação também podem ser:</span><span class="sxs-lookup"><span data-stu-id="2cdfa-159">Classification actions could be either:</span></span>

-   <span data-ttu-id="2cdfa-160">Permitir</span><span class="sxs-lookup"><span data-stu-id="2cdfa-160">Permit</span></span>
-   <span data-ttu-id="2cdfa-161">Bloquear</span><span class="sxs-lookup"><span data-stu-id="2cdfa-161">Block</span></span>
-   <span data-ttu-id="2cdfa-162">Balão</span><span class="sxs-lookup"><span data-stu-id="2cdfa-162">Callout</span></span>
    -   <span data-ttu-id="2cdfa-163">Permitir</span><span class="sxs-lookup"><span data-stu-id="2cdfa-163">Permit</span></span>
    -   <span data-ttu-id="2cdfa-164">Bloquear</span><span class="sxs-lookup"><span data-stu-id="2cdfa-164">Block</span></span>
    -   <span data-ttu-id="2cdfa-165">Continuar</span><span class="sxs-lookup"><span data-stu-id="2cdfa-165">Continue</span></span>
    -   <span data-ttu-id="2cdfa-166">Ferida</span><span class="sxs-lookup"><span data-stu-id="2cdfa-166">Defer</span></span>
    -   <span data-ttu-id="2cdfa-167">Precisa de mais dados</span><span class="sxs-lookup"><span data-stu-id="2cdfa-167">Need more data</span></span>
    -   <span data-ttu-id="2cdfa-168">Remover conexão</span><span class="sxs-lookup"><span data-stu-id="2cdfa-168">Drop connection</span></span>

## <a name="wfp-operation"></a><span data-ttu-id="2cdfa-169">Operação WFP</span><span class="sxs-lookup"><span data-stu-id="2cdfa-169">WFP Operation</span></span>

<span data-ttu-id="2cdfa-170">No momento da inicialização, assim que o driver de pilha TCP/IP (tcpip.sys) é iniciado, o mecanismo de filtro do modo kernel impõe a política de segurança do sistema por meio de filtros de tempo de inicialização.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-170">At boot-time, as soon as the TCP/IP stack driver (tcpip.sys) starts, the kernel-mode filter engine enforces the security policy of the system through boot-time filters.</span></span>

<span data-ttu-id="2cdfa-171">Depois que o mecanismo de filtragem base (BFE) é iniciado no modo de usuário, os filtros persistentes são adicionados à plataforma, os filtros de tempo de inicialização são desabilitados e as notificações são enviadas para esses drivers de texto explicativo que se inscreveram usando [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-171">Once the Base Filtering Engine (BFE) starts in user mode, persistent filters are added to the platform, boot-time filters are disabled, and notifications are sent to those callout drivers that subscribed using [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span></span> <span data-ttu-id="2cdfa-172">As notificações são expedidas imediatamente após a conclusão da inicialização de BFE.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-172">The notifications are dispatched immediately after the BFE initialization is completed.</span></span> <span data-ttu-id="2cdfa-173">Agora, a plataforma está pronta para que os textos explicativos sejam registrados e que os objetos em tempo de execução sejam adicionados.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-173">The platform is now ready for callouts to be registered and for run-time objects to be added.</span></span>

<span data-ttu-id="2cdfa-174">A transição dos filtros de tempo de inicialização para persistente pode ser de vários segundos, ou ainda mais em um computador lento.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-174">The transition from boot-time to persistent filters could be several seconds, or even longer on a slow machine.</span></span> <span data-ttu-id="2cdfa-175">É atômico, portanto, se um provedor tiver um filtro de tempo de inicialização e persistente, nunca haverá uma janela quando nenhum estiver em vigor.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-175">It is atomic, so if a provider has both a boot-time and a persistent filter, there will never be a window when neither is in effect.</span></span>

<span data-ttu-id="2cdfa-176">Após o início do BFE, os filtros de tempo de execução podem ser adicionados por agentes de firewall ou por soluções de firewall personalizadas.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-176">After BFE starts, run-time filters can be added by firewall agents, or by custom firewall solutions.</span></span> <span data-ttu-id="2cdfa-177">O BFE processa esses filtros e os envia para a camada apropriada do mecanismo de filtro para imposição.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-177">BFE processes these filters and sends them to the appropriate filter engine layer for enforcement.</span></span> <span data-ttu-id="2cdfa-178">O BFE também aceita configurações de autenticação e envia essas configurações para os módulos de chaveamento de IPsec (IKE/AuthIP).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-178">BFE also accepts authentication settings and sends these settings to the IPsec keying modules (IKE/AuthIP).</span></span> <span data-ttu-id="2cdfa-179">Consulte [configuração de IPSec](ipsec-configuration.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-179">See [IPsec Configuration](ipsec-configuration.md) for more information.</span></span>

<span data-ttu-id="2cdfa-180">A qualquer momento, as configurações de filtros e de autenticação podem ser adicionadas, removidas ou alteradas no sistema por meio da interface RPC exposta pelo BFE.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-180">At any time, filters and authentication settings can be added, removed or changed in the system through the RPC interface exposed by the BFE.</span></span> <span data-ttu-id="2cdfa-181">Subcamadas e módulos de texto explicativo podem ser adicionados ou removidos da mesma forma.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-181">Sub-layers and callout modules can likewise be added or removed.</span></span>

<span data-ttu-id="2cdfa-182">Fluxo de dados:</span><span class="sxs-lookup"><span data-stu-id="2cdfa-182">Data flow:</span></span>

1.  <span data-ttu-id="2cdfa-183">Um pacote entra na pilha de rede.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-183">A packet comes into the network stack.</span></span>
2.  <span data-ttu-id="2cdfa-184">A pilha de rede localiza e chama um Shim.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-184">The network stack finds and calls a shim.</span></span>
3.  <span data-ttu-id="2cdfa-185">O Shim invoca o processo de classificação em uma camada específica.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-185">The shim invokes the classification process at a particular layer.</span></span>
4.  <span data-ttu-id="2cdfa-186">Durante a classificação, os filtros são correspondidos e a ação resultante é executada.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-186">During classification, filters are matched and the resultant action is taken.</span></span> <span data-ttu-id="2cdfa-187">(Consulte [arbitragem de filtro](filter-arbitration.md).)</span><span class="sxs-lookup"><span data-stu-id="2cdfa-187">(See [Filter Arbitration](filter-arbitration.md).)</span></span>
5.  <span data-ttu-id="2cdfa-188">Se qualquer filtro de texto explicativo for correspondido durante o processo de classificação, os textos explicativos correspondentes serão invocados.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-188">If any callout filters are matched during the classification process, the corresponding callouts are invoked.</span></span>
6.  <span data-ttu-id="2cdfa-189">O Shim age na decisão de filtragem final (por exemplo, descartar o pacote).</span><span class="sxs-lookup"><span data-stu-id="2cdfa-189">The shim acts on the final filtering decision (for example, drop the packet).</span></span>

<span data-ttu-id="2cdfa-190">O fluxo de dados de saída segue um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-190">Outbound data flow follows a similar pattern.</span></span>

<span data-ttu-id="2cdfa-191">Os tópicos a seguir descrevem mais detalhadamente a operação da WFP.</span><span class="sxs-lookup"><span data-stu-id="2cdfa-191">The following topics further describe the operation of the WFP.</span></span>

-   [<span data-ttu-id="2cdfa-192">Fluxos de pacotes TCP</span><span class="sxs-lookup"><span data-stu-id="2cdfa-192">TCP Packet Flows</span></span>](tcp-packet-flows.md)
-   [<span data-ttu-id="2cdfa-193">Fluxos de pacotes UDP</span><span class="sxs-lookup"><span data-stu-id="2cdfa-193">UDP Packet Flows</span></span>](udp-packet-flows.md)
-   [<span data-ttu-id="2cdfa-194">Arbitragem de filtro</span><span class="sxs-lookup"><span data-stu-id="2cdfa-194">Filter Arbitration</span></span>](filter-arbitration.md)

## <a name="related-topics"></a><span data-ttu-id="2cdfa-195">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="2cdfa-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2cdfa-196">Modelo de objeto</span><span class="sxs-lookup"><span data-stu-id="2cdfa-196">Object Model</span></span>](object-model.md)
</dt> <dt>

[<span data-ttu-id="2cdfa-197">Gerenciamento de objetos</span><span class="sxs-lookup"><span data-stu-id="2cdfa-197">Object Management</span></span>](object-management.md)
</dt> </dl>

 

 