---
title: Arbitragem de filtro
description: A arbitragem de filtro é a lógica incorporada à WFP (Windows Filtering Platform) usada para determinar como os filtros interagem entre si ao tomar decisões de filtragem de tráfego de rede.
ms.assetid: d097f307-113e-4dc3-ad59-ddfb85061583
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fd7df778d1c24b7480de3321e7a1ec126d8e642
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103641026"
---
# <a name="filter-arbitration"></a><span data-ttu-id="7e343-103">Arbitragem de filtro</span><span class="sxs-lookup"><span data-stu-id="7e343-103">Filter Arbitration</span></span>

<span data-ttu-id="7e343-104">A arbitragem de filtro é a lógica incorporada à WFP (Windows Filtering Platform) usada para determinar como os filtros interagem entre si ao tomar decisões de filtragem de tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="7e343-104">Filter arbitration is the logic built into the Windows Filtering Platform (WFP) that is used to determine how filters interact with each other when making network traffic filtering decisions.</span></span>

## <a name="filter-arbitration-behaviors"></a><span data-ttu-id="7e343-105">Filtrar comportamentos de arbitragem</span><span class="sxs-lookup"><span data-stu-id="7e343-105">Filter Arbitration Behaviors</span></span>

<span data-ttu-id="7e343-106">Os seguintes comportamentos caracterizam o sistema de arbitragem de filtro:</span><span class="sxs-lookup"><span data-stu-id="7e343-106">The following behaviors characterize the filter arbitration system:</span></span>

-   <span data-ttu-id="7e343-107">Todo o tráfego pode ser inspecionado.</span><span class="sxs-lookup"><span data-stu-id="7e343-107">All traffic can be inspected.</span></span> <span data-ttu-id="7e343-108">Nenhum tráfego pode ignorar filtros em uma determinada camada.</span><span class="sxs-lookup"><span data-stu-id="7e343-108">No traffic can bypass filters at a given layer.</span></span>
-   <span data-ttu-id="7e343-109">O tráfego pode ser bloqueado por um filtro de texto explicativo por meio de uma **veto** , mesmo que um filtro de prioridade mais alta tenha permitido.</span><span class="sxs-lookup"><span data-stu-id="7e343-109">Traffic can be blocked by a callout filter via a **Veto** even if a higher priority filter has permitted it.</span></span>
-   <span data-ttu-id="7e343-110">Vários provedores podem inspecionar o tráfego na mesma camada.</span><span class="sxs-lookup"><span data-stu-id="7e343-110">Multiple providers can inspect traffic at the same layer.</span></span> <span data-ttu-id="7e343-111">Por exemplo, o firewall seguido por filtros de IDS (sistema de detecção de intrusão) ou IPsec seguido por filtros de QoS (qualidade de serviço) pode examinar o tráfego na mesma camada.</span><span class="sxs-lookup"><span data-stu-id="7e343-111">For example, firewall followed by intrusion-detection system (IDS) filters, or IPsec followed by Quality of Service (QoS) filters may all examine the traffic at the same layer.</span></span>

## <a name="filtering-model"></a><span data-ttu-id="7e343-112">Modelo de filtragem</span><span class="sxs-lookup"><span data-stu-id="7e343-112">Filtering Model</span></span>

<span data-ttu-id="7e343-113">Cada camada de filtro é dividida em subcamadas, ordenadas por prioridade (também chamada de peso).</span><span class="sxs-lookup"><span data-stu-id="7e343-113">Each filter layer is divided into sub-layers ordered by priority (also called weight).</span></span> <span data-ttu-id="7e343-114">O tráfego de rede atravessa as subcamadas da prioridade mais alta para a prioridade mais baixa.</span><span class="sxs-lookup"><span data-stu-id="7e343-114">Network traffic traverses sub-layers from the highest priority to the lowest priority.</span></span> <span data-ttu-id="7e343-115">Subcamadas são criadas e gerenciadas pelos desenvolvedores que usam a API WFP.</span><span class="sxs-lookup"><span data-stu-id="7e343-115">Sub-layers are created and managed by the developers using the WFP API.</span></span>

<span data-ttu-id="7e343-116">Em cada subcamada, os filtros são ordenados por peso.</span><span class="sxs-lookup"><span data-stu-id="7e343-116">Within each sub-layer, filters are ordered by weight.</span></span> <span data-ttu-id="7e343-117">O tráfego de rede é indicado para correspondência de filtros de peso mais alto para o peso mais baixo.</span><span class="sxs-lookup"><span data-stu-id="7e343-117">Network traffic is indicated to matching filters from highest weight to lowest weight.</span></span>

<span data-ttu-id="7e343-118">O algoritmo de arbitragem de filtro é aplicado a todas as subcamadas dentro de uma camada e a decisão de filtragem final é feita após a avaliação de todas as subcamadas.</span><span class="sxs-lookup"><span data-stu-id="7e343-118">The filter arbitration algorithm is applied to all sub-layers within a layer and the final filtering decision is made after all sub-layers have been evaluated.</span></span> <span data-ttu-id="7e343-119">Isso fornece vários recursos de correspondência.</span><span class="sxs-lookup"><span data-stu-id="7e343-119">This provides for multiple matching capability.</span></span>

<span data-ttu-id="7e343-120">Em uma subcamada, a arbitragem de filtro é executada da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="7e343-120">Within a sub-layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="7e343-121">Compute a lista de filtros de correspondência ordenados por peso do mais alto para o mais baixo.</span><span class="sxs-lookup"><span data-stu-id="7e343-121">Compute the list of matching filters ordered by weight from highest to lowest.</span></span>
-   <span data-ttu-id="7e343-122">Avalie filtros de correspondência na ordem até que um "permit" ou um "bloco" seja retornado (os filtros também podem retornar "Continue") ou até que a lista seja esgotada.</span><span class="sxs-lookup"><span data-stu-id="7e343-122">Evaluate matching filters in order until a "Permit" or a "Block" is returned (filters can also return "Continue") or until the list is exhausted.</span></span>
-   <span data-ttu-id="7e343-123">Ignore os filtros restantes e retorne a ação do último filtro avaliado.</span><span class="sxs-lookup"><span data-stu-id="7e343-123">Skip the remaining filters and return the action from the last evaluated filter.</span></span>

<span data-ttu-id="7e343-124">Dentro de uma camada, a arbitragem de filtro é executada da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="7e343-124">Within a layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="7e343-125">Execute a arbitragem de filtro em cada subcamada em ordem de prioridade mais alta para a prioridade mais baixa.</span><span class="sxs-lookup"><span data-stu-id="7e343-125">Perform filter arbitration at every sub-layer in order from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="7e343-126">Avalie todas as subcamadas mesmo se uma subcamada de prioridade mais alta decidir bloquear o tráfego.</span><span class="sxs-lookup"><span data-stu-id="7e343-126">Evaluate all sub-layers even if a higher priority sub-layer has decided to block the traffic.</span></span>
-   <span data-ttu-id="7e343-127">Retorne a ação resultante com base nas regras de política descritas na seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="7e343-127">Return the resulting action based on the policy rules described in the following section.</span></span>

<span data-ttu-id="7e343-128">O diagrama a seguir ilustra uma configuração de subcamada de exemplo.</span><span class="sxs-lookup"><span data-stu-id="7e343-128">The diagram below illustrates a sample sub-layer configuration.</span></span> <span data-ttu-id="7e343-129">As caixas externas representam camadas.</span><span class="sxs-lookup"><span data-stu-id="7e343-129">The outer boxes represent layers.</span></span> <span data-ttu-id="7e343-130">As caixas internas representam subcamadas que contêm filtros.</span><span class="sxs-lookup"><span data-stu-id="7e343-130">The inner boxes represent sub-layers that contain filters.</span></span> <span data-ttu-id="7e343-131">O curinga ( \* ) em um filtro significa que todo o tráfego corresponde ao filtro.</span><span class="sxs-lookup"><span data-stu-id="7e343-131">The wildcard (\*) in a filter means all traffic matches the filter.</span></span>

![configuração de subcamada de exemplo](images/fwp-sub-config2.png)

<span data-ttu-id="7e343-133">A única maneira de um filtro ser ignorado é se um filtro de maior peso tiver permitido ou bloqueado o tráfego dentro da mesma subcamada.</span><span class="sxs-lookup"><span data-stu-id="7e343-133">The only way for a filter to be bypassed is if a higher weight filter has permitted or blocked the traffic within the same sub-layer.</span></span> <span data-ttu-id="7e343-134">Por outro lado, uma maneira de garantir que um filtro sempre veja todo o tráfego em uma camada é adicionar uma subcamada que contenha um único filtro que corresponda a todo o tráfego.</span><span class="sxs-lookup"><span data-stu-id="7e343-134">Conversely, one way of ensuring that a filter always sees all traffic within a layer is to add a sub-layer that contains a single filter that matches all traffic.</span></span>

## <a name="configurable-override-policy"></a><span data-ttu-id="7e343-135">Política de substituição configurável</span><span class="sxs-lookup"><span data-stu-id="7e343-135">Configurable Override Policy</span></span>

<span data-ttu-id="7e343-136">As regras descritas abaixo regem as decisões de arbitragem dentro de uma camada.</span><span class="sxs-lookup"><span data-stu-id="7e343-136">The rules described below govern the arbitration decisions within a layer.</span></span> <span data-ttu-id="7e343-137">Essas regras são usadas pelo mecanismo de filtro para decidir qual uma das ações de subcamadas é aplicada ao tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="7e343-137">These rules are used by the filter engine to decide which one of the sub-layer actions is applied to the network traffic.</span></span>

<span data-ttu-id="7e343-138">A política básica é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="7e343-138">The basic policy is as follows.</span></span>

-   <span data-ttu-id="7e343-139">As ações são avaliadas em ordem de prioridade de subcamadas da prioridade mais alta para a prioridade mais baixa.</span><span class="sxs-lookup"><span data-stu-id="7e343-139">Actions are evaluated in priority order of sub-layers from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="7e343-140">"Bloquear" substitui "permitir".</span><span class="sxs-lookup"><span data-stu-id="7e343-140">"Block" overrides "Permit".</span></span>
-   <span data-ttu-id="7e343-141">"Block" é final (não pode ser substituído) e interrompe a avaliação.</span><span class="sxs-lookup"><span data-stu-id="7e343-141">"Block" is final (cannot be overridden) and stops the evaluation.</span></span> <span data-ttu-id="7e343-142">O pacote é Descartado.</span><span class="sxs-lookup"><span data-stu-id="7e343-142">The packet is discarded.</span></span>

<span data-ttu-id="7e343-143">A política básica não oferece suporte ao cenário de uma exceção não substituída por um firewall.</span><span class="sxs-lookup"><span data-stu-id="7e343-143">The basic policy does not support the scenario of an exception not overridden by a firewall.</span></span> <span data-ttu-id="7e343-144">Exemplos típicos desse tipo de cenário são:</span><span class="sxs-lookup"><span data-stu-id="7e343-144">Typical examples of this type of scenario are:</span></span>

-   <span data-ttu-id="7e343-145">A porta de administração remota deve ser aberta mesmo na presença de um firewall de terceiros.</span><span class="sxs-lookup"><span data-stu-id="7e343-145">Remote administration port required to be opened even in the presence of a third-party firewall.</span></span>
-   <span data-ttu-id="7e343-146">Componentes que exigem que as portas sejam abertas para funcionar (por exemplo, Universal Plug and Play UPnP).</span><span class="sxs-lookup"><span data-stu-id="7e343-146">Components that require ports to be opened in order to function (for example, Universal Plug and Play UPnP).</span></span> <span data-ttu-id="7e343-147">Se o administrador tiver habilitado explicitamente o componente, o firewall não deverá bloquear o tráfego silenciosamente.</span><span class="sxs-lookup"><span data-stu-id="7e343-147">If the administrator has explicitly enabled the component, the firewall should not silently block the traffic.</span></span>

<span data-ttu-id="7e343-148">Para dar suporte aos cenários acima, uma decisão de filtragem deve ser mais difícil de substituir do que outra decisão de filtragem, gerenciando a permissão de substituição de ação.</span><span class="sxs-lookup"><span data-stu-id="7e343-148">In order to support the above scenarios, a filtering decision must be made more difficult to override than another filtering decision by managing the action override permission.</span></span> <span data-ttu-id="7e343-149">Essa permissão é implementada como o sinalizador de **\_ gravação da \_ ação \_ FWPS direita** e é definida por filtro.</span><span class="sxs-lookup"><span data-stu-id="7e343-149">This permission is implemented as the **FWPS\_RIGHT\_ACTION\_WRITE** flag and it is set on a per-filter basis.</span></span>

<span data-ttu-id="7e343-150">O algoritmo de avaliação mantém a ação atual ("permitir" ou "bloquear") junto com o sinalizador de **\_ gravação da \_ ação \_ FWPS direita** .</span><span class="sxs-lookup"><span data-stu-id="7e343-150">The evaluation algorithm maintains the current action ("Permit" or "Block") along with the **FWPS\_RIGHT\_ACTION\_WRITE** flag.</span></span> <span data-ttu-id="7e343-151">O sinalizador controla se uma subcamada de prioridade mais baixa tem permissão para substituir a ação.</span><span class="sxs-lookup"><span data-stu-id="7e343-151">The flag controls whether a lower priority sub-layer is allowed to override the action.</span></span> <span data-ttu-id="7e343-152">Ao configurar ou redefinir o sinalizador **de \_ \_ \_ gravação da ação direita FWPS** na estrutura [FWPS \_ classificar \_ OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) , um provedor rege como as ações podem ou não podem ser substituídas.</span><span class="sxs-lookup"><span data-stu-id="7e343-152">By setting or resetting the **FWPS\_RIGHT\_ACTION\_WRITE** flag in the [FWPS\_CLASSIFY\_OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) structure, a provider governs how actions can or cannot be overridden.</span></span> <span data-ttu-id="7e343-153">Se o sinalizador for definido, isso indica que a ação pode ser substituída.</span><span class="sxs-lookup"><span data-stu-id="7e343-153">If the flag is set, it indicates that the action can be overridden.</span></span> <span data-ttu-id="7e343-154">Se o sinalizador estiver ausente, a ação não poderá ser substituída.</span><span class="sxs-lookup"><span data-stu-id="7e343-154">If the flag is absent, the action cannot be overridden.</span></span>



| <span data-ttu-id="7e343-155">Ação</span><span class="sxs-lookup"><span data-stu-id="7e343-155">Action</span></span> | <span data-ttu-id="7e343-156">Permitir substituição (a \_ gravação da ação FWPS direita \_ \_ está definida)</span><span class="sxs-lookup"><span data-stu-id="7e343-156">Allow override (FWPS\_RIGHT\_ACTION\_WRITE is set)</span></span> | <span data-ttu-id="7e343-157">Descrição</span><span class="sxs-lookup"><span data-stu-id="7e343-157">Description</span></span>                                                                                                          |
|--------|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7e343-158">Permitir</span><span class="sxs-lookup"><span data-stu-id="7e343-158">Permit</span></span> | <span data-ttu-id="7e343-159">Sim</span><span class="sxs-lookup"><span data-stu-id="7e343-159">Yes</span></span>                                                | <span data-ttu-id="7e343-160">O tráfego pode ser bloqueado em outra subcamada.</span><span class="sxs-lookup"><span data-stu-id="7e343-160">The traffic can be blocked at another sub-layer.</span></span> <span data-ttu-id="7e343-161">Isso é chamado de uma permissão flexível.</span><span class="sxs-lookup"><span data-stu-id="7e343-161">This is called a soft permit.</span></span><br/>                            |
| <span data-ttu-id="7e343-162">Permitir</span><span class="sxs-lookup"><span data-stu-id="7e343-162">Permit</span></span> | <span data-ttu-id="7e343-163">Não</span><span class="sxs-lookup"><span data-stu-id="7e343-163">No</span></span>                                                 | <span data-ttu-id="7e343-164">O tráfego pode ser bloqueado em outra subcamada apenas por uma **veto** de texto explicativo.</span><span class="sxs-lookup"><span data-stu-id="7e343-164">The traffic can be blocked at another sub-layer only by a callout **Veto**.</span></span> <span data-ttu-id="7e343-165">Isso é chamado de permissão rígida.</span><span class="sxs-lookup"><span data-stu-id="7e343-165">This is called a hard permit.</span></span><br/> |
| <span data-ttu-id="7e343-166">Bloquear</span><span class="sxs-lookup"><span data-stu-id="7e343-166">Block</span></span>  | <span data-ttu-id="7e343-167">Sim</span><span class="sxs-lookup"><span data-stu-id="7e343-167">Yes</span></span>                                                | <span data-ttu-id="7e343-168">O tráfego pode ser permitido em outra subcamada.</span><span class="sxs-lookup"><span data-stu-id="7e343-168">The traffic can be permitted at another sub-layer.</span></span> <span data-ttu-id="7e343-169">Isso é chamado de bloqueio flexível.</span><span class="sxs-lookup"><span data-stu-id="7e343-169">This is called a soft block.</span></span><br/>                           |
| <span data-ttu-id="7e343-170">Bloquear</span><span class="sxs-lookup"><span data-stu-id="7e343-170">Block</span></span>  | <span data-ttu-id="7e343-171">Não</span><span class="sxs-lookup"><span data-stu-id="7e343-171">No</span></span>                                                 | <span data-ttu-id="7e343-172">O tráfego não pode ser permitido em outra subcamada.</span><span class="sxs-lookup"><span data-stu-id="7e343-172">The traffic cannot be permitted at another sub-layer.</span></span> <span data-ttu-id="7e343-173">Isso é chamado de bloqueio rígido.</span><span class="sxs-lookup"><span data-stu-id="7e343-173">This is called a hard block.</span></span><br/>                        |



 

<span data-ttu-id="7e343-174">A ação de filtro pode ser definida definindo o membro de **tipo** na estrutura [**FWPM \_ ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) para o **\_ \_ bloco de ação fwp** ou a **\_ ação fwp \_ permitir**.</span><span class="sxs-lookup"><span data-stu-id="7e343-174">The filter action can be set by setting the **type** member in the structure [**FWPM\_ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) to either **FWP\_ACTION\_BLOCK** or **FWP\_ACTION\_PERMIT**.</span></span> <span data-ttu-id="7e343-175">Junto com o tipo de ação, um filtro também expõe o sinalizador de **\_ \_ \_ ação limpar \_ sinalizador \_ do filtro FWPM**.</span><span class="sxs-lookup"><span data-stu-id="7e343-175">Along with the action type, a filter also exposes the flag **FWPM\_FILTER\_FLAG\_CLEAR\_ACTION\_RIGHT**.</span></span> <span data-ttu-id="7e343-176">Se esse sinalizador for desmarcado, o tipo de ação será difícil e não poderá ser substituído, exceto quando uma permissão rígida for substituída por um **veto** , conforme explicado posteriormente, caso contrário, será Soft, o que pode ser substituído por uma ação de prioridade alta.</span><span class="sxs-lookup"><span data-stu-id="7e343-176">If this flag is cleared, then the action type is hard and cannot be overridden except when a hard permit is overridden by a **Veto** as explained later on, else it is soft which can be overridden by high priority action.</span></span>

<span data-ttu-id="7e343-177">A tabela a seguir lista o comportamento padrão para ações de filtro e de texto explicativo.</span><span class="sxs-lookup"><span data-stu-id="7e343-177">The following table lists the default behavior for filter and callout actions.</span></span>

| <span data-ttu-id="7e343-178">Ação</span><span class="sxs-lookup"><span data-stu-id="7e343-178">Action</span></span>         | <span data-ttu-id="7e343-179">Comportamento padrão</span><span class="sxs-lookup"><span data-stu-id="7e343-179">Default Behavior</span></span> |
|----------------|------------------|
| <span data-ttu-id="7e343-180">Permissão de filtro</span><span class="sxs-lookup"><span data-stu-id="7e343-180">Filter permit</span></span>  | <span data-ttu-id="7e343-181">Permissão de software</span><span class="sxs-lookup"><span data-stu-id="7e343-181">Soft permit</span></span>      |
| <span data-ttu-id="7e343-182">Permissão de texto explicativo</span><span class="sxs-lookup"><span data-stu-id="7e343-182">Callout permit</span></span> | <span data-ttu-id="7e343-183">Permissão de software</span><span class="sxs-lookup"><span data-stu-id="7e343-183">Soft permit</span></span>      |
| <span data-ttu-id="7e343-184">Bloco de filtro</span><span class="sxs-lookup"><span data-stu-id="7e343-184">Filter block</span></span>   | <span data-ttu-id="7e343-185">Bloqueio de hardware</span><span class="sxs-lookup"><span data-stu-id="7e343-185">Hard block</span></span>       |
| <span data-ttu-id="7e343-186">Bloco de texto explicativo</span><span class="sxs-lookup"><span data-stu-id="7e343-186">Callout block</span></span>  | <span data-ttu-id="7e343-187">Bloqueio flexível</span><span class="sxs-lookup"><span data-stu-id="7e343-187">Soft block</span></span>       |



 

<span data-ttu-id="7e343-188">Uma **veta** é uma ação de "bloqueio" retornada pelo filtro quando o sinalizador de **\_ \_ \_ gravação da ação direita FWPS** foi redefinido antes de chamar o filtro.</span><span class="sxs-lookup"><span data-stu-id="7e343-188">A **Veto** is a "Block" action returned by the filter when the **FWPS\_RIGHT\_ACTION\_WRITE** flag was reset prior to calling the filter.</span></span> <span data-ttu-id="7e343-189">Uma **veta** bloqueará o tráfego que foi permitido com uma permissão rígida.</span><span class="sxs-lookup"><span data-stu-id="7e343-189">A **Veto** will block traffic that was permitted with a hard permit.</span></span>

<span data-ttu-id="7e343-190">Quando um **veto** é emitido, é uma indicação de conflito na configuração.</span><span class="sxs-lookup"><span data-stu-id="7e343-190">When a **Veto** is issued, it is an indication of conflict in the configuration.</span></span> <span data-ttu-id="7e343-191">As ações a seguir são executadas para mitigar o conflito.</span><span class="sxs-lookup"><span data-stu-id="7e343-191">The following actions are taken to mitigate the conflict.</span></span>

-   <span data-ttu-id="7e343-192">O tráfego está bloqueado.</span><span class="sxs-lookup"><span data-stu-id="7e343-192">The traffic is blocked.</span></span>
-   <span data-ttu-id="7e343-193">Um evento de auditoria é gerado.</span><span class="sxs-lookup"><span data-stu-id="7e343-193">An audit event is generated.</span></span>
-   <span data-ttu-id="7e343-194">Uma notificação é gerada.</span><span class="sxs-lookup"><span data-stu-id="7e343-194">A notification is generated.</span></span>
    > [!Note]  
    > <span data-ttu-id="7e343-195">A notificação é recebida por todas as entidades que assinaram a ela.</span><span class="sxs-lookup"><span data-stu-id="7e343-195">The notification is received by all entities that have subscribed to it.</span></span> <span data-ttu-id="7e343-196">Isso normalmente inclui o firewall (para detectar configurações incorretas) ou aplicativos (para detectar se seu filtro específico é substituído).</span><span class="sxs-lookup"><span data-stu-id="7e343-196">This will typically include the firewall (in order to detect mis-configurations), or applications (in order to detect if their particular filter is overridden).</span></span>

     

    > [!Note]  
    > <span data-ttu-id="7e343-197">Não há nenhuma interface do usuário (IU) obrigatória instanciada quando um filtro de "permissão rígida" é substituído.</span><span class="sxs-lookup"><span data-stu-id="7e343-197">There is no mandatory user interface (UI) instantiated when a "Hard Permit" filter is overridden.</span></span> <span data-ttu-id="7e343-198">As notificações da substituição são enviadas para qualquer provedor que está registrado para recebê-las, que permite firewalls ou os aplicativos que criaram os filtros de "permissão", para mostrar a interface do usuário solicitando a ação.</span><span class="sxs-lookup"><span data-stu-id="7e343-198">The notifications of the override are sent to any provider that registered to receive them, which allows firewalls, or the applications that created the "Permit" filters, to show UI asking for user action.</span></span> <span data-ttu-id="7e343-199">Não há nenhum valor em ter uma notificação de interface do usuário da plataforma para esses eventos de substituição, pois os ISVs de firewall que não desejam bloquear silenciosamente podem fazer isso registrando em um local diferente na WFP ou (menos preferencial) lidar com toda a lógica em um driver de chamada.</span><span class="sxs-lookup"><span data-stu-id="7e343-199">There is no value in having a platform UI notification for these override events since firewall ISVs that do not want to silently block can do so by registering at a different place in WFP, or (less preferred) handle all their logic in a call-out driver.</span></span> <span data-ttu-id="7e343-200">Os ISVs que consideram a solicitação de usuários é uma boa ideia que desejarão ter a experiência do usuário e criar sua própria interface.</span><span class="sxs-lookup"><span data-stu-id="7e343-200">ISVs that do think prompting users is a good idea will want to own the user experience and create their own UI.</span></span>

     

<span data-ttu-id="7e343-201">O comportamento de mitigação descrito acima garante que um filtro de "permissão rígida" não seja substituído silenciosamente por um filtro de "bloqueio" e cubra o cenário em que uma porta de administração remota não tem permissão para ser bloqueada pelo firewall.</span><span class="sxs-lookup"><span data-stu-id="7e343-201">The mitigation behavior described above ensures that a "Hard Permit" filter is not silently overridden by a "Block" filter, and covers the scenario where a remote administration port is not allowed to be blocked by the firewall.</span></span> <span data-ttu-id="7e343-202">Para substituir silenciosamente os filtros de "permissão rígida", um firewall precisa adicionar seus filtros em uma subcamada de prioridade mais alta.</span><span class="sxs-lookup"><span data-stu-id="7e343-202">In order to silently override "Hard Permit" filters a firewall has to add its filters within a higher priority sub-layer.</span></span>

> [!Note]  
> <span data-ttu-id="7e343-203">Como não há arbitragem de camada cruzada, o tráfego permitido com "permissão rígida" ainda pode ser bloqueado em outra camada.</span><span class="sxs-lookup"><span data-stu-id="7e343-203">Since there is no cross-layer arbitration, traffic permitted with "Hard Permit" may still be blocked at another layer.</span></span> <span data-ttu-id="7e343-204">É responsabilidade do autor da política garantir que o tráfego seja permitido em cada camada, se necessário.</span><span class="sxs-lookup"><span data-stu-id="7e343-204">It is the responsibility of the policy author to ensure that traffic is permitted at each layer if necessary.</span></span>

 

<span data-ttu-id="7e343-205">Aplicativos de usuário solicitando que as portas sejam abertas adicione filtros substituíveis a uma subcamada de baixa prioridade.</span><span class="sxs-lookup"><span data-stu-id="7e343-205">User applications requesting ports to be opened add overridable filters to a low priority sub-layer.</span></span> <span data-ttu-id="7e343-206">O firewall pode assinar o filtro adicionar eventos de notificação e adicionar um filtro de correspondência após a validação de usuário (ou política).</span><span class="sxs-lookup"><span data-stu-id="7e343-206">The firewall can subscribe to the filter add notification events and add a matching filter after user (or policy) validation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7e343-207">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="7e343-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7e343-208">Atribuição de peso de filtro</span><span class="sxs-lookup"><span data-stu-id="7e343-208">Filter Weight Assignment</span></span>](filter-weight-assignment.md)
</dt> </dl>

 

