---
title: Reautorização de ALE
description: O tráfego de rede nas camadas ALE (imposição da camada de aplicativo) da WFP (Windows Filtering Platform) é filtrado por fluxos ALE.
ms.assetid: 3cc7f78e-3f9d-4a91-8ea0-9b64c299068a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed05c4c0767d449ec128250f852c365455bd0dc7
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/19/2020
ms.locfileid: "103641027"
---
# <a name="ale-reauthorization"></a><span data-ttu-id="1fda9-103">Reautorização de ALE</span><span class="sxs-lookup"><span data-stu-id="1fda9-103">ALE Reauthorization</span></span>

<span data-ttu-id="1fda9-104">O tráfego de rede nas camadas ALE (imposição da camada de aplicativo) da WFP (Windows Filtering Platform) é filtrado por [fluxos Ale](ale-stateful-filtering.md).</span><span class="sxs-lookup"><span data-stu-id="1fda9-104">Network traffic at the Application Layer Enforcement (ALE) layers of the Windows Filtering Platform (WFP) is filtered by [ALE flows](ale-stateful-filtering.md).</span></span> <span data-ttu-id="1fda9-105">Depois que um fluxo ALE tiver sido permitido, todo o tráfego que fizer parte do fluxo ALE será permitido.</span><span class="sxs-lookup"><span data-stu-id="1fda9-105">Once an ALE flow has been permitted, all traffic that is part of the ALE flow is permitted.</span></span> <span data-ttu-id="1fda9-106">A reautorização é uma solicitação para validar as permissões do fluxo ALE, normalmente devido a uma alteração na diretiva de rede.</span><span class="sxs-lookup"><span data-stu-id="1fda9-106">Reauthorization is a request to validate the permissions of the ALE flow, typically due to a change in network policy.</span></span>

<span data-ttu-id="1fda9-107">Os fluxos ALE recebem uma direção, entrada ou saída, com base na direção do primeiro pacote que disparou a criação e a autorização do fluxo.</span><span class="sxs-lookup"><span data-stu-id="1fda9-107">ALE flows are assigned a direction, inbound or outbound, based on the direction of the first packet that triggered the creation and authorization of the flow.</span></span> <span data-ttu-id="1fda9-108">Os fluxos ALE de entrada são criados e autorizados na camada [**FWPM de \_ autenticação Ale de camada de saída \_ \_ \_ \_ \_ V {4 \| 6}**](management-filtering-layer-identifiers-.md) .</span><span class="sxs-lookup"><span data-stu-id="1fda9-108">Inbound ALE flows are created and authorized at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer.</span></span> <span data-ttu-id="1fda9-109">Os fluxos de ALE de saída são criados e autorizados na camada **FWPM \_ camada de \_ \_ autenticação Ale \_ Connect \_ V {4 \| 6}** .</span><span class="sxs-lookup"><span data-stu-id="1fda9-109">Outbound ALE flows are created and authorized at the **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layer.</span></span> <span data-ttu-id="1fda9-110">A direção do fluxo ALE não limita a direção dos pacotes que pertencem ao fluxo.</span><span class="sxs-lookup"><span data-stu-id="1fda9-110">The direction of the ALE flow does not limit the direction of packets that belong to the flow.</span></span> <span data-ttu-id="1fda9-111">Os fluxos ALE contêm pacotes de entrada e de saída, independentemente da direção do fluxo da EPA em si.</span><span class="sxs-lookup"><span data-stu-id="1fda9-111">ALE flows contain both inbound and outbound packets regardless of the direction of the ALE flow itself.</span></span>

<span data-ttu-id="1fda9-112">A Reautorização de um fluxo ALE é disparada por:</span><span class="sxs-lookup"><span data-stu-id="1fda9-112">Reauthorization of an ALE flow is triggered by:</span></span>

-   <span data-ttu-id="1fda9-113">Uma alteração de política na camada em que o fluxo de ALE foi originalmente autorizado ou criado.</span><span class="sxs-lookup"><span data-stu-id="1fda9-113">A policy change at the layer where the ALE flow was originally authorized or created.</span></span>
-   <span data-ttu-id="1fda9-114">Uma interface de chegada diferente da interface na qual o fluxo ALE foi originalmente autorizado ou criado.</span><span class="sxs-lookup"><span data-stu-id="1fda9-114">An arrival interface different from the interface where the ALE flow was originally authorized or created.</span></span>
-   <span data-ttu-id="1fda9-115">Uma conexão pendente.</span><span class="sxs-lookup"><span data-stu-id="1fda9-115">A pending connection.</span></span>

<span data-ttu-id="1fda9-116">A reautorização é diferenciada da autorização inicial pela presença do sinalizador de [**condição fwp ser um sinalizador de \_ \_ \_ \_ reautorização**](filtering-condition-flags-.md) .</span><span class="sxs-lookup"><span data-stu-id="1fda9-116">Reauthorization is distinguished from the initial authorization by the presence of the [**FWP\_CONDITION\_FLAG\_IS\_REAUTHORIZE**](filtering-condition-flags-.md) flag.</span></span>

<span data-ttu-id="1fda9-117">A reautorização só pode ocorrer nas camadas [**FWPM da \_ camada de \_ autenticação Ale de \_ \_ recepção \_ \_ v {4 \| 6}**](management-filtering-layer-identifiers-.md) e **FWPM \_ Layer \_ Ale \_ \_ Connect \_ v {4 \| 6}** .</span><span class="sxs-lookup"><span data-stu-id="1fda9-117">Reauthorization can take place only at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) and **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layers.</span></span>

### <a name="policy-change-reauthorization"></a><span data-ttu-id="1fda9-118">Política – alterar a autorização</span><span class="sxs-lookup"><span data-stu-id="1fda9-118">Policy-Change Reauthorization</span></span>

<span data-ttu-id="1fda9-119">Uma alteração de política é implementada como uma adição ou remoção de filtro em uma camada ALE.</span><span class="sxs-lookup"><span data-stu-id="1fda9-119">A policy change is implemented as a filter addition or removal at an ALE layer.</span></span> <span data-ttu-id="1fda9-120">Depois que uma alteração de política for detectada, o primeiro pacote que atravessa um fluxo ALE criado na camada afetada será especificado para a reautorização para a camada.</span><span class="sxs-lookup"><span data-stu-id="1fda9-120">Once a policy change is detected, the first packet that traverses an ALE flow created at the affected layer will be specified for reauthorization to the layer.</span></span> <span data-ttu-id="1fda9-121">Portanto, para a reautorização, é totalmente possível que um pacote de saída seja classificado na camada [**FWPM de \_ \_ \_ autenticação Ale auth \_ \_ \_ v {4 \| 6}**](management-filtering-layer-identifiers-.md) e que um pacote de entrada seja classificado na camada **\_ \_ \_ \_ \_ v {4 \| 6} de autenticação Ale da camada FWPM** .</span><span class="sxs-lookup"><span data-stu-id="1fda9-121">Therefore, for reauthorization it is entirely possible that an outbound packet is classified at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer and that an inbound packet is classified at the **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layer.</span></span>

<span data-ttu-id="1fda9-122">Um motivo para essa classificação de direção mista é que pode não haver mais tráfego de rede da direção original (por exemplo, pacote de entrada para o fluxo de entrada ALE).</span><span class="sxs-lookup"><span data-stu-id="1fda9-122">One reason for this mixed-direction classification is that there might not be further network traffic from the original direction (for example, inbound packet for inbound ALE flow).</span></span> <span data-ttu-id="1fda9-123">Um exemplo é o streaming UDP unidirecional após um handshake bidirecional inicial.</span><span class="sxs-lookup"><span data-stu-id="1fda9-123">One such example is one-way UDP streaming after an initial two-way handshake.</span></span> <span data-ttu-id="1fda9-124">Nesse caso, é mais desejável subdividir o streaming o mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="1fda9-124">In this case it is more desirable to tear down the streaming as soon as possible.</span></span>

### <a name="arrival-interface-reauthorization"></a><span data-ttu-id="1fda9-125">Reautorização da interface de chegada</span><span class="sxs-lookup"><span data-stu-id="1fda9-125">Arrival Interface Reauthorization</span></span>

<span data-ttu-id="1fda9-126">A Reautorização da interface de chegada está disponível a partir do Windows Server 2008 e do Windows Vista com Service Pack 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="1fda9-126">Arrival interface reauthorization is available starting with Windows Server 2008 and Windows Vista with Service Pack 1 (SP1).</span></span>

<span data-ttu-id="1fda9-127">Os pacotes que pertencem ao mesmo fluxo de ALE podem chegar de várias interfaces.</span><span class="sxs-lookup"><span data-stu-id="1fda9-127">Packets belonging to the same ALE flow can arrive from multiple interfaces.</span></span> <span data-ttu-id="1fda9-128">O primeiro pacote a ser fornecido em uma interface diferente da interface original do fluxo ALE é reautorizado.</span><span class="sxs-lookup"><span data-stu-id="1fda9-128">The first packet to come in over an interface different from the original interface of the ALE flow is reauthorized.</span></span>

<span data-ttu-id="1fda9-129">Em um modelo de host forte, que é o modelo de segurança padrão para a pilha TCP/IP, uma conexão em um adaptador de rede aceita apenas os pacotes que vêm na mesma interface.</span><span class="sxs-lookup"><span data-stu-id="1fda9-129">In a strong host model, which is the default security model for the TCP/IP stack, a connection on a network interface accepts only packets that come in on the same interface.</span></span> <span data-ttu-id="1fda9-130">Portanto, a Reautorização de interface de chegada não é usada em um computador host forte.</span><span class="sxs-lookup"><span data-stu-id="1fda9-130">Therefore, arrival interface reauthorization is not used on a strong host computer.</span></span>

<span data-ttu-id="1fda9-131">Em um modelo de host fraco, uma conexão em um adaptador de rede permite que os pacotes sejam recebidos em qualquer outra interface de rede.</span><span class="sxs-lookup"><span data-stu-id="1fda9-131">In a weak host model, a connection on a network interface allows packets coming in on any other network interface.</span></span> <span data-ttu-id="1fda9-132">A Reautorização de interface de chegada é usada em um computador host fraco para implementar políticas específicas de interface.</span><span class="sxs-lookup"><span data-stu-id="1fda9-132">Arrival interface reauthorization is used on a weak host computer to implement interface-specific policies.</span></span> <span data-ttu-id="1fda9-133">Para obter mais informações, consulte ["The Cable Guy: modelos de host fortes e fracos".](/previous-versions/technet-magazine/cc137807(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="1fda9-133">For more information, see ["The Cable Guy: Strong and Weak Host Models."](/previous-versions/technet-magazine/cc137807(v=msdn.10))</span></span>

<span data-ttu-id="1fda9-134">Alguns [campos classificáveis](filtering-conditions.md) podem ser desconhecidos durante a reautorização.</span><span class="sxs-lookup"><span data-stu-id="1fda9-134">Some [classifiable fields](filtering-conditions.md) may be unknown during reauthorization.</span></span> <span data-ttu-id="1fda9-135">Por exemplo, se um pacote de saída estiver sendo reautorizado na camada de FWPM de autenticação Ale de camada de entrada de [**\_ \_ \_ \_ recepção \_ \_ V {4 \| 6}**](management-filtering-layer-identifiers-.md) , todos os campos pertencentes à interface de chegada serão desconhecidos.</span><span class="sxs-lookup"><span data-stu-id="1fda9-135">For example, if an outbound packet is being reauthorized at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer, all the fields pertaining to the arrival interface are unknown.</span></span> <span data-ttu-id="1fda9-136">Nesse caso, os valores dos campos desconhecidos são indicados como [**fwp \_ vazio**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type).</span><span class="sxs-lookup"><span data-stu-id="1fda9-136">In that case, the values of the unknown fields are indicated as [**FWP\_EMPTY**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type).</span></span>

<span data-ttu-id="1fda9-137">Os campos do tipo [**fwp \_ vazio**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type) podem ser correspondidos com [**fwp \_ Match \_ igual**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_match_type).</span><span class="sxs-lookup"><span data-stu-id="1fda9-137">Fields of type [**FWP\_EMPTY**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type) can be matched with [**FWP\_MATCH\_EQUAL**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_match_type).</span></span> <span data-ttu-id="1fda9-138">Portanto, uma política pode ser definida para bloquear as reautorizações e subdividir um fluxo ALE quando as solicitações de Reautorização para a chegada do fluxo ALE.</span><span class="sxs-lookup"><span data-stu-id="1fda9-138">Therefore, a policy can be set to block reauthorizations and tear down an ALE flow when reauthorization requests for the ALE flow arrive.</span></span>

## <a name="pending-connection-reauthorization"></a><span data-ttu-id="1fda9-139">Reautorização de conexão pendente</span><span class="sxs-lookup"><span data-stu-id="1fda9-139">Pending Connection Reauthorization</span></span>

<span data-ttu-id="1fda9-140">Um driver de texto explicativo pode adiar uma operação de classificação em camadas ALE e concluí-la posteriormente, quando a decisão de filtragem puder ser feita com segurança.</span><span class="sxs-lookup"><span data-stu-id="1fda9-140">A callout driver may postpone a classify operation at ALE layers and complete it at a later time, when the filtering decision can be safely made.</span></span> <span data-ttu-id="1fda9-141">A funcionalidade de adiamento/conclusão da ALE tem suporte por meio das funções de modo kernel [FwpsPendOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpspendoperation0) e [FwpsCompleteOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpscompleteoperation0).</span><span class="sxs-lookup"><span data-stu-id="1fda9-141">The ALE postpone/complete functionality is supported via the kernel-mode functions [FwpsPendOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpspendoperation0) and [FwpsCompleteOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpscompleteoperation0).</span></span>

<span data-ttu-id="1fda9-142">A reautorização é disparada imediatamente após a chamada FwpsCompleteOperation0 e permite que o driver de texto explicativo permita ou bloqueie o fluxo.</span><span class="sxs-lookup"><span data-stu-id="1fda9-142">The reauthorization is triggered immediately following the FwpsCompleteOperation0 call, and it allows the callout driver to permit or to block the flow.</span></span>

<span data-ttu-id="1fda9-143">Somente uma autorização inicial pode ser adiada.</span><span class="sxs-lookup"><span data-stu-id="1fda9-143">Only an initial authorization can be postponed.</span></span> <span data-ttu-id="1fda9-144">Uma chamada para FwpsPendOperation0 falhará se o sinalizador de [**\_ condição fwp for de \_ \_ \_ reautoria**](filtering-condition-flags-.md) definido.</span><span class="sxs-lookup"><span data-stu-id="1fda9-144">A call to FwpsPendOperation0 will fail if [**FWP\_CONDITION\_FLAG\_IS\_REAUTHORIZE**](filtering-condition-flags-.md) flag is set.</span></span>

<span data-ttu-id="1fda9-145">Para obter mais informações, consulte a documentação do [Windows Driver Kit](/windows-hardware/drivers/ddi/_netvista/) .</span><span class="sxs-lookup"><span data-stu-id="1fda9-145">For more information, see the [Windows Driver Kit](/windows-hardware/drivers/ddi/_netvista/) documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1fda9-146">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="1fda9-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1fda9-147">Aplicação da camada de aplicativo (EPA)</span><span class="sxs-lookup"><span data-stu-id="1fda9-147">Application Layer Enforcement (ALE)</span></span>](application-layer-enforcement--ale-.md)
</dt> <dt>

[<span data-ttu-id="1fda9-148">Camadas ALE</span><span class="sxs-lookup"><span data-stu-id="1fda9-148">ALE Layers</span></span>](ale-layers.md)
</dt> <dt>

[<span data-ttu-id="1fda9-149">Filtragem de estado de ALE</span><span class="sxs-lookup"><span data-stu-id="1fda9-149">ALE Stateful Filtering</span></span>](ale-stateful-filtering.md)
</dt> <dt>

[<span data-ttu-id="1fda9-150">Tráfego de difusão/multicast ALE</span><span class="sxs-lookup"><span data-stu-id="1fda9-150">ALE Multicast/Broadcast Traffic</span></span>](ale-multicast-broadcast-traffic.md)
</dt> <dt>

[<span data-ttu-id="1fda9-151">Personalização de fluxo ALE</span><span class="sxs-lookup"><span data-stu-id="1fda9-151">ALE Flow Customization</span></span>](ale-flow-customization.md)
</dt> </dl>

 

 