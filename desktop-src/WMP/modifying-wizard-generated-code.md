---
title: Modificando código gerado pelo assistente
description: Modificando código gerado pelo assistente
ms.assetid: 391a7773-c3e2-499a-bb63-e5934537d963
keywords:
- Windows Media Player Mobile, plug-ins
- Windows Media Player Mobile, plug-ins de interface do usuário
- Plug-ins móveis do Windows Media Player
- plug-ins, interface do usuário
- plug-ins, Windows Media Player Mobile
- plug-ins de interface do usuário, Windows Media Player Mobile
- Plug-ins de interface do usuário, Windows Media Player Mobile
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a83bda7cb265d0c2e039ada6d9d827c6da3faf63
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "105813547"
---
# <a name="modifying-wizard-generated-code"></a><span data-ttu-id="285eb-110">Modificando código gerado pelo assistente</span><span class="sxs-lookup"><span data-stu-id="285eb-110">Modifying Wizard-generated Code</span></span>

<span data-ttu-id="285eb-111">Há vários locais no código de plug-in gerado pelo assistente que você deve modificar antes que seu plug-in funcione com o Windows Media Player 10 Mobile.</span><span class="sxs-lookup"><span data-stu-id="285eb-111">There are several places in the wizard-generated plug-in code that you must modify before your plug-in will work with Windows Media Player 10 Mobile.</span></span> <span data-ttu-id="285eb-112">O código que você deve modificar está em negrito nos exemplos a seguir.</span><span class="sxs-lookup"><span data-stu-id="285eb-112">The code you must modify is bold in the following examples.</span></span>

## <a name="changes-to-wmpplugh"></a><span data-ttu-id="285eb-113">Alterações em wmpplug. h</span><span class="sxs-lookup"><span data-stu-id="285eb-113">Changes to wmpplug.h</span></span>

<span data-ttu-id="285eb-114">Não há suporte para métodos ANSI em dispositivos que executam Windows CE, portanto, você deve modificar o seguinte método ANSI gerado pelo assistente em wmpplug. h:</span><span class="sxs-lookup"><span data-stu-id="285eb-114">ANSI methods are not supported on devices running Windows CE, so you must modify the following ANSI method generated by the wizard in wmpplug.h:</span></span>


```C++
return( ::PostMessage( HWND_BROADCAST, ::RegisterWindowMessageA( "WMPlayer_PluginAddRemove" ), 0, 0 ) );
```



<span data-ttu-id="285eb-115">Modifique-o conforme mostrado a seguir para que ele se torne um método Unicode:</span><span class="sxs-lookup"><span data-stu-id="285eb-115">Modify it as shown in the following so that it becomes a Unicode method:</span></span>


```C++
return( ::PostMessage( HWND_BROADCAST, ::RegisterWindowMessageW( L"WMPlayer_PluginAddRemove" ), 0, 0 ) );
```



## <a name="changes-to-networkpluginh"></a><span data-ttu-id="285eb-116">Alterações em NetworkPlugin. h</span><span class="sxs-lookup"><span data-stu-id="285eb-116">Changes to NetworkPlugin.h</span></span>

<span data-ttu-id="285eb-117">Localize o seguinte código em NetworkPlugin. h:</span><span class="sxs-lookup"><span data-stu-id="285eb-117">Find the following code in NetworkPlugin.h:</span></span>


```C++
BEGIN_COM_MAP(CNetworkPlugin)
    COM_INTERFACE(IWMPPluginUI)
END_COM_MAP()
```



<span data-ttu-id="285eb-118">Modifique o código para que fique assim:</span><span class="sxs-lookup"><span data-stu-id="285eb-118">Modify the code so that it looks like this:</span></span>


```C++
BEGIN_COM_MAP(CNetworkPlugin)
    
COM_INTERFACE_ENTRY_IID(__uuidof(IWMPPluginUI), IWMPPluginUI)
END_COM_MAP()
```



## <a name="changes-to-networkplugindllcpp"></a><span data-ttu-id="285eb-119">Alterações em NetworkPlugindll. cpp</span><span class="sxs-lookup"><span data-stu-id="285eb-119">Changes to NetworkPlugindll.cpp</span></span>

<span data-ttu-id="285eb-120">Localize a função **DllMain** em NetworkPlugindll. cpp:</span><span class="sxs-lookup"><span data-stu-id="285eb-120">Find the **DllMain** function in NetworkPlugindll.cpp:</span></span>


```C++
extern "C" BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD dwReason, LPVOID /*lpReserved*/)
{
    if (dwReason == DLL_PROCESS_ATTACH)
    {
        _Module.Init(ObjectMap, hInstance);
        DisableThreadLibraryCalls(hInstance);
    }
    else if (dwReason == DLL_PROCESS_DETACH)
        _Module.Term();
    return TRUE;    // ok
}
```



<span data-ttu-id="285eb-121">Modifique o código para que fique assim:</span><span class="sxs-lookup"><span data-stu-id="285eb-121">Modify the code so that it looks like this:</span></span>


```C++
extern "C" BOOL WINAPI DllMain(HANDLE hInstance, DWORD dwReason, LPVOID /*lpReserved*/)
{
    if (dwReason == DLL_PROCESS_ATTACH)
    {
        _Module.Init(ObjectMap, (HINSTANCE)hInstance);
#ifndef UNDER_CE
        DisableThreadLibraryCalls((HINSTANCE)hInstance);
#endif
    }
    else if (dwReason == DLL_PROCESS_DETACH)
        _Module.Term();
    return TRUE;    // ok
}
```



## <a name="changes-to-networkplugincpp"></a><span data-ttu-id="285eb-122">Alterações em NetworkPlugin. cpp</span><span class="sxs-lookup"><span data-stu-id="285eb-122">Changes to NetworkPlugin.cpp</span></span>

<span data-ttu-id="285eb-123">Localize o seguinte código em NetworkPlugin. cpp:</span><span class="sxs-lookup"><span data-stu-id="285eb-123">Find the following code in NetworkPlugin.cpp:</span></span>


```C++
hr = m_spCore->QueryInterface(&spConnectionContainer);
```



<span data-ttu-id="285eb-124">Modifique o código para que fique assim:</span><span class="sxs-lookup"><span data-stu-id="285eb-124">Modify the code so that it looks like this:</span></span>


```C++
hr = m_spCore->QueryInterface(__uuidof(IConnectionPointContainer), (void**)&spConnectionContainer);
```



## <a name="change-the-threading-model"></a><span data-ttu-id="285eb-125">Alterar o modelo de Threading</span><span class="sxs-lookup"><span data-stu-id="285eb-125">Change the Threading Model</span></span>

<span data-ttu-id="285eb-126">Diferentemente do ATL para Windows, a ATL para Windows CE não oferece suporte ao modelo de threading de apartamento porque o modelo de apartamento requer mais recursos de memória do que os modelos de Threading único e threads gratuitos.</span><span class="sxs-lookup"><span data-stu-id="285eb-126">Unlike ATL for Windows, ATL for Windows CE does not support the apartment threading model because the apartment model requires more memory resources than the single threading and free threading models.</span></span> <span data-ttu-id="285eb-127">Portanto, você deve encontrar todas as instâncias de threading de apartamento em StdAfx. h e NetworkPlugin. rgs e alterá-las para indicar Threading livre.</span><span class="sxs-lookup"><span data-stu-id="285eb-127">Therefore, you must find all instances of apartment threading in StdAfx.h and NetworkPlugin.rgs and change them to indicate free threading.</span></span>

<span data-ttu-id="285eb-128">Além disso, você só pode chamar o controle móvel do Windows Media Player 10 a partir do thread no qual ele foi criado.</span><span class="sxs-lookup"><span data-stu-id="285eb-128">Also, you can only call the Windows Media Player 10 Mobile control from the thread on which it was created.</span></span>

## <a name="build-and-test-the-project"></a><span data-ttu-id="285eb-129">Compilar e testar o projeto</span><span class="sxs-lookup"><span data-stu-id="285eb-129">Build and Test the Project</span></span>

<span data-ttu-id="285eb-130">Depois de fazer essas alterações descritas aqui, você pode criar seu projeto para verificar se ele é compilado antes de adicionar qualquer código personalizado.</span><span class="sxs-lookup"><span data-stu-id="285eb-130">After making these changes outlined here, you can build your project to verify that it compiles before you add any custom code.</span></span>

1.  <span data-ttu-id="285eb-131">Defina a configuração do projeto ativo como Win32 (Stone ARMV4) debug ou Win32 (Stone ARMV4) Release.</span><span class="sxs-lookup"><span data-stu-id="285eb-131">Set the active project configuration to Win32 (WCE ARMV4) Debug or Win32 (WCE ARMV4) Release.</span></span>
2.  <span data-ttu-id="285eb-132">Defina a plataforma ativa como Pocket PC 2003.</span><span class="sxs-lookup"><span data-stu-id="285eb-132">Set the active platform to Pocket PC 2003.</span></span>
3.  <span data-ttu-id="285eb-133">Clique no item de menu **Compilar** e, em seguida, selecione **criar NetworkPlugin.dll**.</span><span class="sxs-lookup"><span data-stu-id="285eb-133">Click the **Build** menu item, and then select **Build NetworkPlugin.dll**.</span></span> <span data-ttu-id="285eb-134">Ele deve compilar, baixar e se registrar em seu dispositivo.</span><span class="sxs-lookup"><span data-stu-id="285eb-134">It should compile, download, and register itself on your device.</span></span>

## <a name="related-topics"></a><span data-ttu-id="285eb-135">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="285eb-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="285eb-136">**Criando um plug-in de interface do usuário para o Windows Media Player 10 Mobile**</span><span class="sxs-lookup"><span data-stu-id="285eb-136">**Creating a User Interface Plug-in for Windows Media Player 10 Mobile**</span></span>](creating-a-user-interface-plug-in-for-windows-media-player-10-mobile.md)
</dt> </dl>

 

 




