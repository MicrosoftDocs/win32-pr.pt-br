---
title: Extensões de dispositivo MTP para transferência de metadados
description: Extensões de dispositivo MTP para transferência de metadados
ms.assetid: 9cf68373-e84f-4568-a9da-16ddee0fc4e9
keywords:
- Windows Media Player, extensões de dispositivo MTP
- Windows Media Player, extensões de dispositivo
- Windows Media Player, extensões
- Windows Media Player, metadados
- Windows Media Player, MTP (Media Transfer Protocol)
- MTP (protocolo de transferência de mídia)
- MTP (protocolo de transferência de mídia)
- metadados, extensões de dispositivo MTP
- metadados, extensões de dispositivo
- metadados, extensões
- extensões de dispositivo, transferência de metadados
- extensões, transferência de metadados
- Extensões de dispositivo MTP para transferência de metadados
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f64ff16fd97f135d7f8c902af823b967079408fb
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/16/2019
ms.locfileid: "104004842"
---
# <a name="mtp-device-extensions-for-metadata-transfer"></a><span data-ttu-id="83529-116">Extensões de dispositivo MTP para transferência de metadados</span><span class="sxs-lookup"><span data-stu-id="83529-116">MTP Device Extensions for Metadata Transfer</span></span>

<span data-ttu-id="83529-117">O MTP (protocolo de transferência de mídia) é um protocolo projetado para dispositivos de mídia portáteis.</span><span class="sxs-lookup"><span data-stu-id="83529-117">Media Transfer Protocol (MTP) is a protocol designed for portable media devices.</span></span> <span data-ttu-id="83529-118">A principal finalidade desse protocolo é fornecer um protocolo comum para a troca de dados entre um computador e um dispositivo de mídia portátil.</span><span class="sxs-lookup"><span data-stu-id="83529-118">The primary purpose of this protocol is to provide a common protocol for exchanging data between a computer and a portable media device.</span></span> <span data-ttu-id="83529-119">Isso inclui o recebimento e o envio de objetos de mídia e a enumeração do conteúdo e dos recursos do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="83529-119">This includes receiving and sending media objects and enumerating the contents and capabilities of the device.</span></span>

<span data-ttu-id="83529-120">O MTP usa identificadores de objeto exclusivos (PUOIDs) persistentes para identificar exclusivamente os itens de mídia digital (e outros objetos) armazenados em um dispositivo.</span><span class="sxs-lookup"><span data-stu-id="83529-120">MTP uses persistent unique object identifiers (PUOIDs) to uniquely identify digital media items (and other objects) stored on a device.</span></span> <span data-ttu-id="83529-121">Ao trocar informações sobre alterações ocorridas em um dispositivo que dá suporte a MTP, o dispositivo e o Windows Media Player usam o PUOIDs para identificar quais objetos foram alterados.</span><span class="sxs-lookup"><span data-stu-id="83529-121">When exchanging information about changes that have occurred on a device that supports MTP, the device and Windows Media Player use PUOIDs to identify which objects have changed.</span></span>

<span data-ttu-id="83529-122">O arquivo de cabeçalho chamado wmpdevices. h, que é instalado como parte do SDK do Windows Media Player, define as estruturas e as constantes necessárias para dar suporte às extensões de dispositivo do Windows Media Player.</span><span class="sxs-lookup"><span data-stu-id="83529-122">The header file named wmpdevices.h, which is installed as part of the Windows Media Player SDK, defines the structures and constants needed to support Windows Media Player device extensions.</span></span>

<span data-ttu-id="83529-123">Para que um dispositivo seja reconhecido como suporte à transferência de metadados por meio do conjunto de extensão de dispositivo MTP do Windows Media Player, ele deve incluir as seguintes informações no conjunto de dados DeviceInfo.</span><span class="sxs-lookup"><span data-stu-id="83529-123">For a device to be recognized as supporting metadata transfer through the Windows Media Player MTP device extension set, it must include the following information in the DeviceInfo dataset.</span></span> <span data-ttu-id="83529-124">(Para obter mais informações sobre esse conjunto de dados, consulte a seção 4.6.1 da especificação do MTP.)</span><span class="sxs-lookup"><span data-stu-id="83529-124">(For more information about this dataset, see section 4.6.1 of the MTP specification.)</span></span>



| <span data-ttu-id="83529-125">Campo de conjunto de</span><span class="sxs-lookup"><span data-stu-id="83529-125">Dataset field</span></span>          | <span data-ttu-id="83529-126">Ordem dos campos</span><span class="sxs-lookup"><span data-stu-id="83529-126">Field order</span></span> | <span data-ttu-id="83529-127">Tipo de dados</span><span class="sxs-lookup"><span data-stu-id="83529-127">Data type</span></span>  | <span data-ttu-id="83529-128">Valor</span><span class="sxs-lookup"><span data-stu-id="83529-128">Value</span></span>                       |
|------------------------|-------------|------------|-----------------------------|
| <span data-ttu-id="83529-129">VendorExtensionID</span><span class="sxs-lookup"><span data-stu-id="83529-129">VendorExtensionID</span></span>      | <span data-ttu-id="83529-130">2</span><span class="sxs-lookup"><span data-stu-id="83529-130">2</span></span>           | <span data-ttu-id="83529-131">**UINT32**</span><span class="sxs-lookup"><span data-stu-id="83529-131">**UINT32**</span></span> | <span data-ttu-id="83529-132">0x00000006</span><span class="sxs-lookup"><span data-stu-id="83529-132">0x00000006</span></span>                  |
| <span data-ttu-id="83529-133">VendorExtensionVersion</span><span class="sxs-lookup"><span data-stu-id="83529-133">VendorExtensionVersion</span></span> | <span data-ttu-id="83529-134">3</span><span class="sxs-lookup"><span data-stu-id="83529-134">3</span></span>           | <span data-ttu-id="83529-135">**UINT16**</span><span class="sxs-lookup"><span data-stu-id="83529-135">**UINT16**</span></span> | <span data-ttu-id="83529-136">0x0064 (100)</span><span class="sxs-lookup"><span data-stu-id="83529-136">0x0064 (100)</span></span>                |
| <span data-ttu-id="83529-137">VendorExtensionDesc</span><span class="sxs-lookup"><span data-stu-id="83529-137">VendorExtensionDesc</span></span>    | <span data-ttu-id="83529-138">4</span><span class="sxs-lookup"><span data-stu-id="83529-138">4</span></span>           | <span data-ttu-id="83529-139">**Cadeia de caracteres**</span><span class="sxs-lookup"><span data-stu-id="83529-139">**String**</span></span> | <span data-ttu-id="83529-140">"microsoft.com/WMPPD: 10,0"</span><span class="sxs-lookup"><span data-stu-id="83529-140">"microsoft.com/WMPPD: 10.0"</span></span> |



 

<span data-ttu-id="83529-141">A tabela a seguir fornece detalhes sobre a operação de MTP para transferência de metadados acelerada.</span><span class="sxs-lookup"><span data-stu-id="83529-141">The following table provides details about the MTP operation for accelerated metadata transfer.</span></span>



| <span data-ttu-id="83529-142">Item</span><span class="sxs-lookup"><span data-stu-id="83529-142">Item</span></span>                  | <span data-ttu-id="83529-143">Descrição</span><span class="sxs-lookup"><span data-stu-id="83529-143">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="83529-144">Código da operação</span><span class="sxs-lookup"><span data-stu-id="83529-144">Operation Code</span></span>        | <span data-ttu-id="83529-145">0x9201</span><span class="sxs-lookup"><span data-stu-id="83529-145">0x9201</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="83529-146">Parâmetro de operação 1</span><span class="sxs-lookup"><span data-stu-id="83529-146">Operation Parameter 1</span></span> | <span data-ttu-id="83529-147">A ID da transação fornecida pelo dispositivo durante a sessão anterior.</span><span class="sxs-lookup"><span data-stu-id="83529-147">The transaction ID supplied by the device during the previous session.</span></span> <span data-ttu-id="83529-148">Esse valor é zero para a primeira sessão.</span><span class="sxs-lookup"><span data-stu-id="83529-148">This value is zero for the first session.</span></span>                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="83529-149">Parâmetro de operação 2</span><span class="sxs-lookup"><span data-stu-id="83529-149">Operation Parameter 2</span></span> | <span data-ttu-id="83529-150">Índice inicial.</span><span class="sxs-lookup"><span data-stu-id="83529-150">Starting index.</span></span> <span data-ttu-id="83529-151">Esse valor é sempre zero na primeira chamada de uma sessão.</span><span class="sxs-lookup"><span data-stu-id="83529-151">This value is always zero on the first call of a session.</span></span> <span data-ttu-id="83529-152">Em chamadas subsequentes dentro da mesma sessão de sincronização, esse valor aumenta pela soma da contagem dos itens modificados e excluídos dos dados de resposta anteriores.</span><span class="sxs-lookup"><span data-stu-id="83529-152">On subsequent calls within the same synchronization session, this value increases by the sum of the count of the modified and the deleted items from the previous response data.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="83529-153">Parâmetro de operação 3</span><span class="sxs-lookup"><span data-stu-id="83529-153">Operation Parameter 3</span></span> | <span data-ttu-id="83529-154">0x10000.</span><span class="sxs-lookup"><span data-stu-id="83529-154">0x10000.</span></span> <span data-ttu-id="83529-155">Essa constante, definida em wmpdevices. h, é o número máximo de PUOIDs que podem ser retornados na resposta.</span><span class="sxs-lookup"><span data-stu-id="83529-155">This constant, defined in wmpdevices.h, is the maximum number of PUOIDs that can be returned in the response.</span></span> <span data-ttu-id="83529-156">Observe que o valor dessa constante pode ser revisado em versões futuras desse arquivo de cabeçalho.</span><span class="sxs-lookup"><span data-stu-id="83529-156">Note that the value of this constant may be revised in future releases of this header file.</span></span>                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="83529-157">Parâmetro de operação 4</span><span class="sxs-lookup"><span data-stu-id="83529-157">Operation Parameter 4</span></span> | <span data-ttu-id="83529-158">0</span><span class="sxs-lookup"><span data-stu-id="83529-158">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="83529-159">Parâmetro de operação 5</span><span class="sxs-lookup"><span data-stu-id="83529-159">Operation Parameter 5</span></span> | <span data-ttu-id="83529-160">0</span><span class="sxs-lookup"><span data-stu-id="83529-160">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="83529-161">Dados</span><span class="sxs-lookup"><span data-stu-id="83529-161">Data</span></span>                  | <span data-ttu-id="83529-162">O dispositivo retorna duas matrizes MTP contíguas contendo PUOIDs.</span><span class="sxs-lookup"><span data-stu-id="83529-162">The device returns two contiguous MTP arrays containing PUOIDs.</span></span> <span data-ttu-id="83529-163">Cada matriz de MTP começa com um valor **DWORD** que indica a contagem de itens na matriz, seguida pela matriz de elementos.</span><span class="sxs-lookup"><span data-stu-id="83529-163">Each MTP array begins with a **DWORD** value indicating the count of items in the array, followed by the array of elements.</span></span> <span data-ttu-id="83529-164">A primeira matriz de MTP contém a lista de PUOIDs que foram adicionados ou alterados.</span><span class="sxs-lookup"><span data-stu-id="83529-164">The first MTP array contains the list of PUOIDs that have been added or changed.</span></span> <span data-ttu-id="83529-165">A segunda matriz de MTP contém a lista de PUOIDs que foram excluídos do dispositivo portátil. Observe que a soma da contagem de PUOID nas duas matrizes não deve exceder o valor passado no parâmetro de operação 3.</span><span class="sxs-lookup"><span data-stu-id="83529-165">The second MTP array contains the list of PUOIDs that have been deleted from the portable device.Note that the sum of PUOID count in the two arrays must not exceed the value passed in Operation Parameter 3.</span></span><br/> |
| <span data-ttu-id="83529-166">Direção dos dados</span><span class="sxs-lookup"><span data-stu-id="83529-166">Data Direction</span></span>        | <span data-ttu-id="83529-167">R->I</span><span class="sxs-lookup"><span data-stu-id="83529-167">R->I</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="83529-168">Opções de código de resposta</span><span class="sxs-lookup"><span data-stu-id="83529-168">Response Code Options</span></span> | <span data-ttu-id="83529-169">**MTP \_ RESPOSTA \_ OK** (0x2001) ou código de resposta de erro válido.</span><span class="sxs-lookup"><span data-stu-id="83529-169">**MTP\_RESPONSE\_OK** (0x2001) or valid error response code.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="83529-170">Parâmetro de resposta 1</span><span class="sxs-lookup"><span data-stu-id="83529-170">Response Parameter 1</span></span>  | <span data-ttu-id="83529-171">A ID da transação atual do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="83529-171">The device's current transaction ID.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="83529-172">Parâmetro de resposta 2</span><span class="sxs-lookup"><span data-stu-id="83529-172">Response Parameter 2</span></span>  | <span data-ttu-id="83529-173">O número de PUOIDs que permanecem para serem recuperadas por solicitações futuras.</span><span class="sxs-lookup"><span data-stu-id="83529-173">The number of PUOIDs that remain to be retrieved by future requests.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="83529-174">Parâmetro de resposta 3</span><span class="sxs-lookup"><span data-stu-id="83529-174">Response Parameter 3</span></span>  | <span data-ttu-id="83529-175">**DWORD** que contém informações de status.</span><span class="sxs-lookup"><span data-stu-id="83529-175">**DWORD** containing status information.</span></span> <span data-ttu-id="83529-176">O status é indicado de uma maneira bit a bit.</span><span class="sxs-lookup"><span data-stu-id="83529-176">Status is indicated in a bitwise fashion.</span></span> <span data-ttu-id="83529-177">Consulte comentários para obter informações sobre sinalizadores a serem usados.</span><span class="sxs-lookup"><span data-stu-id="83529-177">See Remarks for information about flags to use.</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="83529-178">Parâmetro de resposta 4</span><span class="sxs-lookup"><span data-stu-id="83529-178">Response Parameter 4</span></span>  | <span data-ttu-id="83529-179">0</span><span class="sxs-lookup"><span data-stu-id="83529-179">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="83529-180">Parâmetro de resposta 5</span><span class="sxs-lookup"><span data-stu-id="83529-180">Response Parameter 5</span></span>  | <span data-ttu-id="83529-181">0</span><span class="sxs-lookup"><span data-stu-id="83529-181">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="remarks"></a><span data-ttu-id="83529-182">Comentários</span><span class="sxs-lookup"><span data-stu-id="83529-182">Remarks</span></span>

<span data-ttu-id="83529-183">O status é indicado por meio do parâmetro de resposta 3 de maneira unificada usando os sinalizadores a seguir.</span><span class="sxs-lookup"><span data-stu-id="83529-183">Status is indicated through Response Parameter 3 in a bitwise fashion by using the following flags.</span></span>



| <span data-ttu-id="83529-184">Sinalizador</span><span class="sxs-lookup"><span data-stu-id="83529-184">Flag</span></span>                                             | <span data-ttu-id="83529-185">Valor</span><span class="sxs-lookup"><span data-stu-id="83529-185">Value</span></span> | <span data-ttu-id="83529-186">Descrição</span><span class="sxs-lookup"><span data-stu-id="83529-186">Description</span></span>                                                                                                                                                                                                                          |
|--------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="83529-187">**\_MDRT de \_ \_ \_ itens excluídos não relatados de sinalizadores \_ do WMP**</span><span class="sxs-lookup"><span data-stu-id="83529-187">**WMP\_MDRT\_FLAGS\_UNREPORTED\_DELETED\_ITEMS**</span></span> | <span data-ttu-id="83529-188">0x1</span><span class="sxs-lookup"><span data-stu-id="83529-188">0x1</span></span>   | <span data-ttu-id="83529-189">Os itens foram excluídos antes do nome do primeiro caminho do objeto que está sendo relatado.</span><span class="sxs-lookup"><span data-stu-id="83529-189">Items were deleted before the first object path name being reported.</span></span> <span data-ttu-id="83529-190">Isso geralmente indica que o dispositivo foi reformatado.</span><span class="sxs-lookup"><span data-stu-id="83529-190">This often indicates that the device was reformatted.</span></span>                                                                                                           |
| <span data-ttu-id="83529-191">**o WMP \_ MDRT \_ sinaliza \_ \_ itens adicionados não relatados \_**</span><span class="sxs-lookup"><span data-stu-id="83529-191">**WMP\_MDRT\_FLAGS\_UNREPORTED\_ADDED\_ITEMS**</span></span>   | <span data-ttu-id="83529-192">0x2</span><span class="sxs-lookup"><span data-stu-id="83529-192">0x2</span></span>   | <span data-ttu-id="83529-193">O dispositivo contém alguns itens adicionados que não podem ser retornados na lista de PUOIDS.</span><span class="sxs-lookup"><span data-stu-id="83529-193">The device contains some added items that cannot be returned in the list of PUOIDS.</span></span> <span data-ttu-id="83529-194">Observe que esse sinalizador não é redundante com o parâmetro de resposta 2.</span><span class="sxs-lookup"><span data-stu-id="83529-194">Note that this flag is not redundant with Response Parameter 2.</span></span> <span data-ttu-id="83529-195">Defina esse sinalizador somente quando houver itens solicitados que o dispositivo não possa retornar.</span><span class="sxs-lookup"><span data-stu-id="83529-195">Set this flag only when there are requested items that the device cannot return.</span></span> |



 

<span data-ttu-id="83529-196">Os bits 2 a 31 são reservados para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="83529-196">Bits 2 through 31 are reserved for future use.</span></span> <span data-ttu-id="83529-197">Esses bits devem ser definidos como zero.</span><span class="sxs-lookup"><span data-stu-id="83529-197">These bits should be set to zero.</span></span>

<span data-ttu-id="83529-198">O Windows Media Player envia o comando MTP para um dispositivo no início de uma sessão de sincronização antes que os arquivos de mídia sejam transferidos.</span><span class="sxs-lookup"><span data-stu-id="83529-198">Windows Media Player sends the MTP command to a device at the start of a synchronization session before media files are transferred.</span></span> <span data-ttu-id="83529-199">O dispositivo deve retornar sua resposta o mais rápido possível para evitar atrasos na operação de sincronização.</span><span class="sxs-lookup"><span data-stu-id="83529-199">The device should return its response as quickly as possible to avoid delays in the synchronization operation.</span></span>

<span data-ttu-id="83529-200">O Windows Media Player solicitará valores para os atributos listados em [sobre os metadados](about-the-metadata.md) de cada POUID modificado retornado na resposta.</span><span class="sxs-lookup"><span data-stu-id="83529-200">Windows Media Player will request values for the attributes listed in [About the Metadata](about-the-metadata.md) for each modified POUID returned in the response.</span></span> <span data-ttu-id="83529-201">O Windows Media Player pode enviar valores atualizados para esses atributos para o dispositivo em comandos subsequentes.</span><span class="sxs-lookup"><span data-stu-id="83529-201">Windows Media Player might send updated values for these attributes to the device in subsequent commands.</span></span>

<span data-ttu-id="83529-202">Os arquivos relatados como tendo sido removidos do dispositivo podem ser copiados para o dispositivo novamente se as configurações do usuário exigirem.</span><span class="sxs-lookup"><span data-stu-id="83529-202">Files reported as having been removed from the device can be copied to the device again if the user's settings require it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="83529-203">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="83529-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="83529-204">**Extensões de dispositivo para transferência de metadados acelerada**</span><span class="sxs-lookup"><span data-stu-id="83529-204">**Device Extensions for Accelerated Metadata Transfer**</span></span>](device-extensions-for-accelerated-metadata-transfer.md)
</dt> </dl>

 

 





