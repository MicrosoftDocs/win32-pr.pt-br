---
title: interoperabilidade de 32 bits e 64 bits
description: Os aplicativos de tecnologia assistencial precisam se comunicar entre limites de processo para obter informações de interface do usuário de Microsoft Acessibilidade Ativa Servers e provedores de automação da interface do usuário da Microsoft.
ms.assetid: 8b46daed-4fd9-430c-bb4d-24be9c8015b5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6897082db00e27d77d90e5fc72d5f229834ce760
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "103641384"
---
# <a name="32-bit-and-64-bit-interoperability"></a><span data-ttu-id="49b68-103">interoperabilidade de 32 bits e 64 bits</span><span class="sxs-lookup"><span data-stu-id="49b68-103">32-bit and 64-bit Interoperability</span></span>

<span data-ttu-id="49b68-104">Os aplicativos de tecnologia assistencial precisam se comunicar entre limites de processo para obter informações de interface do usuário de Microsoft Acessibilidade Ativa Servers e provedores de automação da interface do usuário da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="49b68-104">Assistive technology applications need to communicate across process boundaries to get UI information from Microsoft Active Accessibility servers and Microsoft UI Automation providers.</span></span> <span data-ttu-id="49b68-105">Este tópico descreve os principais problemas de comunicação entre processos que você precisa ter em mente ao desenvolver aplicativos de acessibilidade do Windows.</span><span class="sxs-lookup"><span data-stu-id="49b68-105">This topic describes the main interprocess communication issues that you need to keep in mind when developing Windows accessibility applications.</span></span>

<span data-ttu-id="49b68-106">Quando os aplicativos usam a API de automação do Windows, os componentes de tempo de execução do Microsoft Acessibilidade Ativa e da interface do usuário lidam automaticamente com todos os problemas e as complexidades envolvidas na execução de IPC (comunicações entre processos), incluindo os problemas de interoperabilidade envolvidos quando um processo é de 32 bits e o outro é de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-106">When applications use the Windows Automation API, the Microsoft Active Accessibility and UI Automation run-time components automatically handle all of the issues and complexities involved in performing interprocess communications (IPC), including the interoperability issues involved when one process is 32-bits and the other is 64-bits.</span></span> <span data-ttu-id="49b68-107">A Microsoft reconhece que há ocasiões em que um aplicativo de tecnologia assistencial pode precisar usar alguma forma de IPC em vez da API de automação do Windows para se comunicar com um Microsoft Acessibilidade Ativa Server ou um provedor de automação de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="49b68-107">Microsoft recognizes that there are occasions when an assistive technology application may need to use some form of IPC instead of the Windows Automation API to communicate with a Microsoft Active Accessibility server or UI Automation provider.</span></span> <span data-ttu-id="49b68-108">Nessas ocasiões, a Microsoft recomenda que você use mensagens DCOM ou do Windows (aquelas com valores menores do que o do **WM \_ User**) para se comunicar com outros processos.</span><span class="sxs-lookup"><span data-stu-id="49b68-108">On these occasions, Microsoft recommends that you use DCOM or Windows messages (those with values less than that of **WM\_USER**) to communicate with other processes.</span></span> <span data-ttu-id="49b68-109">Assim como a API de automação do Windows, as mensagens DCOM e Windows lidam automaticamente com todos os problemas de IPC, incluindo a interoperabilidade de 32 bits a 64 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-109">Like the Windows Automation API, DCOM and Windows messages automatically handle all IPC issues for you, including 32-bit to 64-bit interoperability.</span></span>

<span data-ttu-id="49b68-110">Quando as mensagens API de automação do Windows, DCOM e Windows não são uma opção, tenha em mente os seguintes problemas ao implementar o método IPC escolhido:</span><span class="sxs-lookup"><span data-stu-id="49b68-110">When the Windows Automation API, DCOM, and Windows messages are not an option, keep the following issues in mind when implementing your chosen IPC method:</span></span>

-   <span data-ttu-id="49b68-111">Memória compartilhada — ao usar a memória compartilhada, lembre-se de que uma estrutura em um processo de 32 bits pode ter um tamanho e um layout diferentes da mesma estrutura em um processo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-111">Shared Memory—When using shared memory, be aware that a structure in a 32-bit process may have a different size and layout than the same structure in a 64-bit process.</span></span> <span data-ttu-id="49b68-112">Isso é especialmente verdadeiro para estruturas que contêm ponteiros ou identificadores.</span><span class="sxs-lookup"><span data-stu-id="49b68-112">This is especially true for structures that contain pointers or handles.</span></span>
-   <span data-ttu-id="49b68-113">Truncamento de ponteiro — embora um aplicativo de 32 bits possa usar o tipo de dados **LONGLONG** para armazenar um valor de 64 bits, há instâncias em que não existe nenhum elemento da API do Windows que permitisse que o aplicativo de 32 bits receba um valor de 64 bits de um processo de 64 bits ou envie um valor de 64 bits para um processo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-113">Pointer Truncation—Although a 32-bit application can use the **LONGLONG** data type to store a 64-bit value, there are instances where no Windows API element exists that would enable the 32-bit application to receive a 64-bit value from a 64-bit process, or to send a 64-bit value to a 64-bit process.</span></span> <span data-ttu-id="49b68-114">Por exemplo, as funções [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) e [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) truncam todos os valores de ponteiro, deixando o aplicativo de 32 bits com um valor inútil.</span><span class="sxs-lookup"><span data-stu-id="49b68-114">For example, the [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) and [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) functions truncate all pointer values, leaving the 32-bit application with a useless value.</span></span>
-   <span data-ttu-id="49b68-115">Identificadores — como os identificadores Kernel32 e user32 são apenas de 32 bits significativos em processos de 32 bits e de 64 bits, eles podem ser transferidos entre processos sem problemas.</span><span class="sxs-lookup"><span data-stu-id="49b68-115">Handles—Because kernel32 and user32 handles are only 32-bit significant in both 32-bit and 64-bit processes, they can be transferred between processes without a problem.</span></span> <span data-ttu-id="49b68-116">No entanto, alguns itens que o Windows define como identificador são, na verdade, apenas ponteiros encapsulados (por exemplo, **HTREEITEM**).</span><span class="sxs-lookup"><span data-stu-id="49b68-116">However, some items that Windows defines as handles are really just wrapped pointers (for example, **HTREEITEM**).</span></span> <span data-ttu-id="49b68-117">Esses "identificadores" serão truncados se forem passados de um processo de 64 bits para um processo de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-117">These "handles" will be truncated if they are passed from a 64-bit process to a 32-bit process.</span></span>
-   <span data-ttu-id="49b68-118">[WinEvent](winevents-infrastructure.md) Funções de gancho — para registrar uma função de gancho no contexto com um processo de servidor de 32 bits, a função Hook deve residir em uma DLL de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-118">[WinEvent](winevents-infrastructure.md) Hook Functions—To register an in-context hook function with a 32-bit server process, the hook function must reside in a 32-bit DLL.</span></span> <span data-ttu-id="49b68-119">Da mesma forma, para registrar uma função de gancho no contexto com um processo de servidor de 64 bits, a função Hook deve residir em uma DLL de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="49b68-119">Similarly, to register an in-context hook function with a 64-bit server process, the hook function must reside in a 64-bit DLL.</span></span> <span data-ttu-id="49b68-120">Se um aplicativo de tecnologia assistencial tentar registrar uma função de gancho no contexto com um servidor que tenha uma profundidade de bits diferente, os eventos ainda serão entregues à função de gancho, mas serão entregues fora de contexto.</span><span class="sxs-lookup"><span data-stu-id="49b68-120">If an assistive technology application attempts to register an in-context hook function with a server that has a different bit-depth, events will still be delivered to the hook function, but they will be delivered out-of-context.</span></span> <span data-ttu-id="49b68-121">Para obter mais informações, consulte [funções de gancho WinEvents e in-context e out-of-Context](in-context-and-out-of-context-hook-functions.md).</span><span class="sxs-lookup"><span data-stu-id="49b68-121">For more information, see WinEvents and [In-Context and Out-of-Context Hook Functions](in-context-and-out-of-context-hook-functions.md).</span></span>

<span data-ttu-id="49b68-122">Para obter mais informações sobre a interoperabilidade de 32 bits e 64 bits, consulte [interoperabilidade de processo](/windows/desktop/WinProg64/process-interoperability).</span><span class="sxs-lookup"><span data-stu-id="49b68-122">For more information about 32-bit and 64-bit interoperability, see [Process Interoperability](/windows/desktop/WinProg64/process-interoperability).</span></span>

## <a name="related-topics"></a><span data-ttu-id="49b68-123">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="49b68-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="49b68-124">Visão geral da API de automação do Windows</span><span class="sxs-lookup"><span data-stu-id="49b68-124">Windows Automation API Overview</span></span>](windows-automation-api-overview.md)
</dt> </dl>

 

 