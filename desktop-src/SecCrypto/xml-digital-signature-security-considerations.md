---
description: Os aplicativos que assinam e verificam assinaturas digitais XML devem ser escritos de acordo com as práticas recomendadas a seguir para evitar ataques de negação de serviço, perda de dados e comprometimento de informações privadas.
ms.assetid: aa972946-9860-49c1-ae94-3f315684c291
title: Considerações de segurança de assinatura digital XML
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e54b4c5f3f863e0bc84172a7507bfe8609e2df7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105779938"
---
# <a name="xml-digital-signature-security-considerations"></a><span data-ttu-id="55bc7-103">Considerações de segurança de assinatura digital XML</span><span class="sxs-lookup"><span data-stu-id="55bc7-103">XML Digital Signature Security Considerations</span></span>

<span data-ttu-id="55bc7-104">Os aplicativos que assinam e verificam assinaturas digitais XML devem ser escritos de acordo com as práticas recomendadas a seguir para evitar ataques de negação de serviço, perda de dados e comprometimento de informações privadas.</span><span class="sxs-lookup"><span data-stu-id="55bc7-104">Applications that sign and verify XML digital signatures should be written according to the following best practices to avoid denial of service attacks, data loss, and compromise of private information.</span></span> <span data-ttu-id="55bc7-105">A lista a seguir fornece diretrizes gerais; no entanto, os desenvolvedores são incentivados a executar análise de segurança adicional específica para seus aplicativos e examinar as práticas recomendadas mais recentes das assinaturas digitais publicadas pelo W3C.</span><span class="sxs-lookup"><span data-stu-id="55bc7-105">The list below provides general guidance; however, developers are encouraged to perform additional security analysis specific to their applications and review the latest digital signatures best practices published by the W3C.</span></span>

-   [<span data-ttu-id="55bc7-106">Verificar a confiança da chave de assinatura</span><span class="sxs-lookup"><span data-stu-id="55bc7-106">Verify trust of the signing key</span></span>](#verify-trust-of-the-signing-key)
-   [<span data-ttu-id="55bc7-107">Primeiro, verifique a chave de assinatura e valide SignedInfo e, em seguida, valide as referências</span><span class="sxs-lookup"><span data-stu-id="55bc7-107">First verify the signing key and validate SignedInfo, then validate references</span></span>](#first-verify-the-signing-key-and-validate-signedinfo-then-validate-references)
-   [<span data-ttu-id="55bc7-108">Use o conjunto mínimo de algoritmos de canonização e transformações necessárias</span><span class="sxs-lookup"><span data-stu-id="55bc7-108">Use the minimal set of canonicalization algorithms and transforms required</span></span>](#use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required)
-   [<span data-ttu-id="55bc7-109">Garantir que os URIs de destino apontem para destinos dentro do escopo esperado</span><span class="sxs-lookup"><span data-stu-id="55bc7-109">Ensure target URIs point to destinations within the expected scope</span></span>](#ensure-target-uris-point-to-destinations-within-the-expected-scope)
-   [<span data-ttu-id="55bc7-110">Verifique se os dados consumidos pelo aplicativo são verificados pela assinatura</span><span class="sxs-lookup"><span data-stu-id="55bc7-110">Verify the data consumed by the application is verified by the signature</span></span>](#verify-the-data-consumed-by-the-application-is-verified-by-the-signature)
-   [<span data-ttu-id="55bc7-111">Siga as melhores práticas de criptografia</span><span class="sxs-lookup"><span data-stu-id="55bc7-111">Follow best cryptographic practices</span></span>](#follow-best-cryptographic-practices)

## <a name="verify-trust-of-the-signing-key"></a><span data-ttu-id="55bc7-112">Verificar a confiança da chave de assinatura</span><span class="sxs-lookup"><span data-stu-id="55bc7-112">Verify trust of the signing key</span></span>

<span data-ttu-id="55bc7-113">Verifique se a chave de assinatura é confiável verificando o certificado [*X. 509*](../secgloss/x-gly.md) correspondente (e a cadeia de certificados) incluídos na mensagem assinada.</span><span class="sxs-lookup"><span data-stu-id="55bc7-113">Ensure that the signing key is trusted by verifying the corresponding [*X.509*](../secgloss/x-gly.md) certificate (and certificate chain) included in the signed message.</span></span> <span data-ttu-id="55bc7-114">Como alternativa, a confiança na chave de assinatura pode ser estabelecida em um modo fora de banda, como um administrador Configurando um conjunto de chaves confiáveis ou um aplicativo consultando um serviço confiável em um canal seguro.</span><span class="sxs-lookup"><span data-stu-id="55bc7-114">Alternately, trust in the signing key can be established in an out-of-band fashion, such as an administrator configuring a set of trusted keys, or an application querying a trusted service over a secure channel.</span></span>

## <a name="first-verify-the-signing-key-and-validate-signedinfo-then-validate-references"></a><span data-ttu-id="55bc7-115">Primeiro, verifique a chave de assinatura e valide SignedInfo e, em seguida, valide as referências</span><span class="sxs-lookup"><span data-stu-id="55bc7-115">First verify the signing key and validate SignedInfo, then validate references</span></span>

<span data-ttu-id="55bc7-116">Verifique a relação de confiança na chave de assinatura e a integridade do elemento **SignedInfo** antes de validar as referências.</span><span class="sxs-lookup"><span data-stu-id="55bc7-116">Verify trust in the signing key and the integrity of the **SignedInfo** element prior to validating references.</span></span> <span data-ttu-id="55bc7-117">Da mesma forma, os aplicativos devem validar os elementos do **manifesto** antes de resolver as referências contidas nos elementos do **manifesto** .</span><span class="sxs-lookup"><span data-stu-id="55bc7-117">Similarly, applications should validate **Manifest** elements prior to resolving references contained in the **Manifest** elements.</span></span> <span data-ttu-id="55bc7-118">Elementos de **referência** permitem a especificação de URIs de destino, transformações e algoritmos de canonização.</span><span class="sxs-lookup"><span data-stu-id="55bc7-118">**Reference** elements allow the specification of target URIs, transforms, and canonicalization algorithms.</span></span> <span data-ttu-id="55bc7-119">Se não for validado, esses campos poderão potencialmente ser usados para criar negação de serviço, perda de dados ou outros ataques.</span><span class="sxs-lookup"><span data-stu-id="55bc7-119">If not validated, these fields can potentially be used to create denial of service, data loss, or other attacks.</span></span>

## <a name="use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required"></a><span data-ttu-id="55bc7-120">Use o conjunto mínimo de algoritmos de canonização e transformações necessárias</span><span class="sxs-lookup"><span data-stu-id="55bc7-120">Use the minimal set of canonicalization algorithms and transforms required</span></span>

<span data-ttu-id="55bc7-121">XSLT e XPATH não devem ser usados em elementos não autenticados, como **KeyInfo**.</span><span class="sxs-lookup"><span data-stu-id="55bc7-121">XSLT and XPATH should not be used within unauthenticated elements, such as **KeyInfo**.</span></span> <span data-ttu-id="55bc7-122">Se um aplicativo exigir o uso de XPath, restrinja o conjunto de expressões XPATH permitidas apenas aos que usam os eixos ancestral ou self e não Calcule o valor da cadeia de caracteres de elementos.</span><span class="sxs-lookup"><span data-stu-id="55bc7-122">If an application requires use of XPath, constrain the set of XPATH expressions allowed to only those that use the ancestor or self axes and do not compute the string value of elements.</span></span> <span data-ttu-id="55bc7-123">Por padrão, o CryptXML dá suporte a um conjunto limitado de algoritmos de canonização (consulte URIs com suporte em [algoritmos criptográficos de assinatura digital XML](xml-digital-signature-cryptographic-algorithms.md)).</span><span class="sxs-lookup"><span data-stu-id="55bc7-123">By default, CryptXML supports a limited set of canonicalization algorithms (see supported URIs in [XML Digital Signature Cryptographic Algorithms](xml-digital-signature-cryptographic-algorithms.md)).</span></span> <span data-ttu-id="55bc7-124">Os desenvolvedores podem implementar transformações adicionais ou algoritmos de canonização para uso em seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="55bc7-124">Developers can implement additional transforms or canonicalization algorithms for use within their application.</span></span> <span data-ttu-id="55bc7-125">No entanto, o uso de algoritmos complexos cria a possibilidade de ataques de negação de serviço ou de interrupção das características de repúdio de uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="55bc7-125">However, the use of complex algorithms creates the possibility of denial of service attacks or of breaking a signature's repudiation characteristics.</span></span> <span data-ttu-id="55bc7-126">Nos casos em que as transformações são exigidas pelo aplicativo, limite o número de transformações que podem ser especificadas por referência ao número mais alto exigido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="55bc7-126">In cases where transforms are required by the application, limit the number of transforms that can be specified per reference to the highest number required by the application.</span></span> <span data-ttu-id="55bc7-127">Essa prática reduz ataques de negação de serviço com base no uso excessivo de transformações.</span><span class="sxs-lookup"><span data-stu-id="55bc7-127">This practice mitigates denial of service attacks based on excessive use of transforms.</span></span>

## <a name="ensure-target-uris-point-to-destinations-within-the-expected-scope"></a><span data-ttu-id="55bc7-128">Garantir que os URIs de destino apontem para destinos dentro do escopo esperado</span><span class="sxs-lookup"><span data-stu-id="55bc7-128">Ensure target URIs point to destinations within the expected scope</span></span>

<span data-ttu-id="55bc7-129">Os aplicativos devem limitar os URIs de destino para o menor escopo exigido pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="55bc7-129">Applications should limit target URIs to the smallest scope required by the application.</span></span> <span data-ttu-id="55bc7-130">Por exemplo, pode ser esperado que os URIs apontem para destinos no mesmo documento, arquivos em um diretório de destino específico ou locais de rede dentro de um domínio DNS específico.</span><span class="sxs-lookup"><span data-stu-id="55bc7-130">For example, URIs might be expected to point to destinations within the same document, files in a specific target directory, or network locations within a specific DNS domain.</span></span> <span data-ttu-id="55bc7-131">Os URIs definidos por um invasor para apontar para fora do domínio esperado podem fazer com que um aplicativo recupere conteúdo mal-intencionado, envie solicitações HTTP mal-intencionadas (possivelmente contendo cadeias de caracteres de consulta) ou faça com que os aplicativos se autentiquem em servidores mal-intencionados.</span><span class="sxs-lookup"><span data-stu-id="55bc7-131">URIs set by an attacker to point outside the expected domain could cause an application to retrieve malicious content, send malicious HTTP requests (possibly containing query strings), or cause applications to authenticate to malicious servers.</span></span>

## <a name="verify-the-data-consumed-by-the-application-is-verified-by-the-signature"></a><span data-ttu-id="55bc7-132">Verifique se os dados consumidos pelo aplicativo são verificados pela assinatura</span><span class="sxs-lookup"><span data-stu-id="55bc7-132">Verify the data consumed by the application is verified by the signature</span></span>

<span data-ttu-id="55bc7-133">Se o aplicativo validar a chave de assinatura e os elementos **SignedInfo** e **Reference** , mas o aplicativo consumir dados importantes não referenciados pela assinatura, a assinatura não fornecerá nenhuma proteção significativa.</span><span class="sxs-lookup"><span data-stu-id="55bc7-133">If the application validates the signing key and the **SignedInfo** and **Reference** elements, but the application consumes important data not referenced by the signature, the signature provides no meaningful protection.</span></span> <span data-ttu-id="55bc7-134">O significado semântico de uma assinatura pode variar com base na posição da assinatura dentro do documento.</span><span class="sxs-lookup"><span data-stu-id="55bc7-134">The semantic meaning of a signature may vary based on the signature's position within the document.</span></span> <span data-ttu-id="55bc7-135">Os aplicativos são incentivados a verificar a posição da assinatura em um documento.</span><span class="sxs-lookup"><span data-stu-id="55bc7-135">Applications are encouraged to check the position of the signature within a document.</span></span> <span data-ttu-id="55bc7-136">Além disso, verifique a posição dos dados referenciados e os nomes de elementos para atenuar os ataques de substituição e encapsulamento.</span><span class="sxs-lookup"><span data-stu-id="55bc7-136">Additionally, check the position of referenced data and element names to mitigate substitution and wrapping attacks.</span></span>

## <a name="follow-best-cryptographic-practices"></a><span data-ttu-id="55bc7-137">Siga as melhores práticas de criptografia</span><span class="sxs-lookup"><span data-stu-id="55bc7-137">Follow best cryptographic practices</span></span>

<span data-ttu-id="55bc7-138">Os algoritmos criptográficos se tornam mais fracos ao longo do tempo à medida que novos ataques são descobertos e mais energia de computação fica disponível.</span><span class="sxs-lookup"><span data-stu-id="55bc7-138">Cryptographic algorithms become weaker over time as new attacks are discovered and more computing power becomes available.</span></span> <span data-ttu-id="55bc7-139">Não codifique os identificadores de algoritmos criptográficos ou os tamanhos de chave em seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="55bc7-139">Do not hard code cryptographic algorithm identifiers or key sizes into your applications.</span></span> <span data-ttu-id="55bc7-140">Para obter uma lista mais completa das melhores práticas de criptografia, consulte Michael Howard e Steve Lipner, "padrões de criptografia mínimas do SDL", no *ciclo de vida do desenvolvimento da segurança* (Redmond, Washington: Microsoft Press, 2006), 251 – 258.</span><span class="sxs-lookup"><span data-stu-id="55bc7-140">For a more complete list of best cryptographic practices, see Michael Howard and Steve Lipner, "SDL Minimum Cryptographic Standards," in *The Security Development Lifecycle* (Redmond, Washington: Microsoft Press, 2006), 251–258.</span></span>

<span data-ttu-id="55bc7-141">As práticas recomendadas adicionais podem ser encontradas no site do W3C: https://www.w3.org .</span><span class="sxs-lookup"><span data-stu-id="55bc7-141">Additional best practices can be found on the W3C website: https://www.w3.org.</span></span>

> [!Note]  
> <span data-ttu-id="55bc7-142">Esses recursos podem não estar disponíveis em alguns idiomas e países ou regiões.</span><span class="sxs-lookup"><span data-stu-id="55bc7-142">These resources may not be available in some languages and countries or regions.</span></span>

 

 

 
