---
description: Explica as chamadas necessárias para criar um certificado.
ms.assetid: 74154b3b-75fc-412f-835c-1a6f54e688c6
title: Criando um certificado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8f237fd729499aa5153f12f68657e2ce227da7b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103837279"
---
# <a name="building-a-certificate"></a><span data-ttu-id="f5098-103">Criando um certificado</span><span class="sxs-lookup"><span data-stu-id="f5098-103">Building a Certificate</span></span>

<span data-ttu-id="f5098-104">A ordem das chamadas na criação de um certificado é a seguinte:</span><span class="sxs-lookup"><span data-stu-id="f5098-104">The order of calls in building a certificate is as follows:</span></span>

1.  <span data-ttu-id="f5098-105">A CA ( [*autoridade de certificação*](../secgloss/c-gly.md) ) inicializa módulos por meio de chamadas para [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) e [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (ocorre uma vez na inicialização do servidor).</span><span class="sxs-lookup"><span data-stu-id="f5098-105">[*Certification authority*](../secgloss/c-gly.md) (CA) initializes modules through calls to [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) and [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (happens once on server initialization).</span></span> <span data-ttu-id="f5098-106">A AC inicializará a política e sairá os módulos chamando [**ICertPolicy2:: Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) e [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span><span class="sxs-lookup"><span data-stu-id="f5098-106">The CA will initialize the policy and exit modules by calling [**ICertPolicy2::Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) and [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span></span>
2.  <span data-ttu-id="f5098-107">O intermediário chama a AC por meio de [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (ocorre uma vez por inicialização intermediária).</span><span class="sxs-lookup"><span data-stu-id="f5098-107">Intermediary calls the CA through [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (happens once per intermediary initialization).</span></span> <span data-ttu-id="f5098-108">O intermediário localiza a cadeia de caracteres de configuração necessária chamando [**ICertConfig:: GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span><span class="sxs-lookup"><span data-stu-id="f5098-108">The intermediary finds the needed configuration string by calling [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span></span>
3.  <span data-ttu-id="f5098-109">O cliente chama o intermediário por meio de uma interface específica para o intermediário (ocorre uma vez por solicitação).</span><span class="sxs-lookup"><span data-stu-id="f5098-109">Client calls the intermediary through an interface specific to the intermediary (happens once per request).</span></span> <span data-ttu-id="f5098-110">O cliente envia uma [*solicitação de certificado*](../secgloss/c-gly.md) para o intermediário.</span><span class="sxs-lookup"><span data-stu-id="f5098-110">The client sends a [*certificate request*](../secgloss/c-gly.md) to the intermediary.</span></span> <span data-ttu-id="f5098-111">Isso pode ser, por exemplo, o Microsoft Internet Explorer enviando uma solicitação por meio do [controle de registro de certificado](certificate-enrollment-control.md) para o Microsoft serviços de informações da Internet.</span><span class="sxs-lookup"><span data-stu-id="f5098-111">This can be, for example, Microsoft Internet Explorer sending a request through [Certificate Enrollment Control](certificate-enrollment-control.md) to Microsoft Internet Information Services.</span></span>
4.  <span data-ttu-id="f5098-112">Intermediário a CA por meio de [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (ocorre uma vez por solicitação).</span><span class="sxs-lookup"><span data-stu-id="f5098-112">Intermediary to CA through [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (happens once per request).</span></span> <span data-ttu-id="f5098-113">O intermediário envia a solicitação de certificado para a AC por meio de [**ICertRequest:: Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span><span class="sxs-lookup"><span data-stu-id="f5098-113">The intermediary sends the certificate request to the CA through [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span></span> <span data-ttu-id="f5098-114">No caso de Serviços de Informações da Internet, isso pode ser feito por meio de scripts de páginas Active Server.</span><span class="sxs-lookup"><span data-stu-id="f5098-114">In the case of Internet Information Services, this could be done through Active Server Pages scripts.</span></span>
5.  <span data-ttu-id="f5098-115">A CA chama o módulo de política por meio da interface [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) (ocorre uma vez por solicitação).</span><span class="sxs-lookup"><span data-stu-id="f5098-115">The CA calls the Policy Module through the [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) interface (happens once per request).</span></span> <span data-ttu-id="f5098-116">A autoridade de Certificação notifica o módulo de política de que uma solicitação chegou chamando [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span><span class="sxs-lookup"><span data-stu-id="f5098-116">The CA notifies the policy module that a request has arrived by calling [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span></span> <span data-ttu-id="f5098-117">O módulo de política pode examinar a solicitação e alterar o certificado chamando métodos da interface [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) .</span><span class="sxs-lookup"><span data-stu-id="f5098-117">The policy module can examine the request and change the certificate by calling methods of the [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interface.</span></span> <span data-ttu-id="f5098-118">O módulo de política pode indicar que a solicitação está OK (se for, o certificado é criado neste ponto), a solicitação será negada ou a solicitação deverá ser suspensa.</span><span class="sxs-lookup"><span data-stu-id="f5098-118">The policy module can then indicate that the request is OK (if so, the certificate is built at this point), the request is to be denied, or the request should be suspended.</span></span>
6.  <span data-ttu-id="f5098-119">Adicional O administrador chama a AC por meio da interface [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) .</span><span class="sxs-lookup"><span data-stu-id="f5098-119">(Optional) Administrator calls the CA through the [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) interface.</span></span> <span data-ttu-id="f5098-120">Se a solicitação for suspensa, o administrador poderá reenviar ou negar a solicitação, ou modificar atributos e extensões de solicitação.</span><span class="sxs-lookup"><span data-stu-id="f5098-120">If the request is suspended, the administrator can resubmit or deny the request, or modify request attributes and extensions.</span></span> <span data-ttu-id="f5098-121">Observe que, se a solicitação for reenviada, o módulo de política terá outra oportunidade de processar a solicitação (como resultado de uma chamada para [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span><span class="sxs-lookup"><span data-stu-id="f5098-121">Note that if the request is resubmitted, the Policy Module will have another opportunity to process the request (as a result of a call to [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span></span> <span data-ttu-id="f5098-122">A tarefa de reenviar ou negar a solicitação pode ser executada por meio do snap-in do MMC da autoridade de certificação ou de outro aplicativo que usa **ICertAdmin**.</span><span class="sxs-lookup"><span data-stu-id="f5098-122">The task of resubmitting or denying the request can be performed by means of the Certification Authority MMC snap-in, or another application that uses **ICertAdmin**.</span></span>
7.  <span data-ttu-id="f5098-123">A CA chama o módulo de saída por meio da interface [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) .</span><span class="sxs-lookup"><span data-stu-id="f5098-123">The CA calls the exit module through the [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) interface.</span></span> <span data-ttu-id="f5098-124">Se o módulo de saída tiver indicado (quando [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) foi chamado, na etapa 1) que está interessado em ver certificados emitidos ou solicitações mantidas pendentes, a autoridade de certificação chamará [**ICertExit:: Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span><span class="sxs-lookup"><span data-stu-id="f5098-124">If the exit module has indicated (when [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) was called, in step 1) that it is interested in seeing certificates issued or requests held pending, the CA will call [**ICertExit::Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span></span>
8.  <span data-ttu-id="f5098-125">O módulo de saída chama a AC por meio da interface [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) .</span><span class="sxs-lookup"><span data-stu-id="f5098-125">The exit module calls the CA through the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) interface.</span></span> <span data-ttu-id="f5098-126">O módulo de saída pode examinar a solicitação e o novo certificado chamando métodos de **ICertServerExit**.</span><span class="sxs-lookup"><span data-stu-id="f5098-126">The exit module can examine the request and the new certificate by calling methods of **ICertServerExit**.</span></span>

 

 
