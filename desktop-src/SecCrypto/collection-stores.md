---
description: Como o número de certificados, listas de certificados revogados (CRLs) e lista de certificados confiáveis (CTLs) na coleção de um usuário aumenta, a organização desses certificados se torna um problema.
ms.assetid: 13e7e077-e8be-4ba4-99e1-08421fd2452e
title: Repositórios de coleta
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5bfeb8ef071d7a5ccf6bc7ce43ba418117879536
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103829409"
---
# <a name="collection-stores"></a><span data-ttu-id="244a0-103">Repositórios de coleta</span><span class="sxs-lookup"><span data-stu-id="244a0-103">Collection Stores</span></span>

<span data-ttu-id="244a0-104">Como o número de [*certificados*](../secgloss/c-gly.md), [*listas de certificados revogados*](../secgloss/c-gly.md) (CRLs) e [*lista de certificados confiáveis*](../secgloss/c-gly.md) (CTLs) na coleção de um usuário aumenta, a organização desses certificados se torna um problema.</span><span class="sxs-lookup"><span data-stu-id="244a0-104">As the number of [*certificates*](../secgloss/c-gly.md), [*certificate revocation lists*](../secgloss/c-gly.md) (CRLs), and [*certificate trust list*](../secgloss/c-gly.md) (CTLs) in a user's collection grows, the organization of those certificates becomes an issue.</span></span> <span data-ttu-id="244a0-105">Uma solução possível é criar repositórios de certificados separados para manter diferentes tipos de certificados.</span><span class="sxs-lookup"><span data-stu-id="244a0-105">One possible solution is to create separate certificate stores to keep different kinds of certificates.</span></span> <span data-ttu-id="244a0-106">Essa solução cria um novo problema, pois um aplicativo pode precisar pesquisar vários repositórios diferentes para localizar um certificado específico.</span><span class="sxs-lookup"><span data-stu-id="244a0-106">This solution creates a new problem because an application might need to search several different stores to find a specific certificate.</span></span> <span data-ttu-id="244a0-107">O uso de repositórios lógicos ou de coleção resolve esse problema.</span><span class="sxs-lookup"><span data-stu-id="244a0-107">The use of logical or collection stores solves this problem.</span></span>

<span data-ttu-id="244a0-108">Um repositório [*lógico*](../secgloss/l-gly.md) e um repositório de certificados de coleção são grupos de repositórios físicos que aparecem para um aplicativo como um único repositório.</span><span class="sxs-lookup"><span data-stu-id="244a0-108">A [*logical store*](../secgloss/l-gly.md) and a collection certificate store are groups of physical stores that appears to an application as a single store.</span></span> <span data-ttu-id="244a0-109">Todos os repositórios de membros de um repositório lógico ou de coleção podem ser pesquisados ou enumerados com uma única chamada de função para [**CertFindCertificateInStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certfindcertificateinstore) ou [**CertEnumCertificatesInStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumcertificatesinstore).</span><span class="sxs-lookup"><span data-stu-id="244a0-109">All member stores of a logical or collection store can be searched or enumerated with a single function call to either [**CertFindCertificateInStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certfindcertificateinstore) or [**CertEnumCertificatesInStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumcertificatesinstore).</span></span>

<span data-ttu-id="244a0-110">O uso de repositórios lógicos ou de coleção também fornece flexibilidade que é difícil de alcançar com registros em papel.</span><span class="sxs-lookup"><span data-stu-id="244a0-110">The use of logical or collection stores also provides flexibility that is difficult to achieve with paper records.</span></span> <span data-ttu-id="244a0-111">Um certificado em um único repositório físico pode precisar ser um membro de vários grupos lógicos diferentes.</span><span class="sxs-lookup"><span data-stu-id="244a0-111">A certificate in a single physical store might need to be a member of several different logical groups.</span></span> <span data-ttu-id="244a0-112">Portanto, um repositório físico individual pode ser membro de mais de um repositório lógico ou de coleção, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="244a0-112">Therefore, an individual physical store can be a member of more than one logical or collection store as shown in the following illustration.</span></span>

![repositórios de coleta](images/mancert.png)

<span data-ttu-id="244a0-114">Esta ilustração apresenta os seguintes conceitos básicos de repositório de certificados lógicos:</span><span class="sxs-lookup"><span data-stu-id="244a0-114">This illustration presents the following basic, logical certificate store concepts:</span></span>

-   <span data-ttu-id="244a0-115">Um repositório de certificados de coleção tem um ponteiro para o primeiro bloco de ponteiros para esse repositório de coleta.</span><span class="sxs-lookup"><span data-stu-id="244a0-115">A collection certificate store has a pointer to the first pointer block for that collection store.</span></span>
-   <span data-ttu-id="244a0-116">Cada bloco de ponteiro de um repositório de coleção tem um ponteiro para um repositório irmão e um ponteiro para o próximo bloco de ponteiro da coleção.</span><span class="sxs-lookup"><span data-stu-id="244a0-116">Each pointer block of a collection store has a pointer to a sibling store and a pointer to the next pointer block of the collection.</span></span>
-   <span data-ttu-id="244a0-117">Cada repositório irmão em uma coleção é um repositório de certificados físico simples.</span><span class="sxs-lookup"><span data-stu-id="244a0-117">Each sibling store in a collection is a simple physical certificate store.</span></span>
-   <span data-ttu-id="244a0-118">Um repositório de certificados simples pode ser um repositório irmão membro em vários repositórios de coleta diferentes.</span><span class="sxs-lookup"><span data-stu-id="244a0-118">A simple certificate store can be a member sibling store in many different collection stores.</span></span>
-   <span data-ttu-id="244a0-119">Os certificados adicionados a um repositório de coleta são fisicamente adicionados a um dos armazenamentos irmãos na coleção.</span><span class="sxs-lookup"><span data-stu-id="244a0-119">Certificates added to a collection store are physically added to one of the sibling stores in the collection.</span></span>
-   <span data-ttu-id="244a0-120">Os certificados em um repositório irmão podem ser acessados por qualquer repositório de coleta no qual o repositório irmão é membro.</span><span class="sxs-lookup"><span data-stu-id="244a0-120">Certificates in a sibling store can be accessed by any collection store in which the sibling store is a member.</span></span>

<span data-ttu-id="244a0-121">Os repositórios de coleta são criados em um aplicativo abrindo um repositório de coleta usando [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) e, em seguida, usando [**CertAddStoreToCollection**](/windows/desktop/api/Wincrypt/nf-wincrypt-certaddstoretocollection) para adicionar um repositório irmão aberto ao repositório de coleta.</span><span class="sxs-lookup"><span data-stu-id="244a0-121">Collection stores are built within an application by opening a collection store by using [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) and then using [**CertAddStoreToCollection**](/windows/desktop/api/Wincrypt/nf-wincrypt-certaddstoretocollection) to add an open sibling store to the collection store.</span></span> <span data-ttu-id="244a0-122">Um repositório irmão pode ser excluído de um repositório de coleta chamando [**CertRemoveStoreFromCollection**](/windows/desktop/api/Wincrypt/nf-wincrypt-certremovestorefromcollection).</span><span class="sxs-lookup"><span data-stu-id="244a0-122">A sibling store can be deleted from a collection store by calling [**CertRemoveStoreFromCollection**](/windows/desktop/api/Wincrypt/nf-wincrypt-certremovestorefromcollection).</span></span>

 

 
