---
description: O controle de registro de certificado pode ser usado por um aplicativo que deve solicitar que um certificado seja emitido para um assunto nomeado.
ms.assetid: ce6661b0-7ed2-452f-a54c-6705d14f3298
title: Controle de registro de certificado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e417a9db7984cbb58b7c2e3b51d828b6d61a97b6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105753228"
---
# <a name="certificate-enrollment-control"></a><span data-ttu-id="6b2e8-103">Controle de registro de certificado</span><span class="sxs-lookup"><span data-stu-id="6b2e8-103">Certificate Enrollment Control</span></span>

<span data-ttu-id="6b2e8-104">O controle de registro de certificado pode ser usado por um aplicativo que deve solicitar que um certificado seja emitido para um assunto nomeado.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-104">Certificate Enrollment Control can be used by an application that must request that a certificate be issued to a named subject.</span></span> <span data-ttu-id="6b2e8-105">Ele foi projetado para aceitar dados na forma de uma cadeia de caracteres binária (BSTR).</span><span class="sxs-lookup"><span data-stu-id="6b2e8-105">It is designed to accept data in the form of a binary string (BSTR).</span></span> <span data-ttu-id="6b2e8-106">Os dados podem vir de uma página da Web ou da interface do usuário do Visual Basic ou Visual C++ sistema de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-106">The data can come from a webpage or from the user interface of the Visual Basic or Visual C++ development system.</span></span> <span data-ttu-id="6b2e8-107">A saída do controle de registro de certificado é uma \# solicitação de certificado PKCS 10 que pode ser enviada para uma [*autoridade de certificação*](../secgloss/c-gly.md) (CA).</span><span class="sxs-lookup"><span data-stu-id="6b2e8-107">The output from the Certificate Enrollment Control is a PKCS \#10 certificate request that can be sent on to a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span>

![controle de registro de certificado](images/xen-arch.png)

<span data-ttu-id="6b2e8-109">As informações necessárias sobre o usuário, a entidade do certificado, são coletadas pela interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-109">Necessary information about the user, the certificate subject, is collected by the User Interface.</span></span> <span data-ttu-id="6b2e8-110">Essas informações são fornecidas como uma entrada BSTR para o controle de registro de certificado.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-110">This information is provided as a BSTR input to the Certificate Enrollment Control.</span></span> <span data-ttu-id="6b2e8-111">O controle de registro de certificado gera a chave de assinatura apropriada, chave de troca de chave ou ambos os pares de chaves.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-111">The Certificate Enrollment Control generates the appropriate signature key, key exchange key, or both key pairs.</span></span> <span data-ttu-id="6b2e8-112">Em seguida, o controle gera e assina \# uma [*solicitação de certificado*](../secgloss/c-gly.md) PKCS 10 usando a [*chave privada*](../secgloss/p-gly.md)gerada.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-112">The control then generates and signs a PKCS \#10 [*certificate request*](../secgloss/c-gly.md) by using the generated [*private key*](../secgloss/p-gly.md).</span></span> <span data-ttu-id="6b2e8-113">Em seguida, o controle de registro de certificado vincula o par de chaves a um certificado fictício temporário que é armazenado no repositório de solicitações até que o certificado emitido seja retornado de uma autoridade de certificação.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-113">The Certificate Enrollment Control then links the key pair to a temporary dummy certificate which is stored in the request store until the issued certificate is returned from a certification authority.</span></span> <span data-ttu-id="6b2e8-114">Por fim, o aplicativo envia a \# solicitação de certificado PKCS 10 para uma CA.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-114">Finally, the application sends the PKCS \#10 certificate request to a CA.</span></span>

<span data-ttu-id="6b2e8-115">Se a autoridade de certificação aprovar a solicitação de certificado, a autoridade de certificação criará um certificado contendo a chave pública.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-115">If the CA approves the certificate request, the CA creates a certificate containing the public key.</span></span> <span data-ttu-id="6b2e8-116">A CA também assina e retorna o certificado.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-116">The CA also signs and returns the certificate.</span></span>

<span data-ttu-id="6b2e8-117">Quando o certificado solicitado é retornado da autoridade de certificação, o aplicativo passa a \# mensagem PKCS 7 de volta para o controle de registro de certificado em que o certificado ou a cadeia de certificados é extraída da \# mensagem PKCS 7.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-117">When the requested certificate is returned from the CA, the application passes the PKCS \#7 message back to the Certificate Enrollment Control where the certificate or chain of certificates is extracted from the PKCS \#7 message.</span></span> <span data-ttu-id="6b2e8-118">O certificado e quaisquer outros certificados na cadeia de confiança são armazenados em um [*repositório de certificados*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="6b2e8-118">The certificate and any other certificates in the chain of trust are stored in a [*certificate store*](../secgloss/c-gly.md).</span></span> <span data-ttu-id="6b2e8-119">O certificado retornado não é modificado de forma alguma.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-119">The returned certificate is not modified in any way.</span></span> <span data-ttu-id="6b2e8-120">Qualquer aplicativo com reconhecimento de certificado agora pode acessar esse certificado do repositório.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-120">Any certificate-aware application can now access this certificate from the store.</span></span>

<span data-ttu-id="6b2e8-121">O controle de registro de cartão inteligente é usado por um administrador para se registrar em nome de usuários de cartão inteligente.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-121">Smart Card Enrollment Control is used by an administrator to enroll on behalf of smart card users.</span></span> <span data-ttu-id="6b2e8-122">O processo de registro resulta em um certificado emitido que é armazenado no cartão inteligente de um usuário.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-122">The enrollment process results in a certificate being issued that is stored on a user's smart card.</span></span>

<span data-ttu-id="6b2e8-123">O controle de registro de cartão inteligente está contido em Scrdenrl.dll e consiste em um objeto, **SCrdEnr**.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-123">The Smart Card Enrollment Control is contained in Scrdenrl.dll and consists of one object, **SCrdEnr**.</span></span> <span data-ttu-id="6b2e8-124">Nenhum outro objeto está incluído no Scrdenrl.dll.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-124">No other objects are included in Scrdenrl.dll.</span></span> <span data-ttu-id="6b2e8-125">Esse objeto de registro de cartão inteligente pode ser usado com uma linguagem de script, como Visual Basic Scripting Edition (VBScript).</span><span class="sxs-lookup"><span data-stu-id="6b2e8-125">This Smart Card Enrollment object can be used with a script language, such as Visual Basic Scripting Edition (VBScript).</span></span>

<span data-ttu-id="6b2e8-126">Um [*leitor de cartão inteligente*](../secgloss/r-gly.md) deve ser instalado no computador que executa o controle de registro de cartão inteligente.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-126">A [*smart card reader*](../secgloss/r-gly.md) must be installed on the computer running the Smart Card Enrollment Control.</span></span>

<span data-ttu-id="6b2e8-127">Além disso, o emissor do cartão inteligente deve ter obtido um certificado de autenticação baseado no modelo de certificado "EnrollmentAgent".</span><span class="sxs-lookup"><span data-stu-id="6b2e8-127">Additionally, the smart card issuer must have obtained a signing certificate based on the "EnrollmentAgent" certificate template.</span></span> <span data-ttu-id="6b2e8-128">Esse certificado de autenticação será usado para assinar a solicitação de certificado gerada em nome do destinatário do cartão inteligente.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-128">This signing certificate will be used to sign the certificate request generated on behalf of the smart card recipient.</span></span> <span data-ttu-id="6b2e8-129">Por padrão, os administradores de domínio recebem permissão para solicitar um certificado com base no modelo "agente de registro".</span><span class="sxs-lookup"><span data-stu-id="6b2e8-129">By default, domain administrators are granted permission to request a certificate based on the "Enrollment Agent" template.</span></span> <span data-ttu-id="6b2e8-130">Outro usuário pode receber permissão para se registrar para um certificado "EnrollmentAgent" (por meio do snap-in Active Directory sites e serviços do MMC); isso, no entanto, permite que esse usuário emita por conta própria um cartão inteligente com privilégios de administrador de domínio.</span><span class="sxs-lookup"><span data-stu-id="6b2e8-130">Another user can be granted permission to enroll for an "EnrollmentAgent" certificate (by means of the Active Directory Sites and Services MMC snap-in); doing so, however, allows this user to self-issue a smart card with domain administrator privileges.</span></span>

 

 
