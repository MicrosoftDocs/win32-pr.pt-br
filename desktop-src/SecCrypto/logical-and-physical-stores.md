---
description: As lojas de sistema padrão, incluindo MY, CA e ROOT, são implementadas como repositórios de coleta lógica com um número de repositórios físicos predefinidos como armazenamentos de membros.
ms.assetid: 1d82b94b-4842-454a-aca4-823cd264ac52
title: Repositórios lógicos e físicos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66a5441bac91e39b7f4c124daecd3a6a569c323c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103647309"
---
# <a name="logical-and-physical-stores"></a><span data-ttu-id="4a2f3-103">Repositórios lógicos e físicos</span><span class="sxs-lookup"><span data-stu-id="4a2f3-103">Logical and Physical Stores</span></span>

<span data-ttu-id="4a2f3-104">As lojas de sistema padrão, incluindo MY, CA e ROOT, são implementadas como repositórios de coleta lógica com um número de repositórios físicos predefinidos como armazenamentos de membros.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-104">Default system stores, including MY, CA, and ROOT, are implemented as logical collection stores with a number of predefined physical stores as their member stores.</span></span> <span data-ttu-id="4a2f3-105">Os repositórios físicos de membros de um repositório do sistema são abertos automaticamente quando o armazenamento do sistema é aberto.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-105">The member physical stores of a system store are opened automatically when the system store is opened.</span></span> <span data-ttu-id="4a2f3-106">Um usuário pode adicionar armazenamentos físicos adicionais a qualquer coleção de armazenamento do sistema.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-106">A user can add additional physical stores to any system store collection.</span></span> <span data-ttu-id="4a2f3-107">A função CryptoAPI [**CertRegisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) adiciona um novo repositório físico a uma coleção de armazenamento do sistema.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-107">The CryptoAPI function [**CertRegisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) adds a new physical store to a system store collection.</span></span> <span data-ttu-id="4a2f3-108">[**CertUnregisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) Desassocia um repositório físico de um armazenamento de sistema lógico.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-108">[**CertUnregisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) disassociates a physical store from a logical system store.</span></span> <span data-ttu-id="4a2f3-109">O [**CertRegisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) cria um novo repositório do sistema em um HKEY do registro, enquanto o [**CertUnregisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) remove um repositório do sistema do registro.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-109">[**CertRegisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) creates a new system store under a registry hKey, while [**CertUnregisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) removes a system store from the registry.</span></span>

<span data-ttu-id="4a2f3-110">No CryptoAPI, os repositórios de sistema são repositórios lógicos com repositórios físicos associados.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-110">In CryptoAPI, system stores are logical stores with associated physical stores.</span></span> <span data-ttu-id="4a2f3-111">Todos os certificados em um armazenamento de sistema existente permanecem disponíveis e a adição física de novos certificados é feita nos armazenamentos físicos que compõem o armazenamento do sistema lógico.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-111">All the certificates in an existing system store remain available, and the physical addition of new certificates is made in the physical stores that make up the logical system store.</span></span>

<span data-ttu-id="4a2f3-112">Os usuários que preferem continuar a usar os armazenamentos físicos do sistema e não converter em repositórios lógicos podem abrir os repositórios do sistema com o provedor de registro do sistema do Prov do CERT \_ Store \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="4a2f3-112">Users who prefer to continue to use physical system stores and not convert to logical stores can open system stores with the CERT\_STORE\_PROV\_SYSTEM\_REGISTRY provider.</span></span> <span data-ttu-id="4a2f3-113">Esse provedor continuará a usar cada repositório do sistema como um repositório físico único.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-113">This provider will continue to use each system store as a single, physical store.</span></span>

<span data-ttu-id="4a2f3-114">As funções [**CertEnumSystemStoreLocation**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**CertEnumSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore)e [**CertEnumPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) listam locais de armazenamento do sistema, armazenamentos do sistema disponíveis e todos os repositórios físicos que são membros de um repositório do sistema.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-114">The functions [**CertEnumSystemStoreLocation**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**CertEnumSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore), and [**CertEnumPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) list system store locations, available system stores, and all physical stores that are members of a system store.</span></span>

<span data-ttu-id="4a2f3-115">Os repositórios do sistema também podem ser realocados.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-115">System stores can also be relocated.</span></span> <span data-ttu-id="4a2f3-116">Por padrão, um repositório do sistema é aberto em relação a uma subchave do registro após um padrão predefinido.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-116">By default, a system store is opened relative to a registry subkey following a predefined pattern.</span></span> <span data-ttu-id="4a2f3-117">Para obter mais informações, consulte [locais da loja do sistema](system-store-locations.md).</span><span class="sxs-lookup"><span data-stu-id="4a2f3-117">For more information, see [System Store Locations](system-store-locations.md).</span></span> <span data-ttu-id="4a2f3-118">A configuração \_ do \_ sinalizador de realocação do repositório do sistema de CERT \_ \_ no parâmetro *dwFlags* passado para [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) coloca um repositório do sistema no registro em uma subchave do Registro especificada pelo usuário em vez do predefinido.</span><span class="sxs-lookup"><span data-stu-id="4a2f3-118">Setting CERT\_SYSTEM\_STORE\_RELOCATE\_FLAG in the *dwFlags* parameter passed to [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) places a system store in the registry under a user-specified registry subkey instead of the predefined one.</span></span>

 

 



