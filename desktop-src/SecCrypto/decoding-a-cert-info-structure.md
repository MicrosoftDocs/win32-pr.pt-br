---
description: Dado um certificado, a primeira etapa na decodificação do BLOB de certificado é chamar CertCreateCertificateContext, passando um ponteiro para o certificado codificado (BLOB).
ms.assetid: b50530e2-15a0-4215-bf18-300cf67d1611
title: Decodificando uma estrutura de CERT_INFO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7178c9a5bcfc95a8e2945a6e381f0c2c29cf3b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104560085"
---
# <a name="decoding-a-cert_info-structure"></a><span data-ttu-id="f0c2a-103">Decodificando uma \_ estrutura de informações de certificado</span><span class="sxs-lookup"><span data-stu-id="f0c2a-103">Decoding a CERT\_INFO Structure</span></span>

<span data-ttu-id="f0c2a-104">Dado um certificado, a primeira etapa na decodificação do [*blob*](../secgloss/b-gly.md) de certificado é chamar [**CertCreateCertificateContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-certcreatecertificatecontext), passando um ponteiro para o certificado codificado (*blob*).</span><span class="sxs-lookup"><span data-stu-id="f0c2a-104">Given a certificate, the first step in decoding the certificate [*BLOB*](../secgloss/b-gly.md) is to call [**CertCreateCertificateContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-certcreatecertificatecontext), passing it a pointer to the encoded certificate (*BLOB*).</span></span> <span data-ttu-id="f0c2a-105">Quando essa função é chamada, ela cria uma duplicata do certificado codificado, cria uma estrutura do tipo [**\_ contexto de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context)e cria uma estrutura do tipo [**\_ informações de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info).</span><span class="sxs-lookup"><span data-stu-id="f0c2a-105">When this function is called, it creates a duplicate of the encoded certificate, creates a structure of type [**CERT\_CONTEXT**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_context), and creates a structure of type [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info).</span></span> <span data-ttu-id="f0c2a-106">Conforme mostrado na ilustração a seguir, um [*contexto de certificado*](../secgloss/c-gly.md) inclui o *blob* de certificado original, uma estrutura c do tipo **\_ contexto** de certificado e uma estrutura c do tipo **\_ informações de certificado**.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-106">As shown in the following illustration, a [*certificate context*](../secgloss/c-gly.md) includes the original certificate *BLOB*, a C structure of type **CERT\_CONTEXT**, and a C structure of type **CERT\_INFO**.</span></span> <span data-ttu-id="f0c2a-107">Um dos membros da estrutura de **\_ contexto de certificado** aponta para a estrutura de **\_ informações de certificado** e outro para o blob de certificado codificado.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-107">One of the members of the **CERT\_CONTEXT** structure points to the **CERT\_INFO** structure and another to the encoded certificate BLOB.</span></span>

![contexto do certificado](images/certcntx.png)

<span data-ttu-id="f0c2a-109">O objeto codificado (membro de dados) sempre é fornecido como a entrada para a função [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) , e a saída é uma estrutura C que pode ou não ter membros codificados, dependendo do seu processo.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-109">The encoded object (data member) is always provided as the input to the [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) function, and the output is a C structure that may or may not have encoded members, depending on how far into the process you are.</span></span>

<span data-ttu-id="f0c2a-110">Há um outro membro que requer alguma decodificação, que é o membro de **extensão** .</span><span class="sxs-lookup"><span data-stu-id="f0c2a-110">There is one other member that requires some decoding, and that is the **Extension** member.</span></span> <span data-ttu-id="f0c2a-111">Embora não esteja codificado no nível de [**\_ informações de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) , ele contém algumas informações codificadas.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-111">Although it is not encoded at the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) level, it does contain some encoded information.</span></span> <span data-ttu-id="f0c2a-112">Para decodificar essas informações, prossiga conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-112">To decode this information, proceed as shown in the following illustration.</span></span>

![decodificando informações](images/xtension.png)

<span data-ttu-id="f0c2a-114">Na estrutura [**de \_ informações de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) , o membro **rgExtension** é um ponteiro para uma matriz de estruturas de [**\_ extensão de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="f0c2a-114">In the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure, member **rgExtension** is a pointer to an array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span> <span data-ttu-id="f0c2a-115">Cada estrutura de **\_ extensão de certificado** tem um membro de **valor** que está na forma codificada e precisa ser decodificada.</span><span class="sxs-lookup"><span data-stu-id="f0c2a-115">Each **CERT\_EXTENSION** structure has a **Value** member that is in encoded form and needs to be decoded.</span></span> <span data-ttu-id="f0c2a-116">O membro de **valor** é passado para a função [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) e, em seguida, a saída da função depende do valor do membro **pszObjId** .</span><span class="sxs-lookup"><span data-stu-id="f0c2a-116">The **Value** member is passed to the [**CryptDecodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptdecodeobject) function, and then the output from the function depends on the value of the **pszObjId** member.</span></span> <span data-ttu-id="f0c2a-117">Observe que, na ilustração, duas estruturas diferentes são produzidas, uma das [**\_ informações de \_ restrições \_ básicas de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) de tipo e uma das informações de ID de chave de autoridade de certificação de tipo, dependendo do valor de **pszObjId**. [**\_ \_ \_ \_**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_authority_key_id_info)</span><span class="sxs-lookup"><span data-stu-id="f0c2a-117">Notice that in the illustration, two different structures are produced, one of type [**CERT\_BASIC\_CONSTRAINTS\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) and one of type [**CERT\_AUTHORITY\_KEY\_ID\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_authority_key_id_info), depending on the value of **pszObjId**.</span></span>

 

 
