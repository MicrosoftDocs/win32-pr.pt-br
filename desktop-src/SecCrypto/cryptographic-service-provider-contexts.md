---
description: A primeira função CryptoAPI chamada por um aplicativo que usa APIs de criptografia é a função CryptAcquireContext.
ms.assetid: ad1ff45c-7d02-431b-a287-e9db765476ce
title: Contextos do provedor de serviços de criptografia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df20df528b0ba0c385c7ab690436351d918f1521
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090196"
---
# <a name="cryptographic-service-provider-contexts"></a><span data-ttu-id="e175c-103">Contextos do provedor de serviços de criptografia</span><span class="sxs-lookup"><span data-stu-id="e175c-103">Cryptographic Service Provider Contexts</span></span>

<span data-ttu-id="e175c-104">A primeira função [*CryptoAPI*](../secgloss/c-gly.md) chamada por um aplicativo que usa APIs de criptografia é a função [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) .</span><span class="sxs-lookup"><span data-stu-id="e175c-104">The first [*CryptoAPI*](../secgloss/c-gly.md) function called by an application that uses any cryptographic APIs is the [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) function.</span></span> <span data-ttu-id="e175c-105">Essa função retorna um identificador para um CSP específico que inclui a especificação de um [*contêiner de chave*](../secgloss/k-gly.md) específico dentro do CSP.</span><span class="sxs-lookup"><span data-stu-id="e175c-105">This function returns a handle to a particular CSP which includes the specification of a particular [*key container*](../secgloss/k-gly.md) within the CSP.</span></span> <span data-ttu-id="e175c-106">Esse contêiner de chave é um contêiner de chave especificamente solicitado ou é o contêiner de chave padrão para o usuário conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="e175c-106">This key container is either a specifically requested key container or it is the default key container for the currently logged-on user.</span></span>

<span data-ttu-id="e175c-107">[**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) também pode criar um novo contêiner de chave.</span><span class="sxs-lookup"><span data-stu-id="e175c-107">[**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) can also create a new key container.</span></span> <span data-ttu-id="e175c-108">Para obter mais informações, consulte [exemplo c programa: Criando um contêiner de chave e gerando chaves](example-c-program-creating-a-key-container-and-generating-keys.md) e [programa c de exemplo: usando CryptAcquireContext](example-c-program-using-cryptacquirecontext.md).</span><span class="sxs-lookup"><span data-stu-id="e175c-108">For more information, see [Example C Program: Creating a Key Container and Generating Keys](example-c-program-creating-a-key-container-and-generating-keys.md) and [Example C Program: Using CryptAcquireContext](example-c-program-using-cryptacquirecontext.md).</span></span>

<span data-ttu-id="e175c-109">Um CSP ( [*provedor de serviços de criptografia*](../secgloss/c-gly.md) ) tem um nome e um tipo.</span><span class="sxs-lookup"><span data-stu-id="e175c-109">A [*cryptographic service provider*](../secgloss/c-gly.md) (CSP) has both a name and a type.</span></span> <span data-ttu-id="e175c-110">Por exemplo, o nome de um dos CSPs fornecidos no momento com o sistema operacional é o [provedor criptográfico base da Microsoft](microsoft-base-cryptographic-provider.md).</span><span class="sxs-lookup"><span data-stu-id="e175c-110">For example, the name of one of the CSPs currently shipped with the operating system is [Microsoft Base Cryptographic Provider](microsoft-base-cryptographic-provider.md).</span></span> <span data-ttu-id="e175c-111">É um provedor de tipo [ \_ \_ completo RSA de Prov](prov-rsa-full.md) .</span><span class="sxs-lookup"><span data-stu-id="e175c-111">It is a [PROV\_RSA\_FULL](prov-rsa-full.md) type provider.</span></span> <span data-ttu-id="e175c-112">O nome de cada provedor é exclusivo; o tipo de provedor não é.</span><span class="sxs-lookup"><span data-stu-id="e175c-112">The name of each provider is unique; the provider type is not.</span></span>

<span data-ttu-id="e175c-113">Quando um aplicativo chama [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) para obter um identificador CSP, ele especifica um tipo de provedor e, opcionalmente, um nome de provedor.</span><span class="sxs-lookup"><span data-stu-id="e175c-113">When an application calls [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) to obtain a CSP handle, it specifies a provider type and, optionally, a provider name.</span></span> <span data-ttu-id="e175c-114">Se um tipo e um nome forem especificados, a função carregará o CSP com o tipo de provedor e o nome do provedor correspondentes.</span><span class="sxs-lookup"><span data-stu-id="e175c-114">If both a type and a name are specified, the function loads the CSP with the matching provider type and provider name.</span></span> <span data-ttu-id="e175c-115">A função retorna o identificador do CSP que fornece acesso ao CSP e a um contêiner de [*chave*](../secgloss/k-gly.md) no CSP.</span><span class="sxs-lookup"><span data-stu-id="e175c-115">The function returns the CSP's handle which provides access to both the CSP and to a [*key container*](../secgloss/k-gly.md) within the CSP.</span></span>

<span data-ttu-id="e175c-116">Quando um aplicativo chama [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) e especifica um tipo de provedor, mas nenhum nome de provedor, a função procura um provedor nomeado, primeiro verificando uma lista de provedores nomeados padrão associados ao usuário conectado e, se isso falhar, de uma lista de provedores nomeados padrão associados ao computador.</span><span class="sxs-lookup"><span data-stu-id="e175c-116">When an application calls [**CryptAcquireContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptacquirecontexta) and specifies a provider type but no provider name, the function looks for a named provider, first checking a list of default named providers associated with the logged-on user and, if that fails, from a list of default named providers associated with the computer.</span></span> <span data-ttu-id="e175c-117">Depois que o nome do provedor tiver sido determinado, a função **CryptAcquireContext** pesquisará o CSP desse provedor, o carregará e retornará seu identificador.</span><span class="sxs-lookup"><span data-stu-id="e175c-117">After the provider name has been determined, the **CryptAcquireContext** function searches for the CSP for that provider, loads it, and returns its handle.</span></span>

<span data-ttu-id="e175c-118">Quando você terminar de usar um identificador CSP, libere-o chamando a função [**CryptReleaseContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="e175c-118">When you have finished using a CSP handle, release it by calling the [**CryptReleaseContext**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptreleasecontext) function.</span></span>

 

 
