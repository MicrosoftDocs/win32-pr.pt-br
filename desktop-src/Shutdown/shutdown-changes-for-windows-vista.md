---
description: A tabela a seguir resume as diferenças entre o desligamento no Windows Vista e no Windows XP.
ms.assetid: da7985d2-85c8-47e1-a172-c9e92f450e24
title: Alterações de desligamento do Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e04bb20099349ce378384cf01c39e53ca03a896
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104011073"
---
# <a name="shutdown-changes-for-windows-vista"></a><span data-ttu-id="997e2-103">Alterações de desligamento do Windows Vista</span><span class="sxs-lookup"><span data-stu-id="997e2-103">Shutdown Changes for Windows Vista</span></span>

<span data-ttu-id="997e2-104">A tabela a seguir resume as diferenças entre o desligamento no Windows Vista e no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="997e2-104">The following table summarizes the differences between shutdown on Windows Vista and Windows XP.</span></span>



| <span data-ttu-id="997e2-105">Recurso</span><span class="sxs-lookup"><span data-stu-id="997e2-105">Feature</span></span>                 | <span data-ttu-id="997e2-106">Windows XP</span><span class="sxs-lookup"><span data-stu-id="997e2-106">Windows XP</span></span>                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="997e2-107">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="997e2-107">Windows Vista</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="997e2-108">Desligando o bloqueio</span><span class="sxs-lookup"><span data-stu-id="997e2-108">Blocking shutdown</span></span>       | <span data-ttu-id="997e2-109">Os aplicativos podem atrasar a resposta ao [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) por 5 segundos e, em seguida, o sistema permite que o usuário encerre o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="997e2-109">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> <span data-ttu-id="997e2-110">Os aplicativos que retornam **true** em resposta ao **WM \_ QUERYENDSESSION** podem atrasar a resposta ao [**WM \_ EndSession**](wm-endsession.md) por 5 segundos, então o sistema permite que o usuário encerre o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="997e2-110">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> | <span data-ttu-id="997e2-111">Os aplicativos podem atrasar a resposta ao [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) por 5 segundos e, em seguida, o sistema permite que o usuário continue ou cancele o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-111">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span> <span data-ttu-id="997e2-112">Os aplicativos que retornam **true** em resposta ao **WM \_ QUERYENDSESSION** podem atrasar a resposta ao [**WM \_ EndSession**](wm-endsession.md) por 5 segundos, então o sistema permite que o usuário continue ou cancele o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-112">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span>                                                                                                      |
| <span data-ttu-id="997e2-113">Cancelando o desligamento</span><span class="sxs-lookup"><span data-stu-id="997e2-113">Canceling shutdown</span></span>      | <span data-ttu-id="997e2-114">Se um aplicativo retornar **false** em resposta ao [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), o desligamento será cancelado na maioria dos casos.</span><span class="sxs-lookup"><span data-stu-id="997e2-114">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), shutdown is canceled in most cases.</span></span> <span data-ttu-id="997e2-115">No entanto, nenhuma interface do usuário é exibida e, portanto, talvez ele não esteja ciente de que o desligamento foi cancelado.</span><span class="sxs-lookup"><span data-stu-id="997e2-115">However, no UI is displayed, so the user may not be aware that shutdown has been canceled.</span></span>                                                                                                                                                      | <span data-ttu-id="997e2-116">Se um aplicativo retornar **false** em resposta ao [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), ele ainda aparecerá na interface do usuário de desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-116">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), it still appears in the shutdown UI.</span></span> <span data-ttu-id="997e2-117">Observe que o sistema não permite aplicativos de console ou aplicativos sem uma janela visível para cancelar o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-117">Note that the system does not allow console applications or applications without a visible window to cancel shutdown.</span></span> <span data-ttu-id="997e2-118">Esses aplicativos serão encerrados automaticamente se não responderem ao **WM \_ QUERYENDSESSION** ou ao [**WM \_ EndSession**](wm-endsession.md) dentro de 5 segundos ou se eles retornarem **falsos** em resposta ao **WM \_ QUERYENDSESSION**.</span><span class="sxs-lookup"><span data-stu-id="997e2-118">These applications are automatically terminated if they do not respond to **WM\_QUERYENDSESSION** or [**WM\_ENDSESSION**](wm-endsession.md) within 5 seconds or if they return **FALSE** in response to **WM\_QUERYENDSESSION**.</span></span> |
| <span data-ttu-id="997e2-119">Desligar interface do usuário</span><span class="sxs-lookup"><span data-stu-id="997e2-119">Shutdown user interface</span></span> | <span data-ttu-id="997e2-120">O sistema exibe uma caixa de diálogo para cada aplicativo que bloqueia o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-120">The system displays a dialog box for each application blocking shutdown.</span></span> <span data-ttu-id="997e2-121">Se o usuário clicar no botão **terminar agora** , o aplicativo será encerrado.</span><span class="sxs-lookup"><span data-stu-id="997e2-121">If the user click the **End Now** button, the application is terminated.</span></span> <span data-ttu-id="997e2-122">Se o usuário clicar no botão **Cancelar** , o desligamento será cancelado e o aplicativo continuará a ser executado.</span><span class="sxs-lookup"><span data-stu-id="997e2-122">If the user clicks the **Cancel** button, shutdown is canceled and the application continues to run.</span></span>                                                                                                                                    | <span data-ttu-id="997e2-123">O sistema exibe uma interface do usuário de tela inteira que identifica todos os aplicativos que bloqueiam o desligamento e seus motivos para fazer isso (se eles tiverem registrado um motivo usando [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span><span class="sxs-lookup"><span data-stu-id="997e2-123">The system displays a full-screen UI that identifies all applications blocking shutdown and their reasons for doing so (if they have registered a reason using [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span></span>                                                                                                                                                                                                                                                                    |



 

## <a name="best-practices"></a><span data-ttu-id="997e2-124">Práticas Recomendadas</span><span class="sxs-lookup"><span data-stu-id="997e2-124">Best Practices</span></span>

-   <span data-ttu-id="997e2-125">Os aplicativos não devem bloquear o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-125">Applications should not block shutdown.</span></span> <span data-ttu-id="997e2-126">Responda ao [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) o mais rápido possível e adie as atividades de limpeza até processar a mensagem de [**\_ EndSession do WM**](wm-endsession.md) .</span><span class="sxs-lookup"><span data-stu-id="997e2-126">Respond to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) as quickly as possible and postpone cleanup activities until processing the [**WM\_ENDSESSION**](wm-endsession.md) message.</span></span>
-   <span data-ttu-id="997e2-127">Os aplicativos que devem bloquear o desligamento devem usar a nova função [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) para registrar uma cadeia de caracteres que explica o motivo do usuário.</span><span class="sxs-lookup"><span data-stu-id="997e2-127">Applications that must block shutdown should use the new [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) function to register a string that explains the reason to the user.</span></span> <span data-ttu-id="997e2-128">O usuário pode decidir se deseja continuar ou cancelar o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-128">The user can decide whether to continue or cancel shutdown.</span></span>
-   <span data-ttu-id="997e2-129">Os aplicativos não podem contar com a capacidade de bloquear o desligamento.</span><span class="sxs-lookup"><span data-stu-id="997e2-129">Applications cannot rely on being able to block shutdown.</span></span>

 

 



