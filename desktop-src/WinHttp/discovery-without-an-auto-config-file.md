---
description: Se um arquivo de configuração automática de proxy não tiver sido implantado na rede local, o WinHttpGetProxyForUrl não poderá localizar um servidor proxy.
ms.assetid: a170e63a-8586-47df-af5e-4ee3621795b2
title: Descoberta sem um arquivo de configuração automática
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b6a5ec281c2ef74e2a377cecbd30f16cbc49bd79
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105786300"
---
# <a name="discovery-without-an-auto-config-file"></a><span data-ttu-id="c7106-103">Descoberta sem um arquivo de configuração automática</span><span class="sxs-lookup"><span data-stu-id="c7106-103">Discovery Without an Auto-Config File</span></span>

<span data-ttu-id="c7106-104">Se um arquivo de configuração automática de proxy não tiver sido implantado na rede local, o [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) não poderá localizar um servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="c7106-104">If a proxy auto-configuration file has not been deployed on the local network, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) cannot find a proxy server.</span></span> <span data-ttu-id="c7106-105">Se **WinHttpGetProxyForUrl** falhar, haverá várias estratégias de retirada possíveis para obter uma configuração de proxy viável, dependendo de seu ambiente de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="c7106-105">If **WinHttpGetProxyForUrl** fails, there are several possible fall-back strategies for obtaining a viable proxy configuration, depending on its runtime environment.</span></span> <span data-ttu-id="c7106-106">Isso inclui solicitar a configuração de proxy por meio de uma interface do usuário, exigindo que alguém armazene a configuração de proxy no registro usando o utilitário "ProxyCfg.exe" do WinHTTP ou usando [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) para verificar se um servidor proxy está listado nas configurações do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="c7106-106">These include prompting for the proxy setting through a user interface, requiring someone to store the proxy configuration in the registry using the WinHTTP "ProxyCfg.exe" utility, or using [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) to check whether a proxy server is listed in Internet Explorer's settings.</span></span>

<span data-ttu-id="c7106-107">É possível que não haja nenhum arquivo de configuração automática de proxy porque o cliente tem uma conexão direta com a Internet, por exemplo, por meio de um ISP, e não precisa de um servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="c7106-107">It is possible that there is no proxy auto-configuration file because the client has a direct Internet connection, such as through an ISP, and does not need a proxy server.</span></span>

<span data-ttu-id="c7106-108">Um servidor proxy pode ser necessário, por outro lado, mas a rede local pode não oferecer suporte a WPAD.</span><span class="sxs-lookup"><span data-stu-id="c7106-108">A proxy server may be required, on the other hand, but the local network may not support WPAD.</span></span> <span data-ttu-id="c7106-109">Nesse caso, a configuração de proxy deve ser obtida do usuário ou encontrada em algum lugar no computador cliente.</span><span class="sxs-lookup"><span data-stu-id="c7106-109">In this case, the proxy configuration must be obtained from the user or found somewhere on the client machine.</span></span>

<span data-ttu-id="c7106-110">Um aplicativo baseado em WinHTTP em execução em um ambiente de servidor de camada intermediária, como um aplicativo COM+ ou ASP, deve contar com um administrador de servidor definindo uma configuração de proxy padrão no registro usando o utilitário "ProxyCfg.exe".</span><span class="sxs-lookup"><span data-stu-id="c7106-110">A WinHTTP-based application running in a middle-tier server environment, such as a COM+ or ASP application, should rely on a server administrator setting a default proxy configuration in the registry using the "ProxyCfg.exe" utility.</span></span> <span data-ttu-id="c7106-111">Essas informações de configuração padrão podem então ser recuperadas usando a função [**WinHttpGetDefaultProxyConfiguration**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetdefaultproxyconfiguration) ou simplesmente especificando o sinalizador de **\_ \_ \_ configuração do tipo de acesso WinHTTP** na chamada [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="c7106-111">This default configuration information can then be retrieved either by using the [**WinHttpGetDefaultProxyConfiguration**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetdefaultproxyconfiguration) function, or simply by specifying the **WINHTTP\_ACCESS\_TYPE\_PRECONFIG** flag in the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) call.</span></span>

<span data-ttu-id="c7106-112">Por outro lado, um aplicativo WinHTTP em execução em um computador desktop cliente pode tentar examinar as configurações de proxy do Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="c7106-112">On the other hand, a WinHTTP application running on a client desktop machine can attempt to examine Internet Explorer's proxy settings.</span></span> <span data-ttu-id="c7106-113">O [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) preenche uma estrutura de [**\_ \_ \_ \_ \_ configuração de proxy do usuário atual do WinHTTP**](/windows/win32/api/winhttp/ns-winhttp-winhttp_current_user_ie_proxy_config) , fornecida pelo chamador, com as configurações de proxy do Internet Explorer do usuário atual para a conexão ativa atual (dial-up, VPN ou LAN).</span><span class="sxs-lookup"><span data-stu-id="c7106-113">[**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) fills in a caller-supplied [**WINHTTP\_CURRENT\_USER\_IE\_PROXY\_CONFIG**](/windows/win32/api/winhttp/ns-winhttp-winhttp_current_user_ie_proxy_config) structure with the current user's Internet Explorer proxy settings for the current active connection (dial-up, VPN or LAN).</span></span> <span data-ttu-id="c7106-114">Essa configuração pode indicar que a detecção automática é usada, ou pode especificar uma URL para um arquivo de configuração automática de proxy, ou pode especificar um servidor proxy real a ser usado, ou pode especificar uma combinação dos três.</span><span class="sxs-lookup"><span data-stu-id="c7106-114">This configuration may indicate that auto-detection is used, or it may specify a URL for a proxy auto-configuration file, or it may specify an actual proxy server to use, or it may specify a combination of the three.</span></span> <span data-ttu-id="c7106-115">Se essas informações incluírem uma URL PAC ou um servidor proxy, o aplicativo WinHTTP poderá tentar usá-la.</span><span class="sxs-lookup"><span data-stu-id="c7106-115">If this information includes a PAC URL or a proxy server, the WinHTTP application can try using those.</span></span>

<span data-ttu-id="c7106-116">Um exemplo que usa as funções [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) e [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) pode ser encontrado nos exemplos de WinHTTP do SDK (Software Development Kit) da plataforma.</span><span class="sxs-lookup"><span data-stu-id="c7106-116">A sample that uses the [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) and [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) functions can be found in the Platform Software Development Kit (SDK) WinHTTP samples.</span></span>

 

 



