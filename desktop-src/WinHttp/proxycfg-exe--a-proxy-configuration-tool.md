---
description: Este tópico explica o uso da ferramenta de configuração de proxy do Microsoft Windows HTTP Services (WinHTTP), &\# 0034; ProxyCfg.exe&\# 0034;.
ms.assetid: f96adf59-59be-414e-ad6f-9eac05f4b975
title: Ferramentas de Configuração de proxy de Netsh.exe e ProxyCfg.exe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 96a33e832d324a5863652673b8e25725fba72e88
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501247"
---
# <a name="netshexe-and-proxycfgexe-proxy-configuration-tools"></a><span data-ttu-id="eded7-103">Ferramentas de Configuração de proxy de Netsh.exe e ProxyCfg.exe</span><span class="sxs-lookup"><span data-stu-id="eded7-103">Netsh.exe and ProxyCfg.exe Proxy Configuration Tools</span></span>

<span data-ttu-id="eded7-104">\* \* Windows Vista e Windows Server 2008: \* \*</span><span class="sxs-lookup"><span data-stu-id="eded7-104">\*\*Windows Vista and Windows Server 2008:  \*\*</span></span>

<span data-ttu-id="eded7-105">ProxyCfg.exe foi preterido.</span><span class="sxs-lookup"><span data-stu-id="eded7-105">ProxyCfg.exe has been deprecated.</span></span> <span data-ttu-id="eded7-106">Ele é substituído pelos comandos [Netsh.exe WinHTTP](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731131(v=ws.10)) .</span><span class="sxs-lookup"><span data-stu-id="eded7-106">It is replaced by the [Netsh.exe winhttp](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731131(v=ws.10)) commands.</span></span>

<span data-ttu-id="eded7-107">Este tópico explica o uso da ferramenta de configuração de proxy do [Microsoft Windows http Services (WinHTTP)](about-winhttp.md) , "ProxyCfg.exe".</span><span class="sxs-lookup"><span data-stu-id="eded7-107">This topic explains the use of the [Microsoft Windows HTTP Services (WinHTTP)](about-winhttp.md) proxy configuration tool, "ProxyCfg.exe".</span></span>

<span data-ttu-id="eded7-108">Há duas maneiras de acessar servidores HTTP e HTTPS (protocolo de transferência de hipertexto) seguros por meio de um proxy usando o Microsoft Windows HTTP Services (WinHTTP).</span><span class="sxs-lookup"><span data-stu-id="eded7-108">There are two ways to access HTTP and Secure Hypertext Transfer Protocol (HTTPS) servers through a proxy using Microsoft Windows HTTP Services (WinHTTP).</span></span> <span data-ttu-id="eded7-109">Primeiro, você pode especificar as configurações de proxy de dentro de seu aplicativo WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="eded7-109">First, you can specify proxy settings from within your WinHTTP application.</span></span> <span data-ttu-id="eded7-110">Em segundo lugar, você pode especificar as configurações de proxy padrão de fora do seu aplicativo usando o utilitário de configuração de proxy localizado no diretório% windir% \\ System32.</span><span class="sxs-lookup"><span data-stu-id="eded7-110">Second, you can specify default proxy settings from outside your application using the proxy configuration utility located in the %windir%\\system32 directory.</span></span>

<span data-ttu-id="eded7-111">Você pode definir programaticamente os dados de proxy de dentro de seu aplicativo ou script.</span><span class="sxs-lookup"><span data-stu-id="eded7-111">You can programmatically set the proxy data from within your application or script.</span></span> <span data-ttu-id="eded7-112">Se você estiver escrevendo um aplicativo usando a API do WinHTTP, use uma das duas técnicas a seguir para alterar as configurações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-112">If you are writing an application using the WinHTTP API, use one of the following two techniques to change proxy settings.</span></span>

-   <span data-ttu-id="eded7-113">Use a função [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="eded7-113">Use the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) function.</span></span> <span data-ttu-id="eded7-114">Especifique o tipo de acesso no segundo parâmetro, o nome do proxy no terceiro parâmetro e uma lista de bypass no quarto parâmetro.</span><span class="sxs-lookup"><span data-stu-id="eded7-114">Specify access type in the second parameter, the name of the proxy in the third parameter, and a bypass list in the fourth parameter.</span></span> <span data-ttu-id="eded7-115">O exemplo a seguir mostra como a função [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) pode ser usada para definir dados de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-115">The following example shows how the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) function can be used to set proxy data.</span></span>

    ``` syntax
    hSession = WinHttpOpen( L"WinHTTP Example/1.0",  
                            WINHTTP_ACCESS_TYPE_NAMED_PROXY,
                            L"proxy_name", 
                            L"<local>", 
                            0);
    ```

-   <span data-ttu-id="eded7-116">Use a função [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) .</span><span class="sxs-lookup"><span data-stu-id="eded7-116">Use the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function.</span></span> <span data-ttu-id="eded7-117">O sinalizador de [**\_ \_ proxy de opção WinHTTP**](option-flags.md) permite que você especifique as configurações de proxy com uma estrutura de [**\_ \_ informações de proxy WinHTTP**](/windows/win32/api/winhttp/ns-winhttp-winhttp_proxy_info) .</span><span class="sxs-lookup"><span data-stu-id="eded7-117">The [**WINHTTP\_OPTION\_PROXY**](option-flags.md) flag enables you to specify proxy settings with a [**WINHTTP\_PROXY\_INFO**](/windows/win32/api/winhttp/ns-winhttp-winhttp_proxy_info) structure.</span></span> <span data-ttu-id="eded7-118">O código de exemplo a seguir mostra como a função [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) pode ser usada para definir dados de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-118">The following example code shows how the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function can be used to set proxy data.</span></span>

    ``` syntax
    WINHTTP_PROXY_INFO proxyInfo;
    proxyInfo.dwAccessType = WINHTTP_ACCESS_TYPE_NAMED_PROXY;
    proxyInfo.lpszProxy = L"proxy_name";
    proxyInfo.lpszProxyBypass = L"<local>";
        
    // Set the proxy information for this session.
    WinHttpSetOption( hSession, 
                      WINHTTP_OPTION_PROXY, 
                      &proxyInfo, 
                      sizeof(proxyInfo));
    ```

<span data-ttu-id="eded7-119">Se você estiver escrevendo um script ou um aplicativo usando o objeto [**WinHttpRequest**](winhttprequest.md) , use a técnica a seguir para alterar as configurações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-119">If you are writing a script or an application using the [**WinHttpRequest**](winhttprequest.md) object, use the following technique to change proxy settings.</span></span>

-   <span data-ttu-id="eded7-120">Use o método [**SetProxy**](iwinhttprequest-setproxy.md) .</span><span class="sxs-lookup"><span data-stu-id="eded7-120">Use the [**SetProxy**](iwinhttprequest-setproxy.md) method.</span></span> <span data-ttu-id="eded7-121">Especifique o tipo de acesso no primeiro parâmetro, o nome do proxy no segundo parâmetro e uma lista de bypass no terceiro parâmetro.</span><span class="sxs-lookup"><span data-stu-id="eded7-121">Specify the access type in the first parameter, the name of the proxy in the second parameter, and a bypass list in the third parameter.</span></span> <span data-ttu-id="eded7-122">O exemplo a seguir mostra como o método [**SetProxy**](iwinhttprequest-setproxy.md) pode ser usado no script para definir dados de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-122">The following example shows how the [**SetProxy**](iwinhttprequest-setproxy.md) method can be used in script to set proxy data.</span></span>

    ``` syntax
    WinHttpReq.SetProxy( HTTPREQUEST_PROXYSETTING_PROXY, 
                         "proxy_server:80", 
                         "*.microsoft.com");
    ```

<span data-ttu-id="eded7-123">Para especificar as configurações padrão e eliminar a necessidade de usar o método [**SetProxy**](iwinhttprequest-setproxy.md) ou a função [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , use o utilitário de configuração de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-123">To specify default settings and eliminate the need to use either the [**SetProxy**](iwinhttprequest-setproxy.md) method or the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, use the proxy configuration utility.</span></span> <span data-ttu-id="eded7-124">Usando esse utilitário, você pode especificar que seu aplicativo acesse uma rede diretamente, por meio de um proxy ou por meio de uma combinação de acesso direto e de proxy, especificando uma lista de bypass.</span><span class="sxs-lookup"><span data-stu-id="eded7-124">Using this utility, you can specify that your application access a network either directly, through a proxy, or through a combination of direct and proxy access by specifying a bypass list.</span></span> <span data-ttu-id="eded7-125">Quando você usa a API do WinHTTP, a ferramenta de configuração de proxy determina apenas as configurações quando você passa o sinalizador **padrão de \_ tipo de acesso \_ \_ WinHTTP** para a API [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="eded7-125">When you use the WinHTTP API, the proxy configuration tool only determines the settings when you pass the **WINHTTP\_ACCESS\_TYPE\_DEFAULT** flag to the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) API.</span></span> <span data-ttu-id="eded7-126">O objeto [**WinHttpRequest**](winhttprequest.md) usa as configurações da ferramenta de configuração de proxy por padrão.</span><span class="sxs-lookup"><span data-stu-id="eded7-126">The [**WinHttpRequest**](winhttprequest.md) object uses the proxy configuration tool settings by default.</span></span>

<span data-ttu-id="eded7-127">As configurações de proxy para WinHTTP não são as configurações de proxy do Microsoft Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="eded7-127">The proxy settings for WinHTTP are not the proxy settings for Microsoft Internet Explorer.</span></span> <span data-ttu-id="eded7-128">Você não pode definir as configurações de proxy para WinHTTP no painel de controle do Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="eded7-128">You cannot configure the proxy settings for WinHTTP in the Microsoft Windows Control Panel.</span></span> <span data-ttu-id="eded7-129">Usar o utilitário de configuração de proxy WinHTTP não altera as configurações usadas para o Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="eded7-129">Using the WinHTTP proxy configuration utility does not alter the settings you use for Internet Explorer.</span></span>

> [!Note]  
> <span data-ttu-id="eded7-130">Se você tentar abrir e enviar uma solicitação HTTP usando o WinHTTP e as configurações de proxy estiverem incorretas, ocorrerá um erro.</span><span class="sxs-lookup"><span data-stu-id="eded7-130">If you attempt to open and send an HTTP request using WinHTTP and the proxy settings are incorrect, an error occurs.</span></span>

 

## <a name="command-line-parameters"></a><span data-ttu-id="eded7-131">Parâmetros de linha de comando</span><span class="sxs-lookup"><span data-stu-id="eded7-131">Command Line Parameters</span></span>

<span data-ttu-id="eded7-132">A tabela a seguir lista os parâmetros de linha de comando disponíveis para uso com a ferramenta ProxyCfg.exe.</span><span class="sxs-lookup"><span data-stu-id="eded7-132">The following table lists the command line parameters available for use with the ProxyCfg.exe tool.</span></span>



| <span data-ttu-id="eded7-133">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="eded7-133">Parameter</span></span> | <span data-ttu-id="eded7-134">Descrição</span><span class="sxs-lookup"><span data-stu-id="eded7-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="eded7-135">nenhum</span><span class="sxs-lookup"><span data-stu-id="eded7-135">none</span></span>      | <span data-ttu-id="eded7-136">Quando nenhum parâmetro é especificado, as configurações de proxy do WinHTTP atuais são exibidas.</span><span class="sxs-lookup"><span data-stu-id="eded7-136">When no parameters are specified, the current WinHTTP proxy settings are displayed.</span></span>                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="eded7-137">?</span><span class="sxs-lookup"><span data-stu-id="eded7-137">?</span></span>         | <span data-ttu-id="eded7-138">As informações de ajuda são exibidas.</span><span class="sxs-lookup"><span data-stu-id="eded7-138">Help information is displayed.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="eded7-139">d</span><span class="sxs-lookup"><span data-stu-id="eded7-139">d</span></span>         | <span data-ttu-id="eded7-140">Especifica que os aplicativos WinHTTP acessam a rede diretamente, sem um proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-140">Specifies that WinHTTP applications access the network directly, without a proxy.</span></span>                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="eded7-141">p</span><span class="sxs-lookup"><span data-stu-id="eded7-141">p</span></span>         | <span data-ttu-id="eded7-142">Especifica o servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-142">Specifies the proxy server.</span></span> <span data-ttu-id="eded7-143">Você também pode especificar uma lista opcional de servidores que são acessados sem um proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-143">You can also specify an optional list of servers that are accessed without a proxy.</span></span>                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="eded7-144">u</span><span class="sxs-lookup"><span data-stu-id="eded7-144">u</span></span>         | <span data-ttu-id="eded7-145">Especifica que os aplicativos WinHTTP usam as configurações de proxy do usuário atual para o Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="eded7-145">Specifies that WinHTTP applications use the current user's proxy settings for Internet Explorer.</span></span> <span data-ttu-id="eded7-146">Esse parâmetro não funcionará se o Internet Explorer estiver detectando automaticamente as configurações de proxy ou se estiver usando uma URL de configuração automática para definir as informações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-146">This parameter does not work if Internet Explorer is automatically detecting proxy settings, or if it is using an automatic configuration URL to set the proxy information.</span></span>                                                                                                                                                      |
| <span data-ttu-id="eded7-147">i</span><span class="sxs-lookup"><span data-stu-id="eded7-147">i</span></span>         | <span data-ttu-id="eded7-148">Especifica que os aplicativos WinHTTP usam as configurações de proxy do usuário atual para o Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="eded7-148">Specifies that WinHTTP applications use the current user's proxy settings for Internet Explorer.</span></span> <span data-ttu-id="eded7-149">Isso só funciona quando ProxyCfg.exe não foi usado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="eded7-149">This only works when ProxyCfg.exe was not previously used.</span></span> <span data-ttu-id="eded7-150">Se ProxyCfg.exe estiver instalado, especifique que o parâmetro de linha de comando "u" Use as configurações manuais.</span><span class="sxs-lookup"><span data-stu-id="eded7-150">If ProxyCfg.exe is installed, specify that the "u" command line parameter use the manual settings.</span></span> <span data-ttu-id="eded7-151">Esse parâmetro não funcionará se o Internet Explorer detectar automaticamente as configurações de proxy ou se usar uma URL de configuração automática para definir as informações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-151">This parameter does not work if Internet Explorer automatically detects proxy settings, or if it uses an automatic configuration URL to set the proxy information.</span></span> |



 

<span data-ttu-id="eded7-152">Você pode especificar proxies em uma cadeia de caracteres delimitada por espaço.</span><span class="sxs-lookup"><span data-stu-id="eded7-152">You can specify proxies in a space-delimited string.</span></span> <span data-ttu-id="eded7-153">As listagens de proxy podem conter o número da porta usado para acessar o proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-153">The proxy listings can contain the port number that is used to access the proxy.</span></span> <span data-ttu-id="eded7-154">Para listar um proxy para um protocolo específico, a cadeia de caracteres deve seguir o formato, <protocol> = https://<nome do proxy \_>.</span><span class="sxs-lookup"><span data-stu-id="eded7-154">To list a proxy for a specific protocol, the string must follow the format, <protocol>=https://<proxy\_name>.</span></span> <span data-ttu-id="eded7-155">Os protocolos válidos são HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eded7-155">The valid protocols are HTTP and HTTPS.</span></span> <span data-ttu-id="eded7-156">Por exemplo, para listar um proxy HTTP, uma cadeia de caracteres válida é http = https://http\_proxy\_name:80 , em que o \_ \_ nome do proxy http é o nome do servidor proxy e 80 é o número da porta que você deve usar para acessar o proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-156">For example, to list an HTTP proxy, a valid string is http=https://http\_proxy\_name:80, where http\_proxy\_name is the name of the proxy server and 80 is the port number that you must use to access the proxy.</span></span> <span data-ttu-id="eded7-157">Se o proxy usar o número da porta padrão para esse protocolo, você poderá omitir o número da porta.</span><span class="sxs-lookup"><span data-stu-id="eded7-157">If the proxy uses the default port number for that protocol, then you can omit the port number.</span></span> <span data-ttu-id="eded7-158">Se um nome de proxy estiver listado por si só, você poderá usá-lo como o proxy padrão para qualquer protocolo que não tenha um proxy especificado.</span><span class="sxs-lookup"><span data-stu-id="eded7-158">If a proxy name is listed by itself, you can use it as the default proxy for any protocols that do not have a specified proxy.</span></span> <span data-ttu-id="eded7-159">Por exemplo, http = https://http\_proxy outro \_ proxy usa \_ proxy http para qualquer operação http, enquanto o protocolo HTTPS usa o proxy chamado outro \_ proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-159">For example, http=https://http\_proxy other\_proxy uses http\_proxy for any HTTP operations, while the HTTPS protocol uses the proxy named other\_proxy.</span></span>

<span data-ttu-id="eded7-160">Você pode listar os nomes de host ou endereços IP conhecidos localmente na lista de bypass de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-160">You can list locally known host names or IP addresses in the proxy bypass list.</span></span> <span data-ttu-id="eded7-161">Essa lista pode conter curingas, como " \* ", que fazem com que o aplicativo ignore o servidor proxy para endereços que se ajustam ao padrão especificado, por exemplo, " \* . Microsoft.com" ou " \* . org".</span><span class="sxs-lookup"><span data-stu-id="eded7-161">This list can contain wildcards, such as "\*", that cause the application to bypass the proxy server for addresses that fit the specified pattern, for example, "\*.microsoft.com" or "\*.org".</span></span> <span data-ttu-id="eded7-162">Os caracteres curinga devem ser os caracteres mais à esquerda na lista.</span><span class="sxs-lookup"><span data-stu-id="eded7-162">Wildcard characters must be the left-most characters in the list.</span></span> <span data-ttu-id="eded7-163">Por exemplo, "AAA \* ". Não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="eded7-163">For example, "aaa.\*" is not supported.</span></span> <span data-ttu-id="eded7-164">Para listar vários endereços e nomes de host, separe-os com espaços em branco ou pontos-e-vírgulas na cadeia de caracteres de bypass de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-164">To list multiple addresses and host names, separate them with blank spaces or semicolons in the proxy bypass string.</span></span> <span data-ttu-id="eded7-165">Se você especificar a <local> macro, a função ignorará qualquer nome de host que não contenha um ponto.</span><span class="sxs-lookup"><span data-stu-id="eded7-165">If you specify the <local> macro, the function bypasses any host name that does not contain a period.</span></span>

> [!WARNING]
> <span data-ttu-id="eded7-166">Depois que Proxycfg.exe for executado, você não poderá restaurar as configurações de proxy anteriores.</span><span class="sxs-lookup"><span data-stu-id="eded7-166">After Proxycfg.exe runs, you cannot restore the previous proxy settings.</span></span> <span data-ttu-id="eded7-167">No entanto, você pode remover totalmente as configurações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-167">However, you can remove the proxy settings entirely.</span></span>

 

## <a name="usage"></a><span data-ttu-id="eded7-168">Uso</span><span class="sxs-lookup"><span data-stu-id="eded7-168">Usage</span></span>

<span data-ttu-id="eded7-169">Para usar a ferramenta de configuração de proxy, abra uma janela de prompt de comando e execute o utilitário de configuração de proxy com os parâmetros de linha de comando apropriados.</span><span class="sxs-lookup"><span data-stu-id="eded7-169">To use the proxy configuration tool, open a command prompt window and run the proxy configuration utility with the appropriate command line parameters.</span></span> <span data-ttu-id="eded7-170">A seção a seguir fornece exemplos de sintaxe.</span><span class="sxs-lookup"><span data-stu-id="eded7-170">The following section provides syntax examples.</span></span>

## <a name="example-syntax"></a><span data-ttu-id="eded7-171">Sintaxe de exemplo</span><span class="sxs-lookup"><span data-stu-id="eded7-171">Example Syntax</span></span>

### <a name="example-1-use-a-proxy-only-for-external-resources"></a><span data-ttu-id="eded7-172">Exemplo 1: usar um proxy somente para recursos externos</span><span class="sxs-lookup"><span data-stu-id="eded7-172">Example 1: Use a proxy only for external resources</span></span>

<span data-ttu-id="eded7-173">Veja a seguir o uso mais comum para Proxycfg.exe.</span><span class="sxs-lookup"><span data-stu-id="eded7-173">The following is the most common use for Proxycfg.exe.</span></span> <span data-ttu-id="eded7-174">Esse comando especifica que os servidores HTTP e HTTPS são acessados por meio do servidor proxy chamado " \_ servidor proxy", exceto nomes de host que não contêm um ponto.</span><span class="sxs-lookup"><span data-stu-id="eded7-174">This command specifies that both HTTP and HTTPS servers are accessed through the proxy server named "proxy\_server", except for host names that do not contain a period.</span></span>

<span data-ttu-id="eded7-175">**servidor proxy proxycfg-p \_ " <local> "**</span><span class="sxs-lookup"><span data-stu-id="eded7-175">**proxycfg -p proxy\_server "<local>"**</span></span>

### <a name="example-2-use-a-proxy-for-all-resources"></a><span data-ttu-id="eded7-176">Exemplo 2: usar um proxy para todos os recursos</span><span class="sxs-lookup"><span data-stu-id="eded7-176">Example 2: Use a proxy for all resources</span></span>

<span data-ttu-id="eded7-177">O exemplo a seguir especifica que os servidores HTTP e HTTPS são acessados por meio do servidor proxy chamado " \_ servidor proxy".</span><span class="sxs-lookup"><span data-stu-id="eded7-177">The following example specifies that both HTTP and HTTPS servers are accessed through the proxy server named "proxy\_server".</span></span> <span data-ttu-id="eded7-178">Nenhuma lista de bypass foi especificada.</span><span class="sxs-lookup"><span data-stu-id="eded7-178">No bypass list is specified.</span></span>

<span data-ttu-id="eded7-179">**servidor proxy proxycfg-p \_**</span><span class="sxs-lookup"><span data-stu-id="eded7-179">**proxycfg -p proxy\_server**</span></span>

### <a name="example-3-use-a-different-proxy-for-secure-resources"></a><span data-ttu-id="eded7-180">Exemplo 3: usar um proxy diferente para recursos seguros</span><span class="sxs-lookup"><span data-stu-id="eded7-180">Example 3: Use a different proxy for secure resources</span></span>

<span data-ttu-id="eded7-181">O exemplo a seguir especifica que os servidores HTTP são acessados por meio do \_ proxy de proxy http e os servidores HTTPS são acessados por meio do \_ proxy HTTPS.</span><span class="sxs-lookup"><span data-stu-id="eded7-181">The following example specifies that HTTP servers are accessed through the http\_proxy proxy and HTTPS servers are accessed through https\_proxy.</span></span> <span data-ttu-id="eded7-182">Os sites de intranet local e qualquer site no \* domínio. Microsoft.com ignoram o proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-182">Local intranet sites and any site in the \*.microsoft.com domain bypass the proxy.</span></span>

<span data-ttu-id="eded7-183">**proxycfg-p "http = http \_ proxy HTTPS = \_ proxy HTTPS" " <local> ; \* . microsoft.com "**</span><span class="sxs-lookup"><span data-stu-id="eded7-183">**proxycfg -p "http=http\_proxy https=https\_proxy" "<local>;\*.microsoft.com"**</span></span>

## <a name="removing-proxycfgexe"></a><span data-ttu-id="eded7-184">Removendo ProxyCfg.exe</span><span class="sxs-lookup"><span data-stu-id="eded7-184">Removing ProxyCfg.exe</span></span>

<span data-ttu-id="eded7-185">Depois de usar a ferramenta de configuração de proxy, você não pode restaurar suas configurações de proxy originais.</span><span class="sxs-lookup"><span data-stu-id="eded7-185">After using the proxy configuration tool, you cannot restore your original proxy settings.</span></span> <span data-ttu-id="eded7-186">No entanto, se necessário, você pode remover as configurações do registro que o utilitário cria.</span><span class="sxs-lookup"><span data-stu-id="eded7-186">However, if necessary, you can remove the registry settings that the utility creates.</span></span> <span data-ttu-id="eded7-187">Para remover as entradas do registro que ProxyCfg.exe cria, você deve excluir o valor de **WinHttpSettings** da seguinte chave do registro.</span><span class="sxs-lookup"><span data-stu-id="eded7-187">To remove the registry entries that ProxyCfg.exe creates, you must delete the **WinHttpSettings** value from the following registry key.</span></span>

<span data-ttu-id="eded7-188">**HKEY \_ \_Computador local** \\ **software** \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **Internet Settings** \\ **Connections** \\ **WinHttpSettings**</span><span class="sxs-lookup"><span data-stu-id="eded7-188">**HKEY\_LOCAL\_MACHINE**\\**SOFTWARE**\\**Microsoft**\\**Windows**\\**CurrentVersion**\\**Internet Settings**\\**Connections**\\**WinHttpSettings**</span></span>

<span data-ttu-id="eded7-189">Excluir o valor *WinHttpSettings* remove todas as configurações de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-189">Deleting the *WinHttpSettings* value removes all proxy configurations.</span></span>

## <a name="proxycfgexe-and-authentication"></a><span data-ttu-id="eded7-190">ProxyCfg.exe e autenticação</span><span class="sxs-lookup"><span data-stu-id="eded7-190">ProxyCfg.exe and Authentication</span></span>

<span data-ttu-id="eded7-191">O utilitário de configuração de proxy define a política de autenticação padrão.</span><span class="sxs-lookup"><span data-stu-id="eded7-191">The proxy configuration utility sets the default authentication policy.</span></span> <span data-ttu-id="eded7-192">Como você não deve executar a autenticação NTLM com hosts não confiáveis, por padrão, a autenticação NTLM ocorre apenas automaticamente com hosts na lista de bypass de proxy.</span><span class="sxs-lookup"><span data-stu-id="eded7-192">Because you should not perform NTLM authentication with untrusted hosts, by default, NTLM authentication only occurs automatically with hosts on the proxy bypass list.</span></span> <span data-ttu-id="eded7-193">Se não houver nenhum proxy, você ainda poderá usar ProxyCfg.exe para especificar uma lista de bypass de hosts em que você confia para executar a autenticação NTLM.</span><span class="sxs-lookup"><span data-stu-id="eded7-193">If there is no proxy, you can still use ProxyCfg.exe to specify a bypass list of hosts that you trust to perform NTLM authentication.</span></span> <span data-ttu-id="eded7-194">Um nome de proxy é necessário ao usar ProxyCfg.exe para essa finalidade, mas você pode usar qualquer cadeia de caracteres válida no lugar de um nome de proxy real.</span><span class="sxs-lookup"><span data-stu-id="eded7-194">A proxy name is required when using ProxyCfg.exe for this purpose, but you can use any valid string in place of a real proxy name.</span></span>

<span data-ttu-id="eded7-195">Para obter mais informações sobre a política de logon automático, consulte [política de logon automático](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="eded7-195">For more information about the auto-logon policy, see [Automatic Logon Policy](authentication-in-winhttp.md).</span></span>

 

 
