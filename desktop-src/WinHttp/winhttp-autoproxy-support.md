---
description: Para facilitar a configuração das configurações de proxy, o WinHTTP 5,1 implementa o protocolo WPAD (descoberta automática de proxy da Web), também conhecido como AutoProxy.
ms.assetid: f766f37b-a1aa-420f-ac3b-d03485630d88
title: Suporte ao WinHTTP AutoProxy
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 26584bd0b1809f3866ed42adc7198275f40f991c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105782725"
---
# <a name="winhttp-autoproxy-support"></a><span data-ttu-id="2cf52-103">Suporte ao WinHTTP AutoProxy</span><span class="sxs-lookup"><span data-stu-id="2cf52-103">WinHTTP AutoProxy Support</span></span>

<span data-ttu-id="2cf52-104">Para facilitar a configuração das configurações de proxy, o WinHTTP 5,1 implementa o protocolo WPAD (descoberta automática de proxy da Web), também conhecido como AutoProxy.</span><span class="sxs-lookup"><span data-stu-id="2cf52-104">To ease the configuration of proxy settings, WinHTTP 5.1 implements the Web Proxy Auto-Discovery (WPAD) protocol, also known as autoproxy.</span></span>

## <a name="overview-of-autoproxy"></a><span data-ttu-id="2cf52-105">Visão geral do AutoProxy</span><span class="sxs-lookup"><span data-stu-id="2cf52-105">Overview of AutoProxy</span></span>

<span data-ttu-id="2cf52-106">Aplicativos e componentes que usam o WinHTTP para enviar solicitações HTTP devem garantir que a configuração de proxy esteja definida corretamente.</span><span class="sxs-lookup"><span data-stu-id="2cf52-106">Applications and components that use WinHTTP to send HTTP requests should ensure that the proxy configuration is set correctly.</span></span> <span data-ttu-id="2cf52-107">A menos que o cliente tenha uma conexão direta com a Internet, uma solicitação HTTP normalmente deve ser enviada por um servidor proxy da Web que conecta a rede local do cliente à Internet (por exemplo, esse é geralmente o caso para clientes Web em uma LAN corporativa).</span><span class="sxs-lookup"><span data-stu-id="2cf52-107">Unless the client has a direct Internet connection, an HTTP request should normally be sent through a web proxy server that connects the client's local network to the Internet (for example, this is often the case for Web clients on a corporate LAN).</span></span> <span data-ttu-id="2cf52-108">Para aplicativos baseados em servidor, a configuração de proxy é normalmente gerenciada pelo administrador do servidor usando o utilitário ProxyCfg.exe do WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="2cf52-108">For server-based applications, the proxy configuration is normally managed by the server's administrator using the WinHTTP ProxyCfg.exe utility.</span></span> <span data-ttu-id="2cf52-109">O administrador do servidor sabe o nome do servidor proxy antecipadamente e usa ProxyCfg.exe para registrar essa configuração no registro em que o WinHTTP pode procurar.</span><span class="sxs-lookup"><span data-stu-id="2cf52-109">The server administrator knows the name of the proxy server in advance and uses ProxyCfg.exe to record this setting in the registry where WinHTTP can look it up.</span></span> <span data-ttu-id="2cf52-110">No entanto, exigir que os usuários finais da área de trabalho cliente configurem manualmente as configurações de proxy do WinHTTP é problemática.</span><span class="sxs-lookup"><span data-stu-id="2cf52-110">However, requiring client desktop end-users to manually configure WinHTTP proxy settings is problematic.</span></span> <span data-ttu-id="2cf52-111">O usuário final pode não saber o nome do servidor proxy; exigir que o usuário final execute o utilitário de ProxyCfg.exe pode ser uma carga de suporte para uma organização.</span><span class="sxs-lookup"><span data-stu-id="2cf52-111">The end-user may not know the name of the proxy server; requiring the end-user to run the ProxyCfg.exe utility can be a support burden for an organization.</span></span> <span data-ttu-id="2cf52-112">Para dar suporte a uma boa experiência de usuário, um aplicativo cliente habilitado para Web deve determinar a configuração de proxy sem intervenção do usuário.</span><span class="sxs-lookup"><span data-stu-id="2cf52-112">To support a good user experience, a web-enabled client application should determine the proxy configuration without user intervention.</span></span>

<span data-ttu-id="2cf52-113">Para facilitar a configuração das configurações de proxy para aplicativos baseados em WinHTTP, o WinHTTP agora implementa o [protocolo WPAD (descoberta automática de proxy da Web)](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), geralmente chamado de *proxy* automático.</span><span class="sxs-lookup"><span data-stu-id="2cf52-113">To make configuring the proxy settings for WinHTTP-based applications easier, WinHTTP now implements the [Web Proxy Auto-Discovery (WPAD) protocol](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), often referred to as *autoproxy*.</span></span> <span data-ttu-id="2cf52-114">Esse é o mesmo protocolo que os navegadores da Web implementam para descobrir automaticamente a configuração de proxy sem exigir que um usuário final especifique um servidor proxy manualmente.</span><span class="sxs-lookup"><span data-stu-id="2cf52-114">This is the same protocol that web browsers implement to automatically discover the proxy configuration without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="2cf52-115">Esse recurso está disponível a partir do WinHTTP versão 5,1 no Windows 2000 Service Pack 3, Windows XP Service Pack 1 e Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="2cf52-115">This feature is available starting with WinHTTP version 5.1 in Windows 2000 Service Pack 3, Windows XP Service Pack 1 and Windows Server 2003.</span></span> <span data-ttu-id="2cf52-116">Observe que embora o Microsoft Internet Explorer e o Microsoft WinHTTP ofereçam suporte ao WPAD, a especificação nunca progrediu além do estágio "Internet-Draft" e expirou em maio de 2001.</span><span class="sxs-lookup"><span data-stu-id="2cf52-116">Note that although both Microsoft Internet Explorer and Microsoft WinHTTP support WPAD, the specification never progressed beyond the "Internet-Draft" stage, and expired in May 2001.</span></span>

<span data-ttu-id="2cf52-117">O protocolo WPAD funciona da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="2cf52-117">The WPAD protocol works as follows:</span></span>

1.  <span data-ttu-id="2cf52-118">Usando os protocolos de rede DHCP e/ou DNS, a URL de um arquivo PAC (configuração automática de proxy) é descoberta.</span><span class="sxs-lookup"><span data-stu-id="2cf52-118">Using the DHCP and/or DNS network protocols, the URL of a Proxy Auto-Configuration (PAC) file is discovered.</span></span> <span data-ttu-id="2cf52-119">A URL identifica um arquivo PAC na rede local do cliente.</span><span class="sxs-lookup"><span data-stu-id="2cf52-119">The URL identifies a PAC file on the client's local network.</span></span> <span data-ttu-id="2cf52-120">O WinHTTP dá suporte apenas a URLs de PAC "http:" e "https:"; Ele não, por exemplo, dá suporte a URLS "file:".</span><span class="sxs-lookup"><span data-stu-id="2cf52-120">WinHTTP supports only "http:" and "https:" PAC URLs; it does not, for example, support "file:" URLS.</span></span>
2.  <span data-ttu-id="2cf52-121">O arquivo PAC é baixado e, opcionalmente, armazenado em cache no computador do cliente.</span><span class="sxs-lookup"><span data-stu-id="2cf52-121">The PAC file is downloaded and optionally cached on the client's computer.</span></span> <span data-ttu-id="2cf52-122">O arquivo PAC é um script executável que gera uma lista de um ou mais servidores proxy, dado um nome de host e uma URL de destino.</span><span class="sxs-lookup"><span data-stu-id="2cf52-122">The PAC file is an executable script that generates a list of one or more proxy servers given a target host name and URL.</span></span> <span data-ttu-id="2cf52-123">O WinHTTP dá suporte apenas a arquivos PAC baseados em ECMAScript.</span><span class="sxs-lookup"><span data-stu-id="2cf52-123">WinHTTP supports only ECMAScript-based PAC files.</span></span>
3.  <span data-ttu-id="2cf52-124">Em cada solicitação HTTP, o código do script PAC é executado, com o nome do host e a URL da solicitação HTTP passada como parâmetros.</span><span class="sxs-lookup"><span data-stu-id="2cf52-124">On each HTTP request, the PAC script code is executed, with the host name and URL of the HTTP request passed in as parameters.</span></span> <span data-ttu-id="2cf52-125">O WinHTTP espera que o código do script PAC contenha uma função chamada **FindProxyForURL**, no formato:</span><span class="sxs-lookup"><span data-stu-id="2cf52-125">WinHTTP expects the PAC script code to contain a function called **FindProxyForURL**, in the form:</span></span>
4.  ``` syntax
    FindProxyForURL( url, host );
    ```

    <span data-ttu-id="2cf52-126">Essa função computa uma lista de um ou mais servidores proxy que podem ser usados pelo cliente HTTP para transmitir a solicitação.</span><span class="sxs-lookup"><span data-stu-id="2cf52-126">This function computes a list of one or more proxy servers that can be used by the HTTP client in order to transmit the request.</span></span> <span data-ttu-id="2cf52-127">Se o script de PAC determinar que o cliente HTTP pode acessar o servidor de destino diretamente sem passar por um servidor proxy, ele indicará isso usando um valor de retorno especial.</span><span class="sxs-lookup"><span data-stu-id="2cf52-127">If the PAC script determines that the HTTP client can reach the target server directly without going through a proxy server at all, it indicates this using a special return value.</span></span>

## <a name="autoproxy-topics"></a><span data-ttu-id="2cf52-128">Tópicos de AutoProxy</span><span class="sxs-lookup"><span data-stu-id="2cf52-128">AutoProxy Topics</span></span>

-   [<span data-ttu-id="2cf52-129">Funções de AutoProxy do WinHTTP</span><span class="sxs-lookup"><span data-stu-id="2cf52-129">WinHTTP AutoProxy Functions</span></span>](winhttp-autoproxy-api.md)
-   [<span data-ttu-id="2cf52-130">Descoberta sem um arquivo de configuração automática</span><span class="sxs-lookup"><span data-stu-id="2cf52-130">Discovery Without an Auto-Config File</span></span>](discovery-without-an-auto-config-file.md)
-   [<span data-ttu-id="2cf52-131">Problemas de AutoProxy no WinHTTP</span><span class="sxs-lookup"><span data-stu-id="2cf52-131">AutoProxy Issues in WinHTTP</span></span>](autoproxy-issues-in-winhttp.md)
-   [<span data-ttu-id="2cf52-132">Definindo as configurações de proxy do WinInet no WinHTTP</span><span class="sxs-lookup"><span data-stu-id="2cf52-132">Setting WinInet Proxy Configurations in WinHTTP</span></span>](setting-wininet-proxy-configurations-in-winhttp.md)
-   [<span data-ttu-id="2cf52-133">Cache de AutoProxy</span><span class="sxs-lookup"><span data-stu-id="2cf52-133">AutoProxy Cache</span></span>](autoproxy-cache.md)
-   [<span data-ttu-id="2cf52-134">Formato de arquivo de configuração automática de extensões IPv6 para navegador</span><span class="sxs-lookup"><span data-stu-id="2cf52-134">IPv6 Extensions to Navigator Auto-Config File Format</span></span>](ipv6-extensions-to-navigator-auto-config-file-format.md)

 

 



