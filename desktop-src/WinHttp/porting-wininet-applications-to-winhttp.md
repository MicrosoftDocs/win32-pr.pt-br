---
description: O Microsoft Windows HTTP Services (WinHTTP) é destinado a aplicativos de servidor de camada intermediária e back-end que exigem acesso a uma pilha de cliente HTTP.
ms.assetid: 5b0cf321-8f69-4526-a628-e6ca0f9d4a58
title: Portando aplicativos WinINet para WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f64c4ecc825934d32b1d363f010bd04e1484428
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103922781"
---
# <a name="porting-wininet-applications-to-winhttp"></a><span data-ttu-id="b5406-103">Portando aplicativos WinINet para WinHTTP</span><span class="sxs-lookup"><span data-stu-id="b5406-103">Porting WinINet Applications to WinHTTP</span></span>

<span data-ttu-id="b5406-104">O Microsoft Windows HTTP Services (WinHTTP) é destinado a aplicativos de servidor de camada intermediária e back-end que exigem acesso a uma pilha de cliente HTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-104">Microsoft Windows HTTP Services (WinHTTP) is targeted at middle-tier and back-end server applications that require access to an HTTP client stack.</span></span> <span data-ttu-id="b5406-105">O [Microsoft Windows Internet (Wininet)](winhttp-start-page.md) fornece uma pilha de cliente http para aplicativos cliente, bem como acesso aos protocolos protocolo FTP (FTP), SOCKSv4 e Gopher.</span><span class="sxs-lookup"><span data-stu-id="b5406-105">[Microsoft Windows Internet (WinINet)](winhttp-start-page.md) provides an HTTP client stack for client applications, as well as access to the File Transfer Protocol (FTP), SOCKSv4, and Gopher protocols.</span></span> <span data-ttu-id="b5406-106">Esta visão geral pode ajudar a determinar se portar seus aplicativos WinINet para WinHTTP seria benéfico.</span><span class="sxs-lookup"><span data-stu-id="b5406-106">This overview can help determine whether porting your WinINet applications to WinHTTP would be beneficial.</span></span> <span data-ttu-id="b5406-107">Ele também descreve os requisitos de conversão específicos.</span><span class="sxs-lookup"><span data-stu-id="b5406-107">It also describes specific conversion requirements.</span></span>

-   [<span data-ttu-id="b5406-108">Coisas a considerar antes de portar seu aplicativo WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-108">Things to Consider Before Porting Your WinINet Application</span></span>](#things-to-consider-before-porting-your-wininet-application)
-   [<span data-ttu-id="b5406-109">WinHTTP equivalentes a funções WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-109">WinHTTP Equivalents to WinINet Functions</span></span>](#winhttp-equivalents-to-wininet-functions)
-   [<span data-ttu-id="b5406-110">Manipulação diferente de solicitações assíncronas</span><span class="sxs-lookup"><span data-stu-id="b5406-110">Different Handling of Asynchronous Requests</span></span>](#different-handling-of-asynchronous-requests)
-   [<span data-ttu-id="b5406-111">Diferenças nas notificações de retorno de chamada do WinHTTP</span><span class="sxs-lookup"><span data-stu-id="b5406-111">Differences in WinHTTP Callback Notifications</span></span>](#differences-in-winhttp-callback-notifications)
-   [<span data-ttu-id="b5406-112">Diferenças de autenticação</span><span class="sxs-lookup"><span data-stu-id="b5406-112">Authentication Differences</span></span>](#authentication-differences)
-   [<span data-ttu-id="b5406-113">Diferenças em transações HTTP seguras</span><span class="sxs-lookup"><span data-stu-id="b5406-113">Differences in Secure HTTP Transactions</span></span>](#differences-in-secure-http-transactions)

## <a name="things-to-consider-before-porting-your-wininet-application"></a><span data-ttu-id="b5406-114">Coisas a considerar antes de portar seu aplicativo WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-114">Things to Consider Before Porting Your WinINet Application</span></span>

<span data-ttu-id="b5406-115">Considere a possibilidade de portar seu aplicativo WinINet para o WinHTTP se seu aplicativo se beneficiar de:</span><span class="sxs-lookup"><span data-stu-id="b5406-115">Consider porting your WinINet application to WinHTTP if your application would benefit from:</span></span>

-   <span data-ttu-id="b5406-116">Uma pilha de cliente HTTP segura para servidor.</span><span class="sxs-lookup"><span data-stu-id="b5406-116">A server-safe HTTP client stack.</span></span>
-   <span data-ttu-id="b5406-117">Uso de pilha minimizado.</span><span class="sxs-lookup"><span data-stu-id="b5406-117">Minimized stack usage.</span></span>
-   <span data-ttu-id="b5406-118">A escalabilidade de um aplicativo de servidor.</span><span class="sxs-lookup"><span data-stu-id="b5406-118">The scalability of a server application.</span></span>
-   <span data-ttu-id="b5406-119">Menos dependências em APIs relacionadas à plataforma.</span><span class="sxs-lookup"><span data-stu-id="b5406-119">Fewer dependencies on platform-related APIs.</span></span>
-   <span data-ttu-id="b5406-120">Suporte para representação de thread.</span><span class="sxs-lookup"><span data-stu-id="b5406-120">Support for thread impersonation.</span></span>
-   <span data-ttu-id="b5406-121">Uma pilha HTTP compatível com o serviço.</span><span class="sxs-lookup"><span data-stu-id="b5406-121">A service-friendly HTTP stack.</span></span>
-   <span data-ttu-id="b5406-122">Acesso ao objeto [**WinHttpRequest**](winhttprequest.md) programável.</span><span class="sxs-lookup"><span data-stu-id="b5406-122">Access to the scriptable [**WinHttpRequest**](winhttprequest.md) object.</span></span>

<span data-ttu-id="b5406-123">Não considere a possibilidade de portar seu aplicativo WinINet para o WinHTTP se ele precisar oferecer suporte a um ou mais dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="b5406-123">Do not consider porting your WinINet application to WinHTTP if it must support one or more of the following:</span></span>

-   <span data-ttu-id="b5406-124">O protocolo FTP ou gopher da pilha HTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-124">The FTP or Gopher protocol from the HTTP stack.</span></span>
-   <span data-ttu-id="b5406-125">Suporte para o protocolo SOCKSv4 para comunicação com proxies SOCKS.</span><span class="sxs-lookup"><span data-stu-id="b5406-125">Support for SOCKSv4 protocol for communicating with SOCKS proxies.</span></span>
-   <span data-ttu-id="b5406-126">Serviços de conexão automática.</span><span class="sxs-lookup"><span data-stu-id="b5406-126">Automatic dial-up services.</span></span>

<span data-ttu-id="b5406-127">Se você decidir portar seu aplicativo para o WinHTTP, as seções a seguir o guiarão pelo processo de conversão.</span><span class="sxs-lookup"><span data-stu-id="b5406-127">If you decide to port your application to WinHTTP, the following sections guide you through the conversion process.</span></span>

<span data-ttu-id="b5406-128">Para um aplicativo de exemplo para o WinINet e o WinHTTP, compare o exemplo AsyncDemo para o WinINet com o exemplo AsyncDemo para WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-128">For a sample application for both WinINet and WinHTTP, compare the AsyncDemo sample for WinINet with the AsyncDemo sample for WinHTTP.</span></span>

## <a name="winhttp-equivalents-to-wininet-functions"></a><span data-ttu-id="b5406-129">WinHTTP equivalentes a funções WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-129">WinHTTP Equivalents to WinINet Functions</span></span>

<span data-ttu-id="b5406-130">A tabela a seguir lista as funções WinINet relacionadas à pilha de cliente HTTP junto com os equivalentes do WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-130">The following table lists WinINet functions related to the HTTP client stack together with the WinHTTP equivalents.</span></span>

<span data-ttu-id="b5406-131">Se seu aplicativo exigir funções WinINet que não estão listadas, não porte seu aplicativo para o WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-131">If your application requires WinINet functions that are not listed, do not port your application to WinHTTP.</span></span>



| <span data-ttu-id="b5406-132">Função WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-132">WinINet function</span></span>                                                       | <span data-ttu-id="b5406-133">WinHTTP equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-133">WinHTTP equivalent</span></span>                                                                                                                                                                                     | <span data-ttu-id="b5406-134">Alterações notáveis</span><span class="sxs-lookup"><span data-stu-id="b5406-134">Notable changes</span></span>                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b5406-135">**HttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="b5406-135">**HttpAddRequestHeaders**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpaddrequestheadersa)             | [<span data-ttu-id="b5406-136">**WinHttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="b5406-136">**WinHttpAddRequestHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders)                                                                                                                                           | <span data-ttu-id="b5406-137">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-137">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-138">**HttpEndRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-138">**HttpEndRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpendrequesta)                           | [<span data-ttu-id="b5406-139">**WinHttpReceiveResponse**</span><span class="sxs-lookup"><span data-stu-id="b5406-139">**WinHttpReceiveResponse**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)                                                                                                                                               | <span data-ttu-id="b5406-140">O valor de contexto é definido com [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="b5406-140">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="b5406-141">As opções de solicitação são definidas com [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="b5406-141">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="b5406-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) deve ser chamado após o envio de uma solicitação.</span><span class="sxs-lookup"><span data-stu-id="b5406-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) must be called after sending a request.</span></span>                      |
| [<span data-ttu-id="b5406-143">**HttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-143">**HttpOpenRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta)                         | [<span data-ttu-id="b5406-144">**WinHttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-144">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                                                                                       | <span data-ttu-id="b5406-145">O valor de contexto é definido com [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="b5406-145">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span>                                                                                                                                                                                                      |
| [<span data-ttu-id="b5406-146">**HttpQueryInfo**</span><span class="sxs-lookup"><span data-stu-id="b5406-146">**HttpQueryInfo**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpqueryinfoa)                             | [<span data-ttu-id="b5406-147">**WinHttpQueryHeaders**</span><span class="sxs-lookup"><span data-stu-id="b5406-147">**WinHttpQueryHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders)                                                                                                                                                     | <span data-ttu-id="b5406-148">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-148">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-149">**HttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-149">**HttpSendRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta)                         | [<span data-ttu-id="b5406-150">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-150">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="b5406-151">O valor de contexto pode ser definido com [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span><span class="sxs-lookup"><span data-stu-id="b5406-151">The context value can be set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="b5406-152">**HttpSendRequestEx**</span><span class="sxs-lookup"><span data-stu-id="b5406-152">**HttpSendRequestEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequestexa)                     | [<span data-ttu-id="b5406-153">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="b5406-153">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="b5406-154">Não é possível fornecer buffers.</span><span class="sxs-lookup"><span data-stu-id="b5406-154">Buffers cannot be provided.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="b5406-155">**InternetCanonicalizeUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-155">**InternetCanonicalizeUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcanonicalizeurla)         | <span data-ttu-id="b5406-156">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-156">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-157">Agora, as URLs são colocadas em formato canônico em [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="b5406-157">URLs are now put in canonical form in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span>                                                                                                                                                                                                                                              |
| [<span data-ttu-id="b5406-158">**InternetCheckConnection**</span><span class="sxs-lookup"><span data-stu-id="b5406-158">**InternetCheckConnection**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcheckconnectiona)         | <span data-ttu-id="b5406-159">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-159">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-160">Não implementado no WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-160">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="b5406-161">**InternetCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="b5406-161">**InternetCloseHandle**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetclosehandle)                 | [<span data-ttu-id="b5406-162">**WinHttpCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="b5406-162">**WinHttpCloseHandle**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle)                                                                                                                                                       | <span data-ttu-id="b5406-163">Fechar um identificador pai no WinHTTP não fecha recursivamente os identificadores filho.</span><span class="sxs-lookup"><span data-stu-id="b5406-163">Closing a parent handle in WinHTTP does not recursively close child handles.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="b5406-164">**InternetCombineUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-164">**InternetCombineUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcombineurla)                   | <span data-ttu-id="b5406-165">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-165">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-166">As URLs podem ser montadas com a função [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) .</span><span class="sxs-lookup"><span data-stu-id="b5406-166">URLs can be assembled with the [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) function.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-167">**InternetConfirmZoneCrossing**</span><span class="sxs-lookup"><span data-stu-id="b5406-167">**InternetConfirmZoneCrossing**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconfirmzonecrossing) | <span data-ttu-id="b5406-168">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-168">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-169">Não implementado no WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="b5406-169">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="b5406-170">**InternetConnect**</span><span class="sxs-lookup"><span data-stu-id="b5406-170">**InternetConnect**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconnecta)                         | [<span data-ttu-id="b5406-171">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="b5406-171">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                                                                                               | <span data-ttu-id="b5406-172">O valor de contexto é definido com [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="b5406-172">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="b5406-173">As opções de solicitação são definidas com [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="b5406-173">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="b5406-174">As credenciais do usuário são definidas com [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="b5406-174">User credentials are set with [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span>                                 |
| [<span data-ttu-id="b5406-175">**InternetCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-175">**InternetCrackUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)                       | [<span data-ttu-id="b5406-176">**WinHttpCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-176">**WinHttpCrackUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)                                                                                                                                                             | <span data-ttu-id="b5406-177">Comportamento oposto do sinalizador de \_ escape ICU: com [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), esse sinalizador faz com que as sequências de escape (% XX) sejam convertidas em caracteres, mas com [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), ela faz com que os caracteres que devem ser ignorados em uma solicitação HTTP sejam convertidos em sequências de escape.</span><span class="sxs-lookup"><span data-stu-id="b5406-177">Opposite behavior of the ICU\_ESCAPE flag: with [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), this flag causes escape sequences (%xx) to be converted to characters, but with [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), it causes characters that must be escaped from in an HTTP request to be converted to escape sequences.</span></span> |
| [<span data-ttu-id="b5406-178">**InternetCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-178">**InternetCreateUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcreateurla)                     | [<span data-ttu-id="b5406-179">**WinHttpCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-179">**WinHttpCreateUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl)                                                                                                                                                           | <span data-ttu-id="b5406-180">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-180">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-181">**InternetErrorDlg**</span><span class="sxs-lookup"><span data-stu-id="b5406-181">**InternetErrorDlg**</span></span>](/windows/desktop/api/wininet/nf-wininet-interneterrordlg)                       | <span data-ttu-id="b5406-182">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-182">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-183">Como o WinHTTP é destinado a aplicativos do lado do servidor, ele não implementa nenhuma interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="b5406-183">Because WinHTTP is targeted at server-side applications, it does not implement any user interface.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="b5406-184">**InternetGetCookie**</span><span class="sxs-lookup"><span data-stu-id="b5406-184">**InternetGetCookie**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetgetcookiea)                     | <span data-ttu-id="b5406-185">Sem equivalente</span><span class="sxs-lookup"><span data-stu-id="b5406-185">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="b5406-186">O WinHTTP não mantém dados entre sessões e não pode acessar cookies do WinINet.</span><span class="sxs-lookup"><span data-stu-id="b5406-186">WinHTTP does not persist data between sessions and cannot access WinINet cookies.</span></span>                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="b5406-187">**InternetOpen**</span><span class="sxs-lookup"><span data-stu-id="b5406-187">**InternetOpen**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopena)                               | [<span data-ttu-id="b5406-188">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="b5406-188">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                                                                                     | <span data-ttu-id="b5406-189">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-189">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-190">**InternetOpenUrl**</span><span class="sxs-lookup"><span data-stu-id="b5406-190">**InternetOpenUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopenurla)                         | <span data-ttu-id="b5406-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span><span class="sxs-lookup"><span data-stu-id="b5406-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span></span> | <span data-ttu-id="b5406-192">Essa funcionalidade está disponível nas funções do WinHTTP listadas.</span><span class="sxs-lookup"><span data-stu-id="b5406-192">This functionality is available in the WinHTTP functions listed.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="b5406-193">**InternetQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="b5406-193">**InternetQueryDataAvailable**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetquerydataavailable)   | [<span data-ttu-id="b5406-194">**WinHttpQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="b5406-194">**WinHttpQueryDataAvailable**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable)                                                                                                                                         | <span data-ttu-id="b5406-195">Nenhum parâmetro reservado.</span><span class="sxs-lookup"><span data-stu-id="b5406-195">No reserved parameters.</span></span>                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="b5406-196">**InternetQueryOption**</span><span class="sxs-lookup"><span data-stu-id="b5406-196">**InternetQueryOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetqueryoptiona)                 | [<span data-ttu-id="b5406-197">**WinHttpQueryOption**</span><span class="sxs-lookup"><span data-stu-id="b5406-197">**WinHttpQueryOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption)                                                                                                                                                       | <span data-ttu-id="b5406-198">O WinHTTP oferece um conjunto diferente de opções do WinINet.</span><span class="sxs-lookup"><span data-stu-id="b5406-198">WinHTTP offers a different set of options from WinINet.</span></span> <span data-ttu-id="b5406-199">Para obter mais informações e opções oferecidas pelo WinHTTP, consulte [**sinalizadores de opção**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="b5406-199">For more information and options offered by WinHTTP, see [**Option Flags**](option-flags.md).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="b5406-200">**InternetReadFile**</span><span class="sxs-lookup"><span data-stu-id="b5406-200">**InternetReadFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfile)                       | [<span data-ttu-id="b5406-201">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="b5406-201">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="b5406-202">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-202">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-203">**InternetReadFileEx**</span><span class="sxs-lookup"><span data-stu-id="b5406-203">**InternetReadFileEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfileexa)                   | [<span data-ttu-id="b5406-204">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="b5406-204">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="b5406-205">Em vez de uma estrutura, o buffer é uma região de memória endereçada com um ponteiro.</span><span class="sxs-lookup"><span data-stu-id="b5406-205">Rather than a structure, the buffer is a region of memory addressed with a pointer.</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="b5406-206">**InternetSetOption**</span><span class="sxs-lookup"><span data-stu-id="b5406-206">**InternetSetOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona)                     | [<span data-ttu-id="b5406-207">**WinHttpSetOption**</span><span class="sxs-lookup"><span data-stu-id="b5406-207">**WinHttpSetOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)                                                                                                                                                           | <span data-ttu-id="b5406-208">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-208">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-209">**InternetSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="b5406-209">**InternetSetStatusCallback**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetstatuscallback)     | [<span data-ttu-id="b5406-210">**WinHttpSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="b5406-210">**WinHttpSetStatusCallback**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback)                                                                                                                                           | <span data-ttu-id="b5406-211">Para obter mais informações, consulte "manipulação diferente de solicitações assíncronas" neste tópico.</span><span class="sxs-lookup"><span data-stu-id="b5406-211">For more information, see "Different Handling of Asynchronous Requests" in this topic.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="b5406-212">**InternetTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="b5406-212">**InternetTimeFromSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimefromsystemtime)   | [<span data-ttu-id="b5406-213">**WinHttpTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="b5406-213">**WinHttpTimeFromSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimefromsystemtime)                                                                                                                                         | <span data-ttu-id="b5406-214">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-214">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-215">**InternetTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="b5406-215">**InternetTimeToSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimetosystemtime)       | [<span data-ttu-id="b5406-216">**WinHttpTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="b5406-216">**WinHttpTimeToSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimetosystemtime)                                                                                                                                             | <span data-ttu-id="b5406-217">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-217">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b5406-218">**InternetWriteFile**</span><span class="sxs-lookup"><span data-stu-id="b5406-218">**InternetWriteFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetwritefile)                     | [<span data-ttu-id="b5406-219">**WinHttpWriteData**</span><span class="sxs-lookup"><span data-stu-id="b5406-219">**WinHttpWriteData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)                                                                                                                                                           | <span data-ttu-id="b5406-220">Nenhum.</span><span class="sxs-lookup"><span data-stu-id="b5406-220">None.</span></span>                                                                                                                                                                                                                                                                                                                                |



 

## <a name="different-handling-of-asynchronous-requests"></a><span data-ttu-id="b5406-221">Manipulação diferente de solicitações assíncronas</span><span class="sxs-lookup"><span data-stu-id="b5406-221">Different Handling of Asynchronous Requests</span></span>

<span data-ttu-id="b5406-222">Lembre-se de que no WinINet e no WinHTTP, algumas funções podem concluir solicitações assíncronas de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="b5406-222">Be aware that in WinINet and WinHTTP, some functions can complete asynchronous requests either synchronously or asynchronously.</span></span> <span data-ttu-id="b5406-223">Seu aplicativo deve lidar com qualquer situação.</span><span class="sxs-lookup"><span data-stu-id="b5406-223">Your application must handle either situation.</span></span> <span data-ttu-id="b5406-224">Há diferenças significativas em como o WinINet e o WinHTTP tratam dessas funções potencialmente assíncronas.</span><span class="sxs-lookup"><span data-stu-id="b5406-224">There are significant differences in how WinINet and WinHTTP handle these potentially asynchronous functions.</span></span>

<span data-ttu-id="b5406-225">WinINet</span><span class="sxs-lookup"><span data-stu-id="b5406-225">WinINet</span></span>

-   <span data-ttu-id="b5406-226">Conclusão síncrona: se uma chamada de função WinINet potencialmente assíncrona for concluída de forma síncrona, os parâmetros de saída da função retornarão os resultados da operação.</span><span class="sxs-lookup"><span data-stu-id="b5406-226">Synchronous completion: If a potentially asynchronous WinINet function call completes synchronously, the OUT parameters of the function return the results of the operation.</span></span> <span data-ttu-id="b5406-227">Quando ocorrer um erro, recupere o código de erro chamando [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) após a chamada de função WININET.</span><span class="sxs-lookup"><span data-stu-id="b5406-227">When an error occurs, retrieve the error code by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) after the WinINet function call.</span></span>

-   <span data-ttu-id="b5406-228">Conclusão assíncrona: se uma chamada de função potencialmente assíncrona for concluída de modo assíncrono, os resultados da operação e de quaisquer erros poderão ser acessados na função de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="b5406-228">Asynchronous completion: If a potentially asynchronous function call completes asynchronously, the results of the operation, and any errors, are accessible in the callback function.</span></span> <span data-ttu-id="b5406-229">A função de retorno de chamada é executada em um thread de trabalho, não no thread que fez a chamada de função inicial.</span><span class="sxs-lookup"><span data-stu-id="b5406-229">The callback function is executed on a worker thread, not on the thread that made the initial function call.</span></span>

<span data-ttu-id="b5406-230">Em outras palavras, seu aplicativo deve duplicar a lógica para lidar com os resultados dessas operações em dois locais: ambos imediatamente após a chamada de função e na função de retorno de chamado.</span><span class="sxs-lookup"><span data-stu-id="b5406-230">In other words, your application must duplicate logic to handle the results of such operations in two places: both immediately after the function call and in the callback function.</span></span>

<span data-ttu-id="b5406-231">O WinHTTP simplifica esse modelo, permitindo que você implemente a lógica operacional somente na função de retorno de chamada, que recebe uma notificação de conclusão, independentemente de a operação ser concluída de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="b5406-231">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="b5406-232">Quando a operação assíncrona está habilitada, os parâmetros de saída das funções do WinHTTP não retornam dados significativos e devem ser definidos como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="b5406-232">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

<span data-ttu-id="b5406-233">A única diferença significativa entre a conclusão assíncrona e síncrona no WinHTTP, da perspectiva do aplicativo, é em que a função de chamada de retorno é executada.</span><span class="sxs-lookup"><span data-stu-id="b5406-233">The only significant difference between asynchronous and synchronous completion in WinHTTP, from the application perspective, is in where the callback function is executed.</span></span>

<span data-ttu-id="b5406-234">WinHTTP</span><span class="sxs-lookup"><span data-stu-id="b5406-234">WinHTTP</span></span>

-   <span data-ttu-id="b5406-235">Conclusão síncrona: quando uma operação é concluída de forma síncrona, os resultados são retornados em uma função de retorno de chamada que é executada no mesmo thread que a chamada de função original.</span><span class="sxs-lookup"><span data-stu-id="b5406-235">Synchronous completion: When an operation completes synchronously, the results are returned in a callback function that executes in the same thread as the original function call.</span></span>

-   <span data-ttu-id="b5406-236">Conclusão assíncrona: quando uma operação é concluída de forma assíncrona, os resultados são retornados em uma função de retorno de chamada que é executada em um thread de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b5406-236">Asynchronous completion: When an operation completes asynchronously, the results are returned in a callback function that executes in a worker thread.</span></span>

<span data-ttu-id="b5406-237">Embora a maioria dos erros também possa ser manipulada inteiramente na função de retorno de chamada, os aplicativos WinHTTP ainda devem estar preparados para que uma função retorne **false** devido a um parâmetro de erro \_ inválido \_ ou a outro erro semelhante recuperado chamando [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span><span class="sxs-lookup"><span data-stu-id="b5406-237">Although most errors can also be handled entirely within the callback function, WinHTTP applications must still be prepared for a function to return **FALSE** because of an ERROR\_INVALID\_PARAMETER or other similar error retrieved by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span></span>

<span data-ttu-id="b5406-238">Ao contrário do WinINet, que pode executar várias operações assíncronas simultaneamente, o WinHTTP impõe uma política de uma operação assíncrona pendente por identificador de solicitação.</span><span class="sxs-lookup"><span data-stu-id="b5406-238">Unlike WinINet, which can execute multiple asynchronous operations simultaneously, WinHTTP enforces a policy of one pending asynchronous operation per request handle.</span></span> <span data-ttu-id="b5406-239">Se uma operação estiver pendente e outra função WinHTTP for chamada, a segunda função falhará e [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) retornará um erro de \_ operação inválida \_ .</span><span class="sxs-lookup"><span data-stu-id="b5406-239">If one operation is pending and another WinHTTP function is called, the second function fails and [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) returns ERROR\_INVALID\_OPERATION.</span></span>

<span data-ttu-id="b5406-240">O WinHTTP simplifica esse modelo, permitindo que você implemente a lógica operacional somente na função de retorno de chamada, que recebe uma notificação de conclusão, independentemente de a operação ser concluída de forma síncrona ou assíncrona.</span><span class="sxs-lookup"><span data-stu-id="b5406-240">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="b5406-241">Quando a operação assíncrona está habilitada, os parâmetros de saída das funções do WinHTTP não retornam dados significativos e devem ser definidos como **NULL**.</span><span class="sxs-lookup"><span data-stu-id="b5406-241">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

## <a name="differences-in-winhttp-callback-notifications"></a><span data-ttu-id="b5406-242">Diferenças nas notificações de retorno de chamada do WinHTTP</span><span class="sxs-lookup"><span data-stu-id="b5406-242">Differences in WinHTTP Callback Notifications</span></span>

<span data-ttu-id="b5406-243">A função de retorno de chamada de status recebe atualizações sobre o status das operações por meio de sinalizadores de notificação.</span><span class="sxs-lookup"><span data-stu-id="b5406-243">The status callback function receives updates on the status of operations through notification flags.</span></span> <span data-ttu-id="b5406-244">No WinHTTP, as notificações são selecionadas usando o parâmetro *dwNotificationFlags* da função [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) .</span><span class="sxs-lookup"><span data-stu-id="b5406-244">In WinHTTP, notifications are selected using the *dwNotificationFlags* parameter of the [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) function.</span></span> <span data-ttu-id="b5406-245">Use o sinalizador **sinalizador de retorno de chamada do WinHTTP \_ \_ \_ todas as \_ notificações** para ser notificado de todas as atualizações de status.</span><span class="sxs-lookup"><span data-stu-id="b5406-245">Use the **WINHTTP\_CALLBACK\_FLAG\_ALL\_NOTIFICATIONS** flag to be notified of all status updates.</span></span>

<span data-ttu-id="b5406-246">As notificações que indicam que uma operação específica está concluída são chamadas de notificações de conclusão ou apenas conclusões.</span><span class="sxs-lookup"><span data-stu-id="b5406-246">Notifications that indicate a particular operation is complete are called completion notifications, or just completions.</span></span> <span data-ttu-id="b5406-247">No WinINet, cada vez que a função de retorno de chamada recebe uma conclusão, o parâmetro *lpvStatusInformation* contém uma estrutura de [**\_ \_ resultados assíncronos da Internet**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) .</span><span class="sxs-lookup"><span data-stu-id="b5406-247">In WinINet, each time the callback function receives a completion, the *lpvStatusInformation* parameter contains an [**INTERNET\_ASYNC\_RESULT**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) structure.</span></span> <span data-ttu-id="b5406-248">No WinHTTP, essa estrutura não está disponível para todas as conclusões.</span><span class="sxs-lookup"><span data-stu-id="b5406-248">In WinHTTP, this structure is not available for all completions.</span></span> <span data-ttu-id="b5406-249">É importante examinar a página de referência para o [**\_ retorno de \_ chamada de status do WinHTTP**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), que contém informações sobre notificações e quais tipos de dados podem ser esperados para cada um.</span><span class="sxs-lookup"><span data-stu-id="b5406-249">It is important to review the reference page for [**WINHTTP\_STATUS\_CALLBACK**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), which contains information about notifications and what type of data can be expected for each.</span></span>

<span data-ttu-id="b5406-250">No WinHTTP, uma única conclusão, **\_ erro de \_ \_ solicitação de \_ status de retorno de chamada WinHTTP**, indica que uma operação falhou.</span><span class="sxs-lookup"><span data-stu-id="b5406-250">In WinHTTP, a single completion, **WINHTTP\_CALLBACK\_STATUS\_REQUEST\_ERROR**, indicates that an operation failed.</span></span> <span data-ttu-id="b5406-251">Todas as outras conclusões indicam uma operação bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="b5406-251">All other completions indicate a successful operation.</span></span>

<span data-ttu-id="b5406-252">O WinINet e o WinHTTP usam um valor de contexto definido pelo usuário para passar informações do thread principal para a função de retorno de chamada de status, que pode ser executada em um thread de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b5406-252">Both WinINet and WinHTTP use a user-defined context value to pass information from the main thread to the status callback function, which can be executed on a worker thread.</span></span> <span data-ttu-id="b5406-253">No WinINet, o valor de contexto usado pela função de retorno de chamada de status é definido chamando uma das várias funções.</span><span class="sxs-lookup"><span data-stu-id="b5406-253">In WinINet, the context value used by the status callback function is set by calling one of several functions.</span></span> <span data-ttu-id="b5406-254">No WinHTTP, o valor de contexto é definido somente com [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) ou [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="b5406-254">In WinHTTP, the context value is set only with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="b5406-255">Por isso, é possível no WinHTTP que uma notificação ocorra antes que um valor de contexto seja definido.</span><span class="sxs-lookup"><span data-stu-id="b5406-255">Because of this, it is possible in WinHTTP for a notification to occur before a context value is set.</span></span> <span data-ttu-id="b5406-256">Se a função de retorno de chamada receber uma notificação antes de o valor do contexto ser definido, o aplicativo deverá estar preparado para receber **nulo** no parâmetro *dwContext* da função de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="b5406-256">If the callback function receives a notification before the context value is set, the application must be prepared to receive **NULL** in the *dwContext* parameter of the callback function.</span></span>

## <a name="authentication-differences"></a><span data-ttu-id="b5406-257">Diferenças de autenticação</span><span class="sxs-lookup"><span data-stu-id="b5406-257">Authentication Differences</span></span>

<span data-ttu-id="b5406-258">No WinINet, as credenciais do usuário são definidas chamando a função [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) , usando um código semelhante ao fornecido no exemplo de código a seguir.</span><span class="sxs-lookup"><span data-stu-id="b5406-258">In WinINet, user credentials are set by calling the [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) function, using code similar to that provided in the following code example.</span></span>

``` syntax
// Use the WinINet InternetSetOption function to set the 
// user credentials to the user name contained in strUsername 
// and the password to the contents of strPassword.
       
InternetSetOption( hRequest, INTERNET_OPTION_PROXY_USERNAME, 
                   strUsername, strlen(strUsername) + 1 );

InternetSetOption( hRequest, INTERNET_OPTION_PROXY_PASSWORD, 
                   strPassword, strlen(strPassword) + 1 );
```

<span data-ttu-id="b5406-259">Para compatibilidade, as credenciais de usuário podem ser definidas de forma semelhante no WinHTTP usando a função [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , mas isso não é recomendado porque pode representar uma vulnerabilidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="b5406-259">For compatibility, user credentials can similarly be set in WinHTTP using the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, but this is not recommended because it can pose a security vulnerability.</span></span>

<span data-ttu-id="b5406-260">Em vez disso, quando um aplicativo recebe um código de status 401 no WinHTTP, o método recomendado de configuração de credenciais é primeiro para identificar um esquema de autenticação usando [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) e, segundo, definir as credenciais usando [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="b5406-260">Instead, when an application receives a 401 status code in WinHTTP, the recommended method of setting credentials is first to identify an authentication scheme using [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) and, second, set the credentials using [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span> <span data-ttu-id="b5406-261">O exemplo de código a seguir mostra como fazer isso.</span><span class="sxs-lookup"><span data-stu-id="b5406-261">The following code example shows how to do this.</span></span>

``` syntax
DWORD dwSupportedSchemes;
DWORD dwPrefered;
DWORD dwTarget;

// Obtain the supported and first schemes.
WinHttpQueryAuthSchemes( hRequest, &dwSupportedSchemes, &dwPrefered, &dwTarget );

// Set the credentials before resending the request.
WinHttpSetCredentials( hRequest, dwTarget, dwPrefered, strUsername, strPassword, NULL );
```

<span data-ttu-id="b5406-262">Como não há nenhum equivalente a [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) no WinHTTP, os aplicativos que obtêm credenciais por meio de uma interface do usuário devem fornecer sua própria interface.</span><span class="sxs-lookup"><span data-stu-id="b5406-262">Because there is no equivalent to [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, applications that obtain credentials through a user interface must provide their own interface.</span></span>

<span data-ttu-id="b5406-263">Ao contrário do WinINet, o WinHTTP não armazena senhas em cache.</span><span class="sxs-lookup"><span data-stu-id="b5406-263">Unlike WinINet, WinHTTP does not cache passwords.</span></span> <span data-ttu-id="b5406-264">Credenciais de usuário válidas devem ser fornecidas para cada solicitação.</span><span class="sxs-lookup"><span data-stu-id="b5406-264">Valid user credentials must be supplied for each request.</span></span>

<span data-ttu-id="b5406-265">O WinHTTP não dá suporte ao esquema de autenticação de senha distribuída (DPA) suportado pelo WinINet.</span><span class="sxs-lookup"><span data-stu-id="b5406-265">WinHTTP does not support the Distributed Password Authentication (DPA) scheme supported by WinINet.</span></span> <span data-ttu-id="b5406-266">No entanto, o WinHTTP oferece suporte a Microsoft Passport 1,4.</span><span class="sxs-lookup"><span data-stu-id="b5406-266">WinHTTP does, however, support Microsoft Passport 1.4.</span></span> <span data-ttu-id="b5406-267">Para obter mais informações sobre como usar a autenticação do Passport no WinHTTP, consulte [autenticação do Passport no WinHTTP](passport-authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="b5406-267">For more information about using Passport authentication in WinHTTP, see [Passport Authentication in WinHTTP](passport-authentication-in-winhttp.md).</span></span>

<span data-ttu-id="b5406-268">O WinHTTP não depende das configurações do Internet Explorer para determinar a política de logon automática.</span><span class="sxs-lookup"><span data-stu-id="b5406-268">WinHTTP does not rely on Internet Explorer settings to determine the automatic logon policy.</span></span> <span data-ttu-id="b5406-269">Em vez disso, a política de logon automático é definida com [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="b5406-269">Instead, the auto-logon policy is set with [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="b5406-270">Para obter mais informações sobre autenticação no WinHTTP, incluindo a política de logon automático, consulte [autenticação no WinHTTP](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="b5406-270">For more information about authentication in WinHTTP, including the auto-logon policy, see [Authentication in WinHTTP](authentication-in-winhttp.md).</span></span>

## <a name="differences-in-secure-http-transactions"></a><span data-ttu-id="b5406-271">Diferenças em transações HTTP seguras</span><span class="sxs-lookup"><span data-stu-id="b5406-271">Differences in Secure HTTP Transactions</span></span>

<span data-ttu-id="b5406-272">No WinINet, inicie uma sessão segura usando [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) ou [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), mas no WinHTTP, você deve chamar [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) usando o sinalizador **de \_ \_ segurança sinalizador do WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="b5406-272">In WinINet, initiate a secure session using either [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) or [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), but in WinHTTP, you must call [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) using the **WINHTTP\_FLAG\_SECURE** flag.</span></span>

<span data-ttu-id="b5406-273">Em uma transação HTTP segura, os certificados de servidor podem ser usados para autenticar um servidor no cliente.</span><span class="sxs-lookup"><span data-stu-id="b5406-273">In a secure HTTP transaction, server certificates can be used to authenticate a server to the client.</span></span> <span data-ttu-id="b5406-274">No WinINet, se um certificado de servidor contiver erros, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) falhará e fornecerá detalhes sobre os erros de certificado.</span><span class="sxs-lookup"><span data-stu-id="b5406-274">In WinINet, if a server certificate contains errors, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fails and provides details about the certificate errors.</span></span>

<span data-ttu-id="b5406-275">No WinHttp, os erros de certificado do servidor são tratados de acordo com a versão da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="b5406-275">In WinHttp, server certificate errors are handled according to the version as follows:</span></span>

-   <span data-ttu-id="b5406-276">A partir do WinHttp 5,1, se um certificado de servidor falhar ou contiver erros, a chamada para [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) relatará uma **\_ \_ \_ \_ falha segura de status de retorno de chamada de WinHTTP** na função de retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="b5406-276">Starting with WinHttp 5.1, if a server certificate fails or contains errors, the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) reports a **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** in the callback function.</span></span> <span data-ttu-id="b5406-277">Se o erro gerado por **WinHttpSendRequest** for ignorado, as chamadas subsequentes para [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) falharão com um erro de \_ operação de WinHTTP \_ \_ cancelada.</span><span class="sxs-lookup"><span data-stu-id="b5406-277">If the error generated by **WinHttpSendRequest** is ignored, subsequent calls to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) fail with an ERROR\_WINHTTP\_OPERATION\_CANCELLED error.</span></span>
-   <span data-ttu-id="b5406-278">No WinHTTP 5,0, os erros nos certificados de servidor não, por padrão, causam uma falha na solicitação.</span><span class="sxs-lookup"><span data-stu-id="b5406-278">In WinHTTP 5.0, errors in server certificates do not, by default, cause a request to fail.</span></span> <span data-ttu-id="b5406-279">Em vez disso, os erros são relatados na função de retorno de chamada com a notificação de **\_ \_ \_ \_ falha segura de status de retorno de chamada WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="b5406-279">Instead, the errors are reported in the callback function with the **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** notification.</span></span>

<span data-ttu-id="b5406-280">Em algumas plataformas anteriores, o WinINet suportava os protocolos PCT (tecnologia de comunicação privada) e/ou Fortezza, embora não no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="b5406-280">On some earlier platforms, WinINet supported the Private Communication Technology (PCT) and/or Fortezza protocols, although not on Windows XP.</span></span>

<span data-ttu-id="b5406-281">O WinHTTP não dá suporte aos protocolos PCT e Fortezza em nenhuma plataforma e, em vez disso, depende de protocolo SSL (SSL) 2,0, SSL 3,0 ou TLS (Transport Layer Security) 1,0.</span><span class="sxs-lookup"><span data-stu-id="b5406-281">WinHTTP does not support the PCT and Fortezza protocols on any platform, and instead relies on Secure Sockets Layer (SSL) 2.0, SSL 3.0, or Transport Layer Security (TLS) 1.0.</span></span>

 

 
