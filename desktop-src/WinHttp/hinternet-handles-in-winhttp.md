---
description: O Microsoft Windows HTTP Services (WinHTTP) usa identificadores para controlar as configurações e as informações necessárias ao usar o protocolo HTTP.
ms.assetid: 0bd82860-1347-40c8-ae77-c4d865c109be
title: HINTERNET identificadores no WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bf374675ad6f2114dd48e0a3ff1db50cd0dd7f9c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104568407"
---
# <a name="hinternet-handles-in-winhttp"></a><span data-ttu-id="d406f-103">HINTERNET identificadores no WinHTTP</span><span class="sxs-lookup"><span data-stu-id="d406f-103">HINTERNET Handles in WinHTTP</span></span>

<span data-ttu-id="d406f-104">O Microsoft Windows HTTP Services (WinHTTP) usa identificadores para controlar as configurações e as informações necessárias ao usar o protocolo HTTP.</span><span class="sxs-lookup"><span data-stu-id="d406f-104">Microsoft Windows HTTP Services (WinHTTP) uses handles to keep track of settings and information required when using the HTTP protocol.</span></span> <span data-ttu-id="d406f-105">Cada identificador mantém informações pertinentes a uma sessão HTTP, uma conexão com um servidor HTTP ou um recurso específico.</span><span class="sxs-lookup"><span data-stu-id="d406f-105">Each handle maintains information pertinent to an HTTP session, a connection with an HTTP server, or a specific resource.</span></span> <span data-ttu-id="d406f-106">Este tópico descreve os vários tipos de identificadores, as convenções de nomenclatura para esses identificadores e sua estrutura hierárquica.</span><span class="sxs-lookup"><span data-stu-id="d406f-106">This topic describes the various types of handles, the naming conventions for these handles, and their hierarchical structure.</span></span>

-   [<span data-ttu-id="d406f-107">Sobre identificadores de HINTERNET</span><span class="sxs-lookup"><span data-stu-id="d406f-107">About HINTERNET Handles</span></span>](#about-hinternet-handles)
-   [<span data-ttu-id="d406f-108">Identificadores de nomenclatura</span><span class="sxs-lookup"><span data-stu-id="d406f-108">Naming Handles</span></span>](#naming-handles)
-   [<span data-ttu-id="d406f-109">Hierarquia de identificadores</span><span class="sxs-lookup"><span data-stu-id="d406f-109">Handle Hierarchy</span></span>](#handle-hierarchy)
-   [<span data-ttu-id="d406f-110">Explicação da hierarquia de identificadores</span><span class="sxs-lookup"><span data-stu-id="d406f-110">Explanation of the Handle Hierarchy</span></span>](#explanation-of-the-handle-hierarchy)

## <a name="about-hinternet-handles"></a><span data-ttu-id="d406f-111">Sobre identificadores de HINTERNET</span><span class="sxs-lookup"><span data-stu-id="d406f-111">About HINTERNET Handles</span></span>

<span data-ttu-id="d406f-112">Os identificadores criados e usados pelo WinHTTP são chamados de identificadores **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-112">The handles that are created and used by WinHTTP are called **HINTERNET** handles.</span></span> <span data-ttu-id="d406f-113">As funções WinHTTP retornam identificadores **HINTERNET** que não são intercambiáveis com outros identificadores, portanto, não podem ser usadas com funções como [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) ou [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle).</span><span class="sxs-lookup"><span data-stu-id="d406f-113">The WinHTTP functions return **HINTERNET** handles that are not interchangeable with other handles, so they cannot be used with functions such as [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) or [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle).</span></span> <span data-ttu-id="d406f-114">Da mesma forma, outros identificadores não podem ser usados com funções WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="d406f-114">Similarly, other handles cannot be used with WinHTTP functions.</span></span> <span data-ttu-id="d406f-115">Por exemplo, um identificador retornado por [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) não pode ser passado para [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata).</span><span class="sxs-lookup"><span data-stu-id="d406f-115">For example, a handle returned by [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) cannot be passed to [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata).</span></span> <span data-ttu-id="d406f-116">Esses identificadores **HINTERNET** não podem ser fechados enquanto uma chamada à API usando o identificador está em andamento.</span><span class="sxs-lookup"><span data-stu-id="d406f-116">These **HINTERNET** handles cannot be closed while an API call using the handle is in progress.</span></span> <span data-ttu-id="d406f-117">Para evitar uma condição de corrida, os aplicativos devem proteger o identificador e impedir que ele seja fechado enquanto a chamada à API estiver em andamento.</span><span class="sxs-lookup"><span data-stu-id="d406f-117">To avoid a race condition, applications should protect the handle and prevent it from being closed for as long as the API call is in progress.</span></span>

<span data-ttu-id="d406f-118">As funções do Microsoft Win32 Internet (WinInet) também usam identificadores **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-118">Microsoft Win32 Internet (WinInet) functions also use **HINTERNET** handles.</span></span> <span data-ttu-id="d406f-119">No entanto, os identificadores usados nas funções do WinInet não podem ser trocados com os identificadores usados nas funções do WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="d406f-119">However, the handles used in WinInet functions cannot be interchanged with the handles used in WinHTTP functions.</span></span> <span data-ttu-id="d406f-120">Para obter mais informações sobre o WinInet, consulte [sobre o WinInet](/windows/desktop/WinInet/about-wininet).</span><span class="sxs-lookup"><span data-stu-id="d406f-120">For more information about WinInet, see [About WinINet](/windows/desktop/WinInet/about-wininet).</span></span>

<span data-ttu-id="d406f-121">A função [**WinHttpCloseHandle**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle) fecha os identificadores de **HINTERNET** do WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="d406f-121">The [**WinHttpCloseHandle**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle) function closes WinHTTP **HINTERNET** handles.</span></span>

## <a name="naming-handles"></a><span data-ttu-id="d406f-122">Identificadores de nomenclatura</span><span class="sxs-lookup"><span data-stu-id="d406f-122">Naming Handles</span></span>

<span data-ttu-id="d406f-123">Em toda a documentação do WinHTTP, as descrições das funções na API (interface de programação de aplicativo) e no código de exemplo mostram a criação e o uso de vários tipos de identificadores de **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-123">Throughout the WinHTTP documentation, descriptions of functions in the application programming interface (API) and sample code show the creation and use of various types of **HINTERNET** handles.</span></span> <span data-ttu-id="d406f-124">Para controlar os diferentes tipos de identificadores disponíveis, a nomeação desses identificadores é consistente.</span><span class="sxs-lookup"><span data-stu-id="d406f-124">To keep track of the different types of handles available, the naming of these handles is consistent.</span></span> <span data-ttu-id="d406f-125">A tabela a seguir mostra os identificadores usados pela Convenção na documentação do.</span><span class="sxs-lookup"><span data-stu-id="d406f-125">The following table shows the identifiers used by convention in the documentation.</span></span>



| <span data-ttu-id="d406f-126">Tipo de identificador</span><span class="sxs-lookup"><span data-stu-id="d406f-126">Handle type</span></span>       | <span data-ttu-id="d406f-127">Identificador de criação de função</span><span class="sxs-lookup"><span data-stu-id="d406f-127">Function creating handle</span></span>                                                                                                          | <span data-ttu-id="d406f-128">Identificador</span><span class="sxs-lookup"><span data-stu-id="d406f-128">Identifier</span></span> |
|-------------------|-----------------------------------------------------------------------------------------------------------------------------------|------------|
| <span data-ttu-id="d406f-129">Identificador genérico</span><span class="sxs-lookup"><span data-stu-id="d406f-129">Generic handle</span></span>    | <span data-ttu-id="d406f-130">[**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen), [**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)ou [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)</span><span class="sxs-lookup"><span data-stu-id="d406f-130">[**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen), [**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), or [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)</span></span> | <span data-ttu-id="d406f-131">hInternet</span><span class="sxs-lookup"><span data-stu-id="d406f-131">hInternet</span></span>  |
| <span data-ttu-id="d406f-132">Identificador de sessão</span><span class="sxs-lookup"><span data-stu-id="d406f-132">Session handle</span></span>    | [<span data-ttu-id="d406f-133">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="d406f-133">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                | <span data-ttu-id="d406f-134">hSession</span><span class="sxs-lookup"><span data-stu-id="d406f-134">hSession</span></span>   |
| <span data-ttu-id="d406f-135">Identificador de conexão</span><span class="sxs-lookup"><span data-stu-id="d406f-135">Connection handle</span></span> | [<span data-ttu-id="d406f-136">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="d406f-136">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                          | <span data-ttu-id="d406f-137">hConnect</span><span class="sxs-lookup"><span data-stu-id="d406f-137">hConnect</span></span>   |
| <span data-ttu-id="d406f-138">Identificador de solicitação</span><span class="sxs-lookup"><span data-stu-id="d406f-138">Request handle</span></span>    | [<span data-ttu-id="d406f-139">**WinHttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="d406f-139">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                  | <span data-ttu-id="d406f-140">hRequest</span><span class="sxs-lookup"><span data-stu-id="d406f-140">hRequest</span></span>   |



 

## <a name="handle-hierarchy"></a><span data-ttu-id="d406f-141">Hierarquia de identificadores</span><span class="sxs-lookup"><span data-stu-id="d406f-141">Handle Hierarchy</span></span>

<span data-ttu-id="d406f-142">Os identificadores **HINTERNET** são mantidos em uma hierarquia.</span><span class="sxs-lookup"><span data-stu-id="d406f-142">The **HINTERNET** handles are maintained in a hierarchy.</span></span> <span data-ttu-id="d406f-143">O identificador retornado por [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) é o identificador de **HINTERNET** de sessão.</span><span class="sxs-lookup"><span data-stu-id="d406f-143">The handle returned by [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) is the session **HINTERNET** handle.</span></span> <span data-ttu-id="d406f-144">Chamar **WinHttpOpen** inicializa as funções WinHTTP e inicia um contexto de sessão que mantém as informações e configurações do usuário durante a vida útil do identificador da sessão.</span><span class="sxs-lookup"><span data-stu-id="d406f-144">Calling **WinHttpOpen** initializes the WinHTTP functions and begins a session context that maintains user information and settings throughout the life of the session handle.</span></span> <span data-ttu-id="d406f-145">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect) especifica um servidor http ou HTTPS de destino e cria um identificador de **HINTERNET** de conexão.</span><span class="sxs-lookup"><span data-stu-id="d406f-145">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect) specifies a target HTTP or HTTPS server and creates a connection **HINTERNET** handle.</span></span> <span data-ttu-id="d406f-146">Por padrão, o identificador de conexão herda as configurações do identificador de sessão.</span><span class="sxs-lookup"><span data-stu-id="d406f-146">By default, the connection handle inherits the settings for the session handle.</span></span> <span data-ttu-id="d406f-147">Cada recurso especificado com uma chamada para [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) é atribuído a um identificador **HINTERNET** de solicitação.</span><span class="sxs-lookup"><span data-stu-id="d406f-147">Each resource specified with a call to [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) is assigned a request **HINTERNET** handle.</span></span>

<span data-ttu-id="d406f-148">O diagrama a seguir ilustra a hierarquia de identificadores **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-148">The following diagram illustrates the hierarchy of **HINTERNET** handles.</span></span> <span data-ttu-id="d406f-149">Cada caixa no diagrama representa uma função WinHTTP que retorna um identificador **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-149">Each box in the diagram represents a WinHTTP function that returns an **HINTERNET** handle.</span></span>

![funções que criam identificadores](images/art-winhttp2.png)

<span data-ttu-id="d406f-151">Depois de fechar um identificador, o aplicativo deve estar preparado para receber notificações de retorno de chamada no identificador até que o valor final do **identificador de retorno de chamada do WinHTTP seja retornado para indicar \_ \_ \_ \_** que o identificador está completamente fechado.</span><span class="sxs-lookup"><span data-stu-id="d406f-151">After closing a handle, the application must be prepared to receive callback notifications on the handle until the final **WINHTTP\_CALLBACK\_STATUS\_HANDLE\_CLOSED** value is returned to indicate that the handle is completely closed.</span></span>

<span data-ttu-id="d406f-152">Um identificador de sessão é chamado de pai de qualquer identificador de conexão usado para criar; da mesma forma, o identificador de conexão e seu identificador de sessão pai são chamados de pais de qualquer identificador de solicitação que o identificador de conexão é usado para criar.</span><span class="sxs-lookup"><span data-stu-id="d406f-152">A session handle is termed the parent of any connection handle it used to create; likewise, both the connection handle and its parent session handle are termed parents of any request handle that the connection handle is used to create.</span></span>

<span data-ttu-id="d406f-153">Quando um identificador pai é fechado, todos os filhos que ele tem são indiretamente invalidados, mesmo que não sejam fechados, e as solicitações subsequentes que os utilizam falham com o **\_ \_ identificador inválido de erro** de erro.</span><span class="sxs-lookup"><span data-stu-id="d406f-153">When a parent handle is closed, any children it has are indirectly invalidated even if not closed themselves, and subsequent requests using them fail with the error **ERROR\_INVALID\_HANDLE**.</span></span> <span data-ttu-id="d406f-154">Não é possível confiar em solicitações assíncronas pendentes para concluir corretamente.</span><span class="sxs-lookup"><span data-stu-id="d406f-154">Pending asynchronous requests cannot be relied on to complete correctly.</span></span>

<span data-ttu-id="d406f-155">O diagrama a seguir mostra as funções que usam o identificador **HINTERNET** criado pelo [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="d406f-155">The following diagram shows the functions that use the **HINTERNET** handle created by [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="d406f-156">As caixas sombreadas representam as funções do WinHTTP que criam identificadores, e as caixas simples mostram as funções que usam esses identificadores de **HINTERNET** .</span><span class="sxs-lookup"><span data-stu-id="d406f-156">The shaded boxes represent WinHTTP functions that create handles, and the plain boxes show the functions that use those **HINTERNET** handles.</span></span> <span data-ttu-id="d406f-157">O diagrama também é organizado para mostrar a ordem na qual as funções de WinHTTP são normalmente chamadas.</span><span class="sxs-lookup"><span data-stu-id="d406f-157">The diagram is also organized to show the order in which WinHTTP functions are normally called.</span></span>

![funções que criam identificadores](images/art-winhttp2.png)

## <a name="explanation-of-the-handle-hierarchy"></a><span data-ttu-id="d406f-159">Explicação da hierarquia de identificadores</span><span class="sxs-lookup"><span data-stu-id="d406f-159">Explanation of the Handle Hierarchy</span></span>

<span data-ttu-id="d406f-160">Primeiro, um identificador de sessão é criado com [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen).</span><span class="sxs-lookup"><span data-stu-id="d406f-160">First, a session handle is created with [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen).</span></span> <span data-ttu-id="d406f-161">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect) requer o identificador de sessão como seu primeiro parâmetro e retorna um identificador de conexão para um servidor especificado.</span><span class="sxs-lookup"><span data-stu-id="d406f-161">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect) requires the session handle as its first parameter and returns a connection handle for a specified server.</span></span> <span data-ttu-id="d406f-162">Um identificador de solicitação é criado por [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), que usa o identificador de conexão criado pelo [**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect).</span><span class="sxs-lookup"><span data-stu-id="d406f-162">A request handle is created by [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), which uses the connection handle created by [**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect).</span></span> <span data-ttu-id="d406f-163">Se o aplicativo optar por adicionar mais cabeçalhos à solicitação, ou se for necessário que o aplicativo defina credenciais para autenticação, [**WinHttpAddRequestHeaders**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders) e [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) poderão ser chamados usando esse identificador de solicitação.</span><span class="sxs-lookup"><span data-stu-id="d406f-163">If the application chooses to add additional headers to the request, or if is it necessary for the application to set credentials for authentication, [**WinHttpAddRequestHeaders**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders) and [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) can be called using this request handle.</span></span> <span data-ttu-id="d406f-164">A solicitação é enviada pelo [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), que usa o identificador de solicitação.</span><span class="sxs-lookup"><span data-stu-id="d406f-164">The request is sent by [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), which uses the request handle.</span></span> <span data-ttu-id="d406f-165">Depois de enviar a solicitação, os dados adicionais podem ser enviados ao servidor usando [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)ou o aplicativo pode pular diretamente para [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) para especificar que nenhuma informação é enviada ao servidor.</span><span class="sxs-lookup"><span data-stu-id="d406f-165">After sending the request, additional data can be sent to the server using [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), or the application can skip directly to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) to specify that no more information is sent to the server.</span></span> <span data-ttu-id="d406f-166">Neste ponto, dependendo da finalidade do aplicativo, o identificador de solicitação pode ser usado para chamar [**WinHttpQueryHeaders**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders), [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes)ou recuperar um recurso com [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) e [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata).</span><span class="sxs-lookup"><span data-stu-id="d406f-166">At this point, depending on the purpose of the application, the request handle can be used to call [**WinHttpQueryHeaders**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders), [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes), or retrieve a resource with [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) and [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata).</span></span>

 

 
