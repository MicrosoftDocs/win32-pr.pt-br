---
description: Os conjuntos de API são grupos funcionais de APIs do Win32 no sistema operacional principal. Eles fornecem uma separação de arquitetura da DLL do host na qual uma determinada API Win32 é definida e o grupo funcional ao qual a API pertence.
title: Conjuntos de API do Windows
ms.topic: article
ms.date: 10/14/2020
ms.openlocfilehash: 15c8e6ad8124abf06e6ab3c2a8ca2bcd83772855
ms.sourcegitcommit: db89157e3be911fdce2e543e99faa31fb2403bc8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/18/2020
ms.locfileid: "104454482"
---
# <a name="windows-api-sets"></a><span data-ttu-id="c0c86-104">Conjuntos de API do Windows</span><span class="sxs-lookup"><span data-stu-id="c0c86-104">Windows API sets</span></span>

<span data-ttu-id="c0c86-105">Todas as versões do Windows 10 compartilham uma base comum de componentes do sistema operacional que é chamada de *sistema operacional principal* (em alguns contextos essa base comum também é chamada de *OneCore*).</span><span class="sxs-lookup"><span data-stu-id="c0c86-105">All versions of Windows 10 share a common base of OS components that is called the *core OS* (in some contexts this common base is also called *OneCore*).</span></span> <span data-ttu-id="c0c86-106">Em componentes do sistema operacional básico, as APIs do Win32 são organizadas em grupos funcionais chamados de *conjuntos de API*.</span><span class="sxs-lookup"><span data-stu-id="c0c86-106">In core OS components, Win32 APIs are organized into functional groups called *API sets*.</span></span>

<span data-ttu-id="c0c86-107">A finalidade de um conjunto de API é fornecer uma separação de arquitetura da DLL do host em que uma determinada API Win32 é implementada e o contrato funcional ao qual a API pertence.</span><span class="sxs-lookup"><span data-stu-id="c0c86-107">The purpose of an API set is to provide an architectural separation from the host DLL in which a given Win32 API is implemented and the functional contract to which the API belongs.</span></span> <span data-ttu-id="c0c86-108">A desassociação que os conjuntos de API fornecem entre a implementação e os contratos oferece muitas vantagens de engenharia para os desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="c0c86-108">The decoupling that API sets provide between implementation and contracts offers many engineering advantages for developers.</span></span> <span data-ttu-id="c0c86-109">Em particular, o uso de conjuntos de API em seu código pode melhorar a compatibilidade com todos os dispositivos com Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-109">In particular, using API sets in your code can improve compatibility with all Windows 10 devices.</span></span>

<span data-ttu-id="c0c86-110">Os conjuntos de API abordam especificamente os seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="c0c86-110">API sets specifically address the following scenarios:</span></span>

- <span data-ttu-id="c0c86-111">Embora a amplitude completa da API do Win32 tenha suporte em PCs, apenas um subconjunto da API do Win32 está disponível em outros dispositivos Windows 10, como o HoloLens, o Xbox e outros dispositivos que executam o Windows 10x.</span><span class="sxs-lookup"><span data-stu-id="c0c86-111">Although the full breadth of the Win32 API is supported on PCs, only a subset of the Win32 API is available on other Windows 10 devices such as HoloLens, Xbox, and other devices running Windows 10x.</span></span> <span data-ttu-id="c0c86-112">O nome do conjunto de APIs fornece um mecanismo de consulta para detectar corretamente se uma API está disponível em um determinado dispositivo.</span><span class="sxs-lookup"><span data-stu-id="c0c86-112">The API set name provides a query mechanism to cleanly detect whether an API is available on any given device.</span></span>

- <span data-ttu-id="c0c86-113">Existem algumas implementações de API do Win32 em DLLs com nomes diferentes em diferentes dispositivos Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-113">Some Win32 API implementations exist in DLLs with different names across different Windows 10 devices.</span></span> <span data-ttu-id="c0c86-114">Usar nomes de conjunto de API em vez de nomes de DLL ao detectar disponibilidade de API e atrasar o carregamento de APIs fornece uma rota correta para a implementação, independentemente de onde a API seja realmente implementada.</span><span class="sxs-lookup"><span data-stu-id="c0c86-114">Using API set names instead of DLL names when detecting API availability and delay loading APIs provide a correct route to the implementation no matter where the API is actually implemented.</span></span>

<span data-ttu-id="c0c86-115">Para obter mais detalhes, consulte [API Set Loader operação](api-set-loader-operation.md) e [detectar a disponibilidade do conjunto de API](detect-api-set-availability.md).</span><span class="sxs-lookup"><span data-stu-id="c0c86-115">For more details, see [API set loader operation](api-set-loader-operation.md) and [Detect API set availability](detect-api-set-availability.md).</span></span>

## <a name="linking-to-umbrella-libraries"></a><span data-ttu-id="c0c86-116">Vinculando a bibliotecas de abrangência</span><span class="sxs-lookup"><span data-stu-id="c0c86-116">Linking to umbrella libraries</span></span>

<span data-ttu-id="c0c86-117">Para facilitar a restrição de seu código para as APIs do Win32 com suporte no sistema operacional principal, fornecemos uma série de *bibliotecas de abrangência*.</span><span class="sxs-lookup"><span data-stu-id="c0c86-117">To make it easier to restrict your code to Win32 APIs that are supported in the core OS, we provide a series of *umbrella libraries*.</span></span> <span data-ttu-id="c0c86-118">Por exemplo, uma biblioteca abrangente chamada OneCore. lib fornece as exportações para o subconjunto de APIs do Win32 que são comuns a todos os dispositivos Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-118">For example, an umbrella library named OneCore.lib provides the exports for the subset of Win32 APIs that are common to all Windows 10 devices.</span></span>

<span data-ttu-id="c0c86-119">As APIs em uma biblioteca abrangente podem ser implementadas em uma variedade de módulos.</span><span class="sxs-lookup"><span data-stu-id="c0c86-119">The APIs in an umbrella library may be implemented across a range of modules.</span></span> <span data-ttu-id="c0c86-120">A biblioteca de abrangência abstrai esses detalhes, tornando seu código mais portátil em versões e dispositivos do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-120">The umbrella library abstracts those details away from you, making your code more portable across Windows 10 versions and devices.</span></span> <span data-ttu-id="c0c86-121">Em vez de vincular a bibliotecas como Kernel32. lib e Advapi32. lib, basta vincular seu aplicativo de área de trabalho ou driver à biblioteca de abrangência que contém o conjunto de APIs do sistema operacional principal em que você está interessado.</span><span class="sxs-lookup"><span data-stu-id="c0c86-121">Instead of linking to libraries such as kernel32.lib and advapi32.lib, simply link your desktop app or driver with the umbrella library that contains the set of core OS APIs that you're interested in.</span></span>

<span data-ttu-id="c0c86-122">Para obter mais detalhes, consulte [bibliotecas de abrangência do Windows](windows-umbrella-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="c0c86-122">For more details, see [Windows umbrella libraries](windows-umbrella-libraries.md).</span></span>

## <a name="api-set-contract-names"></a><span data-ttu-id="c0c86-123">Nomes de contrato de conjunto de API</span><span class="sxs-lookup"><span data-stu-id="c0c86-123">API set contract names</span></span>

<span data-ttu-id="c0c86-124">Os conjuntos de API são identificados por um nome de contrato forte que segue essas convenções padrão reconhecidas pelo carregador de biblioteca.</span><span class="sxs-lookup"><span data-stu-id="c0c86-124">API sets are identified by a strong contract name that follows these standard conventions recognized by the library loader.</span></span> 

- <span data-ttu-id="c0c86-125">O nome deve começar com a cadeia de caracteres **API-** ou **ext-**.</span><span class="sxs-lookup"><span data-stu-id="c0c86-125">The name must begin either with the string **api-** or **ext-**.</span></span> 
    - <span data-ttu-id="c0c86-126">Nomes que começam com **API –** representam APIs que têm garantia de existência em todas as versões do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-126">Names that begin with **api-** represent APIs that are guaranteed to exist on all Windows 10 versions.</span></span>
    - <span data-ttu-id="c0c86-127">Nomes que começam com **ext-** representam APIs que podem não existir em todas as versões do Windows 10.</span><span class="sxs-lookup"><span data-stu-id="c0c86-127">Names that begin with **ext-** represent APIs that may not exist on all Windows 10 versions.</span></span>
- <span data-ttu-id="c0c86-128">O nome deve terminar com a sequência **l \<n\> - \<n\> - \<n\>**, em que **n** consiste em dígitos decimais.</span><span class="sxs-lookup"><span data-stu-id="c0c86-128">The name must end with the sequence **l\<n\>-\<n\>-\<n\>**, where **n** consists of decimal digits.</span></span>
- <span data-ttu-id="c0c86-129">O corpo do nome pode ser caracteres alfanuméricos ou traços ( **-** ).</span><span class="sxs-lookup"><span data-stu-id="c0c86-129">The body of the name can be alphanumeric characters, or dashes (**-**).</span></span>
- <span data-ttu-id="c0c86-130">O nome diferencia maiúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="c0c86-130">The name is case insensitive.</span></span>

<span data-ttu-id="c0c86-131">Aqui estão alguns exemplos de nomes de contrato de conjunto de API:</span><span class="sxs-lookup"><span data-stu-id="c0c86-131">Here are some examples of API set contract names:</span></span>

- <span data-ttu-id="c0c86-132">**API-MS-Win-Core-ums-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="c0c86-132">**api-ms-win-core-ums-l1-1-0**</span></span>
- <span data-ttu-id="c0c86-133">**ext-MS-Win-com-Ole32-L1-1-5**</span><span class="sxs-lookup"><span data-stu-id="c0c86-133">**ext-ms-win-com-ole32-l1-1-5**</span></span>
- <span data-ttu-id="c0c86-134">**ext-MS-Win-Ntuser-Window-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="c0c86-134">**ext-ms-win-ntuser-window-l1-1-0**</span></span>
- <span data-ttu-id="c0c86-135">**ext-MS-Win-Ntuser-Window-L1-1-1**</span><span class="sxs-lookup"><span data-stu-id="c0c86-135">**ext-ms-win-ntuser-window-l1-1-1**</span></span>

<span data-ttu-id="c0c86-136">Você pode usar um nome de conjunto de API no contexto de uma operação de carregador, como [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) ou [P/Invoke](/dotnet/standard/native-interop/pinvoke) , em vez de um nome de módulo de dll para garantir uma rota correta para a implementação, independentemente de onde a API seja realmente implementada no dispositivo atual.</span><span class="sxs-lookup"><span data-stu-id="c0c86-136">You can use an API set name in the context of a loader operation such as [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) or [P/Invoke](/dotnet/standard/native-interop/pinvoke) instead of a DLL module name to ensure a correct route to the implementation no matter where the API is actually implemented on the current device.</span></span> <span data-ttu-id="c0c86-137">No entanto, ao fazer isso, você deve acrescentar o String **. dll** ao final do nome do contrato.</span><span class="sxs-lookup"><span data-stu-id="c0c86-137">However, when you do this you must append the string **.dll** at the end of the contract name.</span></span> <span data-ttu-id="c0c86-138">Esse é um requisito do carregador para funcionar corretamente e não é considerado realmente uma parte do nome do contrato.</span><span class="sxs-lookup"><span data-stu-id="c0c86-138">This is a requirement of the loader to function properly, and is not considered actually a part of the contract name.</span></span> <span data-ttu-id="c0c86-139">Embora os nomes de contrato sejam semelhantes aos nomes de DLL neste contexto, eles são fundamentalmente diferentes dos nomes de módulo de DLL e não se referem diretamente a um arquivo no disco.</span><span class="sxs-lookup"><span data-stu-id="c0c86-139">Although contract names appear similar to DLL names in this context, they are fundamentally different from DLL module names and do not directly refer to a file on disk.</span></span>

<span data-ttu-id="c0c86-140">Exceto para acrescentar a String **. dll** em operações de carregador, os nomes de contrato de conjunto de API devem ser considerados um identificador imutável que corresponde a uma versão de contrato específica.</span><span class="sxs-lookup"><span data-stu-id="c0c86-140">Except for appending the string **.dll** in loader operations, API set contract names should be considered an immutable identifier that corresponds to a specific contract version.</span></span>

## <a name="identifying-api-sets-for-win32-apis"></a><span data-ttu-id="c0c86-141">Identificando conjuntos de API para APIs do Win32</span><span class="sxs-lookup"><span data-stu-id="c0c86-141">Identifying API sets for Win32 APIs</span></span>

<span data-ttu-id="c0c86-142">Para identificar se uma determinada API do Win32 pertence a um conjunto de API, examine a tabela de requisitos na documentação de referência da API.</span><span class="sxs-lookup"><span data-stu-id="c0c86-142">To identify whether a particular Win32 API belongs to an API set, review the requirements table in the reference documentation for the API.</span></span> <span data-ttu-id="c0c86-143">Se a API pertencer a um conjunto de API, a tabela de requisitos no artigo listará o nome do conjunto de API e a versão do Windows na qual a API foi introduzida pela primeira vez no conjunto de API.</span><span class="sxs-lookup"><span data-stu-id="c0c86-143">If the API belongs to an API set, the requirements table in the article lists the API set name and the Windows version in which the API was first introduced to the API set.</span></span> <span data-ttu-id="c0c86-144">Para obter exemplos de APIs que pertencem a um conjunto de API, consulte estes artigos:</span><span class="sxs-lookup"><span data-stu-id="c0c86-144">For examples of APIs that belong to an API set, see these articles:</span></span>

- [<span data-ttu-id="c0c86-145">AllowSetForegroundWindow</span><span class="sxs-lookup"><span data-stu-id="c0c86-145">AllowSetForegroundWindow</span></span>](/windows/win32/api/winuser/nf-winuser-allowsetforegroundwindow)
- [<span data-ttu-id="c0c86-146">FindWindowsEx</span><span class="sxs-lookup"><span data-stu-id="c0c86-146">FindWindowsEx</span></span>](/windows/win32/api/winuser/nf-winuser-findwindowexa)
- [<span data-ttu-id="c0c86-147">GetClassFile</span><span class="sxs-lookup"><span data-stu-id="c0c86-147">GetClassFile</span></span>](/windows/win32/api/objbase/nf-objbase-getclassfile)

## <a name="in-this-section"></a><span data-ttu-id="c0c86-148">Nesta seção</span><span class="sxs-lookup"><span data-stu-id="c0c86-148">In this section</span></span>

* [<span data-ttu-id="c0c86-149">Operação de carregador de conjunto de API</span><span class="sxs-lookup"><span data-stu-id="c0c86-149">API set loader operation</span></span>](api-set-loader-operation.md)
* [<span data-ttu-id="c0c86-150">Detectar disponibilidade do conjunto de API</span><span class="sxs-lookup"><span data-stu-id="c0c86-150">Detect API set availability</span></span>](detect-api-set-availability.md)
* [<span data-ttu-id="c0c86-151">Bibliotecas de abrangência do Windows</span><span class="sxs-lookup"><span data-stu-id="c0c86-151">Windows umbrella libraries</span></span>](windows-umbrella-libraries.md)