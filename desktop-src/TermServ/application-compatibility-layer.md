---
title: Camada de compatibilidade de aplicativos
description: Para executar aplicativos herdados em um ambiente Serviços de Área de Trabalho Remota, você pode usar a camada de compatibilidade de aplicativos Serviços de Área de Trabalho Remota.
ms.assetid: 6e61ed45-4fcb-4aee-b8cc-638a9b87ce00
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3e7bbc5867e42951783d3666aa770cdcc45406f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "105782882"
---
# <a name="application-compatibility-layer"></a><span data-ttu-id="96fa8-103">Camada de compatibilidade de aplicativos</span><span class="sxs-lookup"><span data-stu-id="96fa8-103">Application compatibility layer</span></span>

<span data-ttu-id="96fa8-104">Para executar aplicativos herdados em um ambiente Serviços de Área de Trabalho Remota, você pode usar a camada de compatibilidade de aplicativos Serviços de Área de Trabalho Remota.</span><span class="sxs-lookup"><span data-stu-id="96fa8-104">To run legacy applications in a Remote Desktop Services environment you can use the Remote Desktop Services Application Compatibility layer.</span></span> <span data-ttu-id="96fa8-105">Quando o servidor de Host da Sessão da Área de Trabalho Remota (Host da Sessão RD) carrega um aplicativo que não está Serviços de Área de Trabalho Remota ciente, ele também carrega uma DLL que contém o código de compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="96fa8-105">When the Remote Desktop Session Host (RD Session Host) server loads an application that is not Remote Desktop Services aware, it also loads a DLL that contains compatibility code.</span></span> <span data-ttu-id="96fa8-106">Para usar a camada de compatibilidade de aplicativos Serviços de Área de Trabalho Remota, você pode definir o sinalizador NOT TSAWARE ao compilar um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="96fa8-106">To use the Remote Desktop Services Application Compatibility layer, you can set the NOT TSAWARE flag when compiling an application.</span></span>

<span data-ttu-id="96fa8-107">Se seu aplicativo estiver Serviços de Área de Trabalho Remota ciente, você poderá evitar a sobrecarga de carregar essa DLL extra e executar o código de compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="96fa8-107">If your application is Remote Desktop Services aware, you can avoid the overhead of loading this extra DLL and running the compatibility code.</span></span>

<span data-ttu-id="96fa8-108">Para indicar que seu aplicativo está Serviços de Área de Trabalho Remota ciente, defina o sinalizador de **reconhecimento de imagem \_ DLLCHARACTERISTICS \_ terminal \_ Server \_** no cabeçalho opcional.</span><span class="sxs-lookup"><span data-stu-id="96fa8-108">To indicate that your application is Remote Desktop Services aware, set the **IMAGE\_DLLCHARACTERISTICS\_TERMINAL\_SERVER\_AWARE** flag in the optional header.</span></span> <span data-ttu-id="96fa8-109">Se você estiver usando o vinculador fornecido com Microsoft Visual C++, poderá usar a opção vinculador **TSAWARE** para definir esse sinalizador.</span><span class="sxs-lookup"><span data-stu-id="96fa8-109">If you are using the linker that ships with Microsoft Visual C++, you can use the **TSAWARE** linker option to set this flag.</span></span> <span data-ttu-id="96fa8-110">A ferramenta **DUMPBIN** fornecida com Microsoft Visual C++ fornece a opção */Headers* para determinar o estado do sinalizador **TSAWARE** .</span><span class="sxs-lookup"><span data-stu-id="96fa8-110">The **DUMPBIN** tool that ships with Microsoft Visual C++ provides the */HEADERS* option to determine the state of the **TSAWARE** flag.</span></span> <span data-ttu-id="96fa8-111">Para obter mais informações sobre como usar a ferramenta **DUMPBIN** , consulte [referência do DUMPBIN](/cpp/build/reference/dumpbin-reference?view=vs-2019).</span><span class="sxs-lookup"><span data-stu-id="96fa8-111">For more information about using the **DUMPBIN** tool, see [DUMPBIN Reference](/cpp/build/reference/dumpbin-reference?view=vs-2019).</span></span>

<span data-ttu-id="96fa8-112">Tenha cuidado ao usar o sinalizador **TSAWARE** porque ele permite que seu aplicativo ignore quaisquer serviços de área de trabalho remota otimizações de compatibilidade.</span><span class="sxs-lookup"><span data-stu-id="96fa8-112">Be careful when you use the **TSAWARE** flag because it enables your application to bypass any Remote Desktop Services compatibility optimizations.</span></span> <span data-ttu-id="96fa8-113">O sinalizador **TSAWARE** só deverá ser usado se você tiver certeza de que seu aplicativo foi projetado para o ambiente de serviços de área de trabalho remota.</span><span class="sxs-lookup"><span data-stu-id="96fa8-113">The **TSAWARE** flag should only be used if you are certain that your application is designed for the Remote Desktop Services environment.</span></span> <span data-ttu-id="96fa8-114">Se seu aplicativo atender aos critérios a seguir, você poderá usar com segurança o sinalizador de **reconhecimento de imagem do \_ DLLCHARACTERISTICS \_ terminal \_ Server \_** .</span><span class="sxs-lookup"><span data-stu-id="96fa8-114">If your application meets the following criteria, you can safely use the **IMAGE\_DLLCHARACTERISTICS\_TERMINAL\_SERVER\_AWARE** flag.</span></span>

-   <span data-ttu-id="96fa8-115">O aplicativo não usa arquivos. ini.</span><span class="sxs-lookup"><span data-stu-id="96fa8-115">The application does not use .ini files.</span></span>
-   <span data-ttu-id="96fa8-116">O aplicativo não grava em **HKEY \_ Current \_ User** durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="96fa8-116">The application does not write to **HKEY\_CURRENT\_USER** during setup.</span></span> <span data-ttu-id="96fa8-117">Para obter mais informações, consulte [armazenando informações de User-Specific](storing-user-specific-information.md).</span><span class="sxs-lookup"><span data-stu-id="96fa8-117">For more information, see [Storing User-Specific Information](storing-user-specific-information.md).</span></span>
-   <span data-ttu-id="96fa8-118">O aplicativo não é executado como um serviço de sistema (ou seja, LUID = System).</span><span class="sxs-lookup"><span data-stu-id="96fa8-118">The application does not run as a system service (that is, LUID=System).</span></span>
-   <span data-ttu-id="96fa8-119">O aplicativo não espera acesso exclusivo ao Windows ou a outros diretórios do sistema.</span><span class="sxs-lookup"><span data-stu-id="96fa8-119">The application does not expect exclusive access to the Windows or other system directories.</span></span> <span data-ttu-id="96fa8-120">Isso significa que o aplicativo não armazena dados de configuração ou temporários por usuário no Windows ou em outros diretórios do sistema.</span><span class="sxs-lookup"><span data-stu-id="96fa8-120">This means that the application does not store per user temporary or configuration data in the Windows or other system directories.</span></span>
-   <span data-ttu-id="96fa8-121">O aplicativo não grava no hive do registro do **computador local hKey** para configuração ou dados específicos do usuário.</span><span class="sxs-lookup"><span data-stu-id="96fa8-121">The application does not write to the **HKEY Local Machine** registry hive for user specific data or configuration.</span></span>
-   <span data-ttu-id="96fa8-122">O aplicativo segue outras diretrizes de compatibilidade Serviços de Área de Trabalho Remota mencionadas neste documento.</span><span class="sxs-lookup"><span data-stu-id="96fa8-122">The application follows other Remote Desktop Services compatibility guidelines mentioned in this document.</span></span>

 

 