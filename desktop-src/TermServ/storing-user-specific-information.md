---
title: Armazenando informações específicas do usuário
description: Aplicativos devem armazenar informações específicas do usuário em locais específicos do usuário, separadamente de informações globais que se aplicam a todos os usuários.
ms.assetid: 32bd1d24-1d2e-4c0a-acdb-0cc67f275e6e
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40c6236b7ba11a8b3149533e920b9b9413085d93
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 08/20/2020
ms.locfileid: "104007712"
---
# <a name="storing-user-specific-information"></a><span data-ttu-id="bbb2f-103">Armazenando informações específicas do usuário</span><span class="sxs-lookup"><span data-stu-id="bbb2f-103">Storing user-specific information</span></span>

<span data-ttu-id="bbb2f-104">Em um ambiente Serviços de Área de Trabalho Remota, os aplicativos devem armazenar informações específicas do usuário em locais específicos do usuário, separadamente das informações globais que se aplicam a todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-104">In a Remote Desktop Services environment, applications should store user-specific information in user-specific locations, separately from global information that applies to all users.</span></span> <span data-ttu-id="bbb2f-105">Essa regra se aplica às informações armazenadas no registro, bem como às informações armazenadas em arquivos.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-105">This rule applies to information stored in the registry, as well as information stored in files.</span></span> <span data-ttu-id="bbb2f-106">Em geral, não presuma que um computador é equivalente a um usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-106">In general, do not assume that one computer is equivalent to one user.</span></span>

<span data-ttu-id="bbb2f-107">Armazene informações de registro específicas do usuário na chave de registro **HKEY \_ Current \_ User** .</span><span class="sxs-lookup"><span data-stu-id="bbb2f-107">Store user-specific registry information under the **HKEY\_CURRENT\_USER** registry key.</span></span> <span data-ttu-id="bbb2f-108">Serviços de Área de Trabalho Remota carrega o hive do registro pessoal do usuário atual em **HKEY \_ Current \_ User** quando o usuário faz logon.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-108">Remote Desktop Services loads the current user's personal registry hive into **HKEY\_CURRENT\_USER** when the user logs on.</span></span> <span data-ttu-id="bbb2f-109">É claro que Serviços de Área de Trabalho Remota gerencia o registro para garantir que cada um dos clientes conectados detecte o hive do usuário correto em **HKEY \_ Current \_ User**.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-109">Of course, Remote Desktop Services manages the registry to ensure that each of the logged-on clients detects the correct user hive under **HKEY\_CURRENT\_USER**.</span></span> <span data-ttu-id="bbb2f-110">Para obter mais informações sobre chaves do registro, consulte [segurança da chave do registro e](/windows/desktop/SysInfo/registry-key-security-and-access-rights) [registros e hives do registro](/windows/desktop/SysInfo/registry-hives).</span><span class="sxs-lookup"><span data-stu-id="bbb2f-110">For more information about registry keys, see [Registry Key Security and Access Rights](/windows/desktop/SysInfo/registry-key-security-and-access-rights) and [Registry Hives](/windows/desktop/SysInfo/registry-hives).</span></span>

<span data-ttu-id="bbb2f-111">Por outro lado, todos os usuários compartilham o hive do **\_ \_ computador local hKey** .</span><span class="sxs-lookup"><span data-stu-id="bbb2f-111">In contrast, all users share the **HKEY\_LOCAL\_MACHINE** hive.</span></span> <span data-ttu-id="bbb2f-112">Use **o \_ \_ computador local hKey** para armazenar informações específicas do computador, não informações específicas do usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-112">Use **HKEY\_LOCAL\_MACHINE** to store computer-specific information, not user-specific information.</span></span>

<span data-ttu-id="bbb2f-113">Armazene arquivos de preferência de usuário ou outros arquivos específicos do usuário no diretório raiz do usuário ou em um diretório especificado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-113">Store user-preference files or other user-specific files in the user's root directory or in a user-specified directory.</span></span> <span data-ttu-id="bbb2f-114">Essa consideração se aplica a arquivos temporários usados para armazenar informações provisórias (como dados armazenados em cache) ou para passar dados para outro aplicativo.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-114">This consideration applies to temporary files used to store interim information (such as cached data) or to pass data on to another application.</span></span> <span data-ttu-id="bbb2f-115">Os arquivos temporários específicos do usuário também devem ser armazenados em uma base por usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-115">User-specific temporary files must also be stored on a per-user basis.</span></span>

<span data-ttu-id="bbb2f-116">Você pode usar a função [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) com o sinalizador de CSIDL \_ pessoal para obter o local do diretório de arquivos pessoais do usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-116">You can use the [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) function with the CSIDL\_PERSONAL flag to get the location of the user's personal files directory.</span></span> <span data-ttu-id="bbb2f-117">Você também pode usar a função [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) para recuperar o caminho do diretório do Windows.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-117">You can also use the [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) function to retrieve the path of the Windows directory.</span></span> <span data-ttu-id="bbb2f-118">Em um ambiente Serviços de Área de Trabalho Remota, é garantido que o diretório do Windows seja privado para cada usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-118">In a Remote Desktop Services environment, the Windows directory is guaranteed to be private for each user.</span></span> <span data-ttu-id="bbb2f-119">Não armazene arquivos específicos do usuário no diretório do sistema, como o WINDOWS ou o diretório do programa, como arquivos de programas.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-119">Do not store user-specific files under the system directory, such as WINDOWS, or program directory, such as Program Files.</span></span>

<span data-ttu-id="bbb2f-120">Para evitar conflitos entre as informações e as preferências dos usuários, os aplicativos devem armazenar informações temporárias por usuário em arquivos temporários específicos do usuário.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-120">To avoid conflicts among users' information and preferences, applications should store per-user temporary information in user-specific temporary files.</span></span> <span data-ttu-id="bbb2f-121">Os arquivos temporários específicos do usuário também impedem falhas de aplicativo causadas por conflitos de bloqueio de arquivo.</span><span class="sxs-lookup"><span data-stu-id="bbb2f-121">User-specific temporary files also prevent application failures caused by file-locking conflicts.</span></span> <span data-ttu-id="bbb2f-122">Para especificar o caminho para armazenar informações temporárias, use a função [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) .</span><span class="sxs-lookup"><span data-stu-id="bbb2f-122">To specify the path for storing temporary information, use the [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) function.</span></span>

 

 