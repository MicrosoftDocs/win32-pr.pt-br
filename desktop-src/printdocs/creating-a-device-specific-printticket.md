---
description: Este tópico não é atual. Para obter as informações mais atuais, consulte a especificação do esquema de impressão.
ms.assetid: 487f294f-dfe0-48f8-9077-06c55c3af8f1
title: Criando um Device-Specific PrintTicket
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d31644f25f231f7121e2e492bc3f41a81b82d0b4
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/05/2021
ms.locfileid: "105782501"
---
# <a name="creating-a-device-specific-printticket"></a><span data-ttu-id="f5222-104">Criando um Device-Specific PrintTicket</span><span class="sxs-lookup"><span data-stu-id="f5222-104">Creating a Device-Specific PrintTicket</span></span>

<span data-ttu-id="f5222-105">Este tópico não é atual.</span><span class="sxs-lookup"><span data-stu-id="f5222-105">This topic is not current.</span></span> <span data-ttu-id="f5222-106">Para obter as informações mais atuais, consulte a [especificação do esquema de impressão](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span><span class="sxs-lookup"><span data-stu-id="f5222-106">For the most current information, see the [Print Schema Specification](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).</span></span>

<span data-ttu-id="f5222-107">Um PrintTicket específico de dispositivo tem como alvo um dispositivo específico e, portanto, não é geralmente portável em vários dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f5222-107">A device-specific PrintTicket targets a particular device and is therefore not generally portable across multiple devices.</span></span>

<span data-ttu-id="f5222-108">As etapas mostradas na lista a seguir devem ser usadas quando você cria um PrintTicket específico do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f5222-108">The steps shown in the following list should be used when you create a device-specific PrintTicket.</span></span>

1.  <span data-ttu-id="f5222-109">Obtenha um documento de PrintCapabilities que contém apenas as instâncias de recurso relevantes para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f5222-109">Obtain a PrintCapabilities document containing only the relevant Feature instances for the device.</span></span> <span data-ttu-id="f5222-110">Solicitar um documento de PrintCapabilities padrão.</span><span class="sxs-lookup"><span data-stu-id="f5222-110">Request a default PrintCapabilities document.</span></span> <span data-ttu-id="f5222-111">Isso não exige que você especifique um PrintTicket de entrada porque os atributos do dispositivo (instâncias de recurso e opção e parâmetros) que são usados para construir o PrintTicket são independentes da configuração.</span><span class="sxs-lookup"><span data-stu-id="f5222-111">This does not require you to specify an input PrintTicket because the device attributes (Feature and Option instances and parameters) that are used to construct the PrintTicket are independent of the configuration.</span></span>

2.  <span data-ttu-id="f5222-112">Crie um documento XML vazio contendo a raiz do PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-112">Create an empty XML document containing the PrintTicket root.</span></span> <span data-ttu-id="f5222-113">Atribua um prefixo de namespace ao namespace de esquema de impressão e atribua prefixos para todos os outros namespaces que serão usados pelo PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-113">Assign a namespace prefix to the Print Schema namespace, and assign prefixes for all other namespaces that will be used by the PrintTicket.</span></span> <span data-ttu-id="f5222-114">Especifique a versão do esquema PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-114">Specify the PrintTicket Schema version.</span></span>

3.  <span data-ttu-id="f5222-115">Você pode definir configurações no PrintTicket para cada recurso e instância ParameterDef relatados no documento PrintCapabilities ou somente aqueles de seu interesse.</span><span class="sxs-lookup"><span data-stu-id="f5222-115">You may define settings in the PrintTicket for every Feature and ParameterDef instance reported in the PrintCapabilities document, or only those of interest to you.</span></span> <span data-ttu-id="f5222-116">Se um PrintTicket parcial for apresentado à interface PrintTicket, os padrões serão fornecidos automaticamente para instâncias de recurso omitido e ParameterDef durante a validação do PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-116">If a partial PrintTicket is presented to the PrintTicket interface, defaults are automatically provided for omitted Feature and ParameterDef instances during PrintTicket validation.</span></span>

4.  <span data-ttu-id="f5222-117">Examine o documento de PrintCapabilities em busca de instâncias de recursos e determine quais delas você deseja definir em seu PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-117">Examine the PrintCapabilities document for Feature instances and determine which of these you want defined in your PrintTicket.</span></span> <span data-ttu-id="f5222-118">Adicione essas instâncias de recurso ao PrintTicket, mas não transfira o conteúdo das instâncias de recurso para o PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-118">Add these Feature instances to the PrintTicket, but do not transfer the contents of the Feature instances to your PrintTicket.</span></span> <span data-ttu-id="f5222-119">Se você transferir um subrecurso, o recurso pai também deverá ser transferido e a relação pai-filho deverá ser preservada no PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-119">If you transfer a subfeature, the parent Feature must also be transferred, and the parent-child relationship must be preserved in the PrintTicket.</span></span>

    <span data-ttu-id="f5222-120">Para cada recurso que você transferir, determine quais instâncias de opção são aplicáveis ao seu PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-120">For each Feature that you transfer, determine which Option instances are applicable to your PrintTicket.</span></span> <span data-ttu-id="f5222-121">Transfira a opção inteira conforme definido no documento PrintCapabilities e, em seguida, remova as instâncias de propriedade que estão presentes.</span><span class="sxs-lookup"><span data-stu-id="f5222-121">Transfer the entire Option as defined in the PrintCapabilities document, and then remove any Property instances that are present.</span></span> <span data-ttu-id="f5222-122">As instâncias de propriedade são usadas em documentos de PrintCapabilities, mas não servem para nenhuma finalidade no PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-122">The Property instances are used within PrintCapabilities documents, but serve no purpose in the PrintTicket.</span></span> <span data-ttu-id="f5222-123">Mantenha todas as instâncias de ScoredProperty, garantindo que você preserve sua localização; Eles são parte intrínseca da definição de opção.</span><span class="sxs-lookup"><span data-stu-id="f5222-123">Keep all of the ScoredProperty instances, making sure that you preserve their location; they are an intrinsic part of the Option definition.</span></span>

5.  <span data-ttu-id="f5222-124">Você também pode adicionar instâncias de propriedade a qualquer instância de ScoredProperty.</span><span class="sxs-lookup"><span data-stu-id="f5222-124">You may also add Property instances to any ScoredProperty instance.</span></span> <span data-ttu-id="f5222-125">As instâncias de propriedade serão usadas somente se o provedor PrintTicket der suporte explicitamente ao seu uso.</span><span class="sxs-lookup"><span data-stu-id="f5222-125">Property instances are used only if the PrintTicket provider explicitly supports their use.</span></span> <span data-ttu-id="f5222-126">Cada provedor deve documentar a finalidade e o uso de todas as instâncias de propriedade com suporte.</span><span class="sxs-lookup"><span data-stu-id="f5222-126">Each provider should document the purpose and use of all supported Property instances.</span></span> <span data-ttu-id="f5222-127">Observe que durante a validação, todas as instâncias de propriedade contidas em uma instância de opção são removidas, a menos que o namespace da propriedade seja reconhecido pelo provedor de PrintCapabilities ou PrintTicket de destino, e uma opção de candidato seja encontrada no documento de PrintCapabilities cujas instâncias ScoredProperty correspondam perfeitamente àquelas definidas na opção de referência.</span><span class="sxs-lookup"><span data-stu-id="f5222-127">Note that during validation, any Property instances contained within an Option instance are stripped off, unless the namespace of the Property is recognized by the target PrintCapabilities or PrintTicket provider, and a candidate Option is found in the PrintCapabilities document whose ScoredProperty instances perfectly match those defined in the reference Option.</span></span>

6.  <span data-ttu-id="f5222-128">Se as palavras-chave do esquema de impressão definirem a Propriedade SelectionType como PickMany para um recurso específico, você poderá selecionar mais de uma opção para esse recurso, desde que a opção designada como IdentityOption não seja aquela selecionada.</span><span class="sxs-lookup"><span data-stu-id="f5222-128">If the Print Schema Keywords set the SelectionType Property to PickMany for a particular Feature, you may select more than one Option for that Feature, provided that the Option designated as IdentityOption is not one of those selected.</span></span> <span data-ttu-id="f5222-129">IdentityOption no esquema de impressão tem o mesmo efeito que a opção None em arquivos PPD PostScript e arquivos GPD do unidrv; Ele serve como um estado não operacional.</span><span class="sxs-lookup"><span data-stu-id="f5222-129">IdentityOption in the Print Schema has the same effect as the None option in Postscript PPD files and Unidrv GPD files; it serves as a no-op.</span></span>

7.  <span data-ttu-id="f5222-130">Examine o documento PrintCapabilities para instâncias ParameterDef que devem ser definidas em seu PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-130">Examine the PrintCapabilities document for ParameterDef instances that should be set in your PrintTicket.</span></span> <span data-ttu-id="f5222-131">Para cada instância de ParameterDef, selecione um valor a ser usado na instância de ParameterInit no PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-131">For each such ParameterDef instance, select a Value to be used in the ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="f5222-132">Esse valor deve ser do tipo de dados correto e deve estar dentro do intervalo definido na instância ParameterDef e deve atender a todos os outros requisitos especificados na instância ParameterDef.</span><span class="sxs-lookup"><span data-stu-id="f5222-132">This Value must be of the correct data type and must fall within the range defined in the ParameterDef instance, and must meet all of the other requirements specified in the ParameterDef instance.</span></span> <span data-ttu-id="f5222-133">Use uma instância de ParameterInit para inicializar o parâmetro para o valor que você selecionou.</span><span class="sxs-lookup"><span data-stu-id="f5222-133">Use a ParameterInit instance to initialize the parameter to the Value you have selected.</span></span>

8.  <span data-ttu-id="f5222-134">Examine o conteúdo de cada instância de opção que aparece no PrintTicket para ocorrências de instâncias de ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="f5222-134">Examine the contents of each Option instance that appears in the PrintTicket for occurrences of ParameterRef instances.</span></span> <span data-ttu-id="f5222-135">Se uma instância ParameterInit correspondente ainda não aparecer no PrintTicket, siga a etapa anterior para criar uma instância ParameterInit no PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-135">If a corresponding ParameterInit instance does not already appear in the PrintTicket, follow the previous step to create a ParameterInit instance in the PrintTicket.</span></span> <span data-ttu-id="f5222-136">A finalidade dessa instância de ParameterInit é inicializar o parâmetro referenciado pela instância ParameterRef.</span><span class="sxs-lookup"><span data-stu-id="f5222-136">The purpose of this ParameterInit instance is to initialize the parameter referenced by the ParameterRef instance.</span></span>

9.  <span data-ttu-id="f5222-137">Tenha em mente que os conflitos de restrição podem impedir que o dispositivo aplique a configuração que você especificou no PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-137">Keep in mind that constraint conflicts might prevent the device from applying the configuration you have specified in the PrintTicket.</span></span> <span data-ttu-id="f5222-138">Se necessário, o processo de validação modifica a configuração definida no PrintTicket para uma sem conflitos.</span><span class="sxs-lookup"><span data-stu-id="f5222-138">If necessary, the validation process modifies the configuration defined in the PrintTicket to one that is free of conflicts.</span></span>

10. <span data-ttu-id="f5222-139">Examine as palavras-chave do esquema de impressão para as instâncias de propriedade que devem estar presentes em seu PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-139">Examine the Print Schema Keywords for Property instances that must be present in your PrintTicket.</span></span> <span data-ttu-id="f5222-140">Adicione uma instância de propriedade ao seu PrintTicket para cada uma delas necessária e forneça um valor adequado para ela usando o tipo de elemento de valor.</span><span class="sxs-lookup"><span data-stu-id="f5222-140">Add a Property instance to your PrintTicket for each that is required, and provide a suitable value for it using the Value element type.</span></span> <span data-ttu-id="f5222-141">Verifique se as instâncias de propriedade estão localizadas corretamente dentro do PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-141">Make sure that Property instances are located properly within the PrintTicket.</span></span>

11. <span data-ttu-id="f5222-142">Examine as instâncias de propriedade opcionais no esquema PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-142">Examine the optional Property instances in the PrintTicket Schema.</span></span> <span data-ttu-id="f5222-143">Se houver essas instâncias de propriedade que devem estar em seu PrintTicket, crie-as em seu PrintTicket.</span><span class="sxs-lookup"><span data-stu-id="f5222-143">If there are any such Property instances that should be in your PrintTicket, create them in your PrintTicket.</span></span>

12. <span data-ttu-id="f5222-144">Você também pode adicionar instâncias de propriedade definidas de modo privado no nível raiz ou a qualquer recurso, opção ou instância de propriedade.</span><span class="sxs-lookup"><span data-stu-id="f5222-144">You may also add privately-defined Property instances at the root level, or to any Feature, Option, or Property instance.</span></span> <span data-ttu-id="f5222-145">No entanto, observe que essas instâncias de propriedade definidas de forma privada são removidas durante a validação, a menos que o namespace ao qual pertencem seja reconhecido pelo provedor de PrintCapabilities ou PrintTicket de destino.</span><span class="sxs-lookup"><span data-stu-id="f5222-145">Note however, that these privately-defined Property instances are stripped off during validation, unless the namespace they belong to is recognized by the target PrintCapabilities or PrintTicket provider.</span></span> <span data-ttu-id="f5222-146">Além disso, as instâncias de propriedade que aparecem em qualquer lugar dentro de uma instância de opção são eliminadas durante a validação, a menos que o documento PrintCapabilities contenha uma opção que seja uma correspondência perfeita.</span><span class="sxs-lookup"><span data-stu-id="f5222-146">In addition, Property instances that appear anywhere within an Option instance are stripped off during validation, unless the PrintCapabilities document contains an Option that is a perfect match.</span></span> <span data-ttu-id="f5222-147">Duas instâncias de opção são uma correspondência perfeita se cada ScoredProperty em uma instância de opção tiver um ScoredProperty correspondente no outro e os valores das instâncias de ScoredProperty forem os mesmos.</span><span class="sxs-lookup"><span data-stu-id="f5222-147">Two Option instances are a perfect match if every ScoredProperty in one Option instance has a corresponding ScoredProperty in the other, and the Values of the ScoredProperty instances are the same.</span></span> <span data-ttu-id="f5222-148">Consulte o esquema privado do provedor PrintTicket para obter uma lista de instâncias de propriedade privada reconhecidas e seus usos.</span><span class="sxs-lookup"><span data-stu-id="f5222-148">Consult the PrintTicket provider's Private Schema for a list of recognized private Property instances and their uses.</span></span>

13. <span data-ttu-id="f5222-149">Os filhos do mesmo tipo de elemento não podem aninhar uma profundidade de mais de 10 elementos.</span><span class="sxs-lookup"><span data-stu-id="f5222-149">Children of the same element type may not nest to a depth of more than 10 elements.</span></span> <span data-ttu-id="f5222-150">Essa regra se aplica de forma independente a cada tipo de elemento que pode ser definido.</span><span class="sxs-lookup"><span data-stu-id="f5222-150">This rule applies independently to each type of element that can be defined.</span></span>

> [!Note]  
> <span data-ttu-id="f5222-151">O conteúdo XML do PrintTicket deve ser codificado usando UTF-8 ou UTF-16.</span><span class="sxs-lookup"><span data-stu-id="f5222-151">PrintTicket XML content MUST be encoded using either UTF-8 or UTF-16.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="f5222-152">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="f5222-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f5222-153">Especificação de esquema de impressão</span><span class="sxs-lookup"><span data-stu-id="f5222-153">Print Schema Specification</span></span>](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 



