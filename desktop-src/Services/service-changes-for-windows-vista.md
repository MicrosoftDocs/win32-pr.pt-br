---
description: Houve alterações significativas no modelo de serviços para melhorar o desempenho, a confiabilidade, a segurança, o gerenciamento e a administração de serviços.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Alterações de serviço do Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103827023"
---
# <a name="service-changes-for-windows-vista"></a>Alterações de serviço do Windows Vista

Houve alterações significativas no modelo de serviços para melhorar o desempenho, a confiabilidade, a segurança, o gerenciamento e a administração de serviços.

A tabela a seguir resume os aprimoramentos feitos nos serviços do Windows Vista.



| Aprimoramento                                                                                                                                                                                                  | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Início automático atrasado<br/>                                                                 | Os serviços de início automático atrasados são iniciados logo após o sistema ser iniciado. Isso melhora o desempenho de inicialização do sistema enquanto ainda fornece inicialização automática para esses serviços. Para definir o sinalizador de início automático atrasado, chame a função [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) com **\_ \_ \_ \_ \_ informações de início automático atrasadas de configuração de serviço**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Detecção e recuperação de falha<br/>                 | Se um serviço falhar, o SCM (Gerenciador de controle de serviço) poderá executar uma ação de falha, como reiniciar o serviço em uma tentativa de recuperação dessa falha. Para configurar uma ação de falha, chame [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) com ações de falha de configuração de **serviço \_ \_ \_**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Notificações de pré-desligamento<br/>                                     | Um serviço pode se registrar para receber uma notificação de pré-desligamento de **\_ controle \_ de serviço** em sua função [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) antes de receber a notificação de desligamento real. Isso fornece aos serviços um procedimento de desligamento demorado mais tempo para desligar normalmente. Para definir o valor de tempo limite, chame [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) com **\_ \_ \_ informações de pré-desligamento de configuração de serviço**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Acesso restrito à rede<br/>                                     | Você pode usar os SIDs de serviço para restringir o acesso a portas, protocolos ou a direção do tráfego de rede. Para restringir o acesso de um serviço à rede, use a interface [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Executando com privilégios mínimos<br/>                         | Os serviços podem ser executados em qualquer conta que contenha os privilégios necessários (LocalService, NetworkService, LocalSystem, uma conta de domínio ou uma conta local) e indique os privilégios necessários chamando [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) com as **\_ \_ \_ \_ informações de privilégios necessários de configuração de serviço**. O SCM remove todos os privilégios que não são necessários.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Isolamento de serviço<br/>                                                                     | Um serviço pode isolar objetos, como arquivos ou chaves do registro, para seu uso exclusivo, protegendo-os com uma entrada de controle de acesso que contenha um SID de serviço. Depois que esse SID tiver sido atribuído a um serviço, o proprietário do serviço poderá modificar as listas de controle de acesso dos objetos para conceder acesso ao SID. Isso permite que um serviço acesse objetos específicos sem executar uma conta de alto privilégio ou reduzir a segurança nos objetos. Para definir o SID do serviço, chame [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) com as informações de SID do serviço de configuração de **serviço \_ \_ \_ \_**.<br/>                                                                                                                                                                                                                                     |
| <span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Notificações de alteração de estado do serviço<br/> | Os serviços podem se registrar para serem notificados quando um serviço é criado, excluído ou tem uma alteração no status usando a função [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) . Isso é mais eficiente do que chamar a função [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) em um loop para sondar o status.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Isolamento da sessão 0<br/>                                                             | Os serviços sempre foram executados na sessão 0. Antes do Windows Vista, o primeiro usuário a fazer logon também foi atribuído à sessão 0. Agora, a sessão 0 é reservada exclusivamente para serviços e outros aplicativos não associados a uma sessão de usuário interativa. (O primeiro usuário a fazer logon está conectado à sessão 1, o segundo usuário a fazer logon está conectado à sessão 2 e assim por diante.) A sessão 0 não oferece suporte a processos que interagem com o usuário.<br/> Essa alteração significa que um serviço não pode postar ou enviar uma mensagem para um aplicativo e um aplicativo não pode enviar ou postar uma mensagem para um serviço. Além disso, os serviços não podem exibir um item de interface do usuário, como uma caixa de diálogo diretamente. Um serviço pode usar a função [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) para exibir uma caixa de diálogo em outra sessão.<br/> |



 

## <a name="related-topics"></a>Tópicos relacionados

<dl> <dt>

[Serviços](services.md)
</dt> </dl>

 

