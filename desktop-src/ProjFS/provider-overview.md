---
title: Visão geral do provedor
description: Visão geral conceitual de um aplicativo de provedor.
ms.assetid: <GUID-GOES-HERE>
ms.date: 01/17/2020
ms.topic: article
ms.openlocfilehash: 89b49096b7b68a723b52b4eb998c446661b7d3c9
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "104454507"
---
# <a name="provider-overview"></a><span data-ttu-id="17586-103">Visão geral do provedor</span><span class="sxs-lookup"><span data-stu-id="17586-103">Provider Overview</span></span>

<span data-ttu-id="17586-104">O provedor é um aplicativo de modo de usuário que mantém e compreende um armazenamento de dados de backup.</span><span class="sxs-lookup"><span data-stu-id="17586-104">The provider is a user-mode application that maintains and understands a backing data store.</span></span>  <span data-ttu-id="17586-105">O provedor implementa retornos de chamada ProjFS e usa a API ProjFS para projetar esse armazenamento de dados no sistema de arquivos onde ele aparece para o usuário como arquivos e diretórios.</span><span class="sxs-lookup"><span data-stu-id="17586-105">The provider implements ProjFS callbacks and uses the ProjFS API to project this data store into the file system where it appears to the user as files and directories.</span></span>  <span data-ttu-id="17586-106">O repositório de backup do provedor pode ser local para o sistema do usuário ou pode estar localizado remotamente.</span><span class="sxs-lookup"><span data-stu-id="17586-106">The provider’s backing store may be local to the user’s system, or it may be located remotely.</span></span>

## <a name="data-projection"></a><span data-ttu-id="17586-107">Projeção de dados</span><span class="sxs-lookup"><span data-stu-id="17586-107">Data Projection</span></span>

<span data-ttu-id="17586-108">A parte do sistema de arquivos que o provedor possui, em que seus dados são projetados, tem raiz em um diretório chamado "raiz de virtualização".</span><span class="sxs-lookup"><span data-stu-id="17586-108">The part of the file system that the provider owns, where its data is projected, is rooted in a directory called the “virtualization root”.</span></span>  <span data-ttu-id="17586-109">Quando o provedor quer começar a projetar seus dados, ele inicia uma "instância de virtualização", que é um objeto que gerencia a comunicação entre o provedor e o ProjFS para o conjunto de arquivos e diretórios localizados em uma raiz de virtualização específica.</span><span class="sxs-lookup"><span data-stu-id="17586-109">When the provider wants to start projecting its data it starts a "virtualization instance", which is an object that manages communication between the provider and ProjFS for the set of files and directories located under a particular virtualization root.</span></span>  <span data-ttu-id="17586-110">Todos os arquivos e diretórios que são descendentes da raiz de virtualização que não foram criados localmente pelo usuário são materializados pelo provedor por meio da API ProjFS.</span><span class="sxs-lookup"><span data-stu-id="17586-110">Any files and directories that are descendants of the virtualization root that have not been created locally by the user are materialized by the provider via the ProjFS API.</span></span>  <span data-ttu-id="17586-111">Esses itens começam como arquivos e diretórios virtuais, o que significa que eles não existem no dispositivo de armazenamento local do usuário, mas são injetados em resultados de enumeração por ProjFS.</span><span class="sxs-lookup"><span data-stu-id="17586-111">These items start off as virtual files and directories, meaning that they do not exist on the user’s local storage device, but are injected into enumeration results by ProjFS.</span></span>  <span data-ttu-id="17586-112">À medida que os itens são abertos e lidos, o ProjFS invoca os retornos de chamada implementados pelo provedor para solicitar dados, e o provedor usa APIs ProjFS para enviar esses dados para o armazenamento local onde ele é armazenado em cache para acesso subsequente.</span><span class="sxs-lookup"><span data-stu-id="17586-112">As the items are opened and read, ProjFS invokes callbacks implemented by the provider to request data, and the provider uses ProjFS APIs to send that data to the local storage where it is cached for subsequent access.</span></span>  <span data-ttu-id="17586-113">Se o modo de exibição do usuário do armazenamento de dados de backup precisar ser alterado, por exemplo, se o conteúdo do armazenamento de dados tiver sido alterado, o provedor poderá usar APIs ProjFS para atualizar ou excluir itens locais para refletir a nova exibição do armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="17586-113">If the user's view of the backing data store needs to change, for instance if the contents of the data store have changed, the provider can use ProjFS APIs to update or delete local items to reflect the new view of the data store.</span></span>

## <a name="callback-return-codes"></a><span data-ttu-id="17586-114">Códigos de retorno de retorno de chamada</span><span class="sxs-lookup"><span data-stu-id="17586-114">Callback return codes</span></span>

<span data-ttu-id="17586-115">Cada retorno de chamada lista vários valores de retorno possíveis específicos para esse retorno de chamada.</span><span class="sxs-lookup"><span data-stu-id="17586-115">Each callback lists a number of possible return values specific to that callback.</span></span>  <span data-ttu-id="17586-116">Além dos valores de retorno listados para um determinado retorno de chamada, um retorno de chamada também pode retornar alguns outros códigos de erro.</span><span class="sxs-lookup"><span data-stu-id="17586-116">In addition to the return values listed for a given callback, a callback may also return certain other error codes.</span></span>  <span data-ttu-id="17586-117">Esta é a lista completa de códigos de erro que um retorno de chamada pode retornar:</span><span class="sxs-lookup"><span data-stu-id="17586-117">This is the complete list of error codes that a callback may return:</span></span>

| <span data-ttu-id="17586-118">Código do Erro</span><span class="sxs-lookup"><span data-stu-id="17586-118">Error Code</span></span>                                    | <span data-ttu-id="17586-119">Significado</span><span class="sxs-lookup"><span data-stu-id="17586-119">Meaning</span></span>
|-----------------------------------------------|--------
| <span data-ttu-id="17586-120">S_OK</span><span class="sxs-lookup"><span data-stu-id="17586-120">S_OK</span></span>                                          | <span data-ttu-id="17586-121">Operação bem-sucedida</span><span class="sxs-lookup"><span data-stu-id="17586-121">Operation Successful</span></span>
| <span data-ttu-id="17586-122">E_OUTOFMEMORY</span><span class="sxs-lookup"><span data-stu-id="17586-122">E_OUTOFMEMORY</span></span>                                 | <span data-ttu-id="17586-123">Falha ao alocar a memória necessária.</span><span class="sxs-lookup"><span data-stu-id="17586-123">Failed to allocate necessary memory.</span></span>
| <span data-ttu-id="17586-124">HRESULT_FROM_WIN32 (ERROR_IO_PENDING)</span><span class="sxs-lookup"><span data-stu-id="17586-124">HRESULT_FROM_WIN32(ERROR_IO_PENDING)</span></span>          | <span data-ttu-id="17586-125">O provedor deseja concluir a operação em um momento posterior.</span><span class="sxs-lookup"><span data-stu-id="17586-125">The provider wishes to complete the operation at a later time.</span></span>
| <span data-ttu-id="17586-126">HRESULT_FROM_WIN32 (ERROR_INSUFFICIENT_BUFFER)</span><span class="sxs-lookup"><span data-stu-id="17586-126">HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER)</span></span> | <span data-ttu-id="17586-127">Um buffer passado para um retorno de chamada era muito pequeno.</span><span class="sxs-lookup"><span data-stu-id="17586-127">A buffer passed to a callback was too small.</span></span>
| <span data-ttu-id="17586-128">HRESULT_FROM_WIN32 (ERROR_FILE_NOT_FOUND)</span><span class="sxs-lookup"><span data-stu-id="17586-128">HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)</span></span>      | <span data-ttu-id="17586-129">O arquivo não existe no repositório de backup do provedor.</span><span class="sxs-lookup"><span data-stu-id="17586-129">The file does not exist in the provider’s backing store.</span></span>
| <span data-ttu-id="17586-130">HRESULT_FROM_WIN32 (ERROR_INVALID_PARAMETER)</span><span class="sxs-lookup"><span data-stu-id="17586-130">HRESULT_FROM_WIN32(ERROR_INVALID_PARAMETER)</span></span>   | <span data-ttu-id="17586-131">Um argumento de retorno de chamada é inválido.</span><span class="sxs-lookup"><span data-stu-id="17586-131">A callback argument is invalid.</span></span>  <span data-ttu-id="17586-132">Por exemplo, uma ID de enumeração não corresponde a uma sessão de enumeração ativa.</span><span class="sxs-lookup"><span data-stu-id="17586-132">For example, an enumeration ID doesn't correspond to an active enumeration session.</span></span>
| <span data-ttu-id="17586-133">HRESULT_FROM_WIN32 (ERROR_ACCESS_DENIED)</span><span class="sxs-lookup"><span data-stu-id="17586-133">HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)</span></span>       | <span data-ttu-id="17586-134">O provedor deseja impedir que uma operação, como renomear ou excluir, ocorra.</span><span class="sxs-lookup"><span data-stu-id="17586-134">The provider wishes to prevent an operation, such as a rename or delete, from taking place.</span></span>

<span data-ttu-id="17586-135">Os retornos de chamada também podem retornar quaisquer erros que possam receber de chamadas para APIs ProjFS.</span><span class="sxs-lookup"><span data-stu-id="17586-135">Callbacks may also return any errors they may receive from calls to ProjFS APIs.</span></span>
<span data-ttu-id="17586-136">Se um retorno de chamada retornar um código de erro que não está na lista anterior ou que não foi proveniente de uma API ProjFS, ProjFS retornará ao sistema de arquivos como STATUS_INTERNAL_ERROR.</span><span class="sxs-lookup"><span data-stu-id="17586-136">If a callback returns an error code that is not on the preceding list or that did not come from a ProjFS API, ProjFS will return it to the file system as STATUS_INTERNAL_ERROR.</span></span>
