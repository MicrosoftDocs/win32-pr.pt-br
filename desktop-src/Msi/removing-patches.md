---
description: A partir do Windows Installer&\# 160; versão&\# 160; 3.0, é possível criar e instalar patches que podem ser desinstalados individualmente e em qualquer ordem, sem precisar desinstalar e reinstalar todo o aplicativo e outros patches.
ms.assetid: 2ad30ac9-eac9-49cf-98ae-5c053a0b500a
title: Removendo patches
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7cd54db3bde3a356a0c3adb299555248bbc87a0b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105749985"
---
# <a name="removing-patches"></a><span data-ttu-id="6967d-103">Removendo patches</span><span class="sxs-lookup"><span data-stu-id="6967d-103">Removing Patches</span></span>

<span data-ttu-id="6967d-104">A partir do Windows Installer versão 3,0, é possível criar e instalar patches que podem ser desinstalados individualmente e em qualquer ordem, sem precisar desinstalar e reinstalar todo o aplicativo e outros patches.</span><span class="sxs-lookup"><span data-stu-id="6967d-104">Beginning with Windows Installer version 3.0, it is possible to create and install patches that can be uninstalled singly, and in any order, without having to uninstall and reinstall the entire application and other patches.</span></span> <span data-ttu-id="6967d-105">Windows Installer 3,0 também permite que [pacotes de patch](patch-packages.md) sejam criados com uma [tabela MsiPatchSequence](msipatchsequence-table.md) que contém informações de sequenciamento de patch.</span><span class="sxs-lookup"><span data-stu-id="6967d-105">Windows Installer 3.0 also enables [Patch Packages](patch-packages.md) to be authored with a [MsiPatchSequence Table](msipatchsequence-table.md) that contains patch sequencing information.</span></span> <span data-ttu-id="6967d-106">Com versões do Windows Installer anteriores à Windows Installer 3,0, o único método para remover patches específicos de um aplicativo é desinstalar todo o aplicativo corrigido e reinstalá-lo sem reaplicar os patches que estão sendo removidos.</span><span class="sxs-lookup"><span data-stu-id="6967d-106">With versions of Windows Installer earlier than Windows Installer 3.0, the only method to remove particular patches from an application is to uninstall the entire patched application and then reinstall without reapplying any patches being removed.</span></span>

<span data-ttu-id="6967d-107">Se um patch pode ser desinstalado depende de como o patch foi criado, a versão do Windows Installer usada para instalar o patch e as alterações feitas pelo patch para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6967d-107">Whether a patch can be uninstalled depends upon how the patch was authored, the version of Windows Installer used to install the patch, and the changes made by the patch to the application.</span></span> <span data-ttu-id="6967d-108">Se um patch não for desinstalado, a única maneira de remover o patch será desinstalar todo o aplicativo e reinstalá-lo sem aplicar o patch que está sendo removido.</span><span class="sxs-lookup"><span data-stu-id="6967d-108">If a patch is not uninstallable, then the only way to remove the patch is to uninstall the entire application and reinstall without applying the patch being removed.</span></span>

<span data-ttu-id="6967d-109">Você pode desinstalar um ou mais patches usando uma opção de linha de comando, a interface de script ou chamando [**MsiRemovePatches**](/windows/desktop/api/Msi/nf-msi-msiremovepatchesa) de outro aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6967d-109">You can uninstall one or more patches using a command line option, the scripting interface, or by calling [**MsiRemovePatches**](/windows/desktop/api/Msi/nf-msi-msiremovepatchesa) from another application.</span></span> <span data-ttu-id="6967d-110">Consulte [desinstalando patches](uninstalling-patches.md) para obter mais informações sobre como desinstalar patches.</span><span class="sxs-lookup"><span data-stu-id="6967d-110">See [Uninstalling Patches](uninstalling-patches.md) for more information about how to uninstall patches.</span></span>

<span data-ttu-id="6967d-111">O valor da propriedade [**MSIPATCHREMOVE**](msipatchremove.md) lista os patches a serem desinstalados.</span><span class="sxs-lookup"><span data-stu-id="6967d-111">The value of the [**MSIPATCHREMOVE**](msipatchremove.md) property lists the patches to be uninstalled.</span></span> <span data-ttu-id="6967d-112">Para cada patch na lista, o instalador verifica se o patch é desinstalado.</span><span class="sxs-lookup"><span data-stu-id="6967d-112">For each patch in the list, the installer verifies that the patch is uninstallable.</span></span> <span data-ttu-id="6967d-113">Se o usuário não tiver privilégios para remover o patch, o patch é desconhecido para o produto, a política de patch impede a remoção ou o patch foi marcado como não desinstalado, o instalador retorna um erro que indica uma falha na transação de instalação.</span><span class="sxs-lookup"><span data-stu-id="6967d-113">If the user does not have privileges to remove the patch, the patch is unknown for the product, patch policy prevents removal, or the patch was marked as not uninstallable, the installer returns an error that indicates a failed installation transaction.</span></span> <span data-ttu-id="6967d-114">Consulte [patches desinstaláveis](uninstallable-patches.md) para obter mais informações sobre o que determina se um patch não é desinstalável.</span><span class="sxs-lookup"><span data-stu-id="6967d-114">See [Uninstallable Patches](uninstallable-patches.md) for more information about what determines whether a patch is not uninstallable.</span></span>

<span data-ttu-id="6967d-115">Depois que o patch é verificado como removível, o instalador remove o patch da sequência de aplicativos do patch.</span><span class="sxs-lookup"><span data-stu-id="6967d-115">Once the patch is verified as removable, the installer removes the patch from the patch application sequence.</span></span> <span data-ttu-id="6967d-116">Para obter mais informações sobre como Windows Installer 3,0 determina qual sequência usar ao aplicar patches, consulte [sequenciando patches](sequencing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="6967d-116">For more information about how Windows Installer 3.0 determines what sequence to use when applying patches see [Sequencing Patches](sequencing-patches.md).</span></span> <span data-ttu-id="6967d-117">Observe que a remoção de patches da sequência pode fazer com que os patches marcados como obsoletos ou substituídos se tornem ativos.</span><span class="sxs-lookup"><span data-stu-id="6967d-117">Note that removing patches from the sequence can cause patches marked obsolete or superseded to become active.</span></span>

<span data-ttu-id="6967d-118">Todos os patches selecionados para remoção estão listados na propriedade [**MsiPatchRemovalList**](msipatchremovallist.md) .</span><span class="sxs-lookup"><span data-stu-id="6967d-118">All patches selected for removal are listed in the [**MsiPatchRemovalList**](msipatchremovallist.md) property.</span></span> <span data-ttu-id="6967d-119">Essa propriedade é uma propriedade privada que é definida pelo instalador e pode ser usada em expressões condicionais ou consultada por [ações personalizadas](custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="6967d-119">This property is a private property that is set by the installer and can be used in conditional expressions or queried by [custom actions](custom-actions.md).</span></span> <span data-ttu-id="6967d-120">A propriedade contém a lista de GUIDs de código de patch de patches a serem removidos.</span><span class="sxs-lookup"><span data-stu-id="6967d-120">The property contains the list of patch code GUIDs of patches to be removed.</span></span> <span data-ttu-id="6967d-121">Uma ação personalizada pode determinar se o estado da instalação do patch é aplicado, obsoleto ou substituído chamando o [**MsiGetPatchInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetpatchinfoexa) ou a propriedade [**Patchproperty**](patch-patchproperty.md) do [objeto patch](patch-object.md).</span><span class="sxs-lookup"><span data-stu-id="6967d-121">A custom action can determine whether the installation state of the patch is applied, obsolete or superseded by calling the [**MsiGetPatchInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetpatchinfoexa) or the [**PatchProperty**](patch-patchproperty.md) property of the [Patch Object](patch-object.md).</span></span>

<span data-ttu-id="6967d-122">Depois que um patch é removido, o estado do aplicativo é o mesmo que se o patch nunca foi instalado.</span><span class="sxs-lookup"><span data-stu-id="6967d-122">After a patch is removed the state of the application is the same as if the patch was never installed.</span></span> <span data-ttu-id="6967d-123">Se possível, o instalador restringe o processo ao subconjunto de recursos afetados pelo patch que está sendo removido.</span><span class="sxs-lookup"><span data-stu-id="6967d-123">If possible, the installer restricts the process to the subset of features affected by the patch being removed.</span></span> <span data-ttu-id="6967d-124">O instalador define automaticamente a propriedade [**REINSTALL**](reinstall.md) para a lista de recursos afetados.</span><span class="sxs-lookup"><span data-stu-id="6967d-124">The installer automatically sets the [**REINSTALL**](reinstall.md) property to the list of affected features.</span></span> <span data-ttu-id="6967d-125">Os arquivos que foram adicionados pelo patch são removidos e os arquivos que foram modificados pelo patch são substituídos.</span><span class="sxs-lookup"><span data-stu-id="6967d-125">Files that were added by the patch are removed and files that were modified by the patch are overwritten.</span></span> <span data-ttu-id="6967d-126">Os arquivos e as entradas do registro são restaurados para a versão esperada pelo produto menos o patch.</span><span class="sxs-lookup"><span data-stu-id="6967d-126">Files and registry entries are restored to the version expected by the product minus the patch.</span></span> <span data-ttu-id="6967d-127">Os recursos e componentes que foram adicionados pelo patch têm o registro cancelado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6967d-127">Features and components that were added by the patch are unregistered from the application.</span></span> <span data-ttu-id="6967d-128">Observe que o conteúdo adicional adicionado pelo patch pode permanecer no computador do usuário se o conteúdo for usado por outro patch que ainda é aplicável.</span><span class="sxs-lookup"><span data-stu-id="6967d-128">Note that additional content added by the patch can remain on the user's computer if the content is used by another patch that is still applicable.</span></span>

<span data-ttu-id="6967d-129">Se um arquivo de um componente compartilhado for atualizado por um patch, a alteração afetará todos os aplicativos que compartilham o componente.</span><span class="sxs-lookup"><span data-stu-id="6967d-129">If a file of a shared component is updated by a patch, the change affects all applications that share the component.</span></span> <span data-ttu-id="6967d-130">Quando o patch é removido, novamente, a alteração afeta todos os aplicativos que compartilham o componente.</span><span class="sxs-lookup"><span data-stu-id="6967d-130">When the patch is removed, again, the change affects all applications that share the component.</span></span> <span data-ttu-id="6967d-131">Isso significa que a remoção de um patch por um aplicativo pode restaurar o arquivo do componente compartilhado para uma versão inferior à necessária para outro aplicativo.</span><span class="sxs-lookup"><span data-stu-id="6967d-131">This means that removal of a patch by one application can restore the file of the shared component to a lower version than required by another application.</span></span> <span data-ttu-id="6967d-132">Isso poderia corrigir o primeiro aplicativo, mas fazer com que o segundo aplicativo pare de funcionar.</span><span class="sxs-lookup"><span data-stu-id="6967d-132">This could fix the first application, but cause the second application to stop working.</span></span> <span data-ttu-id="6967d-133">Nesse caso, o segundo aplicativo pode ser reparado reinstalando o segundo aplicativo usando os métodos descritos na [reinstalação de um recurso ou aplicativo](reinstalling-a-feature-or-application.md).</span><span class="sxs-lookup"><span data-stu-id="6967d-133">In this case, the second application can be repaired by reinstalling the second application using the methods describe in [Reinstalling a Feature or Application](reinstalling-a-feature-or-application.md).</span></span> <span data-ttu-id="6967d-134">Isso irá restaurar a versão com patch do arquivo.</span><span class="sxs-lookup"><span data-stu-id="6967d-134">This will restore the patched version of the file.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6967d-135">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="6967d-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6967d-136">**MsiEnumapplicationsEx**</span><span class="sxs-lookup"><span data-stu-id="6967d-136">**MsiEnumapplicationsEx**</span></span>](/windows/desktop/api/Msi/nf-msi-msienumproductsexa)
</dt> <dt>

[<span data-ttu-id="6967d-137">**MsiGetPatchInfoEx**</span><span class="sxs-lookup"><span data-stu-id="6967d-137">**MsiGetPatchInfoEx**</span></span>](/windows/desktop/api/Msi/nf-msi-msigetpatchinfoexa)
</dt> <dt>

[<span data-ttu-id="6967d-138">**MSIPATCHREMOVE**</span><span class="sxs-lookup"><span data-stu-id="6967d-138">**MSIPATCHREMOVE**</span></span>](msipatchremove.md)
</dt> <dt>

[<span data-ttu-id="6967d-139">**MsiRemovePatches**</span><span class="sxs-lookup"><span data-stu-id="6967d-139">**MsiRemovePatches**</span></span>](/windows/desktop/api/Msi/nf-msi-msiremovepatchesa)
</dt> <dt>

[<span data-ttu-id="6967d-140">Sequenciamento de patch</span><span class="sxs-lookup"><span data-stu-id="6967d-140">Patch Sequencing</span></span>](sequencing-patches.md)
</dt> <dt>

[<span data-ttu-id="6967d-141">Corrigir ações personalizadas de desinstalação de patch</span><span class="sxs-lookup"><span data-stu-id="6967d-141">Patch Uninstall Custom Actions</span></span>](patch-uninstall-custom-actions.md)
</dt> <dt>

[<span data-ttu-id="6967d-142">Patches desinstaláveis</span><span class="sxs-lookup"><span data-stu-id="6967d-142">Uninstallable Patches</span></span>](uninstallable-patches.md)
</dt> <dt>

[<span data-ttu-id="6967d-143">Desinstalando patches</span><span class="sxs-lookup"><span data-stu-id="6967d-143">Uninstalling Patches</span></span>](uninstalling-patches.md)
</dt> </dl>

 

 



