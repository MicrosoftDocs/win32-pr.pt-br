---
description: 'A tabela a seguir lista as cinco ações personalizadas usadas para atender às especificações de exemplo: ProcessAccounts, UninstallAccounts, accounts, RemoveAccounts e RollbackAccounts.'
ms.assetid: 389ec652-243e-4392-aec9-3a7eb90e6c68
title: Criando as ações personalizadas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09525490304762b98635bcbbe6c238ce3fe413f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103921491"
---
# <a name="authoring-the-custom-actions"></a><span data-ttu-id="db403-103">Criando as ações personalizadas</span><span class="sxs-lookup"><span data-stu-id="db403-103">Authoring the Custom Actions</span></span>

<span data-ttu-id="db403-104">A tabela a seguir lista as cinco ações personalizadas usadas para atender às especificações de exemplo: ProcessAccounts, UninstallAccounts, accounts, RemoveAccounts e RollbackAccounts.</span><span class="sxs-lookup"><span data-stu-id="db403-104">The table below lists the five custom actions used to meet the sample specifications: ProcessAccounts, UninstallAccounts, CreateAccounts, RemoveAccounts, and RollbackAccounts.</span></span> <span data-ttu-id="db403-105">Todas essas ações personalizadas estão em [bibliotecas de vínculo dinâmico](dynamic-link-libraries.md) armazenadas na [tabela binária](binary-table.md).</span><span class="sxs-lookup"><span data-stu-id="db403-105">All of these custom actions are in [dynamic-link libraries](dynamic-link-libraries.md) stored in the [Binary Table](binary-table.md).</span></span> <span data-ttu-id="db403-106">O código-fonte do C++ para as bibliotecas de vínculo dinâmico que contêm as ações personalizadas de exemplo é fornecido no SDK do Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="db403-106">The C++ source code for the dynamic-link libraries containing the sample custom actions are provided in the Windows Installer SDK.</span></span> <span data-ttu-id="db403-107">ProcessAccounts e UninstallAccounts estão no arquivo Process. cpp.</span><span class="sxs-lookup"><span data-stu-id="db403-107">ProcessAccounts and UninstallAccounts are in the file Process.cpp.</span></span> <span data-ttu-id="db403-108">CreateAccount está no arquivo Create. cpp.</span><span class="sxs-lookup"><span data-stu-id="db403-108">CreateAccount is in the file Create.cpp.</span></span> <span data-ttu-id="db403-109">RemoveAccount e RollbackAccount estão no arquivo Remove. cpp.</span><span class="sxs-lookup"><span data-stu-id="db403-109">RemoveAccount and RollbackAccount are in the file Remove.cpp.</span></span> <span data-ttu-id="db403-110">Esses arquivos de origem podem ser usados para criar os arquivos Process.dll, Create.dll e Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-110">These source files can be used to create the files Process.dll, Create.dll, and Remove.dll.</span></span>

<span data-ttu-id="db403-111">Como a criação ou remoção de uma conta de usuário requer privilégios elevados, [ações personalizadas de execução adiada](deferred-execution-custom-actions.md) que são executadas no contexto do sistema devem ser usadas para criar, remover ou reverter contas de usuário.</span><span class="sxs-lookup"><span data-stu-id="db403-111">Because the creation or removal of a user account requires elevated privileges, [deferred execution custom actions](deferred-execution-custom-actions.md) that run in the context of the system must be used to create, remove, or roll back user accounts.</span></span> <span data-ttu-id="db403-112">As ações personalizadas de execução imediata, ProcessAccounts e UninstallAccounts, geram as ações personalizadas adiadas que criam, removem ou revertem contas de usuário: CreateAccount, RemoveAccount e RollbackAccount.</span><span class="sxs-lookup"><span data-stu-id="db403-112">The immediate execution custom actions, ProcessAccounts and UninstallAccounts, generate the deferred custom actions that create, remove, or rollback user accounts: CreateAccount, RemoveAccount, and RollbackAccount.</span></span>

<span data-ttu-id="db403-113">Como as ações personalizadas adiadas não podem ler informações em tabelas de banco de dados, ProcessAccounts e UninstallUserAccouts devem definir uma propriedade CustomActionData para passar as informações na tabela accounts para as ações personalizadas adiadas, conforme descrito em [obtendo informações de contexto para ações personalizadas de execução adiada](obtaining-context-information-for-deferred-execution-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="db403-113">Because deferred custom actions cannot read information in database tables, ProcessAccounts and UninstallUserAccouts must set a CustomActionData property to pass the information in the UserAccounts table to the deferred custom actions as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span> <span data-ttu-id="db403-114">Quando o instalador executa o script de execução, as ações personalizadas adiadas lidam com as contas de usuário de acordo com as informações na propriedade CustomActionData.</span><span class="sxs-lookup"><span data-stu-id="db403-114">When the installer runs the execution script, the deferred custom actions handle user accounts according to the information in the CustomActionData property.</span></span>

<span data-ttu-id="db403-115">Como todas as ações personalizadas estão em bibliotecas de vínculo dinâmico armazenadas na tabela binária, todas elas incluem as constantes msidbCustomActionTypeDll e msidbCustomActionTypeBinaryData em seu tipo numérico base.</span><span class="sxs-lookup"><span data-stu-id="db403-115">Because all the custom actions are in dynamic-link libraries stored in the Binary table, they all include the constants msidbCustomActionTypeDll and msidbCustomActionTypeBinaryData in their base numeric type.</span></span> <span data-ttu-id="db403-116">ProcessAccounts e UninstallAccounts são exemplos de [tipo de ação personalizada pura 1](custom-action-type-1.md).</span><span class="sxs-lookup"><span data-stu-id="db403-116">ProcessAccounts and UninstallAccounts are examples of pure [Custom Action Type 1](custom-action-type-1.md).</span></span> <span data-ttu-id="db403-117">Para obter informações sobre outros tipos de ação personalizada, consulte a [lista de Resumo de todos os tipos de ação personalizados](summary-list-of-all-custom-action-types.md).</span><span class="sxs-lookup"><span data-stu-id="db403-117">For information on other custom action types see the [Summary List of All Custom Action Types](summary-list-of-all-custom-action-types.md).</span></span>

<span data-ttu-id="db403-118">CreateAccount e RemoveAccount são [ações personalizadas de execução adiada](deferred-execution-custom-actions.md) que não permitem que os serviços representem usuários específicos.</span><span class="sxs-lookup"><span data-stu-id="db403-118">CreateAccount and RemoveAccount are [deferred execution custom actions](deferred-execution-custom-actions.md) that do not allow services to impersonate particular users.</span></span> <span data-ttu-id="db403-119">Essas ações personalizadas incluem as constantes msidbCustomActionTypeInScript e msidbCustomActionTypeNoImpersonate para especificar essas [Opções de execução em script de ação personalizada](custom-action-in-script-execution-options.md).</span><span class="sxs-lookup"><span data-stu-id="db403-119">These custom actions include the constants msidbCustomActionTypeInScript and msidbCustomActionTypeNoImpersonate to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="db403-120">RollbackAccount é uma [ação personalizada de reversão](rollback-custom-actions.md) que remove apenas contas de usuário durante uma [instalação de reversão](rollback-installation.md).</span><span class="sxs-lookup"><span data-stu-id="db403-120">RollbackAccount is a [rollback custom action](rollback-custom-actions.md) that only removes user accounts during a [rollback installation](rollback-installation.md).</span></span> <span data-ttu-id="db403-121">RollbackAccount inclui as constantes msidbCustomActionTypeInScript e msidbCustomActionTypeRollback para especificar essas [Opções de execução em script de ação personalizada](custom-action-in-script-execution-options.md).</span><span class="sxs-lookup"><span data-stu-id="db403-121">RollbackAccount includes the constants msidbCustomActionTypeInScript and msidbCustomActionTypeRollback to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="db403-122">Essas ações personalizadas podem lidar com dados confidenciais, como senhas de usuário, que não devem ser gravadas no arquivo de log.</span><span class="sxs-lookup"><span data-stu-id="db403-122">These custom actions may handle sensitive data such as user passwords, which should not be written to the log file.</span></span> <span data-ttu-id="db403-123">As ações personalizadas adiadas devem, portanto, incluir msidbCustomActionTypeHideTarget no tipo de ação personalizada.</span><span class="sxs-lookup"><span data-stu-id="db403-123">The deferred custom actions should therefore include msidbCustomActionTypeHideTarget in the custom action type.</span></span> <span data-ttu-id="db403-124">Os nomes das ações personalizadas adiadas também precisam ser adicionados à lista de propriedades [**MsiHiddenProperties**](msihiddenproperties.md) na [tabela de propriedades](property-table.md) devido à maneira como as ações personalizadas imediatas passam dados para ações personalizadas adiadas usando a propriedade CustomActionData.</span><span class="sxs-lookup"><span data-stu-id="db403-124">The names of the deferred custom actions also need to be added to the [**MsiHiddenProperties**](msihiddenproperties.md) property list in the [Property table](property-table.md) because of the way immediate custom actions pass data to deferred custom actions using the CustomActionData property.</span></span>



| <span data-ttu-id="db403-125">Ação personalizada</span><span class="sxs-lookup"><span data-stu-id="db403-125">Custom action</span></span>     | <span data-ttu-id="db403-126">Ponto de entrada de DLL</span><span class="sxs-lookup"><span data-stu-id="db403-126">DLL entry point</span></span>                       | <span data-ttu-id="db403-127">Tipo de ação personalizada</span><span class="sxs-lookup"><span data-stu-id="db403-127">Custom action type</span></span>                                                                                                                                                         |
|-------------------|---------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="db403-128">ProcessAccounts</span><span class="sxs-lookup"><span data-stu-id="db403-128">ProcessAccounts</span></span>   | <span data-ttu-id="db403-129">ProcessUserAccounts em Process.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-129">ProcessUserAccounts in Process.dll.</span></span>   | <span data-ttu-id="db403-130">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span><span class="sxs-lookup"><span data-stu-id="db403-130">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="db403-131">UninstallAccounts</span><span class="sxs-lookup"><span data-stu-id="db403-131">UninstallAccounts</span></span> | <span data-ttu-id="db403-132">UninstallUserAccounts em Process.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-132">UninstallUserAccounts in Process.dll.</span></span> | <span data-ttu-id="db403-133">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span><span class="sxs-lookup"><span data-stu-id="db403-133">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="db403-134">CreateAccount</span><span class="sxs-lookup"><span data-stu-id="db403-134">CreateAccount</span></span>     | <span data-ttu-id="db403-135">CreateUserAccount em Create.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-135">CreateUserAccount in Create.dll.</span></span>      | <span data-ttu-id="db403-136">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="db403-136">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="db403-137">RemoveAccount</span><span class="sxs-lookup"><span data-stu-id="db403-137">RemoveAccount</span></span>     | <span data-ttu-id="db403-138">RemoveUserAccount em Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-138">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="db403-139">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="db403-139">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="db403-140">RollbackAccount</span><span class="sxs-lookup"><span data-stu-id="db403-140">RollbackAccount</span></span>   | <span data-ttu-id="db403-141">RemoveUserAccount em Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="db403-141">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="db403-142">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeRollback + msidbCustomActionTypeHideTarget = 9473.</span><span class="sxs-lookup"><span data-stu-id="db403-142">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeRollback + msidbCustomActionTypeHideTarget = 9473.</span></span>       |



 

<span data-ttu-id="db403-143">Continue a [criar a tabela CustomAction](authoring-the-customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="db403-143">Continue to [Authoring the CustomAction Table](authoring-the-customaction-table.md).</span></span>

 

 



