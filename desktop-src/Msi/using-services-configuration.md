---
description: A configuração de serviços permite que o Windows Installer Personalize os serviços em um computador.
ms.assetid: 164280b2-1c75-49d2-ac04-c3654be84134
title: Usando a configuração de serviços
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f6e3040d51b1056a370490fc5328a6bafe07555
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104457241"
---
# <a name="using-services-configuration"></a><span data-ttu-id="77ebf-103">Usando a configuração de serviços</span><span class="sxs-lookup"><span data-stu-id="77ebf-103">Using Services Configuration</span></span>

<span data-ttu-id="77ebf-104">A configuração de serviços permite que o Windows Installer Personalize os [Serviços](../services/services.md) em um computador.</span><span class="sxs-lookup"><span data-stu-id="77ebf-104">Services configuration enables the Windows Installer to customize the [services](../services/services.md) on a computer.</span></span> <span data-ttu-id="77ebf-105">Os desenvolvedores podem criar um pacote de Windows Installer para instalar, parar, iniciar e excluir serviços durante uma instalação usando [as tabelas](servicecontrol-table.md) de serviço e de [desinstalação](serviceinstall-table.md) e as ações [installservices](installservices-action.md), [StopServices](stopservices-action.md) e [DeleteServices](deleteservices-action.md) .</span><span class="sxs-lookup"><span data-stu-id="77ebf-105">Developers can author a Windows Installer package to install, stop, start and delete services during an installation by using the [ServiceControl](servicecontrol-table.md) and [ServiceInstall](serviceinstall-table.md) tables and the [InstallServices](installservices-action.md), [StopServices](stopservices-action.md) and [DeleteServices](deleteservices-action.md) actions.</span></span>

<span data-ttu-id="77ebf-106">A partir de pacotes escritos para o Windows Installer 5,0, os desenvolvedores também podem usar a ação padrão [MsiConfigureServices](msiconfigureservices-action.md) e a [tabela MsiServiceConfig](msiserviceconfig-table.md) para configurar as opções de personalização de serviço estendidas disponíveis com o Windows 7 e o Windows Server 2008 R2 e o Windows Vista e o Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="77ebf-106">Beginning with packages written for Windows Installer 5.0, developers can also use the [MsiConfigureServices](msiconfigureservices-action.md) standard action and the [MsiServiceConfig table](msiserviceconfig-table.md) to configure the extended service customization options available with Windows 7 and Windows Server 2008 R2 and Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="77ebf-107">Os pacotes de instalação existentes gravados para versões do Windows Installer que não incluíram a tabela MsiServiceConfig ainda podem ser instalados usando Windows Installer 5,0.</span><span class="sxs-lookup"><span data-stu-id="77ebf-107">Existing installation packages written for versions of the Windows Installer that did not include the MsiServiceConfig table can be still be installed using Windows Installer 5.0.</span></span> <span data-ttu-id="77ebf-108">O recurso de configuração de serviços do Windows Installer não pode configurar contas de serviço de rede, instalar processos de host de serviço compartilhado (svchost) ou reiniciar serviços interrompidos como parte da instalação.</span><span class="sxs-lookup"><span data-stu-id="77ebf-108">The services configuration feature of the Windows Installer cannot configure network service accounts, install shared service host (svchost) processes, or restart services stopped as part of the installation.</span></span>

<span data-ttu-id="77ebf-109">**Windows XP e Windows Server 2003 ou anterior:** Sem suporte.</span><span class="sxs-lookup"><span data-stu-id="77ebf-109">**Windows XP and Windows Server 2003 or earlier:** Not supported.</span></span> <span data-ttu-id="77ebf-110">As tabelas de configuração de serviço e as ações padrão estão disponíveis a partir do Windows Installer 5,0 em execução no Windows 7 e no Windows Server 2008 R2 e Windows Installer 4,5 em execução no Windows Vista e no Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="77ebf-110">The service configuration tables and standard actions are available beginning with Windows Installer 5.0 running on Windows 7 and Windows Server 2008 R2 and Windows Installer 4.5 running on Windows Vista and Windows Server 2008.</span></span>

<span data-ttu-id="77ebf-111">Você deve incluir a ação [MsiConfigureServices](msiconfigureservices-action.md) na tabela [InstallExecuteSequence](installexecutesequence-table.md) para solicitar as configurações de serviço que você especificar na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-111">You must include the [MsiConfigureServices](msiconfigureservices-action.md) action in the [InstallExecuteSequence](installexecutesequence-table.md) table to request the service configurations that you specify in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="77ebf-112">O Windows Installer usa as informações na tabela MsiServiceConfig somente quando a ação padrão MsiConfigureServices é incluída em uma tabela de sequência.</span><span class="sxs-lookup"><span data-stu-id="77ebf-112">The Windows Installer uses the information in the MsiServiceConfig table only when the MsiConfigureServices standard action is included in a sequence table.</span></span> <span data-ttu-id="77ebf-113">A ação padrão MsiConfigureServices também usa informações nas tabelas de [controle](servicecontrol-table.md) e de [instalação](serviceinstall-table.md) .</span><span class="sxs-lookup"><span data-stu-id="77ebf-113">The MsiConfigureServices standard action also uses information in the [ServiceControl](servicecontrol-table.md) and [ServiceInstall](serviceinstall-table.md) tables.</span></span>

<span data-ttu-id="77ebf-114">Para solicitar que o sistema conceda apenas os privilégios necessários a um serviço específico, especifique o serviço e a opção de configuração de **\_ \_ \_ \_ informações de privilégios necessários para configuração do serviço** na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-114">To request that the system give only required privileges to a particular service, specify the service and the **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="77ebf-115">Remova os privilégios desnecessários do token de processo do serviço.</span><span class="sxs-lookup"><span data-stu-id="77ebf-115">Remove the unneeded privileges from the service's process token.</span></span> <span data-ttu-id="77ebf-116">Essa opção pode ser usada para configurar os serviços executados no contexto de segurança das [contas de usuário do serviço](../services/service-user-accounts.md)LocalSystem, LocalService ou NetworkService.</span><span class="sxs-lookup"><span data-stu-id="77ebf-116">This option can be used to configure services run in the security context of the LocalSystem, LocalService, or NetworkService [service user accounts](../services/service-user-accounts.md).</span></span>

<span data-ttu-id="77ebf-117">Para solicitar que o sistema atrase o início automático de um serviço por um tempo após o início de todos os outros serviços de início automático, especifique o serviço e a opção de **\_ \_ \_ \_ início automático atrasado do serviço de configuração** na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-117">To request that the system delay the automatic start of a service for a time after the start of all other auto-start services, specify the service and the **SERVICE\_CONFIG\_DELAYED\_AUTO\_START** option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="77ebf-118">O serviço que está sendo atrasado deve ser instalado pelo pacote atual com o \_ início automático do serviço \_ especificado na tabela de serviços de [instalação](serviceinstall-table.md) ou o serviço já deve estar instalado como um serviço de início automático.</span><span class="sxs-lookup"><span data-stu-id="77ebf-118">The service being delayed must be installed by the current package with SERVICE\_AUTO\_START specified in the [ServiceInstall](serviceinstall-table.md) table or the service must already be installed as an auto-start service.</span></span>

<span data-ttu-id="77ebf-119">Para solicitar que o sistema Reserve um recurso para o uso exclusivo de um serviço específico, especifique o serviço, o tipo de SID do serviço e a opção de configuração **\_ \_ \_ \_ informações de Sid** do serviço de configuração de serviço na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-119">To request that the system reserve a resource for the exclusive use of a particular service, specify the service, the service SID type, and the **SERVICE\_CONFIG\_SERVICE\_SID\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="77ebf-120">Adicione o SID do serviço à lista de controle de acesso (ACL) do recurso para o recurso.</span><span class="sxs-lookup"><span data-stu-id="77ebf-120">Add the service's SID to the resource's Access Control List (ACL) for the resource.</span></span>

<span data-ttu-id="77ebf-121">Para solicitar que o SCM ( [Gerenciador de controle de serviço](../services/service-control-manager.md) ) Aguarde depois de enviar a notificação de **\_ \_ pré-desligamento de controle de serviço** para um serviço, faça o seguinte.</span><span class="sxs-lookup"><span data-stu-id="77ebf-121">To request that the [Service Control Manager](../services/service-control-manager.md) (SCM) wait after sending the **SERVICE\_CONTROL\_PRESHUTDOWN** notification to a service, do the following.</span></span> <span data-ttu-id="77ebf-122">Especifique o serviço, o período de tempo que o SCM deve aguardar e a opção de configuração **informações de pré-desligamento do serviço de \_ \_ \_ configuração** na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-122">Specify the service, the length of time the SCM should wait, and the **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO** configuration option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span>

<span data-ttu-id="77ebf-123">Para configurar quando o sistema deve executar ações após a falha de um serviço, especifique o serviço e a opção de **sinalizador de ações de falha de configuração de serviço \_ \_ \_ \_** na [tabela MsiServiceConfig](msiserviceconfig-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-123">To configure when the system should run actions after the failure of a service, specify the service and the **SERVICE\_CONFIG\_FAILURE\_ACTIONS\_FLAG** option in the [MsiServiceConfig table](msiserviceconfig-table.md).</span></span> <span data-ttu-id="77ebf-124">Adicione as ações a serem executadas na [tabela MsiServiceConfigFailureActions](msiserviceconfigfailureactions-table.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-124">Add the actions to be run to the [MsiServiceConfigFailureActions table](msiserviceconfigfailureactions-table.md).</span></span>

<span data-ttu-id="77ebf-125">Para obter mais informações sobre os recursos de personalização de serviço estendidos introduzidos com os sistemas operacionais Windows Vista e Windows Server 2008, consulte [alterações de serviço para o Windows Vista](../services/service-changes-for-windows-vista.md).</span><span class="sxs-lookup"><span data-stu-id="77ebf-125">For more about the extended service customization capabilities introduced with the Windows Vista and Windows Server 2008 operating systems, see [Service Changes for Windows Vista](../services/service-changes-for-windows-vista.md).</span></span>

 

 
