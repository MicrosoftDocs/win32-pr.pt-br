---
description: A partir do Windows Installer 3,0, os autores podem adicionar informações de sequenciamento de patch ao banco de dados do pacote de patch na tabela MsiPatchSequence.
ms.assetid: 9cdcb25f-2c3d-411e-9aae-bdd52df38a97
title: Patches de sequenciamento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa9cbd9aead596abfaeb50d972915bf4d618440d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104172164"
---
# <a name="sequencing-patches"></a><span data-ttu-id="b2254-103">Patches de sequenciamento</span><span class="sxs-lookup"><span data-stu-id="b2254-103">Sequencing Patches</span></span>

<span data-ttu-id="b2254-104">A partir do Windows Installer 3,0, os autores podem adicionar informações de sequenciamento de patch ao banco de dados do pacote de patch na tabela [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="b2254-104">Beginning with Windows Installer 3.0, authors can add patch sequencing information to the patch package database in the [MsiPatchSequence](msipatchsequence-table.md) table.</span></span> <span data-ttu-id="b2254-105">O instalador pode usar essas informações para determinar quais patches se aplicam a um pacote de instalação, para determinar a melhor sequência de aplicação de patches e para instalar patches em uma ordem constante, independentemente da ordem em que são fornecidos ao sistema.</span><span class="sxs-lookup"><span data-stu-id="b2254-105">The installer can use this information to determine which patches are applicable to an installation package, to determine the best patching sequence, and to install patches in an constant order independent of the order they are provided to the system.</span></span>

<span data-ttu-id="b2254-106">**Windows Installer 2,0:** Sem suporte.</span><span class="sxs-lookup"><span data-stu-id="b2254-106">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="b2254-107">Windows Installer versões anteriores para Windows Installer 3,0 instalar patches na ordem em que são fornecidas para o sistema, independentemente de contiverem uma tabela [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="b2254-107">Windows Installer versions previous to Windows Installer 3.0 install patches in the order that they are provided to the system regardless of whether they contain an [MsiPatchSequence](msipatchsequence-table.md) table.</span></span>

<span data-ttu-id="b2254-108">Os itens a seguir são necessários para usar a funcionalidade de sequenciamento de patch.</span><span class="sxs-lookup"><span data-stu-id="b2254-108">The following are required to use the patch sequencing functionality.</span></span>

-   <span data-ttu-id="b2254-109">Os [pacotes de patch](patch-packages.md) (arquivos. msp) devem ter uma tabela [MsiPatchSequence](msipatchsequence-table.md) que contém informações de sequenciamento.</span><span class="sxs-lookup"><span data-stu-id="b2254-109">[Patch packages](patch-packages.md) (.msp files) must have a [MsiPatchSequence](msipatchsequence-table.md) table containing sequencing information.</span></span> <span data-ttu-id="b2254-110">O instalador instala patches que não têm uma tabela MsiPatchSequence na ordem em que são fornecidos para o sistema.</span><span class="sxs-lookup"><span data-stu-id="b2254-110">The installer installs patches that do not have a MsiPatchSequence table in the order that they are provided to the system.</span></span>
-   <span data-ttu-id="b2254-111">Os patches são instalados usando o Windows Installer 3,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="b2254-111">Patches are installed using Windows Installer 3.0 or later.</span></span>

<span data-ttu-id="b2254-112">Windows Installer versão 3,0 tem as seguintes funções que os aplicativos podem usar para determinar a melhor sequência de aplicação de patches.</span><span class="sxs-lookup"><span data-stu-id="b2254-112">Windows Installer version 3.0 has the following functions that applications can use to determine the best patching sequence.</span></span>

-   <span data-ttu-id="b2254-113">A função [**MsiDeterminePatchSequence**](/windows/desktop/api/Msi/nf-msi-msideterminepatchsequencea) usa uma lista de patches e determina em qual sequência eles podem ser aplicados a um produto instalado.</span><span class="sxs-lookup"><span data-stu-id="b2254-113">The [**MsiDeterminePatchSequence**](/windows/desktop/api/Msi/nf-msi-msideterminepatchsequencea) function takes a list of patches and determines in what sequence they can be applied to an installed product.</span></span> <span data-ttu-id="b2254-114">Essa função conta para qualquer patch ou produto que já tenha sido instalado no sistema.</span><span class="sxs-lookup"><span data-stu-id="b2254-114">This function accounts for any patches or products that have already been installed on the system.</span></span>
-   <span data-ttu-id="b2254-115">A função [**MsiDetermineApplicablePatches**](/windows/desktop/api/Msi/nf-msi-msidetermineapplicablepatchesa) usa uma lista de patches e determina em qual sequência eles podem ser aplicados a um produto instalado.</span><span class="sxs-lookup"><span data-stu-id="b2254-115">The [**MsiDetermineApplicablePatches**](/windows/desktop/api/Msi/nf-msi-msidetermineapplicablepatchesa) function takes a list of patches and determines in what sequence they can be applied to an installed product.</span></span> <span data-ttu-id="b2254-116">Essa função não conta nenhum patch ou produto que já tenha sido instalado no sistema.</span><span class="sxs-lookup"><span data-stu-id="b2254-116">This function does not account for any patches or products that have already been installed on the system.</span></span>

<span data-ttu-id="b2254-117">Windows Installer versão 3,0 pode aplicar vários patches a um produto em uma única instalação de aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="b2254-117">Windows Installer version 3.0 can apply multiple patches to a product in a single patching installation.</span></span> <span data-ttu-id="b2254-118">O grupo de patches pode conter patches que incluem informações de sequência de patches (uma tabela [MsiPatchSequence](msipatchsequence-table.md) ) e patches que não têm.</span><span class="sxs-lookup"><span data-stu-id="b2254-118">The group of patches can contain patches that include patching sequence information (a [MsiPatchSequence](msipatchsequence-table.md) table) and patches that do not.</span></span> <span data-ttu-id="b2254-119">O Windows Installer instala os pacotes de patch sem essa tabela na ordem em que são fornecidos para o sistema.</span><span class="sxs-lookup"><span data-stu-id="b2254-119">The Windows Installer installs the patch packages without this table in the order that they are provided to the system.</span></span> <span data-ttu-id="b2254-120">O instalador conta para pacotes de patch que não têm uma tabela MsiPatchSequence, mas que foram marcados como patches obsoletos ou substituídos pelo método descrito na seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="b2254-120">The installer accounts for patch packages that lack a MsiPatchSequence table, but that have been marked as obsolete or superseded patches by the method described in the following section.</span></span>

<span data-ttu-id="b2254-121">Quando Windows Installer versão 3,0 instala vários patches, ele segue estas etapas para determinar a sequência na qual os patches individuais são aplicados ao produto:</span><span class="sxs-lookup"><span data-stu-id="b2254-121">When Windows Installer version 3.0 installs multiple patches, it follows these steps to determine the sequence in which individual patches are applied to the product:</span></span>

1.  <span data-ttu-id="b2254-122">Os patches instalados sem uma tabela [MsiPatchSequence](msipatchsequence-table.md) são colocados na sequência na ordem em que foram aplicados ao produto.</span><span class="sxs-lookup"><span data-stu-id="b2254-122">Installed patches without a [MsiPatchSequence](msipatchsequence-table.md) table are put in the sequence in the order that they were applied to the product.</span></span> <span data-ttu-id="b2254-123">O primeiro patch que foi aplicado é colocado primeiro na sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-123">The first patch that was applied is placed first in the sequence.</span></span>
2.  <span data-ttu-id="b2254-124">Novos patches sem uma [tabela MsiPatchSequence](msipatchsequence-table.md) são colocados na sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-124">New patches without a [MsiPatchSequence table](msipatchsequence-table.md) are put in the sequence.</span></span> <span data-ttu-id="b2254-125">Esses patches estão sendo aplicados pela instalação de aplicação de patch atual.</span><span class="sxs-lookup"><span data-stu-id="b2254-125">These patches are being applied by the current patching installation.</span></span> <span data-ttu-id="b2254-126">Eles são colocados na ordem em que são fornecidos ao sistema e colocados após todos os patches na etapa 1.</span><span class="sxs-lookup"><span data-stu-id="b2254-126">They are put in the order that they are provided to the system, and placed after all the patches in step 1.</span></span>
3.  <span data-ttu-id="b2254-127">Patches obsoletos são eliminados da sequência de patches.</span><span class="sxs-lookup"><span data-stu-id="b2254-127">Obsolete patches are eliminated from the sequence of patches.</span></span>
    > [!Note]  
    > <span data-ttu-id="b2254-128">Um pacote de patch pode especificar na propriedade [**Resumo do número de revisão**](revision-number-summary.md) uma lista explícita de patches obsoletos a serem removidos pelo patch.</span><span class="sxs-lookup"><span data-stu-id="b2254-128">A patch package can specify in the [**Revision Number Summary**](revision-number-summary.md) property an explicit list of obsolete patches to be removed by the patch.</span></span> <span data-ttu-id="b2254-129">Esta lista destina-se ao uso por Windows Installer versões anteriores à versão 3,0.</span><span class="sxs-lookup"><span data-stu-id="b2254-129">This list is intended for use by Windows Installer versions earlier than version 3.0.</span></span> <span data-ttu-id="b2254-130">Windows Installer versão 3,0 removerá os patches marcados como obsoletos da sequência, somente se os patches não tiverem a [tabela MsiPatchSequence](msipatchsequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="b2254-130">Windows Installer version 3.0 removes the patches marked as obsolete from the sequence, only if the patches do not have the [MsiPatchSequence table](msipatchsequence-table.md).</span></span>

     

4.  <span data-ttu-id="b2254-131">O instalador percorre a sequência de aplicação de patch e determina quais patches são aplicáveis na sequência determinada.</span><span class="sxs-lookup"><span data-stu-id="b2254-131">The installer steps through the patching sequence and determines which patches are applicable in the given sequence.</span></span> <span data-ttu-id="b2254-132">Quando vários patches são aplicados a um produto, cada patch na sequência também transforma o banco de dados de instalação do produto (arquivo. msi).</span><span class="sxs-lookup"><span data-stu-id="b2254-132">When multiple patches are applied to a product, each patch in the sequence also transforms the product's installation database (.msi file).</span></span> <span data-ttu-id="b2254-133">Um patch será aplicável em uma determinada sequência somente se sua transformação de banco de dados for capaz de pegar o [código do produto](product-codes.md), a [**versão**](productversion.md), a [**linguagem**](productlanguage.md)e o [**UpgradeCode**](upgradecode.md) que resultam da aplicação das transformações de todos os [pacotes de patch](patch-packages.md) anteriores ao banco de dados do produto.</span><span class="sxs-lookup"><span data-stu-id="b2254-133">A patch is applicable in a particular sequence only if its database transform is capable of taking the [product code](product-codes.md), [**version**](productversion.md), [**language**](productlanguage.md), and [**upgradecode**](upgradecode.md) that result from applying the transforms of all preceding [patch packages](patch-packages.md) to the product database.</span></span> <span data-ttu-id="b2254-134">O instalador elimina qualquer patch inaplicável da sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-134">The installer eliminates any inapplicable patches from the sequence.</span></span>
5.  <span data-ttu-id="b2254-135">O instalador começa a colocar patches que têm informações de sequenciamento em sua tabela [MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="b2254-135">The installer begins placing patches that have sequencing information in their [MsiPatchSequence](msipatchsequence-table.md) table.</span></span> <span data-ttu-id="b2254-136">Os patches de [atualização secundária](minor-upgrades.md) que têm a tabela MsiPatchSequence são colocados na sequência após os patches que foram sequenciados nas etapas anteriores e na ordem de suas versões de produto mais baixas para a mais alta após serem atualizados.</span><span class="sxs-lookup"><span data-stu-id="b2254-136">[Minor upgrade](minor-upgrades.md) patches that have the MsiPatchSequence table are placed in the sequence after the patches that were sequenced in previous steps and in the order of their lowest to highest product versions after being upgraded.</span></span> <span data-ttu-id="b2254-137">Windows Installer, em seguida, elimina os pequenos patches de atualização que são inaplicáveis nessa sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-137">Windows Installer then eliminates any minor upgrade patches that are inapplicable in this sequence.</span></span>
6.  <span data-ttu-id="b2254-138">[Pequenos](small-updates.md) patches de atualização destinados a [pequenas atualizações](minor-upgrades.md) com uma tabela [MsiPatchSequence](msipatchsequence-table.md) são atribuídos à versão mais recente do patch de atualização secundária na sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-138">[Small update](small-updates.md) patches targeting [minor upgrades](minor-upgrades.md) having a [MsiPatchSequence](msipatchsequence-table.md) table, are assigned to the highest version of the minor upgrade patch in the sequence.</span></span>
7.  <span data-ttu-id="b2254-139">Todos os pequenos patches de [atualização](small-updates.md) que permanecem sem atribuição após as etapas anteriores, e que têm a tabela [MsiPatchSequence](msipatchsequence-table.md) , são colocados na sequência antes da primeira [atualização secundária](minor-upgrades.md) que tem a tabela MsiPatchSequence e após o banco de dados de instalação. msi e quaisquer patches sem a tabela MsiPatchSequence.</span><span class="sxs-lookup"><span data-stu-id="b2254-139">All [small update](small-updates.md) patches that remain unassigned after the previous steps, and that have the [MsiPatchSequence](msipatchsequence-table.md) table, are put in the sequence before the first [minor upgrade](minor-upgrades.md) that has the MsiPatchSequence table, and after the .msi installation database and any patches without the MsiPatchSequence table.</span></span> <span data-ttu-id="b2254-140">Windows Installer, em seguida, elimina os pequenos patches de atualização que são inaplicáveis nessa sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-140">Windows Installer then eliminates any small update patches that are inapplicable in this sequence.</span></span>
8.  <span data-ttu-id="b2254-141">Windows Installer versão 3,0 elimina patches substituídos da sequência.</span><span class="sxs-lookup"><span data-stu-id="b2254-141">Windows Installer version 3.0 eliminates superseded patches from the sequence.</span></span> <span data-ttu-id="b2254-142">Quando um patch substitui os patches que ocorrem anteriormente na sequência de patch, o patch contém todas as correções nos patches anteriores.</span><span class="sxs-lookup"><span data-stu-id="b2254-142">When a patch supersedes patches that occur earlier in the patch sequence, the patch contains all the fixes in the earlier patches.</span></span> <span data-ttu-id="b2254-143">Os patches anteriores não são mais necessários.</span><span class="sxs-lookup"><span data-stu-id="b2254-143">The earlier patches are no longer required.</span></span> <span data-ttu-id="b2254-144">O Windows Installer requer as informações na tabela [MsiPatchSequence](msipatchsequence-table.md) para eliminar patches substituídos.</span><span class="sxs-lookup"><span data-stu-id="b2254-144">The Windows Installer requires the information in the [MsiPatchSequence](msipatchsequence-table.md) table to eliminate superseded patches.</span></span>
    > [!Note]  
    > <span data-ttu-id="b2254-145">Os patches destinados a substituir um conjunto anterior de patches devem ser criados para substituir os patches anteriores em todas as famílias de patches.</span><span class="sxs-lookup"><span data-stu-id="b2254-145">Patches intended to supersede an earlier set of patches must be authored to supersede the earlier patches in all patch families.</span></span> <span data-ttu-id="b2254-146">Os patches de [atualização pequenos](small-updates.md) só podem substituir pequenas atualizações.</span><span class="sxs-lookup"><span data-stu-id="b2254-146">[Small update](small-updates.md) patches can only supersede small updates.</span></span> <span data-ttu-id="b2254-147">As [atualizações secundárias](minor-upgrades.md) podem substituir as pequenas atualizações e outras atualizações secundárias.</span><span class="sxs-lookup"><span data-stu-id="b2254-147">[Minor upgrades](minor-upgrades.md) can supersede both small updates and other minor upgrades.</span></span>

     

9.  <span data-ttu-id="b2254-148">[Pequenos](small-updates.md) patches de atualização que contêm tabelas [MsiPatchSequence](msipatchsequence-table.md) , são seqüenciados em versões do produto de acordo com as informações de sequenciamento em suas tabelas MsiPatchSequence.</span><span class="sxs-lookup"><span data-stu-id="b2254-148">[Small update](small-updates.md) patches that carry [MsiPatchSequence](msipatchsequence-table.md) tables, get sequenced within product versions according to the sequencing information in their MsiPatchSequence tables.</span></span> <span data-ttu-id="b2254-149">Isso determina a sequência de patches final.</span><span class="sxs-lookup"><span data-stu-id="b2254-149">This determines the final patching sequence.</span></span>

<span data-ttu-id="b2254-150">Um patch que não deve mais ser usado pode ser eliminado da sequência de aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="b2254-150">A patch that should no longer be used can be eliminated from the patching sequence.</span></span> <span data-ttu-id="b2254-151">Para obter mais informações sobre como eliminar patches da sequência de patches, consulte [eliminando patches](eliminating-patches.md).</span><span class="sxs-lookup"><span data-stu-id="b2254-151">For more information about how to eliminate patches from the patching sequence, see [Eliminating Patches](eliminating-patches.md).</span></span>

<span data-ttu-id="b2254-152">Para obter um exemplo de como a tabela [MsiPatchSequence](msipatchsequence-table.md) pode ser usada para aplicar patches na ordem em que eles são criados, consulte o [exemplo de vários patches](multiple-patching-example.md).</span><span class="sxs-lookup"><span data-stu-id="b2254-152">For an example of how the [MsiPatchSequence](msipatchsequence-table.md) table can be used to apply patches in the order in which they are authored, see the [Multiple Patching Example](multiple-patching-example.md).</span></span>

 

 



