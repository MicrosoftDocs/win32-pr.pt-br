---
description: Usar símbolos públicos para seus binários de imagem de destino e de atualização pode reduzir tamanhos de patch binários por aproximadamente uma metade.
ms.assetid: 83351a1b-ba70-4f0b-bacf-71ad7993a5aa
title: Usando símbolos para reduzir o tamanho do patch binário
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9d5ccf33dbf3ffefbee909d99bd0204ea2f49aba
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105785419"
---
# <a name="using-symbols-to-reduce-binary-patch-size"></a><span data-ttu-id="c3260-103">Usando símbolos para reduzir o tamanho do patch binário</span><span class="sxs-lookup"><span data-stu-id="c3260-103">Using Symbols to Reduce Binary Patch Size</span></span>

<span data-ttu-id="c3260-104">Usar símbolos públicos para seus binários de imagem de destino e de atualização pode reduzir tamanhos de patch binários por aproximadamente uma metade.</span><span class="sxs-lookup"><span data-stu-id="c3260-104">Using public symbols for your target and upgrade image binaries can reduce binary patch sizes by approximately one half.</span></span> <span data-ttu-id="c3260-105">A redução real depende dos símbolos usados.</span><span class="sxs-lookup"><span data-stu-id="c3260-105">The actual reduction depends upon the symbols used.</span></span> <span data-ttu-id="c3260-106">Observe que o uso de símbolos pode resultar em tempos de criação de patch mais lentos porque leva mais tempo para processar os arquivos de símbolo.</span><span class="sxs-lookup"><span data-stu-id="c3260-106">Note that using symbols can result in slower patch creation times because it takes longer to process the symbol files.</span></span>

<span data-ttu-id="c3260-107">Para reduzir o tamanho de um patch binário usando símbolos, você deve fornecer símbolos para os binários de imagem de destino e de atualização.</span><span class="sxs-lookup"><span data-stu-id="c3260-107">To reduce the size of a binary patch using symbols, you must provide symbols for both the target and upgrade image binaries.</span></span> <span data-ttu-id="c3260-108">Especifique os símbolos na coluna SymbolPaths da tabela [TargetImages](targetimages-table-patchwiz-dll-.md) e a coluna SymbolPaths da tabela [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) .</span><span class="sxs-lookup"><span data-stu-id="c3260-108">Specify the symbols in the SymbolPaths column of the [TargetImages](targetimages-table-patchwiz-dll-.md) table and the SymbolPaths column of the [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) table.</span></span> <span data-ttu-id="c3260-109">Você deve usar Visual C++ para gerar símbolos no formato de arquivo do banco de dados do programa (PDB).</span><span class="sxs-lookup"><span data-stu-id="c3260-109">You must use Visual C++ to generate symbols in the program database (PDB) file format.</span></span> <span data-ttu-id="c3260-110">As versões mais recentes do Visual C++ fornecem todas as informações necessárias no arquivo PDB.</span><span class="sxs-lookup"><span data-stu-id="c3260-110">Newer versions of Visual C++ provide all of the necessary information in the PDB file.</span></span> <span data-ttu-id="c3260-111">As versões mais antigas do Visual C++ também geram o formato de arquivo de depuração (DBG).</span><span class="sxs-lookup"><span data-stu-id="c3260-111">Older versions of Visual C++ also generate the debug (DBG) file format.</span></span> <span data-ttu-id="c3260-112">Nesse caso, o valor de SymbolsPaths deve especificar o local dos arquivos PDB e DBG.</span><span class="sxs-lookup"><span data-stu-id="c3260-112">In this case, the SymbolsPaths value should specify the location of both the PDB and DBG files.</span></span>

<span data-ttu-id="c3260-113">Por exemplo, o TargetImage para um patch pode ser o pacote de instalação fornecido com o Windows 2000 e que instala a versão 1.1.1029.0 do MSI.DLL.</span><span class="sxs-lookup"><span data-stu-id="c3260-113">For example, the TargetImage for a patch might be the installation package that shipped with Windows 2000 and that installs the 1.1.1029.0 version of MSI.DLL.</span></span> <span data-ttu-id="c3260-114">O UpgradedImage pode ser o pacote de instalação atualizado fornecido com o Windows 2000 com Service Pack 1 (SP1) e que instala a versão 1.11.1314.0 do MSI.DLL.</span><span class="sxs-lookup"><span data-stu-id="c3260-114">The UpgradedImage might be the updated installation package that shipped with Windows 2000 with Service Pack 1 (SP1) and that installs the 1.11.1314.0 version of MSI.DLL.</span></span> <span data-ttu-id="c3260-115">Dois arquivos PCP (Propriedades de criação de patch) teriam de ser criados, um com a coluna SymbolPaths das tabelas [TargetImages](targetimages-table-patchwiz-dll-.md) e [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) deixados como nulo (em branco) e o outro com a coluna SymbolPaths das tabelas TargetImages e UpgradedImages preenchidas com o local dos símbolos para os binários.</span><span class="sxs-lookup"><span data-stu-id="c3260-115">Two Patch Creation Properties (PCP) files would then have to be created, one with the SymbolPaths column of both the [TargetImages](targetimages-table-patchwiz-dll-.md) and [UpgradedImages](upgradedimages-table-patchwiz-dll-.md) tables left NULL (blank) and the other with the SymbolPaths column of both the TargetImages and UpgradedImages tables populated with the location of the symbols for the binaries.</span></span> <span data-ttu-id="c3260-116">Nesse caso, o tamanho do patch gerado sem usar símbolos pode ser aproximadamente três vezes o tamanho do patch gerado usando símbolos.</span><span class="sxs-lookup"><span data-stu-id="c3260-116">In this case, the size of the patch generated without using symbols can be approximately three times the size of the patch generated using symbols.</span></span>

<span data-ttu-id="c3260-117">O utilitário Mpatch.exe pode ser usado para testar a geração de patches binários para um único arquivo e verificar se os símbolos são válidos ou não.</span><span class="sxs-lookup"><span data-stu-id="c3260-117">The Mpatch.exe utility can be used to test the generation of binary patches for a single file and to check whether or not the symbols are valid.</span></span> <span data-ttu-id="c3260-118">O utilitário Mpatch.exe está incluído nos [componentes SDK do Windows para os desenvolvedores de Windows Installer](platform-sdk-components-for-windows-installer-developers.md).</span><span class="sxs-lookup"><span data-stu-id="c3260-118">The Mpatch.exe utility is included in the [Windows SDK Components for Windows Installer Developers](platform-sdk-components-for-windows-installer-developers.md).</span></span> <span data-ttu-id="c3260-119">A saída de Mpatch.exe indicará se os símbolos não coincidem.</span><span class="sxs-lookup"><span data-stu-id="c3260-119">The output of Mpatch.exe will indicate if the symbols do not match.</span></span>

<span data-ttu-id="c3260-120">Por exemplo, digite a linha de comando a seguir para verificar se os símbolos são válidos ou não.</span><span class="sxs-lookup"><span data-stu-id="c3260-120">For example, enter the following command line to check whether or not the symbols are valid.</span></span>

<span data-ttu-id="c3260-121">**mpatch.exe-NEWSYMPATH: d: \\ Update-OLDSYMPATH: d: \\ destino d: \\ destino \\example.dll d: \\ Atualizar \\example.dll exemplo. Pat**</span><span class="sxs-lookup"><span data-stu-id="c3260-121">**mpatch.exe -NEWSYMPATH:d:\\update -OLDSYMPATH:d:\\target d:\\target\\example.dll d:\\update\\example.dll example.pat**</span></span>

<span data-ttu-id="c3260-122">Se os símbolos não estiverem no local correto, a saída de Mpatch.exe poderá incluir o aviso a seguir.</span><span class="sxs-lookup"><span data-stu-id="c3260-122">If the symbols are not in the correct location, the output of Mpatch.exe may include the following warning.</span></span>

``` syntax
WARNING: no debug symbols for d:\update\example.dll
```

 

 



