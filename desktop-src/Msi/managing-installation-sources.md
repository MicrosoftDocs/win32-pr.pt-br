---
description: Usuários e aplicativos com privilégios administrativos podem recuperar e modificar informações de rede, URL e lista de origem de mídia para aplicativos Windows Installer e patches no sistema.
ms.assetid: e8c66bad-f594-4926-b3b4-c8b245dcfa83
title: Gerenciando fontes de instalação
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d7fc45253af20ae5f9792ee3a5ec7dd318c80295
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105757389"
---
# <a name="managing-installation-sources"></a><span data-ttu-id="8037c-103">Gerenciando fontes de instalação</span><span class="sxs-lookup"><span data-stu-id="8037c-103">Managing Installation Sources</span></span>

<span data-ttu-id="8037c-104">Usuários e aplicativos com privilégios administrativos podem recuperar e modificar informações de rede, URL e lista de origem de mídia para aplicativos Windows Installer e patches no sistema.</span><span class="sxs-lookup"><span data-stu-id="8037c-104">Users and applications with administrative privileges can retrieve and modify network, URL, and media source list information for Windows Installer applications and patches on the system.</span></span>

<span data-ttu-id="8037c-105">**Windows Installer 2,0:** Sem suporte.</span><span class="sxs-lookup"><span data-stu-id="8037c-105">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="8037c-106">Os administradores não podem ler, reordenar ou substituir entradas na lista de origem e não podem modificar ou recuperar propriedades da lista de origem.</span><span class="sxs-lookup"><span data-stu-id="8037c-106">Administrators cannot read, reorder, or replace entries in the source list and cannot modify or retrieve source list properties.</span></span> <span data-ttu-id="8037c-107">É possível gerenciar fontes de rede, mas não URLs ou fontes de mídia.</span><span class="sxs-lookup"><span data-stu-id="8037c-107">It is possible to manage Network sources, but not URL or Media sources.</span></span> <span data-ttu-id="8037c-108">Os administradores só podem gerenciar listas de origem para aplicativos ou aplicativos por máquina instalados como por usuário para o usuário atual.</span><span class="sxs-lookup"><span data-stu-id="8037c-108">Administrators can only manage source lists for per-machine applications or applications installed as per-user for the current user.</span></span> <span data-ttu-id="8037c-109">Isso impede que os administradores que usam versões anteriores à Windows Installer versão 3,0 gerenciem informações da lista de origem para todos os usuários no sistema.</span><span class="sxs-lookup"><span data-stu-id="8037c-109">This prevents administrators using versions earlier than Windows Installer version 3.0 from managing source list information for all users in the system.</span></span>

<span data-ttu-id="8037c-110">**Windows Installer 3,0 e posterior:** Usuários e aplicativos que têm privilégios de administrador podem recuperar e modificar informações de lista de origem para aplicativos Windows Installer e patches instalados no sistema para todos os usuários.</span><span class="sxs-lookup"><span data-stu-id="8037c-110">**Windows Installer 3.0 and later:** Users and applications that have administrator privileges can retrieve and modify source list information for Windows Installer applications and patches installed on the system for all users.</span></span> <span data-ttu-id="8037c-111">As funções de lista de origem podem ser usadas para gerenciar listas de origem e propriedades de lista de origem para fontes de rede, URL e mídia.</span><span class="sxs-lookup"><span data-stu-id="8037c-111">The source list functions can be used to manage source lists and source list properties for network, URL and media sources.</span></span> <span data-ttu-id="8037c-112">O instalador pode reordenar as listas de origem de um processo externo.</span><span class="sxs-lookup"><span data-stu-id="8037c-112">The installer can reorder source lists from an external process.</span></span>

<span data-ttu-id="8037c-113">Usuários e aplicativos que têm privilégios administrativos podem ler e modificar os seguintes tipos de informações de lista de origem:</span><span class="sxs-lookup"><span data-stu-id="8037c-113">Users and applications that have administrative privileges can read and modify the following types of source list information:</span></span>

-   <span data-ttu-id="8037c-114">Listas de origem para aplicativos e patches instalados para todos os usuários no sistema.</span><span class="sxs-lookup"><span data-stu-id="8037c-114">Source lists for applications and patches installed for all users on the system.</span></span>
-   <span data-ttu-id="8037c-115">Listas de origem para fontes de patch que existem além das fontes de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8037c-115">Source lists for patch sources that exist apart from the application sources.</span></span>
-   <span data-ttu-id="8037c-116">Listas de origem para URL e fontes de mídia que existem além de fontes de rede.</span><span class="sxs-lookup"><span data-stu-id="8037c-116">Source lists for URL and media sources that exist apart from network sources.</span></span>
-   <span data-ttu-id="8037c-117">Propriedades da lista de origem, como [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType** e **PackageName**.</span><span class="sxs-lookup"><span data-stu-id="8037c-117">Source list properties such as [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType**, and **PackageName**.</span></span>

<span data-ttu-id="8037c-118">As funções de listas de origem podem limitar o escopo das listas de origem encontradas especificando o contexto de instalação e o contexto do usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-118">The source lists functions can limit the scope of the source lists found by specifying the installation context and user context.</span></span> <span data-ttu-id="8037c-119">Há três contextos de instalação possíveis: por usuário (não gerenciado), por computador e gerenciado por usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-119">There are three possible installation contexts: per-user (unmanaged), per-machine, and per-user managed.</span></span> <span data-ttu-id="8037c-120">O contexto do usuário pode ser um usuário específico ou todos os usuários no sistema.</span><span class="sxs-lookup"><span data-stu-id="8037c-120">The user context can be a particular user or all users on the system.</span></span>

<span data-ttu-id="8037c-121">Não administradores não podem modificar a lista de origem de uma instância de um aplicativo ou patch existente no contexto de outro usuário (gerenciado ou não gerenciado).</span><span class="sxs-lookup"><span data-stu-id="8037c-121">Non-administrators cannot modify the source list of an instance of an application or patch that exists under another user's per-user (managed or unmanaged) context.</span></span> <span data-ttu-id="8037c-122">Não administradores podem modificar as listas de origem de uma instância de um aplicativo ou patch instalados nos seguintes contextos:</span><span class="sxs-lookup"><span data-stu-id="8037c-122">Non-administrators can modify the source lists of an instance of an application or patch installed under the following contexts:</span></span>

-   <span data-ttu-id="8037c-123">Seu próprio contexto por usuário (não gerenciado).</span><span class="sxs-lookup"><span data-stu-id="8037c-123">Their own per-user(unmanaged) context.</span></span>
-   <span data-ttu-id="8037c-124">O contexto da máquina, mas somente se as políticas [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md)e [AlwaysInstallElevated](alwaysinstallelevated.md) permitirem que eles procurem um aplicativo ou uma origem de patch.</span><span class="sxs-lookup"><span data-stu-id="8037c-124">The machine context, but only if the [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md), and [AlwaysInstallElevated](alwaysinstallelevated.md) policies allows them to browse for an application or patch source.</span></span>
-   <span data-ttu-id="8037c-125">Seu próprio contexto gerenciado por usuário, mas somente se as políticas [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md)e [AlwaysInstallElevated](alwaysinstallelevated.md) permitirem que eles procurem um aplicativo ou uma origem de patch.</span><span class="sxs-lookup"><span data-stu-id="8037c-125">Their own per-user managed context, but only if the [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md), and [AlwaysInstallElevated](alwaysinstallelevated.md) policies allows them to browse for an application or patch source.</span></span>

<span data-ttu-id="8037c-126">Os administradores podem modificar qualquer lista de origem que um não administrador possa modificar.</span><span class="sxs-lookup"><span data-stu-id="8037c-126">Administrators can modify any source list that a non-administrator can modify.</span></span> <span data-ttu-id="8037c-127">Além disso, os administradores e os aplicativos que têm privilégios administrativos podem modificar as listas de origem de um aplicativo ou patch instalados nos seguintes contextos:</span><span class="sxs-lookup"><span data-stu-id="8037c-127">In addition, administrators and applications that have administrative privileges can modify the source lists of an application or patch installed under the following contexts:</span></span>

-   <span data-ttu-id="8037c-128">Contexto por máquina.</span><span class="sxs-lookup"><span data-stu-id="8037c-128">Per-machine context.</span></span>
-   <span data-ttu-id="8037c-129">Seus próprios por usuário (não gerenciados) ou seu próprio contexto gerenciado por usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-129">Their own per-user (unmanaged) or their own per-user managed context.</span></span>
-   <span data-ttu-id="8037c-130">Contexto gerenciado por usuário de outro usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-130">Another user's per-user managed context.</span></span>

> [!Note]  
> <span data-ttu-id="8037c-131">Usuários e aplicativos que têm privilégios administrativos não podem modificar a lista de origem de uma instância de um aplicativo ou patch instalado no contexto por usuário (não gerenciado) de outro usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-131">Users and applications that have administrative privileges cannot modify the source list of an instance of an application or patch installed in the per-user (unmanaged) context of another user.</span></span>

 

## <a name="managing-network-and-url-sources-for-products-and-patches"></a><span data-ttu-id="8037c-132">Gerenciando fontes de rede e de URL para produtos e patches</span><span class="sxs-lookup"><span data-stu-id="8037c-132">Managing Network and URL sources for Products and Patches</span></span>

<span data-ttu-id="8037c-133">Use a função [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) para adicionar ou reordenar a lista de origem de fontes de rede e URL para um patch ou aplicativo em um contexto específico.</span><span class="sxs-lookup"><span data-stu-id="8037c-133">Use the [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) function to add or reorder the source list of network and URL sources for a patch or application in a particular context.</span></span> <span data-ttu-id="8037c-134">Use o parâmetro *dwContext* para especificar o contexto de instalação.</span><span class="sxs-lookup"><span data-stu-id="8037c-134">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="8037c-135">Use o parâmetro *szUserSid* para especificar o contexto do usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-135">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="8037c-136">Use a função [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) para criar uma lista de origem para um patch que ainda não foi aplicado a nenhum aplicativo no contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="8037c-136">Use the [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) function to create a source list for a patch that has not yet been applied to any application in the specified context.</span></span> <span data-ttu-id="8037c-137">Isso pode ser útil ao registrar um patch para ter privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="8037c-137">This can be useful when registering a patch to have elevated privileges.</span></span> <span data-ttu-id="8037c-138">Para obter mais informações sobre como registrar privilégios elevados para um patch, consulte [aplicação de patch Per-User aplicativos gerenciados](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8037c-138">For more information about registering elevated privileges for a patch, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

<span data-ttu-id="8037c-139">Use a função [**MsiSourceListClearSource**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearsourcea) para remover uma fonte existente de um aplicativo ou patch em um contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="8037c-139">Use the [**MsiSourceListClearSource**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearsourcea) function to remove an existing source for an application or patch in a specified context.</span></span> <span data-ttu-id="8037c-140">A remoção da fonte atual de um aplicativo ou patch força o instalador a Pesquisar a lista de origem para uma origem na próxima vez que uma fonte for necessária.</span><span class="sxs-lookup"><span data-stu-id="8037c-140">Removing the current source for an application or patch forces the installer to search the source list for a source the next time a source is required.</span></span>

<span data-ttu-id="8037c-141">Use a função [**MsiSourceListEnumSources**](/windows/desktop/api/Msi/nf-msi-msisourcelistenumsourcesa) para enumerar fontes na lista de origem de um patch ou aplicativo especificado.</span><span class="sxs-lookup"><span data-stu-id="8037c-141">Use the [**MsiSourceListEnumSources**](/windows/desktop/api/Msi/nf-msi-msisourcelistenumsourcesa) function to enumerate sources in the source list of a specified patch or application.</span></span>

## <a name="managing-media-sources-for-products-and-patches"></a><span data-ttu-id="8037c-142">Gerenciando fontes de mídia para produtos e patches</span><span class="sxs-lookup"><span data-stu-id="8037c-142">Managing Media sources for Products and Patches</span></span>

<span data-ttu-id="8037c-143">Use a função [**MsiSourceListAddMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddmediadiska) para adicionar ou atualizar as informações de disco da origem de mídia de um aplicativo registrado ou patch.</span><span class="sxs-lookup"><span data-stu-id="8037c-143">Use the [**MsiSourceListAddMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddmediadiska) function to add or update the disk information of the media source of a registered application or patch.</span></span> <span data-ttu-id="8037c-144">Cada entrada é identificada exclusivamente por uma ID de disco.</span><span class="sxs-lookup"><span data-stu-id="8037c-144">Each entry is uniquely identified by a disk ID.</span></span> <span data-ttu-id="8037c-145">Se o disco já existir, ele será atualizado com o novo rótulo de volume e com os valores de prompt de disco.</span><span class="sxs-lookup"><span data-stu-id="8037c-145">If the disk already exists, it is updated with the new volume label and disk prompt values.</span></span> <span data-ttu-id="8037c-146">Se o disco não existir, uma nova entrada de disco será criada com os novos valores.</span><span class="sxs-lookup"><span data-stu-id="8037c-146">If the disk does not exist, a new disk entry is created with the new values.</span></span>

<span data-ttu-id="8037c-147">Use a função [**MsiSourceListClearMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearmediadiska) para remover um disco registrado existente sob a origem da mídia para um aplicativo ou patch em um contexto específico.</span><span class="sxs-lookup"><span data-stu-id="8037c-147">Use the [**MsiSourceListClearMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearmediadiska) function to remove an existing registered disk under the media source for an application or patch in a specific context.</span></span>

<span data-ttu-id="8037c-148">Use a função [**MsiSourceListEnumMediaDisks**](/windows/desktop/api/Msi/nf-msi-msisourcelistenummediadisksa) para enumerar uma lista de discos registrados na origem de mídia para um aplicativo ou patch.</span><span class="sxs-lookup"><span data-stu-id="8037c-148">Use the [**MsiSourceListEnumMediaDisks**](/windows/desktop/api/Msi/nf-msi-msisourcelistenummediadisksa) function to enumerate a list of disks registered under the media source for an application or patch.</span></span>

## <a name="retrieval-and-modification-of-source-list-information"></a><span data-ttu-id="8037c-149">Recuperação e modificação de informações da lista de origem</span><span class="sxs-lookup"><span data-stu-id="8037c-149">Retrieval and modification of source list information</span></span>

<span data-ttu-id="8037c-150">Use as funções [**MsiSourceListGetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistgetinfoa) e [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) para recuperar ou modificar informações sobre a lista de origem de um aplicativo ou patch em um contexto específico.</span><span class="sxs-lookup"><span data-stu-id="8037c-150">Use the [**MsiSourceListGetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistgetinfoa) and [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) functions to retrieve or modify information about the source list for an application or patch in a specific context.</span></span> <span data-ttu-id="8037c-151">Use o parâmetro *dwContext* para especificar o contexto de instalação.</span><span class="sxs-lookup"><span data-stu-id="8037c-151">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="8037c-152">Use o parâmetro *szUserSid* para especificar o contexto do usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-152">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="8037c-153">As propriedades da lista de origem, como [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType** e **PackageName** , podem ser acessadas.</span><span class="sxs-lookup"><span data-stu-id="8037c-153">Source list properties such as [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType**, and **PackageName** can be accessed.</span></span>

> [!Note]  
> <span data-ttu-id="8037c-154">A propriedade da lista de origem **LastUsedType** só pode ser lida.</span><span class="sxs-lookup"><span data-stu-id="8037c-154">The **LastUsedType** source list property can only be read.</span></span> <span data-ttu-id="8037c-155">Ele não pode ser definido diretamente usando a função [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) .</span><span class="sxs-lookup"><span data-stu-id="8037c-155">It cannot be set directly using the [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) function.</span></span>

 

## <a name="clearing-the-complete-source-list-or-forcing-a-source-resolution"></a><span data-ttu-id="8037c-156">Limpando a lista de origem completa ou forçando uma resolução de origem</span><span class="sxs-lookup"><span data-stu-id="8037c-156">Clearing the complete source list or forcing a source resolution</span></span>

<span data-ttu-id="8037c-157">Use a função [**MsiSourceListClearAllEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearallexa) para remover todas as fontes existentes de um determinado tipo de origem para o aplicativo ou a instância de patch especificada.</span><span class="sxs-lookup"><span data-stu-id="8037c-157">Use the [**MsiSourceListClearAllEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearallexa) function to remove all the existing sources of a given source type for the specified application or patch instance.</span></span> <span data-ttu-id="8037c-158">O registro do patch também será removido se o patch não for instalado por nenhum aplicativo no mesmo contexto.</span><span class="sxs-lookup"><span data-stu-id="8037c-158">The patch registration is also removed if the patch is not installed by any application in the same context.</span></span> <span data-ttu-id="8037c-159">Use o parâmetro *dwContext* para especificar o contexto de instalação.</span><span class="sxs-lookup"><span data-stu-id="8037c-159">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="8037c-160">Use o parâmetro *szUserSid* para especificar o contexto do usuário.</span><span class="sxs-lookup"><span data-stu-id="8037c-160">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="8037c-161">Use o [**MsiSourceListForceResolutionEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistforceresolutionexa) para limpar a última entrada de origem usada para um aplicativo ou patch no contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="8037c-161">Use the [**MsiSourceListForceResolutionEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistforceresolutionexa) to clear the last used source entry for an application or patch in the specified context.</span></span> <span data-ttu-id="8037c-162">Essa função remove o registro da propriedade chamada **LastUsedSource**.</span><span class="sxs-lookup"><span data-stu-id="8037c-162">This function removes the registration of the property called **LastUsedSource**.</span></span> <span data-ttu-id="8037c-163">Essa função não afeta a lista de origem registrada.</span><span class="sxs-lookup"><span data-stu-id="8037c-163">This function does not affect the registered source list.</span></span> <span data-ttu-id="8037c-164">Limpar o registro **LastUsedSource** força o instalador a realizar uma resolução de origem em relação às fontes registradas na próxima vez que precisar da origem.</span><span class="sxs-lookup"><span data-stu-id="8037c-164">Clearing the **LastUsedSource** registration forces the installer to do a source resolution against the registered sources the next time it requires the source.</span></span>

 

 



