---
description: Um módulo de mesclagem pode ser aplicado a um arquivo. msi para adicionar diretórios à instalação, mas não pode substituir ou remover diretórios existentes.
ms.assetid: 5b808aa2-b2b2-4703-bd57-0b5e1e73b306
title: Criando tabelas de diretório do módulo de mesclagem
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98332f2c0bda10a5cc076f0ec80df3bf4b2e05aa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103828058"
---
# <a name="authoring-merge-module-directory-tables"></a><span data-ttu-id="f271b-103">Criando tabelas de diretório do módulo de mesclagem</span><span class="sxs-lookup"><span data-stu-id="f271b-103">Authoring Merge Module Directory Tables</span></span>

<span data-ttu-id="f271b-104">Um módulo de mesclagem pode ser aplicado a um arquivo. msi para adicionar diretórios à instalação, mas não pode substituir ou remover diretórios existentes.</span><span class="sxs-lookup"><span data-stu-id="f271b-104">A merge module can be applied to an .msi file to add directories to the installation but it cannot replace or remove any existing directories.</span></span> <span data-ttu-id="f271b-105">A [tabela de diretórios](directory-table.md) especifica o layout dos diretórios que o módulo de mesclagem fornece à instalação de destino.</span><span class="sxs-lookup"><span data-stu-id="f271b-105">The [Directory table](directory-table.md) specifies the layout of the directories the merge module provides to the target installation.</span></span> <span data-ttu-id="f271b-106">Uma tabela de diretório é necessária em cada módulo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="f271b-106">A Directory table is required in every merge module.</span></span>

<span data-ttu-id="f271b-107">Use as diretrizes a seguir ao criar a tabela de diretório em um módulo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="f271b-107">Use the following guidelines when authoring the Directory Table in a merge module.</span></span> <span data-ttu-id="f271b-108">Para obter mais informações, consulte [tabela de diretórios](directory-table.md) e [usando a tabela de diretórios](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="f271b-108">For more information, see [Directory Table](directory-table.md) and [Using The Directory Table](using-the-directory-table.md).</span></span>

-   <span data-ttu-id="f271b-109">A estrutura de diretório adicionada pelo módulo de mesclagem deve ter um único diretório raiz.</span><span class="sxs-lookup"><span data-stu-id="f271b-109">The directory structure added by the merge module must have a single root directory.</span></span> <span data-ttu-id="f271b-110">A raiz deve ser nomeada TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="f271b-110">The root must be named TARGETDIR.</span></span> <span data-ttu-id="f271b-111">O usuário pode alterar o valor de TARGETDIR durante a mesclagem para especificar onde anexar a estrutura de diretório do módulo na árvore de diretórios do destino.</span><span class="sxs-lookup"><span data-stu-id="f271b-111">The user may change the value of TARGETDIR during the merge to specify where to attach the module's directory structure onto the target's directory tree.</span></span>
-   <span data-ttu-id="f271b-112">Mesclar tabelas de módulo diferentes da tabela de diretório não deve fazer referência direta a locais de diretório para TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="f271b-112">Merge module tables other than the Directory table must not directly reference directory locations to TARGETDIR.</span></span> <span data-ttu-id="f271b-113">O local dessa referência será alterado se o valor de TARGETDIR for alterado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="f271b-113">The location of such a reference changes if the value of TARGETDIR is changed by the user.</span></span>
-   <span data-ttu-id="f271b-114">As tabelas no módulo mesclar devem referenciar o local de um diretório filho de TARGETDIR ou outro diretório na árvore do módulo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="f271b-114">The tables in the merge module must reference the location of a child directory of TARGETDIR, or another directory in the merge module's tree.</span></span> <span data-ttu-id="f271b-115">Faça o seguinte para especificar TARGETDIR como o pai de um diretório no módulo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="f271b-115">Do the following to specify TARGETDIR as the parent of a directory in the merge module.</span></span> <span data-ttu-id="f271b-116">Insira o diretório na coluna diretório e digite TARGETDIR na \_ coluna pai do diretório.</span><span class="sxs-lookup"><span data-stu-id="f271b-116">Enter the directory into the Directory column and enter TARGETDIR into the Directory\_Parent column.</span></span> <span data-ttu-id="f271b-117">Use a notação "." na coluna DefaultDir para indicar que esse diretório está localizado em TARGETDIR sem um subdiretório.</span><span class="sxs-lookup"><span data-stu-id="f271b-117">Use the "." notation in the DefaultDir column to indicate that this directory is located in TARGETDIR without a subdirectory.</span></span> <span data-ttu-id="f271b-118">Para obter mais informações, consulte [usando a tabela de diretórios](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="f271b-118">For more information, see [Using the Directory Table](using-the-directory-table.md).</span></span>
-   <span data-ttu-id="f271b-119">Os nomes dos diretórios adicionados pelo módulo de mesclagem devem usar as convenções de nomenclatura descritas em [nomear chaves primárias em bancos de dados do módulo de mesclagem](naming-primary-keys-in-merge-module-databases.md).</span><span class="sxs-lookup"><span data-stu-id="f271b-119">The names of directories added by the merge module must use the naming conventions described in [Naming Primary Keys in Merge Module Databases](naming-primary-keys-in-merge-module-databases.md).</span></span> <span data-ttu-id="f271b-120">Isso inclui diretórios predefinidos por propriedades como a propriedade [**SystemFolder**](systemfolder.md) e a propriedade [**ProgramFilesFolder**](programfilesfolder.md) .</span><span class="sxs-lookup"><span data-stu-id="f271b-120">This includes directories predefined by properties such as the [**SystemFolder**](systemfolder.md) property and [**ProgramFilesFolder**](programfilesfolder.md) property.</span></span>
-   <span data-ttu-id="f271b-121">Acrescente um [*GUID*](g-gly.md) a cada entrada na tabela de diretórios (exceto TARGETDIR.) Isso inclui entradas de tabela de diretório que especificam Windows Installer propriedades [**SystemFolder**](systemfolder.md) , por exemplo, SystemFolder. 00000000 0000 0000 0000 \_ \_ \_ \_ 000000000000.</span><span class="sxs-lookup"><span data-stu-id="f271b-121">Append a [*GUID*](g-gly.md) to every entry in the Directory table (except TARGETDIR.) This includes Directory table entries that specify Windows Installer [**SystemFolder**](systemfolder.md) properties, for example, SystemFolder.00000000\_0000\_0000\_0000\_000000000000.</span></span> <span data-ttu-id="f271b-122">A biblioteca Mergemod.dll adiciona ações personalizadas para definir a propriedade **SystemFolder** .</span><span class="sxs-lookup"><span data-stu-id="f271b-122">The library Mergemod.dll adds custom actions to set the **SystemFolder** property.</span></span>
-   <span data-ttu-id="f271b-123">Quando um diretório predefinido é incluído em um módulo de mesclagem, a ferramenta de mesclagem adiciona automaticamente um [tipo de ação personalizada 51](custom-action-type-51.md) ao banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="f271b-123">When a predefined directory is included in a merge module, the merge tool automatically adds a [Custom Action Type 51](custom-action-type-51.md) to the target database.</span></span> <span data-ttu-id="f271b-124">O autor do módulo de mesclagem deve garantir que uma [tabela CustomAction](customaction-table.md) também esteja incluída.</span><span class="sxs-lookup"><span data-stu-id="f271b-124">The merge module author must ensure that a [CustomAction table](customaction-table.md) is also included.</span></span> <span data-ttu-id="f271b-125">A tabela CustomAction pode estar vazia, mas essa tabela deve existir no banco de dados de destino e garantir que os diretórios predefinidos modificados sejam gravados nos locais corretos.</span><span class="sxs-lookup"><span data-stu-id="f271b-125">The CustomAction table may be empty, but this table is required to exist in the target database and ensures that the modified predefined directories are written to the correct locations.</span></span> <span data-ttu-id="f271b-126">Por exemplo, quando um diretório do sistema é incluído em um módulo de mesclagem, o autor do módulo de mesclagem deve garantir que exista uma tabela de ação personalizada.</span><span class="sxs-lookup"><span data-stu-id="f271b-126">For example, when a system directory is included in a merge module, the merge module author must ensure that a Custom Action table exists.</span></span>

    <span data-ttu-id="f271b-127">Observe que o algoritmo de correspondência para a geração dessas ações personalizadas do tipo 51 verifica apenas se o nome do diretório começa com uma das propriedades predefinidas de [**SystemFolder**](systemfolder.md) .</span><span class="sxs-lookup"><span data-stu-id="f271b-127">Note that the matching algorithm for the generation of these type 51 custom actions only checks that the directory name begins with one of the predefined [**SystemFolder**](systemfolder.md) properties.</span></span> <span data-ttu-id="f271b-128">Ele não verifica se o nome do diretório é exatamente igual à propriedade do diretório.</span><span class="sxs-lookup"><span data-stu-id="f271b-128">It does not verify that the directory name exactly equals the directory property.</span></span> <span data-ttu-id="f271b-129">Qualquer diretório que comece com um desses nomes de pastas padrão Obtém uma ação personalizada de tipo 51, mesmo que o restante do nome não seja um GUID.</span><span class="sxs-lookup"><span data-stu-id="f271b-129">Any directory beginning with one of these standard folder names gets a type 51 custom action, even if the rest of the name is not a GUID.</span></span> <span data-ttu-id="f271b-130">Os autores precisam cuidar de que isso não gera correspondências falsos positivos e a geração de ação personalizada não intencional, em chaves primárias derivadas que começam com uma das propriedades **SystemFolder** .</span><span class="sxs-lookup"><span data-stu-id="f271b-130">Authors need to take care that this does not generate false positive matches, and unintended custom action generation, on derivative primary keys that begin with one of the **SystemFolder** properties.</span></span>

<span data-ttu-id="f271b-131">Veja a seguir um exemplo de uma tabela de diretório em um módulo de mesclagem e os diretórios resolvidos esperados.</span><span class="sxs-lookup"><span data-stu-id="f271b-131">The following is an example of a Directory table in a merge module and the expected resolved directories.</span></span>



| <span data-ttu-id="f271b-132">Diretório</span><span class="sxs-lookup"><span data-stu-id="f271b-132">Directory</span></span>                                              | <span data-ttu-id="f271b-133">Pai do diretório \_</span><span class="sxs-lookup"><span data-stu-id="f271b-133">Directory\_Parent</span></span>                                | <span data-ttu-id="f271b-134">DefaultDir</span><span class="sxs-lookup"><span data-stu-id="f271b-134">DefaultDir</span></span>  |
|--------------------------------------------------------|--------------------------------------------------|-------------|
| <span data-ttu-id="f271b-135">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="f271b-135">TARGETDIR</span></span>                                              |                                                  | <span data-ttu-id="f271b-136">SourceDir</span><span class="sxs-lookup"><span data-stu-id="f271b-136">SourceDir</span></span>   |
| <span data-ttu-id="f271b-137">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-137">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="f271b-138">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="f271b-138">TARGETDIR</span></span>                                        | <span data-ttu-id="f271b-139">.: \_ PROG Mmm</span><span class="sxs-lookup"><span data-stu-id="f271b-139">.:MMM\_Prog</span></span> |
| <span data-ttu-id="f271b-140">SystemFolder. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-140">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="f271b-141">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="f271b-141">TARGETDIR</span></span>                                        | <span data-ttu-id="f271b-142">\_Sys Mmm</span><span class="sxs-lookup"><span data-stu-id="f271b-142">MMM\_Sys</span></span>    |
| <span data-ttu-id="f271b-143">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-143">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="f271b-144">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848 \_ 006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-144">Dir00.BC82E350\_ C7FC\_11d1\_ A848\_006097ABDE17</span></span> | <span data-ttu-id="f271b-145">OCX do MFC \_</span><span class="sxs-lookup"><span data-stu-id="f271b-145">MFC\_OCX</span></span>    |



 

<span data-ttu-id="f271b-146">Espera-se que um módulo de mesclagem com a tabela de diretórios acima resulte na seguinte estrutura de diretório.</span><span class="sxs-lookup"><span data-stu-id="f271b-146">A merge module with the above Directory table is expected to result in the following directory structure.</span></span>



| <span data-ttu-id="f271b-147">Diretório</span><span class="sxs-lookup"><span data-stu-id="f271b-147">Directory</span></span>                                              | <span data-ttu-id="f271b-148">Destino</span><span class="sxs-lookup"><span data-stu-id="f271b-148">Target</span></span>                                     | <span data-ttu-id="f271b-149">Fonte</span><span class="sxs-lookup"><span data-stu-id="f271b-149">Source</span></span>                                               |
|--------------------------------------------------------|--------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="f271b-150">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-150">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="f271b-151">\[Ponto de instalação do módulo de mesclagem\]</span><span class="sxs-lookup"><span data-stu-id="f271b-151">\[Merge Module's Install Point\]</span></span>\\         | <span data-ttu-id="f271b-152">\[O ponto de origem do módulo de mesclagem \] \\ Mmm \_ PROG</span><span class="sxs-lookup"><span data-stu-id="f271b-152">\[Merge Module's Source Point\]\\MMM\_Prog</span></span>           |
| <span data-ttu-id="f271b-153">SystemFolder. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-153">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="f271b-154">\[SystemFolder\]</span><span class="sxs-lookup"><span data-stu-id="f271b-154">\[SystemFolder\]</span></span>\\                         | <span data-ttu-id="f271b-155">\[\] \\ Sys Mmm do ponto de origem do módulo de mesclagem \_</span><span class="sxs-lookup"><span data-stu-id="f271b-155">\[Merge Module's Source Point\]\\MMM\_Sys</span></span>            |
| <span data-ttu-id="f271b-156">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="f271b-156">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="f271b-157">\[\] \\ Ocx do MFC do ponto de instalação do módulo de mesclagem \_</span><span class="sxs-lookup"><span data-stu-id="f271b-157">\[Merge Module's Install Point\]\\MFC\_OCX</span></span> | <span data-ttu-id="f271b-158">\[MFC do ponto de origem do módulo de mesclagem/ \] \\ \_ \\ \_ ocx</span><span class="sxs-lookup"><span data-stu-id="f271b-158">\[Merge Module's Source Point\]\\MMM\_Prog\\MFC\_OCX</span></span> |



 

 

 



