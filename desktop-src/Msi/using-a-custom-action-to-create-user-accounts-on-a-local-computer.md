---
description: Este exemplo demonstra como usar ações personalizadas para criar contas de usuário em um computador local ao instalar um componente.
ms.assetid: fc06dd7b-46d7-45a0-85b3-26f808c64f89
title: Usando uma ação personalizada para criar contas de usuário em um computador local
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfd3bf002c0fa1d661c6bfebb6d1a18cbc4b0652
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "104296964"
---
# <a name="using-a-custom-action-to-create-user-accounts-on-a-local-computer"></a><span data-ttu-id="2b2d9-103">Usando uma ação personalizada para criar contas de usuário em um computador local</span><span class="sxs-lookup"><span data-stu-id="2b2d9-103">Using a Custom Action to Create User Accounts on a Local Computer</span></span>

<span data-ttu-id="2b2d9-104">Este exemplo demonstra como usar ações personalizadas para criar contas de usuário em um computador local ao instalar um componente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-104">This sample demonstrates how to use custom actions to create user accounts on a local computer when installing a component.</span></span> <span data-ttu-id="2b2d9-105">A remoção de um componente remove as contas de usuário local criadas pela ação personalizada.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-105">Removal of a component removes the local user accounts created by the custom action.</span></span> <span data-ttu-id="2b2d9-106">Várias ações personalizadas são demonstradas, incluindo [ações personalizadas de execução adiada](deferred-execution-custom-actions.md) e [ações personalizadas de reversão](rollback-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="2b2d9-106">Several custom actions are demonstrated including [Deferred Execution Custom Actions](deferred-execution-custom-actions.md) and [Rollback Custom Actions](rollback-custom-actions.md).</span></span>

<span data-ttu-id="2b2d9-107">O exemplo atende às especificações a seguir.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-107">The sample meets the following specifications.</span></span>

-   <span data-ttu-id="2b2d9-108">A instalação cria contas de usuário somente se estiver executando o Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-108">The installation creates user accounts only if running Windows 2000.</span></span>
-   <span data-ttu-id="2b2d9-109">A instalação criará contas de usuário somente se o componente estiver sendo instalado para ser executado localmente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-109">The installation creates user accounts only if the component is being installed to run locally.</span></span> <span data-ttu-id="2b2d9-110">Isso impede a criação de contas de usuário durante o reparo ou reinstalação do componente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-110">This precludes creating user accounts during the repair or reinstallation of the component.</span></span>
-   <span data-ttu-id="2b2d9-111">O instalador remove as contas quando o componente é removido.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-111">The Installer removes the accounts when the component is removed.</span></span>
-   <span data-ttu-id="2b2d9-112">As informações de conta de usuário são lidas de uma tabela personalizada no banco de dados de instalação e não são embutidas em código no código de ação personalizado.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-112">User account information is read from a custom table in the installation database and is not hard-coded into the custom action code.</span></span>
-   <span data-ttu-id="2b2d9-113">Como a criação ou remoção de contas de usuário requer privilégios elevados, algumas das ações personalizadas devem ser capazes de fazer alterações no sistema que exigem privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-113">Because the creation or removal of user accounts requires elevated privileges, some of the custom actions must be capable of making changes to the system that require elevated privileges.</span></span> <span data-ttu-id="2b2d9-114">Essas ações personalizadas devem ser ações personalizadas adiadas que são executadas quando no script de execução.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-114">These custom actions must be deferred custom actions that run when in the execution script.</span></span>
-   <span data-ttu-id="2b2d9-115">Cada conta tem uma ação personalizada de reversão para garantir que a conta seja removida na reversão da instalação do componente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-115">Each account has a rollback custom action to ensure the account is removed on rollback of the component installation.</span></span> <span data-ttu-id="2b2d9-116">Isso não inclui a reversão de uma exclusão de conta durante a remoção de um componente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-116">This does not include the rollback of an account deletion during the removal of a component.</span></span>
-   <span data-ttu-id="2b2d9-117">Ações personalizadas enviam mensagens ActionData para cada conta que é criada ou removida.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-117">Custom actions send ActionData messages for each account that is created or removed.</span></span> <span data-ttu-id="2b2d9-118">Isso não inclui o fornecimento de mensagens de progresso para o ProgressBar.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-118">This does not include providing progress messages for the ProgressBar.</span></span>
-   <span data-ttu-id="2b2d9-119">Ações personalizadas relatarão um erro se uma conta não puder ser criada.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-119">Custom actions report an error if an account cannot be created.</span></span>
-   <span data-ttu-id="2b2d9-120">A senha para a conta é obtida por meio da interação do usuário com a interface do usuário, ou no caso de uma instalação na interface do usuário básica ou nenhum [nível de interface de usuários](user-interface-levels.md), como uma propriedade passada na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-120">The password for the account is obtained through the user interaction with the user interface, or in the case of an installation at the Basic UI or None [User Interface Levels](user-interface-levels.md), as a property passed on the command line.</span></span>
-   <span data-ttu-id="2b2d9-121">Os dados confidenciais ficam ocultos do arquivo de log.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-121">Sensitive data is hidden from the log file.</span></span>

<span data-ttu-id="2b2d9-122">O exemplo inclui um componente hipotético chamado TestAccount.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-122">The sample includes a hypothetical component named TestAccount.</span></span> <span data-ttu-id="2b2d9-123">A discussão nas seções a seguir pressupõe que você já criou os recursos exigidos pelo TestAccount e criou o [recurso](feature-table.md), o [componente](component-table.md), o [arquivo](file-table.md), o [diretório](directory-table.md)e as tabelas [FeatureComponents](featurecomponents-table.md) no banco de dados de exemplo necessário para instalar esse componente.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-123">The discussion in the following sections assumes that you have already created the resources required by TestAccount and have authored the [Feature](feature-table.md), [Component](component-table.md), [File](file-table.md), [Directory](directory-table.md), and [FeatureComponents](featurecomponents-table.md) tables in the sample database required to install this component.</span></span> <span data-ttu-id="2b2d9-124">Para obter mais informações, consulte [um exemplo de instalação](an-installation-example.md).</span><span class="sxs-lookup"><span data-stu-id="2b2d9-124">For more information, see [An Installation Example](an-installation-example.md).</span></span>

<span data-ttu-id="2b2d9-125">Os tópicos a seguir contêm informações sobre como criar ações personalizadas necessárias e adicioná-las a um pacote de instalação.</span><span class="sxs-lookup"><span data-stu-id="2b2d9-125">The following topics contain information about how to create required custom actions and add them to an installation package.</span></span>

-   [<span data-ttu-id="2b2d9-126">Criando as ações personalizadas</span><span class="sxs-lookup"><span data-stu-id="2b2d9-126">Authoring the Custom Actions</span></span>](authoring-the-custom-actions.md)
-   [<span data-ttu-id="2b2d9-127">Adicionando uma tabela CustomUserAccounts personalizada</span><span class="sxs-lookup"><span data-stu-id="2b2d9-127">Adding a Custom CustomUserAccounts Table</span></span>](adding-a-custom-customuseraccounts-table.md)
-   [<span data-ttu-id="2b2d9-128">Criando a tabela CustomAction</span><span class="sxs-lookup"><span data-stu-id="2b2d9-128">Authoring the CustomAction Table</span></span>](authoring-the-customaction-table.md)
-   [<span data-ttu-id="2b2d9-129">Criando as tabelas de erro e ActionText</span><span class="sxs-lookup"><span data-stu-id="2b2d9-129">Authoring the ActionText and Error Tables</span></span>](authoring-the-actiontext-and-error-tables.md)
-   [<span data-ttu-id="2b2d9-130">Criando a tabela InstallExecuteSequence</span><span class="sxs-lookup"><span data-stu-id="2b2d9-130">Authoring the InstallExecuteSequence Table</span></span>](authoring-the-installexecutesequence-table.md)
-   [<span data-ttu-id="2b2d9-131">Criando a interface do usuário para entrada de senha</span><span class="sxs-lookup"><span data-stu-id="2b2d9-131">Authoring the User Interface for Password Input</span></span>](authoring-the-user-interface-for-password-input.md)
-   [<span data-ttu-id="2b2d9-132">Protegendo a instalação</span><span class="sxs-lookup"><span data-stu-id="2b2d9-132">Securing the installation</span></span>](securing-the-installation.md)

 

 



