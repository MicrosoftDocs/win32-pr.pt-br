---
description: Para ajudar a manter um ambiente seguro durante a instalação do software, siga estas diretrizes ao criar o pacote de Windows Installer.
ms.assetid: 04d91a9b-0528-4acb-8e11-fc817009db1f
title: Diretrizes para a criação de instalações seguras
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9d18e66c38480149ddad9e381c6461ffe50cf0b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105752653"
---
# <a name="guidelines-for-authoring-secure-installations"></a><span data-ttu-id="e4529-103">Diretrizes para a criação de instalações seguras</span><span class="sxs-lookup"><span data-stu-id="e4529-103">Guidelines for Authoring Secure Installations</span></span>

<span data-ttu-id="e4529-104">A adesão às seguintes diretrizes ao criar um pacote de Windows Installer ajuda a manter um ambiente seguro durante a instalação:</span><span class="sxs-lookup"><span data-stu-id="e4529-104">Adherence to the following guidelines when authoring a Windows Installer package helps maintain a secure environment during installation:</span></span>

-   <span data-ttu-id="e4529-105">Os administradores devem instalar aplicativos gerenciados em uma pasta de instalação de destino para a qual os usuários não administradores não têm privilégios de alteração ou modificação.</span><span class="sxs-lookup"><span data-stu-id="e4529-105">Administrators should install managed applications into a target installation folder for which non-admin users do not have change or modify privileges.</span></span>
-   <span data-ttu-id="e4529-106">Torne qualquer propriedade definida pelo usuário uma propriedade pública.</span><span class="sxs-lookup"><span data-stu-id="e4529-106">Make any property set by the user a public property.</span></span> <span data-ttu-id="e4529-107">As propriedades particulares não podem ser alteradas pelo usuário interagindo com a interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="e4529-107">Private properties cannot be changed by the user interacting with the user interface.</span></span> <span data-ttu-id="e4529-108">Para obter informações, consulte [sobre propriedades](about-properties.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-108">For information, see [About Properties](about-properties.md).</span></span>
-   <span data-ttu-id="e4529-109">Não use Propriedades para senhas ou outras informações que devam permanecer seguras.</span><span class="sxs-lookup"><span data-stu-id="e4529-109">Do not use properties for passwords or other information that must remain secure.</span></span> <span data-ttu-id="e4529-110">O instalador pode gravar o valor de uma propriedade criada na tabela de [Propriedades](property-table.md)ou criado em tempo de execução, em um log ou no registro do sistema.</span><span class="sxs-lookup"><span data-stu-id="e4529-110">The installer may write the value of a property authored into the [Property table](property-table.md), or created at run time, into a log or the system registry.</span></span> <span data-ttu-id="e4529-111">Para obter informações adicionais, consulte [impedindo que informações confidenciais sejam gravadas no arquivo de log](preventing-confidential-information-from-being-written-into-the-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-111">For additional information, see [Preventing Confidential Information from Being Written into the Log File](preventing-confidential-information-from-being-written-into-the-log-file.md).</span></span>
-   <span data-ttu-id="e4529-112">Quando a instalação requer que o instalador use privilégios [*elevados*](e-gly.md) , use [Propriedades públicas restritas](restricted-public-properties.md) para restringir as propriedades públicas que um usuário pode alterar.</span><span class="sxs-lookup"><span data-stu-id="e4529-112">When the installation requires the installer to use [*elevated*](e-gly.md) privileges, use [Restricted Public Properties](restricted-public-properties.md) to restrict the public properties a user can change.</span></span> <span data-ttu-id="e4529-113">Algumas restrições são comumente necessárias para manter um ambiente seguro quando a instalação requer que o instalador use privilégios *elevados* .</span><span class="sxs-lookup"><span data-stu-id="e4529-113">Some restrictions are commonly necessary to maintain a secure environment when the installation requires the installer to use *elevated* privileges.</span></span>
-   <span data-ttu-id="e4529-114">Evite instalar serviços que representam os privilégios de um usuário específico, pois isso pode gravar dados de segurança em um log ou no registro do sistema.</span><span class="sxs-lookup"><span data-stu-id="e4529-114">Avoid installing services that impersonate the privileges of a particular user because this may write security data into a log or the system registry.</span></span> <span data-ttu-id="e4529-115">Isso cria potencial para um problema de segurança, conflito de senha ou perda de dados de configuração quando o sistema é reiniciado.</span><span class="sxs-lookup"><span data-stu-id="e4529-115">This creates potential for a security problem, password conflict, or the loss of configuration data when the system is restarted.</span></span> <span data-ttu-id="e4529-116">Para obter detalhes, consulte a [tabela de instalação](serviceinstall-table.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-116">For details, see [ServiceInstall table](serviceinstall-table.md).</span></span>
-   <span data-ttu-id="e4529-117">Use a tabela [LockPermissions](lockpermissions-table.md) e a [tabela MsiLockPermissionsEx](msilockpermissionsex-table.md) para proteger serviços, arquivos, chaves do registro e pastas criadas em um ambiente bloqueado.</span><span class="sxs-lookup"><span data-stu-id="e4529-117">Use the [LockPermissions table](lockpermissions-table.md) and [MsiLockPermissionsEx table](msilockpermissionsex-table.md) to secure services, files, registry keys, and created folders in a locked-down environment.</span></span>
-   <span data-ttu-id="e4529-118">Adicione assinaturas digitais à instalação para garantir a integridade dos arquivos.</span><span class="sxs-lookup"><span data-stu-id="e4529-118">Add a digital signatures to the installation to ensure the integrity of the files.</span></span> <span data-ttu-id="e4529-119">Para obter detalhes, consulte [assinaturas digitais e Windows Installer](digital-signatures-and-windows-installer.md) e [criando uma instalação assinada totalmente verificada](authoring-a-fully-verified-signed-installation.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-119">For details, see [Digital Signatures and Windows Installer](digital-signatures-and-windows-installer.md) and [Authoring a Fully Verified Signed Installation](authoring-a-fully-verified-signed-installation.md).</span></span>
-   <span data-ttu-id="e4529-120">Crie seu pacote de Windows Installer de modo que, se o usuário tiver acesso negado aos recursos, a instalação falhará de uma maneira que mantenha um ambiente seguro.</span><span class="sxs-lookup"><span data-stu-id="e4529-120">Author your Windows Installer package such that if the user is denied access to resources, the setup fails in a manner that maintains a secure environment.</span></span> <span data-ttu-id="e4529-121">Verifique os privilégios de acesso do usuário e determine se há espaço em disco suficiente antes do início da instalação.</span><span class="sxs-lookup"><span data-stu-id="e4529-121">Check the user's access privileges and determine whether there is sufficient disk space before installation begins.</span></span> <span data-ttu-id="e4529-122">Normalmente, o instalador só deve exibir uma caixa de diálogo de procura se o usuário atual for um administrador ou se a instalação não exigir privilégios [*elevados*](e-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="e4529-122">Commonly, the installer should only display a browse dialog box if the current user is an administrator or if the installation does not require [*elevated*](e-gly.md) privileges.</span></span> <span data-ttu-id="e4529-123">Para obter detalhes, consulte [resiliência de origem](source-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-123">For details, see [Source Resiliency](source-resiliency.md).</span></span>
-   <span data-ttu-id="e4529-124">Use [transformações protegidas](secured-transforms.md) para armazenar transformações em um sistema de arquivos seguro localmente no computador do usuário.</span><span class="sxs-lookup"><span data-stu-id="e4529-124">Use [Secured Transforms](secured-transforms.md) to store transforms in a secure file system locally on the user's computer.</span></span> <span data-ttu-id="e4529-125">Isso impede que o usuário tenha acesso de gravação à transformação.</span><span class="sxs-lookup"><span data-stu-id="e4529-125">This prevents the user from having write access to the transform.</span></span>
-   <span data-ttu-id="e4529-126">Para obter informações sobre como proteger as fontes de mídia de aplicativos gerenciados, consulte [resiliência de origem](source-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-126">For information on how to secure media sources of managed applications, see [Source Resiliency](source-resiliency.md).</span></span>
-   <span data-ttu-id="e4529-127">Use a propriedade [**Resumo de segurança**](security-summary.md) para indicar se o pacote deve ser aberto como somente leitura.</span><span class="sxs-lookup"><span data-stu-id="e4529-127">Use the [**Security Summary**](security-summary.md) Property to indicate whether the package should be opened as read-only.</span></span> <span data-ttu-id="e4529-128">Essa propriedade deve ser definida como somente leitura recomendada para um banco de dados de instalação e para somente leitura imposta para uma transformação ou um patch.</span><span class="sxs-lookup"><span data-stu-id="e4529-128">This property should be set to read-only recommended for an installation database and to read-only enforced for a transform or patch.</span></span>
-   <span data-ttu-id="e4529-129">O instalador executa ações personalizadas com privilégios de usuário por padrão para limitar o acesso de ações personalizadas ao sistema.</span><span class="sxs-lookup"><span data-stu-id="e4529-129">The installer runs custom actions with user privileges by default in order to limit the access of custom actions to the system.</span></span> <span data-ttu-id="e4529-130">O instalador pode executar ações personalizadas com privilégios [*elevados*](e-gly.md) se um aplicativo gerenciado estiver sendo instalado ou se a política do sistema tiver sido especificada para privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="e4529-130">The installer may run custom actions with [*elevated*](e-gly.md) privileges if a managed application is being installed or if the system policy has been specified for elevated privileges.</span></span> <span data-ttu-id="e4529-131">Para obter detalhes, consulte [segurança de ação personalizada](custom-action-security.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-131">For details, see [Custom Action Security](custom-action-security.md).</span></span>
-   <span data-ttu-id="e4529-132">Use a política [DisablePatch](disablepatch.md) para fornecer segurança em ambientes em que a aplicação de patch deve ser restrita.</span><span class="sxs-lookup"><span data-stu-id="e4529-132">Use the [DisablePatch](disablepatch.md) policy to provide security in environments where patching must be restricted.</span></span>
-   <span data-ttu-id="e4529-133">Use a [tabela AppID](appid-table.md) para registrar configurações comuns de segurança e configuração para objetos DCOM.</span><span class="sxs-lookup"><span data-stu-id="e4529-133">Use the [AppId table](appid-table.md) to register common security and configuration settings for DCOM objects.</span></span>
-   <span data-ttu-id="e4529-134">Para obter informações relacionadas, consulte [diretrizes para proteger ações personalizadas](guidelines-for-securing-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-134">For related information, see [Guidelines for Securing Custom Actions](guidelines-for-securing-custom-actions.md).</span></span>
-   <span data-ttu-id="e4529-135">Para obter informações relacionadas, consulte [diretrizes para proteger pacotes em computadores bloqueados](guidelines-for-securing-packages-on-locked-down-computers.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-135">For related information, see [Guidelines for Securing Packages on Locked-Down Computers](guidelines-for-securing-packages-on-locked-down-computers.md).</span></span>
-   <span data-ttu-id="e4529-136">A partir do Windows Installer 3,0, a [aplicação de patches do UAC (controle de conta de usuário)](user-account-control--uac--patching.md) permite que usuários não administradores corrijam aplicativos instalados no contexto por máquina.</span><span class="sxs-lookup"><span data-stu-id="e4529-136">Starting with Windows Installer 3.0, [User Account Control (UAC) Patching](user-account-control--uac--patching.md) enables non-administrator users to patch applications installed in the per-machine context.</span></span> <span data-ttu-id="e4529-137">A aplicação de patches do UAC é habilitada fornecendo um certificado de signatário na tabela [MsiPatchCertificate](msipatchcertificate-table.md) e patches de assinatura com o mesmo certificado.</span><span class="sxs-lookup"><span data-stu-id="e4529-137">UAC patching is enabled by providing a signer certificate in the [MsiPatchCertificate](msipatchcertificate-table.md) table and signing patches with the same certificate.</span></span>
-   <span data-ttu-id="e4529-138">A capacidade do Windows Installer 5,0 de definir permissões de acesso em serviços, arquivos, pastas criadas e entradas de registro pode ajudar a tornar os aplicativos de instalação mais seguros.</span><span class="sxs-lookup"><span data-stu-id="e4529-138">The capability of the Windows Installer 5.0 to set access permissions on services, files, created folders, and registry entries can help make installation applications more secure.</span></span> <span data-ttu-id="e4529-139">Para obter informações, consulte [Securing Resources](securing-resources-.md).</span><span class="sxs-lookup"><span data-stu-id="e4529-139">For information, see [Securing Resources](securing-resources-.md).</span></span>

 

 



