---
description: Uma atualização importante é uma atualização abrangente de um produto que precisa de uma alteração da propriedade ProductCode.
ms.assetid: 0c8f2aad-b301-4404-9051-694d97db1a8d
title: Principais atualizações
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7795695072f6c153373db914781ac4b919cd2572
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104501982"
---
# <a name="major-upgrades"></a><span data-ttu-id="c723e-103">Principais atualizações</span><span class="sxs-lookup"><span data-stu-id="c723e-103">Major Upgrades</span></span>

<span data-ttu-id="c723e-104">Uma atualização importante é uma atualização abrangente de um produto que precisa de uma alteração da propriedade [**ProductCode**](productcode.md) .</span><span class="sxs-lookup"><span data-stu-id="c723e-104">A major upgrade is a comprehensive update of a product that needs a change of the [**ProductCode**](productcode.md) Property.</span></span>

<span data-ttu-id="c723e-105">Uma atualização principal típica remove uma versão anterior de um aplicativo e instala uma nova versão.</span><span class="sxs-lookup"><span data-stu-id="c723e-105">A typical major upgrade removes a previous version of an application and installs a new version.</span></span> <span data-ttu-id="c723e-106">Uma atualização importante pode reorganizar a árvore de componentes de recursos.</span><span class="sxs-lookup"><span data-stu-id="c723e-106">A major upgrade can reorganize the feature component tree.</span></span> <span data-ttu-id="c723e-107">Para obter mais informações, consulte [**ProductCode**](productcode.md) e [alterando o código do produto](changing-the-product-code.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-107">For more information, see [**ProductCode**](productcode.md) and [Changing the Product Code](changing-the-product-code.md).</span></span>

<span data-ttu-id="c723e-108">Durante uma atualização importante usando Windows Installer, o instalador pesquisa o computador do usuário em busca de aplicativos relacionados à atualização pendente e, quando detecta um, ele recupera a versão do aplicativo instalado do registro do sistema.</span><span class="sxs-lookup"><span data-stu-id="c723e-108">During a major upgrade using Windows Installer, the installer searches the user's computer for applications that are related to the pending upgrade, and when it detects one, it retrieves the version of the installed application from the system registry.</span></span> <span data-ttu-id="c723e-109">Em seguida, o instalador usa informações no banco de dados de atualização para determinar se o aplicativo instalado deve ser atualizado.</span><span class="sxs-lookup"><span data-stu-id="c723e-109">The installer then uses information in the upgrade database to determine whether to upgrade the installed application.</span></span>

<span data-ttu-id="c723e-110">Para habilitar os recursos de atualização do instalador, cada pacote deve ter uma propriedade [**UpgradeCode**](upgradecode.md) e uma [tabela de atualização](upgrade-table.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-110">To enable the installer upgrade capabilities, each package should have an [**UpgradeCode**](upgradecode.md) Property and an [Upgrade Table](upgrade-table.md).</span></span> <span data-ttu-id="c723e-111">Cada produto autônomo ou conjunto de produtos deve ter seu próprio **UpgradeCode**.</span><span class="sxs-lookup"><span data-stu-id="c723e-111">Each stand-alone product or product suite should have its own **UpgradeCode**.</span></span> <span data-ttu-id="c723e-112">Para obter mais informações sobre como usar o **UpgradeCode** , consulte a seção [usando um UpgradeCode](using-an-upgradecode.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-112">For more information about using the **UpgradeCode** see the section [Using an UpgradeCode](using-an-upgradecode.md).</span></span> <span data-ttu-id="c723e-113">Cada registro na tabela de atualização fornece uma combinação do código de atualização, da versão do produto e das informações de idioma usadas para identificar um conjunto de produtos afetados pela atualização.</span><span class="sxs-lookup"><span data-stu-id="c723e-113">Each record in the Upgrade table gives a combination of the upgrade code, product version, and language information used to identify a set of products affected by the upgrade.</span></span> <span data-ttu-id="c723e-114">Quando a [ação FindRelatedProducts](findrelatedproducts-action.md) detecta que um produto afetado está instalado no sistema, ele anexa o código do produto a uma propriedade na coluna actionproperty da tabela de atualização.</span><span class="sxs-lookup"><span data-stu-id="c723e-114">When the [FindRelatedProducts Action](findrelatedproducts-action.md) detects that an affected product is installed on the system, it appends the product code to a property in the ActionProperty column of the Upgrade table.</span></span> <span data-ttu-id="c723e-115">A [ação RemoveExistingProducts](removeexistingproducts-action.md) e a [ação MigrateFeatureStates](migratefeaturestates-action.md) removem ou migram os produtos listados na lista actionproperty.</span><span class="sxs-lookup"><span data-stu-id="c723e-115">The [RemoveExistingProducts action](removeexistingproducts-action.md) and the [MigrateFeatureStates Action](migratefeaturestates-action.md) remove or migrate the products listed in the ActionProperty list.</span></span> <span data-ttu-id="c723e-116">Os autores de pacote também podem seguir o procedimento descrito no tópico: [preparando um aplicativo para atualizações principais futuras](preparing-an-application-for-future-major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-116">Package authors can also follow the procedure described in the topic: [Preparing an Application for Future Major Upgrades](preparing-an-application-for-future-major-upgrades.md).</span></span>

<span data-ttu-id="c723e-117">Windows Installer pacotes de atualização podem ser criados de forma que as principais atualizações não serão instaladas se o usuário já tiver uma versão mais recente do aplicativo instalada.</span><span class="sxs-lookup"><span data-stu-id="c723e-117">Windows Installer upgrade packages can be authored such that major upgrades will not install if the user already has a newer version of the application installed.</span></span> <span data-ttu-id="c723e-118">Para obter mais informações sobre como criar um pacote que não será instalado em uma versão mais recente, consulte [impedindo a instalação de um pacote antigo em uma versão mais recente](preventing-an-old-package-from-installing-over-a-newer-version.md)</span><span class="sxs-lookup"><span data-stu-id="c723e-118">For more information about how to author a package that will not install over a newer version, see [Preventing an Old Package from Installing Over a Newer Version](preventing-an-old-package-from-installing-over-a-newer-version.md)</span></span>

> [!Note]  
> <span data-ttu-id="c723e-119">Windows Installer usa apenas os três primeiros campos da versão do produto.</span><span class="sxs-lookup"><span data-stu-id="c723e-119">Windows Installer uses only the first three fields of the product version.</span></span> <span data-ttu-id="c723e-120">Consulte a propriedade [**ProductVersion**](productversion.md) para obter descrições desses campos.</span><span class="sxs-lookup"><span data-stu-id="c723e-120">See [**ProductVersion**](productversion.md) Property for descriptions of these fields.</span></span> <span data-ttu-id="c723e-121">Se você incluir um quarto campo em sua versão do produto, o instalador ignorará o quarto campo.</span><span class="sxs-lookup"><span data-stu-id="c723e-121">If you include a fourth field in your product version, the installer ignores the fourth field.</span></span>

 

<span data-ttu-id="c723e-122">O método recomendado para aplicar uma atualização principal instalando o pacote completo do produto atualizado.</span><span class="sxs-lookup"><span data-stu-id="c723e-122">The recommended method of applying a major upgrade by installing the full package for the updated product.</span></span> <span data-ttu-id="c723e-123">Para obter informações sobre como aplicar uma atualização principal instalando o produto, consulte [aplicando as principais atualizações instalando o produto](applying-major-upgrades-by-installing-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-123">For information about how to apply a major upgrade by installing the product, see [Applying Major Upgrades by Installing the Product](applying-major-upgrades-by-installing-the-product.md).</span></span>

<span data-ttu-id="c723e-124">Uma atualização importante aplicada como um [pacote de patch](patch-packages.md) para o produto não pode ser sequenciada com outras atualizações e não é um [patch desinstalável](uninstallable-patches.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-124">A major upgrade applied as a [Patch Package](patch-packages.md) for the product cannot be sequenced with other updates and is not an [uninstallable patch](uninstallable-patches.md).</span></span> <span data-ttu-id="c723e-125">Para obter informações sobre como aplicar um pacote de patch de atualização importante a um pacote de Windows Installer, confira [aplicando as principais atualizações por meio da aplicação de patch na instalação local do produto](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="c723e-125">For information about how to apply a major upgrade patch package to a Windows Installer package see [Applying Major Upgrades by Patching the Local Installation of the Product](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span></span> <span data-ttu-id="c723e-126">O aplicativo de uma atualização principal usando um pacote de patch não é recomendado, em vez disso, aplique atualizações importantes instalando o produto completo.</span><span class="sxs-lookup"><span data-stu-id="c723e-126">The application of a major upgrade using a patch package is not recommended, instead apply major upgrades by installing the full product.</span></span>

> [!Note]  
> <span data-ttu-id="c723e-127">Se um aplicativo for instalado no [contexto de instalação](installation-context.md)por usuário, qualquer atualização importante para o aplicativo também deverá ser executada usando o contexto por usuário.</span><span class="sxs-lookup"><span data-stu-id="c723e-127">If an application is installed in the per-user [installation context](installation-context.md), any major upgrade to the application must also be performed using the per-user context.</span></span> <span data-ttu-id="c723e-128">Se um aplicativo estiver instalado no contexto de instalação por máquina, qualquer atualização importante para o aplicativo também deverá ser executada usando o contexto por máquina.</span><span class="sxs-lookup"><span data-stu-id="c723e-128">If an application is installed in the per-machine installation context, any major upgrade to the application must also be performed using the per-machine context.</span></span> <span data-ttu-id="c723e-129">O Windows Installer não instalará atualizações importantes no contexto de instalação.</span><span class="sxs-lookup"><span data-stu-id="c723e-129">The Windows Installer will not install major upgrades across installation context.</span></span>

 

<span data-ttu-id="c723e-130">Você pode condicionar ações personalizadas sequenciadas após [InstallValidate](installvalidate-action.md) para lidar com as principais atualizações usando a propriedade [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) :</span><span class="sxs-lookup"><span data-stu-id="c723e-130">You can condition custom actions that are sequenced after [InstallValidate](installvalidate-action.md) to handle major upgrades by using the [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) property:</span></span>

-   <span data-ttu-id="c723e-131">Se você quiser que uma ação personalizada seja executada durante uma desinstalação do produto, mas não durante a remoção do produto por uma atualização principal, use essa condição.</span><span class="sxs-lookup"><span data-stu-id="c723e-131">If you want a custom action to run during an uninstallation of the product, but not during the removal of the product by a major upgrade, use this condition.</span></span>

    <span data-ttu-id="c723e-132">REMOVE = "ALL" e não [ **UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span><span class="sxs-lookup"><span data-stu-id="c723e-132">REMOVE="ALL" AND NOT [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span></span>

-   <span data-ttu-id="c723e-133">Se você quiser que uma ação personalizada seja executada somente durante uma atualização principal, use essa condição.</span><span class="sxs-lookup"><span data-stu-id="c723e-133">If you want a custom action to run only during a major upgrade, use this condition.</span></span>

    [<span data-ttu-id="c723e-134">**UPGRADINGPRODUCTCODE**</span><span class="sxs-lookup"><span data-stu-id="c723e-134">**UPGRADINGPRODUCTCODE**</span></span>](upgradingproductcode.md)

 

 



