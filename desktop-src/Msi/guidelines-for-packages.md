---
description: Como o UAC (controle de conta de usuário) no Windows Vista restringe os privilégios durante uma instalação, os desenvolvedores de Windows Installer pacotes não devem pressupor que sua instalação sempre tenha acesso a todas as partes do sistema.
ms.assetid: 8e3b4ad8-b978-4e27-b060-1d023846718f
title: Diretrizes para pacotes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db228c2dff443d421ddc089074f0fcce6ae93e2f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103828991"
---
# <a name="guidelines-for-packages"></a><span data-ttu-id="96c59-103">Diretrizes para pacotes</span><span class="sxs-lookup"><span data-stu-id="96c59-103">Guidelines for Packages</span></span>

<span data-ttu-id="96c59-104">Como o UAC ( [*controle de conta de usuário*](u-gly.md) ) no Windows Vista restringe os privilégios durante uma instalação, os desenvolvedores de Windows Installer pacotes não devem pressupor que sua instalação sempre tenha acesso a todas as partes do sistema.</span><span class="sxs-lookup"><span data-stu-id="96c59-104">Because [*User Account Control*](u-gly.md) (UAC) in Windows Vista restricts privileges during an installation, developers of Windows Installer packages should not assume that their installation always has access to all parts of the system.</span></span>

<span data-ttu-id="96c59-105">Um pacote do instalador que pode ser implantado com êxito em usuários padrão por meio de [política de grupo](/previous-versions/windows/desktop/Policy/group-policy-start-page) deve, na maioria dos casos, também funcionar com o UAC no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="96c59-105">An installer package that can be successfully deployed to standard users via [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page) should in most cases also work with UAC in Windows Vista.</span></span> <span data-ttu-id="96c59-106">As exceções a isso podem ocorrer se a [tabela InstallUISequence](installuisequence-table.md) contiver a [ação LaunchConditions](launchconditions-action.md) ou a [tabela LaunchCondition](launchcondition-table.md) contiver uma condição baseada na [Propriedade Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="96c59-106">Exceptions to this can occur if the [InstallUISequence table](installuisequence-table.md) contains the [LaunchConditions action](launchconditions-action.md) or the [LaunchCondition table](launchcondition-table.md) contains a condition based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="96c59-107">Os desenvolvedores de pacotes Windows Installer devem, portanto, aderir às diretrizes a seguir para garantir que seu pacote funcione com o UAC e o Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="96c59-107">Windows Installer package developers should therefore adhere to the following guidelines to ensure their package works with UAC and Windows Vista.</span></span>

-   <span data-ttu-id="96c59-108">Ao incluir uma condição de [*contexto de instalação*](i-gly.md) com uma ação na [tabela InstallUISequence](installuisequence-table.md), use uma instrução condicional com base na [Propriedade Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="96c59-108">When including an [*installation context*](i-gly.md) condition with an action in the [InstallUISequence table](installuisequence-table.md), use a conditional statement based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="96c59-109">Não use uma condição com base na propriedade [**AdminUser**](adminuser.md) .</span><span class="sxs-lookup"><span data-stu-id="96c59-109">Do not use a condition based on the [**AdminUser**](adminuser.md) property.</span></span>
-   <span data-ttu-id="96c59-110">Ao incluir o contexto de instalação com as condições de inicialização de instalação, use um [tipo de ação personalizada 19](custom-action-type-19.md) na [tabela InstallExecuteSequence](installexecutesequence-table.md) e torne a ação personalizada condicional sobre a [Propriedade Privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="96c59-110">When including the installation context with the installation launch conditions, use a [Custom Action Type 19](custom-action-type-19.md) in the [InstallExecuteSequence table](installexecutesequence-table.md) and make the custom action conditional upon the [Privileged property](privileged.md).</span></span> <span data-ttu-id="96c59-111">Não use uma ação na [tabela LaunchCondition](launchcondition-table.md) com uma condição baseada na [Propriedade AdminUser](adminuser.md) ou na propriedade privilegiada.</span><span class="sxs-lookup"><span data-stu-id="96c59-111">Do not use an action in the [LaunchCondition table](launchcondition-table.md) with a condition based on the [AdminUser property](adminuser.md) or Privileged property.</span></span>
-   <span data-ttu-id="96c59-112">Para ler ou modificar a configuração do sistema, use uma [ação personalizada de execução adiada](deferred-execution-custom-actions.md) na [tabela InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="96c59-112">To read or modify the system configuration, use a [deferred execution custom action](deferred-execution-custom-actions.md) in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="96c59-113">Não use ações personalizadas de execução imediata na [tabela InstallUISequence](installuisequence-table.md) para modificar a configuração do sistema.</span><span class="sxs-lookup"><span data-stu-id="96c59-113">Do not use immediate execution custom actions in the [InstallUISequence table](installuisequence-table.md) to modify the system configuration.</span></span>
-   <span data-ttu-id="96c59-114">Para modificar partes do sistema que não são específicas do usuário, use uma ação personalizada adiada na [tabela InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="96c59-114">To modify parts of the system that are not user specific, use a deferred custom action in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="96c59-115">Você deve incluir o bit msidbCustomActionTypeNoImpersonate no tipo de ação personalizada.</span><span class="sxs-lookup"><span data-stu-id="96c59-115">You should include the msidbCustomActionTypeNoImpersonate bit in the custom action type.</span></span>
-   <span data-ttu-id="96c59-116">Omita o bit 3 do valor da propriedade de resumo [**contagem de palavras**](word-count-summary.md) para indicar que o pacote pode ser necessário para ser elevado.</span><span class="sxs-lookup"><span data-stu-id="96c59-116">Omit Bit 3 from the value of the [**Word Count**](word-count-summary.md) Summary Property to indicate that the package can be required to be elevated.</span></span> <span data-ttu-id="96c59-117">Não inclua esse bit, a menos que privilégios elevados não sejam necessários para instalar este pacote.</span><span class="sxs-lookup"><span data-stu-id="96c59-117">Do not include this bit unless elevated privileges are not required to install this package.</span></span>
-   <span data-ttu-id="96c59-118">Inclua um manifesto com o nível de execução solicitado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="96c59-118">Include a manifest with the application's Requested Execution Level.</span></span>
-   <span data-ttu-id="96c59-119">Inclua um certificado na tabela [MsiPatchCertificate](msipatchcertificate-table.md) do pacote original e assine todos os patches com o mesmo certificado.</span><span class="sxs-lookup"><span data-stu-id="96c59-119">Include a certificate in the [MsiPatchCertificate](msipatchcertificate-table.md) table of original package and sign all patches with the same certificate.</span></span>
-   <span data-ttu-id="96c59-120">Se forem necessários privilégios elevados para instalar um pacote de Windows Installer, o autor do pacote deverá incluir o atributo [ElevationShield](elevationshield-attribute.md) para o [controle de supressão](pushbutton-control.md) usado para iniciar a instalação.</span><span class="sxs-lookup"><span data-stu-id="96c59-120">If elevated privileges are required to install a Windows Installer package, the author of the package should include the [ElevationShield](elevationshield-attribute.md) attribute for the [PushButton control](pushbutton-control.md) used to start the installation.</span></span> <span data-ttu-id="96c59-121">Isso alertará o usuário que clicar no botão exibirá a caixa de diálogo UAC solicitando autorização do administrador para continuar a instalação.</span><span class="sxs-lookup"><span data-stu-id="96c59-121">This will alert the user that clicking on the button will display the UAC dialog box requesting administrator authorization to continue the installation.</span></span>
-   <span data-ttu-id="96c59-122">Defina a propriedade [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) como 1 para indicar ao Windows Installer que o pacote foi criado e testado para estar em conformidade com o UAC no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="96c59-122">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property to 1 to indicate to the Windows Installer that the package has been authored and tested to comply with UAC in Windows Vista.</span></span> <span data-ttu-id="96c59-123">Se essa propriedade não for definida, o instalador determinará se o pacote está em conformidade com o UAC.</span><span class="sxs-lookup"><span data-stu-id="96c59-123">If this property is not set, the installer determines whether the package complies with UAC.</span></span>

<span data-ttu-id="96c59-124">Fora do [política de grupo](/previous-versions/windows/desktop/Policy/group-policy-start-page), a seguinte verificação de conformidade com o UAC pode ser usada no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="96c59-124">Outside of [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page), the following check for UAC compliance can be used on Windows XP.</span></span>

<span data-ttu-id="96c59-125">**Para verificar a conformidade do UAC fora do Política de Grupo**</span><span class="sxs-lookup"><span data-stu-id="96c59-125">**To check for UAC compliance outside of Group Policy**</span></span>

1.  <span data-ttu-id="96c59-126">Faça logon no computador como administrador.</span><span class="sxs-lookup"><span data-stu-id="96c59-126">Log on to the computer as an administrator.</span></span>
2.  <span data-ttu-id="96c59-127">Anuncie o pacote para uma instalação por máquina:</span><span class="sxs-lookup"><span data-stu-id="96c59-127">Advertise the package for a per-machine installation:</span></span>

    <span data-ttu-id="96c59-128">**msiexec/jm** *package.msi*</span><span class="sxs-lookup"><span data-stu-id="96c59-128">**msiexec /jm** *package.msi*</span></span>

3.  <span data-ttu-id="96c59-129">Faça logoff do computador.</span><span class="sxs-lookup"><span data-stu-id="96c59-129">Log off the computer.</span></span>
4.  <span data-ttu-id="96c59-130">Faça logon no computador como usuário padrão.</span><span class="sxs-lookup"><span data-stu-id="96c59-130">Log on to the computer as a standard user.</span></span>
5.  <span data-ttu-id="96c59-131">Tentativa de instalar o pacote anunciado:</span><span class="sxs-lookup"><span data-stu-id="96c59-131">Attempt to install the advertised package:</span></span>

    <span data-ttu-id="96c59-132">**msiexec/i** *package.msi*</span><span class="sxs-lookup"><span data-stu-id="96c59-132">**msiexec /i** *package.msi*</span></span>

6.  <span data-ttu-id="96c59-133">Na maioria dos casos, se a instalação for bem-sucedida, o pacote será compatível com o UAC.</span><span class="sxs-lookup"><span data-stu-id="96c59-133">In most cases, if the installation is successful, the package is UAC compliant.</span></span>
7.  <span data-ttu-id="96c59-134">Defina a propriedade [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) no pacote como 1.</span><span class="sxs-lookup"><span data-stu-id="96c59-134">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property in the package to 1.</span></span>
8.  <span data-ttu-id="96c59-135">Teste a instalação correta do pacote usando o Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="96c59-135">Test for correct installation of the package using Windows Vista.</span></span>

 

 
