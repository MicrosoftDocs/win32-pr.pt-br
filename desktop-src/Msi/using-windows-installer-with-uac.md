---
description: Windows Installer está em conformidade com o UAC (controle de conta de usuário) no Windows Vista.
ms.assetid: 13955ded-6b7f-475f-bb0f-6530a0b4963f
title: Usando Windows Installer com o UAC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 77a05dcd2fb33eff24fb17702af1cb306f81002d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104090930"
---
# <a name="using-windows-installer-with-uac"></a><span data-ttu-id="7bb85-103">Usando Windows Installer com o UAC</span><span class="sxs-lookup"><span data-stu-id="7bb85-103">Using Windows Installer with UAC</span></span>

<span data-ttu-id="7bb85-104">Windows Installer está em conformidade com o UAC ( [*controle de conta de usuário*](u-gly.md) ) no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="7bb85-104">Windows Installer complies with [*User Account Control*](u-gly.md) (UAC) in Windows Vista.</span></span> <span data-ttu-id="7bb85-105">Com a autorização de um administrador, o Windows Installer pode instalar aplicativos ou patches em nome de um usuário que pode não ser um membro do grupo de administradores.</span><span class="sxs-lookup"><span data-stu-id="7bb85-105">With authorization from an administrator, the Windows Installer can install applications or patches on behalf of a user that may not be a member of the Administrators group.</span></span> <span data-ttu-id="7bb85-106">Isso é conhecido como uma instalação [*elevada*](e-gly.md) porque o Windows Installer faz alterações no sistema em nome do usuário que normalmente não seria permitido se o usuário estivesse fazendo as alterações diretamente.</span><span class="sxs-lookup"><span data-stu-id="7bb85-106">This is referred to as an [*elevated*](e-gly.md) installation because the Windows Installer makes changes to the system on behalf of the user that would not normally be allowed if the user were making the changes directly.</span></span>

-   <span data-ttu-id="7bb85-107">Ao usar o Windows Vista em um ambiente corporativo, os aplicativos podem ser designados como aplicativos gerenciados.</span><span class="sxs-lookup"><span data-stu-id="7bb85-107">When using Windows Vista in a corporate environment, applications can be designated as managed applications.</span></span> <span data-ttu-id="7bb85-108">Usando a implantação e a [política de grupo](/previous-versions/windows/desktop/Policy/group-policy-start-page)de aplicativos, os administradores podem bloquear diretórios e, em seguida, atribuir ou publicar os aplicativos gerenciados nesses diretórios para [*usuários padrão*](s-gly.md) para instalação, reparo ou remoção.</span><span class="sxs-lookup"><span data-stu-id="7bb85-108">Using application deployment and [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page), administrators can lockdown directories and then assign or publish the managed applications in those directories to [*standard users*](s-gly.md) for install, repair, or removal.</span></span> <span data-ttu-id="7bb85-109">Os aplicativos gerenciados são registrados no hive do registro do **\_ \_ computador local hKey** .</span><span class="sxs-lookup"><span data-stu-id="7bb85-109">Managed applications are registered in the **HKEY\_LOCAL\_MACHINE** registry hive.</span></span> <span data-ttu-id="7bb85-110">Depois que um aplicativo tiver sido registrado como um aplicativo gerenciado, as operações de instalação subsequentes sempre são executadas com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="7bb85-110">Once an application has been registered as a managed application, subsequent installation operations always run with elevated privileges.</span></span> <span data-ttu-id="7bb85-111">Se o usuário estiver executando como administrador, nenhuma solicitação será necessária para continuar a instalação.</span><span class="sxs-lookup"><span data-stu-id="7bb85-111">If the user is running as an administrator, no prompting is required to continue the installation.</span></span> <span data-ttu-id="7bb85-112">Se o usuário estiver sendo executado como usuário padrão e o aplicativo já tiver sido atribuído ou publicado, a instalação do aplicativo gerenciado poderá continuar sem avisar.</span><span class="sxs-lookup"><span data-stu-id="7bb85-112">If the user is running as a standard user, and the application has already been assigned or published, the installation of the managed application can continue without prompting.</span></span>
-   <span data-ttu-id="7bb85-113">Ao usar o Windows Vista em um ambiente não corporativo, o UAC lida com a elevação da instalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7bb85-113">When using Windows Vista in a non-corporate environment, UAC handles the elevation of application installation.</span></span> <span data-ttu-id="7bb85-114">Windows Installer 4,0 pode chamar o AIS ( [*serviço de informações de aplicativo*](a-gly.md) ) para solicitar a autorização do administrador para elevar uma instalação.</span><span class="sxs-lookup"><span data-stu-id="7bb85-114">Windows Installer 4.0 can call to the [*Application Information Service*](a-gly.md) (AIS) to request administrator authorization to elevate an installation.</span></span> <span data-ttu-id="7bb85-115">Antes que uma instalação identificada como exigir privilégios de administrador possa ser executada, o UAC solicita ao usuário o consentimento para elevar a instalação.</span><span class="sxs-lookup"><span data-stu-id="7bb85-115">Before an installation identified as requiring administrator privileges can be run, UAC prompts the user for consent to elevate the installation.</span></span> <span data-ttu-id="7bb85-116">A solicitação de consentimento é exibida por padrão, mesmo que o usuário seja membro do grupo local de administradores, porque os administradores são executados como usuários padrão até um componente de aplicativo ou sistema que exige permissão de solicitações de credenciais administrativas para ser executado.</span><span class="sxs-lookup"><span data-stu-id="7bb85-116">The consent prompt is displayed by default, even if the user is a member of the local Administrators group, because administrators run as standard users until an application or system component that requires administrative credential requests permission to run.</span></span> <span data-ttu-id="7bb85-117">Essa experiência do usuário é chamada de AAM ( [*modo de aprovação de administrador*](a-gly.md) ).</span><span class="sxs-lookup"><span data-stu-id="7bb85-117">This user experience is called [*Admin Approval Mode*](a-gly.md) (AAM).</span></span> <span data-ttu-id="7bb85-118">Se um usuário padrão tentar instalar o aplicativo, o usuário precisará obter um privilégio de administrador para fornecer a eles suas credenciais de administrador para continuar a instalação.</span><span class="sxs-lookup"><span data-stu-id="7bb85-118">If a standard user attempts to install the application, the user has to get a person with administrator privilege to provide them their administrator credentials to continue the installation.</span></span> <span data-ttu-id="7bb85-119">Essa experiência do usuário é chamada de solicitação de credencial (OTS) [*ao longo do ressalto*](o-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="7bb85-119">This user experience is called an [*Over the Shoulder*](o-gly.md) (OTS) credential prompt.</span></span>
-   <span data-ttu-id="7bb85-120">Como o UAC restringe os privilégios durante os estágios de uma instalação, os desenvolvedores de Windows Installer pacotes não devem pressupor que sua instalação sempre terá acesso a todas as partes do sistema.</span><span class="sxs-lookup"><span data-stu-id="7bb85-120">Because UAC restricts privileges during the stages of an installation, developers of Windows Installer packages should not assume that their installation will always have access to all parts of the system.</span></span> <span data-ttu-id="7bb85-121">Os desenvolvedores de pacotes Windows Installer devem, portanto, aderir às diretrizes de pacote descritas em [diretrizes para pacotes](guidelines-for-packages.md) para garantir que seu pacote funcione com o UAC e o Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="7bb85-121">Windows Installer package developers should therefore adhere to the package guidelines described in [Guidelines for Packages](guidelines-for-packages.md) to ensure their package works with UAC and Windows Vista.</span></span> <span data-ttu-id="7bb85-122">Um pacote que foi criado e testado para estar em conformidade com o UAC deve conter a propriedade [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) definida como 1.</span><span class="sxs-lookup"><span data-stu-id="7bb85-122">A package that has been authored and tested to comply with UAC should contain the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property set to 1.</span></span>
-   <span data-ttu-id="7bb85-123">Um administrador também pode usar os métodos descritos na seção: [instalando um pacote com privilégios elevados para que um não](installing-a-package-with-elevated-privileges-for-a-non-admin.md) administrador habilite um usuário que não seja administradores para instalar um aplicativo com privilégios de sistema elevados.</span><span class="sxs-lookup"><span data-stu-id="7bb85-123">An administrator can also use the methods described in the section: [Installing a Package with Elevated Privileges for a Non-Admin](installing-a-package-with-elevated-privileges-for-a-non-admin.md) to enable a non-administrator user to install an application with elevated system privileges.</span></span>
-   <span data-ttu-id="7bb85-124">Os privilégios são necessários para instalar um aplicativo no contexto gerenciado por usuário e, portanto, subsequentes Windows Installer reinstalações ou reparos do aplicativo também são executadas pelo instalador usando privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="7bb85-124">Privileges are required to install an application in the per-user-managed context, and therefore subsequent Windows Installer reinstallations or repairs of the application are also performed by the installer using elevated privileges.</span></span> <span data-ttu-id="7bb85-125">Isso significa que somente os patches de fontes confiáveis podem ser aplicados a um aplicativo no estado gerenciado por usuário.</span><span class="sxs-lookup"><span data-stu-id="7bb85-125">This means that only patches from trusted sources can be applied to an application in the per-user-managed state.</span></span> <span data-ttu-id="7bb85-126">A partir do Windows Installer 3,0, você pode aplicar um patch a um aplicativo gerenciado por usuário depois que o patch tiver sido registrado como tendo privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="7bb85-126">Beginning with Windows Installer 3.0, you can apply a patch to a per-user managed application after the patch has been registered as having elevated privileges.</span></span> <span data-ttu-id="7bb85-127">Para obter informações, consulte [aplicação de patches Per-User aplicativos gerenciados](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="7bb85-127">For information see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

> [!Note]  
> <span data-ttu-id="7bb85-128">Quando privilégios elevados não são necessários para instalar um pacote de Windows Installer, o autor do pacote pode suprimir a caixa de diálogo que o UAC exibe para solicitar aos usuários a autorização do administrador.</span><span class="sxs-lookup"><span data-stu-id="7bb85-128">When elevated privileges are not required to install a Windows Installer package, the author of the package can suppress the dialog box that UAC displays to prompt users for administrator authorization.</span></span> <span data-ttu-id="7bb85-129">Para obter mais informações, consulte [criando pacotes sem a caixa de diálogo UAC](authoring-packages-without-the-uac-dialog-box.md).</span><span class="sxs-lookup"><span data-stu-id="7bb85-129">For more information, see [Authoring Packages without the UAC Dialog Box](authoring-packages-without-the-uac-dialog-box.md).</span></span>

 

 

 
