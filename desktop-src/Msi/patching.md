---
description: Estas seções descrevem a aplicação de patch em uma instalação Windows Installer.
ms.assetid: e3c233bc-4344-449e-9e79-1a3b96ad2d08
title: Aplicação de patch
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c3117723bda1699eeae341fc75db201421f6ae0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105780947"
---
# <a name="patching"></a><span data-ttu-id="28487-103">Aplicação de patch</span><span class="sxs-lookup"><span data-stu-id="28487-103">Patching</span></span>

<span data-ttu-id="28487-104">Um aplicativo que foi instalado usando o Microsoft Windows Installer pode ser atualizado reinstalando um pacote de instalação atualizado (arquivo. msi) ou aplicando um patch de Windows Installer (um arquivo. msp) ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="28487-104">An application that has been installed using the Microsoft Windows Installer can be upgraded by reinstalling an updated installation package (.msi file), or by applying a Windows Installer patch (an .msp file) to the application.</span></span>

<span data-ttu-id="28487-105">Um patch Windows Installer (arquivo. msp) é um pacote independente que contém as atualizações para o aplicativo e descreve quais versões do aplicativo podem receber o patch.</span><span class="sxs-lookup"><span data-stu-id="28487-105">A Windows Installer patch (.msp file) is a self-contained package that contains the updates to the application and describes which versions of the application can receive the patch.</span></span> <span data-ttu-id="28487-106">Os patches contêm, no mínimo, duas transformações de banco de dados e podem conter arquivos de patch que são armazenados no fluxo do arquivo de gabinete do pacote de patch.</span><span class="sxs-lookup"><span data-stu-id="28487-106">Patches contain at a minimum, two database transforms and can contain patch files that are stored in the cabinet file stream of the patch package.</span></span> <span data-ttu-id="28487-107">Para obter mais informações sobre as partes de um pacote de patches Windows Installer, consulte [pacotes de patches](patch-packages.md).</span><span class="sxs-lookup"><span data-stu-id="28487-107">For more information about the parts of a Windows Installer patch package, see [Patch Packages](patch-packages.md).</span></span>

<span data-ttu-id="28487-108">A manutenção de aplicativos ao fornecer um patch Windows Installer, em vez de um pacote de instalação completo para o produto atualizado, pode ter vantagens.</span><span class="sxs-lookup"><span data-stu-id="28487-108">Servicing applications by delivering a Windows Installer patch, rather than a complete installation package for the updated product can have advantages.</span></span> <span data-ttu-id="28487-109">Um patch pode conter um arquivo inteiro ou apenas os bits de arquivo necessários para atualizar parte do arquivo.</span><span class="sxs-lookup"><span data-stu-id="28487-109">A patch can contain an entire file or only the file bits necessary to update part of the file.</span></span> <span data-ttu-id="28487-110">Isso pode permitir que o usuário Baixe um patch de atualização que seja muito menor do que o pacote de instalação para todo o produto.</span><span class="sxs-lookup"><span data-stu-id="28487-110">This can enable the user to download an upgrade patch that is much smaller than the installation package for the entire product.</span></span> <span data-ttu-id="28487-111">Uma atualização usando um patch pode preservar uma personalização de usuário do aplicativo por meio da atualização.</span><span class="sxs-lookup"><span data-stu-id="28487-111">An update using a patch can preserve a user customization of the application through the upgrade.</span></span>

<span data-ttu-id="28487-112">\* \* Windows Installer 4,5 e posterior: \* \*</span><span class="sxs-lookup"><span data-stu-id="28487-112">\*\*Windows Installer 4.5 and later:  \*\*</span></span>

<span data-ttu-id="28487-113">A partir do Windows Installer 4,5, os desenvolvedores podem marcar componentes em um patch com o valor **msidbComponentAttributesUninstallOnSupersedence** na [tabela de componentes](component-table.md).</span><span class="sxs-lookup"><span data-stu-id="28487-113">Beginning with Windows Installer 4.5, developers can mark components in a patch with the **msidbComponentAttributesUninstallOnSupersedence** value in the [Component table](component-table.md).</span></span> <span data-ttu-id="28487-114">Se um patch subsequente estiver instalado, marcado com o valor **msidbPatchSequenceSupersedeEarlier** em sua [tabela MsiPatchSequence](msipatchsequence-table.md) para substituir o primeiro patch, Windows Installer 4,5 e posterior poderá cancelar o registro e desinstalar os componentes marcados como **msidbComponentAttributesUninstallOnSupersedence** para evitar a saída dos componentes não utilizados no computador.</span><span class="sxs-lookup"><span data-stu-id="28487-114">If a subsequent patch is installed, marked with the **msidbPatchSequenceSupersedeEarlier** value in its [MsiPatchSequence table](msipatchsequence-table.md) to supersede the first patch, Windows Installer 4.5 and later can unregister and uninstall components marked **msidbComponentAttributesUninstallOnSupersedence** to prevent leaving behind unused components on the computer.</span></span> <span data-ttu-id="28487-115">Se o componente não estiver marcado com esse bit, a instalação do patch substituto poderá deixar um componente não utilizado no computador.</span><span class="sxs-lookup"><span data-stu-id="28487-115">If the component is not marked with with this bit, installation of the superseding patch can leave an unused component on the computer.</span></span> <span data-ttu-id="28487-116">Definir a propriedade **MSIUNINSTALLSUPERSEDEDCOMPONENTS** tem o mesmo efeito que definir esse bit para todos os componentes.</span><span class="sxs-lookup"><span data-stu-id="28487-116">Setting the **MSIUNINSTALLSUPERSEDEDCOMPONENTS** property has the same effect as setting this bit for all components.</span></span>

<span data-ttu-id="28487-117">\* \* Windows Installer 3,0 e posterior: \* \*</span><span class="sxs-lookup"><span data-stu-id="28487-117">\*\*Windows Installer 3.0 and later:  \*\*</span></span>

<span data-ttu-id="28487-118">Os desenvolvedores que usam o Windows Installer 3,0 e criam pacotes de patches que têm a [tabela MsiPatchSequence](msipatchsequence-table.md) podem criar pacotes de patches que fazem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="28487-118">Developers who use Windows Installer 3.0, and author patch packages that have the [MsiPatchSequence table](msipatchsequence-table.md) can create patch packages that do the following:</span></span>

-   <span data-ttu-id="28487-119">Use a linha de base do produto armazenada em cache pelo instalador para fazer a manutenção de aplicativos mais facilmente com patches Delta menores.</span><span class="sxs-lookup"><span data-stu-id="28487-119">Use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="28487-120">Para obter mais informações sobre como usar a linha de base do produto, consulte [reduzindo o tamanho do patch](reducing-patch-size.md).</span><span class="sxs-lookup"><span data-stu-id="28487-120">For more information about using the product baseline, see [Reducing Patch Size](reducing-patch-size.md).</span></span>
-   <span data-ttu-id="28487-121">Ignorar ações associadas a tabelas específicas que não são modificadas pelo patch.</span><span class="sxs-lookup"><span data-stu-id="28487-121">Skip actions associated with specific tables that are unmodified by the patch.</span></span> <span data-ttu-id="28487-122">Isso pode reduzir significativamente o tempo necessário para instalar o patch.</span><span class="sxs-lookup"><span data-stu-id="28487-122">This can significantly reduce the time required to install the patch.</span></span> <span data-ttu-id="28487-123">Para obter mais informações sobre quais tabelas podem ser ignoradas, consulte [otimização de patch](patch-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="28487-123">For more information about which tables can be skipped, see [Patch Optimization](patch-optimization.md).</span></span>
-   <span data-ttu-id="28487-124">Crie e instale patches que podem ser desinstalados individualmente, e em qualquer ordem, sem precisar desinstalar e reinstalar todo o aplicativo e outros patches.</span><span class="sxs-lookup"><span data-stu-id="28487-124">Create and install patches that can be uninstalled singly, and in any order, without having to uninstall and reinstall the entire application and other patches.</span></span> <span data-ttu-id="28487-125">Para obter mais informações sobre a desinstalação de patches, consulte [removendo patches](removing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="28487-125">For more information about uninstalling patches, see [Removing Patches](removing-patches.md).</span></span>
-   <span data-ttu-id="28487-126">Aplique patches em uma ordem constante, independentemente da ordem em que os patches são fornecidos ao sistema.</span><span class="sxs-lookup"><span data-stu-id="28487-126">Apply patches in a constant order regardless of the order that the patches are provided to the system.</span></span> <span data-ttu-id="28487-127">Para obter mais informações sobre como o Windows Installer determina a sequência usada para aplicar patches, consulte [sequenciando patches](sequencing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="28487-127">For more information about how the Windows Installer determines the sequence used to apply patches, see [Sequencing Patches](sequencing-patches.md).</span></span>
-   <span data-ttu-id="28487-128">Aplique patches a um aplicativo que foi instalado em um contexto gerenciado por usuário.</span><span class="sxs-lookup"><span data-stu-id="28487-128">Apply patches to an application that has been installed in a per-user-managed context.</span></span> <span data-ttu-id="28487-129">Para obter mais informações, consulte [aplicação de patches Per-User aplicativos gerenciados](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="28487-129">For more information, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

<span data-ttu-id="28487-130">\* \* Windows Installer 2,0: \* \*</span><span class="sxs-lookup"><span data-stu-id="28487-130">\*\*Windows Installer 2.0:  \*\*</span></span>

<span data-ttu-id="28487-131">Não há suporte para a [tabela MsiPatchSequence](msipatchsequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="28487-131">The [MsiPatchSequence table](msipatchsequence-table.md) is not supported.</span></span> <span data-ttu-id="28487-132">A partir do Windows Installer 3,0, os pacotes de patch podem conter informações que descrevem a sequência de patches para o patch em relação a outras atualizações e informações descritivas adicionais.</span><span class="sxs-lookup"><span data-stu-id="28487-132">Beginning with Windows Installer 3.0, patch packages can contain information that describes the patching sequence for the patch relative to other updates and additional descriptive information.</span></span>

<span data-ttu-id="28487-133">O método recomendado para criar um pacote de patch é usar ferramentas de criação de patch, como [Msimsp.exe](msimsp-exe.md) e [Patchwiz.dll](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="28487-133">The recommended method for creating a patch package is to use patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [Patchwiz.dll](patchwiz-dll.md).</span></span> <span data-ttu-id="28487-134">Os desenvolvedores podem gerar um arquivo de criação de patch conforme descrito na seção: [criando um pacote de patch](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="28487-134">Developers can generate a patch creation file as described in the section: [Creating a Patch Package](creating-a-patch-package.md).</span></span> <span data-ttu-id="28487-135">A criação de um patch de atualização pequeno é descrita na seção: [um exemplo de aplicação de patch de atualização pequena](a-small-update-patching-example.md).</span><span class="sxs-lookup"><span data-stu-id="28487-135">The creation of a small update patch is described in the section: [A Small Update Patching Example](a-small-update-patching-example.md).</span></span>

<span data-ttu-id="28487-136">Microsoft Windows Installer aceita um URL (Uniform Resource Locator) como uma fonte válida para um patch.</span><span class="sxs-lookup"><span data-stu-id="28487-136">Microsoft Windows Installer accepts a Uniform Resource Locator (URL) as a valid source for a patch.</span></span> <span data-ttu-id="28487-137">Para obter mais informações sobre como instalar um patch localizado em um servidor Web, consulte [baixando e instalando um patch da Internet](downloading-and-installing-a-patch-from-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="28487-137">For more information about how to install a patch located on a Web server, see [Downloading and Installing a Patch From the Internet](downloading-and-installing-a-patch-from-the-internet.md).</span></span>

<span data-ttu-id="28487-138">Um único Windows Installer patch (arquivo. msp) pode ser aplicado ao pacote de instalação ao instalar um aplicativo pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="28487-138">A single Windows Installer patch (.msp file) can be applied to the installation package when installing an application for the first time.</span></span> <span data-ttu-id="28487-139">Para obter mais informações, consulte [aplicação de patch nas instalações iniciais](patching-initial-installations.md).</span><span class="sxs-lookup"><span data-stu-id="28487-139">For more information, see [Patching Initial Installations](patching-initial-installations.md).</span></span>

<span data-ttu-id="28487-140">Não é possível eliminar todas as circunstâncias quando a aplicação de um patch pode exigir acesso à fonte de instalação original.</span><span class="sxs-lookup"><span data-stu-id="28487-140">It is not possible to eliminate all circumstances when the application of a patch may require access to the original installation source.</span></span> <span data-ttu-id="28487-141">No entanto, para minimizar a possibilidade de que seu patch exija acesso à fonte original, siga os pontos listados na seção a seguir: [impedir que um patch exija acesso à fonte de instalação original](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span><span class="sxs-lookup"><span data-stu-id="28487-141">However, to minimize the possibility that your patch will require access to the original source, adhere to the points listed in the following section: [Preventing a Patch from Requiring Access to the Original Installation Source](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span></span>

<span data-ttu-id="28487-142">Para minimizar a possibilidade de o patch não ser interrompido por uma transformação de personalização subsequente, normalmente o patch é instalado primeiro, seguido pela personalização.</span><span class="sxs-lookup"><span data-stu-id="28487-142">To minimize the possibility that your patch is not broken by a subsequent customization transform, typically the patch is installed first, followed by the customization.</span></span> <span data-ttu-id="28487-143">Instalar as transformações de personalização primeiro e, em seguida, o patch, pode interromper a personalização.</span><span class="sxs-lookup"><span data-stu-id="28487-143">Installing customization transforms first, and then the patch, may break the customization.</span></span> <span data-ttu-id="28487-144">Para obter mais informações sobre aplicação de patch em aplicativos personalizados, consulte [aplicação de patch em aplicativos personalizados](patching-customized-applications.md).</span><span class="sxs-lookup"><span data-stu-id="28487-144">For more information about patching customized applications, see [Patching Customized Applications](patching-customized-applications.md).</span></span>

 

 



