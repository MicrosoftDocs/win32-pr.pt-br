---
description: As ações personalizadas de confirmação são executadas após a conclusão bem-sucedida do script de instalação.
ms.assetid: ad766585-e8ac-44b6-9717-7979f803886c
title: Confirmar ações personalizadas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 174af16a84f71ff90a1fc35c76054ee503449b8a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105758313"
---
# <a name="commit-custom-actions"></a><span data-ttu-id="b2524-103">Confirmar ações personalizadas</span><span class="sxs-lookup"><span data-stu-id="b2524-103">Commit Custom Actions</span></span>

<span data-ttu-id="b2524-104">As ações personalizadas de confirmação são executadas após a conclusão bem-sucedida do script de instalação.</span><span class="sxs-lookup"><span data-stu-id="b2524-104">Commit Custom actions are executed upon successful completion of the installation script.</span></span> <span data-ttu-id="b2524-105">Se a [ação InstallFinalize](installfinalize-action.md) for bem-sucedida, o instalador executará qualquer ação personalizada de confirmação existente.</span><span class="sxs-lookup"><span data-stu-id="b2524-105">If the [InstallFinalize action](installfinalize-action.md) is successful, the installer will then run any existing Commit Custom actions.</span></span> <span data-ttu-id="b2524-106">O único parâmetro de modo que o instalador define nesse caso é MSIRUNMODE \_ Commit.</span><span class="sxs-lookup"><span data-stu-id="b2524-106">The only mode parameter the installer sets in this case is MSIRUNMODE\_COMMIT.</span></span> <span data-ttu-id="b2524-107">Consulte [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) para obter uma descrição dos parâmetros do modo de execução.</span><span class="sxs-lookup"><span data-stu-id="b2524-107">See [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) for a description of the run mode parameters.</span></span>

<span data-ttu-id="b2524-108">Uma ação personalizada Commit pode ser especificada adicionando um sinalizador Option ao campo Type da [tabela CustomAction](customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="b2524-108">A commit custom action can be specified by adding an option flag to the Type field of the [CustomAction table](customaction-table.md).</span></span> <span data-ttu-id="b2524-109">Consulte [Opções de execução de In-Script de ação personalizada](custom-action-in-script-execution-options.md) para o sinalizador de opção que designa uma ação personalizada de confirmação.</span><span class="sxs-lookup"><span data-stu-id="b2524-109">See [Custom Action In-Script Execution Options](custom-action-in-script-execution-options.md) for the option flag designating a commit custom action.</span></span>

<span data-ttu-id="b2524-110">Uma ação personalizada de confirmação é o complemento a uma [ação personalizada de reversão](rollback-custom-actions.md) e pode ser usada com ações de reversão personalizadas para reverter ações personalizadas que fazem alterações diretamente no sistema.</span><span class="sxs-lookup"><span data-stu-id="b2524-110">A commit custom action is the complement to a [rollback custom action](rollback-custom-actions.md) and can be used with rollback custom actions to reverse custom actions that make changes directly to the system.</span></span>

<span data-ttu-id="b2524-111">Observe que uma ação personalizada de reversão pode não ser capaz de remover todas as alterações feitas por ações personalizadas de confirmação.</span><span class="sxs-lookup"><span data-stu-id="b2524-111">Note that a rollback custom action may not be able to remove all of the changes made by commit custom actions.</span></span> <span data-ttu-id="b2524-112">Embora o instalador grave as ações de reversão e confirmação personalizada no script de reversão, as ações personalizadas de confirmação são executadas somente depois que o instalador tiver processado com êxito o script de instalação.</span><span class="sxs-lookup"><span data-stu-id="b2524-112">Although the installer writes both rollback and commit custom actions into the rollback script, commit custom actions only run after the installer has successfully processed the installation script.</span></span> <span data-ttu-id="b2524-113">As ações personalizadas de confirmação são as primeiras ações a serem executadas no script de reversão.</span><span class="sxs-lookup"><span data-stu-id="b2524-113">Commit custom actions are the first actions to run in the rollback script.</span></span> <span data-ttu-id="b2524-114">Se uma ação personalizada de confirmação falhar, o instalador iniciará a reversão, mas só poderá reverter as operações já gravadas no script de reversão.</span><span class="sxs-lookup"><span data-stu-id="b2524-114">If a commit custom action fails, the installer initiates rollback but can only rollback those operations already written to the rollback script.</span></span> <span data-ttu-id="b2524-115">Isso significa que, dependendo da ação personalizada de confirmação, uma reversão pode não ser capaz de desfazer as alterações feitas pela ação.</span><span class="sxs-lookup"><span data-stu-id="b2524-115">This means that depending on the commit custom action, a rollback may not be able to undo the changes made by the action.</span></span> <span data-ttu-id="b2524-116">Você pode ignorar as falhas em confirmar ações personalizadas, criando a ação personalizada para ignorar códigos de retorno.</span><span class="sxs-lookup"><span data-stu-id="b2524-116">You can ignore failures in commit custom actions by authoring the custom action to ignore return codes.</span></span>

<span data-ttu-id="b2524-117">As ações personalizadas de reversão e confirmação não são executadas quando a reversão está desabilitada.</span><span class="sxs-lookup"><span data-stu-id="b2524-117">Rollback and commit custom actions do not run when rollback is disabled.</span></span> <span data-ttu-id="b2524-118">Se um autor de pacote exigir esses tipos de ações personalizadas para a instalação adequada, eles deverão usar a propriedade [**RollbackDisabled**](rollbackdisabled.md) em uma condição que impeça a instalação de continuar quando a reversão estiver desabilitada.</span><span class="sxs-lookup"><span data-stu-id="b2524-118">If a package author requires these types of custom actions for proper installation, they should use the [**RollbackDisabled**](rollbackdisabled.md) Property in a condition that prevents the installation from continuing when rollback is disabled.</span></span>

 

 



