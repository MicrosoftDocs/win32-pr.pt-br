---
description: Um patch Windows Installer (arquivo. msp) é um arquivo usado para fornecer atualizações para Windows Installer aplicativos.
ms.assetid: f59736d7-0b5a-466c-ab60-f210ccccb07f
title: Pacotes de patch
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 56b4bb5b7e182c8118f5a40c45be440784b92099
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "103661909"
---
# <a name="patch-packages"></a><span data-ttu-id="b1708-103">Pacotes de patch</span><span class="sxs-lookup"><span data-stu-id="b1708-103">Patch Packages</span></span>

<span data-ttu-id="b1708-104">Um patch Windows Installer (arquivo. msp) é um arquivo usado para fornecer atualizações para Windows Installer aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b1708-104">A Windows Installer patch (.msp file) is a file used to deliver updates to Windows Installer applications.</span></span> <span data-ttu-id="b1708-105">O patch é um pacote independente que contém todas as informações necessárias para atualizar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b1708-105">The patch is a self-contained package that contains all the information required to update the application.</span></span> <span data-ttu-id="b1708-106">Um pacote de patch (arquivo. msp) pode ser muito menor do que o pacote de Windows Installer (arquivo. msi) para todo o aplicativo atualizado.</span><span class="sxs-lookup"><span data-stu-id="b1708-106">A patch package (.msp file) can be much smaller than the Windows Installer package (.msi file) for the entire updated application.</span></span> <span data-ttu-id="b1708-107">Para obter mais informações sobre como fornecer atualizações menores aos aplicativos, consulte [reduzindo o tamanho do patch](reducing-patch-size.md).</span><span class="sxs-lookup"><span data-stu-id="b1708-107">For more information about delivering smaller updates to applications, see [Reducing Patch Size](reducing-patch-size.md).</span></span>

<span data-ttu-id="b1708-108">Um pacote de patch contém as atualizações reais para o aplicativo e descreve quais versões do aplicativo podem receber o patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-108">A patch package contains the actual updates to the application and describes which versions of the application can receive the patch.</span></span> <span data-ttu-id="b1708-109">Os patches contêm no mínimo duas transformações de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b1708-109">Patches contain at minimum two database transforms.</span></span> <span data-ttu-id="b1708-110">Uma transformação atualiza as informações no banco de dados de instalação do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b1708-110">One transform updates the information in the installation database of the application.</span></span> <span data-ttu-id="b1708-111">A outra transformação adiciona informações que o instalador usa para aplicar patches em arquivos.</span><span class="sxs-lookup"><span data-stu-id="b1708-111">The other transform adds information that the installer uses for patching files.</span></span> <span data-ttu-id="b1708-112">O instalador usa as informações fornecidas pelas transformações para aplicar arquivos de patch que são armazenados no fluxo de arquivos de gabinete do pacote de patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-112">The installer uses the information provided by the transforms to apply patch files that are stored in the cabinet file stream of the patch package.</span></span> <span data-ttu-id="b1708-113">Um pacote de patch não tem um banco de dados como um pacote de instalação (arquivo. msi).</span><span class="sxs-lookup"><span data-stu-id="b1708-113">A patch package does not have a database like an installation package (.msi file.)</span></span>

<span data-ttu-id="b1708-114">A partir do Windows Installer versão 3,0, os pacotes de patch podem conter informações que descrevem a sequência de patches para o patch em relação a outras atualizações na tabela [MsiPatchSequence](msipatchsequence-table.md) e informações descritivas adicionais na tabela [MsiPatchMetaData](msipatchmetadata-table.md) .</span><span class="sxs-lookup"><span data-stu-id="b1708-114">Beginning with Windows Installer version 3.0, patch packages can contain information that describe the patching sequence for the patch relative to other updates in the [MsiPatchSequence](msipatchsequence-table.md) table and additional descriptive information in the [MsiPatchMetadata](msipatchmetadata-table.md) table.</span></span>

<span data-ttu-id="b1708-115">Os usuários podem instalar aplicativos e atualizações de uma imagem administrativa de rede.</span><span class="sxs-lookup"><span data-stu-id="b1708-115">Users can install applications and updates from a network administrative image.</span></span> <span data-ttu-id="b1708-116">Embora os pacotes de patch possam ser aplicados a instalações administrativas, o método recomendado para fornecer atualizações é fazer com que os usuários instalem o aplicativo original e, em seguida, apliquem os patches à instância local do aplicativo em seu computador.</span><span class="sxs-lookup"><span data-stu-id="b1708-116">Although patch packages can be applied to administrative installations, the recommended method to deliver updates is to have users install the original application and then apply the patches to the local instance of the application on to their computer.</span></span> <span data-ttu-id="b1708-117">Isso mantém os usuários em sincronia com a imagem administrativa.</span><span class="sxs-lookup"><span data-stu-id="b1708-117">This keeps users in synchronization with the administrative image.</span></span> <span data-ttu-id="b1708-118">Se um patch for aplicado à instalação administrativa, todos os clientes da instalação administrativa deverão rearmazenar em cache e reinstalar o aplicativo para receber a atualização.</span><span class="sxs-lookup"><span data-stu-id="b1708-118">If a patch is applied to the administrative installation, all clients of that administrative installation must recache and reinstall the application to receive the update.</span></span> <span data-ttu-id="b1708-119">Até que um usuário rearmazene novamente em cache e reinstale o, o usuário não poderá instalar o sob demanda e reparar as instalações da instalação administrativa corrigida.</span><span class="sxs-lookup"><span data-stu-id="b1708-119">Until a user recaches and reinstalls, the user is unable to install-on-demand and repair installations from the patched administrative installation.</span></span>

<span data-ttu-id="b1708-120">A partir do Windows Installer 3,0, os não administradores podem aplicar patches a aplicativos gerenciados por usuário depois que o patch foi aprovado como confiável por um administrador.</span><span class="sxs-lookup"><span data-stu-id="b1708-120">Beginning with Windows Installer 3.0, non-administrators can apply patches to per-user-managed applications after the patch has been approved as trusted by an administrator.</span></span> <span data-ttu-id="b1708-121">Para obter mais informações sobre como fazer isso, consulte [aplicação de patches Per-User aplicativos gerenciados](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="b1708-121">For more information on how to do this, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span> <span data-ttu-id="b1708-122">Outro método é usar a aplicação de patch de conta de usuário com privilégios mínimos.</span><span class="sxs-lookup"><span data-stu-id="b1708-122">Another method is to use least privileged user account patching.</span></span>

> [!Note]  
> <span data-ttu-id="b1708-123">Se a política [AllowLockdownPatch](allowlockdownpatch.md) tiver sido definida, os usuários não administradores poderão aplicar um patch a um aplicativo existente durante a execução de uma instalação em privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="b1708-123">If the [AllowLockdownPatch](allowlockdownpatch.md) policy has been set, non-administrator users can apply a patch to an existing application while running an installation at elevated privileges.</span></span> <span data-ttu-id="b1708-124">Esse método não é recomendado porque permite que patches não confiáveis sejam aplicados a um aplicativo que pode ser executado com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="b1708-124">This method is not recommended because it enables untrusted patches to be applied to an application that can run with elevated privileges.</span></span>

 

<span data-ttu-id="b1708-125">Os pacotes de patches são compostos pelas seguintes partes.</span><span class="sxs-lookup"><span data-stu-id="b1708-125">Patch packages are comprised of the following parts.</span></span> <span data-ttu-id="b1708-126">Para obter mais informações sobre a construção de pacotes de patch, consulte [criando um pacote de patch](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="b1708-126">For more information about the construction of patch packages, see [Creating a Patch Package](creating-a-patch-package.md).</span></span>

## <a name="summary-information-stream"></a><span data-ttu-id="b1708-127">Fluxo de informações de resumo</span><span class="sxs-lookup"><span data-stu-id="b1708-127">Summary Information Stream</span></span>

<span data-ttu-id="b1708-128">O fluxo de informações resumidas do pacote de patch fornece informações sobre a identidade e a finalidade do patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-128">The summary information stream of the patch package provides information about the identity and purpose of the patch.</span></span>

<span data-ttu-id="b1708-129">O fluxo de informações de resumo mantém um mínimo dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="b1708-129">The summary information stream holds a minimum of the following:</span></span>

-   <span data-ttu-id="b1708-130">Um GUID que identifica exclusivamente o patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-130">A GUID that uniquely identifies the patch.</span></span> <span data-ttu-id="b1708-131">O GUID desse patch é acrescentado com uma lista de GUIDs para patches anteriores que são substituídos por esse patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-131">The GUID for this patch is appended with a list of GUIDs for earlier patches that are replaced by this patch.</span></span>
-   <span data-ttu-id="b1708-132">Uma lista delimitada por ponto-e-vírgula de códigos de produto para destinos válidos para este patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-132">A semicolon-delimited list of product codes for valid targets for this patch.</span></span>
-   <span data-ttu-id="b1708-133">Uma lista delimitada por ponto-e-vírgula dos nomes de subarmazenamento de transformação na ordem em que eles devem ser processados.</span><span class="sxs-lookup"><span data-stu-id="b1708-133">A semicolon-delimited list of transform substorage names in the order they are to be processed.</span></span>
-   <span data-ttu-id="b1708-134">Uma lista delimitada por ponto-e-vírgula de fontes para este patch.</span><span class="sxs-lookup"><span data-stu-id="b1708-134">A semicolon-delimited list of sources for this patch.</span></span>

## <a name="transform-substorage"></a><span data-ttu-id="b1708-135">Transformar subarmazenamento</span><span class="sxs-lookup"><span data-stu-id="b1708-135">Transform Substorage</span></span>

<span data-ttu-id="b1708-136">Um pacote de patch contém transformações que podem adicionar ou remover arquivos, entradas de registro, interfaces do usuário e personalizações.</span><span class="sxs-lookup"><span data-stu-id="b1708-136">A patch package contains transforms that can add or remove files, registry entries, user interfaces, and customizations.</span></span> <span data-ttu-id="b1708-137">As transformações são incluídas como subarmazenamentos no pacote.</span><span class="sxs-lookup"><span data-stu-id="b1708-137">Transforms are included as substorages in the package.</span></span> <span data-ttu-id="b1708-138">Um pacote de patch contém duas transformações para cada banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="b1708-138">A patch package contains two transforms for each target database.</span></span> <span data-ttu-id="b1708-139">Uma transformação são as atualizações reais do banco de dados de instalação e são geradas com base nas diferenças entre as imagens originais e atualizadas do pacote de instalação.</span><span class="sxs-lookup"><span data-stu-id="b1708-139">One transform is the actual updates to the installation database and is generated from the differences between the original and updated images of the installation package.</span></span> <span data-ttu-id="b1708-140">A outra transformação adiciona entradas às tabelas [patch](patch-table.md), [PatchPackage](patchpackage-table.md), [Media](media-table.md), [InstallExecuteSequence](installexecutesequence-table.md)e [AdminExecuteSequence](adminexecutesequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="b1708-140">The other transform adds entries to the [Patch](patch-table.md), [PatchPackage](patchpackage-table.md), [Media](media-table.md), [InstallExecuteSequence](installexecutesequence-table.md), and [AdminExecuteSequence](adminexecutesequence-table.md) tables.</span></span> <span data-ttu-id="b1708-141">As informações no subarmazenamento o vincula a um [**UpgradeCode**](upgradecode.md), [**ProductCode**](productcode.md), [**ProductVersion**](productversion.md)e [**ProductLanguage**](productlanguage.md)específicos.</span><span class="sxs-lookup"><span data-stu-id="b1708-141">Information in the substorage ties it to a specific [**UpgradeCode**](upgradecode.md), [**ProductCode**](productcode.md), [**ProductVersion**](productversion.md), and [**ProductLanguage**](productlanguage.md).</span></span> <span data-ttu-id="b1708-142">Um pacote de patch que pode ser aplicado a vários destinos contém mais de um par dessas transformações.</span><span class="sxs-lookup"><span data-stu-id="b1708-142">A patch package that can be applied to multiple targets contains more than one pair of these transforms.</span></span>

## <a name="cabinet-file-stream"></a><span data-ttu-id="b1708-143">Fluxo do arquivo de gabinete</span><span class="sxs-lookup"><span data-stu-id="b1708-143">Cabinet File Stream</span></span>

<span data-ttu-id="b1708-144">O fluxo de arquivo de gabinete incluído em um patch pode conter estes tipos de arquivos:</span><span class="sxs-lookup"><span data-stu-id="b1708-144">The cabinet file stream included in a patch can contain these types of files:</span></span>

-   <span data-ttu-id="b1708-145">Arquivos de patch que contêm as informações necessárias para alterar a versão antiga do arquivo para a nova versão.</span><span class="sxs-lookup"><span data-stu-id="b1708-145">Patch files containing the information required to change the old version of the file into the new version.</span></span> <span data-ttu-id="b1708-146">Um único arquivo de patch pode ser usado para atualizar uma ou mais versões antigas de um arquivo.</span><span class="sxs-lookup"><span data-stu-id="b1708-146">A single patch file can be used to update one or more old versions of a file.</span></span>
-   <span data-ttu-id="b1708-147">Arquivos adicionais sendo adicionados ao aplicativo que não estão presentes na versão antiga.</span><span class="sxs-lookup"><span data-stu-id="b1708-147">Additional files being added to the application that are not present in the old version.</span></span>
-   <span data-ttu-id="b1708-148">Um arquivo de substituição inteiro.</span><span class="sxs-lookup"><span data-stu-id="b1708-148">An entire replacement file.</span></span> <span data-ttu-id="b1708-149">No caso raro em que a nova versão de um arquivo seja menor do que o patch necessário para atualizar a versão antiga desse arquivo, o novo arquivo pode ser incluído em sua totalidade.</span><span class="sxs-lookup"><span data-stu-id="b1708-149">In the rare case where the new version of a file is smaller than the patch required to update the old version of that file, the new file can be included in its entirety.</span></span> <span data-ttu-id="b1708-150">Esses são arquivos novos que são instalados em suas versões antigas.</span><span class="sxs-lookup"><span data-stu-id="b1708-150">These are new files that are installed over their old versions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b1708-151">Tópicos relacionados</span><span class="sxs-lookup"><span data-stu-id="b1708-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b1708-152">Criando um pacote de patch</span><span class="sxs-lookup"><span data-stu-id="b1708-152">Creating a Patch Package</span></span>](creating-a-patch-package.md)
</dt> </dl>

 

 



