---
description: A aplicação de patches do UAC (controle de conta de usuário) permite que os autores de instalações de Windows Installer identifiquem patches assinados digitalmente que podem ser aplicados no futuro por usuários não administradores.
ms.assetid: f7d64f61-24c8-4037-a10b-d68d0e9e3c42
title: Aplicação de patch de UAC (controle de conta de usuário)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d111a39245ab15b24c1734d278a8e0a477e68a6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "103837296"
---
# <a name="user-account-control-uac-patching"></a><span data-ttu-id="fdc82-103">Aplicação de patch de UAC (controle de conta de usuário)</span><span class="sxs-lookup"><span data-stu-id="fdc82-103">User Account Control (UAC) Patching</span></span>

<span data-ttu-id="fdc82-104">A aplicação de patches do UAC ( [*controle de conta de usuário*](u-gly.md) ) permite que os autores de instalações de Windows Installer identifiquem patches assinados digitalmente que podem ser aplicados no futuro por usuários não administradores.</span><span class="sxs-lookup"><span data-stu-id="fdc82-104">[*User Account Control*](u-gly.md) (UAC) patching enables the authors of Windows Installer installations to identify digitally-signed patches that can be applied in the future by non-administrator users.</span></span>

<span data-ttu-id="fdc82-105">Se a assinatura digital não corresponder ao certificado, o Windows Vista exibirá uma caixa de diálogo do UAC solicitando a autorização do administrador antes de instalar o patch.</span><span class="sxs-lookup"><span data-stu-id="fdc82-105">If the digital signature does not match the certificate, Windows Vista displays a UAC dialog box requesting administrator authorization before installing the patch.</span></span> <span data-ttu-id="fdc82-106">Em sistemas anteriores ao Windows Vista, o instalador não aplicará um patch assinado que não corresponda ao certificado.</span><span class="sxs-lookup"><span data-stu-id="fdc82-106">On systems earlier than Windows Vista, the installer will not apply a signed patch that does not match the certificate.</span></span>

<span data-ttu-id="fdc82-107">Se um não administrador tentar aplicar um patch a um aplicativo e as seguintes condições não tiverem sido atendidas, o Windows Vista notificará o usuário de que a autorização do administrador é necessária antes de instalar o patch.</span><span class="sxs-lookup"><span data-stu-id="fdc82-107">If a non-administrator attempts to apply a patch to an application, and the following conditions have not been met, Windows Vista will notify the user that administrator authorization is required before installing the patch.</span></span> <span data-ttu-id="fdc82-108">Um não administrador pode continuar instalando o patch, sem a necessidade de obter autorização de administrador adicional, desde que as condições a seguir sejam atendidas.</span><span class="sxs-lookup"><span data-stu-id="fdc82-108">A non-administrator can continue installing the patch, without needing to obtain additional administrator authorization, provided the following conditions are met.</span></span>

-   <span data-ttu-id="fdc82-109">O aplicativo foi instalado no Windows Vista ou no Windows XP usando Windows Installer 3,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="fdc82-109">The application was installed on Windows Vista or Windows XP using Windows Installer 3.0 or later.</span></span>

    <span data-ttu-id="fdc82-110">**Windows Server 2008:** Sem suporte.</span><span class="sxs-lookup"><span data-stu-id="fdc82-110">**Windows Server 2008:** Not supported.</span></span>

-   <span data-ttu-id="fdc82-111">Se o aplicativo tiver sido instalado no Windows XP, o aplicativo também deverá ter sido instalado a partir de mídia removível, como um CD-ROM ou um disco de DVD.</span><span class="sxs-lookup"><span data-stu-id="fdc82-111">If the application was installed on Windows XP, the application must also have been installed from removable media, such a CD-ROM or DVD disk.</span></span> <span data-ttu-id="fdc82-112">Essa restrição não se aplicará se o aplicativo tiver sido instalado no Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="fdc82-112">This restriction does not apply if the application was installed on Windows Vista.</span></span>
-   <span data-ttu-id="fdc82-113">O aplicativo não foi instalado a partir de uma imagem de origem de [instalação administrativa](administrative-installation.md) .</span><span class="sxs-lookup"><span data-stu-id="fdc82-113">The application was not installed from an [administrative installation](administrative-installation.md) source image.</span></span>
-   <span data-ttu-id="fdc82-114">O aplicativo foi originalmente instalado por computador.</span><span class="sxs-lookup"><span data-stu-id="fdc82-114">The application was originally installed per-machine.</span></span> <span data-ttu-id="fdc82-115">Para obter informações sobre como habilitar não administradores para aplicar patches a aplicativos gerenciados por usuário após o patch ter sido aprovado como confiável por um administrador, consulte [aplicação de patch Per-User aplicativos gerenciados](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="fdc82-115">For information about how to enable non-administrators to apply patches to per-user-managed applications after the patch has been approved as trusted by an administrator, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>
-   <span data-ttu-id="fdc82-116">A [tabela MsiPatchCertificate](msipatchcertificate-table.md) está presente no pacote do instalador de janela (arquivo. msi) e contém as informações necessárias para habilitar o UAC.</span><span class="sxs-lookup"><span data-stu-id="fdc82-116">The [MsiPatchCertificate table](msipatchcertificate-table.md) is present in the Window Installer package (.msi file) and contains the information needed to enable UAC.</span></span> <span data-ttu-id="fdc82-117">A tabela e as informações podem ter sido incluídas no pacote de instalação original ou adicionadas ao pacote por um arquivo de patch Windows Installer (arquivo. msp).</span><span class="sxs-lookup"><span data-stu-id="fdc82-117">The table and information may have been be included in the original installation package or added to the package by a Windows Installer patch file (.msp file).</span></span>
-   <span data-ttu-id="fdc82-118">Os patches são assinados digitalmente por um certificado listado na [tabela MsiPatchCertificate](msipatchcertificate-table.md).</span><span class="sxs-lookup"><span data-stu-id="fdc82-118">The patches are digitally signed by a certificate listed in the [MsiPatchCertificate table](msipatchcertificate-table.md).</span></span> <span data-ttu-id="fdc82-119">Para obter mais informações sobre certificados de assinatura digital, consulte [assinaturas digitais e Windows Installer](digital-signatures-and-windows-installer.md).</span><span class="sxs-lookup"><span data-stu-id="fdc82-119">For more information about digital signature certificates, see [Digital Signatures and Windows Installer](digital-signatures-and-windows-installer.md).</span></span>
-   <span data-ttu-id="fdc82-120">A assinatura digital no pacote de patch pode ser verificada em relação ao certificado na [tabela MsiPatchCertificate](msipatchcertificate-table.md).</span><span class="sxs-lookup"><span data-stu-id="fdc82-120">The digital signature on the patch package can be verified against the certificate in the [MsiPatchCertificate table](msipatchcertificate-table.md).</span></span> <span data-ttu-id="fdc82-121">Para obter mais informações sobre o uso de assinaturas digitais, certificados digitais e [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust), consulte a seção [segurança](https://msdn.microsoft.com/library/cc527452.aspx) do SDK (Software Development Kit) do Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="fdc82-121">For more information about the use of digital signatures, digital certificates, and [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust), see the [Security](https://msdn.microsoft.com/library/cc527452.aspx) section of the Microsoft Windows Software Development Kit (SDK).</span></span>
-   <span data-ttu-id="fdc82-122">O certificado de signatário usado para verificar a assinatura digital no pacote de patch é válido e não foi revogado.</span><span class="sxs-lookup"><span data-stu-id="fdc82-122">The signer certificate used to verify the digital signature on the patch package is valid and has not been revoked.</span></span>
    > [!Note]  
    > <span data-ttu-id="fdc82-123">Embora não seja possível assinar um patch usando um certificado expirado, a avaliação de uma assinatura digital em um patch não falhará se o certificado tiver expirado.</span><span class="sxs-lookup"><span data-stu-id="fdc82-123">Although you cannot sign a patch using an expired certificate, evaluation of a digital signature on a patch does not fail if the certificate has expired.</span></span> <span data-ttu-id="fdc82-124">A avaliação usa a [tabela MsiPatchCertificate](msipatchcertificate-table.md)atual, que consiste na tabela MsiPatchCertificate no pacote original e quaisquer alterações na tabela por patches sequenciados antes do atual.</span><span class="sxs-lookup"><span data-stu-id="fdc82-124">Evaluation uses the current [MsiPatchCertificate table](msipatchcertificate-table.md), which consists of the MsiPatchCertificate table in the original package and any changes to the table by patches sequenced prior to the current one.</span></span> <span data-ttu-id="fdc82-125">Um patch pode adicionar novos certificados à tabela MsiPatchCertificate para avaliar os patches sequenciados após o patch atual.</span><span class="sxs-lookup"><span data-stu-id="fdc82-125">A patch can add new certificates to the MsiPatchCertificate table to evaluate patches sequenced after the current patch.</span></span> <span data-ttu-id="fdc82-126">Um certificado revogado é sempre rejeitado.</span><span class="sxs-lookup"><span data-stu-id="fdc82-126">A revoked certificate is always rejected.</span></span>

     

-   <span data-ttu-id="fdc82-127">A aplicação de patches com privilégios mínimos não foi desabilitada pela definição da propriedade [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) ou da política [DisableLUAPatching](disableluapatching.md) .</span><span class="sxs-lookup"><span data-stu-id="fdc82-127">Least-privilege patching has not been disabled by setting the [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) property or the [DisableLUAPatching](disableluapatching.md) policy.</span></span>

<span data-ttu-id="fdc82-128">Um patch que foi aplicado usando a aplicação de patch do UAC também pode ser removido por um não administrador.</span><span class="sxs-lookup"><span data-stu-id="fdc82-128">A patch that has been applied using UAC patching can also be removed by a non-administrator.</span></span>

<span data-ttu-id="fdc82-129">Os administradores podem aplicar patches a produtos instalados por computador, independentemente da configuração do UAC do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fdc82-129">Administrators can apply patches to per-machine installed products regardless of the application's UAC setting.</span></span>

<span data-ttu-id="fdc82-130">Você pode determinar se a aplicação de patches com privilégios mínimos está habilitada para um aplicativo usando a função [**MsiGetProductInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetproductinfoexa) para consultar a \_ propriedade de aplicativo lua AUTORIZAda do InstallProperty \_ \_ ou usando o método [**ProductInfo**](installer-productinfo.md) para consultar a propriedade "AuthorizedLUAApp".</span><span class="sxs-lookup"><span data-stu-id="fdc82-130">You can determine whether least-privilege patching is enabled for an application by using the [**MsiGetProductInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetproductinfoexa) function to query for the INSTALLPROPERTY\_AUTHORIZED\_LUA\_APP property, or by using the [**ProductInfo**](installer-productinfo.md) method to query for the "AuthorizedLUAApp" property.</span></span> <span data-ttu-id="fdc82-131">Se o valor de uma das propriedades for 1, o aplicativo será habilitado para aplicação de patch de conta de usuário com privilégios mínimos.</span><span class="sxs-lookup"><span data-stu-id="fdc82-131">If the value of either property is 1, the application is enabled for least-privilege user account patching.</span></span>

<span data-ttu-id="fdc82-132">Um administrador pode desabilitar a aplicação de patches com privilégios mínimos no computador definindo a política [DisableLUAPatching](disableluapatching.md) como 1.</span><span class="sxs-lookup"><span data-stu-id="fdc82-132">An administrator can disable least-privilege patching on the computer by setting the [DisableLUAPatching](disableluapatching.md) policy to 1.</span></span> <span data-ttu-id="fdc82-133">Você pode definir a propriedade [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) como 1 durante a instalação inicial de um aplicativo para evitar a aplicação de patches com privilégios mínimos somente para esse aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fdc82-133">You can set the [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) property to 1 during the initial installation of an application to prevent least-privilege patching for that application only.</span></span>

<span data-ttu-id="fdc82-134">Essa funcionalidade está disponível a partir do Windows Installer versão 3,0.</span><span class="sxs-lookup"><span data-stu-id="fdc82-134">This functionality is available beginning with Windows Installer version 3.0.</span></span> <span data-ttu-id="fdc82-135">A aplicação de patch de UAC (controle de conta de usuário) foi chamada aplicação de patches de LUA (conta de usuário com privilégios mínimos) no Windows XP.</span><span class="sxs-lookup"><span data-stu-id="fdc82-135">User Account Control (UAC) patching was called least-privilege user account (LUA) patching in Windows XP.</span></span> <span data-ttu-id="fdc82-136">A aplicação de patches de LUA não está disponível no Windows 2000 e no Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="fdc82-136">LUA patching is not available on Windows 2000 and Windows Server 2003.</span></span>

<span data-ttu-id="fdc82-137">Para obter mais informações sobre compatibilidade de aplicativos e desenvolvimento de aplicativos que são compatíveis com o UAC (controle de conta de usuário), consulte as informações do UAC fornecidas no [Microsoft TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="fdc82-137">For more information about application compatibility and developing applications that are compatible with User Account Control (UAC), see the UAC information that is provided on [Microsoft Technet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span></span>

 

 
