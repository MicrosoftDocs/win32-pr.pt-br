---
description: Ao corrigir arquivos com conteúdo de variável, pode ser necessário reter as regiões selecionadas do arquivo de destino para evitar a perda de informações críticas.
ms.assetid: 4a610588-556e-489f-ac14-73e5e6b776fe
title: Aplicação de patch nas regiões selecionadas de um arquivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 778df4b0cc98eeacd1106929b18c7461c6fa9e70
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105747957"
---
# <a name="patching-selected-regions-of-a-file"></a><span data-ttu-id="68a25-103">Aplicação de patch nas regiões selecionadas de um arquivo</span><span class="sxs-lookup"><span data-stu-id="68a25-103">Patching Selected Regions of a File</span></span>

<span data-ttu-id="68a25-104">Ao corrigir arquivos com conteúdo de variável, pode ser necessário reter as regiões selecionadas do arquivo de destino para evitar a perda de informações críticas.</span><span class="sxs-lookup"><span data-stu-id="68a25-104">When patching files having variable content, it may be necessary to retain selected regions of the target file to prevent the lost of critical information.</span></span> <span data-ttu-id="68a25-105">Por exemplo, alguns aplicativos carimbam as informações do usuário no arquivo executável.</span><span class="sxs-lookup"><span data-stu-id="68a25-105">For example, some applications stamp user information into the executable file.</span></span> <span data-ttu-id="68a25-106">Como o conteúdo do arquivo de destino pode depender do computador no qual o aplicativo está instalado, fica difícil determinar se um arquivo específico é um destino válido para o patch.</span><span class="sxs-lookup"><span data-stu-id="68a25-106">Because the contents of the target file might depend upon the computer on which the application is installed, it becomes difficult to determine whether a particular file is a valid target for the patch.</span></span> <span data-ttu-id="68a25-107">As informações do usuário gravadas no arquivo de destino também podem ser substituídas por um patch.</span><span class="sxs-lookup"><span data-stu-id="68a25-107">User information written in the target file can also be overwritten by a patch.</span></span>

<span data-ttu-id="68a25-108">Ao gerar um arquivo PCP (Propriedades de criação de patch) com [Msimsp.exe](msimsp-exe.md) e [PATCHWIZ.DLL](patchwiz-dll.md), você pode especificar que as informações em determinadas regiões do arquivo de destino sejam ignoradas durante a aplicação de patch.</span><span class="sxs-lookup"><span data-stu-id="68a25-108">When you generate a patch creation properties (PCP) file with [Msimsp.exe](msimsp-exe.md) and [PATCHWIZ.DLL](patchwiz-dll.md), you can specify that the information in certain regions of the target file be ignored during patching.</span></span> <span data-ttu-id="68a25-109">Você também pode especificar que as informações em outras regiões do arquivo de destino sejam retidas e copiadas para um local de deslocamento no arquivo atualizado.</span><span class="sxs-lookup"><span data-stu-id="68a25-109">You can also specify that information in other regions of the target file be retained and copied to an offset location in the updated file.</span></span> <span data-ttu-id="68a25-110">Especifique quais regiões do arquivo de destino ignorar e quais regiões manter ao criar as tabelas [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md), [ExternalFiles](externalfiles-table-patchwiz-dll-.md)e [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) .</span><span class="sxs-lookup"><span data-stu-id="68a25-110">You specify which regions of the target file to ignore and which regions to retain when authoring the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md), [ExternalFiles](externalfiles-table-patchwiz-dll-.md), and [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) tables.</span></span>

<span data-ttu-id="68a25-111">Use a coluna RetainOffsets da tabela [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) e as colunas RetainOffsets e RetainLengths da tabela [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) para copiar um intervalo de informações do arquivo de destino para um intervalo de deslocamento no arquivo atualizado.</span><span class="sxs-lookup"><span data-stu-id="68a25-111">Use the RetainOffsets column of the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) table and the RetainOffsets and RetainLengths columns of the [FamilyFileRanges](familyfileranges-table-patchwiz-dll-.md) table to copy a range of information from the target file to an offset range in the updated file.</span></span> <span data-ttu-id="68a25-112">As informações neste intervalo são mantidas.</span><span class="sxs-lookup"><span data-stu-id="68a25-112">The information in this range is retained.</span></span> <span data-ttu-id="68a25-113">Especifique o comprimento do intervalo usando as colunas RetainLengths da tabela FamilyFileRanges.</span><span class="sxs-lookup"><span data-stu-id="68a25-113">Specify the length of the range using the RetainLengths columns of the FamilyFileRanges table.</span></span> <span data-ttu-id="68a25-114">O comprimento do intervalo retido é o mesmo nos arquivos de destino e atualizados.</span><span class="sxs-lookup"><span data-stu-id="68a25-114">The length of the retained range is the same in the target and updated files.</span></span> <span data-ttu-id="68a25-115">Especifique o deslocamento do intervalo no arquivo de destino usando a coluna RetainOffsets da tabela TargetFiles OptionalData.</span><span class="sxs-lookup"><span data-stu-id="68a25-115">Specify the offset of the range in the target file using the RetainOffsets column of the TargetFiles OptionalData table.</span></span> <span data-ttu-id="68a25-116">Especifique o deslocamento do intervalo no arquivo atualizado usando a coluna RetainOffsets da tabela FamilyFileRanges.</span><span class="sxs-lookup"><span data-stu-id="68a25-116">Specify the offset of the range in the updated file using the RetainOffsets column of the FamilyFileRanges table.</span></span> <span data-ttu-id="68a25-117">O intervalo do arquivo de destino retido é, portanto, o valor de RetainOffsets na tabela TargetFiles OptionalData mais RetainLengths.</span><span class="sxs-lookup"><span data-stu-id="68a25-117">The range of the target file retained is therefore the value of RetainOffsets in the TargetFiles OptionalData table plus RetainLengths.</span></span> <span data-ttu-id="68a25-118">Essas informações são copiadas para o arquivo de atualização no intervalo fornecido pelo valor de RetainOffsets nas tabelas FamilyFileRanges mais RetainLengths.</span><span class="sxs-lookup"><span data-stu-id="68a25-118">This information gets copied to the update file in the range given by the value of RetainOffsets in the FamilyFileRanges tables plus RetainLengths.</span></span> <span data-ttu-id="68a25-119">Você pode especificar vários intervalos, mas a ordem dos comprimentos deve corresponder à ordem dos deslocamentos.</span><span class="sxs-lookup"><span data-stu-id="68a25-119">You can specify multiple ranges but the order of the lengths must match the order of the offsets.</span></span>

<span data-ttu-id="68a25-120">Use a tabela [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) para ignorar um intervalo do arquivo de destino.</span><span class="sxs-lookup"><span data-stu-id="68a25-120">Use the [TargetFiles OptionalData](targetfiles-optionaldata-table-patchwiz-dll-.md) table to ignore a range of the target file.</span></span> <span data-ttu-id="68a25-121">As informações nesse intervalo do arquivo de destino ainda podem ser substituídas pelo patch.</span><span class="sxs-lookup"><span data-stu-id="68a25-121">Information in this range of the target file can still be overwritten by the patch.</span></span> <span data-ttu-id="68a25-122">Especifique o deslocamento do intervalo na coluna IgnoreOffsets e seu comprimento na coluna IgnoreLengths.</span><span class="sxs-lookup"><span data-stu-id="68a25-122">Specify the offset of the range in the IgnoreOffsets column and its length in the IgnoreLengths column.</span></span> <span data-ttu-id="68a25-123">Você pode especificar vários intervalos, mas a ordem dos comprimentos deve corresponder à ordem dos deslocamentos.</span><span class="sxs-lookup"><span data-stu-id="68a25-123">You can specify multiple ranges but the order of the lengths must match the order of the offsets.</span></span>

<span data-ttu-id="68a25-124">Os valores nas colunas comprimentos e deslocamentos podem ser decimal ou hexadecimal.</span><span class="sxs-lookup"><span data-stu-id="68a25-124">The values in the lengths and offsets columns can be decimal or hexadecimal.</span></span> <span data-ttu-id="68a25-125">[PATCHWIZ.DLL](patchwiz-dll.md) tratará o valor como hexadecimal se for prefixado por "0x".</span><span class="sxs-lookup"><span data-stu-id="68a25-125">[PATCHWIZ.DLL](patchwiz-dll.md) treats the value as hexadecimal if it is prefixed by "0x".</span></span> <span data-ttu-id="68a25-126">As colunas são colunas de cadeia de caracteres, portanto PATCHWIZ.DLL converte os valores em ULONGs.</span><span class="sxs-lookup"><span data-stu-id="68a25-126">The columns are string columns, so PATCHWIZ.DLL converts the values to ULONGs.</span></span> <span data-ttu-id="68a25-127">A coluna Length especifica o comprimento em bytes.</span><span class="sxs-lookup"><span data-stu-id="68a25-127">The length column specifies the length in bytes.</span></span>

 

 



