---
description: Windows Installer os desenvolvedores podem preparar seu pacote de instalação para trabalhar com o Gerenciador de reinicialização seguindo as diretrizes descritas em usando o Windows Installer com o Gerenciador de reinicialização.
ms.assetid: 777f8864-b3d2-43c7-9296-1118f3595d7b
title: Usando o Gerenciador de reinicialização com uma interface do usuário externa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0f112884669b173b40f3806c48cf8e05308c5b44
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "104164505"
---
# <a name="using-restart-manager-with-an-external-ui"></a><span data-ttu-id="9f657-103">Usando o Gerenciador de reinicialização com uma interface do usuário externa</span><span class="sxs-lookup"><span data-stu-id="9f657-103">Using Restart Manager with an External UI</span></span>

<span data-ttu-id="9f657-104">Windows Installer os desenvolvedores podem preparar seu pacote de instalação para trabalhar com o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) seguindo as diretrizes descritas em [usando o Windows Installer com o Gerenciador de reinicialização](using-windows-installer-with-restart-manager.md).</span><span class="sxs-lookup"><span data-stu-id="9f657-104">Windows Installer developers can prepare their installation package to work with [Restart Manager](../rstmgr/restart-manager-portal.md) by following the guidelines described in [Using Windows Installer with Restart Manager](using-windows-installer-with-restart-manager.md).</span></span>

<span data-ttu-id="9f657-105">Especifique o \_ tipo de mensagem INSTALLLOGMODE RMFILESINUSE ao chamar a função [**MsiSetExternalUI**](/windows/desktop/api/Msi/nf-msi-msisetexternaluia) ou [**MsiSetExternalUIRecord**](/windows/desktop/api/Msi/nf-msi-msisetexternaluirecord) para habilitar o manipulador de interface de usuário externa.</span><span class="sxs-lookup"><span data-stu-id="9f657-105">Specify the INSTALLLOGMODE\_RMFILESINUSE message type when calling the [**MsiSetExternalUI**](/windows/desktop/api/Msi/nf-msi-msisetexternaluia) or [**MsiSetExternalUIRecord**](/windows/desktop/api/Msi/nf-msi-msisetexternaluirecord) function to enable the external user-interface handler.</span></span> <span data-ttu-id="9f657-106">Em seguida, Windows Installer envia uma \_ mensagem INSTALLMESSAGE RMFILESINUSE para uso por manipuladores de interface do usuário externos que dão suporte ao [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="9f657-106">Windows Installer then sends an INSTALLMESSAGE\_RMFILESINUSE message for use by external user-interface handlers that support the [Restart Manager](../rstmgr/restart-manager-portal.md).</span></span>

<span data-ttu-id="9f657-107">O manipulador de interface do usuário externo deve lidar com as informações contidas em mensagens do INSTALLMESSAGE \_ RMFILESINUSE.</span><span class="sxs-lookup"><span data-stu-id="9f657-107">Your external user-interface handler should handle the information contained in INSTALLMESSAGE\_RMFILESINUSE messages.</span></span> <span data-ttu-id="9f657-108">Se nenhuma interface de usuário registrada ou interna manipular a \_ mensagem INSTALLMESSAGE RMFILESINUSE, Windows Installer enviará uma \_ mensagem INSTALLMESSAGE FILESINUSE para uso por manipuladores externos existentes que dão suporte a INSTALLMESSAGE FILESINUSE \_ mensagens e a caixa de diálogo [FILESINUSE](filesinuse-dialog.md) .</span><span class="sxs-lookup"><span data-stu-id="9f657-108">If no registered or internal user-interface handles the INSTALLMESSAGE\_RMFILESINUSE message, Windows Installer sends an INSTALLMESSAGE\_FILESINUSE message for use by existing external handlers that support INSTALLMESSAGE\_FILESINUSE messages and the [FilesInUse](filesinuse-dialog.md) dialog box.</span></span>

<span data-ttu-id="9f657-109">A interface do usuário externa pode retornar os valores listados na tabela a seguir.</span><span class="sxs-lookup"><span data-stu-id="9f657-109">The external user interface can return the values listed in the following table.</span></span>



| <span data-ttu-id="9f657-110">Valor de retorno da interface do usuário externa</span><span class="sxs-lookup"><span data-stu-id="9f657-110">External UI return value</span></span> | <span data-ttu-id="9f657-111">Ação realizada pelo Windows Installer</span><span class="sxs-lookup"><span data-stu-id="9f657-111">Action taken by Windows Installer</span></span>                                                                                                                                                                                                                                                                                                              |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9f657-112">IDOK</span><span class="sxs-lookup"><span data-stu-id="9f657-112">IDOK</span></span>                     | <span data-ttu-id="9f657-113">O botão **OK** foi pressionado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="9f657-113">The **OK** button was pressed by the user.</span></span> <span data-ttu-id="9f657-114">O Windows Installer solicitará que o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) desligue e reinicie os aplicativos que mantêm os arquivos em uso no momento.</span><span class="sxs-lookup"><span data-stu-id="9f657-114">The Windows Installer will request that the [Restart Manager](../rstmgr/restart-manager-portal.md) shut down and restart the applications that hold files currently in use.</span></span>                                                                                                                                               |
| <span data-ttu-id="9f657-115">IDCANCEL</span><span class="sxs-lookup"><span data-stu-id="9f657-115">IDCANCEL</span></span>                 | <span data-ttu-id="9f657-116">O botão **Cancelar** foi pressionado.</span><span class="sxs-lookup"><span data-stu-id="9f657-116">The **CANCEL** button was pressed.</span></span> <span data-ttu-id="9f657-117">Cancele a instalação.</span><span class="sxs-lookup"><span data-stu-id="9f657-117">Cancel the installation.</span></span>                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="9f657-118">IDIGNORE</span><span class="sxs-lookup"><span data-stu-id="9f657-118">IDIGNORE</span></span>                 | <span data-ttu-id="9f657-119">O botão **ignorar** foi pressionado.</span><span class="sxs-lookup"><span data-stu-id="9f657-119">The **IGNORE** button was pressed.</span></span> <span data-ttu-id="9f657-120">Ignorar e continuar a instalação.</span><span class="sxs-lookup"><span data-stu-id="9f657-120">Ignore and continue the installation.</span></span> <span data-ttu-id="9f657-121">Uma reinicialização será necessária no final da instalação.</span><span class="sxs-lookup"><span data-stu-id="9f657-121">A restart will be required at the end of the installation.</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="9f657-122">IDNO</span><span class="sxs-lookup"><span data-stu-id="9f657-122">IDNO</span></span>                     | <span data-ttu-id="9f657-123">O botão **não** foi pressionado.</span><span class="sxs-lookup"><span data-stu-id="9f657-123">The **NO** button was pressed.</span></span> <span data-ttu-id="9f657-124">Se o pacote tiver uma caixa de diálogo [MsiRMFilesInUse](msirmfilesinuse-dialog.md) , envie uma mensagem 1610.</span><span class="sxs-lookup"><span data-stu-id="9f657-124">If the package has an [MsiRMFilesInUse](msirmfilesinuse-dialog.md) dialog box, send a 1610 message.</span></span> <span data-ttu-id="9f657-125">Para obter mais informações, consulte [Windows Installer mensagens de erro](windows-installer-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="9f657-125">For more information, see [Windows Installer Error Messages](windows-installer-error-messages.md).</span></span> <span data-ttu-id="9f657-126">Se o pacote não tiver uma caixa de diálogo MsiRMFilesInUse, envie uma \_ mensagem INSTALLMESSAGE FILESINUSE.</span><span class="sxs-lookup"><span data-stu-id="9f657-126">If the package does not have a MsiRMFilesInUse dialog box, send an INSTALLMESSAGE\_FILESINUSE message.</span></span> |
| <span data-ttu-id="9f657-127">IDRETRY</span><span class="sxs-lookup"><span data-stu-id="9f657-127">IDRETRY</span></span>                  | <span data-ttu-id="9f657-128">O botão de **repetição** foi pressionado.</span><span class="sxs-lookup"><span data-stu-id="9f657-128">The **RETRY** button was pressed.</span></span> <span data-ttu-id="9f657-129">Envie a \_ mensagem INSTALLMESSAGE FILESINUSE.</span><span class="sxs-lookup"><span data-stu-id="9f657-129">Send the INSTALLMESSAGE\_FILESINUSE message.</span></span>                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="9f657-130">-1</span><span class="sxs-lookup"><span data-stu-id="9f657-130">-1</span></span>                       | <span data-ttu-id="9f657-131">Um erro.</span><span class="sxs-lookup"><span data-stu-id="9f657-131">An error.</span></span> <span data-ttu-id="9f657-132">Encerre a instalação.</span><span class="sxs-lookup"><span data-stu-id="9f657-132">End the installation.</span></span>                                                                                                                                                                                                                                                                                                                |



 

 

 
