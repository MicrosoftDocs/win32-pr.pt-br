---
description: O Windows Installer pode determinar quando uma reinicialização do sistema é necessária e solicitar automaticamente que o usuário seja reinicializado no final da instalação.
ms.assetid: 10117d2c-c2c8-456f-9fce-a89c2d69d3c1
title: Reinicializações do sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9b32149bbcd43e284f45d7cabcba94a080be5262
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/07/2021
ms.locfileid: "105750592"
---
# <a name="system-reboots"></a><span data-ttu-id="91561-103">Reinicializações do sistema</span><span class="sxs-lookup"><span data-stu-id="91561-103">System Reboots</span></span>

<span data-ttu-id="91561-104">O Windows Installer pode determinar quando uma reinicialização do sistema é necessária e solicitar automaticamente que o usuário seja reinicializado no final da instalação.</span><span class="sxs-lookup"><span data-stu-id="91561-104">The Windows Installer can determine when a reboot of the system is necessary and automatically prompt the user to reboot at the end of the installation.</span></span> <span data-ttu-id="91561-105">Por exemplo, o instalador solicitará automaticamente uma reinicialização se precisar substituir todos os arquivos que estão em uso durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="91561-105">For example, the installer automatically prompts for a reboot if it needs to replace any files that are in use during the installation.</span></span>

<span data-ttu-id="91561-106">Os aplicativos que usam [Windows Installer](windows-installer-portal.md) versão 4,0 ou posterior para instalação e manutenção automaticamente usam o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) para reduzir as reinicializações do sistema.</span><span class="sxs-lookup"><span data-stu-id="91561-106">Applications that use [Windows Installer](windows-installer-portal.md) version 4.0 or later for installation and servicing automatically use the [Restart Manager](../rstmgr/restart-manager-portal.md) to reduce system restarts.</span></span> <span data-ttu-id="91561-107">Windows Installer versão 4,0 ou posterior tem propriedades e políticas que permitem que o autor do pacote e os administradores controlem a interação de Windows Installer com o Gerenciador de reinicialização.</span><span class="sxs-lookup"><span data-stu-id="91561-107">Windows Installer version 4.0 or later has properties and policies that enable the package author and administrators to control the interaction of Windows Installer with the Restart Manager.</span></span> <span data-ttu-id="91561-108">Para obter mais informações, consulte [usando Windows Installer com o Gerenciador de reinicialização](using-windows-installer-with-restart-manager.md).</span><span class="sxs-lookup"><span data-stu-id="91561-108">For more information, see [Using Windows Installer with Restart Manager](using-windows-installer-with-restart-manager.md).</span></span>

<span data-ttu-id="91561-109">Os autores de pacotes de instalação podem agendar e suprimir reinicializações usando ações padrão nas tabelas de sequência e definindo propriedades.</span><span class="sxs-lookup"><span data-stu-id="91561-109">Installation package authors can schedule and suppress reboots by using standard actions in the sequence tables and by setting properties.</span></span> <span data-ttu-id="91561-110">As seguintes ações e propriedades são usadas para lidar com reinicializações do sistema.</span><span class="sxs-lookup"><span data-stu-id="91561-110">The following actions and properties are used to handle system reboots.</span></span>



| <span data-ttu-id="91561-111">Ação, caixa de diálogo ou propriedade</span><span class="sxs-lookup"><span data-stu-id="91561-111">Action, dialog box, or property</span></span>                                                | <span data-ttu-id="91561-112">Breve descrição</span><span class="sxs-lookup"><span data-stu-id="91561-112">Brief description</span></span>                                                                                                                                             |
|--------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="91561-113">Ação ForceReboot</span><span class="sxs-lookup"><span data-stu-id="91561-113">ForceReboot Action</span></span>](forcereboot-action.md)                                   | <span data-ttu-id="91561-114">Solicita uma reinicialização do usuário durante a instalação.</span><span class="sxs-lookup"><span data-stu-id="91561-114">Prompts the user for a reboot during the installation.</span></span>                                                                                                        |
| [<span data-ttu-id="91561-115">Ação ScheduleReboot</span><span class="sxs-lookup"><span data-stu-id="91561-115">ScheduleReboot Action</span></span>](schedulereboot-action.md)                             | <span data-ttu-id="91561-116">Solicita ao usuário uma reinicialização no final da instalação.</span><span class="sxs-lookup"><span data-stu-id="91561-116">Prompts the user for a reboot at the end of the installation.</span></span>                                                                                                 |
| [<span data-ttu-id="91561-117">**Reinicializar Propriedade**</span><span class="sxs-lookup"><span data-stu-id="91561-117">**REBOOT Property**</span></span>](reboot.md)                                              | <span data-ttu-id="91561-118">Força ou suprime determinados prompts automáticos para uma reinicialização do sistema.</span><span class="sxs-lookup"><span data-stu-id="91561-118">Forces or suppresses certain automatic prompts for a system reboot.</span></span>                                                                                           |
| [<span data-ttu-id="91561-119">**Propriedade REBOOTPROMPT**</span><span class="sxs-lookup"><span data-stu-id="91561-119">**REBOOTPROMPT Property**</span></span>](rebootprompt.md)                                  | <span data-ttu-id="91561-120">Suprime a exibição de prompts para reinicializações para o usuário.</span><span class="sxs-lookup"><span data-stu-id="91561-120">Suppresses the display of prompts for reboots to the user.</span></span> <span data-ttu-id="91561-121">Todas as reinicializações necessárias acontecem automaticamente.</span><span class="sxs-lookup"><span data-stu-id="91561-121">Any needed reboots happen automatically.</span></span>                                                           |
| [<span data-ttu-id="91561-122">**Propriedade AFTERREBOOT**</span><span class="sxs-lookup"><span data-stu-id="91561-122">**AFTERREBOOT Property**</span></span>](afterreboot.md)                                    | <span data-ttu-id="91561-123">Normalmente usado em uma condição imposta pela ação ForceReboot.</span><span class="sxs-lookup"><span data-stu-id="91561-123">Commonly used in a condition imposed on the ForceReboot Action.</span></span>                                                                                               |
| [<span data-ttu-id="91561-124">Ação InstallValidate</span><span class="sxs-lookup"><span data-stu-id="91561-124">InstallValidate Action</span></span>](installvalidate-action.md)                           | <span data-ttu-id="91561-125">Exibe a caixa de diálogo FilesInUse, se necessário, dando aos usuários a oportunidade de desligar os processos e evitar algumas reinicializações do sistema.</span><span class="sxs-lookup"><span data-stu-id="91561-125">Displays the FilesInUse Dialog, if necessary, giving users the opportunity to shut down processes and avoid some system reboots.</span></span>                              |
| [<span data-ttu-id="91561-126">Caixa de diálogo FilesInUse</span><span class="sxs-lookup"><span data-stu-id="91561-126">FilesInUse Dialog</span></span>](filesinuse-dialog.md)                                     | <span data-ttu-id="91561-127">Dá aos usuários a oportunidade de desligar processos para evitar algumas reinicializações do sistema.</span><span class="sxs-lookup"><span data-stu-id="91561-127">Gives users the opportunity to shut down processes to avoid some system reboots.</span></span>                                                                              |
| [<span data-ttu-id="91561-128">Caixa de diálogo MsiRMFilesInUse</span><span class="sxs-lookup"><span data-stu-id="91561-128">MsiRMFilesInUse Dialog</span></span>](msirmfilesinuse-dialog.md)                           | <span data-ttu-id="91561-129">Dá aos usuários a opção de usar o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) para fechar e reiniciar aplicativos.</span><span class="sxs-lookup"><span data-stu-id="91561-129">Gives users the option to use the [Restart Manager](../rstmgr/restart-manager-portal.md) to close and restart applications.</span></span> <span data-ttu-id="91561-130">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-130">Available beginning with Windows Installer version 4.0.</span></span> |
| [<span data-ttu-id="91561-131">**Propriedade ReplacedInUseFiles**</span><span class="sxs-lookup"><span data-stu-id="91561-131">**ReplacedInUseFiles Property**</span></span>](replacedinusefiles.md)                      | <span data-ttu-id="91561-132">Defina se o instalador é instalado em um arquivo em uso.</span><span class="sxs-lookup"><span data-stu-id="91561-132">Set if the installer installs over a file in use.</span></span> <span data-ttu-id="91561-133">Essa propriedade é usada por ações personalizadas para detectar que uma reinicialização é necessária.</span><span class="sxs-lookup"><span data-stu-id="91561-133">This property is used by custom actions to detect that a reboot is required.</span></span>                                |
| [<span data-ttu-id="91561-134">**MSIRESTARTMANAGERCONTROL**</span><span class="sxs-lookup"><span data-stu-id="91561-134">**MSIRESTARTMANAGERCONTROL**</span></span>](msirestartmanagercontrol.md)                   | <span data-ttu-id="91561-135">Propriedade para desabilitar a interação de Windows Installer com o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="91561-135">Property to disable Windows Installer interaction with the [Restart Manager](../rstmgr/restart-manager-portal.md).</span></span> <span data-ttu-id="91561-136">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-136">Available beginning with Windows Installer version 4.0.</span></span>          |
| [<span data-ttu-id="91561-137">**MSIDISABLERMRESTART**</span><span class="sxs-lookup"><span data-stu-id="91561-137">**MSIDISABLERMRESTART**</span></span>](msidisablermrestart.md)                             | <span data-ttu-id="91561-138">Especifica como o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) fecha e reinicia os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="91561-138">Specifies how the [Restart Manager](../rstmgr/restart-manager-portal.md) closes and restarts applications.</span></span> <span data-ttu-id="91561-139">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-139">Available beginning with Windows Installer version 4.0.</span></span>                  |
| [<span data-ttu-id="91561-140">**MSIRMSHUTDOWN**</span><span class="sxs-lookup"><span data-stu-id="91561-140">**MSIRMSHUTDOWN**</span></span>](msirmshutdown.md)                                         | <span data-ttu-id="91561-141">Especifica como o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md) fecha e reinicia os aplicativos.</span><span class="sxs-lookup"><span data-stu-id="91561-141">Specifies how the [Restart Manager](../rstmgr/restart-manager-portal.md) closes and restarts applications.</span></span> <span data-ttu-id="91561-142">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-142">Available beginning with Windows Installer version 4.0.</span></span>                  |
| [<span data-ttu-id="91561-143">**MsiSystemRebootPending**</span><span class="sxs-lookup"><span data-stu-id="91561-143">**MsiSystemRebootPending**</span></span>](msisystemrebootpending.md)                       | <span data-ttu-id="91561-144">O instalador definirá essa propriedade se uma reinicialização do sistema operacional estiver pendente.</span><span class="sxs-lookup"><span data-stu-id="91561-144">Installer sets this property if a restart of the operating system is pending.</span></span> <span data-ttu-id="91561-145">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-145">Available beginning with Windows Installer version 4.0.</span></span>                         |
| [<span data-ttu-id="91561-146">DisableAutomaticApplicationShutdown</span><span class="sxs-lookup"><span data-stu-id="91561-146">DisableAutomaticApplicationShutdown</span></span>](disableautomaticapplicationshutdown.md) | <span data-ttu-id="91561-147">Política para desabilitar a interação de Windows Installer com o [Gerenciador de reinicialização](../rstmgr/restart-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="91561-147">Policy to disable Windows Installer interaction with [Restart Manager](../rstmgr/restart-manager-portal.md).</span></span> <span data-ttu-id="91561-148">Disponível a partir do Windows Installer versão 4,0.</span><span class="sxs-lookup"><span data-stu-id="91561-148">Available beginning with Windows Installer version 4.0.</span></span>                |



 

<span data-ttu-id="91561-149">ERRO \_ \_ de instalação suspensa significa que a instalação não foi concluída ou revertida.</span><span class="sxs-lookup"><span data-stu-id="91561-149">ERROR\_INSTALL\_SUSPEND means the installation did not complete or rollback.</span></span> <span data-ttu-id="91561-150">A instalação deve ser retomada antes de ser concluída.</span><span class="sxs-lookup"><span data-stu-id="91561-150">The installation must resume before it is completed.</span></span> <span data-ttu-id="91561-151">O sistema pode precisar ser reinicializado para que a instalação possa ser retomada.</span><span class="sxs-lookup"><span data-stu-id="91561-151">The system may need to be rebooted before the installation can resume.</span></span>

<span data-ttu-id="91561-152">O Windows Installer retorna o erro de código de erro \_ instalar \_ suspender quando a [ação ForceReboot](forcereboot-action.md) for executada.</span><span class="sxs-lookup"><span data-stu-id="91561-152">The Windows Installer returns the error code ERROR\_INSTALL\_SUSPEND when the [ForceReboot action](forcereboot-action.md) is run.</span></span> <span data-ttu-id="91561-153">Ela retornará \_ um erro \_ de reinicialização \_ de êxito necessária se uma reinicialização for necessária antes de executar o aplicativo e retornar um erro de \_ \_ reinicialização \_ com êxito iniciado se o instalador realmente tiver iniciado uma reinicialização.</span><span class="sxs-lookup"><span data-stu-id="91561-153">It returns ERROR\_SUCCESS\_REBOOT\_REQUIRED if a reboot is required before running the application, and it returns ERROR\_SUCCESS\_REBOOT\_INITIATED if the installer has actually started a reboot.</span></span> <span data-ttu-id="91561-154">Observe que, como as reinicializações são assíncronas, a reinicialização pode realmente ocorrer antes que o código de erro seja retornado.</span><span class="sxs-lookup"><span data-stu-id="91561-154">Note that because reboots are asynchronous, the reboot may actually occur before the error code is returned.</span></span> <span data-ttu-id="91561-155">Para obter mais informações, consulte [códigos de erro](error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="91561-155">For more information, see [Error Codes](error-codes.md).</span></span>

<span data-ttu-id="91561-156">Ações personalizadas podem forçar um prompt para reinicialização no final de uma instalação chamando [**MsiSetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msisetmode).</span><span class="sxs-lookup"><span data-stu-id="91561-156">Custom actions can force a prompt for reboot at the end of an installation by calling [**MsiSetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msisetmode).</span></span> <span data-ttu-id="91561-157">As ações personalizadas também podem verificar um prompt de reinicialização pendente chamando [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode).</span><span class="sxs-lookup"><span data-stu-id="91561-157">Custom actions can also check for a pending reboot prompt by calling [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode).</span></span>

## <a name="filesinuse-dialog"></a><span data-ttu-id="91561-158">Caixa de diálogo FilesInUse</span><span class="sxs-lookup"><span data-stu-id="91561-158">FilesInUse Dialog</span></span>

<span data-ttu-id="91561-159">O instalador pode determinar quando uma reinicialização do sistema é necessária e solicita ao usuário uma solicitação para reinicializar.</span><span class="sxs-lookup"><span data-stu-id="91561-159">The installer can determine when a reboot of the system is necessary and prompt the user with a request to reboot.</span></span> <span data-ttu-id="91561-160">Normalmente, uma reinicialização do sistema é necessária porque o instalador está tentando instalar um arquivo que está sendo usado no momento.</span><span class="sxs-lookup"><span data-stu-id="91561-160">Commonly, a system reboot is required because the installer is attempting to install a file that is currently being used.</span></span> <span data-ttu-id="91561-161">Se a [ação InstallValidate](installvalidate-action.md) detectar a instalação de um arquivo em uso, ela exibirá a [caixa de diálogo FilesInUse](filesinuse-dialog.md).</span><span class="sxs-lookup"><span data-stu-id="91561-161">If the [InstallValidate action](installvalidate-action.md) detects the installation of a file in use it displays the [FilesInUse Dialog](filesinuse-dialog.md).</span></span>

<span data-ttu-id="91561-162">Se você espera que o instalador exiba um FilesInUseDialog, mas ele não faz isso, isso pode ser devido a um dos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="91561-162">If you expect the installer to display a FilesInUseDialog, but it does not, this may be due to one of the following reasons:</span></span>

-   <span data-ttu-id="91561-163">Os arquivos em uso não são executáveis.</span><span class="sxs-lookup"><span data-stu-id="91561-163">The files in use are not executables.</span></span>
-   <span data-ttu-id="91561-164">O instalador não está realmente tentando instalar esses arquivos.</span><span class="sxs-lookup"><span data-stu-id="91561-164">The installer is not actually trying to install those files.</span></span>
-   <span data-ttu-id="91561-165">O processo que mantém esses arquivos é o processo que invoca a instalação.</span><span class="sxs-lookup"><span data-stu-id="91561-165">The process holding those files is the process invoking the installation.</span></span>
-   <span data-ttu-id="91561-166">O processo que contém esses arquivos é aquele que não tem uma janela com um título associado a ele.</span><span class="sxs-lookup"><span data-stu-id="91561-166">The process holding those files is one that does not have a window with a title associated with it.</span></span>

<span data-ttu-id="91561-167">Para obter mais informações, consulte [log de solicitações de reinicialização](logging-of-reboot-requests.md).</span><span class="sxs-lookup"><span data-stu-id="91561-167">For more information, see [Logging of Reboot Requests](logging-of-reboot-requests.md).</span></span>

 

 
