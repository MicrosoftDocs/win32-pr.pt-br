---
description: A capacidade do Windows Installer de definir permissões de acesso em serviços, arquivos, pastas criadas e entradas de registro pode ajudar a tornar os aplicativos de instalação mais seguros.
ms.assetid: a25fcecf-f15f-4772-8f41-d03864484cc9
title: Protegendo recursos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 415fe7b2df343a54aa0819031f4fd22b05857618
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/08/2021
ms.locfileid: "105749574"
---
# <a name="securing-resources"></a><span data-ttu-id="68c5c-103">Protegendo recursos</span><span class="sxs-lookup"><span data-stu-id="68c5c-103">Securing Resources</span></span>

<span data-ttu-id="68c5c-104">A capacidade do Windows Installer de definir permissões de acesso em serviços, arquivos, pastas criadas e entradas de registro pode ajudar a tornar os aplicativos de instalação mais seguros.</span><span class="sxs-lookup"><span data-stu-id="68c5c-104">The capability of the Windows Installer to set access permissions on services, files, created folders, and registry entries can help make installation applications more secure.</span></span> <span data-ttu-id="68c5c-105">O uso das tabelas [MsiLockPermissionsEx](msilockpermissionsex-table.md) ou [LockPermissions](lockpermissions-table.md) para proteger recursos é uma das diretrizes recomendadas [para a criação de instalações seguras](guidelines-for-authoring-secure-installations.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-105">The use of the [MsiLockPermissionsEx](msilockpermissionsex-table.md) or [LockPermissions](lockpermissions-table.md) tables to secure resources is one of the recommended [Guidelines for Authoring Secure Installations](guidelines-for-authoring-secure-installations.md).</span></span> <span data-ttu-id="68c5c-106">A tabela MsiLockPermissionsEx pode permitir que um autor de pacote proteja um recurso sem precisar escrever uma [ação personalizada](custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-106">The MsiLockPermissionsEx table can enable a package author to secure a resource without having to write a [custom action](custom-actions.md).</span></span>

<span data-ttu-id="68c5c-107">A partir de pacotes desenvolvidos para o Windows Installer 5,0, a tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) deve substituir o uso da tabela [LockPermissions](lockpermissions-table.md) .</span><span class="sxs-lookup"><span data-stu-id="68c5c-107">Beginning with packages developed for Windows Installer 5.0, the [MsiLockPermissionsEx](msilockpermissionsex-table.md) table should replace the use of the [LockPermissions](lockpermissions-table.md) table.</span></span> <span data-ttu-id="68c5c-108">A funcionalidade estendida fornecida pela tabela MsiLockPermissionsEx permite que um pacote proteja os [Serviços](../services/services.md), arquivos, pastas e chaves do registro do Windows.</span><span class="sxs-lookup"><span data-stu-id="68c5c-108">The extended functionality provided by the MsiLockPermissionsEx table enables a package to secure Windows [Services](../services/services.md), files, folders, and registry keys.</span></span> <span data-ttu-id="68c5c-109">Um pacote não deve conter as tabelas MsiLockPermissionsEx e LockPermissions.</span><span class="sxs-lookup"><span data-stu-id="68c5c-109">A package should not contain both the MsiLockPermissionsEx and the LockPermissions tables.</span></span>

<span data-ttu-id="68c5c-110">Windows Installer 4,5 e anterior ignora a [tabela MsiLockPermissionsEx](msilockpermissionsex-table.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-110">Windows Installer 4.5 and earlier ignores the [MsiLockPermissionsEx table](msilockpermissionsex-table.md).</span></span> <span data-ttu-id="68c5c-111">A partir do Windows Installer 5,0, a instalação falhará com uma mensagem de erro 1941 se o pacote contiver uma [Tabela LockPermissions](lockpermissions-table.md) e uma tabela MsiLockPermissionsEx.</span><span class="sxs-lookup"><span data-stu-id="68c5c-111">Beginning with Windows Installer 5.0, the installation fails with an error message 1941 if the package contains both a [LockPermissions table](lockpermissions-table.md) and MsiLockPermissionsEx table.</span></span> <span data-ttu-id="68c5c-112">Os pacotes de instalação existentes que contêm apenas a Tabela LockPermissions ainda podem ser instalados usando Windows Installer 5,0.</span><span class="sxs-lookup"><span data-stu-id="68c5c-112">Existing installation packages that contain only the LockPermissions table can be still be installed using Windows Installer 5.0.</span></span>

<span data-ttu-id="68c5c-113">Windows Installer 5,0 processa as informações na tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) quando executa as ações padrão [InstallFiles](installfiles-action.md), [installservices](installservices-action.md), [WriteRegistryValues](writeregistryvalues-action.md) e [createfolders](createfolders-action.md) .</span><span class="sxs-lookup"><span data-stu-id="68c5c-113">Windows Installer 5.0 processes the information in the [MsiLockPermissionsEx](msilockpermissionsex-table.md) table when it runs the [InstallFiles](installfiles-action.md), [InstallServices](installservices-action.md), [WriteRegistryValues](writeregistryvalues-action.md) and [CreateFolders](createfolders-action.md) standard actions.</span></span> <span data-ttu-id="68c5c-114">Um objeto protegível deve ser instalado ou reinstalado para ser protegido e não é possível acrescentar uma [lista de controle de acesso](../secauthz/access-control-lists.md) (ACL) a um objeto existente sem reinstalar esse objeto.</span><span class="sxs-lookup"><span data-stu-id="68c5c-114">A securable object must be installed or reinstalled to be secured and it is not possible to append an [Access Control List](../secauthz/access-control-lists.md) (ACL) to an existing object without reinstalling that object.</span></span>

<span data-ttu-id="68c5c-115">Para especificar o serviço, o arquivo, o diretório ou a chave do registro a ser protegida, insira as informações de identificação nos campos lockobject e Table da tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) .</span><span class="sxs-lookup"><span data-stu-id="68c5c-115">To specify the service, file, directory, or registry key that is to be secured, enter the identifying information in the LockObject and Table fields of the [MsiLockPermissionsEx](msilockpermissionsex-table.md) table.</span></span> <span data-ttu-id="68c5c-116">Um objeto é identificado pela chave primária na [tabela](serviceinstall-table.md), na tabela de [arquivos](file-table.md), na tabela [do registro](registry-table.md)ou na tabela [CreateFolder](createfolder-table.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-116">An object is identified by it's primary key in the [ServiceInstall Table](serviceinstall-table.md), [File Table](file-table.md), [Registry Table](registry-table.md), or [CreateFolder Table](createfolder-table.md).</span></span>

<span data-ttu-id="68c5c-117">Para solicitar que as permissões especificadas se apliquem a um objeto, insira uma cadeia de caracteres de descritor de segurança válida no campo *SDDLText* da tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) usando uma SDDL ( [linguagem de definição de descritor de segurança](../secauthz/security-descriptor-definition-language.md) ) válida.</span><span class="sxs-lookup"><span data-stu-id="68c5c-117">To request that specified permissions apply to an object, enter a valid security descriptor string in the *SDDLText* field of the [MsiLockPermissionsEx](msilockpermissionsex-table.md) table using valid [security descriptor definition language](../secauthz/security-descriptor-definition-language.md) (SDDL).</span></span> <span data-ttu-id="68c5c-118">A tabela **MsiLockPermissionsEx** pode especificar um descritor de segurança que nega permissões, especifica a herança de permissões de um recurso pai ou especifica as permissões de uma nova conta.</span><span class="sxs-lookup"><span data-stu-id="68c5c-118">The **MsiLockPermissionsEx** table can specify a security descriptor that denies permissions, specifies inheritance of permissions from a parent resource, or specifies the permissions of a new account.</span></span> <span data-ttu-id="68c5c-119">Para obter uma lista de todas as permissões que podem ser concedidas, negadas ou herdadas, consulte [seqüências de caracteres Ace](../secauthz/ace-strings.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-119">For a list of all the permissions that can be granted, denied, or inherited see [ACE Strings](../secauthz/ace-strings.md).</span></span> <span data-ttu-id="68c5c-120">Windows Installer 5,0 estende o conjunto de SIDs (identificadores de segurança) disponíveis. Para obter uma lista dos SIDs válidos, consulte [cadeias de caracteres de Sid](../secauthz/sid-strings.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-120">Windows Installer 5.0 extends the set of available security identifiers (SIDs.) For a list of the valid SIDs, see [SID Strings](../secauthz/sid-strings.md).</span></span>

> [!NOTE]
> <span data-ttu-id="68c5c-121">Se você quiser configurar o descritor de segurança de um recurso pai para especificar que suas permissões sejam herdadas por objetos filho, o instalador deverá aplicar permissões ao recurso pai antes de criar os objetos filho.</span><span class="sxs-lookup"><span data-stu-id="68c5c-121">If you want to configure the security descriptor of a parent resource to specify that that its permissions be inherited by child objects, your installer must apply permissions to the parent resource before it creates the child objects.</span></span> <span data-ttu-id="68c5c-122">Se o instalador criar os objetos filho antes de aplicar as permissões herdáveis ao recurso pai, as permissões do recurso pai não serão propagadas para os objetos filho.</span><span class="sxs-lookup"><span data-stu-id="68c5c-122">If your installer creates the child objects before it applies the inheritable permissions to the parent resource, the permissions of the parent resource will not propagate to the child objects.</span></span>

<span data-ttu-id="68c5c-123">A partir do Windows Installer 5,0, o tipo de dados [FormattedSDDLText](formattedsddltext.md) estende o tipo de dados [formatado](formatted.md) .</span><span class="sxs-lookup"><span data-stu-id="68c5c-123">Beginning with Windows Installer 5.0, the [FormattedSDDLText](formattedsddltext.md) data type extends the [Formatted](formatted.md) data type.</span></span> <span data-ttu-id="68c5c-124">O Windows Installer valida que a cadeia de caracteres FormattedSDDLText inserida na coluna SDDLText da tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) está de acordo com o [formato de cadeia de caracteres do descritor de segurança](../secauthz/security-descriptor-string-format.md).</span><span class="sxs-lookup"><span data-stu-id="68c5c-124">The Windows Installer validates that the FormattedSDDLText string entered in the SDDLText column of the [MsiLockPermissionsEx](msilockpermissionsex-table.md) table conforms to the [Security Descriptor String Format](../secauthz/security-descriptor-string-format.md).</span></span>

<span data-ttu-id="68c5c-125">**[Windows Installer 4,5 ou anterior](not-supported-in-windows-installer-4-5.md):** Sem suporte.</span><span class="sxs-lookup"><span data-stu-id="68c5c-125">**[Windows Installer 4.5 or earlier](not-supported-in-windows-installer-4-5.md):** Not supported.</span></span> <span data-ttu-id="68c5c-126">A tabela [MsiLockPermissionsEx](msilockpermissionsex-table.md) e o tipo de dados [FormattedSDDLText](formattedsddltext.md) estão disponíveis a partir do Windows Installer 5,0.</span><span class="sxs-lookup"><span data-stu-id="68c5c-126">The [MsiLockPermissionsEx](msilockpermissionsex-table.md) table and [FormattedSDDLText](formattedsddltext.md) data type are available beginning with Windows Installer 5.0.</span></span>

 

 
